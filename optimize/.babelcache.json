{
  "{\"filename\":\"/home/vio/v3metrics/src/cli_plugin/cli.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "../utils/package_json",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "pkg"
              }
            ]
          },
          {
            "source": "../cli/command",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Command"
              }
            ]
          },
          {
            "source": "./list",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "listCommand"
              }
            ]
          },
          {
            "source": "./install",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "installCommand"
              }
            ]
          },
          {
            "source": "./remove",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "removeCommand"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _utilsPackage_json = require('../utils/package_json');\n\nvar _utilsPackage_json2 = _interopRequireDefault(_utilsPackage_json);\n\nvar _cliCommand = require('../cli/command');\n\nvar _cliCommand2 = _interopRequireDefault(_cliCommand);\n\nvar _list = require('./list');\n\nvar _list2 = _interopRequireDefault(_list);\n\nvar _install = require('./install');\n\nvar _install2 = _interopRequireDefault(_install);\n\nvar _remove = require('./remove');\n\nvar _remove2 = _interopRequireDefault(_remove);\n\nvar argv = process.env.kbnWorkerArgv ? JSON.parse(process.env.kbnWorkerArgv) : process.argv.slice();\nvar program = new _cliCommand2['default']('bin/kibana-plugin');\n\nprogram.version(_utilsPackage_json2['default'].version).description('The Kibana plugin manager enables you to install and remove plugins that ' + 'provide additional functionality to Kibana');\n\n(0, _list2['default'])(program);\n(0, _install2['default'])(program);\n(0, _remove2['default'])(program);\n\nprogram.command('help <command>').description('get the help for a specific command').action(function (cmdName) {\n  var cmd = _lodash2['default'].find(program.commands, { _name: cmdName });\n  if (!cmd) return program.error('unknown command ' + cmdName);\n  cmd.help();\n});\n\nprogram.command('*', null, { noHelp: true }).action(function (cmd, options) {\n  program.error('unknown command ' + cmd);\n});\n\n// check for no command name\nvar subCommand = argv[2] && !String(argv[2][0]).match(/^-|^\\.|\\//);\nif (!subCommand) {\n  program.defaultHelp();\n}\n\nprogram.parse(argv);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL2NsaV9wbHVnaW4vY2xpLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7c0JBQWMsUUFBUTs7OztpQ0FDTix1QkFBdUI7Ozs7MEJBQ25CLGdCQUFnQjs7OztvQkFDWixRQUFROzs7O3VCQUNMLFdBQVc7Ozs7c0JBQ1osVUFBVTs7OztBQUVwQyxJQUFJLElBQUksR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztBQUNwRyxJQUFJLE9BQU8sR0FBRyw0QkFBWSxtQkFBbUIsQ0FBQyxDQUFDOztBQUUvQyxPQUFPLENBQ04sT0FBTyxDQUFDLCtCQUFJLE9BQU8sQ0FBQyxDQUNwQixXQUFXLENBQ1YsMkVBQTJFLEdBQzNFLDRDQUE0QyxDQUM3QyxDQUFDOztBQUVGLHVCQUFZLE9BQU8sQ0FBQyxDQUFDO0FBQ3JCLDBCQUFlLE9BQU8sQ0FBQyxDQUFDO0FBQ3hCLHlCQUFjLE9BQU8sQ0FBQyxDQUFDOztBQUV2QixPQUFPLENBQ04sT0FBTyxDQUFDLGdCQUFnQixDQUFDLENBQ3pCLFdBQVcsQ0FBQyxxQ0FBcUMsQ0FBQyxDQUNsRCxNQUFNLENBQUMsVUFBVSxPQUFPLEVBQUU7QUFDekIsTUFBSSxHQUFHLEdBQUcsb0JBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLEVBQUUsRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLENBQUMsQ0FBQztBQUN2RCxNQUFJLENBQUMsR0FBRyxFQUFFLE9BQU8sT0FBTyxDQUFDLEtBQUssc0JBQW9CLE9BQU8sQ0FBRyxDQUFDO0FBQzdELEtBQUcsQ0FBQyxJQUFJLEVBQUUsQ0FBQztDQUNaLENBQUMsQ0FBQzs7QUFFSCxPQUFPLENBQ04sT0FBTyxDQUFDLEdBQUcsRUFBRSxJQUFJLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FDcEMsTUFBTSxDQUFDLFVBQVUsR0FBRyxFQUFFLE9BQU8sRUFBRTtBQUM5QixTQUFPLENBQUMsS0FBSyxzQkFBb0IsR0FBRyxDQUFHLENBQUM7Q0FDekMsQ0FBQyxDQUFDOzs7QUFHSCxJQUFJLFVBQVUsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQ25FLElBQUksQ0FBQyxVQUFVLEVBQUU7QUFDZixTQUFPLENBQUMsV0FBVyxFQUFFLENBQUM7Q0FDdkI7O0FBRUQsT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9jbGlfcGx1Z2luL2NsaS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgcGtnIGZyb20gJy4uL3V0aWxzL3BhY2thZ2VfanNvbic7XG5pbXBvcnQgQ29tbWFuZCBmcm9tICcuLi9jbGkvY29tbWFuZCc7XG5pbXBvcnQgbGlzdENvbW1hbmQgZnJvbSAnLi9saXN0JztcbmltcG9ydCBpbnN0YWxsQ29tbWFuZCBmcm9tICcuL2luc3RhbGwnO1xuaW1wb3J0IHJlbW92ZUNvbW1hbmQgZnJvbSAnLi9yZW1vdmUnO1xuXG5sZXQgYXJndiA9IHByb2Nlc3MuZW52LmtibldvcmtlckFyZ3YgPyBKU09OLnBhcnNlKHByb2Nlc3MuZW52LmtibldvcmtlckFyZ3YpIDogcHJvY2Vzcy5hcmd2LnNsaWNlKCk7XG5sZXQgcHJvZ3JhbSA9IG5ldyBDb21tYW5kKCdiaW4va2liYW5hLXBsdWdpbicpO1xuXG5wcm9ncmFtXG4udmVyc2lvbihwa2cudmVyc2lvbilcbi5kZXNjcmlwdGlvbihcbiAgJ1RoZSBLaWJhbmEgcGx1Z2luIG1hbmFnZXIgZW5hYmxlcyB5b3UgdG8gaW5zdGFsbCBhbmQgcmVtb3ZlIHBsdWdpbnMgdGhhdCAnICtcbiAgJ3Byb3ZpZGUgYWRkaXRpb25hbCBmdW5jdGlvbmFsaXR5IHRvIEtpYmFuYSdcbik7XG5cbmxpc3RDb21tYW5kKHByb2dyYW0pO1xuaW5zdGFsbENvbW1hbmQocHJvZ3JhbSk7XG5yZW1vdmVDb21tYW5kKHByb2dyYW0pO1xuXG5wcm9ncmFtXG4uY29tbWFuZCgnaGVscCA8Y29tbWFuZD4nKVxuLmRlc2NyaXB0aW9uKCdnZXQgdGhlIGhlbHAgZm9yIGEgc3BlY2lmaWMgY29tbWFuZCcpXG4uYWN0aW9uKGZ1bmN0aW9uIChjbWROYW1lKSB7XG4gIGxldCBjbWQgPSBfLmZpbmQocHJvZ3JhbS5jb21tYW5kcywgeyBfbmFtZTogY21kTmFtZSB9KTtcbiAgaWYgKCFjbWQpIHJldHVybiBwcm9ncmFtLmVycm9yKGB1bmtub3duIGNvbW1hbmQgJHtjbWROYW1lfWApO1xuICBjbWQuaGVscCgpO1xufSk7XG5cbnByb2dyYW1cbi5jb21tYW5kKCcqJywgbnVsbCwgeyBub0hlbHA6IHRydWUgfSlcbi5hY3Rpb24oZnVuY3Rpb24gKGNtZCwgb3B0aW9ucykge1xuICBwcm9ncmFtLmVycm9yKGB1bmtub3duIGNvbW1hbmQgJHtjbWR9YCk7XG59KTtcblxuLy8gY2hlY2sgZm9yIG5vIGNvbW1hbmQgbmFtZVxubGV0IHN1YkNvbW1hbmQgPSBhcmd2WzJdICYmICFTdHJpbmcoYXJndlsyXVswXSkubWF0Y2goL14tfF5cXC58XFwvLyk7XG5pZiAoIXN1YkNvbW1hbmQpIHtcbiAgcHJvZ3JhbS5kZWZhdWx0SGVscCgpO1xufVxuXG5wcm9ncmFtLnBhcnNlKGFyZ3YpO1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/cli_plugin/cli.js"
      ],
      "names": [],
      "mappings": ";;;;sBAAc,QAAQ;;;;iCACN,uBAAuB;;;;0BACnB,gBAAgB;;;;oBACZ,QAAQ;;;;uBACL,WAAW;;;;sBACZ,UAAU;;;;AAEpC,IAAI,IAAI,GAAG,OAAO,CAAC,GAAG,CAAC,aAAa,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC,GAAG,OAAO,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC;AACpG,IAAI,OAAO,GAAG,4BAAY,mBAAmB,CAAC,CAAC;;AAE/C,OAAO,CACN,OAAO,CAAC,+BAAI,OAAO,CAAC,CACpB,WAAW,CACV,2EAA2E,GAC3E,4CAA4C,CAC7C,CAAC;;AAEF,uBAAY,OAAO,CAAC,CAAC;AACrB,0BAAe,OAAO,CAAC,CAAC;AACxB,yBAAc,OAAO,CAAC,CAAC;;AAEvB,OAAO,CACN,OAAO,CAAC,gBAAgB,CAAC,CACzB,WAAW,CAAC,qCAAqC,CAAC,CAClD,MAAM,CAAC,UAAU,OAAO,EAAE;AACzB,MAAI,GAAG,GAAG,oBAAE,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,CAAC,CAAC;AACvD,MAAI,CAAC,GAAG,EAAE,OAAO,OAAO,CAAC,KAAK,sBAAoB,OAAO,CAAG,CAAC;AAC7D,KAAG,CAAC,IAAI,EAAE,CAAC;CACZ,CAAC,CAAC;;AAEH,OAAO,CACN,OAAO,CAAC,GAAG,EAAE,IAAI,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CACpC,MAAM,CAAC,UAAU,GAAG,EAAE,OAAO,EAAE;AAC9B,SAAO,CAAC,KAAK,sBAAoB,GAAG,CAAG,CAAC;CACzC,CAAC,CAAC;;;AAGH,IAAI,UAAU,GAAG,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;AACnE,IAAI,CAAC,UAAU,EAAE;AACf,SAAO,CAAC,WAAW,EAAE,CAAC;CACvB;;AAED,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC",
      "file": "/home/vio/v3metrics/src/cli_plugin/cli.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport pkg from '../utils/package_json';\nimport Command from '../cli/command';\nimport listCommand from './list';\nimport installCommand from './install';\nimport removeCommand from './remove';\n\nlet argv = process.env.kbnWorkerArgv ? JSON.parse(process.env.kbnWorkerArgv) : process.argv.slice();\nlet program = new Command('bin/kibana-plugin');\n\nprogram\n.version(pkg.version)\n.description(\n  'The Kibana plugin manager enables you to install and remove plugins that ' +\n  'provide additional functionality to Kibana'\n);\n\nlistCommand(program);\ninstallCommand(program);\nremoveCommand(program);\n\nprogram\n.command('help <command>')\n.description('get the help for a specific command')\n.action(function (cmdName) {\n  let cmd = _.find(program.commands, { _name: cmdName });\n  if (!cmd) return program.error(`unknown command ${cmdName}`);\n  cmd.help();\n});\n\nprogram\n.command('*', null, { noHelp: true })\n.action(function (cmd, options) {\n  program.error(`unknown command ${cmd}`);\n});\n\n// check for no command name\nlet subCommand = argv[2] && !String(argv[2][0]).match(/^-|^\\.|\\//);\nif (!subCommand) {\n  program.defaultHelp();\n}\n\nprogram.parse(argv);\n"
      ]
    },
    "mtime": 1467036622785
  },
  "{\"filename\":\"/home/vio/v3metrics/src/utils/package_json.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "fs",
            "imported": [
              "existsSync"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "existsSync",
                "local": "existsSync"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "join"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "join",
                "local": "join"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _fs = require('fs');\n\nvar _path = require('path');\n\nvar packageDir = undefined;\nvar packagePath = undefined;\n\nwhile (!packagePath || !(0, _fs.existsSync)(packagePath)) {\n  var prev = packageDir;\n  packageDir = prev ? (0, _path.join)(prev, '..') : __dirname;\n  packagePath = (0, _path.join)(packageDir, 'package.json');\n\n  if (prev === packageDir) {\n    // if going up a directory doesn't work, we\n    // are already at the root of the filesystem\n    throw new Error('unable to find package.json');\n  }\n}\n\nmodule.exports = require(packagePath);\nmodule.exports.__filename = packagePath;\nmodule.exports.__dirname = packageDir;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3V0aWxzL3BhY2thZ2VfanNvbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztrQkFBMkIsSUFBSTs7b0JBQ1YsTUFBTTs7QUFFM0IsSUFBSSxVQUFVLFlBQUEsQ0FBQztBQUNmLElBQUksV0FBVyxZQUFBLENBQUM7O0FBRWhCLE9BQU8sQ0FBQyxXQUFXLElBQUksQ0FBQyxvQkFBVyxXQUFXLENBQUMsRUFBRTtBQUMvQyxNQUFJLElBQUksR0FBRyxVQUFVLENBQUM7QUFDdEIsWUFBVSxHQUFHLElBQUksR0FBRyxnQkFBSyxJQUFJLEVBQUUsSUFBSSxDQUFDLEdBQUcsU0FBUyxDQUFDO0FBQ2pELGFBQVcsR0FBRyxnQkFBSyxVQUFVLEVBQUUsY0FBYyxDQUFDLENBQUM7O0FBRS9DLE1BQUksSUFBSSxLQUFLLFVBQVUsRUFBRTs7O0FBR3ZCLFVBQU0sSUFBSSxLQUFLLENBQUMsNkJBQTZCLENBQUMsQ0FBQztHQUNoRDtDQUNGOztBQUdELE1BQU0sQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQ3RDLE1BQU0sQ0FBQyxPQUFPLENBQUMsVUFBVSxHQUFHLFdBQVcsQ0FBQztBQUN4QyxNQUFNLENBQUMsT0FBTyxDQUFDLFNBQVMsR0FBRyxVQUFVLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvdXRpbHMvcGFja2FnZV9qc29uLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZXhpc3RzU3luYyB9IGZyb20gJ2ZzJztcbmltcG9ydCB7IGpvaW4gfSBmcm9tICdwYXRoJztcblxubGV0IHBhY2thZ2VEaXI7XG5sZXQgcGFja2FnZVBhdGg7XG5cbndoaWxlICghcGFja2FnZVBhdGggfHwgIWV4aXN0c1N5bmMocGFja2FnZVBhdGgpKSB7XG4gIGxldCBwcmV2ID0gcGFja2FnZURpcjtcbiAgcGFja2FnZURpciA9IHByZXYgPyBqb2luKHByZXYsICcuLicpIDogX19kaXJuYW1lO1xuICBwYWNrYWdlUGF0aCA9IGpvaW4ocGFja2FnZURpciwgJ3BhY2thZ2UuanNvbicpO1xuXG4gIGlmIChwcmV2ID09PSBwYWNrYWdlRGlyKSB7XG4gICAgLy8gaWYgZ29pbmcgdXAgYSBkaXJlY3RvcnkgZG9lc24ndCB3b3JrLCB3ZVxuICAgIC8vIGFyZSBhbHJlYWR5IGF0IHRoZSByb290IG9mIHRoZSBmaWxlc3lzdGVtXG4gICAgdGhyb3cgbmV3IEVycm9yKCd1bmFibGUgdG8gZmluZCBwYWNrYWdlLmpzb24nKTtcbiAgfVxufVxuXG5cbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShwYWNrYWdlUGF0aCk7XG5tb2R1bGUuZXhwb3J0cy5fX2ZpbGVuYW1lID0gcGFja2FnZVBhdGg7XG5tb2R1bGUuZXhwb3J0cy5fX2Rpcm5hbWUgPSBwYWNrYWdlRGlyO1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/utils/package_json.js"
      ],
      "names": [],
      "mappings": ";;kBAA2B,IAAI;;oBACV,MAAM;;AAE3B,IAAI,UAAU,YAAA,CAAC;AACf,IAAI,WAAW,YAAA,CAAC;;AAEhB,OAAO,CAAC,WAAW,IAAI,CAAC,oBAAW,WAAW,CAAC,EAAE;AAC/C,MAAI,IAAI,GAAG,UAAU,CAAC;AACtB,YAAU,GAAG,IAAI,GAAG,gBAAK,IAAI,EAAE,IAAI,CAAC,GAAG,SAAS,CAAC;AACjD,aAAW,GAAG,gBAAK,UAAU,EAAE,cAAc,CAAC,CAAC;;AAE/C,MAAI,IAAI,KAAK,UAAU,EAAE;;;AAGvB,UAAM,IAAI,KAAK,CAAC,6BAA6B,CAAC,CAAC;GAChD;CACF;;AAGD,MAAM,CAAC,OAAO,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC;AACtC,MAAM,CAAC,OAAO,CAAC,UAAU,GAAG,WAAW,CAAC;AACxC,MAAM,CAAC,OAAO,CAAC,SAAS,GAAG,UAAU,CAAC",
      "file": "/home/vio/v3metrics/src/utils/package_json.js",
      "sourcesContent": [
        "import { existsSync } from 'fs';\nimport { join } from 'path';\n\nlet packageDir;\nlet packagePath;\n\nwhile (!packagePath || !existsSync(packagePath)) {\n  let prev = packageDir;\n  packageDir = prev ? join(prev, '..') : __dirname;\n  packagePath = join(packageDir, 'package.json');\n\n  if (prev === packageDir) {\n    // if going up a directory doesn't work, we\n    // are already at the root of the filesystem\n    throw new Error('unable to find package.json');\n  }\n}\n\n\nmodule.exports = require(packagePath);\nmodule.exports.__filename = packagePath;\nmodule.exports.__dirname = packageDir;\n"
      ]
    },
    "mtime": 1467036622893
  },
  "{\"filename\":\"/home/vio/v3metrics/src/cli/command.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "./help",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "help"
              }
            ]
          },
          {
            "source": "commander",
            "imported": [
              "Command"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Command",
                "local": "Command"
              }
            ]
          },
          {
            "source": "./color",
            "imported": [
              "red"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "red",
                "local": "red"
              }
            ]
          },
          {
            "source": "./color",
            "imported": [
              "yellow"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "yellow",
                "local": "yellow"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _help = require('./help');\n\nvar _help2 = _interopRequireDefault(_help);\n\nvar _commander = require('commander');\n\nvar _color = require('./color');\n\n_commander.Command.prototype.error = function (err) {\n  if (err && err.message) err = err.message;\n\n  console.log('\\n' + (0, _color.red)(' ERROR ') + ' ' + err + '\\n\\n' + (0, _help2['default'])(this, '  ') + '\\n');\n\n  process.exit(64); // eslint-disable-line no-process-exit\n};\n\n_commander.Command.prototype.defaultHelp = function () {\n  console.log('\\n' + (0, _help2['default'])(this, '  ') + '\\n\\n');\n\n  process.exit(64); // eslint-disable-line no-process-exit\n};\n\n_commander.Command.prototype.unknownArgv = function (argv) {\n  if (argv) this.__unknownArgv = argv;\n  return this.__unknownArgv ? this.__unknownArgv.slice(0) : [];\n};\n\n/**\n * setup the command to accept arbitrary configuration via the cli\n * @return {[type]} [description]\n */\n_commander.Command.prototype.collectUnknownOptions = function () {\n  var title = 'Extra ' + this._name + ' options';\n\n  this.allowUnknownOption();\n  this.getUnknownOptions = function () {\n    var opts = {};\n    var unknowns = this.unknownArgv();\n\n    while (unknowns.length) {\n      var opt = unknowns.shift().split('=');\n      if (opt[0].slice(0, 2) !== '--') {\n        this.error(title + ' \"' + opt[0] + '\" must start with \"--\"');\n      }\n\n      if (opt.length === 1) {\n        if (!unknowns.length || unknowns[0][0] === '-') {\n          this.error(title + ' \"' + opt[0] + '\" must have a value');\n        }\n\n        opt.push(unknowns.shift());\n      }\n\n      var val = opt[1];\n      try {\n        val = JSON.parse(opt[1]);\n      } catch (e) {\n        val = opt[1];\n      }\n\n      _lodash2['default'].set(opts, opt[0].slice(2), val);\n    }\n\n    return opts;\n  };\n\n  return this;\n};\n\n_commander.Command.prototype.parseOptions = _lodash2['default'].wrap(_commander.Command.prototype.parseOptions, function (parse, argv) {\n  var opts = parse.call(this, argv);\n  this.unknownArgv(opts.unknown);\n  return opts;\n});\n\n_commander.Command.prototype.action = _lodash2['default'].wrap(_commander.Command.prototype.action, function (action, fn) {\n  return action.call(this, function () {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var ret = fn.apply(this, args);\n    if (ret && typeof ret.then === 'function') {\n      ret.then(null, function (e) {\n        console.log('FATAL CLI ERROR', e.stack);\n        process.exit(1);\n      });\n    }\n  });\n});\n\nmodule.exports = _commander.Command;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL2NsaS9jb21tYW5kLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7c0JBQWMsUUFBUTs7OztvQkFFTCxRQUFROzs7O3lCQUNELFdBQVc7O3FCQUNmLFNBQVM7O0FBRzdCLG1CQUFRLFNBQVMsQ0FBQyxLQUFLLEdBQUcsVUFBVSxHQUFHLEVBQUU7QUFDdkMsTUFBSSxHQUFHLElBQUksR0FBRyxDQUFDLE9BQU8sRUFBRSxHQUFHLEdBQUcsR0FBRyxDQUFDLE9BQU8sQ0FBQzs7QUFFMUMsU0FBTyxDQUFDLEdBQUcsUUFFWCxnQkFBSSxTQUFTLENBQUMsU0FBSSxHQUFHLFlBRXJCLHVCQUFLLElBQUksRUFBRSxJQUFJLENBQUMsUUFFZixDQUFDOztBQUVGLFNBQU8sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7Q0FDbEIsQ0FBQzs7QUFFRixtQkFBUSxTQUFTLENBQUMsV0FBVyxHQUFHLFlBQVk7QUFDMUMsU0FBTyxDQUFDLEdBQUcsUUFFWCx1QkFBSyxJQUFJLEVBQUUsSUFBSSxDQUFDLFVBR2YsQ0FBQzs7QUFFRixTQUFPLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0NBQ2xCLENBQUM7O0FBRUYsbUJBQVEsU0FBUyxDQUFDLFdBQVcsR0FBRyxVQUFVLElBQUksRUFBRTtBQUM5QyxNQUFJLElBQUksRUFBRSxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQztBQUNwQyxTQUFPLElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO0NBQzlELENBQUM7Ozs7OztBQU1GLG1CQUFRLFNBQVMsQ0FBQyxxQkFBcUIsR0FBRyxZQUFZO0FBQ3BELE1BQUksS0FBSyxjQUFZLElBQUksQ0FBQyxLQUFLLGFBQVUsQ0FBQzs7QUFFMUMsTUFBSSxDQUFDLGtCQUFrQixFQUFFLENBQUM7QUFDMUIsTUFBSSxDQUFDLGlCQUFp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b3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQgaGVscCBmcm9tICcuL2hlbHAnO1xuaW1wb3J0IHsgQ29tbWFuZCB9IGZyb20gJ2NvbW1hbmRlcic7XG5pbXBvcnQgeyByZWQgfSBmcm9tICcuL2NvbG9yJztcbmltcG9ydCB7IHllbGxvdyB9IGZyb20gJy4vY29sb3InO1xuXG5Db21tYW5kLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgaWYgKGVyciAmJiBlcnIubWVzc2FnZSkgZXJyID0gZXJyLm1lc3NhZ2U7XG5cbiAgY29uc29sZS5sb2coXG5gXG4ke3JlZCgnIEVSUk9SICcpfSAke2Vycn1cblxuJHtoZWxwKHRoaXMsICcgICcpfVxuYFxuICApO1xuXG4gIHByb2Nlc3MuZXhpdCg2NCk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcHJvY2Vzcy1leGl0XG59O1xuXG5Db21tYW5kLnByb3RvdHlwZS5kZWZhdWx0SGVscCA9IGZ1bmN0aW9uICgpIHtcbiAgY29uc29sZS5sb2coXG5gXG4ke2hlbHAodGhpcywgJyAgJyl9XG5cbmBcbiAgKTtcblxuICBwcm9jZXNzLmV4aXQoNjQpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXByb2Nlc3MtZXhpdFxufTtcblxuQ29tbWFuZC5wcm90b3R5cGUudW5rbm93bkFyZ3YgPSBmdW5jdGlvbiAoYXJndikge1xuICBpZiAoYXJndikgdGhpcy5fX3Vua25vd25Bcmd2ID0gYXJndjtcbiAgcmV0dXJuIHRoaXMuX191bmtub3duQXJndiA/IHRoaXMuX191bmtub3duQXJndi5zbGljZSgwKSA6IFtdO1xufTtcblxuLyoqXG4gKiBzZXR1cCB0aGUgY29tbWFuZCB0byBhY2NlcHQgYXJiaXRyYXJ5IGNvbmZpZ3VyYXRpb24gdmlhIHRoZSBjbGlcbiAqIEByZXR1cm4ge1t0eXBlXX0gW2Rlc2NyaXB0aW9uXVxuICovXG5Db21tYW5kLnByb3RvdHlwZS5jb2xsZWN0VW5rbm93bk9wdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gIGxldCB0aXRsZSA9IGBFeHRyYSAke3RoaXMuX25hbWV9IG9wdGlvbnNgO1xuXG4gIHRoaXMuYWxsb3dVbmtub3duT3B0aW9uKCk7XG4gIHRoaXMuZ2V0VW5rbm93bk9wdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgbGV0IG9wdHMgPSB7fTtcbiAgICBsZXQgdW5rbm93bnMgPSB0aGlzLnVua25vd25Bcmd2KCk7XG5cbiAgICB3aGlsZSAodW5rbm93bnMubGVuZ3RoKSB7XG4gICAgICBsZXQgb3B0ID0gdW5rbm93bnMuc2hpZnQoKS5zcGxpdCgnPScpO1xuICAgICAgaWYgKG9wdFswXS5zbGljZSgwLCAyKSAhPT0gJy0tJykge1xuICAgICAgICB0aGlzLmVycm9yKGAke3RpdGxlfSBcIiR7b3B0WzBdfVwiIG11c3Qgc3RhcnQgd2l0aCBcIi0tXCJgKTtcbiAgICAgIH1cblxuICAgICAgaWYgKG9wdC5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgaWYgKCF1bmtub3ducy5sZW5ndGggfHwgdW5rbm93bnNbMF1bMF0gPT09ICctJykge1xuICAgICAgICAgIHRoaXMuZXJyb3IoYCR7dGl0bGV9IFwiJHtvcHRbMF19XCIgbXVzdCBoYXZlIGEgdmFsdWVgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG9wdC5wdXNoKHVua25vd25zLnNoaWZ0KCkpO1xuICAgICAgfVxuXG4gICAgICBsZXQgdmFsID0gb3B0WzFdO1xuICAgICAgdHJ5IHsgdmFsID0gSlNPTi5wYXJzZShvcHRbMV0pOyB9XG4gICAgICBjYXRjaCAoZSkgeyB2YWwgPSBvcHRbMV07IH1cblxuICAgICAgXy5zZXQob3B0cywgb3B0WzBdLnNsaWNlKDIpLCB2YWwpO1xuICAgIH1cblxuICAgIHJldHVybiBvcHRzO1xuICB9O1xuXG4gIHJldHVybiB0aGlzO1xufTtcblxuQ29tbWFuZC5wcm90b3R5cGUucGFyc2VPcHRpb25zID0gXy53cmFwKENvbW1hbmQucHJvdG90eXBlLnBhcnNlT3B0aW9ucywgZnVuY3Rpb24gKHBhcnNlLCBhcmd2KSB7XG4gIGxldCBvcHRzID0gcGFyc2UuY2FsbCh0aGlzLCBhcmd2KTtcbiAgdGhpcy51bmtub3duQXJndihvcHRzLnVua25vd24pO1xuICByZXR1cm4gb3B0cztcbn0pO1xuXG5Db21tYW5kLnByb3RvdHlwZS5hY3Rpb24gPSBfLndyYXAoQ29tbWFuZC5wcm90b3R5cGUuYWN0aW9uLCBmdW5jdGlvbiAoYWN0aW9uLCBmbikge1xuICByZXR1cm4gYWN0aW9uLmNhbGwodGhpcywgZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICBsZXQgcmV0ID0gZm4uYXBwbHkodGhpcywgYXJncyk7XG4gICAgaWYgKHJldCAmJiB0eXBlb2YgcmV0LnRoZW4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJldC50aGVuKG51bGwsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdGQVRBTMKgQ0xJIEVSUk9SJywgZS5zdGFjayk7XG4gICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBDb21tYW5kO1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/cli/command.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/src/cli/command.js",
      "sourcesContent": [
        "import _ from 'lodash';\n\nimport help from './help';\nimport { Command } from 'commander';\nimport { red } from './color';\nimport { yellow } from './color';\n\nCommand.prototype.error = function (err) {\n  if (err && err.message) err = err.message;\n\n  console.log(\n`\n${red(' ERROR ')} ${err}\n\n${help(this, '  ')}\n`\n  );\n\n  process.exit(64); // eslint-disable-line no-process-exit\n};\n\nCommand.prototype.defaultHelp = function () {\n  console.log(\n`\n${help(this, '  ')}\n\n`\n  );\n\n  process.exit(64); // eslint-disable-line no-process-exit\n};\n\nCommand.prototype.unknownArgv = function (argv) {\n  if (argv) this.__unknownArgv = argv;\n  return this.__unknownArgv ? this.__unknownArgv.slice(0) : [];\n};\n\n/**\n * setup the command to accept arbitrary configuration via the cli\n * @return {[type]} [description]\n */\nCommand.prototype.collectUnknownOptions = function () {\n  let title = `Extra ${this._name} options`;\n\n  this.allowUnknownOption();\n  this.getUnknownOptions = function () {\n    let opts = {};\n    let unknowns = this.unknownArgv();\n\n    while (unknowns.length) {\n      let opt = unknowns.shift().split('=');\n      if (opt[0].slice(0, 2) !== '--') {\n        this.error(`${title} \"${opt[0]}\" must start with \"--\"`);\n      }\n\n      if (opt.length === 1) {\n        if (!unknowns.length || unknowns[0][0] === '-') {\n          this.error(`${title} \"${opt[0]}\" must have a value`);\n        }\n\n        opt.push(unknowns.shift());\n      }\n\n      let val = opt[1];\n      try { val = JSON.parse(opt[1]); }\n      catch (e) { val = opt[1]; }\n\n      _.set(opts, opt[0].slice(2), val);\n    }\n\n    return opts;\n  };\n\n  return this;\n};\n\nCommand.prototype.parseOptions = _.wrap(Command.prototype.parseOptions, function (parse, argv) {\n  let opts = parse.call(this, argv);\n  this.unknownArgv(opts.unknown);\n  return opts;\n});\n\nCommand.prototype.action = _.wrap(Command.prototype.action, function (action, fn) {\n  return action.call(this, function (...args) {\n    let ret = fn.apply(this, args);\n    if (ret && typeof ret.then === 'function') {\n      ret.then(null, function (e) {\n        console.log('FATAL CLI ERROR', e.stack);\n        process.exit(1);\n      });\n    }\n  });\n});\n\nmodule.exports = Command;\n"
      ]
    },
    "mtime": 1467036622785
  },
  "{\"filename\":\"/home/vio/v3metrics/src/cli/help.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nmodule.exports = function (command, spaces) {\n  if (!_lodash2['default'].size(command.commands)) {\n    return command.outputHelp();\n  }\n\n  var defCmd = _lodash2['default'].find(command.commands, function (cmd) {\n    return cmd._name === 'serve';\n  });\n\n  var desc = !command.description() ? '' : command.description();\n  var cmdDef = !defCmd ? '' : '=' + defCmd._name;\n\n  return ('\\nUsage: ' + command._name + ' [command' + cmdDef + '] [options]\\n\\n' + desc + '\\n\\nCommands:\\n' + indent(commandsSummary(command), 2) + '\\n\\n' + cmdHelp(defCmd) + '\\n').trim().replace(/^/gm, spaces || '');\n};\n\nfunction indent(str, n) {\n  return String(str || '').trim().replace(/^/gm, _lodash2['default'].repeat(' ', n));\n}\n\nfunction commandsSummary(program) {\n  var cmds = _lodash2['default'].compact(program.commands.map(function (cmd) {\n    var name = cmd._name;\n    if (name === '*') return;\n    var opts = cmd.options.length ? ' [options]' : '';\n    var args = cmd._args.map(function (arg) {\n      return humanReadableArgName(arg);\n    }).join(' ');\n\n    return [name + ' ' + opts + ' ' + args, cmd.description()];\n  }));\n\n  var cmdLColWidth = cmds.reduce(function (width, cmd) {\n    return Math.max(width, cmd[0].length);\n  }, 0);\n\n  return cmds.reduce(function (help, cmd) {\n    return '' + (help || '') + _lodash2['default'].padRight(cmd[0], cmdLColWidth) + ' ' + (cmd[1] || '') + '\\n';\n  }, '');\n}\n\nfunction cmdHelp(cmd) {\n  if (!cmd) return '';\n  return ('\\n\"' + cmd._name + '\" Options:\\n\\n' + indent(cmd.optionHelp(), 2) + '\\n').trim();\n}\n\nfunction humanReadableArgName(arg) {\n  var nameOutput = arg.name + (arg.variadic === true ? '...' : '');\n  return arg.required ? '<' + nameOutput + '>' : '[' + nameOutput + ']';\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL2NsaS9oZWxwLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7c0JBQWMsUUFBUTs7OztBQUV0QixNQUFNLENBQUMsT0FBTyxHQUFHLFVBQVUsT0FBTyxFQUFFLE1BQU0sRUFBRTtBQUMxQyxNQUFJLENBQUMsb0JBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsRUFBRTtBQUM3QixXQUFPLE9BQU8sQ0FBQyxVQUFVLEVBQUUsQ0FBQztHQUM3Qjs7QUFFRCxNQUFJLE1BQU0sR0FBRyxvQkFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRSxVQUFVLEdBQUcsRUFBRTtBQUNuRCxXQUFPLEdBQUcsQ0FBQyxLQUFLLEtBQUssT0FBTyxDQUFDO0dBQzlCLENBQUMsQ0FBQzs7QUFFSCxNQUFJLElBQUksR0FBRyxDQUFDLE9BQU8sQ0FBQyxXQUFXLEVBQUUsR0FBRyxFQUFFLEdBQUcsT0FBTyxDQUFDLFdBQVcsRUFBRSxDQUFDO0FBQy9ELE1BQUksTUFBTSxHQUFHLENBQUMsTUFBTSxHQUFHLEVBQUUsU0FBTyxNQUFNLENBQUMsS0FBSyxBQUFFLENBQUM7O0FBRS9DLFNBQU8sZUFFQSxPQUFPLENBQUMsS0FBSyxpQkFBWSxNQUFNLHVCQUV0QyxJQUFJLHVCQUdKLE1BQU0sQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDLFlBRW5DLE9BQU8sQ0FBQyxNQUFNLENBQUMsU0FFYixJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLE1BQU0sSUFBSSxFQUFFLENBQUMsQ0FBQztDQUN2QyxDQUFDOztBQUVGLFNBQVMsTUFBTSxDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUU7QUFDdEIsU0FBTyxNQUFNLENBQUMsR0FBRyxJQUFJLEVBQUUsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsb0JBQUUsTUFBTSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0NBQ2xFOztBQUVELFNBQVMsZUFBZSxDQUFDLE9BQU8sRUFBRTtBQUNoQyxNQUFJLElBQUksR0FBRyxvQkFBRSxPQUFPLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsVUFBVSxHQUFHLEVBQUU7QUFDdkQsUUFBSSxJQUFJLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQztBQUNyQixRQUFJLElBQUksS0FBSyxHQUFHLEVBQUUsT0FBTztBQUN6QixRQUFJLElBQUksR0FBRyxHQUFHLENBQUMsT0FBTyxDQUFDLE1BQU0sR0FBRyxZQUFZLEdBQUcsRUFBRSxDQUFDO0FBQ2xELFFBQUksSUFBSSxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLFVBQVUsR0FBRyxFQUFFO0FBQ3RDLGFBQU8sb0JBQW9CLENBQUMsR0FBRyxDQUFDLENBQUM7S0FDbEMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQzs7QUFFYixXQUFPLENBQ0YsSUFBSSxTQUFJLElBQUksU0FBSSxJQUFJLEVBQ3ZCLEdBQUcsQ0FBQyxXQUFXLEVBQUUsQ0FDbEIsQ0FBQztHQUNILENBQUMsQ0FBQyxDQUFDOztBQUVKLE1BQUksWUFBWSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsVUFBVSxLQUFLLEVBQUUsR0FBRyxFQUFFO0FBQ25ELFdBQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0dBQ3ZDLEVBQUUsQ0FBQyxDQUFDLENBQUM7O0FBRU4sU0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLFVBQVUsSUFBSSxFQUFFLEdBQUcsRUFBRTtBQUN0QyxpQkFBVSxJQUFJLElBQUksRUFBRSxDQUFBLEdBQUcsb0JBQUUsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxZQUFZLENBQUMsVUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFBLFFBQUs7R0FDN0UsRUFBRSxFQUFFLENBQUMsQ0FBQztDQUNSOztBQUVELFNBQVMsT0FBTyxDQUFDLEdBQUcsRUFBRTtBQUNwQixNQUFJLENBQUMsR0FBRyxFQUFFLE9BQU8sRUFBRSxDQUFDO0FBQ3BCLFNBQU8sU0FHTixHQUFHLENBQUMsS0FBSyxzQkFFVixNQUFNLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBRSxFQUFFLENBQUMsQ0FBQyxTQUd6QixJQUFJLEVBQUUsQ0FBQztDQUVWOztBQUVELFNBQVMsb0JBQW9CLENBQUMsR0FBRyxFQUFFO0FBQ2pDLE1BQUksVUFBVSxHQUFHLEdBQUcsQ0FBQyxJQUFJLElBQUksR0FBRyxDQUFDLFFBQVEsS0FBSyxJQUFJLEdBQUcsS0FBSyxHQUFHLEVBQUUsQ0FBQSxBQUFDLENBQUM7QUFDakUsU0FBTyxHQUFHLENBQUMsUUFBUSxHQUFHLEdBQUcsR0FBRyxVQUFVLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxVQUFVLEdBQUcsR0FBRyxDQUFDO0NBQ3ZFIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL2NsaS9oZWxwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY29tbWFuZCwgc3BhY2VzKSB7XG4gIGlmICghXy5zaXplKGNvbW1hbmQuY29tbWFuZHMpKSB7XG4gICAgcmV0dXJuIGNvbW1hbmQub3V0cHV0SGVscCgpO1xuICB9XG5cbiAgbGV0IGRlZkNtZCA9IF8uZmluZChjb21tYW5kLmNvbW1hbmRzLCBmdW5jdGlvbiAoY21kKSB7XG4gICAgcmV0dXJuIGNtZC5fbmFtZSA9PT0gJ3NlcnZlJztcbiAgfSk7XG5cbiAgbGV0IGRlc2MgPSAhY29tbWFuZC5kZXNjcmlwdGlvbigpID8gJycgOiBjb21tYW5kLmRlc2NyaXB0aW9uKCk7XG4gIGxldCBjbWREZWYgPSAhZGVmQ21kID8gJycgOiBgPSR7ZGVmQ21kLl9uYW1lfWA7XG5cbiAgcmV0dXJuIChcbmBcblVzYWdlOiAke2NvbW1hbmQuX25hbWV9IFtjb21tYW5kJHtjbWREZWZ9XSBbb3B0aW9uc11cblxuJHtkZXNjfVxuXG5Db21tYW5kczpcbiR7aW5kZW50KGNvbW1hbmRzU3VtbWFyeShjb21tYW5kKSwgMil9XG5cbiR7Y21kSGVscChkZWZDbWQpfVxuYFxuICApLnRyaW0oKS5yZXBsYWNlKC9eL2dtLCBzcGFjZXMgfHwgJycpO1xufTtcblxuZnVuY3Rpb24gaW5kZW50KHN0ciwgbikge1xuICByZXR1cm4gU3RyaW5nKHN0ciB8fCAnJykudHJpbSgpLnJlcGxhY2UoL14vZ20sIF8ucmVwZWF0KCcgJywgbikpO1xufVxuXG5mdW5jdGlvbiBjb21tYW5kc1N1bW1hcnkocHJvZ3JhbSkge1xuICBsZXQgY21kcyA9IF8uY29tcGFjdChwcm9ncmFtLmNvbW1hbmRzLm1hcChmdW5jdGlvbiAoY21kKSB7XG4gICAgbGV0IG5hbWUgPSBjbWQuX25hbWU7XG4gICAgaWYgKG5hbWUgPT09ICcqJykgcmV0dXJuO1xuICAgIGxldCBvcHRzID0gY21kLm9wdGlvbnMubGVuZ3RoID8gJyBbb3B0aW9uc10nIDogJyc7XG4gICAgbGV0IGFyZ3MgPSBjbWQuX2FyZ3MubWFwKGZ1bmN0aW9uIChhcmcpIHtcbiAgICAgIHJldHVybiBodW1hblJlYWRhYmxlQXJnTmFtZShhcmcpO1xuICAgIH0pLmpvaW4oJyAnKTtcblxuICAgIHJldHVybiBbXG4gICAgICBgJHtuYW1lfSAke29wdHN9ICR7YXJnc31gLFxuICAgICAgY21kLmRlc2NyaXB0aW9uKClcbiAgICBdO1xuICB9KSk7XG5cbiAgbGV0IGNtZExDb2xXaWR0aCA9IGNtZHMucmVkdWNlKGZ1bmN0aW9uICh3aWR0aCwgY21kKSB7XG4gICAgcmV0dXJuIE1hdGgubWF4KHdpZHRoLCBjbWRbMF0ubGVuZ3RoKTtcbiAgfSwgMCk7XG5cbiAgcmV0dXJuIGNtZHMucmVkdWNlKGZ1bmN0aW9uIChoZWxwLCBjbWQpIHtcbiAgICByZXR1cm4gYCR7aGVscCB8fCAnJ30ke18ucGFkUmlnaHQoY21kWzBdLCBjbWRMQ29sV2lkdGgpfSAke2NtZFsxXSB8fCAnJ31cXG5gO1xuICB9LCAnJyk7XG59XG5cbmZ1bmN0aW9uIGNtZEhlbHAoY21kKSB7XG4gIGlmICghY21kKSByZXR1cm4gJyc7XG4gIHJldHVybiAoXG5cbmBcblwiJHtjbWQuX25hbWV9XCIgT3B0aW9uczpcblxuJHtpbmRlbnQoY21kLm9wdGlvbkhlbHAoKSwgMil9XG5gXG5cbiAgKS50cmltKCk7XG5cbn1cblxuZnVuY3Rpb24gaHVtYW5SZWFkYWJsZUFyZ05hbWUoYXJnKSB7XG4gIGxldCBuYW1lT3V0cHV0ID0gYXJnLm5hbWUgKyAoYXJnLnZhcmlhZGljID09PSB0cnVlID8gJy4uLicgOiAnJyk7XG4gIHJldHVybiBhcmcucmVxdWlyZWQgPyAnPCcgKyBuYW1lT3V0cHV0ICsgJz4nIDogJ1snICsgbmFtZU91dHB1dCArICddJztcbn1cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/cli/help.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/src/cli/help.js",
      "sourcesContent": [
        "import _ from 'lodash';\n\nmodule.exports = function (command, spaces) {\n  if (!_.size(command.commands)) {\n    return command.outputHelp();\n  }\n\n  let defCmd = _.find(command.commands, function (cmd) {\n    return cmd._name === 'serve';\n  });\n\n  let desc = !command.description() ? '' : command.description();\n  let cmdDef = !defCmd ? '' : `=${defCmd._name}`;\n\n  return (\n`\nUsage: ${command._name} [command${cmdDef}] [options]\n\n${desc}\n\nCommands:\n${indent(commandsSummary(command), 2)}\n\n${cmdHelp(defCmd)}\n`\n  ).trim().replace(/^/gm, spaces || '');\n};\n\nfunction indent(str, n) {\n  return String(str || '').trim().replace(/^/gm, _.repeat(' ', n));\n}\n\nfunction commandsSummary(program) {\n  let cmds = _.compact(program.commands.map(function (cmd) {\n    let name = cmd._name;\n    if (name === '*') return;\n    let opts = cmd.options.length ? ' [options]' : '';\n    let args = cmd._args.map(function (arg) {\n      return humanReadableArgName(arg);\n    }).join(' ');\n\n    return [\n      `${name} ${opts} ${args}`,\n      cmd.description()\n    ];\n  }));\n\n  let cmdLColWidth = cmds.reduce(function (width, cmd) {\n    return Math.max(width, cmd[0].length);\n  }, 0);\n\n  return cmds.reduce(function (help, cmd) {\n    return `${help || ''}${_.padRight(cmd[0], cmdLColWidth)} ${cmd[1] || ''}\\n`;\n  }, '');\n}\n\nfunction cmdHelp(cmd) {\n  if (!cmd) return '';\n  return (\n\n`\n\"${cmd._name}\" Options:\n\n${indent(cmd.optionHelp(), 2)}\n`\n\n  ).trim();\n\n}\n\nfunction humanReadableArgName(arg) {\n  let nameOutput = arg.name + (arg.variadic === true ? '...' : '');\n  return arg.required ? '<' + nameOutput + '>' : '[' + nameOutput + ']';\n}\n"
      ]
    },
    "mtime": 1467036622785
  },
  "{\"filename\":\"/home/vio/v3metrics/src/cli/color.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "ansicolors",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "ansicolors"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _ansicolors = require('ansicolors');\n\nvar _ansicolors2 = _interopRequireDefault(_ansicolors);\n\nexports.green = _lodash2['default'].flow(_ansicolors2['default'].black, _ansicolors2['default'].bgGreen);\nexports.red = _lodash2['default'].flow(_ansicolors2['default'].white, _ansicolors2['default'].bgRed);\nexports.yellow = _lodash2['default'].flow(_ansicolors2['default'].black, _ansicolors2['default'].bgYellow);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL2NsaS9jb2xvci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O3NCQUNjLFFBQVE7Ozs7MEJBQ0MsWUFBWTs7OztBQUVuQyxPQUFPLENBQUMsS0FBSyxHQUFHLG9CQUFFLElBQUksQ0FBQyx3QkFBVyxLQUFLLEVBQUUsd0JBQVcsT0FBTyxDQUFDLENBQUM7QUFDN0QsT0FBTyxDQUFDLEdBQUcsR0FBRyxvQkFBRSxJQUFJLENBQUMsd0JBQVcsS0FBSyxFQUFFLHdCQUFXLEtBQUssQ0FBQyxDQUFDO0FBQ3pELE9BQU8sQ0FBQyxNQUFNLEdBQUcsb0JBQUUsSUFBSSxDQUFDLHdCQUFXLEtBQUssRUFBRSx3QkFBVyxRQUFRLENBQUMsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9jbGkvY29sb3IuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgYW5zaWNvbG9ycyBmcm9tICdhbnNpY29sb3JzJztcblxuZXhwb3J0cy5ncmVlbiA9IF8uZmxvdyhhbnNpY29sb3JzLmJsYWNrLCBhbnNpY29sb3JzLmJnR3JlZW4pO1xuZXhwb3J0cy5yZWQgPSBfLmZsb3coYW5zaWNvbG9ycy53aGl0ZSwgYW5zaWNvbG9ycy5iZ1JlZCk7XG5leHBvcnRzLnllbGxvdyA9IF8uZmxvdyhhbnNpY29sb3JzLmJsYWNrLCBhbnNpY29sb3JzLmJnWWVsbG93KTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/cli/color.js"
      ],
      "names": [],
      "mappings": ";;;;sBACc,QAAQ;;;;0BACC,YAAY;;;;AAEnC,OAAO,CAAC,KAAK,GAAG,oBAAE,IAAI,CAAC,wBAAW,KAAK,EAAE,wBAAW,OAAO,CAAC,CAAC;AAC7D,OAAO,CAAC,GAAG,GAAG,oBAAE,IAAI,CAAC,wBAAW,KAAK,EAAE,wBAAW,KAAK,CAAC,CAAC;AACzD,OAAO,CAAC,MAAM,GAAG,oBAAE,IAAI,CAAC,wBAAW,KAAK,EAAE,wBAAW,QAAQ,CAAC,CAAC",
      "file": "/home/vio/v3metrics/src/cli/color.js",
      "sourcesContent": [
        "\nimport _ from 'lodash';\nimport ansicolors from 'ansicolors';\n\nexports.green = _.flow(ansicolors.black, ansicolors.bgGreen);\nexports.red = _.flow(ansicolors.white, ansicolors.bgRed);\nexports.yellow = _.flow(ansicolors.black, ansicolors.bgYellow);\n"
      ]
    },
    "mtime": 1467036622785
  },
  "{\"filename\":\"/home/vio/v3metrics/src/cli_plugin/list/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "../../utils",
            "imported": [
              "fromRoot"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "fromRoot",
                "local": "fromRoot"
              }
            ]
          },
          {
            "source": "./list",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "list"
              }
            ]
          },
          {
            "source": "../lib/logger",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Logger"
              }
            ]
          },
          {
            "source": "./settings",
            "imported": [
              "parse"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "parse",
                "local": "parse"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "pluginList",
            "program"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "pluginList",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "program",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = pluginList;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _utils = require('../../utils');\n\nvar _list = require('./list');\n\nvar _list2 = _interopRequireDefault(_list);\n\nvar _libLogger = require('../lib/logger');\n\nvar _libLogger2 = _interopRequireDefault(_libLogger);\n\nvar _settings = require('./settings');\n\nfunction processCommand(command, options) {\n  var settings = undefined;\n  try {\n    settings = (0, _settings.parse)(command, options);\n  } catch (ex) {\n    //The logger has not yet been initialized.\n    console.error(ex.message);\n    process.exit(64); // eslint-disable-line no-process-exit\n  }\n\n  var logger = new _libLogger2['default'](settings);\n  (0, _list2['default'])(settings, logger);\n}\n\nfunction pluginList(program) {\n  program.command('list').option('-d, --plugin-dir <path>', 'path to the directory where plugins are stored', (0, _utils.fromRoot)('installedPlugins')).description('list installed plugins').action(processCommand);\n}\n\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL2NsaV9wbHVnaW4vbGlzdC9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztxQkFtQndCLFVBQVU7Ozs7cUJBbkJULGFBQWE7O29CQUNyQixRQUFROzs7O3lCQUNOLGVBQWU7Ozs7d0JBQ1osWUFBWTs7QUFFbEMsU0FBUyxjQUFjLENBQUMsT0FBTyxFQUFFLE9BQU8sRUFBRTtBQUN4QyxNQUFJLFFBQVEsWUFBQSxDQUFDO0FBQ2IsTUFBSTtBQUNGLFlBQVEsR0FBRyxxQkFBTSxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUM7R0FDcEMsQ0FBQyxPQUFPLEVBQUUsRUFBRTs7QUFFWCxXQUFPLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUMxQixXQUFPLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0dBQ2xCOztBQUVELE1BQU0sTUFBTSxHQUFHLDJCQUFXLFFBQVEsQ0FBQyxDQUFDO0FBQ3BDLHlCQUFLLFFBQVEsRUFBRSxNQUFNLENBQUMsQ0FBQztDQUN4Qjs7QUFFYyxTQUFTLFVBQVUsQ0FBQyxPQUFPLEVBQUU7QUFDMUMsU0FBTyxDQUNKLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FDZixNQUFNLENBQ0wseUJBQXlCLEVBQ3pCLGdEQUFnRCxFQUNoRCxxQkFBUyxrQkFBa0IsQ0FBQyxDQUM3QixDQUNBLFdBQVcsQ0FBQyx3QkFBd0IsQ0FBQyxDQUNyQyxNQUFNLENBQUMsY0FBYyxDQUFDLENBQUM7Q0FDM0I7O0FBQUEsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9jbGlfcGx1Z2luL2xpc3QvaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBmcm9tUm9vdCB9IGZyb20gJy4uLy4uL3V0aWxzJztcbmltcG9ydCBsaXN0IGZyb20gJy4vbGlzdCc7XG5pbXBvcnQgTG9nZ2VyIGZyb20gJy4uL2xpYi9sb2dnZXInO1xuaW1wb3J0IHsgcGFyc2UgfSBmcm9tICcuL3NldHRpbmdzJztcblxuZnVuY3Rpb24gcHJvY2Vzc0NvbW1hbmQoY29tbWFuZCwgb3B0aW9ucykge1xuICBsZXQgc2V0dGluZ3M7XG4gIHRyeSB7XG4gICAgc2V0dGluZ3MgPSBwYXJzZShjb21tYW5kLCBvcHRpb25zKTtcbiAgfSBjYXRjaCAoZXgpIHtcbiAgICAvL1RoZSBsb2dnZXIgaGFzIG5vdCB5ZXQgYmVlbiBpbml0aWFsaXplZC5cbiAgICBjb25zb2xlLmVycm9yKGV4Lm1lc3NhZ2UpO1xuICAgIHByb2Nlc3MuZXhpdCg2NCk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcHJvY2Vzcy1leGl0XG4gIH1cblxuICBjb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKHNldHRpbmdzKTtcbiAgbGlzdChzZXR0aW5ncywgbG9nZ2VyKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcGx1Z2luTGlzdChwcm9ncmFtKSB7XG4gIHByb2dyYW1cbiAgICAuY29tbWFuZCgnbGlzdCcpXG4gICAgLm9wdGlvbihcbiAgICAgICctZCwgLS1wbHVnaW4tZGlyIDxwYXRoPicsXG4gICAgICAncGF0aCB0byB0aGUgZGlyZWN0b3J5IHdoZXJlIHBsdWdpbnMgYXJlIHN0b3JlZCcsXG4gICAgICBmcm9tUm9vdCgnaW5zdGFsbGVkUGx1Z2lucycpXG4gICAgKVxuICAgIC5kZXNjcmlwdGlvbignbGlzdCBpbnN0YWxsZWQgcGx1Z2lucycpXG4gICAgLmFjdGlvbihwcm9jZXNzQ29tbWFuZCk7XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/cli_plugin/list/index.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAmBwB,UAAU;;;;qBAnBT,aAAa;;oBACrB,QAAQ;;;;yBACN,eAAe;;;;wBACZ,YAAY;;AAElC,SAAS,cAAc,CAAC,OAAO,EAAE,OAAO,EAAE;AACxC,MAAI,QAAQ,YAAA,CAAC;AACb,MAAI;AACF,YAAQ,GAAG,qBAAM,OAAO,EAAE,OAAO,CAAC,CAAC;GACpC,CAAC,OAAO,EAAE,EAAE;;AAEX,WAAO,CAAC,KAAK,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC;AAC1B,WAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;GAClB;;AAED,MAAM,MAAM,GAAG,2BAAW,QAAQ,CAAC,CAAC;AACpC,yBAAK,QAAQ,EAAE,MAAM,CAAC,CAAC;CACxB;;AAEc,SAAS,UAAU,CAAC,OAAO,EAAE;AAC1C,SAAO,CACJ,OAAO,CAAC,MAAM,CAAC,CACf,MAAM,CACL,yBAAyB,EACzB,gDAAgD,EAChD,qBAAS,kBAAkB,CAAC,CAC7B,CACA,WAAW,CAAC,wBAAwB,CAAC,CACrC,MAAM,CAAC,cAAc,CAAC,CAAC;CAC3B;;AAAA,CAAC",
      "file": "/home/vio/v3metrics/src/cli_plugin/list/index.js",
      "sourcesContent": [
        "import { fromRoot } from '../../utils';\nimport list from './list';\nimport Logger from '../lib/logger';\nimport { parse } from './settings';\n\nfunction processCommand(command, options) {\n  let settings;\n  try {\n    settings = parse(command, options);\n  } catch (ex) {\n    //The logger has not yet been initialized.\n    console.error(ex.message);\n    process.exit(64); // eslint-disable-line no-process-exit\n  }\n\n  const logger = new Logger(settings);\n  list(settings, logger);\n}\n\nexport default function pluginList(program) {\n  program\n    .command('list')\n    .option(\n      '-d, --plugin-dir <path>',\n      'path to the directory where plugins are stored',\n      fromRoot('installedPlugins')\n    )\n    .description('list installed plugins')\n    .action(processCommand);\n};\n"
      ]
    },
    "mtime": 1467036622785
  },
  "{\"filename\":\"/home/vio/v3metrics/src/utils/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "Binder",
            "BinderFor",
            "fromRoot",
            "pkg"
          ],
          "specifiers": [
            {
              "kind": "external",
              "local": "Binder",
              "exported": "Binder",
              "source": "./binder"
            },
            {
              "kind": "external",
              "local": "BinderFor",
              "exported": "BinderFor",
              "source": "./binder_for"
            },
            {
              "kind": "external",
              "local": "fromRoot",
              "exported": "fromRoot",
              "source": "./from_root"
            },
            {
              "kind": "external",
              "local": "pkg",
              "exported": "pkg",
              "source": "./package_json"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _binder = require('./binder');\n\nvar _binder2 = _interopRequireDefault(_binder);\n\nexports.Binder = _binder2['default'];\n\nvar _binder_for = require('./binder_for');\n\nvar _binder_for2 = _interopRequireDefault(_binder_for);\n\nexports.BinderFor = _binder_for2['default'];\n\nvar _from_root = require('./from_root');\n\nvar _from_root2 = _interopRequireDefault(_from_root);\n\nexports.fromRoot = _from_root2['default'];\n\nvar _package_json = require('./package_json');\n\nvar _package_json2 = _interopRequireDefault(_package_json);\n\nexports.pkg = _package_json2['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3V0aWxzL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O3NCQUFtQixVQUFVOzs7O1FBQXRCLE1BQU07OzBCQUNTLGNBQWM7Ozs7UUFBN0IsU0FBUzs7eUJBQ0ssYUFBYTs7OztRQUEzQixRQUFROzs0QkFDQyxnQkFBZ0I7Ozs7UUFBekIsR0FBRyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy91dGlscy9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBCaW5kZXIgZnJvbSAnLi9iaW5kZXInO1xuZXhwb3J0IEJpbmRlckZvciBmcm9tICcuL2JpbmRlcl9mb3InO1xuZXhwb3J0IGZyb21Sb290IGZyb20gJy4vZnJvbV9yb290JztcbmV4cG9ydCBwa2cgZnJvbSAnLi9wYWNrYWdlX2pzb24nO1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/utils/index.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;sBAAmB,UAAU;;;;QAAtB,MAAM;;0BACS,cAAc;;;;QAA7B,SAAS;;yBACK,aAAa;;;;QAA3B,QAAQ;;4BACC,gBAAgB;;;;QAAzB,GAAG",
      "file": "/home/vio/v3metrics/src/utils/index.js",
      "sourcesContent": [
        "export Binder from './binder';\nexport BinderFor from './binder_for';\nexport fromRoot from './from_root';\nexport pkg from './package_json';\n"
      ]
    },
    "mtime": 1467036622893
  },
  "{\"filename\":\"/home/vio/v3metrics/src/utils/binder.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "Binder"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "Binder",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check"
      ]
    },
    "ignored": false,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Binder = (function () {\n  function Binder() {\n    _classCallCheck(this, Binder);\n\n    this.disposal = [];\n  }\n\n  _createClass(Binder, [{\n    key: \"on\",\n    value: function on(emitter) {\n      for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      var on = emitter.on || emitter.addListener;\n      var off = emitter.off || emitter.removeListener;\n\n      on.apply(emitter, args);\n      this.disposal.push(function () {\n        return off.apply(emitter, args);\n      });\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      var destroyers = this.disposal;\n      this.disposal = [];\n      destroyers.forEach(function (fn) {\n        return fn();\n      });\n    }\n  }]);\n\n  return Binder;\n})();\n\nexports[\"default\"] = Binder;\nmodule.exports = exports[\"default\"];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3V0aWxzL2JpbmRlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0lBQXFCLE1BQU07QUFDZCxXQURRLE1BQU0sR0FDWDswQkFESyxNQUFNOztBQUV2QixRQUFJLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQztHQUNwQjs7ZUFIa0IsTUFBTTs7V0FLdkIsWUFBQyxPQUFPLEVBQVc7d0NBQU4sSUFBSTtBQUFKLFlBQUk7OztBQUNqQixVQUFNLEVBQUUsR0FBRyxPQUFPLENBQUMsRUFBRSxJQUFJLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDN0MsVUFBTSxHQUFHLEdBQUcsT0FBTyxDQUFDLEdBQUcsSUFBSSxPQUFPLENBQUMsY0FBYyxDQUFDOztBQUVsRCxRQUFFLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsQ0FBQztBQUN4QixVQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQztlQUFNLEdBQUcsQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQztPQUFBLENBQUMsQ0FBQztLQUNwRDs7O1dBRU0sbUJBQUc7QUFDUixVQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDO0FBQ2pDLFVBQUksQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFDO0FBQ25CLGdCQUFVLENBQUMsT0FBTyxDQUFDLFVBQUEsRUFBRTtlQUFJLEVBQUUsRUFBRTtPQUFBLENBQUMsQ0FBQztLQUNoQzs7O1NBakJrQixNQUFNOzs7cUJBQU4sTUFBTSIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy91dGlscy9iaW5kZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBCaW5kZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmRpc3Bvc2FsID0gW107XG4gIH1cblxuICBvbihlbWl0dGVyLCAuLi5hcmdzKSB7XG4gICAgY29uc3Qgb24gPSBlbWl0dGVyLm9uIHx8IGVtaXR0ZXIuYWRkTGlzdGVuZXI7XG4gICAgY29uc3Qgb2ZmID0gZW1pdHRlci5vZmYgfHwgZW1pdHRlci5yZW1vdmVMaXN0ZW5lcjtcblxuICAgIG9uLmFwcGx5KGVtaXR0ZXIsIGFyZ3MpO1xuICAgIHRoaXMuZGlzcG9zYWwucHVzaCgoKSA9PiBvZmYuYXBwbHkoZW1pdHRlciwgYXJncykpO1xuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICBjb25zdCBkZXN0cm95ZXJzID0gdGhpcy5kaXNwb3NhbDtcbiAgICB0aGlzLmRpc3Bvc2FsID0gW107XG4gICAgZGVzdHJveWVycy5mb3JFYWNoKGZuID0+IGZuKCkpO1xuICB9XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/utils/binder.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;IAAqB,MAAM;AACd,WADQ,MAAM,GACX;0BADK,MAAM;;AAEvB,QAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;GACpB;;eAHkB,MAAM;;WAKvB,YAAC,OAAO,EAAW;wCAAN,IAAI;AAAJ,YAAI;;;AACjB,UAAM,EAAE,GAAG,OAAO,CAAC,EAAE,IAAI,OAAO,CAAC,WAAW,CAAC;AAC7C,UAAM,GAAG,GAAG,OAAO,CAAC,GAAG,IAAI,OAAO,CAAC,cAAc,CAAC;;AAElD,QAAE,CAAC,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;AACxB,UAAI,CAAC,QAAQ,CAAC,IAAI,CAAC;eAAM,GAAG,CAAC,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC;OAAA,CAAC,CAAC;KACpD;;;WAEM,mBAAG;AACR,UAAM,UAAU,GAAG,IAAI,CAAC,QAAQ,CAAC;AACjC,UAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;AACnB,gBAAU,CAAC,OAAO,CAAC,UAAA,EAAE;eAAI,EAAE,EAAE;OAAA,CAAC,CAAC;KAChC;;;SAjBkB,MAAM;;;qBAAN,MAAM",
      "file": "/home/vio/v3metrics/src/utils/binder.js",
      "sourcesContent": [
        "export default class Binder {\n  constructor() {\n    this.disposal = [];\n  }\n\n  on(emitter, ...args) {\n    const on = emitter.on || emitter.addListener;\n    const off = emitter.off || emitter.removeListener;\n\n    on.apply(emitter, args);\n    this.disposal.push(() => off.apply(emitter, args));\n  }\n\n  destroy() {\n    const destroyers = this.disposal;\n    this.disposal = [];\n    destroyers.forEach(fn => fn());\n  }\n}\n"
      ]
    },
    "mtime": 1467036622893
  },
  "{\"filename\":\"/home/vio/v3metrics/src/utils/binder_for.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./",
            "imported": [
              "Binder"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Binder",
                "local": "Binder"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "BinderFor"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "BinderFor",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "get",
        "inherits",
        "create-class",
        "class-call-check"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _ = require('./');\n\nvar BinderFor = (function (_Binder) {\n  _inherits(BinderFor, _Binder);\n\n  function BinderFor(emitter) {\n    _classCallCheck(this, BinderFor);\n\n    _get(Object.getPrototypeOf(BinderFor.prototype), 'constructor', this).call(this);\n    this.emitter = emitter;\n  }\n\n  _createClass(BinderFor, [{\n    key: 'on',\n    value: function on() {\n      var _get2;\n\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      (_get2 = _get(Object.getPrototypeOf(BinderFor.prototype), 'on', this)).call.apply(_get2, [this, this.emitter].concat(args));\n    }\n  }]);\n\n  return BinderFor;\n})(_.Binder);\n\nexports['default'] = BinderFor;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3V0aWxzL2JpbmRlcl9mb3IuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Z0JBQXVCLElBQUk7O0lBRU4sU0FBUztZQUFULFNBQVM7O0FBQ2pCLFdBRFEsU0FBUyxDQUNoQixPQUFPLEVBQUU7MEJBREYsU0FBUzs7QUFFMUIsK0JBRmlCLFNBQVMsNkNBRWxCO0FBQ1IsUUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUM7R0FDeEI7O2VBSmtCLFNBQVM7O1dBTTFCLGNBQVU7Ozt3Q0FBTixJQUFJO0FBQUosWUFBSTs7O0FBQ1IsMENBUGlCLFNBQVMsbURBT2pCLElBQUksQ0FBQyxPQUFPLFNBQUssSUFBSSxHQUFFO0tBQ2pDOzs7U0FSa0IsU0FBUzs7O3FCQUFULFNBQVMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvdXRpbHMvYmluZGVyX2Zvci5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJpbmRlciB9IGZyb20gJy4vJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmluZGVyRm9yIGV4dGVuZHMgQmluZGVyIHtcbiAgY29uc3RydWN0b3IoZW1pdHRlcikge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5lbWl0dGVyID0gZW1pdHRlcjtcbiAgfVxuXG4gIG9uKC4uLmFyZ3MpIHtcbiAgICBzdXBlci5vbih0aGlzLmVtaXR0ZXIsIC4uLmFyZ3MpO1xuICB9XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/utils/binder_for.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;;;;;gBAAuB,IAAI;;IAEN,SAAS;YAAT,SAAS;;AACjB,WADQ,SAAS,CAChB,OAAO,EAAE;0BADF,SAAS;;AAE1B,+BAFiB,SAAS,6CAElB;AACR,QAAI,CAAC,OAAO,GAAG,OAAO,CAAC;GACxB;;eAJkB,SAAS;;WAM1B,cAAU;;;wCAAN,IAAI;AAAJ,YAAI;;;AACR,0CAPiB,SAAS,mDAOjB,IAAI,CAAC,OAAO,SAAK,IAAI,GAAE;KACjC;;;SARkB,SAAS;;;qBAAT,SAAS",
      "file": "/home/vio/v3metrics/src/utils/binder_for.js",
      "sourcesContent": [
        "import { Binder } from './';\n\nexport default class BinderFor extends Binder {\n  constructor(emitter) {\n    super();\n    this.emitter = emitter;\n  }\n\n  on(...args) {\n    super.on(this.emitter, ...args);\n  }\n}\n"
      ]
    },
    "mtime": 1467036622893
  },
  "{\"filename\":\"/home/vio/v3metrics/src/utils/from_root.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "./package_json",
            "imported": [
              "__dirname"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "__dirname",
                "local": "root"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "join",
              "dirname",
              "normalize"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "join",
                "local": "join"
              },
              {
                "kind": "named",
                "imported": "dirname",
                "local": "dirname"
              },
              {
                "kind": "named",
                "imported": "normalize",
                "local": "normalize"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _package_json = require('./package_json');\n\nvar _path = require('path');\n\nmodule.exports = _lodash2['default'].flow(_lodash2['default'].partial(_path.join, _package_json.__dirname), _path.normalize);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3V0aWxzL2Zyb21fcm9vdC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O3NCQUFjLFFBQVE7Ozs7NEJBQ1ksZ0JBQWdCOztvQkFDVCxNQUFNOztBQUUvQyxNQUFNLENBQUMsT0FBTyxHQUFHLG9CQUFFLElBQUksQ0FBQyxvQkFBRSxPQUFPLHFDQUFZLGtCQUFZLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvdXRpbHMvZnJvbV9yb290LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IF9fZGlybmFtZSBhcyByb290IH0gZnJvbSAnLi9wYWNrYWdlX2pzb24nO1xuaW1wb3J0IHsgam9pbiwgZGlybmFtZSwgbm9ybWFsaXplIH0gZnJvbSAncGF0aCc7XG5cbm1vZHVsZS5leHBvcnRzID0gXy5mbG93KF8ucGFydGlhbChqb2luLCByb290KSwgbm9ybWFsaXplKTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/utils/from_root.js"
      ],
      "names": [],
      "mappings": ";;;;sBAAc,QAAQ;;;;4BACY,gBAAgB;;oBACT,MAAM;;AAE/C,MAAM,CAAC,OAAO,GAAG,oBAAE,IAAI,CAAC,oBAAE,OAAO,qCAAY,kBAAY,CAAC",
      "file": "/home/vio/v3metrics/src/utils/from_root.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport { __dirname as root } from './package_json';\nimport { join, dirname, normalize } from 'path';\n\nmodule.exports = _.flow(_.partial(join, root), normalize);\n"
      ]
    },
    "mtime": 1467036622893
  },
  "{\"filename\":\"/home/vio/v3metrics/src/cli_plugin/list/list.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "fs",
            "imported": [
              "statSync",
              "readdirSync",
              "readFileSync"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "statSync",
                "local": "statSync"
              },
              {
                "kind": "named",
                "imported": "readdirSync",
                "local": "readdirSync"
              },
              {
                "kind": "named",
                "imported": "readFileSync",
                "local": "readFileSync"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "join"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "join",
                "local": "join"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "list",
            "settings",
            "logger"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "list",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "settings",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "logger",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = list;\n\nvar _fs = require('fs');\n\nvar _path = require('path');\n\nfunction list(settings, logger) {\n  (0, _fs.readdirSync)(settings.pluginDir).forEach(function (filename) {\n    var stat = (0, _fs.statSync)((0, _path.join)(settings.pluginDir, filename));\n\n    if (stat.isDirectory() && filename[0] !== '.') {\n      try {\n        var packagePath = (0, _path.join)(settings.pluginDir, filename, 'package.json');\n\n        var _JSON$parse = JSON.parse((0, _fs.readFileSync)(packagePath, 'utf8'));\n\n        var version = _JSON$parse.version;\n\n        logger.log(filename + '@' + version);\n      } catch (e) {\n        throw new Error('Unable to read package.json file for plugin ' + filename);\n      }\n    }\n  });\n  logger.log(''); //intentional blank line for aesthetics\n}\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL2NsaV9wbHVnaW4vbGlzdC9saXN0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O3FCQUd3QixJQUFJOztrQkFId0IsSUFBSTs7b0JBQ25DLE1BQU07O0FBRVosU0FBUyxJQUFJLENBQUMsUUFBUSxFQUFFLE1BQU0sRUFBRTtBQUM3Qyx1QkFBWSxRQUFRLENBQUMsU0FBUyxDQUFDLENBQzlCLE9BQU8sQ0FBQyxVQUFDLFFBQVEsRUFBSztBQUNyQixRQUFNLElBQUksR0FBRyxrQkFBUyxnQkFBSyxRQUFRLENBQUMsU0FBUyxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUM7O0FBRTFELFFBQUksSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJLFFBQVEsQ0FBQyxDQUFDLENBQUMsS0FBSyxHQUFHLEVBQUU7QUFDN0MsVUFBSTtBQUNGLFlBQU0sV0FBVyxHQUFHLGdCQUFLLFFBQVEsQ0FBQyxTQUFTLEVBQUUsUUFBUSxFQUFFLGNBQWMsQ0FBQyxDQUFDOzswQkFDbkQsSUFBSSxDQUFDLEtBQUssQ0FBQyxzQkFBYSxXQUFXLEVBQUUsTUFBTSxDQUFDLENBQUM7O1lBQXpELE9BQU8sZUFBUCxPQUFPOztBQUNmLGNBQU0sQ0FBQyxHQUFHLENBQUMsUUFBUSxHQUFHLEdBQUcsR0FBRyxPQUFPLENBQUMsQ0FBQztPQUN0QyxDQUFDLE9BQU8sQ0FBQyxFQUFFO0FBQ1YsY0FBTSxJQUFJLEtBQUssQ0FBQyw4Q0FBOEMsR0FBRyxRQUFRLENBQUMsQ0FBQztPQUM1RTtLQUNGO0dBQ0YsQ0FBQyxDQUFDO0FBQ0gsUUFBTSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQztDQUNoQiIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9jbGlfcGx1Z2luL2xpc3QvbGlzdC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHN0YXRTeW5jLCByZWFkZGlyU3luYywgcmVhZEZpbGVTeW5jIH0gZnJvbSAnZnMnO1xuaW1wb3J0IHsgam9pbiB9IGZyb20gJ3BhdGgnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBsaXN0KHNldHRpbmdzLCBsb2dnZXIpIHtcbiAgcmVhZGRpclN5bmMoc2V0dGluZ3MucGx1Z2luRGlyKVxuICAuZm9yRWFjaCgoZmlsZW5hbWUpID0+IHtcbiAgICBjb25zdCBzdGF0ID0gc3RhdFN5bmMoam9pbihzZXR0aW5ncy5wbHVnaW5EaXIsIGZpbGVuYW1lKSk7XG5cbiAgICBpZiAoc3RhdC5pc0RpcmVjdG9yeSgpICYmIGZpbGVuYW1lWzBdICE9PSAnLicpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHBhY2thZ2VQYXRoID0gam9pbihzZXR0aW5ncy5wbHVnaW5EaXIsIGZpbGVuYW1lLCAncGFja2FnZS5qc29uJyk7XG4gICAgICAgIGNvbnN0IHsgdmVyc2lvbiB9ID0gSlNPTi5wYXJzZShyZWFkRmlsZVN5bmMocGFja2FnZVBhdGgsICd1dGY4JykpO1xuICAgICAgICBsb2dnZXIubG9nKGZpbGVuYW1lICsgJ0AnICsgdmVyc2lvbik7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIHJlYWQgcGFja2FnZS5qc29uIGZpbGUgZm9yIHBsdWdpbiAnICsgZmlsZW5hbWUpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG4gIGxvZ2dlci5sb2coJycpOyAvL2ludGVudGlvbmFsIGJsYW5rIGxpbmUgZm9yIGFlc3RoZXRpY3Ncbn1cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/cli_plugin/list/list.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAGwB,IAAI;;kBAHwB,IAAI;;oBACnC,MAAM;;AAEZ,SAAS,IAAI,CAAC,QAAQ,EAAE,MAAM,EAAE;AAC7C,uBAAY,QAAQ,CAAC,SAAS,CAAC,CAC9B,OAAO,CAAC,UAAC,QAAQ,EAAK;AACrB,QAAM,IAAI,GAAG,kBAAS,gBAAK,QAAQ,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC,CAAC;;AAE1D,QAAI,IAAI,CAAC,WAAW,EAAE,IAAI,QAAQ,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;AAC7C,UAAI;AACF,YAAM,WAAW,GAAG,gBAAK,QAAQ,CAAC,SAAS,EAAE,QAAQ,EAAE,cAAc,CAAC,CAAC;;0BACnD,IAAI,CAAC,KAAK,CAAC,sBAAa,WAAW,EAAE,MAAM,CAAC,CAAC;;YAAzD,OAAO,eAAP,OAAO;;AACf,cAAM,CAAC,GAAG,CAAC,QAAQ,GAAG,GAAG,GAAG,OAAO,CAAC,CAAC;OACtC,CAAC,OAAO,CAAC,EAAE;AACV,cAAM,IAAI,KAAK,CAAC,8CAA8C,GAAG,QAAQ,CAAC,CAAC;OAC5E;KACF;GACF,CAAC,CAAC;AACH,QAAM,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;CAChB",
      "file": "/home/vio/v3metrics/src/cli_plugin/list/list.js",
      "sourcesContent": [
        "import { statSync, readdirSync, readFileSync } from 'fs';\nimport { join } from 'path';\n\nexport default function list(settings, logger) {\n  readdirSync(settings.pluginDir)\n  .forEach((filename) => {\n    const stat = statSync(join(settings.pluginDir, filename));\n\n    if (stat.isDirectory() && filename[0] !== '.') {\n      try {\n        const packagePath = join(settings.pluginDir, filename, 'package.json');\n        const { version } = JSON.parse(readFileSync(packagePath, 'utf8'));\n        logger.log(filename + '@' + version);\n      } catch (e) {\n        throw new Error('Unable to read package.json file for plugin ' + filename);\n      }\n    }\n  });\n  logger.log(''); //intentional blank line for aesthetics\n}\n"
      ]
    },
    "mtime": 1467036622785
  },
  "{\"filename\":\"/home/vio/v3metrics/src/cli_plugin/lib/logger.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "Logger"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "Logger",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check"
      ]
    },
    "ignored": false,
    "code": "/**\n * Logs messages and errors\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar Logger = (function () {\n  function Logger(settings) {\n    _classCallCheck(this, Logger);\n\n    this.previousLineEnded = true;\n    this.silent = !!settings.silent;\n    this.quiet = !!settings.quiet;\n  }\n\n  _createClass(Logger, [{\n    key: 'log',\n    value: function log(data, sameLine) {\n      if (this.silent || this.quiet) return;\n\n      if (!sameLine && !this.previousLineEnded) {\n        process.stdout.write('\\n');\n      }\n\n      //if data is a stream, pipe it.\n      if (data.readable) {\n        data.pipe(process.stdout);\n        return;\n      }\n\n      process.stdout.write(data);\n      if (!sameLine) process.stdout.write('\\n');\n      this.previousLineEnded = !sameLine;\n    }\n  }, {\n    key: 'error',\n    value: function error(data) {\n      if (this.silent) return;\n\n      if (!this.previousLineEnded) {\n        process.stderr.write('\\n');\n      }\n\n      //if data is a stream, pipe it.\n      if (data.readable) {\n        data.pipe(process.stderr);\n        return;\n      }\n      process.stderr.write(data + '\\n');\n      this.previousLineEnded = true;\n    }\n  }]);\n\n  return Logger;\n})();\n\nexports['default'] = Logger;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL2NsaV9wbHVnaW4vbGliL2xvZ2dlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0lBR3FCLE1BQU07QUFFZCxXQUZRLE1BQU0sQ0FFYixRQUFRLEVBQUU7MEJBRkgsTUFBTTs7QUFHdkIsUUFBSSxDQUFDLGlCQUFpQixHQUFHLElBQUksQ0FBQztBQUM5QixRQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDO0FBQ2hDLFFBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUM7R0FDL0I7O2VBTmtCLE1BQU07O1dBUXRCLGFBQUMsSUFBSSxFQUFFLFFBQVEsRUFBRTtBQUNsQixVQUFJLElBQUksQ0FBQyxNQUFNLElBQUksSUFBSSxDQUFDLEtBQUssRUFBRSxPQUFPOztBQUV0QyxVQUFJLENBQUMsUUFBUSxJQUFJLENBQUMsSUFBSSxDQUFDLGlCQUFpQixFQUFFO0FBQ3hDLGVBQU8sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO09BQzVCOzs7QUFHRCxVQUFJLElBQUksQ0FBQyxRQUFRLEVBQUU7QUFDakIsWUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDMUIsZUFBTztPQUNSOztBQUVELGFBQU8sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQzNCLFVBQUksQ0FBQyxRQUFRLEVBQUUsT0FBTyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDMUMsVUFBSSxDQUFDLGlCQUFpQixHQUFHLENBQUMsUUFBUSxDQUFDO0tBQ3BDOzs7V0FFSSxlQUFDLElBQUksRUFBRTtBQUNWLFVBQUksSUFBSSxDQUFDLE1BQU0sRUFBRSxPQUFPOztBQUV4QixVQUFJLENBQUMsSUFBSSxDQUFDLGlCQUFpQixFQUFFO0FBQzNCLGVBQU8sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO09BQzVCOzs7QUFHRCxVQUFJLElBQUksQ0FBQyxRQUFRLEVBQUU7QUFDakIsWUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDMUIsZUFBTztPQUNSO0FBQ0QsYUFBTyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUksSUFBSSxRQUFLLENBQUM7QUFDbEMsVUFBSSxDQUFDLGlCQUFpQixHQUFHLElBQUksQ0FBQztLQUMvQjs7O1NBeENrQixNQUFNOzs7cUJBQU4sTUFBTSIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9jbGlfcGx1Z2luL2xpYi9sb2dnZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIExvZ3MgbWVzc2FnZXMgYW5kIGVycm9yc1xuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMb2dnZXIge1xuXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzKSB7XG4gICAgdGhpcy5wcmV2aW91c0xpbmVFbmRlZCA9IHRydWU7XG4gICAgdGhpcy5zaWxlbnQgPSAhIXNldHRpbmdzLnNpbGVudDtcbiAgICB0aGlzLnF1aWV0ID0gISFzZXR0aW5ncy5xdWlldDtcbiAgfVxuXG4gIGxvZyhkYXRhLCBzYW1lTGluZSkge1xuICAgIGlmICh0aGlzLnNpbGVudCB8fCB0aGlzLnF1aWV0KSByZXR1cm47XG5cbiAgICBpZiAoIXNhbWVMaW5lICYmICF0aGlzLnByZXZpb3VzTGluZUVuZGVkKSB7XG4gICAgICBwcm9jZXNzLnN0ZG91dC53cml0ZSgnXFxuJyk7XG4gICAgfVxuXG4gICAgLy9pZiBkYXRhIGlzIGEgc3RyZWFtLCBwaXBlIGl0LlxuICAgIGlmIChkYXRhLnJlYWRhYmxlKSB7XG4gICAgICBkYXRhLnBpcGUocHJvY2Vzcy5zdGRvdXQpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHByb2Nlc3Muc3Rkb3V0LndyaXRlKGRhdGEpO1xuICAgIGlmICghc2FtZUxpbmUpIHByb2Nlc3Muc3Rkb3V0LndyaXRlKCdcXG4nKTtcbiAgICB0aGlzLnByZXZpb3VzTGluZUVuZGVkID0gIXNhbWVMaW5lO1xuICB9XG5cbiAgZXJyb3IoZGF0YSkge1xuICAgIGlmICh0aGlzLnNpbGVudCkgcmV0dXJuO1xuXG4gICAgaWYgKCF0aGlzLnByZXZpb3VzTGluZUVuZGVkKSB7XG4gICAgICBwcm9jZXNzLnN0ZGVyci53cml0ZSgnXFxuJyk7XG4gICAgfVxuXG4gICAgLy9pZiBkYXRhIGlzIGEgc3RyZWFtLCBwaXBlIGl0LlxuICAgIGlmIChkYXRhLnJlYWRhYmxlKSB7XG4gICAgICBkYXRhLnBpcGUocHJvY2Vzcy5zdGRlcnIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBwcm9jZXNzLnN0ZGVyci53cml0ZShgJHtkYXRhfVxcbmApO1xuICAgIHRoaXMucHJldmlvdXNMaW5lRW5kZWQgPSB0cnVlO1xuICB9O1xuXG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/cli_plugin/lib/logger.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;;;;IAGqB,MAAM;AAEd,WAFQ,MAAM,CAEb,QAAQ,EAAE;0BAFH,MAAM;;AAGvB,QAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;AAC9B,QAAI,CAAC,MAAM,GAAG,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC;AAChC,QAAI,CAAC,KAAK,GAAG,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC;GAC/B;;eANkB,MAAM;;WAQtB,aAAC,IAAI,EAAE,QAAQ,EAAE;AAClB,UAAI,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,KAAK,EAAE,OAAO;;AAEtC,UAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,iBAAiB,EAAE;AACxC,eAAO,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;OAC5B;;;AAGD,UAAI,IAAI,CAAC,QAAQ,EAAE;AACjB,YAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;AAC1B,eAAO;OACR;;AAED,aAAO,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;AAC3B,UAAI,CAAC,QAAQ,EAAE,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;AAC1C,UAAI,CAAC,iBAAiB,GAAG,CAAC,QAAQ,CAAC;KACpC;;;WAEI,eAAC,IAAI,EAAE;AACV,UAAI,IAAI,CAAC,MAAM,EAAE,OAAO;;AAExB,UAAI,CAAC,IAAI,CAAC,iBAAiB,EAAE;AAC3B,eAAO,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;OAC5B;;;AAGD,UAAI,IAAI,CAAC,QAAQ,EAAE;AACjB,YAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;AAC1B,eAAO;OACR;AACD,aAAO,CAAC,MAAM,CAAC,KAAK,CAAI,IAAI,QAAK,CAAC;AAClC,UAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;KAC/B;;;SAxCkB,MAAM;;;qBAAN,MAAM",
      "file": "/home/vio/v3metrics/src/cli_plugin/lib/logger.js",
      "sourcesContent": [
        "/**\n * Logs messages and errors\n */\nexport default class Logger {\n\n  constructor(settings) {\n    this.previousLineEnded = true;\n    this.silent = !!settings.silent;\n    this.quiet = !!settings.quiet;\n  }\n\n  log(data, sameLine) {\n    if (this.silent || this.quiet) return;\n\n    if (!sameLine && !this.previousLineEnded) {\n      process.stdout.write('\\n');\n    }\n\n    //if data is a stream, pipe it.\n    if (data.readable) {\n      data.pipe(process.stdout);\n      return;\n    }\n\n    process.stdout.write(data);\n    if (!sameLine) process.stdout.write('\\n');\n    this.previousLineEnded = !sameLine;\n  }\n\n  error(data) {\n    if (this.silent) return;\n\n    if (!this.previousLineEnded) {\n      process.stderr.write('\\n');\n    }\n\n    //if data is a stream, pipe it.\n    if (data.readable) {\n      data.pipe(process.stderr);\n      return;\n    }\n    process.stderr.write(`${data}\\n`);\n    this.previousLineEnded = true;\n  };\n\n}\n"
      ]
    },
    "mtime": 1467036622785
  },
  "{\"filename\":\"/home/vio/v3metrics/src/cli_plugin/list/settings.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "path",
            "imported": [
              "resolve"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "resolve",
                "local": "resolve"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "parse",
            "command",
            "options"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "parse",
              "exported": "parse"
            },
            {
              "kind": "local",
              "local": "command",
              "exported": "command"
            },
            {
              "kind": "local",
              "local": "options",
              "exported": "options"
            }
          ]
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports.parse = parse;\n\nvar _path = require('path');\n\nfunction parse(command, options) {\n  var settings = {\n    pluginDir: command.pluginDir || ''\n  };\n\n  return settings;\n}\n\n;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL2NsaV9wbHVnaW4vbGlzdC9zZXR0aW5ncy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7O29CQUF3QixNQUFNOztBQUV2QixTQUFTLEtBQUssQ0FBQyxPQUFPLEVBQUUsT0FBTyxFQUFFO0FBQ3RDLE1BQU0sUUFBUSxHQUFHO0FBQ2YsYUFBUyxFQUFFLE9BQU8sQ0FBQyxTQUFTLElBQUksRUFBRTtHQUNuQyxDQUFDOztBQUVGLFNBQU8sUUFBUSxDQUFDO0NBQ2pCOztBQUFBLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvY2xpX3BsdWdpbi9saXN0L3NldHRpbmdzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcmVzb2x2ZSB9IGZyb20gJ3BhdGgnO1xuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2UoY29tbWFuZCwgb3B0aW9ucykge1xuICBjb25zdCBzZXR0aW5ncyA9IHtcbiAgICBwbHVnaW5EaXI6IGNvbW1hbmQucGx1Z2luRGlyIHx8ICcnXG4gIH07XG5cbiAgcmV0dXJuIHNldHRpbmdzO1xufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/cli_plugin/list/settings.js"
      ],
      "names": [],
      "mappings": ";;;;;;;oBAAwB,MAAM;;AAEvB,SAAS,KAAK,CAAC,OAAO,EAAE,OAAO,EAAE;AACtC,MAAM,QAAQ,GAAG;AACf,aAAS,EAAE,OAAO,CAAC,SAAS,IAAI,EAAE;GACnC,CAAC;;AAEF,SAAO,QAAQ,CAAC;CACjB;;AAAA,CAAC",
      "file": "/home/vio/v3metrics/src/cli_plugin/list/settings.js",
      "sourcesContent": [
        "import { resolve } from 'path';\n\nexport function parse(command, options) {\n  const settings = {\n    pluginDir: command.pluginDir || ''\n  };\n\n  return settings;\n};\n"
      ]
    },
    "mtime": 1467036622785
  },
  "{\"filename\":\"/home/vio/v3metrics/src/cli_plugin/install/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "../../utils",
            "imported": [
              "fromRoot"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "fromRoot",
                "local": "fromRoot"
              }
            ]
          },
          {
            "source": "fs",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "fs"
              }
            ]
          },
          {
            "source": "./install",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "install"
              }
            ]
          },
          {
            "source": "../lib/logger",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Logger"
              }
            ]
          },
          {
            "source": "../../utils/package_json",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "pkg"
              }
            ]
          },
          {
            "source": "../../server/path",
            "imported": [
              "getConfig"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "getConfig",
                "local": "getConfig"
              }
            ]
          },
          {
            "source": "./settings",
            "imported": [
              "parse",
              "parseMilliseconds"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "parse",
                "local": "parse"
              },
              {
                "kind": "named",
                "imported": "parseMilliseconds",
                "local": "parseMilliseconds"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "find"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "find",
                "local": "find"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "pluginInstall",
            "program"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "pluginInstall",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "program",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = pluginInstall;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _utils = require('../../utils');\n\nvar _fs = require('fs');\n\nvar _fs2 = _interopRequireDefault(_fs);\n\nvar _install = require('./install');\n\nvar _install2 = _interopRequireDefault(_install);\n\nvar _libLogger = require('../lib/logger');\n\nvar _libLogger2 = _interopRequireDefault(_libLogger);\n\nvar _utilsPackage_json = require('../../utils/package_json');\n\nvar _utilsPackage_json2 = _interopRequireDefault(_utilsPackage_json);\n\nvar _serverPath = require('../../server/path');\n\nvar _settings = require('./settings');\n\nvar _lodash = require('lodash');\n\nfunction processCommand(command, options) {\n  var settings = undefined;\n  try {\n    settings = (0, _settings.parse)(command, options, _utilsPackage_json2['default']);\n  } catch (ex) {\n    //The logger has not yet been initialized.\n    console.error(ex.message);\n    process.exit(64); // eslint-disable-line no-process-exit\n  }\n\n  var logger = new _libLogger2['default'](settings);\n  (0, _install2['default'])(settings, logger);\n}\n\nfunction pluginInstall(program) {\n  program.command('install <plugin/url>').option('-q, --quiet', 'disable all process messaging except errors').option('-s, --silent', 'disable all process messaging').option('-c, --config <path>', 'path to the config file', (0, _serverPath.getConfig)()).option('-t, --timeout <duration>', 'length of time before failing; 0 for never fail', _settings.parseMilliseconds).option('-d, --plugin-dir <path>', 'path to the directory where plugins are stored', (0, _utils.fromRoot)('installedPlugins')).description('install a plugin', 'Common examples:\\n  install x-pack\\n  install file:///Path/to/my/x-pack.zip\\n  install https://path.to/my/x-pack.zip').action(processCommand);\n}\n\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL2NsaV9wbHVnaW4vaW5zdGFsbC9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztxQkF1QndCLGFBQWE7Ozs7cUJBdkJaLGFBQWE7O2tCQUN2QixJQUFJOzs7O3VCQUNDLFdBQVc7Ozs7eUJBQ1osZUFBZTs7OztpQ0FDbEIsMEJBQTBCOzs7OzBCQUNoQixtQkFBbUI7O3dCQUNKLFlBQVk7O3NCQUNoQyxRQUFROztBQUU3QixTQUFTLGNBQWMsQ0FBQyxPQUFPLEVBQUUsT0FBTyxFQUFFO0FBQ3hDLE1BQUksUUFBUSxZQUFBLENBQUM7QUFDYixNQUFJO0FBQ0YsWUFBUSxHQUFHLHFCQUFNLE9BQU8sRUFBRSxPQUFPLGlDQUFNLENBQUM7R0FDekMsQ0FBQyxPQUFPLEVBQUUsRUFBRTs7QUFFWCxXQUFPLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUMxQixXQUFPLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0dBQ2xCOztBQUVELE1BQU0sTUFBTSxHQUFHLDJCQUFXLFFBQVEsQ0FBQyxDQUFDO0FBQ3BDLDRCQUFRLFFBQVEsRUFBRSxNQUFNLENBQUMsQ0FBQztDQUMzQjs7QUFFYyxTQUFTLGFBQWEsQ0FBQyxPQUFPLEVBQUU7QUFDN0MsU0FBTyxDQUNOLE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQyxDQUMvQixNQUFNLENBQUMsYUFBYSxFQUFFLDZDQUE2QyxDQUFDLENBQ3BFLE1BQU0sQ0FBQyxjQUFjLEVBQUUsK0JBQStCLENBQUMsQ0FDdkQsTUFBTSxDQUNMLHFCQUFxQixFQUNyQix5QkFBeUIsRUFDekIsNEJBQVcsQ0FDWixDQUNBLE1BQU0sQ0FDTCwwQkFBMEIsRUFDMUIsaURBQWlELDhCQUVsRCxDQUNBLE1BQU0sQ0FDTCx5QkFBeUIsRUFDekIsZ0RBQWdELEVBQ2hELHFCQUFTLGtCQUFrQixDQUFDLENBQzdCLENBQ0EsV0FBVyxDQUFDLGtCQUFrQix5SEFJUSxDQUN0QyxNQUFNLENBQUMsY0FBYyxDQUFDLENBQUM7Q0FDekI7O0FBQUEsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9jbGlfcGx1Z2luL2luc3RhbGwvaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBmcm9tUm9vdCB9IGZyb20gJy4uLy4uL3V0aWxzJztcbmltcG9ydCBmcyBmcm9tICdmcyc7XG5pbXBvcnQgaW5zdGFsbCBmcm9tICcuL2luc3RhbGwnO1xuaW1wb3J0IExvZ2dlciBmcm9tICcuLi9saWIvbG9nZ2VyJztcbmltcG9ydCBwa2cgZnJvbSAnLi4vLi4vdXRpbHMvcGFja2FnZV9qc29uJztcbmltcG9ydCB7IGdldENvbmZpZyB9IGZyb20gJy4uLy4uL3NlcnZlci9wYXRoJztcbmltcG9ydCB7IHBhcnNlLCBwYXJzZU1pbGxpc2Vjb25kcyB9IGZyb20gJy4vc2V0dGluZ3MnO1xuaW1wb3J0IHsgZmluZCB9IGZyb20gJ2xvZGFzaCc7XG5cbmZ1bmN0aW9uIHByb2Nlc3NDb21tYW5kKGNvbW1hbmQsIG9wdGlvbnMpIHtcbiAgbGV0IHNldHRpbmdzO1xuICB0cnkge1xuICAgIHNldHRpbmdzID0gcGFyc2UoY29tbWFuZCwgb3B0aW9ucywgcGtnKTtcbiAgfSBjYXRjaCAoZXgpIHtcbiAgICAvL1RoZSBsb2dnZXIgaGFzIG5vdCB5ZXQgYmVlbiBpbml0aWFsaXplZC5cbiAgICBjb25zb2xlLmVycm9yKGV4Lm1lc3NhZ2UpO1xuICAgIHByb2Nlc3MuZXhpdCg2NCk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcHJvY2Vzcy1leGl0XG4gIH1cblxuICBjb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKHNldHRpbmdzKTtcbiAgaW5zdGFsbChzZXR0aW5ncywgbG9nZ2VyKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcGx1Z2luSW5zdGFsbChwcm9ncmFtKSB7XG4gIHByb2dyYW1cbiAgLmNvbW1hbmQoJ2luc3RhbGwgPHBsdWdpbi91cmw+JylcbiAgLm9wdGlvbignLXEsIC0tcXVpZXQnLCAnZGlzYWJsZSBhbGwgcHJvY2VzcyBtZXNzYWdpbmcgZXhjZXB0IGVycm9ycycpXG4gIC5vcHRpb24oJy1zLCAtLXNpbGVudCcsICdkaXNhYmxlIGFsbCBwcm9jZXNzIG1lc3NhZ2luZycpXG4gIC5vcHRpb24oXG4gICAgJy1jLCAtLWNvbmZpZyA8cGF0aD4nLFxuICAgICdwYXRoIHRvIHRoZSBjb25maWcgZmlsZScsXG4gICAgZ2V0Q29uZmlnKClcbiAgKVxuICAub3B0aW9uKFxuICAgICctdCwgLS10aW1lb3V0IDxkdXJhdGlvbj4nLFxuICAgICdsZW5ndGggb2YgdGltZSBiZWZvcmUgZmFpbGluZzsgMCBmb3IgbmV2ZXIgZmFpbCcsXG4gICAgcGFyc2VNaWxsaXNlY29uZHNcbiAgKVxuICAub3B0aW9uKFxuICAgICctZCwgLS1wbHVnaW4tZGlyIDxwYXRoPicsXG4gICAgJ3BhdGggdG8gdGhlIGRpcmVjdG9yeSB3aGVyZSBwbHVnaW5zIGFyZSBzdG9yZWQnLFxuICAgIGZyb21Sb290KCdpbnN0YWxsZWRQbHVnaW5zJylcbiAgKVxuICAuZGVzY3JpcHRpb24oJ2luc3RhbGwgYSBwbHVnaW4nLFxuYENvbW1vbiBleGFtcGxlczpcbiAgaW5zdGFsbCB4LXBhY2tcbiAgaW5zdGFsbCBmaWxlOi8vL1BhdGgvdG8vbXkveC1wYWNrLnppcFxuICBpbnN0YWxsIGh0dHBzOi8vcGF0aC50by9teS94LXBhY2suemlwYClcbiAgLmFjdGlvbihwcm9jZXNzQ29tbWFuZCk7XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/cli_plugin/install/index.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAuBwB,aAAa;;;;qBAvBZ,aAAa;;kBACvB,IAAI;;;;uBACC,WAAW;;;;yBACZ,eAAe;;;;iCAClB,0BAA0B;;;;0BAChB,mBAAmB;;wBACJ,YAAY;;sBAChC,QAAQ;;AAE7B,SAAS,cAAc,CAAC,OAAO,EAAE,OAAO,EAAE;AACxC,MAAI,QAAQ,YAAA,CAAC;AACb,MAAI;AACF,YAAQ,GAAG,qBAAM,OAAO,EAAE,OAAO,iCAAM,CAAC;GACzC,CAAC,OAAO,EAAE,EAAE;;AAEX,WAAO,CAAC,KAAK,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC;AAC1B,WAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;GAClB;;AAED,MAAM,MAAM,GAAG,2BAAW,QAAQ,CAAC,CAAC;AACpC,4BAAQ,QAAQ,EAAE,MAAM,CAAC,CAAC;CAC3B;;AAEc,SAAS,aAAa,CAAC,OAAO,EAAE;AAC7C,SAAO,CACN,OAAO,CAAC,sBAAsB,CAAC,CAC/B,MAAM,CAAC,aAAa,EAAE,6CAA6C,CAAC,CACpE,MAAM,CAAC,cAAc,EAAE,+BAA+B,CAAC,CACvD,MAAM,CACL,qBAAqB,EACrB,yBAAyB,EACzB,4BAAW,CACZ,CACA,MAAM,CACL,0BAA0B,EAC1B,iDAAiD,8BAElD,CACA,MAAM,CACL,yBAAyB,EACzB,gDAAgD,EAChD,qBAAS,kBAAkB,CAAC,CAC7B,CACA,WAAW,CAAC,kBAAkB,yHAIQ,CACtC,MAAM,CAAC,cAAc,CAAC,CAAC;CACzB;;AAAA,CAAC",
      "file": "/home/vio/v3metrics/src/cli_plugin/install/index.js",
      "sourcesContent": [
        "import { fromRoot } from '../../utils';\nimport fs from 'fs';\nimport install from './install';\nimport Logger from '../lib/logger';\nimport pkg from '../../utils/package_json';\nimport { getConfig } from '../../server/path';\nimport { parse, parseMilliseconds } from './settings';\nimport { find } from 'lodash';\n\nfunction processCommand(command, options) {\n  let settings;\n  try {\n    settings = parse(command, options, pkg);\n  } catch (ex) {\n    //The logger has not yet been initialized.\n    console.error(ex.message);\n    process.exit(64); // eslint-disable-line no-process-exit\n  }\n\n  const logger = new Logger(settings);\n  install(settings, logger);\n}\n\nexport default function pluginInstall(program) {\n  program\n  .command('install <plugin/url>')\n  .option('-q, --quiet', 'disable all process messaging except errors')\n  .option('-s, --silent', 'disable all process messaging')\n  .option(\n    '-c, --config <path>',\n    'path to the config file',\n    getConfig()\n  )\n  .option(\n    '-t, --timeout <duration>',\n    'length of time before failing; 0 for never fail',\n    parseMilliseconds\n  )\n  .option(\n    '-d, --plugin-dir <path>',\n    'path to the directory where plugins are stored',\n    fromRoot('installedPlugins')\n  )\n  .description('install a plugin',\n`Common examples:\n  install x-pack\n  install file:///Path/to/my/x-pack.zip\n  install https://path.to/my/x-pack.zip`)\n  .action(processCommand);\n};\n"
      ]
    },
    "mtime": 1467036622785
  },
  "{\"filename\":\"/home/vio/v3metrics/src/cli_plugin/install/install.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./download",
            "imported": [
              "download"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "download",
                "local": "download"
              }
            ]
          },
          {
            "source": "bluebird",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Promise"
              }
            ]
          },
          {
            "source": "./cleanup",
            "imported": [
              "cleanPrevious",
              "cleanArtifacts"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "cleanPrevious",
                "local": "cleanPrevious"
              },
              {
                "kind": "named",
                "imported": "cleanArtifacts",
                "local": "cleanArtifacts"
              }
            ]
          },
          {
            "source": "./pack",
            "imported": [
              "extract",
              "getPackData"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "extract",
                "local": "extract"
              },
              {
                "kind": "named",
                "imported": "getPackData",
                "local": "getPackData"
              }
            ]
          },
          {
            "source": "rimraf",
            "imported": [
              "sync"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "sync",
                "local": "rimrafSync"
              }
            ]
          },
          {
            "source": "fs",
            "imported": [
              "renameSync"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "renameSync",
                "local": "renameSync"
              }
            ]
          },
          {
            "source": "./kibana",
            "imported": [
              "existingInstall",
              "rebuildCache",
              "assertVersion"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "existingInstall",
                "local": "existingInstall"
              },
              {
                "kind": "named",
                "imported": "rebuildCache",
                "local": "rebuildCache"
              },
              {
                "kind": "named",
                "imported": "assertVersion",
                "local": "assertVersion"
              }
            ]
          },
          {
            "source": "mkdirp",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "mkdirp"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "async-to-generator",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new _bluebird2['default'](function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { _bluebird2['default'].resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nvar _download = require('./download');\n\nvar _bluebird = require('bluebird');\n\nvar _bluebird2 = _interopRequireDefault(_bluebird);\n\nvar _cleanup = require('./cleanup');\n\nvar _pack = require('./pack');\n\nvar _rimraf = require('rimraf');\n\nvar _fs = require('fs');\n\nvar _kibana = require('./kibana');\n\nvar _mkdirp = require('mkdirp');\n\nvar _mkdirp2 = _interopRequireDefault(_mkdirp);\n\nvar mkdir = _bluebird2['default'].promisify(_mkdirp2['default']);\n\nexports['default'] = _asyncToGenerator(function* (settings, logger) {\n  try {\n    yield (0, _cleanup.cleanPrevious)(settings, logger);\n\n    yield mkdir(settings.workingPath);\n\n    yield (0, _download.download)(settings, logger);\n\n    yield (0, _pack.getPackData)(settings, logger);\n\n    yield (0, _pack.extract)(settings, logger);\n\n    (0, _rimraf.sync)(settings.tempArchiveFile);\n\n    (0, _kibana.existingInstall)(settings, logger);\n\n    (0, _kibana.assertVersion)(settings);\n\n    (0, _fs.renameSync)(settings.workingPath, settings.plugins[0].path);\n\n    yield (0, _kibana.rebuildCache)(settings, logger);\n\n    logger.log('Plugin installation complete');\n  } catch (err) {\n    logger.error('Plugin installation was unsuccessful due to error \"' + err.message + '\"');\n    (0, _cleanup.cleanArtifacts)(settings);\n    process.exit(70); // eslint-disable-line no-process-exit\n  }\n});\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL2NsaV9wbHVnaW4vaW5zdGFsbC9pbnN0YWxsLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7d0JBQXlCLFlBQVk7O3dCQUNqQixVQUFVOzs7O3VCQUNnQixXQUFXOztvQkFDcEIsUUFBUTs7c0JBQ1YsUUFBUTs7a0JBQ2hCLElBQUk7O3NCQUM4QixVQUFVOztzQkFDcEQsUUFBUTs7OztBQUUzQixJQUFNLEtBQUssR0FBRyxzQkFBUSxTQUFTLHFCQUFRLENBQUM7O3VDQUV6QixXQUF1QixRQUFRLEVBQUUsTUFBTSxFQUFFO0FBQ3RELE1BQUk7QUFDRixVQUFNLDRCQUFjLFFBQVEsRUFBRSxNQUFNLENBQUMsQ0FBQzs7QUFFdEMsVUFBTSxLQUFLLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxDQUFDOztBQUVsQyxVQUFNLHdCQUFTLFFBQVEsRUFBRSxNQUFNLENBQUMsQ0FBQzs7QUFFakMsVUFBTSx1QkFBWSxRQUFRLEVBQUUsTUFBTSxDQUFDLENBQUM7O0FBRXBDLFVBQU0sbUJBQVEsUUFBUSxFQUFFLE1BQU0sQ0FBQyxDQUFDOztBQUVoQyxzQkFBVyxRQUFRLENBQUMsZUFBZSxDQUFDLENBQUM7O0FBRXJDLGlDQUFnQixRQUFRLEVBQUUsTUFBTSxDQUFDLENBQUM7O0FBRWxDLCtCQUFjLFFBQVEsQ0FBQyxDQUFDOztBQUV4Qix3QkFBVyxRQUFRLENBQUMsV0FBVyxFQUFFLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUM7O0FBRTNELFVBQU0sMEJBQWEsUUFBUSxFQUFFLE1BQU0sQ0FBQyxDQUFDOztBQUVyQyxVQUFNLENBQUMsR0FBRyxDQUFDLDhCQUE4QixDQUFDLENBQUM7R0FDNUMsQ0FBQyxPQUFPLEdBQUcsRUFBRTtBQUNaLFVBQU0sQ0FBQyxLQUFLLHlEQUF1RCxHQUFHLENBQUMsT0FBTyxPQUFJLENBQUM7QUFDbkYsaUNBQWUsUUFBUSxDQUFDLENBQUM7QUFDekIsV0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztHQUNsQjtDQUNGIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL2NsaV9wbHVnaW4vaW5zdGFsbC9pbnN0YWxsLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZG93bmxvYWQgfSBmcm9tICcuL2Rvd25sb2FkJztcbmltcG9ydCBQcm9taXNlIGZyb20gJ2JsdWViaXJkJztcbmltcG9ydCB7IGNsZWFuUHJldmlvdXMsIGNsZWFuQXJ0aWZhY3RzIH0gZnJvbSAnLi9jbGVhbnVwJztcbmltcG9ydCB7IGV4dHJhY3QsIGdldFBhY2tEYXRhIH0gZnJvbSAnLi9wYWNrJztcbmltcG9ydCB7IHN5bmMgYXMgcmltcmFmU3luYyB9IGZyb20gJ3JpbXJhZic7XG5pbXBvcnQgeyByZW5hbWVTeW5jIH0gZnJvbSAnZnMnO1xuaW1wb3J0IHsgZXhpc3RpbmdJbnN0YWxsLCByZWJ1aWxkQ2FjaGUsIGFzc2VydFZlcnNpb24gfSBmcm9tICcuL2tpYmFuYSc7XG5pbXBvcnQgbWtkaXJwIGZyb20gJ21rZGlycCc7XG5cbmNvbnN0IG1rZGlyID0gUHJvbWlzZS5wcm9taXNpZnkobWtkaXJwKTtcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaW5zdGFsbChzZXR0aW5ncywgbG9nZ2VyKSB7XG4gIHRyeSB7XG4gICAgYXdhaXQgY2xlYW5QcmV2aW91cyhzZXR0aW5ncywgbG9nZ2VyKTtcblxuICAgIGF3YWl0IG1rZGlyKHNldHRpbmdzLndvcmtpbmdQYXRoKTtcblxuICAgIGF3YWl0IGRvd25sb2FkKHNldHRpbmdzLCBsb2dnZXIpO1xuXG4gICAgYXdhaXQgZ2V0UGFja0RhdGEoc2V0dGluZ3MsIGxvZ2dlcik7XG5cbiAgICBhd2FpdCBleHRyYWN0KHNldHRpbmdzLCBsb2dnZXIpO1xuXG4gICAgcmltcmFmU3luYyhzZXR0aW5ncy50ZW1wQXJjaGl2ZUZpbGUpO1xuXG4gICAgZXhpc3RpbmdJbnN0YWxsKHNldHRpbmdzLCBsb2dnZXIpO1xuXG4gICAgYXNzZXJ0VmVyc2lvbihzZXR0aW5ncyk7XG5cbiAgICByZW5hbWVTeW5jKHNldHRpbmdzLndvcmtpbmdQYXRoLCBzZXR0aW5ncy5wbHVnaW5zWzBdLnBhdGgpO1xuXG4gICAgYXdhaXQgcmVidWlsZENhY2hlKHNldHRpbmdzLCBsb2dnZXIpO1xuXG4gICAgbG9nZ2VyLmxvZygnUGx1Z2luIGluc3RhbGxhdGlvbiBjb21wbGV0ZScpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBsb2dnZXIuZXJyb3IoYFBsdWdpbiBpbnN0YWxsYXRpb24gd2FzIHVuc3VjY2Vzc2Z1bCBkdWUgdG8gZXJyb3IgXCIke2Vyci5tZXNzYWdlfVwiYCk7XG4gICAgY2xlYW5BcnRpZmFjdHMoc2V0dGluZ3MpO1xuICAgIHByb2Nlc3MuZXhpdCg3MCk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcHJvY2Vzcy1leGl0XG4gIH1cbn1cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/cli_plugin/install/install.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;wBAAyB,YAAY;;wBACjB,UAAU;;;;uBACgB,WAAW;;oBACpB,QAAQ;;sBACV,QAAQ;;kBAChB,IAAI;;sBAC8B,UAAU;;sBACpD,QAAQ;;;;AAE3B,IAAM,KAAK,GAAG,sBAAQ,SAAS,qBAAQ,CAAC;;uCAEzB,WAAuB,QAAQ,EAAE,MAAM,EAAE;AACtD,MAAI;AACF,UAAM,4BAAc,QAAQ,EAAE,MAAM,CAAC,CAAC;;AAEtC,UAAM,KAAK,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;;AAElC,UAAM,wBAAS,QAAQ,EAAE,MAAM,CAAC,CAAC;;AAEjC,UAAM,uBAAY,QAAQ,EAAE,MAAM,CAAC,CAAC;;AAEpC,UAAM,mBAAQ,QAAQ,EAAE,MAAM,CAAC,CAAC;;AAEhC,sBAAW,QAAQ,CAAC,eAAe,CAAC,CAAC;;AAErC,iCAAgB,QAAQ,EAAE,MAAM,CAAC,CAAC;;AAElC,+BAAc,QAAQ,CAAC,CAAC;;AAExB,wBAAW,QAAQ,CAAC,WAAW,EAAE,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;;AAE3D,UAAM,0BAAa,QAAQ,EAAE,MAAM,CAAC,CAAC;;AAErC,UAAM,CAAC,GAAG,CAAC,8BAA8B,CAAC,CAAC;GAC5C,CAAC,OAAO,GAAG,EAAE;AACZ,UAAM,CAAC,KAAK,yDAAuD,GAAG,CAAC,OAAO,OAAI,CAAC;AACnF,iCAAe,QAAQ,CAAC,CAAC;AACzB,WAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;GAClB;CACF",
      "file": "/home/vio/v3metrics/src/cli_plugin/install/install.js",
      "sourcesContent": [
        "import { download } from './download';\nimport Promise from 'bluebird';\nimport { cleanPrevious, cleanArtifacts } from './cleanup';\nimport { extract, getPackData } from './pack';\nimport { sync as rimrafSync } from 'rimraf';\nimport { renameSync } from 'fs';\nimport { existingInstall, rebuildCache, assertVersion } from './kibana';\nimport mkdirp from 'mkdirp';\n\nconst mkdir = Promise.promisify(mkdirp);\n\nexport default async function install(settings, logger) {\n  try {\n    await cleanPrevious(settings, logger);\n\n    await mkdir(settings.workingPath);\n\n    await download(settings, logger);\n\n    await getPackData(settings, logger);\n\n    await extract(settings, logger);\n\n    rimrafSync(settings.tempArchiveFile);\n\n    existingInstall(settings, logger);\n\n    assertVersion(settings);\n\n    renameSync(settings.workingPath, settings.plugins[0].path);\n\n    await rebuildCache(settings, logger);\n\n    logger.log('Plugin installation complete');\n  } catch (err) {\n    logger.error(`Plugin installation was unsuccessful due to error \"${err.message}\"`);\n    cleanArtifacts(settings);\n    process.exit(70); // eslint-disable-line no-process-exit\n  }\n}\n"
      ]
    },
    "mtime": 1467036622785
  },
  "{\"filename\":\"/home/vio/v3metrics/src/cli_plugin/install/download.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./downloaders/http",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "downloadHttpFile"
              }
            ]
          },
          {
            "source": "./downloaders/file",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "downloadLocalFile"
              }
            ]
          },
          {
            "source": "../lib/errors",
            "imported": [
              "UnsupportedProtocolError"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "UnsupportedProtocolError",
                "local": "UnsupportedProtocolError"
              }
            ]
          },
          {
            "source": "url",
            "imported": [
              "parse"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "parse",
                "local": "parse"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "_downloadSingle",
            "settings",
            "logger",
            "sourceUrl",
            "download",
            "settings",
            "logger"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "_downloadSingle",
              "exported": "_downloadSingle"
            },
            {
              "kind": "local",
              "local": "settings",
              "exported": "settings"
            },
            {
              "kind": "local",
              "local": "logger",
              "exported": "logger"
            },
            {
              "kind": "local",
              "local": "sourceUrl",
              "exported": "sourceUrl"
            },
            {
              "kind": "local",
              "local": "download",
              "exported": "download"
            },
            {
              "kind": "local",
              "local": "settings",
              "exported": "settings"
            },
            {
              "kind": "local",
              "local": "logger",
              "exported": "logger"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports._downloadSingle = _downloadSingle;\nexports.download = download;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _downloadersHttp = require('./downloaders/http');\n\nvar _downloadersHttp2 = _interopRequireDefault(_downloadersHttp);\n\nvar _downloadersFile = require('./downloaders/file');\n\nvar _downloadersFile2 = _interopRequireDefault(_downloadersFile);\n\nvar _libErrors = require('../lib/errors');\n\nvar _url = require('url');\n\nfunction _downloadSingle(settings, logger, sourceUrl) {\n  var urlInfo = (0, _url.parse)(sourceUrl);\n  var downloadPromise = undefined;\n\n  if (/^file/.test(urlInfo.protocol)) {\n    downloadPromise = (0, _downloadersFile2['default'])(logger, decodeURI(urlInfo.path), settings.tempArchiveFile);\n  } else if (/^https?/.test(urlInfo.protocol)) {\n    downloadPromise = (0, _downloadersHttp2['default'])(logger, sourceUrl, settings.tempArchiveFile, settings.timeout);\n  } else {\n    downloadPromise = Promise.reject(new _libErrors.UnsupportedProtocolError());\n  }\n\n  return downloadPromise;\n}\n\n//Attempts to download each url in turn until one is successful\n\nfunction download(settings, logger) {\n  var urls = settings.urls.slice(0);\n\n  function tryNext() {\n    var sourceUrl = urls.shift();\n    if (!sourceUrl) {\n      throw new Error('No valid url specified.');\n    }\n\n    logger.log('Attempting to transfer from ' + sourceUrl);\n\n    return _downloadSingle(settings, logger, sourceUrl)['catch'](function (err) {\n      var isUnsupportedProtocol = err instanceof _libErrors.UnsupportedProtocolError;\n      var isDownloadResourceNotFound = err.message === 'ENOTFOUND';\n      if (isUnsupportedProtocol || isDownloadResourceNotFound) {\n        return tryNext();\n      }\n      throw err;\n    });\n  }\n\n  return tryNext();\n}\n\n;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL2NsaV9wbHVnaW4vaW5zdGFsbC9kb3dubG9hZC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OytCQUE2QixvQkFBb0I7Ozs7K0JBQ25CLG9CQUFvQjs7Ozt5QkFDVCxlQUFlOzttQkFDbEMsS0FBSzs7QUFFcEIsU0FBUyxlQUFlLENBQUMsUUFBUSxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUU7QUFDM0QsTUFBTSxPQUFPLEdBQUcsZ0JBQU0sU0FBUyxDQUFDLENBQUM7QUFDakMsTUFBSSxlQUFlLFlBQUEsQ0FBQzs7QUFFcEIsTUFBSSxPQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsRUFBRTtBQUNsQyxtQkFBZSxHQUFHLGtDQUFrQixNQUFNLEVBQUUsU0FBUyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRSxRQUFRLENBQUMsZUFBZSxDQUFDLENBQUM7R0FDaEcsTUFBTSxJQUFJLFNBQVMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxFQUFFO0FBQzNDLG1CQUFlLEdBQUcsa0NBQWlCLE1BQU0sRUFBRSxTQUFTLEVBQUUsUUFBUSxDQUFDLGVBQWUsRUFBRSxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUM7R0FDbkcsTUFBTTtBQUNMLG1CQUFlLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyx5Q0FBOEIsQ0FBQyxDQUFDO0dBQ2xFOztBQUVELFNBQU8sZUFBZSxDQUFDO0NBQ3hCOzs7O0FBR00sU0FBUyxRQUFRLENBQUMsUUFBUSxFQUFFLE1BQU0sRUFBRTtBQUN6QyxNQUFNLElBQUksR0FBRyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQzs7QUFFcEMsV0FBUyxPQUFPLEdBQUc7QUFDakIsUUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO0FBQy9CLFFBQUksQ0FBQyxTQUFTLEVBQUU7QUFDZCxZQUFNLElBQUksS0FBSyxDQUFDLHlCQUF5QixDQUFDLENBQUM7S0FDNUM7O0FBRUQsVUFBTSxDQUFDLEdBQUcsa0NBQWdDLFNBQVMsQ0FBRyxDQUFDOztBQUV2RCxXQUFPLGVBQWUsQ0FBQyxRQUFRLEVBQUUsTUFBTSxFQUFFLFNBQVMsQ0FBQyxTQUM3QyxDQUFDLFVBQUMsR0FBRyxFQUFLO0FBQ2QsVUFBTSxxQkFBcUIsR0FBRyxHQUFHLCtDQUFvQyxDQUFDO0FBQ3RFLFVBQU0sMEJBQTBCLEdBQUcsR0FBRyxDQUFDLE9BQU8sS0FBSyxXQUFXLENBQUM7QUFDL0QsVUFBSSxxQkFBcUIsSUFBSSwwQkFBMEIsRUFBRTtBQUN2RCxlQUFPLE9BQU8sRUFBRSxDQUFDO09BQ2xCO0FBQ0QsWUFBTyxHQUFHLENBQUU7S0FDYixDQUFDLENBQUM7R0FDSjs7QUFFRCxTQUFPLE9BQU8sRUFBRSxDQUFDO0NBQ2xCOztBQUFBLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvY2xpX3BsdWdpbi9pbnN0YWxsL2Rvd25sb2FkLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGRvd25sb2FkSHR0cEZpbGUgZnJvbSAnLi9kb3dubG9hZGVycy9odHRwJztcbmltcG9ydCBkb3dubG9hZExvY2FsRmlsZSBmcm9tICcuL2Rvd25sb2FkZXJzL2ZpbGUnO1xuaW1wb3J0IHsgVW5zdXBwb3J0ZWRQcm90b2NvbEVycm9yIH0gZnJvbSAnLi4vbGliL2Vycm9ycyc7XG5pbXBvcnQgeyBwYXJzZSB9IGZyb20gJ3VybCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBfZG93bmxvYWRTaW5nbGUoc2V0dGluZ3MsIGxvZ2dlciwgc291cmNlVXJsKSB7XG4gIGNvbnN0IHVybEluZm8gPSBwYXJzZShzb3VyY2VVcmwpO1xuICBsZXQgZG93bmxvYWRQcm9taXNlO1xuXG4gIGlmICgvXmZpbGUvLnRlc3QodXJsSW5mby5wcm90b2NvbCkpIHtcbiAgICBkb3dubG9hZFByb21pc2UgPSBkb3dubG9hZExvY2FsRmlsZShsb2dnZXIsIGRlY29kZVVSSSh1cmxJbmZvLnBhdGgpLCBzZXR0aW5ncy50ZW1wQXJjaGl2ZUZpbGUpO1xuICB9IGVsc2UgaWYgKC9eaHR0cHM/Ly50ZXN0KHVybEluZm8ucHJvdG9jb2wpKSB7XG4gICAgZG93bmxvYWRQcm9taXNlID0gZG93bmxvYWRIdHRwRmlsZShsb2dnZXIsIHNvdXJjZVVybCwgc2V0dGluZ3MudGVtcEFyY2hpdmVGaWxlLCBzZXR0aW5ncy50aW1lb3V0KTtcbiAgfSBlbHNlIHtcbiAgICBkb3dubG9hZFByb21pc2UgPSBQcm9taXNlLnJlamVjdChuZXcgVW5zdXBwb3J0ZWRQcm90b2NvbEVycm9yKCkpO1xuICB9XG5cbiAgcmV0dXJuIGRvd25sb2FkUHJvbWlzZTtcbn1cblxuLy9BdHRlbXB0cyB0byBkb3dubG9hZCBlYWNoIHVybCBpbiB0dXJuIHVudGlsIG9uZSBpcyBzdWNjZXNzZnVsXG5leHBvcnQgZnVuY3Rpb24gZG93bmxvYWQoc2V0dGluZ3MsIGxvZ2dlcikge1xuICBjb25zdCB1cmxzID0gc2V0dGluZ3MudXJscy5zbGljZSgwKTtcblxuICBmdW5jdGlvbiB0cnlOZXh0KCkge1xuICAgIGNvbnN0IHNvdXJjZVVybCA9IHVybHMuc2hpZnQoKTtcbiAgICBpZiAoIXNvdXJjZVVybCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyB2YWxpZCB1cmwgc3BlY2lmaWVkLicpO1xuICAgIH1cblxuICAgIGxvZ2dlci5sb2coYEF0dGVtcHRpbmcgdG8gdHJhbnNmZXIgZnJvbSAke3NvdXJjZVVybH1gKTtcblxuICAgIHJldHVybiBfZG93bmxvYWRTaW5nbGUoc2V0dGluZ3MsIGxvZ2dlciwgc291cmNlVXJsKVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zdCBpc1Vuc3VwcG9ydGVkUHJvdG9jb2wgPSBlcnIgaW5zdGFuY2VvZiBVbnN1cHBvcnRlZFByb3RvY29sRXJyb3I7XG4gICAgICBjb25zdCBpc0Rvd25sb2FkUmVzb3VyY2VOb3RGb3VuZCA9IGVyci5tZXNzYWdlID09PSAnRU5PVEZPVU5EJztcbiAgICAgIGlmIChpc1Vuc3VwcG9ydGVkUHJvdG9jb2wgfHwgaXNEb3dubG9hZFJlc291cmNlTm90Rm91bmQpIHtcbiAgICAgICAgcmV0dXJuIHRyeU5leHQoKTtcbiAgICAgIH1cbiAgICAgIHRocm93IChlcnIpO1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHRyeU5leHQoKTtcbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/cli_plugin/install/download.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;+BAA6B,oBAAoB;;;;+BACnB,oBAAoB;;;;yBACT,eAAe;;mBAClC,KAAK;;AAEpB,SAAS,eAAe,CAAC,QAAQ,EAAE,MAAM,EAAE,SAAS,EAAE;AAC3D,MAAM,OAAO,GAAG,gBAAM,SAAS,CAAC,CAAC;AACjC,MAAI,eAAe,YAAA,CAAC;;AAEpB,MAAI,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE;AAClC,mBAAe,GAAG,kCAAkB,MAAM,EAAE,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,QAAQ,CAAC,eAAe,CAAC,CAAC;GAChG,MAAM,IAAI,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE;AAC3C,mBAAe,GAAG,kCAAiB,MAAM,EAAE,SAAS,EAAE,QAAQ,CAAC,eAAe,EAAE,QAAQ,CAAC,OAAO,CAAC,CAAC;GACnG,MAAM;AACL,mBAAe,GAAG,OAAO,CAAC,MAAM,CAAC,yCAA8B,CAAC,CAAC;GAClE;;AAED,SAAO,eAAe,CAAC;CACxB;;;;AAGM,SAAS,QAAQ,CAAC,QAAQ,EAAE,MAAM,EAAE;AACzC,MAAM,IAAI,GAAG,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;;AAEpC,WAAS,OAAO,GAAG;AACjB,QAAM,SAAS,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC;AAC/B,QAAI,CAAC,SAAS,EAAE;AACd,YAAM,IAAI,KAAK,CAAC,yBAAyB,CAAC,CAAC;KAC5C;;AAED,UAAM,CAAC,GAAG,kCAAgC,SAAS,CAAG,CAAC;;AAEvD,WAAO,eAAe,CAAC,QAAQ,EAAE,MAAM,EAAE,SAAS,CAAC,SAC7C,CAAC,UAAC,GAAG,EAAK;AACd,UAAM,qBAAqB,GAAG,GAAG,+CAAoC,CAAC;AACtE,UAAM,0BAA0B,GAAG,GAAG,CAAC,OAAO,KAAK,WAAW,CAAC;AAC/D,UAAI,qBAAqB,IAAI,0BAA0B,EAAE;AACvD,eAAO,OAAO,EAAE,CAAC;OAClB;AACD,YAAO,GAAG,CAAE;KACb,CAAC,CAAC;GACJ;;AAED,SAAO,OAAO,EAAE,CAAC;CAClB;;AAAA,CAAC",
      "file": "/home/vio/v3metrics/src/cli_plugin/install/download.js",
      "sourcesContent": [
        "import downloadHttpFile from './downloaders/http';\nimport downloadLocalFile from './downloaders/file';\nimport { UnsupportedProtocolError } from '../lib/errors';\nimport { parse } from 'url';\n\nexport function _downloadSingle(settings, logger, sourceUrl) {\n  const urlInfo = parse(sourceUrl);\n  let downloadPromise;\n\n  if (/^file/.test(urlInfo.protocol)) {\n    downloadPromise = downloadLocalFile(logger, decodeURI(urlInfo.path), settings.tempArchiveFile);\n  } else if (/^https?/.test(urlInfo.protocol)) {\n    downloadPromise = downloadHttpFile(logger, sourceUrl, settings.tempArchiveFile, settings.timeout);\n  } else {\n    downloadPromise = Promise.reject(new UnsupportedProtocolError());\n  }\n\n  return downloadPromise;\n}\n\n//Attempts to download each url in turn until one is successful\nexport function download(settings, logger) {\n  const urls = settings.urls.slice(0);\n\n  function tryNext() {\n    const sourceUrl = urls.shift();\n    if (!sourceUrl) {\n      throw new Error('No valid url specified.');\n    }\n\n    logger.log(`Attempting to transfer from ${sourceUrl}`);\n\n    return _downloadSingle(settings, logger, sourceUrl)\n    .catch((err) => {\n      const isUnsupportedProtocol = err instanceof UnsupportedProtocolError;\n      const isDownloadResourceNotFound = err.message === 'ENOTFOUND';\n      if (isUnsupportedProtocol || isDownloadResourceNotFound) {\n        return tryNext();\n      }\n      throw (err);\n    });\n  }\n\n  return tryNext();\n};\n"
      ]
    },
    "mtime": 1467036622785
  },
  "{\"filename\":\"/home/vio/v3metrics/src/cli_plugin/install/downloaders/http.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "wreck",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Wreck"
              }
            ]
          },
          {
            "source": "../progress",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Progress"
              }
            ]
          },
          {
            "source": "bluebird",
            "imported": [
              "fromNode"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "fromNode",
                "local": "fn"
              }
            ]
          },
          {
            "source": "fs",
            "imported": [
              "createWriteStream",
              "unlinkSync"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "createWriteStream",
                "local": "createWriteStream"
              },
              {
                "kind": "named",
                "imported": "unlinkSync",
                "local": "unlinkSync"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "async-to-generator",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nvar _wreck = require('wreck');\n\nvar _wreck2 = _interopRequireDefault(_wreck);\n\nvar _progress = require('../progress');\n\nvar _progress2 = _interopRequireDefault(_progress);\n\nvar _bluebird = require('bluebird');\n\nvar _fs = require('fs');\n\nfunction sendRequest(_ref) {\n  var sourceUrl = _ref.sourceUrl;\n  var timeout = _ref.timeout;\n\n  var maxRedirects = 11; //Because this one goes to 11.\n  return (0, _bluebird.fromNode)(function (cb) {\n    var req = _wreck2['default'].request('GET', sourceUrl, { timeout: timeout, redirects: maxRedirects }, function (err, resp) {\n      if (err) {\n        if (err.code === 'ECONNREFUSED') {\n          err = new Error('ENOTFOUND');\n        }\n\n        return cb(err);\n      }\n\n      if (resp.statusCode >= 400) {\n        return cb(new Error('ENOTFOUND'));\n      }\n\n      cb(null, { req: req, resp: resp });\n    });\n  });\n}\n\nfunction downloadResponse(_ref2) {\n  var resp = _ref2.resp;\n  var targetPath = _ref2.targetPath;\n  var progress = _ref2.progress;\n\n  return new Promise(function (resolve, reject) {\n    var writeStream = (0, _fs.createWriteStream)(targetPath);\n\n    // if either stream errors, fail quickly\n    resp.on('error', reject);\n    writeStream.on('error', reject);\n\n    // report progress as we download\n    resp.on('data', function (chunk) {\n      progress.progress(chunk.length);\n    });\n\n    // write the download to the file system\n    resp.pipe(writeStream);\n\n    // when the write is done, we are done\n    writeStream.on('finish', resolve);\n  });\n}\n\n/*\nResponsible for managing http transfers\n*/\nexports['default'] = _asyncToGenerator(function* (logger, sourceUrl, targetPath, timeout) {\n  try {\n    var _ref3 = yield sendRequest({ sourceUrl: sourceUrl, timeout: timeout });\n\n    var req = _ref3.req;\n    var resp = _ref3.resp;\n\n    try {\n      var totalSize = parseFloat(resp.headers['content-length']) || 0;\n      var progress = new _progress2['default'](logger);\n      progress.init(totalSize);\n\n      yield downloadResponse({ resp: resp, targetPath: targetPath, progress: progress });\n\n      progress.complete();\n    } catch (err) {\n      req.abort();\n      throw err;\n    }\n  } catch (err) {\n    if (err.message !== 'ENOTFOUND') {\n      logger.error(err);\n    }\n    throw err;\n  }\n});\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL2NsaV9wbHVnaW4vaW5zdGFsbC9kb3dubG9hZGVycy9odHRwLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7cUJBQWtCLE9BQU87Ozs7d0JBQ0osYUFBYTs7Ozt3QkFDSCxVQUFVOztrQkFDSyxJQUFJOztBQUVsRCxTQUFTLFdBQVcsQ0FBQyxJQUFzQixFQUFFO01BQXRCLFNBQVMsR0FBWCxJQUFzQixDQUFwQixTQUFTO01BQUUsT0FBTyxHQUFwQixJQUFzQixDQUFULE9BQU87O0FBQ3ZDLE1BQU0sWUFBWSxHQUFHLEVBQUUsQ0FBQztBQUN4QixTQUFPLHdCQUFHLFVBQUEsRUFBRSxFQUFJO0FBQ2QsUUFBTSxHQUFHLEdBQUcsbUJBQU0sT0FBTyxDQUFDLEtBQUssRUFBRSxTQUFTLEVBQUUsRUFBRSxPQUFPLEVBQVAsT0FBTyxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsRUFBRSxVQUFDLEdBQUcsRUFBRSxJQUFJLEVBQUs7QUFDL0YsVUFBSSxHQUFHLEVBQUU7QUFDUCxZQUFJLEdBQUcsQ0FBQyxJQUFJLEtBQUssY0FBYyxFQUFFO0FBQy9CLGFBQUcsR0FBRyxJQUFJLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQztTQUM5Qjs7QUFFRCxlQUFPLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQztPQUNoQjs7QUFFRCxVQUFJLElBQUksQ0FBQyxVQUFVLElBQUksR0FBRyxFQUFFO0FBQzFCLGVBQU8sRUFBRSxDQUFDLElBQUksS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUM7T0FDbkM7O0FBRUQsUUFBRSxDQUFDLElBQUksRUFBRSxFQUFFLEdBQUcsRUFBSCxHQUFHLEVBQUUsSUFBSSxFQUFKLElBQUksRUFBRSxDQUFDLENBQUM7S0FDekIsQ0FBQyxDQUFDO0dBQ0osQ0FBQyxDQUFDO0NBQ0o7O0FBRUQsU0FBUyxnQkFBZ0IsQ0FBQyxLQUE4QixFQUFFO01BQTlCLElBQUksR0FBTixLQUE4QixDQUE1QixJQUFJO01BQUUsVUFBVSxHQUFsQixLQUE4QixDQUF0QixVQUFVO01BQUUsUUFBUSxHQUE1QixLQUE4QixDQUFWLFFBQVE7O0FBQ3BELFNBQU8sSUFBSSxPQUFPLENBQUMsVUFBQyxPQUFPLEVBQUUsTUFBTSxFQUFLO0FBQ3RDLFFBQU0sV0FBVyxHQUFHLDJCQUFrQixVQUFVLENBQUMsQ0FBQzs7O0FBR2xELFFBQUksQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQ3pCLGVBQVcsQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLE1BQU0sQ0FBQyxDQUFDOzs7QUFHaEMsUUFBSSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsVUFBQyxLQUFLLEVBQUs7QUFDekIsY0FBUSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7S0FDakMsQ0FBQyxDQUFDOzs7QUFHSCxRQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDOzs7QUFHdkIsZUFBVyxDQUFDLEVBQUUsQ0FBQyxRQUFRLEVBQUUsT0FBTyxDQUFDLENBQUM7R0FDbkMsQ0FBQyxDQUFDO0NBQ0o7Ozs7O3VDQUtjLFdBQTJCLE1BQU0sRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFFLE9BQU8sRUFBRTtBQUNoRixNQUFJO2dCQUNvQixNQUFNLFdBQVcsQ0FBQyxFQUFFLFNBQVMsRUFBVCxTQUFTLEVBQUUsT0FBTyxFQUFQLE9BQU8sRUFBRSxDQUFDOztRQUF2RCxHQUFHLFNBQUgsR0FBRztRQUFFLElBQUksU0FBSixJQUFJOztBQUVqQixRQUFJO0FBQ0YsVUFBSSxTQUFTLEdBQUcsVUFBVSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNoRSxVQUFNLFFBQVEsR0FBRywwQkFBYSxNQUFNLENBQUMsQ0FBQztBQUN0QyxjQUFRLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDOztBQUV6QixZQUFNLGdCQUFnQixDQUFDLEVBQUUsSUFBSSxFQUFKLElBQUksRUFBRSxVQUFVLEVBQVYsVUFBVSxFQUFFLFFBQVEsRUFBUixRQUFRLEVBQUUsQ0FBQyxDQUFDOztBQUV2RCxjQUFRLENBQUMsUUFBUSxFQUFFLENBQUM7S0FDckIsQ0FBQyxPQUFPLEdBQUcsRUFBRTtBQUNaLFNBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQztBQUNaLFlBQU0sR0FBRyxDQUFDO0tBQ1g7R0FDRixDQUFDLE9BQU8sR0FBRyxFQUFFO0FBQ1osUUFBSSxHQUFHLENBQUMsT0FBTyxLQUFLLFdBQVcsRUFBRTtBQUMvQixZQUFNLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0tBQ25CO0FBQ0QsVUFBTSxHQUFHLENBQUM7R0FDWDtDQUNGIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL2NsaV9wbHVnaW4vaW5zdGFsbC9kb3dubG9hZGVycy9odHRwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFdyZWNrIGZyb20gJ3dyZWNrJztcbmltcG9ydCBQcm9ncmVzcyBmcm9tICcuLi9wcm9ncmVzcyc7XG5pbXBvcnQgeyBmcm9tTm9kZSBhcyBmbiB9IGZyb20gJ2JsdWViaXJkJztcbmltcG9ydCB7IGNyZWF0ZVdyaXRlU3RyZWFtLCB1bmxpbmtTeW5jIH0gZnJvbSAnZnMnO1xuXG5mdW5jdGlvbiBzZW5kUmVxdWVzdCh7IHNvdXJjZVVybCwgdGltZW91dCB9KSB7XG4gIGNvbnN0IG1heFJlZGlyZWN0cyA9IDExOyAvL0JlY2F1c2UgdGhpcyBvbmUgZ29lcyB0byAxMS5cbiAgcmV0dXJuIGZuKGNiID0+IHtcbiAgICBjb25zdCByZXEgPSBXcmVjay5yZXF1ZXN0KCdHRVQnLCBzb3VyY2VVcmwsIHsgdGltZW91dCwgcmVkaXJlY3RzOiBtYXhSZWRpcmVjdHMgfSwgKGVyciwgcmVzcCkgPT4ge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICBpZiAoZXJyLmNvZGUgPT09ICdFQ09OTlJFRlVTRUQnKSB7XG4gICAgICAgICAgZXJyID0gbmV3IEVycm9yKCdFTk9URk9VTkQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjYihlcnIpO1xuICAgICAgfVxuXG4gICAgICBpZiAocmVzcC5zdGF0dXNDb2RlID49IDQwMCkge1xuICAgICAgICByZXR1cm4gY2IobmV3IEVycm9yKCdFTk9URk9VTkQnKSk7XG4gICAgICB9XG5cbiAgICAgIGNiKG51bGwsIHsgcmVxLCByZXNwIH0pO1xuICAgIH0pO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gZG93bmxvYWRSZXNwb25zZSh7IHJlc3AsIHRhcmdldFBhdGgsIHByb2dyZXNzIH0pIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBjb25zdCB3cml0ZVN0cmVhbSA9IGNyZWF0ZVdyaXRlU3RyZWFtKHRhcmdldFBhdGgpO1xuXG4gICAgLy8gaWYgZWl0aGVyIHN0cmVhbSBlcnJvcnMsIGZhaWwgcXVpY2tseVxuICAgIHJlc3Aub24oJ2Vycm9yJywgcmVqZWN0KTtcbiAgICB3cml0ZVN0cmVhbS5vbignZXJyb3InLCByZWplY3QpO1xuXG4gICAgLy8gcmVwb3J0IHByb2dyZXNzIGFzIHdlIGRvd25sb2FkXG4gICAgcmVzcC5vbignZGF0YScsIChjaHVuaykgPT4ge1xuICAgICAgcHJvZ3Jlc3MucHJvZ3Jlc3MoY2h1bmsubGVuZ3RoKTtcbiAgICB9KTtcblxuICAgIC8vIHdyaXRlIHRoZSBkb3dubG9hZCB0byB0aGUgZmlsZSBzeXN0ZW1cbiAgICByZXNwLnBpcGUod3JpdGVTdHJlYW0pO1xuXG4gICAgLy8gd2hlbiB0aGUgd3JpdGUgaXMgZG9uZSwgd2UgYXJlIGRvbmVcbiAgICB3cml0ZVN0cmVhbS5vbignZmluaXNoJywgcmVzb2x2ZSk7XG4gIH0pO1xufVxuXG4vKlxuUmVzcG9uc2libGUgZm9yIG1hbmFnaW5nIGh0dHAgdHJhbnNmZXJzXG4qL1xuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gZG93bmxvYWRVcmwobG9nZ2VyLCBzb3VyY2VVcmwsIHRhcmdldFBhdGgsIHRpbWVvdXQpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHJlcSwgcmVzcCB9ID0gYXdhaXQgc2VuZFJlcXVlc3QoeyBzb3VyY2VVcmwsIHRpbWVvdXQgfSk7XG5cbiAgICB0cnkge1xuICAgICAgbGV0IHRvdGFsU2l6ZSA9IHBhcnNlRmxvYXQocmVzcC5oZWFkZXJzWydjb250ZW50LWxlbmd0aCddKSB8fCAwO1xuICAgICAgY29uc3QgcHJvZ3Jlc3MgPSBuZXcgUHJvZ3Jlc3MobG9nZ2VyKTtcbiAgICAgIHByb2dyZXNzLmluaXQodG90YWxTaXplKTtcblxuICAgICAgYXdhaXQgZG93bmxvYWRSZXNwb25zZSh7IHJlc3AsIHRhcmdldFBhdGgsIHByb2dyZXNzIH0pO1xuXG4gICAgICBwcm9ncmVzcy5jb21wbGV0ZSgpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgcmVxLmFib3J0KCk7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBpZiAoZXJyLm1lc3NhZ2UgIT09ICdFTk9URk9VTkQnKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoZXJyKTtcbiAgICB9XG4gICAgdGhyb3cgZXJyO1xuICB9XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/cli_plugin/install/downloaders/http.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/src/cli_plugin/install/downloaders/http.js",
      "sourcesContent": [
        "import Wreck from 'wreck';\nimport Progress from '../progress';\nimport { fromNode as fn } from 'bluebird';\nimport { createWriteStream, unlinkSync } from 'fs';\n\nfunction sendRequest({ sourceUrl, timeout }) {\n  const maxRedirects = 11; //Because this one goes to 11.\n  return fn(cb => {\n    const req = Wreck.request('GET', sourceUrl, { timeout, redirects: maxRedirects }, (err, resp) => {\n      if (err) {\n        if (err.code === 'ECONNREFUSED') {\n          err = new Error('ENOTFOUND');\n        }\n\n        return cb(err);\n      }\n\n      if (resp.statusCode >= 400) {\n        return cb(new Error('ENOTFOUND'));\n      }\n\n      cb(null, { req, resp });\n    });\n  });\n}\n\nfunction downloadResponse({ resp, targetPath, progress }) {\n  return new Promise((resolve, reject) => {\n    const writeStream = createWriteStream(targetPath);\n\n    // if either stream errors, fail quickly\n    resp.on('error', reject);\n    writeStream.on('error', reject);\n\n    // report progress as we download\n    resp.on('data', (chunk) => {\n      progress.progress(chunk.length);\n    });\n\n    // write the download to the file system\n    resp.pipe(writeStream);\n\n    // when the write is done, we are done\n    writeStream.on('finish', resolve);\n  });\n}\n\n/*\nResponsible for managing http transfers\n*/\nexport default async function downloadUrl(logger, sourceUrl, targetPath, timeout) {\n  try {\n    const { req, resp } = await sendRequest({ sourceUrl, timeout });\n\n    try {\n      let totalSize = parseFloat(resp.headers['content-length']) || 0;\n      const progress = new Progress(logger);\n      progress.init(totalSize);\n\n      await downloadResponse({ resp, targetPath, progress });\n\n      progress.complete();\n    } catch (err) {\n      req.abort();\n      throw err;\n    }\n  } catch (err) {\n    if (err.message !== 'ENOTFOUND') {\n      logger.error(err);\n    }\n    throw err;\n  }\n};\n"
      ]
    },
    "mtime": 1467036622785
  },
  "{\"filename\":\"/home/vio/v3metrics/src/cli_plugin/install/progress.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "Progress"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "Progress",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check"
      ]
    },
    "ignored": false,
    "code": "/**\n * Generates file transfer progress messages\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar Progress = (function () {\n  function Progress(logger) {\n    _classCallCheck(this, Progress);\n\n    var self = this;\n\n    self.dotCount = 0;\n    self.runningTotal = 0;\n    self.totalSize = 0;\n    self.logger = logger;\n  }\n\n  _createClass(Progress, [{\n    key: 'init',\n    value: function init(size) {\n      this.totalSize = size;\n      var totalDesc = this.totalSize || 'unknown number of';\n\n      this.logger.log('Transferring ' + totalDesc + ' bytes', true);\n    }\n  }, {\n    key: 'progress',\n    value: function progress(size) {\n      if (!this.totalSize) return;\n\n      this.runningTotal += size;\n      var newDotCount = Math.round(this.runningTotal / this.totalSize * 100 / 5);\n      if (newDotCount > 20) newDotCount = 20;\n      for (var i = 0; i < newDotCount - this.dotCount; i++) {\n        this.logger.log('.', true);\n      }\n      this.dotCount = newDotCount;\n    }\n  }, {\n    key: 'complete',\n    value: function complete() {\n      this.logger.log('Transfer complete', false);\n    }\n  }]);\n\n  return Progress;\n})();\n\nexports['default'] = Progress;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL2NsaV9wbHVnaW4vaW5zdGFsbC9wcm9ncmVzcy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0lBR3FCLFFBQVE7QUFFaEIsV0FGUSxRQUFRLENBRWYsTUFBTSxFQUFFOzBCQUZELFFBQVE7O0FBR3pCLFFBQU0sSUFBSSxHQUFHLElBQUksQ0FBQzs7QUFFbEIsUUFBSSxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUM7QUFDbEIsUUFBSSxDQUFDLFlBQVksR0FBRyxDQUFDLENBQUM7QUFDdEIsUUFBSSxDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUM7QUFDbkIsUUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7R0FDdEI7O2VBVGtCLFFBQVE7O1dBV3ZCLGNBQUMsSUFBSSxFQUFFO0FBQ1QsVUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUM7QUFDdEIsVUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLFNBQVMsSUFBSSxtQkFBbUIsQ0FBQzs7QUFFeEQsVUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLG1CQUFpQixTQUFTLGFBQVUsSUFBSSxDQUFDLENBQUM7S0FDMUQ7OztXQUVPLGtCQUFDLElBQUksRUFBRTtBQUNiLFVBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLE9BQU87O0FBRTVCLFVBQUksQ0FBQyxZQUFZLElBQUksSUFBSSxDQUFDO0FBQzFCLFVBQUksV0FBVyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsU0FBUyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQztBQUMzRSxVQUFJLFdBQVcsR0FBRyxFQUFFLEVBQUUsV0FBVyxHQUFHLEVBQUUsQ0FBQztBQUN2QyxXQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUksV0FBVyxHQUFHLElBQUksQ0FBQyxRQUFRLEFBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRTtBQUN0RCxZQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUM7T0FDNUI7QUFDRCxVQUFJLENBQUMsUUFBUSxHQUFHLFdBQVcsQ0FBQztLQUM3Qjs7O1dBRU8sb0JBQUc7QUFDVCxVQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsc0JBQXNCLEtBQUssQ0FBQyxDQUFDO0tBQzdDOzs7U0FoQ2tCLFFBQVE7OztxQkFBUixRQUFRIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL2NsaV9wbHVnaW4vaW5zdGFsbC9wcm9ncmVzcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogR2VuZXJhdGVzIGZpbGUgdHJhbnNmZXIgcHJvZ3Jlc3MgbWVzc2FnZXNcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJvZ3Jlc3Mge1xuXG4gIGNvbnN0cnVjdG9yKGxvZ2dlcikge1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gICAgc2VsZi5kb3RDb3VudCA9IDA7XG4gICAgc2VsZi5ydW5uaW5nVG90YWwgPSAwO1xuICAgIHNlbGYudG90YWxTaXplID0gMDtcbiAgICBzZWxmLmxvZ2dlciA9IGxvZ2dlcjtcbiAgfVxuXG4gIGluaXQoc2l6ZSkge1xuICAgIHRoaXMudG90YWxTaXplID0gc2l6ZTtcbiAgICBjb25zdCB0b3RhbERlc2MgPSB0aGlzLnRvdGFsU2l6ZSB8fCAndW5rbm93biBudW1iZXIgb2YnO1xuXG4gICAgdGhpcy5sb2dnZXIubG9nKGBUcmFuc2ZlcnJpbmcgJHt0b3RhbERlc2N9IGJ5dGVzYCwgdHJ1ZSk7XG4gIH1cblxuICBwcm9ncmVzcyhzaXplKSB7XG4gICAgaWYgKCF0aGlzLnRvdGFsU2l6ZSkgcmV0dXJuO1xuXG4gICAgdGhpcy5ydW5uaW5nVG90YWwgKz0gc2l6ZTtcbiAgICBsZXQgbmV3RG90Q291bnQgPSBNYXRoLnJvdW5kKHRoaXMucnVubmluZ1RvdGFsIC8gdGhpcy50b3RhbFNpemUgKiAxMDAgLyA1KTtcbiAgICBpZiAobmV3RG90Q291bnQgPiAyMCkgbmV3RG90Q291bnQgPSAyMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IChuZXdEb3RDb3VudCAtIHRoaXMuZG90Q291bnQpOyBpKyspIHtcbiAgICAgIHRoaXMubG9nZ2VyLmxvZygnLicsIHRydWUpO1xuICAgIH1cbiAgICB0aGlzLmRvdENvdW50ID0gbmV3RG90Q291bnQ7XG4gIH1cblxuICBjb21wbGV0ZSgpIHtcbiAgICB0aGlzLmxvZ2dlci5sb2coYFRyYW5zZmVyIGNvbXBsZXRlYCwgZmFsc2UpO1xuICB9XG5cbn1cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/cli_plugin/install/progress.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;;;;IAGqB,QAAQ;AAEhB,WAFQ,QAAQ,CAEf,MAAM,EAAE;0BAFD,QAAQ;;AAGzB,QAAM,IAAI,GAAG,IAAI,CAAC;;AAElB,QAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;AAClB,QAAI,CAAC,YAAY,GAAG,CAAC,CAAC;AACtB,QAAI,CAAC,SAAS,GAAG,CAAC,CAAC;AACnB,QAAI,CAAC,MAAM,GAAG,MAAM,CAAC;GACtB;;eATkB,QAAQ;;WAWvB,cAAC,IAAI,EAAE;AACT,UAAI,CAAC,SAAS,GAAG,IAAI,CAAC;AACtB,UAAM,SAAS,GAAG,IAAI,CAAC,SAAS,IAAI,mBAAmB,CAAC;;AAExD,UAAI,CAAC,MAAM,CAAC,GAAG,mBAAiB,SAAS,aAAU,IAAI,CAAC,CAAC;KAC1D;;;WAEO,kBAAC,IAAI,EAAE;AACb,UAAI,CAAC,IAAI,CAAC,SAAS,EAAE,OAAO;;AAE5B,UAAI,CAAC,YAAY,IAAI,IAAI,CAAC;AAC1B,UAAI,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,SAAS,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC;AAC3E,UAAI,WAAW,GAAG,EAAE,EAAE,WAAW,GAAG,EAAE,CAAC;AACvC,WAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAI,WAAW,GAAG,IAAI,CAAC,QAAQ,AAAC,EAAE,CAAC,EAAE,EAAE;AACtD,YAAI,CAAC,MAAM,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;OAC5B;AACD,UAAI,CAAC,QAAQ,GAAG,WAAW,CAAC;KAC7B;;;WAEO,oBAAG;AACT,UAAI,CAAC,MAAM,CAAC,GAAG,sBAAsB,KAAK,CAAC,CAAC;KAC7C;;;SAhCkB,QAAQ;;;qBAAR,QAAQ",
      "file": "/home/vio/v3metrics/src/cli_plugin/install/progress.js",
      "sourcesContent": [
        "/**\n * Generates file transfer progress messages\n */\nexport default class Progress {\n\n  constructor(logger) {\n    const self = this;\n\n    self.dotCount = 0;\n    self.runningTotal = 0;\n    self.totalSize = 0;\n    self.logger = logger;\n  }\n\n  init(size) {\n    this.totalSize = size;\n    const totalDesc = this.totalSize || 'unknown number of';\n\n    this.logger.log(`Transferring ${totalDesc} bytes`, true);\n  }\n\n  progress(size) {\n    if (!this.totalSize) return;\n\n    this.runningTotal += size;\n    let newDotCount = Math.round(this.runningTotal / this.totalSize * 100 / 5);\n    if (newDotCount > 20) newDotCount = 20;\n    for (let i = 0; i < (newDotCount - this.dotCount); i++) {\n      this.logger.log('.', true);\n    }\n    this.dotCount = newDotCount;\n  }\n\n  complete() {\n    this.logger.log(`Transfer complete`, false);\n  }\n\n}\n"
      ]
    },
    "mtime": 1467036622785
  },
  "{\"filename\":\"/home/vio/v3metrics/src/cli_plugin/install/downloaders/file.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "../progress",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Progress"
              }
            ]
          },
          {
            "source": "fs",
            "imported": [
              "createWriteStream",
              "createReadStream",
              "unlinkSync",
              "statSync"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "createWriteStream",
                "local": "createWriteStream"
              },
              {
                "kind": "named",
                "imported": "createReadStream",
                "local": "createReadStream"
              },
              {
                "kind": "named",
                "imported": "unlinkSync",
                "local": "unlinkSync"
              },
              {
                "kind": "named",
                "imported": "statSync",
                "local": "statSync"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "async-to-generator",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar copyFile = _asyncToGenerator(function* (_ref2) {\n  var readStream = _ref2.readStream;\n  var writeStream = _ref2.writeStream;\n  var progress = _ref2.progress;\n\n  yield new Promise(function (resolve, reject) {\n    // if either stream errors, fail quickly\n    readStream.on('error', reject);\n    writeStream.on('error', reject);\n\n    // report progress as we transfer\n    readStream.on('data', function (chunk) {\n      progress.progress(chunk.length);\n    });\n\n    // write the download to the file system\n    readStream.pipe(writeStream);\n\n    // when the write is done, we are done\n    writeStream.on('finish', resolve);\n  });\n}\n\n/*\n// Responsible for managing local file transfers\n*/\n);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nvar _progress = require('../progress');\n\nvar _progress2 = _interopRequireDefault(_progress);\n\nvar _fs = require('fs');\n\nfunction openSourceFile(_ref) {\n  var sourcePath = _ref.sourcePath;\n\n  try {\n    var fileInfo = (0, _fs.statSync)(sourcePath);\n\n    var readStream = (0, _fs.createReadStream)(sourcePath);\n\n    return { readStream: readStream, fileInfo: fileInfo };\n  } catch (err) {\n    if (err.code === 'ENOENT') {\n      throw new Error('ENOTFOUND');\n    }\n\n    throw err;\n  }\n}\n\nexports['default'] = _asyncToGenerator(function* (logger, sourcePath, targetPath) {\n  try {\n    var _openSourceFile = openSourceFile({ sourcePath: sourcePath });\n\n    var readStream = _openSourceFile.readStream;\n    var fileInfo = _openSourceFile.fileInfo;\n\n    var writeStream = (0, _fs.createWriteStream)(targetPath);\n\n    try {\n      var progress = new _progress2['default'](logger);\n      progress.init(fileInfo.size);\n\n      yield copyFile({ readStream: readStream, writeStream: writeStream, progress: progress });\n\n      progress.complete();\n    } catch (err) {\n      readStream.close();\n      writeStream.close();\n      throw err;\n    }\n  } catch (err) {\n    logger.error(err);\n    throw err;\n  }\n});\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL2NsaV9wbHVnaW4vaW5zdGFsbC9kb3dubG9hZGVycy9maWxlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztJQW1CZSxRQUFRLHFCQUF2QixXQUF3QixLQUFxQyxFQUFFO01BQXJDLFVBQVUsR0FBWixLQUFxQyxDQUFuQyxVQUFVO01BQUUsV0FBVyxHQUF6QixLQUFxQyxDQUF2QixXQUFXO01BQUUsUUFBUSxHQUFuQyxLQUFxQyxDQUFWLFFBQVE7O0FBQ3pELFFBQU0sSUFBSSxPQUFPLENBQUMsVUFBQyxPQUFPLEVBQUUsTUFBTSxFQUFLOztBQUVyQyxjQUFVLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxNQUFNLENBQUMsQ0FBQztBQUMvQixlQUFXLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxNQUFNLENBQUMsQ0FBQzs7O0FBR2hDLGNBQVUsQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLFVBQUMsS0FBSyxFQUFLO0FBQy9CLGNBQVEsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0tBQ2pDLENBQUMsQ0FBQzs7O0FBR0gsY0FBVSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQzs7O0FBRzdCLGVBQVcsQ0FBQyxFQUFFLENBQUMsUUFBUSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0dBQ25DLENBQUMsQ0FBQztDQUNKOzs7Ozs7Ozs7Ozt3QkFwQ29CLGFBQWE7Ozs7a0JBQ3dDLElBQUk7O0FBRTlFLFNBQVMsY0FBYyxDQUFDLElBQWMsRUFBRTtNQUFkLFVBQVUsR0FBWixJQUFjLENBQVosVUFBVTs7QUFDbEMsTUFBSTtBQUNGLFFBQUksUUFBUSxHQUFHLGtCQUFTLFVBQVUsQ0FBQyxDQUFDOztBQUVwQyxRQUFNLFVBQVUsR0FBRywwQkFBaUIsVUFBVSxDQUFDLENBQUM7O0FBRWhELFdBQU8sRUFBRSxVQUFVLEVBQVYsVUFBVSxFQUFFLFFBQVEsRUFBUixRQUFRLEVBQUUsQ0FBQztHQUNqQyxDQUFDLE9BQU8sR0FBRyxFQUFFO0FBQ1osUUFBSSxHQUFHLENBQUMsSUFBSSxLQUFLLFFBQVEsRUFBRTtBQUN6QixZQUFNLElBQUksS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0tBQzlCOztBQUVELFVBQU0sR0FBRyxDQUFDO0dBQ1g7Q0FDRjs7dUNBd0JjLFdBQTZCLE1BQU0sRUFBRSxVQUFVLEVBQUUsVUFBVSxFQUFFO0FBQzFFLE1BQUk7MEJBQytCLGNBQWMsQ0FBQyxFQUFFLFVBQVUsRUFBVixVQUFVLEVBQUUsQ0FBQzs7UUFBdkQsVUFBVSxtQkFBVixVQUFVO1FBQUUsUUFBUSxtQkFBUixRQUFROztBQUM1QixRQUFNLFdBQVcsR0FBRywyQkFBa0IsVUFBVSxDQUFDLENBQUM7O0FBRWxELFFBQUk7QUFDRixVQUFNLFFBQVEsR0FBRywwQkFBYSxNQUFNLENBQUMsQ0FBQztBQUN0QyxjQUFRLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQzs7QUFFN0IsWUFBTSxRQUFRLENBQUMsRUFBRSxVQUFVLEVBQVYsVUFBVSxFQUFFLFdBQVcsRUFBWCxXQUFXLEVBQUUsUUFBUSxFQUFSLFFBQVEsRUFBRSxDQUFDLENBQUM7O0FBRXRELGNBQVEsQ0FBQyxRQUFRLEVBQUUsQ0FBQztLQUNyQixDQUFDLE9BQU8sR0FBRyxFQUFFO0FBQ1osZ0JBQVUsQ0FBQyxLQUFLLEVBQUUsQ0FBQztBQUNuQixpQkFBVyxDQUFDLEtBQUssRUFBRSxDQUFDO0FBQ3BCLFlBQU0sR0FBRyxDQUFDO0tBQ1g7R0FDRixDQUFDLE9BQU8sR0FBRyxFQUFFO0FBQ1osVUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNsQixVQUFNLEdBQUcsQ0FBQztHQUNYO0NBQ0YiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvY2xpX3BsdWdpbi9pbnN0YWxsL2Rvd25sb2FkZXJzL2ZpbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUHJvZ3Jlc3MgZnJvbSAnLi4vcHJvZ3Jlc3MnO1xuaW1wb3J0IHsgY3JlYXRlV3JpdGVTdHJlYW0sIGNyZWF0ZVJlYWRTdHJlYW0sIHVubGlua1N5bmMsIHN0YXRTeW5jIH0gZnJvbSAnZnMnO1xuXG5mdW5jdGlvbiBvcGVuU291cmNlRmlsZSh7IHNvdXJjZVBhdGggfSkge1xuICB0cnkge1xuICAgIGxldCBmaWxlSW5mbyA9IHN0YXRTeW5jKHNvdXJjZVBhdGgpO1xuXG4gICAgY29uc3QgcmVhZFN0cmVhbSA9IGNyZWF0ZVJlYWRTdHJlYW0oc291cmNlUGF0aCk7XG5cbiAgICByZXR1cm4geyByZWFkU3RyZWFtLCBmaWxlSW5mbyB9O1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBpZiAoZXJyLmNvZGUgPT09ICdFTk9FTlQnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0VOT1RGT1VORCcpO1xuICAgIH1cblxuICAgIHRocm93IGVycjtcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBjb3B5RmlsZSh7IHJlYWRTdHJlYW0sIHdyaXRlU3RyZWFtLCBwcm9ncmVzcyB9KSB7XG4gIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAvLyBpZiBlaXRoZXIgc3RyZWFtIGVycm9ycywgZmFpbCBxdWlja2x5XG4gICAgcmVhZFN0cmVhbS5vbignZXJyb3InLCByZWplY3QpO1xuICAgIHdyaXRlU3RyZWFtLm9uKCdlcnJvcicsIHJlamVjdCk7XG5cbiAgICAvLyByZXBvcnQgcHJvZ3Jlc3MgYXMgd2UgdHJhbnNmZXJcbiAgICByZWFkU3RyZWFtLm9uKCdkYXRhJywgKGNodW5rKSA9PiB7XG4gICAgICBwcm9ncmVzcy5wcm9ncmVzcyhjaHVuay5sZW5ndGgpO1xuICAgIH0pO1xuXG4gICAgLy8gd3JpdGUgdGhlIGRvd25sb2FkIHRvIHRoZSBmaWxlIHN5c3RlbVxuICAgIHJlYWRTdHJlYW0ucGlwZSh3cml0ZVN0cmVhbSk7XG5cbiAgICAvLyB3aGVuIHRoZSB3cml0ZSBpcyBkb25lLCB3ZSBhcmUgZG9uZVxuICAgIHdyaXRlU3RyZWFtLm9uKCdmaW5pc2gnLCByZXNvbHZlKTtcbiAgfSk7XG59XG5cbi8qXG4vLyBSZXNwb25zaWJsZSBmb3IgbWFuYWdpbmcgbG9jYWwgZmlsZSB0cmFuc2ZlcnNcbiovXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBjb3B5TG9jYWxGaWxlKGxvZ2dlciwgc291cmNlUGF0aCwgdGFyZ2V0UGF0aCkge1xuICB0cnkge1xuICAgIGNvbnN0IHsgcmVhZFN0cmVhbSwgZmlsZUluZm8gfSA9IG9wZW5Tb3VyY2VGaWxlKHsgc291cmNlUGF0aCB9KTtcbiAgICBjb25zdCB3cml0ZVN0cmVhbSA9IGNyZWF0ZVdyaXRlU3RyZWFtKHRhcmdldFBhdGgpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHByb2dyZXNzID0gbmV3IFByb2dyZXNzKGxvZ2dlcik7XG4gICAgICBwcm9ncmVzcy5pbml0KGZpbGVJbmZvLnNpemUpO1xuXG4gICAgICBhd2FpdCBjb3B5RmlsZSh7IHJlYWRTdHJlYW0sIHdyaXRlU3RyZWFtLCBwcm9ncmVzcyB9KTtcblxuICAgICAgcHJvZ3Jlc3MuY29tcGxldGUoKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHJlYWRTdHJlYW0uY2xvc2UoKTtcbiAgICAgIHdyaXRlU3RyZWFtLmNsb3NlKCk7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBsb2dnZXIuZXJyb3IoZXJyKTtcbiAgICB0aHJvdyBlcnI7XG4gIH1cbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/cli_plugin/install/downloaders/file.js"
      ],
      "names": [],
      "mappings": ";;;;;;IAmBe,QAAQ,qBAAvB,WAAwB,KAAqC,EAAE;MAArC,UAAU,GAAZ,KAAqC,CAAnC,UAAU;MAAE,WAAW,GAAzB,KAAqC,CAAvB,WAAW;MAAE,QAAQ,GAAnC,KAAqC,CAAV,QAAQ;;AACzD,QAAM,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM,EAAK;;AAErC,cAAU,CAAC,EAAE,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;AAC/B,eAAW,CAAC,EAAE,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;;;AAGhC,cAAU,CAAC,EAAE,CAAC,MAAM,EAAE,UAAC,KAAK,EAAK;AAC/B,cAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;KACjC,CAAC,CAAC;;;AAGH,cAAU,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;;;AAG7B,eAAW,CAAC,EAAE,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;GACnC,CAAC,CAAC;CACJ;;;;;;;;;;;wBApCoB,aAAa;;;;kBACwC,IAAI;;AAE9E,SAAS,cAAc,CAAC,IAAc,EAAE;MAAd,UAAU,GAAZ,IAAc,CAAZ,UAAU;;AAClC,MAAI;AACF,QAAI,QAAQ,GAAG,kBAAS,UAAU,CAAC,CAAC;;AAEpC,QAAM,UAAU,GAAG,0BAAiB,UAAU,CAAC,CAAC;;AAEhD,WAAO,EAAE,UAAU,EAAV,UAAU,EAAE,QAAQ,EAAR,QAAQ,EAAE,CAAC;GACjC,CAAC,OAAO,GAAG,EAAE;AACZ,QAAI,GAAG,CAAC,IAAI,KAAK,QAAQ,EAAE;AACzB,YAAM,IAAI,KAAK,CAAC,WAAW,CAAC,CAAC;KAC9B;;AAED,UAAM,GAAG,CAAC;GACX;CACF;;uCAwBc,WAA6B,MAAM,EAAE,UAAU,EAAE,UAAU,EAAE;AAC1E,MAAI;0BAC+B,cAAc,CAAC,EAAE,UAAU,EAAV,UAAU,EAAE,CAAC;;QAAvD,UAAU,mBAAV,UAAU;QAAE,QAAQ,mBAAR,QAAQ;;AAC5B,QAAM,WAAW,GAAG,2BAAkB,UAAU,CAAC,CAAC;;AAElD,QAAI;AACF,UAAM,QAAQ,GAAG,0BAAa,MAAM,CAAC,CAAC;AACtC,cAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;;AAE7B,YAAM,QAAQ,CAAC,EAAE,UAAU,EAAV,UAAU,EAAE,WAAW,EAAX,WAAW,EAAE,QAAQ,EAAR,QAAQ,EAAE,CAAC,CAAC;;AAEtD,cAAQ,CAAC,QAAQ,EAAE,CAAC;KACrB,CAAC,OAAO,GAAG,EAAE;AACZ,gBAAU,CAAC,KAAK,EAAE,CAAC;AACnB,iBAAW,CAAC,KAAK,EAAE,CAAC;AACpB,YAAM,GAAG,CAAC;KACX;GACF,CAAC,OAAO,GAAG,EAAE;AACZ,UAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AAClB,UAAM,GAAG,CAAC;GACX;CACF",
      "file": "/home/vio/v3metrics/src/cli_plugin/install/downloaders/file.js",
      "sourcesContent": [
        "import Progress from '../progress';\nimport { createWriteStream, createReadStream, unlinkSync, statSync } from 'fs';\n\nfunction openSourceFile({ sourcePath }) {\n  try {\n    let fileInfo = statSync(sourcePath);\n\n    const readStream = createReadStream(sourcePath);\n\n    return { readStream, fileInfo };\n  } catch (err) {\n    if (err.code === 'ENOENT') {\n      throw new Error('ENOTFOUND');\n    }\n\n    throw err;\n  }\n}\n\nasync function copyFile({ readStream, writeStream, progress }) {\n  await new Promise((resolve, reject) => {\n    // if either stream errors, fail quickly\n    readStream.on('error', reject);\n    writeStream.on('error', reject);\n\n    // report progress as we transfer\n    readStream.on('data', (chunk) => {\n      progress.progress(chunk.length);\n    });\n\n    // write the download to the file system\n    readStream.pipe(writeStream);\n\n    // when the write is done, we are done\n    writeStream.on('finish', resolve);\n  });\n}\n\n/*\n// Responsible for managing local file transfers\n*/\nexport default async function copyLocalFile(logger, sourcePath, targetPath) {\n  try {\n    const { readStream, fileInfo } = openSourceFile({ sourcePath });\n    const writeStream = createWriteStream(targetPath);\n\n    try {\n      const progress = new Progress(logger);\n      progress.init(fileInfo.size);\n\n      await copyFile({ readStream, writeStream, progress });\n\n      progress.complete();\n    } catch (err) {\n      readStream.close();\n      writeStream.close();\n      throw err;\n    }\n  } catch (err) {\n    logger.error(err);\n    throw err;\n  }\n};\n"
      ]
    },
    "mtime": 1467036622785
  },
  "{\"filename\":\"/home/vio/v3metrics/src/cli_plugin/lib/errors.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "UnsupportedProtocolError"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "UnsupportedProtocolError",
              "exported": "UnsupportedProtocolError"
            }
          ]
        }
      },
      "usedHelpers": [
        "get",
        "inherits",
        "class-call-check"
      ]
    },
    "ignored": false,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar UnsupportedProtocolError = (function (_Error) {\n  _inherits(UnsupportedProtocolError, _Error);\n\n  function UnsupportedProtocolError() {\n    _classCallCheck(this, UnsupportedProtocolError);\n\n    _get(Object.getPrototypeOf(UnsupportedProtocolError.prototype), \"constructor\", this).apply(this, arguments);\n  }\n\n  return UnsupportedProtocolError;\n})(Error);\n\nexports.UnsupportedProtocolError = UnsupportedProtocolError;\n;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL2NsaV9wbHVnaW4vbGliL2Vycm9ycy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7SUFBYSx3QkFBd0I7WUFBeEIsd0JBQXdCOztXQUF4Qix3QkFBd0I7MEJBQXhCLHdCQUF3Qjs7K0JBQXhCLHdCQUF3Qjs7O1NBQXhCLHdCQUF3QjtHQUFTLEtBQUs7OztBQUFHLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvY2xpX3BsdWdpbi9saWIvZXJyb3JzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIFVuc3VwcG9ydGVkUHJvdG9jb2xFcnJvciBleHRlbmRzIEVycm9yIHt9O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/cli_plugin/lib/errors.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;;;IAAa,wBAAwB;YAAxB,wBAAwB;;WAAxB,wBAAwB;0BAAxB,wBAAwB;;+BAAxB,wBAAwB;;;SAAxB,wBAAwB;GAAS,KAAK;;;AAAG,CAAC",
      "file": "/home/vio/v3metrics/src/cli_plugin/lib/errors.js",
      "sourcesContent": [
        "export class UnsupportedProtocolError extends Error {};\n"
      ]
    },
    "mtime": 1467036622785
  },
  "{\"filename\":\"/home/vio/v3metrics/src/cli_plugin/install/cleanup.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "rimraf",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "rimraf"
              }
            ]
          },
          {
            "source": "fs",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "fs"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "cleanPrevious",
            "settings",
            "logger",
            "cleanArtifacts",
            "settings"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "cleanPrevious",
              "exported": "cleanPrevious"
            },
            {
              "kind": "local",
              "local": "settings",
              "exported": "settings"
            },
            {
              "kind": "local",
              "local": "logger",
              "exported": "logger"
            },
            {
              "kind": "local",
              "local": "cleanArtifacts",
              "exported": "cleanArtifacts"
            },
            {
              "kind": "local",
              "local": "settings",
              "exported": "settings"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports.cleanPrevious = cleanPrevious;\nexports.cleanArtifacts = cleanArtifacts;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _rimraf = require('rimraf');\n\nvar _rimraf2 = _interopRequireDefault(_rimraf);\n\nvar _fs = require('fs');\n\nvar _fs2 = _interopRequireDefault(_fs);\n\nfunction cleanPrevious(settings, logger) {\n  return new Promise(function (resolve, reject) {\n    try {\n      _fs2['default'].statSync(settings.workingPath);\n\n      logger.log('Found previous install attempt. Deleting...');\n      try {\n        _rimraf2['default'].sync(settings.workingPath);\n      } catch (e) {\n        reject(e);\n      }\n      resolve();\n    } catch (e) {\n      if (e.code !== 'ENOENT') reject(e);\n\n      resolve();\n    }\n  });\n}\n\n;\n\nfunction cleanArtifacts(settings) {\n  // delete the working directory.\n  // At this point we're bailing, so swallow any errors on delete.\n  try {\n    _rimraf2['default'].sync(settings.workingPath);\n    _rimraf2['default'].sync(settings.plugins[0].path);\n  } catch (e) {} // eslint-disable-line no-empty\n}\n\n;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL2NsaV9wbHVnaW4vaW5zdGFsbC9jbGVhbnVwLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7c0JBQW1CLFFBQVE7Ozs7a0JBQ1osSUFBSTs7OztBQUVaLFNBQVMsYUFBYSxDQUFDLFFBQVEsRUFBRSxNQUFNLEVBQUU7QUFDOUMsU0FBTyxJQUFJLE9BQU8sQ0FBQyxVQUFVLE9BQU8sRUFBRSxNQUFNLEVBQUU7QUFDNUMsUUFBSTtBQUNGLHNCQUFHLFFBQVEsQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDLENBQUM7O0FBRWxDLFlBQU0sQ0FBQyxHQUFHLENBQUMsNkNBQTZDLENBQUMsQ0FBQztBQUMxRCxVQUFJO0FBQ0YsNEJBQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsQ0FBQztPQUNuQyxDQUFDLE9BQU8sQ0FBQyxFQUFFO0FBQ1YsY0FBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO09BQ1g7QUFDRCxhQUFPLEVBQUUsQ0FBQztLQUNYLENBQUMsT0FBTyxDQUFDLEVBQUU7QUFDVixVQUFJLENBQUMsQ0FBQyxJQUFJLEtBQUssUUFBUSxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQzs7QUFFbkMsYUFBTyxFQUFFLENBQUM7S0FDWDtHQUNGLENBQUMsQ0FBQztDQUNKOztBQUFBLENBQUM7O0FBRUssU0FBUyxjQUFjLENBQUMsUUFBUSxFQUFFOzs7QUFHdkMsTUFBSTtBQUNGLHdCQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDbEMsd0JBQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUM7R0FDdkMsQ0FDRCxPQUFPLENBQUMsRUFBRSxFQUFFO0NBQ2I7O0FBQUEsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9jbGlfcGx1Z2luL2luc3RhbGwvY2xlYW51cC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCByaW1yYWYgZnJvbSAncmltcmFmJztcbmltcG9ydCBmcyBmcm9tICdmcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBjbGVhblByZXZpb3VzKHNldHRpbmdzLCBsb2dnZXIpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICB0cnkge1xuICAgICAgZnMuc3RhdFN5bmMoc2V0dGluZ3Mud29ya2luZ1BhdGgpO1xuXG4gICAgICBsb2dnZXIubG9nKCdGb3VuZCBwcmV2aW91cyBpbnN0YWxsIGF0dGVtcHQuIERlbGV0aW5nLi4uJyk7XG4gICAgICB0cnkge1xuICAgICAgICByaW1yYWYuc3luYyhzZXR0aW5ncy53b3JraW5nUGF0aCk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJlamVjdChlKTtcbiAgICAgIH1cbiAgICAgIHJlc29sdmUoKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBpZiAoZS5jb2RlICE9PSAnRU5PRU5UJykgcmVqZWN0KGUpO1xuXG4gICAgICByZXNvbHZlKCk7XG4gICAgfVxuICB9KTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBjbGVhbkFydGlmYWN0cyhzZXR0aW5ncykge1xuICAvLyBkZWxldGUgdGhlIHdvcmtpbmcgZGlyZWN0b3J5LlxuICAvLyBBdCB0aGlzIHBvaW50IHdlJ3JlIGJhaWxpbmcsIHNvIHN3YWxsb3cgYW55IGVycm9ycyBvbiBkZWxldGUuXG4gIHRyeSB7XG4gICAgcmltcmFmLnN5bmMoc2V0dGluZ3Mud29ya2luZ1BhdGgpO1xuICAgIHJpbXJhZi5zeW5jKHNldHRpbmdzLnBsdWdpbnNbMF0ucGF0aCk7XG4gIH1cbiAgY2F0Y2ggKGUpIHt9IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tZW1wdHlcbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/cli_plugin/install/cleanup.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;sBAAmB,QAAQ;;;;kBACZ,IAAI;;;;AAEZ,SAAS,aAAa,CAAC,QAAQ,EAAE,MAAM,EAAE;AAC9C,SAAO,IAAI,OAAO,CAAC,UAAU,OAAO,EAAE,MAAM,EAAE;AAC5C,QAAI;AACF,sBAAG,QAAQ,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;;AAElC,YAAM,CAAC,GAAG,CAAC,6CAA6C,CAAC,CAAC;AAC1D,UAAI;AACF,4BAAO,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;OACnC,CAAC,OAAO,CAAC,EAAE;AACV,cAAM,CAAC,CAAC,CAAC,CAAC;OACX;AACD,aAAO,EAAE,CAAC;KACX,CAAC,OAAO,CAAC,EAAE;AACV,UAAI,CAAC,CAAC,IAAI,KAAK,QAAQ,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC;;AAEnC,aAAO,EAAE,CAAC;KACX;GACF,CAAC,CAAC;CACJ;;AAAA,CAAC;;AAEK,SAAS,cAAc,CAAC,QAAQ,EAAE;;;AAGvC,MAAI;AACF,wBAAO,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;AAClC,wBAAO,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;GACvC,CACD,OAAO,CAAC,EAAE,EAAE;CACb;;AAAA,CAAC",
      "file": "/home/vio/v3metrics/src/cli_plugin/install/cleanup.js",
      "sourcesContent": [
        "import rimraf from 'rimraf';\nimport fs from 'fs';\n\nexport function cleanPrevious(settings, logger) {\n  return new Promise(function (resolve, reject) {\n    try {\n      fs.statSync(settings.workingPath);\n\n      logger.log('Found previous install attempt. Deleting...');\n      try {\n        rimraf.sync(settings.workingPath);\n      } catch (e) {\n        reject(e);\n      }\n      resolve();\n    } catch (e) {\n      if (e.code !== 'ENOENT') reject(e);\n\n      resolve();\n    }\n  });\n};\n\nexport function cleanArtifacts(settings) {\n  // delete the working directory.\n  // At this point we're bailing, so swallow any errors on delete.\n  try {\n    rimraf.sync(settings.workingPath);\n    rimraf.sync(settings.plugins[0].path);\n  }\n  catch (e) {} // eslint-disable-line no-empty\n};\n"
      ]
    },
    "mtime": 1467036622785
  },
  "{\"filename\":\"/home/vio/v3metrics/src/cli_plugin/install/pack.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "./zip",
            "imported": [
              "listFiles",
              "extractFiles"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "listFiles",
                "local": "listFiles"
              },
              {
                "kind": "named",
                "imported": "extractFiles",
                "local": "extractFiles"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "resolve"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "resolve",
                "local": "resolve"
              }
            ]
          },
          {
            "source": "rimraf",
            "imported": [
              "sync"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "sync",
                "local": "rimrafSync"
              }
            ]
          },
          {
            "source": "validate-npm-package-name",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "validate"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "getPackData",
            "settings",
            "logger",
            "extract",
            "settings",
            "logger"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "getPackData",
              "exported": "getPackData"
            },
            {
              "kind": "local",
              "local": "settings",
              "exported": "settings"
            },
            {
              "kind": "local",
              "local": "logger",
              "exported": "logger"
            },
            {
              "kind": "local",
              "local": "extract",
              "exported": "extract"
            },
            {
              "kind": "local",
              "local": "settings",
              "exported": "settings"
            },
            {
              "kind": "local",
              "local": "logger",
              "exported": "logger"
            }
          ]
        }
      },
      "usedHelpers": [
        "async-to-generator",
        "sliced-to-array",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }; })();\n\n/**\n * Returns an array of package objects. There will be one for each of\n *  package.json files in the archive\n * @param {object} settings - a plugin installer settings object\n */\n\nvar listPackages = _asyncToGenerator(function* (settings) {\n  var regExp = new RegExp('(kibana/([^/]+))/package.json', 'i');\n  var archiveFiles = yield (0, _zip.listFiles)(settings.tempArchiveFile);\n\n  return (0, _lodash2['default'])(archiveFiles).map(function (file) {\n    return file.replace(/\\\\/g, '/');\n  }).map(function (file) {\n    return file.match(regExp);\n  }).compact().map(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 3);\n\n    var file = _ref2[0];\n    var _ = _ref2[1];\n    var folder = _ref2[2];\n    return { file: file, folder: folder };\n  }).uniq().value();\n}\n\n/**\n * Extracts the package.json files into the workingPath\n * @param {object} settings - a plugin installer settings object\n * @param {array} packages - array of package objects from listPackages()\n */\n);\n\nvar extractPackageFiles = _asyncToGenerator(function* (settings, packages) {\n  var filter = {\n    files: packages.map(function (pkg) {\n      return pkg.file;\n    })\n  };\n  yield (0, _zip.extractFiles)(settings.tempArchiveFile, settings.workingPath, 0, filter);\n}\n\n/**\n * Deletes the package.json files created by extractPackageFiles()\n * @param {object} settings - a plugin installer settings object\n */\n);\n\n/**\n * Examine each package.json file to determine the plugin name,\n *  version, and platform. Mutates the package objects in the packages array\n * @param {object} settings - a plugin installer settings object\n * @param {array} packages - array of package objects from listPackages()\n */\n\nvar mergePackageData = _asyncToGenerator(function* (settings, packages) {\n  return packages.map(function (pkg) {\n    var fullPath = (0, _path.resolve)(settings.workingPath, pkg.file);\n    var packageInfo = require(fullPath);\n\n    pkg.version = _lodash2['default'].get(packageInfo, 'version');\n    pkg.name = _lodash2['default'].get(packageInfo, 'name');\n    pkg.path = (0, _path.resolve)(settings.pluginDir, pkg.name);\n\n    var regExp = new RegExp(pkg.name + '-(.+)', 'i');\n    var matches = pkg.folder.match(regExp);\n    pkg.platform = matches ? matches[1] : undefined;\n\n    return pkg;\n  });\n}\n\n/**\n * Extracts the first plugin in the archive.\n *  NOTE: This will need to be changed in later versions of the pack installer\n *  that allow for the installation of more than one plugin at once.\n * @param {object} settings - a plugin installer settings object\n */\n);\n\nvar extractArchive = _asyncToGenerator(function* (settings) {\n  var filter = {\n    paths: ['kibana/' + settings.plugins[0].folder]\n  };\n\n  yield (0, _zip.extractFiles)(settings.tempArchiveFile, settings.workingPath, 2, filter);\n}\n\n/**\n * Returns the detailed information about each kibana plugin in the pack.\n *  TODO: If there are platform specific folders, determine which one to use.\n * @param {object} settings - a plugin installer settings object\n * @param {object} logger - a plugin installer logger object\n */\n);\n\nvar getPackData = _asyncToGenerator(function* (settings, logger) {\n  var packages = undefined;\n  try {\n    logger.log('Retrieving metadata from plugin archive');\n\n    packages = yield listPackages(settings);\n\n    yield extractPackageFiles(settings, packages);\n    yield mergePackageData(settings, packages);\n    yield deletePackageFiles(settings);\n  } catch (err) {\n    logger.error(err);\n    throw new Error('Error retrieving metadata from plugin archive');\n  }\n\n  if (packages.length === 0) {\n    throw new Error('No kibana plugins found in archive');\n  }\n  packages.forEach(assertValidPackageName);\n\n  settings.plugins = packages;\n});\n\nexports.getPackData = getPackData;\n\nvar extract = _asyncToGenerator(function* (settings, logger) {\n  try {\n    logger.log('Extracting plugin archive');\n\n    yield extractArchive(settings);\n\n    logger.log('Extraction complete');\n  } catch (err) {\n    logger.error(err);\n    throw new Error('Error extracting plugin archive');\n  }\n});\n\nexports.extract = extract;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _zip = require('./zip');\n\nvar _path = require('path');\n\nvar _rimraf = require('rimraf');\n\nvar _validateNpmPackageName = require('validate-npm-package-name');\n\nvar _validateNpmPackageName2 = _interopRequireDefault(_validateNpmPackageName);\n\nfunction deletePackageFiles(settings) {\n  var fullPath = (0, _path.resolve)(settings.workingPath, 'kibana');\n  (0, _rimraf.sync)(fullPath);\n}\n\n/**\n * Checks the plugin name. Will throw an exception if it does not meet\n *  npm package naming conventions\n * @param {object} plugin - a package object from listPackages()\n */\nfunction assertValidPackageName(plugin) {\n  var validation = (0, _validateNpmPackageName2['default'])(plugin.name);\n  if (!validation.validForNewPackages) {\n    throw new Error('Invalid plugin name [' + plugin.name + '] in package.json');\n  }\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL2NsaV9wbHVnaW4vaW5zdGFsbC9wYWNrLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0lBV2UsWUFBWSxxQkFBM0IsV0FBNEIsUUFBUSxFQUFFO0FBQ3BDLE1BQU0sTUFBTSxHQUFHLElBQUksTUFBTSxDQUFDLCtCQUErQixFQUFFLEdBQUcsQ0FBQyxDQUFDO0FBQ2hFLE1BQU0sWUFBWSxHQUFHLE1BQU0sb0JBQVUsUUFBUSxDQUFDLGVBQWUsQ0FBQyxDQUFDOztBQUUvRCxTQUFPLHlCQUFFLFlBQVksQ0FBQyxDQUNuQixHQUFHLENBQUMsVUFBQSxJQUFJO1dBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsR0FBRyxDQUFDO0dBQUEsQ0FBQyxDQUNyQyxHQUFHLENBQUMsVUFBQSxJQUFJO1dBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUM7R0FBQSxDQUFDLENBQy9CLE9BQU8sRUFBRSxDQUNULEdBQUcsQ0FBQyxVQUFDLElBQW1COytCQUFuQixJQUFtQjs7UUFBakIsSUFBSTtRQUFFLENBQUM7UUFBRSxNQUFNO1dBQVEsRUFBRSxJQUFJLEVBQUosSUFBSSxFQUFFLE1BQU0sRUFBTixNQUFNLEVBQUU7R0FBQyxDQUFDLENBQ2hELElBQUksRUFBRSxDQUNOLEtBQUssRUFBRSxDQUFDO0NBQ1o7Ozs7Ozs7OztJQU9jLG1CQUFtQixxQkFBbEMsV0FBbUMsUUFBUSxFQUFFLFFBQVEsRUFBRTtBQUNyRCxNQUFNLE1BQU0sR0FBRztBQUNiLFNBQUssRUFBRSxRQUFRLENBQUMsR0FBRyxDQUFDLFVBQUMsR0FBRzthQUFLLEdBQUcsQ0FBQyxJQUFJO0tBQUEsQ0FBQztHQUN2QyxDQUFDO0FBQ0YsUUFBTSx1QkFBYSxRQUFRLENBQUMsZUFBZSxFQUFFLFFBQVEsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0NBQy9FOzs7Ozs7Ozs7Ozs7Ozs7SUE4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O0NBQ0Y7Ozs7Ozs7O3NCQXhJYSxRQUFROzs7O21CQUNrQixPQUFPOztvQkFDdkIsTUFBTTs7c0JBQ0ssUUFBUTs7c0NBQ3RCLDJCQUEyQjs7OztBQW9DaEQsU0FBUyxrQkFBa0IsQ0FBQyxRQUFRLEVBQUU7QUFDcEMsTUFBTSxRQUFRLEdBQUcsbUJBQVEsUUFBUSxDQUFDLFdBQVcsRUFBRSxRQUFRLENBQUMsQ0FBQztBQUN6RCxvQkFBVyxRQUFRLENBQUMsQ0FBQztDQUN0Qjs7Ozs7OztBQU9ELFNBQVMsc0JBQXNCLENBQUMsTUFBTSxFQUFFO0FBQ3RDLE1BQU0sVUFBVSxHQUFHLHlDQUFTLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUN6QyxNQUFJLENBQUMsVUFBVSxDQUFDLG1CQUFtQixFQUFFO0FBQ25DLFVBQU0sSUFBSSxLQUFLLDJCQUF5QixNQUFNLENBQUMsSUFBSSx1QkFBb0IsQ0FBQztHQUN6RTtDQUNGLEFBaUZBLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvY2xpX3BsdWdpbi9pbnN0YWxsL3BhY2suanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHsgbGlzdEZpbGVzLCBleHRyYWN0RmlsZXMgfSBmcm9tICcuL3ppcCc7XG5pbXBvcnQgeyByZXNvbHZlIH0gZnJvbSAncGF0aCc7XG5pbXBvcnQgeyBzeW5jIGFzIHJpbXJhZlN5bmMgfSBmcm9tICdyaW1yYWYnO1xuaW1wb3J0IHZhbGlkYXRlIGZyb20gJ3ZhbGlkYXRlLW5wbS1wYWNrYWdlLW5hbWUnO1xuXG4vKipcbiAqIFJldHVybnMgYW4gYXJyYXkgb2YgcGFja2FnZSBvYmplY3RzLiBUaGVyZSB3aWxsIGJlIG9uZSBmb3IgZWFjaCBvZlxuICogIHBhY2thZ2UuanNvbiBmaWxlcyBpbiB0aGUgYXJjaGl2ZVxuICogQHBhcmFtIHtvYmplY3R9IHNldHRpbmdzIC0gYSBwbHVnaW4gaW5zdGFsbGVyIHNldHRpbmdzIG9iamVjdFxuICovXG5hc3luYyBmdW5jdGlvbiBsaXN0UGFja2FnZXMoc2V0dGluZ3MpIHtcbiAgY29uc3QgcmVnRXhwID0gbmV3IFJlZ0V4cCgnKGtpYmFuYS8oW14vXSspKS9wYWNrYWdlLmpzb24nLCAnaScpO1xuICBjb25zdCBhcmNoaXZlRmlsZXMgPSBhd2FpdCBsaXN0RmlsZXMoc2V0dGluZ3MudGVtcEFyY2hpdmVGaWxlKTtcblxuICByZXR1cm4gXyhhcmNoaXZlRmlsZXMpXG4gICAgLm1hcChmaWxlID0+IGZpbGUucmVwbGFjZSgvXFxcXC9nLCAnLycpKVxuICAgIC5tYXAoZmlsZSA9PiBmaWxlLm1hdGNoKHJlZ0V4cCkpXG4gICAgLmNvbXBhY3QoKVxuICAgIC5tYXAoKFsgZmlsZSwgXywgZm9sZGVyIF0pID0+ICh7IGZpbGUsIGZvbGRlciB9KSlcbiAgICAudW5pcSgpXG4gICAgLnZhbHVlKCk7XG59XG5cbi8qKlxuICogRXh0cmFjdHMgdGhlIHBhY2thZ2UuanNvbiBmaWxlcyBpbnRvIHRoZSB3b3JraW5nUGF0aFxuICogQHBhcmFtIHtvYmplY3R9IHNldHRpbmdzIC0gYSBwbHVnaW4gaW5zdGFsbGVyIHNldHRpbmdzIG9iamVjdFxuICogQHBhcmFtIHthcnJheX0gcGFja2FnZXMgLSBhcnJheSBvZiBwYWNrYWdlIG9iamVjdHMgZnJvbSBsaXN0UGFja2FnZXMoKVxuICovXG5hc3luYyBmdW5jdGlvbiBleHRyYWN0UGFja2FnZUZpbGVzKHNldHRpbmdzLCBwYWNrYWdlcykge1xuICBjb25zdCBmaWx0ZXIgPSB7XG4gICAgZmlsZXM6IHBhY2thZ2VzLm1hcCgocGtnKSA9PiBwa2cuZmlsZSlcbiAgfTtcbiAgYXdhaXQgZXh0cmFjdEZpbGVzKHNldHRpbmdzLnRlbXBBcmNoaXZlRmlsZSwgc2V0dGluZ3Mud29ya2luZ1BhdGgsIDAsIGZpbHRlcik7XG59XG5cbi8qKlxuICogRGVsZXRlcyB0aGUgcGFja2FnZS5qc29uIGZpbGVzIGNyZWF0ZWQgYnkgZXh0cmFjdFBhY2thZ2VGaWxlcygpXG4gKiBAcGFyYW0ge29iamVjdH0gc2V0dGluZ3MgLSBhIHBsdWdpbiBpbnN0YWxsZXIgc2V0dGluZ3Mgb2JqZWN0XG4gKi9cbmZ1bmN0aW9uIGRlbGV0ZVBhY2thZ2VGaWxlcyhzZXR0aW5ncykge1xuICBjb25zdCBmdWxsUGF0aCA9IHJlc29sdmUoc2V0dGluZ3Mud29ya2luZ1BhdGgsICdraWJhbmEnKTtcbiAgcmltcmFmU3luYyhmdWxsUGF0aCk7XG59XG5cbi8qKlxuICogQ2hlY2tzIHRoZSBwbHVnaW4gbmFtZS4gV2lsbCB0aHJvdyBhbiBleGNlcHRpb24gaWYgaXQgZG9lcyBub3QgbWVldFxuICogIG5wbSBwYWNrYWdlIG5hbWluZyBjb252ZW50aW9uc1xuICogQHBhcmFtIHtvYmplY3R9IHBsdWdpbiAtIGEgcGFja2FnZSBvYmplY3QgZnJvbSBsaXN0UGFja2FnZXMoKVxuICovXG5mdW5jdGlvbiBhc3NlcnRWYWxpZFBhY2thZ2VOYW1lKHBsdWdpbikge1xuICBjb25zdCB2YWxpZGF0aW9uID0gdmFsaWRhdGUocGx1Z2luLm5hbWUpO1xuICBpZiAoIXZhbGlkYXRpb24udmFsaWRGb3JOZXdQYWNrYWdlcykge1xuICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBwbHVnaW4gbmFtZSBbJHtwbHVnaW4ubmFtZX1dIGluIHBhY2thZ2UuanNvbmApO1xuICB9XG59XG5cblxuLyoqXG4gKiBFeGFtaW5lIGVhY2ggcGFja2FnZS5qc29uIGZpbGUgdG8gZGV0ZXJtaW5lIHRoZSBwbHVnaW4gbmFtZSxcbiAqICB2ZXJzaW9uLCBhbmQgcGxhdGZvcm0uIE11dGF0ZXMgdGhlIHBhY2thZ2Ugb2JqZWN0cyBpbiB0aGUgcGFja2FnZXMgYXJyYXlcbiAqIEBwYXJhbSB7b2JqZWN0fSBzZXR0aW5ncyAtIGEgcGx1Z2luIGluc3RhbGxlciBzZXR0aW5ncyBvYmplY3RcbiAqIEBwYXJhbSB7YXJyYXl9IHBhY2thZ2VzIC0gYXJyYXkgb2YgcGFja2FnZSBvYmplY3RzIGZyb20gbGlzdFBhY2thZ2VzKClcbiAqL1xuYXN5bmMgZnVuY3Rpb24gbWVyZ2VQYWNrYWdlRGF0YShzZXR0aW5ncywgcGFja2FnZXMpIHtcbiAgcmV0dXJuIHBhY2thZ2VzLm1hcCgocGtnKSA9PiB7XG4gICAgY29uc3QgZnVsbFBhdGggPSByZXNvbHZlKHNldHRpbmdzLndvcmtpbmdQYXRoLCBwa2cuZmlsZSk7XG4gICAgY29uc3QgcGFja2FnZUluZm8gPSByZXF1aXJlKGZ1bGxQYXRoKTtcblxuICAgIHBrZy52ZXJzaW9uID0gXy5nZXQocGFja2FnZUluZm8sICd2ZXJzaW9uJyk7XG4gICAgcGtnLm5hbWUgPSBfLmdldChwYWNrYWdlSW5mbywgJ25hbWUnKTtcbiAgICBwa2cucGF0aCA9ICByZXNvbHZlKHNldHRpbmdzLnBsdWdpbkRpciwgcGtnLm5hbWUpO1xuXG4gICAgY29uc3QgcmVnRXhwID0gbmV3IFJlZ0V4cChgJHtwa2cubmFtZX0tKC4rKWAsICdpJyk7XG4gICAgY29uc3QgbWF0Y2hlcyA9IHBrZy5mb2xkZXIubWF0Y2gocmVnRXhwKTtcbiAgICBwa2cucGxhdGZvcm0gPSAobWF0Y2hlcykgPyBtYXRjaGVzWzFdIDogdW5kZWZpbmVkO1xuXG4gICAgcmV0dXJuIHBrZztcbiAgfSk7XG59XG5cbi8qKlxuICogRXh0cmFjdHMgdGhlIGZpcnN0IHBsdWdpbiBpbiB0aGUgYXJjaGl2ZS5cbiAqICBOT1RFOiBUaGlzIHdpbGwgbmVlZCB0byBiZSBjaGFuZ2VkIGluIGxhdGVyIHZlcnNpb25zIG9mIHRoZSBwYWNrIGluc3RhbGxlclxuICogIHRoYXQgYWxsb3cgZm9yIHRoZSBpbnN0YWxsYXRpb24gb2YgbW9yZSB0aGFuIG9uZSBwbHVnaW4gYXQgb25jZS5cbiAqIEBwYXJhbSB7b2JqZWN0fSBzZXR0aW5ncyAtIGEgcGx1Z2luIGluc3RhbGxlciBzZXR0aW5ncyBvYmplY3RcbiAqL1xuYXN5bmMgZnVuY3Rpb24gZXh0cmFjdEFyY2hpdmUoc2V0dGluZ3MpIHtcbiAgY29uc3QgZmlsdGVyID0ge1xuICAgIHBhdGhzOiBbIGBraWJhbmEvJHtzZXR0aW5ncy5wbHVnaW5zWzBdLmZvbGRlcn1gIF1cbiAgfTtcblxuICBhd2FpdCBleHRyYWN0RmlsZXMoc2V0dGluZ3MudGVtcEFyY2hpdmVGaWxlLCBzZXR0aW5ncy53b3JraW5nUGF0aCwgMiwgZmlsdGVyKTtcbn1cblxuXG4vKipcbiAqIFJldHVybnMgdGhlIGRldGFpbGVkIGluZm9ybWF0aW9uIGFib3V0IGVhY2gga2liYW5hIHBsdWdpbiBpbiB0aGUgcGFjay5cbiAqICBUT0RPOiBJZiB0aGVyZSBhcmUgcGxhdGZvcm0gc3BlY2lmaWMgZm9sZGVycywgZGV0ZXJtaW5lIHdoaWNoIG9uZSB0byB1c2UuXG4gKiBAcGFyYW0ge29iamVjdH0gc2V0dGluZ3MgLSBhIHBsdWdpbiBpbnN0YWxsZXIgc2V0dGluZ3Mgb2JqZWN0XG4gKiBAcGFyYW0ge29iamVjdH0gbG9nZ2VyIC0gYSBwbHVnaW4gaW5zdGFsbGVyIGxvZ2dlciBvYmplY3RcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBhY2tEYXRhKHNldHRpbmdzLCBsb2dnZXIpIHtcbiAgbGV0IHBhY2thZ2VzO1xuICB0cnkge1xuICAgIGxvZ2dlci5sb2coJ1JldHJpZXZpbmcgbWV0YWRhdGEgZnJvbSBwbHVnaW4gYXJjaGl2ZScpO1xuXG4gICAgcGFja2FnZXMgPSBhd2FpdCBsaXN0UGFja2FnZXMoc2V0dGluZ3MpO1xuXG4gICAgYXdhaXQgZXh0cmFjdFBhY2thZ2VGaWxlcyhzZXR0aW5ncywgcGFja2FnZXMpO1xuICAgIGF3YWl0IG1lcmdlUGFja2FnZURhdGEoc2V0dGluZ3MsIHBhY2thZ2VzKTtcbiAgICBhd2FpdCBkZWxldGVQYWNrYWdlRmlsZXMoc2V0dGluZ3MpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBsb2dnZXIuZXJyb3IoZXJyKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vycm9yIHJldHJpZXZpbmcgbWV0YWRhdGEgZnJvbSBwbHVnaW4gYXJjaGl2ZScpO1xuICB9XG5cbiAgaWYgKHBhY2thZ2VzLmxlbmd0aCA9PT0gMCkge1xuICAgIHRocm93IG5ldyBFcnJvcignTm8ga2liYW5hIHBsdWdpbnMgZm91bmQgaW4gYXJjaGl2ZScpO1xuICB9XG4gIHBhY2thZ2VzLmZvckVhY2goYXNzZXJ0VmFsaWRQYWNrYWdlTmFtZSk7XG5cbiAgc2V0dGluZ3MucGx1Z2lucyA9IHBhY2thZ2VzO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXh0cmFjdChzZXR0aW5ncywgbG9nZ2VyKSB7XG4gIHRyeSB7XG4gICAgbG9nZ2VyLmxvZygnRXh0cmFjdGluZyBwbHVnaW4gYXJjaGl2ZScpO1xuXG4gICAgYXdhaXQgZXh0cmFjdEFyY2hpdmUoc2V0dGluZ3MpO1xuXG4gICAgbG9nZ2VyLmxvZygnRXh0cmFjdGlvbiBjb21wbGV0ZScpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBsb2dnZXIuZXJyb3IoZXJyKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vycm9yIGV4dHJhY3RpbmcgcGx1Z2luIGFyY2hpdmUnKTtcbiAgfVxufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/cli_plugin/install/pack.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;;;;;IAWe,YAAY,qBAA3B,WAA4B,QAAQ,EAAE;AACpC,MAAM,MAAM,GAAG,IAAI,MAAM,CAAC,+BAA+B,EAAE,GAAG,CAAC,CAAC;AAChE,MAAM,YAAY,GAAG,MAAM,oBAAU,QAAQ,CAAC,eAAe,CAAC,CAAC;;AAE/D,SAAO,yBAAE,YAAY,CAAC,CACnB,GAAG,CAAC,UAAA,IAAI;WAAI,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC;GAAA,CAAC,CACrC,GAAG,CAAC,UAAA,IAAI;WAAI,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;GAAA,CAAC,CAC/B,OAAO,EAAE,CACT,GAAG,CAAC,UAAC,IAAmB;+BAAnB,IAAmB;;QAAjB,IAAI;QAAE,CAAC;QAAE,MAAM;WAAQ,EAAE,IAAI,EAAJ,IAAI,EAAE,MAAM,EAAN,MAAM,EAAE;GAAC,CAAC,CAChD,IAAI,EAAE,CACN,KAAK,EAAE,CAAC;CACZ;;;;;;;;;IAOc,mBAAmB,qBAAlC,WAAmC,QAAQ,EAAE,QAAQ,EAAE;AACrD,MAAM,MAAM,GAAG;AACb,SAAK,EAAE,QAAQ,CAAC,GAAG,CAAC,UAAC,GAAG;aAAK,GAAG,CAAC,IAAI;KAAA,CAAC;GACvC,CAAC;AACF,QAAM,uBAAa,QAAQ,CAAC,eAAe,EAAE,QAAQ,CAAC,WAAW,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC;CAC/E;;;;;;;;;;;;;;;IA8Bc,gBAAgB,qBAA/B,WAAgC,QAAQ,EAAE,QAAQ,EAAE;AAClD,SAAO,QAAQ,CAAC,GAAG,CAAC,UAAC,GAAG,EAAK;AAC3B,QAAM,QAAQ,GAAG,mBAAQ,QAAQ,CAAC,WAAW,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC;AACzD,QAAM,WAAW,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;;AAEtC,OAAG,CAAC,OAAO,GAAG,oBAAE,GAAG,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;AAC5C,OAAG,CAAC,IAAI,GAAG,oBAAE,GAAG,CAAC,WAAW,EAAE,MAAM,CAAC,CAAC;AACtC,OAAG,CAAC,IAAI,GAAI,mBAAQ,QAAQ,CAAC,SAAS,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC;;AAElD,QAAM,MAAM,GAAG,IAAI,MAAM,CAAI,GAAG,CAAC,IAAI,YAAS,GAAG,CAAC,CAAC;AACnD,QAAM,OAAO,GAAG,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;AACzC,OAAG,CAAC,QAAQ,GAAG,AAAC,OAAO,GAAI,OAAO,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC;;AAElD,WAAO,GAAG,CAAC;GACZ,CAAC,CAAC;CACJ;;;;;;;;;;IAQc,cAAc,qBAA7B,WAA8B,QAAQ,EAAE;AACtC,MAAM,MAAM,GAAG;AACb,SAAK,EAAE,aAAY,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,MAAM,CAAI;GAClD,CAAC;;AAEF,QAAM,uBAAa,QAAQ,CAAC,eAAe,EAAE,QAAQ,CAAC,WAAW,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC;CAC/E;;;;;;;;;;IASqB,WAAW,qBAA1B,WAA2B,QAAQ,EAAE,MAAM,EAAE;AAClD,MAAI,QAAQ,YAAA,CAAC;AACb,MAAI;AACF,UAAM,CAAC,GAAG,CAAC,yCAAyC,CAAC,CAAC;;AAEtD,YAAQ,GAAG,MAAM,YAAY,CAAC,QAAQ,CAAC,CAAC;;AAExC,UAAM,mBAAmB,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;AAC9C,UAAM,gBAAgB,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;AAC3C,UAAM,kBAAkB,CAAC,QAAQ,CAAC,CAAC;GACpC,CAAC,OAAO,GAAG,EAAE;AACZ,UAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AAClB,UAAM,IAAI,KAAK,CAAC,+CAA+C,CAAC,CAAC;GAClE;;AAED,MAAI,QAAQ,CAAC,MAAM,KAAK,CAAC,EAAE;AACzB,UAAM,IAAI,KAAK,CAAC,oCAAoC,CAAC,CAAC;GACvD;AACD,UAAQ,CAAC,OAAO,CAAC,sBAAsB,CAAC,CAAC;;AAEzC,UAAQ,CAAC,OAAO,GAAG,QAAQ,CAAC;CAC7B;;;;IAEqB,OAAO,qBAAtB,WAAuB,QAAQ,EAAE,MAAM,EAAE;AAC9C,MAAI;AACF,UAAM,CAAC,GAAG,CAAC,2BAA2B,CAAC,CAAC;;AAExC,UAAM,cAAc,CAAC,QAAQ,CAAC,CAAC;;AAE/B,UAAM,CAAC,GAAG,CAAC,qBAAqB,CAAC,CAAC;GACnC,CAAC,OAAO,GAAG,EAAE;AACZ,UAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AAClB,UAAM,IAAI,KAAK,CAAC,iCAAiC,CAAC,CAAC;GACpD;CACF;;;;;;;;sBAxIa,QAAQ;;;;mBACkB,OAAO;;oBACvB,MAAM;;sBACK,QAAQ;;sCACtB,2BAA2B;;;;AAoChD,SAAS,kBAAkB,CAAC,QAAQ,EAAE;AACpC,MAAM,QAAQ,GAAG,mBAAQ,QAAQ,CAAC,WAAW,EAAE,QAAQ,CAAC,CAAC;AACzD,oBAAW,QAAQ,CAAC,CAAC;CACtB;;;;;;;AAOD,SAAS,sBAAsB,CAAC,MAAM,EAAE;AACtC,MAAM,UAAU,GAAG,yCAAS,MAAM,CAAC,IAAI,CAAC,CAAC;AACzC,MAAI,CAAC,UAAU,CAAC,mBAAmB,EAAE;AACnC,UAAM,IAAI,KAAK,2BAAyB,MAAM,CAAC,IAAI,uBAAoB,CAAC;GACzE;CACF,AAiFA,CAAC",
      "file": "/home/vio/v3metrics/src/cli_plugin/install/pack.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport { listFiles, extractFiles } from './zip';\nimport { resolve } from 'path';\nimport { sync as rimrafSync } from 'rimraf';\nimport validate from 'validate-npm-package-name';\n\n/**\n * Returns an array of package objects. There will be one for each of\n *  package.json files in the archive\n * @param {object} settings - a plugin installer settings object\n */\nasync function listPackages(settings) {\n  const regExp = new RegExp('(kibana/([^/]+))/package.json', 'i');\n  const archiveFiles = await listFiles(settings.tempArchiveFile);\n\n  return _(archiveFiles)\n    .map(file => file.replace(/\\\\/g, '/'))\n    .map(file => file.match(regExp))\n    .compact()\n    .map(([ file, _, folder ]) => ({ file, folder }))\n    .uniq()\n    .value();\n}\n\n/**\n * Extracts the package.json files into the workingPath\n * @param {object} settings - a plugin installer settings object\n * @param {array} packages - array of package objects from listPackages()\n */\nasync function extractPackageFiles(settings, packages) {\n  const filter = {\n    files: packages.map((pkg) => pkg.file)\n  };\n  await extractFiles(settings.tempArchiveFile, settings.workingPath, 0, filter);\n}\n\n/**\n * Deletes the package.json files created by extractPackageFiles()\n * @param {object} settings - a plugin installer settings object\n */\nfunction deletePackageFiles(settings) {\n  const fullPath = resolve(settings.workingPath, 'kibana');\n  rimrafSync(fullPath);\n}\n\n/**\n * Checks the plugin name. Will throw an exception if it does not meet\n *  npm package naming conventions\n * @param {object} plugin - a package object from listPackages()\n */\nfunction assertValidPackageName(plugin) {\n  const validation = validate(plugin.name);\n  if (!validation.validForNewPackages) {\n    throw new Error(`Invalid plugin name [${plugin.name}] in package.json`);\n  }\n}\n\n\n/**\n * Examine each package.json file to determine the plugin name,\n *  version, and platform. Mutates the package objects in the packages array\n * @param {object} settings - a plugin installer settings object\n * @param {array} packages - array of package objects from listPackages()\n */\nasync function mergePackageData(settings, packages) {\n  return packages.map((pkg) => {\n    const fullPath = resolve(settings.workingPath, pkg.file);\n    const packageInfo = require(fullPath);\n\n    pkg.version = _.get(packageInfo, 'version');\n    pkg.name = _.get(packageInfo, 'name');\n    pkg.path =  resolve(settings.pluginDir, pkg.name);\n\n    const regExp = new RegExp(`${pkg.name}-(.+)`, 'i');\n    const matches = pkg.folder.match(regExp);\n    pkg.platform = (matches) ? matches[1] : undefined;\n\n    return pkg;\n  });\n}\n\n/**\n * Extracts the first plugin in the archive.\n *  NOTE: This will need to be changed in later versions of the pack installer\n *  that allow for the installation of more than one plugin at once.\n * @param {object} settings - a plugin installer settings object\n */\nasync function extractArchive(settings) {\n  const filter = {\n    paths: [ `kibana/${settings.plugins[0].folder}` ]\n  };\n\n  await extractFiles(settings.tempArchiveFile, settings.workingPath, 2, filter);\n}\n\n\n/**\n * Returns the detailed information about each kibana plugin in the pack.\n *  TODO: If there are platform specific folders, determine which one to use.\n * @param {object} settings - a plugin installer settings object\n * @param {object} logger - a plugin installer logger object\n */\nexport async function getPackData(settings, logger) {\n  let packages;\n  try {\n    logger.log('Retrieving metadata from plugin archive');\n\n    packages = await listPackages(settings);\n\n    await extractPackageFiles(settings, packages);\n    await mergePackageData(settings, packages);\n    await deletePackageFiles(settings);\n  } catch (err) {\n    logger.error(err);\n    throw new Error('Error retrieving metadata from plugin archive');\n  }\n\n  if (packages.length === 0) {\n    throw new Error('No kibana plugins found in archive');\n  }\n  packages.forEach(assertValidPackageName);\n\n  settings.plugins = packages;\n}\n\nexport async function extract(settings, logger) {\n  try {\n    logger.log('Extracting plugin archive');\n\n    await extractArchive(settings);\n\n    logger.log('Extraction complete');\n  } catch (err) {\n    logger.error(err);\n    throw new Error('Error extracting plugin archive');\n  }\n};\n"
      ]
    },
    "mtime": 1467036622785
  },
  "{\"filename\":\"/home/vio/v3metrics/src/cli_plugin/install/zip.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "@bigfunger/decompress-zip",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "DecompressZip"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "extractFiles",
            "zipPath",
            "targetPath",
            "strip",
            "filter",
            "listFiles",
            "zipPath"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "extractFiles",
              "exported": "extractFiles"
            },
            {
              "kind": "local",
              "local": "zipPath",
              "exported": "zipPath"
            },
            {
              "kind": "local",
              "local": "targetPath",
              "exported": "targetPath"
            },
            {
              "kind": "local",
              "local": "strip",
              "exported": "strip"
            },
            {
              "kind": "local",
              "local": "filter",
              "exported": "filter"
            },
            {
              "kind": "local",
              "local": "listFiles",
              "exported": "listFiles"
            },
            {
              "kind": "local",
              "local": "zipPath",
              "exported": "zipPath"
            }
          ]
        }
      },
      "usedHelpers": [
        "async-to-generator",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\n/**\n * Extracts files from a zip archive to a file path using a filter function\n * @param {string} zipPath - file path to a zip archive\n * @param {string} targetPath - directory path to where the files should\n *  extracted\n * @param {integer} strip - Number of nested directories within the archive\n *  that should be ignored when determining the target path of an archived\n *  file.\n * @param {function} filter - A function that accepts a single parameter 'file'\n *  and returns true if the file should be extracted from the archive\n */\n\nvar extractFiles = _asyncToGenerator(function* (zipPath, targetPath, strip, filter) {\n  yield new Promise(function (resolve, reject) {\n    var unzipper = new _bigfungerDecompressZip2['default'](zipPath);\n\n    unzipper.on('error', reject);\n\n    unzipper.extract({\n      path: targetPath,\n      strip: strip,\n      filter: extractFilter(filter)\n    });\n\n    unzipper.on('extract', resolve);\n  });\n}\n\n/**\n * Returns all files within an archive\n * @param {string} zipPath - file path to a zip archive\n * @returns {array} all files within an archive with their relative paths\n */\n);\n\nexports.extractFiles = extractFiles;\n\nvar listFiles = _asyncToGenerator(function* (zipPath) {\n  return yield new Promise(function (resolve, reject) {\n    var unzipper = new _bigfungerDecompressZip2['default'](zipPath);\n\n    unzipper.on('error', reject);\n\n    unzipper.on('list', function (files) {\n      files = files.map(function (file) {\n        return file.replace(/\\\\/g, '/');\n      });\n      resolve(files);\n    });\n\n    unzipper.list();\n  });\n});\n\nexports.listFiles = listFiles;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _bigfungerDecompressZip = require('@bigfunger/decompress-zip');\n\nvar _bigfungerDecompressZip2 = _interopRequireDefault(_bigfungerDecompressZip);\n\nvar SYMBOLIC_LINK = 'SymbolicLink';\n\n/**\n * Creates a filter function to be consumed by extractFiles that filters by\n *  an array of files\n * @param {array} files - an array of full file paths to extract. Should match\n *   exactly a value from listFiles\n */\nfunction extractFilterFromFiles(files) {\n  var filterFiles = files.map(function (file) {\n    return file.replace(/\\\\/g, '/');\n  });\n  return function filterByFiles(file) {\n    if (file.type === SYMBOLIC_LINK) return false;\n\n    var path = file.path.replace(/\\\\/g, '/');\n    return _lodash2['default'].includes(filterFiles, path);\n  };\n}\n\n/**\n * Creates a filter function to be consumed by extractFiles that filters by\n *  an array of root paths\n * @param {array} paths - an array of root paths from the archive. All files and\n *   folders will be extracted recursively using these paths as roots.\n */\nfunction extractFilterFromPaths(paths) {\n  return function filterByRootPath(file) {\n    if (file.type === SYMBOLIC_LINK) return false;\n\n    return paths.some(function (path) {\n      var regex = new RegExp(path + '($|/)', 'i');\n      return file.parent.match(regex);\n    });\n  };\n}\n\n/**\n * Creates a filter function to be consumed by extractFiles\n * @param {object} filter - an object with either a files or paths property.\n */\nfunction extractFilter(filter) {\n  if (filter.files) return extractFilterFromFiles(filter.files);\n  if (filter.paths) return extractFilterFromPaths(filter.paths);\n  return _lodash2['default'].noop;\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL2NsaV9wbHVnaW4vaW5zdGFsbC96aXAuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lBMkRzQixZQUFZLHFCQUEzQixXQUE0QixPQUFPLEVBQUUsVUFBVSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUU7QUFDckUsUUFBTSxJQUFJLE9BQU8sQ0FBQyxVQUFDLE9BQU8sRUFBRSxNQUFNLEVBQUs7QUFDckMsUUFBTSxRQUFRLEdBQUcsd0NBQWtCLE9BQU8sQ0FBQyxDQUFDOztBQUU1QyxZQUFRLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxNQUFNLENBQUMsQ0FBQzs7QUFFN0IsWUFBUSxDQUFDLE9BQU8sQ0FBQztBQUNmLFVBQUksRUFBRSxVQUFVO0FBQ2hCLFdBQUssRUFBRSxLQUFLO0FBQ1osWUFBTSxFQUFFLGFBQWEsQ0FBQyxNQUFNLENBQUM7S0FDOUIsQ0FBQyxDQUFDOztBQUVILFlBQVEsQ0FBQyxFQUFFLENBQUMsU0FBUyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0dBQ2pDLENBQUMsQ0FBQztDQUNKOzs7Ozs7Ozs7OztJQU9xQixTQUFTLHFCQUF4QixXQUF5QixPQUFPLEVBQUU7QUFDdkMsU0FBTyxNQUFNLElBQUksT0FBTyxDQUFDLFVBQUMsT0FBTyxFQUFFLE1BQU0sRUFBSztBQUM1QyxRQUFNLFFBQVEsR0FBRyx3Q0FBa0IsT0FBTyxDQUFDLENBQUM7O0FBRTVDLFlBQVEsQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLE1BQU0sQ0FBQyxDQUFDOztBQUU3QixZQUFRLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxVQUFDLEtBQUssRUFBSztBQUM3QixXQUFLLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxVQUFDLElBQUk7ZUFBSyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxHQUFHLENBQUM7T0FBQSxDQUFDLENBQUM7QUFDdEQsYUFBTyxDQUFDLEtBQUssQ0FBQyxDQUFDO0tBQ2hCLENBQUMsQ0FBQzs7QUFFSCxZQUFRLENBQUMsSUFBSSxFQUFFLENBQUM7R0FDakIsQ0FBQyxDQUFDO0NBQ0o7Ozs7Ozs7O3NCQTdGYSxRQUFROzs7O3NDQUNJLDJCQUEyQjs7OztBQUVyRCxJQUFNLGFBQWEsR0FBRyxjQUFjLENBQUM7Ozs7Ozs7O0FBUXJDLFNBQVMsc0JBQXNCLENBQUMsS0FBSyxFQUFFO0FBQ3JDLE1BQU0sV0FBVyxHQUFHLEtBQUssQ0FBQyxHQUFHLENBQUMsVUFBQyxJQUFJO1dBQUssSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsR0FBRyxDQUFDO0dBQUEsQ0FBQyxDQUFDO0FBQ2xFLFNBQU8sU0FBUyxhQUFhLENBQUMsSUFBSSxFQUFFO0FBQ2xDLFFBQUksSUFBSSxDQUFDLElBQUksS0FBSyxhQUFhLEVBQUUsT0FBTyxLQUFLLENBQUM7O0FBRTlDLFFBQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxHQUFHLENBQUMsQ0FBQztBQUMzQyxXQUFPLG9CQUFFLFFBQVEsQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLENBQUM7R0FDdEMsQ0FBQztDQUNIOzs7Ozs7OztBQVFELFNBQVMsc0JBQXNCLENBQUMsS0FBSyxFQUFFO0FBQ3JDLFNBQU8sU0FBUyxnQkFBZ0IsQ0FBQyxJQUFJLEVBQUU7QUFDckMsUUFBSSxJQUFJLENBQUMsSUFBSSxLQUFLLGFBQWEsRUFBRSxPQUFPLEtBQUssQ0FBQzs7QUFFOUMsV0FBTyxLQUFLLENBQUMsSUFBSSxDQUFDLFVBQUEsSUFBSSxFQUFJO0FBQ3hCLFVBQU0sS0FBSyxHQUFHLElBQUksTUFBTSxDQUFJLElBQUksWUFBUyxHQUFHLENBQUMsQ0FBQztBQUM5QyxhQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO0tBQ2pDLENBQUMsQ0FBQztHQUNKLENBQUM7Q0FDSDs7Ozs7O0FBTUQsU0FBUyxhQUFhLENBQUMsTUFBTSxFQUFFO0FBQzdCLE1BQUksTUFBTSxDQUFDLEtBQUssRUFBRSxPQUFPLHNCQUFzQixDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUM5RCxNQUFJLE1BQU0sQ0FBQyxLQUFLLEVBQUUsT0FBTyxzQkFBc0IsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDOUQsU0FBTyxvQkFBRSxJQUFJLENBQUM7Q0FDZiIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9jbGlfcGx1Z2luL2luc3RhbGwvemlwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBEZWNvbXByZXNzWmlwIGZyb20gJ0BiaWdmdW5nZXIvZGVjb21wcmVzcy16aXAnO1xuXG5jb25zdCBTWU1CT0xJQ19MSU5LID0gJ1N5bWJvbGljTGluayc7XG5cbi8qKlxuICogQ3JlYXRlcyBhIGZpbHRlciBmdW5jdGlvbiB0byBiZSBjb25zdW1lZCBieSBleHRyYWN0RmlsZXMgdGhhdCBmaWx0ZXJzIGJ5XG4gKiAgYW4gYXJyYXkgb2YgZmlsZXNcbiAqIEBwYXJhbSB7YXJyYXl9IGZpbGVzIC0gYW4gYXJyYXkgb2YgZnVsbCBmaWxlIHBhdGhzIHRvIGV4dHJhY3QuIFNob3VsZCBtYXRjaFxuICogICBleGFjdGx5IGEgdmFsdWUgZnJvbSBsaXN0RmlsZXNcbiAqL1xuZnVuY3Rpb24gZXh0cmFjdEZpbHRlckZyb21GaWxlcyhmaWxlcykge1xuICBjb25zdCBmaWx0ZXJGaWxlcyA9IGZpbGVzLm1hcCgoZmlsZSkgPT4gZmlsZS5yZXBsYWNlKC9cXFxcL2csICcvJykpO1xuICByZXR1cm4gZnVuY3Rpb24gZmlsdGVyQnlGaWxlcyhmaWxlKSB7XG4gICAgaWYgKGZpbGUudHlwZSA9PT0gU1lNQk9MSUNfTElOSykgcmV0dXJuIGZhbHNlO1xuXG4gICAgY29uc3QgcGF0aCA9IGZpbGUucGF0aC5yZXBsYWNlKC9cXFxcL2csICcvJyk7XG4gICAgcmV0dXJuIF8uaW5jbHVkZXMoZmlsdGVyRmlsZXMsIHBhdGgpO1xuICB9O1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBmaWx0ZXIgZnVuY3Rpb24gdG8gYmUgY29uc3VtZWQgYnkgZXh0cmFjdEZpbGVzIHRoYXQgZmlsdGVycyBieVxuICogIGFuIGFycmF5IG9mIHJvb3QgcGF0aHNcbiAqIEBwYXJhbSB7YXJyYXl9IHBhdGhzIC0gYW4gYXJyYXkgb2Ygcm9vdCBwYXRocyBmcm9tIHRoZSBhcmNoaXZlLiBBbGwgZmlsZXMgYW5kXG4gKiAgIGZvbGRlcnMgd2lsbCBiZSBleHRyYWN0ZWQgcmVjdXJzaXZlbHkgdXNpbmcgdGhlc2UgcGF0aHMgYXMgcm9vdHMuXG4gKi9cbmZ1bmN0aW9uIGV4dHJhY3RGaWx0ZXJGcm9tUGF0aHMocGF0aHMpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIGZpbHRlckJ5Um9vdFBhdGgoZmlsZSkge1xuICAgIGlmIChmaWxlLnR5cGUgPT09IFNZTUJPTElDX0xJTkspIHJldHVybiBmYWxzZTtcblxuICAgIHJldHVybiBwYXRocy5zb21lKHBhdGggPT4ge1xuICAgICAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKGAke3BhdGh9KCR8LylgLCAnaScpO1xuICAgICAgcmV0dXJuIGZpbGUucGFyZW50Lm1hdGNoKHJlZ2V4KTtcbiAgICB9KTtcbiAgfTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgZmlsdGVyIGZ1bmN0aW9uIHRvIGJlIGNvbnN1bWVkIGJ5IGV4dHJhY3RGaWxlc1xuICogQHBhcmFtIHtvYmplY3R9IGZpbHRlciAtIGFuIG9iamVjdCB3aXRoIGVpdGhlciBhIGZpbGVzIG9yIHBhdGhzIHByb3BlcnR5LlxuICovXG5mdW5jdGlvbiBleHRyYWN0RmlsdGVyKGZpbHRlcikge1xuICBpZiAoZmlsdGVyLmZpbGVzKSByZXR1cm4gZXh0cmFjdEZpbHRlckZyb21GaWxlcyhmaWx0ZXIuZmlsZXMpO1xuICBpZiAoZmlsdGVyLnBhdGhzKSByZXR1cm4gZXh0cmFjdEZpbHRlckZyb21QYXRocyhmaWx0ZXIucGF0aHMpO1xuICByZXR1cm4gXy5ub29wO1xufVxuXG4vKipcbiAqIEV4dHJhY3RzIGZpbGVzIGZyb20gYSB6aXAgYXJjaGl2ZSB0byBhIGZpbGUgcGF0aCB1c2luZyBhIGZpbHRlciBmdW5jdGlvblxuICogQHBhcmFtIHtzdHJpbmd9IHppcFBhdGggLSBmaWxlIHBhdGggdG8gYSB6aXAgYXJjaGl2ZVxuICogQHBhcmFtIHtzdHJpbmd9IHRhcmdldFBhdGggLSBkaXJlY3RvcnkgcGF0aCB0byB3aGVyZSB0aGUgZmlsZXMgc2hvdWxkXG4gKiAgZXh0cmFjdGVkXG4gKiBAcGFyYW0ge2ludGVnZXJ9IHN0cmlwIC0gTnVtYmVyIG9mIG5lc3RlZCBkaXJlY3RvcmllcyB3aXRoaW4gdGhlIGFyY2hpdmVcbiAqICB0aGF0IHNob3VsZCBiZSBpZ25vcmVkIHdoZW4gZGV0ZXJtaW5pbmcgdGhlIHRhcmdldCBwYXRoIG9mIGFuIGFyY2hpdmVkXG4gKiAgZmlsZS5cbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGZpbHRlciAtIEEgZnVuY3Rpb24gdGhhdCBhY2NlcHRzIGEgc2luZ2xlIHBhcmFtZXRlciAnZmlsZSdcbiAqICBhbmQgcmV0dXJucyB0cnVlIGlmIHRoZSBmaWxlIHNob3VsZCBiZSBleHRyYWN0ZWQgZnJvbSB0aGUgYXJjaGl2ZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXh0cmFjdEZpbGVzKHppcFBhdGgsIHRhcmdldFBhdGgsIHN0cmlwLCBmaWx0ZXIpIHtcbiAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGNvbnN0IHVuemlwcGVyID0gbmV3IERlY29tcHJlc3NaaXAoemlwUGF0aCk7XG5cbiAgICB1bnppcHBlci5vbignZXJyb3InLCByZWplY3QpO1xuXG4gICAgdW56aXBwZXIuZXh0cmFjdCh7XG4gICAgICBwYXRoOiB0YXJnZXRQYXRoLFxuICAgICAgc3RyaXA6IHN0cmlwLFxuICAgICAgZmlsdGVyOiBleHRyYWN0RmlsdGVyKGZpbHRlcilcbiAgICB9KTtcblxuICAgIHVuemlwcGVyLm9uKCdleHRyYWN0JywgcmVzb2x2ZSk7XG4gIH0pO1xufVxuXG4vKipcbiAqIFJldHVybnMgYWxsIGZpbGVzIHdpdGhpbiBhbiBhcmNoaXZlXG4gKiBAcGFyYW0ge3N0cmluZ30gemlwUGF0aCAtIGZpbGUgcGF0aCB0byBhIHppcCBhcmNoaXZlXG4gKiBAcmV0dXJucyB7YXJyYXl9IGFsbCBmaWxlcyB3aXRoaW4gYW4gYXJjaGl2ZSB3aXRoIHRoZWlyIHJlbGF0aXZlIHBhdGhzXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsaXN0RmlsZXMoemlwUGF0aCkge1xuICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGNvbnN0IHVuemlwcGVyID0gbmV3IERlY29tcHJlc3NaaXAoemlwUGF0aCk7XG5cbiAgICB1bnppcHBlci5vbignZXJyb3InLCByZWplY3QpO1xuXG4gICAgdW56aXBwZXIub24oJ2xpc3QnLCAoZmlsZXMpID0+IHtcbiAgICAgIGZpbGVzID0gZmlsZXMubWFwKChmaWxlKSA9PiBmaWxlLnJlcGxhY2UoL1xcXFwvZywgJy8nKSk7XG4gICAgICByZXNvbHZlKGZpbGVzKTtcbiAgICB9KTtcblxuICAgIHVuemlwcGVyLmxpc3QoKTtcbiAgfSk7XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/cli_plugin/install/zip.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;;;;;;;;;IA2DsB,YAAY,qBAA3B,WAA4B,OAAO,EAAE,UAAU,EAAE,KAAK,EAAE,MAAM,EAAE;AACrE,QAAM,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM,EAAK;AACrC,QAAM,QAAQ,GAAG,wCAAkB,OAAO,CAAC,CAAC;;AAE5C,YAAQ,CAAC,EAAE,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;;AAE7B,YAAQ,CAAC,OAAO,CAAC;AACf,UAAI,EAAE,UAAU;AAChB,WAAK,EAAE,KAAK;AACZ,YAAM,EAAE,aAAa,CAAC,MAAM,CAAC;KAC9B,CAAC,CAAC;;AAEH,YAAQ,CAAC,EAAE,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;GACjC,CAAC,CAAC;CACJ;;;;;;;;;;;IAOqB,SAAS,qBAAxB,WAAyB,OAAO,EAAE;AACvC,SAAO,MAAM,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM,EAAK;AAC5C,QAAM,QAAQ,GAAG,wCAAkB,OAAO,CAAC,CAAC;;AAE5C,YAAQ,CAAC,EAAE,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;;AAE7B,YAAQ,CAAC,EAAE,CAAC,MAAM,EAAE,UAAC,KAAK,EAAK;AAC7B,WAAK,GAAG,KAAK,CAAC,GAAG,CAAC,UAAC,IAAI;eAAK,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC;OAAA,CAAC,CAAC;AACtD,aAAO,CAAC,KAAK,CAAC,CAAC;KAChB,CAAC,CAAC;;AAEH,YAAQ,CAAC,IAAI,EAAE,CAAC;GACjB,CAAC,CAAC;CACJ;;;;;;;;sBA7Fa,QAAQ;;;;sCACI,2BAA2B;;;;AAErD,IAAM,aAAa,GAAG,cAAc,CAAC;;;;;;;;AAQrC,SAAS,sBAAsB,CAAC,KAAK,EAAE;AACrC,MAAM,WAAW,GAAG,KAAK,CAAC,GAAG,CAAC,UAAC,IAAI;WAAK,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC;GAAA,CAAC,CAAC;AAClE,SAAO,SAAS,aAAa,CAAC,IAAI,EAAE;AAClC,QAAI,IAAI,CAAC,IAAI,KAAK,aAAa,EAAE,OAAO,KAAK,CAAC;;AAE9C,QAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;AAC3C,WAAO,oBAAE,QAAQ,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;GACtC,CAAC;CACH;;;;;;;;AAQD,SAAS,sBAAsB,CAAC,KAAK,EAAE;AACrC,SAAO,SAAS,gBAAgB,CAAC,IAAI,EAAE;AACrC,QAAI,IAAI,CAAC,IAAI,KAAK,aAAa,EAAE,OAAO,KAAK,CAAC;;AAE9C,WAAO,KAAK,CAAC,IAAI,CAAC,UAAA,IAAI,EAAI;AACxB,UAAM,KAAK,GAAG,IAAI,MAAM,CAAI,IAAI,YAAS,GAAG,CAAC,CAAC;AAC9C,aAAO,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;KACjC,CAAC,CAAC;GACJ,CAAC;CACH;;;;;;AAMD,SAAS,aAAa,CAAC,MAAM,EAAE;AAC7B,MAAI,MAAM,CAAC,KAAK,EAAE,OAAO,sBAAsB,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;AAC9D,MAAI,MAAM,CAAC,KAAK,EAAE,OAAO,sBAAsB,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;AAC9D,SAAO,oBAAE,IAAI,CAAC;CACf",
      "file": "/home/vio/v3metrics/src/cli_plugin/install/zip.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport DecompressZip from '@bigfunger/decompress-zip';\n\nconst SYMBOLIC_LINK = 'SymbolicLink';\n\n/**\n * Creates a filter function to be consumed by extractFiles that filters by\n *  an array of files\n * @param {array} files - an array of full file paths to extract. Should match\n *   exactly a value from listFiles\n */\nfunction extractFilterFromFiles(files) {\n  const filterFiles = files.map((file) => file.replace(/\\\\/g, '/'));\n  return function filterByFiles(file) {\n    if (file.type === SYMBOLIC_LINK) return false;\n\n    const path = file.path.replace(/\\\\/g, '/');\n    return _.includes(filterFiles, path);\n  };\n}\n\n/**\n * Creates a filter function to be consumed by extractFiles that filters by\n *  an array of root paths\n * @param {array} paths - an array of root paths from the archive. All files and\n *   folders will be extracted recursively using these paths as roots.\n */\nfunction extractFilterFromPaths(paths) {\n  return function filterByRootPath(file) {\n    if (file.type === SYMBOLIC_LINK) return false;\n\n    return paths.some(path => {\n      const regex = new RegExp(`${path}($|/)`, 'i');\n      return file.parent.match(regex);\n    });\n  };\n}\n\n/**\n * Creates a filter function to be consumed by extractFiles\n * @param {object} filter - an object with either a files or paths property.\n */\nfunction extractFilter(filter) {\n  if (filter.files) return extractFilterFromFiles(filter.files);\n  if (filter.paths) return extractFilterFromPaths(filter.paths);\n  return _.noop;\n}\n\n/**\n * Extracts files from a zip archive to a file path using a filter function\n * @param {string} zipPath - file path to a zip archive\n * @param {string} targetPath - directory path to where the files should\n *  extracted\n * @param {integer} strip - Number of nested directories within the archive\n *  that should be ignored when determining the target path of an archived\n *  file.\n * @param {function} filter - A function that accepts a single parameter 'file'\n *  and returns true if the file should be extracted from the archive\n */\nexport async function extractFiles(zipPath, targetPath, strip, filter) {\n  await new Promise((resolve, reject) => {\n    const unzipper = new DecompressZip(zipPath);\n\n    unzipper.on('error', reject);\n\n    unzipper.extract({\n      path: targetPath,\n      strip: strip,\n      filter: extractFilter(filter)\n    });\n\n    unzipper.on('extract', resolve);\n  });\n}\n\n/**\n * Returns all files within an archive\n * @param {string} zipPath - file path to a zip archive\n * @returns {array} all files within an archive with their relative paths\n */\nexport async function listFiles(zipPath) {\n  return await new Promise((resolve, reject) => {\n    const unzipper = new DecompressZip(zipPath);\n\n    unzipper.on('error', reject);\n\n    unzipper.on('list', (files) => {\n      files = files.map((file) => file.replace(/\\\\/g, '/'));\n      resolve(files);\n    });\n\n    unzipper.list();\n  });\n}\n"
      ]
    },
    "mtime": 1467036622785
  },
  "{\"filename\":\"/home/vio/v3metrics/src/cli_plugin/install/kibana.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "../../utils",
            "imported": [
              "fromRoot"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "fromRoot",
                "local": "fromRoot"
              }
            ]
          },
          {
            "source": "../../server/kbn_server",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "KbnServer"
              }
            ]
          },
          {
            "source": "../../cli/serve/read_yaml_config",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "readYamlConfig"
              }
            ]
          },
          {
            "source": "./version",
            "imported": [
              "versionSatisfies",
              "cleanVersion"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "versionSatisfies",
                "local": "versionSatisfies"
              },
              {
                "kind": "named",
                "imported": "cleanVersion",
                "local": "cleanVersion"
              }
            ]
          },
          {
            "source": "fs",
            "imported": [
              "statSync"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "statSync",
                "local": "statSync"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "existingInstall",
            "settings",
            "logger",
            "rebuildCache",
            "settings",
            "logger",
            "assertVersion",
            "settings"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "existingInstall",
              "exported": "existingInstall"
            },
            {
              "kind": "local",
              "local": "settings",
              "exported": "settings"
            },
            {
              "kind": "local",
              "local": "logger",
              "exported": "logger"
            },
            {
              "kind": "local",
              "local": "rebuildCache",
              "exported": "rebuildCache"
            },
            {
              "kind": "local",
              "local": "settings",
              "exported": "settings"
            },
            {
              "kind": "local",
              "local": "logger",
              "exported": "logger"
            },
            {
              "kind": "local",
              "local": "assertVersion",
              "exported": "assertVersion"
            },
            {
              "kind": "local",
              "local": "settings",
              "exported": "settings"
            }
          ]
        }
      },
      "usedHelpers": [
        "async-to-generator",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports.existingInstall = existingInstall;\n\nvar rebuildCache = _asyncToGenerator(function* (settings, logger) {\n  logger.log('Optimizing and caching browser bundles...');\n  var serverConfig = _lodash2['default'].merge((0, _cliServeRead_yaml_config2['default'])(settings.config), {\n    env: 'production',\n    logging: {\n      silent: settings.silent,\n      quiet: !settings.silent,\n      verbose: false\n    },\n    optimize: {\n      useBundleCache: false\n    },\n    server: {\n      autoListen: false\n    },\n    plugins: {\n      initialize: false,\n      scanDirs: [settings.pluginDir, (0, _utils.fromRoot)('src/plugins')]\n    }\n  });\n\n  var kbnServer = new _serverKbn_server2['default'](serverConfig);\n  yield kbnServer.ready();\n  yield kbnServer.close();\n});\n\nexports.rebuildCache = rebuildCache;\nexports.assertVersion = assertVersion;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _utils = require('../../utils');\n\nvar _serverKbn_server = require('../../server/kbn_server');\n\nvar _serverKbn_server2 = _interopRequireDefault(_serverKbn_server);\n\nvar _cliServeRead_yaml_config = require('../../cli/serve/read_yaml_config');\n\nvar _cliServeRead_yaml_config2 = _interopRequireDefault(_cliServeRead_yaml_config);\n\nvar _version = require('./version');\n\nvar _fs = require('fs');\n\nfunction existingInstall(settings, logger) {\n  try {\n    (0, _fs.statSync)(settings.plugins[0].path);\n\n    logger.error('Plugin ' + settings.plugins[0].name + ' already exists, please remove before installing a new version');\n    process.exit(70); // eslint-disable-line no-process-exit\n  } catch (e) {\n    if (e.code !== 'ENOENT') throw e;\n  }\n}\n\nfunction assertVersion(settings) {\n  if (!settings.plugins[0].version) {\n    throw new Error('Plugin version not found. Check package.json in archive');\n  }\n\n  var actual = (0, _version.cleanVersion)(settings.plugins[0].version);\n  var expected = (0, _version.cleanVersion)(settings.version);\n  if (!(0, _version.versionSatisfies)(actual, expected)) {\n    throw new Error('Incorrect version in plugin [' + settings.plugins[0].name + ']. ' + ('Expected [' + expected + ']; found [' + actual + ']'));\n  }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL2NsaV9wbHVnaW4vaW5zdGFsbC9raWJhbmEuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7OztJQWtCc0IsWUFBWSxxQkFBM0IsV0FBNEIsUUFBUSxFQUFFLE1BQU0sRUFBRTtBQUNuRCxRQUFNLENBQUMsR0FBRyxDQUFDLDJDQUEyQyxDQUFDLENBQUM7QUFDeEQsTUFBTSxZQUFZLEdBQUcsb0JBQUUsS0FBSyxDQUMxQiwyQ0FBZSxRQUFRLENBQUMsTUFBTSxDQUFDLEVBQy9CO0FBQ0UsT0FBRyxFQUFFLFlBQVk7QUFDakIsV0FBTyxFQUFFO0FBQ1AsWUFBTSxFQUFFLFFBQVEsQ0FBQyxNQUFNO0FBQ3ZCLFdBQUssRUFBRSxDQUFDLFFBQVEsQ0FBQyxNQUFNO0FBQ3ZCLGFBQU8sRUFBRSxLQUFLO0tBQ2Y7QUFDRCxZQUFRLEVBQUU7QUFDUixvQkFBYyxFQUFFLEtBQUs7S0FDdEI7QUFDRCxVQUFNLEVBQUU7QUFDTixnQkFBVSxFQUFFLEtBQUs7S0FDbEI7QUFDRCxXQUFPLEVBQUU7QUFDUCxnQkFBVSxFQUFFLEtBQUs7QUFDakIsY0FBUSxFQUFFLENBQUMsUUFBUSxDQUFDLFNBQVMsRUFBRSxxQkFBUyxhQUFhLENBQUMsQ0FBQztLQUN4RDtHQUNGLENBQ0YsQ0FBQzs7QUFFRixNQUFNLFNBQVMsR0FBRyxrQ0FBYyxZQUFZLENBQUMsQ0FBQztBQUM5QyxRQUFNLFNBQVMsQ0FBQyxLQUFLLEVBQUUsQ0FBQztBQUN4QixRQUFNLFNBQVMsQ0FBQyxLQUFLLEVBQUUsQ0FBQztDQUN6Qjs7Ozs7Ozs7O3NCQTdDYSxRQUFROzs7O3FCQUNHLGFBQWE7O2dDQUNoQix5QkFBeUI7Ozs7d0NBQ3BCLGtDQUFrQzs7Ozt1QkFDZCxXQUFXOztrQkFDakMsSUFBSTs7QUFFdEIsU0FBUyxlQUFlLENBQUMsUUFBUSxFQUFFLE1BQU0sRUFBRTtBQUNoRCxNQUFJO0FBQ0Ysc0JBQVMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQzs7QUFFbkMsVUFBTSxDQUFDLEtBQUssYUFBVyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksb0VBQWlFLENBQUM7QUFDakgsV0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztHQUNsQixDQUFDLE9BQU8sQ0FBQyxFQUFFO0FBQ1YsUUFBSSxDQUFDLENBQUMsSUFBSSxLQUFLLFFBQVEsRUFBRSxNQUFNLENBQUMsQ0FBQztHQUNsQztDQUNGOztBQStCTSxTQUFTLGFBQWEsQ0FBQyxRQUFRLEVBQUU7QUFDdEMsTUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFO0FBQ2hDLFVBQU0sSUFBSSxLQUFLLDJEQUE0RCxDQUFDO0dBQzdFOztBQUVELE1BQU0sTUFBTSxHQUFHLDJCQUFhLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDekQsTUFBTSxRQUFRLEdBQUcsMkJBQWEsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQ2hELE1BQUksQ0FBQywrQkFBaUIsTUFBTSxFQUFFLFFBQVEsQ0FBQyxFQUFFO0FBQ3ZDLFVBQU0sSUFBSSxLQUFLLENBQUUsa0NBQWdDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSwyQkFDMUQsUUFBUSxrQkFBYSxNQUFNLE9BQUcsQ0FBQyxDQUFDO0dBQ2hEO0NBQ0YiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvY2xpX3BsdWdpbi9pbnN0YWxsL2tpYmFuYS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgeyBmcm9tUm9vdCB9IGZyb20gJy4uLy4uL3V0aWxzJztcbmltcG9ydCBLYm5TZXJ2ZXIgZnJvbSAnLi4vLi4vc2VydmVyL2tibl9zZXJ2ZXInO1xuaW1wb3J0IHJlYWRZYW1sQ29uZmlnIGZyb20gJy4uLy4uL2NsaS9zZXJ2ZS9yZWFkX3lhbWxfY29uZmlnJztcbmltcG9ydCB7IHZlcnNpb25TYXRpc2ZpZXMsIGNsZWFuVmVyc2lvbiB9IGZyb20gJy4vdmVyc2lvbic7XG5pbXBvcnQgeyBzdGF0U3luYyB9IGZyb20gJ2ZzJztcblxuZXhwb3J0IGZ1bmN0aW9uIGV4aXN0aW5nSW5zdGFsbChzZXR0aW5ncywgbG9nZ2VyKSB7XG4gIHRyeSB7XG4gICAgc3RhdFN5bmMoc2V0dGluZ3MucGx1Z2luc1swXS5wYXRoKTtcblxuICAgIGxvZ2dlci5lcnJvcihgUGx1Z2luICR7c2V0dGluZ3MucGx1Z2luc1swXS5uYW1lfSBhbHJlYWR5IGV4aXN0cywgcGxlYXNlIHJlbW92ZSBiZWZvcmUgaW5zdGFsbGluZyBhIG5ldyB2ZXJzaW9uYCk7XG4gICAgcHJvY2Vzcy5leGl0KDcwKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1wcm9jZXNzLWV4aXRcbiAgfSBjYXRjaCAoZSkge1xuICAgIGlmIChlLmNvZGUgIT09ICdFTk9FTlQnKSB0aHJvdyBlO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWJ1aWxkQ2FjaGUoc2V0dGluZ3MsIGxvZ2dlcikge1xuICBsb2dnZXIubG9nKCdPcHRpbWl6aW5nIGFuZCBjYWNoaW5nIGJyb3dzZXIgYnVuZGxlcy4uLicpO1xuICBjb25zdCBzZXJ2ZXJDb25maWcgPSBfLm1lcmdlKFxuICAgIHJlYWRZYW1sQ29uZmlnKHNldHRpbmdzLmNvbmZpZyksXG4gICAge1xuICAgICAgZW52OiAncHJvZHVjdGlvbicsXG4gICAgICBsb2dnaW5nOiB7XG4gICAgICAgIHNpbGVudDogc2V0dGluZ3Muc2lsZW50LFxuICAgICAgICBxdWlldDogIXNldHRpbmdzLnNpbGVudCxcbiAgICAgICAgdmVyYm9zZTogZmFsc2VcbiAgICAgIH0sXG4gICAgICBvcHRpbWl6ZToge1xuICAgICAgICB1c2VCdW5kbGVDYWNoZTogZmFsc2VcbiAgICAgIH0sXG4gICAgICBzZXJ2ZXI6IHtcbiAgICAgICAgYXV0b0xpc3RlbjogZmFsc2VcbiAgICAgIH0sXG4gICAgICBwbHVnaW5zOiB7XG4gICAgICAgIGluaXRpYWxpemU6IGZhbHNlLFxuICAgICAgICBzY2FuRGlyczogW3NldHRpbmdzLnBsdWdpbkRpciwgZnJvbVJvb3QoJ3NyYy9wbHVnaW5zJyldXG4gICAgICB9XG4gICAgfVxuICApO1xuXG4gIGNvbnN0IGtiblNlcnZlciA9IG5ldyBLYm5TZXJ2ZXIoc2VydmVyQ29uZmlnKTtcbiAgYXdhaXQga2JuU2VydmVyLnJlYWR5KCk7XG4gIGF3YWl0IGtiblNlcnZlci5jbG9zZSgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0VmVyc2lvbihzZXR0aW5ncykge1xuICBpZiAoIXNldHRpbmdzLnBsdWdpbnNbMF0udmVyc2lvbikge1xuICAgIHRocm93IG5ldyBFcnJvciAoYFBsdWdpbiB2ZXJzaW9uIG5vdCBmb3VuZC4gQ2hlY2sgcGFja2FnZS5qc29uIGluIGFyY2hpdmVgKTtcbiAgfVxuXG4gIGNvbnN0IGFjdHVhbCA9IGNsZWFuVmVyc2lvbihzZXR0aW5ncy5wbHVnaW5zWzBdLnZlcnNpb24pO1xuICBjb25zdCBleHBlY3RlZCA9IGNsZWFuVmVyc2lvbihzZXR0aW5ncy52ZXJzaW9uKTtcbiAgaWYgKCF2ZXJzaW9uU2F0aXNmaWVzKGFjdHVhbCwgZXhwZWN0ZWQpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yIChgSW5jb3JyZWN0IHZlcnNpb24gaW4gcGx1Z2luIFske3NldHRpbmdzLnBsdWdpbnNbMF0ubmFtZX1dLiBgICtcbiAgICAgIGBFeHBlY3RlZCBbJHtleHBlY3RlZH1dOyBmb3VuZCBbJHthY3R1YWx9XWApO1xuICB9XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/cli_plugin/install/kibana.js"
      ],
      "names": [],
      "mappings": ";;;;;;;IAkBsB,YAAY,qBAA3B,WAA4B,QAAQ,EAAE,MAAM,EAAE;AACnD,QAAM,CAAC,GAAG,CAAC,2CAA2C,CAAC,CAAC;AACxD,MAAM,YAAY,GAAG,oBAAE,KAAK,CAC1B,2CAAe,QAAQ,CAAC,MAAM,CAAC,EAC/B;AACE,OAAG,EAAE,YAAY;AACjB,WAAO,EAAE;AACP,YAAM,EAAE,QAAQ,CAAC,MAAM;AACvB,WAAK,EAAE,CAAC,QAAQ,CAAC,MAAM;AACvB,aAAO,EAAE,KAAK;KACf;AACD,YAAQ,EAAE;AACR,oBAAc,EAAE,KAAK;KACtB;AACD,UAAM,EAAE;AACN,gBAAU,EAAE,KAAK;KAClB;AACD,WAAO,EAAE;AACP,gBAAU,EAAE,KAAK;AACjB,cAAQ,EAAE,CAAC,QAAQ,CAAC,SAAS,EAAE,qBAAS,aAAa,CAAC,CAAC;KACxD;GACF,CACF,CAAC;;AAEF,MAAM,SAAS,GAAG,kCAAc,YAAY,CAAC,CAAC;AAC9C,QAAM,SAAS,CAAC,KAAK,EAAE,CAAC;AACxB,QAAM,SAAS,CAAC,KAAK,EAAE,CAAC;CACzB;;;;;;;;;sBA7Ca,QAAQ;;;;qBACG,aAAa;;gCAChB,yBAAyB;;;;wCACpB,kCAAkC;;;;uBACd,WAAW;;kBACjC,IAAI;;AAEtB,SAAS,eAAe,CAAC,QAAQ,EAAE,MAAM,EAAE;AAChD,MAAI;AACF,sBAAS,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;;AAEnC,UAAM,CAAC,KAAK,aAAW,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,oEAAiE,CAAC;AACjH,WAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;GAClB,CAAC,OAAO,CAAC,EAAE;AACV,QAAI,CAAC,CAAC,IAAI,KAAK,QAAQ,EAAE,MAAM,CAAC,CAAC;GAClC;CACF;;AA+BM,SAAS,aAAa,CAAC,QAAQ,EAAE;AACtC,MAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE;AAChC,UAAM,IAAI,KAAK,2DAA4D,CAAC;GAC7E;;AAED,MAAM,MAAM,GAAG,2BAAa,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC;AACzD,MAAM,QAAQ,GAAG,2BAAa,QAAQ,CAAC,OAAO,CAAC,CAAC;AAChD,MAAI,CAAC,+BAAiB,MAAM,EAAE,QAAQ,CAAC,EAAE;AACvC,UAAM,IAAI,KAAK,CAAE,kCAAgC,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,2BAC1D,QAAQ,kBAAa,MAAM,OAAG,CAAC,CAAC;GAChD;CACF",
      "file": "/home/vio/v3metrics/src/cli_plugin/install/kibana.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport { fromRoot } from '../../utils';\nimport KbnServer from '../../server/kbn_server';\nimport readYamlConfig from '../../cli/serve/read_yaml_config';\nimport { versionSatisfies, cleanVersion } from './version';\nimport { statSync } from 'fs';\n\nexport function existingInstall(settings, logger) {\n  try {\n    statSync(settings.plugins[0].path);\n\n    logger.error(`Plugin ${settings.plugins[0].name} already exists, please remove before installing a new version`);\n    process.exit(70); // eslint-disable-line no-process-exit\n  } catch (e) {\n    if (e.code !== 'ENOENT') throw e;\n  }\n}\n\nexport async function rebuildCache(settings, logger) {\n  logger.log('Optimizing and caching browser bundles...');\n  const serverConfig = _.merge(\n    readYamlConfig(settings.config),\n    {\n      env: 'production',\n      logging: {\n        silent: settings.silent,\n        quiet: !settings.silent,\n        verbose: false\n      },\n      optimize: {\n        useBundleCache: false\n      },\n      server: {\n        autoListen: false\n      },\n      plugins: {\n        initialize: false,\n        scanDirs: [settings.pluginDir, fromRoot('src/plugins')]\n      }\n    }\n  );\n\n  const kbnServer = new KbnServer(serverConfig);\n  await kbnServer.ready();\n  await kbnServer.close();\n}\n\nexport function assertVersion(settings) {\n  if (!settings.plugins[0].version) {\n    throw new Error (`Plugin version not found. Check package.json in archive`);\n  }\n\n  const actual = cleanVersion(settings.plugins[0].version);\n  const expected = cleanVersion(settings.version);\n  if (!versionSatisfies(actual, expected)) {\n    throw new Error (`Incorrect version in plugin [${settings.plugins[0].name}]. ` +\n      `Expected [${expected}]; found [${actual}]`);\n  }\n}\n"
      ]
    },
    "mtime": 1467036622785
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/kbn_server.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "hapi",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Hapi"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "constant",
              "once",
              "compact",
              "flatten"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "constant",
                "local": "constant"
              },
              {
                "kind": "named",
                "imported": "once",
                "local": "once"
              },
              {
                "kind": "named",
                "imported": "compact",
                "local": "compact"
              },
              {
                "kind": "named",
                "imported": "flatten",
                "local": "flatten"
              }
            ]
          },
          {
            "source": "bluebird",
            "imported": [
              "promisify",
              "resolve",
              "fromNode"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "promisify",
                "local": "promisify"
              },
              {
                "kind": "named",
                "imported": "resolve",
                "local": "resolve"
              },
              {
                "kind": "named",
                "imported": "fromNode",
                "local": "fromNode"
              }
            ]
          },
          {
            "source": "cluster",
            "imported": [
              "isWorker"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "isWorker",
                "local": "isWorker"
              }
            ]
          },
          {
            "source": "../utils",
            "imported": [
              "fromRoot",
              "pkg"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "fromRoot",
                "local": "fromRoot"
              },
              {
                "kind": "named",
                "imported": "pkg",
                "local": "pkg"
              }
            ]
          },
          {
            "source": "./config/config",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Config"
              }
            ]
          },
          {
            "source": "./logging/configuration",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "loggingConfiguration"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "async-to-generator",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _hapi = require('hapi');\n\nvar _hapi2 = _interopRequireDefault(_hapi);\n\nvar _lodash = require('lodash');\n\nvar _bluebird = require('bluebird');\n\nvar _cluster = require('cluster');\n\nvar _utils = require('../utils');\n\nvar _configConfig = require('./config/config');\n\nvar _configConfig2 = _interopRequireDefault(_configConfig);\n\nvar _loggingConfiguration = require('./logging/configuration');\n\nvar _loggingConfiguration2 = _interopRequireDefault(_loggingConfiguration);\n\nvar rootDir = (0, _utils.fromRoot)('.');\n\nmodule.exports = (function () {\n  function KbnServer(settings) {\n    var _this = this;\n\n    _classCallCheck(this, KbnServer);\n\n    this.name = _utils.pkg.name;\n    this.version = _utils.pkg.version;\n    this.build = _utils.pkg.build || false;\n    this.rootDir = rootDir;\n    this.settings = settings || {};\n\n    this.ready = (0, _lodash.constant)(this.mixin(require('./config/setup'), // sets this.config, reads this.settings\n    require('./http'), // sets this.server\n    require('./logging'), require('./status'),\n\n    // writes pid file\n    require('./pid'),\n\n    // find plugins and set this.plugins\n    require('./plugins/scan'),\n\n    // tell the config we are done loading plugins\n    require('./config/complete'),\n\n    // setup this.uiExports and this.bundles\n    require('../ui'),\n\n    // setup server.uiSettings\n    require('../ui/settings'),\n\n    // ensure that all bundles are built, or that the\n    // lazy bundle server is running\n    require('../optimize'),\n\n    // finally, initialize the plugins\n    require('./plugins/initialize'), function () {\n      if (_this.config.get('server.autoListen')) {\n        _this.ready = (0, _lodash.constant)((0, _bluebird.resolve)());\n        return _this.listen();\n      }\n    }));\n\n    this.listen = (0, _lodash.once)(this.listen);\n  }\n\n  /**\n   * Extend the KbnServer outside of the constraits of a plugin. This allows access\n   * to APIs that are not exposed (intentionally) to the plugins and should only\n   * be used when the code will be kept up to date with Kibana.\n   *\n   * @param {...function} - functions that should be called to mixin functionality.\n   *                         They are called with the arguments (kibana, server, config)\n   *                         and can return a promise to delay execution of the next mixin\n   * @return {Promise} - promise that is resolved when the final mixin completes.\n   */\n\n  _createClass(KbnServer, [{\n    key: 'mixin',\n    value: _asyncToGenerator(function* () {\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _len = arguments.length, fns = Array(_len), _key = 0; _key < _len; _key++) {\n          fns[_key] = arguments[_key];\n        }\n\n        for (var _iterator = (0, _lodash.compact)((0, _lodash.flatten)(fns))[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var fn = _step.value;\n\n          yield fn.call(this, this, this.server, this.config);\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator['return']) {\n            _iterator['return']();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    })\n\n    /**\n     * Tell the server to listen for incoming requests, or get\n     * a promise that will be resolved once the server is listening.\n     *\n     * @return undefined\n     */\n  }, {\n    key: 'listen',\n    value: _asyncToGenerator(function* () {\n      var server = this.server;\n      var config = this.config;\n\n      yield this.ready();\n      yield (0, _bluebird.fromNode)(function (cb) {\n        return server.start(cb);\n      });\n\n      if (_cluster.isWorker) {\n        // help parent process know when we are ready\n        process.send(['WORKER_LISTENING']);\n      }\n\n      server.log(['listening', 'info'], 'Server running at ' + server.info.uri);\n      return server;\n    })\n  }, {\n    key: 'close',\n    value: _asyncToGenerator(function* () {\n      var _this2 = this;\n\n      yield (0, _bluebird.fromNode)(function (cb) {\n        return _this2.server.stop(cb);\n      });\n    })\n  }, {\n    key: 'inject',\n    value: _asyncToGenerator(function* (opts) {\n      var _this3 = this;\n\n      if (!this.server) yield this.ready();\n\n      return yield (0, _bluebird.fromNode)(function (cb) {\n        try {\n          _this3.server.inject(opts, function (resp) {\n            cb(null, resp);\n          });\n        } catch (err) {\n          cb(err);\n        }\n      });\n    })\n  }, {\n    key: 'applyLoggingConfiguration',\n    value: function applyLoggingConfiguration(settings) {\n      var config = _configConfig2['default'].withDefaultSchema(settings);\n      var loggingOptions = (0, _loggingConfiguration2['default'])(config);\n      var subset = {\n        ops: config.get('ops'),\n        logging: config.get('logging')\n      };\n      var plain = JSON.stringify(subset, null, 2);\n      this.server.log(['info', 'config'], 'New logging configuration:\\n' + plain);\n      this.server.plugins['even-better'].monitor.reconfigure(loggingOptions);\n    }\n  }]);\n\n  return KbnServer;\n})();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9rYm5fc2VydmVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7b0JBQWlCLE1BQU07Ozs7c0JBQzBCLFFBQVE7O3dCQUNaLFVBQVU7O3VCQUM5QixTQUFTOztxQkFDSixVQUFVOzs0QkFDckIsaUJBQWlCOzs7O29DQUNILHlCQUF5Qjs7OztBQUUxRCxJQUFJLE9BQU8sR0FBRyxxQkFBUyxHQUFHLENBQUMsQ0FBQzs7QUFFNUIsTUFBTSxDQUFDLE9BQU87QUFDRCxXQURVLFNBQVMsQ0FDbEIsUUFBUSxFQUFFOzs7MEJBREQsU0FBUzs7QUFFNUIsUUFBSSxDQUFDLElBQUksR0FBRyxXQUFJLElBQUksQ0FBQztBQUNyQixRQUFJLENBQUMsT0FBTyxHQUFHLFdBQUksT0FBTyxDQUFDO0FBQzNCLFFBQUksQ0FBQyxLQUFLLEdBQUcsV0FBSSxLQUFLLElBQUksS0FBSyxDQUFDO0FBQ2hDLFFBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDO0FBQ3ZCLFFBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxJQUFJLEVBQUUsQ0FBQzs7QUFFL0IsUUFBSSxDQUFDLEtBQUssR0FBRyxzQkFBUyxJQUFJLENBQUMsS0FBSyxDQUM5QixPQUFPLENBQUMsZ0JBQWdCLENBQUM7QUFDekIsV0FBTyxDQUFDLFFBQVEsQ0FBQztBQUNqQixXQUFPLENBQUMsV0FBVyxDQUFDLEVBQ3BCLE9BQU8sQ0FBQyxVQUFVLENBQUM7OztBQUduQixXQUFPLENBQUMsT0FBTyxDQUFDOzs7QUFHaEIsV0FBTyxDQUFDLGdCQUFnQixDQUFDOzs7QUFHekIsV0FBTyxDQUFDLG1CQUFtQixDQUFDOzs7QUFHNUIsV0FBTyxDQUFDLE9BQU8sQ0FBQzs7O0FBR2hCLFdBQU8sQ0FBQyxnQkFBZ0IsQ0FBQzs7OztBQUl6QixXQUFPLENBQUMsYUFBYSxDQUFDOzs7QUFHdEIsV0FBTyxDQUFDLHNCQUFzQixDQUFDLEVBRS9CLFlBQU07QUFD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QixDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9rYm5fc2VydmVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEhhcGkgZnJvbSAnaGFwaSc7XG5pbXBvcnQgeyBjb25zdGFudCwgb25jZSwgY29tcGFjdCwgZmxhdHRlbiB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgeyBwcm9taXNpZnksIHJlc29sdmUsIGZyb21Ob2RlIH0gZnJvbSAnYmx1ZWJpcmQnO1xuaW1wb3J0IHsgaXNXb3JrZXIgfSBmcm9tICdjbHVzdGVyJztcbmltcG9ydCB7IGZyb21Sb290LCBwa2cgfSBmcm9tICcuLi91dGlscyc7XG5pbXBvcnQgQ29uZmlnIGZyb20gJy4vY29uZmlnL2NvbmZpZyc7XG5pbXBvcnQgbG9nZ2luZ0NvbmZpZ3VyYXRpb24gZnJvbSAnLi9sb2dnaW5nL2NvbmZpZ3VyYXRpb24nO1xuXG5sZXQgcm9vdERpciA9IGZyb21Sb290KCcuJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgS2JuU2VydmVyIHtcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MpIHtcbiAgICB0aGlzLm5hbWUgPSBwa2cubmFtZTtcbiAgICB0aGlzLnZlcnNpb24gPSBwa2cudmVyc2lvbjtcbiAgICB0aGlzLmJ1aWxkID0gcGtnLmJ1aWxkIHx8IGZhbHNlO1xuICAgIHRoaXMucm9vdERpciA9IHJvb3REaXI7XG4gICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzIHx8IHt9O1xuXG4gICAgdGhpcy5yZWFkeSA9IGNvbnN0YW50KHRoaXMubWl4aW4oXG4gICAgICByZXF1aXJlKCcuL2NvbmZpZy9zZXR1cCcpLCAvLyBzZXRzIHRoaXMuY29uZmlnLCByZWFkcyB0aGlzLnNldHRpbmdzXG4gICAgICByZXF1aXJlKCcuL2h0dHAnKSwgLy8gc2V0cyB0aGlzLnNlcnZlclxuICAgICAgcmVxdWlyZSgnLi9sb2dnaW5nJyksXG4gICAgICByZXF1aXJlKCcuL3N0YXR1cycpLFxuXG4gICAgICAvLyB3cml0ZXMgcGlkIGZpbGVcbiAgICAgIHJlcXVpcmUoJy4vcGlkJyksXG5cbiAgICAgIC8vIGZpbmQgcGx1Z2lucyBhbmQgc2V0IHRoaXMucGx1Z2luc1xuICAgICAgcmVxdWlyZSgnLi9wbHVnaW5zL3NjYW4nKSxcblxuICAgICAgLy8gdGVsbCB0aGUgY29uZmlnIHdlIGFyZSBkb25lIGxvYWRpbmcgcGx1Z2luc1xuICAgICAgcmVxdWlyZSgnLi9jb25maWcvY29tcGxldGUnKSxcblxuICAgICAgLy8gc2V0dXAgdGhpcy51aUV4cG9ydHMgYW5kIHRoaXMuYnVuZGxlc1xuICAgICAgcmVxdWlyZSgnLi4vdWknKSxcblxuICAgICAgLy8gc2V0dXAgc2VydmVyLnVpU2V0dGluZ3NcbiAgICAgIHJlcXVpcmUoJy4uL3VpL3NldHRpbmdzJyksXG5cbiAgICAgIC8vIGVuc3VyZSB0aGF0IGFsbCBidW5kbGVzIGFyZSBidWlsdCwgb3IgdGhhdCB0aGVcbiAgICAgIC8vIGxhenkgYnVuZGxlIHNlcnZlciBpcyBydW5uaW5nXG4gICAgICByZXF1aXJlKCcuLi9vcHRpbWl6ZScpLFxuXG4gICAgICAvLyBmaW5hbGx5LCBpbml0aWFsaXplIHRoZSBwbHVnaW5zXG4gICAgICByZXF1aXJlKCcuL3BsdWdpbnMvaW5pdGlhbGl6ZScpLFxuXG4gICAgICAoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5nZXQoJ3NlcnZlci5hdXRvTGlzdGVuJykpIHtcbiAgICAgICAgICB0aGlzLnJlYWR5ID0gY29uc3RhbnQocmVzb2x2ZSgpKTtcbiAgICAgICAgICByZXR1cm4gdGhpcy5saXN0ZW4oKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICkpO1xuXG4gICAgdGhpcy5saXN0ZW4gPSBvbmNlKHRoaXMubGlzdGVuKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHRlbmQgdGhlIEtiblNlcnZlciBvdXRzaWRlIG9mIHRoZSBjb25zdHJhaXRzIG9mIGEgcGx1Z2luLiBUaGlzIGFsbG93cyBhY2Nlc3NcbiAgICogdG8gQVBJcyB0aGF0IGFyZSBub3QgZXhwb3NlZCAoaW50ZW50aW9uYWxseSkgdG8gdGhlIHBsdWdpbnMgYW5kIHNob3VsZCBvbmx5XG4gICAqIGJlIHVzZWQgd2hlbiB0aGUgY29kZSB3aWxsIGJlIGtlcHQgdXAgdG8gZGF0ZSB3aXRoIEtpYmFuYS5cbiAgICpcbiAgICogQHBhcmFtIHsuLi5mdW5jdGlvbn0gLSBmdW5jdGlvbnMgdGhhdCBzaG91bGQgYmUgY2FsbGVkIHRvIG1peGluIGZ1bmN0aW9uYWxpdHkuXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgIFRoZXkgYXJlIGNhbGxlZCB3aXRoIHRoZSBhcmd1bWVudHMgKGtpYmFuYSwgc2VydmVyLCBjb25maWcpXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgIGFuZCBjYW4gcmV0dXJuIGEgcHJvbWlzZSB0byBkZWxheSBleGVjdXRpb24gb2YgdGhlIG5leHQgbWl4aW5cbiAgICogQHJldHVybiB7UHJvbWlzZX0gLSBwcm9taXNlIHRoYXQgaXMgcmVzb2x2ZWQgd2hlbiB0aGUgZmluYWwgbWl4aW4gY29tcGxldGVzLlxuICAgKi9cbiAgYXN5bmMgbWl4aW4oLi4uZm5zKSB7XG4gICAgZm9yIChsZXQgZm4gb2YgY29tcGFjdChmbGF0dGVuKGZucykpKSB7XG4gICAgICBhd2FpdCBmbi5jYWxsKHRoaXMsIHRoaXMsIHRoaXMuc2VydmVyLCB0aGlzLmNvbmZpZyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRlbGwgdGhlIHNlcnZlciB0byBsaXN0ZW4gZm9yIGluY29taW5nIHJlcXVlc3RzLCBvciBnZXRcbiAgICogYSBwcm9taXNlIHRoYXQgd2lsbCBiZSByZXNvbHZlZCBvbmNlIHRoZSBzZXJ2ZXIgaXMgbGlzdGVuaW5nLlxuICAgKlxuICAgKiBAcmV0dXJuIHVuZGVmaW5lZFxuICAgKi9cbiAgYXN5bmMgbGlzdGVuKCkge1xuICAgIGxldCB7IHNlcnZlciwgY29uZmlnIH0gPSB0aGlzO1xuXG4gICAgYXdhaXQgdGhpcy5yZWFkeSgpO1xuICAgIGF3YWl0IGZyb21Ob2RlKGNiID0+IHNlcnZlci5zdGFydChjYikpO1xuXG4gICAgaWYgKGlzV29ya2VyKSB7XG4gICAgICAvLyBoZWxwIHBhcmVudCBwcm9jZXNzIGtub3cgd2hlbiB3ZSBhcmUgcmVhZHlcbiAgICAgIHByb2Nlc3Muc2VuZChbJ1dPUktFUl9MSVNURU5JTkcnXSk7XG4gICAgfVxuXG4gICAgc2VydmVyLmxvZyhbJ2xpc3RlbmluZycsICdpbmZvJ10sIGBTZXJ2ZXIgcnVubmluZyBhdCAke3NlcnZlci5pbmZvLnVyaX1gKTtcbiAgICByZXR1cm4gc2VydmVyO1xuICB9XG5cbiAgYXN5bmMgY2xvc2UoKSB7XG4gICAgYXdhaXQgZnJvbU5vZGUoY2IgPT4gdGhpcy5zZXJ2ZXIuc3RvcChjYikpO1xuICB9XG5cbiAgYXN5bmMgaW5qZWN0KG9wdHMpIHtcbiAgICBpZiAoIXRoaXMuc2VydmVyKSBhd2FpdCB0aGlzLnJlYWR5KCk7XG5cbiAgICByZXR1cm4gYXdhaXQgZnJvbU5vZGUoY2IgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGhpcy5zZXJ2ZXIuaW5qZWN0KG9wdHMsIChyZXNwKSA9PiB7XG4gICAgICAgICAgY2IobnVsbCwgcmVzcCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNiKGVycik7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBhcHBseUxvZ2dpbmdDb25maWd1cmF0aW9uKHNldHRpbmdzKSB7XG4gICAgY29uc3QgY29uZmlnID0gQ29uZmlnLndpdGhEZWZhdWx0U2NoZW1hKHNldHRpbmdzKTtcbiAgICBjb25zdCBsb2dnaW5nT3B0aW9ucyA9IGxvZ2dpbmdDb25maWd1cmF0aW9uKGNvbmZpZyk7XG4gICAgY29uc3Qgc3Vic2V0ID0ge1xuICAgICAgb3BzOiBjb25maWcuZ2V0KCdvcHMnKSxcbiAgICAgIGxvZ2dpbmc6IGNvbmZpZy5nZXQoJ2xvZ2dpbmcnKVxuICAgIH07XG4gICAgY29uc3QgcGxhaW4gPSBKU09OLnN0cmluZ2lmeShzdWJzZXQsIG51bGwsIDIpO1xuICAgIHRoaXMuc2VydmVyLmxvZyhbJ2luZm8nLCAnY29uZmlnJ10sICdOZXcgbG9nZ2luZyBjb25maWd1cmF0aW9uOlxcbicgKyBwbGFpbik7XG4gICAgdGhpcy5zZXJ2ZXIucGx1Z2luc1snZXZlbi1iZXR0ZXInXS5tb25pdG9yLnJlY29uZmlndXJlKGxvZ2dpbmdPcHRpb25zKTtcbiAgfVxufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/kbn_server.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/src/server/kbn_server.js",
      "sourcesContent": [
        "import Hapi from 'hapi';\nimport { constant, once, compact, flatten } from 'lodash';\nimport { promisify, resolve, fromNode } from 'bluebird';\nimport { isWorker } from 'cluster';\nimport { fromRoot, pkg } from '../utils';\nimport Config from './config/config';\nimport loggingConfiguration from './logging/configuration';\n\nlet rootDir = fromRoot('.');\n\nmodule.exports = class KbnServer {\n  constructor(settings) {\n    this.name = pkg.name;\n    this.version = pkg.version;\n    this.build = pkg.build || false;\n    this.rootDir = rootDir;\n    this.settings = settings || {};\n\n    this.ready = constant(this.mixin(\n      require('./config/setup'), // sets this.config, reads this.settings\n      require('./http'), // sets this.server\n      require('./logging'),\n      require('./status'),\n\n      // writes pid file\n      require('./pid'),\n\n      // find plugins and set this.plugins\n      require('./plugins/scan'),\n\n      // tell the config we are done loading plugins\n      require('./config/complete'),\n\n      // setup this.uiExports and this.bundles\n      require('../ui'),\n\n      // setup server.uiSettings\n      require('../ui/settings'),\n\n      // ensure that all bundles are built, or that the\n      // lazy bundle server is running\n      require('../optimize'),\n\n      // finally, initialize the plugins\n      require('./plugins/initialize'),\n\n      () => {\n        if (this.config.get('server.autoListen')) {\n          this.ready = constant(resolve());\n          return this.listen();\n        }\n      }\n    ));\n\n    this.listen = once(this.listen);\n  }\n\n  /**\n   * Extend the KbnServer outside of the constraits of a plugin. This allows access\n   * to APIs that are not exposed (intentionally) to the plugins and should only\n   * be used when the code will be kept up to date with Kibana.\n   *\n   * @param {...function} - functions that should be called to mixin functionality.\n   *                         They are called with the arguments (kibana, server, config)\n   *                         and can return a promise to delay execution of the next mixin\n   * @return {Promise} - promise that is resolved when the final mixin completes.\n   */\n  async mixin(...fns) {\n    for (let fn of compact(flatten(fns))) {\n      await fn.call(this, this, this.server, this.config);\n    }\n  }\n\n  /**\n   * Tell the server to listen for incoming requests, or get\n   * a promise that will be resolved once the server is listening.\n   *\n   * @return undefined\n   */\n  async listen() {\n    let { server, config } = this;\n\n    await this.ready();\n    await fromNode(cb => server.start(cb));\n\n    if (isWorker) {\n      // help parent process know when we are ready\n      process.send(['WORKER_LISTENING']);\n    }\n\n    server.log(['listening', 'info'], `Server running at ${server.info.uri}`);\n    return server;\n  }\n\n  async close() {\n    await fromNode(cb => this.server.stop(cb));\n  }\n\n  async inject(opts) {\n    if (!this.server) await this.ready();\n\n    return await fromNode(cb => {\n      try {\n        this.server.inject(opts, (resp) => {\n          cb(null, resp);\n        });\n      } catch (err) {\n        cb(err);\n      }\n    });\n  }\n\n  applyLoggingConfiguration(settings) {\n    const config = Config.withDefaultSchema(settings);\n    const loggingOptions = loggingConfiguration(config);\n    const subset = {\n      ops: config.get('ops'),\n      logging: config.get('logging')\n    };\n    const plain = JSON.stringify(subset, null, 2);\n    this.server.log(['info', 'config'], 'New logging configuration:\\n' + plain);\n    this.server.plugins['even-better'].monitor.reconfigure(loggingOptions);\n  }\n};\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/config/config.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "bluebird",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Promise"
              }
            ]
          },
          {
            "source": "joi",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Joi"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "./override",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "override"
              }
            ]
          },
          {
            "source": "./unset",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "unset"
              }
            ]
          },
          {
            "source": "./schema",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "createDefaultSchema"
              }
            ]
          },
          {
            "source": "../../utils/package_json",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "pkg"
              }
            ]
          },
          {
            "source": "./deep_clone_with_buffers",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "clone"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "define-property",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _bluebird = require('bluebird');\n\nvar _bluebird2 = _interopRequireDefault(_bluebird);\n\nvar _joi = require('joi');\n\nvar _joi2 = _interopRequireDefault(_joi);\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _override = require('./override');\n\nvar _override2 = _interopRequireDefault(_override);\n\nvar _unset = require('./unset');\n\nvar _unset2 = _interopRequireDefault(_unset);\n\nvar _schema = require('./schema');\n\nvar _schema2 = _interopRequireDefault(_schema);\n\nvar _utilsPackage_json = require('../../utils/package_json');\n\nvar _utilsPackage_json2 = _interopRequireDefault(_utilsPackage_json);\n\nvar _deep_clone_with_buffers = require('./deep_clone_with_buffers');\n\nvar _deep_clone_with_buffers2 = _interopRequireDefault(_deep_clone_with_buffers);\n\nvar schema = Symbol('Joi Schema');\nvar schemaExts = Symbol('Schema Extensions');\nvar vals = Symbol('config values');\nvar pendingSets = Symbol('Pending Settings');\n\nmodule.exports = (function () {\n  _createClass(Config, null, [{\n    key: 'withDefaultSchema',\n    value: function withDefaultSchema() {\n      var settings = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n      return new Config((0, _schema2['default'])(), settings);\n    }\n  }]);\n\n  function Config(initialSchema, initialSettings) {\n    _classCallCheck(this, Config);\n\n    this[schemaExts] = Object.create(null);\n    this[vals] = Object.create(null);\n    this[pendingSets] = _lodash2['default'].merge(Object.create(null), initialSettings || {});\n\n    if (initialSchema) this.extendSchema(initialSchema);\n  }\n\n  _createClass(Config, [{\n    key: 'getPendingSets',\n    value: function getPendingSets() {\n      return new Map(_lodash2['default'].pairs(this[pendingSets]));\n    }\n  }, {\n    key: 'extendSchema',\n    value: function extendSchema(key, extension) {\n      var _this = this;\n\n      if (key && key.isJoi) {\n        return _lodash2['default'].each(key._inner.children, function (child) {\n          _this.extendSchema(child.key, child.schema);\n        });\n      }\n\n      if (this.has(key)) {\n        throw new Error('Config schema already has key: ' + key);\n      }\n\n      _lodash2['default'].set(this[schemaExts], key, extension);\n      this[schema] = null;\n\n      var initialVals = _lodash2['default'].get(this[pendingSets], key);\n      if (initialVals) {\n        this.set(key, initialVals);\n        (0, _unset2['default'])(this[pendingSets], key);\n      } else {\n        this._commit(this[vals]);\n      }\n    }\n  }, {\n    key: 'removeSchema',\n    value: function removeSchema(key) {\n      if (!_lodash2['default'].has(this[schemaExts], key)) {\n        throw new TypeError('Unknown schema key: ' + key);\n      }\n\n      this[schema] = null;\n      (0, _unset2['default'])(this[schemaExts], key);\n      (0, _unset2['default'])(this[pendingSets], key);\n      (0, _unset2['default'])(this[vals], key);\n    }\n  }, {\n    key: 'resetTo',\n    value: function resetTo(obj) {\n      this._commit(obj);\n    }\n  }, {\n    key: 'set',\n    value: function set(key, value) {\n      // clone and modify the config\n      var config = (0, _deep_clone_with_buffers2['default'])(this[vals]);\n      if (_lodash2['default'].isPlainObject(key)) {\n        config = (0, _override2['default'])(config, key);\n      } else {\n        _lodash2['default'].set(config, key, value);\n      }\n\n      // attempt to validate the config value\n      this._commit(config);\n    }\n  }, {\n    key: '_commit',\n    value: function _commit(newVals) {\n      // resolve the current environment\n      var env = newVals.env;\n      delete newVals.env;\n      if (_lodash2['default'].isObject(env)) env = env.name;\n      if (!env) env = process.env.NODE_ENV || 'production';\n\n      var dev = env === 'development';\n      var prod = env === 'production';\n\n      // pass the environment as context so that it can be refed in config\n      var context = {\n        env: env,\n        prod: prod,\n        dev: dev,\n        notProd: !prod,\n        notDev: !dev,\n        version: _lodash2['default'].get(_utilsPackage_json2['default'], 'version'),\n        buildNum: dev ? Math.pow(2, 53) - 1 : _lodash2['default'].get(_utilsPackage_json2['default'], 'build.number', NaN),\n        buildSha: dev ? 'XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' : _lodash2['default'].get(_utilsPackage_json2['default'], 'build.sha', '')\n      };\n\n      if (!context.dev && !context.prod) {\n        throw new TypeError('Unexpected environment \"' + env + '\", expected one of \"development\" or \"production\"');\n      }\n\n      var results = _joi2['default'].validate(newVals, this.getSchema(), { context: context });\n\n      if (results.error) {\n        throw results.error;\n      }\n\n      this[vals] = results.value;\n    }\n  }, {\n    key: 'get',\n    value: function get(key) {\n      if (!key) {\n        return (0, _deep_clone_with_buffers2['default'])(this[vals]);\n      }\n\n      var value = _lodash2['default'].get(this[vals], key);\n      if (value === undefined) {\n        if (!this.has(key)) {\n          throw new Error('Unknown config key: ' + key);\n        }\n      }\n      return (0, _deep_clone_with_buffers2['default'])(value);\n    }\n  }, {\n    key: 'has',\n    value: function has(key) {\n      function has(key, schema, path) {\n        path = path || [];\n        // Catch the partial paths\n        if (path.join('.') === key) return true;\n        // Only go deep on inner objects with children\n        if (_lodash2['default'].size(schema._inner.children)) {\n          for (var i = 0; i < schema._inner.children.length; i++) {\n            var child = schema._inner.children[i];\n            // If the child is an object recurse through it's children and return\n            // true if there's a match\n            if (child.schema._type === 'object') {\n              if (has(key, child.schema, path.concat([child.key]))) return true;\n              // if the child matches, return true\n            } else if (path.concat([child.key]).join('.') === key) {\n                return true;\n              }\n          }\n        }\n      }\n\n      if (_lodash2['default'].isArray(key)) {\n        // TODO: add .has() support for array keys\n        key = key.join('.');\n      }\n\n      return !!has(key, this.getSchema());\n    }\n  }, {\n    key: 'getSchema',\n    value: function getSchema() {\n      if (!this[schema]) {\n        this[schema] = (function convertToSchema(children) {\n          var schema = _joi2['default'].object().keys({})['default']();\n\n          var _iteratorNormalCompletion = true;\n          var _didIteratorError = false;\n          var _iteratorError = undefined;\n\n          try {\n            for (var _iterator = Object.keys(children)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n              var key = _step.value;\n\n              var child = children[key];\n              var childSchema = _lodash2['default'].isPlainObject(child) ? convertToSchema(child) : child;\n\n              if (!childSchema || !childSchema.isJoi) {\n                throw new TypeError('Unable to convert configuration definition value to Joi schema: ' + childSchema);\n              }\n\n              schema = schema.keys(_defineProperty({}, key, childSchema));\n            }\n          } catch (err) {\n            _didIteratorError = true;\n            _iteratorError = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion && _iterator['return']) {\n                _iterator['return']();\n              }\n            } finally {\n              if (_didIteratorError) {\n                throw _iteratorError;\n              }\n            }\n          }\n\n          return schema;\n        })(this[schemaExts]);\n      }\n\n      return this[schema];\n    }\n  }]);\n\n  return Config;\n})();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9jb25maWcvY29uZmlnLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7d0JBQW9CLFVBQVU7Ozs7bUJBQ2QsS0FBSzs7OztzQkFDUCxRQUFROzs7O3dCQUNELFlBQVk7Ozs7cUJBQ2YsU0FBUzs7OztzQkFDSyxVQUFVOzs7O2lDQUMxQiwwQkFBMEI7Ozs7dUNBQ3hCLDJCQUEyQjs7OztBQUU3QyxJQUFNLE1BQU0sR0FBRyxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUM7QUFDcEMsSUFBTSxVQUFVLEdBQUcsTUFBTSxDQUFDLG1CQUFtQixDQUFDLENBQUM7QUFDL0MsSUFBTSxJQUFJLEdBQUcsTUFBTSxDQUFDLGVBQWUsQ0FBQyxDQUFDO0FBQ3JDLElBQU0sV0FBVyxHQUFHLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDOztBQUUvQyxNQUFNLENBQUMsT0FBTztlQUFTLE1BQU07O1dBQ0gsNkJBQWdCO1VBQWYsUUFBUSx5REFBRyxFQUFFOztBQUNwQyxhQUFPLElBQUksTUFBTSxDQUFDLDBCQUFxQixFQUFFLFFBQVEsQ0FBQyxDQUFDO0tBQ3BEOzs7QUFFVSxXQUxVLE1BQU0sQ0FLZixhQUFhLEVBQUUsZUFBZSxFQUFFOzBCQUx2QixNQUFNOztBQU16QixRQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUN2QyxRQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNqQyxRQUFJLENBQUMsV0FBVyxDQUFDLEdBQUcsb0JBQUUsS0FBSyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsZUFBZSxJQUFJLEVBQUUsQ0FBQyxDQUFDOztBQUV4RSxRQUFJLGFBQWEsRUFBRSxJQUFJLENBQUMsWUFBWSxDQUFDLGFBQWEsQ0FBQyxDQUFDO0dBQ3JEOztl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Q0FBQyxVQUFVLENBQUMsQ0FBQyxBQUFDLENBQUM7T0FDdEI7O0FBRUQsYUFBTyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7S0FDckI7OztTQXpLb0IsTUFBTTtJQTBLNUIsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9zZXJ2ZXIvY29uZmlnL2NvbmZpZy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQcm9taXNlIGZyb20gJ2JsdWViaXJkJztcbmltcG9ydCBKb2kgZnJvbSAnam9pJztcbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgb3ZlcnJpZGUgZnJvbSAnLi9vdmVycmlkZSc7XG5pbXBvcnQgdW5zZXQgZnJvbSAnLi91bnNldCc7XG5pbXBvcnQgY3JlYXRlRGVmYXVsdFNjaGVtYSBmcm9tICcuL3NjaGVtYSc7XG5pbXBvcnQgcGtnIGZyb20gJy4uLy4uL3V0aWxzL3BhY2thZ2VfanNvbic7XG5pbXBvcnQgY2xvbmUgZnJvbSAnLi9kZWVwX2Nsb25lX3dpdGhfYnVmZmVycyc7XG5cbmNvbnN0IHNjaGVtYSA9IFN5bWJvbCgnSm9pIFNjaGVtYScpO1xuY29uc3Qgc2NoZW1hRXh0cyA9IFN5bWJvbCgnU2NoZW1hIEV4dGVuc2lvbnMnKTtcbmNvbnN0IHZhbHMgPSBTeW1ib2woJ2NvbmZpZyB2YWx1ZXMnKTtcbmNvbnN0IHBlbmRpbmdTZXRzID0gU3ltYm9sKCdQZW5kaW5nIFNldHRpbmdzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgQ29uZmlnIHtcbiAgc3RhdGljIHdpdGhEZWZhdWx0U2NoZW1hKHNldHRpbmdzID0ge30pIHtcbiAgICByZXR1cm4gbmV3IENvbmZpZyhjcmVhdGVEZWZhdWx0U2NoZW1hKCksIHNldHRpbmdzKTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKGluaXRpYWxTY2hlbWEsIGluaXRpYWxTZXR0aW5ncykge1xuICAgIHRoaXNbc2NoZW1hRXh0c10gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRoaXNbdmFsc10gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRoaXNbcGVuZGluZ1NldHNdID0gXy5tZXJnZShPYmplY3QuY3JlYXRlKG51bGwpLCBpbml0aWFsU2V0dGluZ3MgfHwge30pO1xuXG4gICAgaWYgKGluaXRpYWxTY2hlbWEpIHRoaXMuZXh0ZW5kU2NoZW1hKGluaXRpYWxTY2hlbWEpO1xuICB9XG5cbiAgZ2V0UGVuZGluZ1NldHMoKSB7XG4gICAgcmV0dXJuIG5ldyBNYXAoXy5wYWlycyh0aGlzW3BlbmRpbmdTZXRzXSkpO1xuICB9XG5cbiAgZXh0ZW5kU2NoZW1hKGtleSwgZXh0ZW5zaW9uKSB7XG4gICAgaWYgKGtleSAmJiBrZXkuaXNKb2kpIHtcbiAgICAgIHJldHVybiBfLmVhY2goa2V5Ll9pbm5lci5jaGlsZHJlbiwgKGNoaWxkKSA9PiB7XG4gICAgICAgIHRoaXMuZXh0ZW5kU2NoZW1hKGNoaWxkLmtleSwgY2hpbGQuc2NoZW1hKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmhhcyhrZXkpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYENvbmZpZyBzY2hlbWEgYWxyZWFkeSBoYXMga2V5OiAke2tleX1gKTtcbiAgICB9XG5cbiAgICBfLnNldCh0aGlzW3NjaGVtYUV4dHNdLCBrZXksIGV4dGVuc2lvbik7XG4gICAgdGhpc1tzY2hlbWFdID0gbnVsbDtcblxuICAgIGxldCBpbml0aWFsVmFscyA9IF8uZ2V0KHRoaXNbcGVuZGluZ1NldHNdLCBrZXkpO1xuICAgIGlmIChpbml0aWFsVmFscykge1xuICAgICAgdGhpcy5zZXQoa2V5LCBpbml0aWFsVmFscyk7XG4gICAgICB1bnNldCh0aGlzW3BlbmRpbmdTZXRzXSwga2V5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fY29tbWl0KHRoaXNbdmFsc10pO1xuICAgIH1cbiAgfVxuXG4gIHJlbW92ZVNjaGVtYShrZXkpIHtcbiAgICBpZiAoIV8uaGFzKHRoaXNbc2NoZW1hRXh0c10sIGtleSkpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYFVua25vd24gc2NoZW1hIGtleTogJHtrZXl9YCk7XG4gICAgfVxuXG4gICAgdGhpc1tzY2hlbWFdID0gbnVsbDtcbiAgICB1bnNldCh0aGlzW3NjaGVtYUV4dHNdLCBrZXkpO1xuICAgIHVuc2V0KHRoaXNbcGVuZGluZ1NldHNdLCBrZXkpO1xuICAgIHVuc2V0KHRoaXNbdmFsc10sIGtleSk7XG4gIH1cblxuICByZXNldFRvKG9iaikge1xuICAgIHRoaXMuX2NvbW1pdChvYmopO1xuICB9XG5cbiAgc2V0KGtleSwgdmFsdWUpIHtcbiAgICAvLyBjbG9uZSBhbmQgbW9kaWZ5IHRoZSBjb25maWdcbiAgICBsZXQgY29uZmlnID0gY2xvbmUodGhpc1t2YWxzXSk7XG4gICAgaWYgKF8uaXNQbGFpbk9iamVjdChrZXkpKSB7XG4gICAgICBjb25maWcgPSBvdmVycmlkZShjb25maWcsIGtleSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIF8uc2V0KGNvbmZpZywga2V5LCB2YWx1ZSk7XG4gICAgfVxuXG4gICAgLy8gYXR0ZW1wdCB0byB2YWxpZGF0ZSB0aGUgY29uZmlnIHZhbHVlXG4gICAgdGhpcy5fY29tbWl0KGNvbmZpZyk7XG4gIH1cblxuICBfY29tbWl0KG5ld1ZhbHMpIHtcbiAgICAvLyByZXNvbHZlIHRoZSBjdXJyZW50IGVudmlyb25tZW50XG4gICAgbGV0IGVudiA9IG5ld1ZhbHMuZW52O1xuICAgIGRlbGV0ZSBuZXdWYWxzLmVudjtcbiAgICBpZiAoXy5pc09iamVjdChlbnYpKSBlbnYgPSBlbnYubmFtZTtcbiAgICBpZiAoIWVudikgZW52ID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgfHwgJ3Byb2R1Y3Rpb24nO1xuXG4gICAgbGV0IGRldiA9IGVudiA9PT0gJ2RldmVsb3BtZW50JztcbiAgICBsZXQgcHJvZCA9IGVudiA9PT0gJ3Byb2R1Y3Rpb24nO1xuXG4gICAgLy8gcGFzcyB0aGUgZW52aXJvbm1lbnQgYXMgY29udGV4dCBzbyB0aGF0IGl0IGNhbiBiZSByZWZlZCBpbiBjb25maWdcbiAgICBsZXQgY29udGV4dCA9IHtcbiAgICAgIGVudjogZW52LFxuICAgICAgcHJvZDogcHJvZCxcbiAgICAgIGRldjogZGV2LFxuICAgICAgbm90UHJvZDogIXByb2QsXG4gICAgICBub3REZXY6ICFkZXYsXG4gICAgICB2ZXJzaW9uOiBfLmdldChwa2csICd2ZXJzaW9uJyksXG4gICAgICBidWlsZE51bTogZGV2ID8gTWF0aC5wb3coMiwgNTMpIC0gMSA6IF8uZ2V0KHBrZywgJ2J1aWxkLm51bWJlcicsIE5hTiksXG4gICAgICBidWlsZFNoYTogZGV2ID8gJ1hYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFgnIDogXy5nZXQocGtnLCAnYnVpbGQuc2hhJywgJycpXG4gICAgfTtcblxuICAgIGlmICghY29udGV4dC5kZXYgJiYgIWNvbnRleHQucHJvZCkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICAgYFVuZXhwZWN0ZWQgZW52aXJvbm1lbnQgXCIke2Vudn1cIiwgZXhwZWN0ZWQgb25lIG9mIFwiZGV2ZWxvcG1lbnRcIiBvciBcInByb2R1Y3Rpb25cImBcbiAgICAgICk7XG4gICAgfVxuXG4gICAgbGV0IHJlc3VsdHMgPSBKb2kudmFsaWRhdGUobmV3VmFscywgdGhpcy5nZXRTY2hlbWEoKSwgeyBjb250ZXh0IH0pO1xuXG4gICAgaWYgKHJlc3VsdHMuZXJyb3IpIHtcbiAgICAgIHRocm93IHJlc3VsdHMuZXJyb3I7XG4gICAgfVxuXG4gICAgdGhpc1t2YWxzXSA9IHJlc3VsdHMudmFsdWU7XG4gIH1cblxuICBnZXQoa2V5KSB7XG4gICAgaWYgKCFrZXkpIHtcbiAgICAgIHJldHVybiBjbG9uZSh0aGlzW3ZhbHNdKTtcbiAgICB9XG5cbiAgICBsZXQgdmFsdWUgPSBfLmdldCh0aGlzW3ZhbHNdLCBrZXkpO1xuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAoIXRoaXMuaGFzKGtleSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmtub3duIGNvbmZpZyBrZXk6ICcgKyBrZXkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY2xvbmUodmFsdWUpO1xuICB9XG5cbiAgaGFzKGtleSkge1xuICAgIGZ1bmN0aW9uIGhhcyhrZXksIHNjaGVtYSwgcGF0aCkge1xuICAgICAgcGF0aCA9IHBhdGggfHwgW107XG4gICAgICAvLyBDYXRjaCB0aGUgcGFydGlhbCBwYXRoc1xuICAgICAgaWYgKHBhdGguam9pbignLicpID09PSBrZXkpIHJldHVybiB0cnVlO1xuICAgICAgLy8gT25seSBnbyBkZWVwIG9uIGlubmVyIG9iamVjdHMgd2l0aCBjaGlsZHJlblxuICAgICAgaWYgKF8uc2l6ZShzY2hlbWEuX2lubmVyLmNoaWxkcmVuKSkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNjaGVtYS5faW5uZXIuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBsZXQgY2hpbGQgPSBzY2hlbWEuX2lubmVyLmNoaWxkcmVuW2ldO1xuICAgICAgICAgIC8vIElmIHRoZSBjaGlsZCBpcyBhbiBvYmplY3QgcmVjdXJzZSB0aHJvdWdoIGl0J3MgY2hpbGRyZW4gYW5kIHJldHVyblxuICAgICAgICAgIC8vIHRydWUgaWYgdGhlcmUncyBhIG1hdGNoXG4gICAgICAgICAgaWYgKGNoaWxkLnNjaGVtYS5fdHlwZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGlmIChoYXMoa2V5LCBjaGlsZC5zY2hlbWEsIHBhdGguY29uY2F0KFtjaGlsZC5rZXldKSkpIHJldHVybiB0cnVlO1xuICAgICAgICAgIC8vIGlmIHRoZSBjaGlsZCBtYXRjaGVzLCByZXR1cm4gdHJ1ZVxuICAgICAgICAgIH0gZWxzZSBpZiAocGF0aC5jb25jYXQoW2NoaWxkLmtleV0pLmpvaW4oJy4nKSA9PT0ga2V5KSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoXy5pc0FycmF5KGtleSkpIHtcbiAgICAgIC8vIFRPRE86IGFkZCAuaGFzKCkgc3VwcG9ydCBmb3IgYXJyYXkga2V5c1xuICAgICAga2V5ID0ga2V5LmpvaW4oJy4nKTtcbiAgICB9XG5cbiAgICByZXR1cm4gISFoYXMoa2V5LCB0aGlzLmdldFNjaGVtYSgpKTtcbiAgfVxuXG4gIGdldFNjaGVtYSgpIHtcbiAgICBpZiAoIXRoaXNbc2NoZW1hXSkge1xuICAgICAgdGhpc1tzY2hlbWFdID0gKGZ1bmN0aW9uIGNvbnZlcnRUb1NjaGVtYShjaGlsZHJlbikge1xuICAgICAgICBsZXQgc2NoZW1hID0gSm9pLm9iamVjdCgpLmtleXMoe30pLmRlZmF1bHQoKTtcblxuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhjaGlsZHJlbikpIHtcbiAgICAgICAgICBjb25zdCBjaGlsZCA9IGNoaWxkcmVuW2tleV07XG4gICAgICAgICAgY29uc3QgY2hpbGRTY2hlbWEgPSBfLmlzUGxhaW5PYmplY3QoY2hpbGQpID8gY29udmVydFRvU2NoZW1hKGNoaWxkKSA6IGNoaWxkO1xuXG4gICAgICAgICAgaWYgKCFjaGlsZFNjaGVtYSB8fCAhY2hpbGRTY2hlbWEuaXNKb2kpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1VuYWJsZSB0byBjb252ZXJ0IGNvbmZpZ3VyYXRpb24gZGVmaW5pdGlvbiB2YWx1ZSB0byBKb2kgc2NoZW1hOiAnICsgY2hpbGRTY2hlbWEpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHNjaGVtYSA9IHNjaGVtYS5rZXlzKHsgW2tleV06IGNoaWxkU2NoZW1hIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNjaGVtYTtcbiAgICAgIH0odGhpc1tzY2hlbWFFeHRzXSkpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzW3NjaGVtYV07XG4gIH1cbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/config/config.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/src/server/config/config.js",
      "sourcesContent": [
        "import Promise from 'bluebird';\nimport Joi from 'joi';\nimport _ from 'lodash';\nimport override from './override';\nimport unset from './unset';\nimport createDefaultSchema from './schema';\nimport pkg from '../../utils/package_json';\nimport clone from './deep_clone_with_buffers';\n\nconst schema = Symbol('Joi Schema');\nconst schemaExts = Symbol('Schema Extensions');\nconst vals = Symbol('config values');\nconst pendingSets = Symbol('Pending Settings');\n\nmodule.exports = class Config {\n  static withDefaultSchema(settings = {}) {\n    return new Config(createDefaultSchema(), settings);\n  }\n\n  constructor(initialSchema, initialSettings) {\n    this[schemaExts] = Object.create(null);\n    this[vals] = Object.create(null);\n    this[pendingSets] = _.merge(Object.create(null), initialSettings || {});\n\n    if (initialSchema) this.extendSchema(initialSchema);\n  }\n\n  getPendingSets() {\n    return new Map(_.pairs(this[pendingSets]));\n  }\n\n  extendSchema(key, extension) {\n    if (key && key.isJoi) {\n      return _.each(key._inner.children, (child) => {\n        this.extendSchema(child.key, child.schema);\n      });\n    }\n\n    if (this.has(key)) {\n      throw new Error(`Config schema already has key: ${key}`);\n    }\n\n    _.set(this[schemaExts], key, extension);\n    this[schema] = null;\n\n    let initialVals = _.get(this[pendingSets], key);\n    if (initialVals) {\n      this.set(key, initialVals);\n      unset(this[pendingSets], key);\n    } else {\n      this._commit(this[vals]);\n    }\n  }\n\n  removeSchema(key) {\n    if (!_.has(this[schemaExts], key)) {\n      throw new TypeError(`Unknown schema key: ${key}`);\n    }\n\n    this[schema] = null;\n    unset(this[schemaExts], key);\n    unset(this[pendingSets], key);\n    unset(this[vals], key);\n  }\n\n  resetTo(obj) {\n    this._commit(obj);\n  }\n\n  set(key, value) {\n    // clone and modify the config\n    let config = clone(this[vals]);\n    if (_.isPlainObject(key)) {\n      config = override(config, key);\n    } else {\n      _.set(config, key, value);\n    }\n\n    // attempt to validate the config value\n    this._commit(config);\n  }\n\n  _commit(newVals) {\n    // resolve the current environment\n    let env = newVals.env;\n    delete newVals.env;\n    if (_.isObject(env)) env = env.name;\n    if (!env) env = process.env.NODE_ENV || 'production';\n\n    let dev = env === 'development';\n    let prod = env === 'production';\n\n    // pass the environment as context so that it can be refed in config\n    let context = {\n      env: env,\n      prod: prod,\n      dev: dev,\n      notProd: !prod,\n      notDev: !dev,\n      version: _.get(pkg, 'version'),\n      buildNum: dev ? Math.pow(2, 53) - 1 : _.get(pkg, 'build.number', NaN),\n      buildSha: dev ? 'XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' : _.get(pkg, 'build.sha', '')\n    };\n\n    if (!context.dev && !context.prod) {\n      throw new TypeError(\n        `Unexpected environment \"${env}\", expected one of \"development\" or \"production\"`\n      );\n    }\n\n    let results = Joi.validate(newVals, this.getSchema(), { context });\n\n    if (results.error) {\n      throw results.error;\n    }\n\n    this[vals] = results.value;\n  }\n\n  get(key) {\n    if (!key) {\n      return clone(this[vals]);\n    }\n\n    let value = _.get(this[vals], key);\n    if (value === undefined) {\n      if (!this.has(key)) {\n        throw new Error('Unknown config key: ' + key);\n      }\n    }\n    return clone(value);\n  }\n\n  has(key) {\n    function has(key, schema, path) {\n      path = path || [];\n      // Catch the partial paths\n      if (path.join('.') === key) return true;\n      // Only go deep on inner objects with children\n      if (_.size(schema._inner.children)) {\n        for (let i = 0; i < schema._inner.children.length; i++) {\n          let child = schema._inner.children[i];\n          // If the child is an object recurse through it's children and return\n          // true if there's a match\n          if (child.schema._type === 'object') {\n            if (has(key, child.schema, path.concat([child.key]))) return true;\n          // if the child matches, return true\n          } else if (path.concat([child.key]).join('.') === key) {\n            return true;\n          }\n        }\n      }\n    }\n\n    if (_.isArray(key)) {\n      // TODO: add .has() support for array keys\n      key = key.join('.');\n    }\n\n    return !!has(key, this.getSchema());\n  }\n\n  getSchema() {\n    if (!this[schema]) {\n      this[schema] = (function convertToSchema(children) {\n        let schema = Joi.object().keys({}).default();\n\n        for (const key of Object.keys(children)) {\n          const child = children[key];\n          const childSchema = _.isPlainObject(child) ? convertToSchema(child) : child;\n\n          if (!childSchema || !childSchema.isJoi) {\n            throw new TypeError('Unable to convert configuration definition value to Joi schema: ' + childSchema);\n          }\n\n          schema = schema.keys({ [key]: childSchema });\n        }\n\n        return schema;\n      }(this[schemaExts]));\n    }\n\n    return this[schema];\n  }\n};\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/config/override.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "./flatten_with",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "flattenWith"
              }
            ]
          },
          {
            "source": "./explode_by",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "explodeBy"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _flatten_with = require('./flatten_with');\n\nvar _flatten_with2 = _interopRequireDefault(_flatten_with);\n\nvar _explode_by = require('./explode_by');\n\nvar _explode_by2 = _interopRequireDefault(_explode_by);\n\nmodule.exports = function (target, source) {\n  var _target = (0, _flatten_with2['default'])('.', target);\n  var _source = (0, _flatten_with2['default'])('.', source);\n  return (0, _explode_by2['default'])('.', _lodash2['default'].defaults(_source, _target));\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9jb25maWcvb3ZlcnJpZGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztzQkFBYyxRQUFROzs7OzRCQUNFLGdCQUFnQjs7OzswQkFDbEIsY0FBYzs7OztBQUVwQyxNQUFNLENBQUMsT0FBTyxHQUFHLFVBQVUsTUFBTSxFQUFFLE1BQU0sRUFBRTtBQUN6QyxNQUFJLE9BQU8sR0FBRywrQkFBWSxHQUFHLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFDdkMsTUFBSSxPQUFPLEdBQUcsK0JBQVksR0FBRyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQ3ZDLFNBQU8sNkJBQVUsR0FBRyxFQUFFLG9CQUFFLFFBQVEsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQztDQUNyRCxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9jb25maWcvb3ZlcnJpZGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IGZsYXR0ZW5XaXRoIGZyb20gJy4vZmxhdHRlbl93aXRoJztcbmltcG9ydCBleHBsb2RlQnkgZnJvbSAnLi9leHBsb2RlX2J5JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodGFyZ2V0LCBzb3VyY2UpIHtcbiAgbGV0IF90YXJnZXQgPSBmbGF0dGVuV2l0aCgnLicsIHRhcmdldCk7XG4gIGxldCBfc291cmNlID0gZmxhdHRlbldpdGgoJy4nLCBzb3VyY2UpO1xuICByZXR1cm4gZXhwbG9kZUJ5KCcuJywgXy5kZWZhdWx0cyhfc291cmNlLCBfdGFyZ2V0KSk7XG59O1xuXG5cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/config/override.js"
      ],
      "names": [],
      "mappings": ";;;;sBAAc,QAAQ;;;;4BACE,gBAAgB;;;;0BAClB,cAAc;;;;AAEpC,MAAM,CAAC,OAAO,GAAG,UAAU,MAAM,EAAE,MAAM,EAAE;AACzC,MAAI,OAAO,GAAG,+BAAY,GAAG,EAAE,MAAM,CAAC,CAAC;AACvC,MAAI,OAAO,GAAG,+BAAY,GAAG,EAAE,MAAM,CAAC,CAAC;AACvC,SAAO,6BAAU,GAAG,EAAE,oBAAE,QAAQ,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC,CAAC;CACrD,CAAC",
      "file": "/home/vio/v3metrics/src/server/config/override.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport flattenWith from './flatten_with';\nimport explodeBy from './explode_by';\n\nmodule.exports = function (target, source) {\n  let _target = flattenWith('.', target);\n  let _source = flattenWith('.', source);\n  return explodeBy('.', _.defaults(_source, _target));\n};\n\n\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/config/flatten_with.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nmodule.exports = function (dot, nestedObj, flattenArrays) {\n  var key = undefined; // original key\n  var stack = []; // track key stack\n  var flatObj = {};\n  (function flattenObj(obj) {\n    _lodash2['default'].keys(obj).forEach(function (key) {\n      stack.push(key);\n      if (!flattenArrays && _lodash2['default'].isArray(obj[key])) flatObj[stack.join(dot)] = obj[key];else if (_lodash2['default'].isObject(obj[key])) flattenObj(obj[key]);else flatObj[stack.join(dot)] = obj[key];\n      stack.pop();\n    });\n  })(nestedObj);\n  return flatObj;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9jb25maWcvZmxhdHRlbl93aXRoLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7c0JBQWMsUUFBUTs7OztBQUN0QixNQUFNLENBQUMsT0FBTyxHQUFHLFVBQVUsR0FBRyxFQUFFLFNBQVMsRUFBRSxhQUFhLEVBQUU7QUFDeEQsTUFBSSxHQUFHLFlBQUEsQ0FBQztBQUNSLE1BQUksS0FBSyxHQUFHLEVBQUUsQ0FBQztBQUNmLE1BQUksT0FBTyxHQUFHLEVBQUUsQ0FBQztBQUNqQixBQUFDLEdBQUEsU0FBUyxVQUFVLENBQUMsR0FBRyxFQUFFO0FBQ3hCLHdCQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUMsVUFBVSxHQUFHLEVBQUU7QUFDakMsV0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNoQixVQUFJLENBQUMsYUFBYSxJQUFJLG9CQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxPQUFPLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUMxRSxJQUFJLG9CQUFFLFFBQVEsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxVQUFVLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsS0FDL0MsT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDekMsV0FBSyxDQUFDLEdBQUcsRUFBRSxDQUFDO0tBQ2IsQ0FBQyxDQUFDO0dBQ0osQ0FBQSxDQUFDLFNBQVMsQ0FBQyxDQUFFO0FBQ2QsU0FBTyxPQUFPLENBQUM7Q0FDaEIsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9zZXJ2ZXIvY29uZmlnL2ZsYXR0ZW5fd2l0aC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChkb3QsIG5lc3RlZE9iaiwgZmxhdHRlbkFycmF5cykge1xuICBsZXQga2V5OyAvLyBvcmlnaW5hbCBrZXlcbiAgbGV0IHN0YWNrID0gW107IC8vIHRyYWNrIGtleSBzdGFja1xuICBsZXQgZmxhdE9iaiA9IHt9O1xuICAoZnVuY3Rpb24gZmxhdHRlbk9iaihvYmopIHtcbiAgICBfLmtleXMob2JqKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIHN0YWNrLnB1c2goa2V5KTtcbiAgICAgIGlmICghZmxhdHRlbkFycmF5cyAmJiBfLmlzQXJyYXkob2JqW2tleV0pKSBmbGF0T2JqW3N0YWNrLmpvaW4oZG90KV0gPSBvYmpba2V5XTtcbiAgICAgIGVsc2UgaWYgKF8uaXNPYmplY3Qob2JqW2tleV0pKSBmbGF0dGVuT2JqKG9ialtrZXldKTtcbiAgICAgIGVsc2UgZmxhdE9ialtzdGFjay5qb2luKGRvdCldID0gb2JqW2tleV07XG4gICAgICBzdGFjay5wb3AoKTtcbiAgICB9KTtcbiAgfShuZXN0ZWRPYmopKTtcbiAgcmV0dXJuIGZsYXRPYmo7XG59O1xuXG5cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/config/flatten_with.js"
      ],
      "names": [],
      "mappings": ";;;;sBAAc,QAAQ;;;;AACtB,MAAM,CAAC,OAAO,GAAG,UAAU,GAAG,EAAE,SAAS,EAAE,aAAa,EAAE;AACxD,MAAI,GAAG,YAAA,CAAC;AACR,MAAI,KAAK,GAAG,EAAE,CAAC;AACf,MAAI,OAAO,GAAG,EAAE,CAAC;AACjB,AAAC,GAAA,SAAS,UAAU,CAAC,GAAG,EAAE;AACxB,wBAAE,IAAI,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,UAAU,GAAG,EAAE;AACjC,WAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AAChB,UAAI,CAAC,aAAa,IAAI,oBAAE,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC,KAC1E,IAAI,oBAAE,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,UAAU,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,KAC/C,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC;AACzC,WAAK,CAAC,GAAG,EAAE,CAAC;KACb,CAAC,CAAC;GACJ,CAAA,CAAC,SAAS,CAAC,CAAE;AACd,SAAO,OAAO,CAAC;CAChB,CAAC",
      "file": "/home/vio/v3metrics/src/server/config/flatten_with.js",
      "sourcesContent": [
        "import _ from 'lodash';\nmodule.exports = function (dot, nestedObj, flattenArrays) {\n  let key; // original key\n  let stack = []; // track key stack\n  let flatObj = {};\n  (function flattenObj(obj) {\n    _.keys(obj).forEach(function (key) {\n      stack.push(key);\n      if (!flattenArrays && _.isArray(obj[key])) flatObj[stack.join(dot)] = obj[key];\n      else if (_.isObject(obj[key])) flattenObj(obj[key]);\n      else flatObj[stack.join(dot)] = obj[key];\n      stack.pop();\n    });\n  }(nestedObj));\n  return flatObj;\n};\n\n\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/config/explode_by.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nmodule.exports = function (dot, flatObject) {\n  var fullObject = {};\n  _lodash2['default'].each(flatObject, function (value, key) {\n    var keys = key.split(dot);\n    (function walk(memo, keys, value) {\n      var _key = keys.shift();\n      if (keys.length === 0) {\n        memo[_key] = value;\n      } else {\n        if (!memo[_key]) memo[_key] = {};\n        walk(memo[_key], keys, value);\n      }\n    })(fullObject, keys, value);\n  });\n  return fullObject;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9jb25maWcvZXhwbG9kZV9ieS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O3NCQUFjLFFBQVE7Ozs7QUFDdEIsTUFBTSxDQUFDLE9BQU8sR0FBRyxVQUFVLEdBQUcsRUFBRSxVQUFVLEVBQUU7QUFDMUMsTUFBSSxVQUFVLEdBQUcsRUFBRSxDQUFDO0FBQ3BCLHNCQUFFLElBQUksQ0FBQyxVQUFVLEVBQUUsVUFBVSxLQUFLLEVBQUUsR0FBRyxFQUFFO0FBQ3ZDLFFBQUksSUFBSSxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDMUIsQUFBQyxLQUFBLFNBQVMsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFO0FBQ2hDLFVBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztBQUN4QixVQUFJLElBQUksQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFO0FBQ3JCLFlBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxLQUFLLENBQUM7T0FDcEIsTUFBTTtBQUNMLFlBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztBQUNqQyxZQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQztPQUMvQjtLQUNGLENBQUEsQ0FBQyxVQUFVLEVBQUUsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFFO0dBQzdCLENBQUMsQ0FBQztBQUNILFNBQU8sVUFBVSxDQUFDO0NBQ25CLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvc2VydmVyL2NvbmZpZy9leHBsb2RlX2J5LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGRvdCwgZmxhdE9iamVjdCkge1xuICBsZXQgZnVsbE9iamVjdCA9IHt9O1xuICBfLmVhY2goZmxhdE9iamVjdCwgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcbiAgICBsZXQga2V5cyA9IGtleS5zcGxpdChkb3QpO1xuICAgIChmdW5jdGlvbiB3YWxrKG1lbW8sIGtleXMsIHZhbHVlKSB7XG4gICAgICBsZXQgX2tleSA9IGtleXMuc2hpZnQoKTtcbiAgICAgIGlmIChrZXlzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBtZW1vW19rZXldID0gdmFsdWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIW1lbW9bX2tleV0pIG1lbW9bX2tleV0gPSB7fTtcbiAgICAgICAgd2FsayhtZW1vW19rZXldLCBrZXlzLCB2YWx1ZSk7XG4gICAgICB9XG4gICAgfShmdWxsT2JqZWN0LCBrZXlzLCB2YWx1ZSkpO1xuICB9KTtcbiAgcmV0dXJuIGZ1bGxPYmplY3Q7XG59O1xuXG5cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/config/explode_by.js"
      ],
      "names": [],
      "mappings": ";;;;sBAAc,QAAQ;;;;AACtB,MAAM,CAAC,OAAO,GAAG,UAAU,GAAG,EAAE,UAAU,EAAE;AAC1C,MAAI,UAAU,GAAG,EAAE,CAAC;AACpB,sBAAE,IAAI,CAAC,UAAU,EAAE,UAAU,KAAK,EAAE,GAAG,EAAE;AACvC,QAAI,IAAI,GAAG,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AAC1B,AAAC,KAAA,SAAS,IAAI,CAAC,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE;AAChC,UAAI,IAAI,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC;AACxB,UAAI,IAAI,CAAC,MAAM,KAAK,CAAC,EAAE;AACrB,YAAI,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC;OACpB,MAAM;AACL,YAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC;AACjC,YAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;OAC/B;KACF,CAAA,CAAC,UAAU,EAAE,IAAI,EAAE,KAAK,CAAC,CAAE;GAC7B,CAAC,CAAC;AACH,SAAO,UAAU,CAAC;CACnB,CAAC",
      "file": "/home/vio/v3metrics/src/server/config/explode_by.js",
      "sourcesContent": [
        "import _ from 'lodash';\nmodule.exports = function (dot, flatObject) {\n  let fullObject = {};\n  _.each(flatObject, function (value, key) {\n    let keys = key.split(dot);\n    (function walk(memo, keys, value) {\n      let _key = keys.shift();\n      if (keys.length === 0) {\n        memo[_key] = value;\n      } else {\n        if (!memo[_key]) memo[_key] = {};\n        walk(memo[_key], keys, value);\n      }\n    }(fullObject, keys, value));\n  });\n  return fullObject;\n};\n\n\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/config/unset.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "lodash/internal/toPath",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "toPath"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _lodashInternalToPath = require('lodash/internal/toPath');\n\nvar _lodashInternalToPath2 = _interopRequireDefault(_lodashInternalToPath);\n\nmodule.exports = function unset(object, rawPath) {\n  if (!object) return;\n  var path = (0, _lodashInternalToPath2['default'])(rawPath);\n\n  switch (path.length) {\n    case 0:\n      return;\n\n    case 1:\n      delete object[rawPath];\n      break;\n\n    default:\n      var leaf = path.pop();\n      var parentPath = path.slice();\n      var parent = _lodash2['default'].get(object, parentPath);\n      unset(parent, leaf);\n      if (!_lodash2['default'].size(parent)) {\n        unset(object, parentPath);\n      }\n      break;\n  }\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9jb25maWcvdW5zZXQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztzQkFBYyxRQUFROzs7O29DQUNILHdCQUF3Qjs7OztBQUUzQyxNQUFNLENBQUMsT0FBTyxHQUFHLFNBQVMsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUU7QUFDL0MsTUFBSSxDQUFDLE1BQU0sRUFBRSxPQUFPO0FBQ3BCLE1BQU0sSUFBSSxHQUFHLHVDQUFPLE9BQU8sQ0FBQyxDQUFDOztBQUU3QixVQUFRLElBQUksQ0FBQyxNQUFNO0FBQ2pCLFNBQUssQ0FBQztBQUNKLGFBQU87O0FBQUEsQUFFVCxTQUFLLENBQUM7QUFDSixhQUFPLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUN2QixZQUFNOztBQUFBLEFBRVI7QUFDRSxVQUFNLElBQUksR0FBRyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7QUFDeEIsVUFBTSxVQUFVLEdBQUcsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO0FBQ2hDLFVBQU0sTUFBTSxHQUFHLG9CQUFFLEdBQUcsQ0FBQyxNQUFNLEVBQUUsVUFBVSxDQUFDLENBQUM7QUFDekMsV0FBSyxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQztBQUNwQixVQUFJLENBQUMsb0JBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFO0FBQ25CLGFBQUssQ0FBQyxNQUFNLEVBQUUsVUFBVSxDQUFDLENBQUM7T0FDM0I7QUFDRCxZQUFNO0FBQUEsR0FDVDtDQUNGLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvc2VydmVyL2NvbmZpZy91bnNldC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgdG9QYXRoIGZyb20gJ2xvZGFzaC9pbnRlcm5hbC90b1BhdGgnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHVuc2V0KG9iamVjdCwgcmF3UGF0aCkge1xuICBpZiAoIW9iamVjdCkgcmV0dXJuO1xuICBjb25zdCBwYXRoID0gdG9QYXRoKHJhd1BhdGgpO1xuXG4gIHN3aXRjaCAocGF0aC5sZW5ndGgpIHtcbiAgICBjYXNlIDA6XG4gICAgICByZXR1cm47XG5cbiAgICBjYXNlIDE6XG4gICAgICBkZWxldGUgb2JqZWN0W3Jhd1BhdGhdO1xuICAgICAgYnJlYWs7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgY29uc3QgbGVhZiA9IHBhdGgucG9wKCk7XG4gICAgICBjb25zdCBwYXJlbnRQYXRoID0gcGF0aC5zbGljZSgpO1xuICAgICAgY29uc3QgcGFyZW50ID0gXy5nZXQob2JqZWN0LCBwYXJlbnRQYXRoKTtcbiAgICAgIHVuc2V0KHBhcmVudCwgbGVhZik7XG4gICAgICBpZiAoIV8uc2l6ZShwYXJlbnQpKSB7XG4gICAgICAgIHVuc2V0KG9iamVjdCwgcGFyZW50UGF0aCk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgfVxufTsiXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/config/unset.js"
      ],
      "names": [],
      "mappings": ";;;;sBAAc,QAAQ;;;;oCACH,wBAAwB;;;;AAE3C,MAAM,CAAC,OAAO,GAAG,SAAS,KAAK,CAAC,MAAM,EAAE,OAAO,EAAE;AAC/C,MAAI,CAAC,MAAM,EAAE,OAAO;AACpB,MAAM,IAAI,GAAG,uCAAO,OAAO,CAAC,CAAC;;AAE7B,UAAQ,IAAI,CAAC,MAAM;AACjB,SAAK,CAAC;AACJ,aAAO;;AAAA,AAET,SAAK,CAAC;AACJ,aAAO,MAAM,CAAC,OAAO,CAAC,CAAC;AACvB,YAAM;;AAAA,AAER;AACE,UAAM,IAAI,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;AACxB,UAAM,UAAU,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC;AAChC,UAAM,MAAM,GAAG,oBAAE,GAAG,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC;AACzC,WAAK,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;AACpB,UAAI,CAAC,oBAAE,IAAI,CAAC,MAAM,CAAC,EAAE;AACnB,aAAK,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC;OAC3B;AACD,YAAM;AAAA,GACT;CACF,CAAC",
      "file": "/home/vio/v3metrics/src/server/config/unset.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport toPath from 'lodash/internal/toPath';\n\nmodule.exports = function unset(object, rawPath) {\n  if (!object) return;\n  const path = toPath(rawPath);\n\n  switch (path.length) {\n    case 0:\n      return;\n\n    case 1:\n      delete object[rawPath];\n      break;\n\n    default:\n      const leaf = path.pop();\n      const parentPath = path.slice();\n      const parent = _.get(object, parentPath);\n      unset(parent, leaf);\n      if (!_.size(parent)) {\n        unset(object, parentPath);\n      }\n      break;\n  }\n};"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/config/schema.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "joi",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Joi"
              }
            ]
          },
          {
            "source": "fs",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "fs"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "path"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "get"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "get",
                "local": "get"
              }
            ]
          },
          {
            "source": "crypto",
            "imported": [
              "randomBytes"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "randomBytes",
                "local": "randomBytes"
              }
            ]
          },
          {
            "source": "os",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "os"
              }
            ]
          },
          {
            "source": "../../utils",
            "imported": [
              "fromRoot"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "fromRoot",
                "local": "fromRoot"
              }
            ]
          },
          {
            "source": "../path",
            "imported": [
              "getData"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "getData",
                "local": "getData"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _joi = require('joi');\n\nvar _joi2 = _interopRequireDefault(_joi);\n\nvar _fs = require('fs');\n\nvar _fs2 = _interopRequireDefault(_fs);\n\nvar _path = require('path');\n\nvar _path2 = _interopRequireDefault(_path);\n\nvar _lodash = require('lodash');\n\nvar _crypto = require('crypto');\n\nvar _os = require('os');\n\nvar _os2 = _interopRequireDefault(_os);\n\nvar _utils = require('../../utils');\n\nvar _path3 = require('../path');\n\nmodule.exports = function () {\n  return _joi2['default'].object({\n    pkg: _joi2['default'].object({\n      version: _joi2['default'].string()['default'](_joi2['default'].ref('$version')),\n      buildNum: _joi2['default'].number()['default'](_joi2['default'].ref('$buildNum')),\n      buildSha: _joi2['default'].string()['default'](_joi2['default'].ref('$buildSha'))\n    })['default'](),\n\n    env: _joi2['default'].object({\n      name: _joi2['default'].string()['default'](_joi2['default'].ref('$env')),\n      dev: _joi2['default'].boolean()['default'](_joi2['default'].ref('$dev')),\n      prod: _joi2['default'].boolean()['default'](_joi2['default'].ref('$prod'))\n    })['default'](),\n\n    dev: _joi2['default'].object({\n      basePathProxyTarget: _joi2['default'].number()['default'](5603)\n    })['default'](),\n\n    pid: _joi2['default'].object({\n      file: _joi2['default'].string(),\n      exclusive: _joi2['default'].boolean()['default'](false)\n    })['default'](),\n\n    uuid: _joi2['default'].string().guid()['default'](),\n\n    server: _joi2['default'].object({\n      name: _joi2['default'].string()['default'](_os2['default'].hostname()),\n      host: _joi2['default'].string().hostname()['default']('0.0.0.0'),\n      port: _joi2['default'].number()['default'](5601),\n      maxPayloadBytes: _joi2['default'].number()['default'](1048576),\n      autoListen: _joi2['default'].boolean()['default'](true),\n      defaultRoute: _joi2['default'].string()['default']('/app/kibana').regex(/^\\//, 'start with a slash'),\n      basePath: _joi2['default'].string()['default']('').allow('').regex(/(^$|^\\/.*[^\\/]$)/, 'start with a slash, don\\'t end with one'),\n      ssl: _joi2['default'].object({\n        cert: _joi2['default'].string(),\n        key: _joi2['default'].string()\n      })['default'](),\n      cors: _joi2['default'].when('$dev', {\n        is: true,\n        then: _joi2['default'].object()['default']({\n          origin: ['*://localhost:9876'] // karma test server\n        }),\n        otherwise: _joi2['default'].boolean()['default'](false)\n      }),\n      xsrf: _joi2['default'].object({\n        disableProtection: _joi2['default'].boolean()['default'](false),\n        token: _joi2['default'].string().optional().notes('Deprecated')\n      })['default']()\n    })['default'](),\n\n    logging: _joi2['default'].object().keys({\n      silent: _joi2['default'].boolean()['default'](false),\n\n      quiet: _joi2['default'].boolean().when('silent', {\n        is: true,\n        then: _joi2['default']['default'](true).valid(true),\n        otherwise: _joi2['default']['default'](false)\n      }),\n\n      verbose: _joi2['default'].boolean().when('quiet', {\n        is: true,\n        then: _joi2['default'].valid(false)['default'](false),\n        otherwise: _joi2['default']['default'](false)\n      }),\n\n      events: _joi2['default'].any()['default']({}),\n      dest: _joi2['default'].string()['default']('stdout'),\n      filter: _joi2['default'].any()['default']({}),\n      json: _joi2['default'].boolean().when('dest', {\n        is: 'stdout',\n        then: _joi2['default']['default'](!process.stdout.isTTY),\n        otherwise: _joi2['default']['default'](true)\n      })\n    })['default'](),\n\n    ops: _joi2['default'].object({\n      interval: _joi2['default'].number()['default'](5000)\n    }),\n\n    plugins: _joi2['default'].object({\n      paths: _joi2['default'].array().items(_joi2['default'].string())['default']([]),\n      scanDirs: _joi2['default'].array().items(_joi2['default'].string())['default']([]),\n      initialize: _joi2['default'].boolean()['default'](true)\n    })['default'](),\n\n    path: _joi2['default'].object({\n      data: _joi2['default'].string()['default']((0, _path3.getData)())\n    })['default'](),\n\n    optimize: _joi2['default'].object({\n      enabled: _joi2['default'].boolean()['default'](true),\n      bundleFilter: _joi2['default'].string()['default']('!tests'),\n      bundleDir: _joi2['default'].string()['default']((0, _utils.fromRoot)('optimize/bundles')),\n      viewCaching: _joi2['default'].boolean()['default'](_joi2['default'].ref('$prod')),\n      lazy: _joi2['default'].boolean()['default'](false),\n      lazyPort: _joi2['default'].number()['default'](5602),\n      lazyHost: _joi2['default'].string().hostname()['default']('localhost'),\n      lazyPrebuild: _joi2['default'].boolean()['default'](false),\n      lazyProxyTimeout: _joi2['default'].number()['default'](5 * 60000),\n      useBundleCache: _joi2['default'].boolean()['default'](_joi2['default'].ref('$prod')),\n      unsafeCache: _joi2['default'].alternatives()['try'](_joi2['default'].boolean(), _joi2['default'].string().regex(/^\\/.+\\/$/))['default']('/[\\\\/\\\\\\\\](node_modules|bower_components)[\\\\/\\\\\\\\]/'),\n      sourceMaps: _joi2['default'].alternatives()['try'](_joi2['default'].string().required(), _joi2['default'].boolean())['default'](_joi2['default'].ref('$dev')),\n      profile: _joi2['default'].boolean()['default'](false)\n    })['default'](),\n\n    status: _joi2['default'].object({\n      allowAnonymous: _joi2['default'].boolean()['default'](false)\n    })['default']()\n\n  })['default']();\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9jb25maWcvc2NoZW1hLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7bUJBQWdCLEtBQUs7Ozs7a0JBQ04sSUFBSTs7OztvQkFDRixNQUFNOzs7O3NCQUNILFFBQVE7O3NCQUNBLFFBQVE7O2tCQUNyQixJQUFJOzs7O3FCQUVNLGFBQWE7O3FCQUNkLFNBQVM7O0FBRWpDLE1BQU0sQ0FBQyxPQUFPLEdBQUc7U0FBTSxpQkFBSSxNQUFNLENBQUM7QUFDaEMsT0FBRyxFQUFFLGlCQUFJLE1BQU0sQ0FBQztBQUNkLGFBQU8sRUFBRSxpQkFBSSxNQUFNLEVBQUUsV0FBUSxDQUFDLGlCQUFJLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUNsRCxjQUFRLEVBQUUsaUJBQUksTUFBTSxFQUFFLFdBQVEsQ0FBQyxpQkFBSSxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDcEQsY0FBUSxFQUFFLGlCQUFJLE1BQU0sRUFBRSxXQUFRLENBQUMsaUJBQUksR0FBRyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0tBQ3JELENBQUMsV0FBUSxFQUFFOztBQUVaLE9BQUcsRUFBRSxpQkFBSSxNQUFNLENBQUM7QUFDZCxVQUFJLEVBQUUsaUJBQUksTUFBTSxFQUFFLFdBQVEsQ0FBQyxpQkFBSSxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDM0MsU0FBRyxFQUFFLGlCQUFJLE9BQU8sRUFBRSxXQUFRLENBQUMsaUJBQUksR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQzNDLFVBQUksRUFBRSxpQkFBSSxPQUFPLEVBQUUsV0FBUSxDQUFDLGlCQUFJLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQztLQUM5QyxDQUFDLFdBQVEsRUFBRTs7QUFFWixPQUFHLEVBQUUsaUJBQUksTUFBTSxDQUFDO0FBQ2QseUJBQW1CLEVBQUUsaUJBQUksTUFBTSxFQUFFLFdBQVEsQ0FBQyxJQUFJLENBQUM7S0FDaEQsQ0FBQyxXQUFRLEVB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QUFRLENBQUMsS0FBSyxDQUFDO0tBQzdDLENBQUMsV0FBUSxFQUFFOztHQUViLENBQUMsV0FBUSxFQUFFO0NBQUEsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9zZXJ2ZXIvY29uZmlnL3NjaGVtYS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBKb2kgZnJvbSAnam9pJztcbmltcG9ydCBmcyBmcm9tICdmcyc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCB7IGdldCB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgeyByYW5kb21CeXRlcyB9IGZyb20gJ2NyeXB0byc7XG5pbXBvcnQgb3MgZnJvbSAnb3MnO1xuXG5pbXBvcnQgeyBmcm9tUm9vdCB9IGZyb20gJy4uLy4uL3V0aWxzJztcbmltcG9ydCB7IGdldERhdGEgfSBmcm9tICcuLi9wYXRoJztcblxubW9kdWxlLmV4cG9ydHMgPSAoKSA9PiBKb2kub2JqZWN0KHtcbiAgcGtnOiBKb2kub2JqZWN0KHtcbiAgICB2ZXJzaW9uOiBKb2kuc3RyaW5nKCkuZGVmYXVsdChKb2kucmVmKCckdmVyc2lvbicpKSxcbiAgICBidWlsZE51bTogSm9pLm51bWJlcigpLmRlZmF1bHQoSm9pLnJlZignJGJ1aWxkTnVtJykpLFxuICAgIGJ1aWxkU2hhOiBKb2kuc3RyaW5nKCkuZGVmYXVsdChKb2kucmVmKCckYnVpbGRTaGEnKSksXG4gIH0pLmRlZmF1bHQoKSxcblxuICBlbnY6IEpvaS5vYmplY3Qoe1xuICAgIG5hbWU6IEpvaS5zdHJpbmcoKS5kZWZhdWx0KEpvaS5yZWYoJyRlbnYnKSksXG4gICAgZGV2OiBKb2kuYm9vbGVhbigpLmRlZmF1bHQoSm9pLnJlZignJGRldicpKSxcbiAgICBwcm9kOiBKb2kuYm9vbGVhbigpLmRlZmF1bHQoSm9pLnJlZignJHByb2QnKSlcbiAgfSkuZGVmYXVsdCgpLFxuXG4gIGRldjogSm9pLm9iamVjdCh7XG4gICAgYmFzZVBhdGhQcm94eVRhcmdldDogSm9pLm51bWJlcigpLmRlZmF1bHQoNTYwMyksXG4gIH0pLmRlZmF1bHQoKSxcblxuICBwaWQ6IEpvaS5vYmplY3Qoe1xuICAgIGZpbGU6IEpvaS5zdHJpbmcoKSxcbiAgICBleGNsdXNpdmU6IEpvaS5ib29sZWFuKCkuZGVmYXVsdChmYWxzZSlcbiAgfSkuZGVmYXVsdCgpLFxuXG4gIHV1aWQ6IEpvaS5zdHJpbmcoKS5ndWlkKCkuZGVmYXVsdCgpLFxuXG4gIHNlcnZlcjogSm9pLm9iamVjdCh7XG4gICAgbmFtZTogSm9pLnN0cmluZygpLmRlZmF1bHQob3MuaG9zdG5hbWUoKSksXG4gICAgaG9zdDogSm9pLnN0cmluZygpLmhvc3RuYW1lKCkuZGVmYXVsdCgnMC4wLjAuMCcpLFxuICAgIHBvcnQ6IEpvaS5udW1iZXIoKS5kZWZhdWx0KDU2MDEpLFxuICAgIG1heFBheWxvYWRCeXRlczogSm9pLm51bWJlcigpLmRlZmF1bHQoMTA0ODU3NiksXG4gICAgYXV0b0xpc3RlbjogSm9pLmJvb2xlYW4oKS5kZWZhdWx0KHRydWUpLFxuICAgIGRlZmF1bHRSb3V0ZTogSm9pLnN0cmluZygpLmRlZmF1bHQoJy9hcHAva2liYW5hJykucmVnZXgoL15cXC8vLCBgc3RhcnQgd2l0aCBhIHNsYXNoYCksXG4gICAgYmFzZVBhdGg6IEpvaS5zdHJpbmcoKS5kZWZhdWx0KCcnKS5hbGxvdygnJykucmVnZXgoLyheJHxeXFwvLipbXlxcL10kKS8sIGBzdGFydCB3aXRoIGEgc2xhc2gsIGRvbid0IGVuZCB3aXRoIG9uZWApLFxuICAgIHNzbDogSm9pLm9iamVjdCh7XG4gICAgICBjZXJ0OiBKb2kuc3RyaW5nKCksXG4gICAgICBrZXk6IEpvaS5zdHJpbmcoKVxuICAgIH0pLmRlZmF1bHQoKSxcbiAgICBjb3JzOiBKb2kud2hlbignJGRldicsIHtcbiAgICAgIGlzOiB0cnVlLFxuICAgICAgdGhlbjogSm9pLm9iamVjdCgpLmRlZmF1bHQoe1xuICAgICAgICBvcmlnaW46IFsnKjovL2xvY2FsaG9zdDo5ODc2J10gLy8ga2FybWEgdGVzdCBzZXJ2ZXJcbiAgICAgIH0pLFxuICAgICAgb3RoZXJ3aXNlOiBKb2kuYm9vbGVhbigpLmRlZmF1bHQoZmFsc2UpXG4gICAgfSksXG4gICAgeHNyZjogSm9pLm9iamVjdCh7XG4gICAgICBkaXNhYmxlUHJvdGVjdGlvbjogSm9pLmJvb2xlYW4oKS5kZWZhdWx0KGZhbHNlKSxcbiAgICAgIHRva2VuOiBKb2kuc3RyaW5nKCkub3B0aW9uYWwoKS5ub3RlcygnRGVwcmVjYXRlZCcpXG4gICAgfSkuZGVmYXVsdCgpLFxuICB9KS5kZWZhdWx0KCksXG5cbiAgbG9nZ2luZzogSm9pLm9iamVjdCgpLmtleXMoe1xuICAgIHNpbGVudDogSm9pLmJvb2xlYW4oKS5kZWZhdWx0KGZhbHNlKSxcblxuICAgIHF1aWV0OiBKb2kuYm9vbGVhbigpXG4gICAgLndoZW4oJ3NpbGVudCcsIHtcbiAgICAgIGlzOiB0cnVlLFxuICAgICAgdGhlbjogSm9pLmRlZmF1bHQodHJ1ZSkudmFsaWQodHJ1ZSksXG4gICAgICBvdGhlcndpc2U6IEpvaS5kZWZhdWx0KGZhbHNlKVxuICAgIH0pLFxuXG4gICAgdmVyYm9zZTogSm9pLmJvb2xlYW4oKVxuICAgIC53aGVuKCdxdWlldCcsIHtcbiAgICAgIGlzOiB0cnVlLFxuICAgICAgdGhlbjogSm9pLnZhbGlkKGZhbHNlKS5kZWZhdWx0KGZhbHNlKSxcbiAgICAgIG90aGVyd2lzZTogSm9pLmRlZmF1bHQoZmFsc2UpXG4gICAgfSksXG5cbiAgICBldmVudHM6IEpvaS5hbnkoKS5kZWZhdWx0KHt9KSxcbiAgICBkZXN0OiBKb2kuc3RyaW5nKCkuZGVmYXVsdCgnc3Rkb3V0JyksXG4gICAgZmlsdGVyOiBKb2kuYW55KCkuZGVmYXVsdCh7fSksXG4gICAganNvbjogSm9pLmJvb2xlYW4oKVxuICAgIC53aGVuKCdkZXN0Jywge1xuICAgICAgaXM6ICdzdGRvdXQnLFxuICAgICAgdGhlbjogSm9pLmRlZmF1bHQoIXByb2Nlc3Muc3Rkb3V0LmlzVFRZKSxcbiAgICAgIG90aGVyd2lzZTogSm9pLmRlZmF1bHQodHJ1ZSlcbiAgICB9KVxuICB9KVxuICAuZGVmYXVsdCgpLFxuXG4gIG9wczogSm9pLm9iamVjdCh7XG4gICAgaW50ZXJ2YWw6IEpvaS5udW1iZXIoKS5kZWZhdWx0KDUwMDApLFxuICB9KSxcblxuICBwbHVnaW5zOiBKb2kub2JqZWN0KHtcbiAgICBwYXRoczogSm9pLmFycmF5KCkuaXRlbXMoSm9pLnN0cmluZygpKS5kZWZhdWx0KFtdKSxcbiAgICBzY2FuRGlyczogSm9pLmFycmF5KCkuaXRlbXMoSm9pLnN0cmluZygpKS5kZWZhdWx0KFtdKSxcbiAgICBpbml0aWFsaXplOiBKb2kuYm9vbGVhbigpLmRlZmF1bHQodHJ1ZSlcbiAgfSkuZGVmYXVsdCgpLFxuXG4gIHBhdGg6IEpvaS5vYmplY3Qoe1xuICAgIGRhdGE6IEpvaS5zdHJpbmcoKS5kZWZhdWx0KGdldERhdGEoKSlcbiAgfSkuZGVmYXVsdCgpLFxuXG4gIG9wdGltaXplOiBKb2kub2JqZWN0KHtcbiAgICBlbmFibGVkOiBKb2kuYm9vbGVhbigpLmRlZmF1bHQodHJ1ZSksXG4gICAgYnVuZGxlRmlsdGVyOiBKb2kuc3RyaW5nKCkuZGVmYXVsdCgnIXRlc3RzJyksXG4gICAgYnVuZGxlRGlyOiBKb2kuc3RyaW5nKCkuZGVmYXVsdChmcm9tUm9vdCgnb3B0aW1pemUvYnVuZGxlcycpKSxcbiAgICB2aWV3Q2FjaGluZzogSm9pLmJvb2xlYW4oKS5kZWZhdWx0KEpvaS5yZWYoJyRwcm9kJykpLFxuICAgIGxhenk6IEpvaS5ib29sZWFuKCkuZGVmYXVsdChmYWxzZSksXG4gICAgbGF6eVBvcnQ6IEpvaS5udW1iZXIoKS5kZWZhdWx0KDU2MDIpLFxuICAgIGxhenlIb3N0OiBKb2kuc3RyaW5nKCkuaG9zdG5hbWUoKS5kZWZhdWx0KCdsb2NhbGhvc3QnKSxcbiAgICBsYXp5UHJlYnVpbGQ6IEpvaS5ib29sZWFuKCkuZGVmYXVsdChmYWxzZSksXG4gICAgbGF6eVByb3h5VGltZW91dDogSm9pLm51bWJlcigpLmRlZmF1bHQoNSAqIDYwMDAwKSxcbiAgICB1c2VCdW5kbGVDYWNoZTogSm9pLmJvb2xlYW4oKS5kZWZhdWx0KEpvaS5yZWYoJyRwcm9kJykpLFxuICAgIHVuc2FmZUNhY2hlOiBKb2lcbiAgICAgIC5hbHRlcm5hdGl2ZXMoKVxuICAgICAgLnRyeShcbiAgICAgICAgSm9pLmJvb2xlYW4oKSxcbiAgICAgICAgSm9pLnN0cmluZygpLnJlZ2V4KC9eXFwvLitcXC8kLylcbiAgICAgIClcbiAgICAgIC5kZWZhdWx0KCcvW1xcXFwvXFxcXFxcXFxdKG5vZGVfbW9kdWxlc3xib3dlcl9jb21wb25lbnRzKVtcXFxcL1xcXFxcXFxcXS8nKSxcbiAgICBzb3VyY2VNYXBzOiBKb2lcbiAgICAgIC5hbHRlcm5hdGl2ZXMoKVxuICAgICAgLnRyeShcbiAgICAgICAgSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gICAgICAgIEpvaS5ib29sZWFuKClcbiAgICAgIClcbiAgICAgIC5kZWZhdWx0KEpvaS5yZWYoJyRkZXYnKSksXG4gICAgcHJvZmlsZTogSm9pLmJvb2xlYW4oKS5kZWZhdWx0KGZhbHNlKVxuICB9KS5kZWZhdWx0KCksXG5cbiAgc3RhdHVzOiBKb2kub2JqZWN0KHtcbiAgICBhbGxvd0Fub255bW91czogSm9pLmJvb2xlYW4oKS5kZWZhdWx0KGZhbHNlKVxuICB9KS5kZWZhdWx0KClcblxufSkuZGVmYXVsdCgpO1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/config/schema.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/src/server/config/schema.js",
      "sourcesContent": [
        "import Joi from 'joi';\nimport fs from 'fs';\nimport path from 'path';\nimport { get } from 'lodash';\nimport { randomBytes } from 'crypto';\nimport os from 'os';\n\nimport { fromRoot } from '../../utils';\nimport { getData } from '../path';\n\nmodule.exports = () => Joi.object({\n  pkg: Joi.object({\n    version: Joi.string().default(Joi.ref('$version')),\n    buildNum: Joi.number().default(Joi.ref('$buildNum')),\n    buildSha: Joi.string().default(Joi.ref('$buildSha')),\n  }).default(),\n\n  env: Joi.object({\n    name: Joi.string().default(Joi.ref('$env')),\n    dev: Joi.boolean().default(Joi.ref('$dev')),\n    prod: Joi.boolean().default(Joi.ref('$prod'))\n  }).default(),\n\n  dev: Joi.object({\n    basePathProxyTarget: Joi.number().default(5603),\n  }).default(),\n\n  pid: Joi.object({\n    file: Joi.string(),\n    exclusive: Joi.boolean().default(false)\n  }).default(),\n\n  uuid: Joi.string().guid().default(),\n\n  server: Joi.object({\n    name: Joi.string().default(os.hostname()),\n    host: Joi.string().hostname().default('0.0.0.0'),\n    port: Joi.number().default(5601),\n    maxPayloadBytes: Joi.number().default(1048576),\n    autoListen: Joi.boolean().default(true),\n    defaultRoute: Joi.string().default('/app/kibana').regex(/^\\//, `start with a slash`),\n    basePath: Joi.string().default('').allow('').regex(/(^$|^\\/.*[^\\/]$)/, `start with a slash, don't end with one`),\n    ssl: Joi.object({\n      cert: Joi.string(),\n      key: Joi.string()\n    }).default(),\n    cors: Joi.when('$dev', {\n      is: true,\n      then: Joi.object().default({\n        origin: ['*://localhost:9876'] // karma test server\n      }),\n      otherwise: Joi.boolean().default(false)\n    }),\n    xsrf: Joi.object({\n      disableProtection: Joi.boolean().default(false),\n      token: Joi.string().optional().notes('Deprecated')\n    }).default(),\n  }).default(),\n\n  logging: Joi.object().keys({\n    silent: Joi.boolean().default(false),\n\n    quiet: Joi.boolean()\n    .when('silent', {\n      is: true,\n      then: Joi.default(true).valid(true),\n      otherwise: Joi.default(false)\n    }),\n\n    verbose: Joi.boolean()\n    .when('quiet', {\n      is: true,\n      then: Joi.valid(false).default(false),\n      otherwise: Joi.default(false)\n    }),\n\n    events: Joi.any().default({}),\n    dest: Joi.string().default('stdout'),\n    filter: Joi.any().default({}),\n    json: Joi.boolean()\n    .when('dest', {\n      is: 'stdout',\n      then: Joi.default(!process.stdout.isTTY),\n      otherwise: Joi.default(true)\n    })\n  })\n  .default(),\n\n  ops: Joi.object({\n    interval: Joi.number().default(5000),\n  }),\n\n  plugins: Joi.object({\n    paths: Joi.array().items(Joi.string()).default([]),\n    scanDirs: Joi.array().items(Joi.string()).default([]),\n    initialize: Joi.boolean().default(true)\n  }).default(),\n\n  path: Joi.object({\n    data: Joi.string().default(getData())\n  }).default(),\n\n  optimize: Joi.object({\n    enabled: Joi.boolean().default(true),\n    bundleFilter: Joi.string().default('!tests'),\n    bundleDir: Joi.string().default(fromRoot('optimize/bundles')),\n    viewCaching: Joi.boolean().default(Joi.ref('$prod')),\n    lazy: Joi.boolean().default(false),\n    lazyPort: Joi.number().default(5602),\n    lazyHost: Joi.string().hostname().default('localhost'),\n    lazyPrebuild: Joi.boolean().default(false),\n    lazyProxyTimeout: Joi.number().default(5 * 60000),\n    useBundleCache: Joi.boolean().default(Joi.ref('$prod')),\n    unsafeCache: Joi\n      .alternatives()\n      .try(\n        Joi.boolean(),\n        Joi.string().regex(/^\\/.+\\/$/)\n      )\n      .default('/[\\\\/\\\\\\\\](node_modules|bower_components)[\\\\/\\\\\\\\]/'),\n    sourceMaps: Joi\n      .alternatives()\n      .try(\n        Joi.string().required(),\n        Joi.boolean()\n      )\n      .default(Joi.ref('$dev')),\n    profile: Joi.boolean().default(false)\n  }).default(),\n\n  status: Joi.object({\n    allowAnonymous: Joi.boolean().default(false)\n  }).default()\n\n}).default();\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/path/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "fs",
            "imported": [
              "accessSync",
              "R_OK"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "accessSync",
                "local": "accessSync"
              },
              {
                "kind": "named",
                "imported": "R_OK",
                "local": "R_OK"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "find"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "find",
                "local": "find"
              }
            ]
          },
          {
            "source": "../../utils",
            "imported": [
              "fromRoot"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "fromRoot",
                "local": "fromRoot"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _fs = require('fs');\n\nvar _lodash = require('lodash');\n\nvar _utils = require('../../utils');\n\nvar CONFIG_PATHS = [process.env.CONFIG_PATH, (0, _utils.fromRoot)('config/kibana.yml'), '/etc/kibana/kibana.yml'].filter(Boolean);\n\nvar DATA_PATHS = [process.env.DATA_PATH, (0, _utils.fromRoot)('installedPlugins/.data'), '/var/lib/kibana'].filter(Boolean);\n\nfunction findFile(paths) {\n  var availablePath = (0, _lodash.find)(paths, function (configPath) {\n    try {\n      (0, _fs.accessSync)(configPath, _fs.R_OK);\n      return true;\n    } catch (e) {\n      //Check the next path\n    }\n  });\n  return availablePath || paths[0];\n}\n\nexports['default'] = {\n  getConfig: function getConfig() {\n    return findFile(CONFIG_PATHS);\n  },\n  getData: function getData() {\n    return findFile(DATA_PATHS);\n  }\n};\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9wYXRoL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztrQkFBZ0MsSUFBSTs7c0JBQ2YsUUFBUTs7cUJBQ0osYUFBYTs7QUFFdEMsSUFBTSxZQUFZLEdBQUcsQ0FDbkIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxXQUFXLEVBQ3ZCLHFCQUFTLG1CQUFtQixDQUFDLEVBQzdCLHdCQUF3QixDQUN6QixDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQzs7QUFFbEIsSUFBTSxVQUFVLEdBQUcsQ0FDakIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQ3JCLHFCQUFTLHdCQUF3QixDQUFDLEVBQ2xDLGlCQUFpQixDQUNsQixDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQzs7QUFFbEIsU0FBUyxRQUFRLENBQUMsS0FBSyxFQUFFO0FBQ3ZCLE1BQU0sYUFBYSxHQUFHLGtCQUFLLEtBQUssRUFBRSxVQUFBLFVBQVUsRUFBSTtBQUM5QyxRQUFJO0FBQ0YsMEJBQVcsVUFBVSxXQUFPLENBQUM7QUFDN0IsYUFBTyxJQUFJLENBQUM7S0FDYixDQUFDLE9BQU8sQ0FBQyxFQUFFOztLQUVYO0dBQ0YsQ0FBQyxDQUFDO0FBQ0gsU0FBTyxhQUFhLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO0NBQ2xDOztxQkFFYztBQUNiLFdBQVMsRUFBRTtXQUFNLFFBQVEsQ0FBQyxZQUFZLENBQUM7R0FBQTtBQUN2QyxTQUFPLEVBQUU7V0FBTSxRQUFRLENBQUMsVUFBVSxDQUFDO0dBQUE7Q0FDcEMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvc2VydmVyL3BhdGgvaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhY2Nlc3NTeW5jLCBSX09LfSBmcm9tICdmcyc7XG5pbXBvcnQgeyBmaW5kIH0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IGZyb21Sb290IH0gZnJvbSAnLi4vLi4vdXRpbHMnO1xuXG5jb25zdCBDT05GSUdfUEFUSFMgPSBbXG4gIHByb2Nlc3MuZW52LkNPTkZJR19QQVRILFxuICBmcm9tUm9vdCgnY29uZmlnL2tpYmFuYS55bWwnKSxcbiAgJy9ldGMva2liYW5hL2tpYmFuYS55bWwnXG5dLmZpbHRlcihCb29sZWFuKTtcblxuY29uc3QgREFUQV9QQVRIUyA9IFtcbiAgcHJvY2Vzcy5lbnYuREFUQV9QQVRILFxuICBmcm9tUm9vdCgnaW5zdGFsbGVkUGx1Z2lucy8uZGF0YScpLFxuICAnL3Zhci9saWIva2liYW5hJ1xuXS5maWx0ZXIoQm9vbGVhbik7XG5cbmZ1bmN0aW9uIGZpbmRGaWxlKHBhdGhzKSB7XG4gIGNvbnN0IGF2YWlsYWJsZVBhdGggPSBmaW5kKHBhdGhzLCBjb25maWdQYXRoID0+IHtcbiAgICB0cnkge1xuICAgICAgYWNjZXNzU3luYyhjb25maWdQYXRoLCBSX09LKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vQ2hlY2sgdGhlIG5leHQgcGF0aFxuICAgIH1cbiAgfSk7XG4gIHJldHVybiBhdmFpbGFibGVQYXRoIHx8IHBhdGhzWzBdO1xufVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIGdldENvbmZpZzogKCkgPT4gZmluZEZpbGUoQ09ORklHX1BBVEhTKSxcbiAgZ2V0RGF0YTogKCkgPT4gZmluZEZpbGUoREFUQV9QQVRIUylcbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/path/index.js"
      ],
      "names": [],
      "mappings": ";;;;;;kBAAgC,IAAI;;sBACf,QAAQ;;qBACJ,aAAa;;AAEtC,IAAM,YAAY,GAAG,CACnB,OAAO,CAAC,GAAG,CAAC,WAAW,EACvB,qBAAS,mBAAmB,CAAC,EAC7B,wBAAwB,CACzB,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;;AAElB,IAAM,UAAU,GAAG,CACjB,OAAO,CAAC,GAAG,CAAC,SAAS,EACrB,qBAAS,wBAAwB,CAAC,EAClC,iBAAiB,CAClB,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;;AAElB,SAAS,QAAQ,CAAC,KAAK,EAAE;AACvB,MAAM,aAAa,GAAG,kBAAK,KAAK,EAAE,UAAA,UAAU,EAAI;AAC9C,QAAI;AACF,0BAAW,UAAU,WAAO,CAAC;AAC7B,aAAO,IAAI,CAAC;KACb,CAAC,OAAO,CAAC,EAAE;;KAEX;GACF,CAAC,CAAC;AACH,SAAO,aAAa,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC;CAClC;;qBAEc;AACb,WAAS,EAAE;WAAM,QAAQ,CAAC,YAAY,CAAC;GAAA;AACvC,SAAO,EAAE;WAAM,QAAQ,CAAC,UAAU,CAAC;GAAA;CACpC",
      "file": "/home/vio/v3metrics/src/server/path/index.js",
      "sourcesContent": [
        "import { accessSync, R_OK} from 'fs';\nimport { find } from 'lodash';\nimport { fromRoot } from '../../utils';\n\nconst CONFIG_PATHS = [\n  process.env.CONFIG_PATH,\n  fromRoot('config/kibana.yml'),\n  '/etc/kibana/kibana.yml'\n].filter(Boolean);\n\nconst DATA_PATHS = [\n  process.env.DATA_PATH,\n  fromRoot('installedPlugins/.data'),\n  '/var/lib/kibana'\n].filter(Boolean);\n\nfunction findFile(paths) {\n  const availablePath = find(paths, configPath => {\n    try {\n      accessSync(configPath, R_OK);\n      return true;\n    } catch (e) {\n      //Check the next path\n    }\n  });\n  return availablePath || paths[0];\n}\n\nexport default {\n  getConfig: () => findFile(CONFIG_PATHS),\n  getData: () => findFile(DATA_PATHS)\n};\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/config/deep_clone_with_buffers.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "cloneDeep"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "cloneDeep",
                "local": "cloneDeep"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _lodash = require('lodash');\n\nfunction cloneBuffersCustomizer(val) {\n  if (Buffer.isBuffer(val)) {\n    return new Buffer(val);\n  }\n}\n\nexports['default'] = function (vals) {\n  return (0, _lodash.cloneDeep)(vals, cloneBuffersCustomizer);\n};\n\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9jb25maWcvZGVlcF9jbG9uZV93aXRoX2J1ZmZlcnMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O3NCQUEwQixRQUFROztBQUVsQyxTQUFTLHNCQUFzQixDQUFDLEdBQUcsRUFBRTtBQUNuQyxNQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLEVBQUU7QUFDeEIsV0FBTyxJQUFJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQztHQUN4QjtDQUNGOztxQkFFYyxVQUFVLElBQUksRUFBRTtBQUM3QixTQUFPLHVCQUFVLElBQUksRUFBRSxzQkFBc0IsQ0FBQyxDQUFDO0NBQ2hEOztBQUFBLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvc2VydmVyL2NvbmZpZy9kZWVwX2Nsb25lX3dpdGhfYnVmZmVycy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNsb25lRGVlcCB9IGZyb20gJ2xvZGFzaCc7XG5cbmZ1bmN0aW9uIGNsb25lQnVmZmVyc0N1c3RvbWl6ZXIodmFsKSB7XG4gIGlmIChCdWZmZXIuaXNCdWZmZXIodmFsKSkge1xuICAgIHJldHVybiBuZXcgQnVmZmVyKHZhbCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKHZhbHMpIHtcbiAgcmV0dXJuIGNsb25lRGVlcCh2YWxzLCBjbG9uZUJ1ZmZlcnNDdXN0b21pemVyKTtcbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/config/deep_clone_with_buffers.js"
      ],
      "names": [],
      "mappings": ";;;;;;sBAA0B,QAAQ;;AAElC,SAAS,sBAAsB,CAAC,GAAG,EAAE;AACnC,MAAI,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE;AACxB,WAAO,IAAI,MAAM,CAAC,GAAG,CAAC,CAAC;GACxB;CACF;;qBAEc,UAAU,IAAI,EAAE;AAC7B,SAAO,uBAAU,IAAI,EAAE,sBAAsB,CAAC,CAAC;CAChD;;AAAA,CAAC",
      "file": "/home/vio/v3metrics/src/server/config/deep_clone_with_buffers.js",
      "sourcesContent": [
        "import { cloneDeep } from 'lodash';\n\nfunction cloneBuffersCustomizer(val) {\n  if (Buffer.isBuffer(val)) {\n    return new Buffer(val);\n  }\n}\n\nexport default function (vals) {\n  return cloneDeep(vals, cloneBuffersCustomizer);\n};\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/logging/configuration.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "./log_reporter",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "logReporter"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "loggingConfiguration",
            "config"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "loggingConfiguration",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "config",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = loggingConfiguration;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _log_reporter = require('./log_reporter');\n\nvar _log_reporter2 = _interopRequireDefault(_log_reporter);\n\nfunction loggingConfiguration(config) {\n  var events = config.get('logging.events');\n\n  if (config.get('logging.silent')) {\n    _lodash2['default'].defaults(events, {});\n  } else if (config.get('logging.quiet')) {\n    _lodash2['default'].defaults(events, {\n      log: ['listening', 'error', 'fatal'],\n      request: ['error'],\n      error: '*'\n    });\n  } else if (config.get('logging.verbose')) {\n    _lodash2['default'].defaults(events, {\n      log: '*',\n      ops: '*',\n      request: '*',\n      response: '*',\n      error: '*'\n    });\n  } else {\n    _lodash2['default'].defaults(events, {\n      log: ['info', 'warning', 'error', 'fatal'],\n      response: config.get('logging.json') ? '*' : '!',\n      request: ['info', 'warning', 'error', 'fatal'],\n      error: '*'\n    });\n  }\n\n  var options = {\n    opsInterval: config.get('ops.interval'),\n    requestHeaders: true,\n    requestPayload: true,\n    reporters: [{\n      reporter: _log_reporter2['default'],\n      config: {\n        json: config.get('logging.json'),\n        dest: config.get('logging.dest'),\n        // I'm adding the default here because if you add another filter\n        // using the commandline it will remove authorization. I want users\n        // to have to explicitly set --logging.filter.authorization=none to\n        // have it show up int he logs.\n        filter: _lodash2['default'].defaults(config.get('logging.filter'), {\n          authorization: 'remove'\n        })\n      },\n      events: _lodash2['default'].transform(events, function (filtered, val, key) {\n        // provide a string compatible way to remove events\n        if (val !== '!') filtered[key] = val;\n      }, {})\n    }]\n  };\n  return options;\n}\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9sb2dnaW5nL2NvbmZpZ3VyYXRpb24uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7cUJBR3dCLG9CQUFvQjs7OztzQkFIOUIsUUFBUTs7Ozs0QkFDRSxnQkFBZ0I7Ozs7QUFFekIsU0FBUyxvQkFBb0IsQ0FBQyxNQUFNLEVBQUU7QUFDbkQsTUFBSSxNQUFNLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDOztBQUUxQyxNQUFJLE1BQU0sQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLENBQUMsRUFBRTtBQUNoQyx3QkFBRSxRQUFRLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0dBQ3hCLE1BQ0ksSUFBSSxNQUFNLENBQUMsR0FBRyxDQUFDLGVBQWUsQ0FBQyxFQUFFO0FBQ3BDLHdCQUFFLFFBQVEsQ0FBQyxNQUFNLEVBQUU7QUFDakIsU0FBRyxFQUFFLENBQUMsV0FBVyxFQUFFLE9BQU8sRUFBRSxPQUFPLENBQUM7QUFDcEMsYUFBTyxFQUFFLENBQUMsT0FBTyxDQUFDO0FBQ2xCLFdBQUssRUFBRSxHQUFHO0tBQ1gsQ0FBQyxDQUFDO0dBQ0osTUFDSSxJQUFJLE1BQU0sQ0FBQyxHQUFHLENBQUMsaUJBQWlCLENBQUMsRUFBRTtBQUN0Qyx3QkFBRSxRQUFRLENBQUMsTUFBTSxFQUFFO0FBQ2pCLFNBQUcsRUFBRSxHQUFHO0FBQ1IsU0FBRyxFQUFFLEdBQUc7QUFDUixhQUFPLEVBQUUsR0FBRztBQUNaLGNBQVEsRUFBRSxHQUFHO0FBQ2IsV0FBSyxFQUFFLEdBQUc7S0FDWCxDQUFDLENBQUM7R0FDSixNQUNJO0FBQ0gsd0JBQUUsUUFBUSxDQUFDLE1BQU0sRUFBRTtBQUNqQixTQUFHLEVBQUUsQ0FBQyxNQUFNLEVBQUUsU0FBUyxFQUFFLE9BQU8sRUFBRSxPQUFPLENBQUM7QUFDMUMsY0FBUSxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsY0FBYyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUc7QUFDaEQsYUFBTyxFQUFFLENBQUMsTUFBTSxFQUFFLFNBQVMsRUFBRSxPQUFPLEVBQUUsT0FBTyxDQUFDO0FBQzlDLFdBQUssRUFBRSxHQUFHO0tBQ1gsQ0FBQyxDQUFDO0dBQ0o7O0FBRUQsTUFBTSxPQUFPLEdBQUc7QUFDZCxlQUFXLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUM7QUFDdkMsa0JBQWMsRUFBRSxJQUFJO0FBQ3BCLGtCQUFjLEVBQUUsSUFBSTtBQUNwQixhQUFTLEVBQUUsQ0FDVDtBQUNFLGNBQVEsMkJBQWE7QUFDckIsWUFBTSxFQUFFO0FBQ04sWUFBSSxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsY0FBYyxDQUFDO0FBQ2hDLFlBQUksRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQzs7Ozs7QUFLaEMsY0FBTSxFQUFFLG9CQUFFLFFBQVEsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLGdCQUFnQixDQUFDLEVBQUU7QUFDL0MsdUJBQWEsRUFBRSxRQUFRO1NBQ3hCLENBQUM7T0FDSDtBQUNELFlBQU0sRUFBRSxvQkFBRSxTQUFTLENBQUMsTUFBTSxFQUFFLFVBQVUsUUFBUSxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUU7O0FBRXhELFlBQUksR0FBRyxLQUFLLEdBQUcsRUFBRSxRQUFRLENBQUMsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDO09BQ3RDLEVBQUUsRUFBRSxDQUFDO0tBQ1AsQ0FDRjtHQUNGLENBQUM7QUFDRixTQUFPLE9BQU8sQ0FBQztDQUNoQiIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9zZXJ2ZXIvbG9nZ2luZy9jb25maWd1cmF0aW9uLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBsb2dSZXBvcnRlciBmcm9tICcuL2xvZ19yZXBvcnRlcic7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGxvZ2dpbmdDb25maWd1cmF0aW9uKGNvbmZpZykge1xuICBsZXQgZXZlbnRzID0gY29uZmlnLmdldCgnbG9nZ2luZy5ldmVudHMnKTtcblxuICBpZiAoY29uZmlnLmdldCgnbG9nZ2luZy5zaWxlbnQnKSkge1xuICAgIF8uZGVmYXVsdHMoZXZlbnRzLCB7fSk7XG4gIH1cbiAgZWxzZSBpZiAoY29uZmlnLmdldCgnbG9nZ2luZy5xdWlldCcpKSB7XG4gICAgXy5kZWZhdWx0cyhldmVudHMsIHtcbiAgICAgIGxvZzogWydsaXN0ZW5pbmcnLCAnZXJyb3InLCAnZmF0YWwnXSxcbiAgICAgIHJlcXVlc3Q6IFsnZXJyb3InXSxcbiAgICAgIGVycm9yOiAnKidcbiAgICB9KTtcbiAgfVxuICBlbHNlIGlmIChjb25maWcuZ2V0KCdsb2dnaW5nLnZlcmJvc2UnKSkge1xuICAgIF8uZGVmYXVsdHMoZXZlbnRzLCB7XG4gICAgICBsb2c6ICcqJyxcbiAgICAgIG9wczogJyonLFxuICAgICAgcmVxdWVzdDogJyonLFxuICAgICAgcmVzcG9uc2U6ICcqJyxcbiAgICAgIGVycm9yOiAnKidcbiAgICB9KTtcbiAgfVxuICBlbHNlIHtcbiAgICBfLmRlZmF1bHRzKGV2ZW50cywge1xuICAgICAgbG9nOiBbJ2luZm8nLCAnd2FybmluZycsICdlcnJvcicsICdmYXRhbCddLFxuICAgICAgcmVzcG9uc2U6IGNvbmZpZy5nZXQoJ2xvZ2dpbmcuanNvbicpID8gJyonIDogJyEnLFxuICAgICAgcmVxdWVzdDogWydpbmZvJywgJ3dhcm5pbmcnLCAnZXJyb3InLCAnZmF0YWwnXSxcbiAgICAgIGVycm9yOiAnKidcbiAgICB9KTtcbiAgfVxuXG4gIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgb3BzSW50ZXJ2YWw6IGNvbmZpZy5nZXQoJ29wcy5pbnRlcnZhbCcpLFxuICAgIHJlcXVlc3RIZWFkZXJzOiB0cnVlLFxuICAgIHJlcXVlc3RQYXlsb2FkOiB0cnVlLFxuICAgIHJlcG9ydGVyczogW1xuICAgICAge1xuICAgICAgICByZXBvcnRlcjogbG9nUmVwb3J0ZXIsXG4gICAgICAgIGNvbmZpZzoge1xuICAgICAgICAgIGpzb246IGNvbmZpZy5nZXQoJ2xvZ2dpbmcuanNvbicpLFxuICAgICAgICAgIGRlc3Q6IGNvbmZpZy5nZXQoJ2xvZ2dpbmcuZGVzdCcpLFxuICAgICAgICAgIC8vIEknbSBhZGRpbmcgdGhlIGRlZmF1bHQgaGVyZSBiZWNhdXNlIGlmIHlvdSBhZGQgYW5vdGhlciBmaWx0ZXJcbiAgICAgICAgICAvLyB1c2luZyB0aGUgY29tbWFuZGxpbmUgaXQgd2lsbCByZW1vdmUgYXV0aG9yaXphdGlvbi4gSSB3YW50IHVzZXJzXG4gICAgICAgICAgLy8gdG8gaGF2ZSB0byBleHBsaWNpdGx5IHNldCAtLWxvZ2dpbmcuZmlsdGVyLmF1dGhvcml6YXRpb249bm9uZSB0b1xuICAgICAgICAgIC8vIGhhdmUgaXQgc2hvdyB1cCBpbnQgaGUgbG9ncy5cbiAgICAgICAgICBmaWx0ZXI6IF8uZGVmYXVsdHMoY29uZmlnLmdldCgnbG9nZ2luZy5maWx0ZXInKSwge1xuICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogJ3JlbW92ZSdcbiAgICAgICAgICB9KVxuICAgICAgICB9LFxuICAgICAgICBldmVudHM6IF8udHJhbnNmb3JtKGV2ZW50cywgZnVuY3Rpb24gKGZpbHRlcmVkLCB2YWwsIGtleSkge1xuICAgICAgICAgIC8vIHByb3ZpZGUgYSBzdHJpbmcgY29tcGF0aWJsZSB3YXkgdG8gcmVtb3ZlIGV2ZW50c1xuICAgICAgICAgIGlmICh2YWwgIT09ICchJykgZmlsdGVyZWRba2V5XSA9IHZhbDtcbiAgICAgICAgfSwge30pXG4gICAgICB9XG4gICAgXVxuICB9O1xuICByZXR1cm4gb3B0aW9ucztcbn1cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/logging/configuration.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAGwB,oBAAoB;;;;sBAH9B,QAAQ;;;;4BACE,gBAAgB;;;;AAEzB,SAAS,oBAAoB,CAAC,MAAM,EAAE;AACnD,MAAI,MAAM,GAAG,MAAM,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;;AAE1C,MAAI,MAAM,CAAC,GAAG,CAAC,gBAAgB,CAAC,EAAE;AAChC,wBAAE,QAAQ,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;GACxB,MACI,IAAI,MAAM,CAAC,GAAG,CAAC,eAAe,CAAC,EAAE;AACpC,wBAAE,QAAQ,CAAC,MAAM,EAAE;AACjB,SAAG,EAAE,CAAC,WAAW,EAAE,OAAO,EAAE,OAAO,CAAC;AACpC,aAAO,EAAE,CAAC,OAAO,CAAC;AAClB,WAAK,EAAE,GAAG;KACX,CAAC,CAAC;GACJ,MACI,IAAI,MAAM,CAAC,GAAG,CAAC,iBAAiB,CAAC,EAAE;AACtC,wBAAE,QAAQ,CAAC,MAAM,EAAE;AACjB,SAAG,EAAE,GAAG;AACR,SAAG,EAAE,GAAG;AACR,aAAO,EAAE,GAAG;AACZ,cAAQ,EAAE,GAAG;AACb,WAAK,EAAE,GAAG;KACX,CAAC,CAAC;GACJ,MACI;AACH,wBAAE,QAAQ,CAAC,MAAM,EAAE;AACjB,SAAG,EAAE,CAAC,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,OAAO,CAAC;AAC1C,cAAQ,EAAE,MAAM,CAAC,GAAG,CAAC,cAAc,CAAC,GAAG,GAAG,GAAG,GAAG;AAChD,aAAO,EAAE,CAAC,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,OAAO,CAAC;AAC9C,WAAK,EAAE,GAAG;KACX,CAAC,CAAC;GACJ;;AAED,MAAM,OAAO,GAAG;AACd,eAAW,EAAE,MAAM,CAAC,GAAG,CAAC,cAAc,CAAC;AACvC,kBAAc,EAAE,IAAI;AACpB,kBAAc,EAAE,IAAI;AACpB,aAAS,EAAE,CACT;AACE,cAAQ,2BAAa;AACrB,YAAM,EAAE;AACN,YAAI,EAAE,MAAM,CAAC,GAAG,CAAC,cAAc,CAAC;AAChC,YAAI,EAAE,MAAM,CAAC,GAAG,CAAC,cAAc,CAAC;;;;;AAKhC,cAAM,EAAE,oBAAE,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,gBAAgB,CAAC,EAAE;AAC/C,uBAAa,EAAE,QAAQ;SACxB,CAAC;OACH;AACD,YAAM,EAAE,oBAAE,SAAS,CAAC,MAAM,EAAE,UAAU,QAAQ,EAAE,GAAG,EAAE,GAAG,EAAE;;AAExD,YAAI,GAAG,KAAK,GAAG,EAAE,QAAQ,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC;OACtC,EAAE,EAAE,CAAC;KACP,CACF;GACF,CAAC;AACF,SAAO,OAAO,CAAC;CAChB",
      "file": "/home/vio/v3metrics/src/server/logging/configuration.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport logReporter from './log_reporter';\n\nexport default function loggingConfiguration(config) {\n  let events = config.get('logging.events');\n\n  if (config.get('logging.silent')) {\n    _.defaults(events, {});\n  }\n  else if (config.get('logging.quiet')) {\n    _.defaults(events, {\n      log: ['listening', 'error', 'fatal'],\n      request: ['error'],\n      error: '*'\n    });\n  }\n  else if (config.get('logging.verbose')) {\n    _.defaults(events, {\n      log: '*',\n      ops: '*',\n      request: '*',\n      response: '*',\n      error: '*'\n    });\n  }\n  else {\n    _.defaults(events, {\n      log: ['info', 'warning', 'error', 'fatal'],\n      response: config.get('logging.json') ? '*' : '!',\n      request: ['info', 'warning', 'error', 'fatal'],\n      error: '*'\n    });\n  }\n\n  const options = {\n    opsInterval: config.get('ops.interval'),\n    requestHeaders: true,\n    requestPayload: true,\n    reporters: [\n      {\n        reporter: logReporter,\n        config: {\n          json: config.get('logging.json'),\n          dest: config.get('logging.dest'),\n          // I'm adding the default here because if you add another filter\n          // using the commandline it will remove authorization. I want users\n          // to have to explicitly set --logging.filter.authorization=none to\n          // have it show up int he logs.\n          filter: _.defaults(config.get('logging.filter'), {\n            authorization: 'remove'\n          })\n        },\n        events: _.transform(events, function (filtered, val, key) {\n          // provide a string compatible way to remove events\n          if (val !== '!') filtered[key] = val;\n        }, {})\n      }\n    ]\n  };\n  return options;\n}\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/logging/log_reporter.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "./log_format_json",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "LogFormatJson"
              }
            ]
          },
          {
            "source": "./log_format_string",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "LogFormatString"
              }
            ]
          },
          {
            "source": "good-squeeze",
            "imported": [
              "Squeeze"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Squeeze",
                "local": "Squeeze"
              }
            ]
          },
          {
            "source": "fs",
            "imported": [
              "createWriteStream"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "createWriteStream",
                "local": "writeStr"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _log_format_json = require('./log_format_json');\n\nvar _log_format_json2 = _interopRequireDefault(_log_format_json);\n\nvar _log_format_string = require('./log_format_string');\n\nvar _log_format_string2 = _interopRequireDefault(_log_format_string);\n\nvar _goodSqueeze = require('good-squeeze');\n\nvar _fs = require('fs');\n\nmodule.exports = (function () {\n  function KbnLogger(events, config) {\n    _classCallCheck(this, KbnLogger);\n\n    this.squeeze = new _goodSqueeze.Squeeze(events);\n    this.format = config.json ? new _log_format_json2['default'](config) : new _log_format_string2['default'](config);\n\n    if (config.dest === 'stdout') {\n      this.dest = process.stdout;\n    } else {\n      this.dest = (0, _fs.createWriteStream)(config.dest, {\n        flags: 'a',\n        encoding: 'utf8'\n      });\n    }\n  }\n\n  _createClass(KbnLogger, [{\n    key: 'init',\n    value: function init(readstream, emitter, callback) {\n      var _this = this;\n\n      this.output = readstream.pipe(this.squeeze).pipe(this.format);\n      this.output.pipe(this.dest);\n\n      emitter.on('stop', function () {\n        _this.output.unpipe(_this.dest);\n      });\n\n      callback();\n    }\n  }]);\n\n  return KbnLogger;\n})();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9sb2dnaW5nL2xvZ19yZXBvcnRlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7OztzQkFBYyxRQUFROzs7OytCQUVJLG1CQUFtQjs7OztpQ0FDakIscUJBQXFCOzs7OzJCQUN6QixjQUFjOztrQkFDUSxJQUFJOztBQUVsRCxNQUFNLENBQUMsT0FBTztBQUNELFdBRFUsU0FBUyxDQUNsQixNQUFNLEVBQUUsTUFBTSxFQUFFOzBCQURQLFNBQVM7O0FBRTVCLFFBQUksQ0FBQyxPQUFPLEdBQUcseUJBQVksTUFBTSxDQUFDLENBQUM7QUFDbkMsUUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUMsSUFBSSxHQUFHLGlDQUFrQixNQUFNLENBQUMsR0FBRyxtQ0FBb0IsTUFBTSxDQUFDLENBQUM7O0FBRXBGLFFBQUksTUFBTSxDQUFDLElBQUksS0FBSyxRQUFRLEVBQUU7QUFDNUIsVUFBSSxDQUFDLElBQUksR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDO0tBQzVCLE1BQU07QUFDTCxVQUFJLENBQUMsSUFBSSxHQUFHLDJCQUFTLE1BQU0sQ0FBQyxJQUFJLEVBQUU7QUFDaEMsYUFBSyxFQUFFLEdBQUc7QUFDVixnQkFBUSxFQUFFLE1BQU07T0FDakIsQ0FBQyxDQUFDO0tBQ0o7R0FDRjs7ZUFib0IsU0FBUzs7V0FlMUIsY0FBQyxVQUFVLEVBQUUsT0FBTyxFQUFFLFFBQVEsRUFBRTs7O0FBRWxDLFVBQUksQ0FBQyxNQUFNLEdBQUcsVUFBVSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUM5RCxVQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7O0FBRTVCLGFBQU8sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLFlBQU07QUFDdkIsY0FBSyxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQUssSUFBSSxDQUFDLENBQUM7T0FDL0IsQ0FBQyxDQUFDOztBQUVILGNBQVEsRUFBRSxDQUFDO0tBQ1o7OztTQXpCb0IsU0FBUztJQTBCL0IsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9zZXJ2ZXIvbG9nZ2luZy9sb2dfcmVwb3J0ZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQgTG9nRm9ybWF0SnNvbiBmcm9tICcuL2xvZ19mb3JtYXRfanNvbic7XG5pbXBvcnQgTG9nRm9ybWF0U3RyaW5nIGZyb20gJy4vbG9nX2Zvcm1hdF9zdHJpbmcnO1xuaW1wb3J0IHsgU3F1ZWV6ZSB9IGZyb20gJ2dvb2Qtc3F1ZWV6ZSc7XG5pbXBvcnQgeyBjcmVhdGVXcml0ZVN0cmVhbSBhcyB3cml0ZVN0ciB9IGZyb20gJ2ZzJztcblxubW9kdWxlLmV4cG9ydHMgPSBjbGFzcyBLYm5Mb2dnZXIge1xuICBjb25zdHJ1Y3RvcihldmVudHMsIGNvbmZpZykge1xuICAgIHRoaXMuc3F1ZWV6ZSA9IG5ldyBTcXVlZXplKGV2ZW50cyk7XG4gICAgdGhpcy5mb3JtYXQgPSBjb25maWcuanNvbiA/IG5ldyBMb2dGb3JtYXRKc29uKGNvbmZpZykgOiBuZXcgTG9nRm9ybWF0U3RyaW5nKGNvbmZpZyk7XG5cbiAgICBpZiAoY29uZmlnLmRlc3QgPT09ICdzdGRvdXQnKSB7XG4gICAgICB0aGlzLmRlc3QgPSBwcm9jZXNzLnN0ZG91dDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kZXN0ID0gd3JpdGVTdHIoY29uZmlnLmRlc3QsIHtcbiAgICAgICAgZmxhZ3M6ICdhJyxcbiAgICAgICAgZW5jb2Rpbmc6ICd1dGY4J1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgaW5pdChyZWFkc3RyZWFtLCBlbWl0dGVyLCBjYWxsYmFjaykge1xuXG4gICAgdGhpcy5vdXRwdXQgPSByZWFkc3RyZWFtLnBpcGUodGhpcy5zcXVlZXplKS5waXBlKHRoaXMuZm9ybWF0KTtcbiAgICB0aGlzLm91dHB1dC5waXBlKHRoaXMuZGVzdCk7XG5cbiAgICBlbWl0dGVyLm9uKCdzdG9wJywgKCkgPT4ge1xuICAgICAgdGhpcy5vdXRwdXQudW5waXBlKHRoaXMuZGVzdCk7XG4gICAgfSk7XG5cbiAgICBjYWxsYmFjaygpO1xuICB9XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/logging/log_reporter.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;sBAAc,QAAQ;;;;+BAEI,mBAAmB;;;;iCACjB,qBAAqB;;;;2BACzB,cAAc;;kBACQ,IAAI;;AAElD,MAAM,CAAC,OAAO;AACD,WADU,SAAS,CAClB,MAAM,EAAE,MAAM,EAAE;0BADP,SAAS;;AAE5B,QAAI,CAAC,OAAO,GAAG,yBAAY,MAAM,CAAC,CAAC;AACnC,QAAI,CAAC,MAAM,GAAG,MAAM,CAAC,IAAI,GAAG,iCAAkB,MAAM,CAAC,GAAG,mCAAoB,MAAM,CAAC,CAAC;;AAEpF,QAAI,MAAM,CAAC,IAAI,KAAK,QAAQ,EAAE;AAC5B,UAAI,CAAC,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC;KAC5B,MAAM;AACL,UAAI,CAAC,IAAI,GAAG,2BAAS,MAAM,CAAC,IAAI,EAAE;AAChC,aAAK,EAAE,GAAG;AACV,gBAAQ,EAAE,MAAM;OACjB,CAAC,CAAC;KACJ;GACF;;eAboB,SAAS;;WAe1B,cAAC,UAAU,EAAE,OAAO,EAAE,QAAQ,EAAE;;;AAElC,UAAI,CAAC,MAAM,GAAG,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AAC9D,UAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;;AAE5B,aAAO,CAAC,EAAE,CAAC,MAAM,EAAE,YAAM;AACvB,cAAK,MAAM,CAAC,MAAM,CAAC,MAAK,IAAI,CAAC,CAAC;OAC/B,CAAC,CAAC;;AAEH,cAAQ,EAAE,CAAC;KACZ;;;SAzBoB,SAAS;IA0B/B,CAAC",
      "file": "/home/vio/v3metrics/src/server/logging/log_reporter.js",
      "sourcesContent": [
        "import _ from 'lodash';\n\nimport LogFormatJson from './log_format_json';\nimport LogFormatString from './log_format_string';\nimport { Squeeze } from 'good-squeeze';\nimport { createWriteStream as writeStr } from 'fs';\n\nmodule.exports = class KbnLogger {\n  constructor(events, config) {\n    this.squeeze = new Squeeze(events);\n    this.format = config.json ? new LogFormatJson(config) : new LogFormatString(config);\n\n    if (config.dest === 'stdout') {\n      this.dest = process.stdout;\n    } else {\n      this.dest = writeStr(config.dest, {\n        flags: 'a',\n        encoding: 'utf8'\n      });\n    }\n  }\n\n  init(readstream, emitter, callback) {\n\n    this.output = readstream.pipe(this.squeeze).pipe(this.format);\n    this.output.pipe(this.dest);\n\n    emitter.on('stop', () => {\n      this.output.unpipe(this.dest);\n    });\n\n    callback();\n  }\n};\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/logging/log_format_json.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./log_format",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "LogFormat"
              }
            ]
          },
          {
            "source": "json-stringify-safe",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "stringify"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "get",
        "inherits",
        "create-class",
        "class-call-check",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _log_format = require('./log_format');\n\nvar _log_format2 = _interopRequireDefault(_log_format);\n\nvar _jsonStringifySafe = require('json-stringify-safe');\n\nvar _jsonStringifySafe2 = _interopRequireDefault(_jsonStringifySafe);\n\nvar stripColors = function stripColors(string) {\n  return string.replace(/\\u001b[^m]+m/g, '');\n};\n\nmodule.exports = (function (_LogFormat) {\n  _inherits(KbnLoggerJsonFormat, _LogFormat);\n\n  function KbnLoggerJsonFormat() {\n    _classCallCheck(this, KbnLoggerJsonFormat);\n\n    _get(Object.getPrototypeOf(KbnLoggerJsonFormat.prototype), 'constructor', this).apply(this, arguments);\n  }\n\n  _createClass(KbnLoggerJsonFormat, [{\n    key: 'format',\n    value: function format(data) {\n      data.message = stripColors(data.message);\n      return (0, _jsonStringifySafe2['default'])(data);\n    }\n  }]);\n\n  return KbnLoggerJsonFormat;\n})(_log_format2['default']);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9sb2dnaW5nL2xvZ19mb3JtYXRfanNvbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7MEJBQXNCLGNBQWM7Ozs7aUNBQ2QscUJBQXFCOzs7O0FBRTNDLElBQUksV0FBVyxHQUFHLFNBQWQsV0FBVyxDQUFhLE1BQU0sRUFBRTtBQUNsQyxTQUFPLE1BQU0sQ0FBQyxPQUFPLENBQUMsZUFBZSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0NBQzVDLENBQUM7O0FBRUYsTUFBTSxDQUFDLE9BQU87WUFBUyxtQkFBbUI7O1dBQW5CLG1CQUFtQjswQkFBbkIsbUJBQW1COzsrQkFBbkIsbUJBQW1COzs7ZUFBbkIsbUJBQW1COztXQUNsQyxnQkFBQyxJQUFJLEVBQUU7QUFDWCxVQUFJLENBQUMsT0FBTyxHQUFHLFdBQVcsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDekMsYUFBTyxvQ0FBVSxJQUFJLENBQUMsQ0FBQztLQUN4Qjs7O1NBSm9CLG1CQUFtQjsyQkFLekMsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9zZXJ2ZXIvbG9nZ2luZy9sb2dfZm9ybWF0X2pzb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTG9nRm9ybWF0IGZyb20gJy4vbG9nX2Zvcm1hdCc7XG5pbXBvcnQgc3RyaW5naWZ5IGZyb20gJ2pzb24tc3RyaW5naWZ5LXNhZmUnO1xuXG5sZXQgc3RyaXBDb2xvcnMgPSBmdW5jdGlvbiAoc3RyaW5nKSB7XG4gIHJldHVybiBzdHJpbmcucmVwbGFjZSgvXFx1MDAxYltebV0rbS9nLCAnJyk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIEtibkxvZ2dlckpzb25Gb3JtYXQgZXh0ZW5kcyBMb2dGb3JtYXQge1xuICBmb3JtYXQoZGF0YSkge1xuICAgIGRhdGEubWVzc2FnZSA9IHN0cmlwQ29sb3JzKGRhdGEubWVzc2FnZSk7XG4gICAgcmV0dXJuIHN0cmluZ2lmeShkYXRhKTtcbiAgfVxufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/logging/log_format_json.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;;;0BAAsB,cAAc;;;;iCACd,qBAAqB;;;;AAE3C,IAAI,WAAW,GAAG,SAAd,WAAW,CAAa,MAAM,EAAE;AAClC,SAAO,MAAM,CAAC,OAAO,CAAC,eAAe,EAAE,EAAE,CAAC,CAAC;CAC5C,CAAC;;AAEF,MAAM,CAAC,OAAO;YAAS,mBAAmB;;WAAnB,mBAAmB;0BAAnB,mBAAmB;;+BAAnB,mBAAmB;;;eAAnB,mBAAmB;;WAClC,gBAAC,IAAI,EAAE;AACX,UAAI,CAAC,OAAO,GAAG,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;AACzC,aAAO,oCAAU,IAAI,CAAC,CAAC;KACxB;;;SAJoB,mBAAmB;2BAKzC,CAAC",
      "file": "/home/vio/v3metrics/src/server/logging/log_format_json.js",
      "sourcesContent": [
        "import LogFormat from './log_format';\nimport stringify from 'json-stringify-safe';\n\nlet stripColors = function (string) {\n  return string.replace(/\\u001b[^m]+m/g, '');\n};\n\nmodule.exports = class KbnLoggerJsonFormat extends LogFormat {\n  format(data) {\n    data.message = stripColors(data.message);\n    return stringify(data);\n  }\n};\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/logging/log_format.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "stream",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Stream"
              }
            ]
          },
          {
            "source": "moment",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "moment"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "@spalger/numeral",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "numeral"
              }
            ]
          },
          {
            "source": "ansicolors",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "ansicolors"
              }
            ]
          },
          {
            "source": "json-stringify-safe",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "stringify"
              }
            ]
          },
          {
            "source": "querystring",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "querystring"
              }
            ]
          },
          {
            "source": "./apply_filters_to_keys",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "applyFiltersToKeys"
              }
            ]
          },
          {
            "source": "util",
            "imported": [
              "inspect"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "inspect",
                "local": "inspect"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "get",
        "inherits",
        "create-class",
        "class-call-check",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _stream = require('stream');\n\nvar _stream2 = _interopRequireDefault(_stream);\n\nvar _moment = require('moment');\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _spalgerNumeral = require('@spalger/numeral');\n\nvar _spalgerNumeral2 = _interopRequireDefault(_spalgerNumeral);\n\nvar _ansicolors = require('ansicolors');\n\nvar _ansicolors2 = _interopRequireDefault(_ansicolors);\n\nvar _jsonStringifySafe = require('json-stringify-safe');\n\nvar _jsonStringifySafe2 = _interopRequireDefault(_jsonStringifySafe);\n\nvar _querystring = require('querystring');\n\nvar _querystring2 = _interopRequireDefault(_querystring);\n\nvar _apply_filters_to_keys = require('./apply_filters_to_keys');\n\nvar _apply_filters_to_keys2 = _interopRequireDefault(_apply_filters_to_keys);\n\nvar _util = require('util');\n\nfunction serializeError(err) {\n  return {\n    message: err.message,\n    name: err.name,\n    stack: err.stack,\n    code: err.code,\n    signal: err.signal\n  };\n}\n\nvar levelColor = function levelColor(code) {\n  if (code < 299) return _ansicolors2['default'].green(code);\n  if (code < 399) return _ansicolors2['default'].yellow(code);\n  if (code < 499) return _ansicolors2['default'].magenta(code);\n  return _ansicolors2['default'].red(code);\n};\n\nmodule.exports = (function (_Stream$Transform) {\n  _inherits(TransformObjStream, _Stream$Transform);\n\n  function TransformObjStream(config) {\n    _classCallCheck(this, TransformObjStream);\n\n    _get(Object.getPrototypeOf(TransformObjStream.prototype), 'constructor', this).call(this, {\n      readableObjectMode: false,\n      writableObjectMode: true\n    });\n    this.config = config;\n  }\n\n  _createClass(TransformObjStream, [{\n    key: 'filter',\n    value: function filter(data) {\n      if (!this.config.filter) return data;\n      return (0, _apply_filters_to_keys2['default'])(data, this.config.filter);\n    }\n  }, {\n    key: '_transform',\n    value: function _transform(event, enc, next) {\n      var data = this.filter(this.readEvent(event));\n      this.push(this.format(data) + '\\n');\n      next();\n    }\n  }, {\n    key: 'readEvent',\n    value: function readEvent(event) {\n      var data = {\n        type: event.event,\n        '@timestamp': _moment2['default'].utc(event.timestamp).format(),\n        tags: [].concat(event.tags || []),\n        pid: event.pid\n      };\n\n      if (data.type === 'response') {\n        _lodash2['default'].defaults(data, _lodash2['default'].pick(event, ['method', 'statusCode']));\n\n        data.req = {\n          url: event.path,\n          method: event.method,\n          headers: event.headers,\n          remoteAddress: event.source.remoteAddress,\n          userAgent: event.source.remoteAddress,\n          referer: event.source.referer\n        };\n\n        var contentLength = 0;\n        if (typeof event.responsePayload === 'object') {\n          contentLength = (0, _jsonStringifySafe2['default'])(event.responsePayload).length;\n        } else {\n          contentLength = String(event.responsePayload).length;\n        }\n\n        data.res = {\n          statusCode: event.statusCode,\n          responseTime: event.responseTime,\n          contentLength: contentLength\n        };\n\n        var query = _querystring2['default'].stringify(event.query);\n        if (query) data.req.url += '?' + query;\n\n        data.message = data.req.method.toUpperCase() + ' ';\n        data.message += data.req.url;\n        data.message += ' ';\n        data.message += levelColor(data.res.statusCode);\n        data.message += ' ';\n        data.message += _ansicolors2['default'].brightBlack(data.res.responseTime + 'ms');\n        data.message += _ansicolors2['default'].brightBlack(' - ' + (0, _spalgerNumeral2['default'])(contentLength).format('0.0b'));\n      } else if (data.type === 'ops') {\n        _lodash2['default'].defaults(data, _lodash2['default'].pick(event, ['pid', 'os', 'proc', 'load']));\n        data.message = _ansicolors2['default'].brightBlack('memory: ');\n        data.message += (0, _spalgerNumeral2['default'])(data.proc.mem.heapUsed).format('0.0b');\n        data.message += ' ';\n        data.message += _ansicolors2['default'].brightBlack('uptime: ');\n        data.message += (0, _spalgerNumeral2['default'])(data.proc.uptime).format('00:00:00');\n        data.message += ' ';\n        data.message += _ansicolors2['default'].brightBlack('load: [');\n        data.message += data.os.load.map(function (val) {\n          return (0, _spalgerNumeral2['default'])(val).format('0.00');\n        }).join(' ');\n        data.message += _ansicolors2['default'].brightBlack(']');\n        data.message += ' ';\n        data.message += _ansicolors2['default'].brightBlack('delay: ');\n        data.message += (0, _spalgerNumeral2['default'])(data.proc.delay).format('0.000');\n      } else if (data.type === 'error') {\n        data.level = 'error';\n        data.message = event.error.message;\n        data.error = serializeError(event.error);\n        data.url = event.url;\n      } else if (event.data instanceof Error) {\n        data.level = _lodash2['default'].contains(event.tags, 'fatal') ? 'fatal' : 'error';\n        data.message = event.data.message;\n        data.error = serializeError(event.data);\n      } else if (_lodash2['default'].isPlainObject(event.data) && event.data.tmpl) {\n        _lodash2['default'].assign(data, event.data);\n        data.tmpl = undefined;\n        data.message = _lodash2['default'].template(event.data.tmpl)(event.data);\n      } else {\n        data.message = _lodash2['default'].isString(event.data) ? event.data : (0, _util.inspect)(event.data);\n      }\n      return data;\n    }\n  }]);\n\n  return TransformObjStream;\n})(_stream2['default'].Transform);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9sb2dnaW5nL2xvZ19mb3JtYXQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O3NCQUFtQixRQUFROzs7O3NCQUNSLFFBQVE7Ozs7c0JBQ2IsUUFBUTs7Ozs4QkFDRixrQkFBa0I7Ozs7MEJBQ2YsWUFBWTs7OztpQ0FDYixxQkFBcUI7Ozs7MkJBQ25CLGFBQWE7Ozs7cUNBQ04seUJBQXlCOzs7O29CQUNoQyxNQUFNOztBQUU5QixTQUFTLGNBQWMsQ0FBQyxHQUFHLEVBQUU7QUFDM0IsU0FBTztBQUNMLFdBQU8sRUFBRSxHQUFHLENBQUMsT0FBTztBQUNwQixRQUFJLEVBQUUsR0FBRyxDQUFDLElBQUk7QUFDZCxTQUFLLEVBQUUsR0FBRyxDQUFDLEtBQUs7QUFDaEIsUUFBSSxFQUFFLEdBQUcsQ0FBQyxJQUFJO0FBQ2QsVUFBTSxFQUFFLEdBQUcsQ0FBQyxNQUFNO0dBQ25CLENBQUM7Q0FDSDs7QUFFRCxJQUFJLFVBQVUsR0FBRyxTQUFiLFVBQVUsQ0FBYSxJQUFJLEVBQUU7QUFDL0IsTUFBSSxJQUFJLEdBQUcsR0FBRyxFQUFFLE9BQU8sd0JBQVcsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQzlDLE1BQUksSUFBSSxHQUFHLEdBQUcsRUFBRSxPQUFPLHdCQUFXLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUMvQyxNQUFJLElBQUksR0FBRyxHQUFHLEVBQUUsT0FBTyx3QkFBVyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDaEQsU0FBTyx3QkFBVyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7Q0FDN0IsQ0FBQzs7QUFHRixNQUFNLENBQUMsT0FBTztZQUFTLGtCQUFrQjs7QUFDNUIsV0FEVSxrQkFBa0IsQ0FDM0IsTUFBTSxFQUFFOzBCQURDLGtCQUFrQjs7QUFFckMsK0JBRm1CLGtCQUFrQiw2Q0FFL0I7QUFDSix3QkFBa0IsRUFBRSxLQUFLO0FBQ3pCLHdCQUFr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QUssQ0FBQyxJQUFJLENBQUMsSUFBSSxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRTtBQUN2RCw0QkFBRSxNQUFNLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUMzQixZQUFJLENBQUMsSUFBSSxHQUFHLFNBQVMsQ0FBQztBQUN0QixZQUFJLENBQUMsT0FBTyxHQUFHLG9CQUFFLFFBQVEsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztPQUN4RCxNQUNJO0FBQ0gsWUFBSSxDQUFDLE9BQU8sR0FBRyxvQkFBRSxRQUFRLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLEtBQUssQ0FBQyxJQUFJLEdBQUcsbUJBQVEsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO09BQzFFO0FBQ0QsYUFBTyxJQUFJLENBQUM7S0FDYjs7O1NBOUdvQixrQkFBa0I7R0FBUyxvQkFBTyxTQUFTLENBK0dqRSxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9sb2dnaW5nL2xvZ19mb3JtYXQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgU3RyZWFtIGZyb20gJ3N0cmVhbSc7XG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IG51bWVyYWwgZnJvbSAnQHNwYWxnZXIvbnVtZXJhbCc7XG5pbXBvcnQgYW5zaWNvbG9ycyBmcm9tICdhbnNpY29sb3JzJztcbmltcG9ydCBzdHJpbmdpZnkgZnJvbSAnanNvbi1zdHJpbmdpZnktc2FmZSc7XG5pbXBvcnQgcXVlcnlzdHJpbmcgZnJvbSAncXVlcnlzdHJpbmcnO1xuaW1wb3J0IGFwcGx5RmlsdGVyc1RvS2V5cyBmcm9tICcuL2FwcGx5X2ZpbHRlcnNfdG9fa2V5cyc7XG5pbXBvcnQgeyBpbnNwZWN0IH0gZnJvbSAndXRpbCc7XG5cbmZ1bmN0aW9uIHNlcmlhbGl6ZUVycm9yKGVycikge1xuICByZXR1cm4ge1xuICAgIG1lc3NhZ2U6IGVyci5tZXNzYWdlLFxuICAgIG5hbWU6IGVyci5uYW1lLFxuICAgIHN0YWNrOiBlcnIuc3RhY2ssXG4gICAgY29kZTogZXJyLmNvZGUsXG4gICAgc2lnbmFsOiBlcnIuc2lnbmFsXG4gIH07XG59XG5cbmxldCBsZXZlbENvbG9yID0gZnVuY3Rpb24gKGNvZGUpIHtcbiAgaWYgKGNvZGUgPCAyOTkpIHJldHVybiBhbnNpY29sb3JzLmdyZWVuKGNvZGUpO1xuICBpZiAoY29kZSA8IDM5OSkgcmV0dXJuIGFuc2ljb2xvcnMueWVsbG93KGNvZGUpO1xuICBpZiAoY29kZSA8IDQ5OSkgcmV0dXJuIGFuc2ljb2xvcnMubWFnZW50YShjb2RlKTtcbiAgcmV0dXJuIGFuc2ljb2xvcnMucmVkKGNvZGUpO1xufTtcblxuXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIFRyYW5zZm9ybU9ialN0cmVhbSBleHRlbmRzIFN0cmVhbS5UcmFuc2Zvcm0ge1xuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICBzdXBlcih7XG4gICAgICByZWFkYWJsZU9iamVjdE1vZGU6IGZhbHNlLFxuICAgICAgd3JpdGFibGVPYmplY3RNb2RlOiB0cnVlXG4gICAgfSk7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gIH1cblxuICBmaWx0ZXIoZGF0YSkge1xuICAgIGlmICghdGhpcy5jb25maWcuZmlsdGVyKSByZXR1cm4gZGF0YTtcbiAgICByZXR1cm4gYXBwbHlGaWx0ZXJzVG9LZXlzKGRhdGEsIHRoaXMuY29uZmlnLmZpbHRlcik7XG4gIH1cblxuICBfdHJhbnNmb3JtKGV2ZW50LCBlbmMsIG5leHQpIHtcbiAgICBsZXQgZGF0YSA9IHRoaXMuZmlsdGVyKHRoaXMucmVhZEV2ZW50KGV2ZW50KSk7XG4gICAgdGhpcy5wdXNoKHRoaXMuZm9ybWF0KGRhdGEpICsgJ1xcbicpO1xuICAgIG5leHQoKTtcbiAgfVxuXG4gIHJlYWRFdmVudChldmVudCkge1xuICAgIGxldCBkYXRhID0ge1xuICAgICAgdHlwZTogZXZlbnQuZXZlbnQsXG4gICAgICAnQHRpbWVzdGFtcCc6IG1vbWVudC51dGMoZXZlbnQudGltZXN0YW1wKS5mb3JtYXQoKSxcbiAgICAgIHRhZ3M6IFtdLmNvbmNhdChldmVudC50YWdzIHx8IFtdKSxcbiAgICAgIHBpZDogZXZlbnQucGlkXG4gICAgfTtcblxuICAgIGlmIChkYXRhLnR5cGUgPT09ICdyZXNwb25zZScpIHtcbiAgICAgIF8uZGVmYXVsdHMoZGF0YSwgXy5waWNrKGV2ZW50LCBbXG4gICAgICAgICdtZXRob2QnLFxuICAgICAgICAnc3RhdHVzQ29kZSdcbiAgICAgIF0pKTtcblxuICAgICAgZGF0YS5yZXEgPSB7XG4gICAgICAgIHVybDogZXZlbnQucGF0aCxcbiAgICAgICAgbWV0aG9kOiBldmVudC5tZXRob2QsXG4gICAgICAgIGhlYWRlcnM6IGV2ZW50LmhlYWRlcnMsXG4gICAgICAgIHJlbW90ZUFkZHJlc3M6IGV2ZW50LnNvdXJjZS5yZW1vdGVBZGRyZXNzLFxuICAgICAgICB1c2VyQWdlbnQ6IGV2ZW50LnNvdXJjZS5yZW1vdGVBZGRyZXNzLFxuICAgICAgICByZWZlcmVyOiBldmVudC5zb3VyY2UucmVmZXJlclxuICAgICAgfTtcblxuICAgICAgbGV0IGNvbnRlbnRMZW5ndGggPSAwO1xuICAgICAgaWYgKHR5cGVvZiBldmVudC5yZXNwb25zZVBheWxvYWQgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGNvbnRlbnRMZW5ndGggPSBzdHJpbmdpZnkoZXZlbnQucmVzcG9uc2VQYXlsb2FkKS5sZW5ndGg7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb250ZW50TGVuZ3RoID0gU3RyaW5nKGV2ZW50LnJlc3BvbnNlUGF5bG9hZCkubGVuZ3RoO1xuICAgICAgfVxuXG4gICAgICBkYXRhLnJlcyA9IHtcbiAgICAgICAgc3RhdHVzQ29kZTogZXZlbnQuc3RhdHVzQ29kZSxcbiAgICAgICAgcmVzcG9uc2VUaW1lOiBldmVudC5yZXNwb25zZVRpbWUsXG4gICAgICAgIGNvbnRlbnRMZW5ndGg6IGNvbnRlbnRMZW5ndGhcbiAgICAgIH07XG5cbiAgICAgIGxldCBxdWVyeSA9IHF1ZXJ5c3RyaW5nLnN0cmluZ2lmeShldmVudC5xdWVyeSk7XG4gICAgICBpZiAocXVlcnkpIGRhdGEucmVxLnVybCArPSAnPycgKyBxdWVyeTtcblxuXG4gICAgICBkYXRhLm1lc3NhZ2UgID0gZGF0YS5yZXEubWV0aG9kLnRvVXBwZXJDYXNlKCkgKyAnICc7XG4gICAgICBkYXRhLm1lc3NhZ2UgKz0gZGF0YS5yZXEudXJsO1xuICAgICAgZGF0YS5tZXNzYWdlICs9ICcgJztcbiAgICAgIGRhdGEubWVzc2FnZSArPSBsZXZlbENvbG9yKGRhdGEucmVzLnN0YXR1c0NvZGUpO1xuICAgICAgZGF0YS5tZXNzYWdlICs9ICcgJztcbiAgICAgIGRhdGEubWVzc2FnZSArPSBhbnNpY29sb3JzLmJyaWdodEJsYWNrKGRhdGEucmVzLnJlc3BvbnNlVGltZSArICdtcycpO1xuICAgICAgZGF0YS5tZXNzYWdlICs9IGFuc2ljb2xvcnMuYnJpZ2h0QmxhY2soJyAtICcgKyBudW1lcmFsKGNvbnRlbnRMZW5ndGgpLmZvcm1hdCgnMC4wYicpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZGF0YS50eXBlID09PSAnb3BzJykge1xuICAgICAgXy5kZWZhdWx0cyhkYXRhLCBfLnBpY2soZXZlbnQsIFtcbiAgICAgICAgJ3BpZCcsXG4gICAgICAgICdvcycsXG4gICAgICAgICdwcm9jJyxcbiAgICAgICAgJ2xvYWQnXG4gICAgICBdKSk7XG4gICAgICBkYXRhLm1lc3NhZ2UgID0gYW5zaWNvbG9ycy5icmlnaHRCbGFjaygnbWVtb3J5OiAnKTtcbiAgICAgIGRhdGEubWVzc2FnZSArPSBudW1lcmFsKGRhdGEucHJvYy5tZW0uaGVhcFVzZWQpLmZvcm1hdCgnMC4wYicpO1xuICAgICAgZGF0YS5tZXNzYWdlICs9ICcgJztcbiAgICAgIGRhdGEubWVzc2FnZSArPSBhbnNpY29sb3JzLmJyaWdodEJsYWNrKCd1cHRpbWU6ICcpO1xuICAgICAgZGF0YS5tZXNzYWdlICs9IG51bWVyYWwoZGF0YS5wcm9jLnVwdGltZSkuZm9ybWF0KCcwMDowMDowMCcpO1xuICAgICAgZGF0YS5tZXNzYWdlICs9ICcgJztcbiAgICAgIGRhdGEubWVzc2FnZSArPSBhbnNpY29sb3JzLmJyaWdodEJsYWNrKCdsb2FkOiBbJyk7XG4gICAgICBkYXRhLm1lc3NhZ2UgKz0gZGF0YS5vcy5sb2FkLm1hcChmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgIHJldHVybiBudW1lcmFsKHZhbCkuZm9ybWF0KCcwLjAwJyk7XG4gICAgICB9KS5qb2luKCcgJyk7XG4gICAgICBkYXRhLm1lc3NhZ2UgKz0gYW5zaWNvbG9ycy5icmlnaHRCbGFjaygnXScpO1xuICAgICAgZGF0YS5tZXNzYWdlICs9ICcgJztcbiAgICAgIGRhdGEubWVzc2FnZSArPSBhbnNpY29sb3JzLmJyaWdodEJsYWNrKCdkZWxheTogJyk7XG4gICAgICBkYXRhLm1lc3NhZ2UgKz0gbnVtZXJhbChkYXRhLnByb2MuZGVsYXkpLmZvcm1hdCgnMC4wMDAnKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZGF0YS50eXBlID09PSAnZXJyb3InKSB7XG4gICAgICBkYXRhLmxldmVsID0gJ2Vycm9yJztcbiAgICAgIGRhdGEubWVzc2FnZSA9IGV2ZW50LmVycm9yLm1lc3NhZ2U7XG4gICAgICBkYXRhLmVycm9yID0gc2VyaWFsaXplRXJyb3IoZXZlbnQuZXJyb3IpO1xuICAgICAgZGF0YS51cmwgPSBldmVudC51cmw7XG4gICAgfVxuICAgIGVsc2UgaWYgKGV2ZW50LmRhdGEgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgZGF0YS5sZXZlbCA9IF8uY29udGFpbnMoZXZlbnQudGFncywgJ2ZhdGFsJykgPyAnZmF0YWwnIDogJ2Vycm9yJztcbiAgICAgIGRhdGEubWVzc2FnZSA9IGV2ZW50LmRhdGEubWVzc2FnZTtcbiAgICAgIGRhdGEuZXJyb3IgPSBzZXJpYWxpemVFcnJvcihldmVudC5kYXRhKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoXy5pc1BsYWluT2JqZWN0KGV2ZW50LmRhdGEpICYmIGV2ZW50LmRhdGEudG1wbCkge1xuICAgICAgXy5hc3NpZ24oZGF0YSwgZXZlbnQuZGF0YSk7XG4gICAgICBkYXRhLnRtcGwgPSB1bmRlZmluZWQ7XG4gICAgICBkYXRhLm1lc3NhZ2UgPSBfLnRlbXBsYXRlKGV2ZW50LmRhdGEudG1wbCkoZXZlbnQuZGF0YSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgZGF0YS5tZXNzYWdlID0gXy5pc1N0cmluZyhldmVudC5kYXRhKSA/IGV2ZW50LmRhdGEgOiBpbnNwZWN0KGV2ZW50LmRhdGEpO1xuICAgIH1cbiAgICByZXR1cm4gZGF0YTtcbiAgfVxufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/logging/log_format.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/src/server/logging/log_format.js",
      "sourcesContent": [
        "import Stream from 'stream';\nimport moment from 'moment';\nimport _ from 'lodash';\nimport numeral from '@spalger/numeral';\nimport ansicolors from 'ansicolors';\nimport stringify from 'json-stringify-safe';\nimport querystring from 'querystring';\nimport applyFiltersToKeys from './apply_filters_to_keys';\nimport { inspect } from 'util';\n\nfunction serializeError(err) {\n  return {\n    message: err.message,\n    name: err.name,\n    stack: err.stack,\n    code: err.code,\n    signal: err.signal\n  };\n}\n\nlet levelColor = function (code) {\n  if (code < 299) return ansicolors.green(code);\n  if (code < 399) return ansicolors.yellow(code);\n  if (code < 499) return ansicolors.magenta(code);\n  return ansicolors.red(code);\n};\n\n\nmodule.exports = class TransformObjStream extends Stream.Transform {\n  constructor(config) {\n    super({\n      readableObjectMode: false,\n      writableObjectMode: true\n    });\n    this.config = config;\n  }\n\n  filter(data) {\n    if (!this.config.filter) return data;\n    return applyFiltersToKeys(data, this.config.filter);\n  }\n\n  _transform(event, enc, next) {\n    let data = this.filter(this.readEvent(event));\n    this.push(this.format(data) + '\\n');\n    next();\n  }\n\n  readEvent(event) {\n    let data = {\n      type: event.event,\n      '@timestamp': moment.utc(event.timestamp).format(),\n      tags: [].concat(event.tags || []),\n      pid: event.pid\n    };\n\n    if (data.type === 'response') {\n      _.defaults(data, _.pick(event, [\n        'method',\n        'statusCode'\n      ]));\n\n      data.req = {\n        url: event.path,\n        method: event.method,\n        headers: event.headers,\n        remoteAddress: event.source.remoteAddress,\n        userAgent: event.source.remoteAddress,\n        referer: event.source.referer\n      };\n\n      let contentLength = 0;\n      if (typeof event.responsePayload === 'object') {\n        contentLength = stringify(event.responsePayload).length;\n      } else {\n        contentLength = String(event.responsePayload).length;\n      }\n\n      data.res = {\n        statusCode: event.statusCode,\n        responseTime: event.responseTime,\n        contentLength: contentLength\n      };\n\n      let query = querystring.stringify(event.query);\n      if (query) data.req.url += '?' + query;\n\n\n      data.message  = data.req.method.toUpperCase() + ' ';\n      data.message += data.req.url;\n      data.message += ' ';\n      data.message += levelColor(data.res.statusCode);\n      data.message += ' ';\n      data.message += ansicolors.brightBlack(data.res.responseTime + 'ms');\n      data.message += ansicolors.brightBlack(' - ' + numeral(contentLength).format('0.0b'));\n    }\n    else if (data.type === 'ops') {\n      _.defaults(data, _.pick(event, [\n        'pid',\n        'os',\n        'proc',\n        'load'\n      ]));\n      data.message  = ansicolors.brightBlack('memory: ');\n      data.message += numeral(data.proc.mem.heapUsed).format('0.0b');\n      data.message += ' ';\n      data.message += ansicolors.brightBlack('uptime: ');\n      data.message += numeral(data.proc.uptime).format('00:00:00');\n      data.message += ' ';\n      data.message += ansicolors.brightBlack('load: [');\n      data.message += data.os.load.map(function (val) {\n        return numeral(val).format('0.00');\n      }).join(' ');\n      data.message += ansicolors.brightBlack(']');\n      data.message += ' ';\n      data.message += ansicolors.brightBlack('delay: ');\n      data.message += numeral(data.proc.delay).format('0.000');\n    }\n    else if (data.type === 'error') {\n      data.level = 'error';\n      data.message = event.error.message;\n      data.error = serializeError(event.error);\n      data.url = event.url;\n    }\n    else if (event.data instanceof Error) {\n      data.level = _.contains(event.tags, 'fatal') ? 'fatal' : 'error';\n      data.message = event.data.message;\n      data.error = serializeError(event.data);\n    }\n    else if (_.isPlainObject(event.data) && event.data.tmpl) {\n      _.assign(data, event.data);\n      data.tmpl = undefined;\n      data.message = _.template(event.data.tmpl)(event.data);\n    }\n    else {\n      data.message = _.isString(event.data) ? event.data : inspect(event.data);\n    }\n    return data;\n  }\n};\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/logging/apply_filters_to_keys.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction toPojo(obj) {\n  return JSON.parse(JSON.stringify(obj));\n}\n\nfunction replacer(match, group) {\n  return new Array(group.length + 1).join('X');\n}\n\nfunction apply(obj, key, action) {\n  for (var k in obj) {\n    if (obj.hasOwnProperty(k)) {\n      var val = obj[k];\n      if (k === key) {\n        if (action === 'remove') {\n          delete obj[k];\n        } else if (action === 'censor' && typeof val === 'object') {\n          delete obj[key];\n        } else if (action === 'censor') {\n          obj[k] = ('' + val).replace(/./g, 'X');\n        } else if (/\\/.+\\//.test(action)) {\n          var matches = action.match(/\\/(.+)\\//);\n          if (matches) {\n            var regex = new RegExp(matches[1]);\n            obj[k] = ('' + val).replace(regex, replacer);\n          }\n        }\n      } else if (typeof val === 'object') {\n        val = apply(val, key, action);\n      }\n    }\n  }\n  return obj;\n}\n\nmodule.exports = function (obj, actionsByKey) {\n  return Object.keys(actionsByKey).reduce(function (output, key) {\n    return apply(output, key, actionsByKey[key]);\n  }, toPojo(obj));\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9sb2dnaW5nL2FwcGx5X2ZpbHRlcnNfdG9fa2V5cy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLFNBQVMsTUFBTSxDQUFDLEdBQUcsRUFBRTtBQUNuQixTQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0NBQ3hDOztBQUVELFNBQVMsUUFBUSxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUU7QUFDOUIsU0FBUSxJQUFJLEtBQUssQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBRTtDQUNoRDs7QUFFRCxTQUFTLEtBQUssQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLE1BQU0sRUFBRTtBQUMvQixPQUFLLElBQUksQ0FBQyxJQUFJLEdBQUcsRUFBRztBQUNsQixRQUFJLEdBQUcsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLEVBQUU7QUFDekIsVUFBSSxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2pCLFVBQUksQ0FBQyxLQUFLLEdBQUcsRUFBRTtBQUNiLFlBQUksTUFBTSxLQUFLLFFBQVEsRUFBRTtBQUN2QixpQkFBTyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDZixNQUNJLElBQUksTUFBTSxLQUFLLFFBQVEsSUFBSSxPQUFPLEdBQUcsS0FBSyxRQUFRLEVBQUU7QUFDdkQsaUJBQU8sR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1NBQ2pCLE1BQ0ksSUFBSSxNQUFNLEtBQUssUUFBUSxFQUFFO0FBQzVCLGFBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsR0FBRyxHQUFHLENBQUEsQ0FBRSxPQUFPLENBQUMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDO1NBQ3hDLE1BQ0ksSUFBSSxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFO0FBQzlCLGNBQUksT0FBTyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDdkMsY0FBSSxPQUFPLEVBQUU7QUFDWCxnQkFBSSxLQUFLLEdBQUcsSUFBSSxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDbkMsZUFBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLEdBQUcsQ0FBQSxDQUFFLE9BQU8sQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLENBQUM7V0FDOUM7U0FDRjtPQUNGLE1BQU0sSUFBSSxPQUFPLEdBQUcsS0FBSyxRQUFRLEVBQUU7QUFDbEMsV0FBRyxHQUFHLEtBQUssQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLE1BQU0sQ0FBQyxDQUFDO09BQy9CO0tBQ0Y7R0FDRjtBQUNELFNBQU8sR0FBRyxDQUFDO0NBQ1o7O0FBRUQsTUFBTSxDQUFDLE9BQU8sR0FBRyxVQUFVLEdBQUcsRUFBRSxZQUFZLEVBQUU7QUFDNUMsU0FBTyxNQUFNLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxVQUFDLE1BQU0sRUFBRSxHQUFHLEVBQUs7QUFDdkQsV0FBTyxLQUFLLENBQUMsTUFBTSxFQUFFLEdBQUcsRUFBRSxZQUFZLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztHQUM5QyxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0NBQ2pCLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvc2VydmVyL2xvZ2dpbmcvYXBwbHlfZmlsdGVyc190b19rZXlzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gdG9Qb2pvKG9iaikge1xuICByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShvYmopKTtcbn1cblxuZnVuY3Rpb24gcmVwbGFjZXIobWF0Y2gsIGdyb3VwKSB7XG4gIHJldHVybiAobmV3IEFycmF5KGdyb3VwLmxlbmd0aCArIDEpLmpvaW4oJ1gnKSk7XG59XG5cbmZ1bmN0aW9uIGFwcGx5KG9iaiwga2V5LCBhY3Rpb24pIHtcbiAgZm9yIChsZXQgayBpbiBvYmopICB7XG4gICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShrKSkge1xuICAgICAgbGV0IHZhbCA9IG9ialtrXTtcbiAgICAgIGlmIChrID09PSBrZXkpIHtcbiAgICAgICAgaWYgKGFjdGlvbiA9PT0gJ3JlbW92ZScpIHtcbiAgICAgICAgICBkZWxldGUgb2JqW2tdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGFjdGlvbiA9PT0gJ2NlbnNvcicgJiYgdHlwZW9mIHZhbCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICBkZWxldGUgb2JqW2tleV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYWN0aW9uID09PSAnY2Vuc29yJykge1xuICAgICAgICAgIG9ialtrXSA9ICgnJyArIHZhbCkucmVwbGFjZSgvLi9nLCAnWCcpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKC9cXC8uK1xcLy8udGVzdChhY3Rpb24pKSB7XG4gICAgICAgICAgbGV0IG1hdGNoZXMgPSBhY3Rpb24ubWF0Y2goL1xcLyguKylcXC8vKTtcbiAgICAgICAgICBpZiAobWF0Y2hlcykge1xuICAgICAgICAgICAgbGV0IHJlZ2V4ID0gbmV3IFJlZ0V4cChtYXRjaGVzWzFdKTtcbiAgICAgICAgICAgIG9ialtrXSA9ICgnJyArIHZhbCkucmVwbGFjZShyZWdleCwgcmVwbGFjZXIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSAnb2JqZWN0Jykge1xuICAgICAgICB2YWwgPSBhcHBseSh2YWwsIGtleSwgYWN0aW9uKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIG9iajtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAob2JqLCBhY3Rpb25zQnlLZXkpIHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKGFjdGlvbnNCeUtleSkucmVkdWNlKChvdXRwdXQsIGtleSkgPT4ge1xuICAgIHJldHVybiBhcHBseShvdXRwdXQsIGtleSwgYWN0aW9uc0J5S2V5W2tleV0pO1xuICB9LCB0b1Bvam8ob2JqKSk7XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/logging/apply_filters_to_keys.js"
      ],
      "names": [],
      "mappings": ";;AAAA,SAAS,MAAM,CAAC,GAAG,EAAE;AACnB,SAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC;CACxC;;AAED,SAAS,QAAQ,CAAC,KAAK,EAAE,KAAK,EAAE;AAC9B,SAAQ,IAAI,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAE;CAChD;;AAED,SAAS,KAAK,CAAC,GAAG,EAAE,GAAG,EAAE,MAAM,EAAE;AAC/B,OAAK,IAAI,CAAC,IAAI,GAAG,EAAG;AAClB,QAAI,GAAG,CAAC,cAAc,CAAC,CAAC,CAAC,EAAE;AACzB,UAAI,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;AACjB,UAAI,CAAC,KAAK,GAAG,EAAE;AACb,YAAI,MAAM,KAAK,QAAQ,EAAE;AACvB,iBAAO,GAAG,CAAC,CAAC,CAAC,CAAC;SACf,MACI,IAAI,MAAM,KAAK,QAAQ,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE;AACvD,iBAAO,GAAG,CAAC,GAAG,CAAC,CAAC;SACjB,MACI,IAAI,MAAM,KAAK,QAAQ,EAAE;AAC5B,aAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,CAAA,CAAE,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;SACxC,MACI,IAAI,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE;AAC9B,cAAI,OAAO,GAAG,MAAM,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;AACvC,cAAI,OAAO,EAAE;AACX,gBAAI,KAAK,GAAG,IAAI,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;AACnC,eAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,CAAA,CAAE,OAAO,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;WAC9C;SACF;OACF,MAAM,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE;AAClC,WAAG,GAAG,KAAK,CAAC,GAAG,EAAE,GAAG,EAAE,MAAM,CAAC,CAAC;OAC/B;KACF;GACF;AACD,SAAO,GAAG,CAAC;CACZ;;AAED,MAAM,CAAC,OAAO,GAAG,UAAU,GAAG,EAAE,YAAY,EAAE;AAC5C,SAAO,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,MAAM,CAAC,UAAC,MAAM,EAAE,GAAG,EAAK;AACvD,WAAO,KAAK,CAAC,MAAM,EAAE,GAAG,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC;GAC9C,EAAE,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC;CACjB,CAAC",
      "file": "/home/vio/v3metrics/src/server/logging/apply_filters_to_keys.js",
      "sourcesContent": [
        "function toPojo(obj) {\n  return JSON.parse(JSON.stringify(obj));\n}\n\nfunction replacer(match, group) {\n  return (new Array(group.length + 1).join('X'));\n}\n\nfunction apply(obj, key, action) {\n  for (let k in obj)  {\n    if (obj.hasOwnProperty(k)) {\n      let val = obj[k];\n      if (k === key) {\n        if (action === 'remove') {\n          delete obj[k];\n        }\n        else if (action === 'censor' && typeof val === 'object') {\n          delete obj[key];\n        }\n        else if (action === 'censor') {\n          obj[k] = ('' + val).replace(/./g, 'X');\n        }\n        else if (/\\/.+\\//.test(action)) {\n          let matches = action.match(/\\/(.+)\\//);\n          if (matches) {\n            let regex = new RegExp(matches[1]);\n            obj[k] = ('' + val).replace(regex, replacer);\n          }\n        }\n      } else if (typeof val === 'object') {\n        val = apply(val, key, action);\n      }\n    }\n  }\n  return obj;\n}\n\nmodule.exports = function (obj, actionsByKey) {\n  return Object.keys(actionsByKey).reduce((output, key) => {\n    return apply(output, key, actionsByKey[key]);\n  }, toPojo(obj));\n};\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/logging/log_format_string.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "ansicolors",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "ansicolors"
              }
            ]
          },
          {
            "source": "moment",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "moment"
              }
            ]
          },
          {
            "source": "./log_format",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "LogFormat"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "get",
        "inherits",
        "create-class",
        "class-call-check",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _ansicolors = require('ansicolors');\n\nvar _ansicolors2 = _interopRequireDefault(_ansicolors);\n\nvar _moment = require('moment');\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _log_format = require('./log_format');\n\nvar _log_format2 = _interopRequireDefault(_log_format);\n\nvar statuses = ['err', 'info', 'error', 'warning', 'fatal', 'status', 'debug'];\n\nvar typeColors = {\n  log: 'blue',\n  req: 'green',\n  res: 'green',\n  ops: 'cyan',\n  config: 'cyan',\n  err: 'red',\n  info: 'green',\n  error: 'red',\n  warning: 'red',\n  fatal: 'magenta',\n  status: 'yellow',\n  debug: 'brightBlack',\n  server: 'brightBlack',\n  optmzr: 'white',\n  managr: 'green',\n  optimize: 'magenta',\n  listening: 'magenta'\n};\n\nvar color = _lodash2['default'].memoize(function (name) {\n  return _ansicolors2['default'][typeColors[name]] || _lodash2['default'].identity;\n});\n\nvar type = _lodash2['default'].memoize(function (t) {\n  return color(t)(_lodash2['default'].pad(t, 7).slice(0, 7));\n});\n\nvar workerType = process.env.kbnWorkerType ? type(process.env.kbnWorkerType) + ' ' : '';\n\nmodule.exports = (function (_LogFormat) {\n  _inherits(KbnLoggerJsonFormat, _LogFormat);\n\n  function KbnLoggerJsonFormat() {\n    _classCallCheck(this, KbnLoggerJsonFormat);\n\n    _get(Object.getPrototypeOf(KbnLoggerJsonFormat.prototype), 'constructor', this).apply(this, arguments);\n  }\n\n  _createClass(KbnLoggerJsonFormat, [{\n    key: 'format',\n    value: function format(data) {\n      var time = color('time')((0, _moment2['default'])(data.timestamp).format('HH:mm:ss.SSS'));\n      var msg = data.error ? color('error')(data.error.stack) : color('message')(data.message);\n\n      var tags = (0, _lodash2['default'])(data.tags).sortBy(function (tag) {\n        if (color(tag) === _lodash2['default'].identity) return '2' + tag;\n        if (_lodash2['default'].includes(statuses, tag)) return '0' + tag;\n        return '1' + tag;\n      }).reduce(function (s, t) {\n        return s + ('[' + color(t)(t) + ']');\n      }, '');\n\n      return '' + workerType + type(data.type) + ' [' + time + '] ' + tags + ' ' + msg;\n    }\n  }]);\n\n  return KbnLoggerJsonFormat;\n})(_log_format2['default']);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9sb2dnaW5nL2xvZ19mb3JtYXRfc3RyaW5nLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztzQkFBYyxRQUFROzs7OzBCQUNDLFlBQVk7Ozs7c0JBQ2hCLFFBQVE7Ozs7MEJBRUwsY0FBYzs7OztBQUVwQyxJQUFJLFFBQVEsR0FBRyxDQUNiLEtBQUssRUFDTCxNQUFNLEVBQ04sT0FBTyxFQUNQLFNBQVMsRUFDVCxPQUFPLEVBQ1AsUUFBUSxFQUNSLE9BQU8sQ0FDUixDQUFDOztBQUVGLElBQUksVUFBVSxHQUFHO0FBQ2YsS0FBRyxFQUFFLE1BQU07QUFDWCxLQUFHLEVBQUUsT0FBTztBQUNaLEtBQUcsRUFBRSxPQUFPO0FBQ1osS0FBRyxFQUFFLE1BQU07QUFDWCxRQUFNLEVBQUUsTUFBTTtBQUNkLEtBQUcsRUFBRSxLQUFLO0FBQ1YsTUFBSSxFQUFFLE9BQU87QUFDYixPQUFLLEVBQUUsS0FBSztBQUNaLFNBQU8sRUFBRSxLQUFLO0FBQ2QsT0FBSyxFQUFFLFNBQVM7QUFDaEIsUUFBTSxFQUFFLFFBQVE7QUFDaEIsT0FBSyxFQUFFLGFBQWE7QUFDcEIsUUFBTSxFQUFFLGFBQWE7QUFDckIsUUFBTSxFQUFFLE9BQU87QUFDZixRQUFNLEVBQUUsT0FBTztBQUNmLFVBQVEsRUFBRSxTQUFTO0FBQ25CLFdBQVMsRUFBRSxTQUFTO0NBQ3JCLENBQUM7O0FBRUYsSUFBSSxLQUFLLEdBQUcsb0JBQUUsT0FBTyxDQUFDLFVBQVUsSUFBSSxFQUFFO0FBQ3BDLFNBQU8sd0JBQVcsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksb0JBQUUsUUFBUSxDQUFDO0NBQ25ELENBQUMsQ0FBQzs7QUFFSCxJQUFJLElBQUksR0FBRyxvQkFBRSxPQUFPLENBQUMsVUFBVSxDQUFDLEVBQUU7QUFDaEMsU0FBTyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsb0JBQUUsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7Q0FDMUMsQ0FBQyxDQUFDOztBQUVILElBQUksVUFBVSxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsYUFBYSxHQUFNLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxTQUFNLEVBQUUsQ0FBQzs7QUFFeEYsTUFBTSxDQUFDLE9BQU87WUFBUyxtQkFBbUI7O1dBQW5CLG1CQUFtQjswQkFBbkIsbUJBQW1COzsrQkFBbkIsbUJBQW1COzs7ZUFBbkIsbUJBQW1COztXQUNsQyxnQkFBQyxJQUFJLEVBQUU7QUFDWCxVQUFJLElBQUksR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMseUJBQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDO0FBQ3hFLFVBQUksR0FBRyxHQUFHLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQzs7QUFFekYsVUFBSSxJQUFJLEdBQUcseUJBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUN0QixNQUFNLENBQUMsVUFBVSxHQUFHLEVBQUU7QUFDckIsWUFBSSxLQUFLLENBQUMsR0FBRyxDQUFDLEtBQUssb0JBQUUsUUFBUSxFQUFFLGFBQVcsR0FBRyxDQUFHO0FBQ2hELFlBQUksb0JBQUUsUUFBUSxDQUFDLFFBQVEsRUFBRSxHQUFHLENBQUMsRUFBRSxhQUFXLEdBQUcsQ0FBRztBQUNoRCxxQkFBVyxHQUFHLENBQUc7T0FDbEIsQ0FBQyxDQUNELE1BQU0sQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFDdEIsZUFBTyxDQUFDLFVBQVEsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFJLENBQUM7T0FDakMsRUFBRSxFQUFFLENBQUMsQ0FBQzs7QUFFUCxrQkFBVSxVQUFVLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBSyxJQUFJLFVBQUssSUFBSSxTQUFJLEdBQUcsQ0FBRztLQUNuRTs7O1NBaEJvQixtQkFBbUI7MkJBaUJ6QyxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9sb2dnaW5nL2xvZ19mb3JtYXRfc3RyaW5nLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBhbnNpY29sb3JzIGZyb20gJ2Fuc2ljb2xvcnMnO1xuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xuXG5pbXBvcnQgTG9nRm9ybWF0IGZyb20gJy4vbG9nX2Zvcm1hdCc7XG5cbmxldCBzdGF0dXNlcyA9IFtcbiAgJ2VycicsXG4gICdpbmZvJyxcbiAgJ2Vycm9yJyxcbiAgJ3dhcm5pbmcnLFxuICAnZmF0YWwnLFxuICAnc3RhdHVzJyxcbiAgJ2RlYnVnJ1xuXTtcblxubGV0IHR5cGVDb2xvcnMgPSB7XG4gIGxvZzogJ2JsdWUnLFxuICByZXE6ICdncmVlbicsXG4gIHJlczogJ2dyZWVuJyxcbiAgb3BzOiAnY3lhbicsXG4gIGNvbmZpZzogJ2N5YW4nLFxuICBlcnI6ICdyZWQnLFxuICBpbmZvOiAnZ3JlZW4nLFxuICBlcnJvcjogJ3JlZCcsXG4gIHdhcm5pbmc6ICdyZWQnLFxuICBmYXRhbDogJ21hZ2VudGEnLFxuICBzdGF0dXM6ICd5ZWxsb3cnLFxuICBkZWJ1ZzogJ2JyaWdodEJsYWNrJyxcbiAgc2VydmVyOiAnYnJpZ2h0QmxhY2snLFxuICBvcHRtenI6ICd3aGl0ZScsXG4gIG1hbmFncjogJ2dyZWVuJyxcbiAgb3B0aW1pemU6ICdtYWdlbnRhJyxcbiAgbGlzdGVuaW5nOiAnbWFnZW50YSdcbn07XG5cbmxldCBjb2xvciA9IF8ubWVtb2l6ZShmdW5jdGlvbiAobmFtZSkge1xuICByZXR1cm4gYW5zaWNvbG9yc1t0eXBlQ29sb3JzW25hbWVdXSB8fCBfLmlkZW50aXR5O1xufSk7XG5cbmxldCB0eXBlID0gXy5tZW1vaXplKGZ1bmN0aW9uICh0KSB7XG4gIHJldHVybiBjb2xvcih0KShfLnBhZCh0LCA3KS5zbGljZSgwLCA3KSk7XG59KTtcblxubGV0IHdvcmtlclR5cGUgPSBwcm9jZXNzLmVudi5rYm5Xb3JrZXJUeXBlID8gYCR7dHlwZShwcm9jZXNzLmVudi5rYm5Xb3JrZXJUeXBlKX0gYCA6ICcnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIEtibkxvZ2dlckpzb25Gb3JtYXQgZXh0ZW5kcyBMb2dGb3JtYXQge1xuICBmb3JtYXQoZGF0YSkge1xuICAgIGxldCB0aW1lID0gY29sb3IoJ3RpbWUnKShtb21lbnQoZGF0YS50aW1lc3RhbXApLmZvcm1hdCgnSEg6bW06c3MuU1NTJykpO1xuICAgIGxldCBtc2cgPSBkYXRhLmVycm9yID8gY29sb3IoJ2Vycm9yJykoZGF0YS5lcnJvci5zdGFjaykgOiBjb2xvcignbWVzc2FnZScpKGRhdGEubWVzc2FnZSk7XG5cbiAgICBsZXQgdGFncyA9IF8oZGF0YS50YWdzKVxuICAgIC5zb3J0QnkoZnVuY3Rpb24gKHRhZykge1xuICAgICAgaWYgKGNvbG9yKHRhZykgPT09IF8uaWRlbnRpdHkpIHJldHVybiBgMiR7dGFnfWA7XG4gICAgICBpZiAoXy5pbmNsdWRlcyhzdGF0dXNlcywgdGFnKSkgcmV0dXJuIGAwJHt0YWd9YDtcbiAgICAgIHJldHVybiBgMSR7dGFnfWA7XG4gICAgfSlcbiAgICAucmVkdWNlKGZ1bmN0aW9uIChzLCB0KSB7XG4gICAgICByZXR1cm4gcyArIGBbJHsgY29sb3IodCkodCkgfV1gO1xuICAgIH0sICcnKTtcblxuICAgIHJldHVybiBgJHt3b3JrZXJUeXBlfSR7dHlwZShkYXRhLnR5cGUpfSBbJHt0aW1lfV0gJHt0YWdzfSAke21zZ31gO1xuICB9XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/logging/log_format_string.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;;;sBAAc,QAAQ;;;;0BACC,YAAY;;;;sBAChB,QAAQ;;;;0BAEL,cAAc;;;;AAEpC,IAAI,QAAQ,GAAG,CACb,KAAK,EACL,MAAM,EACN,OAAO,EACP,SAAS,EACT,OAAO,EACP,QAAQ,EACR,OAAO,CACR,CAAC;;AAEF,IAAI,UAAU,GAAG;AACf,KAAG,EAAE,MAAM;AACX,KAAG,EAAE,OAAO;AACZ,KAAG,EAAE,OAAO;AACZ,KAAG,EAAE,MAAM;AACX,QAAM,EAAE,MAAM;AACd,KAAG,EAAE,KAAK;AACV,MAAI,EAAE,OAAO;AACb,OAAK,EAAE,KAAK;AACZ,SAAO,EAAE,KAAK;AACd,OAAK,EAAE,SAAS;AAChB,QAAM,EAAE,QAAQ;AAChB,OAAK,EAAE,aAAa;AACpB,QAAM,EAAE,aAAa;AACrB,QAAM,EAAE,OAAO;AACf,QAAM,EAAE,OAAO;AACf,UAAQ,EAAE,SAAS;AACnB,WAAS,EAAE,SAAS;CACrB,CAAC;;AAEF,IAAI,KAAK,GAAG,oBAAE,OAAO,CAAC,UAAU,IAAI,EAAE;AACpC,SAAO,wBAAW,UAAU,CAAC,IAAI,CAAC,CAAC,IAAI,oBAAE,QAAQ,CAAC;CACnD,CAAC,CAAC;;AAEH,IAAI,IAAI,GAAG,oBAAE,OAAO,CAAC,UAAU,CAAC,EAAE;AAChC,SAAO,KAAK,CAAC,CAAC,CAAC,CAAC,oBAAE,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;CAC1C,CAAC,CAAC;;AAEH,IAAI,UAAU,GAAG,OAAO,CAAC,GAAG,CAAC,aAAa,GAAM,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC,SAAM,EAAE,CAAC;;AAExF,MAAM,CAAC,OAAO;YAAS,mBAAmB;;WAAnB,mBAAmB;0BAAnB,mBAAmB;;+BAAnB,mBAAmB;;;eAAnB,mBAAmB;;WAClC,gBAAC,IAAI,EAAE;AACX,UAAI,IAAI,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC,yBAAO,IAAI,CAAC,SAAS,CAAC,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC,CAAC;AACxE,UAAI,GAAG,GAAG,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;;AAEzF,UAAI,IAAI,GAAG,yBAAE,IAAI,CAAC,IAAI,CAAC,CACtB,MAAM,CAAC,UAAU,GAAG,EAAE;AACrB,YAAI,KAAK,CAAC,GAAG,CAAC,KAAK,oBAAE,QAAQ,EAAE,aAAW,GAAG,CAAG;AAChD,YAAI,oBAAE,QAAQ,CAAC,QAAQ,EAAE,GAAG,CAAC,EAAE,aAAW,GAAG,CAAG;AAChD,qBAAW,GAAG,CAAG;OAClB,CAAC,CACD,MAAM,CAAC,UAAU,CAAC,EAAE,CAAC,EAAE;AACtB,eAAO,CAAC,UAAQ,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAI,CAAC;OACjC,EAAE,EAAE,CAAC,CAAC;;AAEP,kBAAU,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,UAAK,IAAI,UAAK,IAAI,SAAI,GAAG,CAAG;KACnE;;;SAhBoB,mBAAmB;2BAiBzC,CAAC",
      "file": "/home/vio/v3metrics/src/server/logging/log_format_string.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport ansicolors from 'ansicolors';\nimport moment from 'moment';\n\nimport LogFormat from './log_format';\n\nlet statuses = [\n  'err',\n  'info',\n  'error',\n  'warning',\n  'fatal',\n  'status',\n  'debug'\n];\n\nlet typeColors = {\n  log: 'blue',\n  req: 'green',\n  res: 'green',\n  ops: 'cyan',\n  config: 'cyan',\n  err: 'red',\n  info: 'green',\n  error: 'red',\n  warning: 'red',\n  fatal: 'magenta',\n  status: 'yellow',\n  debug: 'brightBlack',\n  server: 'brightBlack',\n  optmzr: 'white',\n  managr: 'green',\n  optimize: 'magenta',\n  listening: 'magenta'\n};\n\nlet color = _.memoize(function (name) {\n  return ansicolors[typeColors[name]] || _.identity;\n});\n\nlet type = _.memoize(function (t) {\n  return color(t)(_.pad(t, 7).slice(0, 7));\n});\n\nlet workerType = process.env.kbnWorkerType ? `${type(process.env.kbnWorkerType)} ` : '';\n\nmodule.exports = class KbnLoggerJsonFormat extends LogFormat {\n  format(data) {\n    let time = color('time')(moment(data.timestamp).format('HH:mm:ss.SSS'));\n    let msg = data.error ? color('error')(data.error.stack) : color('message')(data.message);\n\n    let tags = _(data.tags)\n    .sortBy(function (tag) {\n      if (color(tag) === _.identity) return `2${tag}`;\n      if (_.includes(statuses, tag)) return `0${tag}`;\n      return `1${tag}`;\n    })\n    .reduce(function (s, t) {\n      return s + `[${ color(t)(t) }]`;\n    }, '');\n\n    return `${workerType}${type(data.type)} [${time}] ${tags} ${msg}`;\n  }\n};\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/cli/serve/read_yaml_config.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "chain",
              "isArray",
              "isPlainObject",
              "forOwn",
              "memoize",
              "set",
              "transform"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "chain",
                "local": "chain"
              },
              {
                "kind": "named",
                "imported": "isArray",
                "local": "isArray"
              },
              {
                "kind": "named",
                "imported": "isPlainObject",
                "local": "isPlainObject"
              },
              {
                "kind": "named",
                "imported": "forOwn",
                "local": "forOwn"
              },
              {
                "kind": "named",
                "imported": "memoize",
                "local": "memoize"
              },
              {
                "kind": "named",
                "imported": "set",
                "local": "set"
              },
              {
                "kind": "named",
                "imported": "transform",
                "local": "transform"
              }
            ]
          },
          {
            "source": "fs",
            "imported": [
              "readFileSync"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "readFileSync",
                "local": "read"
              }
            ]
          },
          {
            "source": "js-yaml",
            "imported": [
              "safeLoad"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "safeLoad",
                "local": "safeLoad"
              }
            ]
          },
          {
            "source": "ansicolors",
            "imported": [
              "red"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "red",
                "local": "red"
              }
            ]
          },
          {
            "source": "../../utils",
            "imported": [
              "fromRoot"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "fromRoot",
                "local": "fromRoot"
              }
            ]
          },
          {
            "source": "./legacy_config",
            "imported": [
              "rewriteLegacyConfig"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "rewriteLegacyConfig",
                "local": "rewriteLegacyConfig"
              }
            ]
          },
          {
            "source": "./deprecated_config",
            "imported": [
              "checkForDeprecatedConfig"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "checkForDeprecatedConfig",
                "local": "checkForDeprecatedConfig"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "merge",
            "sources"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "merge",
              "exported": "merge"
            },
            {
              "kind": "local",
              "local": "sources",
              "exported": "sources"
            }
          ]
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports.merge = merge;\n\nvar _lodash = require('lodash');\n\nvar _fs = require('fs');\n\nvar _jsYaml = require('js-yaml');\n\nvar _ansicolors = require('ansicolors');\n\nvar _utils = require('../../utils');\n\nvar _legacy_config = require('./legacy_config');\n\nvar _deprecated_config = require('./deprecated_config');\n\nvar log = (0, _lodash.memoize)(function (message) {\n  console.log((0, _ansicolors.red)('WARNING:'), message);\n});\n\nfunction merge(sources) {\n  return (0, _lodash.transform)(sources, function (merged, source) {\n    (0, _lodash.forOwn)(source, function apply(val, key) {\n      if ((0, _lodash.isPlainObject)(val)) {\n        (0, _lodash.forOwn)(val, function (subVal, subKey) {\n          apply(subVal, key + '.' + subKey);\n        });\n        return;\n      }\n\n      if ((0, _lodash.isArray)(val)) {\n        (0, _lodash.set)(merged, key, []);\n        val.forEach(function (subVal, i) {\n          return apply(subVal, key + '.' + i);\n        });\n        return;\n      }\n\n      (0, _lodash.set)(merged, key, val);\n    });\n  }, {});\n}\n\nexports['default'] = function (paths) {\n  var files = [].concat(paths || []);\n  var yamls = files.map(function (path) {\n    return (0, _jsYaml.safeLoad)((0, _fs.readFileSync)(path, 'utf8'));\n  });\n  var config = merge(yamls.map(function (file) {\n    return (0, _legacy_config.rewriteLegacyConfig)(file, log);\n  }));\n  return (0, _deprecated_config.checkForDeprecatedConfig)(config, log);\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL2NsaS9zZXJ2ZS9yZWFkX3lhbWxfY29uZmlnLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7c0JBQStFLFFBQVE7O2tCQUNsRCxJQUFJOztzQkFDaEIsU0FBUzs7MEJBQ2QsWUFBWTs7cUJBRVAsYUFBYTs7NkJBQ0YsaUJBQWlCOztpQ0FDWixxQkFBcUI7O0FBRTlELElBQU0sR0FBRyxHQUFHLHFCQUFRLFVBQVUsT0FBTyxFQUFFO0FBQ3JDLFNBQU8sQ0FBQyxHQUFHLENBQUMscUJBQUksVUFBVSxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUM7Q0FDdkMsQ0FBQyxDQUFDOztBQUVJLFNBQVMsS0FBSyxDQUFDLE9BQU8sRUFBRTtBQUM3QixTQUFPLHVCQUFVLE9BQU8sRUFBRSxVQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUs7QUFDNUMsd0JBQU8sTUFBTSxFQUFFLFNBQVMsS0FBSyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUU7QUFDdEMsVUFBSSwyQkFBYyxHQUFHLENBQUMsRUFBRTtBQUN0Qiw0QkFBTyxHQUFHLEVBQUUsVUFBVSxNQUFNLEVBQUUsTUFBTSxFQUFFO0FBQ3BDLGVBQUssQ0FBQyxNQUFNLEVBQUUsR0FBRyxHQUFHLEdBQUcsR0FBRyxNQUFNLENBQUMsQ0FBQztTQUNuQyxDQUFDLENBQUM7QUFDSCxlQUFPO09BQ1I7O0FBRUQsVUFBSSxxQkFBUSxHQUFHLENBQUMsRUFBRTtBQUNoQix5QkFBSSxNQUFNLEVBQUUsR0FBRyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0FBQ3JCLFdBQUcsQ0FBQyxPQUFPLENBQUMsVUFBQyxNQUFNLEVBQUUsQ0FBQztpQkFBSyxLQUFLLENBQUMsTUFBTSxFQUFFLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO1NBQUEsQ0FBQyxDQUFDO0FBQ3pELGVBQU87T0FDUjs7QUFFRCx1QkFBSSxNQUFNLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0tBQ3ZCLENBQUMsQ0FBQztHQUNKLEVBQUUsRUFBRSxDQUFDLENBQUM7Q0FDUjs7cUJBRWMsVUFBVSxLQUFLLEVBQUU7QUFDOUIsTUFBTSxLQUFLLEdBQUcsRUFBRSxDQUFDLE1BQU0sQ0FBQyxLQUFLLElBQUksRUFBRSxDQUFDLENBQUM7QUFDckMsTUFBTSxLQUFLLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxVQUFBLElBQUk7V0FBSSxzQkFBUyxzQkFBSyxJQUFJLEVBQUUsTUFBTSxDQUFDLENBQUM7R0FBQSxDQUFDLENBQUM7QUFDOUQsTUFBTSxNQUFNLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsVUFBQSxJQUFJO1dBQUksd0NBQW9CLElBQUksRUFBRSxHQUFHLENBQUM7R0FBQSxDQUFDLENBQUMsQ0FBQztBQUN4RSxTQUFPLGlEQUF5QixNQUFNLEVBQUUsR0FBRyxDQUFDLENBQUM7Q0FDOUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvY2xpL3NlcnZlL3JlYWRfeWFtbF9jb25maWcuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjaGFpbiwgaXNBcnJheSwgaXNQbGFpbk9iamVjdCwgZm9yT3duLCBtZW1vaXplLCBzZXQsIHRyYW5zZm9ybSB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgeyByZWFkRmlsZVN5bmMgYXMgcmVhZCB9IGZyb20gJ2ZzJztcbmltcG9ydCB7IHNhZmVMb2FkIH0gZnJvbSAnanMteWFtbCc7XG5pbXBvcnQgeyByZWQgfSBmcm9tICdhbnNpY29sb3JzJztcblxuaW1wb3J0IHsgZnJvbVJvb3QgfSBmcm9tICcuLi8uLi91dGlscyc7XG5pbXBvcnQgeyByZXdyaXRlTGVnYWN5Q29uZmlnIH0gZnJvbSAnLi9sZWdhY3lfY29uZmlnJztcbmltcG9ydCB7IGNoZWNrRm9yRGVwcmVjYXRlZENvbmZpZyB9IGZyb20gJy4vZGVwcmVjYXRlZF9jb25maWcnO1xuXG5jb25zdCBsb2cgPSBtZW1vaXplKGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gIGNvbnNvbGUubG9nKHJlZCgnV0FSTklORzonKSwgbWVzc2FnZSk7XG59KTtcblxuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlKHNvdXJjZXMpIHtcbiAgcmV0dXJuIHRyYW5zZm9ybShzb3VyY2VzLCAobWVyZ2VkLCBzb3VyY2UpID0+IHtcbiAgICBmb3JPd24oc291cmNlLCBmdW5jdGlvbiBhcHBseSh2YWwsIGtleSkge1xuICAgICAgaWYgKGlzUGxhaW5PYmplY3QodmFsKSkge1xuICAgICAgICBmb3JPd24odmFsLCBmdW5jdGlvbiAoc3ViVmFsLCBzdWJLZXkpIHtcbiAgICAgICAgICBhcHBseShzdWJWYWwsIGtleSArICcuJyArIHN1YktleSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChpc0FycmF5KHZhbCkpIHtcbiAgICAgICAgc2V0KG1lcmdlZCwga2V5LCBbXSk7XG4gICAgICAgIHZhbC5mb3JFYWNoKChzdWJWYWwsIGkpID0+IGFwcGx5KHN1YlZhbCwga2V5ICsgJy4nICsgaSkpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHNldChtZXJnZWQsIGtleSwgdmFsKTtcbiAgICB9KTtcbiAgfSwge30pO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAocGF0aHMpIHtcbiAgY29uc3QgZmlsZXMgPSBbXS5jb25jYXQocGF0aHMgfHwgW10pO1xuICBjb25zdCB5YW1scyA9IGZpbGVzLm1hcChwYXRoID0+IHNhZmVMb2FkKHJlYWQocGF0aCwgJ3V0ZjgnKSkpO1xuICBjb25zdCBjb25maWcgPSBtZXJnZSh5YW1scy5tYXAoZmlsZSA9PiByZXdyaXRlTGVnYWN5Q29uZmlnKGZpbGUsIGxvZykpKTtcbiAgcmV0dXJuIGNoZWNrRm9yRGVwcmVjYXRlZENvbmZpZyhjb25maWcsIGxvZyk7XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/cli/serve/read_yaml_config.js"
      ],
      "names": [],
      "mappings": ";;;;;;;sBAA+E,QAAQ;;kBAClD,IAAI;;sBAChB,SAAS;;0BACd,YAAY;;qBAEP,aAAa;;6BACF,iBAAiB;;iCACZ,qBAAqB;;AAE9D,IAAM,GAAG,GAAG,qBAAQ,UAAU,OAAO,EAAE;AACrC,SAAO,CAAC,GAAG,CAAC,qBAAI,UAAU,CAAC,EAAE,OAAO,CAAC,CAAC;CACvC,CAAC,CAAC;;AAEI,SAAS,KAAK,CAAC,OAAO,EAAE;AAC7B,SAAO,uBAAU,OAAO,EAAE,UAAC,MAAM,EAAE,MAAM,EAAK;AAC5C,wBAAO,MAAM,EAAE,SAAS,KAAK,CAAC,GAAG,EAAE,GAAG,EAAE;AACtC,UAAI,2BAAc,GAAG,CAAC,EAAE;AACtB,4BAAO,GAAG,EAAE,UAAU,MAAM,EAAE,MAAM,EAAE;AACpC,eAAK,CAAC,MAAM,EAAE,GAAG,GAAG,GAAG,GAAG,MAAM,CAAC,CAAC;SACnC,CAAC,CAAC;AACH,eAAO;OACR;;AAED,UAAI,qBAAQ,GAAG,CAAC,EAAE;AAChB,yBAAI,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC,CAAC;AACrB,WAAG,CAAC,OAAO,CAAC,UAAC,MAAM,EAAE,CAAC;iBAAK,KAAK,CAAC,MAAM,EAAE,GAAG,GAAG,GAAG,GAAG,CAAC,CAAC;SAAA,CAAC,CAAC;AACzD,eAAO;OACR;;AAED,uBAAI,MAAM,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;KACvB,CAAC,CAAC;GACJ,EAAE,EAAE,CAAC,CAAC;CACR;;qBAEc,UAAU,KAAK,EAAE;AAC9B,MAAM,KAAK,GAAG,EAAE,CAAC,MAAM,CAAC,KAAK,IAAI,EAAE,CAAC,CAAC;AACrC,MAAM,KAAK,GAAG,KAAK,CAAC,GAAG,CAAC,UAAA,IAAI;WAAI,sBAAS,sBAAK,IAAI,EAAE,MAAM,CAAC,CAAC;GAAA,CAAC,CAAC;AAC9D,MAAM,MAAM,GAAG,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,UAAA,IAAI;WAAI,wCAAoB,IAAI,EAAE,GAAG,CAAC;GAAA,CAAC,CAAC,CAAC;AACxE,SAAO,iDAAyB,MAAM,EAAE,GAAG,CAAC,CAAC;CAC9C",
      "file": "/home/vio/v3metrics/src/cli/serve/read_yaml_config.js",
      "sourcesContent": [
        "import { chain, isArray, isPlainObject, forOwn, memoize, set, transform } from 'lodash';\nimport { readFileSync as read } from 'fs';\nimport { safeLoad } from 'js-yaml';\nimport { red } from 'ansicolors';\n\nimport { fromRoot } from '../../utils';\nimport { rewriteLegacyConfig } from './legacy_config';\nimport { checkForDeprecatedConfig } from './deprecated_config';\n\nconst log = memoize(function (message) {\n  console.log(red('WARNING:'), message);\n});\n\nexport function merge(sources) {\n  return transform(sources, (merged, source) => {\n    forOwn(source, function apply(val, key) {\n      if (isPlainObject(val)) {\n        forOwn(val, function (subVal, subKey) {\n          apply(subVal, key + '.' + subKey);\n        });\n        return;\n      }\n\n      if (isArray(val)) {\n        set(merged, key, []);\n        val.forEach((subVal, i) => apply(subVal, key + '.' + i));\n        return;\n      }\n\n      set(merged, key, val);\n    });\n  }, {});\n}\n\nexport default function (paths) {\n  const files = [].concat(paths || []);\n  const yamls = files.map(path => safeLoad(read(path, 'utf8')));\n  const config = merge(yamls.map(file => rewriteLegacyConfig(file, log)));\n  return checkForDeprecatedConfig(config, log);\n}\n"
      ]
    },
    "mtime": 1467036622785
  },
  "{\"filename\":\"/home/vio/v3metrics/src/cli/serve/legacy_config.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "noop",
              "transform"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "noop",
                "local": "noop"
              },
              {
                "kind": "named",
                "imported": "transform",
                "local": "transform"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "legacySettings",
            "rewriteLegacyConfig",
            "object",
            "log"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "legacySettings",
              "exported": "legacySettings"
            },
            {
              "kind": "local",
              "local": "rewriteLegacyConfig",
              "exported": "rewriteLegacyConfig"
            },
            {
              "kind": "local",
              "local": "object",
              "exported": "object"
            },
            {
              "kind": "local",
              "local": "log",
              "exported": "log"
            }
          ]
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports.rewriteLegacyConfig = rewriteLegacyConfig;\n\nvar _lodash = require('lodash');\n\n// legacySettings allow kibana 4.2+ to accept the same config file that people\n// used for kibana 4.0 and 4.1. These settings are transformed to their modern\n// equivalents at the very begining of the process\nvar legacySettings = {\n  // server\n  port: 'server.port',\n  host: 'server.host',\n  pid_file: 'pid.file',\n  ssl_cert_file: 'server.ssl.cert',\n  ssl_key_file: 'server.ssl.key',\n\n  // logging\n  log_file: 'logging.dest',\n\n  // kibana\n  kibana_index: 'kibana.index',\n  default_app_id: 'kibana.defaultAppId',\n\n  // es\n  ca: 'elasticsearch.ssl.ca',\n  elasticsearch_preserve_host: 'elasticsearch.preserveHost',\n  elasticsearch_url: 'elasticsearch.url',\n  kibana_elasticsearch_client_crt: 'elasticsearch.ssl.cert',\n  kibana_elasticsearch_client_key: 'elasticsearch.ssl.key',\n  kibana_elasticsearch_password: 'elasticsearch.password',\n  kibana_elasticsearch_username: 'elasticsearch.username',\n  ping_timeout: 'elasticsearch.pingTimeout',\n  request_timeout: 'elasticsearch.requestTimeout',\n  shard_timeout: 'elasticsearch.shardTimeout',\n  startup_timeout: 'elasticsearch.startupTimeout',\n  verify_ssl: 'elasticsearch.ssl.verify'\n};\n\nexports.legacySettings = legacySettings;\n// transform legacy options into new namespaced versions\n\nfunction rewriteLegacyConfig(object) {\n  var log = arguments.length <= 1 || arguments[1] === undefined ? _lodash.noop : arguments[1];\n\n  return (0, _lodash.transform)(object, function (clone, val, key) {\n    if (legacySettings.hasOwnProperty(key)) {\n      var replacement = legacySettings[key];\n      log('Config key \"' + key + '\" is deprecated. It has been replaced with \"' + replacement + '\"');\n      clone[replacement] = val;\n    } else {\n      clone[key] = val;\n    }\n  }, {});\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL2NsaS9zZXJ2ZS9sZWdhY3lfY29uZmlnLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7c0JBQWdDLFFBQVE7Ozs7O0FBS2pDLElBQU0sY0FBYyxHQUFHOztBQUU1QixNQUFJLEVBQUUsYUFBYTtBQUNuQixNQUFJLEVBQUUsYUFBYTtBQUNuQixVQUFRLEVBQUUsVUFBVTtBQUNwQixlQUFhLEVBQUUsaUJBQWlCO0FBQ2hDLGNBQVksRUFBRSxnQkFBZ0I7OztBQUc5QixVQUFRLEVBQUUsY0FBYzs7O0FBR3hCLGNBQVksRUFBRSxjQUFjO0FBQzVCLGdCQUFjLEVBQUUscUJBQXFCOzs7QUFHckMsSUFBRSxFQUFFLHNCQUFzQjtBQUMxQiw2QkFBMkIsRUFBRSw0QkFBNEI7QUFDekQsbUJBQWlCLEVBQUUsbUJBQW1CO0FBQ3RDLGlDQUErQixFQUFFLHdCQUF3QjtBQUN6RCxpQ0FBK0IsRUFBRSx1QkFBdUI7QUFDeEQsK0JBQTZCLEVBQUUsd0JBQXdCO0FBQ3ZELCtCQUE2QixFQUFFLHdCQUF3QjtBQUN2RCxjQUFZLEVBQUUsMkJBQTJCO0FBQ3pDLGlCQUFlLEVBQUUsOEJBQThCO0FBQy9DLGVBQWEsRUFBRSw0QkFBNEI7QUFDM0MsaUJBQWUsRUFBRSw4QkFBOEI7QUFDL0MsWUFBVSxFQUFFLDBCQUEwQjtDQUN2QyxDQUFDOzs7OztBQUdLLFNBQVMsbUJBQW1CLENBQUMsTUFBTSxFQUFjO01BQVosR0FBRzs7QUFDN0MsU0FBTyx1QkFBVSxNQUFNLEVBQUUsVUFBQyxLQUFLLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBSztBQUM1QyxRQUFJLGNBQWMsQ0FBQyxjQUFjLENBQUMsR0FBRyxDQUFDLEVBQUU7QUFDdEMsVUFBTSxXQUFXLEdBQUcsY0FBYyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ3hDLFNBQUcsa0JBQWdCLEdBQUcsb0RBQStDLFdBQVcsT0FBSSxDQUFDO0FBQ3JGLFdBQUssQ0FBQyxXQUFXLENBQUMsR0FBRyxHQUFHLENBQUM7S0FDMUIsTUFBTTtBQUNMLFdBQUssQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUM7S0FDbEI7R0FDRixFQUFFLEVBQUUsQ0FBQyxDQUFDO0NBQ1IiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvY2xpL3NlcnZlL2xlZ2FjeV9jb25maWcuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBub29wLCB0cmFuc2Zvcm0gfSBmcm9tICdsb2Rhc2gnO1xuXG4vLyBsZWdhY3lTZXR0aW5ncyBhbGxvdyBraWJhbmEgNC4yKyB0byBhY2NlcHQgdGhlIHNhbWUgY29uZmlnIGZpbGUgdGhhdCBwZW9wbGVcbi8vIHVzZWQgZm9yIGtpYmFuYSA0LjAgYW5kIDQuMS4gVGhlc2Ugc2V0dGluZ3MgYXJlIHRyYW5zZm9ybWVkIHRvIHRoZWlyIG1vZGVyblxuLy8gZXF1aXZhbGVudHMgYXQgdGhlIHZlcnkgYmVnaW5pbmcgb2YgdGhlIHByb2Nlc3NcbmV4cG9ydCBjb25zdCBsZWdhY3lTZXR0aW5ncyA9IHtcbiAgLy8gc2VydmVyXG4gIHBvcnQ6ICdzZXJ2ZXIucG9ydCcsXG4gIGhvc3Q6ICdzZXJ2ZXIuaG9zdCcsXG4gIHBpZF9maWxlOiAncGlkLmZpbGUnLFxuICBzc2xfY2VydF9maWxlOiAnc2VydmVyLnNzbC5jZXJ0JyxcbiAgc3NsX2tleV9maWxlOiAnc2VydmVyLnNzbC5rZXknLFxuXG4gIC8vIGxvZ2dpbmdcbiAgbG9nX2ZpbGU6ICdsb2dnaW5nLmRlc3QnLFxuXG4gIC8vIGtpYmFuYVxuICBraWJhbmFfaW5kZXg6ICdraWJhbmEuaW5kZXgnLFxuICBkZWZhdWx0X2FwcF9pZDogJ2tpYmFuYS5kZWZhdWx0QXBwSWQnLFxuXG4gIC8vIGVzXG4gIGNhOiAnZWxhc3RpY3NlYXJjaC5zc2wuY2EnLFxuICBlbGFzdGljc2VhcmNoX3ByZXNlcnZlX2hvc3Q6ICdlbGFzdGljc2VhcmNoLnByZXNlcnZlSG9zdCcsXG4gIGVsYXN0aWNzZWFyY2hfdXJsOiAnZWxhc3RpY3NlYXJjaC51cmwnLFxuICBraWJhbmFfZWxhc3RpY3NlYXJjaF9jbGllbnRfY3J0OiAnZWxhc3RpY3NlYXJjaC5zc2wuY2VydCcsXG4gIGtpYmFuYV9lbGFzdGljc2VhcmNoX2NsaWVudF9rZXk6ICdlbGFzdGljc2VhcmNoLnNzbC5rZXknLFxuICBraWJhbmFfZWxhc3RpY3NlYXJjaF9wYXNzd29yZDogJ2VsYXN0aWNzZWFyY2gucGFzc3dvcmQnLFxuICBraWJhbmFfZWxhc3RpY3NlYXJjaF91c2VybmFtZTogJ2VsYXN0aWNzZWFyY2gudXNlcm5hbWUnLFxuICBwaW5nX3RpbWVvdXQ6ICdlbGFzdGljc2VhcmNoLnBpbmdUaW1lb3V0JyxcbiAgcmVxdWVzdF90aW1lb3V0OiAnZWxhc3RpY3NlYXJjaC5yZXF1ZXN0VGltZW91dCcsXG4gIHNoYXJkX3RpbWVvdXQ6ICdlbGFzdGljc2VhcmNoLnNoYXJkVGltZW91dCcsXG4gIHN0YXJ0dXBfdGltZW91dDogJ2VsYXN0aWNzZWFyY2guc3RhcnR1cFRpbWVvdXQnLFxuICB2ZXJpZnlfc3NsOiAnZWxhc3RpY3NlYXJjaC5zc2wudmVyaWZ5Jyxcbn07XG5cbi8vIHRyYW5zZm9ybSBsZWdhY3kgb3B0aW9ucyBpbnRvIG5ldyBuYW1lc3BhY2VkIHZlcnNpb25zXG5leHBvcnQgZnVuY3Rpb24gcmV3cml0ZUxlZ2FjeUNvbmZpZyhvYmplY3QsIGxvZyA9IG5vb3ApIHtcbiAgcmV0dXJuIHRyYW5zZm9ybShvYmplY3QsIChjbG9uZSwgdmFsLCBrZXkpID0+IHtcbiAgICBpZiAobGVnYWN5U2V0dGluZ3MuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgY29uc3QgcmVwbGFjZW1lbnQgPSBsZWdhY3lTZXR0aW5nc1trZXldO1xuICAgICAgbG9nKGBDb25maWcga2V5IFwiJHtrZXl9XCIgaXMgZGVwcmVjYXRlZC4gSXQgaGFzIGJlZW4gcmVwbGFjZWQgd2l0aCBcIiR7cmVwbGFjZW1lbnR9XCJgKTtcbiAgICAgIGNsb25lW3JlcGxhY2VtZW50XSA9IHZhbDtcbiAgICB9IGVsc2Uge1xuICAgICAgY2xvbmVba2V5XSA9IHZhbDtcbiAgICB9XG4gIH0sIHt9KTtcbn1cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/cli/serve/legacy_config.js"
      ],
      "names": [],
      "mappings": ";;;;;;;sBAAgC,QAAQ;;;;;AAKjC,IAAM,cAAc,GAAG;;AAE5B,MAAI,EAAE,aAAa;AACnB,MAAI,EAAE,aAAa;AACnB,UAAQ,EAAE,UAAU;AACpB,eAAa,EAAE,iBAAiB;AAChC,cAAY,EAAE,gBAAgB;;;AAG9B,UAAQ,EAAE,cAAc;;;AAGxB,cAAY,EAAE,cAAc;AAC5B,gBAAc,EAAE,qBAAqB;;;AAGrC,IAAE,EAAE,sBAAsB;AAC1B,6BAA2B,EAAE,4BAA4B;AACzD,mBAAiB,EAAE,mBAAmB;AACtC,iCAA+B,EAAE,wBAAwB;AACzD,iCAA+B,EAAE,uBAAuB;AACxD,+BAA6B,EAAE,wBAAwB;AACvD,+BAA6B,EAAE,wBAAwB;AACvD,cAAY,EAAE,2BAA2B;AACzC,iBAAe,EAAE,8BAA8B;AAC/C,eAAa,EAAE,4BAA4B;AAC3C,iBAAe,EAAE,8BAA8B;AAC/C,YAAU,EAAE,0BAA0B;CACvC,CAAC;;;;;AAGK,SAAS,mBAAmB,CAAC,MAAM,EAAc;MAAZ,GAAG;;AAC7C,SAAO,uBAAU,MAAM,EAAE,UAAC,KAAK,EAAE,GAAG,EAAE,GAAG,EAAK;AAC5C,QAAI,cAAc,CAAC,cAAc,CAAC,GAAG,CAAC,EAAE;AACtC,UAAM,WAAW,GAAG,cAAc,CAAC,GAAG,CAAC,CAAC;AACxC,SAAG,kBAAgB,GAAG,oDAA+C,WAAW,OAAI,CAAC;AACrF,WAAK,CAAC,WAAW,CAAC,GAAG,GAAG,CAAC;KAC1B,MAAM;AACL,WAAK,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC;KAClB;GACF,EAAE,EAAE,CAAC,CAAC;CACR",
      "file": "/home/vio/v3metrics/src/cli/serve/legacy_config.js",
      "sourcesContent": [
        "import { noop, transform } from 'lodash';\n\n// legacySettings allow kibana 4.2+ to accept the same config file that people\n// used for kibana 4.0 and 4.1. These settings are transformed to their modern\n// equivalents at the very begining of the process\nexport const legacySettings = {\n  // server\n  port: 'server.port',\n  host: 'server.host',\n  pid_file: 'pid.file',\n  ssl_cert_file: 'server.ssl.cert',\n  ssl_key_file: 'server.ssl.key',\n\n  // logging\n  log_file: 'logging.dest',\n\n  // kibana\n  kibana_index: 'kibana.index',\n  default_app_id: 'kibana.defaultAppId',\n\n  // es\n  ca: 'elasticsearch.ssl.ca',\n  elasticsearch_preserve_host: 'elasticsearch.preserveHost',\n  elasticsearch_url: 'elasticsearch.url',\n  kibana_elasticsearch_client_crt: 'elasticsearch.ssl.cert',\n  kibana_elasticsearch_client_key: 'elasticsearch.ssl.key',\n  kibana_elasticsearch_password: 'elasticsearch.password',\n  kibana_elasticsearch_username: 'elasticsearch.username',\n  ping_timeout: 'elasticsearch.pingTimeout',\n  request_timeout: 'elasticsearch.requestTimeout',\n  shard_timeout: 'elasticsearch.shardTimeout',\n  startup_timeout: 'elasticsearch.startupTimeout',\n  verify_ssl: 'elasticsearch.ssl.verify',\n};\n\n// transform legacy options into new namespaced versions\nexport function rewriteLegacyConfig(object, log = noop) {\n  return transform(object, (clone, val, key) => {\n    if (legacySettings.hasOwnProperty(key)) {\n      const replacement = legacySettings[key];\n      log(`Config key \"${key}\" is deprecated. It has been replaced with \"${replacement}\"`);\n      clone[replacement] = val;\n    } else {\n      clone[key] = val;\n    }\n  }, {});\n}\n"
      ]
    },
    "mtime": 1467036622785
  },
  "{\"filename\":\"/home/vio/v3metrics/src/cli/serve/deprecated_config.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "forOwn",
              "has",
              "noop"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "forOwn",
                "local": "forOwn"
              },
              {
                "kind": "named",
                "imported": "has",
                "local": "has"
              },
              {
                "kind": "named",
                "imported": "noop",
                "local": "noop"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "deprecatedSettings",
            "checkForDeprecatedConfig",
            "object",
            "log"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "deprecatedSettings",
              "exported": "deprecatedSettings"
            },
            {
              "kind": "local",
              "local": "checkForDeprecatedConfig",
              "exported": "checkForDeprecatedConfig"
            },
            {
              "kind": "local",
              "local": "object",
              "exported": "object"
            },
            {
              "kind": "local",
              "local": "log",
              "exported": "log"
            }
          ]
        }
      },
      "usedHelpers": [
        "sliced-to-array"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }; })();\n\nexports.checkForDeprecatedConfig = checkForDeprecatedConfig;\n\nvar _lodash = require('lodash');\n\n// deprecated settings are still allowed, but will be removed at a later time. They\n// are checked for after the config object is prepared and known, so legacySettings\n// will have already been transformed.\nvar deprecatedSettings = new Map([[['server', 'xsrf', 'token'], 'server.xsrf.token is deprecated. It is no longer used when providing xsrf protection.']]);\n\nexports.deprecatedSettings = deprecatedSettings;\n// check for and warn about deprecated settings\n\nfunction checkForDeprecatedConfig(object) {\n  var log = arguments.length <= 1 || arguments[1] === undefined ? _lodash.noop : arguments[1];\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = deprecatedSettings.entries()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var _step$value = _slicedToArray(_step.value, 2);\n\n      var key = _step$value[0];\n      var msg = _step$value[1];\n\n      if ((0, _lodash.has)(object, key)) log(msg);\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator['return']) {\n        _iterator['return']();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  return object;\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL2NsaS9zZXJ2ZS9kZXByZWNhdGVkX2NvbmZpZy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O3NCQUFrQyxRQUFROzs7OztBQUtuQyxJQUFNLGtCQUFrQixHQUFHLElBQUksR0FBRyxDQUFDLENBQ3hDLENBQUMsQ0FBQyxRQUFRLEVBQUUsTUFBTSxFQUFFLE9BQU8sQ0FBQyxFQUFFLHVGQUF1RixDQUFDLENBQ3ZILENBQUMsQ0FBQzs7Ozs7QUFHSSxTQUFTLHdCQUF3QixDQUFDLE1BQU0sRUFBYztNQUFaLEdBQUc7Ozs7OztBQUNsRCx5QkFBeUIsa0JBQWtCLENBQUMsT0FBTyxFQUFFLDhIQUFFOzs7VUFBM0MsR0FBRztVQUFFLEdBQUc7O0FBQ2xCLFVBQUksaUJBQUksTUFBTSxFQUFFLEdBQUcsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztLQUNoQzs7Ozs7Ozs7Ozs7Ozs7OztBQUNELFNBQU8sTUFBTSxDQUFDO0NBQ2YiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvY2xpL3NlcnZlL2RlcHJlY2F0ZWRfY29uZmlnLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZm9yT3duLCBoYXMsIG5vb3AgfSBmcm9tICdsb2Rhc2gnO1xuXG4vLyBkZXByZWNhdGVkIHNldHRpbmdzIGFyZSBzdGlsbCBhbGxvd2VkLCBidXQgd2lsbCBiZSByZW1vdmVkIGF0IGEgbGF0ZXIgdGltZS4gVGhleVxuLy8gYXJlIGNoZWNrZWQgZm9yIGFmdGVyIHRoZSBjb25maWcgb2JqZWN0IGlzIHByZXBhcmVkIGFuZCBrbm93biwgc28gbGVnYWN5U2V0dGluZ3Ncbi8vIHdpbGwgaGF2ZSBhbHJlYWR5IGJlZW4gdHJhbnNmb3JtZWQuXG5leHBvcnQgY29uc3QgZGVwcmVjYXRlZFNldHRpbmdzID0gbmV3IE1hcChbXG4gIFtbJ3NlcnZlcicsICd4c3JmJywgJ3Rva2VuJ10sICdzZXJ2ZXIueHNyZi50b2tlbiBpcyBkZXByZWNhdGVkLiBJdCBpcyBubyBsb25nZXIgdXNlZCB3aGVuIHByb3ZpZGluZyB4c3JmIHByb3RlY3Rpb24uJ11cbl0pO1xuXG4vLyBjaGVjayBmb3IgYW5kIHdhcm4gYWJvdXQgZGVwcmVjYXRlZCBzZXR0aW5nc1xuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrRm9yRGVwcmVjYXRlZENvbmZpZyhvYmplY3QsIGxvZyA9IG5vb3ApIHtcbiAgZm9yIChjb25zdCBba2V5LCBtc2ddIG9mIGRlcHJlY2F0ZWRTZXR0aW5ncy5lbnRyaWVzKCkpIHtcbiAgICBpZiAoaGFzKG9iamVjdCwga2V5KSkgbG9nKG1zZyk7XG4gIH1cbiAgcmV0dXJuIG9iamVjdDtcbn1cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/cli/serve/deprecated_config.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;sBAAkC,QAAQ;;;;;AAKnC,IAAM,kBAAkB,GAAG,IAAI,GAAG,CAAC,CACxC,CAAC,CAAC,QAAQ,EAAE,MAAM,EAAE,OAAO,CAAC,EAAE,uFAAuF,CAAC,CACvH,CAAC,CAAC;;;;;AAGI,SAAS,wBAAwB,CAAC,MAAM,EAAc;MAAZ,GAAG;;;;;;AAClD,yBAAyB,kBAAkB,CAAC,OAAO,EAAE,8HAAE;;;UAA3C,GAAG;UAAE,GAAG;;AAClB,UAAI,iBAAI,MAAM,EAAE,GAAG,CAAC,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC;KAChC;;;;;;;;;;;;;;;;AACD,SAAO,MAAM,CAAC;CACf",
      "file": "/home/vio/v3metrics/src/cli/serve/deprecated_config.js",
      "sourcesContent": [
        "import { forOwn, has, noop } from 'lodash';\n\n// deprecated settings are still allowed, but will be removed at a later time. They\n// are checked for after the config object is prepared and known, so legacySettings\n// will have already been transformed.\nexport const deprecatedSettings = new Map([\n  [['server', 'xsrf', 'token'], 'server.xsrf.token is deprecated. It is no longer used when providing xsrf protection.']\n]);\n\n// check for and warn about deprecated settings\nexport function checkForDeprecatedConfig(object, log = noop) {\n  for (const [key, msg] of deprecatedSettings.entries()) {\n    if (has(object, key)) log(msg);\n  }\n  return object;\n}\n"
      ]
    },
    "mtime": 1467036622785
  },
  "{\"filename\":\"/home/vio/v3metrics/src/cli_plugin/install/version.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "semver",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "semver"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "versionSatisfies",
            "cleanActual",
            "cleanExpected",
            "cleanVersion",
            "version"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "versionSatisfies",
              "exported": "versionSatisfies"
            },
            {
              "kind": "local",
              "local": "cleanActual",
              "exported": "cleanActual"
            },
            {
              "kind": "local",
              "local": "cleanExpected",
              "exported": "cleanExpected"
            },
            {
              "kind": "local",
              "local": "cleanVersion",
              "exported": "cleanVersion"
            },
            {
              "kind": "local",
              "local": "version",
              "exported": "version"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports.versionSatisfies = versionSatisfies;\nexports.cleanVersion = cleanVersion;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _semver = require('semver');\n\nvar _semver2 = _interopRequireDefault(_semver);\n\nfunction versionSatisfies(cleanActual, cleanExpected) {\n  try {\n    return cleanActual === cleanExpected;\n  } catch (err) {\n    return false;\n  }\n}\n\nfunction cleanVersion(version) {\n  var match = version.match(/\\d+\\.\\d+\\.\\d+/);\n  if (!match) return version;\n  return match[0];\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL2NsaV9wbHVnaW4vaW5zdGFsbC92ZXJzaW9uLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7c0JBQW1CLFFBQVE7Ozs7QUFFcEIsU0FBUyxnQkFBZ0IsQ0FBQyxXQUFXLEVBQUUsYUFBYSxFQUFFO0FBQzNELE1BQUk7QUFDRixXQUFRLFdBQVcsS0FBSyxhQUFhLENBQUU7R0FDeEMsQ0FBQyxPQUFPLEdBQUcsRUFBRTtBQUNaLFdBQU8sS0FBSyxDQUFDO0dBQ2Q7Q0FDRjs7QUFFTSxTQUFTLFlBQVksQ0FBQyxPQUFPLEVBQUU7QUFDcEMsTUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLEtBQUssQ0FBQyxlQUFlLENBQUMsQ0FBQztBQUM3QyxNQUFJLENBQUMsS0FBSyxFQUFFLE9BQU8sT0FBTyxDQUFDO0FBQzNCLFNBQU8sS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO0NBQ2pCIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL2NsaV9wbHVnaW4vaW5zdGFsbC92ZXJzaW9uLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHNlbXZlciBmcm9tICdzZW12ZXInO1xuXG5leHBvcnQgZnVuY3Rpb24gdmVyc2lvblNhdGlzZmllcyhjbGVhbkFjdHVhbCwgY2xlYW5FeHBlY3RlZCkge1xuICB0cnkge1xuICAgIHJldHVybiAoY2xlYW5BY3R1YWwgPT09IGNsZWFuRXhwZWN0ZWQpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFuVmVyc2lvbih2ZXJzaW9uKSB7XG4gIGNvbnN0IG1hdGNoID0gdmVyc2lvbi5tYXRjaCgvXFxkK1xcLlxcZCtcXC5cXGQrLyk7XG4gIGlmICghbWF0Y2gpIHJldHVybiB2ZXJzaW9uO1xuICByZXR1cm4gbWF0Y2hbMF07XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/cli_plugin/install/version.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;sBAAmB,QAAQ;;;;AAEpB,SAAS,gBAAgB,CAAC,WAAW,EAAE,aAAa,EAAE;AAC3D,MAAI;AACF,WAAQ,WAAW,KAAK,aAAa,CAAE;GACxC,CAAC,OAAO,GAAG,EAAE;AACZ,WAAO,KAAK,CAAC;GACd;CACF;;AAEM,SAAS,YAAY,CAAC,OAAO,EAAE;AACpC,MAAM,KAAK,GAAG,OAAO,CAAC,KAAK,CAAC,eAAe,CAAC,CAAC;AAC7C,MAAI,CAAC,KAAK,EAAE,OAAO,OAAO,CAAC;AAC3B,SAAO,KAAK,CAAC,CAAC,CAAC,CAAC;CACjB",
      "file": "/home/vio/v3metrics/src/cli_plugin/install/version.js",
      "sourcesContent": [
        "import semver from 'semver';\n\nexport function versionSatisfies(cleanActual, cleanExpected) {\n  try {\n    return (cleanActual === cleanExpected);\n  } catch (err) {\n    return false;\n  }\n}\n\nexport function cleanVersion(version) {\n  const match = version.match(/\\d+\\.\\d+\\.\\d+/);\n  if (!match) return version;\n  return match[0];\n}\n"
      ]
    },
    "mtime": 1467036622785
  },
  "{\"filename\":\"/home/vio/v3metrics/src/cli_plugin/install/settings.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "expiry-js",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "expiry"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "intersection"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "intersection",
                "local": "intersection"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "resolve"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "resolve",
                "local": "resolve"
              }
            ]
          },
          {
            "source": "os",
            "imported": [
              "arch",
              "platform"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "arch",
                "local": "arch"
              },
              {
                "kind": "named",
                "imported": "platform",
                "local": "platform"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "parseMilliseconds",
            "val",
            "parse",
            "command",
            "options",
            "kbnPackage"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "parseMilliseconds",
              "exported": "parseMilliseconds"
            },
            {
              "kind": "local",
              "local": "val",
              "exported": "val"
            },
            {
              "kind": "local",
              "local": "parse",
              "exported": "parse"
            },
            {
              "kind": "local",
              "local": "command",
              "exported": "command"
            },
            {
              "kind": "local",
              "local": "options",
              "exported": "options"
            },
            {
              "kind": "local",
              "local": "kbnPackage",
              "exported": "kbnPackage"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports.parseMilliseconds = parseMilliseconds;\nexports.parse = parse;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _expiryJs = require('expiry-js');\n\nvar _expiryJs2 = _interopRequireDefault(_expiryJs);\n\nvar _lodash = require('lodash');\n\nvar _path = require('path');\n\nvar _os = require('os');\n\nfunction generateUrls(_ref) {\n  var version = _ref.version;\n  var plugin = _ref.plugin;\n\n  return [plugin, 'https://download.elastic.co/kibana/' + plugin + '/' + plugin + '-' + version + '.zip'];\n}\n\nfunction parseMilliseconds(val) {\n  var result = undefined;\n\n  try {\n    var timeVal = (0, _expiryJs2['default'])(val);\n    result = timeVal.asMilliseconds();\n  } catch (ex) {\n    result = 0;\n  }\n\n  return result;\n}\n\n;\n\nfunction parse(command, options, kbnPackage) {\n  var settings = {\n    timeout: options.timeout || 0,\n    quiet: options.quiet || false,\n    silent: options.silent || false,\n    config: options.config || '',\n    plugin: command,\n    version: kbnPackage.version,\n    pluginDir: options.pluginDir || ''\n  };\n\n  settings.urls = generateUrls(settings);\n  settings.workingPath = (0, _path.resolve)(settings.pluginDir, '.plugin.installing');\n  settings.tempArchiveFile = (0, _path.resolve)(settings.workingPath, 'archive.part');\n  settings.tempPackageFile = (0, _path.resolve)(settings.workingPath, 'package.json');\n  settings.setPlugin = function (plugin) {\n    settings.plugin = plugin;\n    settings.pluginPath = (0, _path.resolve)(settings.pluginDir, settings.plugin.name);\n  };\n\n  return settings;\n}\n\n;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL2NsaV9wbHVnaW4vaW5zdGFsbC9zZXR0aW5ncy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O3dCQUFtQixXQUFXOzs7O3NCQUNELFFBQVE7O29CQUNiLE1BQU07O2tCQUNDLElBQUk7O0FBRW5DLFNBQVMsWUFBWSxDQUFDLElBQW1CLEVBQUU7TUFBbkIsT0FBTyxHQUFULElBQW1CLENBQWpCLE9BQU87TUFBRSxNQUFNLEdBQWpCLElBQW1CLENBQVIsTUFBTTs7QUFDckMsU0FBTyxDQUNMLE1BQU0sMENBQ2dDLE1BQU0sU0FBSSxNQUFNLFNBQUksT0FBTyxVQUNsRSxDQUFDO0NBQ0g7O0FBRU0sU0FBUyxpQkFBaUIsQ0FBQyxHQUFHLEVBQUU7QUFDckMsTUFBSSxNQUFNLFlBQUEsQ0FBQzs7QUFFWCxNQUFJO0FBQ0YsUUFBTSxPQUFPLEdBQUcsMkJBQU8sR0FBRyxDQUFDLENBQUM7QUFDNUIsVUFBTSxHQUFHLE9BQU8sQ0FBQyxjQUFjLEVBQUUsQ0FBQztHQUNuQyxDQUFDLE9BQU8sRUFBRSxFQUFFO0FBQ1gsVUFBTSxHQUFHLENBQUMsQ0FBQztHQUNaOztBQUVELFNBQU8sTUFBTSxDQUFDO0NBQ2Y7O0FBQUEsQ0FBQzs7QUFFSyxTQUFTLEtBQUssQ0FBQyxPQUFPLEVBQUUsT0FBTyxFQUFFLFVBQVUsRUFBRTtBQUNsRCxNQUFNLFFBQVEsR0FBRztBQUNmLFdBQU8sRUFBRSxPQUFPLENBQUMsT0FBTyxJQUFJLENBQUM7QUFDN0IsU0FBSyxFQUFFLE9BQU8sQ0FBQyxLQUFLLElBQUksS0FBSztBQUM3QixVQUFNLEVBQUUsT0FBTyxDQUFDLE1BQU0sSUFBSSxLQUFLO0FBQy9CLFVBQU0sRUFBRSxPQUFPLENBQUMsTUFBTSxJQUFJLEVBQUU7QUFDNUIsVUFBTSxFQUFFLE9BQU87QUFDZixXQUFPLEVBQUUsVUFBVSxDQUFDLE9BQU87QUFDM0IsYUFBUyxFQUFFLE9BQU8sQ0FBQyxTQUFTLElBQUksRUFBRTtHQUNuQyxDQUFDOztBQUVGLFVBQVEsQ0FBQyxJQUFJLEdBQUcsWUFBWSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQ3ZDLFVBQVEsQ0FBQyxXQUFXLEdBQUcsbUJBQVEsUUFBUSxDQUFDLFNBQVMsRUFBRSxvQkFBb0IsQ0FBQyxDQUFDO0FBQ3pFLFVBQVEsQ0FBQyxlQUFlLEdBQUcsbUJBQVEsUUFBUSxDQUFDLFdBQVcsRUFBRSxjQUFjLENBQUMsQ0FBQztBQUN6RSxVQUFRLENBQUMsZUFBZSxHQUFHLG1CQUFRLFFBQVEsQ0FBQyxXQUFXLEVBQUUsY0FBYyxDQUFDLENBQUM7QUFDekUsVUFBUSxDQUFDLFNBQVMsR0FBRyxVQUFVLE1BQU0sRUFBRTtBQUNyQyxZQUFRLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztBQUN6QixZQUFRLENBQUMsVUFBVSxHQUFHLG1CQUFRLFFBQVEsQ0FBQyxTQUFTLEVBQUUsUUFBUSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztHQUN6RSxDQUFDOztBQUVGLFNBQU8sUUFBUSxDQUFDO0NBQ2pCOztBQUFBLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvY2xpX3BsdWdpbi9pbnN0YWxsL3NldHRpbmdzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cGlyeSBmcm9tICdleHBpcnktanMnO1xuaW1wb3J0IHsgaW50ZXJzZWN0aW9uIH0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IHJlc29sdmUgfSBmcm9tICdwYXRoJztcbmltcG9ydCB7IGFyY2gsIHBsYXRmb3JtIH0gZnJvbSAnb3MnO1xuXG5mdW5jdGlvbiBnZW5lcmF0ZVVybHMoeyB2ZXJzaW9uLCBwbHVnaW4gfSkge1xuICByZXR1cm4gW1xuICAgIHBsdWdpbixcbiAgICBgaHR0cHM6Ly9kb3dubG9hZC5lbGFzdGljLmNvL2tpYmFuYS8ke3BsdWdpbn0vJHtwbHVnaW59LSR7dmVyc2lvbn0uemlwYFxuICBdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VNaWxsaXNlY29uZHModmFsKSB7XG4gIGxldCByZXN1bHQ7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCB0aW1lVmFsID0gZXhwaXJ5KHZhbCk7XG4gICAgcmVzdWx0ID0gdGltZVZhbC5hc01pbGxpc2Vjb25kcygpO1xuICB9IGNhdGNoIChleCkge1xuICAgIHJlc3VsdCA9IDA7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlKGNvbW1hbmQsIG9wdGlvbnMsIGtiblBhY2thZ2UpIHtcbiAgY29uc3Qgc2V0dGluZ3MgPSB7XG4gICAgdGltZW91dDogb3B0aW9ucy50aW1lb3V0IHx8IDAsXG4gICAgcXVpZXQ6IG9wdGlvbnMucXVpZXQgfHwgZmFsc2UsXG4gICAgc2lsZW50OiBvcHRpb25zLnNpbGVudCB8fCBmYWxzZSxcbiAgICBjb25maWc6IG9wdGlvbnMuY29uZmlnIHx8ICcnLFxuICAgIHBsdWdpbjogY29tbWFuZCxcbiAgICB2ZXJzaW9uOiBrYm5QYWNrYWdlLnZlcnNpb24sXG4gICAgcGx1Z2luRGlyOiBvcHRpb25zLnBsdWdpbkRpciB8fCAnJ1xuICB9O1xuXG4gIHNldHRpbmdzLnVybHMgPSBnZW5lcmF0ZVVybHMoc2V0dGluZ3MpO1xuICBzZXR0aW5ncy53b3JraW5nUGF0aCA9IHJlc29sdmUoc2V0dGluZ3MucGx1Z2luRGlyLCAnLnBsdWdpbi5pbnN0YWxsaW5nJyk7XG4gIHNldHRpbmdzLnRlbXBBcmNoaXZlRmlsZSA9IHJlc29sdmUoc2V0dGluZ3Mud29ya2luZ1BhdGgsICdhcmNoaXZlLnBhcnQnKTtcbiAgc2V0dGluZ3MudGVtcFBhY2thZ2VGaWxlID0gcmVzb2x2ZShzZXR0aW5ncy53b3JraW5nUGF0aCwgJ3BhY2thZ2UuanNvbicpO1xuICBzZXR0aW5ncy5zZXRQbHVnaW4gPSBmdW5jdGlvbiAocGx1Z2luKSB7XG4gICAgc2V0dGluZ3MucGx1Z2luID0gcGx1Z2luO1xuICAgIHNldHRpbmdzLnBsdWdpblBhdGggPSByZXNvbHZlKHNldHRpbmdzLnBsdWdpbkRpciwgc2V0dGluZ3MucGx1Z2luLm5hbWUpO1xuICB9O1xuXG4gIHJldHVybiBzZXR0aW5ncztcbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/cli_plugin/install/settings.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;wBAAmB,WAAW;;;;sBACD,QAAQ;;oBACb,MAAM;;kBACC,IAAI;;AAEnC,SAAS,YAAY,CAAC,IAAmB,EAAE;MAAnB,OAAO,GAAT,IAAmB,CAAjB,OAAO;MAAE,MAAM,GAAjB,IAAmB,CAAR,MAAM;;AACrC,SAAO,CACL,MAAM,0CACgC,MAAM,SAAI,MAAM,SAAI,OAAO,UAClE,CAAC;CACH;;AAEM,SAAS,iBAAiB,CAAC,GAAG,EAAE;AACrC,MAAI,MAAM,YAAA,CAAC;;AAEX,MAAI;AACF,QAAM,OAAO,GAAG,2BAAO,GAAG,CAAC,CAAC;AAC5B,UAAM,GAAG,OAAO,CAAC,cAAc,EAAE,CAAC;GACnC,CAAC,OAAO,EAAE,EAAE;AACX,UAAM,GAAG,CAAC,CAAC;GACZ;;AAED,SAAO,MAAM,CAAC;CACf;;AAAA,CAAC;;AAEK,SAAS,KAAK,CAAC,OAAO,EAAE,OAAO,EAAE,UAAU,EAAE;AAClD,MAAM,QAAQ,GAAG;AACf,WAAO,EAAE,OAAO,CAAC,OAAO,IAAI,CAAC;AAC7B,SAAK,EAAE,OAAO,CAAC,KAAK,IAAI,KAAK;AAC7B,UAAM,EAAE,OAAO,CAAC,MAAM,IAAI,KAAK;AAC/B,UAAM,EAAE,OAAO,CAAC,MAAM,IAAI,EAAE;AAC5B,UAAM,EAAE,OAAO;AACf,WAAO,EAAE,UAAU,CAAC,OAAO;AAC3B,aAAS,EAAE,OAAO,CAAC,SAAS,IAAI,EAAE;GACnC,CAAC;;AAEF,UAAQ,CAAC,IAAI,GAAG,YAAY,CAAC,QAAQ,CAAC,CAAC;AACvC,UAAQ,CAAC,WAAW,GAAG,mBAAQ,QAAQ,CAAC,SAAS,EAAE,oBAAoB,CAAC,CAAC;AACzE,UAAQ,CAAC,eAAe,GAAG,mBAAQ,QAAQ,CAAC,WAAW,EAAE,cAAc,CAAC,CAAC;AACzE,UAAQ,CAAC,eAAe,GAAG,mBAAQ,QAAQ,CAAC,WAAW,EAAE,cAAc,CAAC,CAAC;AACzE,UAAQ,CAAC,SAAS,GAAG,UAAU,MAAM,EAAE;AACrC,YAAQ,CAAC,MAAM,GAAG,MAAM,CAAC;AACzB,YAAQ,CAAC,UAAU,GAAG,mBAAQ,QAAQ,CAAC,SAAS,EAAE,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;GACzE,CAAC;;AAEF,SAAO,QAAQ,CAAC;CACjB;;AAAA,CAAC",
      "file": "/home/vio/v3metrics/src/cli_plugin/install/settings.js",
      "sourcesContent": [
        "import expiry from 'expiry-js';\nimport { intersection } from 'lodash';\nimport { resolve } from 'path';\nimport { arch, platform } from 'os';\n\nfunction generateUrls({ version, plugin }) {\n  return [\n    plugin,\n    `https://download.elastic.co/kibana/${plugin}/${plugin}-${version}.zip`\n  ];\n}\n\nexport function parseMilliseconds(val) {\n  let result;\n\n  try {\n    const timeVal = expiry(val);\n    result = timeVal.asMilliseconds();\n  } catch (ex) {\n    result = 0;\n  }\n\n  return result;\n};\n\nexport function parse(command, options, kbnPackage) {\n  const settings = {\n    timeout: options.timeout || 0,\n    quiet: options.quiet || false,\n    silent: options.silent || false,\n    config: options.config || '',\n    plugin: command,\n    version: kbnPackage.version,\n    pluginDir: options.pluginDir || ''\n  };\n\n  settings.urls = generateUrls(settings);\n  settings.workingPath = resolve(settings.pluginDir, '.plugin.installing');\n  settings.tempArchiveFile = resolve(settings.workingPath, 'archive.part');\n  settings.tempPackageFile = resolve(settings.workingPath, 'package.json');\n  settings.setPlugin = function (plugin) {\n    settings.plugin = plugin;\n    settings.pluginPath = resolve(settings.pluginDir, settings.plugin.name);\n  };\n\n  return settings;\n};\n"
      ]
    },
    "mtime": 1467036622785
  },
  "{\"filename\":\"/home/vio/v3metrics/src/cli_plugin/remove/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "../../utils",
            "imported": [
              "fromRoot"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "fromRoot",
                "local": "fromRoot"
              }
            ]
          },
          {
            "source": "./remove",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "remove"
              }
            ]
          },
          {
            "source": "../lib/logger",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Logger"
              }
            ]
          },
          {
            "source": "./settings",
            "imported": [
              "parse"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "parse",
                "local": "parse"
              }
            ]
          },
          {
            "source": "../../server/path",
            "imported": [
              "getConfig"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "getConfig",
                "local": "getConfig"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "pluginRemove",
            "program"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "pluginRemove",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "program",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = pluginRemove;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _utils = require('../../utils');\n\nvar _remove = require('./remove');\n\nvar _remove2 = _interopRequireDefault(_remove);\n\nvar _libLogger = require('../lib/logger');\n\nvar _libLogger2 = _interopRequireDefault(_libLogger);\n\nvar _settings = require('./settings');\n\nvar _serverPath = require('../../server/path');\n\nfunction processCommand(command, options) {\n  var settings = undefined;\n  try {\n    settings = (0, _settings.parse)(command, options);\n  } catch (ex) {\n    //The logger has not yet been initialized.\n    console.error(ex.message);\n    process.exit(64); // eslint-disable-line no-process-exit\n  }\n\n  var logger = new _libLogger2['default'](settings);\n  (0, _remove2['default'])(settings, logger);\n}\n\nfunction pluginRemove(program) {\n  program.command('remove <plugin>').option('-q, --quiet', 'disable all process messaging except errors').option('-s, --silent', 'disable all process messaging').option('-c, --config <path>', 'path to the config file', (0, _serverPath.getConfig)()).option('-d, --plugin-dir <path>', 'path to the directory where plugins are stored', (0, _utils.fromRoot)('installedPlugins')).description('remove a plugin', 'common examples:\\n  remove x-pack').action(processCommand);\n}\n\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL2NsaV9wbHVnaW4vcmVtb3ZlL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O3FCQW9Cd0IsWUFBWTs7OztxQkFwQlgsYUFBYTs7c0JBQ25CLFVBQVU7Ozs7eUJBQ1YsZUFBZTs7Ozt3QkFDWixZQUFZOzswQkFDUixtQkFBbUI7O0FBRTdDLFNBQVMsY0FBYyxDQUFDLE9BQU8sRUFBRSxPQUFPLEVBQUU7QUFDeEMsTUFBSSxRQUFRLFlBQUEsQ0FBQztBQUNiLE1BQUk7QUFDRixZQUFRLEdBQUcscUJBQU0sT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0dBQ3BDLENBQUMsT0FBTyxFQUFFLEVBQUU7O0FBRVgsV0FBTyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDMUIsV0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztHQUNsQjs7QUFFRCxNQUFNLE1BQU0sR0FBRywyQkFBVyxRQUFRLENBQUMsQ0FBQztBQUNwQywyQkFBTyxRQUFRLEVBQUUsTUFBTSxDQUFDLENBQUM7Q0FDMUI7O0FBRWMsU0FBUyxZQUFZLENBQUMsT0FBTyxFQUFFO0FBQzVDLFNBQU8sQ0FDTixPQUFPLENBQUMsaUJBQWlCLENBQUMsQ0FDMUIsTUFBTSxDQUFDLGFBQWEsRUFBRSw2Q0FBNkMsQ0FBQyxDQUNwRSxNQUFNLENBQUMsY0FBYyxFQUFFLCtCQUErQixDQUFDLENBQ3ZELE1BQU0sQ0FDTCxxQkFBcUIsRUFDckIseUJBQXlCLEVBQ3pCLDRCQUFXLENBQ1osQ0FDQSxNQUFNLENBQ0wseUJBQXlCLEVBQ3pCLGdEQUFnRCxFQUNoRCxxQkFBUyxrQkFBa0IsQ0FBQyxDQUM3QixDQUNBLFdBQVcsQ0FBQyxpQkFBaUIsc0NBRWYsQ0FDZCxNQUFNLENBQUMsY0FBYyxDQUFDLENBQUM7Q0FDekI7O0FBQUEsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9jbGlfcGx1Z2luL3JlbW92ZS9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGZyb21Sb290IH0gZnJvbSAnLi4vLi4vdXRpbHMnO1xuaW1wb3J0IHJlbW92ZSBmcm9tICcuL3JlbW92ZSc7XG5pbXBvcnQgTG9nZ2VyIGZyb20gJy4uL2xpYi9sb2dnZXInO1xuaW1wb3J0IHsgcGFyc2UgfSBmcm9tICcuL3NldHRpbmdzJztcbmltcG9ydCB7IGdldENvbmZpZyB9IGZyb20gJy4uLy4uL3NlcnZlci9wYXRoJztcblxuZnVuY3Rpb24gcHJvY2Vzc0NvbW1hbmQoY29tbWFuZCwgb3B0aW9ucykge1xuICBsZXQgc2V0dGluZ3M7XG4gIHRyeSB7XG4gICAgc2V0dGluZ3MgPSBwYXJzZShjb21tYW5kLCBvcHRpb25zKTtcbiAgfSBjYXRjaCAoZXgpIHtcbiAgICAvL1RoZSBsb2dnZXIgaGFzIG5vdCB5ZXQgYmVlbiBpbml0aWFsaXplZC5cbiAgICBjb25zb2xlLmVycm9yKGV4Lm1lc3NhZ2UpO1xuICAgIHByb2Nlc3MuZXhpdCg2NCk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcHJvY2Vzcy1leGl0XG4gIH1cblxuICBjb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKHNldHRpbmdzKTtcbiAgcmVtb3ZlKHNldHRpbmdzLCBsb2dnZXIpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBwbHVnaW5SZW1vdmUocHJvZ3JhbSkge1xuICBwcm9ncmFtXG4gIC5jb21tYW5kKCdyZW1vdmUgPHBsdWdpbj4nKVxuICAub3B0aW9uKCctcSwgLS1xdWlldCcsICdkaXNhYmxlIGFsbCBwcm9jZXNzIG1lc3NhZ2luZyBleGNlcHQgZXJyb3JzJylcbiAgLm9wdGlvbignLXMsIC0tc2lsZW50JywgJ2Rpc2FibGUgYWxsIHByb2Nlc3MgbWVzc2FnaW5nJylcbiAgLm9wdGlvbihcbiAgICAnLWMsIC0tY29uZmlnIDxwYXRoPicsXG4gICAgJ3BhdGggdG8gdGhlIGNvbmZpZyBmaWxlJyxcbiAgICBnZXRDb25maWcoKVxuICApXG4gIC5vcHRpb24oXG4gICAgJy1kLCAtLXBsdWdpbi1kaXIgPHBhdGg+JyxcbiAgICAncGF0aCB0byB0aGUgZGlyZWN0b3J5IHdoZXJlIHBsdWdpbnMgYXJlIHN0b3JlZCcsXG4gICAgZnJvbVJvb3QoJ2luc3RhbGxlZFBsdWdpbnMnKVxuICApXG4gIC5kZXNjcmlwdGlvbigncmVtb3ZlIGEgcGx1Z2luJyxcbmBjb21tb24gZXhhbXBsZXM6XG4gIHJlbW92ZSB4LXBhY2tgKVxuICAuYWN0aW9uKHByb2Nlc3NDb21tYW5kKTtcbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/cli_plugin/remove/index.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAoBwB,YAAY;;;;qBApBX,aAAa;;sBACnB,UAAU;;;;yBACV,eAAe;;;;wBACZ,YAAY;;0BACR,mBAAmB;;AAE7C,SAAS,cAAc,CAAC,OAAO,EAAE,OAAO,EAAE;AACxC,MAAI,QAAQ,YAAA,CAAC;AACb,MAAI;AACF,YAAQ,GAAG,qBAAM,OAAO,EAAE,OAAO,CAAC,CAAC;GACpC,CAAC,OAAO,EAAE,EAAE;;AAEX,WAAO,CAAC,KAAK,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC;AAC1B,WAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;GAClB;;AAED,MAAM,MAAM,GAAG,2BAAW,QAAQ,CAAC,CAAC;AACpC,2BAAO,QAAQ,EAAE,MAAM,CAAC,CAAC;CAC1B;;AAEc,SAAS,YAAY,CAAC,OAAO,EAAE;AAC5C,SAAO,CACN,OAAO,CAAC,iBAAiB,CAAC,CAC1B,MAAM,CAAC,aAAa,EAAE,6CAA6C,CAAC,CACpE,MAAM,CAAC,cAAc,EAAE,+BAA+B,CAAC,CACvD,MAAM,CACL,qBAAqB,EACrB,yBAAyB,EACzB,4BAAW,CACZ,CACA,MAAM,CACL,yBAAyB,EACzB,gDAAgD,EAChD,qBAAS,kBAAkB,CAAC,CAC7B,CACA,WAAW,CAAC,iBAAiB,sCAEf,CACd,MAAM,CAAC,cAAc,CAAC,CAAC;CACzB;;AAAA,CAAC",
      "file": "/home/vio/v3metrics/src/cli_plugin/remove/index.js",
      "sourcesContent": [
        "import { fromRoot } from '../../utils';\nimport remove from './remove';\nimport Logger from '../lib/logger';\nimport { parse } from './settings';\nimport { getConfig } from '../../server/path';\n\nfunction processCommand(command, options) {\n  let settings;\n  try {\n    settings = parse(command, options);\n  } catch (ex) {\n    //The logger has not yet been initialized.\n    console.error(ex.message);\n    process.exit(64); // eslint-disable-line no-process-exit\n  }\n\n  const logger = new Logger(settings);\n  remove(settings, logger);\n}\n\nexport default function pluginRemove(program) {\n  program\n  .command('remove <plugin>')\n  .option('-q, --quiet', 'disable all process messaging except errors')\n  .option('-s, --silent', 'disable all process messaging')\n  .option(\n    '-c, --config <path>',\n    'path to the config file',\n    getConfig()\n  )\n  .option(\n    '-d, --plugin-dir <path>',\n    'path to the directory where plugins are stored',\n    fromRoot('installedPlugins')\n  )\n  .description('remove a plugin',\n`common examples:\n  remove x-pack`)\n  .action(processCommand);\n};\n"
      ]
    },
    "mtime": 1467036622801
  },
  "{\"filename\":\"/home/vio/v3metrics/src/cli_plugin/remove/remove.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "fs",
            "imported": [
              "statSync"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "statSync",
                "local": "statSync"
              }
            ]
          },
          {
            "source": "rimraf",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "rimraf"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "remove",
            "settings",
            "logger"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "remove",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "settings",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "logger",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = remove;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _fs = require('fs');\n\nvar _rimraf = require('rimraf');\n\nvar _rimraf2 = _interopRequireDefault(_rimraf);\n\nfunction remove(settings, logger) {\n  try {\n    var stat = undefined;\n    try {\n      stat = (0, _fs.statSync)(settings.pluginPath);\n    } catch (e) {\n      throw new Error('Plugin [' + settings.plugin + '] is not installed');\n    }\n\n    if (!stat.isDirectory()) {\n      throw new Error('[' + settings.plugin + '] is not a plugin');\n    }\n\n    logger.log('Removing ' + settings.plugin + '...');\n    _rimraf2['default'].sync(settings.pluginPath);\n  } catch (err) {\n    logger.error('Unable to remove plugin because of error: \"' + err.message + '\"');\n    process.exit(74); // eslint-disable-line no-process-exit\n  }\n}\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL2NsaV9wbHVnaW4vcmVtb3ZlL3JlbW92ZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztxQkFHd0IsTUFBTTs7OztrQkFITCxJQUFJOztzQkFDVixRQUFROzs7O0FBRVosU0FBUyxNQUFNLENBQUMsUUFBUSxFQUFFLE1BQU0sRUFBRTtBQUMvQyxNQUFJO0FBQ0YsUUFBSSxJQUFJLFlBQUEsQ0FBQztBQUNULFFBQUk7QUFDRixVQUFJLEdBQUcsa0JBQVMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0tBQ3RDLENBQUMsT0FBTyxDQUFDLEVBQUU7QUFDVixZQUFNLElBQUksS0FBSyxjQUFZLFFBQVEsQ0FBQyxNQUFNLHdCQUFxQixDQUFDO0tBQ2pFOztBQUVELFFBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLEVBQUU7QUFDdkIsWUFBTSxJQUFJLEtBQUssT0FBSyxRQUFRLENBQUMsTUFBTSx1QkFBb0IsQ0FBQztLQUN6RDs7QUFFRCxVQUFNLENBQUMsR0FBRyxlQUFhLFFBQVEsQ0FBQyxNQUFNLFNBQU0sQ0FBQztBQUM3Qyx3QkFBTyxJQUFJLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0dBQ2xDLENBQUMsT0FBTyxHQUFHLEVBQUU7QUFDWixVQUFNLENBQUMsS0FBSyxpREFBK0MsR0FBRyxDQUFDLE9BQU8sT0FBSSxDQUFDO0FBQzNFLFdBQU8sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7R0FDbEI7Q0FDRiIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9jbGlfcGx1Z2luL3JlbW92ZS9yZW1vdmUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzdGF0U3luYyB9IGZyb20gJ2ZzJztcbmltcG9ydCByaW1yYWYgZnJvbSAncmltcmFmJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcmVtb3ZlKHNldHRpbmdzLCBsb2dnZXIpIHtcbiAgdHJ5IHtcbiAgICBsZXQgc3RhdDtcbiAgICB0cnkge1xuICAgICAgc3RhdCA9IHN0YXRTeW5jKHNldHRpbmdzLnBsdWdpblBhdGgpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgUGx1Z2luIFske3NldHRpbmdzLnBsdWdpbn1dIGlzIG5vdCBpbnN0YWxsZWRgKTtcbiAgICB9XG5cbiAgICBpZiAoIXN0YXQuaXNEaXJlY3RvcnkoKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBbJHtzZXR0aW5ncy5wbHVnaW59XSBpcyBub3QgYSBwbHVnaW5gKTtcbiAgICB9XG5cbiAgICBsb2dnZXIubG9nKGBSZW1vdmluZyAke3NldHRpbmdzLnBsdWdpbn0uLi5gKTtcbiAgICByaW1yYWYuc3luYyhzZXR0aW5ncy5wbHVnaW5QYXRoKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgbG9nZ2VyLmVycm9yKGBVbmFibGUgdG8gcmVtb3ZlIHBsdWdpbiBiZWNhdXNlIG9mIGVycm9yOiBcIiR7ZXJyLm1lc3NhZ2V9XCJgKTtcbiAgICBwcm9jZXNzLmV4aXQoNzQpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXByb2Nlc3MtZXhpdFxuICB9XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/cli_plugin/remove/remove.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAGwB,MAAM;;;;kBAHL,IAAI;;sBACV,QAAQ;;;;AAEZ,SAAS,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE;AAC/C,MAAI;AACF,QAAI,IAAI,YAAA,CAAC;AACT,QAAI;AACF,UAAI,GAAG,kBAAS,QAAQ,CAAC,UAAU,CAAC,CAAC;KACtC,CAAC,OAAO,CAAC,EAAE;AACV,YAAM,IAAI,KAAK,cAAY,QAAQ,CAAC,MAAM,wBAAqB,CAAC;KACjE;;AAED,QAAI,CAAC,IAAI,CAAC,WAAW,EAAE,EAAE;AACvB,YAAM,IAAI,KAAK,OAAK,QAAQ,CAAC,MAAM,uBAAoB,CAAC;KACzD;;AAED,UAAM,CAAC,GAAG,eAAa,QAAQ,CAAC,MAAM,SAAM,CAAC;AAC7C,wBAAO,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;GAClC,CAAC,OAAO,GAAG,EAAE;AACZ,UAAM,CAAC,KAAK,iDAA+C,GAAG,CAAC,OAAO,OAAI,CAAC;AAC3E,WAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;GAClB;CACF",
      "file": "/home/vio/v3metrics/src/cli_plugin/remove/remove.js",
      "sourcesContent": [
        "import { statSync } from 'fs';\nimport rimraf from 'rimraf';\n\nexport default function remove(settings, logger) {\n  try {\n    let stat;\n    try {\n      stat = statSync(settings.pluginPath);\n    } catch (e) {\n      throw new Error(`Plugin [${settings.plugin}] is not installed`);\n    }\n\n    if (!stat.isDirectory()) {\n      throw new Error(`[${settings.plugin}] is not a plugin`);\n    }\n\n    logger.log(`Removing ${settings.plugin}...`);\n    rimraf.sync(settings.pluginPath);\n  } catch (err) {\n    logger.error(`Unable to remove plugin because of error: \"${err.message}\"`);\n    process.exit(74); // eslint-disable-line no-process-exit\n  }\n}\n"
      ]
    },
    "mtime": 1467036622801
  },
  "{\"filename\":\"/home/vio/v3metrics/src/cli_plugin/remove/settings.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "path",
            "imported": [
              "resolve"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "resolve",
                "local": "resolve"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "parse",
            "command",
            "options"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "parse",
              "exported": "parse"
            },
            {
              "kind": "local",
              "local": "command",
              "exported": "command"
            },
            {
              "kind": "local",
              "local": "options",
              "exported": "options"
            }
          ]
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports.parse = parse;\n\nvar _path = require('path');\n\nfunction parse(command, options) {\n  var settings = {\n    quiet: options.quiet || false,\n    silent: options.silent || false,\n    config: options.config || '',\n    pluginDir: options.pluginDir || '',\n    plugin: command\n  };\n\n  settings.pluginPath = (0, _path.resolve)(settings.pluginDir, settings.plugin);\n\n  return settings;\n}\n\n;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL2NsaV9wbHVnaW4vcmVtb3ZlL3NldHRpbmdzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7b0JBQXdCLE1BQU07O0FBRXZCLFNBQVMsS0FBSyxDQUFDLE9BQU8sRUFBRSxPQUFPLEVBQUU7QUFDdEMsTUFBTSxRQUFRLEdBQUc7QUFDZixTQUFLLEVBQUUsT0FBTyxDQUFDLEtBQUssSUFBSSxLQUFLO0FBQzdCLFVBQU0sRUFBRSxPQUFPLENBQUMsTUFBTSxJQUFJLEtBQUs7QUFDL0IsVUFBTSxFQUFFLE9BQU8sQ0FBQyxNQUFNLElBQUksRUFBRTtBQUM1QixhQUFTLEVBQUUsT0FBTyxDQUFDLFNBQVMsSUFBSSxFQUFFO0FBQ2xDLFVBQU0sRUFBRSxPQUFPO0dBQ2hCLENBQUM7O0FBRUYsVUFBUSxDQUFDLFVBQVUsR0FBRyxtQkFBUSxRQUFRLENBQUMsU0FBUyxFQUFFLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQzs7QUFFbkUsU0FBTyxRQUFRLENBQUM7Q0FDakI7O0FBQUEsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9jbGlfcGx1Z2luL3JlbW92ZS9zZXR0aW5ncy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJlc29sdmUgfSBmcm9tICdwYXRoJztcblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlKGNvbW1hbmQsIG9wdGlvbnMpIHtcbiAgY29uc3Qgc2V0dGluZ3MgPSB7XG4gICAgcXVpZXQ6IG9wdGlvbnMucXVpZXQgfHwgZmFsc2UsXG4gICAgc2lsZW50OiBvcHRpb25zLnNpbGVudCB8fCBmYWxzZSxcbiAgICBjb25maWc6IG9wdGlvbnMuY29uZmlnIHx8ICcnLFxuICAgIHBsdWdpbkRpcjogb3B0aW9ucy5wbHVnaW5EaXIgfHwgJycsXG4gICAgcGx1Z2luOiBjb21tYW5kXG4gIH07XG5cbiAgc2V0dGluZ3MucGx1Z2luUGF0aCA9IHJlc29sdmUoc2V0dGluZ3MucGx1Z2luRGlyLCBzZXR0aW5ncy5wbHVnaW4pO1xuXG4gIHJldHVybiBzZXR0aW5ncztcbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/cli_plugin/remove/settings.js"
      ],
      "names": [],
      "mappings": ";;;;;;;oBAAwB,MAAM;;AAEvB,SAAS,KAAK,CAAC,OAAO,EAAE,OAAO,EAAE;AACtC,MAAM,QAAQ,GAAG;AACf,SAAK,EAAE,OAAO,CAAC,KAAK,IAAI,KAAK;AAC7B,UAAM,EAAE,OAAO,CAAC,MAAM,IAAI,KAAK;AAC/B,UAAM,EAAE,OAAO,CAAC,MAAM,IAAI,EAAE;AAC5B,aAAS,EAAE,OAAO,CAAC,SAAS,IAAI,EAAE;AAClC,UAAM,EAAE,OAAO;GAChB,CAAC;;AAEF,UAAQ,CAAC,UAAU,GAAG,mBAAQ,QAAQ,CAAC,SAAS,EAAE,QAAQ,CAAC,MAAM,CAAC,CAAC;;AAEnE,SAAO,QAAQ,CAAC;CACjB;;AAAA,CAAC",
      "file": "/home/vio/v3metrics/src/cli_plugin/remove/settings.js",
      "sourcesContent": [
        "import { resolve } from 'path';\n\nexport function parse(command, options) {\n  const settings = {\n    quiet: options.quiet || false,\n    silent: options.silent || false,\n    config: options.config || '',\n    pluginDir: options.pluginDir || '',\n    plugin: command\n  };\n\n  settings.pluginPath = resolve(settings.pluginDir, settings.plugin);\n\n  return settings;\n};\n"
      ]
    },
    "mtime": 1467036622801
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/config/setup.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./config",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Config"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _config = require('./config');\n\nvar _config2 = _interopRequireDefault(_config);\n\nmodule.exports = function (kbnServer) {\n  kbnServer.config = _config2['default'].withDefaultSchema(kbnServer.settings);\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9jb25maWcvc2V0dXAuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztzQkFBbUIsVUFBVTs7OztBQUM3QixNQUFNLENBQUMsT0FBTyxHQUFHLFVBQVUsU0FBUyxFQUFFO0FBQ3BDLFdBQVMsQ0FBQyxNQUFNLEdBQUcsb0JBQU8saUJBQWlCLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0NBQ2pFLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvc2VydmVyL2NvbmZpZy9zZXR1cC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDb25maWcgZnJvbSAnLi9jb25maWcnO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoa2JuU2VydmVyKSB7XG4gIGtiblNlcnZlci5jb25maWcgPSBDb25maWcud2l0aERlZmF1bHRTY2hlbWEoa2JuU2VydmVyLnNldHRpbmdzKTtcbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/config/setup.js"
      ],
      "names": [],
      "mappings": ";;;;sBAAmB,UAAU;;;;AAC7B,MAAM,CAAC,OAAO,GAAG,UAAU,SAAS,EAAE;AACpC,WAAS,CAAC,MAAM,GAAG,oBAAO,iBAAiB,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;CACjE,CAAC",
      "file": "/home/vio/v3metrics/src/server/config/setup.js",
      "sourcesContent": [
        "import Config from './config';\nmodule.exports = function (kbnServer) {\n  kbnServer.config = Config.withDefaultSchema(kbnServer.settings);\n};\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/http/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "url",
            "imported": [
              "parse"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "parse",
                "local": "parse"
              }
            ]
          },
          {
            "source": "url",
            "imported": [
              "format"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "format",
                "local": "format"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "fs",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "fs"
              }
            ]
          },
          {
            "source": "boom",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Boom"
              }
            ]
          },
          {
            "source": "hapi",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Hapi"
              }
            ]
          },
          {
            "source": "./get_default_route",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "getDefaultRoute"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "async-to-generator",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nvar _url = require('url');\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _fs = require('fs');\n\nvar _fs2 = _interopRequireDefault(_fs);\n\nvar _boom = require('boom');\n\nvar _boom2 = _interopRequireDefault(_boom);\n\nvar _hapi = require('hapi');\n\nvar _hapi2 = _interopRequireDefault(_hapi);\n\nvar _get_default_route = require('./get_default_route');\n\nvar _get_default_route2 = _interopRequireDefault(_get_default_route);\n\nmodule.exports = _asyncToGenerator(function* (kbnServer, server, config) {\n\n  server = kbnServer.server = new _hapi2['default'].Server();\n\n  var shortUrlLookup = require('./short_url_lookup')(server);\n  yield kbnServer.mixin(require('./setup_connection'));\n\n  // provide a simple way to expose static directories\n  server.decorate('server', 'exposeStaticDir', function (routePath, dirPath) {\n    this.route({\n      path: routePath,\n      method: 'GET',\n      handler: {\n        directory: {\n          path: dirPath,\n          listing: false,\n          lookupCompressed: true\n        }\n      },\n      config: { auth: false }\n    });\n  });\n\n  // provide a simple way to expose static files\n  server.decorate('server', 'exposeStaticFile', function (routePath, filePath) {\n    this.route({\n      path: routePath,\n      method: 'GET',\n      handler: {\n        file: filePath\n      },\n      config: { auth: false }\n    });\n  });\n\n  // helper for creating view managers for servers\n  server.decorate('server', 'setupViews', function (path, engines) {\n    this.views({\n      path: path,\n      isCached: config.get('optimize.viewCaching'),\n      engines: _lodash2['default'].assign({ jade: require('jade') }, engines || {})\n    });\n  });\n\n  server.decorate('server', 'redirectToSlash', function (route) {\n    this.route({\n      path: route,\n      method: 'GET',\n      handler: function handler(req, reply) {\n        return reply.redirect((0, _url.format)({\n          search: req.url.search,\n          pathname: req.url.pathname + '/'\n        }));\n      }\n    });\n  });\n\n  // attach the app name to the server, so we can be sure we are actually talking to kibana\n  server.ext('onPreResponse', function (req, reply) {\n    var response = req.response;\n\n    if (response.isBoom) {\n      response.output.headers['kbn-name'] = kbnServer.name;\n      response.output.headers['kbn-version'] = kbnServer.version;\n    } else {\n      response.header('kbn-name', kbnServer.name);\n      response.header('kbn-version', kbnServer.version);\n    }\n\n    return reply['continue']();\n  });\n\n  server.route({\n    path: '/',\n    method: 'GET',\n    handler: function handler(req, reply) {\n      return reply.view('root_redirect', {\n        hashRoute: config.get('server.basePath') + '/app/kibana',\n        defaultRoute: (0, _get_default_route2['default'])(kbnServer)\n      });\n    }\n  });\n\n  server.route({\n    method: 'GET',\n    path: '/{p*}',\n    handler: function handler(req, reply) {\n      var path = req.path;\n      if (path === '/' || path.charAt(path.length - 1) !== '/') {\n        return reply(_boom2['default'].notFound());\n      }\n\n      return reply.redirect((0, _url.format)({\n        search: req.url.search,\n        pathname: path.slice(0, -1)\n      })).permanent(true);\n    }\n  });\n\n  server.route({\n    method: 'GET',\n    path: '/goto/{urlId}',\n    handler: _asyncToGenerator(function* (request, reply) {\n      try {\n        var url = yield shortUrlLookup.getUrl(request.params.urlId);\n        reply().redirect(config.get('server.basePath') + url);\n      } catch (err) {\n        reply(err);\n      }\n    })\n  });\n\n  server.route({\n    method: 'POST',\n    path: '/shorten',\n    handler: _asyncToGenerator(function* (request, reply) {\n      try {\n        var urlId = yield shortUrlLookup.generateUrlId(request.payload.url);\n        reply(urlId);\n      } catch (err) {\n        reply(err);\n      }\n    })\n  });\n\n  return kbnServer.mixin(require('./xsrf'));\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9odHRwL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OzttQkFBc0IsS0FBSzs7c0JBRWIsUUFBUTs7OztrQkFDUCxJQUFJOzs7O29CQUNGLE1BQU07Ozs7b0JBQ04sTUFBTTs7OztpQ0FDSyxxQkFBcUI7Ozs7QUFDakQsTUFBTSxDQUFDLE9BQU8scUJBQUcsV0FBZ0IsU0FBUyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUU7O0FBRzFELFFBQU0sR0FBRyxTQUFTLENBQUMsTUFBTSxHQUFHLElBQUksa0JBQUssTUFBTSxFQUFFLENBQUM7O0FBRTlDLE1BQU0sY0FBYyxHQUFHLE9BQU8sQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQzdELFFBQU0sU0FBUyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxDQUFDOzs7QUFHckQsUUFBTSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEVBQUUsaUJBQWlCLEVBQUUsVUFBVSxTQUFTLEVBQUUsT0FBTyxFQUFFO0FBQ3pFLFFBQUksQ0FBQyxLQUFLLENBQUM7QUFDVCxVQUFJLEVBQUUsU0FBUztBQUNmLFlBQU0sRUFBRSxLQUFLO0FBQ2IsYUFBTyxFQUFFO0FBQ1AsaUJBQVMsRUFBRTtBQUNULGNBQUksRUFBRSxPQUFPO0FBQ2IsaUJBQU8sRUFBRSxLQUFLO0FBQ2QsMEJBQWdCLEVBQUUsSUFBSTtTQUN2QjtPQUNGO0FBQ0QsWUFBTSxFQUFFLEVBQUMsSUFBSSxFQUFFLEtBQUssRUFBQztLQUN0QixDQUFDLENBQUM7R0FDSixDQUFDLENBQUM7OztBQUdILFFBQU0sQ0FBQyxRQUFRLENBQUMsUUFBUSxFQUFFLGtCQUFrQixFQUFFLFVBQVUsU0FBUyxFQUFFLFFBQVEsRUFBRTtBQUMzRSxRQUFJLENBQUMsS0FBSyxDQUFDO0FBQ1QsVUFBSSxFQUFFLFNBQVM7QUFDZixZQUFNLEVBQUUsS0FBSztBQUNi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QyxLQUFLLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7Q0FDM0MsQ0FBQSxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9odHRwL2luZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcGFyc2UgfSBmcm9tICd1cmwnO1xuaW1wb3J0IHsgZm9ybWF0IH0gZnJvbSAndXJsJztcbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgZnMgZnJvbSAnZnMnO1xuaW1wb3J0IEJvb20gZnJvbSAnYm9vbSc7XG5pbXBvcnQgSGFwaSBmcm9tICdoYXBpJztcbmltcG9ydCBnZXREZWZhdWx0Um91dGUgZnJvbSAnLi9nZXRfZGVmYXVsdF9yb3V0ZSc7XG5tb2R1bGUuZXhwb3J0cyA9IGFzeW5jIGZ1bmN0aW9uIChrYm5TZXJ2ZXIsIHNlcnZlciwgY29uZmlnKSB7XG5cblxuICBzZXJ2ZXIgPSBrYm5TZXJ2ZXIuc2VydmVyID0gbmV3IEhhcGkuU2VydmVyKCk7XG5cbiAgY29uc3Qgc2hvcnRVcmxMb29rdXAgPSByZXF1aXJlKCcuL3Nob3J0X3VybF9sb29rdXAnKShzZXJ2ZXIpO1xuICBhd2FpdCBrYm5TZXJ2ZXIubWl4aW4ocmVxdWlyZSgnLi9zZXR1cF9jb25uZWN0aW9uJykpO1xuXG4gIC8vIHByb3ZpZGUgYSBzaW1wbGUgd2F5IHRvIGV4cG9zZSBzdGF0aWMgZGlyZWN0b3JpZXNcbiAgc2VydmVyLmRlY29yYXRlKCdzZXJ2ZXInLCAnZXhwb3NlU3RhdGljRGlyJywgZnVuY3Rpb24gKHJvdXRlUGF0aCwgZGlyUGF0aCkge1xuICAgIHRoaXMucm91dGUoe1xuICAgICAgcGF0aDogcm91dGVQYXRoLFxuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIGhhbmRsZXI6IHtcbiAgICAgICAgZGlyZWN0b3J5OiB7XG4gICAgICAgICAgcGF0aDogZGlyUGF0aCxcbiAgICAgICAgICBsaXN0aW5nOiBmYWxzZSxcbiAgICAgICAgICBsb29rdXBDb21wcmVzc2VkOiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBjb25maWc6IHthdXRoOiBmYWxzZX1cbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8gcHJvdmlkZSBhIHNpbXBsZSB3YXkgdG8gZXhwb3NlIHN0YXRpYyBmaWxlc1xuICBzZXJ2ZXIuZGVjb3JhdGUoJ3NlcnZlcicsICdleHBvc2VTdGF0aWNGaWxlJywgZnVuY3Rpb24gKHJvdXRlUGF0aCwgZmlsZVBhdGgpIHtcbiAgICB0aGlzLnJvdXRlKHtcbiAgICAgIHBhdGg6IHJvdXRlUGF0aCxcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICBoYW5kbGVyOiB7XG4gICAgICAgIGZpbGU6IGZpbGVQYXRoXG4gICAgICB9LFxuICAgICAgY29uZmlnOiB7YXV0aDogZmFsc2V9XG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vIGhlbHBlciBmb3IgY3JlYXRpbmcgdmlldyBtYW5hZ2VycyBmb3Igc2VydmVyc1xuICBzZXJ2ZXIuZGVjb3JhdGUoJ3NlcnZlcicsICdzZXR1cFZpZXdzJywgZnVuY3Rpb24gKHBhdGgsIGVuZ2luZXMpIHtcbiAgICB0aGlzLnZpZXdzKHtcbiAgICAgIHBhdGg6IHBhdGgsXG4gICAgICBpc0NhY2hlZDogY29uZmlnLmdldCgnb3B0aW1pemUudmlld0NhY2hpbmcnKSxcbiAgICAgIGVuZ2luZXM6IF8uYXNzaWduKHsgamFkZTogcmVxdWlyZSgnamFkZScpIH0sIGVuZ2luZXMgfHwge30pXG4gICAgfSk7XG4gIH0pO1xuXG4gIHNlcnZlci5kZWNvcmF0ZSgnc2VydmVyJywgJ3JlZGlyZWN0VG9TbGFzaCcsIGZ1bmN0aW9uIChyb3V0ZSkge1xuICAgIHRoaXMucm91dGUoe1xuICAgICAgcGF0aDogcm91dGUsXG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgaGFuZGxlcjogZnVuY3Rpb24gKHJlcSwgcmVwbHkpIHtcbiAgICAgICAgcmV0dXJuIHJlcGx5LnJlZGlyZWN0KGZvcm1hdCh7XG4gICAgICAgICAgc2VhcmNoOiByZXEudXJsLnNlYXJjaCxcbiAgICAgICAgICBwYXRobmFtZTogcmVxLnVybC5wYXRobmFtZSArICcvJyxcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICAvLyBhdHRhY2ggdGhlIGFwcCBuYW1lIHRvIHRoZSBzZXJ2ZXIsIHNvIHdlIGNhbiBiZSBzdXJlIHdlIGFyZSBhY3R1YWxseSB0YWxraW5nIHRvIGtpYmFuYVxuICBzZXJ2ZXIuZXh0KCdvblByZVJlc3BvbnNlJywgZnVuY3Rpb24gKHJlcSwgcmVwbHkpIHtcbiAgICBsZXQgcmVzcG9uc2UgPSByZXEucmVzcG9uc2U7XG5cbiAgICBpZiAocmVzcG9uc2UuaXNCb29tKSB7XG4gICAgICByZXNwb25zZS5vdXRwdXQuaGVhZGVyc1sna2JuLW5hbWUnXSA9IGtiblNlcnZlci5uYW1lO1xuICAgICAgcmVzcG9uc2Uub3V0cHV0LmhlYWRlcnNbJ2tibi12ZXJzaW9uJ10gPSBrYm5TZXJ2ZXIudmVyc2lvbjtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzcG9uc2UuaGVhZGVyKCdrYm4tbmFtZScsIGtiblNlcnZlci5uYW1lKTtcbiAgICAgIHJlc3BvbnNlLmhlYWRlcigna2JuLXZlcnNpb24nLCBrYm5TZXJ2ZXIudmVyc2lvbik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlcGx5LmNvbnRpbnVlKCk7XG4gIH0pO1xuXG4gIHNlcnZlci5yb3V0ZSh7XG4gICAgcGF0aDogJy8nLFxuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgaGFuZGxlcjogZnVuY3Rpb24gKHJlcSwgcmVwbHkpIHtcbiAgICAgIHJldHVybiByZXBseS52aWV3KCdyb290X3JlZGlyZWN0Jywge1xuICAgICAgICBoYXNoUm91dGU6IGAke2NvbmZpZy5nZXQoJ3NlcnZlci5iYXNlUGF0aCcpfS9hcHAva2liYW5hYCxcbiAgICAgICAgZGVmYXVsdFJvdXRlOiBnZXREZWZhdWx0Um91dGUoa2JuU2VydmVyKSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG5cbiAgc2VydmVyLnJvdXRlKHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIHBhdGg6ICcve3AqfScsXG4gICAgaGFuZGxlcjogZnVuY3Rpb24gKHJlcSwgcmVwbHkpIHtcbiAgICAgIGxldCBwYXRoID0gcmVxLnBhdGg7XG4gICAgICBpZiAocGF0aCA9PT0gJy8nIHx8IHBhdGguY2hhckF0KHBhdGgubGVuZ3RoIC0gMSkgIT09ICcvJykge1xuICAgICAgICByZXR1cm4gcmVwbHkoQm9vbS5ub3RGb3VuZCgpKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlcGx5LnJlZGlyZWN0KGZvcm1hdCh7XG4gICAgICAgIHNlYXJjaDogcmVxLnVybC5zZWFyY2gsXG4gICAgICAgIHBhdGhuYW1lOiBwYXRoLnNsaWNlKDAsIC0xKSxcbiAgICAgIH0pKVxuICAgICAgLnBlcm1hbmVudCh0cnVlKTtcbiAgICB9XG4gIH0pO1xuXG4gIHNlcnZlci5yb3V0ZSh7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICBwYXRoOiAnL2dvdG8ve3VybElkfScsXG4gICAgaGFuZGxlcjogYXN5bmMgZnVuY3Rpb24gKHJlcXVlc3QsIHJlcGx5KSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB1cmwgPSBhd2FpdCBzaG9ydFVybExvb2t1cC5nZXRVcmwocmVxdWVzdC5wYXJhbXMudXJsSWQpO1xuICAgICAgICByZXBseSgpLnJlZGlyZWN0KGNvbmZpZy5nZXQoJ3NlcnZlci5iYXNlUGF0aCcpICsgdXJsKTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICByZXBseShlcnIpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgc2VydmVyLnJvdXRlKHtcbiAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICBwYXRoOiAnL3Nob3J0ZW4nLFxuICAgIGhhbmRsZXI6IGFzeW5jIGZ1bmN0aW9uIChyZXF1ZXN0LCByZXBseSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXJsSWQgPSBhd2FpdCBzaG9ydFVybExvb2t1cC5nZW5lcmF0ZVVybElkKHJlcXVlc3QucGF5bG9hZC51cmwpO1xuICAgICAgICByZXBseSh1cmxJZCk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmVwbHkoZXJyKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBrYm5TZXJ2ZXIubWl4aW4ocmVxdWlyZSgnLi94c3JmJykpO1xufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/http/index.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/src/server/http/index.js",
      "sourcesContent": [
        "import { parse } from 'url';\nimport { format } from 'url';\nimport _ from 'lodash';\nimport fs from 'fs';\nimport Boom from 'boom';\nimport Hapi from 'hapi';\nimport getDefaultRoute from './get_default_route';\nmodule.exports = async function (kbnServer, server, config) {\n\n\n  server = kbnServer.server = new Hapi.Server();\n\n  const shortUrlLookup = require('./short_url_lookup')(server);\n  await kbnServer.mixin(require('./setup_connection'));\n\n  // provide a simple way to expose static directories\n  server.decorate('server', 'exposeStaticDir', function (routePath, dirPath) {\n    this.route({\n      path: routePath,\n      method: 'GET',\n      handler: {\n        directory: {\n          path: dirPath,\n          listing: false,\n          lookupCompressed: true\n        }\n      },\n      config: {auth: false}\n    });\n  });\n\n  // provide a simple way to expose static files\n  server.decorate('server', 'exposeStaticFile', function (routePath, filePath) {\n    this.route({\n      path: routePath,\n      method: 'GET',\n      handler: {\n        file: filePath\n      },\n      config: {auth: false}\n    });\n  });\n\n  // helper for creating view managers for servers\n  server.decorate('server', 'setupViews', function (path, engines) {\n    this.views({\n      path: path,\n      isCached: config.get('optimize.viewCaching'),\n      engines: _.assign({ jade: require('jade') }, engines || {})\n    });\n  });\n\n  server.decorate('server', 'redirectToSlash', function (route) {\n    this.route({\n      path: route,\n      method: 'GET',\n      handler: function (req, reply) {\n        return reply.redirect(format({\n          search: req.url.search,\n          pathname: req.url.pathname + '/',\n        }));\n      }\n    });\n  });\n\n  // attach the app name to the server, so we can be sure we are actually talking to kibana\n  server.ext('onPreResponse', function (req, reply) {\n    let response = req.response;\n\n    if (response.isBoom) {\n      response.output.headers['kbn-name'] = kbnServer.name;\n      response.output.headers['kbn-version'] = kbnServer.version;\n    } else {\n      response.header('kbn-name', kbnServer.name);\n      response.header('kbn-version', kbnServer.version);\n    }\n\n    return reply.continue();\n  });\n\n  server.route({\n    path: '/',\n    method: 'GET',\n    handler: function (req, reply) {\n      return reply.view('root_redirect', {\n        hashRoute: `${config.get('server.basePath')}/app/kibana`,\n        defaultRoute: getDefaultRoute(kbnServer),\n      });\n    }\n  });\n\n  server.route({\n    method: 'GET',\n    path: '/{p*}',\n    handler: function (req, reply) {\n      let path = req.path;\n      if (path === '/' || path.charAt(path.length - 1) !== '/') {\n        return reply(Boom.notFound());\n      }\n\n      return reply.redirect(format({\n        search: req.url.search,\n        pathname: path.slice(0, -1),\n      }))\n      .permanent(true);\n    }\n  });\n\n  server.route({\n    method: 'GET',\n    path: '/goto/{urlId}',\n    handler: async function (request, reply) {\n      try {\n        const url = await shortUrlLookup.getUrl(request.params.urlId);\n        reply().redirect(config.get('server.basePath') + url);\n      } catch (err) {\n        reply(err);\n      }\n    }\n  });\n\n  server.route({\n    method: 'POST',\n    path: '/shorten',\n    handler: async function (request, reply) {\n      try {\n        const urlId = await shortUrlLookup.generateUrlId(request.payload.url);\n        reply(urlId);\n      } catch (err) {\n        reply(err);\n      }\n    }\n  });\n\n  return kbnServer.mixin(require('./xsrf'));\n};\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/http/get_default_route.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nmodule.exports = _lodash2['default'].once(function (kbnServer) {\n  var uiExports = kbnServer.uiExports;\n  var config = kbnServer.config;\n\n  return '' + config.get('server.basePath') + config.get('server.defaultRoute');\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9odHRwL2dldF9kZWZhdWx0X3JvdXRlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7c0JBQWMsUUFBUTs7OztBQUV0QixNQUFNLENBQUMsT0FBTyxHQUFHLG9CQUFFLElBQUksQ0FBQyxVQUFVLFNBQVMsRUFBRTtNQUNuQyxTQUFTLEdBQWEsU0FBUyxDQUEvQixTQUFTO01BQUUsTUFBTSxHQUFLLFNBQVMsQ0FBcEIsTUFBTTs7QUFDekIsY0FBVSxNQUFNLENBQUMsR0FBRyxDQUFDLGlCQUFpQixDQUFDLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFHO0NBQy9FLENBQUMsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9zZXJ2ZXIvaHR0cC9nZXRfZGVmYXVsdF9yb3V0ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5cbm1vZHVsZS5leHBvcnRzID0gXy5vbmNlKGZ1bmN0aW9uIChrYm5TZXJ2ZXIpIHtcbiAgY29uc3QgeyB1aUV4cG9ydHMsIGNvbmZpZyB9ID0ga2JuU2VydmVyO1xuICByZXR1cm4gYCR7Y29uZmlnLmdldCgnc2VydmVyLmJhc2VQYXRoJyl9JHtjb25maWcuZ2V0KCdzZXJ2ZXIuZGVmYXVsdFJvdXRlJyl9YDtcbn0pO1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/http/get_default_route.js"
      ],
      "names": [],
      "mappings": ";;;;sBAAc,QAAQ;;;;AAEtB,MAAM,CAAC,OAAO,GAAG,oBAAE,IAAI,CAAC,UAAU,SAAS,EAAE;MACnC,SAAS,GAAa,SAAS,CAA/B,SAAS;MAAE,MAAM,GAAK,SAAS,CAApB,MAAM;;AACzB,cAAU,MAAM,CAAC,GAAG,CAAC,iBAAiB,CAAC,GAAG,MAAM,CAAC,GAAG,CAAC,qBAAqB,CAAC,CAAG;CAC/E,CAAC,CAAC",
      "file": "/home/vio/v3metrics/src/server/http/get_default_route.js",
      "sourcesContent": [
        "import _ from 'lodash';\n\nmodule.exports = _.once(function (kbnServer) {\n  const { uiExports, config } = kbnServer;\n  return `${config.get('server.basePath')}${config.get('server.defaultRoute')}`;\n});\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/logging/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "bluebird",
            "imported": [
              "fromNode"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "fromNode",
                "local": "fromNode"
              }
            ]
          },
          {
            "source": "even-better",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "evenBetter"
              }
            ]
          },
          {
            "source": "./configuration",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "loggingConfiguration"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _bluebird = require('bluebird');\n\nvar _evenBetter = require('even-better');\n\nvar _evenBetter2 = _interopRequireDefault(_evenBetter);\n\nvar _configuration = require('./configuration');\n\nvar _configuration2 = _interopRequireDefault(_configuration);\n\nexports['default'] = function (kbnServer, server, config) {\n  // prevent relying on kbnServer so this can be used with other hapi servers\n  kbnServer = null;\n\n  return (0, _bluebird.fromNode)(function (cb) {\n    server.register({\n      register: _evenBetter2['default'],\n      options: (0, _configuration2['default'])(config)\n    }, cb);\n  });\n};\n\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9sb2dnaW5nL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O3dCQUF5QixVQUFVOzswQkFDWixhQUFhOzs7OzZCQUNILGlCQUFpQjs7OztxQkFFbkMsVUFBVSxTQUFTLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRTs7QUFFbEQsV0FBUyxHQUFHLElBQUksQ0FBQzs7QUFFakIsU0FBTyx3QkFBUyxVQUFVLEVBQUUsRUFBRTtBQUM1QixVQUFNLENBQUMsUUFBUSxDQUFDO0FBQ2QsY0FBUSx5QkFBWTtBQUNwQixhQUFPLEVBQUUsZ0NBQXFCLE1BQU0sQ0FBQztLQUN0QyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0dBQ1IsQ0FBQyxDQUFDO0NBQ0o7O0FBQUEsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9zZXJ2ZXIvbG9nZ2luZy9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGZyb21Ob2RlIH0gZnJvbSAnYmx1ZWJpcmQnO1xuaW1wb3J0IGV2ZW5CZXR0ZXIgZnJvbSAnZXZlbi1iZXR0ZXInO1xuaW1wb3J0IGxvZ2dpbmdDb25maWd1cmF0aW9uIGZyb20gJy4vY29uZmlndXJhdGlvbic7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChrYm5TZXJ2ZXIsIHNlcnZlciwgY29uZmlnKSB7XG4gIC8vIHByZXZlbnQgcmVseWluZyBvbiBrYm5TZXJ2ZXIgc28gdGhpcyBjYW4gYmUgdXNlZCB3aXRoIG90aGVyIGhhcGkgc2VydmVyc1xuICBrYm5TZXJ2ZXIgPSBudWxsO1xuXG4gIHJldHVybiBmcm9tTm9kZShmdW5jdGlvbiAoY2IpIHtcbiAgICBzZXJ2ZXIucmVnaXN0ZXIoe1xuICAgICAgcmVnaXN0ZXI6IGV2ZW5CZXR0ZXIsXG4gICAgICBvcHRpb25zOiBsb2dnaW5nQ29uZmlndXJhdGlvbihjb25maWcpXG4gICAgfSwgY2IpO1xuICB9KTtcbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/logging/index.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;wBAAyB,UAAU;;0BACZ,aAAa;;;;6BACH,iBAAiB;;;;qBAEnC,UAAU,SAAS,EAAE,MAAM,EAAE,MAAM,EAAE;;AAElD,WAAS,GAAG,IAAI,CAAC;;AAEjB,SAAO,wBAAS,UAAU,EAAE,EAAE;AAC5B,UAAM,CAAC,QAAQ,CAAC;AACd,cAAQ,yBAAY;AACpB,aAAO,EAAE,gCAAqB,MAAM,CAAC;KACtC,EAAE,EAAE,CAAC,CAAC;GACR,CAAC,CAAC;CACJ;;AAAA,CAAC",
      "file": "/home/vio/v3metrics/src/server/logging/index.js",
      "sourcesContent": [
        "import { fromNode } from 'bluebird';\nimport evenBetter from 'even-better';\nimport loggingConfiguration from './configuration';\n\nexport default function (kbnServer, server, config) {\n  // prevent relying on kbnServer so this can be used with other hapi servers\n  kbnServer = null;\n\n  return fromNode(function (cb) {\n    server.register({\n      register: evenBetter,\n      options: loggingConfiguration(config)\n    }, cb);\n  });\n};\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/status/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "./server_status",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "ServerStatus"
              }
            ]
          },
          {
            "source": "./wrap_auth_config",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "wrapAuthConfig"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "join"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "join",
                "local": "join"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "async-to-generator",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _server_status = require('./server_status');\n\nvar _server_status2 = _interopRequireDefault(_server_status);\n\nvar _wrap_auth_config = require('./wrap_auth_config');\n\nvar _wrap_auth_config2 = _interopRequireDefault(_wrap_auth_config);\n\nvar _path = require('path');\n\nexports['default'] = function (kbnServer, server, config) {\n  kbnServer.status = new _server_status2['default'](kbnServer.server);\n\n  if (server.plugins['even-better']) {\n    kbnServer.mixin(require('./metrics'));\n  }\n\n  var wrapAuth = (0, _wrap_auth_config2['default'])(config.get('status.allowAnonymous'));\n\n  server.route(wrapAuth({\n    method: 'GET',\n    path: '/api/status',\n    handler: function handler(request, reply) {\n      return reply({\n        name: config.get('server.name'),\n        uuid: config.get('uuid'),\n        status: kbnServer.status.toJSON(),\n        metrics: kbnServer.metrics\n      });\n    }\n  }));\n\n  server.decorate('reply', 'renderStatusPage', _asyncToGenerator(function* () {\n    var app = kbnServer.uiExports.getHiddenApp('status_page');\n    var response = yield getResponse(this);\n    response.code(kbnServer.status.isGreen() ? 200 : 503);\n    return response;\n\n    function getResponse(ctx) {\n      if (app) {\n        return ctx.renderApp(app);\n      }\n      return ctx(kbnServer.status.toString());\n    }\n  }));\n\n  server.route(wrapAuth({\n    method: 'GET',\n    path: '/status',\n    handler: function handler(request, reply) {\n      return reply.renderStatusPage();\n    }\n  }));\n};\n\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9zdGF0dXMvaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztzQkFBYyxRQUFROzs7OzZCQUNHLGlCQUFpQjs7OztnQ0FDZixvQkFBb0I7Ozs7b0JBQzFCLE1BQU07O3FCQUVaLFVBQVUsU0FBUyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUU7QUFDbEQsV0FBUyxDQUFDLE1BQU0sR0FBRywrQkFBaUIsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDOztBQUV0RCxNQUFJLE1BQU0sQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLEVBQUU7QUFDakMsYUFBUyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQztHQUN2Qzs7QUFFRCxNQUFNLFFBQVEsR0FBRyxtQ0FBZSxNQUFNLENBQUMsR0FBRyxDQUFDLHVCQUF1QixDQUFDLENBQUMsQ0FBQzs7QUFFckUsUUFBTSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUM7QUFDcEIsVUFBTSxFQUFFLEtBQUs7QUFDYixRQUFJLEVBQUUsYUFBYTtBQUNuQixXQUFPLEVBQUUsaUJBQVUsT0FBTyxFQUFFLEtBQUssRUFBRTtBQUNqQyxhQUFPLEtBQUssQ0FBQztBQUNYLFlBQUksRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQztBQUMvQixZQUFJLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUM7QUFDeEIsY0FBTSxFQUFFLFNBQVMsQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFO0FBQ2pDLGVBQU8sRUFBRSxTQUFTLENBQUMsT0FBTztPQUMzQixDQUFDLENBQUM7S0FDSjtHQUNGLENBQUMsQ0FBQyxDQUFDOztBQUVKLFFBQU0sQ0FBQyxRQUFRLENBQUMsT0FBTyxFQUFFLGtCQUFrQixvQkFBRSxhQUFrQjtBQUM3RCxRQUFNLEdBQUcsR0FBRyxTQUFTLENBQUMsU0FBUyxDQUFDLFlBQVksQ0FBQyxhQUFhLENBQUMsQ0FBQztBQUM1RCxRQUFNLFFBQVEsR0FBRyxNQUFNLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUN6QyxZQUFRLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsT0FBTyxFQUFFLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQ3RELFdBQU8sUUFBUSxDQUFDOztBQUVoQixhQUFTLFdBQVcsQ0FBQyxHQUFHLEVBQUU7QUFDeEIsVUFBSSxHQUFHLEVBQUU7QUFDUCxlQUFPLEdBQUcsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUM7T0FDM0I7QUFDRCxhQUFPLEdBQUcsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUM7S0FDekM7R0FDRixFQUFDLENBQUM7O0FBRUgsUUFBTSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUM7QUFDcEIsVUFBTSxFQUFFLEtBQUs7QUFDYixRQUFJLEVBQUUsU0FBUztBQUNmLFdBQU8sRUFBRSxpQkFBVSxPQUFPLEVBQUUsS0FBSyxFQUFFO0FBQ2pDLGFBQU8sS0FBSyxDQUFDLGdCQUFnQixFQUFFLENBQUM7S0FDakM7R0FDRixDQUFDLENBQUMsQ0FBQztDQUNMOztBQUFBLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvc2VydmVyL3N0YXR1cy9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgU2VydmVyU3RhdHVzIGZyb20gJy4vc2VydmVyX3N0YXR1cyc7XG5pbXBvcnQgd3JhcEF1dGhDb25maWcgZnJvbSAnLi93cmFwX2F1dGhfY29uZmlnJztcbmltcG9ydCB7IGpvaW4gfSBmcm9tICdwYXRoJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKGtiblNlcnZlciwgc2VydmVyLCBjb25maWcpIHtcbiAga2JuU2VydmVyLnN0YXR1cyA9IG5ldyBTZXJ2ZXJTdGF0dXMoa2JuU2VydmVyLnNlcnZlcik7XG5cbiAgaWYgKHNlcnZlci5wbHVnaW5zWydldmVuLWJldHRlciddKSB7XG4gICAga2JuU2VydmVyLm1peGluKHJlcXVpcmUoJy4vbWV0cmljcycpKTtcbiAgfVxuXG4gIGNvbnN0IHdyYXBBdXRoID0gd3JhcEF1dGhDb25maWcoY29uZmlnLmdldCgnc3RhdHVzLmFsbG93QW5vbnltb3VzJykpO1xuXG4gIHNlcnZlci5yb3V0ZSh3cmFwQXV0aCh7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICBwYXRoOiAnL2FwaS9zdGF0dXMnLFxuICAgIGhhbmRsZXI6IGZ1bmN0aW9uIChyZXF1ZXN0LCByZXBseSkge1xuICAgICAgcmV0dXJuIHJlcGx5KHtcbiAgICAgICAgbmFtZTogY29uZmlnLmdldCgnc2VydmVyLm5hbWUnKSxcbiAgICAgICAgdXVpZDogY29uZmlnLmdldCgndXVpZCcpLFxuICAgICAgICBzdGF0dXM6IGtiblNlcnZlci5zdGF0dXMudG9KU09OKCksXG4gICAgICAgIG1ldHJpY3M6IGtiblNlcnZlci5tZXRyaWNzXG4gICAgICB9KTtcbiAgICB9XG4gIH0pKTtcblxuICBzZXJ2ZXIuZGVjb3JhdGUoJ3JlcGx5JywgJ3JlbmRlclN0YXR1c1BhZ2UnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgYXBwID0ga2JuU2VydmVyLnVpRXhwb3J0cy5nZXRIaWRkZW5BcHAoJ3N0YXR1c19wYWdlJyk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBnZXRSZXNwb25zZSh0aGlzKTtcbiAgICByZXNwb25zZS5jb2RlKGtiblNlcnZlci5zdGF0dXMuaXNHcmVlbigpID8gMjAwIDogNTAzKTtcbiAgICByZXR1cm4gcmVzcG9uc2U7XG5cbiAgICBmdW5jdGlvbiBnZXRSZXNwb25zZShjdHgpIHtcbiAgICAgIGlmIChhcHApIHtcbiAgICAgICAgcmV0dXJuIGN0eC5yZW5kZXJBcHAoYXBwKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjdHgoa2JuU2VydmVyLnN0YXR1cy50b1N0cmluZygpKTtcbiAgICB9XG4gIH0pO1xuXG4gIHNlcnZlci5yb3V0ZSh3cmFwQXV0aCh7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICBwYXRoOiAnL3N0YXR1cycsXG4gICAgaGFuZGxlcjogZnVuY3Rpb24gKHJlcXVlc3QsIHJlcGx5KSB7XG4gICAgICByZXR1cm4gcmVwbHkucmVuZGVyU3RhdHVzUGFnZSgpO1xuICAgIH1cbiAgfSkpO1xufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/status/index.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;sBAAc,QAAQ;;;;6BACG,iBAAiB;;;;gCACf,oBAAoB;;;;oBAC1B,MAAM;;qBAEZ,UAAU,SAAS,EAAE,MAAM,EAAE,MAAM,EAAE;AAClD,WAAS,CAAC,MAAM,GAAG,+BAAiB,SAAS,CAAC,MAAM,CAAC,CAAC;;AAEtD,MAAI,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,EAAE;AACjC,aAAS,CAAC,KAAK,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC;GACvC;;AAED,MAAM,QAAQ,GAAG,mCAAe,MAAM,CAAC,GAAG,CAAC,uBAAuB,CAAC,CAAC,CAAC;;AAErE,QAAM,CAAC,KAAK,CAAC,QAAQ,CAAC;AACpB,UAAM,EAAE,KAAK;AACb,QAAI,EAAE,aAAa;AACnB,WAAO,EAAE,iBAAU,OAAO,EAAE,KAAK,EAAE;AACjC,aAAO,KAAK,CAAC;AACX,YAAI,EAAE,MAAM,CAAC,GAAG,CAAC,aAAa,CAAC;AAC/B,YAAI,EAAE,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC;AACxB,cAAM,EAAE,SAAS,CAAC,MAAM,CAAC,MAAM,EAAE;AACjC,eAAO,EAAE,SAAS,CAAC,OAAO;OAC3B,CAAC,CAAC;KACJ;GACF,CAAC,CAAC,CAAC;;AAEJ,QAAM,CAAC,QAAQ,CAAC,OAAO,EAAE,kBAAkB,oBAAE,aAAkB;AAC7D,QAAM,GAAG,GAAG,SAAS,CAAC,SAAS,CAAC,YAAY,CAAC,aAAa,CAAC,CAAC;AAC5D,QAAM,QAAQ,GAAG,MAAM,WAAW,CAAC,IAAI,CAAC,CAAC;AACzC,YAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,OAAO,EAAE,GAAG,GAAG,GAAG,GAAG,CAAC,CAAC;AACtD,WAAO,QAAQ,CAAC;;AAEhB,aAAS,WAAW,CAAC,GAAG,EAAE;AACxB,UAAI,GAAG,EAAE;AACP,eAAO,GAAG,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;OAC3B;AACD,aAAO,GAAG,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,CAAC;KACzC;GACF,EAAC,CAAC;;AAEH,QAAM,CAAC,KAAK,CAAC,QAAQ,CAAC;AACpB,UAAM,EAAE,KAAK;AACb,QAAI,EAAE,SAAS;AACf,WAAO,EAAE,iBAAU,OAAO,EAAE,KAAK,EAAE;AACjC,aAAO,KAAK,CAAC,gBAAgB,EAAE,CAAC;KACjC;GACF,CAAC,CAAC,CAAC;CACL;;AAAA,CAAC",
      "file": "/home/vio/v3metrics/src/server/status/index.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport ServerStatus from './server_status';\nimport wrapAuthConfig from './wrap_auth_config';\nimport { join } from 'path';\n\nexport default function (kbnServer, server, config) {\n  kbnServer.status = new ServerStatus(kbnServer.server);\n\n  if (server.plugins['even-better']) {\n    kbnServer.mixin(require('./metrics'));\n  }\n\n  const wrapAuth = wrapAuthConfig(config.get('status.allowAnonymous'));\n\n  server.route(wrapAuth({\n    method: 'GET',\n    path: '/api/status',\n    handler: function (request, reply) {\n      return reply({\n        name: config.get('server.name'),\n        uuid: config.get('uuid'),\n        status: kbnServer.status.toJSON(),\n        metrics: kbnServer.metrics\n      });\n    }\n  }));\n\n  server.decorate('reply', 'renderStatusPage', async function () {\n    const app = kbnServer.uiExports.getHiddenApp('status_page');\n    const response = await getResponse(this);\n    response.code(kbnServer.status.isGreen() ? 200 : 503);\n    return response;\n\n    function getResponse(ctx) {\n      if (app) {\n        return ctx.renderApp(app);\n      }\n      return ctx(kbnServer.status.toString());\n    }\n  });\n\n  server.route(wrapAuth({\n    method: 'GET',\n    path: '/status',\n    handler: function (request, reply) {\n      return reply.renderStatusPage();\n    }\n  }));\n};\n"
      ]
    },
    "mtime": 1467036622849
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/status/server_status.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "./states",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "states"
              }
            ]
          },
          {
            "source": "./status",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Status"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _states = require('./states');\n\nvar _states2 = _interopRequireDefault(_states);\n\nvar _status = require('./status');\n\nvar _status2 = _interopRequireDefault(_status);\n\nmodule.exports = (function () {\n  function ServerStatus(server) {\n    _classCallCheck(this, ServerStatus);\n\n    this.server = server;\n    this._created = {};\n  }\n\n  _createClass(ServerStatus, [{\n    key: 'create',\n    value: function create(id) {\n      var status = new _status2['default'](id, this.server);\n      this._created[status.id] = status;\n      return status;\n    }\n  }, {\n    key: 'createForPlugin',\n    value: function createForPlugin(plugin) {\n      var status = this.create('plugin:' + plugin.id + '@' + plugin.version);\n      status.plugin = plugin;\n      return status;\n    }\n  }, {\n    key: 'each',\n    value: function each(fn) {\n      var self = this;\n      _lodash2['default'].forOwn(self._created, function (status, i, list) {\n        if (status.state !== 'disabled') {\n          fn.call(self, status, i, list);\n        }\n      });\n    }\n  }, {\n    key: 'get',\n    value: function get(id) {\n      return this._created[id];\n    }\n  }, {\n    key: 'getForPluginId',\n    value: function getForPluginId(pluginId) {\n      return _lodash2['default'].find(this._created, function (s) {\n        return s.plugin && s.plugin.id === pluginId;\n      });\n    }\n  }, {\n    key: 'getState',\n    value: function getState(id) {\n      var status = this.get(id);\n      if (!status) return undefined;\n      return status.state || 'uninitialized';\n    }\n  }, {\n    key: 'getStateForPluginId',\n    value: function getStateForPluginId(pluginId) {\n      var status = this.getForPluginId(pluginId);\n      if (!status) return undefined;\n      return status.state || 'uninitialized';\n    }\n  }, {\n    key: 'overall',\n    value: function overall() {\n      var state = (0, _lodash2['default'])(this._created).map(function (status) {\n        return _states2['default'].get(status.state);\n      }).sortBy('severity').pop();\n\n      var statuses = _lodash2['default'].where(this._created, { state: state.id });\n      var since = _lodash2['default'].get(_lodash2['default'].sortBy(statuses, 'since'), [0, 'since']);\n\n      return {\n        state: state.id,\n        title: state.title,\n        nickname: _lodash2['default'].sample(state.nicknames),\n        icon: state.icon,\n        since: since\n      };\n    }\n  }, {\n    key: 'isGreen',\n    value: function isGreen() {\n      return this.overall().state === 'green';\n    }\n  }, {\n    key: 'notGreen',\n    value: function notGreen() {\n      return !this.isGreen();\n    }\n  }, {\n    key: 'toString',\n    value: function toString() {\n      var overall = this.overall();\n      return overall.title + ' – ' + overall.nickname;\n    }\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      return {\n        overall: this.overall(),\n        statuses: _lodash2['default'].values(this._created)\n      };\n    }\n  }]);\n\n  return ServerStatus;\n})();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9zdGF0dXMvc2VydmVyX3N0YXR1cy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7OztzQkFBYyxRQUFROzs7O3NCQUVILFVBQVU7Ozs7c0JBQ1YsVUFBVTs7OztBQUU3QixNQUFNLENBQUMsT0FBTztBQUNELFdBRFUsWUFBWSxDQUNyQixNQUFNLEVBQUU7MEJBREMsWUFBWTs7QUFFL0IsUUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7QUFDckIsUUFBSSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUM7R0FDcEI7O2VBSm9CLFlBQVk7O1dBTTNCLGdCQUFDLEVBQUUsRUFBRTtBQUNULFVBQU0sTUFBTSxHQUFHLHdCQUFXLEVBQUUsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDM0MsVUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLEdBQUcsTUFBTSxDQUFDO0FBQ2xDLGFBQU8sTUFBTSxDQUFDO0tBQ2Y7OztXQUVjLHlCQUFDLE1BQU0sRUFBRTtBQUN0QixVQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxhQUFXLE1BQU0sQ0FBQyxFQUFFLFNBQUksTUFBTSxDQUFDLE9BQU8sQ0FBRyxDQUFDO0FBQ3BFLFlBQU0sQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO0FBQ3ZCLGFBQU8sTUFBTSxDQUFDO0tBQ2Y7OztXQUVHLGNBQUMsRUFBRSxFQUFFO0FBQ1AsVUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDO0FBQ2hCLDBCQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLFVBQVUsTUFBTSxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUU7QUFDakQsWUFBSSxNQUFNLENBQUMsS0FBSyxLQUFLLFVBQVUsRUFBRTtBQUMvQixZQUFFLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxNQUFNLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO1NBQ2hDO09BQ0YsQ0FBQyxDQUFDO0tBQ0o7OztXQUVFLGFBQUMsRUFBRSxFQUFFO0FBQ04sYUFBTyxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0tBQzFCOzs7V0FFYSx3QkFBQyxRQUFRLEVBQUU7QUFDdkIsYUFBTyxvQkFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxVQUFBLENBQUM7ZUFDNUIsQ0FBQyxDQUFDLE1BQU0sSUFBSSxDQUFDLENBQUMsTUFBTSxDQUFDLEVBQUUsS0FBSyxRQUFRO09BQUEsQ0FDckMsQ0FBQztLQUNIOzs7V0FFTyxrQkFBQyxFQUFFLEVBQUU7QUFDWCxVQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQzVCLFVBQUksQ0FBQyxNQUFNLEVBQUUsT0FBTyxTQUFTLENBQUM7QUFDOUIsYUFBTyxNQUFNLENBQUMsS0FBSyxJQUFJLGVBQWUsQ0FBQztLQUN4Qzs7O1dBRWtCLDZCQUFDLFFBQVEsRUFBRTtBQUM1QixVQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQzdDLFVBQUksQ0FBQyxNQUFNLEVBQUUsT0FBTyxTQUFTLENBQUM7QUFDOUIsYUFBTyxNQUFNLENBQUMsS0FBSyxJQUFJLGVBQWUsQ0FBQztLQUN4Qzs7O1dBRU0sbUJBQUc7QUFDUixVQUFJLEtBQUssR0FBRyx5QkFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLENBQzNCLEdBQUcsQ0FBQyxVQUFVLE1BQU0sRUFBRTtBQUNyQixlQUFPLG9CQUFPLEdBQUcsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7T0FDakMsQ0FBQyxDQUNELE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FDbEIsR0FBRyxFQUFFLENBQUM7O0FBRVAsVUFBSSxRQUFRLEdBQUcsb0JBQUUsS0FBSyxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsRUFBRSxLQUFLLEVBQUUsS0FBSyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7QUFDM0QsVUFBSSxLQUFLLEdBQUcsb0JBQUUsR0FBRyxDQUFDLG9CQUFFLE1BQU0sQ0FBQyxRQUFRLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQzs7QUFFN0QsYUFBTztBQUNMLGFBQUssRUFBRSxLQUFLLENBQUMsRUFBRTtBQUNmLGFBQUssRUFBRSxLQUFLLENBQUMsS0FBSztBQUNsQixnQkFBUSxFQUFFLG9CQUFFLE1BQU0sQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDO0FBQ25DLFlBQUksRUFBRSxLQUFLLENBQUMsSUFBSTtBQUNoQixhQUFLLEVBQUUsS0FBSztPQUNiLENBQUM7S0FDSDs7O1dBRU0sbUJBQUc7QUFDUixhQUFRLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQyxLQUFLLEtBQUssT0FBTyxDQUFFO0tBQzNDOzs7V0FFTyxvQkFBRztBQUNULGFBQU8sQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7S0FDeEI7OztXQUVPLG9CQUFHO0FBQ1QsVUFBSSxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO0FBQzdCLGFBQVUsT0FBTyxDQUFDLEtBQUssV0FBTSxPQUFPLENBQUMsUUFBUSxDQUFHO0tBQ2pEOzs7V0FFSyxrQkFBRztBQUNQLGFBQU87QUFDTCxlQUFPLEVBQUUsSUFBSSxDQUFDLE9BQU8sRUFBRTtBQUN2QixnQkFBUSxFQUFFLG9CQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDO09BQ2xDLENBQUM7S0FDSDs7O1NBdkZvQixZQUFZO0lBd0ZsQyxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9zdGF0dXMvc2VydmVyX3N0YXR1cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCBzdGF0ZXMgZnJvbSAnLi9zdGF0ZXMnO1xuaW1wb3J0IFN0YXR1cyBmcm9tICcuL3N0YXR1cyc7XG5cbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgU2VydmVyU3RhdHVzIHtcbiAgY29uc3RydWN0b3Ioc2VydmVyKSB7XG4gICAgdGhpcy5zZXJ2ZXIgPSBzZXJ2ZXI7XG4gICAgdGhpcy5fY3JlYXRlZCA9IHt9O1xuICB9XG5cbiAgY3JlYXRlKGlkKSB7XG4gICAgY29uc3Qgc3RhdHVzID0gbmV3IFN0YXR1cyhpZCwgdGhpcy5zZXJ2ZXIpO1xuICAgIHRoaXMuX2NyZWF0ZWRbc3RhdHVzLmlkXSA9IHN0YXR1cztcbiAgICByZXR1cm4gc3RhdHVzO1xuICB9XG5cbiAgY3JlYXRlRm9yUGx1Z2luKHBsdWdpbikge1xuICAgIGNvbnN0IHN0YXR1cyA9IHRoaXMuY3JlYXRlKGBwbHVnaW46JHtwbHVnaW4uaWR9QCR7cGx1Z2luLnZlcnNpb259YCk7XG4gICAgc3RhdHVzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICByZXR1cm4gc3RhdHVzO1xuICB9XG5cbiAgZWFjaChmbikge1xuICAgIGxldCBzZWxmID0gdGhpcztcbiAgICBfLmZvck93bihzZWxmLl9jcmVhdGVkLCBmdW5jdGlvbiAoc3RhdHVzLCBpLCBsaXN0KSB7XG4gICAgICBpZiAoc3RhdHVzLnN0YXRlICE9PSAnZGlzYWJsZWQnKSB7XG4gICAgICAgIGZuLmNhbGwoc2VsZiwgc3RhdHVzLCBpLCBsaXN0KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGdldChpZCkge1xuICAgIHJldHVybiB0aGlzLl9jcmVhdGVkW2lkXTtcbiAgfVxuXG4gIGdldEZvclBsdWdpbklkKHBsdWdpbklkKSB7XG4gICAgcmV0dXJuIF8uZmluZCh0aGlzLl9jcmVhdGVkLCBzID0+XG4gICAgICBzLnBsdWdpbiAmJiBzLnBsdWdpbi5pZCA9PT0gcGx1Z2luSWRcbiAgICApO1xuICB9XG5cbiAgZ2V0U3RhdGUoaWQpIHtcbiAgICBjb25zdCBzdGF0dXMgPSB0aGlzLmdldChpZCk7XG4gICAgaWYgKCFzdGF0dXMpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIHN0YXR1cy5zdGF0ZSB8fCAndW5pbml0aWFsaXplZCc7XG4gIH1cblxuICBnZXRTdGF0ZUZvclBsdWdpbklkKHBsdWdpbklkKSB7XG4gICAgY29uc3Qgc3RhdHVzID0gdGhpcy5nZXRGb3JQbHVnaW5JZChwbHVnaW5JZCk7XG4gICAgaWYgKCFzdGF0dXMpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIHN0YXR1cy5zdGF0ZSB8fCAndW5pbml0aWFsaXplZCc7XG4gIH1cblxuICBvdmVyYWxsKCkge1xuICAgIGxldCBzdGF0ZSA9IF8odGhpcy5fY3JlYXRlZClcbiAgICAubWFwKGZ1bmN0aW9uIChzdGF0dXMpIHtcbiAgICAgIHJldHVybiBzdGF0ZXMuZ2V0KHN0YXR1cy5zdGF0ZSk7XG4gICAgfSlcbiAgICAuc29ydEJ5KCdzZXZlcml0eScpXG4gICAgLnBvcCgpO1xuXG4gICAgbGV0IHN0YXR1c2VzID0gXy53aGVyZSh0aGlzLl9jcmVhdGVkLCB7IHN0YXRlOiBzdGF0ZS5pZCB9KTtcbiAgICBsZXQgc2luY2UgPSBfLmdldChfLnNvcnRCeShzdGF0dXNlcywgJ3NpbmNlJyksIFswLCAnc2luY2UnXSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgc3RhdGU6IHN0YXRlLmlkLFxuICAgICAgdGl0bGU6IHN0YXRlLnRpdGxlLFxuICAgICAgbmlja25hbWU6IF8uc2FtcGxlKHN0YXRlLm5pY2tuYW1lcyksXG4gICAgICBpY29uOiBzdGF0ZS5pY29uLFxuICAgICAgc2luY2U6IHNpbmNlLFxuICAgIH07XG4gIH1cblxuICBpc0dyZWVuKCkge1xuICAgIHJldHVybiAodGhpcy5vdmVyYWxsKCkuc3RhdGUgPT09ICdncmVlbicpO1xuICB9XG5cbiAgbm90R3JlZW4oKSB7XG4gICAgcmV0dXJuICF0aGlzLmlzR3JlZW4oKTtcbiAgfVxuXG4gIHRvU3RyaW5nKCkge1xuICAgIGxldCBvdmVyYWxsID0gdGhpcy5vdmVyYWxsKCk7XG4gICAgcmV0dXJuIGAke292ZXJhbGwudGl0bGV9IOKAkyAke292ZXJhbGwubmlja25hbWV9YDtcbiAgfVxuXG4gIHRvSlNPTigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgb3ZlcmFsbDogdGhpcy5vdmVyYWxsKCksXG4gICAgICBzdGF0dXNlczogXy52YWx1ZXModGhpcy5fY3JlYXRlZClcbiAgICB9O1xuICB9XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/status/server_status.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/src/server/status/server_status.js",
      "sourcesContent": [
        "import _ from 'lodash';\n\nimport states from './states';\nimport Status from './status';\n\nmodule.exports = class ServerStatus {\n  constructor(server) {\n    this.server = server;\n    this._created = {};\n  }\n\n  create(id) {\n    const status = new Status(id, this.server);\n    this._created[status.id] = status;\n    return status;\n  }\n\n  createForPlugin(plugin) {\n    const status = this.create(`plugin:${plugin.id}@${plugin.version}`);\n    status.plugin = plugin;\n    return status;\n  }\n\n  each(fn) {\n    let self = this;\n    _.forOwn(self._created, function (status, i, list) {\n      if (status.state !== 'disabled') {\n        fn.call(self, status, i, list);\n      }\n    });\n  }\n\n  get(id) {\n    return this._created[id];\n  }\n\n  getForPluginId(pluginId) {\n    return _.find(this._created, s =>\n      s.plugin && s.plugin.id === pluginId\n    );\n  }\n\n  getState(id) {\n    const status = this.get(id);\n    if (!status) return undefined;\n    return status.state || 'uninitialized';\n  }\n\n  getStateForPluginId(pluginId) {\n    const status = this.getForPluginId(pluginId);\n    if (!status) return undefined;\n    return status.state || 'uninitialized';\n  }\n\n  overall() {\n    let state = _(this._created)\n    .map(function (status) {\n      return states.get(status.state);\n    })\n    .sortBy('severity')\n    .pop();\n\n    let statuses = _.where(this._created, { state: state.id });\n    let since = _.get(_.sortBy(statuses, 'since'), [0, 'since']);\n\n    return {\n      state: state.id,\n      title: state.title,\n      nickname: _.sample(state.nicknames),\n      icon: state.icon,\n      since: since,\n    };\n  }\n\n  isGreen() {\n    return (this.overall().state === 'green');\n  }\n\n  notGreen() {\n    return !this.isGreen();\n  }\n\n  toString() {\n    let overall = this.overall();\n    return `${overall.title} – ${overall.nickname}`;\n  }\n\n  toJSON() {\n    return {\n      overall: this.overall(),\n      statuses: _.values(this._created)\n    };\n  }\n};\n"
      ]
    },
    "mtime": 1467036622849
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/status/states.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nexports.all = [{\n  id: 'red',\n  title: 'Red',\n  icon: 'danger',\n  severity: 1000,\n  nicknames: ['Danger Will Robinson! Danger!']\n}, {\n  id: 'uninitialized',\n  title: 'Uninitialized',\n  icon: 'spinner',\n  severity: 900,\n  nicknames: ['Initializing']\n}, {\n  id: 'yellow',\n  title: 'Yellow',\n  icon: 'warning',\n  severity: 800,\n  nicknames: ['S.N.A.F.U', 'I\\'ll be back', 'brb']\n}, {\n  id: 'green',\n  title: 'Green',\n  icon: 'success',\n  severity: 0,\n  nicknames: ['Looking good']\n}, {\n  id: 'disabled',\n  title: 'Disabled',\n  severity: -1,\n  icon: 'toggle-off',\n  nicknames: ['I\\'m I even a thing?']\n}];\n\nexports.allById = _lodash2['default'].indexBy(exports.all, 'id');\n\nexports.defaults = {\n  icon: 'question',\n  severity: Infinity\n};\n\nexports.get = function (id) {\n  return exports.allById[id] || _lodash2['default'].defaults({ id: id }, exports.defaults);\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9zdGF0dXMvc3RhdGVzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7c0JBQWMsUUFBUTs7OztBQUV0QixPQUFPLENBQUMsR0FBRyxHQUFHLENBQ1o7QUFDRSxJQUFFLEVBQUUsS0FBSztBQUNULE9BQUssRUFBRSxLQUFLO0FBQ1osTUFBSSxFQUFFLFFBQVE7QUFDZCxVQUFRLEVBQUUsSUFBSTtBQUNkLFdBQVMsRUFBRSxDQUNULCtCQUErQixDQUNoQztDQUNGLEVBQ0Q7QUFDRSxJQUFFLEVBQUUsZUFBZTtBQUNuQixPQUFLLEVBQUUsZUFBZTtBQUN0QixNQUFJLEVBQUUsU0FBUztBQUNmLFVBQVEsRUFBRSxHQUFHO0FBQ2IsV0FBUyxFQUFFLENBQ1QsY0FBYyxDQUNmO0NBQ0YsRUFDRDtBQUNFLElBQUUsRUFBRSxRQUFRO0FBQ1osT0FBSyxFQUFFLFFBQVE7QUFDZixNQUFJLEVBQUUsU0FBUztBQUNmLFVBQVEsRUFBRSxHQUFHO0FBQ2IsV0FBUyxFQUFFLENBQ1QsV0FBVyxFQUNYLGVBQWUsRUFDZixLQUFLLENBQ047Q0FDRixFQUNEO0FBQ0UsSUFBRSxFQUFFLE9BQU87QUFDWCxPQUFLLEVBQUUsT0FBTztBQUNkLE1BQUksRUFBRSxTQUFTO0FBQ2YsVUFBUSxFQUFFLENBQUM7QUFDWCxXQUFTLEVBQUUsQ0FDVCxjQUFjLENBQ2Y7Q0FDRixFQUNEO0FBQ0UsSUFBRSxFQUFFLFVBQVU7QUFDZCxPQUFLLEVBQUUsVUFBVTtBQUNqQixVQUFRLEVBQUUsQ0FBQyxDQUFDO0FBQ1osTUFBSSxFQUFFLFlBQVk7QUFDbEIsV0FBUyxFQUFFLENBQ1Qsc0JBQXNCLENBQ3ZCO0NBQ0YsQ0FDRixDQUFDOztBQUVGLE9BQU8sQ0FBQyxPQUFPLEdBQUcsb0JBQUUsT0FBTyxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUM7O0FBRS9DLE9BQU8sQ0FBQyxRQUFRLEdBQUc7QUFDakIsTUFBSSxFQUFFLFVBQVU7QUFDaEIsVUFBUSxFQUFFLFFBQVE7Q0FDbkIsQ0FBQzs7QUFFRixPQUFPLENBQUMsR0FBRyxHQUFHLFVBQVUsRUFBRSxFQUFFO0FBQzFCLFNBQU8sT0FBTyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsSUFBSSxvQkFBRSxRQUFRLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0NBQ3hFLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvc2VydmVyL3N0YXR1cy9zdGF0ZXMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuXG5leHBvcnRzLmFsbCA9IFtcbiAge1xuICAgIGlkOiAncmVkJyxcbiAgICB0aXRsZTogJ1JlZCcsXG4gICAgaWNvbjogJ2RhbmdlcicsXG4gICAgc2V2ZXJpdHk6IDEwMDAsXG4gICAgbmlja25hbWVzOiBbXG4gICAgICAnRGFuZ2VyIFdpbGwgUm9iaW5zb24hIERhbmdlciEnXG4gICAgXVxuICB9LFxuICB7XG4gICAgaWQ6ICd1bmluaXRpYWxpemVkJyxcbiAgICB0aXRsZTogJ1VuaW5pdGlhbGl6ZWQnLFxuICAgIGljb246ICdzcGlubmVyJyxcbiAgICBzZXZlcml0eTogOTAwLFxuICAgIG5pY2tuYW1lczogW1xuICAgICAgJ0luaXRpYWxpemluZydcbiAgICBdXG4gIH0sXG4gIHtcbiAgICBpZDogJ3llbGxvdycsXG4gICAgdGl0bGU6ICdZZWxsb3cnLFxuICAgIGljb246ICd3YXJuaW5nJyxcbiAgICBzZXZlcml0eTogODAwLFxuICAgIG5pY2tuYW1lczogW1xuICAgICAgJ1MuTi5BLkYuVScsXG4gICAgICAnSVxcJ2xsIGJlIGJhY2snLFxuICAgICAgJ2JyYidcbiAgICBdXG4gIH0sXG4gIHtcbiAgICBpZDogJ2dyZWVuJyxcbiAgICB0aXRsZTogJ0dyZWVuJyxcbiAgICBpY29uOiAnc3VjY2VzcycsXG4gICAgc2V2ZXJpdHk6IDAsXG4gICAgbmlja25hbWVzOiBbXG4gICAgICAnTG9va2luZyBnb29kJ1xuICAgIF1cbiAgfSxcbiAge1xuICAgIGlkOiAnZGlzYWJsZWQnLFxuICAgIHRpdGxlOiAnRGlzYWJsZWQnLFxuICAgIHNldmVyaXR5OiAtMSxcbiAgICBpY29uOiAndG9nZ2xlLW9mZicsXG4gICAgbmlja25hbWVzOiBbXG4gICAgICAnSVxcJ20gSSBldmVuIGEgdGhpbmc/J1xuICAgIF1cbiAgfVxuXTtcblxuZXhwb3J0cy5hbGxCeUlkID0gXy5pbmRleEJ5KGV4cG9ydHMuYWxsLCAnaWQnKTtcblxuZXhwb3J0cy5kZWZhdWx0cyA9IHtcbiAgaWNvbjogJ3F1ZXN0aW9uJyxcbiAgc2V2ZXJpdHk6IEluZmluaXR5XG59O1xuXG5leHBvcnRzLmdldCA9IGZ1bmN0aW9uIChpZCkge1xuICByZXR1cm4gZXhwb3J0cy5hbGxCeUlkW2lkXSB8fCBfLmRlZmF1bHRzKHsgaWQ6IGlkIH0sIGV4cG9ydHMuZGVmYXVsdHMpO1xufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/status/states.js"
      ],
      "names": [],
      "mappings": ";;;;sBAAc,QAAQ;;;;AAEtB,OAAO,CAAC,GAAG,GAAG,CACZ;AACE,IAAE,EAAE,KAAK;AACT,OAAK,EAAE,KAAK;AACZ,MAAI,EAAE,QAAQ;AACd,UAAQ,EAAE,IAAI;AACd,WAAS,EAAE,CACT,+BAA+B,CAChC;CACF,EACD;AACE,IAAE,EAAE,eAAe;AACnB,OAAK,EAAE,eAAe;AACtB,MAAI,EAAE,SAAS;AACf,UAAQ,EAAE,GAAG;AACb,WAAS,EAAE,CACT,cAAc,CACf;CACF,EACD;AACE,IAAE,EAAE,QAAQ;AACZ,OAAK,EAAE,QAAQ;AACf,MAAI,EAAE,SAAS;AACf,UAAQ,EAAE,GAAG;AACb,WAAS,EAAE,CACT,WAAW,EACX,eAAe,EACf,KAAK,CACN;CACF,EACD;AACE,IAAE,EAAE,OAAO;AACX,OAAK,EAAE,OAAO;AACd,MAAI,EAAE,SAAS;AACf,UAAQ,EAAE,CAAC;AACX,WAAS,EAAE,CACT,cAAc,CACf;CACF,EACD;AACE,IAAE,EAAE,UAAU;AACd,OAAK,EAAE,UAAU;AACjB,UAAQ,EAAE,CAAC,CAAC;AACZ,MAAI,EAAE,YAAY;AAClB,WAAS,EAAE,CACT,sBAAsB,CACvB;CACF,CACF,CAAC;;AAEF,OAAO,CAAC,OAAO,GAAG,oBAAE,OAAO,CAAC,OAAO,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;;AAE/C,OAAO,CAAC,QAAQ,GAAG;AACjB,MAAI,EAAE,UAAU;AAChB,UAAQ,EAAE,QAAQ;CACnB,CAAC;;AAEF,OAAO,CAAC,GAAG,GAAG,UAAU,EAAE,EAAE;AAC1B,SAAO,OAAO,CAAC,OAAO,CAAC,EAAE,CAAC,IAAI,oBAAE,QAAQ,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,OAAO,CAAC,QAAQ,CAAC,CAAC;CACxE,CAAC",
      "file": "/home/vio/v3metrics/src/server/status/states.js",
      "sourcesContent": [
        "import _ from 'lodash';\n\nexports.all = [\n  {\n    id: 'red',\n    title: 'Red',\n    icon: 'danger',\n    severity: 1000,\n    nicknames: [\n      'Danger Will Robinson! Danger!'\n    ]\n  },\n  {\n    id: 'uninitialized',\n    title: 'Uninitialized',\n    icon: 'spinner',\n    severity: 900,\n    nicknames: [\n      'Initializing'\n    ]\n  },\n  {\n    id: 'yellow',\n    title: 'Yellow',\n    icon: 'warning',\n    severity: 800,\n    nicknames: [\n      'S.N.A.F.U',\n      'I\\'ll be back',\n      'brb'\n    ]\n  },\n  {\n    id: 'green',\n    title: 'Green',\n    icon: 'success',\n    severity: 0,\n    nicknames: [\n      'Looking good'\n    ]\n  },\n  {\n    id: 'disabled',\n    title: 'Disabled',\n    severity: -1,\n    icon: 'toggle-off',\n    nicknames: [\n      'I\\'m I even a thing?'\n    ]\n  }\n];\n\nexports.allById = _.indexBy(exports.all, 'id');\n\nexports.defaults = {\n  icon: 'question',\n  severity: Infinity\n};\n\nexports.get = function (id) {\n  return exports.allById[id] || _.defaults({ id: id }, exports.defaults);\n};\n"
      ]
    },
    "mtime": 1467036622849
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/status/status.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "./states",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "states"
              }
            ]
          },
          {
            "source": "events",
            "imported": [
              "EventEmitter"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "EventEmitter",
                "local": "EventEmitter"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "get",
        "inherits",
        "create-class",
        "class-call-check",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _states = require('./states');\n\nvar _states2 = _interopRequireDefault(_states);\n\nvar _events = require('events');\n\nvar Status = (function (_EventEmitter) {\n  _inherits(Status, _EventEmitter);\n\n  function Status(id, server) {\n    _classCallCheck(this, Status);\n\n    _get(Object.getPrototypeOf(Status.prototype), 'constructor', this).call(this);\n\n    if (!id || typeof id !== 'string') {\n      throw new TypeError('Status constructor requires an `id` string');\n    }\n\n    this.id = id;\n    this.since = new Date();\n    this.state = 'uninitialized';\n    this.message = 'uninitialized';\n\n    this.on('change', function (previous, previousMsg) {\n      this.since = new Date();\n\n      var tags = ['status', this.id, this.state === 'red' ? 'error' : 'info'];\n\n      server.log(tags, {\n        tmpl: 'Status changed from <%= prevState %> to <%= state %><%= message ? \" - \" + message : \"\" %>',\n        state: this.state,\n        message: this.message,\n        prevState: previous,\n        prevMsg: previousMsg\n      });\n    });\n  }\n\n  _createClass(Status, [{\n    key: 'toJSON',\n    value: function toJSON() {\n      return {\n        id: this.id,\n        state: this.state,\n        icon: _states2['default'].get(this.state).icon,\n        message: this.message,\n        since: this.since\n      };\n    }\n  }, {\n    key: 'on',\n    value: function on(eventName, handler) {\n      var _this = this;\n\n      _get(Object.getPrototypeOf(Status.prototype), 'on', this).call(this, eventName, handler);\n\n      if (eventName === this.state) {\n        setImmediate(function () {\n          return handler(_this.state, _this.message);\n        });\n      }\n    }\n  }, {\n    key: 'once',\n    value: function once(eventName, handler) {\n      var _this2 = this;\n\n      if (eventName === this.state) {\n        setImmediate(function () {\n          return handler(_this2.state, _this2.message);\n        });\n      } else {\n        _get(Object.getPrototypeOf(Status.prototype), 'once', this).call(this, eventName, handler);\n      }\n    }\n  }]);\n\n  return Status;\n})(_events.EventEmitter);\n\n_states2['default'].all.forEach(function (state) {\n  Status.prototype[state.id] = function (message) {\n    if (this.state === 'disabled') return;\n\n    var previous = this.state;\n    var previousMsg = this.message;\n\n    this.error = null;\n    this.message = message || state.title;\n    this.state = state.id;\n\n    if (message instanceof Error) {\n      this.error = message;\n      this.message = message.message;\n    }\n\n    if (previous === this.state && previousMsg === this.message) {\n      // noop\n      return;\n    }\n\n    this.emit(state.id, previous, previousMsg, this.state, this.message);\n    this.emit('change', previous, previousMsg, this.state, this.message);\n  };\n});\n\nmodule.exports = Status;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9zdGF0dXMvc3RhdHVzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztzQkFBYyxRQUFROzs7O3NCQUNILFVBQVU7Ozs7c0JBQ0EsUUFBUTs7SUFFL0IsTUFBTTtZQUFOLE1BQU07O0FBQ0MsV0FEUCxNQUFNLENBQ0UsRUFBRSxFQUFFLE1BQU0sRUFBRTswQkFEcEIsTUFBTTs7QUFFUiwrQkFGRSxNQUFNLDZDQUVBOztBQUVSLFFBQUksQ0FBQyxFQUFFLElBQUksT0FBTyxFQUFFLEtBQUssUUFBUSxFQUFFO0FBQ2pDLFlBQU0sSUFBSSxTQUFTLENBQUMsNENBQTRDLENBQUMsQ0FBQztLQUNuRTs7QUFFRCxRQUFJLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQztBQUNiLFFBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQztBQUN4QixRQUFJLENBQUMsS0FBSyxHQUFHLGVBQWUsQ0FBQztBQUM3QixRQUFJLENBQUMsT0FBTyxHQUFHLGVBQWUsQ0FBQzs7QUFFL0IsUUFBSSxDQUFDLEVBQUUsQ0FBQyxRQUFRLEVBQUUsVUFBVSxRQUFRLEVBQUUsV0FBVyxFQUFFO0FBQ2pELFVBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQzs7QUFFeEIsVUFBTSxJQUFJLEdBQUcsQ0FDWCxRQUFRLEVBQ1IsSUFBSSxDQUFDLEVBQUUsRUFDUCxJQUFJLENBQUMsS0FBSyxLQUFLLEtBQUssR0FBRyxPQUFPLEdBQUcsTUFBTSxDQUN4QyxDQUFDOztBQUVGLFlBQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFO0FBQ2YsWUFBSSxFQUFFLDJGQUEyRjtBQUNqRyxhQUFLLEVBQUUsSUFBSSxDQUFDLEtBQUs7QUFDakIsZUFBTyxFQUFFLElBQUksQ0FBQyxPQUFPO0FBQ3JCLGlCQUFTLEVBQUUsUUFBUTtBQUNuQixlQUFPLEVBQUUsV0FBVztPQUNyQixDQUFDLENBQUM7S0FDSixDQUFDLENBQUM7R0FDSjs7ZUE5QkcsTUFBTTs7V0FnQ0osa0JBQUc7QUFDUCxhQUFPO0FBQ0wsVUFBRSxFQUFFLElBQUksQ0FBQyxFQUFFO0FBQ1gsYUFBSyxFQUFFLElBQUksQ0FBQyxLQUFLO0FBQ2pCLFlBQUksRUFBRSxvQkFBTyxHQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUk7QUFDakMsZUFBTyxFQUFFLElBQUksQ0FBQyxPQUFPO0FBQ3JCLGFBQUssRUFBRSxJQUFJLENBQUMsS0FBSztPQUNsQixDQUFDO0tBQ0g7OztXQUVDLFlBQUMsU0FBUyxFQUFFLE9BQU8sRUFBRTs7O0FBQ3JCLGlDQTNDRSxNQUFNLG9DQTJDQyxTQUFTLEVBQUUsT0FBTyxFQUFFOztBQUU3QixVQUFJLFNBQVMsS0FBSyxJQUFJLENBQUMsS0FBSyxFQUFFO0FBQzVCLG9CQUFZLENBQUM7aUJBQU0sT0FBTyxDQUFDLE1BQUssS0FBSyxFQUFFLE1BQUssT0FBTyxDQUFDO1NBQUEsQ0FBQyxDQUFDO09BQ3ZEO0tBQ0Y7OztXQUVHLGNBQUMsU0FBUyxFQUFFLE9BQU8sRUFBRTs7O0FBQ3ZCLFVBQUksU0FBUyxLQUFLLElBQUksQ0FBQyxLQUFLLEVBQUU7QUFDNUIsb0JBQVksQ0FBQztpQkFBTSxPQUFPLENBQUMsT0FBSyxLQUFLLEVBQUUsT0FBSyxPQUFPLENBQUM7U0FBQSxDQUFDLENBQUM7T0FDdkQsTUFBTTtBQUNMLG1DQXREQSxNQUFNLHNDQXNESyxTQUFTLEVBQUUsT0FBTyxFQUFFO09BQ2hDO0tBQ0Y7OztTQXhERyxNQUFNOzs7QUEyRFosb0JBQU8sR0FBRyxDQUFDLE9BQU8sQ0FBQyxVQUFVLEtBQUssRUFBRTtBQUNsQyxRQUFNLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsR0FBRyxVQUFVLE9BQU8sRUFBRTtBQUM5QyxRQUFJLElBQUksQ0FBQyxLQUFLLEtBQUssVUFBVSxFQUFFLE9BQU87O0FBRXRDLFFBQUksUUFBUSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUM7QUFDMUIsUUFBSSxXQUFXLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQzs7QUFFL0IsUUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7QUFDbEIsUUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLElBQUksS0FBSyxDQUFDLEtBQUssQ0FBQztBQUN0QyxRQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxFQUFFLENBQUM7O0FBRXRCLFFBQUksT0FBTyxZQUFZLEtBQUssRUFBRTtBQUM1QixVQUFJLENBQUMsS0FBSyxHQUFHLE9BQU8sQ0FBQztBQUNyQixVQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUM7S0FDaEM7O0FBRUQsUUFBSSxRQUFRLEtBQUssSUFBSSxDQUFDLEtBQUssSUFBSSxXQUFXLEtBQUssSUFBSSxDQUFDLE9BQU8sRUFBRTs7QUFFM0QsYUFBTztLQUNSOztBQUVELFFBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRSxRQUFRLEVBQUUsV0FBVyxFQUFFLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQ3JFLFFBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLFFBQVEsRUFBRSxXQUFXLEVBQUUsSUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7R0FDdEUsQ0FBQztDQUNILENBQUMsQ0FBQzs7QUFFSCxNQUFNLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9zZXJ2ZXIvc3RhdHVzL3N0YXR1cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgc3RhdGVzIGZyb20gJy4vc3RhdGVzJztcbmltcG9ydCB7IEV2ZW50RW1pdHRlciB9IGZyb20gJ2V2ZW50cyc7XG5cbmNsYXNzIFN0YXR1cyBleHRlbmRzIEV2ZW50RW1pdHRlciB7XG4gIGNvbnN0cnVjdG9yKGlkLCBzZXJ2ZXIpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgaWYgKCFpZCB8fCB0eXBlb2YgaWQgIT09ICdzdHJpbmcnKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdTdGF0dXMgY29uc3RydWN0b3IgcmVxdWlyZXMgYW4gYGlkYCBzdHJpbmcnKTtcbiAgICB9XG5cbiAgICB0aGlzLmlkID0gaWQ7XG4gICAgdGhpcy5zaW5jZSA9IG5ldyBEYXRlKCk7XG4gICAgdGhpcy5zdGF0ZSA9ICd1bmluaXRpYWxpemVkJztcbiAgICB0aGlzLm1lc3NhZ2UgPSAndW5pbml0aWFsaXplZCc7XG5cbiAgICB0aGlzLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAocHJldmlvdXMsIHByZXZpb3VzTXNnKSB7XG4gICAgICB0aGlzLnNpbmNlID0gbmV3IERhdGUoKTtcblxuICAgICAgY29uc3QgdGFncyA9IFtcbiAgICAgICAgJ3N0YXR1cycsXG4gICAgICAgIHRoaXMuaWQsXG4gICAgICAgIHRoaXMuc3RhdGUgPT09ICdyZWQnID8gJ2Vycm9yJyA6ICdpbmZvJ1xuICAgICAgXTtcblxuICAgICAgc2VydmVyLmxvZyh0YWdzLCB7XG4gICAgICAgIHRtcGw6ICdTdGF0dXMgY2hhbmdlZCBmcm9tIDwlPSBwcmV2U3RhdGUgJT4gdG8gPCU9IHN0YXRlICU+PCU9IG1lc3NhZ2UgPyBcIiAtIFwiICsgbWVzc2FnZSA6IFwiXCIgJT4nLFxuICAgICAgICBzdGF0ZTogdGhpcy5zdGF0ZSxcbiAgICAgICAgbWVzc2FnZTogdGhpcy5tZXNzYWdlLFxuICAgICAgICBwcmV2U3RhdGU6IHByZXZpb3VzLFxuICAgICAgICBwcmV2TXNnOiBwcmV2aW91c01zZ1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICB0b0pTT04oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiB0aGlzLmlkLFxuICAgICAgc3RhdGU6IHRoaXMuc3RhdGUsXG4gICAgICBpY29uOiBzdGF0ZXMuZ2V0KHRoaXMuc3RhdGUpLmljb24sXG4gICAgICBtZXNzYWdlOiB0aGlzLm1lc3NhZ2UsXG4gICAgICBzaW5jZTogdGhpcy5zaW5jZVxuICAgIH07XG4gIH1cblxuICBvbihldmVudE5hbWUsIGhhbmRsZXIpIHtcbiAgICBzdXBlci5vbihldmVudE5hbWUsIGhhbmRsZXIpO1xuXG4gICAgaWYgKGV2ZW50TmFtZSA9PT0gdGhpcy5zdGF0ZSkge1xuICAgICAgc2V0SW1tZWRpYXRlKCgpID0+IGhhbmRsZXIodGhpcy5zdGF0ZSwgdGhpcy5tZXNzYWdlKSk7XG4gICAgfVxuICB9XG5cbiAgb25jZShldmVudE5hbWUsIGhhbmRsZXIpIHtcbiAgICBpZiAoZXZlbnROYW1lID09PSB0aGlzLnN0YXRlKSB7XG4gICAgICBzZXRJbW1lZGlhdGUoKCkgPT4gaGFuZGxlcih0aGlzLnN0YXRlLCB0aGlzLm1lc3NhZ2UpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3VwZXIub25jZShldmVudE5hbWUsIGhhbmRsZXIpO1xuICAgIH1cbiAgfVxufVxuXG5zdGF0ZXMuYWxsLmZvckVhY2goZnVuY3Rpb24gKHN0YXRlKSB7XG4gIFN0YXR1cy5wcm90b3R5cGVbc3RhdGUuaWRdID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICBpZiAodGhpcy5zdGF0ZSA9PT0gJ2Rpc2FibGVkJykgcmV0dXJuO1xuXG4gICAgbGV0IHByZXZpb3VzID0gdGhpcy5zdGF0ZTtcbiAgICBsZXQgcHJldmlvdXNNc2cgPSB0aGlzLm1lc3NhZ2U7XG5cbiAgICB0aGlzLmVycm9yID0gbnVsbDtcbiAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlIHx8IHN0YXRlLnRpdGxlO1xuICAgIHRoaXMuc3RhdGUgPSBzdGF0ZS5pZDtcblxuICAgIGlmIChtZXNzYWdlIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIHRoaXMuZXJyb3IgPSBtZXNzYWdlO1xuICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZS5tZXNzYWdlO1xuICAgIH1cblxuICAgIGlmIChwcmV2aW91cyA9PT0gdGhpcy5zdGF0ZSAmJiBwcmV2aW91c01zZyA9PT0gdGhpcy5tZXNzYWdlKSB7XG4gICAgICAvLyBub29wXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5lbWl0KHN0YXRlLmlkLCBwcmV2aW91cywgcHJldmlvdXNNc2csIHRoaXMuc3RhdGUsIHRoaXMubWVzc2FnZSk7XG4gICAgdGhpcy5lbWl0KCdjaGFuZ2UnLCBwcmV2aW91cywgcHJldmlvdXNNc2csIHRoaXMuc3RhdGUsIHRoaXMubWVzc2FnZSk7XG4gIH07XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBTdGF0dXM7XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/status/status.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/src/server/status/status.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport states from './states';\nimport { EventEmitter } from 'events';\n\nclass Status extends EventEmitter {\n  constructor(id, server) {\n    super();\n\n    if (!id || typeof id !== 'string') {\n      throw new TypeError('Status constructor requires an `id` string');\n    }\n\n    this.id = id;\n    this.since = new Date();\n    this.state = 'uninitialized';\n    this.message = 'uninitialized';\n\n    this.on('change', function (previous, previousMsg) {\n      this.since = new Date();\n\n      const tags = [\n        'status',\n        this.id,\n        this.state === 'red' ? 'error' : 'info'\n      ];\n\n      server.log(tags, {\n        tmpl: 'Status changed from <%= prevState %> to <%= state %><%= message ? \" - \" + message : \"\" %>',\n        state: this.state,\n        message: this.message,\n        prevState: previous,\n        prevMsg: previousMsg\n      });\n    });\n  }\n\n  toJSON() {\n    return {\n      id: this.id,\n      state: this.state,\n      icon: states.get(this.state).icon,\n      message: this.message,\n      since: this.since\n    };\n  }\n\n  on(eventName, handler) {\n    super.on(eventName, handler);\n\n    if (eventName === this.state) {\n      setImmediate(() => handler(this.state, this.message));\n    }\n  }\n\n  once(eventName, handler) {\n    if (eventName === this.state) {\n      setImmediate(() => handler(this.state, this.message));\n    } else {\n      super.once(eventName, handler);\n    }\n  }\n}\n\nstates.all.forEach(function (state) {\n  Status.prototype[state.id] = function (message) {\n    if (this.state === 'disabled') return;\n\n    let previous = this.state;\n    let previousMsg = this.message;\n\n    this.error = null;\n    this.message = message || state.title;\n    this.state = state.id;\n\n    if (message instanceof Error) {\n      this.error = message;\n      this.message = message.message;\n    }\n\n    if (previous === this.state && previousMsg === this.message) {\n      // noop\n      return;\n    }\n\n    this.emit(state.id, previous, previousMsg, this.state, this.message);\n    this.emit('change', previous, previousMsg, this.state, this.message);\n  };\n});\n\nmodule.exports = Status;\n"
      ]
    },
    "mtime": 1467036622849
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/status/wrap_auth_config.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "assign",
              "identity"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "assign",
                "local": "assign"
              },
              {
                "kind": "named",
                "imported": "identity",
                "local": "identity"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _lodash = require('lodash');\n\nexports['default'] = function (allowAnonymous) {\n  if (allowAnonymous) return function (options) {\n    return (0, _lodash.assign)(options, { config: { auth: false } });\n  };\n  return _lodash.identity;\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9zdGF0dXMvd3JhcF9hdXRoX2NvbmZpZy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7c0JBQStCLFFBQVE7O3FCQUV4QixVQUFDLGNBQWMsRUFBSztBQUNqQyxNQUFJLGNBQWMsRUFBRSxPQUFPLFVBQUEsT0FBTztXQUFJLG9CQUFPLE9BQU8sRUFBRSxFQUFDLE1BQU0sRUFBRSxFQUFDLElBQUksRUFBRSxLQUFLLEVBQUMsRUFBQyxDQUFDO0dBQUEsQ0FBQztBQUMvRSwwQkFBZ0I7Q0FDakIiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvc2VydmVyL3N0YXR1cy93cmFwX2F1dGhfY29uZmlnLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHthc3NpZ24sIGlkZW50aXR5fSBmcm9tICdsb2Rhc2gnO1xuXG5leHBvcnQgZGVmYXVsdCAoYWxsb3dBbm9ueW1vdXMpID0+IHtcbiAgaWYgKGFsbG93QW5vbnltb3VzKSByZXR1cm4gb3B0aW9ucyA9PiBhc3NpZ24ob3B0aW9ucywge2NvbmZpZzoge2F1dGg6IGZhbHNlfX0pO1xuICByZXR1cm4gaWRlbnRpdHk7XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/status/wrap_auth_config.js"
      ],
      "names": [],
      "mappings": ";;;;;;sBAA+B,QAAQ;;qBAExB,UAAC,cAAc,EAAK;AACjC,MAAI,cAAc,EAAE,OAAO,UAAA,OAAO;WAAI,oBAAO,OAAO,EAAE,EAAC,MAAM,EAAE,EAAC,IAAI,EAAE,KAAK,EAAC,EAAC,CAAC;GAAA,CAAC;AAC/E,0BAAgB;CACjB",
      "file": "/home/vio/v3metrics/src/server/status/wrap_auth_config.js",
      "sourcesContent": [
        "import {assign, identity} from 'lodash';\n\nexport default (allowAnonymous) => {\n  if (allowAnonymous) return options => assign(options, {config: {auth: false}});\n  return identity;\n};\n"
      ]
    },
    "mtime": 1467036622849
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/pid/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "boom",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Boom"
              }
            ]
          },
          {
            "source": "bluebird",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Promise"
              }
            ]
          },
          {
            "source": "fs",
            "imported": [
              "unlinkSync"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "unlinkSync",
                "local": "unlink"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _boom = require('boom');\n\nvar _boom2 = _interopRequireDefault(_boom);\n\nvar _bluebird = require('bluebird');\n\nvar _bluebird2 = _interopRequireDefault(_bluebird);\n\nvar _fs = require('fs');\n\nvar writeFile = _bluebird2['default'].promisify(require('fs').writeFile);\n\nmodule.exports = _bluebird2['default'].method(function (kbnServer, server, config) {\n  var path = config.get('pid.file');\n  if (!path) return;\n\n  var pid = String(process.pid);\n\n  return writeFile(path, pid, { flag: 'wx' })['catch'](function (err) {\n    if (err.code !== 'EEXIST') throw err;\n\n    var log = {\n      tmpl: 'pid file already exists at <%= path %>',\n      path: path,\n      pid: pid\n    };\n\n    if (config.get('pid.exclusive')) {\n      throw _boom2['default'].create(500, _lodash2['default'].template(log.tmpl)(log), log);\n    } else {\n      server.log(['pid', 'warning'], log);\n    }\n\n    return writeFile(path, pid);\n  }).then(function () {\n\n    server.log(['pid', 'debug'], {\n      tmpl: 'wrote pid file to <%= path %>',\n      path: path,\n      pid: pid\n    });\n\n    var clean = _lodash2['default'].once(function (code) {\n      (0, _fs.unlinkSync)(path);\n    });\n\n    process.once('exit', clean); // for \"natural\" exits\n    process.once('SIGINT', function () {\n      // for Ctrl-C exits\n      clean();\n\n      // resend SIGINT\n      process.kill(process.pid, 'SIGINT');\n    });\n\n    process.on('unhandledRejection', function (reason, promise) {\n      server.log(['warning'], 'Detected an unhandled Promise rejection.\\n' + reason);\n    });\n  });\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9waWQvaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztzQkFBYyxRQUFROzs7O29CQUNMLE1BQU07Ozs7d0JBQ0gsVUFBVTs7OztrQkFDTyxJQUFJOztBQUN6QyxJQUFJLFNBQVMsR0FBRyxzQkFBUSxTQUFTLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDOztBQUUzRCxNQUFNLENBQUMsT0FBTyxHQUFHLHNCQUFRLE1BQU0sQ0FBQyxVQUFVLFNBQVMsRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFO0FBQ25FLE1BQUksSUFBSSxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDbEMsTUFBSSxDQUFDLElBQUksRUFBRSxPQUFPOztBQUVsQixNQUFJLEdBQUcsR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDOztBQUU5QixTQUFPLFNBQVMsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxDQUFDLFNBQ3JDLENBQUMsVUFBVSxHQUFHLEVBQUU7QUFDcEIsUUFBSSxHQUFHLENBQUMsSUFBSSxLQUFLLFFBQVEsRUFBRSxNQUFNLEdBQUcsQ0FBQzs7QUFFckMsUUFBSSxHQUFHLEdBQUc7QUFDUixVQUFJLEVBQUUsd0NBQXdDO0FBQzlDLFVBQUksRUFBRSxJQUFJO0FBQ1YsU0FBRyxFQUFFLEdBQUc7S0FDVCxDQUFDOztBQUVGLFFBQUksTUFBTSxDQUFDLEdBQUcsQ0FBQyxlQUFlLENBQUMsRUFBRTtBQUMvQixZQUFNLGtCQUFLLE1BQU0sQ0FBQyxHQUFHLEVBQUUsb0JBQUUsUUFBUSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztLQUN4RCxNQUFNO0FBQ0wsWUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEtBQUssRUFBRSxTQUFTLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztLQUNyQzs7QUFFRCxXQUFPLFNBQVMsQ0FBQyxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUM7R0FDN0IsQ0FBQyxDQUNELElBQUksQ0FBQyxZQUFZOztBQUVoQixVQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsS0FBSyxFQUFFLE9BQU8sQ0FBQyxFQUFFO0FBQzNCLFVBQUksRUFBRSwrQkFBK0I7QUFDckMsVUFBSSxFQUFFLElBQUk7QUFDVixTQUFHLEVBQUUsR0FBRztLQUNULENBQUMsQ0FBQzs7QUFFSCxRQUFJLEtBQUssR0FBRyxvQkFBRSxJQUFJLENBQUMsVUFBVSxJQUFJLEVBQUU7QUFDakMsMEJBQU8sSUFBSSxDQUFDLENBQUM7S0FDZCxDQUFDLENBQUM7O0FBRUgsV0FBTyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDNUIsV0FBTyxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsWUFBWTs7QUFDakMsV0FBSyxFQUFFLENBQUM7OztBQUdSLGFBQU8sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxRQUFRLENBQUMsQ0FBQztLQUNyQyxDQUFDLENBQUM7O0FBRUgsV0FBTyxDQUFDLEVBQUUsQ0FBQyxvQkFBb0IsRUFBRSxVQUFVLE1BQU0sRUFBRSxPQUFPLEVBQUU7QUFDMUQsWUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxpREFBK0MsTUFBTSxDQUFHLENBQUM7S0FDaEYsQ0FBQyxDQUFDO0dBQ0osQ0FBQyxDQUFDO0NBQ0osQ0FBQyxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9waWQvaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IEJvb20gZnJvbSAnYm9vbSc7XG5pbXBvcnQgUHJvbWlzZSBmcm9tICdibHVlYmlyZCc7XG5pbXBvcnQgeyB1bmxpbmtTeW5jIGFzIHVubGluayB9IGZyb20gJ2ZzJztcbmxldCB3cml0ZUZpbGUgPSBQcm9taXNlLnByb21pc2lmeShyZXF1aXJlKCdmcycpLndyaXRlRmlsZSk7XG5cbm1vZHVsZS5leHBvcnRzID0gUHJvbWlzZS5tZXRob2QoZnVuY3Rpb24gKGtiblNlcnZlciwgc2VydmVyLCBjb25maWcpIHtcbiAgbGV0IHBhdGggPSBjb25maWcuZ2V0KCdwaWQuZmlsZScpO1xuICBpZiAoIXBhdGgpIHJldHVybjtcblxuICBsZXQgcGlkID0gU3RyaW5nKHByb2Nlc3MucGlkKTtcblxuICByZXR1cm4gd3JpdGVGaWxlKHBhdGgsIHBpZCwgeyBmbGFnOiAnd3gnIH0pXG4gIC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgaWYgKGVyci5jb2RlICE9PSAnRUVYSVNUJykgdGhyb3cgZXJyO1xuXG4gICAgbGV0IGxvZyA9IHtcbiAgICAgIHRtcGw6ICdwaWQgZmlsZSBhbHJlYWR5IGV4aXN0cyBhdCA8JT0gcGF0aCAlPicsXG4gICAgICBwYXRoOiBwYXRoLFxuICAgICAgcGlkOiBwaWRcbiAgICB9O1xuXG4gICAgaWYgKGNvbmZpZy5nZXQoJ3BpZC5leGNsdXNpdmUnKSkge1xuICAgICAgdGhyb3cgQm9vbS5jcmVhdGUoNTAwLCBfLnRlbXBsYXRlKGxvZy50bXBsKShsb2cpLCBsb2cpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXJ2ZXIubG9nKFsncGlkJywgJ3dhcm5pbmcnXSwgbG9nKTtcbiAgICB9XG5cbiAgICByZXR1cm4gd3JpdGVGaWxlKHBhdGgsIHBpZCk7XG4gIH0pXG4gIC50aGVuKGZ1bmN0aW9uICgpIHtcblxuICAgIHNlcnZlci5sb2coWydwaWQnLCAnZGVidWcnXSwge1xuICAgICAgdG1wbDogJ3dyb3RlIHBpZCBmaWxlIHRvIDwlPSBwYXRoICU+JyxcbiAgICAgIHBhdGg6IHBhdGgsXG4gICAgICBwaWQ6IHBpZFxuICAgIH0pO1xuXG4gICAgbGV0IGNsZWFuID0gXy5vbmNlKGZ1bmN0aW9uIChjb2RlKSB7XG4gICAgICB1bmxpbmsocGF0aCk7XG4gICAgfSk7XG5cbiAgICBwcm9jZXNzLm9uY2UoJ2V4aXQnLCBjbGVhbik7IC8vIGZvciBcIm5hdHVyYWxcIiBleGl0c1xuICAgIHByb2Nlc3Mub25jZSgnU0lHSU5UJywgZnVuY3Rpb24gKCkgeyAvLyBmb3IgQ3RybC1DIGV4aXRzXG4gICAgICBjbGVhbigpO1xuXG4gICAgICAvLyByZXNlbmQgU0lHSU5UXG4gICAgICBwcm9jZXNzLmtpbGwocHJvY2Vzcy5waWQsICdTSUdJTlQnKTtcbiAgICB9KTtcblxuICAgIHByb2Nlc3Mub24oJ3VuaGFuZGxlZFJlamVjdGlvbicsIGZ1bmN0aW9uIChyZWFzb24sIHByb21pc2UpIHtcbiAgICAgIHNlcnZlci5sb2coWyd3YXJuaW5nJ10sIGBEZXRlY3RlZCBhbiB1bmhhbmRsZWQgUHJvbWlzZSByZWplY3Rpb24uXFxuJHtyZWFzb259YCk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/pid/index.js"
      ],
      "names": [],
      "mappings": ";;;;sBAAc,QAAQ;;;;oBACL,MAAM;;;;wBACH,UAAU;;;;kBACO,IAAI;;AACzC,IAAI,SAAS,GAAG,sBAAQ,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,CAAC;;AAE3D,MAAM,CAAC,OAAO,GAAG,sBAAQ,MAAM,CAAC,UAAU,SAAS,EAAE,MAAM,EAAE,MAAM,EAAE;AACnE,MAAI,IAAI,GAAG,MAAM,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;AAClC,MAAI,CAAC,IAAI,EAAE,OAAO;;AAElB,MAAI,GAAG,GAAG,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;;AAE9B,SAAO,SAAS,CAAC,IAAI,EAAE,GAAG,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,SACrC,CAAC,UAAU,GAAG,EAAE;AACpB,QAAI,GAAG,CAAC,IAAI,KAAK,QAAQ,EAAE,MAAM,GAAG,CAAC;;AAErC,QAAI,GAAG,GAAG;AACR,UAAI,EAAE,wCAAwC;AAC9C,UAAI,EAAE,IAAI;AACV,SAAG,EAAE,GAAG;KACT,CAAC;;AAEF,QAAI,MAAM,CAAC,GAAG,CAAC,eAAe,CAAC,EAAE;AAC/B,YAAM,kBAAK,MAAM,CAAC,GAAG,EAAE,oBAAE,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC;KACxD,MAAM;AACL,YAAM,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,SAAS,CAAC,EAAE,GAAG,CAAC,CAAC;KACrC;;AAED,WAAO,SAAS,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;GAC7B,CAAC,CACD,IAAI,CAAC,YAAY;;AAEhB,UAAM,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,OAAO,CAAC,EAAE;AAC3B,UAAI,EAAE,+BAA+B;AACrC,UAAI,EAAE,IAAI;AACV,SAAG,EAAE,GAAG;KACT,CAAC,CAAC;;AAEH,QAAI,KAAK,GAAG,oBAAE,IAAI,CAAC,UAAU,IAAI,EAAE;AACjC,0BAAO,IAAI,CAAC,CAAC;KACd,CAAC,CAAC;;AAEH,WAAO,CAAC,IAAI,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;AAC5B,WAAO,CAAC,IAAI,CAAC,QAAQ,EAAE,YAAY;;AACjC,WAAK,EAAE,CAAC;;;AAGR,aAAO,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAC;KACrC,CAAC,CAAC;;AAEH,WAAO,CAAC,EAAE,CAAC,oBAAoB,EAAE,UAAU,MAAM,EAAE,OAAO,EAAE;AAC1D,YAAM,CAAC,GAAG,CAAC,CAAC,SAAS,CAAC,iDAA+C,MAAM,CAAG,CAAC;KAChF,CAAC,CAAC;GACJ,CAAC,CAAC;CACJ,CAAC,CAAC",
      "file": "/home/vio/v3metrics/src/server/pid/index.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport Boom from 'boom';\nimport Promise from 'bluebird';\nimport { unlinkSync as unlink } from 'fs';\nlet writeFile = Promise.promisify(require('fs').writeFile);\n\nmodule.exports = Promise.method(function (kbnServer, server, config) {\n  let path = config.get('pid.file');\n  if (!path) return;\n\n  let pid = String(process.pid);\n\n  return writeFile(path, pid, { flag: 'wx' })\n  .catch(function (err) {\n    if (err.code !== 'EEXIST') throw err;\n\n    let log = {\n      tmpl: 'pid file already exists at <%= path %>',\n      path: path,\n      pid: pid\n    };\n\n    if (config.get('pid.exclusive')) {\n      throw Boom.create(500, _.template(log.tmpl)(log), log);\n    } else {\n      server.log(['pid', 'warning'], log);\n    }\n\n    return writeFile(path, pid);\n  })\n  .then(function () {\n\n    server.log(['pid', 'debug'], {\n      tmpl: 'wrote pid file to <%= path %>',\n      path: path,\n      pid: pid\n    });\n\n    let clean = _.once(function (code) {\n      unlink(path);\n    });\n\n    process.once('exit', clean); // for \"natural\" exits\n    process.once('SIGINT', function () { // for Ctrl-C exits\n      clean();\n\n      // resend SIGINT\n      process.kill(process.pid, 'SIGINT');\n    });\n\n    process.on('unhandledRejection', function (reason, promise) {\n      server.log(['warning'], `Detected an unhandled Promise rejection.\\n${reason}`);\n    });\n  });\n});\n"
      ]
    },
    "mtime": 1467036622849
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/plugins/scan.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "bluebird",
            "imported": [
              "fromNode"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "fromNode",
                "local": "fromNode"
              }
            ]
          },
          {
            "source": "fs",
            "imported": [
              "readdir",
              "stat"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "readdir",
                "local": "readdir"
              },
              {
                "kind": "named",
                "imported": "stat",
                "local": "stat"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "resolve"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "resolve",
                "local": "resolve"
              }
            ]
          },
          {
            "source": "bluebird",
            "imported": [
              "each"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "each",
                "local": "each"
              }
            ]
          },
          {
            "source": "./plugin_collection",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "PluginCollection"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "async-to-generator",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _bluebird = require('bluebird');\n\nvar _fs = require('fs');\n\nvar _path = require('path');\n\nvar _plugin_collection = require('./plugin_collection');\n\nvar _plugin_collection2 = _interopRequireDefault(_plugin_collection);\n\nmodule.exports = _asyncToGenerator(function* (kbnServer, server, config) {\n\n  var plugins = kbnServer.plugins = new _plugin_collection2['default'](kbnServer);\n\n  var scanDirs = [].concat(config.get('plugins.scanDirs') || []);\n  var pluginPaths = [].concat(config.get('plugins.paths') || []);\n\n  var debug = _lodash2['default'].bindKey(server, 'log', ['plugins', 'debug']);\n  var warning = _lodash2['default'].bindKey(server, 'log', ['plugins', 'warning']);\n\n  // scan all scanDirs to find pluginPaths\n  yield (0, _bluebird.each)(scanDirs, _asyncToGenerator(function* (dir) {\n    debug({ tmpl: 'Scanning `<%= dir %>` for plugins', dir: dir });\n\n    var filenames = null;\n\n    try {\n      filenames = yield (0, _bluebird.fromNode)(function (cb) {\n        return (0, _fs.readdir)(dir, cb);\n      });\n    } catch (err) {\n      if (err.code !== 'ENOENT') throw err;\n\n      filenames = [];\n      warning({\n        tmpl: '<%= err.code %>: Unable to scan non-existent directory for plugins \"<%= dir %>\"',\n        err: err,\n        dir: dir\n      });\n    }\n\n    yield (0, _bluebird.each)(filenames, _asyncToGenerator(function* (name) {\n      if (name[0] === '.') return;\n\n      var path = (0, _path.resolve)(dir, name);\n      var stats = yield (0, _bluebird.fromNode)(function (cb) {\n        return (0, _fs.stat)(path, cb);\n      });\n      if (stats.isDirectory()) {\n        pluginPaths.push(path);\n      }\n    }));\n  }));\n\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = pluginPaths[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var path = _step.value;\n\n      var modulePath = undefined;\n      try {\n        modulePath = require.resolve(path);\n      } catch (e) {\n        warning({ tmpl: 'Skipping non-plugin directory at <%= path %>', path: path });\n        continue;\n      }\n\n      yield plugins['new'](path);\n      debug({ tmpl: 'Found plugin at <%= path %>', path: modulePath });\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator['return']) {\n        _iterator['return']();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9wbHVnaW5zL3NjYW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O3NCQUFjLFFBQVE7Ozs7d0JBQ0csVUFBVTs7a0JBQ0wsSUFBSTs7b0JBQ1YsTUFBTTs7aUNBRUQscUJBQXFCOzs7O0FBQ2xELE1BQU0sQ0FBQyxPQUFPLHFCQUFHLFdBQU8sU0FBUyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUs7O0FBRXBELE1BQUksT0FBTyxHQUFHLFNBQVMsQ0FBQyxPQUFPLEdBQUcsbUNBQXFCLFNBQVMsQ0FBQyxDQUFDOztBQUVsRSxNQUFJLFFBQVEsR0FBRyxFQUFFLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsa0JBQWtCLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQztBQUMvRCxNQUFJLFdBQVcsR0FBRyxFQUFFLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsZUFBZSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7O0FBRS9ELE1BQUksS0FBSyxHQUFHLG9CQUFFLE9BQU8sQ0FBQyxNQUFNLEVBQUUsS0FBSyxFQUFFLENBQUMsU0FBUyxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUM7QUFDM0QsTUFBSSxPQUFPLEdBQUcsb0JBQUUsT0FBTyxDQUFDLE1BQU0sRUFBRSxLQUFLLEVBQUUsQ0FBQyxTQUFTLEVBQUUsU0FBUyxDQUFDLENBQUMsQ0FBQzs7O0FBRy9ELFFBQU0sb0JBQUssUUFBUSxvQkFBRSxXQUFNLEdBQUcsRUFBSTtBQUNoQyxTQUFLLENBQUMsRUFBRSxJQUFJLEVBQUUsbUNBQW1DLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7O0FBRS9ELFFBQUksU0FBUyxHQUFHLElBQUksQ0FBQzs7QUFFckIsUUFBSTtBQUNGLGVBQVMsR0FBRyxNQUFNLHdCQUFTLFVBQUEsRUFBRTtlQUFJLGlCQUFRLEdBQUcsRUFBRSxFQUFFLENBQUM7T0FBQSxDQUFDLENBQUM7S0FDcEQsQ0FBQyxPQUFPLEdBQUcsRUFBRTtBQUNaLFVBQUksR0FBRyxDQUFDLElBQUksS0FBSyxRQUFRLEVBQUUsTUFBTSxHQUFHLENBQUM7O0FBRXJDLGVBQVMsR0FBRyxFQUFFLENBQUM7QUFDZixhQUFPLENBQUM7QUFDTixZQUFJLEVBQUUsaUZBQWlGO0FBQ3ZGLFdBQUcsRUFBRSxHQUFHO0FBQ1IsV0FBRyxFQUFFLEdBQUc7T0FDVCxDQUFDLENBQUM7S0FDSjs7QUFFRCxVQUFNLG9CQUFLLFNBQVMsb0JBQUUsV0FBTSxJQUFJLEVBQUk7QUFDbEMsVUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxFQUFFLE9BQU87O0FBRTVCLFVBQUksSUFBSSxHQUFHLG1CQUFRLEdBQUcsRUFBRSxJQUFJLENBQUMsQ0FBQztBQUM5QixVQUFJLEtBQUssR0FBRyxNQUFNLHdCQUFTLFVBQUEsRUFBRTtlQUFJLGNBQUssSUFBSSxFQUFFLEVBQUUsQ0FBQztPQUFBLENBQUMsQ0FBQztBQUNqRCxVQUFJLEtBQUssQ0FBQyxXQUFXLEVBQUUsRUFBRTtBQUN2QixtQkFBVyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztPQUN4QjtLQUNGLEVBQUMsQ0FBQztHQUNKLEVBQUMsQ0FBQzs7Ozs7OztBQUVILHlCQUFpQixXQUFXLDhIQUFFO1VBQXJCLElBQUk7O0FBQ1gsVUFBSSxVQUFVLFlBQUEsQ0FBQztBQUNmLFVBQUk7QUFDRixrQkFBVSxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7T0FDcEMsQ0FBQyxPQUFPLENBQUMsRUFBRTtBQUNWLGVBQU8sQ0FBQyxFQUFFLElBQUksRUFBRSw4Q0FBOEMsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztBQUM5RSxpQkFBUztPQUNWOztBQUVELFlBQU0sT0FBTyxPQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDeEIsV0FBSyxDQUFDLEVBQUUsSUFBSSxFQUFFLDZCQUE2QixFQUFFLElBQUksRUFBRSxVQUFVLEVBQUUsQ0FBQyxDQUFDO0tBQ2xFOzs7Ozs7Ozs7Ozs7Ozs7Q0FDRixDQUFBLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvc2VydmVyL3BsdWdpbnMvc2Nhbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgeyBmcm9tTm9kZSB9IGZyb20gJ2JsdWViaXJkJztcbmltcG9ydCB7IHJlYWRkaXIsIHN0YXQgfSBmcm9tICdmcyc7XG5pbXBvcnQgeyByZXNvbHZlIH0gZnJvbSAncGF0aCc7XG5pbXBvcnQgeyBlYWNoIH0gZnJvbSAnYmx1ZWJpcmQnO1xuaW1wb3J0IFBsdWdpbkNvbGxlY3Rpb24gZnJvbSAnLi9wbHVnaW5fY29sbGVjdGlvbic7XG5tb2R1bGUuZXhwb3J0cyA9IGFzeW5jIChrYm5TZXJ2ZXIsIHNlcnZlciwgY29uZmlnKSA9PiB7XG5cbiAgbGV0IHBsdWdpbnMgPSBrYm5TZXJ2ZXIucGx1Z2lucyA9IG5ldyBQbHVnaW5Db2xsZWN0aW9uKGtiblNlcnZlcik7XG5cbiAgbGV0IHNjYW5EaXJzID0gW10uY29uY2F0KGNvbmZpZy5nZXQoJ3BsdWdpbnMuc2NhbkRpcnMnKSB8fCBbXSk7XG4gIGxldCBwbHVnaW5QYXRocyA9IFtdLmNvbmNhdChjb25maWcuZ2V0KCdwbHVnaW5zLnBhdGhzJykgfHwgW10pO1xuXG4gIGxldCBkZWJ1ZyA9IF8uYmluZEtleShzZXJ2ZXIsICdsb2cnLCBbJ3BsdWdpbnMnLCAnZGVidWcnXSk7XG4gIGxldCB3YXJuaW5nID0gXy5iaW5kS2V5KHNlcnZlciwgJ2xvZycsIFsncGx1Z2lucycsICd3YXJuaW5nJ10pO1xuXG4gIC8vIHNjYW4gYWxsIHNjYW5EaXJzIHRvIGZpbmQgcGx1Z2luUGF0aHNcbiAgYXdhaXQgZWFjaChzY2FuRGlycywgYXN5bmMgZGlyID0+IHtcbiAgICBkZWJ1Zyh7IHRtcGw6ICdTY2FubmluZyBgPCU9IGRpciAlPmAgZm9yIHBsdWdpbnMnLCBkaXI6IGRpciB9KTtcblxuICAgIGxldCBmaWxlbmFtZXMgPSBudWxsO1xuXG4gICAgdHJ5IHtcbiAgICAgIGZpbGVuYW1lcyA9IGF3YWl0IGZyb21Ob2RlKGNiID0+IHJlYWRkaXIoZGlyLCBjYikpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgaWYgKGVyci5jb2RlICE9PSAnRU5PRU5UJykgdGhyb3cgZXJyO1xuXG4gICAgICBmaWxlbmFtZXMgPSBbXTtcbiAgICAgIHdhcm5pbmcoe1xuICAgICAgICB0bXBsOiAnPCU9IGVyci5jb2RlICU+OiBVbmFibGUgdG8gc2NhbiBub24tZXhpc3RlbnQgZGlyZWN0b3J5IGZvciBwbHVnaW5zIFwiPCU9IGRpciAlPlwiJyxcbiAgICAgICAgZXJyOiBlcnIsXG4gICAgICAgIGRpcjogZGlyXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBhd2FpdCBlYWNoKGZpbGVuYW1lcywgYXN5bmMgbmFtZSA9PiB7XG4gICAgICBpZiAobmFtZVswXSA9PT0gJy4nKSByZXR1cm47XG5cbiAgICAgIGxldCBwYXRoID0gcmVzb2x2ZShkaXIsIG5hbWUpO1xuICAgICAgbGV0IHN0YXRzID0gYXdhaXQgZnJvbU5vZGUoY2IgPT4gc3RhdChwYXRoLCBjYikpO1xuICAgICAgaWYgKHN0YXRzLmlzRGlyZWN0b3J5KCkpIHtcbiAgICAgICAgcGx1Z2luUGF0aHMucHVzaChwYXRoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgZm9yIChsZXQgcGF0aCBvZiBwbHVnaW5QYXRocykge1xuICAgIGxldCBtb2R1bGVQYXRoO1xuICAgIHRyeSB7XG4gICAgICBtb2R1bGVQYXRoID0gcmVxdWlyZS5yZXNvbHZlKHBhdGgpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHdhcm5pbmcoeyB0bXBsOiAnU2tpcHBpbmcgbm9uLXBsdWdpbiBkaXJlY3RvcnkgYXQgPCU9IHBhdGggJT4nLCBwYXRoOiBwYXRoIH0pO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgYXdhaXQgcGx1Z2lucy5uZXcocGF0aCk7XG4gICAgZGVidWcoeyB0bXBsOiAnRm91bmQgcGx1Z2luIGF0IDwlPSBwYXRoICU+JywgcGF0aDogbW9kdWxlUGF0aCB9KTtcbiAgfVxufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/plugins/scan.js"
      ],
      "names": [],
      "mappings": ";;;;;;sBAAc,QAAQ;;;;wBACG,UAAU;;kBACL,IAAI;;oBACV,MAAM;;iCAED,qBAAqB;;;;AAClD,MAAM,CAAC,OAAO,qBAAG,WAAO,SAAS,EAAE,MAAM,EAAE,MAAM,EAAK;;AAEpD,MAAI,OAAO,GAAG,SAAS,CAAC,OAAO,GAAG,mCAAqB,SAAS,CAAC,CAAC;;AAElE,MAAI,QAAQ,GAAG,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,kBAAkB,CAAC,IAAI,EAAE,CAAC,CAAC;AAC/D,MAAI,WAAW,GAAG,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,eAAe,CAAC,IAAI,EAAE,CAAC,CAAC;;AAE/D,MAAI,KAAK,GAAG,oBAAE,OAAO,CAAC,MAAM,EAAE,KAAK,EAAE,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC,CAAC;AAC3D,MAAI,OAAO,GAAG,oBAAE,OAAO,CAAC,MAAM,EAAE,KAAK,EAAE,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC,CAAC;;;AAG/D,QAAM,oBAAK,QAAQ,oBAAE,WAAM,GAAG,EAAI;AAChC,SAAK,CAAC,EAAE,IAAI,EAAE,mCAAmC,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;;AAE/D,QAAI,SAAS,GAAG,IAAI,CAAC;;AAErB,QAAI;AACF,eAAS,GAAG,MAAM,wBAAS,UAAA,EAAE;eAAI,iBAAQ,GAAG,EAAE,EAAE,CAAC;OAAA,CAAC,CAAC;KACpD,CAAC,OAAO,GAAG,EAAE;AACZ,UAAI,GAAG,CAAC,IAAI,KAAK,QAAQ,EAAE,MAAM,GAAG,CAAC;;AAErC,eAAS,GAAG,EAAE,CAAC;AACf,aAAO,CAAC;AACN,YAAI,EAAE,iFAAiF;AACvF,WAAG,EAAE,GAAG;AACR,WAAG,EAAE,GAAG;OACT,CAAC,CAAC;KACJ;;AAED,UAAM,oBAAK,SAAS,oBAAE,WAAM,IAAI,EAAI;AAClC,UAAI,IAAI,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE,OAAO;;AAE5B,UAAI,IAAI,GAAG,mBAAQ,GAAG,EAAE,IAAI,CAAC,CAAC;AAC9B,UAAI,KAAK,GAAG,MAAM,wBAAS,UAAA,EAAE;eAAI,cAAK,IAAI,EAAE,EAAE,CAAC;OAAA,CAAC,CAAC;AACjD,UAAI,KAAK,CAAC,WAAW,EAAE,EAAE;AACvB,mBAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;OACxB;KACF,EAAC,CAAC;GACJ,EAAC,CAAC;;;;;;;AAEH,yBAAiB,WAAW,8HAAE;UAArB,IAAI;;AACX,UAAI,UAAU,YAAA,CAAC;AACf,UAAI;AACF,kBAAU,GAAG,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;OACpC,CAAC,OAAO,CAAC,EAAE;AACV,eAAO,CAAC,EAAE,IAAI,EAAE,8CAA8C,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC;AAC9E,iBAAS;OACV;;AAED,YAAM,OAAO,OAAI,CAAC,IAAI,CAAC,CAAC;AACxB,WAAK,CAAC,EAAE,IAAI,EAAE,6BAA6B,EAAE,IAAI,EAAE,UAAU,EAAE,CAAC,CAAC;KAClE;;;;;;;;;;;;;;;CACF,CAAA,CAAC",
      "file": "/home/vio/v3metrics/src/server/plugins/scan.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport { fromNode } from 'bluebird';\nimport { readdir, stat } from 'fs';\nimport { resolve } from 'path';\nimport { each } from 'bluebird';\nimport PluginCollection from './plugin_collection';\nmodule.exports = async (kbnServer, server, config) => {\n\n  let plugins = kbnServer.plugins = new PluginCollection(kbnServer);\n\n  let scanDirs = [].concat(config.get('plugins.scanDirs') || []);\n  let pluginPaths = [].concat(config.get('plugins.paths') || []);\n\n  let debug = _.bindKey(server, 'log', ['plugins', 'debug']);\n  let warning = _.bindKey(server, 'log', ['plugins', 'warning']);\n\n  // scan all scanDirs to find pluginPaths\n  await each(scanDirs, async dir => {\n    debug({ tmpl: 'Scanning `<%= dir %>` for plugins', dir: dir });\n\n    let filenames = null;\n\n    try {\n      filenames = await fromNode(cb => readdir(dir, cb));\n    } catch (err) {\n      if (err.code !== 'ENOENT') throw err;\n\n      filenames = [];\n      warning({\n        tmpl: '<%= err.code %>: Unable to scan non-existent directory for plugins \"<%= dir %>\"',\n        err: err,\n        dir: dir\n      });\n    }\n\n    await each(filenames, async name => {\n      if (name[0] === '.') return;\n\n      let path = resolve(dir, name);\n      let stats = await fromNode(cb => stat(path, cb));\n      if (stats.isDirectory()) {\n        pluginPaths.push(path);\n      }\n    });\n  });\n\n  for (let path of pluginPaths) {\n    let modulePath;\n    try {\n      modulePath = require.resolve(path);\n    } catch (e) {\n      warning({ tmpl: 'Skipping non-plugin directory at <%= path %>', path: path });\n      continue;\n    }\n\n    await plugins.new(path);\n    debug({ tmpl: 'Found plugin at <%= path %>', path: modulePath });\n  }\n};\n"
      ]
    },
    "mtime": 1467036622849
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/plugins/plugin_collection.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./plugin_api",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "PluginApi"
              }
            ]
          },
          {
            "source": "util",
            "imported": [
              "inspect"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "inspect",
                "local": "inspect"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "get",
              "indexBy"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "get",
                "local": "get"
              },
              {
                "kind": "named",
                "imported": "indexBy",
                "local": "indexBy"
              }
            ]
          },
          {
            "source": "../../utils/collection",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Collection"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "get",
        "inherits",
        "create-class",
        "class-call-check",
        "async-to-generator",
        "to-consumable-array",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i]; return arr2; } else { return Array.from(arr); } }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _plugin_api = require('./plugin_api');\n\nvar _plugin_api2 = _interopRequireDefault(_plugin_api);\n\nvar _util = require('util');\n\nvar _lodash = require('lodash');\n\nvar _utilsCollection = require('../../utils/collection');\n\nvar _utilsCollection2 = _interopRequireDefault(_utilsCollection);\n\nvar byIdCache = Symbol('byIdCache');\nvar pluginApis = Symbol('pluginApis');\n\nmodule.exports = (function (_Collection) {\n  _inherits(Plugins, _Collection);\n\n  function Plugins(kbnServer) {\n    _classCallCheck(this, Plugins);\n\n    _get(Object.getPrototypeOf(Plugins.prototype), 'constructor', this).call(this);\n    this.kbnServer = kbnServer;\n    this[pluginApis] = new Set();\n  }\n\n  _createClass(Plugins, [{\n    key: 'new',\n    value: _asyncToGenerator(function* (path) {\n      var api = new _plugin_api2['default'](this.kbnServer, path);\n      this[pluginApis].add(api);\n\n      var output = [].concat(require(path)(api) || []);\n      var config = this.kbnServer.config;\n\n      if (!output.length) return;\n\n      // clear the byIdCache\n      this[byIdCache] = null;\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = output[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var product = _step.value;\n\n          if (product instanceof api.Plugin) {\n            var plugin = product;\n            this.add(plugin);\n\n            var enabled = yield plugin.readConfig();\n            if (!enabled) this['delete'](plugin);\n            continue;\n          }\n\n          throw new TypeError('unexpected plugin export ' + (0, _util.inspect)(product));\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator['return']) {\n            _iterator['return']();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    })\n  }, {\n    key: 'getPluginApis',\n    value: function getPluginApis() {\n      return this[pluginApis];\n    }\n  }, {\n    key: 'byId',\n    get: function get() {\n      return this[byIdCache] || (this[byIdCache] = (0, _lodash.indexBy)([].concat(_toConsumableArray(this)), 'id'));\n    }\n  }]);\n\n  return Plugins;\n})(_utilsCollection2['default']);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9wbHVnaW5zL3BsdWdpbl9jb2xsZWN0aW9uLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7MEJBQ3NCLGNBQWM7Ozs7b0JBQ1osTUFBTTs7c0JBQ0QsUUFBUTs7K0JBQ2Qsd0JBQXdCOzs7O0FBRS9DLElBQUksU0FBUyxHQUFHLE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUNwQyxJQUFJLFVBQVUsR0FBRyxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUM7O0FBRXRDLE1BQU0sQ0FBQyxPQUFPO1lBQVMsT0FBTzs7QUFFakIsV0FGVSxPQUFPLENBRWhCLFNBQVMsRUFBRTswQkFGRixPQUFPOztBQUcxQiwrQkFIbUIsT0FBTyw2Q0FHbEI7QUFDUixRQUFJLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQztBQUMzQixRQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsSUFBSSxHQUFHLEVBQUUsQ0FBQztHQUM5Qjs7ZUFOb0IsT0FBTzs7NkJBUW5CLFdBQUMsSUFBSSxFQUFFO0FBQ2QsVUFBSSxHQUFHLEdBQUcsNEJBQWMsSUFBSSxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsQ0FBQztBQUM5QyxVQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDOztBQUUxQixVQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQztBQUNqRCxVQUFJLE1BQU0sR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQzs7QUFFbkMsVUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsT0FBTzs7O0FBRzNCLFVBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxJQUFJLENBQUM7Ozs7Ozs7QUFFdkIsNkJBQW9CLE1BQU0sOEhBQUU7Y0FBbkIsT0FBTzs7QUFFZCxjQUFJLE9BQU8sWUFBWSxHQUFHLENBQUMsTUFBTSxFQUFFO0FBQ2pDLGdCQUFJLE1BQU0sR0FBRyxPQUFPLENBQUM7QUFDckIsZ0JBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7O0FBRWpCLGdCQUFJLE9BQU8sR0FBRyxNQUFNLE1BQU0sQ0FBQyxVQUFVLEVBQUUsQ0FBQztBQUN4QyxnQkFBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLFVBQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUNsQyxxQkFBUztXQUNWOztBQUVELGdCQUFNLElBQUksU0FBUyxDQUFDLDJCQUEyQixHQUFHLG1CQUFRLE9BQU8sQ0FBQyxDQUFDLENBQUM7U0FDckU7Ozs7Ozs7Ozs7Ozs7OztLQUNGOzs7V0FNWSx5QkFBRztBQUNkLGFBQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0tBQ3pCOzs7U0FOTyxlQUFHO0FBQ1QsYUFBTyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLGtEQUFZLElBQUksSUFBRyxJQUFJLENBQUMsQ0FBQSxBQUFDLENBQUM7S0FDeEU7OztTQXJDb0IsT0FBTztnQ0EyQzdCLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvc2VydmVyL3BsdWdpbnMvcGx1Z2luX2NvbGxlY3Rpb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbmltcG9ydCBQbHVnaW5BcGkgZnJvbSAnLi9wbHVnaW5fYXBpJztcbmltcG9ydCB7IGluc3BlY3QgfSBmcm9tICd1dGlsJztcbmltcG9ydCB7IGdldCwgaW5kZXhCeSB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgQ29sbGVjdGlvbiBmcm9tICcuLi8uLi91dGlscy9jb2xsZWN0aW9uJztcblxubGV0IGJ5SWRDYWNoZSA9IFN5bWJvbCgnYnlJZENhY2hlJyk7XG5sZXQgcGx1Z2luQXBpcyA9IFN5bWJvbCgncGx1Z2luQXBpcycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIFBsdWdpbnMgZXh0ZW5kcyBDb2xsZWN0aW9uIHtcblxuICBjb25zdHJ1Y3RvcihrYm5TZXJ2ZXIpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMua2JuU2VydmVyID0ga2JuU2VydmVyO1xuICAgIHRoaXNbcGx1Z2luQXBpc10gPSBuZXcgU2V0KCk7XG4gIH1cblxuICBhc3luYyBuZXcocGF0aCkge1xuICAgIGxldCBhcGkgPSBuZXcgUGx1Z2luQXBpKHRoaXMua2JuU2VydmVyLCBwYXRoKTtcbiAgICB0aGlzW3BsdWdpbkFwaXNdLmFkZChhcGkpO1xuXG4gICAgbGV0IG91dHB1dCA9IFtdLmNvbmNhdChyZXF1aXJlKHBhdGgpKGFwaSkgfHwgW10pO1xuICAgIGxldCBjb25maWcgPSB0aGlzLmtiblNlcnZlci5jb25maWc7XG5cbiAgICBpZiAoIW91dHB1dC5sZW5ndGgpIHJldHVybjtcblxuICAgIC8vIGNsZWFyIHRoZSBieUlkQ2FjaGVcbiAgICB0aGlzW2J5SWRDYWNoZV0gPSBudWxsO1xuXG4gICAgZm9yIChsZXQgcHJvZHVjdCBvZiBvdXRwdXQpIHtcblxuICAgICAgaWYgKHByb2R1Y3QgaW5zdGFuY2VvZiBhcGkuUGx1Z2luKSB7XG4gICAgICAgIGxldCBwbHVnaW4gPSBwcm9kdWN0O1xuICAgICAgICB0aGlzLmFkZChwbHVnaW4pO1xuXG4gICAgICAgIGxldCBlbmFibGVkID0gYXdhaXQgcGx1Z2luLnJlYWRDb25maWcoKTtcbiAgICAgICAgaWYgKCFlbmFibGVkKSB0aGlzLmRlbGV0ZShwbHVnaW4pO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigndW5leHBlY3RlZCBwbHVnaW4gZXhwb3J0ICcgKyBpbnNwZWN0KHByb2R1Y3QpKTtcbiAgICB9XG4gIH1cblxuICBnZXQgYnlJZCgpIHtcbiAgICByZXR1cm4gdGhpc1tieUlkQ2FjaGVdIHx8ICh0aGlzW2J5SWRDYWNoZV0gPSBpbmRleEJ5KFsuLi50aGlzXSwgJ2lkJykpO1xuICB9XG5cbiAgZ2V0UGx1Z2luQXBpcygpIHtcbiAgICByZXR1cm4gdGhpc1twbHVnaW5BcGlzXTtcbiAgfVxuXG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/plugins/plugin_collection.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;;;;;;;0BACsB,cAAc;;;;oBACZ,MAAM;;sBACD,QAAQ;;+BACd,wBAAwB;;;;AAE/C,IAAI,SAAS,GAAG,MAAM,CAAC,WAAW,CAAC,CAAC;AACpC,IAAI,UAAU,GAAG,MAAM,CAAC,YAAY,CAAC,CAAC;;AAEtC,MAAM,CAAC,OAAO;YAAS,OAAO;;AAEjB,WAFU,OAAO,CAEhB,SAAS,EAAE;0BAFF,OAAO;;AAG1B,+BAHmB,OAAO,6CAGlB;AACR,QAAI,CAAC,SAAS,GAAG,SAAS,CAAC;AAC3B,QAAI,CAAC,UAAU,CAAC,GAAG,IAAI,GAAG,EAAE,CAAC;GAC9B;;eANoB,OAAO;;6BAQnB,WAAC,IAAI,EAAE;AACd,UAAI,GAAG,GAAG,4BAAc,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;AAC9C,UAAI,CAAC,UAAU,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;;AAE1B,UAAI,MAAM,GAAG,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC;AACjD,UAAI,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;;AAEnC,UAAI,CAAC,MAAM,CAAC,MAAM,EAAE,OAAO;;;AAG3B,UAAI,CAAC,SAAS,CAAC,GAAG,IAAI,CAAC;;;;;;;AAEvB,6BAAoB,MAAM,8HAAE;cAAnB,OAAO;;AAEd,cAAI,OAAO,YAAY,GAAG,CAAC,MAAM,EAAE;AACjC,gBAAI,MAAM,GAAG,OAAO,CAAC;AACrB,gBAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;;AAEjB,gBAAI,OAAO,GAAG,MAAM,MAAM,CAAC,UAAU,EAAE,CAAC;AACxC,gBAAI,CAAC,OAAO,EAAE,IAAI,UAAO,CAAC,MAAM,CAAC,CAAC;AAClC,qBAAS;WACV;;AAED,gBAAM,IAAI,SAAS,CAAC,2BAA2B,GAAG,mBAAQ,OAAO,CAAC,CAAC,CAAC;SACrE;;;;;;;;;;;;;;;KACF;;;WAMY,yBAAG;AACd,aAAO,IAAI,CAAC,UAAU,CAAC,CAAC;KACzB;;;SANO,eAAG;AACT,aAAO,IAAI,CAAC,SAAS,CAAC,KAAK,IAAI,CAAC,SAAS,CAAC,GAAG,kDAAY,IAAI,IAAG,IAAI,CAAC,CAAA,AAAC,CAAC;KACxE;;;SArCoB,OAAO;gCA2C7B,CAAC",
      "file": "/home/vio/v3metrics/src/server/plugins/plugin_collection.js",
      "sourcesContent": [
        "\nimport PluginApi from './plugin_api';\nimport { inspect } from 'util';\nimport { get, indexBy } from 'lodash';\nimport Collection from '../../utils/collection';\n\nlet byIdCache = Symbol('byIdCache');\nlet pluginApis = Symbol('pluginApis');\n\nmodule.exports = class Plugins extends Collection {\n\n  constructor(kbnServer) {\n    super();\n    this.kbnServer = kbnServer;\n    this[pluginApis] = new Set();\n  }\n\n  async new(path) {\n    let api = new PluginApi(this.kbnServer, path);\n    this[pluginApis].add(api);\n\n    let output = [].concat(require(path)(api) || []);\n    let config = this.kbnServer.config;\n\n    if (!output.length) return;\n\n    // clear the byIdCache\n    this[byIdCache] = null;\n\n    for (let product of output) {\n\n      if (product instanceof api.Plugin) {\n        let plugin = product;\n        this.add(plugin);\n\n        let enabled = await plugin.readConfig();\n        if (!enabled) this.delete(plugin);\n        continue;\n      }\n\n      throw new TypeError('unexpected plugin export ' + inspect(product));\n    }\n  }\n\n  get byId() {\n    return this[byIdCache] || (this[byIdCache] = indexBy([...this], 'id'));\n  }\n\n  getPluginApis() {\n    return this[pluginApis];\n  }\n\n};\n"
      ]
    },
    "mtime": 1467036622849
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/plugins/plugin_api.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "./plugin",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Plugin"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "basename",
              "join"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "basename",
                "local": "basename"
              },
              {
                "kind": "named",
                "imported": "join",
                "local": "join"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _plugin = require('./plugin');\n\nvar _plugin2 = _interopRequireDefault(_plugin);\n\nvar _path = require('path');\n\nmodule.exports = (function () {\n  function PluginApi(kibana, pluginPath) {\n    _classCallCheck(this, PluginApi);\n\n    this.config = kibana.config;\n    this.rootDir = kibana.rootDir;\n    this['package'] = require((0, _path.join)(pluginPath, 'package.json'));\n    this.Plugin = _plugin2['default'].scoped(kibana, pluginPath, this['package']);\n  }\n\n  _createClass(PluginApi, [{\n    key: 'uiExports',\n    get: function get() {\n      throw new Error('plugin.uiExports is not defined until initialize phase');\n    }\n  }, {\n    key: 'autoload',\n    get: function get() {\n      console.warn(this['package'].id + ' accessed the autoload lists which are no longer available via the Plugin API.' + 'Use the `ui/autoload/*` modules instead.');\n\n      return {\n        directives: [],\n        filters: [],\n        styles: [],\n        modules: [],\n        require: []\n      };\n    }\n  }]);\n\n  return PluginApi;\n})();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9wbHVnaW5zL3BsdWdpbl9hcGkuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7c0JBQWMsUUFBUTs7OztzQkFDSCxVQUFVOzs7O29CQUNFLE1BQU07O0FBRXJDLE1BQU0sQ0FBQyxPQUFPO0FBQ0QsV0FEVSxTQUFTLENBQ2xCLE1BQU0sRUFBRSxVQUFVLEVBQUU7MEJBRFgsU0FBUzs7QUFFNUIsUUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDO0FBQzVCLFFBQUksQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQztBQUM5QixRQUFJLFdBQVEsR0FBRyxPQUFPLENBQUMsZ0JBQUssVUFBVSxFQUFFLGNBQWMsQ0FBQyxDQUFDLENBQUM7QUFDekQsUUFBSSxDQUFDLE1BQU0sR0FBRyxvQkFBTyxNQUFNLENBQUMsTUFBTSxFQUFFLFVBQVUsRUFBRSxJQUFJLFdBQVEsQ0FBQyxDQUFDO0dBQy9EOztlQU5vQixTQUFTOztTQVFqQixlQUFHO0FBQ2QsWUFBTSxJQUFJLEtBQUssQ0FBQyx3REFBd0QsQ0FBQyxDQUFDO0tBQzNFOzs7U0FFVyxlQUFHO0FBQ2IsYUFBTyxDQUFDLElBQUksQ0FDVixBQUFHLElBQUksV0FBUSxDQUFDLEVBQUUsc0ZBQ2xCLDBDQUEwQyxDQUMzQyxDQUFDOztBQUVGLGFBQU87QUFDTCxrQkFBVSxFQUFFLEVBQUU7QUFDZCxlQUFPLEVBQUUsRUFBRTtBQUNYLGNBQU0sRUFBRSxFQUFFO0FBQ1YsZUFBTyxFQUFFLEVBQUU7QUFDWCxlQUFPLEVBQUUsRUFBRTtPQUNaLENBQUM7S0FDSDs7O1NBekJvQixTQUFTO0lBMEIvQixDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9wbHVnaW5zL3BsdWdpbl9hcGkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IFBsdWdpbiBmcm9tICcuL3BsdWdpbic7XG5pbXBvcnQgeyBiYXNlbmFtZSwgam9pbiB9IGZyb20gJ3BhdGgnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIFBsdWdpbkFwaSB7XG4gIGNvbnN0cnVjdG9yKGtpYmFuYSwgcGx1Z2luUGF0aCkge1xuICAgIHRoaXMuY29uZmlnID0ga2liYW5hLmNvbmZpZztcbiAgICB0aGlzLnJvb3REaXIgPSBraWJhbmEucm9vdERpcjtcbiAgICB0aGlzLnBhY2thZ2UgPSByZXF1aXJlKGpvaW4ocGx1Z2luUGF0aCwgJ3BhY2thZ2UuanNvbicpKTtcbiAgICB0aGlzLlBsdWdpbiA9IFBsdWdpbi5zY29wZWQoa2liYW5hLCBwbHVnaW5QYXRoLCB0aGlzLnBhY2thZ2UpO1xuICB9XG5cbiAgZ2V0IHVpRXhwb3J0cygpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3BsdWdpbi51aUV4cG9ydHMgaXMgbm90IGRlZmluZWQgdW50aWwgaW5pdGlhbGl6ZSBwaGFzZScpO1xuICB9XG5cbiAgZ2V0IGF1dG9sb2FkKCkge1xuICAgIGNvbnNvbGUud2FybihcbiAgICAgIGAke3RoaXMucGFja2FnZS5pZH0gYWNjZXNzZWQgdGhlIGF1dG9sb2FkIGxpc3RzIHdoaWNoIGFyZSBubyBsb25nZXIgYXZhaWxhYmxlIHZpYSB0aGUgUGx1Z2luIEFQSS5gICtcbiAgICAgICdVc2UgdGhlIGB1aS9hdXRvbG9hZC8qYCBtb2R1bGVzIGluc3RlYWQuJ1xuICAgICk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgZGlyZWN0aXZlczogW10sXG4gICAgICBmaWx0ZXJzOiBbXSxcbiAgICAgIHN0eWxlczogW10sXG4gICAgICBtb2R1bGVzOiBbXSxcbiAgICAgIHJlcXVpcmU6IFtdXG4gICAgfTtcbiAgfVxufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/plugins/plugin_api.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;sBAAc,QAAQ;;;;sBACH,UAAU;;;;oBACE,MAAM;;AAErC,MAAM,CAAC,OAAO;AACD,WADU,SAAS,CAClB,MAAM,EAAE,UAAU,EAAE;0BADX,SAAS;;AAE5B,QAAI,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC;AAC5B,QAAI,CAAC,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC;AAC9B,QAAI,WAAQ,GAAG,OAAO,CAAC,gBAAK,UAAU,EAAE,cAAc,CAAC,CAAC,CAAC;AACzD,QAAI,CAAC,MAAM,GAAG,oBAAO,MAAM,CAAC,MAAM,EAAE,UAAU,EAAE,IAAI,WAAQ,CAAC,CAAC;GAC/D;;eANoB,SAAS;;SAQjB,eAAG;AACd,YAAM,IAAI,KAAK,CAAC,wDAAwD,CAAC,CAAC;KAC3E;;;SAEW,eAAG;AACb,aAAO,CAAC,IAAI,CACV,AAAG,IAAI,WAAQ,CAAC,EAAE,sFAClB,0CAA0C,CAC3C,CAAC;;AAEF,aAAO;AACL,kBAAU,EAAE,EAAE;AACd,eAAO,EAAE,EAAE;AACX,cAAM,EAAE,EAAE;AACV,eAAO,EAAE,EAAE;AACX,eAAO,EAAE,EAAE;OACZ,CAAC;KACH;;;SAzBoB,SAAS;IA0B/B,CAAC",
      "file": "/home/vio/v3metrics/src/server/plugins/plugin_api.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport Plugin from './plugin';\nimport { basename, join } from 'path';\n\nmodule.exports = class PluginApi {\n  constructor(kibana, pluginPath) {\n    this.config = kibana.config;\n    this.rootDir = kibana.rootDir;\n    this.package = require(join(pluginPath, 'package.json'));\n    this.Plugin = Plugin.scoped(kibana, pluginPath, this.package);\n  }\n\n  get uiExports() {\n    throw new Error('plugin.uiExports is not defined until initialize phase');\n  }\n\n  get autoload() {\n    console.warn(\n      `${this.package.id} accessed the autoload lists which are no longer available via the Plugin API.` +\n      'Use the `ui/autoload/*` modules instead.'\n    );\n\n    return {\n      directives: [],\n      filters: [],\n      styles: [],\n      modules: [],\n      require: []\n    };\n  }\n};\n"
      ]
    },
    "mtime": 1467036622849
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/plugins/plugin.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "lodash/internal/toPath",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "toPath"
              }
            ]
          },
          {
            "source": "joi",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Joi"
              }
            ]
          },
          {
            "source": "bluebird",
            "imported": [
              "default",
              "attempt",
              "fromNode"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Bluebird"
              },
              {
                "kind": "named",
                "imported": "attempt",
                "local": "attempt"
              },
              {
                "kind": "named",
                "imported": "fromNode",
                "local": "fromNode"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "basename",
              "resolve"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "basename",
                "local": "basename"
              },
              {
                "kind": "named",
                "imported": "resolve",
                "local": "resolve"
              }
            ]
          },
          {
            "source": "util",
            "imported": [
              "inherits"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "inherits",
                "local": "inherits"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "async-to-generator",
        "get",
        "inherits",
        "to-consumable-array",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i]; return arr2; } else { return Array.from(arr); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _lodashInternalToPath = require('lodash/internal/toPath');\n\nvar _lodashInternalToPath2 = _interopRequireDefault(_lodashInternalToPath);\n\nvar _joi = require('joi');\n\nvar _joi2 = _interopRequireDefault(_joi);\n\nvar _bluebird = require('bluebird');\n\nvar _bluebird2 = _interopRequireDefault(_bluebird);\n\nvar _path = require('path');\n\nvar _util = require('util');\n\nvar extendInitFns = Symbol('extend plugin initialization');\n\nvar defaultConfigSchema = _joi2['default'].object({\n  enabled: _joi2['default'].boolean()['default'](true)\n})['default']();\n\n/**\n * The server plugin class, used to extend the server\n * and add custom behavior. A \"scoped\" plugin class is\n * created by the PluginApi class and provided to plugin\n * providers that automatically binds all but the `opts`\n * arguments.\n *\n * @class Plugin\n * @param {KbnServer} kbnServer - the KbnServer this plugin\n *                              belongs to.\n * @param {String} path - the path from which the plugin hails\n * @param {Object} pkg - the value of package.json for the plugin\n * @param {Objects} opts - the options for this plugin\n * @param {String} [opts.id=pkg.name] - the id for this plugin.\n * @param {Object} [opts.uiExports] - a mapping of UiExport types\n *                                  to UI modules or metadata about\n *                                  the UI module\n * @param {Array} [opts.require] - the other plugins that this plugin\n *                               requires. These plugins must exist and\n *                               be enabled for this plugin to function.\n *                               The require'd plugins will also be\n *                               initialized first, in order to make sure\n *                               that dependencies provided by these plugins\n *                               are available\n * @param {String} [opts.version=pkg.version] - the version of this plugin\n * @param {Function} [opts.init] - A function that will be called to initialize\n *                               this plugin at the appropriate time.\n * @param {Function} [opts.configPrefix=this.id] - The prefix to use for configuration\n *                               values in the main configuration service\n * @param {Function} [opts.config] - A function that produces a configuration\n *                                 schema using Joi, which is passed as its\n *                                 first argument.\n * @param {String|False} [opts.publicDir=path + '/public']\n *    - the public directory for this plugin. The final directory must\n *    have the name \"public\", though it can be located somewhere besides\n *    the root of the plugin. Set this to false to disable exposure of a\n *    public directory\n */\nmodule.exports = (function () {\n  function Plugin(kbnServer, path, pkg, opts) {\n    _classCallCheck(this, Plugin);\n\n    this.kbnServer = kbnServer;\n    this.pkg = pkg;\n    this.path = path;\n\n    this.id = opts.id || pkg.name;\n    this.uiExportsSpecs = opts.uiExports || {};\n    this.requiredIds = opts.require || [];\n    this.version = opts.version || pkg.version;\n    this.externalPreInit = opts.preInit || _lodash2['default'].noop;\n    this.externalInit = opts.init || _lodash2['default'].noop;\n    this.configPrefix = opts.configPrefix || this.id;\n    this.getConfigSchema = opts.config || _lodash2['default'].noop;\n    this.preInit = _lodash2['default'].once(this.preInit);\n    this.init = _lodash2['default'].once(this.init);\n    this[extendInitFns] = [];\n\n    if (opts.publicDir === false) {\n      this.publicDir = null;\n    } else if (!opts.publicDir) {\n      this.publicDir = (0, _path.resolve)(this.path, 'public');\n    } else {\n      this.publicDir = opts.publicDir;\n      if ((0, _path.basename)(this.publicDir) !== 'public') {\n        throw new Error('publicDir for plugin ' + this.id + ' must end with a \"public\" directory.');\n      }\n    }\n  }\n\n  _createClass(Plugin, [{\n    key: 'readConfig',\n    value: _asyncToGenerator(function* () {\n      var schema = yield this.getConfigSchema(_joi2['default']);\n      var config = this.kbnServer.config;\n\n      config.extendSchema(this.configPrefix, schema || defaultConfigSchema);\n\n      if (config.get([].concat(_toConsumableArray((0, _lodashInternalToPath2['default'])(this.configPrefix)), ['enabled']))) {\n        return true;\n      } else {\n        config.removeSchema(this.configPrefix);\n        return false;\n      }\n    })\n  }, {\n    key: 'preInit',\n    value: _asyncToGenerator(function* () {\n      return yield this.externalPreInit(this.kbnServer.server);\n    })\n  }, {\n    key: 'init',\n    value: _asyncToGenerator(function* () {\n      var _this = this;\n\n      var id = this.id;\n      var version = this.version;\n      var kbnServer = this.kbnServer;\n      var configPrefix = this.configPrefix;\n      var config = kbnServer.config;\n\n      // setup the hapi register function and get on with it\n      var asyncRegister = _asyncToGenerator(function* (server, options) {\n        _this.server = server;\n\n        yield Promise.all(_this[extendInitFns].map(_asyncToGenerator(function* (fn) {\n          yield fn.call(_this, server, options);\n        })));\n\n        server.log(['plugins', 'debug'], {\n          tmpl: 'Initializing plugin <%= plugin.toString() %>',\n          plugin: _this\n        });\n\n        if (_this.publicDir) {\n          server.exposeStaticDir('/plugins/' + id + '/{path*}', _this.publicDir);\n        }\n\n        _this.status = kbnServer.status.createForPlugin(_this);\n        server.expose('status', _this.status);\n\n        return yield (0, _bluebird.attempt)(_this.externalInit, [server, options], _this);\n      });\n\n      var register = function register(server, options, next) {\n        _bluebird2['default'].resolve(asyncRegister(server, options)).nodeify(next);\n      };\n\n      register.attributes = { name: id, version: version };\n\n      yield (0, _bluebird.fromNode)(function (cb) {\n        kbnServer.server.register({\n          register: register,\n          options: config.has(configPrefix) ? config.get(configPrefix) : null\n        }, cb);\n      });\n\n      // Only change the plugin status to green if the\n      // intial status has not been changed\n      if (this.status.state === 'uninitialized') {\n        this.status.green('Ready');\n      }\n    })\n  }, {\n    key: 'extendInit',\n    value: function extendInit(fn) {\n      this[extendInitFns].push(fn);\n    }\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      return this.pkg;\n    }\n  }, {\n    key: 'toString',\n    value: function toString() {\n      return this.id + '@' + this.version;\n    }\n  }], [{\n    key: 'scoped',\n    value: function scoped(kbnServer, path, pkg) {\n      return (function (_Plugin) {\n        _inherits(ScopedPlugin, _Plugin);\n\n        function ScopedPlugin(opts) {\n          _classCallCheck(this, ScopedPlugin);\n\n          _get(Object.getPrototypeOf(ScopedPlugin.prototype), 'constructor', this).call(this, kbnServer, path, pkg, opts || {});\n        }\n\n        return ScopedPlugin;\n      })(Plugin);\n    }\n  }]);\n\n  return Plugin;\n})();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9wbHVnaW5zL3BsdWdpbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O3NCQUFjLFFBQVE7Ozs7b0NBQ0gsd0JBQXdCOzs7O21CQUMzQixLQUFLOzs7O3dCQUN1QixVQUFVOzs7O29CQUNwQixNQUFNOztvQkFDZixNQUFNOztBQUUvQixJQUFNLGFBQWEsR0FBRyxNQUFNLENBQUMsOEJBQThCLENBQUMsQ0FBQzs7QUFFN0QsSUFBTSxtQkFBbUIsR0FBRyxpQkFBSSxNQUFNLENBQUM7QUFDckMsU0FBTyxFQUFFLGlCQUFJLE9BQU8sRUFBRSxXQUFRLENBQUMsSUFBSSxDQUFDO0NBQ3JDLENBQUMsV0FBUSxFQUFFLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUF3Q2IsTUFBTSxDQUFDLE9BQU87QUFDRCxXQURVLE1BQU0sQ0FDZixTQUFTLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUU7MEJBRG5CLE1BQU07O0FBRXpCLFFBQUksQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO0FBQzNCLFFBQUksQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDO0FBQ2YsUUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7O0FBRWpCLFFBQUksQ0FBQyxFQUFFLEdBQUcsSUFBSSxDQUFDLEVBQUUsSUFBSSxHQUFHLENBQUMsSUFBSSxDQUFDO0FBQzlCLFFBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDLFNBQVMsSUFBSSxFQUFFLENBQUM7QUFDM0MsUUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsT0FBTyxJQUFJLEVBQUUsQ0FBQztBQUN0QyxRQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxPQUFPLElBQUksR0FBRyxDQUFDLE9BQU8sQ0FBQztBQUMzQyxRQUFJLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQyxPQUFPLElBQUksb0JB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QUc7QUFDUCxhQUFPLElBQUksQ0FBQyxHQUFHLENBQUM7S0FDakI7OztXQUVPLG9CQUFHO0FBQ1QsYUFBVSxJQUFJLENBQUMsRUFBRSxTQUFJLElBQUksQ0FBQyxPQUFPLENBQUc7S0FDckM7OztXQWxGWSxnQkFBQyxTQUFTLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRTtBQUNsQztrQkFBYSxZQUFZOztBQUNaLGlCQURBLFlBQVksQ0FDWCxJQUFJLEVBQUU7Z0NBRFAsWUFBWTs7QUFFckIscUNBRlMsWUFBWSw2Q0FFZixTQUFTLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRSxJQUFJLElBQUksRUFBRSxFQUFFO1NBQ3pDOztlQUhVLFlBQVk7U0FBUyxNQUFNLEVBSXRDO0tBQ0g7OztTQXRDb0IsTUFBTTtJQW1INUIsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9zZXJ2ZXIvcGx1Z2lucy9wbHVnaW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHRvUGF0aCBmcm9tICdsb2Rhc2gvaW50ZXJuYWwvdG9QYXRoJztcbmltcG9ydCBKb2kgZnJvbSAnam9pJztcbmltcG9ydCBCbHVlYmlyZCwgeyBhdHRlbXB0LCBmcm9tTm9kZSB9IGZyb20gJ2JsdWViaXJkJztcbmltcG9ydCB7IGJhc2VuYW1lLCByZXNvbHZlIH0gZnJvbSAncGF0aCc7XG5pbXBvcnQgeyBpbmhlcml0cyB9IGZyb20gJ3V0aWwnO1xuXG5jb25zdCBleHRlbmRJbml0Rm5zID0gU3ltYm9sKCdleHRlbmQgcGx1Z2luIGluaXRpYWxpemF0aW9uJyk7XG5cbmNvbnN0IGRlZmF1bHRDb25maWdTY2hlbWEgPSBKb2kub2JqZWN0KHtcbiAgZW5hYmxlZDogSm9pLmJvb2xlYW4oKS5kZWZhdWx0KHRydWUpXG59KS5kZWZhdWx0KCk7XG5cbi8qKlxuICogVGhlIHNlcnZlciBwbHVnaW4gY2xhc3MsIHVzZWQgdG8gZXh0ZW5kIHRoZSBzZXJ2ZXJcbiAqIGFuZCBhZGQgY3VzdG9tIGJlaGF2aW9yLiBBIFwic2NvcGVkXCIgcGx1Z2luIGNsYXNzIGlzXG4gKiBjcmVhdGVkIGJ5IHRoZSBQbHVnaW5BcGkgY2xhc3MgYW5kIHByb3ZpZGVkIHRvIHBsdWdpblxuICogcHJvdmlkZXJzIHRoYXQgYXV0b21hdGljYWxseSBiaW5kcyBhbGwgYnV0IHRoZSBgb3B0c2BcbiAqIGFyZ3VtZW50cy5cbiAqXG4gKiBAY2xhc3MgUGx1Z2luXG4gKiBAcGFyYW0ge0tiblNlcnZlcn0ga2JuU2VydmVyIC0gdGhlIEtiblNlcnZlciB0aGlzIHBsdWdpblxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWxvbmdzIHRvLlxuICogQHBhcmFtIHtTdHJpbmd9IHBhdGggLSB0aGUgcGF0aCBmcm9tIHdoaWNoIHRoZSBwbHVnaW4gaGFpbHNcbiAqIEBwYXJhbSB7T2JqZWN0fSBwa2cgLSB0aGUgdmFsdWUgb2YgcGFja2FnZS5qc29uIGZvciB0aGUgcGx1Z2luXG4gKiBAcGFyYW0ge09iamVjdHN9IG9wdHMgLSB0aGUgb3B0aW9ucyBmb3IgdGhpcyBwbHVnaW5cbiAqIEBwYXJhbSB7U3RyaW5nfSBbb3B0cy5pZD1wa2cubmFtZV0gLSB0aGUgaWQgZm9yIHRoaXMgcGx1Z2luLlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRzLnVpRXhwb3J0c10gLSBhIG1hcHBpbmcgb2YgVWlFeHBvcnQgdHlwZXNcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIFVJIG1vZHVsZXMgb3IgbWV0YWRhdGEgYWJvdXRcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZSBVSSBtb2R1bGVcbiAqIEBwYXJhbSB7QXJyYXl9IFtvcHRzLnJlcXVpcmVdIC0gdGhlIG90aGVyIHBsdWdpbnMgdGhhdCB0aGlzIHBsdWdpblxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZXMuIFRoZXNlIHBsdWdpbnMgbXVzdCBleGlzdCBhbmRcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlIGVuYWJsZWQgZm9yIHRoaXMgcGx1Z2luIHRvIGZ1bmN0aW9uLlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGhlIHJlcXVpcmUnZCBwbHVnaW5zIHdpbGwgYWxzbyBiZVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbGl6ZWQgZmlyc3QsIGluIG9yZGVyIHRvIG1ha2Ugc3VyZVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdCBkZXBlbmRlbmNpZXMgcHJvdmlkZWQgYnkgdGhlc2UgcGx1Z2luc1xuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJlIGF2YWlsYWJsZVxuICogQHBhcmFtIHtTdHJpbmd9IFtvcHRzLnZlcnNpb249cGtnLnZlcnNpb25dIC0gdGhlIHZlcnNpb24gb2YgdGhpcyBwbHVnaW5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRzLmluaXRdIC0gQSBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgY2FsbGVkIHRvIGluaXRpYWxpemVcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMgcGx1Z2luIGF0IHRoZSBhcHByb3ByaWF0ZSB0aW1lLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdHMuY29uZmlnUHJlZml4PXRoaXMuaWRdIC0gVGhlIHByZWZpeCB0byB1c2UgZm9yIGNvbmZpZ3VyYXRpb25cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlcyBpbiB0aGUgbWFpbiBjb25maWd1cmF0aW9uIHNlcnZpY2VcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRzLmNvbmZpZ10gLSBBIGZ1bmN0aW9uIHRoYXQgcHJvZHVjZXMgYSBjb25maWd1cmF0aW9uXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjaGVtYSB1c2luZyBKb2ksIHdoaWNoIGlzIHBhc3NlZCBhcyBpdHNcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3QgYXJndW1lbnQuXG4gKiBAcGFyYW0ge1N0cmluZ3xGYWxzZX0gW29wdHMucHVibGljRGlyPXBhdGggKyAnL3B1YmxpYyddXG4gKiAgICAtIHRoZSBwdWJsaWMgZGlyZWN0b3J5IGZvciB0aGlzIHBsdWdpbi4gVGhlIGZpbmFsIGRpcmVjdG9yeSBtdXN0XG4gKiAgICBoYXZlIHRoZSBuYW1lIFwicHVibGljXCIsIHRob3VnaCBpdCBjYW4gYmUgbG9jYXRlZCBzb21ld2hlcmUgYmVzaWRlc1xuICogICAgdGhlIHJvb3Qgb2YgdGhlIHBsdWdpbi4gU2V0IHRoaXMgdG8gZmFsc2UgdG8gZGlzYWJsZSBleHBvc3VyZSBvZiBhXG4gKiAgICBwdWJsaWMgZGlyZWN0b3J5XG4gKi9cbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgUGx1Z2luIHtcbiAgY29uc3RydWN0b3Ioa2JuU2VydmVyLCBwYXRoLCBwa2csIG9wdHMpIHtcbiAgICB0aGlzLmtiblNlcnZlciA9IGtiblNlcnZlcjtcbiAgICB0aGlzLnBrZyA9IHBrZztcbiAgICB0aGlzLnBhdGggPSBwYXRoO1xuXG4gICAgdGhpcy5pZCA9IG9wdHMuaWQgfHwgcGtnLm5hbWU7XG4gICAgdGhpcy51aUV4cG9ydHNTcGVjcyA9IG9wdHMudWlFeHBvcnRzIHx8IHt9O1xuICAgIHRoaXMucmVxdWlyZWRJZHMgPSBvcHRzLnJlcXVpcmUgfHwgW107XG4gICAgdGhpcy52ZXJzaW9uID0gb3B0cy52ZXJzaW9uIHx8IHBrZy52ZXJzaW9uO1xuICAgIHRoaXMuZXh0ZXJuYWxQcmVJbml0ID0gb3B0cy5wcmVJbml0IHx8IF8ubm9vcDtcbiAgICB0aGlzLmV4dGVybmFsSW5pdCA9IG9wdHMuaW5pdCB8fCBfLm5vb3A7XG4gICAgdGhpcy5jb25maWdQcmVmaXggPSBvcHRzLmNvbmZpZ1ByZWZpeCB8fCB0aGlzLmlkO1xuICAgIHRoaXMuZ2V0Q29uZmlnU2NoZW1hID0gb3B0cy5jb25maWcgfHwgXy5ub29wO1xuICAgIHRoaXMucHJlSW5pdCA9IF8ub25jZSh0aGlzLnByZUluaXQpO1xuICAgIHRoaXMuaW5pdCA9IF8ub25jZSh0aGlzLmluaXQpO1xuICAgIHRoaXNbZXh0ZW5kSW5pdEZuc10gPSBbXTtcblxuICAgIGlmIChvcHRzLnB1YmxpY0RpciA9PT0gZmFsc2UpIHtcbiAgICAgIHRoaXMucHVibGljRGlyID0gbnVsbDtcbiAgICB9XG4gICAgZWxzZSBpZiAoIW9wdHMucHVibGljRGlyKSB7XG4gICAgICB0aGlzLnB1YmxpY0RpciA9IHJlc29sdmUodGhpcy5wYXRoLCAncHVibGljJyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdGhpcy5wdWJsaWNEaXIgPSBvcHRzLnB1YmxpY0RpcjtcbiAgICAgIGlmIChiYXNlbmFtZSh0aGlzLnB1YmxpY0RpcikgIT09ICdwdWJsaWMnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgcHVibGljRGlyIGZvciBwbHVnaW4gJHt0aGlzLmlkfSBtdXN0IGVuZCB3aXRoIGEgXCJwdWJsaWNcIiBkaXJlY3RvcnkuYCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIHNjb3BlZChrYm5TZXJ2ZXIsIHBhdGgsIHBrZykge1xuICAgIHJldHVybiBjbGFzcyBTY29wZWRQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICAgICAgY29uc3RydWN0b3Iob3B0cykge1xuICAgICAgICBzdXBlcihrYm5TZXJ2ZXIsIHBhdGgsIHBrZywgb3B0cyB8fCB7fSk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIGFzeW5jIHJlYWRDb25maWcoKSB7XG4gICAgbGV0IHNjaGVtYSA9IGF3YWl0IHRoaXMuZ2V0Q29uZmlnU2NoZW1hKEpvaSk7XG4gICAgbGV0IHsgY29uZmlnIH0gPSB0aGlzLmtiblNlcnZlcjtcbiAgICBjb25maWcuZXh0ZW5kU2NoZW1hKHRoaXMuY29uZmlnUHJlZml4LCBzY2hlbWEgfHwgZGVmYXVsdENvbmZpZ1NjaGVtYSk7XG5cbiAgICBpZiAoY29uZmlnLmdldChbLi4udG9QYXRoKHRoaXMuY29uZmlnUHJlZml4KSwgJ2VuYWJsZWQnXSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25maWcucmVtb3ZlU2NoZW1hKHRoaXMuY29uZmlnUHJlZml4KTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBwcmVJbml0KCkge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLmV4dGVybmFsUHJlSW5pdCh0aGlzLmtiblNlcnZlci5zZXJ2ZXIpO1xuICB9XG5cbiAgYXN5bmMgaW5pdCgpIHtcbiAgICBsZXQgeyBpZCwgdmVyc2lvbiwga2JuU2VydmVyLCBjb25maWdQcmVmaXggfSA9IHRoaXM7XG4gICAgbGV0IHsgY29uZmlnIH0gPSBrYm5TZXJ2ZXI7XG5cbiAgICAvLyBzZXR1cCB0aGUgaGFwaSByZWdpc3RlciBmdW5jdGlvbiBhbmQgZ2V0IG9uIHdpdGggaXRcbiAgICBjb25zdCBhc3luY1JlZ2lzdGVyID0gYXN5bmMgKHNlcnZlciwgb3B0aW9ucykgPT4ge1xuICAgICAgdGhpcy5zZXJ2ZXIgPSBzZXJ2ZXI7XG5cbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXNbZXh0ZW5kSW5pdEZuc10ubWFwKGFzeW5jIGZuID0+IHtcbiAgICAgICAgYXdhaXQgZm4uY2FsbCh0aGlzLCBzZXJ2ZXIsIG9wdGlvbnMpO1xuICAgICAgfSkpO1xuXG4gICAgICBzZXJ2ZXIubG9nKFsncGx1Z2lucycsICdkZWJ1ZyddLCB7XG4gICAgICAgIHRtcGw6ICdJbml0aWFsaXppbmcgcGx1Z2luIDwlPSBwbHVnaW4udG9TdHJpbmcoKSAlPicsXG4gICAgICAgIHBsdWdpbjogdGhpc1xuICAgICAgfSk7XG5cbiAgICAgIGlmICh0aGlzLnB1YmxpY0Rpcikge1xuICAgICAgICBzZXJ2ZXIuZXhwb3NlU3RhdGljRGlyKGAvcGx1Z2lucy8ke2lkfS97cGF0aCp9YCwgdGhpcy5wdWJsaWNEaXIpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnN0YXR1cyA9IGtiblNlcnZlci5zdGF0dXMuY3JlYXRlRm9yUGx1Z2luKHRoaXMpO1xuICAgICAgc2VydmVyLmV4cG9zZSgnc3RhdHVzJywgdGhpcy5zdGF0dXMpO1xuXG4gICAgICByZXR1cm4gYXdhaXQgYXR0ZW1wdCh0aGlzLmV4dGVybmFsSW5pdCwgW3NlcnZlciwgb3B0aW9uc10sIHRoaXMpO1xuICAgIH07XG5cbiAgICBjb25zdCByZWdpc3RlciA9IChzZXJ2ZXIsIG9wdGlvbnMsIG5leHQpID0+IHtcbiAgICAgIEJsdWViaXJkLnJlc29sdmUoYXN5bmNSZWdpc3RlcihzZXJ2ZXIsIG9wdGlvbnMpKS5ub2RlaWZ5KG5leHQpO1xuICAgIH07XG5cbiAgICByZWdpc3Rlci5hdHRyaWJ1dGVzID0geyBuYW1lOiBpZCwgdmVyc2lvbjogdmVyc2lvbiB9O1xuXG4gICAgYXdhaXQgZnJvbU5vZGUoY2IgPT4ge1xuICAgICAga2JuU2VydmVyLnNlcnZlci5yZWdpc3Rlcih7XG4gICAgICAgIHJlZ2lzdGVyOiByZWdpc3RlcixcbiAgICAgICAgb3B0aW9uczogY29uZmlnLmhhcyhjb25maWdQcmVmaXgpID8gY29uZmlnLmdldChjb25maWdQcmVmaXgpIDogbnVsbFxuICAgICAgfSwgY2IpO1xuICAgIH0pO1xuXG4gICAgLy8gT25seSBjaGFuZ2UgdGhlIHBsdWdpbiBzdGF0dXMgdG8gZ3JlZW4gaWYgdGhlXG4gICAgLy8gaW50aWFsIHN0YXR1cyBoYXMgbm90IGJlZW4gY2hhbmdlZFxuICAgIGlmICh0aGlzLnN0YXR1cy5zdGF0ZSA9PT0gJ3VuaW5pdGlhbGl6ZWQnKSB7XG4gICAgICB0aGlzLnN0YXR1cy5ncmVlbignUmVhZHknKTtcbiAgICB9XG4gIH1cblxuICBleHRlbmRJbml0KGZuKSB7XG4gICAgdGhpc1tleHRlbmRJbml0Rm5zXS5wdXNoKGZuKTtcbiAgfVxuXG4gIHRvSlNPTigpIHtcbiAgICByZXR1cm4gdGhpcy5wa2c7XG4gIH1cblxuICB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gYCR7dGhpcy5pZH1AJHt0aGlzLnZlcnNpb259YDtcbiAgfVxufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/plugins/plugin.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/src/server/plugins/plugin.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport toPath from 'lodash/internal/toPath';\nimport Joi from 'joi';\nimport Bluebird, { attempt, fromNode } from 'bluebird';\nimport { basename, resolve } from 'path';\nimport { inherits } from 'util';\n\nconst extendInitFns = Symbol('extend plugin initialization');\n\nconst defaultConfigSchema = Joi.object({\n  enabled: Joi.boolean().default(true)\n}).default();\n\n/**\n * The server plugin class, used to extend the server\n * and add custom behavior. A \"scoped\" plugin class is\n * created by the PluginApi class and provided to plugin\n * providers that automatically binds all but the `opts`\n * arguments.\n *\n * @class Plugin\n * @param {KbnServer} kbnServer - the KbnServer this plugin\n *                              belongs to.\n * @param {String} path - the path from which the plugin hails\n * @param {Object} pkg - the value of package.json for the plugin\n * @param {Objects} opts - the options for this plugin\n * @param {String} [opts.id=pkg.name] - the id for this plugin.\n * @param {Object} [opts.uiExports] - a mapping of UiExport types\n *                                  to UI modules or metadata about\n *                                  the UI module\n * @param {Array} [opts.require] - the other plugins that this plugin\n *                               requires. These plugins must exist and\n *                               be enabled for this plugin to function.\n *                               The require'd plugins will also be\n *                               initialized first, in order to make sure\n *                               that dependencies provided by these plugins\n *                               are available\n * @param {String} [opts.version=pkg.version] - the version of this plugin\n * @param {Function} [opts.init] - A function that will be called to initialize\n *                               this plugin at the appropriate time.\n * @param {Function} [opts.configPrefix=this.id] - The prefix to use for configuration\n *                               values in the main configuration service\n * @param {Function} [opts.config] - A function that produces a configuration\n *                                 schema using Joi, which is passed as its\n *                                 first argument.\n * @param {String|False} [opts.publicDir=path + '/public']\n *    - the public directory for this plugin. The final directory must\n *    have the name \"public\", though it can be located somewhere besides\n *    the root of the plugin. Set this to false to disable exposure of a\n *    public directory\n */\nmodule.exports = class Plugin {\n  constructor(kbnServer, path, pkg, opts) {\n    this.kbnServer = kbnServer;\n    this.pkg = pkg;\n    this.path = path;\n\n    this.id = opts.id || pkg.name;\n    this.uiExportsSpecs = opts.uiExports || {};\n    this.requiredIds = opts.require || [];\n    this.version = opts.version || pkg.version;\n    this.externalPreInit = opts.preInit || _.noop;\n    this.externalInit = opts.init || _.noop;\n    this.configPrefix = opts.configPrefix || this.id;\n    this.getConfigSchema = opts.config || _.noop;\n    this.preInit = _.once(this.preInit);\n    this.init = _.once(this.init);\n    this[extendInitFns] = [];\n\n    if (opts.publicDir === false) {\n      this.publicDir = null;\n    }\n    else if (!opts.publicDir) {\n      this.publicDir = resolve(this.path, 'public');\n    }\n    else {\n      this.publicDir = opts.publicDir;\n      if (basename(this.publicDir) !== 'public') {\n        throw new Error(`publicDir for plugin ${this.id} must end with a \"public\" directory.`);\n      }\n    }\n  }\n\n  static scoped(kbnServer, path, pkg) {\n    return class ScopedPlugin extends Plugin {\n      constructor(opts) {\n        super(kbnServer, path, pkg, opts || {});\n      }\n    };\n  }\n\n  async readConfig() {\n    let schema = await this.getConfigSchema(Joi);\n    let { config } = this.kbnServer;\n    config.extendSchema(this.configPrefix, schema || defaultConfigSchema);\n\n    if (config.get([...toPath(this.configPrefix), 'enabled'])) {\n      return true;\n    } else {\n      config.removeSchema(this.configPrefix);\n      return false;\n    }\n  }\n\n  async preInit() {\n    return await this.externalPreInit(this.kbnServer.server);\n  }\n\n  async init() {\n    let { id, version, kbnServer, configPrefix } = this;\n    let { config } = kbnServer;\n\n    // setup the hapi register function and get on with it\n    const asyncRegister = async (server, options) => {\n      this.server = server;\n\n      await Promise.all(this[extendInitFns].map(async fn => {\n        await fn.call(this, server, options);\n      }));\n\n      server.log(['plugins', 'debug'], {\n        tmpl: 'Initializing plugin <%= plugin.toString() %>',\n        plugin: this\n      });\n\n      if (this.publicDir) {\n        server.exposeStaticDir(`/plugins/${id}/{path*}`, this.publicDir);\n      }\n\n      this.status = kbnServer.status.createForPlugin(this);\n      server.expose('status', this.status);\n\n      return await attempt(this.externalInit, [server, options], this);\n    };\n\n    const register = (server, options, next) => {\n      Bluebird.resolve(asyncRegister(server, options)).nodeify(next);\n    };\n\n    register.attributes = { name: id, version: version };\n\n    await fromNode(cb => {\n      kbnServer.server.register({\n        register: register,\n        options: config.has(configPrefix) ? config.get(configPrefix) : null\n      }, cb);\n    });\n\n    // Only change the plugin status to green if the\n    // intial status has not been changed\n    if (this.status.state === 'uninitialized') {\n      this.status.green('Ready');\n    }\n  }\n\n  extendInit(fn) {\n    this[extendInitFns].push(fn);\n  }\n\n  toJSON() {\n    return this.pkg;\n  }\n\n  toString() {\n    return `${this.id}@${this.version}`;\n  }\n};\n"
      ]
    },
    "mtime": 1467036622849
  },
  "{\"filename\":\"/home/vio/v3metrics/src/utils/collection.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "to-consumable-array"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i]; return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar set = Symbol('internal set');\n\nmodule.exports = (function () {\n  function Collection() {\n    _classCallCheck(this, Collection);\n\n    // Set's have a length of 0, mimic that\n    this[set] = new Set(arguments[0] || []);\n  }\n\n  /******\n   ** Collection API\n   ******/\n\n  _createClass(Collection, [{\n    key: 'toArray',\n    value: function toArray() {\n      return [].concat(_toConsumableArray(this.values()));\n    }\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      return this.toArray();\n    }\n\n    /******\n     ** ES Set Api\n     ******/\n\n  }, {\n    key: 'add',\n    value: function add(value) {\n      return this[set].add(value);\n    }\n  }, {\n    key: 'clear',\n    value: function clear() {\n      return this[set].clear();\n    }\n  }, {\n    key: 'delete',\n    value: function _delete(value) {\n      return this[set]['delete'](value);\n    }\n  }, {\n    key: 'entries',\n    value: function entries() {\n      return this[set].entries();\n    }\n  }, {\n    key: 'forEach',\n    value: function forEach(callbackFn, thisArg) {\n      return this[set].forEach(callbackFn, thisArg);\n    }\n  }, {\n    key: 'has',\n    value: function has(value) {\n      return this[set].has(value);\n    }\n  }, {\n    key: 'keys',\n    value: function keys() {\n      return this[set].keys();\n    }\n  }, {\n    key: 'values',\n    value: function values() {\n      return this[set].values();\n    }\n  }, {\n    key: Symbol.iterator,\n    value: function value() {\n      return this[set][Symbol.iterator]();\n    }\n  }, {\n    key: 'size',\n    get: function get() {\n      return this[set].size;\n    }\n  }], [{\n    key: Symbol.species,\n    get: function get() {\n      return Collection;\n    }\n  }]);\n\n  return Collection;\n})();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3V0aWxzL2NvbGxlY3Rpb24uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFDQSxJQUFJLEdBQUcsR0FBRyxNQUFNLENBQUMsY0FBYyxDQUFDLENBQUM7O0FBRWpDLE1BQU0sQ0FBQyxPQUFPO0FBQ0QsV0FEVSxVQUFVLEdBQ2pCOzBCQURPLFVBQVU7OztBQUU3QixRQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDO0dBQ3pDOzs7Ozs7ZUFIb0IsVUFBVTs7V0FTeEIsbUJBQUc7QUFDUiwwQ0FBVyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUU7S0FDM0I7OztXQUVLLGtCQUFHO0FBQ1AsYUFBTyxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7S0FDdkI7Ozs7Ozs7O1dBY0UsYUFBQyxLQUFLLEVBQUU7QUFDVCxhQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7S0FDN0I7OztXQUVJLGlCQUFHO0FBQ04sYUFBTyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUM7S0FDMUI7OztXQUVLLGlCQUFDLEtBQUssRUFBRTtBQUNaLGFBQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxVQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7S0FDaEM7OztXQUVNLG1CQUFHO0FBQ1IsYUFBTyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUM7S0FDNUI7OztXQUVNLGlCQUFDLFVBQVUsRUFBRSxPQUFPLEVBQUU7QUFDM0IsYUFBTyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLFVBQVUsRUFBRSxPQUFPLENBQUMsQ0FBQztLQUMvQzs7O1dBRUUsYUFBQyxLQUFLLEVBQUU7QUFDVCxhQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7S0FDN0I7OztXQUVHLGdCQUFHO0FBQ0wsYUFBTyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7S0FDekI7OztXQUVLLGtCQUFHO0FBQ1AsYUFBTyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUM7S0FDM0I7O1NBRUEsTUFBTSxDQUFDLFFBQVE7V0FBQyxpQkFBRztBQUNsQixhQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQztLQUNyQzs7O1NBdENPLGVBQUc7QUFDVCxhQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUM7S0FDdkI7O1NBTlcsTUFBTSxDQUFDLE9BQU87U0FBQyxlQUFHO0FBQzVCLGFBQU8sVUFBVSxDQUFDO0tBQ25COzs7U0F2Qm9CLFVBQVU7SUFnRWhDLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvdXRpbHMvY29sbGVjdGlvbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxubGV0IHNldCA9IFN5bWJvbCgnaW50ZXJuYWwgc2V0Jyk7XG5cbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgQ29sbGVjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKCkgeyAvLyBTZXQncyBoYXZlIGEgbGVuZ3RoIG9mIDAsIG1pbWljIHRoYXRcbiAgICB0aGlzW3NldF0gPSBuZXcgU2V0KGFyZ3VtZW50c1swXSB8fCBbXSk7XG4gIH1cblxuICAvKioqKioqXG4gICAqKiBDb2xsZWN0aW9uIEFQSVxuICAgKioqKioqL1xuXG4gIHRvQXJyYXkoKSB7XG4gICAgcmV0dXJuIFsuLi50aGlzLnZhbHVlcygpXTtcbiAgfVxuXG4gIHRvSlNPTigpIHtcbiAgICByZXR1cm4gdGhpcy50b0FycmF5KCk7XG4gIH1cblxuICAvKioqKioqXG4gICAqKiBFUyBTZXQgQXBpXG4gICAqKioqKiovXG5cbiAgc3RhdGljIGdldCBbU3ltYm9sLnNwZWNpZXNdKCkge1xuICAgIHJldHVybiBDb2xsZWN0aW9uO1xuICB9XG5cbiAgZ2V0IHNpemUoKSB7XG4gICAgcmV0dXJuIHRoaXNbc2V0XS5zaXplO1xuICB9XG5cbiAgYWRkKHZhbHVlKSB7XG4gICAgcmV0dXJuIHRoaXNbc2V0XS5hZGQodmFsdWUpO1xuICB9XG5cbiAgY2xlYXIoKSB7XG4gICAgcmV0dXJuIHRoaXNbc2V0XS5jbGVhcigpO1xuICB9XG5cbiAgZGVsZXRlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHRoaXNbc2V0XS5kZWxldGUodmFsdWUpO1xuICB9XG5cbiAgZW50cmllcygpIHtcbiAgICByZXR1cm4gdGhpc1tzZXRdLmVudHJpZXMoKTtcbiAgfVxuXG4gIGZvckVhY2goY2FsbGJhY2tGbiwgdGhpc0FyZykge1xuICAgIHJldHVybiB0aGlzW3NldF0uZm9yRWFjaChjYWxsYmFja0ZuLCB0aGlzQXJnKTtcbiAgfVxuXG4gIGhhcyh2YWx1ZSkge1xuICAgIHJldHVybiB0aGlzW3NldF0uaGFzKHZhbHVlKTtcbiAgfVxuXG4gIGtleXMoKSB7XG4gICAgcmV0dXJuIHRoaXNbc2V0XS5rZXlzKCk7XG4gIH1cblxuICB2YWx1ZXMoKSB7XG4gICAgcmV0dXJuIHRoaXNbc2V0XS52YWx1ZXMoKTtcbiAgfVxuXG4gIFtTeW1ib2wuaXRlcmF0b3JdKCkge1xuICAgIHJldHVybiB0aGlzW3NldF1bU3ltYm9sLml0ZXJhdG9yXSgpO1xuICB9XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/utils/collection.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;AACA,IAAI,GAAG,GAAG,MAAM,CAAC,cAAc,CAAC,CAAC;;AAEjC,MAAM,CAAC,OAAO;AACD,WADU,UAAU,GACjB;0BADO,UAAU;;;AAE7B,QAAI,CAAC,GAAG,CAAC,GAAG,IAAI,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC;GACzC;;;;;;eAHoB,UAAU;;WASxB,mBAAG;AACR,0CAAW,IAAI,CAAC,MAAM,EAAE,GAAE;KAC3B;;;WAEK,kBAAG;AACP,aAAO,IAAI,CAAC,OAAO,EAAE,CAAC;KACvB;;;;;;;;WAcE,aAAC,KAAK,EAAE;AACT,aAAO,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;KAC7B;;;WAEI,iBAAG;AACN,aAAO,IAAI,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,CAAC;KAC1B;;;WAEK,iBAAC,KAAK,EAAE;AACZ,aAAO,IAAI,CAAC,GAAG,CAAC,UAAO,CAAC,KAAK,CAAC,CAAC;KAChC;;;WAEM,mBAAG;AACR,aAAO,IAAI,CAAC,GAAG,CAAC,CAAC,OAAO,EAAE,CAAC;KAC5B;;;WAEM,iBAAC,UAAU,EAAE,OAAO,EAAE;AAC3B,aAAO,IAAI,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC;KAC/C;;;WAEE,aAAC,KAAK,EAAE;AACT,aAAO,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;KAC7B;;;WAEG,gBAAG;AACL,aAAO,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC;KACzB;;;WAEK,kBAAG;AACP,aAAO,IAAI,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC;KAC3B;;SAEA,MAAM,CAAC,QAAQ;WAAC,iBAAG;AAClB,aAAO,IAAI,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,CAAC;KACrC;;;SAtCO,eAAG;AACT,aAAO,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;KACvB;;SANW,MAAM,CAAC,OAAO;SAAC,eAAG;AAC5B,aAAO,UAAU,CAAC;KACnB;;;SAvBoB,UAAU;IAgEhC,CAAC",
      "file": "/home/vio/v3metrics/src/utils/collection.js",
      "sourcesContent": [
        "\nlet set = Symbol('internal set');\n\nmodule.exports = class Collection {\n  constructor() { // Set's have a length of 0, mimic that\n    this[set] = new Set(arguments[0] || []);\n  }\n\n  /******\n   ** Collection API\n   ******/\n\n  toArray() {\n    return [...this.values()];\n  }\n\n  toJSON() {\n    return this.toArray();\n  }\n\n  /******\n   ** ES Set Api\n   ******/\n\n  static get [Symbol.species]() {\n    return Collection;\n  }\n\n  get size() {\n    return this[set].size;\n  }\n\n  add(value) {\n    return this[set].add(value);\n  }\n\n  clear() {\n    return this[set].clear();\n  }\n\n  delete(value) {\n    return this[set].delete(value);\n  }\n\n  entries() {\n    return this[set].entries();\n  }\n\n  forEach(callbackFn, thisArg) {\n    return this[set].forEach(callbackFn, thisArg);\n  }\n\n  has(value) {\n    return this[set].has(value);\n  }\n\n  keys() {\n    return this[set].keys();\n  }\n\n  values() {\n    return this[set].values();\n  }\n\n  [Symbol.iterator]() {\n    return this[set][Symbol.iterator]();\n  }\n};\n"
      ]
    },
    "mtime": 1467036622893
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/config/complete.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "sliced-to-array"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }; })();\n\nexports['default'] = function (kbnServer, server, config) {\n\n  server.decorate('server', 'config', function () {\n    return kbnServer.config;\n  });\n\n  var tmpl = 'Settings for \"<%= key %>\" were not applied, check for spelling errors and ensure the plugin is loaded.';\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = config.getPendingSets()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var _step$value = _slicedToArray(_step.value, 2);\n\n      var key = _step$value[0];\n      var val = _step$value[1];\n\n      server.log(['warning', 'config'], { key: key, val: val, tmpl: tmpl });\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator['return']) {\n        _iterator['return']();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n};\n\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9jb25maWcvY29tcGxldGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7cUJBQWUsVUFBVSxTQUFTLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRTs7QUFFbEQsUUFBTSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEVBQUUsUUFBUSxFQUFFLFlBQVk7QUFDOUMsV0FBTyxTQUFTLENBQUMsTUFBTSxDQUFDO0dBQ3pCLENBQUMsQ0FBQzs7QUFFSCxNQUFJLElBQUksR0FBRyx3R0FBd0csQ0FBQzs7Ozs7O0FBQ3BILHlCQUF1QixNQUFNLENBQUMsY0FBYyxFQUFFLDhIQUFFOzs7VUFBdEMsR0FBRztVQUFFLEdBQUc7O0FBQ2hCLFlBQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxTQUFTLEVBQUUsUUFBUSxDQUFDLEVBQUUsRUFBRSxHQUFHLEVBQUgsR0FBRyxFQUFFLEdBQUcsRUFBSCxHQUFHLEVBQUUsSUFBSSxFQUFKLElBQUksRUFBRSxDQUFDLENBQUM7S0FDdkQ7Ozs7Ozs7Ozs7Ozs7OztDQUNGOztBQUFBLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvc2VydmVyL2NvbmZpZy9jb21wbGV0ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChrYm5TZXJ2ZXIsIHNlcnZlciwgY29uZmlnKSB7XG5cbiAgc2VydmVyLmRlY29yYXRlKCdzZXJ2ZXInLCAnY29uZmlnJywgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBrYm5TZXJ2ZXIuY29uZmlnO1xuICB9KTtcblxuICBsZXQgdG1wbCA9ICdTZXR0aW5ncyBmb3IgXCI8JT0ga2V5ICU+XCIgd2VyZSBub3QgYXBwbGllZCwgY2hlY2sgZm9yIHNwZWxsaW5nIGVycm9ycyBhbmQgZW5zdXJlIHRoZSBwbHVnaW4gaXMgbG9hZGVkLic7XG4gIGZvciAobGV0IFtrZXksIHZhbF0gb2YgY29uZmlnLmdldFBlbmRpbmdTZXRzKCkpIHtcbiAgICBzZXJ2ZXIubG9nKFsnd2FybmluZycsICdjb25maWcnXSwgeyBrZXksIHZhbCwgdG1wbCB9KTtcbiAgfVxufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/config/complete.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;qBAAe,UAAU,SAAS,EAAE,MAAM,EAAE,MAAM,EAAE;;AAElD,QAAM,CAAC,QAAQ,CAAC,QAAQ,EAAE,QAAQ,EAAE,YAAY;AAC9C,WAAO,SAAS,CAAC,MAAM,CAAC;GACzB,CAAC,CAAC;;AAEH,MAAI,IAAI,GAAG,wGAAwG,CAAC;;;;;;AACpH,yBAAuB,MAAM,CAAC,cAAc,EAAE,8HAAE;;;UAAtC,GAAG;UAAE,GAAG;;AAChB,YAAM,CAAC,GAAG,CAAC,CAAC,SAAS,EAAE,QAAQ,CAAC,EAAE,EAAE,GAAG,EAAH,GAAG,EAAE,GAAG,EAAH,GAAG,EAAE,IAAI,EAAJ,IAAI,EAAE,CAAC,CAAC;KACvD;;;;;;;;;;;;;;;CACF;;AAAA,CAAC",
      "file": "/home/vio/v3metrics/src/server/config/complete.js",
      "sourcesContent": [
        "export default function (kbnServer, server, config) {\n\n  server.decorate('server', 'config', function () {\n    return kbnServer.config;\n  });\n\n  let tmpl = 'Settings for \"<%= key %>\" were not applied, check for spelling errors and ensure the plugin is loaded.';\n  for (let [key, val] of config.getPendingSets()) {\n    server.log(['warning', 'config'], { key, val, tmpl });\n  }\n};\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/ui/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "url",
            "imported": [
              "format"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "format",
                "local": "formatUrl"
              }
            ]
          },
          {
            "source": "fs",
            "imported": [
              "readFileSync"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "readFileSync",
                "local": "readFile"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "defaults"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "defaults",
                "local": "defaults"
              }
            ]
          },
          {
            "source": "boom",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Boom"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "resolve"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "resolve",
                "local": "resolve"
              }
            ]
          },
          {
            "source": "../utils/from_root",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "fromRoot"
              }
            ]
          },
          {
            "source": "./ui_exports",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "UiExports"
              }
            ]
          },
          {
            "source": "./ui_bundle",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "UiBundle"
              }
            ]
          },
          {
            "source": "./ui_bundle_collection",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "UiBundleCollection"
              }
            ]
          },
          {
            "source": "./ui_bundler_env",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "UiBundlerEnv"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "async-to-generator",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nvar _url = require('url');\n\nvar _fs = require('fs');\n\nvar _lodash = require('lodash');\n\nvar _boom = require('boom');\n\nvar _boom2 = _interopRequireDefault(_boom);\n\nvar _path = require('path');\n\nvar _utilsFrom_root = require('../utils/from_root');\n\nvar _utilsFrom_root2 = _interopRequireDefault(_utilsFrom_root);\n\nvar _ui_exports = require('./ui_exports');\n\nvar _ui_exports2 = _interopRequireDefault(_ui_exports);\n\nvar _ui_bundle = require('./ui_bundle');\n\nvar _ui_bundle2 = _interopRequireDefault(_ui_bundle);\n\nvar _ui_bundle_collection = require('./ui_bundle_collection');\n\nvar _ui_bundle_collection2 = _interopRequireDefault(_ui_bundle_collection);\n\nvar _ui_bundler_env = require('./ui_bundler_env');\n\nvar _ui_bundler_env2 = _interopRequireDefault(_ui_bundler_env);\n\nexports['default'] = _asyncToGenerator(function* (kbnServer, server, config) {\n\n  var loadingGif = (0, _fs.readFileSync)((0, _utilsFrom_root2['default'])('src/ui/public/loading.gif'), { encoding: 'base64' });\n\n  var uiExports = kbnServer.uiExports = new _ui_exports2['default']({\n    urlBasePath: config.get('server.basePath')\n  });\n\n  var bundlerEnv = new _ui_bundler_env2['default'](config.get('optimize.bundleDir'));\n  bundlerEnv.addContext('env', config.get('env.name'));\n  bundlerEnv.addContext('urlBasePath', config.get('server.basePath'));\n  bundlerEnv.addContext('sourceMaps', config.get('optimize.sourceMaps'));\n  bundlerEnv.addContext('kbnVersion', config.get('pkg.version'));\n  bundlerEnv.addContext('buildNum', config.get('pkg.buildNum'));\n  uiExports.addConsumer(bundlerEnv);\n\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = kbnServer.plugins[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var plugin = _step.value;\n\n      uiExports.consumePlugin(plugin);\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator['return']) {\n        _iterator['return']();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  var bundles = kbnServer.bundles = new _ui_bundle_collection2['default'](bundlerEnv, config.get('optimize.bundleFilter'));\n\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = uiExports.getAllApps()[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var app = _step2.value;\n\n      bundles.addApp(app);\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2['return']) {\n        _iterator2['return']();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n\n  var _iteratorNormalCompletion3 = true;\n  var _didIteratorError3 = false;\n  var _iteratorError3 = undefined;\n\n  try {\n    for (var _iterator3 = uiExports.getBundleProviders()[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n      var gen = _step3.value;\n\n      var bundle = yield gen(_ui_bundle2['default'], bundlerEnv, uiExports.getAllApps(), kbnServer.plugins);\n      if (bundle) bundles.add(bundle);\n    }\n\n    // render all views from the ui/views directory\n  } catch (err) {\n    _didIteratorError3 = true;\n    _iteratorError3 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion3 && _iterator3['return']) {\n        _iterator3['return']();\n      }\n    } finally {\n      if (_didIteratorError3) {\n        throw _iteratorError3;\n      }\n    }\n  }\n\n  server.setupViews((0, _path.resolve)(__dirname, 'views'));\n  server.exposeStaticFile('/loading.gif', (0, _path.resolve)(__dirname, 'public/loading.gif'));\n\n  server.route({\n    path: '/app/{id}',\n    method: 'GET',\n    handler: function handler(req, reply) {\n      var id = req.params.id;\n      var app = uiExports.apps.byId[id];\n      if (!app) return reply(_boom2['default'].notFound('Unknown app ' + id));\n\n      if (kbnServer.status.isGreen()) {\n        return reply.renderApp(app);\n      } else {\n        return reply.renderStatusPage();\n      }\n    }\n  });\n\n  server.decorate('reply', 'renderApp', _asyncToGenerator(function* (app) {\n    var isElasticsearchPluginRed = server.plugins.elasticsearch.status.state === 'red';\n    var uiSettings = server.uiSettings();\n    var payload = {\n      app: app,\n      nav: uiExports.navLinks.inOrder,\n      version: kbnServer.version,\n      buildNum: config.get('pkg.buildNum'),\n      buildSha: config.get('pkg.buildSha'),\n      basePath: config.get('server.basePath'),\n      serverName: config.get('server.name'),\n      uiSettings: {\n        defaults: yield uiSettings.getDefaults(),\n        user: isElasticsearchPluginRed ? {} : (yield uiSettings.getUserProvided())\n      },\n      vars: (0, _lodash.defaults)(app.getInjectedVars() || {}, uiExports.defaultInjectedVars)\n    };\n\n    return this.view(app.templateName, {\n      app: app,\n      loadingGif: loadingGif,\n      kibanaPayload: payload,\n      bundlePath: config.get('server.basePath') + '/bundles'\n    });\n  }));\n});\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3VpL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7bUJBQW9DLEtBQUs7O2tCQUNBLElBQUk7O3NCQUNwQixRQUFROztvQkFDaEIsTUFBTTs7OztvQkFDQyxNQUFNOzs4QkFDVCxvQkFBb0I7Ozs7MEJBQ25CLGNBQWM7Ozs7eUJBQ2YsYUFBYTs7OztvQ0FDSCx3QkFBd0I7Ozs7OEJBQzlCLGtCQUFrQjs7Ozt1Q0FFNUIsV0FBTyxTQUFTLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBSzs7QUFFbEQsTUFBTSxVQUFVLEdBQUcsc0JBQVMsaUNBQVMsMkJBQTJCLENBQUMsRUFBRSxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUMsQ0FBQyxDQUFDOztBQUUxRixNQUFNLFNBQVMsR0FBRyxTQUFTLENBQUMsU0FBUyxHQUFHLDRCQUFjO0FBQ3BELGVBQVcsRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLGlCQUFpQixDQUFDO0dBQzNDLENBQUMsQ0FBQzs7QUFFSCxNQUFNLFVBQVUsR0FBRyxnQ0FBaUIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLENBQUM7QUFDdEUsWUFBVSxDQUFDLFVBQVUsQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDO0FBQ3JELFlBQVUsQ0FBQyxVQUFVLENBQUMsYUFBYSxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxDQUFDO0FBQ3BFLFlBQVUsQ0FBQyxVQUFVLENBQUMsWUFBWSxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMscUJBQXFCLENBQUMsQ0FBQyxDQUFDO0FBQ3ZFLFlBQVUsQ0FBQyxVQUFVLENBQUMsWUFBWSxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQztBQUMvRCxZQUFVLENBQUMsVUFBVSxDQUFDLFVBQVUsRUFBRSxNQUFNLENB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RTtBQUN4QyxZQUFJLEVBQUUsd0JBQXdCLEdBQUcsRUFBRSxJQUFHLE1BQU0sVUFBVSxDQUFDLGVBQWUsRUFBRSxDQUFBO09BQ3pFO0FBQ0QsVUFBSSxFQUFFLHNCQUFTLEdBQUcsQ0FBQyxlQUFlLEVBQUUsSUFBSSxFQUFFLEVBQUUsU0FBUyxDQUFDLG1CQUFtQixDQUFDO0tBQzNFLENBQUM7O0FBRUYsV0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxZQUFZLEVBQUU7QUFDakMsU0FBRyxFQUFFLEdBQUc7QUFDUixnQkFBVSxFQUFFLFVBQVU7QUFDdEIsbUJBQWEsRUFBRSxPQUFPO0FBQ3RCLGdCQUFVLEVBQUssTUFBTSxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQyxhQUFVO0tBQ3ZELENBQUMsQ0FBQztHQUNKLEVBQUMsQ0FBQztDQUNKIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3VpL2luZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZm9ybWF0IGFzIGZvcm1hdFVybCB9IGZyb20gJ3VybCc7XG5pbXBvcnQgeyByZWFkRmlsZVN5bmMgYXMgcmVhZEZpbGUgfSBmcm9tICdmcyc7XG5pbXBvcnQgeyBkZWZhdWx0cyB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgQm9vbSBmcm9tICdib29tJztcbmltcG9ydCB7IHJlc29sdmUgfSBmcm9tICdwYXRoJztcbmltcG9ydCBmcm9tUm9vdCBmcm9tICcuLi91dGlscy9mcm9tX3Jvb3QnO1xuaW1wb3J0IFVpRXhwb3J0cyBmcm9tICcuL3VpX2V4cG9ydHMnO1xuaW1wb3J0IFVpQnVuZGxlIGZyb20gJy4vdWlfYnVuZGxlJztcbmltcG9ydCBVaUJ1bmRsZUNvbGxlY3Rpb24gZnJvbSAnLi91aV9idW5kbGVfY29sbGVjdGlvbic7XG5pbXBvcnQgVWlCdW5kbGVyRW52IGZyb20gJy4vdWlfYnVuZGxlcl9lbnYnO1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyAoa2JuU2VydmVyLCBzZXJ2ZXIsIGNvbmZpZykgPT4ge1xuXG4gIGNvbnN0IGxvYWRpbmdHaWYgPSByZWFkRmlsZShmcm9tUm9vdCgnc3JjL3VpL3B1YmxpYy9sb2FkaW5nLmdpZicpLCB7IGVuY29kaW5nOiAnYmFzZTY0J30pO1xuXG4gIGNvbnN0IHVpRXhwb3J0cyA9IGtiblNlcnZlci51aUV4cG9ydHMgPSBuZXcgVWlFeHBvcnRzKHtcbiAgICB1cmxCYXNlUGF0aDogY29uZmlnLmdldCgnc2VydmVyLmJhc2VQYXRoJylcbiAgfSk7XG5cbiAgY29uc3QgYnVuZGxlckVudiA9IG5ldyBVaUJ1bmRsZXJFbnYoY29uZmlnLmdldCgnb3B0aW1pemUuYnVuZGxlRGlyJykpO1xuICBidW5kbGVyRW52LmFkZENvbnRleHQoJ2VudicsIGNvbmZpZy5nZXQoJ2Vudi5uYW1lJykpO1xuICBidW5kbGVyRW52LmFkZENvbnRleHQoJ3VybEJhc2VQYXRoJywgY29uZmlnLmdldCgnc2VydmVyLmJhc2VQYXRoJykpO1xuICBidW5kbGVyRW52LmFkZENvbnRleHQoJ3NvdXJjZU1hcHMnLCBjb25maWcuZ2V0KCdvcHRpbWl6ZS5zb3VyY2VNYXBzJykpO1xuICBidW5kbGVyRW52LmFkZENvbnRleHQoJ2tiblZlcnNpb24nLCBjb25maWcuZ2V0KCdwa2cudmVyc2lvbicpKTtcbiAgYnVuZGxlckVudi5hZGRDb250ZXh0KCdidWlsZE51bScsIGNvbmZpZy5nZXQoJ3BrZy5idWlsZE51bScpKTtcbiAgdWlFeHBvcnRzLmFkZENvbnN1bWVyKGJ1bmRsZXJFbnYpO1xuXG4gIGZvciAobGV0IHBsdWdpbiBvZiBrYm5TZXJ2ZXIucGx1Z2lucykge1xuICAgIHVpRXhwb3J0cy5jb25zdW1lUGx1Z2luKHBsdWdpbik7XG4gIH1cblxuICBjb25zdCBidW5kbGVzID0ga2JuU2VydmVyLmJ1bmRsZXMgPSBuZXcgVWlCdW5kbGVDb2xsZWN0aW9uKGJ1bmRsZXJFbnYsIGNvbmZpZy5nZXQoJ29wdGltaXplLmJ1bmRsZUZpbHRlcicpKTtcblxuICBmb3IgKGxldCBhcHAgb2YgdWlFeHBvcnRzLmdldEFsbEFwcHMoKSkge1xuICAgIGJ1bmRsZXMuYWRkQXBwKGFwcCk7XG4gIH1cblxuICBmb3IgKGxldCBnZW4gb2YgdWlFeHBvcnRzLmdldEJ1bmRsZVByb3ZpZGVycygpKSB7XG4gICAgY29uc3QgYnVuZGxlID0gYXdhaXQgZ2VuKFVpQnVuZGxlLCBidW5kbGVyRW52LCB1aUV4cG9ydHMuZ2V0QWxsQXBwcygpLCBrYm5TZXJ2ZXIucGx1Z2lucyk7XG4gICAgaWYgKGJ1bmRsZSkgYnVuZGxlcy5hZGQoYnVuZGxlKTtcbiAgfVxuXG4gIC8vIHJlbmRlciBhbGwgdmlld3MgZnJvbSB0aGUgdWkvdmlld3MgZGlyZWN0b3J5XG4gIHNlcnZlci5zZXR1cFZpZXdzKHJlc29sdmUoX19kaXJuYW1lLCAndmlld3MnKSk7XG4gIHNlcnZlci5leHBvc2VTdGF0aWNGaWxlKCcvbG9hZGluZy5naWYnLCByZXNvbHZlKF9fZGlybmFtZSwgJ3B1YmxpYy9sb2FkaW5nLmdpZicpKTtcblxuICBzZXJ2ZXIucm91dGUoe1xuICAgIHBhdGg6ICcvYXBwL3tpZH0nLFxuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgaGFuZGxlcjogZnVuY3Rpb24gKHJlcSwgcmVwbHkpIHtcbiAgICAgIGNvbnN0IGlkID0gcmVxLnBhcmFtcy5pZDtcbiAgICAgIGNvbnN0IGFwcCA9IHVpRXhwb3J0cy5hcHBzLmJ5SWRbaWRdO1xuICAgICAgaWYgKCFhcHApIHJldHVybiByZXBseShCb29tLm5vdEZvdW5kKCdVbmtub3duIGFwcCAnICsgaWQpKTtcblxuICAgICAgaWYgKGtiblNlcnZlci5zdGF0dXMuaXNHcmVlbigpKSB7XG4gICAgICAgIHJldHVybiByZXBseS5yZW5kZXJBcHAoYXBwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiByZXBseS5yZW5kZXJTdGF0dXNQYWdlKCk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICBzZXJ2ZXIuZGVjb3JhdGUoJ3JlcGx5JywgJ3JlbmRlckFwcCcsIGFzeW5jIGZ1bmN0aW9uIChhcHApIHtcbiAgICBjb25zdCBpc0VsYXN0aWNzZWFyY2hQbHVnaW5SZWQgPSBzZXJ2ZXIucGx1Z2lucy5lbGFzdGljc2VhcmNoLnN0YXR1cy5zdGF0ZSA9PT0gJ3JlZCc7XG4gICAgY29uc3QgdWlTZXR0aW5ncyA9IHNlcnZlci51aVNldHRpbmdzKCk7XG4gICAgY29uc3QgcGF5bG9hZCA9IHtcbiAgICAgIGFwcDogYXBwLFxuICAgICAgbmF2OiB1aUV4cG9ydHMubmF2TGlua3MuaW5PcmRlcixcbiAgICAgIHZlcnNpb246IGtiblNlcnZlci52ZXJzaW9uLFxuICAgICAgYnVpbGROdW06IGNvbmZpZy5nZXQoJ3BrZy5idWlsZE51bScpLFxuICAgICAgYnVpbGRTaGE6IGNvbmZpZy5nZXQoJ3BrZy5idWlsZFNoYScpLFxuICAgICAgYmFzZVBhdGg6IGNvbmZpZy5nZXQoJ3NlcnZlci5iYXNlUGF0aCcpLFxuICAgICAgc2VydmVyTmFtZTogY29uZmlnLmdldCgnc2VydmVyLm5hbWUnKSxcbiAgICAgIHVpU2V0dGluZ3M6IHtcbiAgICAgICAgZGVmYXVsdHM6IGF3YWl0IHVpU2V0dGluZ3MuZ2V0RGVmYXVsdHMoKSxcbiAgICAgICAgdXNlcjogaXNFbGFzdGljc2VhcmNoUGx1Z2luUmVkID8ge30gOiBhd2FpdCB1aVNldHRpbmdzLmdldFVzZXJQcm92aWRlZCgpXG4gICAgICB9LFxuICAgICAgdmFyczogZGVmYXVsdHMoYXBwLmdldEluamVjdGVkVmFycygpIHx8IHt9LCB1aUV4cG9ydHMuZGVmYXVsdEluamVjdGVkVmFycyksXG4gICAgfTtcblxuICAgIHJldHVybiB0aGlzLnZpZXcoYXBwLnRlbXBsYXRlTmFtZSwge1xuICAgICAgYXBwOiBhcHAsXG4gICAgICBsb2FkaW5nR2lmOiBsb2FkaW5nR2lmLFxuICAgICAga2liYW5hUGF5bG9hZDogcGF5bG9hZCxcbiAgICAgIGJ1bmRsZVBhdGg6IGAke2NvbmZpZy5nZXQoJ3NlcnZlci5iYXNlUGF0aCcpfS9idW5kbGVzYCxcbiAgICB9KTtcbiAgfSk7XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/ui/index.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/src/ui/index.js",
      "sourcesContent": [
        "import { format as formatUrl } from 'url';\nimport { readFileSync as readFile } from 'fs';\nimport { defaults } from 'lodash';\nimport Boom from 'boom';\nimport { resolve } from 'path';\nimport fromRoot from '../utils/from_root';\nimport UiExports from './ui_exports';\nimport UiBundle from './ui_bundle';\nimport UiBundleCollection from './ui_bundle_collection';\nimport UiBundlerEnv from './ui_bundler_env';\n\nexport default async (kbnServer, server, config) => {\n\n  const loadingGif = readFile(fromRoot('src/ui/public/loading.gif'), { encoding: 'base64'});\n\n  const uiExports = kbnServer.uiExports = new UiExports({\n    urlBasePath: config.get('server.basePath')\n  });\n\n  const bundlerEnv = new UiBundlerEnv(config.get('optimize.bundleDir'));\n  bundlerEnv.addContext('env', config.get('env.name'));\n  bundlerEnv.addContext('urlBasePath', config.get('server.basePath'));\n  bundlerEnv.addContext('sourceMaps', config.get('optimize.sourceMaps'));\n  bundlerEnv.addContext('kbnVersion', config.get('pkg.version'));\n  bundlerEnv.addContext('buildNum', config.get('pkg.buildNum'));\n  uiExports.addConsumer(bundlerEnv);\n\n  for (let plugin of kbnServer.plugins) {\n    uiExports.consumePlugin(plugin);\n  }\n\n  const bundles = kbnServer.bundles = new UiBundleCollection(bundlerEnv, config.get('optimize.bundleFilter'));\n\n  for (let app of uiExports.getAllApps()) {\n    bundles.addApp(app);\n  }\n\n  for (let gen of uiExports.getBundleProviders()) {\n    const bundle = await gen(UiBundle, bundlerEnv, uiExports.getAllApps(), kbnServer.plugins);\n    if (bundle) bundles.add(bundle);\n  }\n\n  // render all views from the ui/views directory\n  server.setupViews(resolve(__dirname, 'views'));\n  server.exposeStaticFile('/loading.gif', resolve(__dirname, 'public/loading.gif'));\n\n  server.route({\n    path: '/app/{id}',\n    method: 'GET',\n    handler: function (req, reply) {\n      const id = req.params.id;\n      const app = uiExports.apps.byId[id];\n      if (!app) return reply(Boom.notFound('Unknown app ' + id));\n\n      if (kbnServer.status.isGreen()) {\n        return reply.renderApp(app);\n      } else {\n        return reply.renderStatusPage();\n      }\n    }\n  });\n\n  server.decorate('reply', 'renderApp', async function (app) {\n    const isElasticsearchPluginRed = server.plugins.elasticsearch.status.state === 'red';\n    const uiSettings = server.uiSettings();\n    const payload = {\n      app: app,\n      nav: uiExports.navLinks.inOrder,\n      version: kbnServer.version,\n      buildNum: config.get('pkg.buildNum'),\n      buildSha: config.get('pkg.buildSha'),\n      basePath: config.get('server.basePath'),\n      serverName: config.get('server.name'),\n      uiSettings: {\n        defaults: await uiSettings.getDefaults(),\n        user: isElasticsearchPluginRed ? {} : await uiSettings.getUserProvided()\n      },\n      vars: defaults(app.getInjectedVars() || {}, uiExports.defaultInjectedVars),\n    };\n\n    return this.view(app.templateName, {\n      app: app,\n      loadingGif: loadingGif,\n      kibanaPayload: payload,\n      bundlePath: `${config.get('server.basePath')}/bundles`,\n    });\n  });\n};\n"
      ]
    },
    "mtime": 1467036622849
  },
  "{\"filename\":\"/home/vio/v3metrics/src/ui/ui_exports.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "minimatch",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "minimatch"
              }
            ]
          },
          {
            "source": "./ui_app_collection",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "UiAppCollection"
              }
            ]
          },
          {
            "source": "./ui_nav_link_collection",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "UiNavLinkCollection"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "async-to-generator",
        "to-consumable-array",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i]; return arr2; } else { return Array.from(arr); } }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _minimatch = require('minimatch');\n\nvar _minimatch2 = _interopRequireDefault(_minimatch);\n\nvar _ui_app_collection = require('./ui_app_collection');\n\nvar _ui_app_collection2 = _interopRequireDefault(_ui_app_collection);\n\nvar _ui_nav_link_collection = require('./ui_nav_link_collection');\n\nvar _ui_nav_link_collection2 = _interopRequireDefault(_ui_nav_link_collection);\n\nvar UiExports = (function () {\n  function UiExports(_ref) {\n    var urlBasePath = _ref.urlBasePath;\n\n    _classCallCheck(this, UiExports);\n\n    this.navLinks = new _ui_nav_link_collection2['default'](this);\n    this.apps = new _ui_app_collection2['default'](this);\n    this.aliases = {};\n    this.urlBasePath = urlBasePath;\n    this.exportConsumer = _lodash2['default'].memoize(this.exportConsumer);\n    this.consumers = [];\n    this.bundleProviders = [];\n    this.defaultInjectedVars = {};\n  }\n\n  _createClass(UiExports, [{\n    key: 'consumePlugin',\n    value: function consumePlugin(plugin) {\n      var _this = this;\n\n      plugin.apps = new _ui_app_collection2['default'](this);\n\n      var types = _lodash2['default'].keys(plugin.uiExportsSpecs);\n      if (!types) return false;\n\n      var unkown = _lodash2['default'].reject(types, this.exportConsumer, this);\n      if (unkown.length) {\n        throw new Error('unknown export types ' + unkown.join(', ') + ' in plugin ' + plugin.id);\n      }\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.consumers[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var consumer = _step.value;\n\n          consumer.consumePlugin && consumer.consumePlugin(plugin);\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator['return']) {\n            _iterator['return']();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      types.forEach(function (type) {\n        _this.exportConsumer(type)(plugin, plugin.uiExportsSpecs[type]);\n      });\n    }\n  }, {\n    key: 'addConsumer',\n    value: function addConsumer(consumer) {\n      this.consumers.push(consumer);\n    }\n  }, {\n    key: 'exportConsumer',\n    value: function exportConsumer(type) {\n      var _this2 = this;\n\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = this.consumers[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var consumer = _step2.value;\n\n          if (!consumer.exportConsumer) continue;\n          var fn = consumer.exportConsumer(type);\n          if (fn) return fn;\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2['return']) {\n            _iterator2['return']();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      switch (type) {\n        case 'app':\n        case 'apps':\n          return function (plugin, specs) {\n            var id = plugin.id;\n            var _iteratorNormalCompletion3 = true;\n            var _didIteratorError3 = false;\n            var _iteratorError3 = undefined;\n\n            try {\n              var _loop = function () {\n                var spec = _step3.value;\n\n                var app = _this2.apps['new'](_lodash2['default'].defaults({}, spec, {\n                  id: plugin.id,\n                  urlBasePath: _this2.urlBasePath\n                }));\n\n                plugin.extendInit(function (server, options) {\n                  // eslint-disable-line no-loop-func\n                  var wrapped = app.getInjectedVars;\n                  app.getInjectedVars = function () {\n                    return wrapped.call(plugin, server, options);\n                  };\n                });\n\n                plugin.apps.add(app);\n              };\n\n              for (var _iterator3 = [].concat(specs || [])[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n                _loop();\n              }\n            } catch (err) {\n              _didIteratorError3 = true;\n              _iteratorError3 = err;\n            } finally {\n              try {\n                if (!_iteratorNormalCompletion3 && _iterator3['return']) {\n                  _iterator3['return']();\n                }\n              } finally {\n                if (_didIteratorError3) {\n                  throw _iteratorError3;\n                }\n              }\n            }\n          };\n\n        case 'link':\n        case 'links':\n          return function (plugin, spec) {\n            var _iteratorNormalCompletion4 = true;\n            var _didIteratorError4 = false;\n            var _iteratorError4 = undefined;\n\n            try {\n              for (var _iterator4 = [].concat(spec || [])[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n                var _spec = _step4.value;\n\n                _this2.navLinks['new'](_spec);\n              }\n            } catch (err) {\n              _didIteratorError4 = true;\n              _iteratorError4 = err;\n            } finally {\n              try {\n                if (!_iteratorNormalCompletion4 && _iterator4['return']) {\n                  _iterator4['return']();\n                }\n              } finally {\n                if (_didIteratorError4) {\n                  throw _iteratorError4;\n                }\n              }\n            }\n          };\n\n        case 'visTypes':\n        case 'fieldFormats':\n        case 'spyModes':\n        case 'chromeNavControls':\n        case 'navbarExtensions':\n        case 'managementSections':\n        case 'docViews':\n        case 'hacks':\n          return function (plugin, spec) {\n            _this2.aliases[type] = _lodash2['default'].union(_this2.aliases[type] || [], spec);\n          };\n\n        case 'bundle':\n          return function (plugin, spec) {\n            _this2.bundleProviders.push(spec);\n          };\n\n        case 'aliases':\n          return function (plugin, specs) {\n            _lodash2['default'].forOwn(specs, function (spec, adhocType) {\n              _this2.aliases[adhocType] = _lodash2['default'].union(_this2.aliases[adhocType] || [], spec);\n            });\n          };\n\n        case 'injectDefaultVars':\n          return function (plugin, injector) {\n            plugin.extendInit(_asyncToGenerator(function* (server, options) {\n              _lodash2['default'].merge(_this2.defaultInjectedVars, (yield injector.call(plugin, server, options)));\n            }));\n          };\n      }\n    }\n  }, {\n    key: 'find',\n    value: function find(patterns) {\n      var aliases = this.aliases;\n      var names = _lodash2['default'].keys(aliases);\n      var matcher = _lodash2['default'].partialRight(_minimatch2['default'].filter, { matchBase: true });\n\n      return _lodash2['default'].chain(patterns).map(function (pattern) {\n        return names.filter(matcher(pattern));\n      }).flattenDeep().reduce(function (found, name) {\n        return found.concat(aliases[name]);\n      }, []).value();\n    }\n  }, {\n    key: 'getAllApps',\n    value: function getAllApps() {\n      var _ref2;\n\n      var apps = this.apps;\n\n      return (_ref2 = [].concat(_toConsumableArray(apps))).concat.apply(_ref2, _toConsumableArray(apps.hidden));\n    }\n  }, {\n    key: 'getApp',\n    value: function getApp(id) {\n      return this.apps.byId[id];\n    }\n  }, {\n    key: 'getHiddenApp',\n    value: function getHiddenApp(id) {\n      return this.apps.hidden.byId[id];\n    }\n  }, {\n    key: 'getBundleProviders',\n    value: function getBundleProviders() {\n      return this.bundleProviders;\n    }\n  }]);\n\n  return UiExports;\n})();\n\nmodule.exports = UiExports;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3VpL3VpX2V4cG9ydHMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O3NCQUFjLFFBQVE7Ozs7eUJBQ0EsV0FBVzs7OztpQ0FFTCxxQkFBcUI7Ozs7c0NBQ2pCLDBCQUEwQjs7OztJQUVwRCxTQUFTO0FBQ0YsV0FEUCxTQUFTLENBQ0QsSUFBZSxFQUFFO1FBQWYsV0FBVyxHQUFiLElBQWUsQ0FBYixXQUFXOzswQkFEckIsU0FBUzs7QUFFWCxRQUFJLENBQUMsUUFBUSxHQUFHLHdDQUF3QixJQUFJLENBQUMsQ0FBQztBQUM5QyxRQUFJLENBQUMsSUFBSSxHQUFHLG1DQUFvQixJQUFJLENBQUMsQ0FBQztBQUN0QyxRQUFJLENBQUMsT0FBTyxHQUFHLEVBQUUsQ0FBQztBQUNsQixRQUFJLENBQUMsV0FBVyxHQUFHLFdBQVcsQ0FBQztBQUMvQixRQUFJLENBQUMsY0FBYyxHQUFHLG9CQUFFLE9BQU8sQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7QUFDckQsUUFBSSxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUM7QUFDcEIsUUFBSSxDQUFDLGVBQWUsR0FBRyxFQUFFLENBQUM7QUFDMUIsUUFBSSxDQUFDLG1CQUFtQixHQUFHLEVBQUUsQ0FBQztHQUMvQjs7ZUFWRyxTQUFTOztXQVlBLHVCQUFDLE1BQU0sRUFBRTs7O0FBQ3BCLFlBQU0sQ0FBQyxJQUFJLEdBQUcsbUNBQW9CLElBQUksQ0FBQyxDQUFDOztBQUV4QyxVQUFNLEtBQUssR0FBRyxvQkFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDO0FBQzVDLFVBQUksQ0FBQyxLQUFLLEVBQUUsT0FBTyxLQUFLLENBQUM7O0FBRXpCLFVBQU0sTUFBTSxHQUFHLG9CQUFFLE1BQU0sQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUMsQ0FBQztBQUMxRCxVQUFJLE1BQU0sQ0FBQyxNQUFNLEVBQUU7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QUUsRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQzs7QUFFdEUsYUFBTyxvQkFBRSxLQUFLLENBQUMsUUFBUSxDQUFDLENBQ3ZCLEdBQUcsQ0FBQyxVQUFVLE9BQU8sRUFBRTtBQUN0QixlQUFPLEtBQUssQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7T0FDdkMsQ0FBQyxDQUNELFdBQVcsRUFBRSxDQUNiLE1BQU0sQ0FBQyxVQUFVLEtBQUssRUFBRSxJQUFJLEVBQUU7QUFDN0IsZUFBTyxLQUFLLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO09BQ3BDLEVBQUUsRUFBRSxDQUFDLENBQ0wsS0FBSyxFQUFFLENBQUM7S0FDVjs7O1dBRVMsc0JBQUc7OztVQUNMLElBQUksR0FBSyxJQUFJLENBQWIsSUFBSTs7QUFDVixhQUFPLHNDQUFJLElBQUksSUFBRSxNQUFNLE1BQUEsMkJBQUksSUFBSSxDQUFDLE1BQU0sRUFBQyxDQUFDO0tBQ3pDOzs7V0FFSyxnQkFBQyxFQUFFLEVBQUU7QUFDVCxhQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0tBQzNCOzs7V0FFVyxzQkFBQyxFQUFFLEVBQUU7QUFDZixhQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztLQUNsQzs7O1dBRWlCLDhCQUFHO0FBQ25CLGFBQU8sSUFBSSxDQUFDLGVBQWUsQ0FBQztLQUM3Qjs7O1NBeElHLFNBQVM7OztBQTJJZixNQUFNLENBQUMsT0FBTyxHQUFHLFNBQVMsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy91aS91aV9leHBvcnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBtaW5pbWF0Y2ggZnJvbSAnbWluaW1hdGNoJztcblxuaW1wb3J0IFVpQXBwQ29sbGVjdGlvbiBmcm9tICcuL3VpX2FwcF9jb2xsZWN0aW9uJztcbmltcG9ydCBVaU5hdkxpbmtDb2xsZWN0aW9uIGZyb20gJy4vdWlfbmF2X2xpbmtfY29sbGVjdGlvbic7XG5cbmNsYXNzIFVpRXhwb3J0cyB7XG4gIGNvbnN0cnVjdG9yKHsgdXJsQmFzZVBhdGggfSkge1xuICAgIHRoaXMubmF2TGlua3MgPSBuZXcgVWlOYXZMaW5rQ29sbGVjdGlvbih0aGlzKTtcbiAgICB0aGlzLmFwcHMgPSBuZXcgVWlBcHBDb2xsZWN0aW9uKHRoaXMpO1xuICAgIHRoaXMuYWxpYXNlcyA9IHt9O1xuICAgIHRoaXMudXJsQmFzZVBhdGggPSB1cmxCYXNlUGF0aDtcbiAgICB0aGlzLmV4cG9ydENvbnN1bWVyID0gXy5tZW1vaXplKHRoaXMuZXhwb3J0Q29uc3VtZXIpO1xuICAgIHRoaXMuY29uc3VtZXJzID0gW107XG4gICAgdGhpcy5idW5kbGVQcm92aWRlcnMgPSBbXTtcbiAgICB0aGlzLmRlZmF1bHRJbmplY3RlZFZhcnMgPSB7fTtcbiAgfVxuXG4gIGNvbnN1bWVQbHVnaW4ocGx1Z2luKSB7XG4gICAgcGx1Z2luLmFwcHMgPSBuZXcgVWlBcHBDb2xsZWN0aW9uKHRoaXMpO1xuXG4gICAgY29uc3QgdHlwZXMgPSBfLmtleXMocGx1Z2luLnVpRXhwb3J0c1NwZWNzKTtcbiAgICBpZiAoIXR5cGVzKSByZXR1cm4gZmFsc2U7XG5cbiAgICBjb25zdCB1bmtvd24gPSBfLnJlamVjdCh0eXBlcywgdGhpcy5leHBvcnRDb25zdW1lciwgdGhpcyk7XG4gICAgaWYgKHVua293bi5sZW5ndGgpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigndW5rbm93biBleHBvcnQgdHlwZXMgJyArIHVua293bi5qb2luKCcsICcpICsgJyBpbiBwbHVnaW4gJyArIHBsdWdpbi5pZCk7XG4gICAgfVxuXG4gICAgZm9yIChsZXQgY29uc3VtZXIgb2YgdGhpcy5jb25zdW1lcnMpIHtcbiAgICAgIGNvbnN1bWVyLmNvbnN1bWVQbHVnaW4gJiYgY29uc3VtZXIuY29uc3VtZVBsdWdpbihwbHVnaW4pO1xuICAgIH1cblxuICAgIHR5cGVzLmZvckVhY2goKHR5cGUpID0+IHtcbiAgICAgIHRoaXMuZXhwb3J0Q29uc3VtZXIodHlwZSkocGx1Z2luLCBwbHVnaW4udWlFeHBvcnRzU3BlY3NbdHlwZV0pO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkQ29uc3VtZXIoY29uc3VtZXIpIHtcbiAgICB0aGlzLmNvbnN1bWVycy5wdXNoKGNvbnN1bWVyKTtcbiAgfVxuXG4gIGV4cG9ydENvbnN1bWVyKHR5cGUpIHtcbiAgICBmb3IgKGxldCBjb25zdW1lciBvZiB0aGlzLmNvbnN1bWVycykge1xuICAgICAgaWYgKCFjb25zdW1lci5leHBvcnRDb25zdW1lcikgY29udGludWU7XG4gICAgICBjb25zdCBmbiA9IGNvbnN1bWVyLmV4cG9ydENvbnN1bWVyKHR5cGUpO1xuICAgICAgaWYgKGZuKSByZXR1cm4gZm47XG4gICAgfVxuXG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlICdhcHAnOlxuICAgICAgY2FzZSAnYXBwcyc6XG4gICAgICAgIHJldHVybiAocGx1Z2luLCBzcGVjcykgPT4ge1xuICAgICAgICAgIGNvbnN0IGlkID0gcGx1Z2luLmlkO1xuICAgICAgICAgIGZvciAobGV0IHNwZWMgb2YgW10uY29uY2F0KHNwZWNzIHx8IFtdKSkge1xuXG4gICAgICAgICAgICBjb25zdCBhcHAgPSB0aGlzLmFwcHMubmV3KF8uZGVmYXVsdHMoe30sIHNwZWMsIHtcbiAgICAgICAgICAgICAgaWQ6IHBsdWdpbi5pZCxcbiAgICAgICAgICAgICAgdXJsQmFzZVBhdGg6IHRoaXMudXJsQmFzZVBhdGhcbiAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgcGx1Z2luLmV4dGVuZEluaXQoKHNlcnZlciwgb3B0aW9ucykgPT4geyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWxvb3AtZnVuY1xuICAgICAgICAgICAgICBjb25zdCB3cmFwcGVkID0gYXBwLmdldEluamVjdGVkVmFycztcbiAgICAgICAgICAgICAgYXBwLmdldEluamVjdGVkVmFycyA9ICgpID0+IHdyYXBwZWQuY2FsbChwbHVnaW4sIHNlcnZlciwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcGx1Z2luLmFwcHMuYWRkKGFwcCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICBjYXNlICdsaW5rJzpcbiAgICAgIGNhc2UgJ2xpbmtzJzpcbiAgICAgICAgcmV0dXJuIChwbHVnaW4sIHNwZWMpID0+IHtcbiAgICAgICAgICBmb3IgKGNvbnN0IHNwZWMgb2YgW10uY29uY2F0KHNwZWMgfHwgW10pKSB7XG4gICAgICAgICAgICB0aGlzLm5hdkxpbmtzLm5ldyhzcGVjKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgIGNhc2UgJ3Zpc1R5cGVzJzpcbiAgICAgIGNhc2UgJ2ZpZWxkRm9ybWF0cyc6XG4gICAgICBjYXNlICdzcHlNb2Rlcyc6XG4gICAgICBjYXNlICdjaHJvbWVOYXZDb250cm9scyc6XG4gICAgICBjYXNlICduYXZiYXJFeHRlbnNpb25zJzpcbiAgICAgIGNhc2UgJ21hbmFnZW1lbnRTZWN0aW9ucyc6XG4gICAgICBjYXNlICdkb2NWaWV3cyc6XG4gICAgICBjYXNlICdoYWNrcyc6XG4gICAgICAgIHJldHVybiAocGx1Z2luLCBzcGVjKSA9PiB7XG4gICAgICAgICAgdGhpcy5hbGlhc2VzW3R5cGVdID0gXy51bmlvbih0aGlzLmFsaWFzZXNbdHlwZV0gfHwgW10sIHNwZWMpO1xuICAgICAgICB9O1xuXG4gICAgICBjYXNlICdidW5kbGUnOlxuICAgICAgICByZXR1cm4gKHBsdWdpbiwgc3BlYykgPT4ge1xuICAgICAgICAgIHRoaXMuYnVuZGxlUHJvdmlkZXJzLnB1c2goc3BlYyk7XG4gICAgICAgIH07XG5cbiAgICAgIGNhc2UgJ2FsaWFzZXMnOlxuICAgICAgICByZXR1cm4gKHBsdWdpbiwgc3BlY3MpID0+IHtcbiAgICAgICAgICBfLmZvck93bihzcGVjcywgKHNwZWMsIGFkaG9jVHlwZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5hbGlhc2VzW2FkaG9jVHlwZV0gPSBfLnVuaW9uKHRoaXMuYWxpYXNlc1thZGhvY1R5cGVdIHx8IFtdLCBzcGVjKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgY2FzZSAnaW5qZWN0RGVmYXVsdFZhcnMnOlxuICAgICAgICByZXR1cm4gKHBsdWdpbiwgaW5qZWN0b3IpID0+IHtcbiAgICAgICAgICBwbHVnaW4uZXh0ZW5kSW5pdChhc3luYyAoc2VydmVyLCBvcHRpb25zKSA9PiB7XG4gICAgICAgICAgICBfLm1lcmdlKHRoaXMuZGVmYXVsdEluamVjdGVkVmFycywgYXdhaXQgaW5qZWN0b3IuY2FsbChwbHVnaW4sIHNlcnZlciwgb3B0aW9ucykpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIGZpbmQocGF0dGVybnMpIHtcbiAgICBjb25zdCBhbGlhc2VzID0gdGhpcy5hbGlhc2VzO1xuICAgIGNvbnN0IG5hbWVzID0gXy5rZXlzKGFsaWFzZXMpO1xuICAgIGNvbnN0IG1hdGNoZXIgPSBfLnBhcnRpYWxSaWdodChtaW5pbWF0Y2guZmlsdGVyLCB7IG1hdGNoQmFzZTogdHJ1ZSB9KTtcblxuICAgIHJldHVybiBfLmNoYWluKHBhdHRlcm5zKVxuICAgIC5tYXAoZnVuY3Rpb24gKHBhdHRlcm4pIHtcbiAgICAgIHJldHVybiBuYW1lcy5maWx0ZXIobWF0Y2hlcihwYXR0ZXJuKSk7XG4gICAgfSlcbiAgICAuZmxhdHRlbkRlZXAoKVxuICAgIC5yZWR1Y2UoZnVuY3Rpb24gKGZvdW5kLCBuYW1lKSB7XG4gICAgICByZXR1cm4gZm91bmQuY29uY2F0KGFsaWFzZXNbbmFtZV0pO1xuICAgIH0sIFtdKVxuICAgIC52YWx1ZSgpO1xuICB9XG5cbiAgZ2V0QWxsQXBwcygpIHtcbiAgICBsZXQgeyBhcHBzIH0gPSB0aGlzO1xuICAgIHJldHVybiBbLi4uYXBwc10uY29uY2F0KC4uLmFwcHMuaGlkZGVuKTtcbiAgfVxuXG4gIGdldEFwcChpZCkge1xuICAgIHJldHVybiB0aGlzLmFwcHMuYnlJZFtpZF07XG4gIH1cblxuICBnZXRIaWRkZW5BcHAoaWQpIHtcbiAgICByZXR1cm4gdGhpcy5hcHBzLmhpZGRlbi5ieUlkW2lkXTtcbiAgfVxuXG4gIGdldEJ1bmRsZVByb3ZpZGVycygpIHtcbiAgICByZXR1cm4gdGhpcy5idW5kbGVQcm92aWRlcnM7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBVaUV4cG9ydHM7XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/ui/ui_exports.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/src/ui/ui_exports.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport minimatch from 'minimatch';\n\nimport UiAppCollection from './ui_app_collection';\nimport UiNavLinkCollection from './ui_nav_link_collection';\n\nclass UiExports {\n  constructor({ urlBasePath }) {\n    this.navLinks = new UiNavLinkCollection(this);\n    this.apps = new UiAppCollection(this);\n    this.aliases = {};\n    this.urlBasePath = urlBasePath;\n    this.exportConsumer = _.memoize(this.exportConsumer);\n    this.consumers = [];\n    this.bundleProviders = [];\n    this.defaultInjectedVars = {};\n  }\n\n  consumePlugin(plugin) {\n    plugin.apps = new UiAppCollection(this);\n\n    const types = _.keys(plugin.uiExportsSpecs);\n    if (!types) return false;\n\n    const unkown = _.reject(types, this.exportConsumer, this);\n    if (unkown.length) {\n      throw new Error('unknown export types ' + unkown.join(', ') + ' in plugin ' + plugin.id);\n    }\n\n    for (let consumer of this.consumers) {\n      consumer.consumePlugin && consumer.consumePlugin(plugin);\n    }\n\n    types.forEach((type) => {\n      this.exportConsumer(type)(plugin, plugin.uiExportsSpecs[type]);\n    });\n  }\n\n  addConsumer(consumer) {\n    this.consumers.push(consumer);\n  }\n\n  exportConsumer(type) {\n    for (let consumer of this.consumers) {\n      if (!consumer.exportConsumer) continue;\n      const fn = consumer.exportConsumer(type);\n      if (fn) return fn;\n    }\n\n    switch (type) {\n      case 'app':\n      case 'apps':\n        return (plugin, specs) => {\n          const id = plugin.id;\n          for (let spec of [].concat(specs || [])) {\n\n            const app = this.apps.new(_.defaults({}, spec, {\n              id: plugin.id,\n              urlBasePath: this.urlBasePath\n            }));\n\n            plugin.extendInit((server, options) => { // eslint-disable-line no-loop-func\n              const wrapped = app.getInjectedVars;\n              app.getInjectedVars = () => wrapped.call(plugin, server, options);\n            });\n\n            plugin.apps.add(app);\n          }\n        };\n\n      case 'link':\n      case 'links':\n        return (plugin, spec) => {\n          for (const spec of [].concat(spec || [])) {\n            this.navLinks.new(spec);\n          }\n        };\n\n      case 'visTypes':\n      case 'fieldFormats':\n      case 'spyModes':\n      case 'chromeNavControls':\n      case 'navbarExtensions':\n      case 'managementSections':\n      case 'docViews':\n      case 'hacks':\n        return (plugin, spec) => {\n          this.aliases[type] = _.union(this.aliases[type] || [], spec);\n        };\n\n      case 'bundle':\n        return (plugin, spec) => {\n          this.bundleProviders.push(spec);\n        };\n\n      case 'aliases':\n        return (plugin, specs) => {\n          _.forOwn(specs, (spec, adhocType) => {\n            this.aliases[adhocType] = _.union(this.aliases[adhocType] || [], spec);\n          });\n        };\n\n      case 'injectDefaultVars':\n        return (plugin, injector) => {\n          plugin.extendInit(async (server, options) => {\n            _.merge(this.defaultInjectedVars, await injector.call(plugin, server, options));\n          });\n        };\n    }\n  }\n\n  find(patterns) {\n    const aliases = this.aliases;\n    const names = _.keys(aliases);\n    const matcher = _.partialRight(minimatch.filter, { matchBase: true });\n\n    return _.chain(patterns)\n    .map(function (pattern) {\n      return names.filter(matcher(pattern));\n    })\n    .flattenDeep()\n    .reduce(function (found, name) {\n      return found.concat(aliases[name]);\n    }, [])\n    .value();\n  }\n\n  getAllApps() {\n    let { apps } = this;\n    return [...apps].concat(...apps.hidden);\n  }\n\n  getApp(id) {\n    return this.apps.byId[id];\n  }\n\n  getHiddenApp(id) {\n    return this.apps.hidden.byId[id];\n  }\n\n  getBundleProviders() {\n    return this.bundleProviders;\n  }\n}\n\nmodule.exports = UiExports;\n"
      ]
    },
    "mtime": 1467036622893
  },
  "{\"filename\":\"/home/vio/v3metrics/src/ui/ui_app_collection.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "./ui_app",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "UiApp"
              }
            ]
          },
          {
            "source": "../utils/collection",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Collection"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "get",
        "inherits",
        "create-class",
        "class-call-check",
        "to-consumable-array",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i]; return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _ui_app = require('./ui_app');\n\nvar _ui_app2 = _interopRequireDefault(_ui_app);\n\nvar _utilsCollection = require('../utils/collection');\n\nvar _utilsCollection2 = _interopRequireDefault(_utilsCollection);\n\nvar byIdCache = Symbol('byId');\n\nmodule.exports = (function (_Collection) {\n  _inherits(UiAppCollection, _Collection);\n\n  function UiAppCollection(uiExports, parent) {\n    _classCallCheck(this, UiAppCollection);\n\n    _get(Object.getPrototypeOf(UiAppCollection.prototype), 'constructor', this).call(this);\n\n    this.uiExports = uiExports;\n\n    if (!parent) {\n      this.claimedIds = [];\n      this.hidden = new UiAppCollection(uiExports, this);\n    } else {\n      this.claimedIds = parent.claimedIds;\n    }\n  }\n\n  _createClass(UiAppCollection, [{\n    key: 'new',\n    value: function _new(spec) {\n      if (this.hidden && spec.hidden) {\n        return this.hidden['new'](spec);\n      }\n\n      var app = new _ui_app2['default'](this.uiExports, spec);\n\n      if (_lodash2['default'].includes(this.claimedIds, app.id)) {\n        throw new Error('Unable to create two apps with the id ' + app.id + '.');\n      } else {\n        this.claimedIds.push(app.id);\n      }\n\n      this[byIdCache] = null;\n      this.add(app);\n      return app;\n    }\n  }, {\n    key: 'byId',\n    get: function get() {\n      return this[byIdCache] || (this[byIdCache] = _lodash2['default'].indexBy([].concat(_toConsumableArray(this)), 'id'));\n    }\n  }]);\n\n  return UiAppCollection;\n})(_utilsCollection2['default']);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3VpL3VpX2FwcF9jb2xsZWN0aW9uLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O3NCQUFjLFFBQVE7Ozs7c0JBQ0osVUFBVTs7OzsrQkFDTCxxQkFBcUI7Ozs7QUFFNUMsSUFBTSxTQUFTLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDOztBQUVqQyxNQUFNLENBQUMsT0FBTztZQUFTLGVBQWU7O0FBRXpCLFdBRlUsZUFBZSxDQUV4QixTQUFTLEVBQUUsTUFBTSxFQUFFOzBCQUZWLGVBQWU7O0FBR2xDLCtCQUhtQixlQUFlLDZDQUcxQjs7QUFFUixRQUFJLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQzs7QUFFM0IsUUFBSSxDQUFDLE1BQU0sRUFBRTtBQUNYLFVBQUksQ0FBQyxVQUFVLEdBQUcsRUFBRSxDQUFDO0FBQ3JCLFVBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxlQUFlLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQyxDQUFDO0tBQ3BELE1BQU07QUFDTCxVQUFJLENBQUMsVUFBVSxHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUM7S0FDckM7R0FFRjs7ZUFkb0IsZUFBZTs7V0FnQmpDLGNBQUMsSUFBSSxFQUFFO0FBQ1IsVUFBSSxJQUFJLENBQUMsTUFBTSxJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUU7QUFDOUIsZUFBTyxJQUFJLENBQUMsTUFBTSxPQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7T0FDOUI7O0FBRUQsVUFBTSxHQUFHLEdBQUcsd0JBQVUsSUFBSSxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsQ0FBQzs7QUFFNUMsVUFBSSxvQkFBRSxRQUFRLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFDdkMsY0FBTSxJQUFJLEtBQUssQ0FBQyx3Q0FBd0MsR0FBRyxHQUFHLENBQUMsRUFBRSxHQUFHLEdBQUcsQ0FBQyxDQUFDO09BQzFFLE1BQU07QUFDTCxZQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7T0FDOUI7O0FBRUQsVUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLElBQUksQ0FBQztBQUN2QixVQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ2QsYUFBTyxHQUFHLENBQUM7S0FDWjs7O1NBRU8sZUFBRztBQUNULGFBQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxvQkFBRSxPQUFPLDhCQUFLLElBQUksSUFBRyxJQUFJLENBQUMsQ0FBQSxBQUFDLENBQUM7S0FDMUU7OztTQXBDb0IsZUFBZTtnQ0FzQ3JDLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvdWkvdWlfYXBwX2NvbGxlY3Rpb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IFVpQXBwIGZyb20gJy4vdWlfYXBwJztcbmltcG9ydCBDb2xsZWN0aW9uIGZyb20gJy4uL3V0aWxzL2NvbGxlY3Rpb24nO1xuXG5jb25zdCBieUlkQ2FjaGUgPSBTeW1ib2woJ2J5SWQnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBjbGFzcyBVaUFwcENvbGxlY3Rpb24gZXh0ZW5kcyBDb2xsZWN0aW9uIHtcblxuICBjb25zdHJ1Y3Rvcih1aUV4cG9ydHMsIHBhcmVudCkge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLnVpRXhwb3J0cyA9IHVpRXhwb3J0cztcblxuICAgIGlmICghcGFyZW50KSB7XG4gICAgICB0aGlzLmNsYWltZWRJZHMgPSBbXTtcbiAgICAgIHRoaXMuaGlkZGVuID0gbmV3IFVpQXBwQ29sbGVjdGlvbih1aUV4cG9ydHMsIHRoaXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNsYWltZWRJZHMgPSBwYXJlbnQuY2xhaW1lZElkcztcbiAgICB9XG5cbiAgfVxuXG4gIG5ldyhzcGVjKSB7XG4gICAgaWYgKHRoaXMuaGlkZGVuICYmIHNwZWMuaGlkZGVuKSB7XG4gICAgICByZXR1cm4gdGhpcy5oaWRkZW4ubmV3KHNwZWMpO1xuICAgIH1cblxuICAgIGNvbnN0IGFwcCA9IG5ldyBVaUFwcCh0aGlzLnVpRXhwb3J0cywgc3BlYyk7XG5cbiAgICBpZiAoXy5pbmNsdWRlcyh0aGlzLmNsYWltZWRJZHMsIGFwcC5pZCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIGNyZWF0ZSB0d28gYXBwcyB3aXRoIHRoZSBpZCAnICsgYXBwLmlkICsgJy4nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jbGFpbWVkSWRzLnB1c2goYXBwLmlkKTtcbiAgICB9XG5cbiAgICB0aGlzW2J5SWRDYWNoZV0gPSBudWxsO1xuICAgIHRoaXMuYWRkKGFwcCk7XG4gICAgcmV0dXJuIGFwcDtcbiAgfVxuXG4gIGdldCBieUlkKCkge1xuICAgIHJldHVybiB0aGlzW2J5SWRDYWNoZV0gfHwgKHRoaXNbYnlJZENhY2hlXSA9IF8uaW5kZXhCeShbLi4udGhpc10sICdpZCcpKTtcbiAgfVxuXG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/ui/ui_app_collection.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;;;;;sBAAc,QAAQ;;;;sBACJ,UAAU;;;;+BACL,qBAAqB;;;;AAE5C,IAAM,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC;;AAEjC,MAAM,CAAC,OAAO;YAAS,eAAe;;AAEzB,WAFU,eAAe,CAExB,SAAS,EAAE,MAAM,EAAE;0BAFV,eAAe;;AAGlC,+BAHmB,eAAe,6CAG1B;;AAER,QAAI,CAAC,SAAS,GAAG,SAAS,CAAC;;AAE3B,QAAI,CAAC,MAAM,EAAE;AACX,UAAI,CAAC,UAAU,GAAG,EAAE,CAAC;AACrB,UAAI,CAAC,MAAM,GAAG,IAAI,eAAe,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;KACpD,MAAM;AACL,UAAI,CAAC,UAAU,GAAG,MAAM,CAAC,UAAU,CAAC;KACrC;GAEF;;eAdoB,eAAe;;WAgBjC,cAAC,IAAI,EAAE;AACR,UAAI,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,EAAE;AAC9B,eAAO,IAAI,CAAC,MAAM,OAAI,CAAC,IAAI,CAAC,CAAC;OAC9B;;AAED,UAAM,GAAG,GAAG,wBAAU,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;;AAE5C,UAAI,oBAAE,QAAQ,CAAC,IAAI,CAAC,UAAU,EAAE,GAAG,CAAC,EAAE,CAAC,EAAE;AACvC,cAAM,IAAI,KAAK,CAAC,wCAAwC,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,CAAC;OAC1E,MAAM;AACL,YAAI,CAAC,UAAU,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;OAC9B;;AAED,UAAI,CAAC,SAAS,CAAC,GAAG,IAAI,CAAC;AACvB,UAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;AACd,aAAO,GAAG,CAAC;KACZ;;;SAEO,eAAG;AACT,aAAO,IAAI,CAAC,SAAS,CAAC,KAAK,IAAI,CAAC,SAAS,CAAC,GAAG,oBAAE,OAAO,8BAAK,IAAI,IAAG,IAAI,CAAC,CAAA,AAAC,CAAC;KAC1E;;;SApCoB,eAAe;gCAsCrC,CAAC",
      "file": "/home/vio/v3metrics/src/ui/ui_app_collection.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport UiApp from './ui_app';\nimport Collection from '../utils/collection';\n\nconst byIdCache = Symbol('byId');\n\nmodule.exports = class UiAppCollection extends Collection {\n\n  constructor(uiExports, parent) {\n    super();\n\n    this.uiExports = uiExports;\n\n    if (!parent) {\n      this.claimedIds = [];\n      this.hidden = new UiAppCollection(uiExports, this);\n    } else {\n      this.claimedIds = parent.claimedIds;\n    }\n\n  }\n\n  new(spec) {\n    if (this.hidden && spec.hidden) {\n      return this.hidden.new(spec);\n    }\n\n    const app = new UiApp(this.uiExports, spec);\n\n    if (_.includes(this.claimedIds, app.id)) {\n      throw new Error('Unable to create two apps with the id ' + app.id + '.');\n    } else {\n      this.claimedIds.push(app.id);\n    }\n\n    this[byIdCache] = null;\n    this.add(app);\n    return app;\n  }\n\n  get byId() {\n    return this[byIdCache] || (this[byIdCache] = _.indexBy([...this], 'id'));\n  }\n\n};\n"
      ]
    },
    "mtime": 1467036622893
  },
  "{\"filename\":\"/home/vio/v3metrics/src/ui/ui_app.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "chain",
              "get",
              "noop",
              "once",
              "pick"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "chain",
                "local": "chain"
              },
              {
                "kind": "named",
                "imported": "get",
                "local": "get"
              },
              {
                "kind": "named",
                "imported": "noop",
                "local": "noop"
              },
              {
                "kind": "named",
                "imported": "once",
                "local": "once"
              },
              {
                "kind": "named",
                "imported": "pick",
                "local": "pick"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar UiApp = (function () {\n  function UiApp(uiExports, spec) {\n    _classCallCheck(this, UiApp);\n\n    this.uiExports = uiExports;\n    this.spec = spec || {};\n\n    this.id = this.spec.id;\n    if (!this.id) {\n      throw new Error('Every app must specify it\\'s id');\n    }\n\n    this.main = this.spec.main;\n    this.title = this.spec.title;\n    this.description = this.spec.description;\n    this.icon = this.spec.icon;\n    this.hidden = !!this.spec.hidden;\n    this.listed = this.spec.listed == null ? !this.hidden : this.spec.listed;\n    this.templateName = this.spec.templateName || 'ui_app';\n\n    if (!this.hidden) {\n      // any non-hidden app has a url, so it gets a \"navLink\"\n      this.navLink = this.uiExports.navLinks['new']({\n        title: this.title,\n        description: this.description,\n        icon: this.icon,\n        url: this.spec.url || '/app/' + this.id\n      });\n\n      if (!this.listed) {\n        // unlisted apps remove their navLinks from the uiExports collection though\n        this.uiExports.navLinks['delete'](this.navLink);\n      }\n    }\n\n    if (this.spec.autoload) {\n      console.warn('\"autoload\" (used by ' + this.id + ' app) is no longer a valid app configuration directive.' + 'Use the \\`ui/autoload/*\\` modules instead.');\n    }\n\n    // once this resolves, no reason to run it again\n    this.getModules = (0, _lodash.once)(this.getModules);\n\n    // variables that are injected into the browser, must serialize to JSON\n    this.getInjectedVars = this.spec.injectVars || _lodash.noop;\n  }\n\n  _createClass(UiApp, [{\n    key: 'getModules',\n    value: function getModules() {\n      return (0, _lodash.chain)([this.uiExports.find((0, _lodash.get)(this, 'spec.uses', [])), this.uiExports.find(['chromeNavControls', 'hacks'])]).flatten().uniq().unshift(this.main).value();\n    }\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      return (0, _lodash.pick)(this, ['id', 'title', 'description', 'icon', 'main', 'navLink']);\n    }\n  }]);\n\n  return UiApp;\n})();\n\nmodule.exports = UiApp;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3VpL3VpX2FwcC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7OztzQkFBNkMsUUFBUTs7OztJQUcvQyxLQUFLO0FBQ0UsV0FEUCxLQUFLLENBQ0csU0FBUyxFQUFFLElBQUksRUFBRTswQkFEekIsS0FBSzs7QUFFUCxRQUFJLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQztBQUMzQixRQUFJLENBQUMsSUFBSSxHQUFHLElBQUksSUFBSSxFQUFFLENBQUM7O0FBRXZCLFFBQUksQ0FBQyxFQUFFLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUM7QUFDdkIsUUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUU7QUFDWixZQUFNLElBQUksS0FBSyxDQUFDLGlDQUFpQyxDQUFDLENBQUM7S0FDcEQ7O0FBRUQsUUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQztBQUMzQixRQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO0FBQzdCLFFBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUM7QUFDekMsUUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQztBQUMzQixRQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQztBQUNqQyxRQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxJQUFJLElBQUksR0FBRyxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUM7QUFDekUsUUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksSUFBSSxRQUFRLENBQUM7O0FBRXZELFFBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFOztBQUVoQixVQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxPQUFJLENBQUM7QUFDekMsYUFBSyxFQUFFLElBQUksQ0FBQyxLQUFLO0FBQ2pCLG1CQUFXLEVBQUUsSUFBSSxDQUFDLFdBQVc7QUFDN0IsWUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJO0FBQ2YsV0FBRyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxjQUFZLElBQUksQ0FBQyxFQUFFLEFBQUU7T0FDeEMsQ0FBQyxDQUFDOztBQUVILFVBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFOztBQUVoQixZQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsVUFBTyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztPQUM5QztLQUNGOztBQUVELFFBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUU7QUFDdEIsYUFBTyxDQUFDLElBQUksQ0FDVix5QkFBdUIsSUFBSSxDQUFDLEVBQUUsK0RBQzlCLDRDQUE0QyxDQUM3QyxDQUFDO0tBQ0g7OztBQUdELFFBQUksQ0FBQyxVQUFVLEdBQUcsa0JBQUssSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDOzs7QUFHeEMsUUFBSSxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsZ0JBQVEsQ0FBQztHQUNyRDs7ZUE3Q0csS0FBSzs7V0ErQ0Msc0JBQUc7QUFDWCxhQUFPLG1CQUFNLENBQ1gsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsaUJBQUksSUFBSSxFQUFFLFdBQVcsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUMvQyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLG1CQUFtQixFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQ3BELENBQUMsQ0FDRCxPQUFPLEVBQUUsQ0FDVCxJQUFJLEVBQUUsQ0FDTixPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUNsQixLQUFLLEVBQUUsQ0FBQztLQUNWOzs7V0FFSyxrQkFBRztBQUNQLGFBQU8sa0JBQUssSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxTQUFTLENBQUMsQ0FBQyxDQUFDO0tBQzlFOzs7U0E1REcsS0FBSzs7O0FBK0RYLE1BQU0sQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3VpL3VpX2FwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNoYWluLCBnZXQsIG5vb3AsIG9uY2UsIHBpY2sgfSBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcblxuY2xhc3MgVWlBcHAge1xuICBjb25zdHJ1Y3Rvcih1aUV4cG9ydHMsIHNwZWMpIHtcbiAgICB0aGlzLnVpRXhwb3J0cyA9IHVpRXhwb3J0cztcbiAgICB0aGlzLnNwZWMgPSBzcGVjIHx8IHt9O1xuXG4gICAgdGhpcy5pZCA9IHRoaXMuc3BlYy5pZDtcbiAgICBpZiAoIXRoaXMuaWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRXZlcnkgYXBwIG11c3Qgc3BlY2lmeSBpdFxcJ3MgaWQnKTtcbiAgICB9XG5cbiAgICB0aGlzLm1haW4gPSB0aGlzLnNwZWMubWFpbjtcbiAgICB0aGlzLnRpdGxlID0gdGhpcy5zcGVjLnRpdGxlO1xuICAgIHRoaXMuZGVzY3JpcHRpb24gPSB0aGlzLnNwZWMuZGVzY3JpcHRpb247XG4gICAgdGhpcy5pY29uID0gdGhpcy5zcGVjLmljb247XG4gICAgdGhpcy5oaWRkZW4gPSAhIXRoaXMuc3BlYy5oaWRkZW47XG4gICAgdGhpcy5saXN0ZWQgPSB0aGlzLnNwZWMubGlzdGVkID09IG51bGwgPyAhdGhpcy5oaWRkZW4gOiB0aGlzLnNwZWMubGlzdGVkO1xuICAgIHRoaXMudGVtcGxhdGVOYW1lID0gdGhpcy5zcGVjLnRlbXBsYXRlTmFtZSB8fCAndWlfYXBwJztcblxuICAgIGlmICghdGhpcy5oaWRkZW4pIHtcbiAgICAgIC8vIGFueSBub24taGlkZGVuIGFwcCBoYXMgYSB1cmwsIHNvIGl0IGdldHMgYSBcIm5hdkxpbmtcIlxuICAgICAgdGhpcy5uYXZMaW5rID0gdGhpcy51aUV4cG9ydHMubmF2TGlua3MubmV3KHtcbiAgICAgICAgdGl0bGU6IHRoaXMudGl0bGUsXG4gICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLmRlc2NyaXB0aW9uLFxuICAgICAgICBpY29uOiB0aGlzLmljb24sXG4gICAgICAgIHVybDogdGhpcy5zcGVjLnVybCB8fCBgL2FwcC8ke3RoaXMuaWR9YFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghdGhpcy5saXN0ZWQpIHtcbiAgICAgICAgLy8gdW5saXN0ZWQgYXBwcyByZW1vdmUgdGhlaXIgbmF2TGlua3MgZnJvbSB0aGUgdWlFeHBvcnRzIGNvbGxlY3Rpb24gdGhvdWdoXG4gICAgICAgIHRoaXMudWlFeHBvcnRzLm5hdkxpbmtzLmRlbGV0ZSh0aGlzLm5hdkxpbmspO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLnNwZWMuYXV0b2xvYWQpIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgYFwiYXV0b2xvYWRcIiAodXNlZCBieSAke3RoaXMuaWR9IGFwcCkgaXMgbm8gbG9uZ2VyIGEgdmFsaWQgYXBwIGNvbmZpZ3VyYXRpb24gZGlyZWN0aXZlLmAgK1xuICAgICAgICAnVXNlIHRoZSBcXGB1aS9hdXRvbG9hZC8qXFxgIG1vZHVsZXMgaW5zdGVhZC4nXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIG9uY2UgdGhpcyByZXNvbHZlcywgbm8gcmVhc29uIHRvIHJ1biBpdCBhZ2FpblxuICAgIHRoaXMuZ2V0TW9kdWxlcyA9IG9uY2UodGhpcy5nZXRNb2R1bGVzKTtcblxuICAgIC8vIHZhcmlhYmxlcyB0aGF0IGFyZSBpbmplY3RlZCBpbnRvIHRoZSBicm93c2VyLCBtdXN0IHNlcmlhbGl6ZSB0byBKU09OXG4gICAgdGhpcy5nZXRJbmplY3RlZFZhcnMgPSB0aGlzLnNwZWMuaW5qZWN0VmFycyB8fCBub29wO1xuICB9XG5cbiAgZ2V0TW9kdWxlcygpIHtcbiAgICByZXR1cm4gY2hhaW4oW1xuICAgICAgdGhpcy51aUV4cG9ydHMuZmluZChnZXQodGhpcywgJ3NwZWMudXNlcycsIFtdKSksXG4gICAgICB0aGlzLnVpRXhwb3J0cy5maW5kKFsnY2hyb21lTmF2Q29udHJvbHMnLCAnaGFja3MnXSksXG4gICAgXSlcbiAgICAuZmxhdHRlbigpXG4gICAgLnVuaXEoKVxuICAgIC51bnNoaWZ0KHRoaXMubWFpbilcbiAgICAudmFsdWUoKTtcbiAgfVxuXG4gIHRvSlNPTigpIHtcbiAgICByZXR1cm4gcGljayh0aGlzLCBbJ2lkJywgJ3RpdGxlJywgJ2Rlc2NyaXB0aW9uJywgJ2ljb24nLCAnbWFpbicsICduYXZMaW5rJ10pO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gVWlBcHA7XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/ui/ui_app.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;sBAA6C,QAAQ;;;;IAG/C,KAAK;AACE,WADP,KAAK,CACG,SAAS,EAAE,IAAI,EAAE;0BADzB,KAAK;;AAEP,QAAI,CAAC,SAAS,GAAG,SAAS,CAAC;AAC3B,QAAI,CAAC,IAAI,GAAG,IAAI,IAAI,EAAE,CAAC;;AAEvB,QAAI,CAAC,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC;AACvB,QAAI,CAAC,IAAI,CAAC,EAAE,EAAE;AACZ,YAAM,IAAI,KAAK,CAAC,iCAAiC,CAAC,CAAC;KACpD;;AAED,QAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;AAC3B,QAAI,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC;AAC7B,QAAI,CAAC,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC;AACzC,QAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;AAC3B,QAAI,CAAC,MAAM,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;AACjC,QAAI,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,IAAI,GAAG,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;AACzE,QAAI,CAAC,YAAY,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,IAAI,QAAQ,CAAC;;AAEvD,QAAI,CAAC,IAAI,CAAC,MAAM,EAAE;;AAEhB,UAAI,CAAC,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,QAAQ,OAAI,CAAC;AACzC,aAAK,EAAE,IAAI,CAAC,KAAK;AACjB,mBAAW,EAAE,IAAI,CAAC,WAAW;AAC7B,YAAI,EAAE,IAAI,CAAC,IAAI;AACf,WAAG,EAAE,IAAI,CAAC,IAAI,CAAC,GAAG,cAAY,IAAI,CAAC,EAAE,AAAE;OACxC,CAAC,CAAC;;AAEH,UAAI,CAAC,IAAI,CAAC,MAAM,EAAE;;AAEhB,YAAI,CAAC,SAAS,CAAC,QAAQ,UAAO,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;OAC9C;KACF;;AAED,QAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;AACtB,aAAO,CAAC,IAAI,CACV,yBAAuB,IAAI,CAAC,EAAE,+DAC9B,4CAA4C,CAC7C,CAAC;KACH;;;AAGD,QAAI,CAAC,UAAU,GAAG,kBAAK,IAAI,CAAC,UAAU,CAAC,CAAC;;;AAGxC,QAAI,CAAC,eAAe,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,gBAAQ,CAAC;GACrD;;eA7CG,KAAK;;WA+CC,sBAAG;AACX,aAAO,mBAAM,CACX,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,iBAAI,IAAI,EAAE,WAAW,EAAE,EAAE,CAAC,CAAC,EAC/C,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,mBAAmB,EAAE,OAAO,CAAC,CAAC,CACpD,CAAC,CACD,OAAO,EAAE,CACT,IAAI,EAAE,CACN,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAClB,KAAK,EAAE,CAAC;KACV;;;WAEK,kBAAG;AACP,aAAO,kBAAK,IAAI,EAAE,CAAC,IAAI,EAAE,OAAO,EAAE,aAAa,EAAE,MAAM,EAAE,MAAM,EAAE,SAAS,CAAC,CAAC,CAAC;KAC9E;;;SA5DG,KAAK;;;AA+DX,MAAM,CAAC,OAAO,GAAG,KAAK,CAAC",
      "file": "/home/vio/v3metrics/src/ui/ui_app.js",
      "sourcesContent": [
        "import { chain, get, noop, once, pick } from 'lodash';\nimport _ from 'lodash';\n\nclass UiApp {\n  constructor(uiExports, spec) {\n    this.uiExports = uiExports;\n    this.spec = spec || {};\n\n    this.id = this.spec.id;\n    if (!this.id) {\n      throw new Error('Every app must specify it\\'s id');\n    }\n\n    this.main = this.spec.main;\n    this.title = this.spec.title;\n    this.description = this.spec.description;\n    this.icon = this.spec.icon;\n    this.hidden = !!this.spec.hidden;\n    this.listed = this.spec.listed == null ? !this.hidden : this.spec.listed;\n    this.templateName = this.spec.templateName || 'ui_app';\n\n    if (!this.hidden) {\n      // any non-hidden app has a url, so it gets a \"navLink\"\n      this.navLink = this.uiExports.navLinks.new({\n        title: this.title,\n        description: this.description,\n        icon: this.icon,\n        url: this.spec.url || `/app/${this.id}`\n      });\n\n      if (!this.listed) {\n        // unlisted apps remove their navLinks from the uiExports collection though\n        this.uiExports.navLinks.delete(this.navLink);\n      }\n    }\n\n    if (this.spec.autoload) {\n      console.warn(\n        `\"autoload\" (used by ${this.id} app) is no longer a valid app configuration directive.` +\n        'Use the \\`ui/autoload/*\\` modules instead.'\n      );\n    }\n\n    // once this resolves, no reason to run it again\n    this.getModules = once(this.getModules);\n\n    // variables that are injected into the browser, must serialize to JSON\n    this.getInjectedVars = this.spec.injectVars || noop;\n  }\n\n  getModules() {\n    return chain([\n      this.uiExports.find(get(this, 'spec.uses', [])),\n      this.uiExports.find(['chromeNavControls', 'hacks']),\n    ])\n    .flatten()\n    .uniq()\n    .unshift(this.main)\n    .value();\n  }\n\n  toJSON() {\n    return pick(this, ['id', 'title', 'description', 'icon', 'main', 'navLink']);\n  }\n}\n\nmodule.exports = UiApp;\n"
      ]
    },
    "mtime": 1467036622893
  },
  "{\"filename\":\"/home/vio/v3metrics/src/ui/ui_nav_link_collection.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "sortBy"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "sortBy",
                "local": "sortBy"
              }
            ]
          },
          {
            "source": "./ui_nav_link",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "UiNavLink"
              }
            ]
          },
          {
            "source": "../utils/collection",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Collection"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "UiNavLinkCollection"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "UiNavLinkCollection",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "get",
        "inherits",
        "create-class",
        "class-call-check",
        "to-consumable-array",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i]; return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _lodash = require('lodash');\n\nvar _ui_nav_link = require('./ui_nav_link');\n\nvar _ui_nav_link2 = _interopRequireDefault(_ui_nav_link);\n\nvar _utilsCollection = require('../utils/collection');\n\nvar _utilsCollection2 = _interopRequireDefault(_utilsCollection);\n\nvar inOrderCache = Symbol('inOrder');\n\nvar UiNavLinkCollection = (function (_Collection) {\n  _inherits(UiNavLinkCollection, _Collection);\n\n  function UiNavLinkCollection(uiExports, parent) {\n    _classCallCheck(this, UiNavLinkCollection);\n\n    _get(Object.getPrototypeOf(UiNavLinkCollection.prototype), 'constructor', this).call(this);\n    this.uiExports = uiExports;\n  }\n\n  _createClass(UiNavLinkCollection, [{\n    key: 'new',\n    value: function _new(spec) {\n      var link = new _ui_nav_link2['default'](this.uiExports, spec);\n      this[inOrderCache] = null;\n      this.add(link);\n      return link;\n    }\n  }, {\n    key: 'delete',\n    value: function _delete(value) {\n      this[inOrderCache] = null;\n      return _get(Object.getPrototypeOf(UiNavLinkCollection.prototype), 'delete', this).call(this, value);\n    }\n  }, {\n    key: 'inOrder',\n    get: function get() {\n      if (!this[inOrderCache]) {\n        this[inOrderCache] = (0, _lodash.sortBy)([].concat(_toConsumableArray(this)), 'order');\n      }\n\n      return this[inOrderCache];\n    }\n  }]);\n\n  return UiNavLinkCollection;\n})(_utilsCollection2['default']);\n\nexports['default'] = UiNavLinkCollection;\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3VpL3VpX25hdl9saW5rX2NvbGxlY3Rpb24uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O3NCQUF1QixRQUFROzsyQkFDVCxlQUFlOzs7OytCQUNkLHFCQUFxQjs7OztBQUU1QyxJQUFNLFlBQVksR0FBRyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUM7O0lBRWxCLG1CQUFtQjtZQUFuQixtQkFBbUI7O0FBRTNCLFdBRlEsbUJBQW1CLENBRTFCLFNBQVMsRUFBRSxNQUFNLEVBQUU7MEJBRlosbUJBQW1COztBQUdwQywrQkFIaUIsbUJBQW1CLDZDQUc1QjtBQUNSLFFBQUksQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO0dBQzVCOztlQUxrQixtQkFBbUI7O1dBT25DLGNBQUMsSUFBSSxFQUFFO0FBQ1IsVUFBTSxJQUFJLEdBQUcsNkJBQWMsSUFBSSxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsQ0FBQztBQUNqRCxVQUFJLENBQUMsWUFBWSxDQUFDLEdBQUcsSUFBSSxDQUFDO0FBQzFCLFVBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDZixhQUFPLElBQUksQ0FBQztLQUNiOzs7V0FVSyxpQkFBQyxLQUFLLEVBQUU7QUFDWixVQUFJLENBQUMsWUFBWSxDQUFDLEdBQUcsSUFBSSxDQUFDO0FBQzFCLHdDQXhCaUIsbUJBQW1CLHdDQXdCaEIsS0FBSyxFQUFFO0tBQzVCOzs7U0FYVSxlQUFHO0FBQ1osVUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsRUFBRTtBQUN2QixZQUFJLENBQUMsWUFBWSxDQUFDLEdBQUcsaURBQVcsSUFBSSxJQUFHLE9BQU8sQ0FBQyxDQUFDO09BQ2pEOztBQUVELGFBQU8sSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO0tBQzNCOzs7U0FwQmtCLG1CQUFtQjs7O3FCQUFuQixtQkFBbUI7QUEyQnZDLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvdWkvdWlfbmF2X2xpbmtfY29sbGVjdGlvbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNvcnRCeSB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgVWlOYXZMaW5rIGZyb20gJy4vdWlfbmF2X2xpbmsnO1xuaW1wb3J0IENvbGxlY3Rpb24gZnJvbSAnLi4vdXRpbHMvY29sbGVjdGlvbic7XG5cbmNvbnN0IGluT3JkZXJDYWNoZSA9IFN5bWJvbCgnaW5PcmRlcicpO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVaU5hdkxpbmtDb2xsZWN0aW9uIGV4dGVuZHMgQ29sbGVjdGlvbiB7XG5cbiAgY29uc3RydWN0b3IodWlFeHBvcnRzLCBwYXJlbnQpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMudWlFeHBvcnRzID0gdWlFeHBvcnRzO1xuICB9XG5cbiAgbmV3KHNwZWMpIHtcbiAgICBjb25zdCBsaW5rID0gbmV3IFVpTmF2TGluayh0aGlzLnVpRXhwb3J0cywgc3BlYyk7XG4gICAgdGhpc1tpbk9yZGVyQ2FjaGVdID0gbnVsbDtcbiAgICB0aGlzLmFkZChsaW5rKTtcbiAgICByZXR1cm4gbGluaztcbiAgfVxuXG4gIGdldCBpbk9yZGVyKCkge1xuICAgIGlmICghdGhpc1tpbk9yZGVyQ2FjaGVdKSB7XG4gICAgICB0aGlzW2luT3JkZXJDYWNoZV0gPSBzb3J0QnkoWy4uLnRoaXNdLCAnb3JkZXInKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpc1tpbk9yZGVyQ2FjaGVdO1xuICB9XG5cbiAgZGVsZXRlKHZhbHVlKSB7XG4gICAgdGhpc1tpbk9yZGVyQ2FjaGVdID0gbnVsbDtcbiAgICByZXR1cm4gc3VwZXIuZGVsZXRlKHZhbHVlKTtcbiAgfVxuXG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/ui/ui_nav_link_collection.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;;;;;;;;;sBAAuB,QAAQ;;2BACT,eAAe;;;;+BACd,qBAAqB;;;;AAE5C,IAAM,YAAY,GAAG,MAAM,CAAC,SAAS,CAAC,CAAC;;IAElB,mBAAmB;YAAnB,mBAAmB;;AAE3B,WAFQ,mBAAmB,CAE1B,SAAS,EAAE,MAAM,EAAE;0BAFZ,mBAAmB;;AAGpC,+BAHiB,mBAAmB,6CAG5B;AACR,QAAI,CAAC,SAAS,GAAG,SAAS,CAAC;GAC5B;;eALkB,mBAAmB;;WAOnC,cAAC,IAAI,EAAE;AACR,UAAM,IAAI,GAAG,6BAAc,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;AACjD,UAAI,CAAC,YAAY,CAAC,GAAG,IAAI,CAAC;AAC1B,UAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;AACf,aAAO,IAAI,CAAC;KACb;;;WAUK,iBAAC,KAAK,EAAE;AACZ,UAAI,CAAC,YAAY,CAAC,GAAG,IAAI,CAAC;AAC1B,wCAxBiB,mBAAmB,wCAwBhB,KAAK,EAAE;KAC5B;;;SAXU,eAAG;AACZ,UAAI,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE;AACvB,YAAI,CAAC,YAAY,CAAC,GAAG,iDAAW,IAAI,IAAG,OAAO,CAAC,CAAC;OACjD;;AAED,aAAO,IAAI,CAAC,YAAY,CAAC,CAAC;KAC3B;;;SApBkB,mBAAmB;;;qBAAnB,mBAAmB;AA2BvC,CAAC",
      "file": "/home/vio/v3metrics/src/ui/ui_nav_link_collection.js",
      "sourcesContent": [
        "import { sortBy } from 'lodash';\nimport UiNavLink from './ui_nav_link';\nimport Collection from '../utils/collection';\n\nconst inOrderCache = Symbol('inOrder');\n\nexport default class UiNavLinkCollection extends Collection {\n\n  constructor(uiExports, parent) {\n    super();\n    this.uiExports = uiExports;\n  }\n\n  new(spec) {\n    const link = new UiNavLink(this.uiExports, spec);\n    this[inOrderCache] = null;\n    this.add(link);\n    return link;\n  }\n\n  get inOrder() {\n    if (!this[inOrderCache]) {\n      this[inOrderCache] = sortBy([...this], 'order');\n    }\n\n    return this[inOrderCache];\n  }\n\n  delete(value) {\n    this[inOrderCache] = null;\n    return super.delete(value);\n  }\n\n};\n"
      ]
    },
    "mtime": 1467036622893
  },
  "{\"filename\":\"/home/vio/v3metrics/src/ui/ui_nav_link.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "pick"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "pick",
                "local": "pick"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "join"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "join",
                "local": "join"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "UiNavLink"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "UiNavLink",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _lodash = require('lodash');\n\nvar _path = require('path');\n\nvar UiNavLink = (function () {\n  function UiNavLink(uiExports, spec) {\n    _classCallCheck(this, UiNavLink);\n\n    this.title = spec.title;\n    this.order = spec.order || 0;\n    this.url = '' + (uiExports.urlBasePath || '') + spec.url;\n    this.description = spec.description;\n    this.icon = spec.icon;\n    this.linkToLastSubUrl = spec.linkToLastSubUrl === false ? false : true;\n  }\n\n  _createClass(UiNavLink, [{\n    key: 'toJSON',\n    value: function toJSON() {\n      return (0, _lodash.pick)(this, ['title', 'url', 'order', 'description', 'icon', 'linkToLastSubUrl']);\n    }\n  }]);\n\n  return UiNavLink;\n})();\n\nexports['default'] = UiNavLink;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3VpL3VpX25hdl9saW5rLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7c0JBQXFCLFFBQVE7O29CQUNSLE1BQU07O0lBRU4sU0FBUztBQUNqQixXQURRLFNBQVMsQ0FDaEIsU0FBUyxFQUFFLElBQUksRUFBRTswQkFEVixTQUFTOztBQUUxQixRQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUM7QUFDeEIsUUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxJQUFJLENBQUMsQ0FBQztBQUM3QixRQUFJLENBQUMsR0FBRyxTQUFNLFNBQVMsQ0FBQyxXQUFXLElBQUksRUFBRSxDQUFBLEdBQUcsSUFBSSxDQUFDLEdBQUcsQUFBRSxDQUFDO0FBQ3ZELFFBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQztBQUNwQyxRQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUM7QUFDdEIsUUFBSSxDQUFDLGdCQUFnQixHQUFHLElBQUksQ0FBQyxnQkFBZ0IsS0FBSyxLQUFLLEdBQUcsS0FBSyxHQUFHLElBQUksQ0FBQztHQUN4RTs7ZUFSa0IsU0FBUzs7V0FVdEIsa0JBQUc7QUFDUCxhQUFPLGtCQUFLLElBQUksRUFBRSxDQUFDLE9BQU8sRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLEVBQUUsa0JBQWtCLENBQUMsQ0FBQyxDQUFDO0tBQ3pGOzs7U0Faa0IsU0FBUzs7O3FCQUFULFNBQVMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvdWkvdWlfbmF2X2xpbmsuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwaWNrIH0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IGpvaW4gfSBmcm9tICdwYXRoJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVWlOYXZMaW5rIHtcbiAgY29uc3RydWN0b3IodWlFeHBvcnRzLCBzcGVjKSB7XG4gICAgdGhpcy50aXRsZSA9IHNwZWMudGl0bGU7XG4gICAgdGhpcy5vcmRlciA9IHNwZWMub3JkZXIgfHwgMDtcbiAgICB0aGlzLnVybCA9IGAke3VpRXhwb3J0cy51cmxCYXNlUGF0aCB8fCAnJ30ke3NwZWMudXJsfWA7XG4gICAgdGhpcy5kZXNjcmlwdGlvbiA9IHNwZWMuZGVzY3JpcHRpb247XG4gICAgdGhpcy5pY29uID0gc3BlYy5pY29uO1xuICAgIHRoaXMubGlua1RvTGFzdFN1YlVybCA9IHNwZWMubGlua1RvTGFzdFN1YlVybCA9PT0gZmFsc2UgPyBmYWxzZSA6IHRydWU7XG4gIH1cblxuICB0b0pTT04oKSB7XG4gICAgcmV0dXJuIHBpY2sodGhpcywgWyd0aXRsZScsICd1cmwnLCAnb3JkZXInLCAnZGVzY3JpcHRpb24nLCAnaWNvbicsICdsaW5rVG9MYXN0U3ViVXJsJ10pO1xuICB9XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/ui/ui_nav_link.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;sBAAqB,QAAQ;;oBACR,MAAM;;IAEN,SAAS;AACjB,WADQ,SAAS,CAChB,SAAS,EAAE,IAAI,EAAE;0BADV,SAAS;;AAE1B,QAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;AACxB,QAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,IAAI,CAAC,CAAC;AAC7B,QAAI,CAAC,GAAG,SAAM,SAAS,CAAC,WAAW,IAAI,EAAE,CAAA,GAAG,IAAI,CAAC,GAAG,AAAE,CAAC;AACvD,QAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC;AACpC,QAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;AACtB,QAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,gBAAgB,KAAK,KAAK,GAAG,KAAK,GAAG,IAAI,CAAC;GACxE;;eARkB,SAAS;;WAUtB,kBAAG;AACP,aAAO,kBAAK,IAAI,EAAE,CAAC,OAAO,EAAE,KAAK,EAAE,OAAO,EAAE,aAAa,EAAE,MAAM,EAAE,kBAAkB,CAAC,CAAC,CAAC;KACzF;;;SAZkB,SAAS;;;qBAAT,SAAS",
      "file": "/home/vio/v3metrics/src/ui/ui_nav_link.js",
      "sourcesContent": [
        "import { pick } from 'lodash';\nimport { join } from 'path';\n\nexport default class UiNavLink {\n  constructor(uiExports, spec) {\n    this.title = spec.title;\n    this.order = spec.order || 0;\n    this.url = `${uiExports.urlBasePath || ''}${spec.url}`;\n    this.description = spec.description;\n    this.icon = spec.icon;\n    this.linkToLastSubUrl = spec.linkToLastSubUrl === false ? false : true;\n  }\n\n  toJSON() {\n    return pick(this, ['title', 'url', 'order', 'description', 'icon', 'linkToLastSubUrl']);\n  }\n}\n"
      ]
    },
    "mtime": 1467036622893
  },
  "{\"filename\":\"/home/vio/v3metrics/src/ui/ui_bundle.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "path",
            "imported": [
              "join"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "join",
                "local": "join"
              }
            ]
          },
          {
            "source": "bluebird",
            "imported": [
              "promisify"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "promisify",
                "local": "promisify"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "async-to-generator"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _path = require('path');\n\nvar _bluebird = require('bluebird');\n\nvar read = (0, _bluebird.promisify)(require('fs').readFile);\nvar write = (0, _bluebird.promisify)(require('fs').writeFile);\nvar unlink = (0, _bluebird.promisify)(require('fs').unlink);\nvar stat = (0, _bluebird.promisify)(require('fs').stat);\n\nmodule.exports = (function () {\n  function UiBundle(opts) {\n    _classCallCheck(this, UiBundle);\n\n    opts = opts || {};\n    this.id = opts.id;\n    this.modules = opts.modules;\n    this.template = opts.template;\n    this.env = opts.env;\n\n    var pathBase = (0, _path.join)(this.env.workingDir, this.id);\n    this.entryPath = pathBase + '.entry.js';\n    this.outputPath = pathBase + '.bundle.js';\n  }\n\n  _createClass(UiBundle, [{\n    key: 'renderContent',\n    value: function renderContent() {\n      return this.template({\n        env: this.env,\n        bundle: this\n      });\n    }\n  }, {\n    key: 'readEntryFile',\n    value: _asyncToGenerator(function* () {\n      try {\n        var content = yield read(this.entryPath);\n        return content.toString('utf8');\n      } catch (e) {\n        return null;\n      }\n    })\n  }, {\n    key: 'writeEntryFile',\n    value: _asyncToGenerator(function* () {\n      return yield write(this.entryPath, this.renderContent(), { encoding: 'utf8' });\n    })\n  }, {\n    key: 'clearBundleFile',\n    value: _asyncToGenerator(function* () {\n      try {\n        yield unlink(this.outputPath);\n      } catch (e) {\n        return null;\n      }\n    })\n  }, {\n    key: 'checkForExistingOutput',\n    value: _asyncToGenerator(function* () {\n      try {\n        yield stat(this.outputPath);\n        return true;\n      } catch (e) {\n        return false;\n      }\n    })\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      return {\n        id: this.id,\n        modules: this.modules,\n        entryPath: this.entryPath,\n        outputPath: this.outputPath\n      };\n    }\n  }]);\n\n  return UiBundle;\n})();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3VpL3VpX2J1bmRsZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7OztvQkFBcUIsTUFBTTs7d0JBQ0QsVUFBVTs7QUFFcEMsSUFBTSxJQUFJLEdBQUcseUJBQVUsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQy9DLElBQU0sS0FBSyxHQUFHLHlCQUFVLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUNqRCxJQUFNLE1BQU0sR0FBRyx5QkFBVSxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDL0MsSUFBTSxJQUFJLEdBQUcseUJBQVUsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDOztBQUUzQyxNQUFNLENBQUMsT0FBTztBQUNELFdBRFUsUUFBUSxDQUNqQixJQUFJLEVBQUU7MEJBREcsUUFBUTs7QUFHM0IsUUFBSSxHQUFHLElBQUksSUFBSSxFQUFFLENBQUM7QUFDbEIsUUFBSSxDQUFDLEVBQUUsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDO0FBQ2xCLFFBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQztBQUM1QixRQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUM7QUFDOUIsUUFBSSxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDOztBQUVwQixRQUFNLFFBQVEsR0FBRyxnQkFBSyxJQUFJLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDcEQsUUFBSSxDQUFDLFNBQVMsR0FBTSxRQUFRLGNBQVcsQ0FBQztBQUN4QyxRQUFJLENBQUMsVUFBVSxHQUFNLFFBQVEsZUFBWSxDQUFDO0dBRTNDOztlQWJvQixRQUFROztXQWVoQix5QkFBRztBQUNkLGFBQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQztBQUNuQixXQUFHLEVBQUUsSUFBSSxDQUFDLEdBQUc7QUFDYixjQUFNLEVBQUUsSUFBSTtPQUNiLENBQUMsQ0FBQztLQUNKOzs7NkJBRWtCLGFBQUc7QUFDcEIsVUFBSTtBQUNGLFlBQU0sT0FBTyxHQUFHLE1BQU0sSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUMzQyxlQUFPLE9BQU8sQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUM7T0FDakMsQ0FDRCxPQUFPLENBQUMsRUFBRTtBQUNSLGVBQU8sSUFBSSxDQUFDO09BQ2I7S0FDRjs7OzZCQUVtQixhQUFHO0FBQ3JCLGFBQU8sTUFBTSxLQUFLLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsYUFBYSxFQUFFLEVBQUUsRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQztLQUNoRjs7OzZCQUVvQixhQUFHO0FBQ3RCLFVBQUk7QUFBRSxjQUFNLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7T0FBRSxDQUN0QyxPQUFPLENBQUMsRUFBRTtBQUFFLGVBQU8sSUFBSSxDQUFDO09BQUU7S0FDM0I7Ozs2QkFFMkIsYUFBRztBQUM3QixVQUFJO0FBQ0YsY0FBTSxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQzVCLGVBQU8sSUFBSSxDQUFDO09BQ2IsQ0FDRCxPQUFPLENBQUMsRUFBRTtBQUNSLGVBQU8sS0FBSyxDQUFDO09BQ2Q7S0FDRjs7O1dBRUssa0JBQUc7QUFDUCxhQUFPO0FBQ0wsVUFBRSxFQUFFLElBQUksQ0FBQyxFQUFFO0FBQ1gsZUFBTyxFQUFFLElBQUksQ0FBQyxPQUFPO0FBQ3JCLGlCQUFTLEVBQUUsSUFBSSxDQUFDLFNBQVM7QUFDekIsa0JBQVUsRUFBRSxJQUFJLENBQUMsVUFBVTtPQUM1QixDQUFDO0tBQ0g7OztTQTFEb0IsUUFBUTtJQTJEOUIsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy91aS91aV9idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBqb2luIH0gZnJvbSAncGF0aCc7XG5pbXBvcnQgeyBwcm9taXNpZnkgfSBmcm9tICdibHVlYmlyZCc7XG5cbmNvbnN0IHJlYWQgPSBwcm9taXNpZnkocmVxdWlyZSgnZnMnKS5yZWFkRmlsZSk7XG5jb25zdCB3cml0ZSA9IHByb21pc2lmeShyZXF1aXJlKCdmcycpLndyaXRlRmlsZSk7XG5jb25zdCB1bmxpbmsgPSBwcm9taXNpZnkocmVxdWlyZSgnZnMnKS51bmxpbmspO1xuY29uc3Qgc3RhdCA9IHByb21pc2lmeShyZXF1aXJlKCdmcycpLnN0YXQpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIFVpQnVuZGxlIHtcbiAgY29uc3RydWN0b3Iob3B0cykge1xuXG4gICAgb3B0cyA9IG9wdHMgfHwge307XG4gICAgdGhpcy5pZCA9IG9wdHMuaWQ7XG4gICAgdGhpcy5tb2R1bGVzID0gb3B0cy5tb2R1bGVzO1xuICAgIHRoaXMudGVtcGxhdGUgPSBvcHRzLnRlbXBsYXRlO1xuICAgIHRoaXMuZW52ID0gb3B0cy5lbnY7XG5cbiAgICBjb25zdCBwYXRoQmFzZSA9IGpvaW4odGhpcy5lbnYud29ya2luZ0RpciwgdGhpcy5pZCk7XG4gICAgdGhpcy5lbnRyeVBhdGggPSBgJHtwYXRoQmFzZX0uZW50cnkuanNgO1xuICAgIHRoaXMub3V0cHV0UGF0aCA9IGAke3BhdGhCYXNlfS5idW5kbGUuanNgO1xuXG4gIH1cblxuICByZW5kZXJDb250ZW50KCkge1xuICAgIHJldHVybiB0aGlzLnRlbXBsYXRlKHtcbiAgICAgIGVudjogdGhpcy5lbnYsXG4gICAgICBidW5kbGU6IHRoaXNcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIHJlYWRFbnRyeUZpbGUoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCByZWFkKHRoaXMuZW50cnlQYXRoKTtcbiAgICAgIHJldHVybiBjb250ZW50LnRvU3RyaW5nKCd1dGY4Jyk7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICBhc3luYyB3cml0ZUVudHJ5RmlsZSgpIHtcbiAgICByZXR1cm4gYXdhaXQgd3JpdGUodGhpcy5lbnRyeVBhdGgsIHRoaXMucmVuZGVyQ29udGVudCgpLCB7IGVuY29kaW5nOiAndXRmOCcgfSk7XG4gIH1cblxuICBhc3luYyBjbGVhckJ1bmRsZUZpbGUoKSB7XG4gICAgdHJ5IHsgYXdhaXQgdW5saW5rKHRoaXMub3V0cHV0UGF0aCk7IH1cbiAgICBjYXRjaCAoZSkgeyByZXR1cm4gbnVsbDsgfVxuICB9XG5cbiAgYXN5bmMgY2hlY2tGb3JFeGlzdGluZ091dHB1dCgpIHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgc3RhdCh0aGlzLm91dHB1dFBhdGgpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgdG9KU09OKCkge1xuICAgIHJldHVybiB7XG4gICAgICBpZDogdGhpcy5pZCxcbiAgICAgIG1vZHVsZXM6IHRoaXMubW9kdWxlcyxcbiAgICAgIGVudHJ5UGF0aDogdGhpcy5lbnRyeVBhdGgsXG4gICAgICBvdXRwdXRQYXRoOiB0aGlzLm91dHB1dFBhdGhcbiAgICB9O1xuICB9XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/ui/ui_bundle.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;oBAAqB,MAAM;;wBACD,UAAU;;AAEpC,IAAM,IAAI,GAAG,yBAAU,OAAO,CAAC,IAAI,CAAC,CAAC,QAAQ,CAAC,CAAC;AAC/C,IAAM,KAAK,GAAG,yBAAU,OAAO,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,CAAC;AACjD,IAAM,MAAM,GAAG,yBAAU,OAAO,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,CAAC;AAC/C,IAAM,IAAI,GAAG,yBAAU,OAAO,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC;;AAE3C,MAAM,CAAC,OAAO;AACD,WADU,QAAQ,CACjB,IAAI,EAAE;0BADG,QAAQ;;AAG3B,QAAI,GAAG,IAAI,IAAI,EAAE,CAAC;AAClB,QAAI,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC;AAClB,QAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;AAC5B,QAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;AAC9B,QAAI,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC;;AAEpB,QAAM,QAAQ,GAAG,gBAAK,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC;AACpD,QAAI,CAAC,SAAS,GAAM,QAAQ,cAAW,CAAC;AACxC,QAAI,CAAC,UAAU,GAAM,QAAQ,eAAY,CAAC;GAE3C;;eAboB,QAAQ;;WAehB,yBAAG;AACd,aAAO,IAAI,CAAC,QAAQ,CAAC;AACnB,WAAG,EAAE,IAAI,CAAC,GAAG;AACb,cAAM,EAAE,IAAI;OACb,CAAC,CAAC;KACJ;;;6BAEkB,aAAG;AACpB,UAAI;AACF,YAAM,OAAO,GAAG,MAAM,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;AAC3C,eAAO,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;OACjC,CACD,OAAO,CAAC,EAAE;AACR,eAAO,IAAI,CAAC;OACb;KACF;;;6BAEmB,aAAG;AACrB,aAAO,MAAM,KAAK,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,aAAa,EAAE,EAAE,EAAE,QAAQ,EAAE,MAAM,EAAE,CAAC,CAAC;KAChF;;;6BAEoB,aAAG;AACtB,UAAI;AAAE,cAAM,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;OAAE,CACtC,OAAO,CAAC,EAAE;AAAE,eAAO,IAAI,CAAC;OAAE;KAC3B;;;6BAE2B,aAAG;AAC7B,UAAI;AACF,cAAM,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;AAC5B,eAAO,IAAI,CAAC;OACb,CACD,OAAO,CAAC,EAAE;AACR,eAAO,KAAK,CAAC;OACd;KACF;;;WAEK,kBAAG;AACP,aAAO;AACL,UAAE,EAAE,IAAI,CAAC,EAAE;AACX,eAAO,EAAE,IAAI,CAAC,OAAO;AACrB,iBAAS,EAAE,IAAI,CAAC,SAAS;AACzB,kBAAU,EAAE,IAAI,CAAC,UAAU;OAC5B,CAAC;KACH;;;SA1DoB,QAAQ;IA2D9B,CAAC",
      "file": "/home/vio/v3metrics/src/ui/ui_bundle.js",
      "sourcesContent": [
        "import { join } from 'path';\nimport { promisify } from 'bluebird';\n\nconst read = promisify(require('fs').readFile);\nconst write = promisify(require('fs').writeFile);\nconst unlink = promisify(require('fs').unlink);\nconst stat = promisify(require('fs').stat);\n\nmodule.exports = class UiBundle {\n  constructor(opts) {\n\n    opts = opts || {};\n    this.id = opts.id;\n    this.modules = opts.modules;\n    this.template = opts.template;\n    this.env = opts.env;\n\n    const pathBase = join(this.env.workingDir, this.id);\n    this.entryPath = `${pathBase}.entry.js`;\n    this.outputPath = `${pathBase}.bundle.js`;\n\n  }\n\n  renderContent() {\n    return this.template({\n      env: this.env,\n      bundle: this\n    });\n  }\n\n  async readEntryFile() {\n    try {\n      const content = await read(this.entryPath);\n      return content.toString('utf8');\n    }\n    catch (e) {\n      return null;\n    }\n  }\n\n  async writeEntryFile() {\n    return await write(this.entryPath, this.renderContent(), { encoding: 'utf8' });\n  }\n\n  async clearBundleFile() {\n    try { await unlink(this.outputPath); }\n    catch (e) { return null; }\n  }\n\n  async checkForExistingOutput() {\n    try {\n      await stat(this.outputPath);\n      return true;\n    }\n    catch (e) {\n      return false;\n    }\n  }\n\n  toJSON() {\n    return {\n      id: this.id,\n      modules: this.modules,\n      entryPath: this.entryPath,\n      outputPath: this.outputPath\n    };\n  }\n};\n"
      ]
    },
    "mtime": 1467036622893
  },
  "{\"filename\":\"/home/vio/v3metrics/src/ui/ui_bundle_collection.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./ui_bundle",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "UiBundle"
              }
            ]
          },
          {
            "source": "./app_entry_template",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "appEntryTemplate"
              }
            ]
          },
          {
            "source": "fs",
            "imported": [
              "readFileSync"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "readFileSync",
                "local": "readSync"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "pull",
              "transform",
              "pluck"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "pull",
                "local": "pull"
              },
              {
                "kind": "named",
                "imported": "transform",
                "local": "transform"
              },
              {
                "kind": "named",
                "imported": "pluck",
                "local": "pluck"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "join"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "join",
                "local": "join"
              }
            ]
          },
          {
            "source": "bluebird",
            "imported": [
              "resolve",
              "promisify"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "resolve",
                "local": "resolve"
              },
              {
                "kind": "named",
                "imported": "promisify",
                "local": "promisify"
              }
            ]
          },
          {
            "source": "minimatch",
            "imported": [
              "makeRe"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "makeRe",
                "local": "makeRe"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "async-to-generator",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _ui_bundle = require('./ui_bundle');\n\nvar _ui_bundle2 = _interopRequireDefault(_ui_bundle);\n\nvar _app_entry_template = require('./app_entry_template');\n\nvar _app_entry_template2 = _interopRequireDefault(_app_entry_template);\n\nvar _fs = require('fs');\n\nvar _lodash = require('lodash');\n\nvar _path = require('path');\n\nvar _bluebird = require('bluebird');\n\nvar _minimatch = require('minimatch');\n\nvar rimraf = (0, _bluebird.promisify)(require('rimraf'));\nvar mkdirp = (0, _bluebird.promisify)(require('mkdirp'));\nvar unlink = (0, _bluebird.promisify)(require('fs').unlink);\nvar readdir = (0, _bluebird.promisify)(require('fs').readdir);\n\nvar UiBundleCollection = (function () {\n  function UiBundleCollection(bundlerEnv, filter) {\n    _classCallCheck(this, UiBundleCollection);\n\n    this.each = [];\n    this.env = bundlerEnv;\n    this.filter = (0, _minimatch.makeRe)(filter || '*', {\n      noglobstar: true,\n      noext: true,\n      matchBase: true\n    });\n  }\n\n  _createClass(UiBundleCollection, [{\n    key: 'add',\n    value: function add(bundle) {\n      if (!(bundle instanceof _ui_bundle2['default'])) {\n        throw new TypeError('expected bundle to be an instance of UiBundle');\n      }\n\n      if (this.filter.test(bundle.id)) {\n        this.each.push(bundle);\n      }\n    }\n  }, {\n    key: 'addApp',\n    value: function addApp(app) {\n      this.add(new _ui_bundle2['default']({\n        id: app.id,\n        modules: app.getModules(),\n        template: _app_entry_template2['default'],\n        env: this.env\n      }));\n    }\n  }, {\n    key: 'desc',\n    value: function desc() {\n      switch (this.each.length) {\n        case 0:\n          return '0 bundles';\n        case 1:\n          return 'bundle for ' + this.each[0].id;\n        default:\n          var ids = this.getIds();\n          var last = ids.pop();\n          var commas = ids.join(', ');\n          return 'bundles for ' + commas + ' and ' + last;\n      }\n    }\n  }, {\n    key: 'ensureDir',\n    value: _asyncToGenerator(function* () {\n      yield mkdirp(this.env.workingDir);\n    })\n  }, {\n    key: 'writeEntryFiles',\n    value: _asyncToGenerator(function* () {\n      yield this.ensureDir();\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.each[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var bundle = _step.value;\n\n          var existing = yield bundle.readEntryFile();\n          var expected = bundle.renderContent();\n\n          if (existing !== expected) {\n            yield bundle.writeEntryFile();\n            yield bundle.clearBundleFile();\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator['return']) {\n            _iterator['return']();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    })\n  }, {\n    key: 'getInvalidBundles',\n    value: _asyncToGenerator(function* () {\n      var invalids = new UiBundleCollection(this.env);\n\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = this.each[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var bundle = _step2.value;\n\n          var exists = yield bundle.checkForExistingOutput();\n          if (!exists) {\n            invalids.add(bundle);\n          }\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2['return']) {\n            _iterator2['return']();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      return invalids;\n    })\n  }, {\n    key: 'toWebpackEntries',\n    value: function toWebpackEntries() {\n      return (0, _lodash.transform)(this.each, function (entries, bundle) {\n        entries[bundle.id] = bundle.entryPath;\n      }, {});\n    }\n  }, {\n    key: 'getIds',\n    value: function getIds() {\n      return (0, _lodash.pluck)(this.each, 'id');\n    }\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      return this.each;\n    }\n  }]);\n\n  return UiBundleCollection;\n})();\n\nmodule.exports = UiBundleCollection;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3VpL3VpX2J1bmRsZV9jb2xsZWN0aW9uLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7eUJBS3FCLGFBQWE7Ozs7a0NBQ0wsc0JBQXNCOzs7O2tCQUNWLElBQUk7O3NCQUNOLFFBQVE7O29CQUMxQixNQUFNOzt3QkFDUSxVQUFVOzt5QkFDdEIsV0FBVzs7QUFYbEMsSUFBTSxNQUFNLEdBQUcseUJBQVUsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7QUFDNUMsSUFBTSxNQUFNLEdBQUcseUJBQVUsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7QUFDNUMsSUFBTSxNQUFNLEdBQUcseUJBQVUsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQy9DLElBQU0sT0FBTyxHQUFHLHlCQUFVLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQzs7SUFVM0Msa0JBQWtCO0FBQ1gsV0FEUCxrQkFBa0IsQ0FDVixVQUFVLEVBQUUsTUFBTSxFQUFFOzBCQUQ1QixrQkFBa0I7O0FBRXBCLFFBQUksQ0FBQyxJQUFJLEdBQUcsRUFBRSxDQUFDO0FBQ2YsUUFBSSxDQUFDLEdBQUcsR0FBRyxVQUFVLENBQUM7QUFDdEIsUUFBSSxDQUFDLE1BQU0sR0FBRyx1QkFBTyxNQUFNLElBQUksR0FBRyxFQUFFO0FBQ2xDLGdCQUFVLEVBQUUsSUFBSTtBQUNoQixXQUFLLEVBQUUsSUFBSTtBQUNYLGVBQVMsRUFBRSxJQUFJO0tBQ2hCLENBQUMsQ0FBQztHQUNKOztlQVRHLGtCQUFrQjs7V0FXbkIsYUFBQyxNQUFNLEVBQUU7QUFDVixVQUFJLEVBQUUsTUFBTSxtQ0FBb0IsQUFBQyxFQUFFO0FBQ2pDLGNBQU0sSUFBSSxTQUFTLENBQUMsK0NBQStDLENBQUMsQ0FBQztPQUN0RTs7QUFFRCxVQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUMvQixZQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztPQUN4QjtLQUNGOzs7V0FFSyxnQkFBQyxHQUFHLEVBQUU7QUFDVixVQUFJLENBQUMsR0FBRyxDQUFDLDJCQUFhO0FBQ3BCLFVBQUUsRUFBRSxHQUFHLENBQUMsRUFBRTtBQUNWLGVBQU8sRUFBRSxHQUFHLENBQUMsVUFBVSxFQUFFO0FBQ3pCLGdCQUFRLGlDQUFrQjtBQUMxQixXQUFHLEVBQUUsSUFBSSxDQUFDLEdBQUc7T0FDZCxDQUFDLENBQUMsQ0FBQztLQUNMOzs7V0FFRyxnQkFBRztBQUNMLGNBQVEsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNO0FBQ3RCLGFBQUssQ0FBQztBQUNKLGlCQUFPLFdBQVcsQ0FBQztBQUFBLEFBQ3JCLGFBQUssQ0FBQztBQUNKLGlDQUFxQixJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBRztBQUFBLEFBQ3pDO0FBQ0UsY0FBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO0FBQzFCLGNBQU0sSUFBSSxHQUFHLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQztBQUN2QixjQUFNLE1BQU0sR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQzlCLGtDQUFzQixNQUFNLGFBQVEsSUFBSSxDQUFHO0FBQUEsT0FDOUM7S0FDRjs7OzZCQUVjLGFBQUc7QUFDaEIsWUFBTSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQztLQUNuQzs7OzZCQUVvQixhQUFHO0FBQ3RCLFlBQU0sSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDOzs7Ozs7O0FBRXZCLDZCQUFtQixJQUFJLENBQUMsSUFBSSw4SEFBRTtjQUFyQixNQUFNOztBQUNiLGNBQU0sUUFBUSxHQUFHLE1BQU0sTUFBTSxDQUFDLGFBQWEsRUFBRSxDQUFDO0FBQzlDLGNBQU0sUUFBUSxHQUFHLE1BQU0sQ0FBQyxhQUFhLEVBQUUsQ0FBQzs7QUFFeEMsY0FBSSxRQUFRLEtBQUssUUFBUSxFQUFFO0FBQ3pCLGtCQUFNLE1BQU0sQ0FBQyxjQUFjLEVBQUUsQ0FBQztBQUM5QixrQkFBTSxNQUFNLENBQUMsZUFBZSxFQUFFLENBQUM7V0FDaEM7U0FDRjs7Ozs7Ozs7Ozs7Ozs7O0tBQ0Y7Ozs2QkFFc0IsYUFBRztBQUN4QixVQUFNLFFBQVEsR0FBRyxJQUFJLGtCQUFrQixDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQzs7Ozs7OztBQUVsRCw4QkFBbUIsSUFBSSxDQUFDLElBQUksbUlBQUU7Y0FBckIsTUFBTTs7QUFDYixjQUFNLE1BQU0sR0FBRyxNQUFNLE1BQU0sQ0FBQyxzQkFBc0IsRUFBRSxDQUFDO0FBQ3JELGNBQUksQ0FBQyxNQUFNLEVBQUU7QUFDWCxvQkFBUSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQztXQUN0QjtTQUNGOzs7Ozs7Ozs7Ozs7Ozs7O0FBRUQsYUFBTyxRQUFRLENBQUM7S0FDakI7OztXQUVlLDRCQUFHO0FBQ2pCLGFBQU8sdUJBQVUsSUFBSSxDQUFDLElBQUksRUFBRSxVQUFVLE9BQU8sRUFBRSxNQUFNLEVBQUU7QUFDckQsZUFBTyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsR0FBRyxNQUFNLENBQUMsU0FBUyxDQUFDO09BQ3ZDLEVBQUUsRUFBRSxDQUFDLENBQUM7S0FDUjs7O1dBRUssa0JBQUc7QUFDUCxhQUFPLG1CQUFNLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7S0FDL0I7OztXQUVLLGtCQUFHO0FBQ1AsYUFBTyxJQUFJLENBQUMsSUFBSSxDQUFDO0tBQ2xCOzs7U0F2Rkcsa0JBQWtCOzs7QUEwRnhCLE1BQU0sQ0FBQyxPQUFPLEdBQUcsa0JBQWtCLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvdWkvdWlfYnVuZGxlX2NvbGxlY3Rpb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCByaW1yYWYgPSBwcm9taXNpZnkocmVxdWlyZSgncmltcmFmJykpO1xuY29uc3QgbWtkaXJwID0gcHJvbWlzaWZ5KHJlcXVpcmUoJ21rZGlycCcpKTtcbmNvbnN0IHVubGluayA9IHByb21pc2lmeShyZXF1aXJlKCdmcycpLnVubGluayk7XG5jb25zdCByZWFkZGlyID0gcHJvbWlzaWZ5KHJlcXVpcmUoJ2ZzJykucmVhZGRpcik7XG5cbmltcG9ydCBVaUJ1bmRsZSBmcm9tICcuL3VpX2J1bmRsZSc7XG5pbXBvcnQgYXBwRW50cnlUZW1wbGF0ZSBmcm9tICcuL2FwcF9lbnRyeV90ZW1wbGF0ZSc7XG5pbXBvcnQgeyByZWFkRmlsZVN5bmMgYXMgcmVhZFN5bmMgfSBmcm9tICdmcyc7XG5pbXBvcnQgeyBwdWxsLCB0cmFuc2Zvcm0sIHBsdWNrIH0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IGpvaW4gfSBmcm9tICdwYXRoJztcbmltcG9ydCB7IHJlc29sdmUsIHByb21pc2lmeSB9IGZyb20gJ2JsdWViaXJkJztcbmltcG9ydCB7IG1ha2VSZSB9IGZyb20gJ21pbmltYXRjaCc7XG5cbmNsYXNzIFVpQnVuZGxlQ29sbGVjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKGJ1bmRsZXJFbnYsIGZpbHRlcikge1xuICAgIHRoaXMuZWFjaCA9IFtdO1xuICAgIHRoaXMuZW52ID0gYnVuZGxlckVudjtcbiAgICB0aGlzLmZpbHRlciA9IG1ha2VSZShmaWx0ZXIgfHwgJyonLCB7XG4gICAgICBub2dsb2JzdGFyOiB0cnVlLFxuICAgICAgbm9leHQ6IHRydWUsXG4gICAgICBtYXRjaEJhc2U6IHRydWVcbiAgICB9KTtcbiAgfVxuXG4gIGFkZChidW5kbGUpIHtcbiAgICBpZiAoIShidW5kbGUgaW5zdGFuY2VvZiBVaUJ1bmRsZSkpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2V4cGVjdGVkIGJ1bmRsZSB0byBiZSBhbiBpbnN0YW5jZSBvZiBVaUJ1bmRsZScpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmZpbHRlci50ZXN0KGJ1bmRsZS5pZCkpIHtcbiAgICAgIHRoaXMuZWFjaC5wdXNoKGJ1bmRsZSk7XG4gICAgfVxuICB9XG5cbiAgYWRkQXBwKGFwcCkge1xuICAgIHRoaXMuYWRkKG5ldyBVaUJ1bmRsZSh7XG4gICAgICBpZDogYXBwLmlkLFxuICAgICAgbW9kdWxlczogYXBwLmdldE1vZHVsZXMoKSxcbiAgICAgIHRlbXBsYXRlOiBhcHBFbnRyeVRlbXBsYXRlLFxuICAgICAgZW52OiB0aGlzLmVudlxuICAgIH0pKTtcbiAgfVxuXG4gIGRlc2MoKSB7XG4gICAgc3dpdGNoICh0aGlzLmVhY2gubGVuZ3RoKSB7XG4gICAgICBjYXNlIDA6XG4gICAgICAgIHJldHVybiAnMCBidW5kbGVzJztcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgcmV0dXJuIGBidW5kbGUgZm9yICR7dGhpcy5lYWNoWzBdLmlkfWA7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBjb25zdCBpZHMgPSB0aGlzLmdldElkcygpO1xuICAgICAgICBjb25zdCBsYXN0ID0gaWRzLnBvcCgpO1xuICAgICAgICBjb25zdCBjb21tYXMgPSBpZHMuam9pbignLCAnKTtcbiAgICAgICAgcmV0dXJuIGBidW5kbGVzIGZvciAke2NvbW1hc30gYW5kICR7bGFzdH1gO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGVuc3VyZURpcigpIHtcbiAgICBhd2FpdCBta2RpcnAodGhpcy5lbnYud29ya2luZ0Rpcik7XG4gIH1cblxuICBhc3luYyB3cml0ZUVudHJ5RmlsZXMoKSB7XG4gICAgYXdhaXQgdGhpcy5lbnN1cmVEaXIoKTtcblxuICAgIGZvciAobGV0IGJ1bmRsZSBvZiB0aGlzLmVhY2gpIHtcbiAgICAgIGNvbnN0IGV4aXN0aW5nID0gYXdhaXQgYnVuZGxlLnJlYWRFbnRyeUZpbGUoKTtcbiAgICAgIGNvbnN0IGV4cGVjdGVkID0gYnVuZGxlLnJlbmRlckNvbnRlbnQoKTtcblxuICAgICAgaWYgKGV4aXN0aW5nICE9PSBleHBlY3RlZCkge1xuICAgICAgICBhd2FpdCBidW5kbGUud3JpdGVFbnRyeUZpbGUoKTtcbiAgICAgICAgYXdhaXQgYnVuZGxlLmNsZWFyQnVuZGxlRmlsZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldEludmFsaWRCdW5kbGVzKCkge1xuICAgIGNvbnN0IGludmFsaWRzID0gbmV3IFVpQnVuZGxlQ29sbGVjdGlvbih0aGlzLmVudik7XG5cbiAgICBmb3IgKGxldCBidW5kbGUgb2YgdGhpcy5lYWNoKSB7XG4gICAgICBjb25zdCBleGlzdHMgPSBhd2FpdCBidW5kbGUuY2hlY2tGb3JFeGlzdGluZ091dHB1dCgpO1xuICAgICAgaWYgKCFleGlzdHMpIHtcbiAgICAgICAgaW52YWxpZHMuYWRkKGJ1bmRsZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGludmFsaWRzO1xuICB9XG5cbiAgdG9XZWJwYWNrRW50cmllcygpIHtcbiAgICByZXR1cm4gdHJhbnNmb3JtKHRoaXMuZWFjaCwgZnVuY3Rpb24gKGVudHJpZXMsIGJ1bmRsZSkge1xuICAgICAgZW50cmllc1tidW5kbGUuaWRdID0gYnVuZGxlLmVudHJ5UGF0aDtcbiAgICB9LCB7fSk7XG4gIH1cblxuICBnZXRJZHMoKSB7XG4gICAgcmV0dXJuIHBsdWNrKHRoaXMuZWFjaCwgJ2lkJyk7XG4gIH1cblxuICB0b0pTT04oKSB7XG4gICAgcmV0dXJuIHRoaXMuZWFjaDtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFVpQnVuZGxlQ29sbGVjdGlvbjtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/ui/ui_bundle_collection.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/src/ui/ui_bundle_collection.js",
      "sourcesContent": [
        "const rimraf = promisify(require('rimraf'));\nconst mkdirp = promisify(require('mkdirp'));\nconst unlink = promisify(require('fs').unlink);\nconst readdir = promisify(require('fs').readdir);\n\nimport UiBundle from './ui_bundle';\nimport appEntryTemplate from './app_entry_template';\nimport { readFileSync as readSync } from 'fs';\nimport { pull, transform, pluck } from 'lodash';\nimport { join } from 'path';\nimport { resolve, promisify } from 'bluebird';\nimport { makeRe } from 'minimatch';\n\nclass UiBundleCollection {\n  constructor(bundlerEnv, filter) {\n    this.each = [];\n    this.env = bundlerEnv;\n    this.filter = makeRe(filter || '*', {\n      noglobstar: true,\n      noext: true,\n      matchBase: true\n    });\n  }\n\n  add(bundle) {\n    if (!(bundle instanceof UiBundle)) {\n      throw new TypeError('expected bundle to be an instance of UiBundle');\n    }\n\n    if (this.filter.test(bundle.id)) {\n      this.each.push(bundle);\n    }\n  }\n\n  addApp(app) {\n    this.add(new UiBundle({\n      id: app.id,\n      modules: app.getModules(),\n      template: appEntryTemplate,\n      env: this.env\n    }));\n  }\n\n  desc() {\n    switch (this.each.length) {\n      case 0:\n        return '0 bundles';\n      case 1:\n        return `bundle for ${this.each[0].id}`;\n      default:\n        const ids = this.getIds();\n        const last = ids.pop();\n        const commas = ids.join(', ');\n        return `bundles for ${commas} and ${last}`;\n    }\n  }\n\n  async ensureDir() {\n    await mkdirp(this.env.workingDir);\n  }\n\n  async writeEntryFiles() {\n    await this.ensureDir();\n\n    for (let bundle of this.each) {\n      const existing = await bundle.readEntryFile();\n      const expected = bundle.renderContent();\n\n      if (existing !== expected) {\n        await bundle.writeEntryFile();\n        await bundle.clearBundleFile();\n      }\n    }\n  }\n\n  async getInvalidBundles() {\n    const invalids = new UiBundleCollection(this.env);\n\n    for (let bundle of this.each) {\n      const exists = await bundle.checkForExistingOutput();\n      if (!exists) {\n        invalids.add(bundle);\n      }\n    }\n\n    return invalids;\n  }\n\n  toWebpackEntries() {\n    return transform(this.each, function (entries, bundle) {\n      entries[bundle.id] = bundle.entryPath;\n    }, {});\n  }\n\n  getIds() {\n    return pluck(this.each, 'id');\n  }\n\n  toJSON() {\n    return this.each;\n  }\n}\n\nmodule.exports = UiBundleCollection;\n"
      ]
    },
    "mtime": 1467036622893
  },
  "{\"filename\":\"/home/vio/v3metrics/src/ui/app_entry_template.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nmodule.exports = function (_ref) {\n  var env = _ref.env;\n  var bundle = _ref.bundle;\n\n  var pluginSlug = env.pluginInfo.sort().map(function (p) {\n    return ' *  - ' + p;\n  }).join('\\n');\n\n  var requires = bundle.modules.map(function (m) {\n    return 'require(\\'' + m + '\\');';\n  }).join('\\n');\n\n  return '\\n/**\\n * Test entry file\\n *\\n * This is programatically created and updated, do not modify\\n *\\n * context: ' + JSON.stringify(env.context) + '\\n * includes code from:\\n' + pluginSlug + '\\n *\\n */\\n\\nrequire(\\'ui/chrome\\');\\n' + requires + '\\nrequire(\\'ui/chrome\\').bootstrap(/* xoxo */);\\n\\n';\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3VpL2FwcF9lbnRyeV90ZW1wbGF0ZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU0sQ0FBQyxPQUFPLEdBQUcsVUFBVSxJQUFhLEVBQUU7TUFBZCxHQUFHLEdBQUosSUFBYSxDQUFaLEdBQUc7TUFBRSxNQUFNLEdBQVosSUFBYSxDQUFQLE1BQU07O0FBRXJDLE1BQU0sVUFBVSxHQUFHLEdBQUcsQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLENBQ3ZDLEdBQUcsQ0FBQyxVQUFBLENBQUM7V0FBSSxRQUFRLEdBQUcsQ0FBQztHQUFBLENBQUMsQ0FDdEIsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDOztBQUVaLE1BQU0sUUFBUSxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQzlCLEdBQUcsQ0FBQyxVQUFBLENBQUM7MEJBQWdCLENBQUM7R0FBSyxDQUFDLENBQzVCLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQzs7QUFFWiw0SEFNWSxJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsa0NBRXZDLFVBQVUsOENBS1YsUUFBUSx5REFHUjtDQUVELENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvdWkvYXBwX2VudHJ5X3RlbXBsYXRlLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoe2VudiwgYnVuZGxlfSkge1xuXG4gIGNvbnN0IHBsdWdpblNsdWcgPSBlbnYucGx1Z2luSW5mby5zb3J0KClcbiAgLm1hcChwID0+ICcgKiAgLSAnICsgcClcbiAgLmpvaW4oJ1xcbicpO1xuXG4gIGNvbnN0IHJlcXVpcmVzID0gYnVuZGxlLm1vZHVsZXNcbiAgLm1hcChtID0+IGByZXF1aXJlKCcke219Jyk7YClcbiAgLmpvaW4oJ1xcbicpO1xuXG4gIHJldHVybiBgXG4vKipcbiAqIFRlc3QgZW50cnkgZmlsZVxuICpcbiAqIFRoaXMgaXMgcHJvZ3JhbWF0aWNhbGx5IGNyZWF0ZWQgYW5kIHVwZGF0ZWQsIGRvIG5vdCBtb2RpZnlcbiAqXG4gKiBjb250ZXh0OiAke0pTT04uc3RyaW5naWZ5KGVudi5jb250ZXh0KX1cbiAqIGluY2x1ZGVzIGNvZGUgZnJvbTpcbiR7cGx1Z2luU2x1Z31cbiAqXG4gKi9cblxucmVxdWlyZSgndWkvY2hyb21lJyk7XG4ke3JlcXVpcmVzfVxucmVxdWlyZSgndWkvY2hyb21lJykuYm9vdHN0cmFwKC8qIHhveG8gKi8pO1xuXG5gO1xuXG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/ui/app_entry_template.js"
      ],
      "names": [],
      "mappings": ";;AAAA,MAAM,CAAC,OAAO,GAAG,UAAU,IAAa,EAAE;MAAd,GAAG,GAAJ,IAAa,CAAZ,GAAG;MAAE,MAAM,GAAZ,IAAa,CAAP,MAAM;;AAErC,MAAM,UAAU,GAAG,GAAG,CAAC,UAAU,CAAC,IAAI,EAAE,CACvC,GAAG,CAAC,UAAA,CAAC;WAAI,QAAQ,GAAG,CAAC;GAAA,CAAC,CACtB,IAAI,CAAC,IAAI,CAAC,CAAC;;AAEZ,MAAM,QAAQ,GAAG,MAAM,CAAC,OAAO,CAC9B,GAAG,CAAC,UAAA,CAAC;0BAAgB,CAAC;GAAK,CAAC,CAC5B,IAAI,CAAC,IAAI,CAAC,CAAC;;AAEZ,4HAMY,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,OAAO,CAAC,kCAEvC,UAAU,8CAKV,QAAQ,yDAGR;CAED,CAAC",
      "file": "/home/vio/v3metrics/src/ui/app_entry_template.js",
      "sourcesContent": [
        "module.exports = function ({env, bundle}) {\n\n  const pluginSlug = env.pluginInfo.sort()\n  .map(p => ' *  - ' + p)\n  .join('\\n');\n\n  const requires = bundle.modules\n  .map(m => `require('${m}');`)\n  .join('\\n');\n\n  return `\n/**\n * Test entry file\n *\n * This is programatically created and updated, do not modify\n *\n * context: ${JSON.stringify(env.context)}\n * includes code from:\n${pluginSlug}\n *\n */\n\nrequire('ui/chrome');\n${requires}\nrequire('ui/chrome').bootstrap(/* xoxo */);\n\n`;\n\n};\n"
      ]
    },
    "mtime": 1467036622849
  },
  "{\"filename\":\"/home/vio/v3metrics/src/ui/ui_bundler_env.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "../utils/from_root",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "fromRoot"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "includes",
              "flow",
              "escapeRegExp"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "includes",
                "local": "includes"
              },
              {
                "kind": "named",
                "imported": "flow",
                "local": "flow"
              },
              {
                "kind": "named",
                "imported": "escapeRegExp",
                "local": "escapeRegExp"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "isString",
              "isArray",
              "isPlainObject",
              "get"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "isString",
                "local": "isString"
              },
              {
                "kind": "named",
                "imported": "isArray",
                "local": "isArray"
              },
              {
                "kind": "named",
                "imported": "isPlainObject",
                "local": "isPlainObject"
              },
              {
                "kind": "named",
                "imported": "get",
                "local": "get"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "keys"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "keys",
                "local": "keys"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _utilsFrom_root = require('../utils/from_root');\n\nvar _utilsFrom_root2 = _interopRequireDefault(_utilsFrom_root);\n\nvar _lodash = require('lodash');\n\nvar asRegExp = (0, _lodash.flow)(_lodash.escapeRegExp, function (path) {\n  var last = path.slice(-1);\n  if (last === '/' || last === '\\\\') {\n    // match a directory explicitly\n    return path + '.*';\n  } else {\n    // match a directory or files or just the absolute path\n    return path + '(?:\\\\.js$|$|\\\\\\\\|\\\\/)?';\n  }\n}, RegExp);\n\nvar arr = function arr(v) {\n  return [].concat(v || []);\n};\n\nmodule.exports = (function () {\n  function UiBundlerEnv(workingDir) {\n    _classCallCheck(this, UiBundlerEnv);\n\n    // the location that bundle entry files and all compiles files will\n    // be written\n    this.workingDir = workingDir;\n\n    // the context that the bundler is running in, this is not officially\n    // used for anything but it is serialized into the entry file to ensure\n    // that they are invalidated when the context changes\n    this.context = {};\n\n    // the plugins that are used to build this environment\n    // are tracked and embedded into the entry file so that when the\n    // environment changes we can rebuild the bundles\n    this.pluginInfo = [];\n\n    // regular expressions which will prevent webpack from parsing the file\n    this.noParse = [/node_modules[\\/\\\\](angular|elasticsearch-browser)[\\/\\\\]/, /node_modules[\\/\\\\](mocha|moment)[\\/\\\\]/];\n\n    // webpack aliases, like require paths, mapping a prefix to a directory\n    this.aliases = {\n      ui: (0, _utilsFrom_root2['default'])('src/ui/public'),\n      test_harness: (0, _utilsFrom_root2['default'])('src/test_harness/public')\n    };\n\n    // map of which plugins created which aliases\n    this.aliasOwners = {};\n\n    // webpack loaders map loader configuration to regexps\n    this.loaders = [];\n    this.postLoaders = [];\n  }\n\n  _createClass(UiBundlerEnv, [{\n    key: 'consumePlugin',\n    value: function consumePlugin(plugin) {\n      var tag = plugin.id + '@' + plugin.version;\n      if ((0, _lodash.includes)(this.pluginInfo, tag)) return;\n\n      if (plugin.publicDir) {\n        this.aliases['plugins/' + plugin.id] = plugin.publicDir;\n      }\n\n      this.pluginInfo.push(tag);\n    }\n  }, {\n    key: 'exportConsumer',\n    value: function exportConsumer(type) {\n      var _this = this;\n\n      switch (type) {\n        case 'loaders':\n          return function (plugin, spec) {\n            var _iteratorNormalCompletion = true;\n            var _didIteratorError = false;\n            var _iteratorError = undefined;\n\n            try {\n              for (var _iterator = arr(spec)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                var loader = _step.value;\n                _this.addLoader(loader);\n              }\n            } catch (err) {\n              _didIteratorError = true;\n              _iteratorError = err;\n            } finally {\n              try {\n                if (!_iteratorNormalCompletion && _iterator['return']) {\n                  _iterator['return']();\n                }\n              } finally {\n                if (_didIteratorError) {\n                  throw _iteratorError;\n                }\n              }\n            }\n          };\n\n        case 'postLoaders':\n          return function (plugin, spec) {\n            var _iteratorNormalCompletion2 = true;\n            var _didIteratorError2 = false;\n            var _iteratorError2 = undefined;\n\n            try {\n              for (var _iterator2 = arr(spec)[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n                var loader = _step2.value;\n                _this.addPostLoader(loader);\n              }\n            } catch (err) {\n              _didIteratorError2 = true;\n              _iteratorError2 = err;\n            } finally {\n              try {\n                if (!_iteratorNormalCompletion2 && _iterator2['return']) {\n                  _iterator2['return']();\n                }\n              } finally {\n                if (_didIteratorError2) {\n                  throw _iteratorError2;\n                }\n              }\n            }\n          };\n\n        case 'noParse':\n          return function (plugin, spec) {\n            var _iteratorNormalCompletion3 = true;\n            var _didIteratorError3 = false;\n            var _iteratorError3 = undefined;\n\n            try {\n              for (var _iterator3 = arr(spec)[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n                var re = _step3.value;\n                _this.addNoParse(re);\n              }\n            } catch (err) {\n              _didIteratorError3 = true;\n              _iteratorError3 = err;\n            } finally {\n              try {\n                if (!_iteratorNormalCompletion3 && _iterator3['return']) {\n                  _iterator3['return']();\n                }\n              } finally {\n                if (_didIteratorError3) {\n                  throw _iteratorError3;\n                }\n              }\n            }\n          };\n\n        case 'modules':\n          return function (plugin, spec) {\n            var _iteratorNormalCompletion4 = true;\n            var _didIteratorError4 = false;\n            var _iteratorError4 = undefined;\n\n            try {\n              for (var _iterator4 = (0, _lodash.keys)(spec)[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n                var id = _step4.value;\n                _this.addModule(id, spec[id], plugin.id);\n              }\n            } catch (err) {\n              _didIteratorError4 = true;\n              _iteratorError4 = err;\n            } finally {\n              try {\n                if (!_iteratorNormalCompletion4 && _iterator4['return']) {\n                  _iterator4['return']();\n                }\n              } finally {\n                if (_didIteratorError4) {\n                  throw _iteratorError4;\n                }\n              }\n            }\n          };\n      }\n    }\n  }, {\n    key: 'addContext',\n    value: function addContext(key, val) {\n      this.context[key] = val;\n    }\n  }, {\n    key: 'addLoader',\n    value: function addLoader(loader) {\n      this.loaders.push(loader);\n    }\n  }, {\n    key: 'addPostLoader',\n    value: function addPostLoader(loader) {\n      this.postLoaders.push(loader);\n    }\n  }, {\n    key: 'addNoParse',\n    value: function addNoParse(regExp) {\n      this.noParse.push(regExp);\n    }\n  }, {\n    key: 'addModule',\n    value: function addModule(id, spec, pluginId) {\n      this.claim(id, pluginId);\n\n      // configurable via spec\n      var path = undefined;\n      var parse = true;\n      var imports = null;\n      var exports = null;\n      var expose = null;\n\n      // basic style, just a path\n      if ((0, _lodash.isString)(spec)) path = spec;\n\n      if ((0, _lodash.isArray)(spec)) {\n        path = spec[0];\n        imports = spec[1];\n        exports = spec[2];\n      }\n\n      if ((0, _lodash.isPlainObject)(spec)) {\n        path = spec.path;\n        parse = (0, _lodash.get)(spec, 'parse', parse);\n        imports = (0, _lodash.get)(spec, 'imports', imports);\n        exports = (0, _lodash.get)(spec, 'exports', exports);\n        expose = (0, _lodash.get)(spec, 'expose', expose);\n      }\n\n      if (!path) {\n        throw new TypeError('Invalid spec definition, unable to identify path');\n      }\n\n      this.aliases[id] = path;\n\n      var loader = [];\n      if (imports) {\n        loader.push('imports?' + imports);\n      }\n\n      if (exports) loader.push('exports?' + exports);\n      if (expose) loader.push('expose?' + expose);\n      if (loader.length) this.loaders.push({ test: asRegExp(path), loader: loader.join('!') });\n      if (!parse) this.addNoParse(path);\n    }\n  }, {\n    key: 'claim',\n    value: function claim(id, pluginId) {\n      var owner = pluginId ? 'Plugin ' + pluginId : 'Kibana Server';\n\n      // TODO(spalger): we could do a lot more to detect colliding module defs\n      var existingOwner = this.aliasOwners[id] || this.aliasOwners[id + '$'];\n\n      if (existingOwner) {\n        throw new TypeError(owner + ' attempted to override export \"' + id + '\" from ' + existingOwner);\n      }\n\n      this.aliasOwners[id] = owner;\n    }\n  }]);\n\n  return UiBundlerEnv;\n})();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3VpL3VpX2J1bmRsZXJfZW52LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OzhCQUFxQixvQkFBb0I7Ozs7c0JBQ0ksUUFBUTs7QUFJckQsSUFBTSxRQUFRLEdBQUcsd0NBRWYsVUFBVSxJQUFJLEVBQUU7QUFDZCxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDNUIsTUFBSSxJQUFJLEtBQUssR0FBRyxJQUFJLElBQUksS0FBSyxJQUFJLEVBQUU7O0FBRWpDLFdBQU8sSUFBSSxHQUFHLElBQUksQ0FBQztHQUNwQixNQUFNOztBQUVMLFdBQU8sSUFBSSxHQUFHLHdCQUF3QixDQUFDO0dBQ3hDO0NBQ0YsRUFDRCxNQUFNLENBQ1AsQ0FBQzs7QUFFRixJQUFNLEdBQUcsR0FBRyxTQUFOLEdBQUcsQ0FBRyxDQUFDO1NBQUksRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDO0NBQUEsQ0FBQzs7QUFFcEMsTUFBTSxDQUFDLE9BQU87QUFDRCxXQURVLFlBQVksQ0FDckIsVUFBVSxFQUFFOzBCQURILFlBQVk7Ozs7QUFLL0IsUUFBSSxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUM7Ozs7O0FBSzdCLFFBQUksQ0FBQyxPQUFPLEdBQUcsRUFBRSxDQUFDOzs7OztBQUtsQixRQUFJLENBQUMsVUFBVSxHQUFHLEVBQUUsQ0FBQzs7O0FBR3JCLFFBQUksQ0FBQyxPQUFPLEdBQUcsQ0FDYix5REFBeUQsRUFDekQsd0NBQXdDLENBQ3pDLENBQUM7OztBQUdGLFFBQUksQ0FBQyxPQUFPLEdBQUc7QUFDYixRQUFFLEVBQUUsaUNBQVMsZUFBZSxDQUFDO0FBQzdCLGtCQUFZLEVBQUUsaUNBQVMseUJBQXlCLENBQUM7S0FDbEQsQ0FBQzs7O0FBR0YsUUFBSSxDQUFDLFdBQVcsR0FBRyxFQUFFLENBQUM7OztBQUd0QixRQUFJLENBQUMsT0FBTyxH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QUUsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDekYsVUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQ25DOzs7V0FFSSxlQUFDLEVBQUUsRUFBRSxRQUFRLEVBQUU7QUFDbEIsVUFBTSxLQUFLLEdBQUcsUUFBUSxlQUFhLFFBQVEsR0FBSyxlQUFlLENBQUM7OztBQUdoRSxVQUFNLGFBQWEsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUksRUFBRSxPQUFJLENBQUM7O0FBRXpFLFVBQUksYUFBYSxFQUFFO0FBQ2pCLGNBQU0sSUFBSSxTQUFTLENBQUksS0FBSyx1Q0FBa0MsRUFBRSxlQUFVLGFBQWEsQ0FBRyxDQUFDO09BQzVGOztBQUVELFVBQUksQ0FBQyxXQUFXLENBQUMsRUFBRSxDQUFDLEdBQUcsS0FBSyxDQUFDO0tBQzlCOzs7U0EvSW9CLFlBQVk7SUFnSmxDLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvdWkvdWlfYnVuZGxlcl9lbnYuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZnJvbVJvb3QgZnJvbSAnLi4vdXRpbHMvZnJvbV9yb290JztcbmltcG9ydCB7IGluY2x1ZGVzLCBmbG93LCBlc2NhcGVSZWdFeHAgfSBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHsgaXNTdHJpbmcsIGlzQXJyYXksIGlzUGxhaW5PYmplY3QsIGdldCB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgeyBrZXlzIH0gZnJvbSAnbG9kYXNoJztcblxuY29uc3QgYXNSZWdFeHAgPSBmbG93KFxuICBlc2NhcGVSZWdFeHAsXG4gIGZ1bmN0aW9uIChwYXRoKSB7XG4gICAgY29uc3QgbGFzdCA9IHBhdGguc2xpY2UoLTEpO1xuICAgIGlmIChsYXN0ID09PSAnLycgfHwgbGFzdCA9PT0gJ1xcXFwnKSB7XG4gICAgICAvLyBtYXRjaCBhIGRpcmVjdG9yeSBleHBsaWNpdGx5XG4gICAgICByZXR1cm4gcGF0aCArICcuKic7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG1hdGNoIGEgZGlyZWN0b3J5IG9yIGZpbGVzIG9yIGp1c3QgdGhlIGFic29sdXRlIHBhdGhcbiAgICAgIHJldHVybiBwYXRoICsgJyg/OlxcXFwuanMkfCR8XFxcXFxcXFx8XFxcXC8pPyc7XG4gICAgfVxuICB9LFxuICBSZWdFeHBcbik7XG5cbmNvbnN0IGFyciA9IHYgPT4gW10uY29uY2F0KHYgfHwgW10pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIFVpQnVuZGxlckVudiB7XG4gIGNvbnN0cnVjdG9yKHdvcmtpbmdEaXIpIHtcblxuICAgIC8vIHRoZSBsb2NhdGlvbiB0aGF0IGJ1bmRsZSBlbnRyeSBmaWxlcyBhbmQgYWxsIGNvbXBpbGVzIGZpbGVzIHdpbGxcbiAgICAvLyBiZSB3cml0dGVuXG4gICAgdGhpcy53b3JraW5nRGlyID0gd29ya2luZ0RpcjtcblxuICAgIC8vIHRoZSBjb250ZXh0IHRoYXQgdGhlIGJ1bmRsZXIgaXMgcnVubmluZyBpbiwgdGhpcyBpcyBub3Qgb2ZmaWNpYWxseVxuICAgIC8vIHVzZWQgZm9yIGFueXRoaW5nIGJ1dCBpdCBpcyBzZXJpYWxpemVkIGludG8gdGhlIGVudHJ5IGZpbGUgdG8gZW5zdXJlXG4gICAgLy8gdGhhdCB0aGV5IGFyZSBpbnZhbGlkYXRlZCB3aGVuIHRoZSBjb250ZXh0IGNoYW5nZXNcbiAgICB0aGlzLmNvbnRleHQgPSB7fTtcblxuICAgIC8vIHRoZSBwbHVnaW5zIHRoYXQgYXJlIHVzZWQgdG8gYnVpbGQgdGhpcyBlbnZpcm9ubWVudFxuICAgIC8vIGFyZSB0cmFja2VkIGFuZCBlbWJlZGRlZCBpbnRvIHRoZSBlbnRyeSBmaWxlIHNvIHRoYXQgd2hlbiB0aGVcbiAgICAvLyBlbnZpcm9ubWVudCBjaGFuZ2VzIHdlIGNhbiByZWJ1aWxkIHRoZSBidW5kbGVzXG4gICAgdGhpcy5wbHVnaW5JbmZvID0gW107XG5cbiAgICAvLyByZWd1bGFyIGV4cHJlc3Npb25zIHdoaWNoIHdpbGwgcHJldmVudCB3ZWJwYWNrIGZyb20gcGFyc2luZyB0aGUgZmlsZVxuICAgIHRoaXMubm9QYXJzZSA9IFtcbiAgICAgIC9ub2RlX21vZHVsZXNbXFwvXFxcXF0oYW5ndWxhcnxlbGFzdGljc2VhcmNoLWJyb3dzZXIpW1xcL1xcXFxdLyxcbiAgICAgIC9ub2RlX21vZHVsZXNbXFwvXFxcXF0obW9jaGF8bW9tZW50KVtcXC9cXFxcXS9cbiAgICBdO1xuXG4gICAgLy8gd2VicGFjayBhbGlhc2VzLCBsaWtlIHJlcXVpcmUgcGF0aHMsIG1hcHBpbmcgYSBwcmVmaXggdG8gYSBkaXJlY3RvcnlcbiAgICB0aGlzLmFsaWFzZXMgPSB7XG4gICAgICB1aTogZnJvbVJvb3QoJ3NyYy91aS9wdWJsaWMnKSxcbiAgICAgIHRlc3RfaGFybmVzczogZnJvbVJvb3QoJ3NyYy90ZXN0X2hhcm5lc3MvcHVibGljJylcbiAgICB9O1xuXG4gICAgLy8gbWFwIG9mIHdoaWNoIHBsdWdpbnMgY3JlYXRlZCB3aGljaCBhbGlhc2VzXG4gICAgdGhpcy5hbGlhc093bmVycyA9IHt9O1xuXG4gICAgLy8gd2VicGFjayBsb2FkZXJzIG1hcCBsb2FkZXIgY29uZmlndXJhdGlvbiB0byByZWdleHBzXG4gICAgdGhpcy5sb2FkZXJzID0gW107XG4gICAgdGhpcy5wb3N0TG9hZGVycyA9IFtdO1xuICB9XG5cbiAgY29uc3VtZVBsdWdpbihwbHVnaW4pIHtcbiAgICBjb25zdCB0YWcgPSBgJHtwbHVnaW4uaWR9QCR7cGx1Z2luLnZlcnNpb259YDtcbiAgICBpZiAoaW5jbHVkZXModGhpcy5wbHVnaW5JbmZvLCB0YWcpKSByZXR1cm47XG5cbiAgICBpZiAocGx1Z2luLnB1YmxpY0Rpcikge1xuICAgICAgdGhpcy5hbGlhc2VzW2BwbHVnaW5zLyR7cGx1Z2luLmlkfWBdID0gcGx1Z2luLnB1YmxpY0RpcjtcbiAgICB9XG5cbiAgICB0aGlzLnBsdWdpbkluZm8ucHVzaCh0YWcpO1xuICB9XG5cbiAgZXhwb3J0Q29uc3VtZXIodHlwZSkge1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSAnbG9hZGVycyc6XG4gICAgICAgIHJldHVybiAocGx1Z2luLCBzcGVjKSA9PiB7XG4gICAgICAgICAgZm9yIChsZXQgbG9hZGVyIG9mIGFycihzcGVjKSkgdGhpcy5hZGRMb2FkZXIobG9hZGVyKTtcbiAgICAgICAgfTtcblxuICAgICAgY2FzZSAncG9zdExvYWRlcnMnOlxuICAgICAgICByZXR1cm4gKHBsdWdpbiwgc3BlYykgPT4ge1xuICAgICAgICAgIGZvciAobGV0IGxvYWRlciBvZiBhcnIoc3BlYykpIHRoaXMuYWRkUG9zdExvYWRlcihsb2FkZXIpO1xuICAgICAgICB9O1xuXG4gICAgICBjYXNlICdub1BhcnNlJzpcbiAgICAgICAgcmV0dXJuIChwbHVnaW4sIHNwZWMpID0+IHtcbiAgICAgICAgICBmb3IgKGxldCByZSBvZiBhcnIoc3BlYykpIHRoaXMuYWRkTm9QYXJzZShyZSk7XG4gICAgICAgIH07XG5cbiAgICAgIGNhc2UgJ21vZHVsZXMnOlxuICAgICAgICByZXR1cm4gKHBsdWdpbiwgc3BlYykgPT4ge1xuICAgICAgICAgIGZvciAobGV0IGlkIG9mIGtleXMoc3BlYykpIHRoaXMuYWRkTW9kdWxlKGlkLCBzcGVjW2lkXSwgcGx1Z2luLmlkKTtcbiAgICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBhZGRDb250ZXh0KGtleSwgdmFsKSB7XG4gICAgdGhpcy5jb250ZXh0W2tleV0gPSB2YWw7XG4gIH1cblxuICBhZGRMb2FkZXIobG9hZGVyKSB7XG4gICAgdGhpcy5sb2FkZXJzLnB1c2gobG9hZGVyKTtcbiAgfVxuXG4gIGFkZFBvc3RMb2FkZXIobG9hZGVyKSB7XG4gICAgdGhpcy5wb3N0TG9hZGVycy5wdXNoKGxvYWRlcik7XG4gIH1cblxuICBhZGROb1BhcnNlKHJlZ0V4cCkge1xuICAgIHRoaXMubm9QYXJzZS5wdXNoKHJlZ0V4cCk7XG4gIH1cblxuICBhZGRNb2R1bGUoaWQsIHNwZWMsIHBsdWdpbklkKSB7XG4gICAgdGhpcy5jbGFpbShpZCwgcGx1Z2luSWQpO1xuXG4gICAgLy8gY29uZmlndXJhYmxlIHZpYSBzcGVjXG4gICAgbGV0IHBhdGg7XG4gICAgbGV0IHBhcnNlID0gdHJ1ZTtcbiAgICBsZXQgaW1wb3J0cyA9IG51bGw7XG4gICAgbGV0IGV4cG9ydHMgPSBudWxsO1xuICAgIGxldCBleHBvc2UgPSBudWxsO1xuXG4gICAgLy8gYmFzaWMgc3R5bGUsIGp1c3QgYSBwYXRoXG4gICAgaWYgKGlzU3RyaW5nKHNwZWMpKSBwYXRoID0gc3BlYztcblxuICAgIGlmIChpc0FycmF5KHNwZWMpKSB7XG4gICAgICBwYXRoID0gc3BlY1swXTtcbiAgICAgIGltcG9ydHMgPSBzcGVjWzFdO1xuICAgICAgZXhwb3J0cyA9IHNwZWNbMl07XG4gICAgfVxuXG4gICAgaWYgKGlzUGxhaW5PYmplY3Qoc3BlYykpIHtcbiAgICAgIHBhdGggPSBzcGVjLnBhdGg7XG4gICAgICBwYXJzZSA9IGdldChzcGVjLCAncGFyc2UnLCBwYXJzZSk7XG4gICAgICBpbXBvcnRzID0gZ2V0KHNwZWMsICdpbXBvcnRzJywgaW1wb3J0cyk7XG4gICAgICBleHBvcnRzID0gZ2V0KHNwZWMsICdleHBvcnRzJywgZXhwb3J0cyk7XG4gICAgICBleHBvc2UgPSBnZXQoc3BlYywgJ2V4cG9zZScsIGV4cG9zZSk7XG4gICAgfVxuXG4gICAgaWYgKCFwYXRoKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIHNwZWMgZGVmaW5pdGlvbiwgdW5hYmxlIHRvIGlkZW50aWZ5IHBhdGgnKTtcbiAgICB9XG5cbiAgICB0aGlzLmFsaWFzZXNbaWRdID0gcGF0aDtcblxuICAgIGNvbnN0IGxvYWRlciA9IFtdO1xuICAgIGlmIChpbXBvcnRzKSB7XG4gICAgICBsb2FkZXIucHVzaChgaW1wb3J0cz8ke2ltcG9ydHN9YCk7XG4gICAgfVxuXG4gICAgaWYgKGV4cG9ydHMpIGxvYWRlci5wdXNoKGBleHBvcnRzPyR7ZXhwb3J0c31gKTtcbiAgICBpZiAoZXhwb3NlKSBsb2FkZXIucHVzaChgZXhwb3NlPyR7ZXhwb3NlfWApO1xuICAgIGlmIChsb2FkZXIubGVuZ3RoKSB0aGlzLmxvYWRlcnMucHVzaCh7IHRlc3Q6IGFzUmVnRXhwKHBhdGgpLCBsb2FkZXI6IGxvYWRlci5qb2luKCchJykgfSk7XG4gICAgaWYgKCFwYXJzZSkgdGhpcy5hZGROb1BhcnNlKHBhdGgpO1xuICB9XG5cbiAgY2xhaW0oaWQsIHBsdWdpbklkKSB7XG4gICAgY29uc3Qgb3duZXIgPSBwbHVnaW5JZCA/IGBQbHVnaW4gJHtwbHVnaW5JZH1gIDogJ0tpYmFuYSBTZXJ2ZXInO1xuXG4gICAgLy8gVE9ETyhzcGFsZ2VyKTogd2UgY291bGQgZG8gYSBsb3QgbW9yZSB0byBkZXRlY3QgY29sbGlkaW5nIG1vZHVsZSBkZWZzXG4gICAgY29uc3QgZXhpc3RpbmdPd25lciA9IHRoaXMuYWxpYXNPd25lcnNbaWRdIHx8IHRoaXMuYWxpYXNPd25lcnNbYCR7aWR9JGBdO1xuXG4gICAgaWYgKGV4aXN0aW5nT3duZXIpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYCR7b3duZXJ9IGF0dGVtcHRlZCB0byBvdmVycmlkZSBleHBvcnQgXCIke2lkfVwiIGZyb20gJHtleGlzdGluZ093bmVyfWApO1xuICAgIH1cblxuICAgIHRoaXMuYWxpYXNPd25lcnNbaWRdID0gb3duZXI7XG4gIH1cbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/ui/ui_bundler_env.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/src/ui/ui_bundler_env.js",
      "sourcesContent": [
        "import fromRoot from '../utils/from_root';\nimport { includes, flow, escapeRegExp } from 'lodash';\nimport { isString, isArray, isPlainObject, get } from 'lodash';\nimport { keys } from 'lodash';\n\nconst asRegExp = flow(\n  escapeRegExp,\n  function (path) {\n    const last = path.slice(-1);\n    if (last === '/' || last === '\\\\') {\n      // match a directory explicitly\n      return path + '.*';\n    } else {\n      // match a directory or files or just the absolute path\n      return path + '(?:\\\\.js$|$|\\\\\\\\|\\\\/)?';\n    }\n  },\n  RegExp\n);\n\nconst arr = v => [].concat(v || []);\n\nmodule.exports = class UiBundlerEnv {\n  constructor(workingDir) {\n\n    // the location that bundle entry files and all compiles files will\n    // be written\n    this.workingDir = workingDir;\n\n    // the context that the bundler is running in, this is not officially\n    // used for anything but it is serialized into the entry file to ensure\n    // that they are invalidated when the context changes\n    this.context = {};\n\n    // the plugins that are used to build this environment\n    // are tracked and embedded into the entry file so that when the\n    // environment changes we can rebuild the bundles\n    this.pluginInfo = [];\n\n    // regular expressions which will prevent webpack from parsing the file\n    this.noParse = [\n      /node_modules[\\/\\\\](angular|elasticsearch-browser)[\\/\\\\]/,\n      /node_modules[\\/\\\\](mocha|moment)[\\/\\\\]/\n    ];\n\n    // webpack aliases, like require paths, mapping a prefix to a directory\n    this.aliases = {\n      ui: fromRoot('src/ui/public'),\n      test_harness: fromRoot('src/test_harness/public')\n    };\n\n    // map of which plugins created which aliases\n    this.aliasOwners = {};\n\n    // webpack loaders map loader configuration to regexps\n    this.loaders = [];\n    this.postLoaders = [];\n  }\n\n  consumePlugin(plugin) {\n    const tag = `${plugin.id}@${plugin.version}`;\n    if (includes(this.pluginInfo, tag)) return;\n\n    if (plugin.publicDir) {\n      this.aliases[`plugins/${plugin.id}`] = plugin.publicDir;\n    }\n\n    this.pluginInfo.push(tag);\n  }\n\n  exportConsumer(type) {\n    switch (type) {\n      case 'loaders':\n        return (plugin, spec) => {\n          for (let loader of arr(spec)) this.addLoader(loader);\n        };\n\n      case 'postLoaders':\n        return (plugin, spec) => {\n          for (let loader of arr(spec)) this.addPostLoader(loader);\n        };\n\n      case 'noParse':\n        return (plugin, spec) => {\n          for (let re of arr(spec)) this.addNoParse(re);\n        };\n\n      case 'modules':\n        return (plugin, spec) => {\n          for (let id of keys(spec)) this.addModule(id, spec[id], plugin.id);\n        };\n    }\n  }\n\n  addContext(key, val) {\n    this.context[key] = val;\n  }\n\n  addLoader(loader) {\n    this.loaders.push(loader);\n  }\n\n  addPostLoader(loader) {\n    this.postLoaders.push(loader);\n  }\n\n  addNoParse(regExp) {\n    this.noParse.push(regExp);\n  }\n\n  addModule(id, spec, pluginId) {\n    this.claim(id, pluginId);\n\n    // configurable via spec\n    let path;\n    let parse = true;\n    let imports = null;\n    let exports = null;\n    let expose = null;\n\n    // basic style, just a path\n    if (isString(spec)) path = spec;\n\n    if (isArray(spec)) {\n      path = spec[0];\n      imports = spec[1];\n      exports = spec[2];\n    }\n\n    if (isPlainObject(spec)) {\n      path = spec.path;\n      parse = get(spec, 'parse', parse);\n      imports = get(spec, 'imports', imports);\n      exports = get(spec, 'exports', exports);\n      expose = get(spec, 'expose', expose);\n    }\n\n    if (!path) {\n      throw new TypeError('Invalid spec definition, unable to identify path');\n    }\n\n    this.aliases[id] = path;\n\n    const loader = [];\n    if (imports) {\n      loader.push(`imports?${imports}`);\n    }\n\n    if (exports) loader.push(`exports?${exports}`);\n    if (expose) loader.push(`expose?${expose}`);\n    if (loader.length) this.loaders.push({ test: asRegExp(path), loader: loader.join('!') });\n    if (!parse) this.addNoParse(path);\n  }\n\n  claim(id, pluginId) {\n    const owner = pluginId ? `Plugin ${pluginId}` : 'Kibana Server';\n\n    // TODO(spalger): we could do a lot more to detect colliding module defs\n    const existingOwner = this.aliasOwners[id] || this.aliasOwners[`${id}$`];\n\n    if (existingOwner) {\n      throw new TypeError(`${owner} attempted to override export \"${id}\" from ${existingOwner}`);\n    }\n\n    this.aliasOwners[id] = owner;\n  }\n};\n"
      ]
    },
    "mtime": 1467036622893
  },
  "{\"filename\":\"/home/vio/v3metrics/src/ui/settings/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "defaultsDeep",
              "partial"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "defaultsDeep",
                "local": "defaultsDeep"
              },
              {
                "kind": "named",
                "imported": "partial",
                "local": "partial"
              }
            ]
          },
          {
            "source": "./defaults",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "defaultsProvider"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "setupSettings",
            "kbnServer",
            "server",
            "config"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "setupSettings",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "kbnServer",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "server",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "config",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "extends",
        "define-property",
        "sliced-to-array",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }; })();\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports['default'] = setupSettings;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar _lodash = require('lodash');\n\nvar _defaults = require('./defaults');\n\nvar _defaults2 = _interopRequireDefault(_defaults);\n\nfunction setupSettings(kbnServer, server, config) {\n  var status = kbnServer.status.create('ui settings');\n  var uiSettings = {\n    getAll: getAll,\n    getDefaults: getDefaults,\n    getUserProvided: getUserProvided,\n    set: set,\n    setMany: setMany,\n    remove: remove\n  };\n\n  server.decorate('server', 'uiSettings', function () {\n    return uiSettings;\n  });\n  kbnServer.ready().then(mirrorEsStatus);\n\n  function getAll() {\n    return Promise.all([getDefaults(), getUserProvided()]).then(function (_ref) {\n      var _ref2 = _slicedToArray(_ref, 2);\n\n      var defaults = _ref2[0];\n      var user = _ref2[1];\n      return (0, _lodash.defaultsDeep)(user, defaults);\n    });\n  }\n\n  function getDefaults() {\n    return Promise.resolve((0, _defaults2['default'])());\n  }\n\n  function userSettingsNotFound(kibanaVersion) {\n    status.red('Could not find user-provided settings for Kibana ' + kibanaVersion);\n    return {};\n  }\n\n  function getUserProvided() {\n    var client = server.plugins.elasticsearch.client;\n\n    var clientSettings = getClientSettings(config);\n    return client.get(_extends({}, clientSettings)).then(function (res) {\n      return res._source;\n    })['catch']((0, _lodash.partial)(userSettingsNotFound, clientSettings.id)).then(function (user) {\n      return hydrateUserSettings(user);\n    });\n  }\n\n  function setMany(changes) {\n    var client = server.plugins.elasticsearch.client;\n\n    var clientSettings = getClientSettings(config);\n    return client.update(_extends({}, clientSettings, {\n      body: { doc: changes }\n    })).then(function () {\n      return {};\n    });\n  }\n\n  function set(key, value) {\n    return setMany(_defineProperty({}, key, value));\n  }\n\n  function remove(key) {\n    return set(key, null);\n  }\n\n  function mirrorEsStatus() {\n    var esStatus = kbnServer.status.getForPluginId('elasticsearch');\n\n    copyStatus();\n    esStatus.on('change', copyStatus);\n\n    function copyStatus() {\n      var state = esStatus.state;\n\n      var statusMessage = state === 'green' ? 'Ready' : 'Elasticsearch plugin is ' + state;\n      status[state](statusMessage);\n    }\n  }\n}\n\nfunction hydrateUserSettings(user) {\n  return Object.keys(user).reduce(expand, {});\n  function expand(expanded, key) {\n    var userValue = user[key];\n    if (userValue !== null) {\n      expanded[key] = { userValue: userValue };\n    }\n    return expanded;\n  }\n}\n\nfunction getClientSettings(config) {\n  var index = config.get('kibana.index');\n  var id = config.get('pkg.version');\n  var type = 'config';\n  return { index: index, type: type, id: id };\n}\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3VpL3NldHRpbmdzL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7cUJBR3dCLGFBQWE7Ozs7OztzQkFIQyxRQUFROzt3QkFDakIsWUFBWTs7OztBQUUxQixTQUFTLGFBQWEsQ0FBQyxTQUFTLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRTtBQUMvRCxNQUFNLE1BQU0sR0FBRyxTQUFTLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsQ0FBQztBQUN0RCxNQUFNLFVBQVUsR0FBRztBQUNqQixVQUFNLEVBQU4sTUFBTTtBQUNOLGVBQVcsRUFBWCxXQUFXO0FBQ1gsbUJBQWUsRUFBZixlQUFlO0FBQ2YsT0FBRyxFQUFILEdBQUc7QUFDSCxXQUFPLEVBQVAsT0FBTztBQUNQLFVBQU0sRUFBTixNQUFNO0dBQ1AsQ0FBQzs7QUFFRixRQUFNLENBQUMsUUFBUSxDQUFDLFFBQVEsRUFBRSxZQUFZLEVBQUU7V0FBTSxVQUFVO0dBQUEsQ0FBQyxDQUFDO0FBQzFELFdBQVMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7O0FBRXZDLFdBQVMsTUFBTSxHQUFHO0FBQ2hCLFdBQU8sT0FBTyxDQUNYLEdBQUcsQ0FBQyxDQUFDLFdBQVcsRUFBRSxFQUFFLGVBQWUsRUFBRSxDQUFDLENBQUMsQ0FDdkMsSUFBSSxDQUFDLFVBQUMsSUFBZ0I7aUNBQWhCLElBQWdCOztVQUFmLFFBQVE7VUFBRSxJQUFJO2FBQU0sMEJBQWEsSUFBSSxFQUFFLFFBQVEsQ0FBQztLQUFBLENBQUMsQ0FBQztHQUM3RDs7QUFFRCxXQUFTLFdBQVcsR0FBRztBQUNyQixXQUFPLE9BQU8sQ0FBQyxPQUFPLENBQUMsNEJBQWtCLENBQUMsQ0FBQztHQUM1Qzs7QUFFRCxXQUFTLG9CQUFvQixDQUFDLGFBQWEsRUFBRTtBQUMzQyxVQUFNLENBQUMsR0FBRyx1REFBcUQsYUFBYSxDQUFHLENB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Iiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGVmYXVsdHNEZWVwLCBwYXJ0aWFsIH0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBkZWZhdWx0c1Byb3ZpZGVyIGZyb20gJy4vZGVmYXVsdHMnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzZXR1cFNldHRpbmdzKGtiblNlcnZlciwgc2VydmVyLCBjb25maWcpIHtcbiAgY29uc3Qgc3RhdHVzID0ga2JuU2VydmVyLnN0YXR1cy5jcmVhdGUoJ3VpIHNldHRpbmdzJyk7XG4gIGNvbnN0IHVpU2V0dGluZ3MgPSB7XG4gICAgZ2V0QWxsLFxuICAgIGdldERlZmF1bHRzLFxuICAgIGdldFVzZXJQcm92aWRlZCxcbiAgICBzZXQsXG4gICAgc2V0TWFueSxcbiAgICByZW1vdmVcbiAgfTtcblxuICBzZXJ2ZXIuZGVjb3JhdGUoJ3NlcnZlcicsICd1aVNldHRpbmdzJywgKCkgPT4gdWlTZXR0aW5ncyk7XG4gIGtiblNlcnZlci5yZWFkeSgpLnRoZW4obWlycm9yRXNTdGF0dXMpO1xuXG4gIGZ1bmN0aW9uIGdldEFsbCgpIHtcbiAgICByZXR1cm4gUHJvbWlzZVxuICAgICAgLmFsbChbZ2V0RGVmYXVsdHMoKSwgZ2V0VXNlclByb3ZpZGVkKCldKVxuICAgICAgLnRoZW4oKFtkZWZhdWx0cywgdXNlcl0pID0+IGRlZmF1bHRzRGVlcCh1c2VyLCBkZWZhdWx0cykpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0RGVmYXVsdHMoKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShkZWZhdWx0c1Byb3ZpZGVyKCkpO1xuICB9XG5cbiAgZnVuY3Rpb24gdXNlclNldHRpbmdzTm90Rm91bmQoa2liYW5hVmVyc2lvbikge1xuICAgIHN0YXR1cy5yZWQoYENvdWxkIG5vdCBmaW5kIHVzZXItcHJvdmlkZWQgc2V0dGluZ3MgZm9yIEtpYmFuYSAke2tpYmFuYVZlcnNpb259YCk7XG4gICAgcmV0dXJuIHt9O1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0VXNlclByb3ZpZGVkKCkge1xuICAgIGNvbnN0IHsgY2xpZW50IH0gPSBzZXJ2ZXIucGx1Z2lucy5lbGFzdGljc2VhcmNoO1xuICAgIGNvbnN0IGNsaWVudFNldHRpbmdzID0gZ2V0Q2xpZW50U2V0dGluZ3MoY29uZmlnKTtcbiAgICByZXR1cm4gY2xpZW50XG4gICAgICAuZ2V0KHsgLi4uY2xpZW50U2V0dGluZ3MgfSlcbiAgICAgIC50aGVuKHJlcyA9PiByZXMuX3NvdXJjZSlcbiAgICAgIC5jYXRjaChwYXJ0aWFsKHVzZXJTZXR0aW5nc05vdEZvdW5kLCBjbGllbnRTZXR0aW5ncy5pZCkpXG4gICAgICAudGhlbih1c2VyID0+IGh5ZHJhdGVVc2VyU2V0dGluZ3ModXNlcikpO1xuICB9XG5cbiAgZnVuY3Rpb24gc2V0TWFueShjaGFuZ2VzKSB7XG4gICAgY29uc3QgeyBjbGllbnQgfSA9IHNlcnZlci5wbHVnaW5zLmVsYXN0aWNzZWFyY2g7XG4gICAgY29uc3QgY2xpZW50U2V0dGluZ3MgPSBnZXRDbGllbnRTZXR0aW5ncyhjb25maWcpO1xuICAgIHJldHVybiBjbGllbnRcbiAgICAgIC51cGRhdGUoe1xuICAgICAgICAuLi5jbGllbnRTZXR0aW5ncyxcbiAgICAgICAgYm9keTogeyBkb2M6IGNoYW5nZXMgfVxuICAgICAgfSlcbiAgICAgIC50aGVuKCgpID0+ICh7fSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gc2V0KGtleSwgdmFsdWUpIHtcbiAgICByZXR1cm4gc2V0TWFueSh7IFtrZXldOiB2YWx1ZSB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZShrZXkpIHtcbiAgICByZXR1cm4gc2V0KGtleSwgbnVsbCk7XG4gIH1cblxuICBmdW5jdGlvbiBtaXJyb3JFc1N0YXR1cygpIHtcbiAgICBjb25zdCBlc1N0YXR1cyA9IGtiblNlcnZlci5zdGF0dXMuZ2V0Rm9yUGx1Z2luSWQoJ2VsYXN0aWNzZWFyY2gnKTtcblxuICAgIGNvcHlTdGF0dXMoKTtcbiAgICBlc1N0YXR1cy5vbignY2hhbmdlJywgY29weVN0YXR1cyk7XG5cbiAgICBmdW5jdGlvbiBjb3B5U3RhdHVzKCkge1xuICAgICAgY29uc3QgeyBzdGF0ZSB9ID0gZXNTdGF0dXM7XG4gICAgICBjb25zdCBzdGF0dXNNZXNzYWdlID0gc3RhdGUgPT09ICdncmVlbicgPyAnUmVhZHknIDogYEVsYXN0aWNzZWFyY2ggcGx1Z2luIGlzICR7c3RhdGV9YDtcbiAgICAgIHN0YXR1c1tzdGF0ZV0oc3RhdHVzTWVzc2FnZSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGh5ZHJhdGVVc2VyU2V0dGluZ3ModXNlcikge1xuICByZXR1cm4gT2JqZWN0LmtleXModXNlcikucmVkdWNlKGV4cGFuZCwge30pO1xuICBmdW5jdGlvbiBleHBhbmQoZXhwYW5kZWQsIGtleSkge1xuICAgIGNvbnN0IHVzZXJWYWx1ZSA9IHVzZXJba2V5XTtcbiAgICBpZiAodXNlclZhbHVlICE9PSBudWxsKSB7XG4gICAgICBleHBhbmRlZFtrZXldID0geyB1c2VyVmFsdWUgfTtcbiAgICB9XG4gICAgcmV0dXJuIGV4cGFuZGVkO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldENsaWVudFNldHRpbmdzKGNvbmZpZykge1xuICBjb25zdCBpbmRleCA9IGNvbmZpZy5nZXQoJ2tpYmFuYS5pbmRleCcpO1xuICBjb25zdCBpZCA9IGNvbmZpZy5nZXQoJ3BrZy52ZXJzaW9uJyk7XG4gIGNvbnN0IHR5cGUgPSAnY29uZmlnJztcbiAgcmV0dXJuIHsgaW5kZXgsIHR5cGUsIGlkIH07XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/ui/settings/index.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;qBAGwB,aAAa;;;;;;sBAHC,QAAQ;;wBACjB,YAAY;;;;AAE1B,SAAS,aAAa,CAAC,SAAS,EAAE,MAAM,EAAE,MAAM,EAAE;AAC/D,MAAM,MAAM,GAAG,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;AACtD,MAAM,UAAU,GAAG;AACjB,UAAM,EAAN,MAAM;AACN,eAAW,EAAX,WAAW;AACX,mBAAe,EAAf,eAAe;AACf,OAAG,EAAH,GAAG;AACH,WAAO,EAAP,OAAO;AACP,UAAM,EAAN,MAAM;GACP,CAAC;;AAEF,QAAM,CAAC,QAAQ,CAAC,QAAQ,EAAE,YAAY,EAAE;WAAM,UAAU;GAAA,CAAC,CAAC;AAC1D,WAAS,CAAC,KAAK,EAAE,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;;AAEvC,WAAS,MAAM,GAAG;AAChB,WAAO,OAAO,CACX,GAAG,CAAC,CAAC,WAAW,EAAE,EAAE,eAAe,EAAE,CAAC,CAAC,CACvC,IAAI,CAAC,UAAC,IAAgB;iCAAhB,IAAgB;;UAAf,QAAQ;UAAE,IAAI;aAAM,0BAAa,IAAI,EAAE,QAAQ,CAAC;KAAA,CAAC,CAAC;GAC7D;;AAED,WAAS,WAAW,GAAG;AACrB,WAAO,OAAO,CAAC,OAAO,CAAC,4BAAkB,CAAC,CAAC;GAC5C;;AAED,WAAS,oBAAoB,CAAC,aAAa,EAAE;AAC3C,UAAM,CAAC,GAAG,uDAAqD,aAAa,CAAG,CAAC;AAChF,WAAO,EAAE,CAAC;GACX;;AAED,WAAS,eAAe,GAAG;QACjB,MAAM,GAAK,MAAM,CAAC,OAAO,CAAC,aAAa,CAAvC,MAAM;;AACd,QAAM,cAAc,GAAG,iBAAiB,CAAC,MAAM,CAAC,CAAC;AACjD,WAAO,MAAM,CACV,GAAG,cAAM,cAAc,EAAG,CAC1B,IAAI,CAAC,UAAA,GAAG;aAAI,GAAG,CAAC,OAAO;KAAA,CAAC,SACnB,CAAC,qBAAQ,oBAAoB,EAAE,cAAc,CAAC,EAAE,CAAC,CAAC,CACvD,IAAI,CAAC,UAAA,IAAI;aAAI,mBAAmB,CAAC,IAAI,CAAC;KAAA,CAAC,CAAC;GAC5C;;AAED,WAAS,OAAO,CAAC,OAAO,EAAE;QAChB,MAAM,GAAK,MAAM,CAAC,OAAO,CAAC,aAAa,CAAvC,MAAM;;AACd,QAAM,cAAc,GAAG,iBAAiB,CAAC,MAAM,CAAC,CAAC;AACjD,WAAO,MAAM,CACV,MAAM,cACF,cAAc;AACjB,UAAI,EAAE,EAAE,GAAG,EAAE,OAAO,EAAE;OACtB,CACD,IAAI,CAAC;aAAO,EAAE;KAAC,CAAC,CAAC;GACrB;;AAED,WAAS,GAAG,CAAC,GAAG,EAAE,KAAK,EAAE;AACvB,WAAO,OAAO,qBAAI,GAAG,EAAG,KAAK,EAAG,CAAC;GAClC;;AAED,WAAS,MAAM,CAAC,GAAG,EAAE;AACnB,WAAO,GAAG,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;GACvB;;AAED,WAAS,cAAc,GAAG;AACxB,QAAM,QAAQ,GAAG,SAAS,CAAC,MAAM,CAAC,cAAc,CAAC,eAAe,CAAC,CAAC;;AAElE,cAAU,EAAE,CAAC;AACb,YAAQ,CAAC,EAAE,CAAC,QAAQ,EAAE,UAAU,CAAC,CAAC;;AAElC,aAAS,UAAU,GAAG;UACZ,KAAK,GAAK,QAAQ,CAAlB,KAAK;;AACb,UAAM,aAAa,GAAG,KAAK,KAAK,OAAO,GAAG,OAAO,gCAA8B,KAAK,AAAE,CAAC;AACvF,YAAM,CAAC,KAAK,CAAC,CAAC,aAAa,CAAC,CAAC;KAC9B;GACF;CACF;;AAED,SAAS,mBAAmB,CAAC,IAAI,EAAE;AACjC,SAAO,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;AAC5C,WAAS,MAAM,CAAC,QAAQ,EAAE,GAAG,EAAE;AAC7B,QAAM,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC;AAC5B,QAAI,SAAS,KAAK,IAAI,EAAE;AACtB,cAAQ,CAAC,GAAG,CAAC,GAAG,EAAE,SAAS,EAAT,SAAS,EAAE,CAAC;KAC/B;AACD,WAAO,QAAQ,CAAC;GACjB;CACF;;AAED,SAAS,iBAAiB,CAAC,MAAM,EAAE;AACjC,MAAM,KAAK,GAAG,MAAM,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;AACzC,MAAM,EAAE,GAAG,MAAM,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;AACrC,MAAM,IAAI,GAAG,QAAQ,CAAC;AACtB,SAAO,EAAE,KAAK,EAAL,KAAK,EAAE,IAAI,EAAJ,IAAI,EAAE,EAAE,EAAF,EAAE,EAAE,CAAC;CAC5B",
      "file": "/home/vio/v3metrics/src/ui/settings/index.js",
      "sourcesContent": [
        "import { defaultsDeep, partial } from 'lodash';\nimport defaultsProvider from './defaults';\n\nexport default function setupSettings(kbnServer, server, config) {\n  const status = kbnServer.status.create('ui settings');\n  const uiSettings = {\n    getAll,\n    getDefaults,\n    getUserProvided,\n    set,\n    setMany,\n    remove\n  };\n\n  server.decorate('server', 'uiSettings', () => uiSettings);\n  kbnServer.ready().then(mirrorEsStatus);\n\n  function getAll() {\n    return Promise\n      .all([getDefaults(), getUserProvided()])\n      .then(([defaults, user]) => defaultsDeep(user, defaults));\n  }\n\n  function getDefaults() {\n    return Promise.resolve(defaultsProvider());\n  }\n\n  function userSettingsNotFound(kibanaVersion) {\n    status.red(`Could not find user-provided settings for Kibana ${kibanaVersion}`);\n    return {};\n  }\n\n  function getUserProvided() {\n    const { client } = server.plugins.elasticsearch;\n    const clientSettings = getClientSettings(config);\n    return client\n      .get({ ...clientSettings })\n      .then(res => res._source)\n      .catch(partial(userSettingsNotFound, clientSettings.id))\n      .then(user => hydrateUserSettings(user));\n  }\n\n  function setMany(changes) {\n    const { client } = server.plugins.elasticsearch;\n    const clientSettings = getClientSettings(config);\n    return client\n      .update({\n        ...clientSettings,\n        body: { doc: changes }\n      })\n      .then(() => ({}));\n  }\n\n  function set(key, value) {\n    return setMany({ [key]: value });\n  }\n\n  function remove(key) {\n    return set(key, null);\n  }\n\n  function mirrorEsStatus() {\n    const esStatus = kbnServer.status.getForPluginId('elasticsearch');\n\n    copyStatus();\n    esStatus.on('change', copyStatus);\n\n    function copyStatus() {\n      const { state } = esStatus;\n      const statusMessage = state === 'green' ? 'Ready' : `Elasticsearch plugin is ${state}`;\n      status[state](statusMessage);\n    }\n  }\n}\n\nfunction hydrateUserSettings(user) {\n  return Object.keys(user).reduce(expand, {});\n  function expand(expanded, key) {\n    const userValue = user[key];\n    if (userValue !== null) {\n      expanded[key] = { userValue };\n    }\n    return expanded;\n  }\n}\n\nfunction getClientSettings(config) {\n  const index = config.get('kibana.index');\n  const id = config.get('pkg.version');\n  const type = 'config';\n  return { index, type, id };\n}\n"
      ]
    },
    "mtime": 1467036622893
  },
  "{\"filename\":\"/home/vio/v3metrics/src/ui/settings/defaults.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "moment-timezone",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "moment"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "defaultSettingsProvider"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "defaultSettingsProvider",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "sliced-to-array",
        "to-consumable-array",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }; })();\n\nexports['default'] = defaultSettingsProvider;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i]; return arr2; } else { return Array.from(arr); } }\n\nvar _momentTimezone = require('moment-timezone');\n\nvar _momentTimezone2 = _interopRequireDefault(_momentTimezone);\n\nfunction defaultSettingsProvider() {\n  var weekdays = _momentTimezone2['default'].weekdays().slice();\n\n  var _weekdays = _slicedToArray(weekdays, 1);\n\n  var defaultWeekday = _weekdays[0];\n\n  // wrapped in provider so that a new instance is given to each app/test\n  return {\n    'buildNum': {\n      readonly: true\n    },\n    'query:queryString:options': {\n      value: '{ \"analyze_wildcard\": true }',\n      description: '<a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-query-string-query.html\" target=\"_blank\">Options</a> for the lucene query string parser',\n      type: 'json'\n    },\n    'sort:options': {\n      value: '{ \"unmapped_type\": \"boolean\" }',\n      description: '<a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/search-request-sort.html\" target=\"_blank\">Options</a> for the Elasticsearch sort parameter',\n      type: 'json'\n    },\n    'dateFormat': {\n      value: 'MMMM Do YYYY, HH:mm:ss.SSS',\n      description: 'When displaying a pretty formatted date, use this <a href=\"http://momentjs.com/docs/#/displaying/format/\" target=\"_blank\">format</a>'\n    },\n    'dateFormat:tz': {\n      value: 'Browser',\n      description: 'Which timezone should be used.  \"Browser\" will use the timezone detected by your browser.',\n      type: 'select',\n      options: ['Browser'].concat(_toConsumableArray(_momentTimezone2['default'].tz.names()))\n    },\n    'dateFormat:scaled': {\n      type: 'json',\n      value: '[\\n  [\"\", \"HH:mm:ss.SSS\"],\\n  [\"PT1S\", \"HH:mm:ss\"],\\n  [\"PT1M\", \"HH:mm\"],\\n  [\"PT1H\", \"YYYY-MM-DD HH:mm\"],\\n  [\"P1DT\", \"YYYY-MM-DD\"],\\n  [\"P1YT\", \"YYYY\"]\\n]',\n      description: 'Values that define the format used in situations where timebased' + ' data is rendered in order, and formatted timestamps should adapt to the' + ' interval between measurements. Keys are' + ' <a href=\"http://en.wikipedia.org/wiki/ISO_8601#Time_intervals\" target=\"_blank\">' + 'ISO8601 intervals.</a>'\n    },\n    'dateFormat:dow': {\n      value: defaultWeekday,\n      description: 'What day should weeks start on?',\n      type: 'select',\n      options: weekdays\n    },\n    'defaultIndex': {\n      value: null,\n      description: 'The index to access if no index is set'\n    },\n    'defaultColumns': {\n      value: ['_source'],\n      description: 'Columns displayed by default in the Discovery tab'\n    },\n    'metaFields': {\n      value: ['_source', '_id', '_type', '_index', '_score'],\n      description: 'Fields that exist outside of _source to merge into our document when displaying it'\n    },\n    'discover:sampleSize': {\n      value: 500,\n      description: 'The number of rows to show in the table'\n    },\n    'doc_table:highlight': {\n      value: true,\n      description: 'Highlight results in Discover and Saved Searches Dashboard.' + 'Highlighing makes request slow when working on big documents.'\n    },\n    'courier:maxSegmentCount': {\n      value: 30,\n      description: 'Requests in discover are split into segments to prevent massive requests from being sent to ' + 'elasticsearch. This setting attempts to prevent the list of segments from getting too long, which might ' + 'cause requests to take much longer to process'\n    },\n    'fields:popularLimit': {\n      value: 10,\n      description: 'The top N most popular fields to show'\n    },\n    'histogram:barTarget': {\n      value: 50,\n      description: 'Attempt to generate around this many bar when using \"auto\" interval in date histograms'\n    },\n    'histogram:maxBars': {\n      value: 100,\n      description: 'Never show more than this many bar in date histograms, scale values if needed'\n    },\n    'visualization:tileMap:maxPrecision': {\n      value: 7,\n      description: 'The maximum geoHash precision displayed on tile maps: 7 is high, 10 is very high, ' + '12 is the max. ' + '<a href=\"http://www.elastic.co/guide/en/elasticsearch/reference/current/' + 'search-aggregations-bucket-geohashgrid-aggregation.html#_cell_dimensions_at_the_equator\" target=\"_blank\">' + 'Explanation of cell dimensions</a>'\n    },\n    'visualization:tileMap:WMSdefaults': {\n      value: JSON.stringify({\n        enabled: false,\n        url: 'https://basemap.nationalmap.gov/arcgis/services/USGSTopo/MapServer/WMSServer',\n        options: {\n          version: '1.3.0',\n          layers: '0',\n          format: 'image/png',\n          transparent: true,\n          attribution: 'Maps provided by USGS',\n          styles: ''\n        }\n      }, null, 2),\n      type: 'json',\n      description: 'Default <a href=\"http://leafletjs.com/reference.html#tilelayer-wms\" target=\"_blank\">properties</a> for the WMS map server support in the tile map'\n    },\n    'visualization:colorMapping': {\n      type: 'json',\n      value: JSON.stringify({\n        Count: '#6eadc1'\n      }),\n      description: 'Maps values to specified colors within visualizations'\n    },\n    'visualization:loadingDelay': {\n      value: '2s',\n      description: 'Time to wait before dimming visualizations during query'\n    },\n    'csv:separator': {\n      value: ',',\n      description: 'Separate exported values with this string'\n    },\n    'csv:quoteValues': {\n      value: true,\n      description: 'Should values be quoted in csv exports?'\n    },\n    'history:limit': {\n      value: 10,\n      description: 'In fields that have history (e.g. query inputs), show this many recent values'\n    },\n    'shortDots:enable': {\n      value: false,\n      description: 'Shorten long fields, for example, instead of foo.bar.baz, show f.b.baz'\n    },\n    'truncate:maxHeight': {\n      value: 115,\n      description: 'The maximum height that a cell in a table should occupy. Set to 0 to disable truncation'\n    },\n    'indexPattern:fieldMapping:lookBack': {\n      value: 5,\n      description: 'For index patterns containing timestamps in their names, look for this many recent matching ' + 'patterns from which to query the field mapping'\n    },\n    'format:defaultTypeMap': {\n      type: 'json',\n      value: '{\\n  \"ip\": { \"id\": \"ip\", \"params\": {} },\\n  \"date\": { \"id\": \"date\", \"params\": {} },\\n  \"number\": { \"id\": \"number\", \"params\": {} },\\n  \"_source\": { \"id\": \"_source\", \"params\": {} },\\n  \"_default_\": { \"id\": \"string\", \"params\": {} }\\n}',\n      description: 'Map of the format name to use by default for each field type. ' + '\"_default_\" is used if the field type is not mentioned explicitly'\n    },\n    'format:number:defaultPattern': {\n      type: 'string',\n      value: '0,0.[000]',\n      description: 'Default <a href=\"http://numeraljs.com/\" target=\"_blank\">numeral format</a> for the \"number\" format'\n    },\n    'format:bytes:defaultPattern': {\n      type: 'string',\n      value: '0,0.[000]b',\n      description: 'Default <a href=\"http://numeraljs.com/\" target=\"_blank\">numeral format</a> for the \"bytes\" format'\n    },\n    'format:percent:defaultPattern': {\n      type: 'string',\n      value: '0,0.[000]%',\n      description: 'Default <a href=\"http://numeraljs.com/\" target=\"_blank\">numeral format</a> for the \"percent\" format'\n    },\n    'format:currency:defaultPattern': {\n      type: 'string',\n      value: '($0,0.[00])',\n      description: 'Default <a href=\"http://numeraljs.com/\" target=\"_blank\">numeral format</a> for the \"currency\" format'\n    },\n    'savedObjects:perPage': {\n      type: 'number',\n      value: 5,\n      description: 'Number of objects to show per page in the load dialog'\n    },\n    'timepicker:timeDefaults': {\n      type: 'json',\n      value: '{\\n  \"from\": \"now-15m\",\\n  \"to\": \"now\",\\n  \"mode\": \"quick\"\\n}',\n      description: 'The timefilter selection to use when Kibana is started without one'\n    },\n    'timepicker:refreshIntervalDefaults': {\n      type: 'json',\n      value: '{\\n  \"display\": \"Off\",\\n  \"pause\": false,\\n  \"value\": 0\\n}',\n      description: 'The timefilter\\'s default refresh interval'\n    },\n    'dashboard:defaultDarkTheme': {\n      value: false,\n      description: 'New dashboards use dark theme by default'\n    },\n    'filters:pinnedByDefault': {\n      value: false,\n      description: 'Whether the filters should have a global state (be pinned) by default'\n    },\n    'notifications:banner': {\n      type: 'markdown',\n      description: 'A custom banner intended for temporary notices to all users. <a href=\"https://help.github.com/articles/basic-writing-and-formatting-syntax/\" target=\"_blank\">Markdown supported</a>.',\n      value: ''\n    },\n    'notifications:lifetime:banner': {\n      value: 3000000,\n      description: 'The time in milliseconds which a banner notification ' + 'will be displayed on-screen for. Setting to Infinity will disable.'\n    },\n    'notifications:lifetime:error': {\n      value: 300000,\n      description: 'The time in milliseconds which an error notification ' + 'will be displayed on-screen for. Setting to Infinity will disable.'\n    },\n    'notifications:lifetime:warning': {\n      value: 10000,\n      description: 'The time in milliseconds which a warning notification ' + 'will be displayed on-screen for. Setting to Infinity will disable.'\n    },\n    'notifications:lifetime:info': {\n      value: 5000,\n      description: 'The time in milliseconds which an information notification ' + 'will be displayed on-screen for. Setting to Infinity will disable.'\n    }\n  };\n}\n\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3VpL3NldHRpbmdzL2RlZmF1bHRzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O3FCQUV3Qix1QkFBdUI7Ozs7Ozs4QkFGNUIsaUJBQWlCOzs7O0FBRXJCLFNBQVMsdUJBQXVCLEdBQUc7QUFDaEQsTUFBTSxRQUFRLEdBQUcsNEJBQU8sUUFBUSxFQUFFLENBQUMsS0FBSyxFQUFFLENBQUM7O2lDQUNsQixRQUFROztNQUExQixjQUFjOzs7QUFHckIsU0FBTztBQUNMLGNBQVUsRUFBRTtBQUNWLGNBQVEsRUFBRSxJQUFJO0tBQ2Y7QUFDRCwrQkFBMkIsRUFBRTtBQUMzQixXQUFLLEVBQUUsOEJBQThCO0FBQ3JDLGlCQUFXLEVBQUUsNEtBQTRLO0FBQ3pMLFVBQUksRUFBRSxNQUFNO0tBQ2I7QUFDRCxrQkFBYyxFQUFFO0FBQ2QsV0FBSyxFQUFFLGdDQUFnQztBQUN2QyxpQkFBVyxFQUFFLHFLQUFxSztBQUNsTCxVQUFJLEVBQUUsTUFBTTtLQUNiO0FBQ0QsZ0JBQVksRUFBRTtBQUNaLFdBQUssRUFBRSw0QkFBNEI7QUFDbkMsaUJBQVcsRUFBRSxzSUFBc0k7S0FDcEo7QUFDRCxtQkFBZSxFQUFFO0FBQ2YsV0FBSyxFQUFFLFNBQVM7QUFDaEIsaUJBQVcsRUFBRSwyRkFBMkY7QUFDeEcsVUFBSSxFQUFFLFFBQVE7QUFDZCxhQUFPLEdBQUcsU0FBUyw0QkFBSyw0QkFBTyxFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUM7S0FDM0M7QUFDRCx1QkFBbUIsRUFBRTtBQUNuQixVQUFJLEVBQUUsTUFBTTtBQUNaLFdBQUssZ0tBUVQ7QUFDSSxpQkFBVyxFQUNULGtFQUFrRSxHQUNsRSwwRUFBMEUsR0FDMUUsMENBQTBDLEdBQzFDLGtGQUFrRixHQUNsRix3QkFBd0IsQUFDekI7S0FDRjtBQUNELG9CQUFnQixFQUFFO0FBQ2hCLFdBQUssRUFBRSxjQUFjO0FBQ3JCLGlCQUFXLEVBQUUsaUNBQWlDO0FBQzlDLFVB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LFdBQUssRUFBRSxFQUFFO0tBQ1Y7QUFDRCxtQ0FBK0IsRUFBRTtBQUMvQixXQUFLLEVBQUUsT0FBTztBQUNkLGlCQUFXLEVBQUUsdURBQXVELEdBQ3BFLG9FQUFvRTtLQUNyRTtBQUNELGtDQUE4QixFQUFFO0FBQzlCLFdBQUssRUFBRSxNQUFNO0FBQ2IsaUJBQVcsRUFBRSx1REFBdUQsR0FDcEUsb0VBQW9FO0tBQ3JFO0FBQ0Qsb0NBQWdDLEVBQUU7QUFDaEMsV0FBSyxFQUFFLEtBQUs7QUFDWixpQkFBVyxFQUFFLHdEQUF3RCxHQUNuRSxvRUFBb0U7S0FDdkU7QUFDRCxpQ0FBNkIsRUFBRTtBQUM3QixXQUFLLEVBQUUsSUFBSTtBQUNYLGlCQUFXLEVBQUUsNkRBQTZELEdBQ3hFLG9FQUFvRTtLQUN2RTtHQUNGLENBQUM7Q0FDSDs7QUFBQSxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3VpL3NldHRpbmdzL2RlZmF1bHRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQtdGltZXpvbmUnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBkZWZhdWx0U2V0dGluZ3NQcm92aWRlcigpIHtcbiAgY29uc3Qgd2Vla2RheXMgPSBtb21lbnQud2Vla2RheXMoKS5zbGljZSgpO1xuICBjb25zdCBbZGVmYXVsdFdlZWtkYXldID0gd2Vla2RheXM7XG5cbiAgLy8gd3JhcHBlZCBpbiBwcm92aWRlciBzbyB0aGF0IGEgbmV3IGluc3RhbmNlIGlzIGdpdmVuIHRvIGVhY2ggYXBwL3Rlc3RcbiAgcmV0dXJuIHtcbiAgICAnYnVpbGROdW0nOiB7XG4gICAgICByZWFkb25seTogdHJ1ZVxuICAgIH0sXG4gICAgJ3F1ZXJ5OnF1ZXJ5U3RyaW5nOm9wdGlvbnMnOiB7XG4gICAgICB2YWx1ZTogJ3sgXCJhbmFseXplX3dpbGRjYXJkXCI6IHRydWUgfScsXG4gICAgICBkZXNjcmlwdGlvbjogJzxhIGhyZWY9XCJodHRwczovL3d3dy5lbGFzdGljLmNvL2d1aWRlL2VuL2VsYXN0aWNzZWFyY2gvcmVmZXJlbmNlL2N1cnJlbnQvcXVlcnktZHNsLXF1ZXJ5LXN0cmluZy1xdWVyeS5odG1sXCIgdGFyZ2V0PVwiX2JsYW5rXCI+T3B0aW9uczwvYT4gZm9yIHRoZSBsdWNlbmUgcXVlcnkgc3RyaW5nIHBhcnNlcicsXG4gICAgICB0eXBlOiAnanNvbidcbiAgICB9LFxuICAgICdzb3J0Om9wdGlvbnMnOiB7XG4gICAgICB2YWx1ZTogJ3sgXCJ1bm1hcHBlZF90eXBlXCI6IFwiYm9vbGVhblwiIH0nLFxuICAgICAgZGVzY3JpcHRpb246ICc8YSBocmVmPVwiaHR0cHM6Ly93d3cuZWxhc3RpYy5jby9ndWlkZS9lbi9lbGFzdGljc2VhcmNoL3JlZmVyZW5jZS9jdXJyZW50L3NlYXJjaC1yZXF1ZXN0LXNvcnQuaHRtbFwiIHRhcmdldD1cIl9ibGFua1wiPk9wdGlvbnM8L2E+IGZvciB0aGUgRWxhc3RpY3NlYXJjaCBzb3J0IHBhcmFtZXRlcicsXG4gICAgICB0eXBlOiAnanNvbidcbiAgICB9LFxuICAgICdkYXRlRm9ybWF0Jzoge1xuICAgICAgdmFsdWU6ICdNTU1NIERvIFlZWVksIEhIOm1tOnNzLlNTUycsXG4gICAgICBkZXNjcmlwdGlvbjogJ1doZW4gZGlzcGxheWluZyBhIHByZXR0eSBmb3JtYXR0ZWQgZGF0ZSwgdXNlIHRoaXMgPGEgaHJlZj1cImh0dHA6Ly9tb21lbnRqcy5jb20vZG9jcy8jL2Rpc3BsYXlpbmcvZm9ybWF0L1wiIHRhcmdldD1cIl9ibGFua1wiPmZvcm1hdDwvYT4nLFxuICAgIH0sXG4gICAgJ2RhdGVGb3JtYXQ6dHonOiB7XG4gICAgICB2YWx1ZTogJ0Jyb3dzZXInLFxuICAgICAgZGVzY3JpcHRpb246ICdXaGljaCB0aW1lem9uZSBzaG91bGQgYmUgdXNlZC4gIFwiQnJvd3NlclwiIHdpbGwgdXNlIHRoZSB0aW1lem9uZSBkZXRlY3RlZCBieSB5b3VyIGJyb3dzZXIuJyxcbiAgICAgIHR5cGU6ICdzZWxlY3QnLFxuICAgICAgb3B0aW9uczogWydCcm93c2VyJywgLi4ubW9tZW50LnR6Lm5hbWVzKCldXG4gICAgfSxcbiAgICAnZGF0ZUZvcm1hdDpzY2FsZWQnOiB7XG4gICAgICB0eXBlOiAnanNvbicsXG4gICAgICB2YWx1ZTpcbmBbXG4gIFtcIlwiLCBcIkhIOm1tOnNzLlNTU1wiXSxcbiAgW1wiUFQxU1wiLCBcIkhIOm1tOnNzXCJdLFxuICBbXCJQVDFNXCIsIFwiSEg6bW1cIl0sXG4gIFtcIlBUMUhcIiwgXCJZWVlZLU1NLUREIEhIOm1tXCJdLFxuICBbXCJQMURUXCIsIFwiWVlZWS1NTS1ERFwiXSxcbiAgW1wiUDFZVFwiLCBcIllZWVlcIl1cbl1gLFxuICAgICAgZGVzY3JpcHRpb246IChcbiAgICAgICAgJ1ZhbHVlcyB0aGF0IGRlZmluZSB0aGUgZm9ybWF0IHVzZWQgaW4gc2l0dWF0aW9ucyB3aGVyZSB0aW1lYmFzZWQnICtcbiAgICAgICAgJyBkYXRhIGlzIHJlbmRlcmVkIGluIG9yZGVyLCBhbmQgZm9ybWF0dGVkIHRpbWVzdGFtcHMgc2hvdWxkIGFkYXB0IHRvIHRoZScgK1xuICAgICAgICAnIGludGVydmFsIGJldHdlZW4gbWVhc3VyZW1lbnRzLiBLZXlzIGFyZScgK1xuICAgICAgICAnIDxhIGhyZWY9XCJodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT184NjAxI1RpbWVfaW50ZXJ2YWxzXCIgdGFyZ2V0PVwiX2JsYW5rXCI+JyArXG4gICAgICAgICdJU084NjAxIGludGVydmFscy48L2E+J1xuICAgICAgKVxuICAgIH0sXG4gICAgJ2RhdGVGb3JtYXQ6ZG93Jzoge1xuICAgICAgdmFsdWU6IGRlZmF1bHRXZWVrZGF5LFxuICAgICAgZGVzY3JpcHRpb246ICdXaGF0IGRheSBzaG91bGQgd2Vla3Mgc3RhcnQgb24/JyxcbiAgICAgIHR5cGU6ICdzZWxlY3QnLFxuICAgICAgb3B0aW9uczogd2Vla2RheXNcbiAgICB9LFxuICAgICdkZWZhdWx0SW5kZXgnOiB7XG4gICAgICB2YWx1ZTogbnVsbCxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGhlIGluZGV4IHRvIGFjY2VzcyBpZiBubyBpbmRleCBpcyBzZXQnLFxuICAgIH0sXG4gICAgJ2RlZmF1bHRDb2x1bW5zJzoge1xuICAgICAgdmFsdWU6IFsnX3NvdXJjZSddLFxuICAgICAgZGVzY3JpcHRpb246ICdDb2x1bW5zIGRpc3BsYXllZCBieSBkZWZhdWx0IGluIHRoZSBEaXNjb3ZlcnkgdGFiJyxcbiAgICB9LFxuICAgICdtZXRhRmllbGRzJzoge1xuICAgICAgdmFsdWU6IFsnX3NvdXJjZScsICdfaWQnLCAnX3R5cGUnLCAnX2luZGV4JywgJ19zY29yZSddLFxuICAgICAgZGVzY3JpcHRpb246ICdGaWVsZHMgdGhhdCBleGlzdCBvdXRzaWRlIG9mIF9zb3VyY2UgdG8gbWVyZ2UgaW50byBvdXIgZG9jdW1lbnQgd2hlbiBkaXNwbGF5aW5nIGl0JyxcbiAgICB9LFxuICAgICdkaXNjb3ZlcjpzYW1wbGVTaXplJzoge1xuICAgICAgdmFsdWU6IDUwMCxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGhlIG51bWJlciBvZiByb3dzIHRvIHNob3cgaW4gdGhlIHRhYmxlJyxcbiAgICB9LFxuICAgICdkb2NfdGFibGU6aGlnaGxpZ2h0Jzoge1xuICAgICAgdmFsdWU6IHRydWUsXG4gICAgICBkZXNjcmlwdGlvbjogJ0hpZ2hsaWdodCByZXN1bHRzIGluIERpc2NvdmVyIGFuZCBTYXZlZCBTZWFyY2hlcyBEYXNoYm9hcmQuJyArXG4gICAgICAgICdIaWdobGlnaGluZyBtYWtlcyByZXF1ZXN0IHNsb3cgd2hlbiB3b3JraW5nIG9uIGJpZyBkb2N1bWVudHMuJyxcbiAgICB9LFxuICAgICdjb3VyaWVyOm1heFNlZ21lbnRDb3VudCc6IHtcbiAgICAgIHZhbHVlOiAzMCxcbiAgICAgIGRlc2NyaXB0aW9uOiAnUmVxdWVzdHMgaW4gZGlzY292ZXIgYXJlIHNwbGl0IGludG8gc2VnbWVudHMgdG8gcHJldmVudCBtYXNzaXZlIHJlcXVlc3RzIGZyb20gYmVpbmcgc2VudCB0byAnICtcbiAgICAgICAgJ2VsYXN0aWNzZWFyY2guIFRoaXMgc2V0dGluZyBhdHRlbXB0cyB0byBwcmV2ZW50IHRoZSBsaXN0IG9mIHNlZ21lbnRzIGZyb20gZ2V0dGluZyB0b28gbG9uZywgd2hpY2ggbWlnaHQgJyArXG4gICAgICAgICdjYXVzZSByZXF1ZXN0cyB0byB0YWtlIG11Y2ggbG9uZ2VyIHRvIHByb2Nlc3MnXG4gICAgfSxcbiAgICAnZmllbGRzOnBvcHVsYXJMaW1pdCc6IHtcbiAgICAgIHZhbHVlOiAxMCxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGhlIHRvcCBOIG1vc3QgcG9wdWxhciBmaWVsZHMgdG8gc2hvdycsXG4gICAgfSxcbiAgICAnaGlzdG9ncmFtOmJhclRhcmdldCc6IHtcbiAgICAgIHZhbHVlOiA1MCxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQXR0ZW1wdCB0byBnZW5lcmF0ZSBhcm91bmQgdGhpcyBtYW55IGJhciB3aGVuIHVzaW5nIFwiYXV0b1wiIGludGVydmFsIGluIGRhdGUgaGlzdG9ncmFtcycsXG4gICAgfSxcbiAgICAnaGlzdG9ncmFtOm1heEJhcnMnOiB7XG4gICAgICB2YWx1ZTogMTAwLFxuICAgICAgZGVzY3JpcHRpb246ICdOZXZlciBzaG93IG1vcmUgdGhhbiB0aGlzIG1hbnkgYmFyIGluIGRhdGUgaGlzdG9ncmFtcywgc2NhbGUgdmFsdWVzIGlmIG5lZWRlZCcsXG4gICAgfSxcbiAgICAndmlzdWFsaXphdGlvbjp0aWxlTWFwOm1heFByZWNpc2lvbic6IHtcbiAgICAgIHZhbHVlOiA3LFxuICAgICAgZGVzY3JpcHRpb246ICdUaGUgbWF4aW11bSBnZW9IYXNoIHByZWNpc2lvbiBkaXNwbGF5ZWQgb24gdGlsZSBtYXBzOiA3IGlzIGhpZ2gsIDEwIGlzIHZlcnkgaGlnaCwgJyArXG4gICAgICAnMTIgaXMgdGhlIG1heC4gJyArXG4gICAgICAnPGEgaHJlZj1cImh0dHA6Ly93d3cuZWxhc3RpYy5jby9ndWlkZS9lbi9lbGFzdGljc2VhcmNoL3JlZmVyZW5jZS9jdXJyZW50LycgK1xuICAgICAgJ3NlYXJjaC1hZ2dyZWdhdGlvbnMtYnVja2V0LWdlb2hhc2hncmlkLWFnZ3JlZ2F0aW9uLmh0bWwjX2NlbGxfZGltZW5zaW9uc19hdF90aGVfZXF1YXRvclwiIHRhcmdldD1cIl9ibGFua1wiPicgK1xuICAgICAgJ0V4cGxhbmF0aW9uIG9mIGNlbGwgZGltZW5zaW9uczwvYT4nLFxuICAgIH0sXG4gICAgJ3Zpc3VhbGl6YXRpb246dGlsZU1hcDpXTVNkZWZhdWx0cyc6IHtcbiAgICAgIHZhbHVlOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGVuYWJsZWQ6IGZhbHNlLFxuICAgICAgICB1cmw6ICdodHRwczovL2Jhc2VtYXAubmF0aW9uYWxtYXAuZ292L2FyY2dpcy9zZXJ2aWNlcy9VU0dTVG9wby9NYXBTZXJ2ZXIvV01TU2VydmVyJyxcbiAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgIHZlcnNpb246ICcxLjMuMCcsXG4gICAgICAgICAgbGF5ZXJzOiAnMCcsXG4gICAgICAgICAgZm9ybWF0OiAnaW1hZ2UvcG5nJyxcbiAgICAgICAgICB0cmFuc3BhcmVudDogdHJ1ZSxcbiAgICAgICAgICBhdHRyaWJ1dGlvbjogJ01hcHMgcHJvdmlkZWQgYnkgVVNHUycsXG4gICAgICAgICAgc3R5bGVzOiAnJyxcbiAgICAgICAgfVxuICAgICAgfSwgbnVsbCwgMiksXG4gICAgICB0eXBlOiAnanNvbicsXG4gICAgICBkZXNjcmlwdGlvbjogJ0RlZmF1bHQgPGEgaHJlZj1cImh0dHA6Ly9sZWFmbGV0anMuY29tL3JlZmVyZW5jZS5odG1sI3RpbGVsYXllci13bXNcIiB0YXJnZXQ9XCJfYmxhbmtcIj5wcm9wZXJ0aWVzPC9hPiBmb3IgdGhlIFdNUyBtYXAgc2VydmVyIHN1cHBvcnQgaW4gdGhlIHRpbGUgbWFwJ1xuICAgIH0sXG4gICAgJ3Zpc3VhbGl6YXRpb246Y29sb3JNYXBwaW5nJzoge1xuICAgICAgdHlwZTogJ2pzb24nLFxuICAgICAgdmFsdWU6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgQ291bnQ6ICcjNmVhZGMxJ1xuICAgICAgfSksXG4gICAgICBkZXNjcmlwdGlvbjogJ01hcHMgdmFsdWVzIHRvIHNwZWNpZmllZCBjb2xvcnMgd2l0aGluIHZpc3VhbGl6YXRpb25zJ1xuICAgIH0sXG4gICAgJ3Zpc3VhbGl6YXRpb246bG9hZGluZ0RlbGF5Jzoge1xuICAgICAgdmFsdWU6ICcycycsXG4gICAgICBkZXNjcmlwdGlvbjogJ1RpbWUgdG8gd2FpdCBiZWZvcmUgZGltbWluZyB2aXN1YWxpemF0aW9ucyBkdXJpbmcgcXVlcnknXG4gICAgfSxcbiAgICAnY3N2OnNlcGFyYXRvcic6IHtcbiAgICAgIHZhbHVlOiAnLCcsXG4gICAgICBkZXNjcmlwdGlvbjogJ1NlcGFyYXRlIGV4cG9ydGVkIHZhbHVlcyB3aXRoIHRoaXMgc3RyaW5nJyxcbiAgICB9LFxuICAgICdjc3Y6cXVvdGVWYWx1ZXMnOiB7XG4gICAgICB2YWx1ZTogdHJ1ZSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnU2hvdWxkIHZhbHVlcyBiZSBxdW90ZWQgaW4gY3N2IGV4cG9ydHM/JyxcbiAgICB9LFxuICAgICdoaXN0b3J5OmxpbWl0Jzoge1xuICAgICAgdmFsdWU6IDEwLFxuICAgICAgZGVzY3JpcHRpb246ICdJbiBmaWVsZHMgdGhhdCBoYXZlIGhpc3RvcnkgKGUuZy4gcXVlcnkgaW5wdXRzKSwgc2hvdyB0aGlzIG1hbnkgcmVjZW50IHZhbHVlcycsXG4gICAgfSxcbiAgICAnc2hvcnREb3RzOmVuYWJsZSc6IHtcbiAgICAgIHZhbHVlOiBmYWxzZSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnU2hvcnRlbiBsb25nIGZpZWxkcywgZm9yIGV4YW1wbGUsIGluc3RlYWQgb2YgZm9vLmJhci5iYXosIHNob3cgZi5iLmJheicsXG4gICAgfSxcbiAgICAndHJ1bmNhdGU6bWF4SGVpZ2h0Jzoge1xuICAgICAgdmFsdWU6IDExNSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGhlIG1heGltdW0gaGVpZ2h0IHRoYXQgYSBjZWxsIGluIGEgdGFibGUgc2hvdWxkIG9jY3VweS4gU2V0IHRvIDAgdG8gZGlzYWJsZSB0cnVuY2F0aW9uJ1xuICAgIH0sXG4gICAgJ2luZGV4UGF0dGVybjpmaWVsZE1hcHBpbmc6bG9va0JhY2snOiB7XG4gICAgICB2YWx1ZTogNSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnRm9yIGluZGV4IHBhdHRlcm5zIGNvbnRhaW5pbmcgdGltZXN0YW1wcyBpbiB0aGVpciBuYW1lcywgbG9vayBmb3IgdGhpcyBtYW55IHJlY2VudCBtYXRjaGluZyAnICtcbiAgICAgICAgJ3BhdHRlcm5zIGZyb20gd2hpY2ggdG8gcXVlcnkgdGhlIGZpZWxkIG1hcHBpbmcnXG4gICAgfSxcbiAgICAnZm9ybWF0OmRlZmF1bHRUeXBlTWFwJzoge1xuICAgICAgdHlwZTogJ2pzb24nLFxuICAgICAgdmFsdWU6XG5ge1xuICBcImlwXCI6IHsgXCJpZFwiOiBcImlwXCIsIFwicGFyYW1zXCI6IHt9IH0sXG4gIFwiZGF0ZVwiOiB7IFwiaWRcIjogXCJkYXRlXCIsIFwicGFyYW1zXCI6IHt9IH0sXG4gIFwibnVtYmVyXCI6IHsgXCJpZFwiOiBcIm51bWJlclwiLCBcInBhcmFtc1wiOiB7fSB9LFxuICBcIl9zb3VyY2VcIjogeyBcImlkXCI6IFwiX3NvdXJjZVwiLCBcInBhcmFtc1wiOiB7fSB9LFxuICBcIl9kZWZhdWx0X1wiOiB7IFwiaWRcIjogXCJzdHJpbmdcIiwgXCJwYXJhbXNcIjoge30gfVxufWAsXG4gICAgICBkZXNjcmlwdGlvbjogJ01hcCBvZiB0aGUgZm9ybWF0IG5hbWUgdG8gdXNlIGJ5IGRlZmF1bHQgZm9yIGVhY2ggZmllbGQgdHlwZS4gJyArXG4gICAgICAgICdcIl9kZWZhdWx0X1wiIGlzIHVzZWQgaWYgdGhlIGZpZWxkIHR5cGUgaXMgbm90IG1lbnRpb25lZCBleHBsaWNpdGx5J1xuICAgIH0sXG4gICAgJ2Zvcm1hdDpudW1iZXI6ZGVmYXVsdFBhdHRlcm4nOiB7XG4gICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgIHZhbHVlOiAnMCwwLlswMDBdJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnRGVmYXVsdCA8YSBocmVmPVwiaHR0cDovL251bWVyYWxqcy5jb20vXCIgdGFyZ2V0PVwiX2JsYW5rXCI+bnVtZXJhbCBmb3JtYXQ8L2E+IGZvciB0aGUgXCJudW1iZXJcIiBmb3JtYXQnXG4gICAgfSxcbiAgICAnZm9ybWF0OmJ5dGVzOmRlZmF1bHRQYXR0ZXJuJzoge1xuICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICB2YWx1ZTogJzAsMC5bMDAwXWInLFxuICAgICAgZGVzY3JpcHRpb246ICdEZWZhdWx0IDxhIGhyZWY9XCJodHRwOi8vbnVtZXJhbGpzLmNvbS9cIiB0YXJnZXQ9XCJfYmxhbmtcIj5udW1lcmFsIGZvcm1hdDwvYT4gZm9yIHRoZSBcImJ5dGVzXCIgZm9ybWF0J1xuICAgIH0sXG4gICAgJ2Zvcm1hdDpwZXJjZW50OmRlZmF1bHRQYXR0ZXJuJzoge1xuICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICB2YWx1ZTogJzAsMC5bMDAwXSUnLFxuICAgICAgZGVzY3JpcHRpb246ICdEZWZhdWx0IDxhIGhyZWY9XCJodHRwOi8vbnVtZXJhbGpzLmNvbS9cIiB0YXJnZXQ9XCJfYmxhbmtcIj5udW1lcmFsIGZvcm1hdDwvYT4gZm9yIHRoZSBcInBlcmNlbnRcIiBmb3JtYXQnXG4gICAgfSxcbiAgICAnZm9ybWF0OmN1cnJlbmN5OmRlZmF1bHRQYXR0ZXJuJzoge1xuICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICB2YWx1ZTogJygkMCwwLlswMF0pJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnRGVmYXVsdCA8YSBocmVmPVwiaHR0cDovL251bWVyYWxqcy5jb20vXCIgdGFyZ2V0PVwiX2JsYW5rXCI+bnVtZXJhbCBmb3JtYXQ8L2E+IGZvciB0aGUgXCJjdXJyZW5jeVwiIGZvcm1hdCdcbiAgICB9LFxuICAgICdzYXZlZE9iamVjdHM6cGVyUGFnZSc6IHtcbiAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgdmFsdWU6IDUsXG4gICAgICBkZXNjcmlwdGlvbjogJ051bWJlciBvZiBvYmplY3RzIHRvIHNob3cgcGVyIHBhZ2UgaW4gdGhlIGxvYWQgZGlhbG9nJ1xuICAgIH0sXG4gICAgJ3RpbWVwaWNrZXI6dGltZURlZmF1bHRzJzoge1xuICAgICAgdHlwZTogJ2pzb24nLFxuICAgICAgdmFsdWU6XG5ge1xuICBcImZyb21cIjogXCJub3ctMTVtXCIsXG4gIFwidG9cIjogXCJub3dcIixcbiAgXCJtb2RlXCI6IFwicXVpY2tcIlxufWAsXG4gICAgICBkZXNjcmlwdGlvbjogJ1RoZSB0aW1lZmlsdGVyIHNlbGVjdGlvbiB0byB1c2Ugd2hlbiBLaWJhbmEgaXMgc3RhcnRlZCB3aXRob3V0IG9uZSdcbiAgICB9LFxuICAgICd0aW1lcGlja2VyOnJlZnJlc2hJbnRlcnZhbERlZmF1bHRzJzoge1xuICAgICAgdHlwZTogJ2pzb24nLFxuICAgICAgdmFsdWU6XG5ge1xuICBcImRpc3BsYXlcIjogXCJPZmZcIixcbiAgXCJwYXVzZVwiOiBmYWxzZSxcbiAgXCJ2YWx1ZVwiOiAwXG59YCxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGhlIHRpbWVmaWx0ZXJcXCdzIGRlZmF1bHQgcmVmcmVzaCBpbnRlcnZhbCdcbiAgICB9LFxuICAgICdkYXNoYm9hcmQ6ZGVmYXVsdERhcmtUaGVtZSc6IHtcbiAgICAgIHZhbHVlOiBmYWxzZSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnTmV3IGRhc2hib2FyZHMgdXNlIGRhcmsgdGhlbWUgYnkgZGVmYXVsdCdcbiAgICB9LFxuICAgICdmaWx0ZXJzOnBpbm5lZEJ5RGVmYXVsdCc6IHtcbiAgICAgIHZhbHVlOiBmYWxzZSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnV2hldGhlciB0aGUgZmlsdGVycyBzaG91bGQgaGF2ZSBhIGdsb2JhbCBzdGF0ZSAoYmUgcGlubmVkKSBieSBkZWZhdWx0J1xuICAgIH0sXG4gICAgJ25vdGlmaWNhdGlvbnM6YmFubmVyJzoge1xuICAgICAgdHlwZTogJ21hcmtkb3duJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQSBjdXN0b20gYmFubmVyIGludGVuZGVkIGZvciB0ZW1wb3Jhcnkgbm90aWNlcyB0byBhbGwgdXNlcnMuIDxhIGhyZWY9XCJodHRwczovL2hlbHAuZ2l0aHViLmNvbS9hcnRpY2xlcy9iYXNpYy13cml0aW5nLWFuZC1mb3JtYXR0aW5nLXN5bnRheC9cIiB0YXJnZXQ9XCJfYmxhbmtcIj5NYXJrZG93biBzdXBwb3J0ZWQ8L2E+LicsXG4gICAgICB2YWx1ZTogJydcbiAgICB9LFxuICAgICdub3RpZmljYXRpb25zOmxpZmV0aW1lOmJhbm5lcic6IHtcbiAgICAgIHZhbHVlOiAzMDAwMDAwLFxuICAgICAgZGVzY3JpcHRpb246ICdUaGUgdGltZSBpbiBtaWxsaXNlY29uZHMgd2hpY2ggYSBiYW5uZXIgbm90aWZpY2F0aW9uICcgK1xuICAgICAgJ3dpbGwgYmUgZGlzcGxheWVkIG9uLXNjcmVlbiBmb3IuIFNldHRpbmcgdG8gSW5maW5pdHkgd2lsbCBkaXNhYmxlLidcbiAgICB9LFxuICAgICdub3RpZmljYXRpb25zOmxpZmV0aW1lOmVycm9yJzoge1xuICAgICAgdmFsdWU6IDMwMDAwMCxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGhlIHRpbWUgaW4gbWlsbGlzZWNvbmRzIHdoaWNoIGFuIGVycm9yIG5vdGlmaWNhdGlvbiAnICtcbiAgICAgICd3aWxsIGJlIGRpc3BsYXllZCBvbi1zY3JlZW4gZm9yLiBTZXR0aW5nIHRvIEluZmluaXR5IHdpbGwgZGlzYWJsZS4nXG4gICAgfSxcbiAgICAnbm90aWZpY2F0aW9uczpsaWZldGltZTp3YXJuaW5nJzoge1xuICAgICAgdmFsdWU6IDEwMDAwLFxuICAgICAgZGVzY3JpcHRpb246ICdUaGUgdGltZSBpbiBtaWxsaXNlY29uZHMgd2hpY2ggYSB3YXJuaW5nIG5vdGlmaWNhdGlvbiAnICtcbiAgICAgICAgJ3dpbGwgYmUgZGlzcGxheWVkIG9uLXNjcmVlbiBmb3IuIFNldHRpbmcgdG8gSW5maW5pdHkgd2lsbCBkaXNhYmxlLidcbiAgICB9LFxuICAgICdub3RpZmljYXRpb25zOmxpZmV0aW1lOmluZm8nOiB7XG4gICAgICB2YWx1ZTogNTAwMCxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGhlIHRpbWUgaW4gbWlsbGlzZWNvbmRzIHdoaWNoIGFuIGluZm9ybWF0aW9uIG5vdGlmaWNhdGlvbiAnICtcbiAgICAgICAgJ3dpbGwgYmUgZGlzcGxheWVkIG9uLXNjcmVlbiBmb3IuIFNldHRpbmcgdG8gSW5maW5pdHkgd2lsbCBkaXNhYmxlLidcbiAgICB9LFxuICB9O1xufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/ui/settings/defaults.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/src/ui/settings/defaults.js",
      "sourcesContent": [
        "import moment from 'moment-timezone';\n\nexport default function defaultSettingsProvider() {\n  const weekdays = moment.weekdays().slice();\n  const [defaultWeekday] = weekdays;\n\n  // wrapped in provider so that a new instance is given to each app/test\n  return {\n    'buildNum': {\n      readonly: true\n    },\n    'query:queryString:options': {\n      value: '{ \"analyze_wildcard\": true }',\n      description: '<a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-query-string-query.html\" target=\"_blank\">Options</a> for the lucene query string parser',\n      type: 'json'\n    },\n    'sort:options': {\n      value: '{ \"unmapped_type\": \"boolean\" }',\n      description: '<a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/search-request-sort.html\" target=\"_blank\">Options</a> for the Elasticsearch sort parameter',\n      type: 'json'\n    },\n    'dateFormat': {\n      value: 'MMMM Do YYYY, HH:mm:ss.SSS',\n      description: 'When displaying a pretty formatted date, use this <a href=\"http://momentjs.com/docs/#/displaying/format/\" target=\"_blank\">format</a>',\n    },\n    'dateFormat:tz': {\n      value: 'Browser',\n      description: 'Which timezone should be used.  \"Browser\" will use the timezone detected by your browser.',\n      type: 'select',\n      options: ['Browser', ...moment.tz.names()]\n    },\n    'dateFormat:scaled': {\n      type: 'json',\n      value:\n`[\n  [\"\", \"HH:mm:ss.SSS\"],\n  [\"PT1S\", \"HH:mm:ss\"],\n  [\"PT1M\", \"HH:mm\"],\n  [\"PT1H\", \"YYYY-MM-DD HH:mm\"],\n  [\"P1DT\", \"YYYY-MM-DD\"],\n  [\"P1YT\", \"YYYY\"]\n]`,\n      description: (\n        'Values that define the format used in situations where timebased' +\n        ' data is rendered in order, and formatted timestamps should adapt to the' +\n        ' interval between measurements. Keys are' +\n        ' <a href=\"http://en.wikipedia.org/wiki/ISO_8601#Time_intervals\" target=\"_blank\">' +\n        'ISO8601 intervals.</a>'\n      )\n    },\n    'dateFormat:dow': {\n      value: defaultWeekday,\n      description: 'What day should weeks start on?',\n      type: 'select',\n      options: weekdays\n    },\n    'defaultIndex': {\n      value: null,\n      description: 'The index to access if no index is set',\n    },\n    'defaultColumns': {\n      value: ['_source'],\n      description: 'Columns displayed by default in the Discovery tab',\n    },\n    'metaFields': {\n      value: ['_source', '_id', '_type', '_index', '_score'],\n      description: 'Fields that exist outside of _source to merge into our document when displaying it',\n    },\n    'discover:sampleSize': {\n      value: 500,\n      description: 'The number of rows to show in the table',\n    },\n    'doc_table:highlight': {\n      value: true,\n      description: 'Highlight results in Discover and Saved Searches Dashboard.' +\n        'Highlighing makes request slow when working on big documents.',\n    },\n    'courier:maxSegmentCount': {\n      value: 30,\n      description: 'Requests in discover are split into segments to prevent massive requests from being sent to ' +\n        'elasticsearch. This setting attempts to prevent the list of segments from getting too long, which might ' +\n        'cause requests to take much longer to process'\n    },\n    'fields:popularLimit': {\n      value: 10,\n      description: 'The top N most popular fields to show',\n    },\n    'histogram:barTarget': {\n      value: 50,\n      description: 'Attempt to generate around this many bar when using \"auto\" interval in date histograms',\n    },\n    'histogram:maxBars': {\n      value: 100,\n      description: 'Never show more than this many bar in date histograms, scale values if needed',\n    },\n    'visualization:tileMap:maxPrecision': {\n      value: 7,\n      description: 'The maximum geoHash precision displayed on tile maps: 7 is high, 10 is very high, ' +\n      '12 is the max. ' +\n      '<a href=\"http://www.elastic.co/guide/en/elasticsearch/reference/current/' +\n      'search-aggregations-bucket-geohashgrid-aggregation.html#_cell_dimensions_at_the_equator\" target=\"_blank\">' +\n      'Explanation of cell dimensions</a>',\n    },\n    'visualization:tileMap:WMSdefaults': {\n      value: JSON.stringify({\n        enabled: false,\n        url: 'https://basemap.nationalmap.gov/arcgis/services/USGSTopo/MapServer/WMSServer',\n        options: {\n          version: '1.3.0',\n          layers: '0',\n          format: 'image/png',\n          transparent: true,\n          attribution: 'Maps provided by USGS',\n          styles: '',\n        }\n      }, null, 2),\n      type: 'json',\n      description: 'Default <a href=\"http://leafletjs.com/reference.html#tilelayer-wms\" target=\"_blank\">properties</a> for the WMS map server support in the tile map'\n    },\n    'visualization:colorMapping': {\n      type: 'json',\n      value: JSON.stringify({\n        Count: '#6eadc1'\n      }),\n      description: 'Maps values to specified colors within visualizations'\n    },\n    'visualization:loadingDelay': {\n      value: '2s',\n      description: 'Time to wait before dimming visualizations during query'\n    },\n    'csv:separator': {\n      value: ',',\n      description: 'Separate exported values with this string',\n    },\n    'csv:quoteValues': {\n      value: true,\n      description: 'Should values be quoted in csv exports?',\n    },\n    'history:limit': {\n      value: 10,\n      description: 'In fields that have history (e.g. query inputs), show this many recent values',\n    },\n    'shortDots:enable': {\n      value: false,\n      description: 'Shorten long fields, for example, instead of foo.bar.baz, show f.b.baz',\n    },\n    'truncate:maxHeight': {\n      value: 115,\n      description: 'The maximum height that a cell in a table should occupy. Set to 0 to disable truncation'\n    },\n    'indexPattern:fieldMapping:lookBack': {\n      value: 5,\n      description: 'For index patterns containing timestamps in their names, look for this many recent matching ' +\n        'patterns from which to query the field mapping'\n    },\n    'format:defaultTypeMap': {\n      type: 'json',\n      value:\n`{\n  \"ip\": { \"id\": \"ip\", \"params\": {} },\n  \"date\": { \"id\": \"date\", \"params\": {} },\n  \"number\": { \"id\": \"number\", \"params\": {} },\n  \"_source\": { \"id\": \"_source\", \"params\": {} },\n  \"_default_\": { \"id\": \"string\", \"params\": {} }\n}`,\n      description: 'Map of the format name to use by default for each field type. ' +\n        '\"_default_\" is used if the field type is not mentioned explicitly'\n    },\n    'format:number:defaultPattern': {\n      type: 'string',\n      value: '0,0.[000]',\n      description: 'Default <a href=\"http://numeraljs.com/\" target=\"_blank\">numeral format</a> for the \"number\" format'\n    },\n    'format:bytes:defaultPattern': {\n      type: 'string',\n      value: '0,0.[000]b',\n      description: 'Default <a href=\"http://numeraljs.com/\" target=\"_blank\">numeral format</a> for the \"bytes\" format'\n    },\n    'format:percent:defaultPattern': {\n      type: 'string',\n      value: '0,0.[000]%',\n      description: 'Default <a href=\"http://numeraljs.com/\" target=\"_blank\">numeral format</a> for the \"percent\" format'\n    },\n    'format:currency:defaultPattern': {\n      type: 'string',\n      value: '($0,0.[00])',\n      description: 'Default <a href=\"http://numeraljs.com/\" target=\"_blank\">numeral format</a> for the \"currency\" format'\n    },\n    'savedObjects:perPage': {\n      type: 'number',\n      value: 5,\n      description: 'Number of objects to show per page in the load dialog'\n    },\n    'timepicker:timeDefaults': {\n      type: 'json',\n      value:\n`{\n  \"from\": \"now-15m\",\n  \"to\": \"now\",\n  \"mode\": \"quick\"\n}`,\n      description: 'The timefilter selection to use when Kibana is started without one'\n    },\n    'timepicker:refreshIntervalDefaults': {\n      type: 'json',\n      value:\n`{\n  \"display\": \"Off\",\n  \"pause\": false,\n  \"value\": 0\n}`,\n      description: 'The timefilter\\'s default refresh interval'\n    },\n    'dashboard:defaultDarkTheme': {\n      value: false,\n      description: 'New dashboards use dark theme by default'\n    },\n    'filters:pinnedByDefault': {\n      value: false,\n      description: 'Whether the filters should have a global state (be pinned) by default'\n    },\n    'notifications:banner': {\n      type: 'markdown',\n      description: 'A custom banner intended for temporary notices to all users. <a href=\"https://help.github.com/articles/basic-writing-and-formatting-syntax/\" target=\"_blank\">Markdown supported</a>.',\n      value: ''\n    },\n    'notifications:lifetime:banner': {\n      value: 3000000,\n      description: 'The time in milliseconds which a banner notification ' +\n      'will be displayed on-screen for. Setting to Infinity will disable.'\n    },\n    'notifications:lifetime:error': {\n      value: 300000,\n      description: 'The time in milliseconds which an error notification ' +\n      'will be displayed on-screen for. Setting to Infinity will disable.'\n    },\n    'notifications:lifetime:warning': {\n      value: 10000,\n      description: 'The time in milliseconds which a warning notification ' +\n        'will be displayed on-screen for. Setting to Infinity will disable.'\n    },\n    'notifications:lifetime:info': {\n      value: 5000,\n      description: 'The time in milliseconds which an information notification ' +\n        'will be displayed on-screen for. Setting to Infinity will disable.'\n    },\n  };\n};\n"
      ]
    },
    "mtime": 1467036622893
  },
  "{\"filename\":\"/home/vio/v3metrics/src/optimize/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./fs_optimizer",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "FsOptimizer"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "async-to-generator",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nvar _fs_optimizer = require('./fs_optimizer');\n\nvar _fs_optimizer2 = _interopRequireDefault(_fs_optimizer);\n\nmodule.exports = _asyncToGenerator(function* (kbnServer, server, config) {\n  if (!config.get('optimize.enabled')) return;\n\n  // the lazy optimizer sets up two threads, one is the server listening\n  // on 5601 and the other is a server listening on 5602 that builds the\n  // bundles in a \"middleware\" style.\n  //\n  // the server listening on 5601 may be restarted a number of times, depending\n  // on the watch setup managed by the cli. It proxies all bundles/* requests to\n  // the other server. The server on 5602 is long running, in order to prevent\n  // complete rebuilds of the optimize content.\n  var lazy = config.get('optimize.lazy');\n  if (lazy) {\n    return yield kbnServer.mixin(require('./lazy/lazy'));\n  }\n\n  var bundles = kbnServer.bundles;\n  server.exposeStaticDir('/bundles/{path*}', bundles.env.workingDir);\n  yield bundles.writeEntryFiles();\n\n  // in prod, only bundle what looks invalid or missing\n  if (config.get('optimize.useBundleCache')) {\n    bundles = yield bundles.getInvalidBundles();\n  }\n\n  // we might not have any work to do\n  if (!bundles.getIds().length) {\n    server.log(['debug', 'optimize'], 'All bundles are cached and ready to go!');\n    return;\n  }\n\n  // only require the FsOptimizer when we need to\n  var optimizer = new _fs_optimizer2['default']({\n    env: bundles.env,\n    bundles: bundles,\n    profile: config.get('optimize.profile'),\n    urlBasePath: config.get('server.basePath'),\n    sourceMaps: config.get('optimize.sourceMaps'),\n    unsafeCache: config.get('optimize.unsafeCache')\n  });\n\n  server.log(['info', 'optimize'], 'Optimizing and caching ' + bundles.desc() + '. This may take a few minutes');\n\n  var start = Date.now();\n  yield optimizer.run();\n  var seconds = ((Date.now() - start) / 1000).toFixed(2);\n\n  server.log(['info', 'optimize'], 'Optimization of ' + bundles.desc() + ' complete in ' + seconds + ' seconds');\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL29wdGltaXplL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs0QkFBd0IsZ0JBQWdCOzs7O0FBQ3hDLE1BQU0sQ0FBQyxPQUFPLHFCQUFHLFdBQU8sU0FBUyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUs7QUFDcEQsTUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsa0JBQWtCLENBQUMsRUFBRSxPQUFPOzs7Ozs7Ozs7O0FBVTVDLE1BQUksSUFBSSxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsZUFBZSxDQUFDLENBQUM7QUFDdkMsTUFBSSxJQUFJLEVBQUU7QUFDUixXQUFPLE1BQU0sU0FBUyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQztHQUN0RDs7QUFFRCxNQUFJLE9BQU8sR0FBRyxTQUFTLENBQUMsT0FBTyxDQUFDO0FBQ2hDLFFBQU0sQ0FBQyxlQUFlLENBQUMsa0JBQWtCLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUNuRSxRQUFNLE9BQU8sQ0FBQyxlQUFlLEVBQUUsQ0FBQzs7O0FBR2hDLE1BQUksTUFBTSxDQUFDLEdBQUcsQ0FBQyx5QkFBeUIsQ0FBQyxFQUFFO0FBQ3pDLFdBQU8sR0FBRyxNQUFNLE9BQU8sQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO0dBQzdDOzs7QUFHRCxNQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFDLE1BQU0sRUFBRTtBQUM1QixVQUFNLENBQUMsR0FBRyxDQUNSLENBQUMsT0FBTyxFQUFFLFVBQVUsQ0FBQyw0Q0FFdEIsQ0FBQztBQUNGLFdBQU87R0FDUjs7O0FBR0QsTUFBSSxTQUFTLEdBQUcsOEJBQWdCO0FBQzlCLE9BQUcsRUFBRSxPQUFPLENBQUMsR0FBRztBQUNoQixXQUFPLEVBQUUsT0FBTztBQUNoQixXQUFPLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxrQkFBa0IsQ0FBQztBQUN2QyxlQUFXLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQztBQUMxQyxjQUFVLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxxQkFBcUIsQ0FBQztBQUM3QyxlQUFXLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxzQkFBc0IsQ0FBQztHQUNoRCxDQUFDLENBQUM7O0FBRUgsUUFBTSxDQUFDLEdBQUcsQ0FDUixDQUFDLE1BQU0sRUFBRSxVQUFVLENBQUMsOEJBQ00sT0FBTyxDQUFDLElBQUksRUFBRSxtQ0FDekMsQ0FBQzs7QUFFRixNQUFJLEtBQUssR0FBRyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7QUFDdkIsUUFBTSxTQUFTLENBQUMsR0FBRyxFQUFFLENBQUM7QUFDdEIsTUFBSSxPQUFPLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxLQUFLLENBQUEsR0FBSSxJQUFJLENBQUEsQ0FBRSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7O0FBRXZELFFBQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLEVBQUUsVUFBVSxDQUFDLHVCQUFxQixPQUFPLENBQUMsSUFBSSxFQUFFLHFCQUFnQixPQUFPLGNBQVcsQ0FBQztDQUN0RyxDQUFBLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvb3B0aW1pemUvaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgRnNPcHRpbWl6ZXIgZnJvbSAnLi9mc19vcHRpbWl6ZXInO1xubW9kdWxlLmV4cG9ydHMgPSBhc3luYyAoa2JuU2VydmVyLCBzZXJ2ZXIsIGNvbmZpZykgPT4ge1xuICBpZiAoIWNvbmZpZy5nZXQoJ29wdGltaXplLmVuYWJsZWQnKSkgcmV0dXJuO1xuXG4gIC8vIHRoZSBsYXp5IG9wdGltaXplciBzZXRzIHVwIHR3byB0aHJlYWRzLCBvbmUgaXMgdGhlIHNlcnZlciBsaXN0ZW5pbmdcbiAgLy8gb24gNTYwMSBhbmQgdGhlIG90aGVyIGlzIGEgc2VydmVyIGxpc3RlbmluZyBvbiA1NjAyIHRoYXQgYnVpbGRzIHRoZVxuICAvLyBidW5kbGVzIGluIGEgXCJtaWRkbGV3YXJlXCIgc3R5bGUuXG4gIC8vXG4gIC8vIHRoZSBzZXJ2ZXIgbGlzdGVuaW5nIG9uIDU2MDEgbWF5IGJlIHJlc3RhcnRlZCBhIG51bWJlciBvZiB0aW1lcywgZGVwZW5kaW5nXG4gIC8vIG9uIHRoZSB3YXRjaCBzZXR1cCBtYW5hZ2VkIGJ5IHRoZSBjbGkuIEl0IHByb3hpZXMgYWxsIGJ1bmRsZXMvKiByZXF1ZXN0cyB0b1xuICAvLyB0aGUgb3RoZXIgc2VydmVyLiBUaGUgc2VydmVyIG9uIDU2MDIgaXMgbG9uZyBydW5uaW5nLCBpbiBvcmRlciB0byBwcmV2ZW50XG4gIC8vIGNvbXBsZXRlIHJlYnVpbGRzIG9mIHRoZSBvcHRpbWl6ZSBjb250ZW50LlxuICBsZXQgbGF6eSA9IGNvbmZpZy5nZXQoJ29wdGltaXplLmxhenknKTtcbiAgaWYgKGxhenkpIHtcbiAgICByZXR1cm4gYXdhaXQga2JuU2VydmVyLm1peGluKHJlcXVpcmUoJy4vbGF6eS9sYXp5JykpO1xuICB9XG5cbiAgbGV0IGJ1bmRsZXMgPSBrYm5TZXJ2ZXIuYnVuZGxlcztcbiAgc2VydmVyLmV4cG9zZVN0YXRpY0RpcignL2J1bmRsZXMve3BhdGgqfScsIGJ1bmRsZXMuZW52LndvcmtpbmdEaXIpO1xuICBhd2FpdCBidW5kbGVzLndyaXRlRW50cnlGaWxlcygpO1xuXG4gIC8vIGluIHByb2QsIG9ubHkgYnVuZGxlIHdoYXQgbG9va3MgaW52YWxpZCBvciBtaXNzaW5nXG4gIGlmIChjb25maWcuZ2V0KCdvcHRpbWl6ZS51c2VCdW5kbGVDYWNoZScpKSB7XG4gICAgYnVuZGxlcyA9IGF3YWl0IGJ1bmRsZXMuZ2V0SW52YWxpZEJ1bmRsZXMoKTtcbiAgfVxuXG4gIC8vIHdlIG1pZ2h0IG5vdCBoYXZlIGFueSB3b3JrIHRvIGRvXG4gIGlmICghYnVuZGxlcy5nZXRJZHMoKS5sZW5ndGgpIHtcbiAgICBzZXJ2ZXIubG9nKFxuICAgICAgWydkZWJ1ZycsICdvcHRpbWl6ZSddLFxuICAgICAgYEFsbCBidW5kbGVzIGFyZSBjYWNoZWQgYW5kIHJlYWR5IHRvIGdvIWBcbiAgICApO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIG9ubHkgcmVxdWlyZSB0aGUgRnNPcHRpbWl6ZXIgd2hlbiB3ZSBuZWVkIHRvXG4gIGxldCBvcHRpbWl6ZXIgPSBuZXcgRnNPcHRpbWl6ZXIoe1xuICAgIGVudjogYnVuZGxlcy5lbnYsXG4gICAgYnVuZGxlczogYnVuZGxlcyxcbiAgICBwcm9maWxlOiBjb25maWcuZ2V0KCdvcHRpbWl6ZS5wcm9maWxlJyksXG4gICAgdXJsQmFzZVBhdGg6IGNvbmZpZy5nZXQoJ3NlcnZlci5iYXNlUGF0aCcpLFxuICAgIHNvdXJjZU1hcHM6IGNvbmZpZy5nZXQoJ29wdGltaXplLnNvdXJjZU1hcHMnKSxcbiAgICB1bnNhZmVDYWNoZTogY29uZmlnLmdldCgnb3B0aW1pemUudW5zYWZlQ2FjaGUnKSxcbiAgfSk7XG5cbiAgc2VydmVyLmxvZyhcbiAgICBbJ2luZm8nLCAnb3B0aW1pemUnXSxcbiAgICBgT3B0aW1pemluZyBhbmQgY2FjaGluZyAke2J1bmRsZXMuZGVzYygpfS4gVGhpcyBtYXkgdGFrZSBhIGZldyBtaW51dGVzYFxuICApO1xuXG4gIGxldCBzdGFydCA9IERhdGUubm93KCk7XG4gIGF3YWl0IG9wdGltaXplci5ydW4oKTtcbiAgbGV0IHNlY29uZHMgPSAoKERhdGUubm93KCkgLSBzdGFydCkgLyAxMDAwKS50b0ZpeGVkKDIpO1xuXG4gIHNlcnZlci5sb2coWydpbmZvJywgJ29wdGltaXplJ10sIGBPcHRpbWl6YXRpb24gb2YgJHtidW5kbGVzLmRlc2MoKX0gY29tcGxldGUgaW4gJHtzZWNvbmRzfSBzZWNvbmRzYCk7XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/optimize/index.js"
      ],
      "names": [],
      "mappings": ";;;;;;4BAAwB,gBAAgB;;;;AACxC,MAAM,CAAC,OAAO,qBAAG,WAAO,SAAS,EAAE,MAAM,EAAE,MAAM,EAAK;AACpD,MAAI,CAAC,MAAM,CAAC,GAAG,CAAC,kBAAkB,CAAC,EAAE,OAAO;;;;;;;;;;AAU5C,MAAI,IAAI,GAAG,MAAM,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;AACvC,MAAI,IAAI,EAAE;AACR,WAAO,MAAM,SAAS,CAAC,KAAK,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC;GACtD;;AAED,MAAI,OAAO,GAAG,SAAS,CAAC,OAAO,CAAC;AAChC,QAAM,CAAC,eAAe,CAAC,kBAAkB,EAAE,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;AACnE,QAAM,OAAO,CAAC,eAAe,EAAE,CAAC;;;AAGhC,MAAI,MAAM,CAAC,GAAG,CAAC,yBAAyB,CAAC,EAAE;AACzC,WAAO,GAAG,MAAM,OAAO,CAAC,iBAAiB,EAAE,CAAC;GAC7C;;;AAGD,MAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,MAAM,EAAE;AAC5B,UAAM,CAAC,GAAG,CACR,CAAC,OAAO,EAAE,UAAU,CAAC,4CAEtB,CAAC;AACF,WAAO;GACR;;;AAGD,MAAI,SAAS,GAAG,8BAAgB;AAC9B,OAAG,EAAE,OAAO,CAAC,GAAG;AAChB,WAAO,EAAE,OAAO;AAChB,WAAO,EAAE,MAAM,CAAC,GAAG,CAAC,kBAAkB,CAAC;AACvC,eAAW,EAAE,MAAM,CAAC,GAAG,CAAC,iBAAiB,CAAC;AAC1C,cAAU,EAAE,MAAM,CAAC,GAAG,CAAC,qBAAqB,CAAC;AAC7C,eAAW,EAAE,MAAM,CAAC,GAAG,CAAC,sBAAsB,CAAC;GAChD,CAAC,CAAC;;AAEH,QAAM,CAAC,GAAG,CACR,CAAC,MAAM,EAAE,UAAU,CAAC,8BACM,OAAO,CAAC,IAAI,EAAE,mCACzC,CAAC;;AAEF,MAAI,KAAK,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;AACvB,QAAM,SAAS,CAAC,GAAG,EAAE,CAAC;AACtB,MAAI,OAAO,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,KAAK,CAAA,GAAI,IAAI,CAAA,CAAE,OAAO,CAAC,CAAC,CAAC,CAAC;;AAEvD,QAAM,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,UAAU,CAAC,uBAAqB,OAAO,CAAC,IAAI,EAAE,qBAAgB,OAAO,cAAW,CAAC;CACtG,CAAA,CAAC",
      "file": "/home/vio/v3metrics/src/optimize/index.js",
      "sourcesContent": [
        "import FsOptimizer from './fs_optimizer';\nmodule.exports = async (kbnServer, server, config) => {\n  if (!config.get('optimize.enabled')) return;\n\n  // the lazy optimizer sets up two threads, one is the server listening\n  // on 5601 and the other is a server listening on 5602 that builds the\n  // bundles in a \"middleware\" style.\n  //\n  // the server listening on 5601 may be restarted a number of times, depending\n  // on the watch setup managed by the cli. It proxies all bundles/* requests to\n  // the other server. The server on 5602 is long running, in order to prevent\n  // complete rebuilds of the optimize content.\n  let lazy = config.get('optimize.lazy');\n  if (lazy) {\n    return await kbnServer.mixin(require('./lazy/lazy'));\n  }\n\n  let bundles = kbnServer.bundles;\n  server.exposeStaticDir('/bundles/{path*}', bundles.env.workingDir);\n  await bundles.writeEntryFiles();\n\n  // in prod, only bundle what looks invalid or missing\n  if (config.get('optimize.useBundleCache')) {\n    bundles = await bundles.getInvalidBundles();\n  }\n\n  // we might not have any work to do\n  if (!bundles.getIds().length) {\n    server.log(\n      ['debug', 'optimize'],\n      `All bundles are cached and ready to go!`\n    );\n    return;\n  }\n\n  // only require the FsOptimizer when we need to\n  let optimizer = new FsOptimizer({\n    env: bundles.env,\n    bundles: bundles,\n    profile: config.get('optimize.profile'),\n    urlBasePath: config.get('server.basePath'),\n    sourceMaps: config.get('optimize.sourceMaps'),\n    unsafeCache: config.get('optimize.unsafeCache'),\n  });\n\n  server.log(\n    ['info', 'optimize'],\n    `Optimizing and caching ${bundles.desc()}. This may take a few minutes`\n  );\n\n  let start = Date.now();\n  await optimizer.run();\n  let seconds = ((Date.now() - start) / 1000).toFixed(2);\n\n  server.log(['info', 'optimize'], `Optimization of ${bundles.desc()} complete in ${seconds} seconds`);\n};\n"
      ]
    },
    "mtime": 1467036622805
  },
  "{\"filename\":\"/home/vio/v3metrics/src/optimize/fs_optimizer.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./base_optimizer",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "BaseOptimizer"
              }
            ]
          },
          {
            "source": "../utils/from_root",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "fromRoot"
              }
            ]
          },
          {
            "source": "bluebird",
            "imported": [
              "fromNode"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "fromNode",
                "local": "fromNode"
              }
            ]
          },
          {
            "source": "fs",
            "imported": [
              "writeFile"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "writeFile",
                "local": "writeFile"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "get",
        "inherits",
        "create-class",
        "class-call-check",
        "async-to-generator",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _base_optimizer = require('./base_optimizer');\n\nvar _base_optimizer2 = _interopRequireDefault(_base_optimizer);\n\nvar _utilsFrom_root = require('../utils/from_root');\n\nvar _utilsFrom_root2 = _interopRequireDefault(_utilsFrom_root);\n\nvar _bluebird = require('bluebird');\n\nvar _fs = require('fs');\n\nmodule.exports = (function (_BaseOptimizer) {\n  _inherits(FsOptimizer, _BaseOptimizer);\n\n  function FsOptimizer() {\n    _classCallCheck(this, FsOptimizer);\n\n    _get(Object.getPrototypeOf(FsOptimizer.prototype), 'constructor', this).apply(this, arguments);\n  }\n\n  _createClass(FsOptimizer, [{\n    key: 'init',\n    value: _asyncToGenerator(function* () {\n      yield this.initCompiler();\n    })\n  }, {\n    key: 'run',\n    value: _asyncToGenerator(function* () {\n      var _this = this;\n\n      if (!this.compiler) yield this.init();\n\n      var stats = yield (0, _bluebird.fromNode)(function (cb) {\n        _this.compiler.run(function (err, stats) {\n          if (err || !stats) return cb(err);\n\n          if (stats.hasErrors() || stats.hasWarnings()) {\n            return cb(_this.failedStatsToError(stats));\n          } else {\n            cb(null, stats);\n          }\n        });\n      });\n    })\n  }]);\n\n  return FsOptimizer;\n})(_base_optimizer2['default']);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL29wdGltaXplL2ZzX29wdGltaXplci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs4QkFDMEIsa0JBQWtCOzs7OzhCQUN2QixvQkFBb0I7Ozs7d0JBQ2hCLFVBQVU7O2tCQUNULElBQUk7O0FBRTlCLE1BQU0sQ0FBQyxPQUFPO1lBQVMsV0FBVzs7V0FBWCxXQUFXOzBCQUFYLFdBQVc7OytCQUFYLFdBQVc7OztlQUFYLFdBQVc7OzZCQUN0QixhQUFHO0FBQ1gsWUFBTSxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUM7S0FDM0I7Ozs2QkFFUSxhQUFHOzs7QUFDVixVQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxNQUFNLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQzs7QUFFdEMsVUFBSSxLQUFLLEdBQUcsTUFBTSx3QkFBUyxVQUFBLEVBQUUsRUFBSTtBQUMvQixjQUFLLFFBQVEsQ0FBQyxHQUFHLENBQUMsVUFBQyxHQUFHLEVBQUUsS0FBSyxFQUFLO0FBQ2hDLGNBQUksR0FBRyxJQUFJLENBQUMsS0FBSyxFQUFFLE9BQU8sRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDOztBQUVsQyxjQUFJLEtBQUssQ0FBQyxTQUFTLEVBQUUsSUFBSSxLQUFLLENBQUMsV0FBVyxFQUFFLEVBQUU7QUFDNUMsbUJBQU8sRUFBRSxDQUFDLE1BQUssa0JBQWtCLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztXQUMzQyxNQUNJO0FBQ0gsY0FBRSxDQUFDLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQztXQUNqQjtTQUNGLENBQUMsQ0FBQztPQUNKLENBQUMsQ0FBQztLQUNKOzs7U0FwQm9CLFdBQVc7K0JBcUJqQyxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL29wdGltaXplL2ZzX29wdGltaXplci5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxuaW1wb3J0IEJhc2VPcHRpbWl6ZXIgZnJvbSAnLi9iYXNlX29wdGltaXplcic7XG5pbXBvcnQgZnJvbVJvb3QgZnJvbSAnLi4vdXRpbHMvZnJvbV9yb290JztcbmltcG9ydCB7IGZyb21Ob2RlIH0gZnJvbSAnYmx1ZWJpcmQnO1xuaW1wb3J0IHsgd3JpdGVGaWxlIH0gZnJvbSAnZnMnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIEZzT3B0aW1pemVyIGV4dGVuZHMgQmFzZU9wdGltaXplciB7XG4gIGFzeW5jIGluaXQoKSB7XG4gICAgYXdhaXQgdGhpcy5pbml0Q29tcGlsZXIoKTtcbiAgfVxuXG4gIGFzeW5jIHJ1bigpIHtcbiAgICBpZiAoIXRoaXMuY29tcGlsZXIpIGF3YWl0IHRoaXMuaW5pdCgpO1xuXG4gICAgbGV0IHN0YXRzID0gYXdhaXQgZnJvbU5vZGUoY2IgPT4ge1xuICAgICAgdGhpcy5jb21waWxlci5ydW4oKGVyciwgc3RhdHMpID0+IHtcbiAgICAgICAgaWYgKGVyciB8fCAhc3RhdHMpIHJldHVybiBjYihlcnIpO1xuXG4gICAgICAgIGlmIChzdGF0cy5oYXNFcnJvcnMoKSB8fCBzdGF0cy5oYXNXYXJuaW5ncygpKSB7XG4gICAgICAgICAgcmV0dXJuIGNiKHRoaXMuZmFpbGVkU3RhdHNUb0Vycm9yKHN0YXRzKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgY2IobnVsbCwgc3RhdHMpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/optimize/fs_optimizer.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;;;;;8BAC0B,kBAAkB;;;;8BACvB,oBAAoB;;;;wBAChB,UAAU;;kBACT,IAAI;;AAE9B,MAAM,CAAC,OAAO;YAAS,WAAW;;WAAX,WAAW;0BAAX,WAAW;;+BAAX,WAAW;;;eAAX,WAAW;;6BACtB,aAAG;AACX,YAAM,IAAI,CAAC,YAAY,EAAE,CAAC;KAC3B;;;6BAEQ,aAAG;;;AACV,UAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,MAAM,IAAI,CAAC,IAAI,EAAE,CAAC;;AAEtC,UAAI,KAAK,GAAG,MAAM,wBAAS,UAAA,EAAE,EAAI;AAC/B,cAAK,QAAQ,CAAC,GAAG,CAAC,UAAC,GAAG,EAAE,KAAK,EAAK;AAChC,cAAI,GAAG,IAAI,CAAC,KAAK,EAAE,OAAO,EAAE,CAAC,GAAG,CAAC,CAAC;;AAElC,cAAI,KAAK,CAAC,SAAS,EAAE,IAAI,KAAK,CAAC,WAAW,EAAE,EAAE;AAC5C,mBAAO,EAAE,CAAC,MAAK,kBAAkB,CAAC,KAAK,CAAC,CAAC,CAAC;WAC3C,MACI;AACH,cAAE,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;WACjB;SACF,CAAC,CAAC;OACJ,CAAC,CAAC;KACJ;;;SApBoB,WAAW;+BAqBjC,CAAC",
      "file": "/home/vio/v3metrics/src/optimize/fs_optimizer.js",
      "sourcesContent": [
        "\nimport BaseOptimizer from './base_optimizer';\nimport fromRoot from '../utils/from_root';\nimport { fromNode } from 'bluebird';\nimport { writeFile } from 'fs';\n\nmodule.exports = class FsOptimizer extends BaseOptimizer {\n  async init() {\n    await this.initCompiler();\n  }\n\n  async run() {\n    if (!this.compiler) await this.init();\n\n    let stats = await fromNode(cb => {\n      this.compiler.run((err, stats) => {\n        if (err || !stats) return cb(err);\n\n        if (stats.hasErrors() || stats.hasWarnings()) {\n          return cb(this.failedStatsToError(stats));\n        }\n        else {\n          cb(null, stats);\n        }\n      });\n    });\n  }\n};\n"
      ]
    },
    "mtime": 1467036622805
  },
  "{\"filename\":\"/home/vio/v3metrics/src/optimize/base_optimizer.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "webpack",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "webpack"
              }
            ]
          },
          {
            "source": "boom",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Boom"
              }
            ]
          },
          {
            "source": "webpack-directory-name-as-main",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "DirectoryNameAsMain"
              }
            ]
          },
          {
            "source": "extract-text-webpack-plugin",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "ExtractTextPlugin"
              }
            ]
          },
          {
            "source": "webpack/lib/optimize/CommonsChunkPlugin",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "CommonsChunkPlugin"
              }
            ]
          },
          {
            "source": "webpack/lib/DefinePlugin",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "DefinePlugin"
              }
            ]
          },
          {
            "source": "webpack/lib/optimize/UglifyJsPlugin",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "UglifyJsPlugin"
              }
            ]
          },
          {
            "source": "../utils/from_root",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "fromRoot"
              }
            ]
          },
          {
            "source": "./babel_options",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "babelOptions"
              }
            ]
          },
          {
            "source": "util",
            "imported": [
              "inherits"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "inherits",
                "local": "inherits"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "defaults",
              "transform"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "defaults",
                "local": "defaults"
              },
              {
                "kind": "named",
                "imported": "transform",
                "local": "transform"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "resolve"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "resolve",
                "local": "resolve"
              }
            ]
          },
          {
            "source": "fs",
            "imported": [
              "writeFile"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "writeFile",
                "local": "writeFile"
              }
            ]
          },
          {
            "source": "../../package.json",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "pkg"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "async-to-generator",
        "to-consumable-array",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i]; return arr2; } else { return Array.from(arr); } }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _webpack = require('webpack');\n\nvar _webpack2 = _interopRequireDefault(_webpack);\n\nvar _boom = require('boom');\n\nvar _boom2 = _interopRequireDefault(_boom);\n\nvar _webpackDirectoryNameAsMain = require('webpack-directory-name-as-main');\n\nvar _webpackDirectoryNameAsMain2 = _interopRequireDefault(_webpackDirectoryNameAsMain);\n\nvar _extractTextWebpackPlugin = require('extract-text-webpack-plugin');\n\nvar _extractTextWebpackPlugin2 = _interopRequireDefault(_extractTextWebpackPlugin);\n\nvar _webpackLibOptimizeCommonsChunkPlugin = require('webpack/lib/optimize/CommonsChunkPlugin');\n\nvar _webpackLibOptimizeCommonsChunkPlugin2 = _interopRequireDefault(_webpackLibOptimizeCommonsChunkPlugin);\n\nvar _webpackLibDefinePlugin = require('webpack/lib/DefinePlugin');\n\nvar _webpackLibDefinePlugin2 = _interopRequireDefault(_webpackLibDefinePlugin);\n\nvar _webpackLibOptimizeUglifyJsPlugin = require('webpack/lib/optimize/UglifyJsPlugin');\n\nvar _webpackLibOptimizeUglifyJsPlugin2 = _interopRequireDefault(_webpackLibOptimizeUglifyJsPlugin);\n\nvar _utilsFrom_root = require('../utils/from_root');\n\nvar _utilsFrom_root2 = _interopRequireDefault(_utilsFrom_root);\n\nvar _babel_options = require('./babel_options');\n\nvar _babel_options2 = _interopRequireDefault(_babel_options);\n\nvar _util = require('util');\n\nvar _lodash = require('lodash');\n\nvar _path = require('path');\n\nvar _fs = require('fs');\n\nvar _packageJson = require('../../package.json');\n\nvar _packageJson2 = _interopRequireDefault(_packageJson);\n\nvar babelExclude = [/[\\/\\\\](webpackShims|node_modules|bower_components)[\\/\\\\]/];\n\nvar BaseOptimizer = (function () {\n  function BaseOptimizer(opts) {\n    _classCallCheck(this, BaseOptimizer);\n\n    this.env = opts.env;\n    this.urlBasePath = opts.urlBasePath;\n    this.bundles = opts.bundles;\n    this.profile = opts.profile || false;\n\n    switch (opts.sourceMaps) {\n      case true:\n        this.sourceMaps = 'source-map';\n        break;\n\n      case 'fast':\n        this.sourceMaps = 'cheap-module-eval-source-map';\n        break;\n\n      default:\n        this.sourceMaps = opts.sourceMaps || false;\n        break;\n    }\n\n    this.unsafeCache = opts.unsafeCache || false;\n    if (typeof this.unsafeCache === 'string') {\n      this.unsafeCache = [new RegExp(this.unsafeCache.slice(1, -1))];\n    }\n  }\n\n  _createClass(BaseOptimizer, [{\n    key: 'initCompiler',\n    value: _asyncToGenerator(function* () {\n      var _this = this;\n\n      if (this.compiler) return this.compiler;\n\n      var compilerConfig = this.getConfig();\n      this.compiler = (0, _webpack2['default'])(compilerConfig);\n\n      this.compiler.plugin('done', function (stats) {\n        if (!_this.profile) return;\n\n        var path = (0, _path.resolve)(_this.env.workingDir, 'stats.json');\n        var content = JSON.stringify(stats.toJson());\n        (0, _fs.writeFile)(path, content, function (err) {\n          if (err) throw err;\n        });\n      });\n\n      return this.compiler;\n    })\n  }, {\n    key: 'getConfig',\n    value: function getConfig() {\n      var mapQ = this.sourceMaps ? '?sourceMap' : '';\n      var mapQPre = mapQ ? mapQ + '&' : '?';\n\n      return {\n        context: (0, _utilsFrom_root2['default'])('.'),\n        entry: this.bundles.toWebpackEntries(),\n\n        devtool: this.sourceMaps,\n        profile: this.profile || false,\n\n        output: {\n          path: this.env.workingDir,\n          filename: '[name].bundle.js',\n          sourceMapFilename: '[file].map',\n          publicPath: (this.urlBasePath || '') + '/bundles/',\n          devtoolModuleFilenameTemplate: '[absolute-resource-path]'\n        },\n\n        recordsPath: (0, _path.resolve)(this.env.workingDir, 'webpack.records'),\n\n        plugins: [new _webpack2['default'].ResolverPlugin([new _webpackDirectoryNameAsMain2['default']()]), new _webpack2['default'].NoErrorsPlugin(), new _extractTextWebpackPlugin2['default']('[name].style.css', {\n          allChunks: true\n        }), new _webpackLibOptimizeCommonsChunkPlugin2['default']({\n          name: 'commons',\n          filename: 'commons.bundle.js'\n        })].concat(_toConsumableArray(this.pluginsForEnv(this.env.context.env))),\n\n        module: {\n          loaders: [{\n            test: /\\.less$/,\n            loader: _extractTextWebpackPlugin2['default'].extract('style', 'css' + mapQ + '!autoprefixer' + mapQPre + '{ \"browsers\": [\"last 2 versions\",\"> 5%\"] }!less' + mapQPre + 'dumpLineNumbers=comments')\n          }, { test: /\\.css$/, loader: _extractTextWebpackPlugin2['default'].extract('style', 'css' + mapQ) }, { test: /\\.jade$/, loader: 'jade' }, { test: /\\.json$/, loader: 'json' }, { test: /\\.(html|tmpl)$/, loader: 'raw' }, { test: /\\.png$/, loader: 'url?limit=10000&name=[path][name].[ext]' }, { test: /\\.(woff|woff2|ttf|eot|svg|ico)(\\?|$)/, loader: 'file?name=[path][name].[ext]' }, { test: /[\\/\\\\]src[\\/\\\\](plugins|ui)[\\/\\\\].+\\.js$/, loader: 'rjs-repack' + mapQ }, {\n            test: /\\.js$/,\n            exclude: babelExclude.concat(this.env.noParse),\n            loader: 'babel',\n            query: _babel_options2['default'].webpack\n          }, {\n            test: /\\.jsx$/,\n            exclude: babelExclude.concat(this.env.noParse),\n            loader: 'babel',\n            query: (0, _lodash.defaults)({\n              nonStandard: true\n            }, _babel_options2['default'].webpack)\n          }].concat(this.env.loaders),\n          postLoaders: this.env.postLoaders || [],\n          noParse: this.env.noParse\n        },\n\n        resolve: {\n          extensions: ['.js', '.json', '.jsx', '.less', ''],\n          postfixes: [''],\n          modulesDirectories: ['webpackShims', 'node_modules'],\n          fallback: [(0, _utilsFrom_root2['default'])('webpackShims'), (0, _utilsFrom_root2['default'])('node_modules')],\n          loaderPostfixes: ['-loader', ''],\n          root: (0, _utilsFrom_root2['default'])('.'),\n          alias: this.env.aliases,\n          unsafeCache: this.unsafeCache\n        },\n\n        resolveLoader: {\n          alias: (0, _lodash.transform)(_packageJson2['default'].dependencies, function (aliases, version, name) {\n            if (name.endsWith('-loader')) {\n              aliases[name.replace(/-loader$/, '')] = require.resolve(name);\n            }\n          }, {})\n        }\n      };\n    }\n  }, {\n    key: 'pluginsForEnv',\n    value: function pluginsForEnv(env) {\n      if (env !== 'production') {\n        return [];\n      }\n\n      return [new _webpackLibDefinePlugin2['default']({\n        'process.env': {\n          'NODE_ENV': '\"production\"'\n        }\n      }), new _webpackLibOptimizeUglifyJsPlugin2['default']({\n        compress: {\n          warnings: false\n        },\n        sourceMap: false,\n        mangle: false\n      })];\n    }\n  }, {\n    key: 'failedStatsToError',\n    value: function failedStatsToError(stats) {\n      var statFormatOpts = {\n        hash: false, // add the hash of the compilation\n        version: false, // add webpack version information\n        timings: false, // add timing information\n        assets: false, // add assets information\n        chunks: false, // add chunk information\n        chunkModules: false, // add built modules information to chunk information\n        modules: false, // add built modules information\n        cached: false, // add also information about cached (not built) modules\n        reasons: false, // add information about the reasons why modules are included\n        source: false, // add the source code of modules\n        errorDetails: false, // add details to errors (like resolving log)\n        chunkOrigins: false, // add the origins of chunks and chunk merging info\n        modulesSort: false, // (string) sort the modules by that field\n        chunksSort: false, // (string) sort the chunks by that field\n        assetsSort: false, // (string) sort the assets by that field\n        children: false\n      };\n\n      var details = stats.toString((0, _lodash.defaults)({ colors: true }, statFormatOpts));\n\n      return _boom2['default'].create(500, 'Optimizations failure.\\n' + details.split('\\n').join('\\n    ') + '\\n', stats.toJson(statFormatOpts));\n    }\n  }]);\n\n  return BaseOptimizer;\n})();\n\nmodule.exports = BaseOptimizer;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL29wdGltaXplL2Jhc2Vfb3B0aW1pemVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozt1QkFBb0IsU0FBUzs7OztvQkFDWixNQUFNOzs7OzBDQUNTLGdDQUFnQzs7Ozt3Q0FDbEMsNkJBQTZCOzs7O29EQUM1Qix5Q0FBeUM7Ozs7c0NBQy9DLDBCQUEwQjs7OztnREFDeEIscUNBQXFDOzs7OzhCQUUzQyxvQkFBb0I7Ozs7NkJBQ2hCLGlCQUFpQjs7OztvQkFDakIsTUFBTTs7c0JBQ0ssUUFBUTs7b0JBQ3BCLE1BQU07O2tCQUNKLElBQUk7OzJCQUVkLG9CQUFvQjs7OztBQURwQyxJQUFJLFlBQVksR0FBRyxDQUFDLDBEQUEwRCxDQUFDLENBQUM7O0lBRzFFLGFBQWE7QUFDTixXQURQLGFBQWEsQ0FDTCxJQUFJLEVBQUU7MEJBRGQsYUFBYTs7QUFFZixRQUFJLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUM7QUFDcEIsUUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDO0FBQ3BDLFFBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQztBQUM1QixRQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxPQUFPLElBQUksS0FBSyxDQUFDOztBQUVyQyxZQUFRLElBQUksQ0FBQyxVQUFVO0FBQ3JCLFdBQUssSUFBSTtBQUNQLFlBQUksQ0FBQyxVQUFVLEdBQUcsWUFBWSxDQUFDO0FBQy9CLGNBQU07O0FBQUEsQUFFUixXQUFLLE1BQU07QUFDVCxZQUFJLENBQUMsVUFBVSxHQUFHLDhCQUE4QixDQUFDO0FBQ2pELGNBQU07O0FBQUEsQUFFUjtBQUNFLFlBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLFVBQVUsSUFBSSxLQUFLLENBQUM7QUFDM0MsY0FBTTtBQUFBLEtBQ1Q7O0FBRUQsUUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsV0FB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SSxjQUFjLEdBQUc7QUFDbkIsWUFBSSxFQUFFLEtBQUs7QUFDWCxlQUFPLEVBQUUsS0FBSztBQUNkLGVBQU8sRUFBRSxLQUFLO0FBQ2QsY0FBTSxFQUFFLEtBQUs7QUFDYixjQUFNLEVBQUUsS0FBSztBQUNiLG9CQUFZLEVBQUUsS0FBSztBQUNuQixlQUFPLEVBQUUsS0FBSztBQUNkLGNBQU0sRUFBRSxLQUFLO0FBQ2IsZUFBTyxFQUFFLEtBQUs7QUFDZCxjQUFNLEVBQUUsS0FBSztBQUNiLG9CQUFZLEVBQUUsS0FBSztBQUNuQixvQkFBWSxFQUFFLEtBQUs7QUFDbkIsbUJBQVcsRUFBRSxLQUFLO0FBQ2xCLGtCQUFVLEVBQUUsS0FBSztBQUNqQixrQkFBVSxFQUFFLEtBQUs7QUFDakIsZ0JBQVEsRUFBRSxLQUFLO09BQ2hCLENBQUM7O0FBRUYsVUFBSSxPQUFPLEdBQUcsS0FBSyxDQUFDLFFBQVEsQ0FBQyxzQkFBUyxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsRUFBRSxjQUFjLENBQUMsQ0FBQyxDQUFDOztBQUV6RSxhQUFPLGtCQUFLLE1BQU0sQ0FDaEIsR0FBRywrQkFDd0IsT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLFNBQzdELEtBQUssQ0FBQyxNQUFNLENBQUMsY0FBYyxDQUFDLENBQzdCLENBQUM7S0FDSDs7O1NBNUxHLGFBQWE7OztBQStMbkIsTUFBTSxDQUFDLE9BQU8sR0FBRyxhQUFhLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvb3B0aW1pemUvYmFzZV9vcHRpbWl6ZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgd2VicGFjayBmcm9tICd3ZWJwYWNrJztcbmltcG9ydCBCb29tIGZyb20gJ2Jvb20nO1xuaW1wb3J0IERpcmVjdG9yeU5hbWVBc01haW4gZnJvbSAnd2VicGFjay1kaXJlY3RvcnktbmFtZS1hcy1tYWluJztcbmltcG9ydCBFeHRyYWN0VGV4dFBsdWdpbiBmcm9tICdleHRyYWN0LXRleHQtd2VicGFjay1wbHVnaW4nO1xuaW1wb3J0IENvbW1vbnNDaHVua1BsdWdpbiBmcm9tICd3ZWJwYWNrL2xpYi9vcHRpbWl6ZS9Db21tb25zQ2h1bmtQbHVnaW4nO1xuaW1wb3J0IERlZmluZVBsdWdpbiBmcm9tICd3ZWJwYWNrL2xpYi9EZWZpbmVQbHVnaW4nO1xuaW1wb3J0IFVnbGlmeUpzUGx1Z2luIGZyb20gJ3dlYnBhY2svbGliL29wdGltaXplL1VnbGlmeUpzUGx1Z2luJztcblxuaW1wb3J0IGZyb21Sb290IGZyb20gJy4uL3V0aWxzL2Zyb21fcm9vdCc7XG5pbXBvcnQgYmFiZWxPcHRpb25zIGZyb20gJy4vYmFiZWxfb3B0aW9ucyc7XG5pbXBvcnQgeyBpbmhlcml0cyB9IGZyb20gJ3V0aWwnO1xuaW1wb3J0IHsgZGVmYXVsdHMsIHRyYW5zZm9ybSB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgeyByZXNvbHZlIH0gZnJvbSAncGF0aCc7XG5pbXBvcnQgeyB3cml0ZUZpbGUgfSBmcm9tICdmcyc7XG5sZXQgYmFiZWxFeGNsdWRlID0gWy9bXFwvXFxcXF0od2VicGFja1NoaW1zfG5vZGVfbW9kdWxlc3xib3dlcl9jb21wb25lbnRzKVtcXC9cXFxcXS9dO1xuaW1wb3J0IHBrZyBmcm9tICcuLi8uLi9wYWNrYWdlLmpzb24nO1xuXG5jbGFzcyBCYXNlT3B0aW1pemVyIHtcbiAgY29uc3RydWN0b3Iob3B0cykge1xuICAgIHRoaXMuZW52ID0gb3B0cy5lbnY7XG4gICAgdGhpcy51cmxCYXNlUGF0aCA9IG9wdHMudXJsQmFzZVBhdGg7XG4gICAgdGhpcy5idW5kbGVzID0gb3B0cy5idW5kbGVzO1xuICAgIHRoaXMucHJvZmlsZSA9IG9wdHMucHJvZmlsZSB8fCBmYWxzZTtcblxuICAgIHN3aXRjaCAob3B0cy5zb3VyY2VNYXBzKSB7XG4gICAgICBjYXNlIHRydWU6XG4gICAgICAgIHRoaXMuc291cmNlTWFwcyA9ICdzb3VyY2UtbWFwJztcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2Zhc3QnOlxuICAgICAgICB0aGlzLnNvdXJjZU1hcHMgPSAnY2hlYXAtbW9kdWxlLWV2YWwtc291cmNlLW1hcCc7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aGlzLnNvdXJjZU1hcHMgPSBvcHRzLnNvdXJjZU1hcHMgfHwgZmFsc2U7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIHRoaXMudW5zYWZlQ2FjaGUgPSBvcHRzLnVuc2FmZUNhY2hlIHx8IGZhbHNlO1xuICAgIGlmICh0eXBlb2YgdGhpcy51bnNhZmVDYWNoZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRoaXMudW5zYWZlQ2FjaGUgPSBbXG4gICAgICAgIG5ldyBSZWdFeHAodGhpcy51bnNhZmVDYWNoZS5zbGljZSgxLCAtMSkpXG4gICAgICBdO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGluaXRDb21waWxlcigpIHtcbiAgICBpZiAodGhpcy5jb21waWxlcikgcmV0dXJuIHRoaXMuY29tcGlsZXI7XG5cbiAgICBsZXQgY29tcGlsZXJDb25maWcgPSB0aGlzLmdldENvbmZpZygpO1xuICAgIHRoaXMuY29tcGlsZXIgPSB3ZWJwYWNrKGNvbXBpbGVyQ29uZmlnKTtcblxuICAgIHRoaXMuY29tcGlsZXIucGx1Z2luKCdkb25lJywgc3RhdHMgPT4ge1xuICAgICAgaWYgKCF0aGlzLnByb2ZpbGUpIHJldHVybjtcblxuICAgICAgbGV0IHBhdGggPSByZXNvbHZlKHRoaXMuZW52LndvcmtpbmdEaXIsICdzdGF0cy5qc29uJyk7XG4gICAgICBsZXQgY29udGVudCA9IEpTT04uc3RyaW5naWZ5KHN0YXRzLnRvSnNvbigpKTtcbiAgICAgIHdyaXRlRmlsZShwYXRoLCBjb250ZW50LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGlmIChlcnIpIHRocm93IGVycjtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXMuY29tcGlsZXI7XG4gIH1cblxuICBnZXRDb25maWcoKSB7XG4gICAgbGV0IG1hcFEgPSB0aGlzLnNvdXJjZU1hcHMgPyAnP3NvdXJjZU1hcCcgOiAnJztcbiAgICBsZXQgbWFwUVByZSA9IG1hcFEgPyBtYXBRICsgJyYnIDogJz8nO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbnRleHQ6IGZyb21Sb290KCcuJyksXG4gICAgICBlbnRyeTogdGhpcy5idW5kbGVzLnRvV2VicGFja0VudHJpZXMoKSxcblxuICAgICAgZGV2dG9vbDogdGhpcy5zb3VyY2VNYXBzLFxuICAgICAgcHJvZmlsZTogdGhpcy5wcm9maWxlIHx8IGZhbHNlLFxuXG4gICAgICBvdXRwdXQ6IHtcbiAgICAgICAgcGF0aDogdGhpcy5lbnYud29ya2luZ0RpcixcbiAgICAgICAgZmlsZW5hbWU6ICdbbmFtZV0uYnVuZGxlLmpzJyxcbiAgICAgICAgc291cmNlTWFwRmlsZW5hbWU6ICdbZmlsZV0ubWFwJyxcbiAgICAgICAgcHVibGljUGF0aDogYCR7dGhpcy51cmxCYXNlUGF0aCB8fCAnJ30vYnVuZGxlcy9gLFxuICAgICAgICBkZXZ0b29sTW9kdWxlRmlsZW5hbWVUZW1wbGF0ZTogJ1thYnNvbHV0ZS1yZXNvdXJjZS1wYXRoXSdcbiAgICAgIH0sXG5cbiAgICAgIHJlY29yZHNQYXRoOiByZXNvbHZlKHRoaXMuZW52LndvcmtpbmdEaXIsICd3ZWJwYWNrLnJlY29yZHMnKSxcblxuICAgICAgcGx1Z2luczogW1xuICAgICAgICBuZXcgd2VicGFjay5SZXNvbHZlclBsdWdpbihbXG4gICAgICAgICAgbmV3IERpcmVjdG9yeU5hbWVBc01haW4oKVxuICAgICAgICBdKSxcbiAgICAgICAgbmV3IHdlYnBhY2suTm9FcnJvcnNQbHVnaW4oKSxcbiAgICAgICAgbmV3IEV4dHJhY3RUZXh0UGx1Z2luKCdbbmFtZV0uc3R5bGUuY3NzJywge1xuICAgICAgICAgIGFsbENodW5rczogdHJ1ZVxuICAgICAgICB9KSxcbiAgICAgICAgbmV3IENvbW1vbnNDaHVua1BsdWdpbih7XG4gICAgICAgICAgbmFtZTogJ2NvbW1vbnMnLFxuICAgICAgICAgIGZpbGVuYW1lOiAnY29tbW9ucy5idW5kbGUuanMnXG4gICAgICAgIH0pLFxuICAgICAgICAuLi50aGlzLnBsdWdpbnNGb3JFbnYodGhpcy5lbnYuY29udGV4dC5lbnYpXG4gICAgICBdLFxuXG4gICAgICBtb2R1bGU6IHtcbiAgICAgICAgbG9hZGVyczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRlc3Q6IC9cXC5sZXNzJC8sXG4gICAgICAgICAgICBsb2FkZXI6IEV4dHJhY3RUZXh0UGx1Z2luLmV4dHJhY3QoXG4gICAgICAgICAgICAgICdzdHlsZScsXG4gICAgICAgICAgICAgIGBjc3Mke21hcFF9IWF1dG9wcmVmaXhlciR7bWFwUVByZX17IFwiYnJvd3NlcnNcIjogW1wibGFzdCAyIHZlcnNpb25zXCIsXCI+IDUlXCJdIH0hbGVzcyR7bWFwUVByZX1kdW1wTGluZU51bWJlcnM9Y29tbWVudHNgXG4gICAgICAgICAgICApXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7IHRlc3Q6IC9cXC5jc3MkLywgbG9hZGVyOiBFeHRyYWN0VGV4dFBsdWdpbi5leHRyYWN0KCdzdHlsZScsIGBjc3Mke21hcFF9YCkgfSxcbiAgICAgICAgICB7IHRlc3Q6IC9cXC5qYWRlJC8sIGxvYWRlcjogJ2phZGUnIH0sXG4gICAgICAgICAgeyB0ZXN0OiAvXFwuanNvbiQvLCBsb2FkZXI6ICdqc29uJyB9LFxuICAgICAgICAgIHsgdGVzdDogL1xcLihodG1sfHRtcGwpJC8sIGxvYWRlcjogJ3JhdycgfSxcbiAgICAgICAgICB7IHRlc3Q6IC9cXC5wbmckLywgbG9hZGVyOiAndXJsP2xpbWl0PTEwMDAwJm5hbWU9W3BhdGhdW25hbWVdLltleHRdJyB9LFxuICAgICAgICAgIHsgdGVzdDogL1xcLih3b2ZmfHdvZmYyfHR0Znxlb3R8c3ZnfGljbykoXFw/fCQpLywgbG9hZGVyOiAnZmlsZT9uYW1lPVtwYXRoXVtuYW1lXS5bZXh0XScgfSxcbiAgICAgICAgICB7IHRlc3Q6IC9bXFwvXFxcXF1zcmNbXFwvXFxcXF0ocGx1Z2luc3x1aSlbXFwvXFxcXF0uK1xcLmpzJC8sIGxvYWRlcjogYHJqcy1yZXBhY2ske21hcFF9YCB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRlc3Q6IC9cXC5qcyQvLFxuICAgICAgICAgICAgZXhjbHVkZTogYmFiZWxFeGNsdWRlLmNvbmNhdCh0aGlzLmVudi5ub1BhcnNlKSxcbiAgICAgICAgICAgIGxvYWRlcjogJ2JhYmVsJyxcbiAgICAgICAgICAgIHF1ZXJ5OiBiYWJlbE9wdGlvbnMud2VicGFja1xuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgdGVzdDogL1xcLmpzeCQvLFxuICAgICAgICAgICAgZXhjbHVkZTogYmFiZWxFeGNsdWRlLmNvbmNhdCh0aGlzLmVudi5ub1BhcnNlKSxcbiAgICAgICAgICAgIGxvYWRlcjogJ2JhYmVsJyxcbiAgICAgICAgICAgIHF1ZXJ5OiBkZWZhdWx0cyh7XG4gICAgICAgICAgICAgIG5vblN0YW5kYXJkOiB0cnVlLFxuICAgICAgICAgICAgfSwgYmFiZWxPcHRpb25zLndlYnBhY2spXG4gICAgICAgICAgfVxuICAgICAgICBdLmNvbmNhdCh0aGlzLmVudi5sb2FkZXJzKSxcbiAgICAgICAgcG9zdExvYWRlcnM6IHRoaXMuZW52LnBvc3RMb2FkZXJzIHx8IFtdLFxuICAgICAgICBub1BhcnNlOiB0aGlzLmVudi5ub1BhcnNlLFxuICAgICAgfSxcblxuICAgICAgcmVzb2x2ZToge1xuICAgICAgICBleHRlbnNpb25zOiBbJy5qcycsICcuanNvbicsICcuanN4JywgJy5sZXNzJywgJyddLFxuICAgICAgICBwb3N0Zml4ZXM6IFsnJ10sXG4gICAgICAgIG1vZHVsZXNEaXJlY3RvcmllczogWyd3ZWJwYWNrU2hpbXMnLCAnbm9kZV9tb2R1bGVzJ10sXG4gICAgICAgIGZhbGxiYWNrOiBbZnJvbVJvb3QoJ3dlYnBhY2tTaGltcycpLCBmcm9tUm9vdCgnbm9kZV9tb2R1bGVzJyldLFxuICAgICAgICBsb2FkZXJQb3N0Zml4ZXM6IFsnLWxvYWRlcicsICcnXSxcbiAgICAgICAgcm9vdDogZnJvbVJvb3QoJy4nKSxcbiAgICAgICAgYWxpYXM6IHRoaXMuZW52LmFsaWFzZXMsXG4gICAgICAgIHVuc2FmZUNhY2hlOiB0aGlzLnVuc2FmZUNhY2hlLFxuICAgICAgfSxcblxuICAgICAgcmVzb2x2ZUxvYWRlcjoge1xuICAgICAgICBhbGlhczogdHJhbnNmb3JtKHBrZy5kZXBlbmRlbmNpZXMsIGZ1bmN0aW9uIChhbGlhc2VzLCB2ZXJzaW9uLCBuYW1lKSB7XG4gICAgICAgICAgaWYgKG5hbWUuZW5kc1dpdGgoJy1sb2FkZXInKSkge1xuICAgICAgICAgICAgYWxpYXNlc1tuYW1lLnJlcGxhY2UoLy1sb2FkZXIkLywgJycpXSA9IHJlcXVpcmUucmVzb2x2ZShuYW1lKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIHt9KVxuICAgICAgfVxuICAgIH07XG4gIH1cblxuICBwbHVnaW5zRm9yRW52KGVudikge1xuICAgIGlmIChlbnYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIHJldHVybiBbXG4gICAgICBuZXcgRGVmaW5lUGx1Z2luKHtcbiAgICAgICAgJ3Byb2Nlc3MuZW52Jzoge1xuICAgICAgICAgICdOT0RFX0VOVic6ICdcInByb2R1Y3Rpb25cIidcbiAgICAgICAgfVxuICAgICAgfSksXG4gICAgICBuZXcgVWdsaWZ5SnNQbHVnaW4oe1xuICAgICAgICBjb21wcmVzczoge1xuICAgICAgICAgIHdhcm5pbmdzOiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICBzb3VyY2VNYXA6IGZhbHNlLFxuICAgICAgICBtYW5nbGU6IGZhbHNlXG4gICAgICB9KSxcbiAgICBdO1xuICB9XG5cbiAgZmFpbGVkU3RhdHNUb0Vycm9yKHN0YXRzKSB7XG4gICAgbGV0IHN0YXRGb3JtYXRPcHRzID0ge1xuICAgICAgaGFzaDogZmFsc2UsICAvLyBhZGQgdGhlIGhhc2ggb2YgdGhlIGNvbXBpbGF0aW9uXG4gICAgICB2ZXJzaW9uOiBmYWxzZSwgIC8vIGFkZCB3ZWJwYWNrIHZlcnNpb24gaW5mb3JtYXRpb25cbiAgICAgIHRpbWluZ3M6IGZhbHNlLCAgLy8gYWRkIHRpbWluZyBpbmZvcm1hdGlvblxuICAgICAgYXNzZXRzOiBmYWxzZSwgIC8vIGFkZCBhc3NldHMgaW5mb3JtYXRpb25cbiAgICAgIGNodW5rczogZmFsc2UsICAvLyBhZGQgY2h1bmsgaW5mb3JtYXRpb25cbiAgICAgIGNodW5rTW9kdWxlczogZmFsc2UsICAvLyBhZGQgYnVpbHQgbW9kdWxlcyBpbmZvcm1hdGlvbiB0byBjaHVuayBpbmZvcm1hdGlvblxuICAgICAgbW9kdWxlczogZmFsc2UsICAvLyBhZGQgYnVpbHQgbW9kdWxlcyBpbmZvcm1hdGlvblxuICAgICAgY2FjaGVkOiBmYWxzZSwgIC8vIGFkZCBhbHNvIGluZm9ybWF0aW9uIGFib3V0IGNhY2hlZCAobm90IGJ1aWx0KSBtb2R1bGVzXG4gICAgICByZWFzb25zOiBmYWxzZSwgIC8vIGFkZCBpbmZvcm1hdGlvbiBhYm91dCB0aGUgcmVhc29ucyB3aHkgbW9kdWxlcyBhcmUgaW5jbHVkZWRcbiAgICAgIHNvdXJjZTogZmFsc2UsICAvLyBhZGQgdGhlIHNvdXJjZSBjb2RlIG9mIG1vZHVsZXNcbiAgICAgIGVycm9yRGV0YWlsczogZmFsc2UsICAvLyBhZGQgZGV0YWlscyB0byBlcnJvcnMgKGxpa2UgcmVzb2x2aW5nIGxvZylcbiAgICAgIGNodW5rT3JpZ2luczogZmFsc2UsICAvLyBhZGQgdGhlIG9yaWdpbnMgb2YgY2h1bmtzIGFuZCBjaHVuayBtZXJnaW5nIGluZm9cbiAgICAgIG1vZHVsZXNTb3J0OiBmYWxzZSwgIC8vIChzdHJpbmcpIHNvcnQgdGhlIG1vZHVsZXMgYnkgdGhhdCBmaWVsZFxuICAgICAgY2h1bmtzU29ydDogZmFsc2UsICAvLyAoc3RyaW5nKSBzb3J0IHRoZSBjaHVua3MgYnkgdGhhdCBmaWVsZFxuICAgICAgYXNzZXRzU29ydDogZmFsc2UsICAvLyAoc3RyaW5nKSBzb3J0IHRoZSBhc3NldHMgYnkgdGhhdCBmaWVsZFxuICAgICAgY2hpbGRyZW46IGZhbHNlLFxuICAgIH07XG5cbiAgICBsZXQgZGV0YWlscyA9IHN0YXRzLnRvU3RyaW5nKGRlZmF1bHRzKHsgY29sb3JzOiB0cnVlIH0sIHN0YXRGb3JtYXRPcHRzKSk7XG5cbiAgICByZXR1cm4gQm9vbS5jcmVhdGUoXG4gICAgICA1MDAsXG4gICAgICBgT3B0aW1pemF0aW9ucyBmYWlsdXJlLlxcbiR7ZGV0YWlscy5zcGxpdCgnXFxuJykuam9pbignXFxuICAgICcpfVxcbmAsXG4gICAgICBzdGF0cy50b0pzb24oc3RhdEZvcm1hdE9wdHMpXG4gICAgKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEJhc2VPcHRpbWl6ZXI7XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/optimize/base_optimizer.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/src/optimize/base_optimizer.js",
      "sourcesContent": [
        "import webpack from 'webpack';\nimport Boom from 'boom';\nimport DirectoryNameAsMain from 'webpack-directory-name-as-main';\nimport ExtractTextPlugin from 'extract-text-webpack-plugin';\nimport CommonsChunkPlugin from 'webpack/lib/optimize/CommonsChunkPlugin';\nimport DefinePlugin from 'webpack/lib/DefinePlugin';\nimport UglifyJsPlugin from 'webpack/lib/optimize/UglifyJsPlugin';\n\nimport fromRoot from '../utils/from_root';\nimport babelOptions from './babel_options';\nimport { inherits } from 'util';\nimport { defaults, transform } from 'lodash';\nimport { resolve } from 'path';\nimport { writeFile } from 'fs';\nlet babelExclude = [/[\\/\\\\](webpackShims|node_modules|bower_components)[\\/\\\\]/];\nimport pkg from '../../package.json';\n\nclass BaseOptimizer {\n  constructor(opts) {\n    this.env = opts.env;\n    this.urlBasePath = opts.urlBasePath;\n    this.bundles = opts.bundles;\n    this.profile = opts.profile || false;\n\n    switch (opts.sourceMaps) {\n      case true:\n        this.sourceMaps = 'source-map';\n        break;\n\n      case 'fast':\n        this.sourceMaps = 'cheap-module-eval-source-map';\n        break;\n\n      default:\n        this.sourceMaps = opts.sourceMaps || false;\n        break;\n    }\n\n    this.unsafeCache = opts.unsafeCache || false;\n    if (typeof this.unsafeCache === 'string') {\n      this.unsafeCache = [\n        new RegExp(this.unsafeCache.slice(1, -1))\n      ];\n    }\n  }\n\n  async initCompiler() {\n    if (this.compiler) return this.compiler;\n\n    let compilerConfig = this.getConfig();\n    this.compiler = webpack(compilerConfig);\n\n    this.compiler.plugin('done', stats => {\n      if (!this.profile) return;\n\n      let path = resolve(this.env.workingDir, 'stats.json');\n      let content = JSON.stringify(stats.toJson());\n      writeFile(path, content, function (err) {\n        if (err) throw err;\n      });\n    });\n\n    return this.compiler;\n  }\n\n  getConfig() {\n    let mapQ = this.sourceMaps ? '?sourceMap' : '';\n    let mapQPre = mapQ ? mapQ + '&' : '?';\n\n    return {\n      context: fromRoot('.'),\n      entry: this.bundles.toWebpackEntries(),\n\n      devtool: this.sourceMaps,\n      profile: this.profile || false,\n\n      output: {\n        path: this.env.workingDir,\n        filename: '[name].bundle.js',\n        sourceMapFilename: '[file].map',\n        publicPath: `${this.urlBasePath || ''}/bundles/`,\n        devtoolModuleFilenameTemplate: '[absolute-resource-path]'\n      },\n\n      recordsPath: resolve(this.env.workingDir, 'webpack.records'),\n\n      plugins: [\n        new webpack.ResolverPlugin([\n          new DirectoryNameAsMain()\n        ]),\n        new webpack.NoErrorsPlugin(),\n        new ExtractTextPlugin('[name].style.css', {\n          allChunks: true\n        }),\n        new CommonsChunkPlugin({\n          name: 'commons',\n          filename: 'commons.bundle.js'\n        }),\n        ...this.pluginsForEnv(this.env.context.env)\n      ],\n\n      module: {\n        loaders: [\n          {\n            test: /\\.less$/,\n            loader: ExtractTextPlugin.extract(\n              'style',\n              `css${mapQ}!autoprefixer${mapQPre}{ \"browsers\": [\"last 2 versions\",\"> 5%\"] }!less${mapQPre}dumpLineNumbers=comments`\n            )\n          },\n          { test: /\\.css$/, loader: ExtractTextPlugin.extract('style', `css${mapQ}`) },\n          { test: /\\.jade$/, loader: 'jade' },\n          { test: /\\.json$/, loader: 'json' },\n          { test: /\\.(html|tmpl)$/, loader: 'raw' },\n          { test: /\\.png$/, loader: 'url?limit=10000&name=[path][name].[ext]' },\n          { test: /\\.(woff|woff2|ttf|eot|svg|ico)(\\?|$)/, loader: 'file?name=[path][name].[ext]' },\n          { test: /[\\/\\\\]src[\\/\\\\](plugins|ui)[\\/\\\\].+\\.js$/, loader: `rjs-repack${mapQ}` },\n          {\n            test: /\\.js$/,\n            exclude: babelExclude.concat(this.env.noParse),\n            loader: 'babel',\n            query: babelOptions.webpack\n          },\n          {\n            test: /\\.jsx$/,\n            exclude: babelExclude.concat(this.env.noParse),\n            loader: 'babel',\n            query: defaults({\n              nonStandard: true,\n            }, babelOptions.webpack)\n          }\n        ].concat(this.env.loaders),\n        postLoaders: this.env.postLoaders || [],\n        noParse: this.env.noParse,\n      },\n\n      resolve: {\n        extensions: ['.js', '.json', '.jsx', '.less', ''],\n        postfixes: [''],\n        modulesDirectories: ['webpackShims', 'node_modules'],\n        fallback: [fromRoot('webpackShims'), fromRoot('node_modules')],\n        loaderPostfixes: ['-loader', ''],\n        root: fromRoot('.'),\n        alias: this.env.aliases,\n        unsafeCache: this.unsafeCache,\n      },\n\n      resolveLoader: {\n        alias: transform(pkg.dependencies, function (aliases, version, name) {\n          if (name.endsWith('-loader')) {\n            aliases[name.replace(/-loader$/, '')] = require.resolve(name);\n          }\n        }, {})\n      }\n    };\n  }\n\n  pluginsForEnv(env) {\n    if (env !== 'production') {\n      return [];\n    }\n\n    return [\n      new DefinePlugin({\n        'process.env': {\n          'NODE_ENV': '\"production\"'\n        }\n      }),\n      new UglifyJsPlugin({\n        compress: {\n          warnings: false\n        },\n        sourceMap: false,\n        mangle: false\n      }),\n    ];\n  }\n\n  failedStatsToError(stats) {\n    let statFormatOpts = {\n      hash: false,  // add the hash of the compilation\n      version: false,  // add webpack version information\n      timings: false,  // add timing information\n      assets: false,  // add assets information\n      chunks: false,  // add chunk information\n      chunkModules: false,  // add built modules information to chunk information\n      modules: false,  // add built modules information\n      cached: false,  // add also information about cached (not built) modules\n      reasons: false,  // add information about the reasons why modules are included\n      source: false,  // add the source code of modules\n      errorDetails: false,  // add details to errors (like resolving log)\n      chunkOrigins: false,  // add the origins of chunks and chunk merging info\n      modulesSort: false,  // (string) sort the modules by that field\n      chunksSort: false,  // (string) sort the chunks by that field\n      assetsSort: false,  // (string) sort the assets by that field\n      children: false,\n    };\n\n    let details = stats.toString(defaults({ colors: true }, statFormatOpts));\n\n    return Boom.create(\n      500,\n      `Optimizations failure.\\n${details.split('\\n').join('\\n    ')}\\n`,\n      stats.toJson(statFormatOpts)\n    );\n  }\n}\n\nmodule.exports = BaseOptimizer;\n"
      ]
    },
    "mtime": 1467036622805
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/plugins/initialize.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./plugin_init",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "pluginInit"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "async-to-generator",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nvar _plugin_init = require('./plugin_init');\n\nvar _plugin_init2 = _interopRequireDefault(_plugin_init);\n\nmodule.exports = _asyncToGenerator(function* (kbnServer, server, config) {\n\n  if (!config.get('plugins.initialize')) {\n    server.log(['info'], 'Plugin initialization disabled.');\n    return [];\n  }\n\n  var plugins = kbnServer.plugins;\n\n  // extend plugin apis with additional context\n  plugins.getPluginApis().forEach(function (api) {\n\n    Object.defineProperty(api, 'uiExports', {\n      value: kbnServer.uiExports\n    });\n  });\n\n  yield (0, _plugin_init2['default'])(plugins);\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9wbHVnaW5zL2luaXRpYWxpemUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7OzJCQUF1QixlQUFlOzs7O0FBRXRDLE1BQU0sQ0FBQyxPQUFPLHFCQUFHLFdBQWdCLFNBQVMsRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFOztBQUUxRCxNQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxvQkFBb0IsQ0FBQyxFQUFFO0FBQ3JDLFVBQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsRUFBRSxpQ0FBaUMsQ0FBQyxDQUFDO0FBQ3hELFdBQU8sRUFBRSxDQUFDO0dBQ1g7O01BRUssT0FBTyxHQUFLLFNBQVMsQ0FBckIsT0FBTzs7O0FBR2IsU0FBTyxDQUFDLGFBQWEsRUFBRSxDQUFDLE9BQU8sQ0FBQyxVQUFBLEdBQUcsRUFBSTs7QUFFckMsVUFBTSxDQUFDLGNBQWMsQ0FBQyxHQUFHLEVBQUUsV0FBVyxFQUFFO0FBQ3RDLFdBQUssRUFBRSxTQUFTLENBQUMsU0FBUztLQUMzQixDQUFDLENBQUM7R0FFSixDQUFDLENBQUM7O0FBRUgsUUFBTSw4QkFBVyxPQUFPLENBQUMsQ0FBQztDQUMzQixDQUFBLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvc2VydmVyL3BsdWdpbnMvaW5pdGlhbGl6ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBwbHVnaW5Jbml0IGZyb20gJy4vcGx1Z2luX2luaXQnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGFzeW5jIGZ1bmN0aW9uIChrYm5TZXJ2ZXIsIHNlcnZlciwgY29uZmlnKSB7XG5cbiAgaWYgKCFjb25maWcuZ2V0KCdwbHVnaW5zLmluaXRpYWxpemUnKSkge1xuICAgIHNlcnZlci5sb2coWydpbmZvJ10sICdQbHVnaW4gaW5pdGlhbGl6YXRpb24gZGlzYWJsZWQuJyk7XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgbGV0IHsgcGx1Z2lucyB9ID0ga2JuU2VydmVyO1xuXG4gIC8vIGV4dGVuZCBwbHVnaW4gYXBpcyB3aXRoIGFkZGl0aW9uYWwgY29udGV4dFxuICBwbHVnaW5zLmdldFBsdWdpbkFwaXMoKS5mb3JFYWNoKGFwaSA9PiB7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoYXBpLCAndWlFeHBvcnRzJywge1xuICAgICAgdmFsdWU6IGtiblNlcnZlci51aUV4cG9ydHNcbiAgICB9KTtcblxuICB9KTtcblxuICBhd2FpdCBwbHVnaW5Jbml0KHBsdWdpbnMpO1xufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/plugins/initialize.js"
      ],
      "names": [],
      "mappings": ";;;;;;2BAAuB,eAAe;;;;AAEtC,MAAM,CAAC,OAAO,qBAAG,WAAgB,SAAS,EAAE,MAAM,EAAE,MAAM,EAAE;;AAE1D,MAAI,CAAC,MAAM,CAAC,GAAG,CAAC,oBAAoB,CAAC,EAAE;AACrC,UAAM,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,EAAE,iCAAiC,CAAC,CAAC;AACxD,WAAO,EAAE,CAAC;GACX;;MAEK,OAAO,GAAK,SAAS,CAArB,OAAO;;;AAGb,SAAO,CAAC,aAAa,EAAE,CAAC,OAAO,CAAC,UAAA,GAAG,EAAI;;AAErC,UAAM,CAAC,cAAc,CAAC,GAAG,EAAE,WAAW,EAAE;AACtC,WAAK,EAAE,SAAS,CAAC,SAAS;KAC3B,CAAC,CAAC;GAEJ,CAAC,CAAC;;AAEH,QAAM,8BAAW,OAAO,CAAC,CAAC;CAC3B,CAAA,CAAC",
      "file": "/home/vio/v3metrics/src/server/plugins/initialize.js",
      "sourcesContent": [
        "import pluginInit from './plugin_init';\n\nmodule.exports = async function (kbnServer, server, config) {\n\n  if (!config.get('plugins.initialize')) {\n    server.log(['info'], 'Plugin initialization disabled.');\n    return [];\n  }\n\n  let { plugins } = kbnServer;\n\n  // extend plugin apis with additional context\n  plugins.getPluginApis().forEach(api => {\n\n    Object.defineProperty(api, 'uiExports', {\n      value: kbnServer.uiExports\n    });\n\n  });\n\n  await pluginInit(plugins);\n};\n"
      ]
    },
    "mtime": 1467036622849
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/plugins/plugin_init.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "includes"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "includes",
                "local": "includes"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "async-to-generator"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nvar _lodash = require('lodash');\n\nexports['default'] = _asyncToGenerator(function* (plugins) {\n  var path = [];\n\n  var initialize = _asyncToGenerator(function* (id, fn) {\n    var plugin = plugins.byId[id];\n\n    if ((0, _lodash.includes)(path, id)) {\n      throw new Error('circular dependencies found: \"' + path.concat(id).join(' -> ') + '\"');\n    }\n\n    path.push(id);\n\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = plugin.requiredIds[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var reqId = _step.value;\n\n        if (!plugins.byId[reqId]) {\n          throw new Error('Unmet requirement \"' + reqId + '\" for plugin \"' + id + '\"');\n        }\n\n        yield initialize(reqId, fn);\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator['return']) {\n          _iterator['return']();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    yield plugin[fn]();\n    path.pop();\n  });\n\n  var collection = plugins.toArray();\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = collection[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var id = _step2.value.id;\n\n      yield initialize(id, 'preInit');\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2['return']) {\n        _iterator2['return']();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n\n  var _iteratorNormalCompletion3 = true;\n  var _didIteratorError3 = false;\n  var _iteratorError3 = undefined;\n\n  try {\n    for (var _iterator3 = collection[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n      var id = _step3.value.id;\n\n      yield initialize(id, 'init');\n    }\n  } catch (err) {\n    _didIteratorError3 = true;\n    _iteratorError3 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion3 && _iterator3['return']) {\n        _iterator3['return']();\n      }\n    } finally {\n      if (_didIteratorError3) {\n        throw _iteratorError3;\n      }\n    }\n  }\n});\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9wbHVnaW5zL3BsdWdpbl9pbml0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O3NCQUF5QixRQUFROzt1Q0FFbEIsV0FBTyxPQUFPLEVBQUs7QUFDaEMsTUFBSSxJQUFJLEdBQUcsRUFBRSxDQUFDOztBQUVkLE1BQU0sVUFBVSxxQkFBRyxXQUFnQixFQUFFLEVBQUUsRUFBRSxFQUFFO0FBQ3pDLFFBQUksTUFBTSxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7O0FBRTlCLFFBQUksc0JBQVMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxFQUFFO0FBQ3RCLFlBQU0sSUFBSSxLQUFLLG9DQUFrQyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBSSxDQUFDO0tBQ25GOztBQUVELFFBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7Ozs7Ozs7QUFFZCwyQkFBa0IsTUFBTSxDQUFDLFdBQVcsOEhBQUU7WUFBN0IsS0FBSzs7QUFDWixZQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRTtBQUN4QixnQkFBTSxJQUFJLEtBQUsseUJBQXVCLEtBQUssc0JBQWlCLEVBQUUsT0FBSSxDQUFDO1NBQ3BFOztBQUVELGNBQU0sVUFBVSxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsQ0FBQztPQUM3Qjs7Ozs7Ozs7Ozs7Ozs7OztBQUVELFVBQU0sTUFBTSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUM7QUFDbkIsUUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDO0dBQ1osQ0FBQSxDQUFDOztBQUVGLE1BQU0sVUFBVSxHQUFHLE9BQU8sQ0FBQyxPQUFPLEVBQUUsQ0FBQzs7Ozs7O0FBQ3JDLDBCQUFpQixVQUFVLG1JQUFFO1VBQW5CLEVBQUUsZ0JBQUYsRUFBRTs7QUFDVixZQUFNLFVBQVUsQ0FBQyxFQUFFLEVBQUUsU0FBUyxDQUFDLENBQUM7S0FDakM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUVELDBCQUFpQixVQUFVLG1JQUFFO1VBQW5CLEVBQUUsZ0JBQUYsRUFBRTs7QUFDVixZQUFNLFVBQVUsQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDLENBQUM7S0FDOUI7Ozs7Ozs7Ozs7Ozs7OztDQUNGIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9wbHVnaW5zL3BsdWdpbl9pbml0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaW5jbHVkZXMgfSBmcm9tICdsb2Rhc2gnO1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyAocGx1Z2lucykgPT4ge1xuICBsZXQgcGF0aCA9IFtdO1xuXG4gIGNvbnN0IGluaXRpYWxpemUgPSBhc3luYyBmdW5jdGlvbiAoaWQsIGZuKSB7XG4gICAgbGV0IHBsdWdpbiA9IHBsdWdpbnMuYnlJZFtpZF07XG5cbiAgICBpZiAoaW5jbHVkZXMocGF0aCwgaWQpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYGNpcmN1bGFyIGRlcGVuZGVuY2llcyBmb3VuZDogXCIke3BhdGguY29uY2F0KGlkKS5qb2luKCcgLT4gJyl9XCJgKTtcbiAgICB9XG5cbiAgICBwYXRoLnB1c2goaWQpO1xuXG4gICAgZm9yIChsZXQgcmVxSWQgb2YgcGx1Z2luLnJlcXVpcmVkSWRzKSB7XG4gICAgICBpZiAoIXBsdWdpbnMuYnlJZFtyZXFJZF0pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbm1ldCByZXF1aXJlbWVudCBcIiR7cmVxSWR9XCIgZm9yIHBsdWdpbiBcIiR7aWR9XCJgKTtcbiAgICAgIH1cblxuICAgICAgYXdhaXQgaW5pdGlhbGl6ZShyZXFJZCwgZm4pO1xuICAgIH1cblxuICAgIGF3YWl0IHBsdWdpbltmbl0oKTtcbiAgICBwYXRoLnBvcCgpO1xuICB9O1xuXG4gIGNvbnN0IGNvbGxlY3Rpb24gPSBwbHVnaW5zLnRvQXJyYXkoKTtcbiAgZm9yIChsZXQge2lkfSBvZiBjb2xsZWN0aW9uKSB7XG4gICAgYXdhaXQgaW5pdGlhbGl6ZShpZCwgJ3ByZUluaXQnKTtcbiAgfVxuXG4gIGZvciAobGV0IHtpZH0gb2YgY29sbGVjdGlvbikge1xuICAgIGF3YWl0IGluaXRpYWxpemUoaWQsICdpbml0Jyk7XG4gIH1cbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/plugins/plugin_init.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;sBAAyB,QAAQ;;uCAElB,WAAO,OAAO,EAAK;AAChC,MAAI,IAAI,GAAG,EAAE,CAAC;;AAEd,MAAM,UAAU,qBAAG,WAAgB,EAAE,EAAE,EAAE,EAAE;AACzC,QAAI,MAAM,GAAG,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;;AAE9B,QAAI,sBAAS,IAAI,EAAE,EAAE,CAAC,EAAE;AACtB,YAAM,IAAI,KAAK,oCAAkC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,OAAI,CAAC;KACnF;;AAED,QAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;;;;;;;AAEd,2BAAkB,MAAM,CAAC,WAAW,8HAAE;YAA7B,KAAK;;AACZ,YAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;AACxB,gBAAM,IAAI,KAAK,yBAAuB,KAAK,sBAAiB,EAAE,OAAI,CAAC;SACpE;;AAED,cAAM,UAAU,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;OAC7B;;;;;;;;;;;;;;;;AAED,UAAM,MAAM,CAAC,EAAE,CAAC,EAAE,CAAC;AACnB,QAAI,CAAC,GAAG,EAAE,CAAC;GACZ,CAAA,CAAC;;AAEF,MAAM,UAAU,GAAG,OAAO,CAAC,OAAO,EAAE,CAAC;;;;;;AACrC,0BAAiB,UAAU,mIAAE;UAAnB,EAAE,gBAAF,EAAE;;AACV,YAAM,UAAU,CAAC,EAAE,EAAE,SAAS,CAAC,CAAC;KACjC;;;;;;;;;;;;;;;;;;;;;AAED,0BAAiB,UAAU,mIAAE;UAAnB,EAAE,gBAAF,EAAE;;AACV,YAAM,UAAU,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC;KAC9B;;;;;;;;;;;;;;;CACF",
      "file": "/home/vio/v3metrics/src/server/plugins/plugin_init.js",
      "sourcesContent": [
        "import { includes } from 'lodash';\n\nexport default async (plugins) => {\n  let path = [];\n\n  const initialize = async function (id, fn) {\n    let plugin = plugins.byId[id];\n\n    if (includes(path, id)) {\n      throw new Error(`circular dependencies found: \"${path.concat(id).join(' -> ')}\"`);\n    }\n\n    path.push(id);\n\n    for (let reqId of plugin.requiredIds) {\n      if (!plugins.byId[reqId]) {\n        throw new Error(`Unmet requirement \"${reqId}\" for plugin \"${id}\"`);\n      }\n\n      await initialize(reqId, fn);\n    }\n\n    await plugin[fn]();\n    path.pop();\n  };\n\n  const collection = plugins.toArray();\n  for (let {id} of collection) {\n    await initialize(id, 'preInit');\n  }\n\n  for (let {id} of collection) {\n    await initialize(id, 'init');\n  }\n};\n"
      ]
    },
    "mtime": 1467036622849
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/http/short_url_lookup.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "crypto",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "crypto"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "async-to-generator",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nvar _crypto = require('crypto');\n\nvar _crypto2 = _interopRequireDefault(_crypto);\n\nexports['default'] = function (server) {\n  var updateMetadata = _asyncToGenerator(function* (urlId, urlDoc) {\n    var client = server.plugins.elasticsearch.client;\n    var kibanaIndex = server.config().get('kibana.index');\n\n    try {\n      yield client.update({\n        index: kibanaIndex,\n        type: 'url',\n        id: urlId,\n        body: {\n          doc: {\n            'accessDate': new Date(),\n            'accessCount': urlDoc._source.accessCount + 1\n          }\n        }\n      });\n    } catch (err) {\n      server.log('Warning: Error updating url metadata', err);\n      //swallow errors. It isn't critical if there is no update.\n    }\n  });\n\n  var getUrlDoc = _asyncToGenerator(function* (urlId) {\n    var urlDoc = yield new Promise(function (resolve, reject) {\n      var client = server.plugins.elasticsearch.client;\n      var kibanaIndex = server.config().get('kibana.index');\n\n      client.get({\n        index: kibanaIndex,\n        type: 'url',\n        id: urlId\n      }).then(function (response) {\n        resolve(response);\n      })['catch'](function (err) {\n        resolve();\n      });\n    });\n\n    return urlDoc;\n  });\n\n  var createUrlDoc = _asyncToGenerator(function* (url, urlId) {\n    var newUrlId = yield new Promise(function (resolve, reject) {\n      var client = server.plugins.elasticsearch.client;\n      var kibanaIndex = server.config().get('kibana.index');\n\n      client.index({\n        index: kibanaIndex,\n        type: 'url',\n        id: urlId,\n        body: {\n          url: url,\n          'accessCount': 0,\n          'createDate': new Date(),\n          'accessDate': new Date()\n        }\n      }).then(function (response) {\n        resolve(response._id);\n      })['catch'](function (err) {\n        reject(err);\n      });\n    });\n\n    return newUrlId;\n  });\n\n  function createUrlId(url) {\n    var urlId = _crypto2['default'].createHash('md5').update(url).digest('hex');\n\n    return urlId;\n  }\n\n  return {\n    generateUrlId: _asyncToGenerator(function* (url) {\n      var urlId = createUrlId(url);\n      var urlDoc = yield getUrlDoc(urlId);\n      if (urlDoc) return urlId;\n\n      return createUrlDoc(url, urlId);\n    }),\n    getUrl: _asyncToGenerator(function* (urlId) {\n      try {\n        var urlDoc = yield getUrlDoc(urlId);\n        if (!urlDoc) throw new Error('Requested shortened url does not exist in kibana index');\n\n        updateMetadata(urlId, urlDoc);\n\n        return urlDoc._source.url;\n      } catch (err) {\n        return '/';\n      }\n    })\n  };\n};\n\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9odHRwL3Nob3J0X3VybF9sb29rdXAuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztzQkFBbUIsUUFBUTs7OztxQkFFWixVQUFVLE1BQU0sRUFBRTtNQUNoQixjQUFjLHFCQUE3QixXQUE4QixLQUFLLEVBQUUsTUFBTSxFQUFFO0FBQzNDLFFBQU0sTUFBTSxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQztBQUNuRCxRQUFNLFdBQVcsR0FBRyxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQyxDQUFDOztBQUV4RCxRQUFJO0FBQ0YsWUFBTSxNQUFNLENBQUMsTUFBTSxDQUFDO0FBQ2xCLGFBQUssRUFBRSxXQUFXO0FBQ2xCLFlBQUksRUFBRSxLQUFLO0FBQ1gsVUFBRSxFQUFFLEtBQUs7QUFDVCxZQUFJLEVBQUU7QUFDSixhQUFHLEVBQUU7QUFDSCx3QkFBWSxFQUFFLElBQUksSUFBSSxFQUFFO0FBQ3hCLHlCQUFhLEVBQUUsTUFBTSxDQUFDLE9BQU8sQ0FBQyxXQUFXLEdBQUcsQ0FBQztXQUM5QztTQUNGO09BQ0YsQ0FBQyxDQUFDO0tBQ0osQ0FBQyxPQUFPLEdBQUcsRUFBRTtBQUNaLFlBQU0sQ0FBQyxHQUFHLENBQUMsc0NBQXNDLEVBQUUsR0FBRyxDQUFDLENBQUM7O0tBRXpEO0dBQ0Y7O01BRWMsU0FBUyxxQkFBeEIsV0FBeUIsS0FBSyxFQUFFO0FBQzlCLFFBQU0sTUFBTSxHQUFHLE1BQU0sSUFBSSxPQUFPLENBQUMsVUFBQyxPQUFPLEVBQUUsTUFBTSxFQUFLO0FBQ3BELFVBQU0sTUFBTSxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQztBQUNuRCxVQUFNLFdBQVcsR0FBRyxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQyxDQUFDOztBQUV4RCxZQUFNLENBQUMsR0FBRyxDQUFDO0FBQ1QsYUFBSyxFQUFFLFdBQVc7QUFDbEIsWUFBSSxFQUFFLEtBQUs7QUFDWCxVQUFFLEVBQUUsS0FBSztPQUNWLENBQUMsQ0FDRCxJQUFJLENBQUMsVUFBQSxRQUFRLEVBQUk7QUFDaEIsZUFBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO09BQ25CLENBQUMsU0FDSSxDQUFDLFVBQUEsR0FBRyxFQUFJO0FBQ1osZUFBTyxFQUFFLENBQUM7T0FDWCxDQUFDLENBQUM7S0FDSixDQUFDLENBQUM7O0FBRUgsV0FBTyxNQUFNLENBQUM7R0FDZjs7TUFFYyxZQUFZLHFCQUEzQixXQUE0QixHQUFHLEVBQUUsS0FBSyxFQUFFO0FBQ3RDLFFBQU0sUUFBUSxHQUFHLE1BQU0sSUFBSSxPQUFPLENBQUMsVUFBQyxPQUFPLEVBQUUsTUFBTSxFQUFLO0FBQ3RELFVBQU0sTUFBTSxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQztBQUNuRCxVQUFNLFdBQVcsR0FBRyxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQyxDQUFDOztBQUV4RCxZQUFNLENBQUMsS0FBSyxDQUFDO0FBQ1gsYUFBSyxFQUFFLFdBQVc7QUFDbEIsWUFBSSxFQUFFLEtBQUs7QUFDWCxVQUFFLEVBQUUsS0FBSztBQUNULFlBQUksRUFBRTtBQUNKLGFBQUcsRUFBSCxHQUFHO0FBQ0gsdUJBQWEsRUFBRSxDQUFDO0FBQ2hCLHNCQUFZLEVBQUUsSUFBSSxJQUFJLEVBQUU7QUFDeEIsc0JBQVksRUFBRSxJQUFJLElBQUksRUFBRTtTQUN6QjtPQUNGLENBQUMsQ0FDRCxJQUFJLENBQUMsVUFBQSxRQUFRLEVBQUk7QUFDaEIsZUFBTyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQztPQUN2QixDQUFDLFNBQ0ksQ0FBQyxVQUFBLEdBQUcsRUFBSTtBQUNaLGNBQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQztPQUNiLENBQUMsQ0FBQztLQUNKLENBQUMsQ0FBQzs7QUFFSCxXQUFPLFFBQVEsQ0FBQztHQUNqQjs7QUFFRCxXQUFTLFdBQVcsQ0FBQyxHQUFHLEVBQUU7QUFDeEIsUUFBTSxLQUFLLEdBQUcsb0JBQU8sVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUNyQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQ1gsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDOztBQUVmLFdBQU8sS0FBSyxDQUFDO0dBQ2Q7O0FBRUQsU0FBTztBQUNMLEFBQU0saUJBQWEsb0JBQUEsV0FBQyxHQUFHLEVBQUU7QUFDdkIsVUFBTSxLQUFLLEdBQUcsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQy9CLFVBQU0sTUFBTSxHQUFHLE1BQU0sU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ3RDLFVBQUksTUFBTSxFQUFFLE9BQU8sS0FBSyxDQUFDOztBQUV6QixhQUFPLFlBQVksQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLENBQUM7S0FDakMsQ0FBQTtBQUNELEFBQU0sVUFBTSxvQkFBQSxXQUFDLEtBQUssRUFBRTtBQUNsQixVQUFJO0FBQ0YsWUFBTSxNQUFNLEdBQUcsTUFBTSxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDdEMsWUFBSSxDQUFDLE1BQU0sRUFBRSxNQUFNLElBQUksS0FBSyxDQUFDLHdEQUF3RCxDQUFDLENBQUM7O0FBRXZGLHNCQUFjLENBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxDQUFDOztBQUU5QixlQUFPLE1BQU0sQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDO09BQzNCLENBQUMsT0FBTyxHQUFHLEVBQUU7QUFDWixlQUFPLEdBQUcsQ0FBQztPQUNaO0tBQ0YsQ0FBQTtHQUNGLENBQUM7Q0FDSDs7QUFBQSxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9odHRwL3Nob3J0X3VybF9sb29rdXAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY3J5cHRvIGZyb20gJ2NyeXB0byc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChzZXJ2ZXIpIHtcbiAgYXN5bmMgZnVuY3Rpb24gdXBkYXRlTWV0YWRhdGEodXJsSWQsIHVybERvYykge1xuICAgIGNvbnN0IGNsaWVudCA9IHNlcnZlci5wbHVnaW5zLmVsYXN0aWNzZWFyY2guY2xpZW50O1xuICAgIGNvbnN0IGtpYmFuYUluZGV4ID0gc2VydmVyLmNvbmZpZygpLmdldCgna2liYW5hLmluZGV4Jyk7XG5cbiAgICB0cnkge1xuICAgICAgYXdhaXQgY2xpZW50LnVwZGF0ZSh7XG4gICAgICAgIGluZGV4OiBraWJhbmFJbmRleCxcbiAgICAgICAgdHlwZTogJ3VybCcsXG4gICAgICAgIGlkOiB1cmxJZCxcbiAgICAgICAgYm9keToge1xuICAgICAgICAgIGRvYzoge1xuICAgICAgICAgICAgJ2FjY2Vzc0RhdGUnOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgJ2FjY2Vzc0NvdW50JzogdXJsRG9jLl9zb3VyY2UuYWNjZXNzQ291bnQgKyAxXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHNlcnZlci5sb2coJ1dhcm5pbmc6IEVycm9yIHVwZGF0aW5nIHVybCBtZXRhZGF0YScsIGVycik7XG4gICAgICAvL3N3YWxsb3cgZXJyb3JzLiBJdCBpc24ndCBjcml0aWNhbCBpZiB0aGVyZSBpcyBubyB1cGRhdGUuXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZnVuY3Rpb24gZ2V0VXJsRG9jKHVybElkKSB7XG4gICAgY29uc3QgdXJsRG9jID0gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3QgY2xpZW50ID0gc2VydmVyLnBsdWdpbnMuZWxhc3RpY3NlYXJjaC5jbGllbnQ7XG4gICAgICBjb25zdCBraWJhbmFJbmRleCA9IHNlcnZlci5jb25maWcoKS5nZXQoJ2tpYmFuYS5pbmRleCcpO1xuXG4gICAgICBjbGllbnQuZ2V0KHtcbiAgICAgICAgaW5kZXg6IGtpYmFuYUluZGV4LFxuICAgICAgICB0eXBlOiAndXJsJyxcbiAgICAgICAgaWQ6IHVybElkXG4gICAgICB9KVxuICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdXJsRG9jO1xuICB9XG5cbiAgYXN5bmMgZnVuY3Rpb24gY3JlYXRlVXJsRG9jKHVybCwgdXJsSWQpIHtcbiAgICBjb25zdCBuZXdVcmxJZCA9IGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IGNsaWVudCA9IHNlcnZlci5wbHVnaW5zLmVsYXN0aWNzZWFyY2guY2xpZW50O1xuICAgICAgY29uc3Qga2liYW5hSW5kZXggPSBzZXJ2ZXIuY29uZmlnKCkuZ2V0KCdraWJhbmEuaW5kZXgnKTtcblxuICAgICAgY2xpZW50LmluZGV4KHtcbiAgICAgICAgaW5kZXg6IGtpYmFuYUluZGV4LFxuICAgICAgICB0eXBlOiAndXJsJyxcbiAgICAgICAgaWQ6IHVybElkLFxuICAgICAgICBib2R5OiB7XG4gICAgICAgICAgdXJsLFxuICAgICAgICAgICdhY2Nlc3NDb3VudCc6IDAsXG4gICAgICAgICAgJ2NyZWF0ZURhdGUnOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICdhY2Nlc3NEYXRlJzogbmV3IERhdGUoKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICByZXNvbHZlKHJlc3BvbnNlLl9pZCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gbmV3VXJsSWQ7XG4gIH1cblxuICBmdW5jdGlvbiBjcmVhdGVVcmxJZCh1cmwpIHtcbiAgICBjb25zdCB1cmxJZCA9IGNyeXB0by5jcmVhdGVIYXNoKCdtZDUnKVxuICAgIC51cGRhdGUodXJsKVxuICAgIC5kaWdlc3QoJ2hleCcpO1xuXG4gICAgcmV0dXJuIHVybElkO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBhc3luYyBnZW5lcmF0ZVVybElkKHVybCkge1xuICAgICAgY29uc3QgdXJsSWQgPSBjcmVhdGVVcmxJZCh1cmwpO1xuICAgICAgY29uc3QgdXJsRG9jID0gYXdhaXQgZ2V0VXJsRG9jKHVybElkKTtcbiAgICAgIGlmICh1cmxEb2MpIHJldHVybiB1cmxJZDtcblxuICAgICAgcmV0dXJuIGNyZWF0ZVVybERvYyh1cmwsIHVybElkKTtcbiAgICB9LFxuICAgIGFzeW5jIGdldFVybCh1cmxJZCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXJsRG9jID0gYXdhaXQgZ2V0VXJsRG9jKHVybElkKTtcbiAgICAgICAgaWYgKCF1cmxEb2MpIHRocm93IG5ldyBFcnJvcignUmVxdWVzdGVkIHNob3J0ZW5lZCB1cmwgZG9lcyBub3QgZXhpc3QgaW4ga2liYW5hIGluZGV4Jyk7XG5cbiAgICAgICAgdXBkYXRlTWV0YWRhdGEodXJsSWQsIHVybERvYyk7XG5cbiAgICAgICAgcmV0dXJuIHVybERvYy5fc291cmNlLnVybDtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICByZXR1cm4gJy8nO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/http/short_url_lookup.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/src/server/http/short_url_lookup.js",
      "sourcesContent": [
        "import crypto from 'crypto';\n\nexport default function (server) {\n  async function updateMetadata(urlId, urlDoc) {\n    const client = server.plugins.elasticsearch.client;\n    const kibanaIndex = server.config().get('kibana.index');\n\n    try {\n      await client.update({\n        index: kibanaIndex,\n        type: 'url',\n        id: urlId,\n        body: {\n          doc: {\n            'accessDate': new Date(),\n            'accessCount': urlDoc._source.accessCount + 1\n          }\n        }\n      });\n    } catch (err) {\n      server.log('Warning: Error updating url metadata', err);\n      //swallow errors. It isn't critical if there is no update.\n    }\n  }\n\n  async function getUrlDoc(urlId) {\n    const urlDoc = await new Promise((resolve, reject) => {\n      const client = server.plugins.elasticsearch.client;\n      const kibanaIndex = server.config().get('kibana.index');\n\n      client.get({\n        index: kibanaIndex,\n        type: 'url',\n        id: urlId\n      })\n      .then(response => {\n        resolve(response);\n      })\n      .catch(err => {\n        resolve();\n      });\n    });\n\n    return urlDoc;\n  }\n\n  async function createUrlDoc(url, urlId) {\n    const newUrlId = await new Promise((resolve, reject) => {\n      const client = server.plugins.elasticsearch.client;\n      const kibanaIndex = server.config().get('kibana.index');\n\n      client.index({\n        index: kibanaIndex,\n        type: 'url',\n        id: urlId,\n        body: {\n          url,\n          'accessCount': 0,\n          'createDate': new Date(),\n          'accessDate': new Date()\n        }\n      })\n      .then(response => {\n        resolve(response._id);\n      })\n      .catch(err => {\n        reject(err);\n      });\n    });\n\n    return newUrlId;\n  }\n\n  function createUrlId(url) {\n    const urlId = crypto.createHash('md5')\n    .update(url)\n    .digest('hex');\n\n    return urlId;\n  }\n\n  return {\n    async generateUrlId(url) {\n      const urlId = createUrlId(url);\n      const urlDoc = await getUrlDoc(urlId);\n      if (urlDoc) return urlId;\n\n      return createUrlDoc(url, urlId);\n    },\n    async getUrl(urlId) {\n      try {\n        const urlDoc = await getUrlDoc(urlId);\n        if (!urlDoc) throw new Error('Requested shortened url does not exist in kibana index');\n\n        updateMetadata(urlId, urlDoc);\n\n        return urlDoc._source.url;\n      } catch (err) {\n        return '/';\n      }\n    }\n  };\n};\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/http/setup_connection.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "fs",
            "imported": [
              "readFileSync"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "readFileSync",
                "local": "readFileSync"
              }
            ]
          },
          {
            "source": "url",
            "imported": [
              "format"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "format",
                "local": "formatUrl"
              }
            ]
          },
          {
            "source": "httpolyglot",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "httpolyglot"
              }
            ]
          },
          {
            "source": "./tls_ciphers",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "tlsCiphers"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "extends",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _fs = require('fs');\n\nvar _url = require('url');\n\nvar _httpolyglot = require('httpolyglot');\n\nvar _httpolyglot2 = _interopRequireDefault(_httpolyglot);\n\nvar _tls_ciphers = require('./tls_ciphers');\n\nvar _tls_ciphers2 = _interopRequireDefault(_tls_ciphers);\n\nexports['default'] = function (kbnServer, server, config) {\n  // this mixin is used outside of the kbn server, so it MUST work without a full kbnServer object.\n  kbnServer = null;\n\n  var host = config.get('server.host');\n  var port = config.get('server.port');\n\n  var connectionOptions = {\n    host: host,\n    port: port,\n    state: {\n      strictHeader: false\n    },\n    routes: {\n      cors: config.get('server.cors'),\n      payload: {\n        maxBytes: config.get('server.maxPayloadBytes')\n      }\n    }\n  };\n\n  // enable tlsOpts if ssl key and cert are defined\n  var useSsl = config.get('server.ssl.key') && config.get('server.ssl.cert');\n\n  // not using https? well that's easy!\n  if (!useSsl) {\n    server.connection(connectionOptions);\n    return;\n  }\n\n  server.connection(_extends({}, connectionOptions, {\n    tls: true,\n    listener: _httpolyglot2['default'].createServer({\n      key: (0, _fs.readFileSync)(config.get('server.ssl.key')),\n      cert: (0, _fs.readFileSync)(config.get('server.ssl.cert')),\n\n      ciphers: _tls_ciphers2['default'],\n      // We use the server's cipher order rather than the client's to prevent the BEAST attack\n      honorCipherOrder: true\n    })\n  }));\n\n  server.ext('onRequest', function (req, reply) {\n    if (req.raw.req.socket.encrypted) {\n      reply['continue']();\n    } else {\n      reply.redirect((0, _url.format)({\n        port: port,\n        protocol: 'https',\n        hostname: host,\n        pathname: req.url.pathname,\n        search: req.url.search\n      }));\n    }\n  });\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9odHRwL3NldHVwX2Nvbm5lY3Rpb24uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztrQkFBNkIsSUFBSTs7bUJBQ0csS0FBSzs7MkJBQ2pCLGFBQWE7Ozs7MkJBRWQsZUFBZTs7OztxQkFFdkIsVUFBVSxTQUFTLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRTs7QUFFbEQsV0FBUyxHQUFHLElBQUksQ0FBQzs7QUFFakIsTUFBTSxJQUFJLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsQ0FBQztBQUN2QyxNQUFNLElBQUksR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxDQUFDOztBQUV2QyxNQUFNLGlCQUFpQixHQUFHO0FBQ3hCLFFBQUksRUFBSixJQUFJO0FBQ0osUUFBSSxFQUFKLElBQUk7QUFDSixTQUFLLEVBQUU7QUFDTCxrQkFBWSxFQUFFLEtBQUs7S0FDcEI7QUFDRCxVQUFNLEVBQUU7QUFDTixVQUFJLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUM7QUFDL0IsYUFBTyxFQUFFO0FBQ1AsZ0JBQVEsRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLHdCQUF3QixDQUFDO09BQy9DO0tBQ0Y7R0FDRixDQUFDOzs7QUFHRixNQUFNLE1BQU0sR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLGdCQUFnQixDQUFDLElBQUksTUFBTSxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDOzs7QUFHN0UsTUFBSSxDQUFDLE1BQU0sRUFBRTtBQUNYLFVBQU0sQ0FBQyxVQUFVLENBQUMsaUJBQWlCLENBQUMsQ0FBQztBQUNyQyxXQUFPO0dBQ1I7O0FBRUQsUUFBTSxDQUFDLFVBQVUsY0FDWixpQkFBaUI7QUFDcEIsT0FBRyxFQUFFLElBQUk7QUFDVCxZQUFRLEVBQUUseUJBQVksWUFBWSxDQUFDO0FBQ2pDLFNBQUcsRUFBRSxzQkFBYSxNQUFNLENBQUMsR0FBRyxDQUFDLGdCQUFnQixDQUFDLENBQUM7QUFDL0MsVUFBSSxFQUFFLHNCQUFhLE1BQU0sQ0FBQyxHQUFHLENBQUMsaUJBQWlCLENBQUMsQ0FBQzs7QUFFakQsYUFBTywwQkFBWTs7QUFFbkIsc0JBQWdCLEVBQUUsSUFBSTtLQUN2QixDQUFDO0tBQ0YsQ0FBQzs7QUFFSCxRQUFNLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBRSxVQUFVLEdBQUcsRUFBRSxLQUFLLEVBQUU7QUFDNUMsUUFBSSxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsU0FBUyxFQUFFO0FBQ2hDLFdBQUssWUFBUyxFQUFFLENBQUM7S0FDbEIsTUFBTTtBQUNMLFdBQUssQ0FBQyxRQUFRLENBQUMsaUJBQVU7QUFDdkIsWUFBSSxFQUFKLElBQUk7QUFDSixnQkFBUSxFQUFFLE9BQU87QUFDakIsZ0JBQVEsRUFBRSxJQUFJO0FBQ2QsZ0JBQVEsRUFBRSxHQUFHLENBQUMsR0FBRyxDQUFDLFFBQVE7QUFDMUIsY0FBTSxFQUFFLEdBQUcsQ0FBQyxHQUFHLENBQUMsTUFBTTtPQUN2QixDQUFDLENBQUMsQ0FBQztLQUNMO0dBQ0YsQ0FBQyxDQUFDO0NBQ0oiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvc2VydmVyL2h0dHAvc2V0dXBfY29ubmVjdGlvbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJlYWRGaWxlU3luYyB9IGZyb20gJ2ZzJztcbmltcG9ydCB7IGZvcm1hdCBhcyBmb3JtYXRVcmwgfSBmcm9tICd1cmwnO1xuaW1wb3J0IGh0dHBvbHlnbG90IGZyb20gJ2h0dHBvbHlnbG90JztcblxuaW1wb3J0IHRsc0NpcGhlcnMgZnJvbSAnLi90bHNfY2lwaGVycyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChrYm5TZXJ2ZXIsIHNlcnZlciwgY29uZmlnKSB7XG4gIC8vIHRoaXMgbWl4aW4gaXMgdXNlZCBvdXRzaWRlIG9mIHRoZSBrYm4gc2VydmVyLCBzbyBpdCBNVVNUIHdvcmsgd2l0aG91dCBhIGZ1bGwga2JuU2VydmVyIG9iamVjdC5cbiAga2JuU2VydmVyID0gbnVsbDtcblxuICBjb25zdCBob3N0ID0gY29uZmlnLmdldCgnc2VydmVyLmhvc3QnKTtcbiAgY29uc3QgcG9ydCA9IGNvbmZpZy5nZXQoJ3NlcnZlci5wb3J0Jyk7XG5cbiAgY29uc3QgY29ubmVjdGlvbk9wdGlvbnMgPSB7XG4gICAgaG9zdCxcbiAgICBwb3J0LFxuICAgIHN0YXRlOiB7XG4gICAgICBzdHJpY3RIZWFkZXI6IGZhbHNlXG4gICAgfSxcbiAgICByb3V0ZXM6IHtcbiAgICAgIGNvcnM6IGNvbmZpZy5nZXQoJ3NlcnZlci5jb3JzJyksXG4gICAgICBwYXlsb2FkOiB7XG4gICAgICAgIG1heEJ5dGVzOiBjb25maWcuZ2V0KCdzZXJ2ZXIubWF4UGF5bG9hZEJ5dGVzJylcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLy8gZW5hYmxlIHRsc09wdHMgaWYgc3NsIGtleSBhbmQgY2VydCBhcmUgZGVmaW5lZFxuICBjb25zdCB1c2VTc2wgPSBjb25maWcuZ2V0KCdzZXJ2ZXIuc3NsLmtleScpICYmIGNvbmZpZy5nZXQoJ3NlcnZlci5zc2wuY2VydCcpO1xuXG4gIC8vIG5vdCB1c2luZyBodHRwcz8gd2VsbCB0aGF0J3MgZWFzeSFcbiAgaWYgKCF1c2VTc2wpIHtcbiAgICBzZXJ2ZXIuY29ubmVjdGlvbihjb25uZWN0aW9uT3B0aW9ucyk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgc2VydmVyLmNvbm5lY3Rpb24oe1xuICAgIC4uLmNvbm5lY3Rpb25PcHRpb25zLFxuICAgIHRsczogdHJ1ZSxcbiAgICBsaXN0ZW5lcjogaHR0cG9seWdsb3QuY3JlYXRlU2VydmVyKHtcbiAgICAgIGtleTogcmVhZEZpbGVTeW5jKGNvbmZpZy5nZXQoJ3NlcnZlci5zc2wua2V5JykpLFxuICAgICAgY2VydDogcmVhZEZpbGVTeW5jKGNvbmZpZy5nZXQoJ3NlcnZlci5zc2wuY2VydCcpKSxcblxuICAgICAgY2lwaGVyczogdGxzQ2lwaGVycyxcbiAgICAgIC8vIFdlIHVzZSB0aGUgc2VydmVyJ3MgY2lwaGVyIG9yZGVyIHJhdGhlciB0aGFuIHRoZSBjbGllbnQncyB0byBwcmV2ZW50IHRoZSBCRUFTVCBhdHRhY2tcbiAgICAgIGhvbm9yQ2lwaGVyT3JkZXI6IHRydWVcbiAgICB9KVxuICB9KTtcblxuICBzZXJ2ZXIuZXh0KCdvblJlcXVlc3QnLCBmdW5jdGlvbiAocmVxLCByZXBseSkge1xuICAgIGlmIChyZXEucmF3LnJlcS5zb2NrZXQuZW5jcnlwdGVkKSB7XG4gICAgICByZXBseS5jb250aW51ZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXBseS5yZWRpcmVjdChmb3JtYXRVcmwoe1xuICAgICAgICBwb3J0LFxuICAgICAgICBwcm90b2NvbDogJ2h0dHBzJyxcbiAgICAgICAgaG9zdG5hbWU6IGhvc3QsXG4gICAgICAgIHBhdGhuYW1lOiByZXEudXJsLnBhdGhuYW1lLFxuICAgICAgICBzZWFyY2g6IHJlcS51cmwuc2VhcmNoLFxuICAgICAgfSkpO1xuICAgIH1cbiAgfSk7XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/http/setup_connection.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;kBAA6B,IAAI;;mBACG,KAAK;;2BACjB,aAAa;;;;2BAEd,eAAe;;;;qBAEvB,UAAU,SAAS,EAAE,MAAM,EAAE,MAAM,EAAE;;AAElD,WAAS,GAAG,IAAI,CAAC;;AAEjB,MAAM,IAAI,GAAG,MAAM,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;AACvC,MAAM,IAAI,GAAG,MAAM,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;;AAEvC,MAAM,iBAAiB,GAAG;AACxB,QAAI,EAAJ,IAAI;AACJ,QAAI,EAAJ,IAAI;AACJ,SAAK,EAAE;AACL,kBAAY,EAAE,KAAK;KACpB;AACD,UAAM,EAAE;AACN,UAAI,EAAE,MAAM,CAAC,GAAG,CAAC,aAAa,CAAC;AAC/B,aAAO,EAAE;AACP,gBAAQ,EAAE,MAAM,CAAC,GAAG,CAAC,wBAAwB,CAAC;OAC/C;KACF;GACF,CAAC;;;AAGF,MAAM,MAAM,GAAG,MAAM,CAAC,GAAG,CAAC,gBAAgB,CAAC,IAAI,MAAM,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;;;AAG7E,MAAI,CAAC,MAAM,EAAE;AACX,UAAM,CAAC,UAAU,CAAC,iBAAiB,CAAC,CAAC;AACrC,WAAO;GACR;;AAED,QAAM,CAAC,UAAU,cACZ,iBAAiB;AACpB,OAAG,EAAE,IAAI;AACT,YAAQ,EAAE,yBAAY,YAAY,CAAC;AACjC,SAAG,EAAE,sBAAa,MAAM,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;AAC/C,UAAI,EAAE,sBAAa,MAAM,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;;AAEjD,aAAO,0BAAY;;AAEnB,sBAAgB,EAAE,IAAI;KACvB,CAAC;KACF,CAAC;;AAEH,QAAM,CAAC,GAAG,CAAC,WAAW,EAAE,UAAU,GAAG,EAAE,KAAK,EAAE;AAC5C,QAAI,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,MAAM,CAAC,SAAS,EAAE;AAChC,WAAK,YAAS,EAAE,CAAC;KAClB,MAAM;AACL,WAAK,CAAC,QAAQ,CAAC,iBAAU;AACvB,YAAI,EAAJ,IAAI;AACJ,gBAAQ,EAAE,OAAO;AACjB,gBAAQ,EAAE,IAAI;AACd,gBAAQ,EAAE,GAAG,CAAC,GAAG,CAAC,QAAQ;AAC1B,cAAM,EAAE,GAAG,CAAC,GAAG,CAAC,MAAM;OACvB,CAAC,CAAC,CAAC;KACL;GACF,CAAC,CAAC;CACJ",
      "file": "/home/vio/v3metrics/src/server/http/setup_connection.js",
      "sourcesContent": [
        "import { readFileSync } from 'fs';\nimport { format as formatUrl } from 'url';\nimport httpolyglot from 'httpolyglot';\n\nimport tlsCiphers from './tls_ciphers';\n\nexport default function (kbnServer, server, config) {\n  // this mixin is used outside of the kbn server, so it MUST work without a full kbnServer object.\n  kbnServer = null;\n\n  const host = config.get('server.host');\n  const port = config.get('server.port');\n\n  const connectionOptions = {\n    host,\n    port,\n    state: {\n      strictHeader: false\n    },\n    routes: {\n      cors: config.get('server.cors'),\n      payload: {\n        maxBytes: config.get('server.maxPayloadBytes')\n      }\n    }\n  };\n\n  // enable tlsOpts if ssl key and cert are defined\n  const useSsl = config.get('server.ssl.key') && config.get('server.ssl.cert');\n\n  // not using https? well that's easy!\n  if (!useSsl) {\n    server.connection(connectionOptions);\n    return;\n  }\n\n  server.connection({\n    ...connectionOptions,\n    tls: true,\n    listener: httpolyglot.createServer({\n      key: readFileSync(config.get('server.ssl.key')),\n      cert: readFileSync(config.get('server.ssl.cert')),\n\n      ciphers: tlsCiphers,\n      // We use the server's cipher order rather than the client's to prevent the BEAST attack\n      honorCipherOrder: true\n    })\n  });\n\n  server.ext('onRequest', function (req, reply) {\n    if (req.raw.req.socket.encrypted) {\n      reply.continue();\n    } else {\n      reply.redirect(formatUrl({\n        port,\n        protocol: 'https',\n        hostname: host,\n        pathname: req.url.pathname,\n        search: req.url.search,\n      }));\n    }\n  });\n}\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/http/tls_ciphers.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "// The default ciphers in node 0.12.x include insecure ciphers, so until\n// we enforce a more recent version of node, we craft our own list\n// @see https://github.com/nodejs/node/blob/master/src/node_constants.h#L8-L28\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = ['ECDHE-RSA-AES128-GCM-SHA256', 'ECDHE-ECDSA-AES128-GCM-SHA256', 'ECDHE-RSA-AES256-GCM-SHA384', 'ECDHE-ECDSA-AES256-GCM-SHA384', 'DHE-RSA-AES128-GCM-SHA256', 'ECDHE-RSA-AES128-SHA256', 'DHE-RSA-AES128-SHA256', 'ECDHE-RSA-AES256-SHA384', 'DHE-RSA-AES256-SHA384', 'ECDHE-RSA-AES256-SHA256', 'DHE-RSA-AES256-SHA256', 'HIGH', '!aNULL', '!eNULL', '!EXPORT', '!DES', '!RC4', '!MD5', '!PSK', '!SRP', '!CAMELLIA'].join(':');\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9odHRwL3Rsc19jaXBoZXJzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O3FCQUdlLENBQ2IsNkJBQTZCLEVBQzdCLCtCQUErQixFQUMvQiw2QkFBNkIsRUFDN0IsK0JBQStCLEVBQy9CLDJCQUEyQixFQUMzQix5QkFBeUIsRUFDekIsdUJBQXVCLEVBQ3ZCLHlCQUF5QixFQUN6Qix1QkFBdUIsRUFDdkIseUJBQXlCLEVBQ3pCLHVCQUF1QixFQUN2QixNQUFNLEVBQ04sUUFBUSxFQUNSLFFBQVEsRUFDUixTQUFTLEVBQ1QsTUFBTSxFQUNOLE1BQU0sRUFDTixNQUFNLEVBQ04sTUFBTSxFQUNOLE1BQU0sRUFDTixXQUFXLENBQ1osQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9odHRwL3Rsc19jaXBoZXJzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIGRlZmF1bHQgY2lwaGVycyBpbiBub2RlIDAuMTIueCBpbmNsdWRlIGluc2VjdXJlIGNpcGhlcnMsIHNvIHVudGlsXG4vLyB3ZSBlbmZvcmNlIGEgbW9yZSByZWNlbnQgdmVyc2lvbiBvZiBub2RlLCB3ZSBjcmFmdCBvdXIgb3duIGxpc3Rcbi8vIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL25vZGVqcy9ub2RlL2Jsb2IvbWFzdGVyL3NyYy9ub2RlX2NvbnN0YW50cy5oI0w4LUwyOFxuZXhwb3J0IGRlZmF1bHQgW1xuICAnRUNESEUtUlNBLUFFUzEyOC1HQ00tU0hBMjU2JyxcbiAgJ0VDREhFLUVDRFNBLUFFUzEyOC1HQ00tU0hBMjU2JyxcbiAgJ0VDREhFLVJTQS1BRVMyNTYtR0NNLVNIQTM4NCcsXG4gICdFQ0RIRS1FQ0RTQS1BRVMyNTYtR0NNLVNIQTM4NCcsXG4gICdESEUtUlNBLUFFUzEyOC1HQ00tU0hBMjU2JyxcbiAgJ0VDREhFLVJTQS1BRVMxMjgtU0hBMjU2JyxcbiAgJ0RIRS1SU0EtQUVTMTI4LVNIQTI1NicsXG4gICdFQ0RIRS1SU0EtQUVTMjU2LVNIQTM4NCcsXG4gICdESEUtUlNBLUFFUzI1Ni1TSEEzODQnLFxuICAnRUNESEUtUlNBLUFFUzI1Ni1TSEEyNTYnLFxuICAnREhFLVJTQS1BRVMyNTYtU0hBMjU2JyxcbiAgJ0hJR0gnLFxuICAnIWFOVUxMJyxcbiAgJyFlTlVMTCcsXG4gICchRVhQT1JUJyxcbiAgJyFERVMnLFxuICAnIVJDNCcsXG4gICchTUQ1JyxcbiAgJyFQU0snLFxuICAnIVNSUCcsXG4gICchQ0FNRUxMSUEnXG5dLmpvaW4oJzonKTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/http/tls_ciphers.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;qBAGe,CACb,6BAA6B,EAC7B,+BAA+B,EAC/B,6BAA6B,EAC7B,+BAA+B,EAC/B,2BAA2B,EAC3B,yBAAyB,EACzB,uBAAuB,EACvB,yBAAyB,EACzB,uBAAuB,EACvB,yBAAyB,EACzB,uBAAuB,EACvB,MAAM,EACN,QAAQ,EACR,QAAQ,EACR,SAAS,EACT,MAAM,EACN,MAAM,EACN,MAAM,EACN,MAAM,EACN,MAAM,EACN,WAAW,CACZ,CAAC,IAAI,CAAC,GAAG,CAAC",
      "file": "/home/vio/v3metrics/src/server/http/tls_ciphers.js",
      "sourcesContent": [
        "// The default ciphers in node 0.12.x include insecure ciphers, so until\n// we enforce a more recent version of node, we craft our own list\n// @see https://github.com/nodejs/node/blob/master/src/node_constants.h#L8-L28\nexport default [\n  'ECDHE-RSA-AES128-GCM-SHA256',\n  'ECDHE-ECDSA-AES128-GCM-SHA256',\n  'ECDHE-RSA-AES256-GCM-SHA384',\n  'ECDHE-ECDSA-AES256-GCM-SHA384',\n  'DHE-RSA-AES128-GCM-SHA256',\n  'ECDHE-RSA-AES128-SHA256',\n  'DHE-RSA-AES128-SHA256',\n  'ECDHE-RSA-AES256-SHA384',\n  'DHE-RSA-AES256-SHA384',\n  'ECDHE-RSA-AES256-SHA256',\n  'DHE-RSA-AES256-SHA256',\n  'HIGH',\n  '!aNULL',\n  '!eNULL',\n  '!EXPORT',\n  '!DES',\n  '!RC4',\n  '!MD5',\n  '!PSK',\n  '!SRP',\n  '!CAMELLIA'\n].join(':');\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/http/xsrf.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "boom",
            "imported": [
              "badRequest"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "badRequest",
                "local": "badRequest"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _boom = require('boom');\n\nexports['default'] = function (kbnServer, server, config) {\n  var version = config.get('pkg.version');\n  var disabled = config.get('server.xsrf.disableProtection');\n  var header = 'kbn-version';\n\n  server.ext('onPostAuth', function (req, reply) {\n    var noHeaderGet = req.method === 'get' && !req.headers[header];\n    if (disabled || noHeaderGet) return reply['continue']();\n\n    var submission = req.headers[header];\n    if (!submission) return reply((0, _boom.badRequest)('Missing ' + header + ' header'));\n    if (submission !== version) {\n      return reply((0, _boom.badRequest)('Browser client is out of date, please refresh the page', {\n        expected: version,\n        got: submission\n      }));\n    }\n\n    return reply['continue']();\n  });\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9odHRwL3hzcmYuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O29CQUEyQixNQUFNOztxQkFFbEIsVUFBVSxTQUFTLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRTtBQUNsRCxNQUFNLE9BQU8sR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0FBQzFDLE1BQU0sUUFBUSxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsK0JBQStCLENBQUMsQ0FBQztBQUM3RCxNQUFNLE1BQU0sR0FBRyxhQUFhLENBQUM7O0FBRTdCLFFBQU0sQ0FBQyxHQUFHLENBQUMsWUFBWSxFQUFFLFVBQVUsR0FBRyxFQUFFLEtBQUssRUFBRTtBQUM3QyxRQUFNLFdBQVcsR0FBRyxHQUFHLENBQUMsTUFBTSxLQUFLLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDakUsUUFBSSxRQUFRLElBQUksV0FBVyxFQUFFLE9BQU8sS0FBSyxZQUFTLEVBQUUsQ0FBQzs7QUFFckQsUUFBTSxVQUFVLEdBQUcsR0FBRyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUN2QyxRQUFJLENBQUMsVUFBVSxFQUFFLE9BQU8sS0FBSyxDQUFDLG1DQUFzQixNQUFNLGFBQVUsQ0FBQyxDQUFDO0FBQ3RFLFFBQUksVUFBVSxLQUFLLE9BQU8sRUFBRTtBQUMxQixhQUFPLEtBQUssQ0FBQyxzQkFBVyx3REFBd0QsRUFBRTtBQUNoRixnQkFBUSxFQUFFLE9BQU87QUFDakIsV0FBRyxFQUFFLFVBQVU7T0FDaEIsQ0FBQyxDQUFDLENBQUM7S0FDTDs7QUFFRCxXQUFPLEtBQUssWUFBUyxFQUFFLENBQUM7R0FDekIsQ0FBQyxDQUFDO0NBQ0oiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvc2VydmVyL2h0dHAveHNyZi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGJhZFJlcXVlc3QgfSBmcm9tICdib29tJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKGtiblNlcnZlciwgc2VydmVyLCBjb25maWcpIHtcbiAgY29uc3QgdmVyc2lvbiA9IGNvbmZpZy5nZXQoJ3BrZy52ZXJzaW9uJyk7XG4gIGNvbnN0IGRpc2FibGVkID0gY29uZmlnLmdldCgnc2VydmVyLnhzcmYuZGlzYWJsZVByb3RlY3Rpb24nKTtcbiAgY29uc3QgaGVhZGVyID0gJ2tibi12ZXJzaW9uJztcblxuICBzZXJ2ZXIuZXh0KCdvblBvc3RBdXRoJywgZnVuY3Rpb24gKHJlcSwgcmVwbHkpIHtcbiAgICBjb25zdCBub0hlYWRlckdldCA9IHJlcS5tZXRob2QgPT09ICdnZXQnICYmICFyZXEuaGVhZGVyc1toZWFkZXJdO1xuICAgIGlmIChkaXNhYmxlZCB8fCBub0hlYWRlckdldCkgcmV0dXJuIHJlcGx5LmNvbnRpbnVlKCk7XG5cbiAgICBjb25zdCBzdWJtaXNzaW9uID0gcmVxLmhlYWRlcnNbaGVhZGVyXTtcbiAgICBpZiAoIXN1Ym1pc3Npb24pIHJldHVybiByZXBseShiYWRSZXF1ZXN0KGBNaXNzaW5nICR7aGVhZGVyfSBoZWFkZXJgKSk7XG4gICAgaWYgKHN1Ym1pc3Npb24gIT09IHZlcnNpb24pIHtcbiAgICAgIHJldHVybiByZXBseShiYWRSZXF1ZXN0KCdCcm93c2VyIGNsaWVudCBpcyBvdXQgb2YgZGF0ZSwgcGxlYXNlIHJlZnJlc2ggdGhlIHBhZ2UnLCB7XG4gICAgICAgIGV4cGVjdGVkOiB2ZXJzaW9uLFxuICAgICAgICBnb3Q6IHN1Ym1pc3Npb25cbiAgICAgIH0pKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVwbHkuY29udGludWUoKTtcbiAgfSk7XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/http/xsrf.js"
      ],
      "names": [],
      "mappings": ";;;;;;oBAA2B,MAAM;;qBAElB,UAAU,SAAS,EAAE,MAAM,EAAE,MAAM,EAAE;AAClD,MAAM,OAAO,GAAG,MAAM,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;AAC1C,MAAM,QAAQ,GAAG,MAAM,CAAC,GAAG,CAAC,+BAA+B,CAAC,CAAC;AAC7D,MAAM,MAAM,GAAG,aAAa,CAAC;;AAE7B,QAAM,CAAC,GAAG,CAAC,YAAY,EAAE,UAAU,GAAG,EAAE,KAAK,EAAE;AAC7C,QAAM,WAAW,GAAG,GAAG,CAAC,MAAM,KAAK,KAAK,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;AACjE,QAAI,QAAQ,IAAI,WAAW,EAAE,OAAO,KAAK,YAAS,EAAE,CAAC;;AAErD,QAAM,UAAU,GAAG,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;AACvC,QAAI,CAAC,UAAU,EAAE,OAAO,KAAK,CAAC,mCAAsB,MAAM,aAAU,CAAC,CAAC;AACtE,QAAI,UAAU,KAAK,OAAO,EAAE;AAC1B,aAAO,KAAK,CAAC,sBAAW,wDAAwD,EAAE;AAChF,gBAAQ,EAAE,OAAO;AACjB,WAAG,EAAE,UAAU;OAChB,CAAC,CAAC,CAAC;KACL;;AAED,WAAO,KAAK,YAAS,EAAE,CAAC;GACzB,CAAC,CAAC;CACJ",
      "file": "/home/vio/v3metrics/src/server/http/xsrf.js",
      "sourcesContent": [
        "import { badRequest } from 'boom';\n\nexport default function (kbnServer, server, config) {\n  const version = config.get('pkg.version');\n  const disabled = config.get('server.xsrf.disableProtection');\n  const header = 'kbn-version';\n\n  server.ext('onPostAuth', function (req, reply) {\n    const noHeaderGet = req.method === 'get' && !req.headers[header];\n    if (disabled || noHeaderGet) return reply.continue();\n\n    const submission = req.headers[header];\n    if (!submission) return reply(badRequest(`Missing ${header} header`));\n    if (submission !== version) {\n      return reply(badRequest('Browser client is out of date, please refresh the page', {\n        expected: version,\n        got: submission\n      }));\n    }\n\n    return reply.continue();\n  });\n}\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/status/metrics.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "./samples",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Samples"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _samples = require('./samples');\n\nvar _samples2 = _interopRequireDefault(_samples);\n\nmodule.exports = function (kbnServer, server, config) {\n  var lastReport = Date.now();\n\n  kbnServer.metrics = new _samples2['default'](12);\n\n  server.plugins['even-better'].monitor.on('ops', function (event) {\n    var now = Date.now();\n    var secSinceLast = (now - lastReport) / 1000;\n    lastReport = now;\n\n    var port = config.get('server.port');\n    var requests = _lodash2['default'].get(event, ['requests', port, 'total'], 0);\n    var requestsPerSecond = requests / secSinceLast;\n\n    kbnServer.metrics.add({\n      heapTotal: _lodash2['default'].get(event, 'psmem.heapTotal'),\n      heapUsed: _lodash2['default'].get(event, 'psmem.heapUsed'),\n      load: event.osload,\n      responseTimeAvg: _lodash2['default'].get(event, ['responseTimes', port, 'avg']),\n      responseTimeMax: _lodash2['default'].get(event, ['responseTimes', port, 'max']),\n      requestsPerSecond: requestsPerSecond\n    });\n  });\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9zdGF0dXMvbWV0cmljcy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O3NCQUFjLFFBQVE7Ozs7dUJBQ0YsV0FBVzs7OztBQUMvQixNQUFNLENBQUMsT0FBTyxHQUFHLFVBQVUsU0FBUyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUU7QUFDcEQsTUFBSSxVQUFVLEdBQUcsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDOztBQUU1QixXQUFTLENBQUMsT0FBTyxHQUFHLHlCQUFZLEVBQUUsQ0FBQyxDQUFDOztBQUVwQyxRQUFNLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLFVBQVUsS0FBSyxFQUFFO0FBQy9ELFFBQUksR0FBRyxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztBQUNyQixRQUFJLFlBQVksR0FBRyxDQUFDLEdBQUcsR0FBRyxVQUFVLENBQUEsR0FBSSxJQUFJLENBQUM7QUFDN0MsY0FBVSxHQUFHLEdBQUcsQ0FBQzs7QUFFakIsUUFBSSxJQUFJLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsQ0FBQztBQUNyQyxRQUFJLFFBQVEsR0FBRyxvQkFBRSxHQUFHLENBQUMsS0FBSyxFQUFFLENBQUMsVUFBVSxFQUFFLElBQUksRUFBRSxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUM1RCxRQUFJLGlCQUFpQixHQUFHLFFBQVEsR0FBRyxZQUFZLENBQUM7O0FBRWhELGFBQVMsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDO0FBQ3BCLGVBQVMsRUFBRSxvQkFBRSxHQUFHLENBQUMsS0FBSyxFQUFFLGlCQUFpQixDQUFDO0FBQzFDLGNBQVEsRUFBRSxvQkFBRSxHQUFHLENBQUMsS0FBSyxFQUFFLGdCQUFnQixDQUFDO0FBQ3hDLFVBQUksRUFBRSxLQUFLLENBQUMsTUFBTTtBQUNsQixxQkFBZSxFQUFFLG9CQUFFLEdBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxlQUFlLEVBQUUsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFDO0FBQzdELHFCQUFlLEVBQUUsb0JBQUUsR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDLGVBQWUsRUFBRSxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDN0QsdUJBQWlCLEVBQUUsaUJBQWlCO0tBQ3JDLENBQUMsQ0FBQztHQUVKLENBQUMsQ0FBQztDQUNKLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvc2VydmVyL3N0YXR1cy9tZXRyaWNzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBTYW1wbGVzIGZyb20gJy4vc2FtcGxlcyc7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChrYm5TZXJ2ZXIsIHNlcnZlciwgY29uZmlnKSB7XG4gIGxldCBsYXN0UmVwb3J0ID0gRGF0ZS5ub3coKTtcblxuICBrYm5TZXJ2ZXIubWV0cmljcyA9IG5ldyBTYW1wbGVzKDEyKTtcblxuICBzZXJ2ZXIucGx1Z2luc1snZXZlbi1iZXR0ZXInXS5tb25pdG9yLm9uKCdvcHMnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBsZXQgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBsZXQgc2VjU2luY2VMYXN0ID0gKG5vdyAtIGxhc3RSZXBvcnQpIC8gMTAwMDtcbiAgICBsYXN0UmVwb3J0ID0gbm93O1xuXG4gICAgbGV0IHBvcnQgPSBjb25maWcuZ2V0KCdzZXJ2ZXIucG9ydCcpO1xuICAgIGxldCByZXF1ZXN0cyA9IF8uZ2V0KGV2ZW50LCBbJ3JlcXVlc3RzJywgcG9ydCwgJ3RvdGFsJ10sIDApO1xuICAgIGxldCByZXF1ZXN0c1BlclNlY29uZCA9IHJlcXVlc3RzIC8gc2VjU2luY2VMYXN0O1xuXG4gICAga2JuU2VydmVyLm1ldHJpY3MuYWRkKHtcbiAgICAgIGhlYXBUb3RhbDogXy5nZXQoZXZlbnQsICdwc21lbS5oZWFwVG90YWwnKSxcbiAgICAgIGhlYXBVc2VkOiBfLmdldChldmVudCwgJ3BzbWVtLmhlYXBVc2VkJyksXG4gICAgICBsb2FkOiBldmVudC5vc2xvYWQsXG4gICAgICByZXNwb25zZVRpbWVBdmc6IF8uZ2V0KGV2ZW50LCBbJ3Jlc3BvbnNlVGltZXMnLCBwb3J0LCAnYXZnJ10pLFxuICAgICAgcmVzcG9uc2VUaW1lTWF4OiBfLmdldChldmVudCwgWydyZXNwb25zZVRpbWVzJywgcG9ydCwgJ21heCddKSxcbiAgICAgIHJlcXVlc3RzUGVyU2Vjb25kOiByZXF1ZXN0c1BlclNlY29uZFxuICAgIH0pO1xuXG4gIH0pO1xufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/status/metrics.js"
      ],
      "names": [],
      "mappings": ";;;;sBAAc,QAAQ;;;;uBACF,WAAW;;;;AAC/B,MAAM,CAAC,OAAO,GAAG,UAAU,SAAS,EAAE,MAAM,EAAE,MAAM,EAAE;AACpD,MAAI,UAAU,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;;AAE5B,WAAS,CAAC,OAAO,GAAG,yBAAY,EAAE,CAAC,CAAC;;AAEpC,QAAM,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,OAAO,CAAC,EAAE,CAAC,KAAK,EAAE,UAAU,KAAK,EAAE;AAC/D,QAAI,GAAG,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;AACrB,QAAI,YAAY,GAAG,CAAC,GAAG,GAAG,UAAU,CAAA,GAAI,IAAI,CAAC;AAC7C,cAAU,GAAG,GAAG,CAAC;;AAEjB,QAAI,IAAI,GAAG,MAAM,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;AACrC,QAAI,QAAQ,GAAG,oBAAE,GAAG,CAAC,KAAK,EAAE,CAAC,UAAU,EAAE,IAAI,EAAE,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC;AAC5D,QAAI,iBAAiB,GAAG,QAAQ,GAAG,YAAY,CAAC;;AAEhD,aAAS,CAAC,OAAO,CAAC,GAAG,CAAC;AACpB,eAAS,EAAE,oBAAE,GAAG,CAAC,KAAK,EAAE,iBAAiB,CAAC;AAC1C,cAAQ,EAAE,oBAAE,GAAG,CAAC,KAAK,EAAE,gBAAgB,CAAC;AACxC,UAAI,EAAE,KAAK,CAAC,MAAM;AAClB,qBAAe,EAAE,oBAAE,GAAG,CAAC,KAAK,EAAE,CAAC,eAAe,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;AAC7D,qBAAe,EAAE,oBAAE,GAAG,CAAC,KAAK,EAAE,CAAC,eAAe,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;AAC7D,uBAAiB,EAAE,iBAAiB;KACrC,CAAC,CAAC;GAEJ,CAAC,CAAC;CACJ,CAAC",
      "file": "/home/vio/v3metrics/src/server/status/metrics.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport Samples from './samples';\nmodule.exports = function (kbnServer, server, config) {\n  let lastReport = Date.now();\n\n  kbnServer.metrics = new Samples(12);\n\n  server.plugins['even-better'].monitor.on('ops', function (event) {\n    let now = Date.now();\n    let secSinceLast = (now - lastReport) / 1000;\n    lastReport = now;\n\n    let port = config.get('server.port');\n    let requests = _.get(event, ['requests', port, 'total'], 0);\n    let requestsPerSecond = requests / secSinceLast;\n\n    kbnServer.metrics.add({\n      heapTotal: _.get(event, 'psmem.heapTotal'),\n      heapUsed: _.get(event, 'psmem.heapUsed'),\n      load: event.osload,\n      responseTimeAvg: _.get(event, ['responseTimes', port, 'avg']),\n      responseTimeMax: _.get(event, ['responseTimes', port, 'max']),\n      requestsPerSecond: requestsPerSecond\n    });\n\n  });\n};\n"
      ]
    },
    "mtime": 1467036622849
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/status/samples.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nfunction Samples(max) {\n  this.vals = {};\n  this.max = max || Infinity;\n  this.length = 0;\n}\n\nSamples.prototype.add = function (sample) {\n  var vals = this.vals;\n  var length = this.length = Math.min(this.length + 1, this.max);\n\n  _lodash2['default'].forOwn(sample, function (val, name) {\n    if (val == null) val = null;\n\n    if (!vals[name]) vals[name] = new Array(length);\n    vals[name].unshift([Date.now(), val]);\n    vals[name].length = length;\n  });\n};\n\nSamples.prototype.toJSON = function () {\n  return this.vals;\n};\n\nmodule.exports = Samples;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9zdGF0dXMvc2FtcGxlcy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O3NCQUFjLFFBQVE7Ozs7QUFFdEIsU0FBUyxPQUFPLENBQUMsR0FBRyxFQUFFO0FBQ3BCLE1BQUksQ0FBQyxJQUFJLEdBQUcsRUFBRSxDQUFDO0FBQ2YsTUFBSSxDQUFDLEdBQUcsR0FBRyxHQUFHLElBQUksUUFBUSxDQUFDO0FBQzNCLE1BQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO0NBQ2pCOztBQUVELE9BQU8sQ0FBQyxTQUFTLENBQUMsR0FBRyxHQUFHLFVBQVUsTUFBTSxFQUFFO0FBQ3hDLE1BQUksSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUM7QUFDckIsTUFBSSxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQzs7QUFFL0Qsc0JBQUUsTUFBTSxDQUFDLE1BQU0sRUFBRSxVQUFVLEdBQUcsRUFBRSxJQUFJLEVBQUU7QUFDcEMsUUFBSSxHQUFHLElBQUksSUFBSSxFQUFFLEdBQUcsR0FBRyxJQUFJLENBQUM7O0FBRTVCLFFBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ2hELFFBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQztBQUN0QyxRQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztHQUM1QixDQUFDLENBQUM7Q0FDSixDQUFDOztBQUVGLE9BQU8sQ0FBQyxTQUFTLENBQUMsTUFBTSxHQUFHLFlBQVk7QUFDckMsU0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDO0NBQ2xCLENBQUM7O0FBRUYsTUFBTSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvc2VydmVyL3N0YXR1cy9zYW1wbGVzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcblxuZnVuY3Rpb24gU2FtcGxlcyhtYXgpIHtcbiAgdGhpcy52YWxzID0ge307XG4gIHRoaXMubWF4ID0gbWF4IHx8IEluZmluaXR5O1xuICB0aGlzLmxlbmd0aCA9IDA7XG59XG5cblNhbXBsZXMucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIChzYW1wbGUpIHtcbiAgbGV0IHZhbHMgPSB0aGlzLnZhbHM7XG4gIGxldCBsZW5ndGggPSB0aGlzLmxlbmd0aCA9IE1hdGgubWluKHRoaXMubGVuZ3RoICsgMSwgdGhpcy5tYXgpO1xuXG4gIF8uZm9yT3duKHNhbXBsZSwgZnVuY3Rpb24gKHZhbCwgbmFtZSkge1xuICAgIGlmICh2YWwgPT0gbnVsbCkgdmFsID0gbnVsbDtcblxuICAgIGlmICghdmFsc1tuYW1lXSkgdmFsc1tuYW1lXSA9IG5ldyBBcnJheShsZW5ndGgpO1xuICAgIHZhbHNbbmFtZV0udW5zaGlmdChbRGF0ZS5ub3coKSwgdmFsXSk7XG4gICAgdmFsc1tuYW1lXS5sZW5ndGggPSBsZW5ndGg7XG4gIH0pO1xufTtcblxuU2FtcGxlcy5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy52YWxzO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBTYW1wbGVzO1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/status/samples.js"
      ],
      "names": [],
      "mappings": ";;;;sBAAc,QAAQ;;;;AAEtB,SAAS,OAAO,CAAC,GAAG,EAAE;AACpB,MAAI,CAAC,IAAI,GAAG,EAAE,CAAC;AACf,MAAI,CAAC,GAAG,GAAG,GAAG,IAAI,QAAQ,CAAC;AAC3B,MAAI,CAAC,MAAM,GAAG,CAAC,CAAC;CACjB;;AAED,OAAO,CAAC,SAAS,CAAC,GAAG,GAAG,UAAU,MAAM,EAAE;AACxC,MAAI,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;AACrB,MAAI,MAAM,GAAG,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;;AAE/D,sBAAE,MAAM,CAAC,MAAM,EAAE,UAAU,GAAG,EAAE,IAAI,EAAE;AACpC,QAAI,GAAG,IAAI,IAAI,EAAE,GAAG,GAAG,IAAI,CAAC;;AAE5B,QAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,GAAG,IAAI,KAAK,CAAC,MAAM,CAAC,CAAC;AAChD,QAAI,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,EAAE,GAAG,CAAC,CAAC,CAAC;AACtC,QAAI,CAAC,IAAI,CAAC,CAAC,MAAM,GAAG,MAAM,CAAC;GAC5B,CAAC,CAAC;CACJ,CAAC;;AAEF,OAAO,CAAC,SAAS,CAAC,MAAM,GAAG,YAAY;AACrC,SAAO,IAAI,CAAC,IAAI,CAAC;CAClB,CAAC;;AAEF,MAAM,CAAC,OAAO,GAAG,OAAO,CAAC",
      "file": "/home/vio/v3metrics/src/server/status/samples.js",
      "sourcesContent": [
        "import _ from 'lodash';\n\nfunction Samples(max) {\n  this.vals = {};\n  this.max = max || Infinity;\n  this.length = 0;\n}\n\nSamples.prototype.add = function (sample) {\n  let vals = this.vals;\n  let length = this.length = Math.min(this.length + 1, this.max);\n\n  _.forOwn(sample, function (val, name) {\n    if (val == null) val = null;\n\n    if (!vals[name]) vals[name] = new Array(length);\n    vals[name].unshift([Date.now(), val]);\n    vals[name].length = length;\n  });\n};\n\nSamples.prototype.toJSON = function () {\n  return this.vals;\n};\n\nmodule.exports = Samples;\n"
      ]
    },
    "mtime": 1467036622849
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar path = require('path');\n\nmodule.exports = function (kibana) {\n  var mainFile = 'plugins/timelion/app';\n\n  var ownDescriptor = Object.getOwnPropertyDescriptor(kibana, 'autoload');\n  var protoDescriptor = Object.getOwnPropertyDescriptor(kibana.constructor.prototype, 'autoload');\n  var descriptor = ownDescriptor || protoDescriptor || {};\n  if (descriptor.get) {\n    // the autoload list has been replaced with a getter that complains about\n    // improper access, bypass that getter by seeing if it is defined\n    mainFile = 'plugins/timelion/app_with_autoload';\n  }\n\n  return new kibana.Plugin({\n    require: ['kibana', 'elasticsearch'],\n    uiExports: {\n      app: {\n        title: 'Timelion',\n        description: 'Time series expressions for everything',\n        icon: 'plugins/timelion/icon.svg',\n        main: mainFile,\n        injectVars: function injectVars(server, options) {\n          var config = server.config();\n          return {\n            kbnIndex: config.get('kibana.index'),\n            esShardTimeout: config.get('elasticsearch.shardTimeout'),\n            esApiVersion: config.get('elasticsearch.apiVersion')\n          };\n        }\n      },\n      visTypes: ['plugins/timelion/vis'],\n      modules: {\n        flot$: {\n          path: path.resolve(__dirname, 'bower_components/flot/jquery.flot'),\n          imports: 'jquery'\n        },\n        flotTime$: {\n          path: path.resolve(__dirname, 'bower_components/flot/jquery.flot.time'),\n          imports: 'flot'\n        },\n        flotCanvas$: {\n          path: path.resolve(__dirname, 'bower_components/flot/jquery.flot.canvas'),\n          imports: 'flot'\n        },\n        flotSymbol$: {\n          path: path.resolve(__dirname, 'bower_components/flot/jquery.flot.symbol'),\n          imports: 'flot'\n        },\n        angularSortableView$: {\n          path: path.resolve(__dirname, 'bower_components/angular-sortable-view/src/angular-sortable-view.js')\n        },\n        flotCrosshair$: {\n          path: path.resolve(__dirname, 'bower_components/flot/jquery.flot.crosshair'),\n          imports: 'flot'\n        },\n        flotSelection$: {\n          path: path.resolve(__dirname, 'bower_components/flot/jquery.flot.selection'),\n          imports: 'flot'\n        },\n        flotStack$: {\n          path: path.resolve(__dirname, 'bower_components/flot/jquery.flot.stack'),\n          imports: 'flot'\n        },\n        flotAxisLabels$: {\n          path: path.resolve(__dirname, 'vendor_components/flot/jquery.flot.axislabels'),\n          imports: 'flot'\n        }\n      }\n    },\n    init: require('./init.js')\n  });\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUNBLElBQUksSUFBSSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQzs7QUFFM0IsTUFBTSxDQUFDLE9BQU8sR0FBRyxVQUFVLE1BQU0sRUFBRTtBQUNqQyxNQUFJLFFBQVEsR0FBRyxzQkFBc0IsQ0FBQzs7QUFFdEMsTUFBSSxhQUFhLEdBQUcsTUFBTSxDQUFDLHdCQUF3QixDQUFDLE1BQU0sRUFBRSxVQUFVLENBQUMsQ0FBQztBQUN4RSxNQUFJLGVBQWUsR0FBRyxNQUFNLENBQUMsd0JBQXdCLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxTQUFTLEVBQUUsVUFBVSxDQUFDLENBQUM7QUFDaEcsTUFBSSxVQUFVLEdBQUcsYUFBYSxJQUFJLGVBQWUsSUFBSSxFQUFFLENBQUM7QUFDeEQsTUFBSSxVQUFVLENBQUMsR0FBRyxFQUFFOzs7QUFHbEIsWUFBUSxHQUFHLG9DQUFvQyxDQUFDO0dBQ2pEOztBQUVELFNBQU8sSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDO0FBQ3ZCLFdBQU8sRUFBRSxDQUFDLFFBQVEsRUFBRSxlQUFlLENBQUM7QUFDcEMsYUFBUyxFQUFFO0FBQ1QsU0FBRyxFQUFFO0FBQ0gsYUFBSyxFQUFFLFVBQVU7QUFDakIsbUJBQVcsRUFBRSx3Q0FBd0M7QUFDckQsWUFBSSxFQUFFLDJCQUEyQjtBQUNqQyxZQUFJLEVBQUUsUUFBUTtBQUNkLGtCQUFVLEVBQUUsb0JBQVUsTUFBTSxFQUFFLE9BQU8sRUFBRTtBQUNyQyxjQUFJLE1BQU0sR0FBRyxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUM7QUFDN0IsaUJBQU87QUFDTCxvQkFBUSxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsY0FBYyxDQUFDO0FBQ3BDLDBCQUFjLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyw0QkFBNEIsQ0FBQztBQUN4RCx3QkFBWSxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsMEJBQTBCLENBQUM7V0FDckQsQ0FBQztTQUNIO09BQ0Y7QUFDRCxjQUFRLEVBQUUsQ0FDUixzQkFBc0IsQ0FDdkI7QUFDRCxhQUFPLEVBQUU7QUFDUCxhQUFLLEVBQUU7QUFDTCxjQUFJLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUUsbUNBQW1DLENBQUM7QUFDbEUsaUJBQU8sRUFBRSxRQUFRO1NBQ2xCO0FBQ0QsaUJBQVMsRUFBRTtBQUNULGNBQUksRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSx3Q0FBd0MsQ0FBQztBQUN2RSxpQkFBTyxFQUFFLE1BQU07U0FDaEI7QUFDRCxtQkFBVyxFQUFFO0FBQ1gsY0FBSSxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxFQUFFLDBDQUEwQyxDQUFDO0FBQ3pFLGlCQUFPLEVBQUUsTUFBTTtTQUNoQjtBQUNELG1CQUFXLEVBQUU7QUFDWCxjQUFJLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUUsMENBQTBDLENBQUM7QUFDekUsaUJBQU8sRUFBRSxNQUFNO1NBQ2hCO0FBQ0QsNEJBQW9CLEVBQUU7QUFDcEIsY0FBSSxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxFQUFFLHFFQUFxRSxDQUFDO1NBQ3JHO0FBQ0Qsc0JBQWMsRUFBRTtBQUNkLGNBQUksRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSw2Q0FBNkMsQ0FBQztBQUM1RSxpQkFBTyxFQUFFLE1BQU07U0FDaEI7QUFDRCxzQkFBYyxFQUFFO0FBQ2QsY0FBSSxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxFQUFFLDZDQUE2QyxDQUFDO0FBQzVFLGlCQUFPLEVBQUUsTUFBTTtTQUNoQjtBQUNELGtCQUFVLEVBQUU7QUFDVixjQUFJLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUUseUNBQXlDLENBQUM7QUFDeEUsaUJBQU8sRUFBRSxNQUFNO1NBQ2hCO0FBQ0QsdUJBQWUsRUFBRTtBQUNmLGNBQUksRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSwrQ0FBK0MsQ0FBQztBQUM5RSxpQkFBTyxFQUFFLE1BQU07U0FDaEI7T0FDRjtLQUNGO0FBQ0QsUUFBSSxFQUFFLE9BQU8sQ0FBQyxXQUFXLENBQUM7R0FDM0IsQ0FBQyxDQUFDO0NBQ0osQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL2luc3RhbGxlZFBsdWdpbnMvdGltZWxpb24vaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbnZhciBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChraWJhbmEpIHtcbiAgdmFyIG1haW5GaWxlID0gJ3BsdWdpbnMvdGltZWxpb24vYXBwJztcblxuICB2YXIgb3duRGVzY3JpcHRvciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioa2liYW5hLCAnYXV0b2xvYWQnKTtcbiAgdmFyIHByb3RvRGVzY3JpcHRvciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioa2liYW5hLmNvbnN0cnVjdG9yLnByb3RvdHlwZSwgJ2F1dG9sb2FkJyk7XG4gIHZhciBkZXNjcmlwdG9yID0gb3duRGVzY3JpcHRvciB8fCBwcm90b0Rlc2NyaXB0b3IgfHwge307XG4gIGlmIChkZXNjcmlwdG9yLmdldCkge1xuICAgIC8vIHRoZSBhdXRvbG9hZCBsaXN0IGhhcyBiZWVuIHJlcGxhY2VkIHdpdGggYSBnZXR0ZXIgdGhhdCBjb21wbGFpbnMgYWJvdXRcbiAgICAvLyBpbXByb3BlciBhY2Nlc3MsIGJ5cGFzcyB0aGF0IGdldHRlciBieSBzZWVpbmcgaWYgaXQgaXMgZGVmaW5lZFxuICAgIG1haW5GaWxlID0gJ3BsdWdpbnMvdGltZWxpb24vYXBwX3dpdGhfYXV0b2xvYWQnO1xuICB9XG5cbiAgcmV0dXJuIG5ldyBraWJhbmEuUGx1Z2luKHtcbiAgICByZXF1aXJlOiBbJ2tpYmFuYScsICdlbGFzdGljc2VhcmNoJ10sXG4gICAgdWlFeHBvcnRzOiB7XG4gICAgICBhcHA6IHtcbiAgICAgICAgdGl0bGU6ICdUaW1lbGlvbicsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnVGltZSBzZXJpZXMgZXhwcmVzc2lvbnMgZm9yIGV2ZXJ5dGhpbmcnLFxuICAgICAgICBpY29uOiAncGx1Z2lucy90aW1lbGlvbi9pY29uLnN2ZycsXG4gICAgICAgIG1haW46IG1haW5GaWxlLFxuICAgICAgICBpbmplY3RWYXJzOiBmdW5jdGlvbiAoc2VydmVyLCBvcHRpb25zKSB7XG4gICAgICAgICAgdmFyIGNvbmZpZyA9IHNlcnZlci5jb25maWcoKTtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAga2JuSW5kZXg6IGNvbmZpZy5nZXQoJ2tpYmFuYS5pbmRleCcpLFxuICAgICAgICAgICAgZXNTaGFyZFRpbWVvdXQ6IGNvbmZpZy5nZXQoJ2VsYXN0aWNzZWFyY2guc2hhcmRUaW1lb3V0JyksXG4gICAgICAgICAgICBlc0FwaVZlcnNpb246IGNvbmZpZy5nZXQoJ2VsYXN0aWNzZWFyY2guYXBpVmVyc2lvbicpXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHZpc1R5cGVzOiBbXG4gICAgICAgICdwbHVnaW5zL3RpbWVsaW9uL3ZpcydcbiAgICAgIF0sXG4gICAgICBtb2R1bGVzOiB7XG4gICAgICAgIGZsb3QkOiB7XG4gICAgICAgICAgcGF0aDogcGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgJ2Jvd2VyX2NvbXBvbmVudHMvZmxvdC9qcXVlcnkuZmxvdCcpLFxuICAgICAgICAgIGltcG9ydHM6ICdqcXVlcnknXG4gICAgICAgIH0sXG4gICAgICAgIGZsb3RUaW1lJDoge1xuICAgICAgICAgIHBhdGg6IHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsICdib3dlcl9jb21wb25lbnRzL2Zsb3QvanF1ZXJ5LmZsb3QudGltZScpLFxuICAgICAgICAgIGltcG9ydHM6ICdmbG90J1xuICAgICAgICB9LFxuICAgICAgICBmbG90Q2FudmFzJDoge1xuICAgICAgICAgIHBhdGg6IHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsICdib3dlcl9jb21wb25lbnRzL2Zsb3QvanF1ZXJ5LmZsb3QuY2FudmFzJyksXG4gICAgICAgICAgaW1wb3J0czogJ2Zsb3QnXG4gICAgICAgIH0sXG4gICAgICAgIGZsb3RTeW1ib2wkOiB7XG4gICAgICAgICAgcGF0aDogcGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgJ2Jvd2VyX2NvbXBvbmVudHMvZmxvdC9qcXVlcnkuZmxvdC5zeW1ib2wnKSxcbiAgICAgICAgICBpbXBvcnRzOiAnZmxvdCdcbiAgICAgICAgfSxcbiAgICAgICAgYW5ndWxhclNvcnRhYmxlVmlldyQ6IHtcbiAgICAgICAgICBwYXRoOiBwYXRoLnJlc29sdmUoX19kaXJuYW1lLCAnYm93ZXJfY29tcG9uZW50cy9hbmd1bGFyLXNvcnRhYmxlLXZpZXcvc3JjL2FuZ3VsYXItc29ydGFibGUtdmlldy5qcycpXG4gICAgICAgIH0sXG4gICAgICAgIGZsb3RDcm9zc2hhaXIkOiB7XG4gICAgICAgICAgcGF0aDogcGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgJ2Jvd2VyX2NvbXBvbmVudHMvZmxvdC9qcXVlcnkuZmxvdC5jcm9zc2hhaXInKSxcbiAgICAgICAgICBpbXBvcnRzOiAnZmxvdCdcbiAgICAgICAgfSxcbiAgICAgICAgZmxvdFNlbGVjdGlvbiQ6IHtcbiAgICAgICAgICBwYXRoOiBwYXRoLnJlc29sdmUoX19kaXJuYW1lLCAnYm93ZXJfY29tcG9uZW50cy9mbG90L2pxdWVyeS5mbG90LnNlbGVjdGlvbicpLFxuICAgICAgICAgIGltcG9ydHM6ICdmbG90J1xuICAgICAgICB9LFxuICAgICAgICBmbG90U3RhY2skOiB7XG4gICAgICAgICAgcGF0aDogcGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgJ2Jvd2VyX2NvbXBvbmVudHMvZmxvdC9qcXVlcnkuZmxvdC5zdGFjaycpLFxuICAgICAgICAgIGltcG9ydHM6ICdmbG90J1xuICAgICAgICB9LFxuICAgICAgICBmbG90QXhpc0xhYmVscyQ6IHtcbiAgICAgICAgICBwYXRoOiBwYXRoLnJlc29sdmUoX19kaXJuYW1lLCAndmVuZG9yX2NvbXBvbmVudHMvZmxvdC9qcXVlcnkuZmxvdC5heGlzbGFiZWxzJyksXG4gICAgICAgICAgaW1wb3J0czogJ2Zsb3QnXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIGluaXQ6IHJlcXVpcmUoJy4vaW5pdC5qcycpLFxuICB9KTtcbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/index.js"
      ],
      "names": [],
      "mappings": ";;AACA,IAAI,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;;AAE3B,MAAM,CAAC,OAAO,GAAG,UAAU,MAAM,EAAE;AACjC,MAAI,QAAQ,GAAG,sBAAsB,CAAC;;AAEtC,MAAI,aAAa,GAAG,MAAM,CAAC,wBAAwB,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC;AACxE,MAAI,eAAe,GAAG,MAAM,CAAC,wBAAwB,CAAC,MAAM,CAAC,WAAW,CAAC,SAAS,EAAE,UAAU,CAAC,CAAC;AAChG,MAAI,UAAU,GAAG,aAAa,IAAI,eAAe,IAAI,EAAE,CAAC;AACxD,MAAI,UAAU,CAAC,GAAG,EAAE;;;AAGlB,YAAQ,GAAG,oCAAoC,CAAC;GACjD;;AAED,SAAO,IAAI,MAAM,CAAC,MAAM,CAAC;AACvB,WAAO,EAAE,CAAC,QAAQ,EAAE,eAAe,CAAC;AACpC,aAAS,EAAE;AACT,SAAG,EAAE;AACH,aAAK,EAAE,UAAU;AACjB,mBAAW,EAAE,wCAAwC;AACrD,YAAI,EAAE,2BAA2B;AACjC,YAAI,EAAE,QAAQ;AACd,kBAAU,EAAE,oBAAU,MAAM,EAAE,OAAO,EAAE;AACrC,cAAI,MAAM,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC;AAC7B,iBAAO;AACL,oBAAQ,EAAE,MAAM,CAAC,GAAG,CAAC,cAAc,CAAC;AACpC,0BAAc,EAAE,MAAM,CAAC,GAAG,CAAC,4BAA4B,CAAC;AACxD,wBAAY,EAAE,MAAM,CAAC,GAAG,CAAC,0BAA0B,CAAC;WACrD,CAAC;SACH;OACF;AACD,cAAQ,EAAE,CACR,sBAAsB,CACvB;AACD,aAAO,EAAE;AACP,aAAK,EAAE;AACL,cAAI,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,mCAAmC,CAAC;AAClE,iBAAO,EAAE,QAAQ;SAClB;AACD,iBAAS,EAAE;AACT,cAAI,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,wCAAwC,CAAC;AACvE,iBAAO,EAAE,MAAM;SAChB;AACD,mBAAW,EAAE;AACX,cAAI,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,0CAA0C,CAAC;AACzE,iBAAO,EAAE,MAAM;SAChB;AACD,mBAAW,EAAE;AACX,cAAI,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,0CAA0C,CAAC;AACzE,iBAAO,EAAE,MAAM;SAChB;AACD,4BAAoB,EAAE;AACpB,cAAI,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,qEAAqE,CAAC;SACrG;AACD,sBAAc,EAAE;AACd,cAAI,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,6CAA6C,CAAC;AAC5E,iBAAO,EAAE,MAAM;SAChB;AACD,sBAAc,EAAE;AACd,cAAI,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,6CAA6C,CAAC;AAC5E,iBAAO,EAAE,MAAM;SAChB;AACD,kBAAU,EAAE;AACV,cAAI,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,yCAAyC,CAAC;AACxE,iBAAO,EAAE,MAAM;SAChB;AACD,uBAAe,EAAE;AACf,cAAI,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,+CAA+C,CAAC;AAC9E,iBAAO,EAAE,MAAM;SAChB;OACF;KACF;AACD,QAAI,EAAE,OAAO,CAAC,WAAW,CAAC;GAC3B,CAAC,CAAC;CACJ,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/index.js",
      "sourcesContent": [
        "\nvar path = require('path');\n\nmodule.exports = function (kibana) {\n  var mainFile = 'plugins/timelion/app';\n\n  var ownDescriptor = Object.getOwnPropertyDescriptor(kibana, 'autoload');\n  var protoDescriptor = Object.getOwnPropertyDescriptor(kibana.constructor.prototype, 'autoload');\n  var descriptor = ownDescriptor || protoDescriptor || {};\n  if (descriptor.get) {\n    // the autoload list has been replaced with a getter that complains about\n    // improper access, bypass that getter by seeing if it is defined\n    mainFile = 'plugins/timelion/app_with_autoload';\n  }\n\n  return new kibana.Plugin({\n    require: ['kibana', 'elasticsearch'],\n    uiExports: {\n      app: {\n        title: 'Timelion',\n        description: 'Time series expressions for everything',\n        icon: 'plugins/timelion/icon.svg',\n        main: mainFile,\n        injectVars: function (server, options) {\n          var config = server.config();\n          return {\n            kbnIndex: config.get('kibana.index'),\n            esShardTimeout: config.get('elasticsearch.shardTimeout'),\n            esApiVersion: config.get('elasticsearch.apiVersion')\n          };\n        }\n      },\n      visTypes: [\n        'plugins/timelion/vis'\n      ],\n      modules: {\n        flot$: {\n          path: path.resolve(__dirname, 'bower_components/flot/jquery.flot'),\n          imports: 'jquery'\n        },\n        flotTime$: {\n          path: path.resolve(__dirname, 'bower_components/flot/jquery.flot.time'),\n          imports: 'flot'\n        },\n        flotCanvas$: {\n          path: path.resolve(__dirname, 'bower_components/flot/jquery.flot.canvas'),\n          imports: 'flot'\n        },\n        flotSymbol$: {\n          path: path.resolve(__dirname, 'bower_components/flot/jquery.flot.symbol'),\n          imports: 'flot'\n        },\n        angularSortableView$: {\n          path: path.resolve(__dirname, 'bower_components/angular-sortable-view/src/angular-sortable-view.js')\n        },\n        flotCrosshair$: {\n          path: path.resolve(__dirname, 'bower_components/flot/jquery.flot.crosshair'),\n          imports: 'flot'\n        },\n        flotSelection$: {\n          path: path.resolve(__dirname, 'bower_components/flot/jquery.flot.selection'),\n          imports: 'flot'\n        },\n        flotStack$: {\n          path: path.resolve(__dirname, 'bower_components/flot/jquery.flot.stack'),\n          imports: 'flot'\n        },\n        flotAxisLabels$: {\n          path: path.resolve(__dirname, 'vendor_components/flot/jquery.flot.axislabels'),\n          imports: 'flot'\n        }\n      }\n    },\n    init: require('./init.js'),\n  });\n};\n"
      ]
    },
    "mtime": 1467119944191
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/init.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nmodule.exports = function (server) {\n  //var config = server.config();\n\n  require('./server/routes/run.js')(server);\n  require('./server/routes/functions.js')(server);\n  require('./server/routes/validate_es.js')(server);\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9pbml0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTSxDQUFDLE9BQU8sR0FBRyxVQUFVLE1BQU0sRUFBRTs7O0FBR2pDLFNBQU8sQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQzFDLFNBQU8sQ0FBQyw4QkFBOEIsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ2hELFNBQU8sQ0FBQyxnQ0FBZ0MsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0NBRW5ELENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9pbnN0YWxsZWRQbHVnaW5zL3RpbWVsaW9uL2luaXQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChzZXJ2ZXIpIHtcbiAgLy92YXIgY29uZmlnID0gc2VydmVyLmNvbmZpZygpO1xuXG4gIHJlcXVpcmUoJy4vc2VydmVyL3JvdXRlcy9ydW4uanMnKShzZXJ2ZXIpO1xuICByZXF1aXJlKCcuL3NlcnZlci9yb3V0ZXMvZnVuY3Rpb25zLmpzJykoc2VydmVyKTtcbiAgcmVxdWlyZSgnLi9zZXJ2ZXIvcm91dGVzL3ZhbGlkYXRlX2VzLmpzJykoc2VydmVyKTtcblxufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/init.js"
      ],
      "names": [],
      "mappings": ";;AAAA,MAAM,CAAC,OAAO,GAAG,UAAU,MAAM,EAAE;;;AAGjC,SAAO,CAAC,wBAAwB,CAAC,CAAC,MAAM,CAAC,CAAC;AAC1C,SAAO,CAAC,8BAA8B,CAAC,CAAC,MAAM,CAAC,CAAC;AAChD,SAAO,CAAC,gCAAgC,CAAC,CAAC,MAAM,CAAC,CAAC;CAEnD,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/init.js",
      "sourcesContent": [
        "module.exports = function (server) {\n  //var config = server.config();\n\n  require('./server/routes/run.js')(server);\n  require('./server/routes/functions.js')(server);\n  require('./server/routes/validate_es.js')(server);\n\n};\n"
      ]
    },
    "mtime": 1467119944191
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/tr-k4p-clock/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nmodule.exports = function (kibana) {\n\t// Return a new instance of kibana.Plugin that holds\n\t// information about this plugin.\n\treturn new kibana.Plugin({\n\t\t// We have some ui components, that we need to describe\n\t\tuiExports: {\n\t\t\t// Register our visualizations (a plugin can have multiple visualizations)\n\t\t\tvisTypes: ['plugins/tr-k4p-clock/clock']\n\t\t}\n\t});\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90ci1rNHAtY2xvY2svaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNLENBQUMsT0FBTyxHQUFHLFVBQVMsTUFBTSxFQUFFOzs7QUFHakMsUUFBTyxJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUM7O0FBRXhCLFdBQVMsRUFBRTs7QUFFVixXQUFRLEVBQUUsQ0FDVCw0QkFBNEIsQ0FDNUI7R0FDRDtFQUNELENBQUMsQ0FBQztDQUNILENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9pbnN0YWxsZWRQbHVnaW5zL3RyLWs0cC1jbG9jay9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oa2liYW5hKSB7XG5cdC8vIFJldHVybiBhIG5ldyBpbnN0YW5jZSBvZiBraWJhbmEuUGx1Z2luIHRoYXQgaG9sZHNcblx0Ly8gaW5mb3JtYXRpb24gYWJvdXQgdGhpcyBwbHVnaW4uXG5cdHJldHVybiBuZXcga2liYW5hLlBsdWdpbih7XG5cdFx0Ly8gV2UgaGF2ZSBzb21lIHVpIGNvbXBvbmVudHMsIHRoYXQgd2UgbmVlZCB0byBkZXNjcmliZVxuXHRcdHVpRXhwb3J0czoge1xuXHRcdFx0Ly8gUmVnaXN0ZXIgb3VyIHZpc3VhbGl6YXRpb25zIChhIHBsdWdpbiBjYW4gaGF2ZSBtdWx0aXBsZSB2aXN1YWxpemF0aW9ucylcblx0XHRcdHZpc1R5cGVzOiBbXG5cdFx0XHRcdCdwbHVnaW5zL3RyLWs0cC1jbG9jay9jbG9jaydcblx0XHRcdF1cblx0XHR9XG5cdH0pO1xufTsiXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/tr-k4p-clock/index.js"
      ],
      "names": [],
      "mappings": ";;AAAA,MAAM,CAAC,OAAO,GAAG,UAAS,MAAM,EAAE;;;AAGjC,QAAO,IAAI,MAAM,CAAC,MAAM,CAAC;;AAExB,WAAS,EAAE;;AAEV,WAAQ,EAAE,CACT,4BAA4B,CAC5B;GACD;EACD,CAAC,CAAC;CACH,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/tr-k4p-clock/index.js",
      "sourcesContent": [
        "module.exports = function(kibana) {\n\t// Return a new instance of kibana.Plugin that holds\n\t// information about this plugin.\n\treturn new kibana.Plugin({\n\t\t// We have some ui components, that we need to describe\n\t\tuiExports: {\n\t\t\t// Register our visualizations (a plugin can have multiple visualizations)\n\t\t\tvisTypes: [\n\t\t\t\t'plugins/tr-k4p-clock/clock'\n\t\t\t]\n\t\t}\n\t});\n};"
      ]
    },
    "mtime": 1466504850514
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/console/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./server/proxy_config_collection",
            "imported": [
              "ProxyConfigCollection"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "ProxyConfigCollection",
                "local": "ProxyConfigCollection"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "extends"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _serverProxy_config_collection = require('./server/proxy_config_collection');\n\nmodule.exports = function (kibana) {\n  var _require = require('path');\n\n  var resolve = _require.resolve;\n  var join = _require.join;\n  var sep = _require.sep;\n\n  var Joi = require('joi');\n  var Boom = require('boom');\n  var modules = resolve(__dirname, 'public/webpackShims/');\n  var src = resolve(__dirname, 'public/src/');\n\n  var _require2 = require('fs');\n\n  var existsSync = _require2.existsSync;\n\n  var _require3 = require('lodash');\n\n  var startsWith = _require3.startsWith;\n  var endsWith = _require3.endsWith;\n\n  var apps = [{\n    title: 'Console',\n    description: 'JSON aware developer\\'s interface to ElasticSearch',\n    main: 'plugins/console/console',\n    icon: 'plugins/console/logo.svg',\n    injectVars: function injectVars(server, options) {\n      var varsToInject = options;\n      varsToInject.elasticsearchUrl = server.config().get('elasticsearch.url');\n      return varsToInject;\n    }\n  }];\n\n  if (existsSync(resolve(__dirname, 'public/tests'))) {\n    apps.push({\n      title: 'Console Tests',\n      id: 'sense-tests',\n      main: 'plugins/console/tests',\n      hidden: true\n      //listed: false // uncomment after https://github.com/elastic/kibana/pull/4755\n    });\n  }\n\n  return new kibana.Plugin({\n    id: 'console',\n    require: ['elasticsearch'],\n\n    config: function config(Joi) {\n      return Joi.object({\n        enabled: Joi.boolean()['default'](true),\n        proxyFilter: Joi.array().items(Joi.string()).single()['default'](['.*']),\n        ssl: Joi.object({\n          verify: Joi.boolean()\n        })['default'](),\n        proxyConfig: Joi.array().items(Joi.object().keys({\n          match: Joi.object().keys({\n            protocol: Joi.string()['default']('*'),\n            host: Joi.string()['default']('*'),\n            port: Joi.string()['default']('*'),\n            path: Joi.string()['default']('*')\n          }),\n\n          timeout: Joi.number(),\n          ssl: Joi.object().keys({\n            verify: Joi.boolean(),\n            ca: Joi.array().single().items(Joi.string()),\n            cert: Joi.string(),\n            key: Joi.string()\n          })['default']()\n        }))['default']([{\n          match: {\n            protocol: '*',\n            host: '*',\n            port: '*',\n            path: '*'\n          },\n\n          timeout: 180000,\n          ssl: {\n            verify: true\n          }\n        }])\n      })['default']();\n    },\n\n    init: function init(server, options) {\n      var filters = options.proxyFilter.map(function (str) {\n        return new RegExp(str);\n      });\n\n      if (options.ssl && options.ssl.verify) {\n        throw new Error('sense.ssl.verify is no longer supported.');\n      }\n\n      var proxyConfigCollection = new _serverProxy_config_collection.ProxyConfigCollection(options.proxyConfig);\n      var proxyRouteConfig = {\n        validate: {\n          query: Joi.object().keys({\n            uri: Joi.string()\n          }).unknown(true)\n        },\n\n        pre: [function filterUri(req, reply) {\n          var uri = req.query.uri;\n\n          if (!filters.some(function (re) {\n            return re.test(uri);\n          })) {\n            var err = Boom.forbidden();\n            err.output.payload = \"Error connecting to '\" + uri + \"':\\n\\nUnable to send requests to that url.\";\n            err.output.headers['content-type'] = 'text/plain';\n            reply(err);\n          } else {\n            reply();\n          }\n        }],\n\n        handler: function handler(req, reply) {\n          var baseUri = server.config().get('elasticsearch.url');\n          var path = req.query.uri;\n\n          baseUri = baseUri.replace(/\\/+$/, '');\n          path = path.replace(/^\\/+/, '');\n          var uri = baseUri + '/' + path;\n\n          var requestHeadersWhitelist = server.config().get('elasticsearch.requestHeadersWhitelist');\n          var filterHeaders = server.plugins.elasticsearch.filterHeaders;\n          reply.proxy(_extends({\n            mapUri: function mapUri(request, done) {\n              done(null, uri, filterHeaders(request.headers, requestHeadersWhitelist));\n            },\n            xforward: true,\n            onResponse: function onResponse(err, res, request, reply, settings, ttl) {\n              if (err != null) {\n                reply(\"Error connecting to '\" + uri + \"':\\n\\n\" + err.message).type(\"text/plain\").statusCode = 502;\n              } else {\n                reply(null, res);\n              }\n            }\n\n          }, proxyConfigCollection.configForUri(uri)));\n        }\n      };\n\n      server.route({\n        path: '/api/console/proxy',\n        method: '*',\n        config: _extends({}, proxyRouteConfig, {\n\n          payload: {\n            output: 'stream',\n            parse: false\n          }\n        })\n      });\n\n      server.route({\n        path: '/api/console/proxy',\n        method: 'GET',\n        config: _extends({}, proxyRouteConfig)\n      });\n\n      server.route({\n        path: '/api/console/api_server',\n        method: ['GET', 'POST'],\n        handler: function handler(req, reply) {\n          var server = require('./api_server/server');\n          var _req$query = req.query;\n          var sense_version = _req$query.sense_version;\n          var apis = _req$query.apis;\n\n          if (!apis) {\n            reply(Boom.badRequest('\"apis\" is a required param.'));\n            return;\n          }\n\n          return server.resolveApi(sense_version, apis.split(\",\"), reply);\n        }\n      });\n\n      var testApp = kibana.uiExports.apps.hidden.byId['sense-tests'];\n      if (testApp) {\n        server.route({\n          path: '/app/sense-tests',\n          method: 'GET',\n          handler: function handler(req, reply) {\n            return reply.renderApp(testApp);\n          }\n        });\n      }\n    },\n\n    uiExports: {\n      apps: apps,\n\n      noParse: [join(modules, 'ace' + sep), join(modules, 'moment_src/moment' + sep), join(src, 'sense_editor/mode/worker.js')]\n    }\n  });\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMvY29uc29sZS9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OzZDQUFzQyxrQ0FBa0M7O0FBRXhFLE1BQU0sQ0FBQyxPQUFPLEdBQUcsVUFBVSxNQUFNLEVBQUU7aUJBQ0osT0FBTyxDQUFDLE1BQU0sQ0FBQzs7TUFBdEMsT0FBTyxZQUFQLE9BQU87TUFBRSxJQUFJLFlBQUosSUFBSTtNQUFFLEdBQUcsWUFBSCxHQUFHOztBQUN4QixNQUFJLEdBQUcsR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDekIsTUFBSSxJQUFJLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQzNCLE1BQUksT0FBTyxHQUFHLE9BQU8sQ0FBQyxTQUFTLEVBQUUsc0JBQXNCLENBQUMsQ0FBQztBQUN6RCxNQUFJLEdBQUcsR0FBRyxPQUFPLENBQUMsU0FBUyxFQUFFLGFBQWEsQ0FBQyxDQUFDOztrQkFDdkIsT0FBTyxDQUFDLElBQUksQ0FBQzs7TUFBNUIsVUFBVSxhQUFWLFVBQVU7O2tCQUNpQixPQUFPLENBQUMsUUFBUSxDQUFDOztNQUExQyxVQUFVLGFBQVYsVUFBVTtNQUFFLFFBQVEsYUFBUixRQUFROztBQUU1QixNQUFNLElBQUksR0FBRyxDQUNYO0FBQ0UsU0FBSyxFQUFFLFNBQVM7QUFDaEIsZUFBVyxFQUFFLG9EQUFvRDtBQUNqRSxRQUFJLEVBQUUseUJBQXlCO0FBQy9CLFFBQUksRUFBRSwwQkFBMEI7QUFDaEMsY0FBVSxFQUFFLG9CQUFVLE1BQU0sRUFBRSxPQUFPLEVBQUU7QUFDckMsVUFBTSxZQUFZLEdBQUcsT0FBTyxDQUFDO0FBQzdCLGtCQUFZLENBQUMsZ0JBQWdCLEdBQUcsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO0FBQ3pFLGFBQU8sWUFBWSxDQUFDO0tBQ3JCO0dBQ0YsQ0FDRixDQUFDOztBQUVGLE1BQUksVUFB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T0FDSjtLQUNGOztBQUVELGFBQVMsRUFBRTtBQUNULFVBQUksRUFBRSxJQUFJOztBQUVWLGFBQU8sRUFBRSxDQUNQLElBQUksQ0FBQyxPQUFPLEVBQUUsS0FBSyxHQUFHLEdBQUcsQ0FBQyxFQUMxQixJQUFJLENBQUMsT0FBTyxFQUFFLG1CQUFtQixHQUFHLEdBQUcsQ0FBQyxFQUN4QyxJQUFJLENBQUMsR0FBRyxFQUFFLDZCQUE2QixDQUFDLENBQ3pDO0tBQ0Y7R0FDRixDQUFDLENBQUE7Q0FDSCxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMvY29uc29sZS9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByb3h5Q29uZmlnQ29sbGVjdGlvbiB9IGZyb20gJy4vc2VydmVyL3Byb3h5X2NvbmZpZ19jb2xsZWN0aW9uJztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoa2liYW5hKSB7XG4gIGxldCB7IHJlc29sdmUsIGpvaW4sIHNlcCB9ID0gcmVxdWlyZSgncGF0aCcpO1xuICBsZXQgSm9pID0gcmVxdWlyZSgnam9pJyk7XG4gIGxldCBCb29tID0gcmVxdWlyZSgnYm9vbScpO1xuICBsZXQgbW9kdWxlcyA9IHJlc29sdmUoX19kaXJuYW1lLCAncHVibGljL3dlYnBhY2tTaGltcy8nKTtcbiAgbGV0IHNyYyA9IHJlc29sdmUoX19kaXJuYW1lLCAncHVibGljL3NyYy8nKTtcbiAgbGV0IHsgZXhpc3RzU3luYyB9ID0gcmVxdWlyZSgnZnMnKTtcbiAgY29uc3QgeyBzdGFydHNXaXRoLCBlbmRzV2l0aCB9ID0gcmVxdWlyZSgnbG9kYXNoJyk7XG5cbiAgY29uc3QgYXBwcyA9IFtcbiAgICB7XG4gICAgICB0aXRsZTogJ0NvbnNvbGUnLFxuICAgICAgZGVzY3JpcHRpb246ICdKU09OIGF3YXJlIGRldmVsb3BlclxcJ3MgaW50ZXJmYWNlIHRvIEVsYXN0aWNTZWFyY2gnLFxuICAgICAgbWFpbjogJ3BsdWdpbnMvY29uc29sZS9jb25zb2xlJyxcbiAgICAgIGljb246ICdwbHVnaW5zL2NvbnNvbGUvbG9nby5zdmcnLFxuICAgICAgaW5qZWN0VmFyczogZnVuY3Rpb24gKHNlcnZlciwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCB2YXJzVG9JbmplY3QgPSBvcHRpb25zO1xuICAgICAgICB2YXJzVG9JbmplY3QuZWxhc3RpY3NlYXJjaFVybCA9IHNlcnZlci5jb25maWcoKS5nZXQoJ2VsYXN0aWNzZWFyY2gudXJsJyk7XG4gICAgICAgIHJldHVybiB2YXJzVG9JbmplY3Q7XG4gICAgICB9XG4gICAgfVxuICBdO1xuXG4gIGlmIChleGlzdHNTeW5jKHJlc29sdmUoX19kaXJuYW1lLCAncHVibGljL3Rlc3RzJykpKSB7XG4gICAgYXBwcy5wdXNoKHtcbiAgICAgIHRpdGxlOiAnQ29uc29sZSBUZXN0cycsXG4gICAgICBpZDogJ3NlbnNlLXRlc3RzJyxcbiAgICAgIG1haW46ICdwbHVnaW5zL2NvbnNvbGUvdGVzdHMnLFxuICAgICAgaGlkZGVuOiB0cnVlXG4gICAgICAvL2xpc3RlZDogZmFsc2UgLy8gdW5jb21tZW50IGFmdGVyIGh0dHBzOi8vZ2l0aHViLmNvbS9lbGFzdGljL2tpYmFuYS9wdWxsLzQ3NTVcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBuZXcga2liYW5hLlBsdWdpbih7XG4gICAgaWQ6ICdjb25zb2xlJyxcbiAgICByZXF1aXJlOiBbICdlbGFzdGljc2VhcmNoJyBdLFxuXG4gICAgY29uZmlnOiBmdW5jdGlvbiAoSm9pKSB7XG4gICAgICByZXR1cm4gSm9pLm9iamVjdCh7XG4gICAgICAgIGVuYWJsZWQ6IEpvaS5ib29sZWFuKCkuZGVmYXVsdCh0cnVlKSxcbiAgICAgICAgcHJveHlGaWx0ZXI6IEpvaS5hcnJheSgpLml0ZW1zKEpvaS5zdHJpbmcoKSkuc2luZ2xlKCkuZGVmYXVsdChbJy4qJ10pLFxuICAgICAgICBzc2w6IEpvaS5vYmplY3Qoe1xuICAgICAgICAgIHZlcmlmeTogSm9pLmJvb2xlYW4oKSxcbiAgICAgICAgfSkuZGVmYXVsdCgpLFxuICAgICAgICBwcm94eUNvbmZpZzogSm9pLmFycmF5KCkuaXRlbXMoXG4gICAgICAgICAgSm9pLm9iamVjdCgpLmtleXMoe1xuICAgICAgICAgICAgbWF0Y2g6IEpvaS5vYmplY3QoKS5rZXlzKHtcbiAgICAgICAgICAgICAgcHJvdG9jb2w6IEpvaS5zdHJpbmcoKS5kZWZhdWx0KCcqJyksXG4gICAgICAgICAgICAgIGhvc3Q6IEpvaS5zdHJpbmcoKS5kZWZhdWx0KCcqJyksXG4gICAgICAgICAgICAgIHBvcnQ6IEpvaS5zdHJpbmcoKS5kZWZhdWx0KCcqJyksXG4gICAgICAgICAgICAgIHBhdGg6IEpvaS5zdHJpbmcoKS5kZWZhdWx0KCcqJylcbiAgICAgICAgICAgIH0pLFxuXG4gICAgICAgICAgICB0aW1lb3V0OiBKb2kubnVtYmVyKCksXG4gICAgICAgICAgICBzc2w6IEpvaS5vYmplY3QoKS5rZXlzKHtcbiAgICAgICAgICAgICAgdmVyaWZ5OiBKb2kuYm9vbGVhbigpLFxuICAgICAgICAgICAgICBjYTogSm9pLmFycmF5KCkuc2luZ2xlKCkuaXRlbXMoSm9pLnN0cmluZygpKSxcbiAgICAgICAgICAgICAgY2VydDogSm9pLnN0cmluZygpLFxuICAgICAgICAgICAgICBrZXk6IEpvaS5zdHJpbmcoKVxuICAgICAgICAgICAgfSkuZGVmYXVsdCgpXG4gICAgICAgICAgfSlcbiAgICAgICAgKS5kZWZhdWx0KFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBtYXRjaDoge1xuICAgICAgICAgICAgICBwcm90b2NvbDogJyonLFxuICAgICAgICAgICAgICBob3N0OiAnKicsXG4gICAgICAgICAgICAgIHBvcnQ6ICcqJyxcbiAgICAgICAgICAgICAgcGF0aDogJyonXG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICB0aW1lb3V0OiAxODAwMDAsXG4gICAgICAgICAgICBzc2w6IHtcbiAgICAgICAgICAgICAgdmVyaWZ5OiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICBdKVxuICAgICAgfSkuZGVmYXVsdCgpO1xuICAgIH0sXG5cbiAgICBpbml0OiBmdW5jdGlvbiAoc2VydmVyLCBvcHRpb25zKSB7XG4gICAgICBjb25zdCBmaWx0ZXJzID0gb3B0aW9ucy5wcm94eUZpbHRlci5tYXAoc3RyID0+IG5ldyBSZWdFeHAoc3RyKSk7XG5cbiAgICAgIGlmIChvcHRpb25zLnNzbCAmJiBvcHRpb25zLnNzbC52ZXJpZnkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdzZW5zZS5zc2wudmVyaWZ5IGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQuJyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHByb3h5Q29uZmlnQ29sbGVjdGlvbiA9IG5ldyBQcm94eUNvbmZpZ0NvbGxlY3Rpb24ob3B0aW9ucy5wcm94eUNvbmZpZyk7XG4gICAgICBjb25zdCBwcm94eVJvdXRlQ29uZmlnID0ge1xuICAgICAgICB2YWxpZGF0ZToge1xuICAgICAgICAgIHF1ZXJ5OiBKb2kub2JqZWN0KCkua2V5cyh7XG4gICAgICAgICAgICB1cmk6IEpvaS5zdHJpbmcoKVxuICAgICAgICAgIH0pLnVua25vd24odHJ1ZSksXG4gICAgICAgIH0sXG5cbiAgICAgICAgcHJlOiBbXG4gICAgICAgICAgZnVuY3Rpb24gZmlsdGVyVXJpKHJlcSwgcmVwbHkpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgdXJpIH0gPSByZXEucXVlcnk7XG5cbiAgICAgICAgICAgIGlmICghZmlsdGVycy5zb21lKHJlID0+IHJlLnRlc3QodXJpKSkpIHtcbiAgICAgICAgICAgICAgY29uc3QgZXJyID0gQm9vbS5mb3JiaWRkZW4oKTtcbiAgICAgICAgICAgICAgZXJyLm91dHB1dC5wYXlsb2FkID0gXCJFcnJvciBjb25uZWN0aW5nIHRvICdcIiArIHVyaSArIFwiJzpcXG5cXG5VbmFibGUgdG8gc2VuZCByZXF1ZXN0cyB0byB0aGF0IHVybC5cIjtcbiAgICAgICAgICAgICAgZXJyLm91dHB1dC5oZWFkZXJzWydjb250ZW50LXR5cGUnXSA9ICd0ZXh0L3BsYWluJztcbiAgICAgICAgICAgICAgcmVwbHkoZXJyKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJlcGx5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICBdLFxuXG4gICAgICAgIGhhbmRsZXIocmVxLCByZXBseSkge1xuICAgICAgICAgIGxldCBiYXNlVXJpID0gc2VydmVyLmNvbmZpZygpLmdldCgnZWxhc3RpY3NlYXJjaC51cmwnKTtcbiAgICAgICAgICBsZXQgeyB1cmk6cGF0aCB9ID0gcmVxLnF1ZXJ5O1xuXG4gICAgICAgICAgYmFzZVVyaSA9IGJhc2VVcmkucmVwbGFjZSgvXFwvKyQvLCAnJyk7XG4gICAgICAgICAgcGF0aCA9IHBhdGgucmVwbGFjZSgvXlxcLysvLCAnJyk7XG4gICAgICAgICAgY29uc3QgdXJpID0gYmFzZVVyaSArICcvJyArIHBhdGg7XG5cbiAgICAgICAgICBjb25zdCByZXF1ZXN0SGVhZGVyc1doaXRlbGlzdCA9IHNlcnZlci5jb25maWcoKS5nZXQoJ2VsYXN0aWNzZWFyY2gucmVxdWVzdEhlYWRlcnNXaGl0ZWxpc3QnKTtcbiAgICAgICAgICBjb25zdCBmaWx0ZXJIZWFkZXJzID0gc2VydmVyLnBsdWdpbnMuZWxhc3RpY3NlYXJjaC5maWx0ZXJIZWFkZXJzO1xuICAgICAgICAgIHJlcGx5LnByb3h5KHtcbiAgICAgICAgICAgIG1hcFVyaTogZnVuY3Rpb24gKHJlcXVlc3QsIGRvbmUpIHtcbiAgICAgICAgICAgICAgZG9uZShudWxsLCB1cmksIGZpbHRlckhlYWRlcnMocmVxdWVzdC5oZWFkZXJzLCByZXF1ZXN0SGVhZGVyc1doaXRlbGlzdCkpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgeGZvcndhcmQ6IHRydWUsXG4gICAgICAgICAgICBvblJlc3BvbnNlKGVyciwgcmVzLCByZXF1ZXN0LCByZXBseSwgc2V0dGluZ3MsIHR0bCkge1xuICAgICAgICAgICAgICBpZiAoZXJyICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXBseShcIkVycm9yIGNvbm5lY3RpbmcgdG8gJ1wiICsgdXJpICsgXCInOlxcblxcblwiICsgZXJyLm1lc3NhZ2UpLnR5cGUoXCJ0ZXh0L3BsYWluXCIpLnN0YXR1c0NvZGUgPSA1MDI7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVwbHkobnVsbCwgcmVzKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLi4ucHJveHlDb25maWdDb2xsZWN0aW9uLmNvbmZpZ0ZvclVyaSh1cmkpXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgc2VydmVyLnJvdXRlKHtcbiAgICAgICAgcGF0aDogJy9hcGkvY29uc29sZS9wcm94eScsXG4gICAgICAgIG1ldGhvZDogJyonLFxuICAgICAgICBjb25maWc6IHtcbiAgICAgICAgICAuLi5wcm94eVJvdXRlQ29uZmlnLFxuXG4gICAgICAgICAgcGF5bG9hZDoge1xuICAgICAgICAgICAgb3V0cHV0OiAnc3RyZWFtJyxcbiAgICAgICAgICAgIHBhcnNlOiBmYWxzZVxuICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBzZXJ2ZXIucm91dGUoe1xuICAgICAgICBwYXRoOiAnL2FwaS9jb25zb2xlL3Byb3h5JyxcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgY29uZmlnOiB7XG4gICAgICAgICAgLi4ucHJveHlSb3V0ZUNvbmZpZ1xuICAgICAgICB9XG4gICAgICB9KVxuXG4gICAgICBzZXJ2ZXIucm91dGUoe1xuICAgICAgICBwYXRoOiAnL2FwaS9jb25zb2xlL2FwaV9zZXJ2ZXInLFxuICAgICAgICBtZXRob2Q6IFsnR0VUJywgJ1BPU1QnXSxcbiAgICAgICAgaGFuZGxlcjogZnVuY3Rpb24gKHJlcSwgcmVwbHkpIHtcbiAgICAgICAgICBsZXQgc2VydmVyID0gcmVxdWlyZSgnLi9hcGlfc2VydmVyL3NlcnZlcicpO1xuICAgICAgICAgIGxldCB7c2Vuc2VfdmVyc2lvbiwgYXBpc30gPSByZXEucXVlcnk7XG4gICAgICAgICAgaWYgKCFhcGlzKSB7XG4gICAgICAgICAgICByZXBseShCb29tLmJhZFJlcXVlc3QoJ1wiYXBpc1wiIGlzIGEgcmVxdWlyZWQgcGFyYW0uJykpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiBzZXJ2ZXIucmVzb2x2ZUFwaShzZW5zZV92ZXJzaW9uLCBhcGlzLnNwbGl0KFwiLFwiKSwgcmVwbHkpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgdGVzdEFwcCA9IGtpYmFuYS51aUV4cG9ydHMuYXBwcy5oaWRkZW4uYnlJZFsnc2Vuc2UtdGVzdHMnXTtcbiAgICAgIGlmICh0ZXN0QXBwKSB7XG4gICAgICAgIHNlcnZlci5yb3V0ZSh7XG4gICAgICAgICAgcGF0aDogJy9hcHAvc2Vuc2UtdGVzdHMnLFxuICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgaGFuZGxlcjogZnVuY3Rpb24gKHJlcSwgcmVwbHkpIHtcbiAgICAgICAgICAgIHJldHVybiByZXBseS5yZW5kZXJBcHAodGVzdEFwcCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgdWlFeHBvcnRzOiB7XG4gICAgICBhcHBzOiBhcHBzLFxuXG4gICAgICBub1BhcnNlOiBbXG4gICAgICAgIGpvaW4obW9kdWxlcywgJ2FjZScgKyBzZXApLFxuICAgICAgICBqb2luKG1vZHVsZXMsICdtb21lbnRfc3JjL21vbWVudCcgKyBzZXApLFxuICAgICAgICBqb2luKHNyYywgJ3NlbnNlX2VkaXRvci9tb2RlL3dvcmtlci5qcycpXG4gICAgICBdXG4gICAgfVxuICB9KVxufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/console/index.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/src/plugins/console/index.js",
      "sourcesContent": [
        "import { ProxyConfigCollection } from './server/proxy_config_collection';\n\nmodule.exports = function (kibana) {\n  let { resolve, join, sep } = require('path');\n  let Joi = require('joi');\n  let Boom = require('boom');\n  let modules = resolve(__dirname, 'public/webpackShims/');\n  let src = resolve(__dirname, 'public/src/');\n  let { existsSync } = require('fs');\n  const { startsWith, endsWith } = require('lodash');\n\n  const apps = [\n    {\n      title: 'Console',\n      description: 'JSON aware developer\\'s interface to ElasticSearch',\n      main: 'plugins/console/console',\n      icon: 'plugins/console/logo.svg',\n      injectVars: function (server, options) {\n        const varsToInject = options;\n        varsToInject.elasticsearchUrl = server.config().get('elasticsearch.url');\n        return varsToInject;\n      }\n    }\n  ];\n\n  if (existsSync(resolve(__dirname, 'public/tests'))) {\n    apps.push({\n      title: 'Console Tests',\n      id: 'sense-tests',\n      main: 'plugins/console/tests',\n      hidden: true\n      //listed: false // uncomment after https://github.com/elastic/kibana/pull/4755\n    });\n  }\n\n  return new kibana.Plugin({\n    id: 'console',\n    require: [ 'elasticsearch' ],\n\n    config: function (Joi) {\n      return Joi.object({\n        enabled: Joi.boolean().default(true),\n        proxyFilter: Joi.array().items(Joi.string()).single().default(['.*']),\n        ssl: Joi.object({\n          verify: Joi.boolean(),\n        }).default(),\n        proxyConfig: Joi.array().items(\n          Joi.object().keys({\n            match: Joi.object().keys({\n              protocol: Joi.string().default('*'),\n              host: Joi.string().default('*'),\n              port: Joi.string().default('*'),\n              path: Joi.string().default('*')\n            }),\n\n            timeout: Joi.number(),\n            ssl: Joi.object().keys({\n              verify: Joi.boolean(),\n              ca: Joi.array().single().items(Joi.string()),\n              cert: Joi.string(),\n              key: Joi.string()\n            }).default()\n          })\n        ).default([\n          {\n            match: {\n              protocol: '*',\n              host: '*',\n              port: '*',\n              path: '*'\n            },\n\n            timeout: 180000,\n            ssl: {\n              verify: true\n            }\n          }\n        ])\n      }).default();\n    },\n\n    init: function (server, options) {\n      const filters = options.proxyFilter.map(str => new RegExp(str));\n\n      if (options.ssl && options.ssl.verify) {\n        throw new Error('sense.ssl.verify is no longer supported.');\n      }\n\n      const proxyConfigCollection = new ProxyConfigCollection(options.proxyConfig);\n      const proxyRouteConfig = {\n        validate: {\n          query: Joi.object().keys({\n            uri: Joi.string()\n          }).unknown(true),\n        },\n\n        pre: [\n          function filterUri(req, reply) {\n            const { uri } = req.query;\n\n            if (!filters.some(re => re.test(uri))) {\n              const err = Boom.forbidden();\n              err.output.payload = \"Error connecting to '\" + uri + \"':\\n\\nUnable to send requests to that url.\";\n              err.output.headers['content-type'] = 'text/plain';\n              reply(err);\n            } else {\n              reply();\n            }\n          }\n        ],\n\n        handler(req, reply) {\n          let baseUri = server.config().get('elasticsearch.url');\n          let { uri:path } = req.query;\n\n          baseUri = baseUri.replace(/\\/+$/, '');\n          path = path.replace(/^\\/+/, '');\n          const uri = baseUri + '/' + path;\n\n          const requestHeadersWhitelist = server.config().get('elasticsearch.requestHeadersWhitelist');\n          const filterHeaders = server.plugins.elasticsearch.filterHeaders;\n          reply.proxy({\n            mapUri: function (request, done) {\n              done(null, uri, filterHeaders(request.headers, requestHeadersWhitelist))\n            },\n            xforward: true,\n            onResponse(err, res, request, reply, settings, ttl) {\n              if (err != null) {\n                reply(\"Error connecting to '\" + uri + \"':\\n\\n\" + err.message).type(\"text/plain\").statusCode = 502;\n              } else {\n                reply(null, res);\n              }\n            },\n\n            ...proxyConfigCollection.configForUri(uri)\n          })\n        }\n      };\n\n      server.route({\n        path: '/api/console/proxy',\n        method: '*',\n        config: {\n          ...proxyRouteConfig,\n\n          payload: {\n            output: 'stream',\n            parse: false\n          },\n        }\n      });\n\n      server.route({\n        path: '/api/console/proxy',\n        method: 'GET',\n        config: {\n          ...proxyRouteConfig\n        }\n      })\n\n      server.route({\n        path: '/api/console/api_server',\n        method: ['GET', 'POST'],\n        handler: function (req, reply) {\n          let server = require('./api_server/server');\n          let {sense_version, apis} = req.query;\n          if (!apis) {\n            reply(Boom.badRequest('\"apis\" is a required param.'));\n            return;\n          }\n\n          return server.resolveApi(sense_version, apis.split(\",\"), reply);\n        }\n      });\n\n      const testApp = kibana.uiExports.apps.hidden.byId['sense-tests'];\n      if (testApp) {\n        server.route({\n          path: '/app/sense-tests',\n          method: 'GET',\n          handler: function (req, reply) {\n            return reply.renderApp(testApp);\n          }\n        });\n      }\n    },\n\n    uiExports: {\n      apps: apps,\n\n      noParse: [\n        join(modules, 'ace' + sep),\n        join(modules, 'moment_src/moment' + sep),\n        join(src, 'sense_editor/mode/worker.js')\n      ]\n    }\n  })\n};\n"
      ]
    },
    "mtime": 1467036622809
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/console/server/proxy_config_collection.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "defaultsDeep"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "defaultsDeep",
                "local": "defaultsDeep"
              }
            ]
          },
          {
            "source": "./proxy_config",
            "imported": [
              "ProxyConfig"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "ProxyConfig",
                "local": "ProxyConfig"
              }
            ]
          },
          {
            "source": "url",
            "imported": [
              "parse"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "parse",
                "local": "parseUrl"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "ProxyConfigCollection"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "ProxyConfigCollection",
              "exported": "ProxyConfigCollection"
            }
          ]
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "to-consumable-array"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i]; return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _lodash = require('lodash');\n\nvar _proxy_config = require('./proxy_config');\n\nvar _url = require('url');\n\nvar ProxyConfigCollection = (function () {\n  function ProxyConfigCollection() {\n    var configs = arguments.length <= 0 || arguments[0] === undefined ? [] : arguments[0];\n\n    _classCallCheck(this, ProxyConfigCollection);\n\n    this.configs = configs.map(function (settings) {\n      return new _proxy_config.ProxyConfig(settings);\n    });\n  }\n\n  _createClass(ProxyConfigCollection, [{\n    key: 'configForUri',\n    value: function configForUri(uri) {\n      var parsedUri = (0, _url.parse)(uri);\n      var settings = this.configs.map(function (config) {\n        return config.getForParsedUri(parsedUri);\n      });\n      return _lodash.defaultsDeep.apply(undefined, [{}].concat(_toConsumableArray(settings)));\n    }\n  }]);\n\n  return ProxyConfigCollection;\n})();\n\nexports.ProxyConfigCollection = ProxyConfigCollection;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMvY29uc29sZS9zZXJ2ZXIvcHJveHlfY29uZmlnX2NvbGxlY3Rpb24uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O3NCQUE2QixRQUFROzs0QkFFVCxnQkFBZ0I7O21CQUNWLEtBQUs7O0lBRzFCLHFCQUFxQjtBQUNyQixXQURBLHFCQUFxQixHQUNOO1FBQWQsT0FBTyx5REFBRyxFQUFFOzswQkFEYixxQkFBcUI7O0FBRTlCLFFBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxVQUFBLFFBQVE7YUFBSSw4QkFBZ0IsUUFBUSxDQUFDO0tBQUEsQ0FBQyxDQUFBO0dBQ2xFOztlQUhVLHFCQUFxQjs7V0FLcEIsc0JBQUMsR0FBRyxFQUFFO0FBQ2hCLFVBQU0sU0FBUyxHQUFHLGdCQUFTLEdBQUcsQ0FBQyxDQUFDO0FBQ2hDLFVBQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLFVBQUEsTUFBTTtlQUFJLE1BQU0sQ0FBQyxlQUFlLENBQUMsU0FBUyxDQUFDO09BQUEsQ0FBQyxDQUFDO0FBQy9FLGFBQU8sdUNBQWEsRUFBRSw0QkFBSyxRQUFRLEdBQUMsQ0FBQztLQUN0Qzs7O1NBVFUscUJBQXFCIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMvY29uc29sZS9zZXJ2ZXIvcHJveHlfY29uZmlnX2NvbGxlY3Rpb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkZWZhdWx0c0RlZXAgfSBmcm9tICdsb2Rhc2gnXG5cbmltcG9ydCB7IFByb3h5Q29uZmlnIH0gZnJvbSAnLi9wcm94eV9jb25maWcnXG5pbXBvcnQgeyBwYXJzZSBhcyBwYXJzZVVybCB9IGZyb20gJ3VybCdcblxuXG5leHBvcnQgY2xhc3MgUHJveHlDb25maWdDb2xsZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoY29uZmlncyA9IFtdKSB7XG4gICAgdGhpcy5jb25maWdzID0gY29uZmlncy5tYXAoc2V0dGluZ3MgPT4gbmV3IFByb3h5Q29uZmlnKHNldHRpbmdzKSlcbiAgfVxuXG4gIGNvbmZpZ0ZvclVyaSh1cmkpIHtcbiAgICBjb25zdCBwYXJzZWRVcmkgPSBwYXJzZVVybCh1cmkpO1xuICAgIGNvbnN0IHNldHRpbmdzID0gdGhpcy5jb25maWdzLm1hcChjb25maWcgPT4gY29uZmlnLmdldEZvclBhcnNlZFVyaShwYXJzZWRVcmkpKTtcbiAgICByZXR1cm4gZGVmYXVsdHNEZWVwKHt9LCAuLi5zZXR0aW5ncyk7XG4gIH1cbn1cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/console/server/proxy_config_collection.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;;;sBAA6B,QAAQ;;4BAET,gBAAgB;;mBACV,KAAK;;IAG1B,qBAAqB;AACrB,WADA,qBAAqB,GACN;QAAd,OAAO,yDAAG,EAAE;;0BADb,qBAAqB;;AAE9B,QAAI,CAAC,OAAO,GAAG,OAAO,CAAC,GAAG,CAAC,UAAA,QAAQ;aAAI,8BAAgB,QAAQ,CAAC;KAAA,CAAC,CAAA;GAClE;;eAHU,qBAAqB;;WAKpB,sBAAC,GAAG,EAAE;AAChB,UAAM,SAAS,GAAG,gBAAS,GAAG,CAAC,CAAC;AAChC,UAAM,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,UAAA,MAAM;eAAI,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC;OAAA,CAAC,CAAC;AAC/E,aAAO,uCAAa,EAAE,4BAAK,QAAQ,GAAC,CAAC;KACtC;;;SATU,qBAAqB",
      "file": "/home/vio/v3metrics/src/plugins/console/server/proxy_config_collection.js",
      "sourcesContent": [
        "import { defaultsDeep } from 'lodash'\n\nimport { ProxyConfig } from './proxy_config'\nimport { parse as parseUrl } from 'url'\n\n\nexport class ProxyConfigCollection {\n  constructor(configs = []) {\n    this.configs = configs.map(settings => new ProxyConfig(settings))\n  }\n\n  configForUri(uri) {\n    const parsedUri = parseUrl(uri);\n    const settings = this.configs.map(config => config.getForParsedUri(parsedUri));\n    return defaultsDeep({}, ...settings);\n  }\n}\n"
      ]
    },
    "mtime": 1467036622817
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/console/server/proxy_config.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "memoize",
              "values"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "memoize",
                "local": "memoize"
              },
              {
                "kind": "named",
                "imported": "values",
                "local": "values"
              }
            ]
          },
          {
            "source": "url",
            "imported": [
              "format"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "format",
                "local": "formatUrl"
              }
            ]
          },
          {
            "source": "https",
            "imported": [
              "Agent"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Agent",
                "local": "HttpsAgent"
              }
            ]
          },
          {
            "source": "fs",
            "imported": [
              "readFileSync"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "readFileSync",
                "local": "readFileSync"
              }
            ]
          },
          {
            "source": "./wildcard_matcher",
            "imported": [
              "WildcardMatcher"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "WildcardMatcher",
                "local": "WildcardMatcher"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "ProxyConfig"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "ProxyConfig",
              "exported": "ProxyConfig"
            }
          ]
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _lodash = require('lodash');\n\nvar _url = require('url');\n\nvar _https = require('https');\n\nvar _fs = require('fs');\n\nvar _wildcard_matcher = require('./wildcard_matcher');\n\nvar makeHttpsAgent = (0, _lodash.memoize)(function (opts) {\n  return new _https.Agent(opts);\n}, function (opts) {\n  return JSON.stringify(opts);\n});\n\nvar ProxyConfig = (function () {\n  function ProxyConfig(config) {\n    _classCallCheck(this, ProxyConfig);\n\n    config = Object.assign({}, config);\n\n    // -----\n    // read \"match\" info\n    // -----\n    var rawMatches = Object.assign({}, config.match);\n    this.id = (0, _url.format)({\n      protocol: rawMatches.protocol,\n      hostname: rawMatches.host,\n      port: rawMatches.port,\n      pathname: rawMatches.path\n    }) || '*';\n\n    this.matchers = {\n      protocol: new _wildcard_matcher.WildcardMatcher(rawMatches.protocol),\n      host: new _wildcard_matcher.WildcardMatcher(rawMatches.host),\n      port: new _wildcard_matcher.WildcardMatcher(rawMatches.port),\n      path: new _wildcard_matcher.WildcardMatcher(rawMatches.path, '/')\n    };\n\n    // -----\n    // read config vars\n    // -----\n    this.timeout = config.timeout;\n    this.sslAgent = this._makeSslAgent(config);\n  }\n\n  _createClass(ProxyConfig, [{\n    key: '_makeSslAgent',\n    value: function _makeSslAgent(config) {\n      var ssl = config.ssl || {};\n      this.verifySsl = ssl.verify;\n\n      var sslAgentOpts = {\n        ca: ssl.ca && ssl.ca.map(function (ca) {\n          return (0, _fs.readFileSync)(ca);\n        }),\n        cert: ssl.cert && (0, _fs.readFileSync)(ssl.cert),\n        key: ssl.key && (0, _fs.readFileSync)(ssl.key)\n      };\n\n      if ((0, _lodash.values)(sslAgentOpts).filter(Boolean).length) {\n        return new _https.Agent(sslAgentOpts);\n      }\n    }\n  }, {\n    key: 'getForParsedUri',\n    value: function getForParsedUri(_ref) {\n      var protocol = _ref.protocol;\n      var hostname = _ref.hostname;\n      var port = _ref.port;\n      var pathname = _ref.pathname;\n\n      var match = this.matchers.protocol.match(protocol.slice(0, -1));\n      match = match && this.matchers.host.match(hostname);\n      match = match && this.matchers.port.match(port);\n      match = match && this.matchers.path.match(pathname);\n\n      if (!match) return {};\n      return {\n        timeout: this.timeout,\n        rejectUnauthorized: this.sslAgent ? true : this.verifySsl,\n        agent: protocol === 'https:' ? this.sslAgent : undefined\n      };\n    }\n  }]);\n\n  return ProxyConfig;\n})();\n\nexports.ProxyConfig = ProxyConfig;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMvY29uc29sZS9zZXJ2ZXIvcHJveHlfY29uZmlnLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7c0JBQWdDLFFBQVE7O21CQUNKLEtBQUs7O3FCQUNMLE9BQU87O2tCQUNkLElBQUk7O2dDQUVELG9CQUFvQjs7QUFFcEQsSUFBTSxjQUFjLEdBQUcscUJBQ3JCLFVBQUEsSUFBSTtTQUFJLGlCQUFlLElBQUksQ0FBQztDQUFBLEVBQzVCLFVBQUEsSUFBSTtTQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDO0NBQUEsQ0FDN0IsQ0FBQTs7SUFFWSxXQUFXO0FBQ1gsV0FEQSxXQUFXLENBQ1YsTUFBTSxFQUFFOzBCQURULFdBQVc7O0FBRXBCLFVBQU0sR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxNQUFNLENBQUMsQ0FBQzs7Ozs7QUFLbkMsUUFBTSxVQUFVLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ25ELFFBQUksQ0FBQyxFQUFFLEdBQUcsaUJBQVU7QUFDbEIsY0FBUSxFQUFFLFVBQVUsQ0FBQyxRQUFRO0FBQzdCLGNBQVEsRUFBRSxVQUFVLENBQUMsSUFBSTtBQUN6QixVQUFJLEVBQUUsVUFBVSxDQUFDLElBQUk7QUFDckIsY0FBUSxFQUFFLFVBQVUsQ0FBQyxJQUFJO0tBQzFCLENBQUMsSUFBSSxHQUFHLENBQUM7O0FBRVYsUUFBSSxDQUFDLFFBQVEsR0FBRztBQUNkLGNBQVEsRUFBRSxzQ0FBb0IsVUFBVSxDQUFDLFFBQVEsQ0FBQztBQUNsRCxVQUFJLEVBQUUsc0NBQW9CLFVBQVUsQ0FBQyxJQUFJLENBQUM7QUFDMUMsVUFBSSxFQUFFLHNDQUFvQixVQUFVLENBQUMsSUFBSSxDQUFDO0FBQzFDLFVBQUksRUFBRSxzQ0FBb0IsVUFBVSxDQUFDLElBQUksRUFBRSxHQUFHLENBQUM7S0FDaEQsQ0FBQzs7Ozs7QUFLRixRQUFJLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUM7QUFDOUIsUUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0dBQzVDOztlQTNCVSxXQUFXOztXQTZCVCx1QkFBQyxNQUFNLEVBQUU7QUFDcEIsVUFBTSxHQUFHLEdBQUcsTUFBTSxDQUFDLEdBQUcsSUFBSSxFQUFFLENBQUM7QUFDN0IsVUFBSSxDQUFDLFNBQVMsR0FBRyxHQUFHLENBQUMsTUFBTSxDQUFDOztBQUU1QixVQUFNLFlBQVksR0FBRztBQUNuQixVQUFFLEVBQUUsR0FBRyxDQUFDLEVBQUUsSUFBSSxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxVQUFBLEVBQUU7aUJBQUksc0JBQWEsRUFBRSxDQUFDO1NBQUEsQ0FBQztBQUNoRCxZQUFJLEVBQUUsR0FBRyxDQUFDLElBQUksSUFBSSxzQkFBYSxHQUFHLENBQUMsSUFBSSxDQUFDO0FBQ3hDLFdBQUcsRUFBRSxHQUFHLENBQUMsR0FBRyxJQUFJLHNCQUFhLEdBQUcsQ0FBQyxHQUFHLENBQUM7T0FDdEMsQ0FBQzs7QUFFRixVQUFJLG9CQUFPLFlBQVksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxNQUFNLEVBQUU7QUFDL0MsZUFBTyxpQkFBZSxZQUFZLENBQUMsQ0FBQztPQUNyQztLQUNGOzs7V0FFYyx5QkFBQyxJQUFzQyxFQUFFO1VBQXRDLFFBQVEsR0FBVixJQUFzQyxDQUFwQyxRQUFRO1VBQUUsUUFBUSxHQUFwQixJQUFzQyxDQUExQixRQUFRO1VBQUUsSUFBSSxHQUExQixJQUFzQyxDQUFoQixJQUFJO1VBQUUsUUFBUSxHQUFwQyxJQUFzQyxDQUFWLFFBQVE7O0FBQ2xELFVBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDaEUsV0FBSyxHQUFHLEtBQUssSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDcEQsV0FBSyxHQUFHLEtBQUssSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDaEQsV0FBSyxHQUFHLEtBQUssSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUM7O0FBRXBELFVBQUksQ0FBQyxLQUFLLEVBQUUsT0FBTyxFQUFFLENBQUM7QUFDdEIsYUFBTztBQUNMLGVBQU8sRUFBRSxJQUFJLENBQUMsT0FBTztBQUNyQiwwQkFBa0IsRUFBRSxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksR0FBRyxJQUFJLENBQUMsU0FBUztBQUN6RCxhQUFLLEVBQUUsUUFBUSxLQUFLLFFBQVEsR0FBRyxJQUFJLENBQUMsUUFBUSxHQUFHLFNBQVM7T0FDekQsQ0FBQztLQUNIOzs7U0F4RFUsV0FBVyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9wbHVnaW5zL2NvbnNvbGUvc2VydmVyL3Byb3h5X2NvbmZpZy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG1lbW9pemUsIHZhbHVlcyB9IGZyb20gJ2xvZGFzaCdcbmltcG9ydCB7IGZvcm1hdCBhcyBmb3JtYXRVcmwgfSBmcm9tICd1cmwnXG5pbXBvcnQgeyBBZ2VudCBhcyBIdHRwc0FnZW50IH0gZnJvbSAnaHR0cHMnXG5pbXBvcnQgeyByZWFkRmlsZVN5bmMgfSBmcm9tICdmcydcblxuaW1wb3J0IHsgV2lsZGNhcmRNYXRjaGVyIH0gZnJvbSAnLi93aWxkY2FyZF9tYXRjaGVyJ1xuXG5jb25zdCBtYWtlSHR0cHNBZ2VudCA9IG1lbW9pemUoXG4gIG9wdHMgPT4gbmV3IEh0dHBzQWdlbnQob3B0cyksXG4gIG9wdHMgPT4gSlNPTi5zdHJpbmdpZnkob3B0cylcbilcblxuZXhwb3J0IGNsYXNzIFByb3h5Q29uZmlnIHtcbiAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgY29uZmlnID0gT2JqZWN0LmFzc2lnbih7fSwgY29uZmlnKTtcblxuICAgIC8vIC0tLS0tXG4gICAgLy8gcmVhZCBcIm1hdGNoXCIgaW5mb1xuICAgIC8vIC0tLS0tXG4gICAgY29uc3QgcmF3TWF0Y2hlcyA9IE9iamVjdC5hc3NpZ24oe30sIGNvbmZpZy5tYXRjaCk7XG4gICAgdGhpcy5pZCA9IGZvcm1hdFVybCh7XG4gICAgICBwcm90b2NvbDogcmF3TWF0Y2hlcy5wcm90b2NvbCxcbiAgICAgIGhvc3RuYW1lOiByYXdNYXRjaGVzLmhvc3QsXG4gICAgICBwb3J0OiByYXdNYXRjaGVzLnBvcnQsXG4gICAgICBwYXRobmFtZTogcmF3TWF0Y2hlcy5wYXRoXG4gICAgfSkgfHwgJyonO1xuXG4gICAgdGhpcy5tYXRjaGVycyA9IHtcbiAgICAgIHByb3RvY29sOiBuZXcgV2lsZGNhcmRNYXRjaGVyKHJhd01hdGNoZXMucHJvdG9jb2wpLFxuICAgICAgaG9zdDogbmV3IFdpbGRjYXJkTWF0Y2hlcihyYXdNYXRjaGVzLmhvc3QpLFxuICAgICAgcG9ydDogbmV3IFdpbGRjYXJkTWF0Y2hlcihyYXdNYXRjaGVzLnBvcnQpLFxuICAgICAgcGF0aDogbmV3IFdpbGRjYXJkTWF0Y2hlcihyYXdNYXRjaGVzLnBhdGgsICcvJyksXG4gICAgfTtcblxuICAgIC8vIC0tLS0tXG4gICAgLy8gcmVhZCBjb25maWcgdmFyc1xuICAgIC8vIC0tLS0tXG4gICAgdGhpcy50aW1lb3V0ID0gY29uZmlnLnRpbWVvdXQ7XG4gICAgdGhpcy5zc2xBZ2VudCA9IHRoaXMuX21ha2VTc2xBZ2VudChjb25maWcpO1xuICB9XG5cbiAgX21ha2VTc2xBZ2VudChjb25maWcpIHtcbiAgICBjb25zdCBzc2wgPSBjb25maWcuc3NsIHx8IHt9O1xuICAgIHRoaXMudmVyaWZ5U3NsID0gc3NsLnZlcmlmeTtcblxuICAgIGNvbnN0IHNzbEFnZW50T3B0cyA9IHtcbiAgICAgIGNhOiBzc2wuY2EgJiYgc3NsLmNhLm1hcChjYSA9PiByZWFkRmlsZVN5bmMoY2EpKSxcbiAgICAgIGNlcnQ6IHNzbC5jZXJ0ICYmIHJlYWRGaWxlU3luYyhzc2wuY2VydCksXG4gICAgICBrZXk6IHNzbC5rZXkgJiYgcmVhZEZpbGVTeW5jKHNzbC5rZXkpLFxuICAgIH07XG5cbiAgICBpZiAodmFsdWVzKHNzbEFnZW50T3B0cykuZmlsdGVyKEJvb2xlYW4pLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIG5ldyBIdHRwc0FnZW50KHNzbEFnZW50T3B0cyk7XG4gICAgfVxuICB9XG5cbiAgZ2V0Rm9yUGFyc2VkVXJpKHsgcHJvdG9jb2wsIGhvc3RuYW1lLCBwb3J0LCBwYXRobmFtZSB9KSB7XG4gICAgbGV0IG1hdGNoID0gdGhpcy5tYXRjaGVycy5wcm90b2NvbC5tYXRjaChwcm90b2NvbC5zbGljZSgwLCAtMSkpO1xuICAgIG1hdGNoID0gbWF0Y2ggJiYgdGhpcy5tYXRjaGVycy5ob3N0Lm1hdGNoKGhvc3RuYW1lKTtcbiAgICBtYXRjaCA9IG1hdGNoICYmIHRoaXMubWF0Y2hlcnMucG9ydC5tYXRjaChwb3J0KTtcbiAgICBtYXRjaCA9IG1hdGNoICYmIHRoaXMubWF0Y2hlcnMucGF0aC5tYXRjaChwYXRobmFtZSk7XG5cbiAgICBpZiAoIW1hdGNoKSByZXR1cm4ge307XG4gICAgcmV0dXJuIHtcbiAgICAgIHRpbWVvdXQ6IHRoaXMudGltZW91dCxcbiAgICAgIHJlamVjdFVuYXV0aG9yaXplZDogdGhpcy5zc2xBZ2VudCA/IHRydWUgOiB0aGlzLnZlcmlmeVNzbCxcbiAgICAgIGFnZW50OiBwcm90b2NvbCA9PT0gJ2h0dHBzOicgPyB0aGlzLnNzbEFnZW50IDogdW5kZWZpbmVkXG4gICAgfTtcbiAgfVxufVxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/console/server/proxy_config.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/src/plugins/console/server/proxy_config.js",
      "sourcesContent": [
        "import { memoize, values } from 'lodash'\nimport { format as formatUrl } from 'url'\nimport { Agent as HttpsAgent } from 'https'\nimport { readFileSync } from 'fs'\n\nimport { WildcardMatcher } from './wildcard_matcher'\n\nconst makeHttpsAgent = memoize(\n  opts => new HttpsAgent(opts),\n  opts => JSON.stringify(opts)\n)\n\nexport class ProxyConfig {\n  constructor(config) {\n    config = Object.assign({}, config);\n\n    // -----\n    // read \"match\" info\n    // -----\n    const rawMatches = Object.assign({}, config.match);\n    this.id = formatUrl({\n      protocol: rawMatches.protocol,\n      hostname: rawMatches.host,\n      port: rawMatches.port,\n      pathname: rawMatches.path\n    }) || '*';\n\n    this.matchers = {\n      protocol: new WildcardMatcher(rawMatches.protocol),\n      host: new WildcardMatcher(rawMatches.host),\n      port: new WildcardMatcher(rawMatches.port),\n      path: new WildcardMatcher(rawMatches.path, '/'),\n    };\n\n    // -----\n    // read config vars\n    // -----\n    this.timeout = config.timeout;\n    this.sslAgent = this._makeSslAgent(config);\n  }\n\n  _makeSslAgent(config) {\n    const ssl = config.ssl || {};\n    this.verifySsl = ssl.verify;\n\n    const sslAgentOpts = {\n      ca: ssl.ca && ssl.ca.map(ca => readFileSync(ca)),\n      cert: ssl.cert && readFileSync(ssl.cert),\n      key: ssl.key && readFileSync(ssl.key),\n    };\n\n    if (values(sslAgentOpts).filter(Boolean).length) {\n      return new HttpsAgent(sslAgentOpts);\n    }\n  }\n\n  getForParsedUri({ protocol, hostname, port, pathname }) {\n    let match = this.matchers.protocol.match(protocol.slice(0, -1));\n    match = match && this.matchers.host.match(hostname);\n    match = match && this.matchers.port.match(port);\n    match = match && this.matchers.path.match(pathname);\n\n    if (!match) return {};\n    return {\n      timeout: this.timeout,\n      rejectUnauthorized: this.sslAgent ? true : this.verifySsl,\n      agent: protocol === 'https:' ? this.sslAgent : undefined\n    };\n  }\n}\n"
      ]
    },
    "mtime": 1467036622817
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/console/server/wildcard_matcher.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "minimatch",
            "imported": [
              "Minimatch"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Minimatch",
                "local": "Minimatch"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "WildcardMatcher"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "WildcardMatcher",
              "exported": "WildcardMatcher"
            }
          ]
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _minimatch = require('minimatch');\n\nvar WildcardMatcher = (function () {\n  function WildcardMatcher(wildcardPattern, emptyVal) {\n    _classCallCheck(this, WildcardMatcher);\n\n    this.emptyVal = emptyVal;\n    this.pattern = String(wildcardPattern || '*');\n    this.matcher = new _minimatch.Minimatch(this.pattern, {\n      noglobstar: true,\n      dot: true,\n      nocase: true,\n      matchBase: true,\n      nocomment: true\n    });\n  }\n\n  _createClass(WildcardMatcher, [{\n    key: 'match',\n    value: function match(candidate) {\n      var empty = !candidate || candidate === this.emptyVal;\n      if (empty && this.pattern === '*') {\n        return true;\n      }\n\n      return this.matcher.match(candidate || '');\n    }\n  }]);\n\n  return WildcardMatcher;\n})();\n\nexports.WildcardMatcher = WildcardMatcher;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMvY29uc29sZS9zZXJ2ZXIvd2lsZGNhcmRfbWF0Y2hlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O3lCQUEwQixXQUFXOztJQUV4QixlQUFlO0FBQ2YsV0FEQSxlQUFlLENBQ2QsZUFBZSxFQUFFLFFBQVEsRUFBRTswQkFENUIsZUFBZTs7QUFFeEIsUUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUM7QUFDekIsUUFBSSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUMsZUFBZSxJQUFJLEdBQUcsQ0FBQyxDQUFDO0FBQzlDLFFBQUksQ0FBQyxPQUFPLEdBQUcseUJBQWMsSUFBSSxDQUFDLE9BQU8sRUFBRTtBQUN6QyxnQkFBVSxFQUFFLElBQUk7QUFDaEIsU0FBRyxFQUFFLElBQUk7QUFDVCxZQUFNLEVBQUUsSUFBSTtBQUNaLGVBQVMsRUFBRSxJQUFJO0FBQ2YsZUFBUyxFQUFFLElBQUk7S0FDaEIsQ0FBQyxDQUFBO0dBQ0g7O2VBWFUsZUFBZTs7V0FhckIsZUFBQyxTQUFTLEVBQUU7QUFDZixVQUFNLEtBQUssR0FBRyxDQUFDLFNBQVMsSUFBSSxTQUFTLEtBQUssSUFBSSxDQUFDLFFBQVEsQ0FBQztBQUN4RCxVQUFJLEtBQUssSUFBSSxJQUFJLENBQUMsT0FBTyxLQUFLLEdBQUcsRUFBRTtBQUNqQyxlQUFPLElBQUksQ0FBQztPQUNiOztBQUVELGFBQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsU0FBUyxJQUFJLEVBQUUsQ0FBQyxDQUFBO0tBQzNDOzs7U0FwQlUsZUFBZSIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9wbHVnaW5zL2NvbnNvbGUvc2VydmVyL3dpbGRjYXJkX21hdGNoZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBNaW5pbWF0Y2ggfSBmcm9tICdtaW5pbWF0Y2gnXG5cbmV4cG9ydCBjbGFzcyBXaWxkY2FyZE1hdGNoZXIge1xuICBjb25zdHJ1Y3Rvcih3aWxkY2FyZFBhdHRlcm4sIGVtcHR5VmFsKSB7XG4gICAgdGhpcy5lbXB0eVZhbCA9IGVtcHR5VmFsO1xuICAgIHRoaXMucGF0dGVybiA9IFN0cmluZyh3aWxkY2FyZFBhdHRlcm4gfHwgJyonKTtcbiAgICB0aGlzLm1hdGNoZXIgPSBuZXcgTWluaW1hdGNoKHRoaXMucGF0dGVybiwge1xuICAgICAgbm9nbG9ic3RhcjogdHJ1ZSxcbiAgICAgIGRvdDogdHJ1ZSxcbiAgICAgIG5vY2FzZTogdHJ1ZSxcbiAgICAgIG1hdGNoQmFzZTogdHJ1ZSxcbiAgICAgIG5vY29tbWVudDogdHJ1ZVxuICAgIH0pXG4gIH1cblxuICBtYXRjaChjYW5kaWRhdGUpIHtcbiAgICBjb25zdCBlbXB0eSA9ICFjYW5kaWRhdGUgfHwgY2FuZGlkYXRlID09PSB0aGlzLmVtcHR5VmFsO1xuICAgIGlmIChlbXB0eSAmJiB0aGlzLnBhdHRlcm4gPT09ICcqJykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMubWF0Y2hlci5tYXRjaChjYW5kaWRhdGUgfHwgJycpXG4gIH1cbn1cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/console/server/wildcard_matcher.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;yBAA0B,WAAW;;IAExB,eAAe;AACf,WADA,eAAe,CACd,eAAe,EAAE,QAAQ,EAAE;0BAD5B,eAAe;;AAExB,QAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;AACzB,QAAI,CAAC,OAAO,GAAG,MAAM,CAAC,eAAe,IAAI,GAAG,CAAC,CAAC;AAC9C,QAAI,CAAC,OAAO,GAAG,yBAAc,IAAI,CAAC,OAAO,EAAE;AACzC,gBAAU,EAAE,IAAI;AAChB,SAAG,EAAE,IAAI;AACT,YAAM,EAAE,IAAI;AACZ,eAAS,EAAE,IAAI;AACf,eAAS,EAAE,IAAI;KAChB,CAAC,CAAA;GACH;;eAXU,eAAe;;WAarB,eAAC,SAAS,EAAE;AACf,UAAM,KAAK,GAAG,CAAC,SAAS,IAAI,SAAS,KAAK,IAAI,CAAC,QAAQ,CAAC;AACxD,UAAI,KAAK,IAAI,IAAI,CAAC,OAAO,KAAK,GAAG,EAAE;AACjC,eAAO,IAAI,CAAC;OACb;;AAED,aAAO,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,SAAS,IAAI,EAAE,CAAC,CAAA;KAC3C;;;SApBU,eAAe",
      "file": "/home/vio/v3metrics/src/plugins/console/server/wildcard_matcher.js",
      "sourcesContent": [
        "import { Minimatch } from 'minimatch'\n\nexport class WildcardMatcher {\n  constructor(wildcardPattern, emptyVal) {\n    this.emptyVal = emptyVal;\n    this.pattern = String(wildcardPattern || '*');\n    this.matcher = new Minimatch(this.pattern, {\n      noglobstar: true,\n      dot: true,\n      nocase: true,\n      matchBase: true,\n      nocomment: true\n    })\n  }\n\n  match(candidate) {\n    const empty = !candidate || candidate === this.emptyVal;\n    if (empty && this.pattern === '*') {\n      return true;\n    }\n\n    return this.matcher.match(candidate || '')\n  }\n}\n"
      ]
    },
    "mtime": 1467036622817
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/dev_mode/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nexports['default'] = function (kibana) {\n  if (!kibana.config.get('env.dev')) return;\n  return new kibana.Plugin({\n    uiExports: {\n      spyModes: ['plugins/dev_mode/vis_debug_spy_panel']\n    }\n  });\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMvZGV2X21vZGUvaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O3FCQUFlLFVBQUMsTUFBTSxFQUFLO0FBQ3pCLE1BQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsRUFBRSxPQUFPO0FBQzFDLFNBQU8sSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDO0FBQ3ZCLGFBQVMsRUFBRTtBQUNULGNBQVEsRUFBRSxDQUNSLHNDQUFzQyxDQUN2QztLQUNGO0dBQ0YsQ0FBQyxDQUFDO0NBQ0oiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvcGx1Z2lucy9kZXZfbW9kZS9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IChraWJhbmEpID0+IHtcbiAgaWYgKCFraWJhbmEuY29uZmlnLmdldCgnZW52LmRldicpKSByZXR1cm47XG4gIHJldHVybiBuZXcga2liYW5hLlBsdWdpbih7XG4gICAgdWlFeHBvcnRzOiB7XG4gICAgICBzcHlNb2RlczogW1xuICAgICAgICAncGx1Z2lucy9kZXZfbW9kZS92aXNfZGVidWdfc3B5X3BhbmVsJ1xuICAgICAgXVxuICAgIH1cbiAgfSk7XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/dev_mode/index.js"
      ],
      "names": [],
      "mappings": ";;;;;;qBAAe,UAAC,MAAM,EAAK;AACzB,MAAI,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,SAAS,CAAC,EAAE,OAAO;AAC1C,SAAO,IAAI,MAAM,CAAC,MAAM,CAAC;AACvB,aAAS,EAAE;AACT,cAAQ,EAAE,CACR,sCAAsC,CACvC;KACF;GACF,CAAC,CAAC;CACJ",
      "file": "/home/vio/v3metrics/src/plugins/dev_mode/index.js",
      "sourcesContent": [
        "export default (kibana) => {\n  if (!kibana.config.get('env.dev')) return;\n  return new kibana.Plugin({\n    uiExports: {\n      spyModes: [\n        'plugins/dev_mode/vis_debug_spy_panel'\n      ]\n    }\n  });\n};\n"
      ]
    },
    "mtime": 1467036622817
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/elasticsearch/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "trim",
              "trimRight"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "trim",
                "local": "trim"
              },
              {
                "kind": "named",
                "imported": "trimRight",
                "local": "trimRight"
              }
            ]
          },
          {
            "source": "boom",
            "imported": [
              "methodNotAllowed"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "methodNotAllowed",
                "local": "methodNotAllowed"
              }
            ]
          },
          {
            "source": "./lib/health_check",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "healthCheck"
              }
            ]
          },
          {
            "source": "./lib/expose_client",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "exposeClient"
              }
            ]
          },
          {
            "source": "./lib/create_proxy",
            "imported": [
              "default",
              "createPath"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "createProxy"
              },
              {
                "kind": "named",
                "imported": "createPath",
                "local": "createPath"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _boom = require('boom');\n\nvar _libHealth_check = require('./lib/health_check');\n\nvar _libHealth_check2 = _interopRequireDefault(_libHealth_check);\n\nvar _libExpose_client = require('./lib/expose_client');\n\nvar _libExpose_client2 = _interopRequireDefault(_libExpose_client);\n\nvar _libCreate_proxy = require('./lib/create_proxy');\n\nvar _libCreate_proxy2 = _interopRequireDefault(_libCreate_proxy);\n\nvar DEFAULT_REQUEST_HEADERS = ['authorization'];\n\nmodule.exports = function (_ref) {\n  var Plugin = _ref.Plugin;\n\n  return new Plugin({\n    require: ['kibana'],\n\n    config: function config(Joi) {\n      var array = Joi.array;\n      var boolean = Joi.boolean;\n      var number = Joi.number;\n      var object = Joi.object;\n      var string = Joi.string;\n      var ref = Joi.ref;\n\n      return object({\n        enabled: boolean()['default'](true),\n        url: string().uri({ scheme: ['http', 'https'] })['default']('http://localhost:9200'),\n        preserveHost: boolean()['default'](true),\n        username: string(),\n        password: string(),\n        shardTimeout: number()['default'](0),\n        requestTimeout: number()['default'](30000),\n        requestHeadersWhitelist: array().items().single()['default'](DEFAULT_REQUEST_HEADERS),\n        pingTimeout: number()['default'](ref('requestTimeout')),\n        startupTimeout: number()['default'](5000),\n        ssl: object({\n          verify: boolean()['default'](true),\n          ca: array().single().items(string()),\n          cert: string(),\n          key: string()\n        })['default'](),\n        apiVersion: Joi.string()['default']('master'),\n        engineVersion: Joi.string().valid('^5.0.0')['default']('^5.0.0')\n      })['default']();\n    },\n\n    uiExports: {\n      injectDefaultVars: function injectDefaultVars(server, options) {\n        return {\n          esRequestTimeout: options.requestTimeout,\n          esShardTimeout: options.shardTimeout,\n          esApiVersion: options.apiVersion\n        };\n      }\n    },\n\n    init: function init(server, options) {\n      var kibanaIndex = server.config().get('kibana.index');\n\n      // Expose the client to the server\n      (0, _libExpose_client2['default'])(server);\n      (0, _libCreate_proxy2['default'])(server, 'GET', '/{paths*}');\n      (0, _libCreate_proxy2['default'])(server, 'POST', '/_mget');\n      (0, _libCreate_proxy2['default'])(server, 'POST', '/{index}/_search');\n      (0, _libCreate_proxy2['default'])(server, 'POST', '/{index}/_field_stats');\n      (0, _libCreate_proxy2['default'])(server, 'POST', '/_msearch');\n      (0, _libCreate_proxy2['default'])(server, 'POST', '/_search/scroll');\n\n      function noBulkCheck(_ref2, reply) {\n        var path = _ref2.path;\n\n        if (/\\/_bulk/.test(path)) {\n          return reply({\n            error: 'You can not send _bulk requests to this interface.'\n          }).code(400).takeover();\n        }\n        return reply['continue']();\n      }\n\n      function noDirectIndex(_ref3, reply) {\n        var path = _ref3.path;\n\n        var requestPath = (0, _lodash.trimRight)((0, _lodash.trim)(path), '/');\n        var matchPath = (0, _libCreate_proxy.createPath)(kibanaIndex);\n\n        if (requestPath === matchPath) {\n          return reply((0, _boom.methodNotAllowed)('You cannot modify the primary kibana index through this interface.'));\n        }\n\n        reply['continue']();\n      }\n\n      // These routes are actually used to deal with things such as managing\n      // index patterns and advanced settings, but since hapi treats route\n      // wildcards as zero-or-more, the routes also match the kibana index\n      // itself. The client-side kibana code does not deal with creating nor\n      // destroying the kibana index, so we limit that ability here.\n      (0, _libCreate_proxy2['default'])(server, ['PUT', 'POST', 'DELETE'], '/' + kibanaIndex + '/{paths*}', {\n        pre: [noDirectIndex, noBulkCheck]\n      });\n\n      // Set up the health check service and start it.\n\n      var _healthCheck = (0, _libHealth_check2['default'])(this, server);\n\n      var start = _healthCheck.start;\n      var waitUntilReady = _healthCheck.waitUntilReady;\n\n      server.expose('waitUntilReady', waitUntilReady);\n      start();\n    }\n  });\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMvZWxhc3RpY3NlYXJjaC9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O3NCQUFnQyxRQUFROztvQkFDUCxNQUFNOzsrQkFFZixvQkFBb0I7Ozs7Z0NBQ25CLHFCQUFxQjs7OzsrQkFDTixvQkFBb0I7Ozs7QUFFNUQsSUFBTSx1QkFBdUIsR0FBRyxDQUFFLGVBQWUsQ0FBRSxDQUFDOztBQUVwRCxNQUFNLENBQUMsT0FBTyxHQUFHLFVBQVUsSUFBVSxFQUFFO01BQVYsTUFBTSxHQUFSLElBQVUsQ0FBUixNQUFNOztBQUNqQyxTQUFPLElBQUksTUFBTSxDQUFDO0FBQ2hCLFdBQU8sRUFBRSxDQUFDLFFBQVEsQ0FBQzs7QUFFbkIsVUFBTSxFQUFBLGdCQUFDLEdBQUcsRUFBRTtVQUNGLEtBQUssR0FBMkMsR0FBRyxDQUFuRCxLQUFLO1VBQUUsT0FBTyxHQUFrQyxHQUFHLENBQTVDLE9BQU87VUFBRSxNQUFNLEdBQTBCLEdBQUcsQ0FBbkMsTUFBTTtVQUFFLE1BQU0sR0FBa0IsR0FBRyxDQUEzQixNQUFNO1VBQUUsTUFBTSxHQUFVLEdBQUcsQ0FBbkIsTUFBTTtVQUFFLEdBQUcsR0FBSyxHQUFHLENBQVgsR0FBRzs7QUFFbkQsYUFBTyxNQUFNLENBQUM7QUFDWixlQUFPLEVBQUUsT0FBTyxFQUFFLFdBQVEsQ0FBQyxJQUFJLENBQUM7QUFDaEMsV0FBRyxFQUFFLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLE1BQU0sRUFBRSxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsRUFBRSxDQUFDLFdBQVEsQ0FBQyx1QkFBdUIsQ0FBQztBQUNqRixvQkFBWSxFQUFFLE9BQU8sRUFBRSxXQUFRLENBQUMsSUFBSSxDQUFDO0FBQ3JDLGdCQUFRLEVBQUUsTUFBTSxFQUFFO0FBQ2xCLGdCQUFRLEVBQUUsTUFBTSxFQUFFO0FBQ2xCLG9CQUFZLEVBQUUsTUFBTSxFQUFFLFdBQVEsQ0FBQyxDQUFD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bEI7Ozs7Ozs7QUFPRCx3Q0FDRSxNQUFNLEVBQ04sQ0FBQyxLQUFLLEVBQUUsTUFBTSxFQUFFLFFBQVEsQ0FBQyxRQUNyQixXQUFXLGdCQUNmO0FBQ0UsV0FBRyxFQUFFLENBQUUsYUFBYSxFQUFFLFdBQVcsQ0FBRTtPQUNwQyxDQUNGLENBQUM7Ozs7eUJBR2dDLGtDQUFZLElBQUksRUFBRSxNQUFNLENBQUM7O1VBQW5ELEtBQUssZ0JBQUwsS0FBSztVQUFFLGNBQWMsZ0JBQWQsY0FBYzs7QUFDN0IsWUFBTSxDQUFDLE1BQU0sQ0FBQyxnQkFBZ0IsRUFBRSxjQUFjLENBQUMsQ0FBQztBQUNoRCxXQUFLLEVBQUUsQ0FBQztLQUNUO0dBQ0YsQ0FBQyxDQUFDO0NBRUosQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9wbHVnaW5zL2VsYXN0aWNzZWFyY2gvaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB0cmltLCB0cmltUmlnaHQgfSBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHsgbWV0aG9kTm90QWxsb3dlZCB9IGZyb20gJ2Jvb20nO1xuXG5pbXBvcnQgaGVhbHRoQ2hlY2sgZnJvbSAnLi9saWIvaGVhbHRoX2NoZWNrJztcbmltcG9ydCBleHBvc2VDbGllbnQgZnJvbSAnLi9saWIvZXhwb3NlX2NsaWVudCc7XG5pbXBvcnQgY3JlYXRlUHJveHksIHsgY3JlYXRlUGF0aCB9IGZyb20gJy4vbGliL2NyZWF0ZV9wcm94eSc7XG5cbmNvbnN0IERFRkFVTFRfUkVRVUVTVF9IRUFERVJTID0gWyAnYXV0aG9yaXphdGlvbicgXTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoeyBQbHVnaW4gfSkge1xuICByZXR1cm4gbmV3IFBsdWdpbih7XG4gICAgcmVxdWlyZTogWydraWJhbmEnXSxcblxuICAgIGNvbmZpZyhKb2kpIHtcbiAgICAgIGNvbnN0IHsgYXJyYXksIGJvb2xlYW4sIG51bWJlciwgb2JqZWN0LCBzdHJpbmcsIHJlZiB9ID0gSm9pO1xuXG4gICAgICByZXR1cm4gb2JqZWN0KHtcbiAgICAgICAgZW5hYmxlZDogYm9vbGVhbigpLmRlZmF1bHQodHJ1ZSksXG4gICAgICAgIHVybDogc3RyaW5nKCkudXJpKHsgc2NoZW1lOiBbJ2h0dHAnLCAnaHR0cHMnXSB9KS5kZWZhdWx0KCdodHRwOi8vbG9jYWxob3N0OjkyMDAnKSxcbiAgICAgICAgcHJlc2VydmVIb3N0OiBib29sZWFuKCkuZGVmYXVsdCh0cnVlKSxcbiAgICAgICAgdXNlcm5hbWU6IHN0cmluZygpLFxuICAgICAgICBwYXNzd29yZDogc3RyaW5nKCksXG4gICAgICAgIHNoYXJkVGltZW91dDogbnVtYmVyKCkuZGVmYXVsdCgwKSxcbiAgICAgICAgcmVxdWVzdFRpbWVvdXQ6IG51bWJlcigpLmRlZmF1bHQoMzAwMDApLFxuICAgICAgICByZXF1ZXN0SGVhZGVyc1doaXRlbGlzdDogYXJyYXkoKS5pdGVtcygpLnNpbmdsZSgpLmRlZmF1bHQoREVGQVVMVF9SRVFVRVNUX0hFQURFUlMpLFxuICAgICAgICBwaW5nVGltZW91dDogbnVtYmVyKCkuZGVmYXVsdChyZWYoJ3JlcXVlc3RUaW1lb3V0JykpLFxuICAgICAgICBzdGFydHVwVGltZW91dDogbnVtYmVyKCkuZGVmYXVsdCg1MDAwKSxcbiAgICAgICAgc3NsOiBvYmplY3Qoe1xuICAgICAgICAgIHZlcmlmeTogYm9vbGVhbigpLmRlZmF1bHQodHJ1ZSksXG4gICAgICAgICAgY2E6IGFycmF5KCkuc2luZ2xlKCkuaXRlbXMoc3RyaW5nKCkpLFxuICAgICAgICAgIGNlcnQ6IHN0cmluZygpLFxuICAgICAgICAgIGtleTogc3RyaW5nKClcbiAgICAgICAgfSkuZGVmYXVsdCgpLFxuICAgICAgICBhcGlWZXJzaW9uOiBKb2kuc3RyaW5nKCkuZGVmYXVsdCgnbWFzdGVyJyksXG4gICAgICAgIGVuZ2luZVZlcnNpb246IEpvaS5zdHJpbmcoKS52YWxpZCgnXjUuMC4wJykuZGVmYXVsdCgnXjUuMC4wJylcbiAgICAgIH0pLmRlZmF1bHQoKTtcbiAgICB9LFxuXG4gICAgdWlFeHBvcnRzOiB7XG4gICAgICBpbmplY3REZWZhdWx0VmFycyhzZXJ2ZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBlc1JlcXVlc3RUaW1lb3V0OiBvcHRpb25zLnJlcXVlc3RUaW1lb3V0LFxuICAgICAgICAgIGVzU2hhcmRUaW1lb3V0OiBvcHRpb25zLnNoYXJkVGltZW91dCxcbiAgICAgICAgICBlc0FwaVZlcnNpb246IG9wdGlvbnMuYXBpVmVyc2lvbixcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgaW5pdChzZXJ2ZXIsIG9wdGlvbnMpIHtcbiAgICAgIGNvbnN0IGtpYmFuYUluZGV4ID0gc2VydmVyLmNvbmZpZygpLmdldCgna2liYW5hLmluZGV4Jyk7XG5cbiAgICAgIC8vIEV4cG9zZSB0aGUgY2xpZW50IHRvIHRoZSBzZXJ2ZXJcbiAgICAgIGV4cG9zZUNsaWVudChzZXJ2ZXIpO1xuICAgICAgY3JlYXRlUHJveHkoc2VydmVyLCAnR0VUJywgJy97cGF0aHMqfScpO1xuICAgICAgY3JlYXRlUHJveHkoc2VydmVyLCAnUE9TVCcsICcvX21nZXQnKTtcbiAgICAgIGNyZWF0ZVByb3h5KHNlcnZlciwgJ1BPU1QnLCAnL3tpbmRleH0vX3NlYXJjaCcpO1xuICAgICAgY3JlYXRlUHJveHkoc2VydmVyLCAnUE9TVCcsICcve2luZGV4fS9fZmllbGRfc3RhdHMnKTtcbiAgICAgIGNyZWF0ZVByb3h5KHNlcnZlciwgJ1BPU1QnLCAnL19tc2VhcmNoJyk7XG4gICAgICBjcmVhdGVQcm94eShzZXJ2ZXIsICdQT1NUJywgJy9fc2VhcmNoL3Njcm9sbCcpO1xuXG4gICAgICBmdW5jdGlvbiBub0J1bGtDaGVjayh7IHBhdGggfSwgcmVwbHkpIHtcbiAgICAgICAgaWYgKC9cXC9fYnVsay8udGVzdChwYXRoKSkge1xuICAgICAgICAgIHJldHVybiByZXBseSh7XG4gICAgICAgICAgICBlcnJvcjogJ1lvdSBjYW4gbm90IHNlbmQgX2J1bGsgcmVxdWVzdHMgdG8gdGhpcyBpbnRlcmZhY2UuJ1xuICAgICAgICAgIH0pLmNvZGUoNDAwKS50YWtlb3ZlcigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXBseS5jb250aW51ZSgpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBub0RpcmVjdEluZGV4KHsgcGF0aCB9LCByZXBseSkge1xuICAgICAgICBjb25zdCByZXF1ZXN0UGF0aCA9IHRyaW1SaWdodCh0cmltKHBhdGgpLCAnLycpO1xuICAgICAgICBjb25zdCBtYXRjaFBhdGggPSBjcmVhdGVQYXRoKGtpYmFuYUluZGV4KTtcblxuICAgICAgICBpZiAocmVxdWVzdFBhdGggPT09IG1hdGNoUGF0aCkge1xuICAgICAgICAgIHJldHVybiByZXBseShtZXRob2ROb3RBbGxvd2VkKCdZb3UgY2Fubm90IG1vZGlmeSB0aGUgcHJpbWFyeSBraWJhbmEgaW5kZXggdGhyb3VnaCB0aGlzIGludGVyZmFjZS4nKSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXBseS5jb250aW51ZSgpO1xuICAgICAgfVxuXG4gICAgICAvLyBUaGVzZSByb3V0ZXMgYXJlIGFjdHVhbGx5IHVzZWQgdG8gZGVhbCB3aXRoIHRoaW5ncyBzdWNoIGFzIG1hbmFnaW5nXG4gICAgICAvLyBpbmRleCBwYXR0ZXJucyBhbmQgYWR2YW5jZWQgc2V0dGluZ3MsIGJ1dCBzaW5jZSBoYXBpIHRyZWF0cyByb3V0ZVxuICAgICAgLy8gd2lsZGNhcmRzIGFzIHplcm8tb3ItbW9yZSwgdGhlIHJvdXRlcyBhbHNvIG1hdGNoIHRoZSBraWJhbmEgaW5kZXhcbiAgICAgIC8vIGl0c2VsZi4gVGhlIGNsaWVudC1zaWRlIGtpYmFuYSBjb2RlIGRvZXMgbm90IGRlYWwgd2l0aCBjcmVhdGluZyBub3JcbiAgICAgIC8vIGRlc3Ryb3lpbmcgdGhlIGtpYmFuYSBpbmRleCwgc28gd2UgbGltaXQgdGhhdCBhYmlsaXR5IGhlcmUuXG4gICAgICBjcmVhdGVQcm94eShcbiAgICAgICAgc2VydmVyLFxuICAgICAgICBbJ1BVVCcsICdQT1NUJywgJ0RFTEVURSddLFxuICAgICAgICBgLyR7a2liYW5hSW5kZXh9L3twYXRocyp9YCxcbiAgICAgICAge1xuICAgICAgICAgIHByZTogWyBub0RpcmVjdEluZGV4LCBub0J1bGtDaGVjayBdXG4gICAgICAgIH1cbiAgICAgICk7XG5cbiAgICAgIC8vIFNldCB1cCB0aGUgaGVhbHRoIGNoZWNrIHNlcnZpY2UgYW5kIHN0YXJ0IGl0LlxuICAgICAgY29uc3QgeyBzdGFydCwgd2FpdFVudGlsUmVhZHkgfSA9IGhlYWx0aENoZWNrKHRoaXMsIHNlcnZlcik7XG4gICAgICBzZXJ2ZXIuZXhwb3NlKCd3YWl0VW50aWxSZWFkeScsIHdhaXRVbnRpbFJlYWR5KTtcbiAgICAgIHN0YXJ0KCk7XG4gICAgfVxuICB9KTtcblxufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/elasticsearch/index.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/src/plugins/elasticsearch/index.js",
      "sourcesContent": [
        "import { trim, trimRight } from 'lodash';\nimport { methodNotAllowed } from 'boom';\n\nimport healthCheck from './lib/health_check';\nimport exposeClient from './lib/expose_client';\nimport createProxy, { createPath } from './lib/create_proxy';\n\nconst DEFAULT_REQUEST_HEADERS = [ 'authorization' ];\n\nmodule.exports = function ({ Plugin }) {\n  return new Plugin({\n    require: ['kibana'],\n\n    config(Joi) {\n      const { array, boolean, number, object, string, ref } = Joi;\n\n      return object({\n        enabled: boolean().default(true),\n        url: string().uri({ scheme: ['http', 'https'] }).default('http://localhost:9200'),\n        preserveHost: boolean().default(true),\n        username: string(),\n        password: string(),\n        shardTimeout: number().default(0),\n        requestTimeout: number().default(30000),\n        requestHeadersWhitelist: array().items().single().default(DEFAULT_REQUEST_HEADERS),\n        pingTimeout: number().default(ref('requestTimeout')),\n        startupTimeout: number().default(5000),\n        ssl: object({\n          verify: boolean().default(true),\n          ca: array().single().items(string()),\n          cert: string(),\n          key: string()\n        }).default(),\n        apiVersion: Joi.string().default('master'),\n        engineVersion: Joi.string().valid('^5.0.0').default('^5.0.0')\n      }).default();\n    },\n\n    uiExports: {\n      injectDefaultVars(server, options) {\n        return {\n          esRequestTimeout: options.requestTimeout,\n          esShardTimeout: options.shardTimeout,\n          esApiVersion: options.apiVersion,\n        };\n      }\n    },\n\n    init(server, options) {\n      const kibanaIndex = server.config().get('kibana.index');\n\n      // Expose the client to the server\n      exposeClient(server);\n      createProxy(server, 'GET', '/{paths*}');\n      createProxy(server, 'POST', '/_mget');\n      createProxy(server, 'POST', '/{index}/_search');\n      createProxy(server, 'POST', '/{index}/_field_stats');\n      createProxy(server, 'POST', '/_msearch');\n      createProxy(server, 'POST', '/_search/scroll');\n\n      function noBulkCheck({ path }, reply) {\n        if (/\\/_bulk/.test(path)) {\n          return reply({\n            error: 'You can not send _bulk requests to this interface.'\n          }).code(400).takeover();\n        }\n        return reply.continue();\n      }\n\n      function noDirectIndex({ path }, reply) {\n        const requestPath = trimRight(trim(path), '/');\n        const matchPath = createPath(kibanaIndex);\n\n        if (requestPath === matchPath) {\n          return reply(methodNotAllowed('You cannot modify the primary kibana index through this interface.'));\n        }\n\n        reply.continue();\n      }\n\n      // These routes are actually used to deal with things such as managing\n      // index patterns and advanced settings, but since hapi treats route\n      // wildcards as zero-or-more, the routes also match the kibana index\n      // itself. The client-side kibana code does not deal with creating nor\n      // destroying the kibana index, so we limit that ability here.\n      createProxy(\n        server,\n        ['PUT', 'POST', 'DELETE'],\n        `/${kibanaIndex}/{paths*}`,\n        {\n          pre: [ noDirectIndex, noBulkCheck ]\n        }\n      );\n\n      // Set up the health check service and start it.\n      const { start, waitUntilReady } = healthCheck(this, server);\n      server.expose('waitUntilReady', waitUntilReady);\n      start();\n    }\n  });\n\n};\n"
      ]
    },
    "mtime": 1467036622817
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/elasticsearch/lib/health_check.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "bluebird",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Promise"
              }
            ]
          },
          {
            "source": "elasticsearch",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "elasticsearch"
              }
            ]
          },
          {
            "source": "./expose_client",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "exposeClient"
              }
            ]
          },
          {
            "source": "./migrate_config",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "migrateConfig"
              }
            ]
          },
          {
            "source": "./create_kibana_index",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "createKibanaIndex"
              }
            ]
          },
          {
            "source": "./check_es_version",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "checkEsVersion"
              }
            ]
          },
          {
            "source": "./manage_uuid",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "manageUuid"
              }
            ]
          },
          {
            "source": "util",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "util"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _bluebird = require('bluebird');\n\nvar _bluebird2 = _interopRequireDefault(_bluebird);\n\nvar _elasticsearch = require('elasticsearch');\n\nvar _elasticsearch2 = _interopRequireDefault(_elasticsearch);\n\nvar _expose_client = require('./expose_client');\n\nvar _expose_client2 = _interopRequireDefault(_expose_client);\n\nvar _migrate_config = require('./migrate_config');\n\nvar _migrate_config2 = _interopRequireDefault(_migrate_config);\n\nvar _create_kibana_index = require('./create_kibana_index');\n\nvar _create_kibana_index2 = _interopRequireDefault(_create_kibana_index);\n\nvar _check_es_version = require('./check_es_version');\n\nvar _check_es_version2 = _interopRequireDefault(_check_es_version);\n\nvar _manage_uuid = require('./manage_uuid');\n\nvar _manage_uuid2 = _interopRequireDefault(_manage_uuid);\n\nvar _util = require('util');\n\nvar _util2 = _interopRequireDefault(_util);\n\nvar NoConnections = _elasticsearch2['default'].errors.NoConnections;\n\nvar format = _util2['default'].format;\n\nvar NO_INDEX = 'no_index';\nvar INITIALIZING = 'initializing';\nvar READY = 'ready';\n\nvar REQUEST_DELAY = 2500;\n\nmodule.exports = function (plugin, server) {\n  var config = server.config();\n  var client = server.plugins.elasticsearch.client;\n  var uuidManagement = (0, _manage_uuid2['default'])(server);\n\n  plugin.status.yellow('Waiting for Elasticsearch');\n\n  function waitForPong() {\n    return client.ping()['catch'](function (err) {\n      if (!(err instanceof NoConnections)) throw err;\n\n      plugin.status.red(format('Unable to connect to Elasticsearch at %s.', config.get('elasticsearch.url')));\n\n      return _bluebird2['default'].delay(REQUEST_DELAY).then(waitForPong);\n    });\n  }\n\n  // just figure out the current \"health\" of the es setup\n  function getHealth() {\n    return client.cluster.health({\n      timeout: '5s', // tells es to not sit around and wait forever\n      index: config.get('kibana.index'),\n      ignore: [408]\n    }).then(function (resp) {\n      // if \"timed_out\" === true then elasticsearch could not\n      // find any idices matching our filter within 5 seconds\n      if (!resp || resp.timed_out) {\n        return NO_INDEX;\n      }\n\n      // If status === \"red\" that means that index(es) were found\n      // but the shards are not ready for queries\n      if (resp.status === 'red') {\n        return INITIALIZING;\n      }\n\n      return READY;\n    });\n  }\n\n  function waitUntilReady() {\n    return getHealth().then(function (health) {\n      if (health !== READY) {\n        return _bluebird2['default'].delay(REQUEST_DELAY).then(waitUntilReady);\n      }\n    });\n  }\n\n  function waitForShards() {\n    return getHealth().then(function (health) {\n      if (health === NO_INDEX) {\n        plugin.status.yellow('No existing Kibana index found');\n        return (0, _create_kibana_index2['default'])(server);\n      }\n\n      if (health === INITIALIZING) {\n        plugin.status.red('Elasticsearch is still initializing the kibana index.');\n        return _bluebird2['default'].delay(REQUEST_DELAY).then(waitForShards);\n      }\n    });\n  }\n\n  function setGreenStatus() {\n    return plugin.status.green('Kibana index ready');\n  }\n\n  function check() {\n    return waitForPong().then(_lodash2['default'].partial(_check_es_version2['default'], server)).then(waitForShards).then(uuidManagement).then(setGreenStatus).then(_lodash2['default'].partial(_migrate_config2['default'], server))['catch'](function (err) {\n      return plugin.status.red(err);\n    });\n  }\n\n  var timeoutId = null;\n\n  function scheduleCheck(ms) {\n    if (timeoutId) return;\n\n    var myId = setTimeout(function () {\n      check()['finally'](function () {\n        if (timeoutId === myId) startorRestartChecking();\n      });\n    }, ms);\n\n    timeoutId = myId;\n  }\n\n  function startorRestartChecking() {\n    scheduleCheck(stopChecking() ? REQUEST_DELAY : 1);\n  }\n\n  function stopChecking() {\n    if (!timeoutId) return false;\n    clearTimeout(timeoutId);\n    timeoutId = null;\n    return true;\n  }\n\n  return {\n    waitUntilReady: waitUntilReady,\n    run: check,\n    start: startorRestartChecking,\n    stop: stopChecking,\n    isRunning: function isRunning() {\n      return !!timeoutId;\n    }\n  };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMvZWxhc3RpY3NlYXJjaC9saWIvaGVhbHRoX2NoZWNrLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7c0JBQWMsUUFBUTs7Ozt3QkFDRixVQUFVOzs7OzZCQUNKLGVBQWU7Ozs7NkJBQ2hCLGlCQUFpQjs7Ozs4QkFDaEIsa0JBQWtCOzs7O21DQUNkLHVCQUF1Qjs7OztnQ0FDMUIsb0JBQW9COzs7OzJCQUN4QixlQUFlOzs7O29CQUVyQixNQUFNOzs7O0FBRHZCLElBQU0sYUFBYSxHQUFHLDJCQUFjLE1BQU0sQ0FBQyxhQUFhLENBQUM7O0FBRXpELElBQU0sTUFBTSxHQUFHLGtCQUFLLE1BQU0sQ0FBQzs7QUFFM0IsSUFBTSxRQUFRLEdBQUcsVUFBVSxDQUFDO0FBQzVCLElBQU0sWUFBWSxHQUFHLGNBQWMsQ0FBQztBQUNwQyxJQUFNLEtBQUssR0FBRyxPQUFPLENBQUM7O0FBRXRCLElBQU0sYUFBYSxHQUFHLElBQUksQ0FBQzs7QUFFM0IsTUFBTSxDQUFDLE9BQU8sR0FBRyxVQUFVLE1BQU0sRUFBRSxNQUFNLEVBQUU7QUFDekMsTUFBTSxNQUFNLEdBQUcsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDO0FBQy9CLE1BQU0sTUFBTSxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQztBQUNuRCxNQUFNLGNBQWMsR0FBRyw4QkFBVyxNQUFNLENBQUMsQ0FBQzs7QUFFMUMsUUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsMkJBQTJCLENBQUMsQ0FBQzs7QUFFbEQsV0FBUyxXQUFXLEdBQUc7QUFDckIsV0FBTyxNQUFNLENBQUMsSUFBSSxFQUFFLFNBQU0sQ0FBQyxVQUFVLEdBQUcsRUFBRTtBQUN4QyxVQUFJLEVBQUUsR0FBRyxZQUFZLGFBQWEsQ0FBQSxBQUFDLEVBQUUsTUFBTSxHQUFHLENBQUM7O0FBRS9DLFlBQU0sQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFD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R0FBRztBQUNoQyxpQkFBYSxDQUFDLFlBQVksRUFBRSxHQUFHLGFBQWEsR0FBRyxDQUFDLENBQUMsQ0FBQztHQUNuRDs7QUFFRCxXQUFTLFlBQVksR0FBRztBQUN0QixRQUFJLENBQUMsU0FBUyxFQUFFLE9BQU8sS0FBSyxDQUFDO0FBQzdCLGdCQUFZLENBQUMsU0FBUyxDQUFDLENBQUM7QUFDeEIsYUFBUyxHQUFHLElBQUksQ0FBQztBQUNqQixXQUFPLElBQUksQ0FBQztHQUNiOztBQUVELFNBQU87QUFDTCxrQkFBYyxFQUFFLGNBQWM7QUFDOUIsT0FBRyxFQUFFLEtBQUs7QUFDVixTQUFLLEVBQUUsc0JBQXNCO0FBQzdCLFFBQUksRUFBRSxZQUFZO0FBQ2xCLGFBQVMsRUFBRSxxQkFBWTtBQUFFLGFBQU8sQ0FBQyxDQUFDLFNBQVMsQ0FBQztLQUFFO0dBQy9DLENBQUM7Q0FFSCxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMvZWxhc3RpY3NlYXJjaC9saWIvaGVhbHRoX2NoZWNrLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBQcm9taXNlIGZyb20gJ2JsdWViaXJkJztcbmltcG9ydCBlbGFzdGljc2VhcmNoIGZyb20gJ2VsYXN0aWNzZWFyY2gnO1xuaW1wb3J0IGV4cG9zZUNsaWVudCBmcm9tICcuL2V4cG9zZV9jbGllbnQnO1xuaW1wb3J0IG1pZ3JhdGVDb25maWcgZnJvbSAnLi9taWdyYXRlX2NvbmZpZyc7XG5pbXBvcnQgY3JlYXRlS2liYW5hSW5kZXggZnJvbSAnLi9jcmVhdGVfa2liYW5hX2luZGV4JztcbmltcG9ydCBjaGVja0VzVmVyc2lvbiBmcm9tICcuL2NoZWNrX2VzX3ZlcnNpb24nO1xuaW1wb3J0IG1hbmFnZVV1aWQgZnJvbSAnLi9tYW5hZ2VfdXVpZCc7XG5jb25zdCBOb0Nvbm5lY3Rpb25zID0gZWxhc3RpY3NlYXJjaC5lcnJvcnMuTm9Db25uZWN0aW9ucztcbmltcG9ydCB1dGlsIGZyb20gJ3V0aWwnO1xuY29uc3QgZm9ybWF0ID0gdXRpbC5mb3JtYXQ7XG5cbmNvbnN0IE5PX0lOREVYID0gJ25vX2luZGV4JztcbmNvbnN0IElOSVRJQUxJWklORyA9ICdpbml0aWFsaXppbmcnO1xuY29uc3QgUkVBRFkgPSAncmVhZHknO1xuXG5jb25zdCBSRVFVRVNUX0RFTEFZID0gMjUwMDtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAocGx1Z2luLCBzZXJ2ZXIpIHtcbiAgY29uc3QgY29uZmlnID0gc2VydmVyLmNvbmZpZygpO1xuICBjb25zdCBjbGllbnQgPSBzZXJ2ZXIucGx1Z2lucy5lbGFzdGljc2VhcmNoLmNsaWVudDtcbiAgY29uc3QgdXVpZE1hbmFnZW1lbnQgPSBtYW5hZ2VVdWlkKHNlcnZlcik7XG5cbiAgcGx1Z2luLnN0YXR1cy55ZWxsb3coJ1dhaXRpbmcgZm9yIEVsYXN0aWNzZWFyY2gnKTtcblxuICBmdW5jdGlvbiB3YWl0Rm9yUG9uZygpIHtcbiAgICByZXR1cm4gY2xpZW50LnBpbmcoKS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICBpZiAoIShlcnIgaW5zdGFuY2VvZiBOb0Nvbm5lY3Rpb25zKSkgdGhyb3cgZXJyO1xuXG4gICAgICBwbHVnaW4uc3RhdHVzLnJlZChmb3JtYXQoJ1VuYWJsZSB0byBjb25uZWN0IHRvIEVsYXN0aWNzZWFyY2ggYXQgJXMuJywgY29uZmlnLmdldCgnZWxhc3RpY3NlYXJjaC51cmwnKSkpO1xuXG4gICAgICByZXR1cm4gUHJvbWlzZS5kZWxheShSRVFVRVNUX0RFTEFZKS50aGVuKHdhaXRGb3JQb25nKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIGp1c3QgZmlndXJlIG91dCB0aGUgY3VycmVudCBcImhlYWx0aFwiIG9mIHRoZSBlcyBzZXR1cFxuICBmdW5jdGlvbiBnZXRIZWFsdGgoKSB7XG4gICAgcmV0dXJuIGNsaWVudC5jbHVzdGVyLmhlYWx0aCh7XG4gICAgICB0aW1lb3V0OiAnNXMnLCAvLyB0ZWxscyBlcyB0byBub3Qgc2l0IGFyb3VuZCBhbmQgd2FpdCBmb3JldmVyXG4gICAgICBpbmRleDogY29uZmlnLmdldCgna2liYW5hLmluZGV4JyksXG4gICAgICBpZ25vcmU6IFs0MDhdXG4gICAgfSlcbiAgICAudGhlbihmdW5jdGlvbiAocmVzcCkge1xuICAgICAgLy8gaWYgXCJ0aW1lZF9vdXRcIiA9PT0gdHJ1ZSB0aGVuIGVsYXN0aWNzZWFyY2ggY291bGQgbm90XG4gICAgICAvLyBmaW5kIGFueSBpZGljZXMgbWF0Y2hpbmcgb3VyIGZpbHRlciB3aXRoaW4gNSBzZWNvbmRzXG4gICAgICBpZiAoIXJlc3AgfHwgcmVzcC50aW1lZF9vdXQpIHtcbiAgICAgICAgcmV0dXJuIE5PX0lOREVYO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiBzdGF0dXMgPT09IFwicmVkXCIgdGhhdCBtZWFucyB0aGF0IGluZGV4KGVzKSB3ZXJlIGZvdW5kXG4gICAgICAvLyBidXQgdGhlIHNoYXJkcyBhcmUgbm90IHJlYWR5IGZvciBxdWVyaWVzXG4gICAgICBpZiAocmVzcC5zdGF0dXMgPT09ICdyZWQnKSB7XG4gICAgICAgIHJldHVybiBJTklUSUFMSVpJTkc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBSRUFEWTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHdhaXRVbnRpbFJlYWR5KCkge1xuICAgIHJldHVybiBnZXRIZWFsdGgoKVxuICAgIC50aGVuKGZ1bmN0aW9uIChoZWFsdGgpIHtcbiAgICAgIGlmIChoZWFsdGggIT09IFJFQURZKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLmRlbGF5KFJFUVVFU1RfREVMQVkpLnRoZW4od2FpdFVudGlsUmVhZHkpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gd2FpdEZvclNoYXJkcygpIHtcbiAgICByZXR1cm4gZ2V0SGVhbHRoKClcbiAgICAudGhlbihmdW5jdGlvbiAoaGVhbHRoKSB7XG4gICAgICBpZiAoaGVhbHRoID09PSBOT19JTkRFWCkge1xuICAgICAgICBwbHVnaW4uc3RhdHVzLnllbGxvdygnTm8gZXhpc3RpbmcgS2liYW5hIGluZGV4IGZvdW5kJyk7XG4gICAgICAgIHJldHVybiBjcmVhdGVLaWJhbmFJbmRleChzZXJ2ZXIpO1xuICAgICAgfVxuXG4gICAgICBpZiAoaGVhbHRoID09PSBJTklUSUFMSVpJTkcpIHtcbiAgICAgICAgcGx1Z2luLnN0YXR1cy5yZWQoJ0VsYXN0aWNzZWFyY2ggaXMgc3RpbGwgaW5pdGlhbGl6aW5nIHRoZSBraWJhbmEgaW5kZXguJyk7XG4gICAgICAgIHJldHVybiBQcm9taXNlLmRlbGF5KFJFUVVFU1RfREVMQVkpLnRoZW4od2FpdEZvclNoYXJkcyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBzZXRHcmVlblN0YXR1cygpIHtcbiAgICByZXR1cm4gcGx1Z2luLnN0YXR1cy5ncmVlbignS2liYW5hIGluZGV4IHJlYWR5Jyk7XG4gIH1cblxuICBmdW5jdGlvbiBjaGVjaygpIHtcbiAgICByZXR1cm4gd2FpdEZvclBvbmcoKVxuICAgIC50aGVuKF8ucGFydGlhbChjaGVja0VzVmVyc2lvbiwgc2VydmVyKSlcbiAgICAudGhlbih3YWl0Rm9yU2hhcmRzKVxuICAgIC50aGVuKHV1aWRNYW5hZ2VtZW50KVxuICAgIC50aGVuKHNldEdyZWVuU3RhdHVzKVxuICAgIC50aGVuKF8ucGFydGlhbChtaWdyYXRlQ29uZmlnLCBzZXJ2ZXIpKVxuICAgIC5jYXRjaChlcnIgPT4gcGx1Z2luLnN0YXR1cy5yZWQoZXJyKSk7XG4gIH1cblxuICBsZXQgdGltZW91dElkID0gbnVsbDtcblxuICBmdW5jdGlvbiBzY2hlZHVsZUNoZWNrKG1zKSB7XG4gICAgaWYgKHRpbWVvdXRJZCkgcmV0dXJuO1xuXG4gICAgY29uc3QgbXlJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgY2hlY2soKS5maW5hbGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRpbWVvdXRJZCA9PT0gbXlJZCkgc3RhcnRvclJlc3RhcnRDaGVja2luZygpO1xuICAgICAgfSk7XG4gICAgfSwgbXMpO1xuXG4gICAgdGltZW91dElkID0gbXlJZDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHN0YXJ0b3JSZXN0YXJ0Q2hlY2tpbmcoKSB7XG4gICAgc2NoZWR1bGVDaGVjayhzdG9wQ2hlY2tpbmcoKSA/IFJFUVVFU1RfREVMQVkgOiAxKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHN0b3BDaGVja2luZygpIHtcbiAgICBpZiAoIXRpbWVvdXRJZCkgcmV0dXJuIGZhbHNlO1xuICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICAgIHRpbWVvdXRJZCA9IG51bGw7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHdhaXRVbnRpbFJlYWR5OiB3YWl0VW50aWxSZWFkeSxcbiAgICBydW46IGNoZWNrLFxuICAgIHN0YXJ0OiBzdGFydG9yUmVzdGFydENoZWNraW5nLFxuICAgIHN0b3A6IHN0b3BDaGVja2luZyxcbiAgICBpc1J1bm5pbmc6IGZ1bmN0aW9uICgpIHsgcmV0dXJuICEhdGltZW91dElkOyB9LFxuICB9O1xuXG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/elasticsearch/lib/health_check.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/src/plugins/elasticsearch/lib/health_check.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport Promise from 'bluebird';\nimport elasticsearch from 'elasticsearch';\nimport exposeClient from './expose_client';\nimport migrateConfig from './migrate_config';\nimport createKibanaIndex from './create_kibana_index';\nimport checkEsVersion from './check_es_version';\nimport manageUuid from './manage_uuid';\nconst NoConnections = elasticsearch.errors.NoConnections;\nimport util from 'util';\nconst format = util.format;\n\nconst NO_INDEX = 'no_index';\nconst INITIALIZING = 'initializing';\nconst READY = 'ready';\n\nconst REQUEST_DELAY = 2500;\n\nmodule.exports = function (plugin, server) {\n  const config = server.config();\n  const client = server.plugins.elasticsearch.client;\n  const uuidManagement = manageUuid(server);\n\n  plugin.status.yellow('Waiting for Elasticsearch');\n\n  function waitForPong() {\n    return client.ping().catch(function (err) {\n      if (!(err instanceof NoConnections)) throw err;\n\n      plugin.status.red(format('Unable to connect to Elasticsearch at %s.', config.get('elasticsearch.url')));\n\n      return Promise.delay(REQUEST_DELAY).then(waitForPong);\n    });\n  }\n\n  // just figure out the current \"health\" of the es setup\n  function getHealth() {\n    return client.cluster.health({\n      timeout: '5s', // tells es to not sit around and wait forever\n      index: config.get('kibana.index'),\n      ignore: [408]\n    })\n    .then(function (resp) {\n      // if \"timed_out\" === true then elasticsearch could not\n      // find any idices matching our filter within 5 seconds\n      if (!resp || resp.timed_out) {\n        return NO_INDEX;\n      }\n\n      // If status === \"red\" that means that index(es) were found\n      // but the shards are not ready for queries\n      if (resp.status === 'red') {\n        return INITIALIZING;\n      }\n\n      return READY;\n    });\n  }\n\n  function waitUntilReady() {\n    return getHealth()\n    .then(function (health) {\n      if (health !== READY) {\n        return Promise.delay(REQUEST_DELAY).then(waitUntilReady);\n      }\n    });\n  }\n\n  function waitForShards() {\n    return getHealth()\n    .then(function (health) {\n      if (health === NO_INDEX) {\n        plugin.status.yellow('No existing Kibana index found');\n        return createKibanaIndex(server);\n      }\n\n      if (health === INITIALIZING) {\n        plugin.status.red('Elasticsearch is still initializing the kibana index.');\n        return Promise.delay(REQUEST_DELAY).then(waitForShards);\n      }\n    });\n  }\n\n  function setGreenStatus() {\n    return plugin.status.green('Kibana index ready');\n  }\n\n  function check() {\n    return waitForPong()\n    .then(_.partial(checkEsVersion, server))\n    .then(waitForShards)\n    .then(uuidManagement)\n    .then(setGreenStatus)\n    .then(_.partial(migrateConfig, server))\n    .catch(err => plugin.status.red(err));\n  }\n\n  let timeoutId = null;\n\n  function scheduleCheck(ms) {\n    if (timeoutId) return;\n\n    const myId = setTimeout(function () {\n      check().finally(function () {\n        if (timeoutId === myId) startorRestartChecking();\n      });\n    }, ms);\n\n    timeoutId = myId;\n  }\n\n  function startorRestartChecking() {\n    scheduleCheck(stopChecking() ? REQUEST_DELAY : 1);\n  }\n\n  function stopChecking() {\n    if (!timeoutId) return false;\n    clearTimeout(timeoutId);\n    timeoutId = null;\n    return true;\n  }\n\n  return {\n    waitUntilReady: waitUntilReady,\n    run: check,\n    start: startorRestartChecking,\n    stop: stopChecking,\n    isRunning: function () { return !!timeoutId; },\n  };\n\n};\n"
      ]
    },
    "mtime": 1467036622817
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/elasticsearch/lib/expose_client.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "elasticsearch",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "elasticsearch"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "bluebird",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Bluebird"
              }
            ]
          },
          {
            "source": "util",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "util"
              }
            ]
          },
          {
            "source": "url",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "url"
              }
            ]
          },
          {
            "source": "./call_with_request",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "callWithRequest"
              }
            ]
          },
          {
            "source": "./filter_headers",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "filterHeaders"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _elasticsearch = require('elasticsearch');\n\nvar _elasticsearch2 = _interopRequireDefault(_elasticsearch);\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _bluebird = require('bluebird');\n\nvar _bluebird2 = _interopRequireDefault(_bluebird);\n\nvar _util = require('util');\n\nvar _util2 = _interopRequireDefault(_util);\n\nvar _url = require('url');\n\nvar _url2 = _interopRequireDefault(_url);\n\nvar _call_with_request = require('./call_with_request');\n\nvar _call_with_request2 = _interopRequireDefault(_call_with_request);\n\nvar _filter_headers = require('./filter_headers');\n\nvar _filter_headers2 = _interopRequireDefault(_filter_headers);\n\nvar readFile = function readFile(file) {\n  return require('fs').readFileSync(file, 'utf8');\n};\n\nmodule.exports = function (server) {\n  var config = server.config();\n\n  var ElasticsearchClientLogging = (function () {\n    function ElasticsearchClientLogging() {\n      _classCallCheck(this, ElasticsearchClientLogging);\n    }\n\n    _createClass(ElasticsearchClientLogging, [{\n      key: 'error',\n      value: function error(err) {\n        server.log(['error', 'elasticsearch'], err);\n      }\n    }, {\n      key: 'warning',\n      value: function warning(message) {\n        server.log(['warning', 'elasticsearch'], message);\n      }\n    }, {\n      key: 'info',\n      value: function info() {}\n    }, {\n      key: 'debug',\n      value: function debug() {}\n    }, {\n      key: 'trace',\n      value: function trace() {}\n    }, {\n      key: 'close',\n      value: function close() {}\n    }]);\n\n    return ElasticsearchClientLogging;\n  })();\n\n  function createClient(options) {\n    options = _lodash2['default'].defaults(options || {}, {\n      url: config.get('elasticsearch.url'),\n      username: config.get('elasticsearch.username'),\n      password: config.get('elasticsearch.password'),\n      verifySsl: config.get('elasticsearch.ssl.verify'),\n      clientCrt: config.get('elasticsearch.ssl.cert'),\n      clientKey: config.get('elasticsearch.ssl.key'),\n      ca: config.get('elasticsearch.ssl.ca'),\n      apiVersion: config.get('elasticsearch.apiVersion'),\n      pingTimeout: config.get('elasticsearch.pingTimeout'),\n      requestTimeout: config.get('elasticsearch.requestTimeout'),\n      keepAlive: true,\n      auth: true\n    });\n\n    var uri = _url2['default'].parse(options.url);\n\n    var authorization = undefined;\n    if (options.auth && options.username && options.password) {\n      uri.auth = _util2['default'].format('%s:%s', options.username, options.password);\n    }\n\n    var ssl = { rejectUnauthorized: options.verifySsl };\n    if (options.clientCrt && options.clientKey) {\n      ssl.cert = readFile(options.clientCrt);\n      ssl.key = readFile(options.clientKey);\n    }\n    if (options.ca) {\n      ssl.ca = options.ca.map(readFile);\n    }\n\n    return new _elasticsearch2['default'].Client({\n      host: _url2['default'].format(uri),\n      ssl: ssl,\n      plugins: options.plugins,\n      apiVersion: options.apiVersion,\n      keepAlive: options.keepAlive,\n      pingTimeout: options.pingTimeout,\n      requestTimeout: options.requestTimeout,\n      defer: function defer() {\n        return _bluebird2['default'].defer();\n      },\n      log: ElasticsearchClientLogging\n    });\n  }\n\n  var client = createClient();\n  server.on('close', _lodash2['default'].bindKey(client, 'close'));\n\n  var noAuthClient = createClient({ auth: false });\n  server.on('close', _lodash2['default'].bindKey(noAuthClient, 'close'));\n\n  server.expose('ElasticsearchClientLogging', ElasticsearchClientLogging);\n  server.expose('client', client);\n  server.expose('createClient', createClient);\n  server.expose('callWithRequestFactory', _lodash2['default'].partial(_call_with_request2['default'], server));\n  server.expose('callWithRequest', (0, _call_with_request2['default'])(server, noAuthClient));\n  server.expose('filterHeaders', _filter_headers2['default']);\n  server.expose('errors', _elasticsearch2['default'].errors);\n\n  return client;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMvZWxhc3RpY3NlYXJjaC9saWIvZXhwb3NlX2NsaWVudC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs2QkFBMEIsZUFBZTs7OztzQkFDM0IsUUFBUTs7Ozt3QkFDRCxVQUFVOzs7O29CQUVkLE1BQU07Ozs7bUJBQ1AsS0FBSzs7OztpQ0FDTyxxQkFBcUI7Ozs7OEJBQ3ZCLGtCQUFrQjs7OztBQUo1QyxJQUFNLFFBQVEsR0FBRyxTQUFYLFFBQVEsQ0FBSSxJQUFJO1NBQUssT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLFlBQVksQ0FBQyxJQUFJLEVBQUUsTUFBTSxDQUFDO0NBQUEsQ0FBQzs7QUFNcEUsTUFBTSxDQUFDLE9BQU8sR0FBRyxVQUFVLE1BQU0sRUFBRTtBQUNqQyxNQUFNLE1BQU0sR0FBRyxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUM7O01BRXpCLDBCQUEwQjthQUExQiwwQkFBMEI7NEJBQTFCLDBCQUEwQjs7O2lCQUExQiwwQkFBMEI7O2FBQ3pCLGVBQUMsR0FBRyxFQUFFO0FBQ1QsY0FBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE9BQU8sRUFBRSxlQUFlLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztPQUM3Qzs7O2FBQ00saUJBQUMsT0FBTyxFQUFFO0FBQ2YsY0FBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLFNBQVMsRUFBRSxlQUFlLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQztPQUNuRDs7O2FBQ0csZ0JBQUcsRUFBRTs7O2FBQ0osaUJBQUcsRUFBRTs7O2FBQ0wsaUJBQUcsRUFBRTs7O2FBQ0wsaUJBQUcsRUFBRTs7O1dBVk4sMEJBQTBCOzs7QUFhaEMsV0FBUyxZQUFZLENBQUMsT0FBTyxFQUFFO0FBQzdCLFdBQU8sR0FBRyxvQkFBRSxRQUFRLENBQUMsT0FBTyxJQUFJLEVBQUUsRUFBRTtBQUNsQyxTQUFHLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxtQkFBbUIsQ0FB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QU0sQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFDaEMsUUFBTSxDQUFDLE1BQU0sQ0FBQyxjQUFjLEVBQUUsWUFBWSxDQUFDLENBQUM7QUFDNUMsUUFBTSxDQUFDLE1BQU0sQ0FBQyx3QkFBd0IsRUFBRSxvQkFBRSxPQUFPLGlDQUFrQixNQUFNLENBQUMsQ0FBQyxDQUFDO0FBQzVFLFFBQU0sQ0FBQyxNQUFNLENBQUMsaUJBQWlCLEVBQUUsb0NBQWdCLE1BQU0sRUFBRSxZQUFZLENBQUMsQ0FBQyxDQUFDO0FBQ3hFLFFBQU0sQ0FBQyxNQUFNLENBQUMsZUFBZSw4QkFBZ0IsQ0FBQztBQUM5QyxRQUFNLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRSwyQkFBYyxNQUFNLENBQUMsQ0FBQzs7QUFFOUMsU0FBTyxNQUFNLENBQUM7Q0FFZixDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMvZWxhc3RpY3NlYXJjaC9saWIvZXhwb3NlX2NsaWVudC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBlbGFzdGljc2VhcmNoIGZyb20gJ2VsYXN0aWNzZWFyY2gnO1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBCbHVlYmlyZCBmcm9tICdibHVlYmlyZCc7XG5jb25zdCByZWFkRmlsZSA9IChmaWxlKSA9PiByZXF1aXJlKCdmcycpLnJlYWRGaWxlU3luYyhmaWxlLCAndXRmOCcpO1xuaW1wb3J0IHV0aWwgZnJvbSAndXRpbCc7XG5pbXBvcnQgdXJsIGZyb20gJ3VybCc7XG5pbXBvcnQgY2FsbFdpdGhSZXF1ZXN0IGZyb20gJy4vY2FsbF93aXRoX3JlcXVlc3QnO1xuaW1wb3J0IGZpbHRlckhlYWRlcnMgZnJvbSAnLi9maWx0ZXJfaGVhZGVycyc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHNlcnZlcikge1xuICBjb25zdCBjb25maWcgPSBzZXJ2ZXIuY29uZmlnKCk7XG5cbiAgY2xhc3MgRWxhc3RpY3NlYXJjaENsaWVudExvZ2dpbmcge1xuICAgIGVycm9yKGVycikge1xuICAgICAgc2VydmVyLmxvZyhbJ2Vycm9yJywgJ2VsYXN0aWNzZWFyY2gnXSwgZXJyKTtcbiAgICB9XG4gICAgd2FybmluZyhtZXNzYWdlKSB7XG4gICAgICBzZXJ2ZXIubG9nKFsnd2FybmluZycsICdlbGFzdGljc2VhcmNoJ10sIG1lc3NhZ2UpO1xuICAgIH1cbiAgICBpbmZvKCkge31cbiAgICBkZWJ1ZygpIHt9XG4gICAgdHJhY2UoKSB7fVxuICAgIGNsb3NlKCkge31cbiAgfVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZUNsaWVudChvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IF8uZGVmYXVsdHMob3B0aW9ucyB8fCB7fSwge1xuICAgICAgdXJsOiBjb25maWcuZ2V0KCdlbGFzdGljc2VhcmNoLnVybCcpLFxuICAgICAgdXNlcm5hbWU6IGNvbmZpZy5nZXQoJ2VsYXN0aWNzZWFyY2gudXNlcm5hbWUnKSxcbiAgICAgIHBhc3N3b3JkOiBjb25maWcuZ2V0KCdlbGFzdGljc2VhcmNoLnBhc3N3b3JkJyksXG4gICAgICB2ZXJpZnlTc2w6IGNvbmZpZy5nZXQoJ2VsYXN0aWNzZWFyY2guc3NsLnZlcmlmeScpLFxuICAgICAgY2xpZW50Q3J0OiBjb25maWcuZ2V0KCdlbGFzdGljc2VhcmNoLnNzbC5jZXJ0JyksXG4gICAgICBjbGllbnRLZXk6IGNvbmZpZy5nZXQoJ2VsYXN0aWNzZWFyY2guc3NsLmtleScpLFxuICAgICAgY2E6IGNvbmZpZy5nZXQoJ2VsYXN0aWNzZWFyY2guc3NsLmNhJyksXG4gICAgICBhcGlWZXJzaW9uOiBjb25maWcuZ2V0KCdlbGFzdGljc2VhcmNoLmFwaVZlcnNpb24nKSxcbiAgICAgIHBpbmdUaW1lb3V0OiBjb25maWcuZ2V0KCdlbGFzdGljc2VhcmNoLnBpbmdUaW1lb3V0JyksXG4gICAgICByZXF1ZXN0VGltZW91dDogY29uZmlnLmdldCgnZWxhc3RpY3NlYXJjaC5yZXF1ZXN0VGltZW91dCcpLFxuICAgICAga2VlcEFsaXZlOiB0cnVlLFxuICAgICAgYXV0aDogdHJ1ZVxuICAgIH0pO1xuXG4gICAgY29uc3QgdXJpID0gdXJsLnBhcnNlKG9wdGlvbnMudXJsKTtcblxuICAgIGxldCBhdXRob3JpemF0aW9uO1xuICAgIGlmIChvcHRpb25zLmF1dGggJiYgb3B0aW9ucy51c2VybmFtZSAmJiBvcHRpb25zLnBhc3N3b3JkKSB7XG4gICAgICB1cmkuYXV0aCA9IHV0aWwuZm9ybWF0KCclczolcycsIG9wdGlvbnMudXNlcm5hbWUsIG9wdGlvbnMucGFzc3dvcmQpO1xuICAgIH1cblxuICAgIGNvbnN0IHNzbCA9IHsgcmVqZWN0VW5hdXRob3JpemVkOiBvcHRpb25zLnZlcmlmeVNzbCB9O1xuICAgIGlmIChvcHRpb25zLmNsaWVudENydCAmJiBvcHRpb25zLmNsaWVudEtleSkge1xuICAgICAgc3NsLmNlcnQgPSByZWFkRmlsZShvcHRpb25zLmNsaWVudENydCk7XG4gICAgICBzc2wua2V5ID0gcmVhZEZpbGUob3B0aW9ucy5jbGllbnRLZXkpO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5jYSkge1xuICAgICAgc3NsLmNhID0gb3B0aW9ucy5jYS5tYXAocmVhZEZpbGUpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgZWxhc3RpY3NlYXJjaC5DbGllbnQoe1xuICAgICAgaG9zdDogdXJsLmZvcm1hdCh1cmkpLFxuICAgICAgc3NsOiBzc2wsXG4gICAgICBwbHVnaW5zOiBvcHRpb25zLnBsdWdpbnMsXG4gICAgICBhcGlWZXJzaW9uOiBvcHRpb25zLmFwaVZlcnNpb24sXG4gICAgICBrZWVwQWxpdmU6IG9wdGlvbnMua2VlcEFsaXZlLFxuICAgICAgcGluZ1RpbWVvdXQ6IG9wdGlvbnMucGluZ1RpbWVvdXQsXG4gICAgICByZXF1ZXN0VGltZW91dDogb3B0aW9ucy5yZXF1ZXN0VGltZW91dCxcbiAgICAgIGRlZmVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBCbHVlYmlyZC5kZWZlcigpO1xuICAgICAgfSxcbiAgICAgIGxvZzogRWxhc3RpY3NlYXJjaENsaWVudExvZ2dpbmdcbiAgICB9KTtcbiAgfVxuXG4gIGNvbnN0IGNsaWVudCA9IGNyZWF0ZUNsaWVudCgpO1xuICBzZXJ2ZXIub24oJ2Nsb3NlJywgXy5iaW5kS2V5KGNsaWVudCwgJ2Nsb3NlJykpO1xuXG4gIGNvbnN0IG5vQXV0aENsaWVudCA9IGNyZWF0ZUNsaWVudCh7IGF1dGg6IGZhbHNlIH0pO1xuICBzZXJ2ZXIub24oJ2Nsb3NlJywgXy5iaW5kS2V5KG5vQXV0aENsaWVudCwgJ2Nsb3NlJykpO1xuXG4gIHNlcnZlci5leHBvc2UoJ0VsYXN0aWNzZWFyY2hDbGllbnRMb2dnaW5nJywgRWxhc3RpY3NlYXJjaENsaWVudExvZ2dpbmcpO1xuICBzZXJ2ZXIuZXhwb3NlKCdjbGllbnQnLCBjbGllbnQpO1xuICBzZXJ2ZXIuZXhwb3NlKCdjcmVhdGVDbGllbnQnLCBjcmVhdGVDbGllbnQpO1xuICBzZXJ2ZXIuZXhwb3NlKCdjYWxsV2l0aFJlcXVlc3RGYWN0b3J5JywgXy5wYXJ0aWFsKGNhbGxXaXRoUmVxdWVzdCwgc2VydmVyKSk7XG4gIHNlcnZlci5leHBvc2UoJ2NhbGxXaXRoUmVxdWVzdCcsIGNhbGxXaXRoUmVxdWVzdChzZXJ2ZXIsIG5vQXV0aENsaWVudCkpO1xuICBzZXJ2ZXIuZXhwb3NlKCdmaWx0ZXJIZWFkZXJzJywgZmlsdGVySGVhZGVycyk7XG4gIHNlcnZlci5leHBvc2UoJ2Vycm9ycycsIGVsYXN0aWNzZWFyY2guZXJyb3JzKTtcblxuICByZXR1cm4gY2xpZW50O1xuXG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/elasticsearch/lib/expose_client.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/src/plugins/elasticsearch/lib/expose_client.js",
      "sourcesContent": [
        "import elasticsearch from 'elasticsearch';\nimport _ from 'lodash';\nimport Bluebird from 'bluebird';\nconst readFile = (file) => require('fs').readFileSync(file, 'utf8');\nimport util from 'util';\nimport url from 'url';\nimport callWithRequest from './call_with_request';\nimport filterHeaders from './filter_headers';\n\nmodule.exports = function (server) {\n  const config = server.config();\n\n  class ElasticsearchClientLogging {\n    error(err) {\n      server.log(['error', 'elasticsearch'], err);\n    }\n    warning(message) {\n      server.log(['warning', 'elasticsearch'], message);\n    }\n    info() {}\n    debug() {}\n    trace() {}\n    close() {}\n  }\n\n  function createClient(options) {\n    options = _.defaults(options || {}, {\n      url: config.get('elasticsearch.url'),\n      username: config.get('elasticsearch.username'),\n      password: config.get('elasticsearch.password'),\n      verifySsl: config.get('elasticsearch.ssl.verify'),\n      clientCrt: config.get('elasticsearch.ssl.cert'),\n      clientKey: config.get('elasticsearch.ssl.key'),\n      ca: config.get('elasticsearch.ssl.ca'),\n      apiVersion: config.get('elasticsearch.apiVersion'),\n      pingTimeout: config.get('elasticsearch.pingTimeout'),\n      requestTimeout: config.get('elasticsearch.requestTimeout'),\n      keepAlive: true,\n      auth: true\n    });\n\n    const uri = url.parse(options.url);\n\n    let authorization;\n    if (options.auth && options.username && options.password) {\n      uri.auth = util.format('%s:%s', options.username, options.password);\n    }\n\n    const ssl = { rejectUnauthorized: options.verifySsl };\n    if (options.clientCrt && options.clientKey) {\n      ssl.cert = readFile(options.clientCrt);\n      ssl.key = readFile(options.clientKey);\n    }\n    if (options.ca) {\n      ssl.ca = options.ca.map(readFile);\n    }\n\n    return new elasticsearch.Client({\n      host: url.format(uri),\n      ssl: ssl,\n      plugins: options.plugins,\n      apiVersion: options.apiVersion,\n      keepAlive: options.keepAlive,\n      pingTimeout: options.pingTimeout,\n      requestTimeout: options.requestTimeout,\n      defer: function () {\n        return Bluebird.defer();\n      },\n      log: ElasticsearchClientLogging\n    });\n  }\n\n  const client = createClient();\n  server.on('close', _.bindKey(client, 'close'));\n\n  const noAuthClient = createClient({ auth: false });\n  server.on('close', _.bindKey(noAuthClient, 'close'));\n\n  server.expose('ElasticsearchClientLogging', ElasticsearchClientLogging);\n  server.expose('client', client);\n  server.expose('createClient', createClient);\n  server.expose('callWithRequestFactory', _.partial(callWithRequest, server));\n  server.expose('callWithRequest', callWithRequest(server, noAuthClient));\n  server.expose('filterHeaders', filterHeaders);\n  server.expose('errors', elasticsearch.errors);\n\n  return client;\n\n};\n"
      ]
    },
    "mtime": 1467036622817
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/elasticsearch/lib/call_with_request.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "bluebird",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Promise"
              }
            ]
          },
          {
            "source": "boom",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Boom"
              }
            ]
          },
          {
            "source": "./get_basic_auth_realm",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "getBasicAuthRealm"
              }
            ]
          },
          {
            "source": "lodash/internal/toPath",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "toPath"
              }
            ]
          },
          {
            "source": "./filter_headers",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "filterHeaders"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _bluebird = require('bluebird');\n\nvar _bluebird2 = _interopRequireDefault(_bluebird);\n\nvar _boom = require('boom');\n\nvar _boom2 = _interopRequireDefault(_boom);\n\nvar _get_basic_auth_realm = require('./get_basic_auth_realm');\n\nvar _get_basic_auth_realm2 = _interopRequireDefault(_get_basic_auth_realm);\n\nvar _lodashInternalToPath = require('lodash/internal/toPath');\n\nvar _lodashInternalToPath2 = _interopRequireDefault(_lodashInternalToPath);\n\nvar _filter_headers = require('./filter_headers');\n\nvar _filter_headers2 = _interopRequireDefault(_filter_headers);\n\nmodule.exports = function (server, client) {\n  return function (req, endpoint) {\n    var params = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];\n\n    var filteredHeaders = (0, _filter_headers2['default'])(req.headers, server.config().get('elasticsearch.requestHeadersWhitelist'));\n    _lodash2['default'].set(params, 'headers', filteredHeaders);\n    var path = (0, _lodashInternalToPath2['default'])(endpoint);\n    var api = _lodash2['default'].get(client, path);\n    var apiContext = _lodash2['default'].get(client, path.slice(0, -1));\n    if (_lodash2['default'].isEmpty(apiContext)) {\n      apiContext = client;\n    }\n    if (!api) throw new Error('callWithRequest called with an invalid endpoint: ' + endpoint);\n    return api.call(apiContext, params)['catch'](function (err) {\n      if (err.status === 401) {\n        // TODO: The err.message is temporary until we have support for getting headers in the client.\n        // Once we have that, we should be able to pass the contents of the WWW-Authenticate head to getRealm\n        var realm = (0, _get_basic_auth_realm2['default'])(err.message) || 'Authorization Required';\n        var options = { realm: realm };\n        return _bluebird2['default'].reject(_boom2['default'].unauthorized('Unauthorized', 'Basic', options));\n      }\n      return _bluebird2['default'].reject(err);\n    });\n  };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMvZWxhc3RpY3NlYXJjaC9saWIvY2FsbF93aXRoX3JlcXVlc3QuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztzQkFBYyxRQUFROzs7O3dCQUNGLFVBQVU7Ozs7b0JBQ2IsTUFBTTs7OztvQ0FDTyx3QkFBd0I7Ozs7b0NBQ25DLHdCQUF3Qjs7Ozs4QkFDakIsa0JBQWtCOzs7O0FBRTVDLE1BQU0sQ0FBQyxPQUFPLEdBQUcsVUFBQyxNQUFNLEVBQUUsTUFBTSxFQUFLO0FBQ25DLFNBQU8sVUFBQyxHQUFHLEVBQUUsUUFBUSxFQUFrQjtRQUFoQixNQUFNLHlEQUFHLEVBQUU7O0FBQ2hDLFFBQU0sZUFBZSxHQUFHLGlDQUFjLEdBQUcsQ0FBQyxPQUFPLEVBQUUsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyx1Q0FBdUMsQ0FBQyxDQUFDLENBQUM7QUFDakgsd0JBQUUsR0FBRyxDQUFDLE1BQU0sRUFBRSxTQUFTLEVBQUUsZUFBZSxDQUFDLENBQUM7QUFDMUMsUUFBTSxJQUFJLEdBQUcsdUNBQU8sUUFBUSxDQUFDLENBQUM7QUFDOUIsUUFBTSxHQUFHLEdBQUcsb0JBQUUsR0FBRyxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQztBQUNoQyxRQUFJLFVBQVUsR0FBRyxvQkFBRSxHQUFHLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNsRCxRQUFJLG9CQUFFLE9BQU8sQ0FBQyxVQUFVLENBQUMsRUFBRTtBQUN6QixnQkFBVSxHQUFHLE1BQU0sQ0FBQztLQUNyQjtBQUNELFFBQUksQ0FBQyxHQUFHLEVBQUUsTUFBTSxJQUFJLEtBQUssdURBQXFELFFBQVEsQ0FBRyxDQUFDO0FBQzFGLFdBQU8sR0FBRyxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsTUFBTSxDQUFDLFNBQzNCLENBQUMsVUFBQyxHQUFHLEVBQUs7QUFDZCxVQUFJLEdBQUcsQ0FBQyxNQUFNLEtBQUssR0FBRyxFQUFFOzs7QUFHdEIsWUFBTSxLQUFLLEdBQUcsdUNBQWtCLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSx3QkFBd0IsQ0FBQztBQUN6RSxZQUFNLE9BQU8sR0FBRyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsQ0FBQztBQUNqQyxlQUFPLHNCQUFRLE1BQU0sQ0FBQyxrQkFBSyxZQUFZLENBQUMsY0FBYyxFQUFFLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDO09BQzVFO0FBQ0QsYUFBTyxzQkFBUSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUM7S0FDNUIsQ0FBQyxDQUFDO0dBQ04sQ0FBQztDQUNILENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvcGx1Z2lucy9lbGFzdGljc2VhcmNoL2xpYi9jYWxsX3dpdGhfcmVxdWVzdC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgUHJvbWlzZSBmcm9tICdibHVlYmlyZCc7XG5pbXBvcnQgQm9vbSBmcm9tICdib29tJztcbmltcG9ydCBnZXRCYXNpY0F1dGhSZWFsbSBmcm9tICcuL2dldF9iYXNpY19hdXRoX3JlYWxtJztcbmltcG9ydCB0b1BhdGggZnJvbSAnbG9kYXNoL2ludGVybmFsL3RvUGF0aCc7XG5pbXBvcnQgZmlsdGVySGVhZGVycyBmcm9tICcuL2ZpbHRlcl9oZWFkZXJzJztcblxubW9kdWxlLmV4cG9ydHMgPSAoc2VydmVyLCBjbGllbnQpID0+IHtcbiAgcmV0dXJuIChyZXEsIGVuZHBvaW50LCBwYXJhbXMgPSB7fSkgPT4ge1xuICAgIGNvbnN0IGZpbHRlcmVkSGVhZGVycyA9IGZpbHRlckhlYWRlcnMocmVxLmhlYWRlcnMsIHNlcnZlci5jb25maWcoKS5nZXQoJ2VsYXN0aWNzZWFyY2gucmVxdWVzdEhlYWRlcnNXaGl0ZWxpc3QnKSk7XG4gICAgXy5zZXQocGFyYW1zLCAnaGVhZGVycycsIGZpbHRlcmVkSGVhZGVycyk7XG4gICAgY29uc3QgcGF0aCA9IHRvUGF0aChlbmRwb2ludCk7XG4gICAgY29uc3QgYXBpID0gXy5nZXQoY2xpZW50LCBwYXRoKTtcbiAgICBsZXQgYXBpQ29udGV4dCA9IF8uZ2V0KGNsaWVudCwgcGF0aC5zbGljZSgwLCAtMSkpO1xuICAgIGlmIChfLmlzRW1wdHkoYXBpQ29udGV4dCkpIHtcbiAgICAgIGFwaUNvbnRleHQgPSBjbGllbnQ7XG4gICAgfVxuICAgIGlmICghYXBpKSB0aHJvdyBuZXcgRXJyb3IoYGNhbGxXaXRoUmVxdWVzdCBjYWxsZWQgd2l0aCBhbiBpbnZhbGlkIGVuZHBvaW50OiAke2VuZHBvaW50fWApO1xuICAgIHJldHVybiBhcGkuY2FsbChhcGlDb250ZXh0LCBwYXJhbXMpXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBpZiAoZXJyLnN0YXR1cyA9PT0gNDAxKSB7XG4gICAgICAgICAgLy8gVE9ETzogVGhlIGVyci5tZXNzYWdlIGlzIHRlbXBvcmFyeSB1bnRpbCB3ZSBoYXZlIHN1cHBvcnQgZm9yIGdldHRpbmcgaGVhZGVycyBpbiB0aGUgY2xpZW50LlxuICAgICAgICAgIC8vIE9uY2Ugd2UgaGF2ZSB0aGF0LCB3ZSBzaG91bGQgYmUgYWJsZSB0byBwYXNzIHRoZSBjb250ZW50cyBvZiB0aGUgV1dXLUF1dGhlbnRpY2F0ZSBoZWFkIHRvIGdldFJlYWxtXG4gICAgICAgICAgY29uc3QgcmVhbG0gPSBnZXRCYXNpY0F1dGhSZWFsbShlcnIubWVzc2FnZSkgfHwgJ0F1dGhvcml6YXRpb24gUmVxdWlyZWQnO1xuICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7IHJlYWxtOiByZWFsbSB9O1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChCb29tLnVuYXV0aG9yaXplZCgnVW5hdXRob3JpemVkJywgJ0Jhc2ljJywgb3B0aW9ucykpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnIpO1xuICAgICAgfSk7XG4gIH07XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/elasticsearch/lib/call_with_request.js"
      ],
      "names": [],
      "mappings": ";;;;sBAAc,QAAQ;;;;wBACF,UAAU;;;;oBACb,MAAM;;;;oCACO,wBAAwB;;;;oCACnC,wBAAwB;;;;8BACjB,kBAAkB;;;;AAE5C,MAAM,CAAC,OAAO,GAAG,UAAC,MAAM,EAAE,MAAM,EAAK;AACnC,SAAO,UAAC,GAAG,EAAE,QAAQ,EAAkB;QAAhB,MAAM,yDAAG,EAAE;;AAChC,QAAM,eAAe,GAAG,iCAAc,GAAG,CAAC,OAAO,EAAE,MAAM,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,uCAAuC,CAAC,CAAC,CAAC;AACjH,wBAAE,GAAG,CAAC,MAAM,EAAE,SAAS,EAAE,eAAe,CAAC,CAAC;AAC1C,QAAM,IAAI,GAAG,uCAAO,QAAQ,CAAC,CAAC;AAC9B,QAAM,GAAG,GAAG,oBAAE,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;AAChC,QAAI,UAAU,GAAG,oBAAE,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AAClD,QAAI,oBAAE,OAAO,CAAC,UAAU,CAAC,EAAE;AACzB,gBAAU,GAAG,MAAM,CAAC;KACrB;AACD,QAAI,CAAC,GAAG,EAAE,MAAM,IAAI,KAAK,uDAAqD,QAAQ,CAAG,CAAC;AAC1F,WAAO,GAAG,CAAC,IAAI,CAAC,UAAU,EAAE,MAAM,CAAC,SAC3B,CAAC,UAAC,GAAG,EAAK;AACd,UAAI,GAAG,CAAC,MAAM,KAAK,GAAG,EAAE;;;AAGtB,YAAM,KAAK,GAAG,uCAAkB,GAAG,CAAC,OAAO,CAAC,IAAI,wBAAwB,CAAC;AACzE,YAAM,OAAO,GAAG,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC;AACjC,eAAO,sBAAQ,MAAM,CAAC,kBAAK,YAAY,CAAC,cAAc,EAAE,OAAO,EAAE,OAAO,CAAC,CAAC,CAAC;OAC5E;AACD,aAAO,sBAAQ,MAAM,CAAC,GAAG,CAAC,CAAC;KAC5B,CAAC,CAAC;GACN,CAAC;CACH,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/elasticsearch/lib/call_with_request.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport Promise from 'bluebird';\nimport Boom from 'boom';\nimport getBasicAuthRealm from './get_basic_auth_realm';\nimport toPath from 'lodash/internal/toPath';\nimport filterHeaders from './filter_headers';\n\nmodule.exports = (server, client) => {\n  return (req, endpoint, params = {}) => {\n    const filteredHeaders = filterHeaders(req.headers, server.config().get('elasticsearch.requestHeadersWhitelist'));\n    _.set(params, 'headers', filteredHeaders);\n    const path = toPath(endpoint);\n    const api = _.get(client, path);\n    let apiContext = _.get(client, path.slice(0, -1));\n    if (_.isEmpty(apiContext)) {\n      apiContext = client;\n    }\n    if (!api) throw new Error(`callWithRequest called with an invalid endpoint: ${endpoint}`);\n    return api.call(apiContext, params)\n      .catch((err) => {\n        if (err.status === 401) {\n          // TODO: The err.message is temporary until we have support for getting headers in the client.\n          // Once we have that, we should be able to pass the contents of the WWW-Authenticate head to getRealm\n          const realm = getBasicAuthRealm(err.message) || 'Authorization Required';\n          const options = { realm: realm };\n          return Promise.reject(Boom.unauthorized('Unauthorized', 'Basic', options));\n        }\n        return Promise.reject(err);\n      });\n  };\n};\n"
      ]
    },
    "mtime": 1467036622817
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/elasticsearch/lib/get_basic_auth_realm.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "getBasicAuthRealm",
            "message"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "getBasicAuthRealm",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "message",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = getBasicAuthRealm;\n\nfunction getBasicAuthRealm(message) {\n  if (!message || typeof message !== 'string') return null;\n\n  var parts = message.match(/Basic\\ realm=\\\\\"(.*)\\\\\"/);\n  if (parts && parts.length === 2) return parts[1];else return null;\n}\n\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMvZWxhc3RpY3NlYXJjaC9saWIvZ2V0X2Jhc2ljX2F1dGhfcmVhbG0uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7cUJBQXdCLGlCQUFpQjs7QUFBMUIsU0FBUyxpQkFBaUIsQ0FBQyxPQUFPLEVBQUU7QUFDakQsTUFBSSxDQUFDLE9BQU8sSUFBSSxPQUFPLE9BQU8sS0FBSyxRQUFRLEVBQUUsT0FBTyxJQUFJLENBQUM7O0FBRXpELE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUMseUJBQXlCLENBQUMsQ0FBQztBQUN2RCxNQUFJLEtBQUssSUFBSSxLQUFLLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRSxPQUFPLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUM1QyxPQUFPLElBQUksQ0FBQztDQUNsQjs7QUFBQSxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMvZWxhc3RpY3NlYXJjaC9saWIvZ2V0X2Jhc2ljX2F1dGhfcmVhbG0uanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRCYXNpY0F1dGhSZWFsbShtZXNzYWdlKSB7XG4gIGlmICghbWVzc2FnZSB8fCB0eXBlb2YgbWVzc2FnZSAhPT0gJ3N0cmluZycpIHJldHVybiBudWxsO1xuXG4gIGNvbnN0IHBhcnRzID0gbWVzc2FnZS5tYXRjaCgvQmFzaWNcXCByZWFsbT1cXFxcXCIoLiopXFxcXFwiLyk7XG4gIGlmIChwYXJ0cyAmJiBwYXJ0cy5sZW5ndGggPT09IDIpIHJldHVybiBwYXJ0c1sxXTtcbiAgZWxzZSByZXR1cm4gbnVsbDtcbn07Il19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/elasticsearch/lib/get_basic_auth_realm.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAAwB,iBAAiB;;AAA1B,SAAS,iBAAiB,CAAC,OAAO,EAAE;AACjD,MAAI,CAAC,OAAO,IAAI,OAAO,OAAO,KAAK,QAAQ,EAAE,OAAO,IAAI,CAAC;;AAEzD,MAAM,KAAK,GAAG,OAAO,CAAC,KAAK,CAAC,yBAAyB,CAAC,CAAC;AACvD,MAAI,KAAK,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC,EAAE,OAAO,KAAK,CAAC,CAAC,CAAC,CAAC,KAC5C,OAAO,IAAI,CAAC;CAClB;;AAAA,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/elasticsearch/lib/get_basic_auth_realm.js",
      "sourcesContent": [
        "export default function getBasicAuthRealm(message) {\n  if (!message || typeof message !== 'string') return null;\n\n  const parts = message.match(/Basic\\ realm=\\\\\"(.*)\\\\\"/);\n  if (parts && parts.length === 2) return parts[1];\n  else return null;\n};"
      ]
    },
    "mtime": 1467036622817
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/elasticsearch/lib/filter_headers.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nexports['default'] = function (originalHeaders, headersToKeep) {\n\n  var normalizeHeader = function normalizeHeader(header) {\n    if (!header) {\n      return '';\n    }\n    header = header.toString();\n    return header.trim().toLowerCase();\n  };\n\n  // Normalize list of headers we want to allow in upstream request\n  var headersToKeepNormalized = headersToKeep.map(normalizeHeader);\n\n  // Normalize original headers in request\n  var originalHeadersNormalized = _lodash2['default'].mapKeys(originalHeaders, function (headerValue, headerName) {\n    return normalizeHeader(headerName);\n  });\n\n  return _lodash2['default'].pick(originalHeaders, headersToKeepNormalized);\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMvZWxhc3RpY3NlYXJjaC9saWIvZmlsdGVyX2hlYWRlcnMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7c0JBQWMsUUFBUTs7OztxQkFFUCxVQUFVLGVBQWUsRUFBRSxhQUFhLEVBQUU7O0FBRXZELE1BQU0sZUFBZSxHQUFHLFNBQWxCLGVBQWUsQ0FBYSxNQUFNLEVBQUU7QUFDeEMsUUFBSSxDQUFDLE1BQU0sRUFBRTtBQUNYLGFBQU8sRUFBRSxDQUFDO0tBQ1g7QUFDRCxVQUFNLEdBQUcsTUFBTSxDQUFDLFFBQVEsRUFBRSxDQUFDO0FBQzNCLFdBQU8sTUFBTSxDQUFDLElBQUksRUFBRSxDQUFDLFdBQVcsRUFBRSxDQUFDO0dBQ3BDLENBQUM7OztBQUdGLE1BQU0sdUJBQXVCLEdBQUcsYUFBYSxDQUFDLEdBQUcsQ0FBQyxlQUFlLENBQUMsQ0FBQzs7O0FBR25FLE1BQU0seUJBQXlCLEdBQUcsb0JBQUUsT0FBTyxDQUFDLGVBQWUsRUFBRSxVQUFVLFdBQVcsRUFBRSxVQUFVLEVBQUU7QUFDOUYsV0FBTyxlQUFlLENBQUMsVUFBVSxDQUFDLENBQUM7R0FDcEMsQ0FBQyxDQUFDOztBQUVILFNBQU8sb0JBQUUsSUFBSSxDQUFDLGVBQWUsRUFBRSx1QkFBdUIsQ0FBQyxDQUFDO0NBQ3pEIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMvZWxhc3RpY3NlYXJjaC9saWIvZmlsdGVyX2hlYWRlcnMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAob3JpZ2luYWxIZWFkZXJzLCBoZWFkZXJzVG9LZWVwKSB7XG5cbiAgY29uc3Qgbm9ybWFsaXplSGVhZGVyID0gZnVuY3Rpb24gKGhlYWRlcikge1xuICAgIGlmICghaGVhZGVyKSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuICAgIGhlYWRlciA9IGhlYWRlci50b1N0cmluZygpO1xuICAgIHJldHVybiBoZWFkZXIudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gIH07XG5cbiAgLy8gTm9ybWFsaXplIGxpc3Qgb2YgaGVhZGVycyB3ZSB3YW50IHRvIGFsbG93IGluIHVwc3RyZWFtIHJlcXVlc3RcbiAgY29uc3QgaGVhZGVyc1RvS2VlcE5vcm1hbGl6ZWQgPSBoZWFkZXJzVG9LZWVwLm1hcChub3JtYWxpemVIZWFkZXIpO1xuXG4gIC8vIE5vcm1hbGl6ZSBvcmlnaW5hbCBoZWFkZXJzIGluIHJlcXVlc3RcbiAgY29uc3Qgb3JpZ2luYWxIZWFkZXJzTm9ybWFsaXplZCA9IF8ubWFwS2V5cyhvcmlnaW5hbEhlYWRlcnMsIGZ1bmN0aW9uIChoZWFkZXJWYWx1ZSwgaGVhZGVyTmFtZSkge1xuICAgIHJldHVybiBub3JtYWxpemVIZWFkZXIoaGVhZGVyTmFtZSk7XG4gIH0pO1xuXG4gIHJldHVybiBfLnBpY2sob3JpZ2luYWxIZWFkZXJzLCBoZWFkZXJzVG9LZWVwTm9ybWFsaXplZCk7XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/elasticsearch/lib/filter_headers.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;sBAAc,QAAQ;;;;qBAEP,UAAU,eAAe,EAAE,aAAa,EAAE;;AAEvD,MAAM,eAAe,GAAG,SAAlB,eAAe,CAAa,MAAM,EAAE;AACxC,QAAI,CAAC,MAAM,EAAE;AACX,aAAO,EAAE,CAAC;KACX;AACD,UAAM,GAAG,MAAM,CAAC,QAAQ,EAAE,CAAC;AAC3B,WAAO,MAAM,CAAC,IAAI,EAAE,CAAC,WAAW,EAAE,CAAC;GACpC,CAAC;;;AAGF,MAAM,uBAAuB,GAAG,aAAa,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;;;AAGnE,MAAM,yBAAyB,GAAG,oBAAE,OAAO,CAAC,eAAe,EAAE,UAAU,WAAW,EAAE,UAAU,EAAE;AAC9F,WAAO,eAAe,CAAC,UAAU,CAAC,CAAC;GACpC,CAAC,CAAC;;AAEH,SAAO,oBAAE,IAAI,CAAC,eAAe,EAAE,uBAAuB,CAAC,CAAC;CACzD",
      "file": "/home/vio/v3metrics/src/plugins/elasticsearch/lib/filter_headers.js",
      "sourcesContent": [
        "import _ from 'lodash';\n\nexport default function (originalHeaders, headersToKeep) {\n\n  const normalizeHeader = function (header) {\n    if (!header) {\n      return '';\n    }\n    header = header.toString();\n    return header.trim().toLowerCase();\n  };\n\n  // Normalize list of headers we want to allow in upstream request\n  const headersToKeepNormalized = headersToKeep.map(normalizeHeader);\n\n  // Normalize original headers in request\n  const originalHeadersNormalized = _.mapKeys(originalHeaders, function (headerValue, headerName) {\n    return normalizeHeader(headerName);\n  });\n\n  return _.pick(originalHeaders, headersToKeepNormalized);\n}\n"
      ]
    },
    "mtime": 1467036622817
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/elasticsearch/lib/migrate_config.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./upgrade_config",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "upgrade"
              }
            ]
          },
          {
            "source": "./kibana_index_mappings",
            "imported": [
              "mappings"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "mappings",
                "local": "mappings"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _upgrade_config = require('./upgrade_config');\n\nvar _upgrade_config2 = _interopRequireDefault(_upgrade_config);\n\nvar _kibana_index_mappings = require('./kibana_index_mappings');\n\nmodule.exports = function (server) {\n  var config = server.config();\n  var client = server.plugins.elasticsearch.client;\n  var options = {\n    index: config.get('kibana.index'),\n    type: 'config',\n    body: {\n      size: 1000,\n      sort: [{\n        buildNum: {\n          order: 'desc',\n          unmapped_type: _kibana_index_mappings.mappings.config.properties.buildNum.type\n        }\n      }]\n    }\n  };\n\n  return client.search(options).then((0, _upgrade_config2['default'])(server));\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMvZWxhc3RpY3NlYXJjaC9saWIvbWlncmF0ZV9jb25maWcuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs4QkFBb0Isa0JBQWtCOzs7O3FDQUNiLHlCQUF5Qjs7QUFFbEQsTUFBTSxDQUFDLE9BQU8sR0FBRyxVQUFVLE1BQU0sRUFBRTtBQUNqQyxNQUFNLE1BQU0sR0FBRyxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUM7QUFDL0IsTUFBTSxNQUFNLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDO0FBQ25ELE1BQU0sT0FBTyxHQUFJO0FBQ2YsU0FBSyxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsY0FBYyxDQUFDO0FBQ2pDLFFBQUksRUFBRSxRQUFRO0FBQ2QsUUFBSSxFQUFFO0FBQ0osVUFBSSxFQUFFLElBQUk7QUFDVixVQUFJLEVBQUUsQ0FDSjtBQUNFLGdCQUFRLEVBQUU7QUFDUixlQUFLLEVBQUUsTUFBTTtBQUNiLHVCQUFhLEVBQUUsZ0NBQVMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsSUFBSTtTQUN4RDtPQUNGLENBQ0Y7S0FDRjtHQUNGLENBQUM7O0FBRUYsU0FBTyxNQUFNLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxpQ0FBUSxNQUFNLENBQUMsQ0FBQyxDQUFDO0NBQ3JELENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvcGx1Z2lucy9lbGFzdGljc2VhcmNoL2xpYi9taWdyYXRlX2NvbmZpZy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB1cGdyYWRlIGZyb20gJy4vdXBncmFkZV9jb25maWcnO1xuaW1wb3J0IHsgbWFwcGluZ3MgfSBmcm9tICcuL2tpYmFuYV9pbmRleF9tYXBwaW5ncyc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHNlcnZlcikge1xuICBjb25zdCBjb25maWcgPSBzZXJ2ZXIuY29uZmlnKCk7XG4gIGNvbnN0IGNsaWVudCA9IHNlcnZlci5wbHVnaW5zLmVsYXN0aWNzZWFyY2guY2xpZW50O1xuICBjb25zdCBvcHRpb25zID0gIHtcbiAgICBpbmRleDogY29uZmlnLmdldCgna2liYW5hLmluZGV4JyksXG4gICAgdHlwZTogJ2NvbmZpZycsXG4gICAgYm9keToge1xuICAgICAgc2l6ZTogMTAwMCxcbiAgICAgIHNvcnQ6IFtcbiAgICAgICAge1xuICAgICAgICAgIGJ1aWxkTnVtOiB7XG4gICAgICAgICAgICBvcmRlcjogJ2Rlc2MnLFxuICAgICAgICAgICAgdW5tYXBwZWRfdHlwZTogbWFwcGluZ3MuY29uZmlnLnByb3BlcnRpZXMuYnVpbGROdW0udHlwZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgXVxuICAgIH1cbiAgfTtcblxuICByZXR1cm4gY2xpZW50LnNlYXJjaChvcHRpb25zKS50aGVuKHVwZ3JhZGUoc2VydmVyKSk7XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/elasticsearch/lib/migrate_config.js"
      ],
      "names": [],
      "mappings": ";;;;8BAAoB,kBAAkB;;;;qCACb,yBAAyB;;AAElD,MAAM,CAAC,OAAO,GAAG,UAAU,MAAM,EAAE;AACjC,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC;AAC/B,MAAM,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,MAAM,CAAC;AACnD,MAAM,OAAO,GAAI;AACf,SAAK,EAAE,MAAM,CAAC,GAAG,CAAC,cAAc,CAAC;AACjC,QAAI,EAAE,QAAQ;AACd,QAAI,EAAE;AACJ,UAAI,EAAE,IAAI;AACV,UAAI,EAAE,CACJ;AACE,gBAAQ,EAAE;AACR,eAAK,EAAE,MAAM;AACb,uBAAa,EAAE,gCAAS,MAAM,CAAC,UAAU,CAAC,QAAQ,CAAC,IAAI;SACxD;OACF,CACF;KACF;GACF,CAAC;;AAEF,SAAO,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,iCAAQ,MAAM,CAAC,CAAC,CAAC;CACrD,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/elasticsearch/lib/migrate_config.js",
      "sourcesContent": [
        "import upgrade from './upgrade_config';\nimport { mappings } from './kibana_index_mappings';\n\nmodule.exports = function (server) {\n  const config = server.config();\n  const client = server.plugins.elasticsearch.client;\n  const options =  {\n    index: config.get('kibana.index'),\n    type: 'config',\n    body: {\n      size: 1000,\n      sort: [\n        {\n          buildNum: {\n            order: 'desc',\n            unmapped_type: mappings.config.properties.buildNum.type\n          }\n        }\n      ]\n    }\n  };\n\n  return client.search(options).then(upgrade(server));\n};\n"
      ]
    },
    "mtime": 1467036622817
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/elasticsearch/lib/upgrade_config.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "bluebird",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Promise"
              }
            ]
          },
          {
            "source": "./is_upgradeable",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "isUpgradeable"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "util",
            "imported": [
              "format"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "format",
                "local": "format"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _bluebird = require('bluebird');\n\nvar _bluebird2 = _interopRequireDefault(_bluebird);\n\nvar _is_upgradeable = require('./is_upgradeable');\n\nvar _is_upgradeable2 = _interopRequireDefault(_is_upgradeable);\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _util = require('util');\n\nmodule.exports = function (server) {\n  var MAX_INTEGER = Math.pow(2, 53) - 1;\n\n  var client = server.plugins.elasticsearch.client;\n  var config = server.config();\n\n  function createNewConfig() {\n    return client.create({\n      index: config.get('kibana.index'),\n      type: 'config',\n      body: { buildNum: config.get('pkg.buildNum') },\n      id: config.get('pkg.version')\n    });\n  }\n\n  return function (response) {\n    var newConfig = {};\n\n    // Check to see if there are any doc. If not then we set the build number and id\n    if (response.hits.hits.length === 0) {\n      return createNewConfig();\n    }\n\n    // if we already have a the current version in the index then we need to stop\n    var devConfig = _lodash2['default'].find(response.hits.hits, function currentVersion(hit) {\n      return hit._id !== '@@version' && hit._id === config.get('pkg.version');\n    });\n\n    if (devConfig) return _bluebird2['default'].resolve();\n\n    // Look for upgradeable configs. If none of them are upgradeable\n    // then create a new one.\n    var body = _lodash2['default'].find(response.hits.hits, _is_upgradeable2['default'].bind(null, server));\n    if (!body) {\n      return createNewConfig();\n    }\n\n    // if the build number is still the template string (which it wil be in development)\n    // then we need to set it to the max interger. Otherwise we will set it to the build num\n    body._source.buildNum = config.get('pkg.buildNum');\n\n    server.log(['plugin', 'elasticsearch'], {\n      tmpl: 'Upgrade config from <%= prevVersion %> to <%= newVersion %>',\n      prevVersion: body._id,\n      newVersion: config.get('pkg.version')\n    });\n\n    return client.create({\n      index: config.get('kibana.index'),\n      type: 'config',\n      body: body._source,\n      id: config.get('pkg.version')\n    });\n  };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMvZWxhc3RpY3NlYXJjaC9saWIvdXBncmFkZV9jb25maWcuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozt3QkFBb0IsVUFBVTs7Ozs4QkFDSixrQkFBa0I7Ozs7c0JBQzlCLFFBQVE7Ozs7b0JBQ0MsTUFBTTs7QUFFN0IsTUFBTSxDQUFDLE9BQU8sR0FBRyxVQUFVLE1BQU0sRUFBRTtBQUNqQyxNQUFNLFdBQVcsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUM7O0FBRXhDLE1BQU0sTUFBTSxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQztBQUNuRCxNQUFNLE1BQU0sR0FBRyxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUM7O0FBRS9CLFdBQVMsZUFBZSxHQUFHO0FBQ3pCLFdBQU8sTUFBTSxDQUFDLE1BQU0sQ0FBQztBQUNuQixXQUFLLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUM7QUFDakMsVUFBSSxFQUFFLFFBQVE7QUFDZCxVQUFJLEVBQUUsRUFBRSxRQUFRLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUMsRUFBRTtBQUM5QyxRQUFFLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUM7S0FDOUIsQ0FBQyxDQUFDO0dBQ0o7O0FBRUQsU0FBTyxVQUFVLFFBQVEsRUFBRTtBQUN6QixRQUFNLFNBQVMsR0FBRyxFQUFFLENBQUM7OztBQUdyQixRQUFJLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUU7QUFDbkMsYUFBTyxlQUFlLEVBQUUsQ0FBQztLQUMxQjs7O0FBR0QsUUFBTSxTQUFTLEdBQUcsb0JBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLFNBQVMsY0FBYyxDQUFDLEdBQUcsRUFBRTtBQUN4RSxhQUFPLEdBQUcsQ0FBQyxHQUFHLEtBQUssV0FBVyxJQUFJLEdBQUcsQ0FBQyxHQUFHLEtBQUssTUFBTSxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsQ0FBQztLQUN6RSxDQUFDLENBQUM7O0FBRUgsUUFBSSxTQUFTLEVBQUUsT0FBTyxzQkFBUSxPQUFPLEVBQUUsQ0FBQzs7OztBQUl4QyxRQUFNLElBQUksR0FBRyxvQkFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsNEJBQWMsSUFBSSxDQUFDLElBQUksRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDO0FBQzFFLFFBQUksQ0FBQyxJQUFJLEVBQUU7QUFDVCxhQUFPLGVBQWUsRUFBRSxDQUFDO0tBQzFCOzs7O0FBSUQsUUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUMsQ0FBQzs7QUFFbkQsVUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLFFBQVEsRUFBRSxlQUFlLENBQUMsRUFBRTtBQUN0QyxVQUFJLEVBQUUsNkRBQTZEO0FBQ25FLGlCQUFXLEVBQUUsSUFBSSxDQUFDLEdBQUc7QUFDckIsZ0JBQVUsRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQztLQUN0QyxDQUFDLENBQUM7O0FBRUgsV0FBTyxNQUFNLENBQUMsTUFBTSxDQUFDO0FBQ25CLFdBQUssRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQztBQUNqQyxVQUFJLEVBQUUsUUFBUTtBQUNkLFVBQUksRUFBRSxJQUFJLENBQUMsT0FBTztBQUNsQixRQUFFLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUM7S0FDOUIsQ0FBQyxDQUFDO0dBQ0osQ0FBQztDQUNILENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvcGx1Z2lucy9lbGFzdGljc2VhcmNoL2xpYi91cGdyYWRlX2NvbmZpZy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQcm9taXNlIGZyb20gJ2JsdWViaXJkJztcbmltcG9ydCBpc1VwZ3JhZGVhYmxlIGZyb20gJy4vaXNfdXBncmFkZWFibGUnO1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IGZvcm1hdCB9IGZyb20gJ3V0aWwnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChzZXJ2ZXIpIHtcbiAgY29uc3QgTUFYX0lOVEVHRVIgPSBNYXRoLnBvdygyLCA1MykgLSAxO1xuXG4gIGNvbnN0IGNsaWVudCA9IHNlcnZlci5wbHVnaW5zLmVsYXN0aWNzZWFyY2guY2xpZW50O1xuICBjb25zdCBjb25maWcgPSBzZXJ2ZXIuY29uZmlnKCk7XG5cbiAgZnVuY3Rpb24gY3JlYXRlTmV3Q29uZmlnKCkge1xuICAgIHJldHVybiBjbGllbnQuY3JlYXRlKHtcbiAgICAgIGluZGV4OiBjb25maWcuZ2V0KCdraWJhbmEuaW5kZXgnKSxcbiAgICAgIHR5cGU6ICdjb25maWcnLFxuICAgICAgYm9keTogeyBidWlsZE51bTogY29uZmlnLmdldCgncGtnLmJ1aWxkTnVtJykgfSxcbiAgICAgIGlkOiBjb25maWcuZ2V0KCdwa2cudmVyc2lvbicpXG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgY29uc3QgbmV3Q29uZmlnID0ge307XG5cbiAgICAvLyBDaGVjayB0byBzZWUgaWYgdGhlcmUgYXJlIGFueSBkb2MuIElmIG5vdCB0aGVuIHdlIHNldCB0aGUgYnVpbGQgbnVtYmVyIGFuZCBpZFxuICAgIGlmIChyZXNwb25zZS5oaXRzLmhpdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gY3JlYXRlTmV3Q29uZmlnKCk7XG4gICAgfVxuXG4gICAgLy8gaWYgd2UgYWxyZWFkeSBoYXZlIGEgdGhlIGN1cnJlbnQgdmVyc2lvbiBpbiB0aGUgaW5kZXggdGhlbiB3ZSBuZWVkIHRvIHN0b3BcbiAgICBjb25zdCBkZXZDb25maWcgPSBfLmZpbmQocmVzcG9uc2UuaGl0cy5oaXRzLCBmdW5jdGlvbiBjdXJyZW50VmVyc2lvbihoaXQpIHtcbiAgICAgIHJldHVybiBoaXQuX2lkICE9PSAnQEB2ZXJzaW9uJyAmJiBoaXQuX2lkID09PSBjb25maWcuZ2V0KCdwa2cudmVyc2lvbicpO1xuICAgIH0pO1xuXG4gICAgaWYgKGRldkNvbmZpZykgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuXG4gICAgLy8gTG9vayBmb3IgdXBncmFkZWFibGUgY29uZmlncy4gSWYgbm9uZSBvZiB0aGVtIGFyZSB1cGdyYWRlYWJsZVxuICAgIC8vIHRoZW4gY3JlYXRlIGEgbmV3IG9uZS5cbiAgICBjb25zdCBib2R5ID0gXy5maW5kKHJlc3BvbnNlLmhpdHMuaGl0cywgaXNVcGdyYWRlYWJsZS5iaW5kKG51bGwsIHNlcnZlcikpO1xuICAgIGlmICghYm9keSkge1xuICAgICAgcmV0dXJuIGNyZWF0ZU5ld0NvbmZpZygpO1xuICAgIH1cblxuICAgIC8vIGlmIHRoZSBidWlsZCBudW1iZXIgaXMgc3RpbGwgdGhlIHRlbXBsYXRlIHN0cmluZyAod2hpY2ggaXQgd2lsIGJlIGluIGRldmVsb3BtZW50KVxuICAgIC8vIHRoZW4gd2UgbmVlZCB0byBzZXQgaXQgdG8gdGhlIG1heCBpbnRlcmdlci4gT3RoZXJ3aXNlIHdlIHdpbGwgc2V0IGl0IHRvIHRoZSBidWlsZCBudW1cbiAgICBib2R5Ll9zb3VyY2UuYnVpbGROdW0gPSBjb25maWcuZ2V0KCdwa2cuYnVpbGROdW0nKTtcblxuICAgIHNlcnZlci5sb2coWydwbHVnaW4nLCAnZWxhc3RpY3NlYXJjaCddLCB7XG4gICAgICB0bXBsOiAnVXBncmFkZSBjb25maWcgZnJvbSA8JT0gcHJldlZlcnNpb24gJT4gdG8gPCU9IG5ld1ZlcnNpb24gJT4nLFxuICAgICAgcHJldlZlcnNpb246IGJvZHkuX2lkLFxuICAgICAgbmV3VmVyc2lvbjogY29uZmlnLmdldCgncGtnLnZlcnNpb24nKVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGNsaWVudC5jcmVhdGUoe1xuICAgICAgaW5kZXg6IGNvbmZpZy5nZXQoJ2tpYmFuYS5pbmRleCcpLFxuICAgICAgdHlwZTogJ2NvbmZpZycsXG4gICAgICBib2R5OiBib2R5Ll9zb3VyY2UsXG4gICAgICBpZDogY29uZmlnLmdldCgncGtnLnZlcnNpb24nKVxuICAgIH0pO1xuICB9O1xufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/elasticsearch/lib/upgrade_config.js"
      ],
      "names": [],
      "mappings": ";;;;wBAAoB,UAAU;;;;8BACJ,kBAAkB;;;;sBAC9B,QAAQ;;;;oBACC,MAAM;;AAE7B,MAAM,CAAC,OAAO,GAAG,UAAU,MAAM,EAAE;AACjC,MAAM,WAAW,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC;;AAExC,MAAM,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,MAAM,CAAC;AACnD,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC;;AAE/B,WAAS,eAAe,GAAG;AACzB,WAAO,MAAM,CAAC,MAAM,CAAC;AACnB,WAAK,EAAE,MAAM,CAAC,GAAG,CAAC,cAAc,CAAC;AACjC,UAAI,EAAE,QAAQ;AACd,UAAI,EAAE,EAAE,QAAQ,EAAE,MAAM,CAAC,GAAG,CAAC,cAAc,CAAC,EAAE;AAC9C,QAAE,EAAE,MAAM,CAAC,GAAG,CAAC,aAAa,CAAC;KAC9B,CAAC,CAAC;GACJ;;AAED,SAAO,UAAU,QAAQ,EAAE;AACzB,QAAM,SAAS,GAAG,EAAE,CAAC;;;AAGrB,QAAI,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,KAAK,CAAC,EAAE;AACnC,aAAO,eAAe,EAAE,CAAC;KAC1B;;;AAGD,QAAM,SAAS,GAAG,oBAAE,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,EAAE,SAAS,cAAc,CAAC,GAAG,EAAE;AACxE,aAAO,GAAG,CAAC,GAAG,KAAK,WAAW,IAAI,GAAG,CAAC,GAAG,KAAK,MAAM,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;KACzE,CAAC,CAAC;;AAEH,QAAI,SAAS,EAAE,OAAO,sBAAQ,OAAO,EAAE,CAAC;;;;AAIxC,QAAM,IAAI,GAAG,oBAAE,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,EAAE,4BAAc,IAAI,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC,CAAC;AAC1E,QAAI,CAAC,IAAI,EAAE;AACT,aAAO,eAAe,EAAE,CAAC;KAC1B;;;;AAID,QAAI,CAAC,OAAO,CAAC,QAAQ,GAAG,MAAM,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;;AAEnD,UAAM,CAAC,GAAG,CAAC,CAAC,QAAQ,EAAE,eAAe,CAAC,EAAE;AACtC,UAAI,EAAE,6DAA6D;AACnE,iBAAW,EAAE,IAAI,CAAC,GAAG;AACrB,gBAAU,EAAE,MAAM,CAAC,GAAG,CAAC,aAAa,CAAC;KACtC,CAAC,CAAC;;AAEH,WAAO,MAAM,CAAC,MAAM,CAAC;AACnB,WAAK,EAAE,MAAM,CAAC,GAAG,CAAC,cAAc,CAAC;AACjC,UAAI,EAAE,QAAQ;AACd,UAAI,EAAE,IAAI,CAAC,OAAO;AAClB,QAAE,EAAE,MAAM,CAAC,GAAG,CAAC,aAAa,CAAC;KAC9B,CAAC,CAAC;GACJ,CAAC;CACH,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/elasticsearch/lib/upgrade_config.js",
      "sourcesContent": [
        "import Promise from 'bluebird';\nimport isUpgradeable from './is_upgradeable';\nimport _ from 'lodash';\nimport { format } from 'util';\n\nmodule.exports = function (server) {\n  const MAX_INTEGER = Math.pow(2, 53) - 1;\n\n  const client = server.plugins.elasticsearch.client;\n  const config = server.config();\n\n  function createNewConfig() {\n    return client.create({\n      index: config.get('kibana.index'),\n      type: 'config',\n      body: { buildNum: config.get('pkg.buildNum') },\n      id: config.get('pkg.version')\n    });\n  }\n\n  return function (response) {\n    const newConfig = {};\n\n    // Check to see if there are any doc. If not then we set the build number and id\n    if (response.hits.hits.length === 0) {\n      return createNewConfig();\n    }\n\n    // if we already have a the current version in the index then we need to stop\n    const devConfig = _.find(response.hits.hits, function currentVersion(hit) {\n      return hit._id !== '@@version' && hit._id === config.get('pkg.version');\n    });\n\n    if (devConfig) return Promise.resolve();\n\n    // Look for upgradeable configs. If none of them are upgradeable\n    // then create a new one.\n    const body = _.find(response.hits.hits, isUpgradeable.bind(null, server));\n    if (!body) {\n      return createNewConfig();\n    }\n\n    // if the build number is still the template string (which it wil be in development)\n    // then we need to set it to the max interger. Otherwise we will set it to the build num\n    body._source.buildNum = config.get('pkg.buildNum');\n\n    server.log(['plugin', 'elasticsearch'], {\n      tmpl: 'Upgrade config from <%= prevVersion %> to <%= newVersion %>',\n      prevVersion: body._id,\n      newVersion: config.get('pkg.version')\n    });\n\n    return client.create({\n      index: config.get('kibana.index'),\n      type: 'config',\n      body: body._source,\n      id: config.get('pkg.version')\n    });\n  };\n};\n"
      ]
    },
    "mtime": 1467036622817
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/elasticsearch/lib/is_upgradeable.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "semver",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "semver"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _semver = require('semver');\n\nvar _semver2 = _interopRequireDefault(_semver);\n\nvar rcVersionRegex = /(\\d+\\.\\d+\\.\\d+)\\-rc(\\d+)/i;\n\nmodule.exports = function (server, doc) {\n  var config = server.config();\n  if (/alpha|beta|snapshot/i.test(doc._id)) return false;\n  if (!doc._id) return false;\n  if (doc._id === config.get('pkg.version')) return false;\n\n  var packageRcRelease = Infinity;\n  var rcRelease = Infinity;\n  var packageVersion = config.get('pkg.version');\n  var version = doc._id;\n  var matches = doc._id.match(rcVersionRegex);\n  var packageMatches = config.get('pkg.version').match(rcVersionRegex);\n\n  if (matches) {\n    version = matches[1];\n    rcRelease = parseInt(matches[2], 10);\n  }\n\n  if (packageMatches) {\n    packageVersion = packageMatches[1];\n    packageRcRelease = parseInt(packageMatches[2], 10);\n  }\n\n  try {\n    if (_semver2['default'].gte(version, packageVersion) && rcRelease >= packageRcRelease) return false;\n  } catch (e) {\n    return false;\n  }\n  return true;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMvZWxhc3RpY3NlYXJjaC9saWIvaXNfdXBncmFkZWFibGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztzQkFBbUIsUUFBUTs7OztBQUMzQixJQUFNLGNBQWMsR0FBRywyQkFBMkIsQ0FBQzs7QUFFbkQsTUFBTSxDQUFDLE9BQU8sR0FBRyxVQUFVLE1BQU0sRUFBRSxHQUFHLEVBQUU7QUFDdEMsTUFBTSxNQUFNLEdBQUcsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDO0FBQy9CLE1BQUksc0JBQXNCLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBRSxPQUFPLEtBQUssQ0FBQztBQUN2RCxNQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxPQUFPLEtBQUssQ0FBQztBQUMzQixNQUFJLEdBQUcsQ0FBQyxHQUFHLEtBQUssTUFBTSxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsRUFBRSxPQUFPLEtBQUssQ0FBQzs7QUFFeEQsTUFBSSxnQkFBZ0IsR0FBRyxRQUFRLENBQUM7QUFDaEMsTUFBSSxTQUFTLEdBQUcsUUFBUSxDQUFDO0FBQ3pCLE1BQUksY0FBYyxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLENBQUM7QUFDL0MsTUFBSSxPQUFPLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQztBQUN0QixNQUFNLE9BQU8sR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxjQUFjLENBQUMsQ0FBQztBQUM5QyxNQUFNLGNBQWMsR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxDQUFDLEtBQUssQ0FBQyxjQUFjLENBQUMsQ0FBQzs7QUFFdkUsTUFBSSxPQUFPLEVBQUU7QUFDWCxXQUFPLEdBQUcsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3JCLGFBQVMsR0FBRyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0dBQ3RDOztBQUVELE1BQUksY0FBYyxFQUFFO0FBQ2xCLGtCQUFjLEdBQUcsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ25DLG9CQUFnQixHQUFHLFFBQVEsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7R0FDcEQ7O0FBRUQsTUFBSTtBQUNGLFFBQUksb0JBQU8sR0FBRyxDQUFDLE9BQU8sRUFBRSxjQUFjLENBQUMsSUFBSSxTQUFTLElBQUksZ0JBQWdCLEVBQUUsT0FBTyxLQUFLLENBQUM7R0FDeEYsQ0FBQyxPQUFPLENBQUMsRUFBRTtBQUNWLFdBQU8sS0FBSyxDQUFDO0dBQ2Q7QUFDRCxTQUFPLElBQUksQ0FBQztDQUNiLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvcGx1Z2lucy9lbGFzdGljc2VhcmNoL2xpYi9pc191cGdyYWRlYWJsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBzZW12ZXIgZnJvbSAnc2VtdmVyJztcbmNvbnN0IHJjVmVyc2lvblJlZ2V4ID0gLyhcXGQrXFwuXFxkK1xcLlxcZCspXFwtcmMoXFxkKykvaTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoc2VydmVyLCBkb2MpIHtcbiAgY29uc3QgY29uZmlnID0gc2VydmVyLmNvbmZpZygpO1xuICBpZiAoL2FscGhhfGJldGF8c25hcHNob3QvaS50ZXN0KGRvYy5faWQpKSByZXR1cm4gZmFsc2U7XG4gIGlmICghZG9jLl9pZCkgcmV0dXJuIGZhbHNlO1xuICBpZiAoZG9jLl9pZCA9PT0gY29uZmlnLmdldCgncGtnLnZlcnNpb24nKSkgcmV0dXJuIGZhbHNlO1xuXG4gIGxldCBwYWNrYWdlUmNSZWxlYXNlID0gSW5maW5pdHk7XG4gIGxldCByY1JlbGVhc2UgPSBJbmZpbml0eTtcbiAgbGV0IHBhY2thZ2VWZXJzaW9uID0gY29uZmlnLmdldCgncGtnLnZlcnNpb24nKTtcbiAgbGV0IHZlcnNpb24gPSBkb2MuX2lkO1xuICBjb25zdCBtYXRjaGVzID0gZG9jLl9pZC5tYXRjaChyY1ZlcnNpb25SZWdleCk7XG4gIGNvbnN0IHBhY2thZ2VNYXRjaGVzID0gY29uZmlnLmdldCgncGtnLnZlcnNpb24nKS5tYXRjaChyY1ZlcnNpb25SZWdleCk7XG5cbiAgaWYgKG1hdGNoZXMpIHtcbiAgICB2ZXJzaW9uID0gbWF0Y2hlc1sxXTtcbiAgICByY1JlbGVhc2UgPSBwYXJzZUludChtYXRjaGVzWzJdLCAxMCk7XG4gIH1cblxuICBpZiAocGFja2FnZU1hdGNoZXMpIHtcbiAgICBwYWNrYWdlVmVyc2lvbiA9IHBhY2thZ2VNYXRjaGVzWzFdO1xuICAgIHBhY2thZ2VSY1JlbGVhc2UgPSBwYXJzZUludChwYWNrYWdlTWF0Y2hlc1syXSwgMTApO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBpZiAoc2VtdmVyLmd0ZSh2ZXJzaW9uLCBwYWNrYWdlVmVyc2lvbikgJiYgcmNSZWxlYXNlID49IHBhY2thZ2VSY1JlbGVhc2UpIHJldHVybiBmYWxzZTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/elasticsearch/lib/is_upgradeable.js"
      ],
      "names": [],
      "mappings": ";;;;sBAAmB,QAAQ;;;;AAC3B,IAAM,cAAc,GAAG,2BAA2B,CAAC;;AAEnD,MAAM,CAAC,OAAO,GAAG,UAAU,MAAM,EAAE,GAAG,EAAE;AACtC,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC;AAC/B,MAAI,sBAAsB,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,OAAO,KAAK,CAAC;AACvD,MAAI,CAAC,GAAG,CAAC,GAAG,EAAE,OAAO,KAAK,CAAC;AAC3B,MAAI,GAAG,CAAC,GAAG,KAAK,MAAM,CAAC,GAAG,CAAC,aAAa,CAAC,EAAE,OAAO,KAAK,CAAC;;AAExD,MAAI,gBAAgB,GAAG,QAAQ,CAAC;AAChC,MAAI,SAAS,GAAG,QAAQ,CAAC;AACzB,MAAI,cAAc,GAAG,MAAM,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;AAC/C,MAAI,OAAO,GAAG,GAAG,CAAC,GAAG,CAAC;AACtB,MAAM,OAAO,GAAG,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC;AAC9C,MAAM,cAAc,GAAG,MAAM,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC;;AAEvE,MAAI,OAAO,EAAE;AACX,WAAO,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;AACrB,aAAS,GAAG,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;GACtC;;AAED,MAAI,cAAc,EAAE;AAClB,kBAAc,GAAG,cAAc,CAAC,CAAC,CAAC,CAAC;AACnC,oBAAgB,GAAG,QAAQ,CAAC,cAAc,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;GACpD;;AAED,MAAI;AACF,QAAI,oBAAO,GAAG,CAAC,OAAO,EAAE,cAAc,CAAC,IAAI,SAAS,IAAI,gBAAgB,EAAE,OAAO,KAAK,CAAC;GACxF,CAAC,OAAO,CAAC,EAAE;AACV,WAAO,KAAK,CAAC;GACd;AACD,SAAO,IAAI,CAAC;CACb,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/elasticsearch/lib/is_upgradeable.js",
      "sourcesContent": [
        "import semver from 'semver';\nconst rcVersionRegex = /(\\d+\\.\\d+\\.\\d+)\\-rc(\\d+)/i;\n\nmodule.exports = function (server, doc) {\n  const config = server.config();\n  if (/alpha|beta|snapshot/i.test(doc._id)) return false;\n  if (!doc._id) return false;\n  if (doc._id === config.get('pkg.version')) return false;\n\n  let packageRcRelease = Infinity;\n  let rcRelease = Infinity;\n  let packageVersion = config.get('pkg.version');\n  let version = doc._id;\n  const matches = doc._id.match(rcVersionRegex);\n  const packageMatches = config.get('pkg.version').match(rcVersionRegex);\n\n  if (matches) {\n    version = matches[1];\n    rcRelease = parseInt(matches[2], 10);\n  }\n\n  if (packageMatches) {\n    packageVersion = packageMatches[1];\n    packageRcRelease = parseInt(packageMatches[2], 10);\n  }\n\n  try {\n    if (semver.gte(version, packageVersion) && rcRelease >= packageRcRelease) return false;\n  } catch (e) {\n    return false;\n  }\n  return true;\n};\n"
      ]
    },
    "mtime": 1467036622817
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/elasticsearch/lib/kibana_index_mappings.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "mappings"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "mappings",
              "exported": "mappings"
            }
          ]
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar mappings = {\n  config: {\n    properties: {\n      buildNum: {\n        type: 'string',\n        index: 'not_analyzed'\n      }\n    }\n  },\n  server: {\n    properties: {\n      uuid: {\n        type: 'keyword'\n      }\n    }\n  }\n};\nexports.mappings = mappings;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMvZWxhc3RpY3NlYXJjaC9saWIva2liYW5hX2luZGV4X21hcHBpbmdzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQU8sSUFBTSxRQUFRLEdBQUc7QUFDdEIsUUFBTSxFQUFFO0FBQ04sY0FBVSxFQUFFO0FBQ1YsY0FBUSxFQUFFO0FBQ1IsWUFBSSxFQUFFLFFBQVE7QUFDZCxhQUFLLEVBQUUsY0FBYztPQUN0QjtLQUNGO0dBQ0Y7QUFDRCxRQUFNLEVBQUU7QUFDTixjQUFVLEVBQUU7QUFDVixVQUFJLEVBQUU7QUFDSixZQUFJLEVBQUUsU0FBUztPQUNoQjtLQUNGO0dBQ0Y7Q0FDRixDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMvZWxhc3RpY3NlYXJjaC9saWIva2liYW5hX2luZGV4X21hcHBpbmdzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IG1hcHBpbmdzID0ge1xuICBjb25maWc6IHtcbiAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICBidWlsZE51bToge1xuICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgaW5kZXg6ICdub3RfYW5hbHl6ZWQnXG4gICAgICB9XG4gICAgfVxuICB9LFxuICBzZXJ2ZXI6IHtcbiAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICB1dWlkOiB7XG4gICAgICAgIHR5cGU6ICdrZXl3b3JkJ1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/elasticsearch/lib/kibana_index_mappings.js"
      ],
      "names": [],
      "mappings": ";;;;;AAAO,IAAM,QAAQ,GAAG;AACtB,QAAM,EAAE;AACN,cAAU,EAAE;AACV,cAAQ,EAAE;AACR,YAAI,EAAE,QAAQ;AACd,aAAK,EAAE,cAAc;OACtB;KACF;GACF;AACD,QAAM,EAAE;AACN,cAAU,EAAE;AACV,UAAI,EAAE;AACJ,YAAI,EAAE,SAAS;OAChB;KACF;GACF;CACF,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/elasticsearch/lib/kibana_index_mappings.js",
      "sourcesContent": [
        "export const mappings = {\n  config: {\n    properties: {\n      buildNum: {\n        type: 'string',\n        index: 'not_analyzed'\n      }\n    }\n  },\n  server: {\n    properties: {\n      uuid: {\n        type: 'keyword'\n      }\n    }\n  }\n};\n"
      ]
    },
    "mtime": 1467036622817
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/elasticsearch/lib/create_kibana_index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./setup_error",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "SetupError"
              }
            ]
          },
          {
            "source": "util",
            "imported": [
              "format"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "format",
                "local": "format"
              }
            ]
          },
          {
            "source": "./kibana_index_mappings",
            "imported": [
              "mappings"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "mappings",
                "local": "mappings"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _setup_error = require('./setup_error');\n\nvar _setup_error2 = _interopRequireDefault(_setup_error);\n\nvar _util = require('util');\n\nvar _kibana_index_mappings = require('./kibana_index_mappings');\n\nmodule.exports = function (server) {\n  var client = server.plugins.elasticsearch.client;\n  var index = server.config().get('kibana.index');\n\n  function handleError(message) {\n    return function (err) {\n      throw new _setup_error2['default'](server, message, err);\n    };\n  }\n\n  return client.indices.create({\n    index: index,\n    body: {\n      settings: {\n        number_of_shards: 1\n      },\n      mappings: _kibana_index_mappings.mappings\n    }\n  })['catch'](handleError('Unable to create Kibana index \"<%= kibana.index %>\"')).then(function () {\n    return client.cluster.health({\n      waitForStatus: 'yellow',\n      index: index\n    })['catch'](handleError('Waiting for Kibana index \"<%= kibana.index %>\" to come online failed.'));\n  });\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMvZWxhc3RpY3NlYXJjaC9saWIvY3JlYXRlX2tpYmFuYV9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OzJCQUF1QixlQUFlOzs7O29CQUNmLE1BQU07O3FDQUNKLHlCQUF5Qjs7QUFFbEQsTUFBTSxDQUFDLE9BQU8sR0FBRyxVQUFVLE1BQU0sRUFBRTtBQUNqQyxNQUFNLE1BQU0sR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUM7QUFDbkQsTUFBTSxLQUFLLEdBQUcsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUMsQ0FBQzs7QUFFbEQsV0FBUyxXQUFXLENBQUMsT0FBTyxFQUFFO0FBQzVCLFdBQU8sVUFBVSxHQUFHLEVBQUU7QUFDcEIsWUFBTSw2QkFBZSxNQUFNLEVBQUUsT0FBTyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0tBQzVDLENBQUM7R0FDSDs7QUFFRCxTQUFPLE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDO0FBQzNCLFNBQUssRUFBRSxLQUFLO0FBQ1osUUFBSSxFQUFFO0FBQ0osY0FBUSxFQUFFO0FBQ1Isd0JBQWdCLEVBQUUsQ0FBQztPQUNwQjtBQUNELGNBQVEsaUNBQUE7S0FDVDtHQUNGLENBQUMsU0FDSSxDQUFDLFdBQVcsQ0FBQyxxREFBcUQsQ0FBQyxDQUFDLENBQ3pFLElBQUksQ0FBQyxZQUFZO0FBQ2hCLFdBQU8sTUFBTSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUM7QUFDM0IsbUJBQWEsRUFBRSxRQUFRO0FBQ3ZCLFdBQUssRUFBRSxLQUFLO0tBQ2IsQ0FBQyxTQUNJLENBQUMsV0FBVyxDQUFDLHVFQUF1RSxDQUFDLENBQUMsQ0FBQztHQUM5RixDQUFDLENBQUM7Q0FDSixDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMvZWxhc3RpY3NlYXJjaC9saWIvY3JlYXRlX2tpYmFuYV9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBTZXR1cEVycm9yIGZyb20gJy4vc2V0dXBfZXJyb3InO1xuaW1wb3J0IHsgZm9ybWF0IH0gZnJvbSAndXRpbCc7XG5pbXBvcnQgeyBtYXBwaW5ncyB9IGZyb20gJy4va2liYW5hX2luZGV4X21hcHBpbmdzJztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoc2VydmVyKSB7XG4gIGNvbnN0IGNsaWVudCA9IHNlcnZlci5wbHVnaW5zLmVsYXN0aWNzZWFyY2guY2xpZW50O1xuICBjb25zdCBpbmRleCA9IHNlcnZlci5jb25maWcoKS5nZXQoJ2tpYmFuYS5pbmRleCcpO1xuXG4gIGZ1bmN0aW9uIGhhbmRsZUVycm9yKG1lc3NhZ2UpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGVycikge1xuICAgICAgdGhyb3cgbmV3IFNldHVwRXJyb3Ioc2VydmVyLCBtZXNzYWdlLCBlcnIpO1xuICAgIH07XG4gIH1cblxuICByZXR1cm4gY2xpZW50LmluZGljZXMuY3JlYXRlKHtcbiAgICBpbmRleDogaW5kZXgsXG4gICAgYm9keToge1xuICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgbnVtYmVyX29mX3NoYXJkczogMVxuICAgICAgfSxcbiAgICAgIG1hcHBpbmdzXG4gICAgfVxuICB9KVxuICAuY2F0Y2goaGFuZGxlRXJyb3IoJ1VuYWJsZSB0byBjcmVhdGUgS2liYW5hIGluZGV4IFwiPCU9IGtpYmFuYS5pbmRleCAlPlwiJykpXG4gIC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gY2xpZW50LmNsdXN0ZXIuaGVhbHRoKHtcbiAgICAgIHdhaXRGb3JTdGF0dXM6ICd5ZWxsb3cnLFxuICAgICAgaW5kZXg6IGluZGV4XG4gICAgfSlcbiAgICAuY2F0Y2goaGFuZGxlRXJyb3IoJ1dhaXRpbmcgZm9yIEtpYmFuYSBpbmRleCBcIjwlPSBraWJhbmEuaW5kZXggJT5cIiB0byBjb21lIG9ubGluZSBmYWlsZWQuJykpO1xuICB9KTtcbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/elasticsearch/lib/create_kibana_index.js"
      ],
      "names": [],
      "mappings": ";;;;2BAAuB,eAAe;;;;oBACf,MAAM;;qCACJ,yBAAyB;;AAElD,MAAM,CAAC,OAAO,GAAG,UAAU,MAAM,EAAE;AACjC,MAAM,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,MAAM,CAAC;AACnD,MAAM,KAAK,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;;AAElD,WAAS,WAAW,CAAC,OAAO,EAAE;AAC5B,WAAO,UAAU,GAAG,EAAE;AACpB,YAAM,6BAAe,MAAM,EAAE,OAAO,EAAE,GAAG,CAAC,CAAC;KAC5C,CAAC;GACH;;AAED,SAAO,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC;AAC3B,SAAK,EAAE,KAAK;AACZ,QAAI,EAAE;AACJ,cAAQ,EAAE;AACR,wBAAgB,EAAE,CAAC;OACpB;AACD,cAAQ,iCAAA;KACT;GACF,CAAC,SACI,CAAC,WAAW,CAAC,qDAAqD,CAAC,CAAC,CACzE,IAAI,CAAC,YAAY;AAChB,WAAO,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC;AAC3B,mBAAa,EAAE,QAAQ;AACvB,WAAK,EAAE,KAAK;KACb,CAAC,SACI,CAAC,WAAW,CAAC,uEAAuE,CAAC,CAAC,CAAC;GAC9F,CAAC,CAAC;CACJ,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/elasticsearch/lib/create_kibana_index.js",
      "sourcesContent": [
        "import SetupError from './setup_error';\nimport { format } from 'util';\nimport { mappings } from './kibana_index_mappings';\n\nmodule.exports = function (server) {\n  const client = server.plugins.elasticsearch.client;\n  const index = server.config().get('kibana.index');\n\n  function handleError(message) {\n    return function (err) {\n      throw new SetupError(server, message, err);\n    };\n  }\n\n  return client.indices.create({\n    index: index,\n    body: {\n      settings: {\n        number_of_shards: 1\n      },\n      mappings\n    }\n  })\n  .catch(handleError('Unable to create Kibana index \"<%= kibana.index %>\"'))\n  .then(function () {\n    return client.cluster.health({\n      waitForStatus: 'yellow',\n      index: index\n    })\n    .catch(handleError('Waiting for Kibana index \"<%= kibana.index %>\" to come online failed.'));\n  });\n};\n"
      ]
    },
    "mtime": 1467036622817
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/elasticsearch/lib/setup_error.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "util",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "util"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _util = require('util');\n\nvar _util2 = _interopRequireDefault(_util);\n\nfunction SetupError(server, template, err) {\n  var config = server.config().get();\n  // don't override other setup errors\n  if (err && err instanceof SetupError) return err;\n  Error.captureStackTrace(this, this.constructor);\n  this.name = this.constructor.name;\n  this.message = _lodash2['default'].template(template)(config);\n  if (err) {\n    this.origError = err;\n    if (err.stack) this.stack = err.stack;\n  }\n}\n_util2['default'].inherits(SetupError, Error);\nmodule.exports = SetupError;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMvZWxhc3RpY3NlYXJjaC9saWIvc2V0dXBfZXJyb3IuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztzQkFBYyxRQUFROzs7O29CQUNMLE1BQU07Ozs7QUFFdkIsU0FBUyxVQUFVLENBQUMsTUFBTSxFQUFFLFFBQVEsRUFBRSxHQUFHLEVBQUU7QUFDekMsTUFBTSxNQUFNLEdBQUcsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDOztBQUVyQyxNQUFJLEdBQUcsSUFBSSxHQUFHLFlBQVksVUFBVSxFQUFFLE9BQU8sR0FBRyxDQUFDO0FBQ2pELE9BQUssQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQ2hELE1BQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUM7QUFDbEMsTUFBSSxDQUFDLE9BQU8sR0FBRyxvQkFBRSxRQUFRLENBQUMsUUFBUSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDNUMsTUFBSSxHQUFHLEVBQUU7QUFDUCxRQUFJLENBQUMsU0FBUyxHQUFHLEdBQUcsQ0FBQztBQUNyQixRQUFJLEdBQUcsQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLEtBQUssR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDO0dBQ3ZDO0NBQ0Y7QUFDRCxrQkFBSyxRQUFRLENBQUMsVUFBVSxFQUFFLEtBQUssQ0FBQyxDQUFDO0FBQ2pDLE1BQU0sQ0FBQyxPQUFPLEdBQUcsVUFBVSxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMvZWxhc3RpY3NlYXJjaC9saWIvc2V0dXBfZXJyb3IuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHV0aWwgZnJvbSAndXRpbCc7XG5cbmZ1bmN0aW9uIFNldHVwRXJyb3Ioc2VydmVyLCB0ZW1wbGF0ZSwgZXJyKSB7XG4gIGNvbnN0IGNvbmZpZyA9IHNlcnZlci5jb25maWcoKS5nZXQoKTtcbiAgLy8gZG9uJ3Qgb3ZlcnJpZGUgb3RoZXIgc2V0dXAgZXJyb3JzXG4gIGlmIChlcnIgJiYgZXJyIGluc3RhbmNlb2YgU2V0dXBFcnJvcikgcmV0dXJuIGVycjtcbiAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgdGhpcy5jb25zdHJ1Y3Rvcik7XG4gIHRoaXMubmFtZSA9IHRoaXMuY29uc3RydWN0b3IubmFtZTtcbiAgdGhpcy5tZXNzYWdlID0gXy50ZW1wbGF0ZSh0ZW1wbGF0ZSkoY29uZmlnKTtcbiAgaWYgKGVycikge1xuICAgIHRoaXMub3JpZ0Vycm9yID0gZXJyO1xuICAgIGlmIChlcnIuc3RhY2spIHRoaXMuc3RhY2sgPSBlcnIuc3RhY2s7XG4gIH1cbn1cbnV0aWwuaW5oZXJpdHMoU2V0dXBFcnJvciwgRXJyb3IpO1xubW9kdWxlLmV4cG9ydHMgPSBTZXR1cEVycm9yO1xuXG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/elasticsearch/lib/setup_error.js"
      ],
      "names": [],
      "mappings": ";;;;sBAAc,QAAQ;;;;oBACL,MAAM;;;;AAEvB,SAAS,UAAU,CAAC,MAAM,EAAE,QAAQ,EAAE,GAAG,EAAE;AACzC,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,GAAG,EAAE,CAAC;;AAErC,MAAI,GAAG,IAAI,GAAG,YAAY,UAAU,EAAE,OAAO,GAAG,CAAC;AACjD,OAAK,CAAC,iBAAiB,CAAC,IAAI,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;AAChD,MAAI,CAAC,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC;AAClC,MAAI,CAAC,OAAO,GAAG,oBAAE,QAAQ,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC,CAAC;AAC5C,MAAI,GAAG,EAAE;AACP,QAAI,CAAC,SAAS,GAAG,GAAG,CAAC;AACrB,QAAI,GAAG,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC,KAAK,CAAC;GACvC;CACF;AACD,kBAAK,QAAQ,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;AACjC,MAAM,CAAC,OAAO,GAAG,UAAU,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/elasticsearch/lib/setup_error.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport util from 'util';\n\nfunction SetupError(server, template, err) {\n  const config = server.config().get();\n  // don't override other setup errors\n  if (err && err instanceof SetupError) return err;\n  Error.captureStackTrace(this, this.constructor);\n  this.name = this.constructor.name;\n  this.message = _.template(template)(config);\n  if (err) {\n    this.origError = err;\n    if (err.stack) this.stack = err.stack;\n  }\n}\nutil.inherits(SetupError, Error);\nmodule.exports = SetupError;\n\n"
      ]
    },
    "mtime": 1467036622817
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/elasticsearch/lib/check_es_version.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "./es_bool",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "esBool"
              }
            ]
          },
          {
            "source": "./version_satisfies",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "versionSatisfies"
              }
            ]
          },
          {
            "source": "./setup_error",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "SetupError"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _es_bool = require('./es_bool');\n\nvar _es_bool2 = _interopRequireDefault(_es_bool);\n\nvar _version_satisfies = require('./version_satisfies');\n\nvar _version_satisfies2 = _interopRequireDefault(_version_satisfies);\n\nvar _setup_error = require('./setup_error');\n\nvar _setup_error2 = _interopRequireDefault(_setup_error);\n\nmodule.exports = function (server) {\n  server.log(['plugin', 'debug'], 'Checking Elasticsearch version');\n\n  var client = server.plugins.elasticsearch.client;\n  var engineVersion = server.config().get('elasticsearch.engineVersion');\n\n  return client.nodes.info().then(function (info) {\n    var badNodes = _lodash2['default'].filter(info.nodes, function (node) {\n      // remove nodes that satify required engine version\n      return !(0, _version_satisfies2['default'])(node.version, engineVersion);\n    });\n\n    if (!badNodes.length) return true;\n\n    var badNodeNames = badNodes.map(function (node) {\n      return 'Elasticsearch v' + node.version + ' @ ' + node.http_address + ' (' + node.ip + ')';\n    });\n\n    var message = 'This version of Kibana requires Elasticsearch ' + (engineVersion + ' on all nodes. I found ') + ('the following incompatible nodes in your cluster: ' + badNodeNames.join(','));\n\n    throw new _setup_error2['default'](server, message);\n  });\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMvZWxhc3RpY3NlYXJjaC9saWIvY2hlY2tfZXNfdmVyc2lvbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O3NCQUFjLFFBQVE7Ozs7dUJBQ0gsV0FBVzs7OztpQ0FDRCxxQkFBcUI7Ozs7MkJBQzNCLGVBQWU7Ozs7QUFFdEMsTUFBTSxDQUFDLE9BQU8sR0FBRyxVQUFVLE1BQU0sRUFBRTtBQUNqQyxRQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsUUFBUSxFQUFFLE9BQU8sQ0FBQyxFQUFFLGdDQUFnQyxDQUFDLENBQUM7O0FBRWxFLE1BQU0sTUFBTSxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQztBQUNuRCxNQUFNLGFBQWEsR0FBRyxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxDQUFDLDZCQUE2QixDQUFDLENBQUM7O0FBRXpFLFNBQU8sTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsQ0FDekIsSUFBSSxDQUFDLFVBQVUsSUFBSSxFQUFFO0FBQ3BCLFFBQU0sUUFBUSxHQUFHLG9CQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLFVBQVUsSUFBSSxFQUFFOztBQUVwRCxhQUFPLENBQUMsb0NBQWlCLElBQUksQ0FBQyxPQUFPLEVBQUUsYUFBYSxDQUFDLENBQUM7S0FDdkQsQ0FBQyxDQUFDOztBQUVILFFBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxFQUFFLE9BQU8sSUFBSSxDQUFDOztBQUVsQyxRQUFNLFlBQVksR0FBRyxRQUFRLENBQUMsR0FBRyxDQUFDLFVBQVUsSUFBSSxFQUFFO0FBQ2hELGFBQU8saUJBQWlCLEdBQUcsSUFBSSxDQUFDLE9BQU8sR0FBRyxLQUFLLEdBQUcsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLEdBQUcsSUFBSSxDQUFDLEVBQUUsR0FBRyxHQUFHLENBQUM7S0FDNUYsQ0FBQyxDQUFDOztBQUVILFFBQU0sT0FBTyxHQUFHLG9EQUNiLGFBQWEsNkJBQXlCLDJEQUNZLFlBQVksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUUsQ0FBQzs7QUFFOUUsVUFBTSw2QkFBZSxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7R0FDdkMsQ0FBQyxDQUFDO0NBQ0osQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9wbHVnaW5zL2VsYXN0aWNzZWFyY2gvbGliL2NoZWNrX2VzX3ZlcnNpb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IGVzQm9vbCBmcm9tICcuL2VzX2Jvb2wnO1xuaW1wb3J0IHZlcnNpb25TYXRpc2ZpZXMgZnJvbSAnLi92ZXJzaW9uX3NhdGlzZmllcyc7XG5pbXBvcnQgU2V0dXBFcnJvciBmcm9tICcuL3NldHVwX2Vycm9yJztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoc2VydmVyKSB7XG4gIHNlcnZlci5sb2coWydwbHVnaW4nLCAnZGVidWcnXSwgJ0NoZWNraW5nIEVsYXN0aWNzZWFyY2ggdmVyc2lvbicpO1xuXG4gIGNvbnN0IGNsaWVudCA9IHNlcnZlci5wbHVnaW5zLmVsYXN0aWNzZWFyY2guY2xpZW50O1xuICBjb25zdCBlbmdpbmVWZXJzaW9uID0gc2VydmVyLmNvbmZpZygpLmdldCgnZWxhc3RpY3NlYXJjaC5lbmdpbmVWZXJzaW9uJyk7XG5cbiAgcmV0dXJuIGNsaWVudC5ub2Rlcy5pbmZvKClcbiAgLnRoZW4oZnVuY3Rpb24gKGluZm8pIHtcbiAgICBjb25zdCBiYWROb2RlcyA9IF8uZmlsdGVyKGluZm8ubm9kZXMsIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAvLyByZW1vdmUgbm9kZXMgdGhhdCBzYXRpZnkgcmVxdWlyZWQgZW5naW5lIHZlcnNpb25cbiAgICAgIHJldHVybiAhdmVyc2lvblNhdGlzZmllcyhub2RlLnZlcnNpb24sIGVuZ2luZVZlcnNpb24pO1xuICAgIH0pO1xuXG4gICAgaWYgKCFiYWROb2Rlcy5sZW5ndGgpIHJldHVybiB0cnVlO1xuXG4gICAgY29uc3QgYmFkTm9kZU5hbWVzID0gYmFkTm9kZXMubWFwKGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICByZXR1cm4gJ0VsYXN0aWNzZWFyY2ggdicgKyBub2RlLnZlcnNpb24gKyAnIEAgJyArIG5vZGUuaHR0cF9hZGRyZXNzICsgJyAoJyArIG5vZGUuaXAgKyAnKSc7XG4gICAgfSk7XG5cbiAgICBjb25zdCBtZXNzYWdlID0gYFRoaXMgdmVyc2lvbiBvZiBLaWJhbmEgcmVxdWlyZXMgRWxhc3RpY3NlYXJjaCBgICtcbiAgICBgJHtlbmdpbmVWZXJzaW9ufSBvbiBhbGwgbm9kZXMuIEkgZm91bmQgYCArXG4gICAgYHRoZSBmb2xsb3dpbmcgaW5jb21wYXRpYmxlIG5vZGVzIGluIHlvdXIgY2x1c3RlcjogJHtiYWROb2RlTmFtZXMuam9pbignLCcpfWA7XG5cbiAgICB0aHJvdyBuZXcgU2V0dXBFcnJvcihzZXJ2ZXIsIG1lc3NhZ2UpO1xuICB9KTtcbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/elasticsearch/lib/check_es_version.js"
      ],
      "names": [],
      "mappings": ";;;;sBAAc,QAAQ;;;;uBACH,WAAW;;;;iCACD,qBAAqB;;;;2BAC3B,eAAe;;;;AAEtC,MAAM,CAAC,OAAO,GAAG,UAAU,MAAM,EAAE;AACjC,QAAM,CAAC,GAAG,CAAC,CAAC,QAAQ,EAAE,OAAO,CAAC,EAAE,gCAAgC,CAAC,CAAC;;AAElE,MAAM,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,MAAM,CAAC;AACnD,MAAM,aAAa,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,6BAA6B,CAAC,CAAC;;AAEzE,SAAO,MAAM,CAAC,KAAK,CAAC,IAAI,EAAE,CACzB,IAAI,CAAC,UAAU,IAAI,EAAE;AACpB,QAAM,QAAQ,GAAG,oBAAE,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,UAAU,IAAI,EAAE;;AAEpD,aAAO,CAAC,oCAAiB,IAAI,CAAC,OAAO,EAAE,aAAa,CAAC,CAAC;KACvD,CAAC,CAAC;;AAEH,QAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,OAAO,IAAI,CAAC;;AAElC,QAAM,YAAY,GAAG,QAAQ,CAAC,GAAG,CAAC,UAAU,IAAI,EAAE;AAChD,aAAO,iBAAiB,GAAG,IAAI,CAAC,OAAO,GAAG,KAAK,GAAG,IAAI,CAAC,YAAY,GAAG,IAAI,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,CAAC;KAC5F,CAAC,CAAC;;AAEH,QAAM,OAAO,GAAG,oDACb,aAAa,6BAAyB,2DACY,YAAY,CAAC,IAAI,CAAC,GAAG,CAAC,CAAE,CAAC;;AAE9E,UAAM,6BAAe,MAAM,EAAE,OAAO,CAAC,CAAC;GACvC,CAAC,CAAC;CACJ,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/elasticsearch/lib/check_es_version.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport esBool from './es_bool';\nimport versionSatisfies from './version_satisfies';\nimport SetupError from './setup_error';\n\nmodule.exports = function (server) {\n  server.log(['plugin', 'debug'], 'Checking Elasticsearch version');\n\n  const client = server.plugins.elasticsearch.client;\n  const engineVersion = server.config().get('elasticsearch.engineVersion');\n\n  return client.nodes.info()\n  .then(function (info) {\n    const badNodes = _.filter(info.nodes, function (node) {\n      // remove nodes that satify required engine version\n      return !versionSatisfies(node.version, engineVersion);\n    });\n\n    if (!badNodes.length) return true;\n\n    const badNodeNames = badNodes.map(function (node) {\n      return 'Elasticsearch v' + node.version + ' @ ' + node.http_address + ' (' + node.ip + ')';\n    });\n\n    const message = `This version of Kibana requires Elasticsearch ` +\n    `${engineVersion} on all nodes. I found ` +\n    `the following incompatible nodes in your cluster: ${badNodeNames.join(',')}`;\n\n    throw new SetupError(server, message);\n  });\n};\n"
      ]
    },
    "mtime": 1467036622817
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/elasticsearch/lib/es_bool.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar map = {\n  'false': false,\n  'off': false,\n  'no': false,\n  '0': false,\n  'true': true,\n  'on': true,\n  'yes': true,\n  '1': true\n};\nmodule.exports = function (str) {\n  var bool = map[String(str)];\n  if (typeof bool !== 'boolean') {\n    throw new TypeError('\"' + str + '\" does not map to an esBool');\n  }\n  return bool;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMvZWxhc3RpY3NlYXJjaC9saWIvZXNfYm9vbC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQU0sR0FBRyxHQUFHO0FBQ1YsU0FBTyxFQUFFLEtBQUs7QUFDZCxPQUFLLEVBQUUsS0FBSztBQUNaLE1BQUksRUFBRSxLQUFLO0FBQ1gsS0FBRyxFQUFFLEtBQUs7QUFDVixRQUFNLEVBQUUsSUFBSTtBQUNaLE1BQUksRUFBRSxJQUFJO0FBQ1YsT0FBSyxFQUFFLElBQUk7QUFDWCxLQUFHLEVBQUUsSUFBSTtDQUNWLENBQUM7QUFDRixNQUFNLENBQUMsT0FBTyxHQUFHLFVBQVUsR0FBRyxFQUFFO0FBQzlCLE1BQU0sSUFBSSxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztBQUM5QixNQUFJLE9BQU8sSUFBSSxLQUFLLFNBQVMsRUFBRTtBQUM3QixVQUFNLElBQUksU0FBUyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsNkJBQTZCLENBQUMsQ0FBQztHQUNoRTtBQUNELFNBQU8sSUFBSSxDQUFDO0NBQ2IsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9wbHVnaW5zL2VsYXN0aWNzZWFyY2gvbGliL2VzX2Jvb2wuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBtYXAgPSB7XG4gICdmYWxzZSc6IGZhbHNlLFxuICAnb2ZmJzogZmFsc2UsXG4gICdubyc6IGZhbHNlLFxuICAnMCc6IGZhbHNlLFxuICAndHJ1ZSc6IHRydWUsXG4gICdvbic6IHRydWUsXG4gICd5ZXMnOiB0cnVlLFxuICAnMSc6IHRydWVcbn07XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgY29uc3QgYm9vbCA9IG1hcFtTdHJpbmcoc3RyKV07XG4gIGlmICh0eXBlb2YgYm9vbCAhPT0gJ2Jvb2xlYW4nKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCInICsgc3RyICsgJ1wiIGRvZXMgbm90IG1hcCB0byBhbiBlc0Jvb2wnKTtcbiAgfVxuICByZXR1cm4gYm9vbDtcbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/elasticsearch/lib/es_bool.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAM,GAAG,GAAG;AACV,SAAO,EAAE,KAAK;AACd,OAAK,EAAE,KAAK;AACZ,MAAI,EAAE,KAAK;AACX,KAAG,EAAE,KAAK;AACV,QAAM,EAAE,IAAI;AACZ,MAAI,EAAE,IAAI;AACV,OAAK,EAAE,IAAI;AACX,KAAG,EAAE,IAAI;CACV,CAAC;AACF,MAAM,CAAC,OAAO,GAAG,UAAU,GAAG,EAAE;AAC9B,MAAM,IAAI,GAAG,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC;AAC9B,MAAI,OAAO,IAAI,KAAK,SAAS,EAAE;AAC7B,UAAM,IAAI,SAAS,CAAC,GAAG,GAAG,GAAG,GAAG,6BAA6B,CAAC,CAAC;GAChE;AACD,SAAO,IAAI,CAAC;CACb,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/elasticsearch/lib/es_bool.js",
      "sourcesContent": [
        "const map = {\n  'false': false,\n  'off': false,\n  'no': false,\n  '0': false,\n  'true': true,\n  'on': true,\n  'yes': true,\n  '1': true\n};\nmodule.exports = function (str) {\n  const bool = map[String(str)];\n  if (typeof bool !== 'boolean') {\n    throw new TypeError('\"' + str + '\" does not map to an esBool');\n  }\n  return bool;\n};\n"
      ]
    },
    "mtime": 1467036622817
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/elasticsearch/lib/version_satisfies.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "semver",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "semver"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _semver = require('semver');\n\nvar _semver2 = _interopRequireDefault(_semver);\n\nmodule.exports = function (actual, expected) {\n  try {\n    var ver = cleanVersion(actual);\n    return _semver2['default'].satisfies(ver, expected);\n  } catch (err) {\n    return false;\n  }\n\n  function cleanVersion(version) {\n    var match = version.match(/\\d+\\.\\d+\\.\\d+/);\n    if (!match) return version;\n    return match[0];\n  }\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMvZWxhc3RpY3NlYXJjaC9saWIvdmVyc2lvbl9zYXRpc2ZpZXMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztzQkFBbUIsUUFBUTs7OztBQUUzQixNQUFNLENBQUMsT0FBTyxHQUFHLFVBQVUsTUFBTSxFQUFFLFFBQVEsRUFBRTtBQUMzQyxNQUFJO0FBQ0YsUUFBTSxHQUFHLEdBQUcsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ2pDLFdBQU8sb0JBQU8sU0FBUyxDQUFDLEdBQUcsRUFBRSxRQUFRLENBQUMsQ0FBQztHQUN4QyxDQUFDLE9BQU8sR0FBRyxFQUFFO0FBQ1osV0FBTyxLQUFLLENBQUM7R0FDZDs7QUFFRCxXQUFTLFlBQVksQ0FBQyxPQUFPLEVBQUU7QUFDN0IsUUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLEtBQUssQ0FBQyxlQUFlLENBQUMsQ0FBQztBQUM3QyxRQUFJLENBQUMsS0FBSyxFQUFFLE9BQU8sT0FBTyxDQUFDO0FBQzNCLFdBQU8sS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO0dBQ2pCO0NBQ0YsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9wbHVnaW5zL2VsYXN0aWNzZWFyY2gvbGliL3ZlcnNpb25fc2F0aXNmaWVzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHNlbXZlciBmcm9tICdzZW12ZXInO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChhY3R1YWwsIGV4cGVjdGVkKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgdmVyID0gY2xlYW5WZXJzaW9uKGFjdHVhbCk7XG4gICAgcmV0dXJuIHNlbXZlci5zYXRpc2ZpZXModmVyLCBleHBlY3RlZCk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNsZWFuVmVyc2lvbih2ZXJzaW9uKSB7XG4gICAgY29uc3QgbWF0Y2ggPSB2ZXJzaW9uLm1hdGNoKC9cXGQrXFwuXFxkK1xcLlxcZCsvKTtcbiAgICBpZiAoIW1hdGNoKSByZXR1cm4gdmVyc2lvbjtcbiAgICByZXR1cm4gbWF0Y2hbMF07XG4gIH1cbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/elasticsearch/lib/version_satisfies.js"
      ],
      "names": [],
      "mappings": ";;;;sBAAmB,QAAQ;;;;AAE3B,MAAM,CAAC,OAAO,GAAG,UAAU,MAAM,EAAE,QAAQ,EAAE;AAC3C,MAAI;AACF,QAAM,GAAG,GAAG,YAAY,CAAC,MAAM,CAAC,CAAC;AACjC,WAAO,oBAAO,SAAS,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAC;GACxC,CAAC,OAAO,GAAG,EAAE;AACZ,WAAO,KAAK,CAAC;GACd;;AAED,WAAS,YAAY,CAAC,OAAO,EAAE;AAC7B,QAAM,KAAK,GAAG,OAAO,CAAC,KAAK,CAAC,eAAe,CAAC,CAAC;AAC7C,QAAI,CAAC,KAAK,EAAE,OAAO,OAAO,CAAC;AAC3B,WAAO,KAAK,CAAC,CAAC,CAAC,CAAC;GACjB;CACF,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/elasticsearch/lib/version_satisfies.js",
      "sourcesContent": [
        "import semver from 'semver';\n\nmodule.exports = function (actual, expected) {\n  try {\n    const ver = cleanVersion(actual);\n    return semver.satisfies(ver, expected);\n  } catch (err) {\n    return false;\n  }\n\n  function cleanVersion(version) {\n    const match = version.match(/\\d+\\.\\d+\\.\\d+/);\n    if (!match) return version;\n    return match[0];\n  }\n};\n"
      ]
    },
    "mtime": 1467036622817
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/elasticsearch/lib/manage_uuid.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "node-uuid",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "uuid"
              }
            ]
          },
          {
            "source": "os",
            "imported": [
              "hostname"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "hostname",
                "local": "hostname"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "manageUuid",
            "server"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "manageUuid",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "server",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = manageUuid;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _nodeUuid = require('node-uuid');\n\nvar _nodeUuid2 = _interopRequireDefault(_nodeUuid);\n\nvar _os = require('os');\n\nvar serverHostname = (0, _os.hostname)();\n\n/* Handle different scenarios:\n *  - config uuid exists, data uuid exists and matches\n *      - nothing to do\n *  - config uuid missing, data uuid exists\n *      - set uuid from data as config uuid\n *  - config uuid exists, data uuid exists but mismatches\n *      - update data uuid with config uuid\n *  - config uuid missing, data uuid missing\n *      - generate new uuid, set in config and insert in data\n * (\"config uuid\" = uuid in server.config,\n *   \"data uuid\" = uuid in .kibana index)\n */\n\nfunction manageUuid(server) {\n  var TYPE = 'server';\n  var config = server.config();\n  var serverPort = server.info.port;\n  var client = server.plugins.elasticsearch.client;\n\n  return function uuidManagement() {\n    var fieldId = serverHostname + '-' + serverPort;\n    var kibanaIndex = config.get('kibana.index');\n    var kibanaUuid = config.get('uuid');\n\n    function logToServer(msg) {\n      server.log(['server', 'uuid', fieldId], msg);\n    }\n\n    return client.get({\n      index: kibanaIndex,\n      ignore: [404],\n      type: TYPE,\n      id: fieldId\n    }).then(function (result) {\n      if (result.found) {\n        if (kibanaUuid === result._source.uuid) {\n          // config uuid exists, data uuid exists and matches\n          logToServer('Kibana instance UUID: ' + kibanaUuid);\n          return;\n        }\n\n        if (!kibanaUuid) {\n          // config uuid missing, data uuid exists\n          kibanaUuid = result._source.uuid;\n          logToServer('Resuming persistent Kibana instance UUID: ' + kibanaUuid);\n          config.set('uuid', kibanaUuid);\n          return;\n        }\n\n        if (kibanaUuid !== result._source.uuid) {\n          // config uuid exists, data uuid exists but mismatches\n          logToServer('Updating Kibana instance UUID to: ' + kibanaUuid + ' (was: ' + result._source.uuid + ')');\n          return client.update({\n            index: kibanaIndex,\n            type: TYPE,\n            id: fieldId,\n            body: { doc: { uuid: kibanaUuid } }\n          });\n        }\n      }\n\n      // data uuid missing\n      if (!kibanaUuid) {\n        // config uuid missing\n        kibanaUuid = _nodeUuid2['default'].v4();\n        config.set('uuid', kibanaUuid);\n      }\n\n      logToServer('Setting new Kibana instance UUID: ' + kibanaUuid);\n      return client.index({\n        index: kibanaIndex,\n        type: TYPE,\n        id: fieldId,\n        body: { uuid: kibanaUuid }\n      });\n    });\n  };\n}\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMvZWxhc3RpY3NlYXJjaC9saWIvbWFuYWdlX3V1aWQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7cUJBZ0J3QixVQUFVOzs7O3dCQWhCakIsV0FBVzs7OztrQkFDSCxJQUFJOztBQUM3QixJQUFNLGNBQWMsR0FBRyxtQkFBVSxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7QUFjbkIsU0FBUyxVQUFVLENBQUMsTUFBTSxFQUFFO0FBQ3pDLE1BQU0sSUFBSSxHQUFHLFFBQVEsQ0FBQztBQUN0QixNQUFNLE1BQU0sR0FBRyxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUM7QUFDL0IsTUFBTSxVQUFVLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7QUFDcEMsTUFBTSxNQUFNLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDOztBQUVuRCxTQUFPLFNBQVMsY0FBYyxHQUFHO0FBQy9CLFFBQU0sT0FBTyxHQUFNLGNBQWMsU0FBSSxVQUFVLEFBQUUsQ0FBQztBQUNsRCxRQUFNLFdBQVcsR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQyxDQUFDO0FBQy9DLFFBQUksVUFBVSxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7O0FBRXBDLGFBQVMsV0FBVyxDQUFDLEdBQUcsRUFBRTtBQUN4QixZQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsUUFBUSxFQUFFLE1BQU0sRUFBRSxPQUFPLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztLQUM5Qzs7QUFFRCxXQUFPLE1BQU0sQ0FBQyxHQUFHLENBQUM7QUFDaEIsV0FBSyxFQUFFLFdBQVc7QUFDbEIsWUFBTSxFQUFFLENBQUMsR0FBRyxDQUFDO0FBQ2IsVUFBSSxFQUFFLElBQUk7QUFDVixRQUFFLEVBQUUsT0FBTztLQUNaLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBQSxNQUFNLEVBQUk7QUFDaEIsVUFBSSxNQUFNLENBQUMsS0FBSyxFQUFFO0FBQ2hCLFlBQUksVUFBVSxLQUFLLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFOztBQUV0QyxxQkFBVyw0QkFBMEIsVUFBVSxDQUFHLENBQUM7QUFDbkQsaUJBQU87U0FDUjs7QUFFRCxZQUFJLENBQUMsVUFBVSxFQUFFOztBQUVmLG9CQUFVLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUM7QUFDakMscUJBQVcsZ0RBQThDLFVBQVUsQ0FBRyxDQUFDO0FBQ3ZFLGdCQUFNLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxVQUFVLENBQUMsQ0FBQztBQUMvQixpQkFBTztTQUNSOztBQUVELFlBQUksVUFBVSxLQUFLLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFOztBQUV0QyxxQkFBVyx3Q0FBc0MsVUFBVSxlQUFVLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxPQUFJLENBQUM7QUFDN0YsaUJBQU8sTUFBTSxDQUFDLE1BQU0sQ0FBQztBQUNuQixpQkFBSyxFQUFFLFdBQVc7QUFDbEIsZ0JBQUksRUFBRSxJQUFJO0FBQ1YsY0FBRSxFQUFFLE9BQU87QUFDWCxnQkFBSSxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxFQUFFO1dBQ3BDLENBQUMsQ0FBQztTQUNKO09BQ0Y7OztBQUdELFVBQUksQ0FBQyxVQUFVLEVBQUU7O0FBRWYsa0JBQVUsR0FBRyxzQkFBSyxFQUFFLEVBQUUsQ0FBQztBQUN2QixjQUFNLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxVQUFVLENBQUMsQ0FBQztPQUNoQzs7QUFFRCxpQkFBVyx3Q0FBc0MsVUFBVSxDQUFHLENBQUM7QUFDL0QsYUFBTyxNQUFNLENBQUMsS0FBSyxDQUFDO0FBQ2xCLGFBQUssRUFBRSxXQUFXO0FBQ2xCLFlBQUksRUFBRSxJQUFJO0FBQ1YsVUFBRSxFQUFFLE9BQU87QUFDWCxZQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFFO09BQzNCLENBQUMsQ0FBQztLQUNKLENBQUMsQ0FBQztHQUNKLENBQUM7Q0FDSCIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9wbHVnaW5zL2VsYXN0aWNzZWFyY2gvbGliL21hbmFnZV91dWlkLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHV1aWQgZnJvbSAnbm9kZS11dWlkJztcbmltcG9ydCB7IGhvc3RuYW1lIH0gZnJvbSAnb3MnO1xuY29uc3Qgc2VydmVySG9zdG5hbWUgPSBob3N0bmFtZSgpO1xuXG4vKiBIYW5kbGUgZGlmZmVyZW50IHNjZW5hcmlvczpcbiAqICAtIGNvbmZpZyB1dWlkIGV4aXN0cywgZGF0YSB1dWlkIGV4aXN0cyBhbmQgbWF0Y2hlc1xuICogICAgICAtIG5vdGhpbmcgdG8gZG9cbiAqICAtIGNvbmZpZyB1dWlkIG1pc3NpbmcsIGRhdGEgdXVpZCBleGlzdHNcbiAqICAgICAgLSBzZXQgdXVpZCBmcm9tIGRhdGEgYXMgY29uZmlnIHV1aWRcbiAqICAtIGNvbmZpZyB1dWlkIGV4aXN0cywgZGF0YSB1dWlkIGV4aXN0cyBidXQgbWlzbWF0Y2hlc1xuICogICAgICAtIHVwZGF0ZSBkYXRhIHV1aWQgd2l0aCBjb25maWcgdXVpZFxuICogIC0gY29uZmlnIHV1aWQgbWlzc2luZywgZGF0YSB1dWlkIG1pc3NpbmdcbiAqICAgICAgLSBnZW5lcmF0ZSBuZXcgdXVpZCwgc2V0IGluIGNvbmZpZyBhbmQgaW5zZXJ0IGluIGRhdGFcbiAqIChcImNvbmZpZyB1dWlkXCIgPSB1dWlkIGluIHNlcnZlci5jb25maWcsXG4gKiAgIFwiZGF0YSB1dWlkXCIgPSB1dWlkIGluIC5raWJhbmEgaW5kZXgpXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG1hbmFnZVV1aWQoc2VydmVyKSB7XG4gIGNvbnN0IFRZUEUgPSAnc2VydmVyJztcbiAgY29uc3QgY29uZmlnID0gc2VydmVyLmNvbmZpZygpO1xuICBjb25zdCBzZXJ2ZXJQb3J0ID0gc2VydmVyLmluZm8ucG9ydDtcbiAgY29uc3QgY2xpZW50ID0gc2VydmVyLnBsdWdpbnMuZWxhc3RpY3NlYXJjaC5jbGllbnQ7XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIHV1aWRNYW5hZ2VtZW50KCkge1xuICAgIGNvbnN0IGZpZWxkSWQgPSBgJHtzZXJ2ZXJIb3N0bmFtZX0tJHtzZXJ2ZXJQb3J0fWA7XG4gICAgY29uc3Qga2liYW5hSW5kZXggPSBjb25maWcuZ2V0KCdraWJhbmEuaW5kZXgnKTtcbiAgICBsZXQga2liYW5hVXVpZCA9IGNvbmZpZy5nZXQoJ3V1aWQnKTtcblxuICAgIGZ1bmN0aW9uIGxvZ1RvU2VydmVyKG1zZykge1xuICAgICAgc2VydmVyLmxvZyhbJ3NlcnZlcicsICd1dWlkJywgZmllbGRJZF0sIG1zZyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNsaWVudC5nZXQoe1xuICAgICAgaW5kZXg6IGtpYmFuYUluZGV4LFxuICAgICAgaWdub3JlOiBbNDA0XSxcbiAgICAgIHR5cGU6IFRZUEUsXG4gICAgICBpZDogZmllbGRJZFxuICAgIH0pLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgIGlmIChyZXN1bHQuZm91bmQpIHtcbiAgICAgICAgaWYgKGtpYmFuYVV1aWQgPT09IHJlc3VsdC5fc291cmNlLnV1aWQpIHtcbiAgICAgICAgICAvLyBjb25maWcgdXVpZCBleGlzdHMsIGRhdGEgdXVpZCBleGlzdHMgYW5kIG1hdGNoZXNcbiAgICAgICAgICBsb2dUb1NlcnZlcihgS2liYW5hIGluc3RhbmNlIFVVSUQ6ICR7a2liYW5hVXVpZH1gKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWtpYmFuYVV1aWQpIHtcbiAgICAgICAgICAvLyBjb25maWcgdXVpZCBtaXNzaW5nLCBkYXRhIHV1aWQgZXhpc3RzXG4gICAgICAgICAga2liYW5hVXVpZCA9IHJlc3VsdC5fc291cmNlLnV1aWQ7XG4gICAgICAgICAgbG9nVG9TZXJ2ZXIoYFJlc3VtaW5nIHBlcnNpc3RlbnQgS2liYW5hIGluc3RhbmNlIFVVSUQ6ICR7a2liYW5hVXVpZH1gKTtcbiAgICAgICAgICBjb25maWcuc2V0KCd1dWlkJywga2liYW5hVXVpZCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGtpYmFuYVV1aWQgIT09IHJlc3VsdC5fc291cmNlLnV1aWQpIHtcbiAgICAgICAgICAvLyBjb25maWcgdXVpZCBleGlzdHMsIGRhdGEgdXVpZCBleGlzdHMgYnV0IG1pc21hdGNoZXNcbiAgICAgICAgICBsb2dUb1NlcnZlcihgVXBkYXRpbmcgS2liYW5hIGluc3RhbmNlIFVVSUQgdG86ICR7a2liYW5hVXVpZH0gKHdhczogJHtyZXN1bHQuX3NvdXJjZS51dWlkfSlgKTtcbiAgICAgICAgICByZXR1cm4gY2xpZW50LnVwZGF0ZSh7XG4gICAgICAgICAgICBpbmRleDoga2liYW5hSW5kZXgsXG4gICAgICAgICAgICB0eXBlOiBUWVBFLFxuICAgICAgICAgICAgaWQ6IGZpZWxkSWQsXG4gICAgICAgICAgICBib2R5OiB7IGRvYzogeyB1dWlkOiBraWJhbmFVdWlkIH0gfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIGRhdGEgdXVpZCBtaXNzaW5nXG4gICAgICBpZiAoIWtpYmFuYVV1aWQpIHtcbiAgICAgICAgLy8gY29uZmlnIHV1aWQgbWlzc2luZ1xuICAgICAgICBraWJhbmFVdWlkID0gdXVpZC52NCgpO1xuICAgICAgICBjb25maWcuc2V0KCd1dWlkJywga2liYW5hVXVpZCk7XG4gICAgICB9XG5cbiAgICAgIGxvZ1RvU2VydmVyKGBTZXR0aW5nIG5ldyBLaWJhbmEgaW5zdGFuY2UgVVVJRDogJHtraWJhbmFVdWlkfWApO1xuICAgICAgcmV0dXJuIGNsaWVudC5pbmRleCh7XG4gICAgICAgIGluZGV4OiBraWJhbmFJbmRleCxcbiAgICAgICAgdHlwZTogVFlQRSxcbiAgICAgICAgaWQ6IGZpZWxkSWQsXG4gICAgICAgIGJvZHk6IHsgdXVpZDoga2liYW5hVXVpZCB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcbn1cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/elasticsearch/lib/manage_uuid.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAgBwB,UAAU;;;;wBAhBjB,WAAW;;;;kBACH,IAAI;;AAC7B,IAAM,cAAc,GAAG,mBAAU,CAAC;;;;;;;;;;;;;;;AAcnB,SAAS,UAAU,CAAC,MAAM,EAAE;AACzC,MAAM,IAAI,GAAG,QAAQ,CAAC;AACtB,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC;AAC/B,MAAM,UAAU,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC;AACpC,MAAM,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,MAAM,CAAC;;AAEnD,SAAO,SAAS,cAAc,GAAG;AAC/B,QAAM,OAAO,GAAM,cAAc,SAAI,UAAU,AAAE,CAAC;AAClD,QAAM,WAAW,GAAG,MAAM,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;AAC/C,QAAI,UAAU,GAAG,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;;AAEpC,aAAS,WAAW,CAAC,GAAG,EAAE;AACxB,YAAM,CAAC,GAAG,CAAC,CAAC,QAAQ,EAAE,MAAM,EAAE,OAAO,CAAC,EAAE,GAAG,CAAC,CAAC;KAC9C;;AAED,WAAO,MAAM,CAAC,GAAG,CAAC;AAChB,WAAK,EAAE,WAAW;AAClB,YAAM,EAAE,CAAC,GAAG,CAAC;AACb,UAAI,EAAE,IAAI;AACV,QAAE,EAAE,OAAO;KACZ,CAAC,CAAC,IAAI,CAAC,UAAA,MAAM,EAAI;AAChB,UAAI,MAAM,CAAC,KAAK,EAAE;AAChB,YAAI,UAAU,KAAK,MAAM,CAAC,OAAO,CAAC,IAAI,EAAE;;AAEtC,qBAAW,4BAA0B,UAAU,CAAG,CAAC;AACnD,iBAAO;SACR;;AAED,YAAI,CAAC,UAAU,EAAE;;AAEf,oBAAU,GAAG,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC;AACjC,qBAAW,gDAA8C,UAAU,CAAG,CAAC;AACvE,gBAAM,CAAC,GAAG,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC;AAC/B,iBAAO;SACR;;AAED,YAAI,UAAU,KAAK,MAAM,CAAC,OAAO,CAAC,IAAI,EAAE;;AAEtC,qBAAW,wCAAsC,UAAU,eAAU,MAAM,CAAC,OAAO,CAAC,IAAI,OAAI,CAAC;AAC7F,iBAAO,MAAM,CAAC,MAAM,CAAC;AACnB,iBAAK,EAAE,WAAW;AAClB,gBAAI,EAAE,IAAI;AACV,cAAE,EAAE,OAAO;AACX,gBAAI,EAAE,EAAE,GAAG,EAAE,EAAE,IAAI,EAAE,UAAU,EAAE,EAAE;WACpC,CAAC,CAAC;SACJ;OACF;;;AAGD,UAAI,CAAC,UAAU,EAAE;;AAEf,kBAAU,GAAG,sBAAK,EAAE,EAAE,CAAC;AACvB,cAAM,CAAC,GAAG,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC;OAChC;;AAED,iBAAW,wCAAsC,UAAU,CAAG,CAAC;AAC/D,aAAO,MAAM,CAAC,KAAK,CAAC;AAClB,aAAK,EAAE,WAAW;AAClB,YAAI,EAAE,IAAI;AACV,UAAE,EAAE,OAAO;AACX,YAAI,EAAE,EAAE,IAAI,EAAE,UAAU,EAAE;OAC3B,CAAC,CAAC;KACJ,CAAC,CAAC;GACJ,CAAC;CACH",
      "file": "/home/vio/v3metrics/src/plugins/elasticsearch/lib/manage_uuid.js",
      "sourcesContent": [
        "import uuid from 'node-uuid';\nimport { hostname } from 'os';\nconst serverHostname = hostname();\n\n/* Handle different scenarios:\n *  - config uuid exists, data uuid exists and matches\n *      - nothing to do\n *  - config uuid missing, data uuid exists\n *      - set uuid from data as config uuid\n *  - config uuid exists, data uuid exists but mismatches\n *      - update data uuid with config uuid\n *  - config uuid missing, data uuid missing\n *      - generate new uuid, set in config and insert in data\n * (\"config uuid\" = uuid in server.config,\n *   \"data uuid\" = uuid in .kibana index)\n */\nexport default function manageUuid(server) {\n  const TYPE = 'server';\n  const config = server.config();\n  const serverPort = server.info.port;\n  const client = server.plugins.elasticsearch.client;\n\n  return function uuidManagement() {\n    const fieldId = `${serverHostname}-${serverPort}`;\n    const kibanaIndex = config.get('kibana.index');\n    let kibanaUuid = config.get('uuid');\n\n    function logToServer(msg) {\n      server.log(['server', 'uuid', fieldId], msg);\n    }\n\n    return client.get({\n      index: kibanaIndex,\n      ignore: [404],\n      type: TYPE,\n      id: fieldId\n    }).then(result => {\n      if (result.found) {\n        if (kibanaUuid === result._source.uuid) {\n          // config uuid exists, data uuid exists and matches\n          logToServer(`Kibana instance UUID: ${kibanaUuid}`);\n          return;\n        }\n\n        if (!kibanaUuid) {\n          // config uuid missing, data uuid exists\n          kibanaUuid = result._source.uuid;\n          logToServer(`Resuming persistent Kibana instance UUID: ${kibanaUuid}`);\n          config.set('uuid', kibanaUuid);\n          return;\n        }\n\n        if (kibanaUuid !== result._source.uuid) {\n          // config uuid exists, data uuid exists but mismatches\n          logToServer(`Updating Kibana instance UUID to: ${kibanaUuid} (was: ${result._source.uuid})`);\n          return client.update({\n            index: kibanaIndex,\n            type: TYPE,\n            id: fieldId,\n            body: { doc: { uuid: kibanaUuid } }\n          });\n        }\n      }\n\n      // data uuid missing\n      if (!kibanaUuid) {\n        // config uuid missing\n        kibanaUuid = uuid.v4();\n        config.set('uuid', kibanaUuid);\n      }\n\n      logToServer(`Setting new Kibana instance UUID: ${kibanaUuid}`);\n      return client.index({\n        index: kibanaIndex,\n        type: TYPE,\n        id: fieldId,\n        body: { uuid: kibanaUuid }\n      });\n    });\n  };\n}\n"
      ]
    },
    "mtime": 1467036622817
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/elasticsearch/lib/create_proxy.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./create_agent",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "createAgent"
              }
            ]
          },
          {
            "source": "./map_uri",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "mapUri"
              }
            ]
          },
          {
            "source": "url",
            "imported": [
              "resolve"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "resolve",
                "local": "resolve"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "assign"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "assign",
                "local": "assign"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _create_agent = require('./create_agent');\n\nvar _create_agent2 = _interopRequireDefault(_create_agent);\n\nvar _map_uri = require('./map_uri');\n\nvar _map_uri2 = _interopRequireDefault(_map_uri);\n\nvar _url = require('url');\n\nvar _lodash = require('lodash');\n\nfunction createProxy(server, method, route, config) {\n\n  var options = {\n    method: method,\n    path: createProxy.createPath(route),\n    config: {\n      timeout: {\n        socket: server.config().get('elasticsearch.requestTimeout')\n      }\n    },\n    handler: {\n      proxy: {\n        mapUri: (0, _map_uri2['default'])(server),\n        agent: (0, _create_agent2['default'])(server),\n        xforward: true,\n        timeout: server.config().get('elasticsearch.requestTimeout'),\n        onResponse: function onResponse(err, responseFromUpstream, request, reply) {\n          reply(err, responseFromUpstream);\n        }\n      }\n    }\n  };\n\n  (0, _lodash.assign)(options.config, config);\n\n  server.route(options);\n};\n\ncreateProxy.createPath = function createPath(path) {\n  var pre = '/elasticsearch';\n  var sep = path[0] === '/' ? '' : '/';\n  return '' + pre + sep + path;\n};\n\nmodule.exports = createProxy;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMvZWxhc3RpY3NlYXJjaC9saWIvY3JlYXRlX3Byb3h5LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7NEJBQXdCLGdCQUFnQjs7Ozt1QkFDckIsV0FBVzs7OzttQkFDTixLQUFLOztzQkFDTixRQUFROztBQUUvQixTQUFTLFdBQVcsQ0FBQyxNQUFNLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUU7O0FBRWxELE1BQU0sT0FBTyxHQUFHO0FBQ2QsVUFBTSxFQUFFLE1BQU07QUFDZCxRQUFJLEVBQUUsV0FBVyxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUM7QUFDbkMsVUFBTSxFQUFFO0FBQ04sYUFBTyxFQUFFO0FBQ1AsY0FBTSxFQUFFLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLENBQUMsOEJBQThCLENBQUM7T0FDNUQ7S0FDRjtBQUNELFdBQU8sRUFBRTtBQUNQLFdBQUssRUFBRTtBQUNMLGNBQU0sRUFBRSwwQkFBTyxNQUFNLENBQUM7QUFDdEIsYUFBSyxFQUFFLCtCQUFZLE1BQU0sQ0FBQztBQUMxQixnQkFBUSxFQUFFLElBQUk7QUFDZCxlQUFPLEVBQUUsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyw4QkFBOEIsQ0FBQztBQUM1RCxrQkFBVSxFQUFFLG9CQUFVLEdBQUcsRUFBRSxvQkFBb0IsRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFO0FBQy9ELGVBQUssQ0FBQyxHQUFHLEVBQUUsb0JBQW9CLENBQUMsQ0FBQztTQUNsQztPQUNGO0tBQ0Y7R0FDRixDQUFDOztBQUVGLHNCQUFPLE9BQU8sQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUM7O0FBRS9CLFFBQU0sQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUM7Q0FDdkIsQ0FBQzs7QUFFRixXQUFXLENBQUMsVUFBVSxHQUFHLFNBQVMsVUFBVSxDQUFDLElBQUksRUFBRTtBQUNqRCxNQUFNLEdBQUcsR0FBRyxnQkFBZ0IsQ0FBQztBQUM3QixNQUFNLEdBQUcsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxHQUFHLEVBQUUsR0FBRyxHQUFHLENBQUM7QUFDdkMsY0FBVSxHQUFHLEdBQUcsR0FBRyxHQUFHLElBQUksQ0FBRztDQUM5QixDQUFDOztBQUVGLE1BQU0sQ0FBQyxPQUFPLEdBQUcsV0FBVyxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMvZWxhc3RpY3NlYXJjaC9saWIvY3JlYXRlX3Byb3h5LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNyZWF0ZUFnZW50IGZyb20gJy4vY3JlYXRlX2FnZW50JztcbmltcG9ydCBtYXBVcmkgZnJvbSAnLi9tYXBfdXJpJztcbmltcG9ydCB7IHJlc29sdmUgfSBmcm9tICd1cmwnO1xuaW1wb3J0IHsgYXNzaWduIH0gZnJvbSAnbG9kYXNoJztcblxuZnVuY3Rpb24gY3JlYXRlUHJveHkoc2VydmVyLCBtZXRob2QsIHJvdXRlLCBjb25maWcpIHtcblxuICBjb25zdCBvcHRpb25zID0ge1xuICAgIG1ldGhvZDogbWV0aG9kLFxuICAgIHBhdGg6IGNyZWF0ZVByb3h5LmNyZWF0ZVBhdGgocm91dGUpLFxuICAgIGNvbmZpZzoge1xuICAgICAgdGltZW91dDoge1xuICAgICAgICBzb2NrZXQ6IHNlcnZlci5jb25maWcoKS5nZXQoJ2VsYXN0aWNzZWFyY2gucmVxdWVzdFRpbWVvdXQnKVxuICAgICAgfVxuICAgIH0sXG4gICAgaGFuZGxlcjoge1xuICAgICAgcHJveHk6IHtcbiAgICAgICAgbWFwVXJpOiBtYXBVcmkoc2VydmVyKSxcbiAgICAgICAgYWdlbnQ6IGNyZWF0ZUFnZW50KHNlcnZlciksXG4gICAgICAgIHhmb3J3YXJkOiB0cnVlLFxuICAgICAgICB0aW1lb3V0OiBzZXJ2ZXIuY29uZmlnKCkuZ2V0KCdlbGFzdGljc2VhcmNoLnJlcXVlc3RUaW1lb3V0JyksXG4gICAgICAgIG9uUmVzcG9uc2U6IGZ1bmN0aW9uIChlcnIsIHJlc3BvbnNlRnJvbVVwc3RyZWFtLCByZXF1ZXN0LCByZXBseSkge1xuICAgICAgICAgIHJlcGx5KGVyciwgcmVzcG9uc2VGcm9tVXBzdHJlYW0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgfTtcblxuICBhc3NpZ24ob3B0aW9ucy5jb25maWcsIGNvbmZpZyk7XG5cbiAgc2VydmVyLnJvdXRlKG9wdGlvbnMpO1xufTtcblxuY3JlYXRlUHJveHkuY3JlYXRlUGF0aCA9IGZ1bmN0aW9uIGNyZWF0ZVBhdGgocGF0aCkge1xuICBjb25zdCBwcmUgPSAnL2VsYXN0aWNzZWFyY2gnO1xuICBjb25zdCBzZXAgPSBwYXRoWzBdID09PSAnLycgPyAnJyA6ICcvJztcbiAgcmV0dXJuIGAke3ByZX0ke3NlcH0ke3BhdGh9YDtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gY3JlYXRlUHJveHk7XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/elasticsearch/lib/create_proxy.js"
      ],
      "names": [],
      "mappings": ";;;;4BAAwB,gBAAgB;;;;uBACrB,WAAW;;;;mBACN,KAAK;;sBACN,QAAQ;;AAE/B,SAAS,WAAW,CAAC,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE;;AAElD,MAAM,OAAO,GAAG;AACd,UAAM,EAAE,MAAM;AACd,QAAI,EAAE,WAAW,CAAC,UAAU,CAAC,KAAK,CAAC;AACnC,UAAM,EAAE;AACN,aAAO,EAAE;AACP,cAAM,EAAE,MAAM,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,8BAA8B,CAAC;OAC5D;KACF;AACD,WAAO,EAAE;AACP,WAAK,EAAE;AACL,cAAM,EAAE,0BAAO,MAAM,CAAC;AACtB,aAAK,EAAE,+BAAY,MAAM,CAAC;AAC1B,gBAAQ,EAAE,IAAI;AACd,eAAO,EAAE,MAAM,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,8BAA8B,CAAC;AAC5D,kBAAU,EAAE,oBAAU,GAAG,EAAE,oBAAoB,EAAE,OAAO,EAAE,KAAK,EAAE;AAC/D,eAAK,CAAC,GAAG,EAAE,oBAAoB,CAAC,CAAC;SAClC;OACF;KACF;GACF,CAAC;;AAEF,sBAAO,OAAO,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;;AAE/B,QAAM,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;CACvB,CAAC;;AAEF,WAAW,CAAC,UAAU,GAAG,SAAS,UAAU,CAAC,IAAI,EAAE;AACjD,MAAM,GAAG,GAAG,gBAAgB,CAAC;AAC7B,MAAM,GAAG,GAAG,IAAI,CAAC,CAAC,CAAC,KAAK,GAAG,GAAG,EAAE,GAAG,GAAG,CAAC;AACvC,cAAU,GAAG,GAAG,GAAG,GAAG,IAAI,CAAG;CAC9B,CAAC;;AAEF,MAAM,CAAC,OAAO,GAAG,WAAW,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/elasticsearch/lib/create_proxy.js",
      "sourcesContent": [
        "import createAgent from './create_agent';\nimport mapUri from './map_uri';\nimport { resolve } from 'url';\nimport { assign } from 'lodash';\n\nfunction createProxy(server, method, route, config) {\n\n  const options = {\n    method: method,\n    path: createProxy.createPath(route),\n    config: {\n      timeout: {\n        socket: server.config().get('elasticsearch.requestTimeout')\n      }\n    },\n    handler: {\n      proxy: {\n        mapUri: mapUri(server),\n        agent: createAgent(server),\n        xforward: true,\n        timeout: server.config().get('elasticsearch.requestTimeout'),\n        onResponse: function (err, responseFromUpstream, request, reply) {\n          reply(err, responseFromUpstream);\n        }\n      }\n    },\n  };\n\n  assign(options.config, config);\n\n  server.route(options);\n};\n\ncreateProxy.createPath = function createPath(path) {\n  const pre = '/elasticsearch';\n  const sep = path[0] === '/' ? '' : '/';\n  return `${pre}${sep}${path}`;\n};\n\nmodule.exports = createProxy;\n"
      ]
    },
    "mtime": 1467036622817
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/elasticsearch/lib/create_agent.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "url",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "url"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "http",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "http"
              }
            ]
          },
          {
            "source": "https",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "https"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _url = require('url');\n\nvar _url2 = _interopRequireDefault(_url);\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _http = require('http');\n\nvar _http2 = _interopRequireDefault(_http);\n\nvar _https = require('https');\n\nvar _https2 = _interopRequireDefault(_https);\n\nvar readFile = function readFile(file) {\n  return require('fs').readFileSync(file, 'utf8');\n};\n\nmodule.exports = _lodash2['default'].memoize(function (server) {\n  var config = server.config();\n  var target = _url2['default'].parse(config.get('elasticsearch.url'));\n\n  if (!/^https/.test(target.protocol)) return new _http2['default'].Agent();\n\n  var agentOptions = {\n    rejectUnauthorized: config.get('elasticsearch.ssl.verify')\n  };\n\n  if (_lodash2['default'].size(config.get('elasticsearch.ssl.ca'))) {\n    agentOptions.ca = config.get('elasticsearch.ssl.ca').map(readFile);\n  }\n\n  // Add client certificate and key if required by elasticsearch\n  if (config.get('elasticsearch.ssl.cert') && config.get('elasticsearch.ssl.key')) {\n    agentOptions.cert = readFile(config.get('elasticsearch.ssl.cert'));\n    agentOptions.key = readFile(config.get('elasticsearch.ssl.key'));\n  }\n\n  return new _https2['default'].Agent(agentOptions);\n});\n\n// See https://lodash.com/docs#memoize: We use a Map() instead of the default, because we want the keys in the cache\n// to be the server objects, and by default these would be coerced to strings as keys (which wouldn't be useful)\nmodule.exports.cache = new Map();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMvZWxhc3RpY3NlYXJjaC9saWIvY3JlYXRlX2FnZW50LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7bUJBQWdCLEtBQUs7Ozs7c0JBQ1AsUUFBUTs7OztvQkFFTCxNQUFNOzs7O3FCQUNMLE9BQU87Ozs7QUFGekIsSUFBTSxRQUFRLEdBQUcsU0FBWCxRQUFRLENBQUksSUFBSTtTQUFLLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxZQUFZLENBQUMsSUFBSSxFQUFFLE1BQU0sQ0FBQztDQUFBLENBQUM7O0FBSXBFLE1BQU0sQ0FBQyxPQUFPLEdBQUcsb0JBQUUsT0FBTyxDQUFDLFVBQVUsTUFBTSxFQUFFO0FBQzNDLE1BQU0sTUFBTSxHQUFHLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQztBQUMvQixNQUFNLE1BQU0sR0FBRyxpQkFBSSxLQUFLLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLENBQUM7O0FBRTFELE1BQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRSxPQUFPLElBQUksa0JBQUssS0FBSyxFQUFFLENBQUM7O0FBRTdELE1BQU0sWUFBWSxHQUFHO0FBQ25CLHNCQUFrQixFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsMEJBQTBCLENBQUM7R0FDM0QsQ0FBQzs7QUFFRixNQUFJLG9CQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLHNCQUFzQixDQUFDLENBQUMsRUFBRTtBQUM5QyxnQkFBWSxDQUFDLEVBQUUsR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLHNCQUFzQixDQUFDLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0dBQ3BFOzs7QUFHRCxNQUFJLE1BQU0sQ0FBQyxHQUFHLENBQUMsd0JBQXdCLENBQUMsSUFBSSxNQUFNLENBQUMsR0FBRyxDQUFDLHVCQUF1QixDQUFDLEVBQUU7QUFDL0UsZ0JBQVksQ0FBQyxJQUFJLEdBQUcsUUFBUSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsd0JBQXdCLENBQUMsQ0FBQyxDQUFDO0FBQ25FLGdCQUFZLENBQUMsR0FBRyxHQUFHLFFBQVEsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLHVCQUF1QixDQUFDLENBQUMsQ0FBQztHQUNsRTs7QUFFRCxTQUFPLElBQUksbUJBQU0sS0FBSyxDQUFDLFlBQVksQ0FBQyxDQUFDO0NBQ3RDLENBQUMsQ0FBQzs7OztBQUlILE1BQU0sQ0FBQyxPQUFPLENBQUMsS0FBSyxHQUFHLElBQUksR0FBRyxFQUFFLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvcGx1Z2lucy9lbGFzdGljc2VhcmNoL2xpYi9jcmVhdGVfYWdlbnQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdXJsIGZyb20gJ3VybCc7XG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuY29uc3QgcmVhZEZpbGUgPSAoZmlsZSkgPT4gcmVxdWlyZSgnZnMnKS5yZWFkRmlsZVN5bmMoZmlsZSwgJ3V0ZjgnKTtcbmltcG9ydCBodHRwIGZyb20gJ2h0dHAnO1xuaW1wb3J0IGh0dHBzIGZyb20gJ2h0dHBzJztcblxubW9kdWxlLmV4cG9ydHMgPSBfLm1lbW9pemUoZnVuY3Rpb24gKHNlcnZlcikge1xuICBjb25zdCBjb25maWcgPSBzZXJ2ZXIuY29uZmlnKCk7XG4gIGNvbnN0IHRhcmdldCA9IHVybC5wYXJzZShjb25maWcuZ2V0KCdlbGFzdGljc2VhcmNoLnVybCcpKTtcblxuICBpZiAoIS9eaHR0cHMvLnRlc3QodGFyZ2V0LnByb3RvY29sKSkgcmV0dXJuIG5ldyBodHRwLkFnZW50KCk7XG5cbiAgY29uc3QgYWdlbnRPcHRpb25zID0ge1xuICAgIHJlamVjdFVuYXV0aG9yaXplZDogY29uZmlnLmdldCgnZWxhc3RpY3NlYXJjaC5zc2wudmVyaWZ5JylcbiAgfTtcblxuICBpZiAoXy5zaXplKGNvbmZpZy5nZXQoJ2VsYXN0aWNzZWFyY2guc3NsLmNhJykpKSB7XG4gICAgYWdlbnRPcHRpb25zLmNhID0gY29uZmlnLmdldCgnZWxhc3RpY3NlYXJjaC5zc2wuY2EnKS5tYXAocmVhZEZpbGUpO1xuICB9XG5cbiAgLy8gQWRkIGNsaWVudCBjZXJ0aWZpY2F0ZSBhbmQga2V5IGlmIHJlcXVpcmVkIGJ5IGVsYXN0aWNzZWFyY2hcbiAgaWYgKGNvbmZpZy5nZXQoJ2VsYXN0aWNzZWFyY2guc3NsLmNlcnQnKSAmJiBjb25maWcuZ2V0KCdlbGFzdGljc2VhcmNoLnNzbC5rZXknKSkge1xuICAgIGFnZW50T3B0aW9ucy5jZXJ0ID0gcmVhZEZpbGUoY29uZmlnLmdldCgnZWxhc3RpY3NlYXJjaC5zc2wuY2VydCcpKTtcbiAgICBhZ2VudE9wdGlvbnMua2V5ID0gcmVhZEZpbGUoY29uZmlnLmdldCgnZWxhc3RpY3NlYXJjaC5zc2wua2V5JykpO1xuICB9XG5cbiAgcmV0dXJuIG5ldyBodHRwcy5BZ2VudChhZ2VudE9wdGlvbnMpO1xufSk7XG5cbi8vIFNlZSBodHRwczovL2xvZGFzaC5jb20vZG9jcyNtZW1vaXplOiBXZSB1c2UgYSBNYXAoKSBpbnN0ZWFkIG9mIHRoZSBkZWZhdWx0LCBiZWNhdXNlIHdlIHdhbnQgdGhlIGtleXMgaW4gdGhlIGNhY2hlXG4vLyB0byBiZSB0aGUgc2VydmVyIG9iamVjdHMsIGFuZCBieSBkZWZhdWx0IHRoZXNlIHdvdWxkIGJlIGNvZXJjZWQgdG8gc3RyaW5ncyBhcyBrZXlzICh3aGljaCB3b3VsZG4ndCBiZSB1c2VmdWwpXG5tb2R1bGUuZXhwb3J0cy5jYWNoZSA9IG5ldyBNYXAoKTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/elasticsearch/lib/create_agent.js"
      ],
      "names": [],
      "mappings": ";;;;mBAAgB,KAAK;;;;sBACP,QAAQ;;;;oBAEL,MAAM;;;;qBACL,OAAO;;;;AAFzB,IAAM,QAAQ,GAAG,SAAX,QAAQ,CAAI,IAAI;SAAK,OAAO,CAAC,IAAI,CAAC,CAAC,YAAY,CAAC,IAAI,EAAE,MAAM,CAAC;CAAA,CAAC;;AAIpE,MAAM,CAAC,OAAO,GAAG,oBAAE,OAAO,CAAC,UAAU,MAAM,EAAE;AAC3C,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC;AAC/B,MAAM,MAAM,GAAG,iBAAI,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC,CAAC;;AAE1D,MAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,OAAO,IAAI,kBAAK,KAAK,EAAE,CAAC;;AAE7D,MAAM,YAAY,GAAG;AACnB,sBAAkB,EAAE,MAAM,CAAC,GAAG,CAAC,0BAA0B,CAAC;GAC3D,CAAC;;AAEF,MAAI,oBAAE,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,sBAAsB,CAAC,CAAC,EAAE;AAC9C,gBAAY,CAAC,EAAE,GAAG,MAAM,CAAC,GAAG,CAAC,sBAAsB,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;GACpE;;;AAGD,MAAI,MAAM,CAAC,GAAG,CAAC,wBAAwB,CAAC,IAAI,MAAM,CAAC,GAAG,CAAC,uBAAuB,CAAC,EAAE;AAC/E,gBAAY,CAAC,IAAI,GAAG,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,wBAAwB,CAAC,CAAC,CAAC;AACnE,gBAAY,CAAC,GAAG,GAAG,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,uBAAuB,CAAC,CAAC,CAAC;GAClE;;AAED,SAAO,IAAI,mBAAM,KAAK,CAAC,YAAY,CAAC,CAAC;CACtC,CAAC,CAAC;;;;AAIH,MAAM,CAAC,OAAO,CAAC,KAAK,GAAG,IAAI,GAAG,EAAE,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/elasticsearch/lib/create_agent.js",
      "sourcesContent": [
        "import url from 'url';\nimport _ from 'lodash';\nconst readFile = (file) => require('fs').readFileSync(file, 'utf8');\nimport http from 'http';\nimport https from 'https';\n\nmodule.exports = _.memoize(function (server) {\n  const config = server.config();\n  const target = url.parse(config.get('elasticsearch.url'));\n\n  if (!/^https/.test(target.protocol)) return new http.Agent();\n\n  const agentOptions = {\n    rejectUnauthorized: config.get('elasticsearch.ssl.verify')\n  };\n\n  if (_.size(config.get('elasticsearch.ssl.ca'))) {\n    agentOptions.ca = config.get('elasticsearch.ssl.ca').map(readFile);\n  }\n\n  // Add client certificate and key if required by elasticsearch\n  if (config.get('elasticsearch.ssl.cert') && config.get('elasticsearch.ssl.key')) {\n    agentOptions.cert = readFile(config.get('elasticsearch.ssl.cert'));\n    agentOptions.key = readFile(config.get('elasticsearch.ssl.key'));\n  }\n\n  return new https.Agent(agentOptions);\n});\n\n// See https://lodash.com/docs#memoize: We use a Map() instead of the default, because we want the keys in the cache\n// to be the server objects, and by default these would be coerced to strings as keys (which wouldn't be useful)\nmodule.exports.cache = new Map();\n"
      ]
    },
    "mtime": 1467036622817
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/elasticsearch/lib/map_uri.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "querystring",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "querystring"
              }
            ]
          },
          {
            "source": "url",
            "imported": [
              "resolve"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "resolve",
                "local": "resolve"
              }
            ]
          },
          {
            "source": "./filter_headers",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "filterHeaders"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _querystring = require('querystring');\n\nvar _querystring2 = _interopRequireDefault(_querystring);\n\nvar _url = require('url');\n\nvar _filter_headers = require('./filter_headers');\n\nvar _filter_headers2 = _interopRequireDefault(_filter_headers);\n\nmodule.exports = function mapUri(server, prefix) {\n\n  var config = server.config();\n  return function (request, done) {\n    var path = request.path.replace('/elasticsearch', '');\n    var url = config.get('elasticsearch.url');\n    if (path) {\n      if (/\\/$/.test(url)) url = url.substring(0, url.length - 1);\n      url += path;\n    }\n    var query = _querystring2['default'].stringify(request.query);\n    if (query) url += '?' + query;\n    var filteredHeaders = (0, _filter_headers2['default'])(request.headers, server.config().get('elasticsearch.requestHeadersWhitelist'));\n    done(null, url, filteredHeaders);\n  };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMvZWxhc3RpY3NlYXJjaC9saWIvbWFwX3VyaS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OzJCQUF3QixhQUFhOzs7O21CQUNiLEtBQUs7OzhCQUNILGtCQUFrQjs7OztBQUU1QyxNQUFNLENBQUMsT0FBTyxHQUFHLFNBQVMsTUFBTSxDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUU7O0FBRS9DLE1BQU0sTUFBTSxHQUFHLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQztBQUMvQixTQUFPLFVBQVUsT0FBTyxFQUFFLElBQUksRUFBRTtBQUM5QixRQUFNLElBQUksR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxnQkFBZ0IsRUFBRSxFQUFFLENBQUMsQ0FBQztBQUN4RCxRQUFJLEdBQUcsR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLG1CQUFtQixDQUFDLENBQUM7QUFDMUMsUUFBSSxJQUFJLEVBQUU7QUFDUixVQUFJLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsR0FBRyxHQUFHLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDNUQsU0FBRyxJQUFJLElBQUksQ0FBQztLQUNiO0FBQ0QsUUFBTSxLQUFLLEdBQUcseUJBQVksU0FBUyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUNuRCxRQUFJLEtBQUssRUFBRSxHQUFHLElBQUksR0FBRyxHQUFHLEtBQUssQ0FBQztBQUM5QixRQUFNLGVBQWUsR0FBRyxpQ0FBYyxPQUFPLENBQUMsT0FBTyxFQUFFLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLENBQUMsdUNBQXVDLENBQUMsQ0FBQyxDQUFDO0FBQ3JILFFBQUksQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLGVBQWUsQ0FBQyxDQUFDO0dBQ2xDLENBQUM7Q0FDSCxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMvZWxhc3RpY3NlYXJjaC9saWIvbWFwX3VyaS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBxdWVyeXN0cmluZyBmcm9tICdxdWVyeXN0cmluZyc7XG5pbXBvcnQgeyByZXNvbHZlIH0gZnJvbSAndXJsJztcbmltcG9ydCBmaWx0ZXJIZWFkZXJzIGZyb20gJy4vZmlsdGVyX2hlYWRlcnMnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIG1hcFVyaShzZXJ2ZXIsIHByZWZpeCkge1xuXG4gIGNvbnN0IGNvbmZpZyA9IHNlcnZlci5jb25maWcoKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIChyZXF1ZXN0LCBkb25lKSB7XG4gICAgY29uc3QgcGF0aCA9IHJlcXVlc3QucGF0aC5yZXBsYWNlKCcvZWxhc3RpY3NlYXJjaCcsICcnKTtcbiAgICBsZXQgdXJsID0gY29uZmlnLmdldCgnZWxhc3RpY3NlYXJjaC51cmwnKTtcbiAgICBpZiAocGF0aCkge1xuICAgICAgaWYgKC9cXC8kLy50ZXN0KHVybCkpIHVybCA9IHVybC5zdWJzdHJpbmcoMCwgdXJsLmxlbmd0aCAtIDEpO1xuICAgICAgdXJsICs9IHBhdGg7XG4gICAgfVxuICAgIGNvbnN0IHF1ZXJ5ID0gcXVlcnlzdHJpbmcuc3RyaW5naWZ5KHJlcXVlc3QucXVlcnkpO1xuICAgIGlmIChxdWVyeSkgdXJsICs9ICc/JyArIHF1ZXJ5O1xuICAgIGNvbnN0IGZpbHRlcmVkSGVhZGVycyA9IGZpbHRlckhlYWRlcnMocmVxdWVzdC5oZWFkZXJzLCBzZXJ2ZXIuY29uZmlnKCkuZ2V0KCdlbGFzdGljc2VhcmNoLnJlcXVlc3RIZWFkZXJzV2hpdGVsaXN0JykpO1xuICAgIGRvbmUobnVsbCwgdXJsLCBmaWx0ZXJlZEhlYWRlcnMpO1xuICB9O1xufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/elasticsearch/lib/map_uri.js"
      ],
      "names": [],
      "mappings": ";;;;2BAAwB,aAAa;;;;mBACb,KAAK;;8BACH,kBAAkB;;;;AAE5C,MAAM,CAAC,OAAO,GAAG,SAAS,MAAM,CAAC,MAAM,EAAE,MAAM,EAAE;;AAE/C,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC;AAC/B,SAAO,UAAU,OAAO,EAAE,IAAI,EAAE;AAC9B,QAAM,IAAI,GAAG,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,EAAE,EAAE,CAAC,CAAC;AACxD,QAAI,GAAG,GAAG,MAAM,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC;AAC1C,QAAI,IAAI,EAAE;AACR,UAAI,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,GAAG,CAAC,SAAS,CAAC,CAAC,EAAE,GAAG,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;AAC5D,SAAG,IAAI,IAAI,CAAC;KACb;AACD,QAAM,KAAK,GAAG,yBAAY,SAAS,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;AACnD,QAAI,KAAK,EAAE,GAAG,IAAI,GAAG,GAAG,KAAK,CAAC;AAC9B,QAAM,eAAe,GAAG,iCAAc,OAAO,CAAC,OAAO,EAAE,MAAM,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,uCAAuC,CAAC,CAAC,CAAC;AACrH,QAAI,CAAC,IAAI,EAAE,GAAG,EAAE,eAAe,CAAC,CAAC;GAClC,CAAC;CACH,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/elasticsearch/lib/map_uri.js",
      "sourcesContent": [
        "import querystring from 'querystring';\nimport { resolve } from 'url';\nimport filterHeaders from './filter_headers';\n\nmodule.exports = function mapUri(server, prefix) {\n\n  const config = server.config();\n  return function (request, done) {\n    const path = request.path.replace('/elasticsearch', '');\n    let url = config.get('elasticsearch.url');\n    if (path) {\n      if (/\\/$/.test(url)) url = url.substring(0, url.length - 1);\n      url += path;\n    }\n    const query = querystring.stringify(request.query);\n    if (query) url += '?' + query;\n    const filteredHeaders = filterHeaders(request.headers, server.config().get('elasticsearch.requestHeadersWhitelist'));\n    done(null, url, filteredHeaders);\n  };\n};\n"
      ]
    },
    "mtime": 1467036622817
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kbn_doc_views/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nexports['default'] = function (kibana) {\n\n  return new kibana.Plugin({\n\n    uiExports: {\n      docViews: ['plugins/kbn_doc_views/kbn_doc_views']\n    }\n\n  });\n};\n\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2JuX2RvY192aWV3cy9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7cUJBQWUsVUFBVSxNQUFNLEVBQUU7O0FBRS9CLFNBQU8sSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDOztBQUV2QixhQUFTLEVBQUU7QUFDVCxjQUFRLEVBQUUsQ0FDUixxQ0FBcUMsQ0FDdEM7S0FDRjs7R0FFRixDQUFDLENBQUM7Q0FFSjs7QUFBQSxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2JuX2RvY192aWV3cy9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChraWJhbmEpIHtcblxuICByZXR1cm4gbmV3IGtpYmFuYS5QbHVnaW4oe1xuXG4gICAgdWlFeHBvcnRzOiB7XG4gICAgICBkb2NWaWV3czogW1xuICAgICAgICAncGx1Z2lucy9rYm5fZG9jX3ZpZXdzL2tibl9kb2Nfdmlld3MnXG4gICAgICBdXG4gICAgfVxuXG4gIH0pO1xuXG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kbn_doc_views/index.js"
      ],
      "names": [],
      "mappings": ";;;;;;qBAAe,UAAU,MAAM,EAAE;;AAE/B,SAAO,IAAI,MAAM,CAAC,MAAM,CAAC;;AAEvB,aAAS,EAAE;AACT,cAAQ,EAAE,CACR,qCAAqC,CACtC;KACF;;GAEF,CAAC,CAAC;CAEJ;;AAAA,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/kbn_doc_views/index.js",
      "sourcesContent": [
        "export default function (kibana) {\n\n  return new kibana.Plugin({\n\n    uiExports: {\n      docViews: [\n        'plugins/kbn_doc_views/kbn_doc_views'\n      ]\n    }\n\n  });\n\n};\n"
      ]
    },
    "mtime": 1467036622817
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kbn_vislib_vis_types/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nexports['default'] = function (kibana) {\n\n  return new kibana.Plugin({\n\n    uiExports: {\n      visTypes: ['plugins/kbn_vislib_vis_types/kbn_vislib_vis_types']\n    }\n\n  });\n};\n\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2JuX3Zpc2xpYl92aXNfdHlwZXMvaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O3FCQUFlLFVBQVUsTUFBTSxFQUFFOztBQUUvQixTQUFPLElBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQzs7QUFFdkIsYUFBUyxFQUFFO0FBQ1QsY0FBUSxFQUFFLENBQ1IsbURBQW1ELENBQ3BEO0tBQ0Y7O0dBRUYsQ0FBQyxDQUFDO0NBRUo7O0FBQUEsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9wbHVnaW5zL2tibl92aXNsaWJfdmlzX3R5cGVzL2luZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKGtpYmFuYSkge1xuXG4gIHJldHVybiBuZXcga2liYW5hLlBsdWdpbih7XG5cbiAgICB1aUV4cG9ydHM6IHtcbiAgICAgIHZpc1R5cGVzOiBbXG4gICAgICAgICdwbHVnaW5zL2tibl92aXNsaWJfdmlzX3R5cGVzL2tibl92aXNsaWJfdmlzX3R5cGVzJ1xuICAgICAgXVxuICAgIH1cblxuICB9KTtcblxufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kbn_vislib_vis_types/index.js"
      ],
      "names": [],
      "mappings": ";;;;;;qBAAe,UAAU,MAAM,EAAE;;AAE/B,SAAO,IAAI,MAAM,CAAC,MAAM,CAAC;;AAEvB,aAAS,EAAE;AACT,cAAQ,EAAE,CACR,mDAAmD,CACpD;KACF;;GAEF,CAAC,CAAC;CAEJ;;AAAA,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/kbn_vislib_vis_types/index.js",
      "sourcesContent": [
        "export default function (kibana) {\n\n  return new kibana.Plugin({\n\n    uiExports: {\n      visTypes: [\n        'plugins/kbn_vislib_vis_types/kbn_vislib_vis_types'\n      ]\n    }\n\n  });\n\n};\n"
      ]
    },
    "mtime": 1467036622817
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./server/routes/api/ingest",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "ingest"
              }
            ]
          },
          {
            "source": "./server/routes/api/search",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "search"
              }
            ]
          },
          {
            "source": "./server/routes/api/settings",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "settings"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _serverRoutesApiIngest = require('./server/routes/api/ingest');\n\nvar _serverRoutesApiIngest2 = _interopRequireDefault(_serverRoutesApiIngest);\n\nvar _serverRoutesApiSearch = require('./server/routes/api/search');\n\nvar _serverRoutesApiSearch2 = _interopRequireDefault(_serverRoutesApiSearch);\n\nvar _serverRoutesApiSettings = require('./server/routes/api/settings');\n\nvar _serverRoutesApiSettings2 = _interopRequireDefault(_serverRoutesApiSettings);\n\nmodule.exports = function (kibana) {\n  return new kibana.Plugin({\n    id: 'kibana',\n    config: function config(Joi) {\n      return Joi.object({\n        enabled: Joi.boolean()['default'](true),\n        defaultAppId: Joi.string()['default']('discover'),\n        index: Joi.string()['default']('.kibana')\n      })['default']();\n    },\n\n    uiExports: {\n      app: {\n        id: 'kibana',\n        title: 'Kibana',\n        listed: false,\n        description: 'the kibana you know and love',\n        main: 'plugins/kibana/kibana',\n        uses: ['visTypes', 'spyModes', 'fieldFormats', 'navbarExtensions', 'managementSections', 'docViews'],\n\n        injectVars: function injectVars(server, options) {\n          var config = server.config();\n\n          return {\n            kbnDefaultAppId: config.get('kibana.defaultAppId')\n          };\n        }\n      },\n\n      links: [{\n        title: 'Discover',\n        order: -1003,\n        url: '/app/kibana#/discover',\n        description: 'interactively explore your data',\n        icon: 'plugins/kibana/assets/discover.svg'\n      }, {\n        title: 'Visualize',\n        order: -1002,\n        url: '/app/kibana#/visualize',\n        description: 'design data visualizations',\n        icon: 'plugins/kibana/assets/visualize.svg'\n      }, {\n        title: 'Dashboard',\n        order: -1001,\n        url: '/app/kibana#/dashboard',\n        description: 'compose visualizations for much win',\n        icon: 'plugins/kibana/assets/dashboard.svg'\n      }, {\n        title: 'Management',\n        order: 1000,\n        url: '/app/kibana#/management',\n        description: 'define index patterns, change config, and more',\n        icon: 'plugins/kibana/assets/settings.svg',\n        linkToLastSubUrl: false\n      }],\n      injectDefaultVars: function injectDefaultVars(server, options) {\n        return {\n          kbnIndex: options.index\n        };\n      }\n    },\n\n    init: function init(server, options) {\n      (0, _serverRoutesApiIngest2['default'])(server);\n      (0, _serverRoutesApiSearch2['default'])(server);\n      (0, _serverRoutesApiSettings2['default'])(server);\n    }\n  });\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7cUNBQW1CLDRCQUE0Qjs7OztxQ0FDNUIsNEJBQTRCOzs7O3VDQUMxQiw4QkFBOEI7Ozs7QUFFbkQsTUFBTSxDQUFDLE9BQU8sR0FBRyxVQUFVLE1BQU0sRUFBRTtBQUNqQyxTQUFPLElBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQztBQUN2QixNQUFFLEVBQUUsUUFBUTtBQUNaLFVBQU0sRUFBRSxnQkFBVSxHQUFHLEVBQUU7QUFDckIsYUFBTyxHQUFHLENBQUMsTUFBTSxDQUFDO0FBQ2hCLGVBQU8sRUFBRSxHQUFHLENBQUMsT0FBTyxFQUFFLFdBQVEsQ0FBQyxJQUFJLENBQUM7QUFDcEMsb0JBQVksRUFBRSxHQUFHLENBQUMsTUFBTSxFQUFFLFdBQVEsQ0FBQyxVQUFVLENBQUM7QUFDOUMsYUFBSyxFQUFFLEdBQUcsQ0FBQyxNQUFNLEVBQUUsV0FBUSxDQUFDLFNBQVMsQ0FBQztPQUN2QyxDQUFDLFdBQVEsRUFBRSxDQUFDO0tBQ2Q7O0FBRUQsYUFBUyxFQUFFO0FBQ1QsU0FBRyxFQUFFO0FBQ0gsVUFBRSxFQUFFLFFBQVE7QUFDWixhQUFLLEVBQUUsUUFBUTtBQUNmLGNBQU0sRUFBRSxLQUFLO0FBQ2IsbUJBQVcsRUFBRSw4QkFBOEI7QUFDM0MsWUFBSSxFQUFFLHVCQUF1QjtBQUM3QixZQUFJLEVBQUUsQ0FDSixVQUFVLEVBQ1YsVUFBVSxFQUNWLGNBQWMsRUFDZCxrQkFBa0IsRUFDbEIsb0JBQW9CLEVBQ3BCLFVBQVUsQ0FDWDs7QUFFRCxrQkFBVSxFQUFFLG9CQUFVLE1BQU0sRUFBRSxPQUFPLEVBQUU7QUFDckMsY0FBSSxNQUFNLEdBQUcsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDOztBQUU3QixpQkFBTztBQUNMLDJCQUFlLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxxQkFBcUIsQ0FBQztXQUNuRCxDQUFDO1NBQ0g7T0FDRjs7QUFFRCxXQUFLLEVBQUUsQ0FDTDtBQUNFLGFBQUssRUFBRSxVQUFVO0FBQ2pCLGFBQUssRUFBRSxDQUFDLElBQUk7QUFDWixXQUFHLEVBQUUsdUJBQXVCO0FBQzVCLG1CQUFXLEVBQUUsaUNBQWlDO0FBQzlDLFlBQUksRUFBRSxvQ0FBb0M7T0FDM0MsRUFDRDtBQUNFLGFBQUssRUFBRSxXQUFXO0FBQ2xCLGFBQUssRUFBRSxDQUFDLElBQUk7QUFDWixXQUFHLEVBQUUsd0JBQXdCO0FBQzdCLG1CQUFXLEVBQUUsNEJBQTRCO0FBQ3pDLFlBQUksRUFBRSxxQ0FBcUM7T0FDNUMsRUFDRDtBQUNFLGFBQUssRUFBRSxXQUFXO0FBQ2xCLGFBQUssRUFBRSxDQUFDLElBQUk7QUFDWixXQUFHLEVBQUUsd0JBQXdCO0FBQzdCLG1CQUFXLEVBQUUscUNBQXFDO0FBQ2xELFlBQUksRUFBRSxxQ0FBcUM7T0FDNUMsRUFDRDtBQUNFLGFBQUssRUFBRSxZQUFZO0FBQ25CLGFBQUssRUFBRSxJQUFJO0FBQ1gsV0FBRyxFQUFFLHlCQUF5QjtBQUM5QixtQkFBVyxFQUFFLGdEQUFnRDtBQUM3RCxZQUFJLEVBQUUsb0NBQW9DO0FBQzFDLHdCQUFnQixFQUFFLEtBQUs7T0FDeEIsQ0FDRjtBQUNELHVCQUFpQixFQUFBLDJCQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUU7QUFDakMsZUFBTztBQUNMLGtCQUFRLEVBQUUsT0FBTyxDQUFDLEtBQUs7U0FDeEIsQ0FBQztPQUNIO0tBQ0Y7O0FBRUQsUUFBSSxFQUFFLGNBQVUsTUFBTSxFQUFFLE9BQU8sRUFBRTtBQUMvQiw4Q0FBTyxNQUFNLENBQUMsQ0FBQztBQUNmLDhDQUFPLE1BQU0sQ0FBQyxDQUFDO0FBQ2YsZ0RBQVMsTUFBTSxDQUFDLENBQUM7S0FDbEI7R0FDRixDQUFDLENBQUM7Q0FFSixDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL2luZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGluZ2VzdCBmcm9tICcuL3NlcnZlci9yb3V0ZXMvYXBpL2luZ2VzdCc7XG5pbXBvcnQgc2VhcmNoIGZyb20gJy4vc2VydmVyL3JvdXRlcy9hcGkvc2VhcmNoJztcbmltcG9ydCBzZXR0aW5ncyBmcm9tICcuL3NlcnZlci9yb3V0ZXMvYXBpL3NldHRpbmdzJztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoa2liYW5hKSB7XG4gIHJldHVybiBuZXcga2liYW5hLlBsdWdpbih7XG4gICAgaWQ6ICdraWJhbmEnLFxuICAgIGNvbmZpZzogZnVuY3Rpb24gKEpvaSkge1xuICAgICAgcmV0dXJuIEpvaS5vYmplY3Qoe1xuICAgICAgICBlbmFibGVkOiBKb2kuYm9vbGVhbigpLmRlZmF1bHQodHJ1ZSksXG4gICAgICAgIGRlZmF1bHRBcHBJZDogSm9pLnN0cmluZygpLmRlZmF1bHQoJ2Rpc2NvdmVyJyksXG4gICAgICAgIGluZGV4OiBKb2kuc3RyaW5nKCkuZGVmYXVsdCgnLmtpYmFuYScpXG4gICAgICB9KS5kZWZhdWx0KCk7XG4gICAgfSxcblxuICAgIHVpRXhwb3J0czoge1xuICAgICAgYXBwOiB7XG4gICAgICAgIGlkOiAna2liYW5hJyxcbiAgICAgICAgdGl0bGU6ICdLaWJhbmEnLFxuICAgICAgICBsaXN0ZWQ6IGZhbHNlLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ3RoZSBraWJhbmEgeW91IGtub3cgYW5kIGxvdmUnLFxuICAgICAgICBtYWluOiAncGx1Z2lucy9raWJhbmEva2liYW5hJyxcbiAgICAgICAgdXNlczogW1xuICAgICAgICAgICd2aXNUeXBlcycsXG4gICAgICAgICAgJ3NweU1vZGVzJyxcbiAgICAgICAgICAnZmllbGRGb3JtYXRzJyxcbiAgICAgICAgICAnbmF2YmFyRXh0ZW5zaW9ucycsXG4gICAgICAgICAgJ21hbmFnZW1lbnRTZWN0aW9ucycsXG4gICAgICAgICAgJ2RvY1ZpZXdzJ1xuICAgICAgICBdLFxuXG4gICAgICAgIGluamVjdFZhcnM6IGZ1bmN0aW9uIChzZXJ2ZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgICBsZXQgY29uZmlnID0gc2VydmVyLmNvbmZpZygpO1xuXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGtibkRlZmF1bHRBcHBJZDogY29uZmlnLmdldCgna2liYW5hLmRlZmF1bHRBcHBJZCcpXG4gICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgIH0sXG5cbiAgICAgIGxpbmtzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICB0aXRsZTogJ0Rpc2NvdmVyJyxcbiAgICAgICAgICBvcmRlcjogLTEwMDMsXG4gICAgICAgICAgdXJsOiAnL2FwcC9raWJhbmEjL2Rpc2NvdmVyJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ2ludGVyYWN0aXZlbHkgZXhwbG9yZSB5b3VyIGRhdGEnLFxuICAgICAgICAgIGljb246ICdwbHVnaW5zL2tpYmFuYS9hc3NldHMvZGlzY292ZXIuc3ZnJyxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHRpdGxlOiAnVmlzdWFsaXplJyxcbiAgICAgICAgICBvcmRlcjogLTEwMDIsXG4gICAgICAgICAgdXJsOiAnL2FwcC9raWJhbmEjL3Zpc3VhbGl6ZScsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdkZXNpZ24gZGF0YSB2aXN1YWxpemF0aW9ucycsXG4gICAgICAgICAgaWNvbjogJ3BsdWdpbnMva2liYW5hL2Fzc2V0cy92aXN1YWxpemUuc3ZnJyxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHRpdGxlOiAnRGFzaGJvYXJkJyxcbiAgICAgICAgICBvcmRlcjogLTEwMDEsXG4gICAgICAgICAgdXJsOiAnL2FwcC9raWJhbmEjL2Rhc2hib2FyZCcsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdjb21wb3NlIHZpc3VhbGl6YXRpb25zIGZvciBtdWNoIHdpbicsXG4gICAgICAgICAgaWNvbjogJ3BsdWdpbnMva2liYW5hL2Fzc2V0cy9kYXNoYm9hcmQuc3ZnJyxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHRpdGxlOiAnTWFuYWdlbWVudCcsXG4gICAgICAgICAgb3JkZXI6IDEwMDAsXG4gICAgICAgICAgdXJsOiAnL2FwcC9raWJhbmEjL21hbmFnZW1lbnQnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnZGVmaW5lIGluZGV4IHBhdHRlcm5zLCBjaGFuZ2UgY29uZmlnLCBhbmQgbW9yZScsXG4gICAgICAgICAgaWNvbjogJ3BsdWdpbnMva2liYW5hL2Fzc2V0cy9zZXR0aW5ncy5zdmcnLFxuICAgICAgICAgIGxpbmtUb0xhc3RTdWJVcmw6IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBpbmplY3REZWZhdWx0VmFycyhzZXJ2ZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBrYm5JbmRleDogb3B0aW9ucy5pbmRleFxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICB9LFxuXG4gICAgaW5pdDogZnVuY3Rpb24gKHNlcnZlciwgb3B0aW9ucykge1xuICAgICAgaW5nZXN0KHNlcnZlcik7XG4gICAgICBzZWFyY2goc2VydmVyKTtcbiAgICAgIHNldHRpbmdzKHNlcnZlcik7XG4gICAgfVxuICB9KTtcblxufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/index.js"
      ],
      "names": [],
      "mappings": ";;;;qCAAmB,4BAA4B;;;;qCAC5B,4BAA4B;;;;uCAC1B,8BAA8B;;;;AAEnD,MAAM,CAAC,OAAO,GAAG,UAAU,MAAM,EAAE;AACjC,SAAO,IAAI,MAAM,CAAC,MAAM,CAAC;AACvB,MAAE,EAAE,QAAQ;AACZ,UAAM,EAAE,gBAAU,GAAG,EAAE;AACrB,aAAO,GAAG,CAAC,MAAM,CAAC;AAChB,eAAO,EAAE,GAAG,CAAC,OAAO,EAAE,WAAQ,CAAC,IAAI,CAAC;AACpC,oBAAY,EAAE,GAAG,CAAC,MAAM,EAAE,WAAQ,CAAC,UAAU,CAAC;AAC9C,aAAK,EAAE,GAAG,CAAC,MAAM,EAAE,WAAQ,CAAC,SAAS,CAAC;OACvC,CAAC,WAAQ,EAAE,CAAC;KACd;;AAED,aAAS,EAAE;AACT,SAAG,EAAE;AACH,UAAE,EAAE,QAAQ;AACZ,aAAK,EAAE,QAAQ;AACf,cAAM,EAAE,KAAK;AACb,mBAAW,EAAE,8BAA8B;AAC3C,YAAI,EAAE,uBAAuB;AAC7B,YAAI,EAAE,CACJ,UAAU,EACV,UAAU,EACV,cAAc,EACd,kBAAkB,EAClB,oBAAoB,EACpB,UAAU,CACX;;AAED,kBAAU,EAAE,oBAAU,MAAM,EAAE,OAAO,EAAE;AACrC,cAAI,MAAM,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC;;AAE7B,iBAAO;AACL,2BAAe,EAAE,MAAM,CAAC,GAAG,CAAC,qBAAqB,CAAC;WACnD,CAAC;SACH;OACF;;AAED,WAAK,EAAE,CACL;AACE,aAAK,EAAE,UAAU;AACjB,aAAK,EAAE,CAAC,IAAI;AACZ,WAAG,EAAE,uBAAuB;AAC5B,mBAAW,EAAE,iCAAiC;AAC9C,YAAI,EAAE,oCAAoC;OAC3C,EACD;AACE,aAAK,EAAE,WAAW;AAClB,aAAK,EAAE,CAAC,IAAI;AACZ,WAAG,EAAE,wBAAwB;AAC7B,mBAAW,EAAE,4BAA4B;AACzC,YAAI,EAAE,qCAAqC;OAC5C,EACD;AACE,aAAK,EAAE,WAAW;AAClB,aAAK,EAAE,CAAC,IAAI;AACZ,WAAG,EAAE,wBAAwB;AAC7B,mBAAW,EAAE,qCAAqC;AAClD,YAAI,EAAE,qCAAqC;OAC5C,EACD;AACE,aAAK,EAAE,YAAY;AACnB,aAAK,EAAE,IAAI;AACX,WAAG,EAAE,yBAAyB;AAC9B,mBAAW,EAAE,gDAAgD;AAC7D,YAAI,EAAE,oCAAoC;AAC1C,wBAAgB,EAAE,KAAK;OACxB,CACF;AACD,uBAAiB,EAAA,2BAAC,MAAM,EAAE,OAAO,EAAE;AACjC,eAAO;AACL,kBAAQ,EAAE,OAAO,CAAC,KAAK;SACxB,CAAC;OACH;KACF;;AAED,QAAI,EAAE,cAAU,MAAM,EAAE,OAAO,EAAE;AAC/B,8CAAO,MAAM,CAAC,CAAC;AACf,8CAAO,MAAM,CAAC,CAAC;AACf,gDAAS,MAAM,CAAC,CAAC;KAClB;GACF,CAAC,CAAC;CAEJ,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/kibana/index.js",
      "sourcesContent": [
        "import ingest from './server/routes/api/ingest';\nimport search from './server/routes/api/search';\nimport settings from './server/routes/api/settings';\n\nmodule.exports = function (kibana) {\n  return new kibana.Plugin({\n    id: 'kibana',\n    config: function (Joi) {\n      return Joi.object({\n        enabled: Joi.boolean().default(true),\n        defaultAppId: Joi.string().default('discover'),\n        index: Joi.string().default('.kibana')\n      }).default();\n    },\n\n    uiExports: {\n      app: {\n        id: 'kibana',\n        title: 'Kibana',\n        listed: false,\n        description: 'the kibana you know and love',\n        main: 'plugins/kibana/kibana',\n        uses: [\n          'visTypes',\n          'spyModes',\n          'fieldFormats',\n          'navbarExtensions',\n          'managementSections',\n          'docViews'\n        ],\n\n        injectVars: function (server, options) {\n          let config = server.config();\n\n          return {\n            kbnDefaultAppId: config.get('kibana.defaultAppId')\n          };\n        },\n      },\n\n      links: [\n        {\n          title: 'Discover',\n          order: -1003,\n          url: '/app/kibana#/discover',\n          description: 'interactively explore your data',\n          icon: 'plugins/kibana/assets/discover.svg',\n        },\n        {\n          title: 'Visualize',\n          order: -1002,\n          url: '/app/kibana#/visualize',\n          description: 'design data visualizations',\n          icon: 'plugins/kibana/assets/visualize.svg',\n        },\n        {\n          title: 'Dashboard',\n          order: -1001,\n          url: '/app/kibana#/dashboard',\n          description: 'compose visualizations for much win',\n          icon: 'plugins/kibana/assets/dashboard.svg',\n        },\n        {\n          title: 'Management',\n          order: 1000,\n          url: '/app/kibana#/management',\n          description: 'define index patterns, change config, and more',\n          icon: 'plugins/kibana/assets/settings.svg',\n          linkToLastSubUrl: false\n        }\n      ],\n      injectDefaultVars(server, options) {\n        return {\n          kbnIndex: options.index\n        };\n      },\n    },\n\n    init: function (server, options) {\n      ingest(server);\n      search(server);\n      settings(server);\n    }\n  });\n\n};\n"
      ]
    },
    "mtime": 1467036622821
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/routes/api/ingest/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./register_post",
            "imported": [
              "registerPost"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "registerPost",
                "local": "registerPost"
              }
            ]
          },
          {
            "source": "./register_delete",
            "imported": [
              "registerDelete"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "registerDelete",
                "local": "registerDelete"
              }
            ]
          },
          {
            "source": "./register_processors",
            "imported": [
              "registerProcessors"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "registerProcessors",
                "local": "registerProcessors"
              }
            ]
          },
          {
            "source": "./register_simulate",
            "imported": [
              "registerSimulate"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "registerSimulate",
                "local": "registerSimulate"
              }
            ]
          },
          {
            "source": "./register_data",
            "imported": [
              "registerData"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "registerData",
                "local": "registerData"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _register_post = require('./register_post');\n\nvar _register_delete = require('./register_delete');\n\nvar _register_processors = require('./register_processors');\n\nvar _register_simulate = require('./register_simulate');\n\nvar _register_data = require('./register_data');\n\nexports['default'] = function (server) {\n  (0, _register_post.registerPost)(server);\n  (0, _register_delete.registerDelete)(server);\n  (0, _register_processors.registerProcessors)(server);\n  (0, _register_simulate.registerSimulate)(server);\n  (0, _register_data.registerData)(server);\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9yb3V0ZXMvYXBpL2luZ2VzdC9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7NkJBQTZCLGlCQUFpQjs7K0JBQ2YsbUJBQW1COzttQ0FDZix1QkFBdUI7O2lDQUN6QixxQkFBcUI7OzZCQUN6QixpQkFBaUI7O3FCQUUvQixVQUFVLE1BQU0sRUFBRTtBQUMvQixtQ0FBYSxNQUFNLENBQUMsQ0FBQztBQUNyQix1Q0FBZSxNQUFNLENBQUMsQ0FBQztBQUN2QiwrQ0FBbUIsTUFBTSxDQUFDLENBQUM7QUFDM0IsMkNBQWlCLE1BQU0sQ0FBQyxDQUFDO0FBQ3pCLG1DQUFhLE1BQU0sQ0FBQyxDQUFDO0NBQ3RCIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9yb3V0ZXMvYXBpL2luZ2VzdC9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJlZ2lzdGVyUG9zdCB9IGZyb20gJy4vcmVnaXN0ZXJfcG9zdCc7XG5pbXBvcnQgeyByZWdpc3RlckRlbGV0ZSB9IGZyb20gJy4vcmVnaXN0ZXJfZGVsZXRlJztcbmltcG9ydCB7IHJlZ2lzdGVyUHJvY2Vzc29ycyB9IGZyb20gJy4vcmVnaXN0ZXJfcHJvY2Vzc29ycyc7XG5pbXBvcnQgeyByZWdpc3RlclNpbXVsYXRlIH0gZnJvbSAnLi9yZWdpc3Rlcl9zaW11bGF0ZSc7XG5pbXBvcnQgeyByZWdpc3RlckRhdGEgfSBmcm9tICcuL3JlZ2lzdGVyX2RhdGEnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoc2VydmVyKSB7XG4gIHJlZ2lzdGVyUG9zdChzZXJ2ZXIpO1xuICByZWdpc3RlckRlbGV0ZShzZXJ2ZXIpO1xuICByZWdpc3RlclByb2Nlc3NvcnMoc2VydmVyKTtcbiAgcmVnaXN0ZXJTaW11bGF0ZShzZXJ2ZXIpO1xuICByZWdpc3RlckRhdGEoc2VydmVyKTtcbn1cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/routes/api/ingest/index.js"
      ],
      "names": [],
      "mappings": ";;;;;;6BAA6B,iBAAiB;;+BACf,mBAAmB;;mCACf,uBAAuB;;iCACzB,qBAAqB;;6BACzB,iBAAiB;;qBAE/B,UAAU,MAAM,EAAE;AAC/B,mCAAa,MAAM,CAAC,CAAC;AACrB,uCAAe,MAAM,CAAC,CAAC;AACvB,+CAAmB,MAAM,CAAC,CAAC;AAC3B,2CAAiB,MAAM,CAAC,CAAC;AACzB,mCAAa,MAAM,CAAC,CAAC;CACtB",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/routes/api/ingest/index.js",
      "sourcesContent": [
        "import { registerPost } from './register_post';\nimport { registerDelete } from './register_delete';\nimport { registerProcessors } from './register_processors';\nimport { registerSimulate } from './register_simulate';\nimport { registerData } from './register_data';\n\nexport default function (server) {\n  registerPost(server);\n  registerDelete(server);\n  registerProcessors(server);\n  registerSimulate(server);\n  registerData(server);\n}\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/routes/api/ingest/register_post.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "boom",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Boom"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "../../../lib/schemas/resources/ingest_config_schema",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "ingestConfigSchema"
              }
            ]
          },
          {
            "source": "../../../lib/handle_es_error",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "handleESError"
              }
            ]
          },
          {
            "source": "../../../lib/create_mappings_from_pattern_fields",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "createMappingsFromPatternFields"
              }
            ]
          },
          {
            "source": "../../../lib/init_default_field_props",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "initDefaultFieldProps"
              }
            ]
          },
          {
            "source": "../../../../common/lib/convert_pattern_and_ingest_name",
            "imported": [
              "ingestToPattern",
              "patternToIngest"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "ingestToPattern",
                "local": "ingestToPattern"
              },
              {
                "kind": "named",
                "imported": "patternToIngest",
                "local": "patternToIngest"
              }
            ]
          },
          {
            "source": "../../../../common/lib/case_conversion",
            "imported": [
              "keysToCamelCaseShallow"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "keysToCamelCaseShallow",
                "local": "keysToCamelCaseShallow"
              }
            ]
          },
          {
            "source": "../../../lib/converters/ingest_pipeline_api_kibana_to_es_converter",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "ingestPipelineApiKibanaToEsConverter"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "registerPost",
            "server"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "registerPost",
              "exported": "registerPost"
            },
            {
              "kind": "local",
              "local": "server",
              "exported": "server"
            }
          ]
        }
      },
      "usedHelpers": [
        "async-to-generator",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports.registerPost = registerPost;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nvar _boom = require('boom');\n\nvar _boom2 = _interopRequireDefault(_boom);\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _libSchemasResourcesIngest_config_schema = require('../../../lib/schemas/resources/ingest_config_schema');\n\nvar _libSchemasResourcesIngest_config_schema2 = _interopRequireDefault(_libSchemasResourcesIngest_config_schema);\n\nvar _libHandle_es_error = require('../../../lib/handle_es_error');\n\nvar _libHandle_es_error2 = _interopRequireDefault(_libHandle_es_error);\n\nvar _libCreate_mappings_from_pattern_fields = require('../../../lib/create_mappings_from_pattern_fields');\n\nvar _libCreate_mappings_from_pattern_fields2 = _interopRequireDefault(_libCreate_mappings_from_pattern_fields);\n\nvar _libInit_default_field_props = require('../../../lib/init_default_field_props');\n\nvar _libInit_default_field_props2 = _interopRequireDefault(_libInit_default_field_props);\n\nvar _commonLibConvert_pattern_and_ingest_name = require('../../../../common/lib/convert_pattern_and_ingest_name');\n\nvar _commonLibCase_conversion = require('../../../../common/lib/case_conversion');\n\nvar _libConvertersIngest_pipeline_api_kibana_to_es_converter = require('../../../lib/converters/ingest_pipeline_api_kibana_to_es_converter');\n\nvar _libConvertersIngest_pipeline_api_kibana_to_es_converter2 = _interopRequireDefault(_libConvertersIngest_pipeline_api_kibana_to_es_converter);\n\nfunction registerPost(server) {\n  var kibanaIndex = server.config().get('kibana.index');\n\n  function patternRollback(rootError, indexPatternId, boundCallWithRequest) {\n    var deleteParams = {\n      index: kibanaIndex,\n      type: 'index-pattern',\n      id: indexPatternId\n    };\n\n    return boundCallWithRequest('delete', deleteParams).then(function () {\n      throw rootError;\n    }, function (patternDeletionError) {\n      throw new Error('index-pattern ' + indexPatternId + ' created successfully but index template or pipeline\\n                creation failed. Failed to rollback index-pattern creation, must delete manually.\\n                ' + patternDeletionError.toString() + '\\n                ' + rootError.toString());\n    });\n  }\n\n  function templateRollback(rootError, templateName, boundCallWithRequest) {\n    var deleteParams = {\n      name: templateName\n    };\n\n    return boundCallWithRequest('indices.deleteTemplate', deleteParams).then(function () {\n      throw rootError;\n    }, function (templateDeletionError) {\n      throw new Error('index template ' + templateName + ' created successfully but pipeline\\n                creation failed. Failed to rollback template creation, must delete manually.\\n                ' + templateDeletionError.toString() + '\\n                ' + rootError.toString());\n    });\n  }\n\n  server.route({\n    path: '/api/kibana/ingest',\n    method: 'POST',\n    config: {\n      validate: {\n        payload: _libSchemasResourcesIngest_config_schema2['default']\n      }\n    },\n    handler: _asyncToGenerator(function* (req, reply) {\n      var config = yield server.uiSettings().getAll();\n      var boundCallWithRequest = _lodash2['default'].partial(server.plugins.elasticsearch.callWithRequest, req);\n      var requestDocument = _lodash2['default'].cloneDeep(req.payload);\n      var indexPattern = (0, _commonLibCase_conversion.keysToCamelCaseShallow)(requestDocument.index_pattern);\n      var indexPatternId = indexPattern.id;\n      var ingestConfigName = (0, _commonLibConvert_pattern_and_ingest_name.patternToIngest)(indexPatternId);\n      var shouldCreatePipeline = !_lodash2['default'].isEmpty(requestDocument.pipeline);\n      delete indexPattern.id;\n\n      var mappings = (0, _libCreate_mappings_from_pattern_fields2['default'])(indexPattern.fields);\n\n      var metaFields = _lodash2['default'].get(config, 'metaFields.userValue', config.metaFields.value);\n      var indexPatternMetaFields = _lodash2['default'].map(metaFields, function (name) {\n        return { name: name };\n      });\n\n      indexPattern.fields = (0, _libInit_default_field_props2['default'])(indexPattern.fields.concat(indexPatternMetaFields));\n      indexPattern.fields = JSON.stringify(indexPattern.fields);\n      indexPattern.fieldFormatMap = JSON.stringify(indexPattern.fieldFormatMap);\n\n      var pipeline = (0, _libConvertersIngest_pipeline_api_kibana_to_es_converter2['default'])(requestDocument.pipeline);\n\n      // Set up call with request params\n      var patternCreateParams = {\n        index: kibanaIndex,\n        type: 'index-pattern',\n        id: indexPatternId,\n        body: indexPattern\n      };\n\n      var templateParams = {\n        order: 1,\n        create: true,\n        name: ingestConfigName,\n        body: {\n          template: indexPatternId,\n          mappings: {\n            _default_: {\n              properties: mappings\n            }\n          }\n        }\n      };\n\n      var pipelineParams = {\n        path: '/_ingest/pipeline/' + ingestConfigName,\n        method: 'PUT',\n        body: pipeline\n      };\n\n      return boundCallWithRequest('indices.exists', { index: indexPatternId }).then(function (matchingIndices) {\n        if (matchingIndices) {\n          throw _boom2['default'].conflict('Cannot create an index pattern via this API if existing indices already match the pattern');\n        }\n\n        return boundCallWithRequest('create', patternCreateParams).then(function () {\n          return boundCallWithRequest('indices.putTemplate', templateParams)['catch'](function (templateError) {\n            return patternRollback(templateError, indexPatternId, boundCallWithRequest);\n          });\n        }).then(function (templateResponse) {\n          if (!shouldCreatePipeline) {\n            return templateResponse;\n          }\n\n          return boundCallWithRequest('transport.request', pipelineParams)['catch'](function (pipelineError) {\n            return templateRollback(pipelineError, ingestConfigName, boundCallWithRequest);\n          })['catch'](function (templateRollbackError) {\n            return patternRollback(templateRollbackError, indexPatternId, boundCallWithRequest);\n          });\n        });\n      }).then(function () {\n        reply().code(204);\n      }, function (error) {\n        reply((0, _libHandle_es_error2['default'])(error));\n      });\n    })\n  });\n}\n\n;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9yb3V0ZXMvYXBpL2luZ2VzdC9yZWdpc3Rlcl9wb3N0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O29CQUFpQixNQUFNOzs7O3NCQUNULFFBQVE7Ozs7dURBQ1MscURBQXFEOzs7O2tDQUMxRCw4QkFBOEI7Ozs7c0RBQ1osa0RBQWtEOzs7OzJDQUM1RCx1Q0FBdUM7Ozs7d0RBQzFCLHdEQUF3RDs7d0NBQ2hFLHdDQUF3Qzs7dUVBQzlCLG9FQUFvRTs7OztBQUU5RyxTQUFTLFlBQVksQ0FBQyxNQUFNLEVBQUU7QUFDbkMsTUFBTSxXQUFXLEdBQUcsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUMsQ0FBQzs7QUFFeEQsV0FBUyxlQUFlLENBQUMsU0FBUyxFQUFFLGNBQWMsRUFBRSxvQkFBb0IsRUFBRTtBQUN4RSxRQUFNLFlBQVksR0FBRztBQUNuQixXQUFLLEVBQUUsV0FBVztBQUNsQixVQUFJLEVBQUUsZUFBZTtBQUNyQixRQUFFLEVBQUUsY0FBYztLQUNuQixDQUFDOztBQUVGLFdBQU8sb0JBQW9CLENBQUMsUUFBUSxFQUFFLFlBQVksQ0FBQyxDQUNoRCxJQUFJLENBQ0gsWUFBTTtBQUNKLFlBQU0sU0FBUyxDQUFDO0tBQ2pCLEVBQ0QsVUFBQyxvQkFBb0IsRUFBSztBQUN4QixZQUFNLElBQUksS0FBSyxvQkFDSSxjQUFjLGlMQUV6QixvQkFBb0IsQ0FBQyxRQUFRLEVBQUUsMEJBQy9CLFNBQVMsQ0FBQyxRQUFRLEVBQUUsQ0FDM0IsQ0FBQztLQUNILENBQ0YsQ0FBQztHQUNMOztBQUVELFdBQVMsZ0JBQWdCLENBQUMsU0FBUyxFQUFFLFlBQVksRUFBRSxvQkFBb0IsRUFBRTtBQUN2RSxRQUFNLFlBQVksR0FBRztBQUNuQixVQUFJLEVBQUUsWUFBWTtLQUNuQixDQUFDOztBQUVGLFdBQU8sb0JBQW9CLENBQUMsd0JBQXdCLEVBQUUsWUFBWSxDQUFDLENBQ2hFLElBQUksQ0FDSCxZQUFNO0FBQ0osWUFBTSxTQUFTLENBQUM7S0FDakIsRUFDRCxVQUFDLHFCQUFxQixFQUFLO0FBQ3pCLFlBQU0sSUFBSSxLQUFLLHFCQUNLLFlBQVksMEpBRXhCLHFCQUFxQixDQUFDLFFBQVEsRUFBRSwwQkFDaEMsU0FBUyxDQUFDLFFBQVEsRUFBRSxDQUMzQixDQUFDO0tBQ0gsQ0FDRixDQUFDO0dBQ0w7O0FBRUQsUUFBTSxDQUFDLEtBQUssQ0FBQztBQUNYLFFBQUksRUFBRSxvQkFBb0I7QUFDMUIsVUFBTSxFQUFFLE1BQU07QUFDZCxVQUFNLEVBQUU7QUFDTixjQUFRLEVBQUU7QUFDUixlQUFPLHNEQUFvQjtPQUM1QjtLQUNGO0FBQ0QsV0FBTyxvQkFBRSxXQUFnQixHQUFHLEVBQUUsS0FBSyxFQUFFO0FBQ25DLFVBQU0sTUFBTSxHQUFHLE1BQU0sTUFBTSxDQUFDLFVBQVUsRUFBRSxDQUFDLE1BQU0sRUFBRSxDQUFDO0FBQ2xELFVBQU0sb0JBQW9CLEdBQUcsb0JBQUUsT0FBTyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLGVBQWUsRUFBRSxHQUFHLENBQUMsQ0FBQztBQUMxRixVQUFNLGVBQWUsR0FBRyxvQkFBRSxTQUFTLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQ2pELFVBQU0sWUFBWSxHQUFHLHNEQUF1QixlQUFlLENBQUMsYUFBYSxDQUFDLENBQUM7QUFDM0UsVUFBTSxjQUFjLEdBQUcsWUFBWSxDQUFDLEVBQUUsQ0FBQztBQUN2QyxVQUFNLGdCQUFnQixHQUFHLCtEQUFnQixjQUFjLENBQUMsQ0FBQztBQUN6RCxVQUFNLG9CQUFvQixHQUFHLENBQUMsb0JBQUUsT0FBTyxDQUFDLGVBQWUsQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUNsRSxhQUFPLFlBQVksQ0FBQyxFQUFFLENBQUM7O0FBRXZCLFVBQU0sUUFBUSxHQUFHLHlEQUFnQyxZQUFZLENBQUMsTUFBTSxDQUFDLENBQUM7O0FBRXRFLFVBQU0sVUFBVSxHQUFHLG9CQUFFLEdBQUcsQ0FBQyxNQUFNLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUNsRixVQUFNLHNCQUFzQixHQUFHLG9CQUFFLEdBQUcsQ0FBQyxVQUFVLEVBQUUsVUFBQSxJQUFJO2VBQUssRUFBQyxJQUFJLEVBQUosSUFBSSxFQUFDO09BQUMsQ0FBQyxDQUFDOztBQUVuRSxrQkFBWSxDQUFDLE1BQU0sR0FBRyw4Q0FBc0IsWUFBWSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsc0JBQXNCLENBQUMsQ0FBQyxDQUFDO0FBQ2hHLGtCQUFZLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQzFELGtCQUFZLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsWUFBWSxDQUFDLGNBQWMsQ0FBQyxDQUFDOztBQUUxRSxVQUFNLFFBQVEsR0FBRywwRUFBcUMsZUFBZSxDQUFDLFFBQVEsQ0FBQyxDQUFDOzs7QUFHaEYsVUFBTSxtQkFBbUIsR0FBRztBQUMxQixhQUFLLEVBQUUsV0FBVztBQUNsQixZQUFJLEVBQUUsZUFBZTtBQUNyQixVQUFFLEVBQUUsY0FBYztBQUNsQixZQUFJLEVBQUUsWUFBWTtPQUNuQixDQUFDOztBQUVGLFVBQU0sY0FBYyxHQUFHO0FBQ3JCLGFBQUssRUFBRSxDQUFDO0FBQ1IsY0FBTSxFQUFFLElBQUk7QUFDWixZQUFJLEVBQUUsZ0JBQWdCO0FBQ3RCLFlBQUksRUFBRTtBQUNKLGtCQUFRLEVBQUUsY0FBYztBQUN4QixrQkFBUSxFQUFFO0FBQ1IscUJBQVMsRUFBRTtBQUNULHdCQUFVLEVBQUUsUUFBUTthQUNyQjtXQUNGO1NBQ0Y7T0FDRixDQUFDOztBQUVGLFVBQU0sY0FBYyxHQUFHO0FBQ3JCLFlBQUkseUJBQXVCLGdCQUFnQixBQUFFO0FBQzdDLGNBQU0sRUFBRSxLQUFLO0FBQ2IsWUFBSSxFQUFFLFFBQVE7T0FDZixDQUFDOztBQUdGLGFBQU8sb0JBQW9CLENBQUMsZ0JBQWdCLEVBQUUsRUFBQyxLQUFLLEVBQUUsY0FBYyxFQUFDLENBQUMsQ0FDckUsSUFBSSxDQUFDLFVBQUMsZUFBZSxFQUFLO0FBQ3pCLFlBQUksZUFBZSxFQUFFO0FBQ25CLGdCQUFNLGtCQUFLLFFBQVEsQ0FBQywyRkFBMkYsQ0FBQyxDQUFDO1NBQ2xIOztBQUVELGVBQU8sb0JBQW9CLENBQUMsUUFBUSxFQUFFLG1CQUFtQixDQUFDLENBQ3pELElBQUksQ0FBQyxZQUFNO0FBQ1YsaUJBQU8sb0JBQW9CLENBQUMscUJBQXFCLEVBQUUsY0FBYyxDQUFDLFNBQzVELENBQUMsVUFBQyxhQUFhLEVBQUs7QUFBQyxtQkFBTyxlQUFlLENBQUMsYUFBYSxFQUFFLGNBQWMsRUFBRSxvQkFBb0IsQ0FBQyxDQUFDO1dBQUMsQ0FBQyxDQUFDO1NBQzNHLENBQUMsQ0FDRCxJQUFJLENBQUMsVUFBQyxnQkFBZ0IsRUFBSztBQUMxQixjQUFJLENBQUMsb0JBQW9CLEVBQUU7QUFDekIsbUJBQU8sZ0JBQWdCLENBQUM7V0FDekI7O0FBRUQsaUJBQU8sb0JBQW9CLENBQUMsbUJBQW1CLEVBQUUsY0FBYyxDQUFDLFNBQzFELENBQUMsVUFBQyxhQUFhLEVBQUs7QUFBQyxtQkFBTyxnQkFBZ0IsQ0FBQyxhQUFhLEVBQUUsZ0JBQWdCLEVBQUUsb0JBQW9CLENBQUMsQ0FBQztXQUFDLENBQUMsU0FDdEcsQ0FBQyxVQUFDLHFCQUFxQixFQUFLO0FBQUMsbUJBQU8sZUFBZSxDQUFDLHFCQUFxQixFQUFFLGNBQWMsRUFBRSxvQkFBb0IsQ0FBQyxDQUFDO1dBQUMsQ0FBQyxDQUFDO1NBQzNILENBQUMsQ0FBQztPQUNKLENBQUMsQ0FDRCxJQUFJLENBQ0gsWUFBWTtBQUNWLGFBQUssRUFBRSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztPQUNuQixFQUNELFVBQVUsS0FBSyxFQUFFO0FBQ2YsYUFBSyxDQUFDLHFDQUFjLEtBQUssQ0FBQyxDQUFDLENBQUM7T0FDN0IsQ0FDRixDQUFDO0tBQ0gsQ0FBQTtHQUNGLENBQUMsQ0FBQztDQUNKOztBQUFBLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvcGx1Z2lucy9raWJhbmEvc2VydmVyL3JvdXRlcy9hcGkvaW5nZXN0L3JlZ2lzdGVyX3Bvc3QuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQm9vbSBmcm9tICdib29tJztcbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgaW5nZXN0Q29uZmlnU2NoZW1hIGZyb20gJy4uLy4uLy4uL2xpYi9zY2hlbWFzL3Jlc291cmNlcy9pbmdlc3RfY29uZmlnX3NjaGVtYSc7XG5pbXBvcnQgaGFuZGxlRVNFcnJvciBmcm9tICcuLi8uLi8uLi9saWIvaGFuZGxlX2VzX2Vycm9yJztcbmltcG9ydCBjcmVhdGVNYXBwaW5nc0Zyb21QYXR0ZXJuRmllbGRzIGZyb20gJy4uLy4uLy4uL2xpYi9jcmVhdGVfbWFwcGluZ3NfZnJvbV9wYXR0ZXJuX2ZpZWxkcyc7XG5pbXBvcnQgaW5pdERlZmF1bHRGaWVsZFByb3BzIGZyb20gJy4uLy4uLy4uL2xpYi9pbml0X2RlZmF1bHRfZmllbGRfcHJvcHMnO1xuaW1wb3J0IHtpbmdlc3RUb1BhdHRlcm4sIHBhdHRlcm5Ub0luZ2VzdH0gZnJvbSAnLi4vLi4vLi4vLi4vY29tbW9uL2xpYi9jb252ZXJ0X3BhdHRlcm5fYW5kX2luZ2VzdF9uYW1lJztcbmltcG9ydCB7IGtleXNUb0NhbWVsQ2FzZVNoYWxsb3cgfSBmcm9tICcuLi8uLi8uLi8uLi9jb21tb24vbGliL2Nhc2VfY29udmVyc2lvbic7XG5pbXBvcnQgaW5nZXN0UGlwZWxpbmVBcGlLaWJhbmFUb0VzQ29udmVydGVyIGZyb20gJy4uLy4uLy4uL2xpYi9jb252ZXJ0ZXJzL2luZ2VzdF9waXBlbGluZV9hcGlfa2liYW5hX3RvX2VzX2NvbnZlcnRlcic7XG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlclBvc3Qoc2VydmVyKSB7XG4gIGNvbnN0IGtpYmFuYUluZGV4ID0gc2VydmVyLmNvbmZpZygpLmdldCgna2liYW5hLmluZGV4Jyk7XG5cbiAgZnVuY3Rpb24gcGF0dGVyblJvbGxiYWNrKHJvb3RFcnJvciwgaW5kZXhQYXR0ZXJuSWQsIGJvdW5kQ2FsbFdpdGhSZXF1ZXN0KSB7XG4gICAgY29uc3QgZGVsZXRlUGFyYW1zID0ge1xuICAgICAgaW5kZXg6IGtpYmFuYUluZGV4LFxuICAgICAgdHlwZTogJ2luZGV4LXBhdHRlcm4nLFxuICAgICAgaWQ6IGluZGV4UGF0dGVybklkXG4gICAgfTtcblxuICAgIHJldHVybiBib3VuZENhbGxXaXRoUmVxdWVzdCgnZGVsZXRlJywgZGVsZXRlUGFyYW1zKVxuICAgICAgLnRoZW4oXG4gICAgICAgICgpID0+IHtcbiAgICAgICAgICB0aHJvdyByb290RXJyb3I7XG4gICAgICAgIH0sXG4gICAgICAgIChwYXR0ZXJuRGVsZXRpb25FcnJvcikgPT4ge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgIGBpbmRleC1wYXR0ZXJuICR7aW5kZXhQYXR0ZXJuSWR9IGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5IGJ1dCBpbmRleCB0ZW1wbGF0ZSBvciBwaXBlbGluZVxuICAgICAgICAgICAgICAgIGNyZWF0aW9uIGZhaWxlZC4gRmFpbGVkIHRvIHJvbGxiYWNrIGluZGV4LXBhdHRlcm4gY3JlYXRpb24sIG11c3QgZGVsZXRlIG1hbnVhbGx5LlxuICAgICAgICAgICAgICAgICR7cGF0dGVybkRlbGV0aW9uRXJyb3IudG9TdHJpbmcoKX1cbiAgICAgICAgICAgICAgICAke3Jvb3RFcnJvci50b1N0cmluZygpfWBcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICApO1xuICB9XG5cbiAgZnVuY3Rpb24gdGVtcGxhdGVSb2xsYmFjayhyb290RXJyb3IsIHRlbXBsYXRlTmFtZSwgYm91bmRDYWxsV2l0aFJlcXVlc3QpIHtcbiAgICBjb25zdCBkZWxldGVQYXJhbXMgPSB7XG4gICAgICBuYW1lOiB0ZW1wbGF0ZU5hbWVcbiAgICB9O1xuXG4gICAgcmV0dXJuIGJvdW5kQ2FsbFdpdGhSZXF1ZXN0KCdpbmRpY2VzLmRlbGV0ZVRlbXBsYXRlJywgZGVsZXRlUGFyYW1zKVxuICAgICAgLnRoZW4oXG4gICAgICAgICgpID0+IHtcbiAgICAgICAgICB0aHJvdyByb290RXJyb3I7XG4gICAgICAgIH0sXG4gICAgICAgICh0ZW1wbGF0ZURlbGV0aW9uRXJyb3IpID0+IHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICBgaW5kZXggdGVtcGxhdGUgJHt0ZW1wbGF0ZU5hbWV9IGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5IGJ1dCBwaXBlbGluZVxuICAgICAgICAgICAgICAgIGNyZWF0aW9uIGZhaWxlZC4gRmFpbGVkIHRvIHJvbGxiYWNrIHRlbXBsYXRlIGNyZWF0aW9uLCBtdXN0IGRlbGV0ZSBtYW51YWxseS5cbiAgICAgICAgICAgICAgICAke3RlbXBsYXRlRGVsZXRpb25FcnJvci50b1N0cmluZygpfVxuICAgICAgICAgICAgICAgICR7cm9vdEVycm9yLnRvU3RyaW5nKCl9YFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICk7XG4gIH1cblxuICBzZXJ2ZXIucm91dGUoe1xuICAgIHBhdGg6ICcvYXBpL2tpYmFuYS9pbmdlc3QnLFxuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIGNvbmZpZzoge1xuICAgICAgdmFsaWRhdGU6IHtcbiAgICAgICAgcGF5bG9hZDogaW5nZXN0Q29uZmlnU2NoZW1hXG4gICAgICB9XG4gICAgfSxcbiAgICBoYW5kbGVyOiBhc3luYyBmdW5jdGlvbiAocmVxLCByZXBseSkge1xuICAgICAgY29uc3QgY29uZmlnID0gYXdhaXQgc2VydmVyLnVpU2V0dGluZ3MoKS5nZXRBbGwoKTtcbiAgICAgIGNvbnN0IGJvdW5kQ2FsbFdpdGhSZXF1ZXN0ID0gXy5wYXJ0aWFsKHNlcnZlci5wbHVnaW5zLmVsYXN0aWNzZWFyY2guY2FsbFdpdGhSZXF1ZXN0LCByZXEpO1xuICAgICAgY29uc3QgcmVxdWVzdERvY3VtZW50ID0gXy5jbG9uZURlZXAocmVxLnBheWxvYWQpO1xuICAgICAgY29uc3QgaW5kZXhQYXR0ZXJuID0ga2V5c1RvQ2FtZWxDYXNlU2hhbGxvdyhyZXF1ZXN0RG9jdW1lbnQuaW5kZXhfcGF0dGVybik7XG4gICAgICBjb25zdCBpbmRleFBhdHRlcm5JZCA9IGluZGV4UGF0dGVybi5pZDtcbiAgICAgIGNvbnN0IGluZ2VzdENvbmZpZ05hbWUgPSBwYXR0ZXJuVG9Jbmdlc3QoaW5kZXhQYXR0ZXJuSWQpO1xuICAgICAgY29uc3Qgc2hvdWxkQ3JlYXRlUGlwZWxpbmUgPSAhXy5pc0VtcHR5KHJlcXVlc3REb2N1bWVudC5waXBlbGluZSk7XG4gICAgICBkZWxldGUgaW5kZXhQYXR0ZXJuLmlkO1xuXG4gICAgICBjb25zdCBtYXBwaW5ncyA9IGNyZWF0ZU1hcHBpbmdzRnJvbVBhdHRlcm5GaWVsZHMoaW5kZXhQYXR0ZXJuLmZpZWxkcyk7XG5cbiAgICAgIGNvbnN0IG1ldGFGaWVsZHMgPSBfLmdldChjb25maWcsICdtZXRhRmllbGRzLnVzZXJWYWx1ZScsIGNvbmZpZy5tZXRhRmllbGRzLnZhbHVlKTtcbiAgICAgIGNvbnN0IGluZGV4UGF0dGVybk1ldGFGaWVsZHMgPSBfLm1hcChtZXRhRmllbGRzLCBuYW1lID0+ICh7bmFtZX0pKTtcblxuICAgICAgaW5kZXhQYXR0ZXJuLmZpZWxkcyA9IGluaXREZWZhdWx0RmllbGRQcm9wcyhpbmRleFBhdHRlcm4uZmllbGRzLmNvbmNhdChpbmRleFBhdHRlcm5NZXRhRmllbGRzKSk7XG4gICAgICBpbmRleFBhdHRlcm4uZmllbGRzID0gSlNPTi5zdHJpbmdpZnkoaW5kZXhQYXR0ZXJuLmZpZWxkcyk7XG4gICAgICBpbmRleFBhdHRlcm4uZmllbGRGb3JtYXRNYXAgPSBKU09OLnN0cmluZ2lmeShpbmRleFBhdHRlcm4uZmllbGRGb3JtYXRNYXApO1xuXG4gICAgICBjb25zdCBwaXBlbGluZSA9IGluZ2VzdFBpcGVsaW5lQXBpS2liYW5hVG9Fc0NvbnZlcnRlcihyZXF1ZXN0RG9jdW1lbnQucGlwZWxpbmUpO1xuXG4gICAgICAvLyBTZXQgdXAgY2FsbCB3aXRoIHJlcXVlc3QgcGFyYW1zXG4gICAgICBjb25zdCBwYXR0ZXJuQ3JlYXRlUGFyYW1zID0ge1xuICAgICAgICBpbmRleDoga2liYW5hSW5kZXgsXG4gICAgICAgIHR5cGU6ICdpbmRleC1wYXR0ZXJuJyxcbiAgICAgICAgaWQ6IGluZGV4UGF0dGVybklkLFxuICAgICAgICBib2R5OiBpbmRleFBhdHRlcm5cbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHRlbXBsYXRlUGFyYW1zID0ge1xuICAgICAgICBvcmRlcjogMSxcbiAgICAgICAgY3JlYXRlOiB0cnVlLFxuICAgICAgICBuYW1lOiBpbmdlc3RDb25maWdOYW1lLFxuICAgICAgICBib2R5OiB7XG4gICAgICAgICAgdGVtcGxhdGU6IGluZGV4UGF0dGVybklkLFxuICAgICAgICAgIG1hcHBpbmdzOiB7XG4gICAgICAgICAgICBfZGVmYXVsdF86IHtcbiAgICAgICAgICAgICAgcHJvcGVydGllczogbWFwcGluZ3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHBpcGVsaW5lUGFyYW1zID0ge1xuICAgICAgICBwYXRoOiBgL19pbmdlc3QvcGlwZWxpbmUvJHtpbmdlc3RDb25maWdOYW1lfWAsXG4gICAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICAgIGJvZHk6IHBpcGVsaW5lXG4gICAgICB9O1xuXG5cbiAgICAgIHJldHVybiBib3VuZENhbGxXaXRoUmVxdWVzdCgnaW5kaWNlcy5leGlzdHMnLCB7aW5kZXg6IGluZGV4UGF0dGVybklkfSlcbiAgICAgIC50aGVuKChtYXRjaGluZ0luZGljZXMpID0+IHtcbiAgICAgICAgaWYgKG1hdGNoaW5nSW5kaWNlcykge1xuICAgICAgICAgIHRocm93IEJvb20uY29uZmxpY3QoJ0Nhbm5vdCBjcmVhdGUgYW4gaW5kZXggcGF0dGVybiB2aWEgdGhpcyBBUEkgaWYgZXhpc3RpbmcgaW5kaWNlcyBhbHJlYWR5IG1hdGNoIHRoZSBwYXR0ZXJuJyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYm91bmRDYWxsV2l0aFJlcXVlc3QoJ2NyZWF0ZScsIHBhdHRlcm5DcmVhdGVQYXJhbXMpXG4gICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICByZXR1cm4gYm91bmRDYWxsV2l0aFJlcXVlc3QoJ2luZGljZXMucHV0VGVtcGxhdGUnLCB0ZW1wbGF0ZVBhcmFtcylcbiAgICAgICAgICAuY2F0Y2goKHRlbXBsYXRlRXJyb3IpID0+IHtyZXR1cm4gcGF0dGVyblJvbGxiYWNrKHRlbXBsYXRlRXJyb3IsIGluZGV4UGF0dGVybklkLCBib3VuZENhbGxXaXRoUmVxdWVzdCk7fSk7XG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKCh0ZW1wbGF0ZVJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgaWYgKCFzaG91bGRDcmVhdGVQaXBlbGluZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRlbXBsYXRlUmVzcG9uc2U7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIGJvdW5kQ2FsbFdpdGhSZXF1ZXN0KCd0cmFuc3BvcnQucmVxdWVzdCcsIHBpcGVsaW5lUGFyYW1zKVxuICAgICAgICAgIC5jYXRjaCgocGlwZWxpbmVFcnJvcikgPT4ge3JldHVybiB0ZW1wbGF0ZVJvbGxiYWNrKHBpcGVsaW5lRXJyb3IsIGluZ2VzdENvbmZpZ05hbWUsIGJvdW5kQ2FsbFdpdGhSZXF1ZXN0KTt9KVxuICAgICAgICAgIC5jYXRjaCgodGVtcGxhdGVSb2xsYmFja0Vycm9yKSA9PiB7cmV0dXJuIHBhdHRlcm5Sb2xsYmFjayh0ZW1wbGF0ZVJvbGxiYWNrRXJyb3IsIGluZGV4UGF0dGVybklkLCBib3VuZENhbGxXaXRoUmVxdWVzdCk7fSk7XG4gICAgICAgIH0pO1xuICAgICAgfSlcbiAgICAgIC50aGVuKFxuICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmVwbHkoKS5jb2RlKDIwNCk7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgIHJlcGx5KGhhbmRsZUVTRXJyb3IoZXJyb3IpKTtcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICB9XG4gIH0pO1xufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/routes/api/ingest/register_post.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/routes/api/ingest/register_post.js",
      "sourcesContent": [
        "import Boom from 'boom';\nimport _ from 'lodash';\nimport ingestConfigSchema from '../../../lib/schemas/resources/ingest_config_schema';\nimport handleESError from '../../../lib/handle_es_error';\nimport createMappingsFromPatternFields from '../../../lib/create_mappings_from_pattern_fields';\nimport initDefaultFieldProps from '../../../lib/init_default_field_props';\nimport {ingestToPattern, patternToIngest} from '../../../../common/lib/convert_pattern_and_ingest_name';\nimport { keysToCamelCaseShallow } from '../../../../common/lib/case_conversion';\nimport ingestPipelineApiKibanaToEsConverter from '../../../lib/converters/ingest_pipeline_api_kibana_to_es_converter';\n\nexport function registerPost(server) {\n  const kibanaIndex = server.config().get('kibana.index');\n\n  function patternRollback(rootError, indexPatternId, boundCallWithRequest) {\n    const deleteParams = {\n      index: kibanaIndex,\n      type: 'index-pattern',\n      id: indexPatternId\n    };\n\n    return boundCallWithRequest('delete', deleteParams)\n      .then(\n        () => {\n          throw rootError;\n        },\n        (patternDeletionError) => {\n          throw new Error(\n            `index-pattern ${indexPatternId} created successfully but index template or pipeline\n                creation failed. Failed to rollback index-pattern creation, must delete manually.\n                ${patternDeletionError.toString()}\n                ${rootError.toString()}`\n          );\n        }\n      );\n  }\n\n  function templateRollback(rootError, templateName, boundCallWithRequest) {\n    const deleteParams = {\n      name: templateName\n    };\n\n    return boundCallWithRequest('indices.deleteTemplate', deleteParams)\n      .then(\n        () => {\n          throw rootError;\n        },\n        (templateDeletionError) => {\n          throw new Error(\n            `index template ${templateName} created successfully but pipeline\n                creation failed. Failed to rollback template creation, must delete manually.\n                ${templateDeletionError.toString()}\n                ${rootError.toString()}`\n          );\n        }\n      );\n  }\n\n  server.route({\n    path: '/api/kibana/ingest',\n    method: 'POST',\n    config: {\n      validate: {\n        payload: ingestConfigSchema\n      }\n    },\n    handler: async function (req, reply) {\n      const config = await server.uiSettings().getAll();\n      const boundCallWithRequest = _.partial(server.plugins.elasticsearch.callWithRequest, req);\n      const requestDocument = _.cloneDeep(req.payload);\n      const indexPattern = keysToCamelCaseShallow(requestDocument.index_pattern);\n      const indexPatternId = indexPattern.id;\n      const ingestConfigName = patternToIngest(indexPatternId);\n      const shouldCreatePipeline = !_.isEmpty(requestDocument.pipeline);\n      delete indexPattern.id;\n\n      const mappings = createMappingsFromPatternFields(indexPattern.fields);\n\n      const metaFields = _.get(config, 'metaFields.userValue', config.metaFields.value);\n      const indexPatternMetaFields = _.map(metaFields, name => ({name}));\n\n      indexPattern.fields = initDefaultFieldProps(indexPattern.fields.concat(indexPatternMetaFields));\n      indexPattern.fields = JSON.stringify(indexPattern.fields);\n      indexPattern.fieldFormatMap = JSON.stringify(indexPattern.fieldFormatMap);\n\n      const pipeline = ingestPipelineApiKibanaToEsConverter(requestDocument.pipeline);\n\n      // Set up call with request params\n      const patternCreateParams = {\n        index: kibanaIndex,\n        type: 'index-pattern',\n        id: indexPatternId,\n        body: indexPattern\n      };\n\n      const templateParams = {\n        order: 1,\n        create: true,\n        name: ingestConfigName,\n        body: {\n          template: indexPatternId,\n          mappings: {\n            _default_: {\n              properties: mappings\n            }\n          }\n        }\n      };\n\n      const pipelineParams = {\n        path: `/_ingest/pipeline/${ingestConfigName}`,\n        method: 'PUT',\n        body: pipeline\n      };\n\n\n      return boundCallWithRequest('indices.exists', {index: indexPatternId})\n      .then((matchingIndices) => {\n        if (matchingIndices) {\n          throw Boom.conflict('Cannot create an index pattern via this API if existing indices already match the pattern');\n        }\n\n        return boundCallWithRequest('create', patternCreateParams)\n        .then(() => {\n          return boundCallWithRequest('indices.putTemplate', templateParams)\n          .catch((templateError) => {return patternRollback(templateError, indexPatternId, boundCallWithRequest);});\n        })\n        .then((templateResponse) => {\n          if (!shouldCreatePipeline) {\n            return templateResponse;\n          }\n\n          return boundCallWithRequest('transport.request', pipelineParams)\n          .catch((pipelineError) => {return templateRollback(pipelineError, ingestConfigName, boundCallWithRequest);})\n          .catch((templateRollbackError) => {return patternRollback(templateRollbackError, indexPatternId, boundCallWithRequest);});\n        });\n      })\n      .then(\n        function () {\n          reply().code(204);\n        },\n        function (error) {\n          reply(handleESError(error));\n        }\n      );\n    }\n  });\n};\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/lib/schemas/resources/ingest_config_schema.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "joi",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Joi"
              }
            ]
          },
          {
            "source": "./index_pattern_schema",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "indexPatternSchema"
              }
            ]
          },
          {
            "source": "./pipeline_schema",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "pipelineSchema"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _joi = require('joi');\n\nvar _joi2 = _interopRequireDefault(_joi);\n\nvar _index_pattern_schema = require('./index_pattern_schema');\n\nvar _index_pattern_schema2 = _interopRequireDefault(_index_pattern_schema);\n\nvar _pipeline_schema = require('./pipeline_schema');\n\nvar _pipeline_schema2 = _interopRequireDefault(_pipeline_schema);\n\nmodule.exports = _joi2['default'].object({\n  index_pattern: _index_pattern_schema2['default'].required(),\n  pipeline: _pipeline_schema2['default']\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvc2NoZW1hcy9yZXNvdXJjZXMvaW5nZXN0X2NvbmZpZ19zY2hlbWEuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OzttQkFBZ0IsS0FBSzs7OztvQ0FDVSx3QkFBd0I7Ozs7K0JBQzVCLG1CQUFtQjs7OztBQUU5QyxNQUFNLENBQUMsT0FBTyxHQUFHLGlCQUFJLE1BQU0sQ0FBQztBQUMxQixlQUFhLEVBQUUsa0NBQW1CLFFBQVEsRUFBRTtBQUM1QyxVQUFRLDhCQUFnQjtDQUN6QixDQUFDLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvcGx1Z2lucy9raWJhbmEvc2VydmVyL2xpYi9zY2hlbWFzL3Jlc291cmNlcy9pbmdlc3RfY29uZmlnX3NjaGVtYS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBKb2kgZnJvbSAnam9pJztcbmltcG9ydCBpbmRleFBhdHRlcm5TY2hlbWEgZnJvbSAnLi9pbmRleF9wYXR0ZXJuX3NjaGVtYSc7XG5pbXBvcnQgcGlwZWxpbmVTY2hlbWEgZnJvbSAnLi9waXBlbGluZV9zY2hlbWEnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEpvaS5vYmplY3Qoe1xuICBpbmRleF9wYXR0ZXJuOiBpbmRleFBhdHRlcm5TY2hlbWEucmVxdWlyZWQoKSxcbiAgcGlwZWxpbmU6IHBpcGVsaW5lU2NoZW1hXG59KTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/lib/schemas/resources/ingest_config_schema.js"
      ],
      "names": [],
      "mappings": ";;;;mBAAgB,KAAK;;;;oCACU,wBAAwB;;;;+BAC5B,mBAAmB;;;;AAE9C,MAAM,CAAC,OAAO,GAAG,iBAAI,MAAM,CAAC;AAC1B,eAAa,EAAE,kCAAmB,QAAQ,EAAE;AAC5C,UAAQ,8BAAgB;CACzB,CAAC,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/lib/schemas/resources/ingest_config_schema.js",
      "sourcesContent": [
        "import Joi from 'joi';\nimport indexPatternSchema from './index_pattern_schema';\nimport pipelineSchema from './pipeline_schema';\n\nmodule.exports = Joi.object({\n  index_pattern: indexPatternSchema.required(),\n  pipeline: pipelineSchema\n});\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/lib/schemas/resources/index_pattern_schema.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "joi",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Joi"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _joi = require('joi');\n\nvar _joi2 = _interopRequireDefault(_joi);\n\nmodule.exports = _joi2['default'].object({\n  id: _joi2['default'].string().required(),\n  title: _joi2['default'].string().required(),\n  time_field_name: _joi2['default'].string(),\n  interval_name: _joi2['default'].string(),\n  not_expandable: _joi2['default'].boolean(),\n  fields: _joi2['default'].array().items(_joi2['default'].object({\n    name: _joi2['default'].string().required(),\n    type: _joi2['default'].string().required(),\n    count: _joi2['default'].number().integer(),\n    scripted: _joi2['default'].boolean(),\n    doc_values: _joi2['default'].boolean(),\n    analyzed: _joi2['default'].boolean(),\n    indexed: _joi2['default'].boolean(),\n    script: _joi2['default'].string(),\n    lang: _joi2['default'].string()\n  })).required().min(1),\n  field_format_map: _joi2['default'].object()\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvc2NoZW1hcy9yZXNvdXJjZXMvaW5kZXhfcGF0dGVybl9zY2hlbWEuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OzttQkFBZ0IsS0FBSzs7OztBQUVyQixNQUFNLENBQUMsT0FBTyxHQUFHLGlCQUFJLE1BQU0sQ0FBQztBQUMxQixJQUFFLEVBQUUsaUJBQUksTUFBTSxFQUFFLENBQUMsUUFBUSxFQUFFO0FBQzNCLE9BQUssRUFBRSxpQkFBSSxNQUFNLEVBQUUsQ0FBQyxRQUFRLEVBQUU7QUFDOUIsaUJBQWUsRUFBRSxpQkFBSSxNQUFNLEVBQUU7QUFDN0IsZUFBYSxFQUFFLGlCQUFJLE1BQU0sRUFBRTtBQUMzQixnQkFBYyxFQUFFLGlCQUFJLE9BQU8sRUFBRTtBQUM3QixRQUFNLEVBQUUsaUJBQUksS0FBSyxFQUFFLENBQUMsS0FBSyxDQUN2QixpQkFBSSxNQUFNLENBQUM7QUFDVCxRQUFJLEVBQUUsaUJBQUksTUFBTSxFQUFFLENBQUMsUUFBUSxFQUFFO0FBQzdCLFFBQUksRUFBRSxpQkFBSSxNQUFNLEVBQUUsQ0FBQyxRQUFRLEVBQUU7QUFDN0IsU0FBSyxFQUFFLGlCQUFJLE1BQU0sRUFBRSxDQUFDLE9BQU8sRUFBRTtBQUM3QixZQUFRLEVBQUUsaUJBQUksT0FBTyxFQUFFO0FBQ3ZCLGNBQVUsRUFBRSxpQkFBSSxPQUFPLEVBQUU7QUFDekIsWUFBUSxFQUFFLGlCQUFJLE9BQU8sRUFBRTtBQUN2QixXQUFPLEVBQUUsaUJBQUksT0FBTyxFQUFFO0FBQ3RCLFVBQU0sRUFBRSxpQkFBSSxNQUFNLEVBQUU7QUFDcEIsUUFBSSxFQUFFLGlCQUFJLE1BQU0sRUFBRTtHQUNuQixDQUFDLENBQ0gsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQ25CLGtCQUFnQixFQUFFLGlCQUFJLE1BQU0sRUFBRTtDQUMvQixDQUFDLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvcGx1Z2lucy9raWJhbmEvc2VydmVyL2xpYi9zY2hlbWFzL3Jlc291cmNlcy9pbmRleF9wYXR0ZXJuX3NjaGVtYS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBKb2kgZnJvbSAnam9pJztcblxubW9kdWxlLmV4cG9ydHMgPSBKb2kub2JqZWN0KHtcbiAgaWQ6IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpLFxuICB0aXRsZTogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gIHRpbWVfZmllbGRfbmFtZTogSm9pLnN0cmluZygpLFxuICBpbnRlcnZhbF9uYW1lOiBKb2kuc3RyaW5nKCksXG4gIG5vdF9leHBhbmRhYmxlOiBKb2kuYm9vbGVhbigpLFxuICBmaWVsZHM6IEpvaS5hcnJheSgpLml0ZW1zKFxuICAgIEpvaS5vYmplY3Qoe1xuICAgICAgbmFtZTogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gICAgICB0eXBlOiBKb2kuc3RyaW5nKCkucmVxdWlyZWQoKSxcbiAgICAgIGNvdW50OiBKb2kubnVtYmVyKCkuaW50ZWdlcigpLFxuICAgICAgc2NyaXB0ZWQ6IEpvaS5ib29sZWFuKCksXG4gICAgICBkb2NfdmFsdWVzOiBKb2kuYm9vbGVhbigpLFxuICAgICAgYW5hbHl6ZWQ6IEpvaS5ib29sZWFuKCksXG4gICAgICBpbmRleGVkOiBKb2kuYm9vbGVhbigpLFxuICAgICAgc2NyaXB0OiBKb2kuc3RyaW5nKCksXG4gICAgICBsYW5nOiBKb2kuc3RyaW5nKClcbiAgICB9KVxuICApLnJlcXVpcmVkKCkubWluKDEpLFxuICBmaWVsZF9mb3JtYXRfbWFwOiBKb2kub2JqZWN0KClcbn0pO1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/lib/schemas/resources/index_pattern_schema.js"
      ],
      "names": [],
      "mappings": ";;;;mBAAgB,KAAK;;;;AAErB,MAAM,CAAC,OAAO,GAAG,iBAAI,MAAM,CAAC;AAC1B,IAAE,EAAE,iBAAI,MAAM,EAAE,CAAC,QAAQ,EAAE;AAC3B,OAAK,EAAE,iBAAI,MAAM,EAAE,CAAC,QAAQ,EAAE;AAC9B,iBAAe,EAAE,iBAAI,MAAM,EAAE;AAC7B,eAAa,EAAE,iBAAI,MAAM,EAAE;AAC3B,gBAAc,EAAE,iBAAI,OAAO,EAAE;AAC7B,QAAM,EAAE,iBAAI,KAAK,EAAE,CAAC,KAAK,CACvB,iBAAI,MAAM,CAAC;AACT,QAAI,EAAE,iBAAI,MAAM,EAAE,CAAC,QAAQ,EAAE;AAC7B,QAAI,EAAE,iBAAI,MAAM,EAAE,CAAC,QAAQ,EAAE;AAC7B,SAAK,EAAE,iBAAI,MAAM,EAAE,CAAC,OAAO,EAAE;AAC7B,YAAQ,EAAE,iBAAI,OAAO,EAAE;AACvB,cAAU,EAAE,iBAAI,OAAO,EAAE;AACzB,YAAQ,EAAE,iBAAI,OAAO,EAAE;AACvB,WAAO,EAAE,iBAAI,OAAO,EAAE;AACtB,UAAM,EAAE,iBAAI,MAAM,EAAE;AACpB,QAAI,EAAE,iBAAI,MAAM,EAAE;GACnB,CAAC,CACH,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;AACnB,kBAAgB,EAAE,iBAAI,MAAM,EAAE;CAC/B,CAAC,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/lib/schemas/resources/index_pattern_schema.js",
      "sourcesContent": [
        "import Joi from 'joi';\n\nmodule.exports = Joi.object({\n  id: Joi.string().required(),\n  title: Joi.string().required(),\n  time_field_name: Joi.string(),\n  interval_name: Joi.string(),\n  not_expandable: Joi.boolean(),\n  fields: Joi.array().items(\n    Joi.object({\n      name: Joi.string().required(),\n      type: Joi.string().required(),\n      count: Joi.number().integer(),\n      scripted: Joi.boolean(),\n      doc_values: Joi.boolean(),\n      analyzed: Joi.boolean(),\n      indexed: Joi.boolean(),\n      script: Joi.string(),\n      lang: Joi.string()\n    })\n  ).required().min(1),\n  field_format_map: Joi.object()\n});\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/lib/schemas/resources/pipeline_schema.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "joi",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Joi"
              }
            ]
          },
          {
            "source": "../../processors/schemas",
            "imported": [
              "*"
            ],
            "specifiers": [
              {
                "kind": "namespace",
                "local": "ingestProcessorSchemas"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default",
        "interop-require-wildcard"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _joi = require('joi');\n\nvar _joi2 = _interopRequireDefault(_joi);\n\nvar _processorsSchemas = require('../../processors/schemas');\n\nvar ingestProcessorSchemas = _interopRequireWildcard(_processorsSchemas);\n\nmodule.exports = _joi2['default'].array().items(_lodash2['default'].values(ingestProcessorSchemas));\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvc2NoZW1hcy9yZXNvdXJjZXMvcGlwZWxpbmVfc2NoZW1hLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztzQkFBYyxRQUFROzs7O21CQUNOLEtBQUs7Ozs7aUNBQ21CLDBCQUEwQjs7SUFBdEQsc0JBQXNCOztBQUVsQyxNQUFNLENBQUMsT0FBTyxHQUFHLGlCQUFJLEtBQUssRUFBRSxDQUFDLEtBQUssQ0FBQyxvQkFBRSxNQUFNLENBQUMsc0JBQXNCLENBQUMsQ0FBQyxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvc2NoZW1hcy9yZXNvdXJjZXMvcGlwZWxpbmVfc2NoZW1hLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBKb2kgZnJvbSAnam9pJztcbmltcG9ydCAqIGFzIGluZ2VzdFByb2Nlc3NvclNjaGVtYXMgZnJvbSAnLi4vLi4vcHJvY2Vzc29ycy9zY2hlbWFzJztcblxubW9kdWxlLmV4cG9ydHMgPSBKb2kuYXJyYXkoKS5pdGVtcyhfLnZhbHVlcyhpbmdlc3RQcm9jZXNzb3JTY2hlbWFzKSk7XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/lib/schemas/resources/pipeline_schema.js"
      ],
      "names": [],
      "mappings": ";;;;;;sBAAc,QAAQ;;;;mBACN,KAAK;;;;iCACmB,0BAA0B;;IAAtD,sBAAsB;;AAElC,MAAM,CAAC,OAAO,GAAG,iBAAI,KAAK,EAAE,CAAC,KAAK,CAAC,oBAAE,MAAM,CAAC,sBAAsB,CAAC,CAAC,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/lib/schemas/resources/pipeline_schema.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport Joi from 'joi';\nimport * as ingestProcessorSchemas from '../../processors/schemas';\n\nmodule.exports = Joi.array().items(_.values(ingestProcessorSchemas));\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/schemas.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "append",
            "convert",
            "date",
            "geoip",
            "grok",
            "gsub",
            "join",
            "lowercase",
            "remove",
            "rename",
            "set",
            "split",
            "trim",
            "uppercase"
          ],
          "specifiers": [
            {
              "kind": "external",
              "local": "append",
              "exported": "append",
              "source": "./append/schema"
            },
            {
              "kind": "external",
              "local": "convert",
              "exported": "convert",
              "source": "./convert/schema"
            },
            {
              "kind": "external",
              "local": "date",
              "exported": "date",
              "source": "./date/schema"
            },
            {
              "kind": "external",
              "local": "geoip",
              "exported": "geoip",
              "source": "./geoip/schema"
            },
            {
              "kind": "external",
              "local": "grok",
              "exported": "grok",
              "source": "./grok/schema"
            },
            {
              "kind": "external",
              "local": "gsub",
              "exported": "gsub",
              "source": "./gsub/schema"
            },
            {
              "kind": "external",
              "local": "join",
              "exported": "join",
              "source": "./join/schema"
            },
            {
              "kind": "external",
              "local": "lowercase",
              "exported": "lowercase",
              "source": "./lowercase/schema"
            },
            {
              "kind": "external",
              "local": "remove",
              "exported": "remove",
              "source": "./remove/schema"
            },
            {
              "kind": "external",
              "local": "rename",
              "exported": "rename",
              "source": "./rename/schema"
            },
            {
              "kind": "external",
              "local": "set",
              "exported": "set",
              "source": "./set/schema"
            },
            {
              "kind": "external",
              "local": "split",
              "exported": "split",
              "source": "./split/schema"
            },
            {
              "kind": "external",
              "local": "trim",
              "exported": "trim",
              "source": "./trim/schema"
            },
            {
              "kind": "external",
              "local": "uppercase",
              "exported": "uppercase",
              "source": "./uppercase/schema"
            }
          ]
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _appendSchema = require('./append/schema');\n\nObject.defineProperty(exports, 'append', {\n  enumerable: true,\n  get: function get() {\n    return _appendSchema.append;\n  }\n});\n\nvar _convertSchema = require('./convert/schema');\n\nObject.defineProperty(exports, 'convert', {\n  enumerable: true,\n  get: function get() {\n    return _convertSchema.convert;\n  }\n});\n\nvar _dateSchema = require('./date/schema');\n\nObject.defineProperty(exports, 'date', {\n  enumerable: true,\n  get: function get() {\n    return _dateSchema.date;\n  }\n});\n\nvar _geoipSchema = require('./geoip/schema');\n\nObject.defineProperty(exports, 'geoip', {\n  enumerable: true,\n  get: function get() {\n    return _geoipSchema.geoip;\n  }\n});\n\nvar _grokSchema = require('./grok/schema');\n\nObject.defineProperty(exports, 'grok', {\n  enumerable: true,\n  get: function get() {\n    return _grokSchema.grok;\n  }\n});\n\nvar _gsubSchema = require('./gsub/schema');\n\nObject.defineProperty(exports, 'gsub', {\n  enumerable: true,\n  get: function get() {\n    return _gsubSchema.gsub;\n  }\n});\n\nvar _joinSchema = require('./join/schema');\n\nObject.defineProperty(exports, 'join', {\n  enumerable: true,\n  get: function get() {\n    return _joinSchema.join;\n  }\n});\n\nvar _lowercaseSchema = require('./lowercase/schema');\n\nObject.defineProperty(exports, 'lowercase', {\n  enumerable: true,\n  get: function get() {\n    return _lowercaseSchema.lowercase;\n  }\n});\n\nvar _removeSchema = require('./remove/schema');\n\nObject.defineProperty(exports, 'remove', {\n  enumerable: true,\n  get: function get() {\n    return _removeSchema.remove;\n  }\n});\n\nvar _renameSchema = require('./rename/schema');\n\nObject.defineProperty(exports, 'rename', {\n  enumerable: true,\n  get: function get() {\n    return _renameSchema.rename;\n  }\n});\n\nvar _setSchema = require('./set/schema');\n\nObject.defineProperty(exports, 'set', {\n  enumerable: true,\n  get: function get() {\n    return _setSchema.set;\n  }\n});\n\nvar _splitSchema = require('./split/schema');\n\nObject.defineProperty(exports, 'split', {\n  enumerable: true,\n  get: function get() {\n    return _splitSchema.split;\n  }\n});\n\nvar _trimSchema = require('./trim/schema');\n\nObject.defineProperty(exports, 'trim', {\n  enumerable: true,\n  get: function get() {\n    return _trimSchema.trim;\n  }\n});\n\nvar _uppercaseSchema = require('./uppercase/schema');\n\nObject.defineProperty(exports, 'uppercase', {\n  enumerable: true,\n  get: function get() {\n    return _uppercaseSchema.uppercase;\n  }\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvcHJvY2Vzc29ycy9zY2hlbWFzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs0QkFBdUIsaUJBQWlCOzs7Ozt5QkFBL0IsTUFBTTs7Ozs2QkFDUyxrQkFBa0I7Ozs7OzBCQUFqQyxPQUFPOzs7OzBCQUNLLGVBQWU7Ozs7O3VCQUEzQixJQUFJOzs7OzJCQUNTLGdCQUFnQjs7Ozs7d0JBQTdCLEtBQUs7Ozs7MEJBQ08sZUFBZTs7Ozs7dUJBQTNCLElBQUk7Ozs7MEJBQ1EsZUFBZTs7Ozs7dUJBQTNCLElBQUk7Ozs7MEJBQ1EsZUFBZTs7Ozs7dUJBQTNCLElBQUk7Ozs7K0JBQ2Esb0JBQW9COzs7Ozs0QkFBckMsU0FBUzs7Ozs0QkFDSyxpQkFBaUI7Ozs7O3lCQUEvQixNQUFNOzs7OzRCQUNRLGlCQUFpQjs7Ozs7eUJBQS9CLE1BQU07Ozs7eUJBQ0ssY0FBYzs7Ozs7c0JBQXpCLEdBQUc7Ozs7MkJBQ1UsZ0JBQWdCOzs7Ozt3QkFBN0IsS0FBSzs7OzswQkFDTyxlQUFlOzs7Ozt1QkFBM0IsSUFBSTs7OzsrQkFDYSxvQkFBb0I7Ozs7OzRCQUFyQyxTQUFTIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvcHJvY2Vzc29ycy9zY2hlbWFzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHsgYXBwZW5kIH0gZnJvbSAnLi9hcHBlbmQvc2NoZW1hJztcbmV4cG9ydCB7IGNvbnZlcnQgfSBmcm9tICcuL2NvbnZlcnQvc2NoZW1hJztcbmV4cG9ydCB7IGRhdGUgfSBmcm9tICcuL2RhdGUvc2NoZW1hJztcbmV4cG9ydCB7IGdlb2lwIH0gZnJvbSAnLi9nZW9pcC9zY2hlbWEnO1xuZXhwb3J0IHsgZ3JvayB9IGZyb20gJy4vZ3Jvay9zY2hlbWEnO1xuZXhwb3J0IHsgZ3N1YiB9IGZyb20gJy4vZ3N1Yi9zY2hlbWEnO1xuZXhwb3J0IHsgam9pbiB9IGZyb20gJy4vam9pbi9zY2hlbWEnO1xuZXhwb3J0IHsgbG93ZXJjYXNlIH0gZnJvbSAnLi9sb3dlcmNhc2Uvc2NoZW1hJztcbmV4cG9ydCB7IHJlbW92ZSB9IGZyb20gJy4vcmVtb3ZlL3NjaGVtYSc7XG5leHBvcnQgeyByZW5hbWUgfSBmcm9tICcuL3JlbmFtZS9zY2hlbWEnO1xuZXhwb3J0IHsgc2V0IH0gZnJvbSAnLi9zZXQvc2NoZW1hJztcbmV4cG9ydCB7IHNwbGl0IH0gZnJvbSAnLi9zcGxpdC9zY2hlbWEnO1xuZXhwb3J0IHsgdHJpbSB9IGZyb20gJy4vdHJpbS9zY2hlbWEnO1xuZXhwb3J0IHsgdXBwZXJjYXNlIH0gZnJvbSAnLi91cHBlcmNhc2Uvc2NoZW1hJztcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/schemas.js"
      ],
      "names": [],
      "mappings": ";;;;;;4BAAuB,iBAAiB;;;;;yBAA/B,MAAM;;;;6BACS,kBAAkB;;;;;0BAAjC,OAAO;;;;0BACK,eAAe;;;;;uBAA3B,IAAI;;;;2BACS,gBAAgB;;;;;wBAA7B,KAAK;;;;0BACO,eAAe;;;;;uBAA3B,IAAI;;;;0BACQ,eAAe;;;;;uBAA3B,IAAI;;;;0BACQ,eAAe;;;;;uBAA3B,IAAI;;;;+BACa,oBAAoB;;;;;4BAArC,SAAS;;;;4BACK,iBAAiB;;;;;yBAA/B,MAAM;;;;4BACQ,iBAAiB;;;;;yBAA/B,MAAM;;;;yBACK,cAAc;;;;;sBAAzB,GAAG;;;;2BACU,gBAAgB;;;;;wBAA7B,KAAK;;;;0BACO,eAAe;;;;;uBAA3B,IAAI;;;;+BACa,oBAAoB;;;;;4BAArC,SAAS",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/schemas.js",
      "sourcesContent": [
        "export { append } from './append/schema';\nexport { convert } from './convert/schema';\nexport { date } from './date/schema';\nexport { geoip } from './geoip/schema';\nexport { grok } from './grok/schema';\nexport { gsub } from './gsub/schema';\nexport { join } from './join/schema';\nexport { lowercase } from './lowercase/schema';\nexport { remove } from './remove/schema';\nexport { rename } from './rename/schema';\nexport { set } from './set/schema';\nexport { split } from './split/schema';\nexport { trim } from './trim/schema';\nexport { uppercase } from './uppercase/schema';\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/append/schema.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "joi",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Joi"
              }
            ]
          },
          {
            "source": "../base/schema",
            "imported": [
              "base"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "base",
                "local": "base"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "append"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "append",
              "exported": "append"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _joi = require('joi');\n\nvar _joi2 = _interopRequireDefault(_joi);\n\nvar _baseSchema = require('../base/schema');\n\nvar append = _baseSchema.base.keys({\n  type_id: _joi2['default'].string().only('append').required(),\n  target_field: _joi2['default'].string().allow(''),\n  values: _joi2['default'].array().items(_joi2['default'].string().allow(''))\n});\nexports.append = append;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvcHJvY2Vzc29ycy9hcHBlbmQvc2NoZW1hLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O21CQUFnQixLQUFLOzs7OzBCQUNBLGdCQUFnQjs7QUFFOUIsSUFBTSxNQUFNLEdBQUcsaUJBQUssSUFBSSxDQUFDO0FBQzlCLFNBQU8sRUFBRSxpQkFBSSxNQUFNLEVBQUUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsUUFBUSxFQUFFO0FBQy9DLGNBQVksRUFBRSxpQkFBSSxNQUFNLEVBQUUsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDO0FBQ3BDLFFBQU0sRUFBRSxpQkFBSSxLQUFLLEVBQUUsQ0FBQyxLQUFLLENBQUMsaUJBQUksTUFBTSxFQUFFLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0NBQ2xELENBQUMsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9wbHVnaW5zL2tpYmFuYS9zZXJ2ZXIvbGliL3Byb2Nlc3NvcnMvYXBwZW5kL3NjaGVtYS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBKb2kgZnJvbSAnam9pJztcbmltcG9ydCB7IGJhc2UgfSBmcm9tICcuLi9iYXNlL3NjaGVtYSc7XG5cbmV4cG9ydCBjb25zdCBhcHBlbmQgPSBiYXNlLmtleXMoe1xuICB0eXBlX2lkOiBKb2kuc3RyaW5nKCkub25seSgnYXBwZW5kJykucmVxdWlyZWQoKSxcbiAgdGFyZ2V0X2ZpZWxkOiBKb2kuc3RyaW5nKCkuYWxsb3coJycpLFxuICB2YWx1ZXM6IEpvaS5hcnJheSgpLml0ZW1zKEpvaS5zdHJpbmcoKS5hbGxvdygnJykpXG59KTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/append/schema.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;mBAAgB,KAAK;;;;0BACA,gBAAgB;;AAE9B,IAAM,MAAM,GAAG,iBAAK,IAAI,CAAC;AAC9B,SAAO,EAAE,iBAAI,MAAM,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,QAAQ,EAAE;AAC/C,cAAY,EAAE,iBAAI,MAAM,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC;AACpC,QAAM,EAAE,iBAAI,KAAK,EAAE,CAAC,KAAK,CAAC,iBAAI,MAAM,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;CAClD,CAAC,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/append/schema.js",
      "sourcesContent": [
        "import Joi from 'joi';\nimport { base } from '../base/schema';\n\nexport const append = base.keys({\n  type_id: Joi.string().only('append').required(),\n  target_field: Joi.string().allow(''),\n  values: Joi.array().items(Joi.string().allow(''))\n});\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/base/schema.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "joi",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Joi"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "base"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "base",
              "exported": "base"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _joi = require('joi');\n\nvar _joi2 = _interopRequireDefault(_joi);\n\nvar base = _joi2['default'].object({\n  processor_id: _joi2['default'].string().required()\n});\nexports.base = base;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvcHJvY2Vzc29ycy9iYXNlL3NjaGVtYS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7OzttQkFBZ0IsS0FBSzs7OztBQUVkLElBQU0sSUFBSSxHQUFHLGlCQUFJLE1BQU0sQ0FBQztBQUM3QixjQUFZLEVBQUUsaUJBQUksTUFBTSxFQUFFLENBQUMsUUFBUSxFQUFFO0NBQ3RDLENBQUMsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9wbHVnaW5zL2tpYmFuYS9zZXJ2ZXIvbGliL3Byb2Nlc3NvcnMvYmFzZS9zY2hlbWEuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgSm9pIGZyb20gJ2pvaSc7XG5cbmV4cG9ydCBjb25zdCBiYXNlID0gSm9pLm9iamVjdCh7XG4gIHByb2Nlc3Nvcl9pZDogSm9pLnN0cmluZygpLnJlcXVpcmVkKClcbn0pO1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/base/schema.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;mBAAgB,KAAK;;;;AAEd,IAAM,IAAI,GAAG,iBAAI,MAAM,CAAC;AAC7B,cAAY,EAAE,iBAAI,MAAM,EAAE,CAAC,QAAQ,EAAE;CACtC,CAAC,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/base/schema.js",
      "sourcesContent": [
        "import Joi from 'joi';\n\nexport const base = Joi.object({\n  processor_id: Joi.string().required()\n});\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/convert/schema.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "joi",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Joi"
              }
            ]
          },
          {
            "source": "../base/schema",
            "imported": [
              "base"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "base",
                "local": "base"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "convert"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "convert",
              "exported": "convert"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _joi = require('joi');\n\nvar _joi2 = _interopRequireDefault(_joi);\n\nvar _baseSchema = require('../base/schema');\n\nvar convert = _baseSchema.base.keys({\n  type_id: _joi2['default'].string().only('convert').required(),\n  source_field: _joi2['default'].string().allow(''),\n  target_field: _joi2['default'].string().allow(''),\n  type: _joi2['default'].string()\n});\nexports.convert = convert;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvcHJvY2Vzc29ycy9jb252ZXJ0L3NjaGVtYS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7OzttQkFBZ0IsS0FBSzs7OzswQkFDQSxnQkFBZ0I7O0FBRTlCLElBQU0sT0FBTyxHQUFHLGlCQUFLLElBQUksQ0FBQztBQUMvQixTQUFPLEVBQUUsaUJBQUksTUFBTSxFQUFFLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLFFBQVEsRUFBRTtBQUNoRCxjQUFZLEVBQUUsaUJBQUksTUFBTSxFQUFFLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztBQUNwQyxjQUFZLEVBQUUsaUJBQUksTUFBTSxFQUFFLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztBQUNwQyxNQUFJLEVBQUUsaUJBQUksTUFBTSxFQUFFO0NBQ25CLENBQUMsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9wbHVnaW5zL2tpYmFuYS9zZXJ2ZXIvbGliL3Byb2Nlc3NvcnMvY29udmVydC9zY2hlbWEuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgSm9pIGZyb20gJ2pvaSc7XG5pbXBvcnQgeyBiYXNlIH0gZnJvbSAnLi4vYmFzZS9zY2hlbWEnO1xuXG5leHBvcnQgY29uc3QgY29udmVydCA9IGJhc2Uua2V5cyh7XG4gIHR5cGVfaWQ6IEpvaS5zdHJpbmcoKS5vbmx5KCdjb252ZXJ0JykucmVxdWlyZWQoKSxcbiAgc291cmNlX2ZpZWxkOiBKb2kuc3RyaW5nKCkuYWxsb3coJycpLFxuICB0YXJnZXRfZmllbGQ6IEpvaS5zdHJpbmcoKS5hbGxvdygnJyksXG4gIHR5cGU6IEpvaS5zdHJpbmcoKVxufSk7XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/convert/schema.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;mBAAgB,KAAK;;;;0BACA,gBAAgB;;AAE9B,IAAM,OAAO,GAAG,iBAAK,IAAI,CAAC;AAC/B,SAAO,EAAE,iBAAI,MAAM,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,QAAQ,EAAE;AAChD,cAAY,EAAE,iBAAI,MAAM,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC;AACpC,cAAY,EAAE,iBAAI,MAAM,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC;AACpC,MAAI,EAAE,iBAAI,MAAM,EAAE;CACnB,CAAC,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/convert/schema.js",
      "sourcesContent": [
        "import Joi from 'joi';\nimport { base } from '../base/schema';\n\nexport const convert = base.keys({\n  type_id: Joi.string().only('convert').required(),\n  source_field: Joi.string().allow(''),\n  target_field: Joi.string().allow(''),\n  type: Joi.string()\n});\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/date/schema.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "joi",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Joi"
              }
            ]
          },
          {
            "source": "../base/schema",
            "imported": [
              "base"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "base",
                "local": "base"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "date"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "date",
              "exported": "date"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _joi = require('joi');\n\nvar _joi2 = _interopRequireDefault(_joi);\n\nvar _baseSchema = require('../base/schema');\n\nvar date = _baseSchema.base.keys({\n  type_id: _joi2['default'].string().only('date').required(),\n  source_field: _joi2['default'].string().allow(''),\n  target_field: _joi2['default'].string().allow(''),\n  formats: _joi2['default'].array().items(_joi2['default'].string().allow('')),\n  timezone: _joi2['default'].string().allow(''),\n  locale: _joi2['default'].string().allow(''),\n  custom_format: _joi2['default'].string().allow('')\n});\nexports.date = date;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvcHJvY2Vzc29ycy9kYXRlL3NjaGVtYS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7OzttQkFBZ0IsS0FBSzs7OzswQkFDQSxnQkFBZ0I7O0FBRTlCLElBQU0sSUFBSSxHQUFHLGlCQUFLLElBQUksQ0FBQztBQUM1QixTQUFPLEVBQUUsaUJBQUksTUFBTSxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLFFBQVEsRUFBRTtBQUM3QyxjQUFZLEVBQUUsaUJBQUksTUFBTSxFQUFFLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztBQUNwQyxjQUFZLEVBQUUsaUJBQUksTUFBTSxFQUFFLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztBQUNwQyxTQUFPLEVBQUUsaUJBQUksS0FBSyxFQUFFLENBQUMsS0FBSyxDQUFDLGlCQUFJLE1BQU0sRUFBRSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUNsRCxVQUFRLEVBQUUsaUJBQUksTUFBTSxFQUFFLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztBQUNoQyxRQUFNLEVBQUUsaUJBQUksTUFBTSxFQUFFLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztBQUM5QixlQUFhLEVBQUUsaUJBQUksTUFBTSxFQUFFLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztDQUN0QyxDQUFDLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvcGx1Z2lucy9raWJhbmEvc2VydmVyL2xpYi9wcm9jZXNzb3JzL2RhdGUvc2NoZW1hLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEpvaSBmcm9tICdqb2knO1xuaW1wb3J0IHsgYmFzZSB9IGZyb20gJy4uL2Jhc2Uvc2NoZW1hJztcblxuZXhwb3J0IGNvbnN0IGRhdGUgPSBiYXNlLmtleXMoe1xuICB0eXBlX2lkOiBKb2kuc3RyaW5nKCkub25seSgnZGF0ZScpLnJlcXVpcmVkKCksXG4gIHNvdXJjZV9maWVsZDogSm9pLnN0cmluZygpLmFsbG93KCcnKSxcbiAgdGFyZ2V0X2ZpZWxkOiBKb2kuc3RyaW5nKCkuYWxsb3coJycpLFxuICBmb3JtYXRzOiBKb2kuYXJyYXkoKS5pdGVtcyhKb2kuc3RyaW5nKCkuYWxsb3coJycpKSxcbiAgdGltZXpvbmU6IEpvaS5zdHJpbmcoKS5hbGxvdygnJyksXG4gIGxvY2FsZTogSm9pLnN0cmluZygpLmFsbG93KCcnKSxcbiAgY3VzdG9tX2Zvcm1hdDogSm9pLnN0cmluZygpLmFsbG93KCcnKVxufSk7XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/date/schema.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;mBAAgB,KAAK;;;;0BACA,gBAAgB;;AAE9B,IAAM,IAAI,GAAG,iBAAK,IAAI,CAAC;AAC5B,SAAO,EAAE,iBAAI,MAAM,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,QAAQ,EAAE;AAC7C,cAAY,EAAE,iBAAI,MAAM,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC;AACpC,cAAY,EAAE,iBAAI,MAAM,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC;AACpC,SAAO,EAAE,iBAAI,KAAK,EAAE,CAAC,KAAK,CAAC,iBAAI,MAAM,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;AAClD,UAAQ,EAAE,iBAAI,MAAM,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC;AAChC,QAAM,EAAE,iBAAI,MAAM,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC;AAC9B,eAAa,EAAE,iBAAI,MAAM,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC;CACtC,CAAC,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/date/schema.js",
      "sourcesContent": [
        "import Joi from 'joi';\nimport { base } from '../base/schema';\n\nexport const date = base.keys({\n  type_id: Joi.string().only('date').required(),\n  source_field: Joi.string().allow(''),\n  target_field: Joi.string().allow(''),\n  formats: Joi.array().items(Joi.string().allow('')),\n  timezone: Joi.string().allow(''),\n  locale: Joi.string().allow(''),\n  custom_format: Joi.string().allow('')\n});\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/geoip/schema.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "joi",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Joi"
              }
            ]
          },
          {
            "source": "../base/schema",
            "imported": [
              "base"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "base",
                "local": "base"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "geoip"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "geoip",
              "exported": "geoip"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _joi = require('joi');\n\nvar _joi2 = _interopRequireDefault(_joi);\n\nvar _baseSchema = require('../base/schema');\n\nvar geoip = _baseSchema.base.keys({\n  type_id: _joi2['default'].string().only('geoip').required(),\n  source_field: _joi2['default'].string().allow(''),\n  target_field: _joi2['default'].string().allow(''),\n  database_file: _joi2['default'].string().allow(''),\n  database_fields: _joi2['default'].array().items(_joi2['default'].string().allow(''))\n});\nexports.geoip = geoip;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvcHJvY2Vzc29ycy9nZW9pcC9zY2hlbWEuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7bUJBQWdCLEtBQUs7Ozs7MEJBQ0EsZ0JBQWdCOztBQUU5QixJQUFNLEtBQUssR0FBRyxpQkFBSyxJQUFJLENBQUM7QUFDN0IsU0FBTyxFQUFFLGlCQUFJLE1BQU0sRUFBRSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxRQUFRLEVBQUU7QUFDOUMsY0FBWSxFQUFFLGlCQUFJLE1BQU0sRUFBRSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUM7QUFDcEMsY0FBWSxFQUFFLGlCQUFJLE1BQU0sRUFBRSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUM7QUFDcEMsZUFBYSxFQUFFLGlCQUFJLE1BQU0sRUFBRSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUM7QUFDckMsaUJBQWUsRUFBRSxpQkFBSSxLQUFLLEVBQUUsQ0FBQyxLQUFLLENBQUMsaUJBQUksTUFBTSxFQUFFLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0NBQzNELENBQUMsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9wbHVnaW5zL2tpYmFuYS9zZXJ2ZXIvbGliL3Byb2Nlc3NvcnMvZ2VvaXAvc2NoZW1hLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEpvaSBmcm9tICdqb2knO1xuaW1wb3J0IHsgYmFzZSB9IGZyb20gJy4uL2Jhc2Uvc2NoZW1hJztcblxuZXhwb3J0IGNvbnN0IGdlb2lwID0gYmFzZS5rZXlzKHtcbiAgdHlwZV9pZDogSm9pLnN0cmluZygpLm9ubHkoJ2dlb2lwJykucmVxdWlyZWQoKSxcbiAgc291cmNlX2ZpZWxkOiBKb2kuc3RyaW5nKCkuYWxsb3coJycpLFxuICB0YXJnZXRfZmllbGQ6IEpvaS5zdHJpbmcoKS5hbGxvdygnJyksXG4gIGRhdGFiYXNlX2ZpbGU6IEpvaS5zdHJpbmcoKS5hbGxvdygnJyksXG4gIGRhdGFiYXNlX2ZpZWxkczogSm9pLmFycmF5KCkuaXRlbXMoSm9pLnN0cmluZygpLmFsbG93KCcnKSksXG59KTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/geoip/schema.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;mBAAgB,KAAK;;;;0BACA,gBAAgB;;AAE9B,IAAM,KAAK,GAAG,iBAAK,IAAI,CAAC;AAC7B,SAAO,EAAE,iBAAI,MAAM,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,QAAQ,EAAE;AAC9C,cAAY,EAAE,iBAAI,MAAM,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC;AACpC,cAAY,EAAE,iBAAI,MAAM,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC;AACpC,eAAa,EAAE,iBAAI,MAAM,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC;AACrC,iBAAe,EAAE,iBAAI,KAAK,EAAE,CAAC,KAAK,CAAC,iBAAI,MAAM,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;CAC3D,CAAC,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/geoip/schema.js",
      "sourcesContent": [
        "import Joi from 'joi';\nimport { base } from '../base/schema';\n\nexport const geoip = base.keys({\n  type_id: Joi.string().only('geoip').required(),\n  source_field: Joi.string().allow(''),\n  target_field: Joi.string().allow(''),\n  database_file: Joi.string().allow(''),\n  database_fields: Joi.array().items(Joi.string().allow('')),\n});\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/grok/schema.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "joi",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Joi"
              }
            ]
          },
          {
            "source": "../base/schema",
            "imported": [
              "base"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "base",
                "local": "base"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "grok"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "grok",
              "exported": "grok"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _joi = require('joi');\n\nvar _joi2 = _interopRequireDefault(_joi);\n\nvar _baseSchema = require('../base/schema');\n\nvar grok = _baseSchema.base.keys({\n  type_id: _joi2['default'].string().only('grok').required(),\n  source_field: _joi2['default'].string().allow(''),\n  pattern: _joi2['default'].string().allow('')\n});\nexports.grok = grok;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvcHJvY2Vzc29ycy9ncm9rL3NjaGVtYS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7OzttQkFBZ0IsS0FBSzs7OzswQkFDQSxnQkFBZ0I7O0FBRTlCLElBQU0sSUFBSSxHQUFHLGlCQUFLLElBQUksQ0FBQztBQUM1QixTQUFPLEVBQUUsaUJBQUksTUFBTSxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLFFBQVEsRUFBRTtBQUM3QyxjQUFZLEVBQUUsaUJBQUksTUFBTSxFQUFFLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztBQUNwQyxTQUFPLEVBQUUsaUJBQUksTUFBTSxFQUFFLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztDQUNoQyxDQUFDLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvcGx1Z2lucy9raWJhbmEvc2VydmVyL2xpYi9wcm9jZXNzb3JzL2dyb2svc2NoZW1hLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEpvaSBmcm9tICdqb2knO1xuaW1wb3J0IHsgYmFzZSB9IGZyb20gJy4uL2Jhc2Uvc2NoZW1hJztcblxuZXhwb3J0IGNvbnN0IGdyb2sgPSBiYXNlLmtleXMoe1xuICB0eXBlX2lkOiBKb2kuc3RyaW5nKCkub25seSgnZ3JvaycpLnJlcXVpcmVkKCksXG4gIHNvdXJjZV9maWVsZDogSm9pLnN0cmluZygpLmFsbG93KCcnKSxcbiAgcGF0dGVybjogSm9pLnN0cmluZygpLmFsbG93KCcnKVxufSk7XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/grok/schema.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;mBAAgB,KAAK;;;;0BACA,gBAAgB;;AAE9B,IAAM,IAAI,GAAG,iBAAK,IAAI,CAAC;AAC5B,SAAO,EAAE,iBAAI,MAAM,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,QAAQ,EAAE;AAC7C,cAAY,EAAE,iBAAI,MAAM,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC;AACpC,SAAO,EAAE,iBAAI,MAAM,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC;CAChC,CAAC,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/grok/schema.js",
      "sourcesContent": [
        "import Joi from 'joi';\nimport { base } from '../base/schema';\n\nexport const grok = base.keys({\n  type_id: Joi.string().only('grok').required(),\n  source_field: Joi.string().allow(''),\n  pattern: Joi.string().allow('')\n});\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/gsub/schema.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "joi",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Joi"
              }
            ]
          },
          {
            "source": "../base/schema",
            "imported": [
              "base"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "base",
                "local": "base"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "gsub"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "gsub",
              "exported": "gsub"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _joi = require('joi');\n\nvar _joi2 = _interopRequireDefault(_joi);\n\nvar _baseSchema = require('../base/schema');\n\nvar gsub = _baseSchema.base.keys({\n  type_id: _joi2['default'].string().only('gsub').required(),\n  source_field: _joi2['default'].string().allow(''),\n  pattern: _joi2['default'].string().allow(''),\n  replacement: _joi2['default'].string().allow('')\n});\nexports.gsub = gsub;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvcHJvY2Vzc29ycy9nc3ViL3NjaGVtYS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7OzttQkFBZ0IsS0FBSzs7OzswQkFDQSxnQkFBZ0I7O0FBRTlCLElBQU0sSUFBSSxHQUFHLGlCQUFLLElBQUksQ0FBQztBQUM1QixTQUFPLEVBQUUsaUJBQUksTUFBTSxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLFFBQVEsRUFBRTtBQUM3QyxjQUFZLEVBQUUsaUJBQUksTUFBTSxFQUFFLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztBQUNwQyxTQUFPLEVBQUUsaUJBQUksTUFBTSxFQUFFLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztBQUMvQixhQUFXLEVBQUUsaUJBQUksTUFBTSxFQUFFLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztDQUNwQyxDQUFDLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvcGx1Z2lucy9raWJhbmEvc2VydmVyL2xpYi9wcm9jZXNzb3JzL2dzdWIvc2NoZW1hLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEpvaSBmcm9tICdqb2knO1xuaW1wb3J0IHsgYmFzZSB9IGZyb20gJy4uL2Jhc2Uvc2NoZW1hJztcblxuZXhwb3J0IGNvbnN0IGdzdWIgPSBiYXNlLmtleXMoe1xuICB0eXBlX2lkOiBKb2kuc3RyaW5nKCkub25seSgnZ3N1YicpLnJlcXVpcmVkKCksXG4gIHNvdXJjZV9maWVsZDogSm9pLnN0cmluZygpLmFsbG93KCcnKSxcbiAgcGF0dGVybjogSm9pLnN0cmluZygpLmFsbG93KCcnKSxcbiAgcmVwbGFjZW1lbnQ6IEpvaS5zdHJpbmcoKS5hbGxvdygnJylcbn0pO1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/gsub/schema.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;mBAAgB,KAAK;;;;0BACA,gBAAgB;;AAE9B,IAAM,IAAI,GAAG,iBAAK,IAAI,CAAC;AAC5B,SAAO,EAAE,iBAAI,MAAM,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,QAAQ,EAAE;AAC7C,cAAY,EAAE,iBAAI,MAAM,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC;AACpC,SAAO,EAAE,iBAAI,MAAM,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC;AAC/B,aAAW,EAAE,iBAAI,MAAM,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC;CACpC,CAAC,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/gsub/schema.js",
      "sourcesContent": [
        "import Joi from 'joi';\nimport { base } from '../base/schema';\n\nexport const gsub = base.keys({\n  type_id: Joi.string().only('gsub').required(),\n  source_field: Joi.string().allow(''),\n  pattern: Joi.string().allow(''),\n  replacement: Joi.string().allow('')\n});\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/join/schema.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "joi",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Joi"
              }
            ]
          },
          {
            "source": "../base/schema",
            "imported": [
              "base"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "base",
                "local": "base"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "join"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "join",
              "exported": "join"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _joi = require('joi');\n\nvar _joi2 = _interopRequireDefault(_joi);\n\nvar _baseSchema = require('../base/schema');\n\nvar join = _baseSchema.base.keys({\n  type_id: _joi2['default'].string().only('join').required(),\n  source_field: _joi2['default'].string().allow(''),\n  separator: _joi2['default'].string().allow('')\n});\nexports.join = join;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvcHJvY2Vzc29ycy9qb2luL3NjaGVtYS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7OzttQkFBZ0IsS0FBSzs7OzswQkFDQSxnQkFBZ0I7O0FBRTlCLElBQU0sSUFBSSxHQUFHLGlCQUFLLElBQUksQ0FBQztBQUM1QixTQUFPLEVBQUUsaUJBQUksTUFBTSxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLFFBQVEsRUFBRTtBQUM3QyxjQUFZLEVBQUUsaUJBQUksTUFBTSxFQUFFLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztBQUNwQyxXQUFTLEVBQUUsaUJBQUksTUFBTSxFQUFFLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztDQUNsQyxDQUFDLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvcGx1Z2lucy9raWJhbmEvc2VydmVyL2xpYi9wcm9jZXNzb3JzL2pvaW4vc2NoZW1hLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEpvaSBmcm9tICdqb2knO1xuaW1wb3J0IHsgYmFzZSB9IGZyb20gJy4uL2Jhc2Uvc2NoZW1hJztcblxuZXhwb3J0IGNvbnN0IGpvaW4gPSBiYXNlLmtleXMoe1xuICB0eXBlX2lkOiBKb2kuc3RyaW5nKCkub25seSgnam9pbicpLnJlcXVpcmVkKCksXG4gIHNvdXJjZV9maWVsZDogSm9pLnN0cmluZygpLmFsbG93KCcnKSxcbiAgc2VwYXJhdG9yOiBKb2kuc3RyaW5nKCkuYWxsb3coJycpXG59KTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/join/schema.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;mBAAgB,KAAK;;;;0BACA,gBAAgB;;AAE9B,IAAM,IAAI,GAAG,iBAAK,IAAI,CAAC;AAC5B,SAAO,EAAE,iBAAI,MAAM,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,QAAQ,EAAE;AAC7C,cAAY,EAAE,iBAAI,MAAM,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC;AACpC,WAAS,EAAE,iBAAI,MAAM,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC;CAClC,CAAC,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/join/schema.js",
      "sourcesContent": [
        "import Joi from 'joi';\nimport { base } from '../base/schema';\n\nexport const join = base.keys({\n  type_id: Joi.string().only('join').required(),\n  source_field: Joi.string().allow(''),\n  separator: Joi.string().allow('')\n});\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/lowercase/schema.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "joi",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Joi"
              }
            ]
          },
          {
            "source": "../base/schema",
            "imported": [
              "base"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "base",
                "local": "base"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "lowercase"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "lowercase",
              "exported": "lowercase"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _joi = require('joi');\n\nvar _joi2 = _interopRequireDefault(_joi);\n\nvar _baseSchema = require('../base/schema');\n\nvar lowercase = _baseSchema.base.keys({\n  type_id: _joi2['default'].string().only('lowercase').required(),\n  source_field: _joi2['default'].string().allow('')\n});\nexports.lowercase = lowercase;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvcHJvY2Vzc29ycy9sb3dlcmNhc2Uvc2NoZW1hLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O21CQUFnQixLQUFLOzs7OzBCQUNBLGdCQUFnQjs7QUFFOUIsSUFBTSxTQUFTLEdBQUcsaUJBQUssSUFBSSxDQUFDO0FBQ2pDLFNBQU8sRUFBRSxpQkFBSSxNQUFNLEVBQUUsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsUUFBUSxFQUFFO0FBQ2xELGNBQVksRUFBRSxpQkFBSSxNQUFNLEVBQUUsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDO0NBQ3JDLENBQUMsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9wbHVnaW5zL2tpYmFuYS9zZXJ2ZXIvbGliL3Byb2Nlc3NvcnMvbG93ZXJjYXNlL3NjaGVtYS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBKb2kgZnJvbSAnam9pJztcbmltcG9ydCB7IGJhc2UgfSBmcm9tICcuLi9iYXNlL3NjaGVtYSc7XG5cbmV4cG9ydCBjb25zdCBsb3dlcmNhc2UgPSBiYXNlLmtleXMoe1xuICB0eXBlX2lkOiBKb2kuc3RyaW5nKCkub25seSgnbG93ZXJjYXNlJykucmVxdWlyZWQoKSxcbiAgc291cmNlX2ZpZWxkOiBKb2kuc3RyaW5nKCkuYWxsb3coJycpXG59KTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/lowercase/schema.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;mBAAgB,KAAK;;;;0BACA,gBAAgB;;AAE9B,IAAM,SAAS,GAAG,iBAAK,IAAI,CAAC;AACjC,SAAO,EAAE,iBAAI,MAAM,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,QAAQ,EAAE;AAClD,cAAY,EAAE,iBAAI,MAAM,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC;CACrC,CAAC,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/lowercase/schema.js",
      "sourcesContent": [
        "import Joi from 'joi';\nimport { base } from '../base/schema';\n\nexport const lowercase = base.keys({\n  type_id: Joi.string().only('lowercase').required(),\n  source_field: Joi.string().allow('')\n});\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/remove/schema.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "joi",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Joi"
              }
            ]
          },
          {
            "source": "../base/schema",
            "imported": [
              "base"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "base",
                "local": "base"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "remove"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "remove",
              "exported": "remove"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _joi = require('joi');\n\nvar _joi2 = _interopRequireDefault(_joi);\n\nvar _baseSchema = require('../base/schema');\n\nvar remove = _baseSchema.base.keys({\n  type_id: _joi2['default'].string().only('remove').required(),\n  source_field: _joi2['default'].string().allow('')\n});\nexports.remove = remove;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvcHJvY2Vzc29ycy9yZW1vdmUvc2NoZW1hLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O21CQUFnQixLQUFLOzs7OzBCQUNBLGdCQUFnQjs7QUFFOUIsSUFBTSxNQUFNLEdBQUcsaUJBQUssSUFBSSxDQUFDO0FBQzlCLFNBQU8sRUFBRSxpQkFBSSxNQUFNLEVBQUUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsUUFBUSxFQUFFO0FBQy9DLGNBQVksRUFBRSxpQkFBSSxNQUFNLEVBQUUsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDO0NBQ3JDLENBQUMsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9wbHVnaW5zL2tpYmFuYS9zZXJ2ZXIvbGliL3Byb2Nlc3NvcnMvcmVtb3ZlL3NjaGVtYS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBKb2kgZnJvbSAnam9pJztcbmltcG9ydCB7IGJhc2UgfSBmcm9tICcuLi9iYXNlL3NjaGVtYSc7XG5cbmV4cG9ydCBjb25zdCByZW1vdmUgPSBiYXNlLmtleXMoe1xuICB0eXBlX2lkOiBKb2kuc3RyaW5nKCkub25seSgncmVtb3ZlJykucmVxdWlyZWQoKSxcbiAgc291cmNlX2ZpZWxkOiBKb2kuc3RyaW5nKCkuYWxsb3coJycpXG59KTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/remove/schema.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;mBAAgB,KAAK;;;;0BACA,gBAAgB;;AAE9B,IAAM,MAAM,GAAG,iBAAK,IAAI,CAAC;AAC9B,SAAO,EAAE,iBAAI,MAAM,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,QAAQ,EAAE;AAC/C,cAAY,EAAE,iBAAI,MAAM,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC;CACrC,CAAC,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/remove/schema.js",
      "sourcesContent": [
        "import Joi from 'joi';\nimport { base } from '../base/schema';\n\nexport const remove = base.keys({\n  type_id: Joi.string().only('remove').required(),\n  source_field: Joi.string().allow('')\n});\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/rename/schema.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "joi",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Joi"
              }
            ]
          },
          {
            "source": "../base/schema",
            "imported": [
              "base"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "base",
                "local": "base"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "rename"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "rename",
              "exported": "rename"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _joi = require('joi');\n\nvar _joi2 = _interopRequireDefault(_joi);\n\nvar _baseSchema = require('../base/schema');\n\nvar rename = _baseSchema.base.keys({\n  type_id: _joi2['default'].string().only('rename').required(),\n  source_field: _joi2['default'].string().allow(''),\n  target_field: _joi2['default'].string().allow('')\n});\nexports.rename = rename;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvcHJvY2Vzc29ycy9yZW5hbWUvc2NoZW1hLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O21CQUFnQixLQUFLOzs7OzBCQUNBLGdCQUFnQjs7QUFFOUIsSUFBTSxNQUFNLEdBQUcsaUJBQUssSUFBSSxDQUFDO0FBQzlCLFNBQU8sRUFBRSxpQkFBSSxNQUFNLEVBQUUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsUUFBUSxFQUFFO0FBQy9DLGNBQVksRUFBRSxpQkFBSSxNQUFNLEVBQUUsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDO0FBQ3BDLGNBQVksRUFBRSxpQkFBSSxNQUFNLEVBQUUsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDO0NBQ3JDLENBQUMsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9wbHVnaW5zL2tpYmFuYS9zZXJ2ZXIvbGliL3Byb2Nlc3NvcnMvcmVuYW1lL3NjaGVtYS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBKb2kgZnJvbSAnam9pJztcbmltcG9ydCB7IGJhc2UgfSBmcm9tICcuLi9iYXNlL3NjaGVtYSc7XG5cbmV4cG9ydCBjb25zdCByZW5hbWUgPSBiYXNlLmtleXMoe1xuICB0eXBlX2lkOiBKb2kuc3RyaW5nKCkub25seSgncmVuYW1lJykucmVxdWlyZWQoKSxcbiAgc291cmNlX2ZpZWxkOiBKb2kuc3RyaW5nKCkuYWxsb3coJycpLFxuICB0YXJnZXRfZmllbGQ6IEpvaS5zdHJpbmcoKS5hbGxvdygnJylcbn0pO1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/rename/schema.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;mBAAgB,KAAK;;;;0BACA,gBAAgB;;AAE9B,IAAM,MAAM,GAAG,iBAAK,IAAI,CAAC;AAC9B,SAAO,EAAE,iBAAI,MAAM,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,QAAQ,EAAE;AAC/C,cAAY,EAAE,iBAAI,MAAM,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC;AACpC,cAAY,EAAE,iBAAI,MAAM,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC;CACrC,CAAC,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/rename/schema.js",
      "sourcesContent": [
        "import Joi from 'joi';\nimport { base } from '../base/schema';\n\nexport const rename = base.keys({\n  type_id: Joi.string().only('rename').required(),\n  source_field: Joi.string().allow(''),\n  target_field: Joi.string().allow('')\n});\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/set/schema.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "joi",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Joi"
              }
            ]
          },
          {
            "source": "../base/schema",
            "imported": [
              "base"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "base",
                "local": "base"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "set"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "set",
              "exported": "set"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _joi = require('joi');\n\nvar _joi2 = _interopRequireDefault(_joi);\n\nvar _baseSchema = require('../base/schema');\n\nvar set = _baseSchema.base.keys({\n  type_id: _joi2['default'].string().only('set').required(),\n  target_field: _joi2['default'].string().allow(''),\n  value: _joi2['default'].string().allow('')\n});\nexports.set = set;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvcHJvY2Vzc29ycy9zZXQvc2NoZW1hLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O21CQUFnQixLQUFLOzs7OzBCQUNBLGdCQUFnQjs7QUFFOUIsSUFBTSxHQUFHLEdBQUcsaUJBQUssSUFBSSxDQUFDO0FBQzNCLFNBQU8sRUFBRSxpQkFBSSxNQUFNLEVBQUUsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsUUFBUSxFQUFFO0FBQzVDLGNBQVksRUFBRSxpQkFBSSxNQUFNLEVBQUUsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDO0FBQ3BDLE9BQUssRUFBRSxpQkFBSSxNQUFNLEVBQUUsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDO0NBQzlCLENBQUMsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9wbHVnaW5zL2tpYmFuYS9zZXJ2ZXIvbGliL3Byb2Nlc3NvcnMvc2V0L3NjaGVtYS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBKb2kgZnJvbSAnam9pJztcbmltcG9ydCB7IGJhc2UgfSBmcm9tICcuLi9iYXNlL3NjaGVtYSc7XG5cbmV4cG9ydCBjb25zdCBzZXQgPSBiYXNlLmtleXMoe1xuICB0eXBlX2lkOiBKb2kuc3RyaW5nKCkub25seSgnc2V0JykucmVxdWlyZWQoKSxcbiAgdGFyZ2V0X2ZpZWxkOiBKb2kuc3RyaW5nKCkuYWxsb3coJycpLFxuICB2YWx1ZTogSm9pLnN0cmluZygpLmFsbG93KCcnKVxufSk7XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/set/schema.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;mBAAgB,KAAK;;;;0BACA,gBAAgB;;AAE9B,IAAM,GAAG,GAAG,iBAAK,IAAI,CAAC;AAC3B,SAAO,EAAE,iBAAI,MAAM,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,QAAQ,EAAE;AAC5C,cAAY,EAAE,iBAAI,MAAM,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC;AACpC,OAAK,EAAE,iBAAI,MAAM,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC;CAC9B,CAAC,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/set/schema.js",
      "sourcesContent": [
        "import Joi from 'joi';\nimport { base } from '../base/schema';\n\nexport const set = base.keys({\n  type_id: Joi.string().only('set').required(),\n  target_field: Joi.string().allow(''),\n  value: Joi.string().allow('')\n});\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/split/schema.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "joi",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Joi"
              }
            ]
          },
          {
            "source": "../base/schema",
            "imported": [
              "base"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "base",
                "local": "base"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "split"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "split",
              "exported": "split"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _joi = require('joi');\n\nvar _joi2 = _interopRequireDefault(_joi);\n\nvar _baseSchema = require('../base/schema');\n\nvar split = _baseSchema.base.keys({\n  type_id: _joi2['default'].string().only('split').required(),\n  source_field: _joi2['default'].string().allow(''),\n  separator: _joi2['default'].string().allow('')\n});\nexports.split = split;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvcHJvY2Vzc29ycy9zcGxpdC9zY2hlbWEuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7bUJBQWdCLEtBQUs7Ozs7MEJBQ0EsZ0JBQWdCOztBQUU5QixJQUFNLEtBQUssR0FBRyxpQkFBSyxJQUFJLENBQUM7QUFDN0IsU0FBTyxFQUFFLGlCQUFJLE1BQU0sRUFBRSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxRQUFRLEVBQUU7QUFDOUMsY0FBWSxFQUFFLGlCQUFJLE1BQU0sRUFBRSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUM7QUFDcEMsV0FBUyxFQUFFLGlCQUFJLE1BQU0sRUFBRSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUM7Q0FDbEMsQ0FBQyxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvcHJvY2Vzc29ycy9zcGxpdC9zY2hlbWEuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgSm9pIGZyb20gJ2pvaSc7XG5pbXBvcnQgeyBiYXNlIH0gZnJvbSAnLi4vYmFzZS9zY2hlbWEnO1xuXG5leHBvcnQgY29uc3Qgc3BsaXQgPSBiYXNlLmtleXMoe1xuICB0eXBlX2lkOiBKb2kuc3RyaW5nKCkub25seSgnc3BsaXQnKS5yZXF1aXJlZCgpLFxuICBzb3VyY2VfZmllbGQ6IEpvaS5zdHJpbmcoKS5hbGxvdygnJyksXG4gIHNlcGFyYXRvcjogSm9pLnN0cmluZygpLmFsbG93KCcnKVxufSk7XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/split/schema.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;mBAAgB,KAAK;;;;0BACA,gBAAgB;;AAE9B,IAAM,KAAK,GAAG,iBAAK,IAAI,CAAC;AAC7B,SAAO,EAAE,iBAAI,MAAM,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,QAAQ,EAAE;AAC9C,cAAY,EAAE,iBAAI,MAAM,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC;AACpC,WAAS,EAAE,iBAAI,MAAM,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC;CAClC,CAAC,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/split/schema.js",
      "sourcesContent": [
        "import Joi from 'joi';\nimport { base } from '../base/schema';\n\nexport const split = base.keys({\n  type_id: Joi.string().only('split').required(),\n  source_field: Joi.string().allow(''),\n  separator: Joi.string().allow('')\n});\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/trim/schema.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "joi",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Joi"
              }
            ]
          },
          {
            "source": "../base/schema",
            "imported": [
              "base"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "base",
                "local": "base"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "trim"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "trim",
              "exported": "trim"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _joi = require('joi');\n\nvar _joi2 = _interopRequireDefault(_joi);\n\nvar _baseSchema = require('../base/schema');\n\nvar trim = _baseSchema.base.keys({\n  type_id: _joi2['default'].string().only('trim').required(),\n  source_field: _joi2['default'].string().allow('')\n});\nexports.trim = trim;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvcHJvY2Vzc29ycy90cmltL3NjaGVtYS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7OzttQkFBZ0IsS0FBSzs7OzswQkFDQSxnQkFBZ0I7O0FBRTlCLElBQU0sSUFBSSxHQUFHLGlCQUFLLElBQUksQ0FBQztBQUM1QixTQUFPLEVBQUUsaUJBQUksTUFBTSxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLFFBQVEsRUFBRTtBQUM3QyxjQUFZLEVBQUUsaUJBQUksTUFBTSxFQUFFLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztDQUNyQyxDQUFDLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvcGx1Z2lucy9raWJhbmEvc2VydmVyL2xpYi9wcm9jZXNzb3JzL3RyaW0vc2NoZW1hLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEpvaSBmcm9tICdqb2knO1xuaW1wb3J0IHsgYmFzZSB9IGZyb20gJy4uL2Jhc2Uvc2NoZW1hJztcblxuZXhwb3J0IGNvbnN0IHRyaW0gPSBiYXNlLmtleXMoe1xuICB0eXBlX2lkOiBKb2kuc3RyaW5nKCkub25seSgndHJpbScpLnJlcXVpcmVkKCksXG4gIHNvdXJjZV9maWVsZDogSm9pLnN0cmluZygpLmFsbG93KCcnKVxufSk7XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/trim/schema.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;mBAAgB,KAAK;;;;0BACA,gBAAgB;;AAE9B,IAAM,IAAI,GAAG,iBAAK,IAAI,CAAC;AAC5B,SAAO,EAAE,iBAAI,MAAM,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,QAAQ,EAAE;AAC7C,cAAY,EAAE,iBAAI,MAAM,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC;CACrC,CAAC,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/trim/schema.js",
      "sourcesContent": [
        "import Joi from 'joi';\nimport { base } from '../base/schema';\n\nexport const trim = base.keys({\n  type_id: Joi.string().only('trim').required(),\n  source_field: Joi.string().allow('')\n});\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/uppercase/schema.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "joi",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Joi"
              }
            ]
          },
          {
            "source": "../base/schema",
            "imported": [
              "base"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "base",
                "local": "base"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "uppercase"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "uppercase",
              "exported": "uppercase"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _joi = require('joi');\n\nvar _joi2 = _interopRequireDefault(_joi);\n\nvar _baseSchema = require('../base/schema');\n\nvar uppercase = _baseSchema.base.keys({\n  type_id: _joi2['default'].string().only('uppercase').required(),\n  source_field: _joi2['default'].string().allow('')\n});\nexports.uppercase = uppercase;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvcHJvY2Vzc29ycy91cHBlcmNhc2Uvc2NoZW1hLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O21CQUFnQixLQUFLOzs7OzBCQUNBLGdCQUFnQjs7QUFFOUIsSUFBTSxTQUFTLEdBQUcsaUJBQUssSUFBSSxDQUFDO0FBQ2pDLFNBQU8sRUFBRSxpQkFBSSxNQUFNLEVBQUUsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsUUFBUSxFQUFFO0FBQ2xELGNBQVksRUFBRSxpQkFBSSxNQUFNLEVBQUUsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDO0NBQ3JDLENBQUMsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9wbHVnaW5zL2tpYmFuYS9zZXJ2ZXIvbGliL3Byb2Nlc3NvcnMvdXBwZXJjYXNlL3NjaGVtYS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBKb2kgZnJvbSAnam9pJztcbmltcG9ydCB7IGJhc2UgfSBmcm9tICcuLi9iYXNlL3NjaGVtYSc7XG5cbmV4cG9ydCBjb25zdCB1cHBlcmNhc2UgPSBiYXNlLmtleXMoe1xuICB0eXBlX2lkOiBKb2kuc3RyaW5nKCkub25seSgndXBwZXJjYXNlJykucmVxdWlyZWQoKSxcbiAgc291cmNlX2ZpZWxkOiBKb2kuc3RyaW5nKCkuYWxsb3coJycpXG59KTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/uppercase/schema.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;mBAAgB,KAAK;;;;0BACA,gBAAgB;;AAE9B,IAAM,SAAS,GAAG,iBAAK,IAAI,CAAC;AACjC,SAAO,EAAE,iBAAI,MAAM,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,QAAQ,EAAE;AAClD,cAAY,EAAE,iBAAI,MAAM,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC;CACrC,CAAC,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/uppercase/schema.js",
      "sourcesContent": [
        "import Joi from 'joi';\nimport { base } from '../base/schema';\n\nexport const uppercase = base.keys({\n  type_id: Joi.string().only('uppercase').required(),\n  source_field: Joi.string().allow('')\n});\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/lib/handle_es_error.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "boom",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Boom"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "elasticsearch",
            "imported": [
              "errors"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "errors",
                "local": "esErrors"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _boom = require('boom');\n\nvar _boom2 = _interopRequireDefault(_boom);\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _elasticsearch = require('elasticsearch');\n\nmodule.exports = function handleESError(error) {\n  if (!(error instanceof Error)) {\n    throw new Error('Expected an instance of Error');\n  }\n\n  if (error instanceof _elasticsearch.errors.ConnectionFault || error instanceof _elasticsearch.errors.ServiceUnavailable || error instanceof _elasticsearch.errors.NoConnections || error instanceof _elasticsearch.errors.RequestTimeout) {\n    return _boom2['default'].serverTimeout(error);\n  } else if (error instanceof _elasticsearch.errors.Conflict || _lodash2['default'].contains(error.message, 'index_template_already_exists')) {\n    return _boom2['default'].conflict(error);\n  } else if (error instanceof _elasticsearch.errors[403]) {\n    return _boom2['default'].forbidden(error);\n  } else if (error instanceof _elasticsearch.errors.NotFound) {\n    return _boom2['default'].notFound(error);\n  } else if (error instanceof _elasticsearch.errors.BadRequest) {\n    return _boom2['default'].badRequest(error);\n  } else {\n    return error;\n  }\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvaGFuZGxlX2VzX2Vycm9yLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7b0JBQWlCLE1BQU07Ozs7c0JBQ1QsUUFBUTs7Ozs2QkFDYSxlQUFlOztBQUVsRCxNQUFNLENBQUMsT0FBTyxHQUFHLFNBQVMsYUFBYSxDQUFDLEtBQUssRUFBRTtBQUM3QyxNQUFJLEVBQUUsS0FBSyxZQUFZLEtBQUssQ0FBQSxBQUFDLEVBQUU7QUFDN0IsVUFBTSxJQUFJLEtBQUssQ0FBQywrQkFBK0IsQ0FBQyxDQUFDO0dBQ2xEOztBQUVELE1BQUksS0FBSyxZQUFZLHNCQUFTLGVBQWUsSUFDM0MsS0FBSyxZQUFZLHNCQUFTLGtCQUFrQixJQUM1QyxLQUFLLFlBQVksc0JBQVMsYUFBYSxJQUN2QyxLQUFLLFlBQVksc0JBQVMsY0FBYyxFQUFFO0FBQzFDLFdBQU8sa0JBQUssYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO0dBQ2xDLE1BQU0sSUFBSSxLQUFLLFlBQVksc0JBQVMsUUFBUSxJQUFJLG9CQUFFLFFBQVEsQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFLCtCQUErQixDQUFDLEVBQUU7QUFDM0csV0FBTyxrQkFBSyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7R0FDN0IsTUFBTSxJQUFJLEtBQUssWUFBWSxzQkFBUyxHQUFHLENBQUMsRUFBRTtBQUN6QyxXQUFPLGtCQUFLLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQztHQUM5QixNQUFNLElBQUksS0FBSyxZQUFZLHNCQUFTLFFBQVEsRUFBRTtBQUM3QyxXQUFPLGtCQUFLLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztHQUM3QixNQUFNLElBQUksS0FBSyxZQUFZLHNCQUFTLFVBQVUsRUFBRTtBQUMvQyxXQUFPLGtCQUFLLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQztHQUMvQixNQUFNO0FBQ0wsV0FBTyxLQUFLLENBQUM7R0FDZDtDQUNGLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvcGx1Z2lucy9raWJhbmEvc2VydmVyL2xpYi9oYW5kbGVfZXNfZXJyb3IuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQm9vbSBmcm9tICdib29tJztcbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgeyBlcnJvcnMgYXMgZXNFcnJvcnMgfSBmcm9tICdlbGFzdGljc2VhcmNoJztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBoYW5kbGVFU0Vycm9yKGVycm9yKSB7XG4gIGlmICghKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdFeHBlY3RlZCBhbiBpbnN0YW5jZSBvZiBFcnJvcicpO1xuICB9XG5cbiAgaWYgKGVycm9yIGluc3RhbmNlb2YgZXNFcnJvcnMuQ29ubmVjdGlvbkZhdWx0IHx8XG4gICAgZXJyb3IgaW5zdGFuY2VvZiBlc0Vycm9ycy5TZXJ2aWNlVW5hdmFpbGFibGUgfHxcbiAgICBlcnJvciBpbnN0YW5jZW9mIGVzRXJyb3JzLk5vQ29ubmVjdGlvbnMgfHxcbiAgICBlcnJvciBpbnN0YW5jZW9mIGVzRXJyb3JzLlJlcXVlc3RUaW1lb3V0KSB7XG4gICAgcmV0dXJuIEJvb20uc2VydmVyVGltZW91dChlcnJvcik7XG4gIH0gZWxzZSBpZiAoZXJyb3IgaW5zdGFuY2VvZiBlc0Vycm9ycy5Db25mbGljdCB8fCBfLmNvbnRhaW5zKGVycm9yLm1lc3NhZ2UsICdpbmRleF90ZW1wbGF0ZV9hbHJlYWR5X2V4aXN0cycpKSB7XG4gICAgcmV0dXJuIEJvb20uY29uZmxpY3QoZXJyb3IpO1xuICB9IGVsc2UgaWYgKGVycm9yIGluc3RhbmNlb2YgZXNFcnJvcnNbNDAzXSkge1xuICAgIHJldHVybiBCb29tLmZvcmJpZGRlbihlcnJvcik7XG4gIH0gZWxzZSBpZiAoZXJyb3IgaW5zdGFuY2VvZiBlc0Vycm9ycy5Ob3RGb3VuZCkge1xuICAgIHJldHVybiBCb29tLm5vdEZvdW5kKGVycm9yKTtcbiAgfSBlbHNlIGlmIChlcnJvciBpbnN0YW5jZW9mIGVzRXJyb3JzLkJhZFJlcXVlc3QpIHtcbiAgICByZXR1cm4gQm9vbS5iYWRSZXF1ZXN0KGVycm9yKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZXJyb3I7XG4gIH1cbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/lib/handle_es_error.js"
      ],
      "names": [],
      "mappings": ";;;;oBAAiB,MAAM;;;;sBACT,QAAQ;;;;6BACa,eAAe;;AAElD,MAAM,CAAC,OAAO,GAAG,SAAS,aAAa,CAAC,KAAK,EAAE;AAC7C,MAAI,EAAE,KAAK,YAAY,KAAK,CAAA,AAAC,EAAE;AAC7B,UAAM,IAAI,KAAK,CAAC,+BAA+B,CAAC,CAAC;GAClD;;AAED,MAAI,KAAK,YAAY,sBAAS,eAAe,IAC3C,KAAK,YAAY,sBAAS,kBAAkB,IAC5C,KAAK,YAAY,sBAAS,aAAa,IACvC,KAAK,YAAY,sBAAS,cAAc,EAAE;AAC1C,WAAO,kBAAK,aAAa,CAAC,KAAK,CAAC,CAAC;GAClC,MAAM,IAAI,KAAK,YAAY,sBAAS,QAAQ,IAAI,oBAAE,QAAQ,CAAC,KAAK,CAAC,OAAO,EAAE,+BAA+B,CAAC,EAAE;AAC3G,WAAO,kBAAK,QAAQ,CAAC,KAAK,CAAC,CAAC;GAC7B,MAAM,IAAI,KAAK,YAAY,sBAAS,GAAG,CAAC,EAAE;AACzC,WAAO,kBAAK,SAAS,CAAC,KAAK,CAAC,CAAC;GAC9B,MAAM,IAAI,KAAK,YAAY,sBAAS,QAAQ,EAAE;AAC7C,WAAO,kBAAK,QAAQ,CAAC,KAAK,CAAC,CAAC;GAC7B,MAAM,IAAI,KAAK,YAAY,sBAAS,UAAU,EAAE;AAC/C,WAAO,kBAAK,UAAU,CAAC,KAAK,CAAC,CAAC;GAC/B,MAAM;AACL,WAAO,KAAK,CAAC;GACd;CACF,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/lib/handle_es_error.js",
      "sourcesContent": [
        "import Boom from 'boom';\nimport _ from 'lodash';\nimport { errors as esErrors } from 'elasticsearch';\n\nmodule.exports = function handleESError(error) {\n  if (!(error instanceof Error)) {\n    throw new Error('Expected an instance of Error');\n  }\n\n  if (error instanceof esErrors.ConnectionFault ||\n    error instanceof esErrors.ServiceUnavailable ||\n    error instanceof esErrors.NoConnections ||\n    error instanceof esErrors.RequestTimeout) {\n    return Boom.serverTimeout(error);\n  } else if (error instanceof esErrors.Conflict || _.contains(error.message, 'index_template_already_exists')) {\n    return Boom.conflict(error);\n  } else if (error instanceof esErrors[403]) {\n    return Boom.forbidden(error);\n  } else if (error instanceof esErrors.NotFound) {\n    return Boom.notFound(error);\n  } else if (error instanceof esErrors.BadRequest) {\n    return Boom.badRequest(error);\n  } else {\n    return error;\n  }\n};\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/lib/create_mappings_from_pattern_fields.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\n// Creates an ES field mapping from a single field object in a kibana index pattern\nmodule.exports = function createMappingsFromPatternFields(fields) {\n  if (_lodash2['default'].isEmpty(fields)) {\n    throw new Error('argument must not be empty');\n  }\n\n  var mappings = {};\n\n  _lodash2['default'].forEach(fields, function (field) {\n    var mapping = undefined;\n\n    if (field.type === 'string') {\n      mapping = {\n        type: 'text',\n        fields: {\n          keyword: { type: 'keyword', ignore_above: 256 }\n        }\n      };\n    } else {\n      var fieldType = field.type === 'number' ? 'double' : field.type;\n      mapping = {\n        type: fieldType,\n        index: true,\n        doc_values: true\n      };\n    }\n\n    _lodash2['default'].set(mappings, field.name.split('.').join('.properties.'), mapping);\n  });\n\n  return mappings;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvY3JlYXRlX21hcHBpbmdzX2Zyb21fcGF0dGVybl9maWVsZHMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztzQkFBYyxRQUFROzs7OztBQUd0QixNQUFNLENBQUMsT0FBTyxHQUFHLFNBQVMsK0JBQStCLENBQUMsTUFBTSxFQUFFO0FBQ2hFLE1BQUksb0JBQUUsT0FBTyxDQUFDLE1BQU0sQ0FBQyxFQUFFO0FBQ3JCLFVBQU0sSUFBSSxLQUFLLENBQUMsNEJBQTRCLENBQUMsQ0FBQztHQUMvQzs7QUFFRCxNQUFNLFFBQVEsR0FBRyxFQUFFLENBQUM7O0FBRXBCLHNCQUFFLE9BQU8sQ0FBQyxNQUFNLEVBQUUsVUFBVSxLQUFLLEVBQUU7QUFDakMsUUFBSSxPQUFPLFlBQUEsQ0FBQzs7QUFFWixRQUFJLEtBQUssQ0FBQyxJQUFJLEtBQUssUUFBUSxFQUFFO0FBQzNCLGFBQU8sR0FBRztBQUNSLFlBQUksRUFBRSxNQUFNO0FBQ1osY0FBTSxFQUFFO0FBQ04saUJBQU8sRUFBRSxFQUFDLElBQUksRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLEdBQUcsRUFBQztTQUM5QztPQUNGLENBQUM7S0FDSCxNQUNJO0FBQ0gsVUFBTSxTQUFTLEdBQUcsS0FBSyxDQUFDLElBQUksS0FBSyxRQUFRLEdBQUcsUUFBUSxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUM7QUFDbEUsYUFBTyxHQUFHO0FBQ1IsWUFBSSxFQUFFLFNBQVM7QUFDZixhQUFLLEVBQUUsSUFBSTtBQUNYLGtCQUFVLEVBQUUsSUFBSTtPQUNqQixDQUFDO0tBQ0g7O0FBRUQsd0JBQUUsR0FBRyxDQUFDLFFBQVEsRUFBRSxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUM7R0FDdEUsQ0FBQyxDQUFDOztBQUVILFNBQU8sUUFBUSxDQUFDO0NBQ2pCLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvcGx1Z2lucy9raWJhbmEvc2VydmVyL2xpYi9jcmVhdGVfbWFwcGluZ3NfZnJvbV9wYXR0ZXJuX2ZpZWxkcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5cbi8vIENyZWF0ZXMgYW4gRVMgZmllbGQgbWFwcGluZyBmcm9tIGEgc2luZ2xlIGZpZWxkIG9iamVjdCBpbiBhIGtpYmFuYSBpbmRleCBwYXR0ZXJuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGNyZWF0ZU1hcHBpbmdzRnJvbVBhdHRlcm5GaWVsZHMoZmllbGRzKSB7XG4gIGlmIChfLmlzRW1wdHkoZmllbGRzKSkge1xuICAgIHRocm93IG5ldyBFcnJvcignYXJndW1lbnQgbXVzdCBub3QgYmUgZW1wdHknKTtcbiAgfVxuXG4gIGNvbnN0IG1hcHBpbmdzID0ge307XG5cbiAgXy5mb3JFYWNoKGZpZWxkcywgZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgbGV0IG1hcHBpbmc7XG5cbiAgICBpZiAoZmllbGQudHlwZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIG1hcHBpbmcgPSB7XG4gICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgZmllbGRzOiB7XG4gICAgICAgICAga2V5d29yZDoge3R5cGU6ICdrZXl3b3JkJywgaWdub3JlX2Fib3ZlOiAyNTZ9XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgY29uc3QgZmllbGRUeXBlID0gZmllbGQudHlwZSA9PT0gJ251bWJlcicgPyAnZG91YmxlJyA6IGZpZWxkLnR5cGU7XG4gICAgICBtYXBwaW5nID0ge1xuICAgICAgICB0eXBlOiBmaWVsZFR5cGUsXG4gICAgICAgIGluZGV4OiB0cnVlLFxuICAgICAgICBkb2NfdmFsdWVzOiB0cnVlXG4gICAgICB9O1xuICAgIH1cblxuICAgIF8uc2V0KG1hcHBpbmdzLCBmaWVsZC5uYW1lLnNwbGl0KCcuJykuam9pbignLnByb3BlcnRpZXMuJyksIG1hcHBpbmcpO1xuICB9KTtcblxuICByZXR1cm4gbWFwcGluZ3M7XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/lib/create_mappings_from_pattern_fields.js"
      ],
      "names": [],
      "mappings": ";;;;sBAAc,QAAQ;;;;;AAGtB,MAAM,CAAC,OAAO,GAAG,SAAS,+BAA+B,CAAC,MAAM,EAAE;AAChE,MAAI,oBAAE,OAAO,CAAC,MAAM,CAAC,EAAE;AACrB,UAAM,IAAI,KAAK,CAAC,4BAA4B,CAAC,CAAC;GAC/C;;AAED,MAAM,QAAQ,GAAG,EAAE,CAAC;;AAEpB,sBAAE,OAAO,CAAC,MAAM,EAAE,UAAU,KAAK,EAAE;AACjC,QAAI,OAAO,YAAA,CAAC;;AAEZ,QAAI,KAAK,CAAC,IAAI,KAAK,QAAQ,EAAE;AAC3B,aAAO,GAAG;AACR,YAAI,EAAE,MAAM;AACZ,cAAM,EAAE;AACN,iBAAO,EAAE,EAAC,IAAI,EAAE,SAAS,EAAE,YAAY,EAAE,GAAG,EAAC;SAC9C;OACF,CAAC;KACH,MACI;AACH,UAAM,SAAS,GAAG,KAAK,CAAC,IAAI,KAAK,QAAQ,GAAG,QAAQ,GAAG,KAAK,CAAC,IAAI,CAAC;AAClE,aAAO,GAAG;AACR,YAAI,EAAE,SAAS;AACf,aAAK,EAAE,IAAI;AACX,kBAAU,EAAE,IAAI;OACjB,CAAC;KACH;;AAED,wBAAE,GAAG,CAAC,QAAQ,EAAE,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,EAAE,OAAO,CAAC,CAAC;GACtE,CAAC,CAAC;;AAEH,SAAO,QAAQ,CAAC;CACjB,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/lib/create_mappings_from_pattern_fields.js",
      "sourcesContent": [
        "import _ from 'lodash';\n\n// Creates an ES field mapping from a single field object in a kibana index pattern\nmodule.exports = function createMappingsFromPatternFields(fields) {\n  if (_.isEmpty(fields)) {\n    throw new Error('argument must not be empty');\n  }\n\n  const mappings = {};\n\n  _.forEach(fields, function (field) {\n    let mapping;\n\n    if (field.type === 'string') {\n      mapping = {\n        type: 'text',\n        fields: {\n          keyword: {type: 'keyword', ignore_above: 256}\n        }\n      };\n    }\n    else {\n      const fieldType = field.type === 'number' ? 'double' : field.type;\n      mapping = {\n        type: fieldType,\n        index: true,\n        doc_values: true\n      };\n    }\n\n    _.set(mappings, field.name.split('.').join('.properties.'), mapping);\n  });\n\n  return mappings;\n};\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/lib/init_default_field_props.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "./mapping_overrides",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "mappingOverrides"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _mapping_overrides = require('./mapping_overrides');\n\nvar _mapping_overrides2 = _interopRequireDefault(_mapping_overrides);\n\nmodule.exports = function initDefaultFieldProps(fields) {\n  if (fields === undefined || !_lodash2['default'].isArray(fields)) {\n    throw new Error('requires an array argument');\n  }\n\n  var results = [];\n\n  _lodash2['default'].forEach(fields, function (field) {\n    var newField = _lodash2['default'].cloneDeep(field);\n    results.push(newField);\n\n    if (newField.type === 'string') {\n      _lodash2['default'].defaults(newField, {\n        indexed: true,\n        analyzed: true,\n        doc_values: false,\n        scripted: false,\n        count: 0\n      });\n\n      results.push({\n        name: newField.name + '.keyword',\n        type: 'string',\n        indexed: true,\n        analyzed: false,\n        doc_values: true,\n        scripted: false,\n        count: 0\n      });\n    } else {\n      _lodash2['default'].defaults(newField, {\n        indexed: true,\n        analyzed: false,\n        doc_values: true,\n        scripted: false,\n        count: 0\n      });\n    }\n\n    if (_mapping_overrides2['default'][newField.name]) {\n      _lodash2['default'].assign(newField, _mapping_overrides2['default'][newField.name]);\n    }\n  });\n\n  return results;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvaW5pdF9kZWZhdWx0X2ZpZWxkX3Byb3BzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7c0JBQWMsUUFBUTs7OztpQ0FDTyxxQkFBcUI7Ozs7QUFFbEQsTUFBTSxDQUFDLE9BQU8sR0FBRyxTQUFTLHFCQUFxQixDQUFDLE1BQU0sRUFBRTtBQUN0RCxNQUFJLE1BQU0sS0FBSyxTQUFTLElBQUksQ0FBQyxvQkFBRSxPQUFPLENBQUMsTUFBTSxDQUFDLEVBQUU7QUFDOUMsVUFBTSxJQUFJLEtBQUssQ0FBQyw0QkFBNEIsQ0FBQyxDQUFDO0dBQy9DOztBQUVELE1BQU0sT0FBTyxHQUFHLEVBQUUsQ0FBQzs7QUFFbkIsc0JBQUUsT0FBTyxDQUFDLE1BQU0sRUFBRSxVQUFVLEtBQUssRUFBRTtBQUNqQyxRQUFNLFFBQVEsR0FBRyxvQkFBRSxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDcEMsV0FBTyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQzs7QUFFdkIsUUFBSSxRQUFRLENBQUMsSUFBSSxLQUFLLFFBQVEsRUFBRTtBQUM5QiwwQkFBRSxRQUFRLENBQUMsUUFBUSxFQUFFO0FBQ25CLGVBQU8sRUFBRSxJQUFJO0FBQ2IsZ0JBQVEsRUFBRSxJQUFJO0FBQ2Qsa0JBQVUsRUFBRSxLQUFLO0FBQ2pCLGdCQUFRLEVBQUUsS0FBSztBQUNmLGFBQUssRUFBRSxDQUFDO09BQ1QsQ0FBQyxDQUFDOztBQUVILGFBQU8sQ0FBQyxJQUFJLENBQUM7QUFDWCxZQUFJLEVBQUUsUUFBUSxDQUFDLElBQUksR0FBRyxVQUFVO0FBQ2hDLFlBQUksRUFBRSxRQUFRO0FBQ2QsZUFBTyxFQUFFLElBQUk7QUFDYixnQkFBUSxFQUFFLEtBQUs7QUFDZixrQkFBVSxFQUFFLElBQUk7QUFDaEIsZ0JBQVEsRUFBRSxLQUFLO0FBQ2YsYUFBSyxFQUFFLENBQUM7T0FDVCxDQUFDLENBQUM7S0FDSixNQUNJO0FBQ0gsMEJBQUUsUUFBUSxDQUFDLFFBQVEsRUFBRTtBQUNuQixlQUFPLEVBQUUsSUFBSTtBQUNiLGdCQUFRLEVBQUUsS0FBSztBQUNmLGtCQUFVLEVBQUUsSUFBSTtBQUNoQixnQkFBUSxFQUFFLEtBQUs7QUFDZixhQUFLLEVBQUUsQ0FBQztPQUNULENBQUMsQ0FBQztLQUNKOztBQUVELFFBQUksK0JBQWlCLFFBQVEsQ0FBQyxJQUFJLENBQUMsRUFBRTtBQUNuQywwQkFBRSxNQUFNLENBQUMsUUFBUSxFQUFFLCtCQUFpQixRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztLQUNyRDtHQUNGLENBQUMsQ0FBQzs7QUFFSCxTQUFPLE9BQU8sQ0FBQztDQUNoQixDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvaW5pdF9kZWZhdWx0X2ZpZWxkX3Byb3BzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBtYXBwaW5nT3ZlcnJpZGVzIGZyb20gJy4vbWFwcGluZ19vdmVycmlkZXMnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluaXREZWZhdWx0RmllbGRQcm9wcyhmaWVsZHMpIHtcbiAgaWYgKGZpZWxkcyA9PT0gdW5kZWZpbmVkIHx8ICFfLmlzQXJyYXkoZmllbGRzKSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncmVxdWlyZXMgYW4gYXJyYXkgYXJndW1lbnQnKTtcbiAgfVxuXG4gIGNvbnN0IHJlc3VsdHMgPSBbXTtcblxuICBfLmZvckVhY2goZmllbGRzLCBmdW5jdGlvbiAoZmllbGQpIHtcbiAgICBjb25zdCBuZXdGaWVsZCA9IF8uY2xvbmVEZWVwKGZpZWxkKTtcbiAgICByZXN1bHRzLnB1c2gobmV3RmllbGQpO1xuXG4gICAgaWYgKG5ld0ZpZWxkLnR5cGUgPT09ICdzdHJpbmcnKSB7XG4gICAgICBfLmRlZmF1bHRzKG5ld0ZpZWxkLCB7XG4gICAgICAgIGluZGV4ZWQ6IHRydWUsXG4gICAgICAgIGFuYWx5emVkOiB0cnVlLFxuICAgICAgICBkb2NfdmFsdWVzOiBmYWxzZSxcbiAgICAgICAgc2NyaXB0ZWQ6IGZhbHNlLFxuICAgICAgICBjb3VudDogMFxuICAgICAgfSk7XG5cbiAgICAgIHJlc3VsdHMucHVzaCh7XG4gICAgICAgIG5hbWU6IG5ld0ZpZWxkLm5hbWUgKyAnLmtleXdvcmQnLFxuICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgaW5kZXhlZDogdHJ1ZSxcbiAgICAgICAgYW5hbHl6ZWQ6IGZhbHNlLFxuICAgICAgICBkb2NfdmFsdWVzOiB0cnVlLFxuICAgICAgICBzY3JpcHRlZDogZmFsc2UsXG4gICAgICAgIGNvdW50OiAwXG4gICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBfLmRlZmF1bHRzKG5ld0ZpZWxkLCB7XG4gICAgICAgIGluZGV4ZWQ6IHRydWUsXG4gICAgICAgIGFuYWx5emVkOiBmYWxzZSxcbiAgICAgICAgZG9jX3ZhbHVlczogdHJ1ZSxcbiAgICAgICAgc2NyaXB0ZWQ6IGZhbHNlLFxuICAgICAgICBjb3VudDogMFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKG1hcHBpbmdPdmVycmlkZXNbbmV3RmllbGQubmFtZV0pIHtcbiAgICAgIF8uYXNzaWduKG5ld0ZpZWxkLCBtYXBwaW5nT3ZlcnJpZGVzW25ld0ZpZWxkLm5hbWVdKTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiByZXN1bHRzO1xufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/lib/init_default_field_props.js"
      ],
      "names": [],
      "mappings": ";;;;sBAAc,QAAQ;;;;iCACO,qBAAqB;;;;AAElD,MAAM,CAAC,OAAO,GAAG,SAAS,qBAAqB,CAAC,MAAM,EAAE;AACtD,MAAI,MAAM,KAAK,SAAS,IAAI,CAAC,oBAAE,OAAO,CAAC,MAAM,CAAC,EAAE;AAC9C,UAAM,IAAI,KAAK,CAAC,4BAA4B,CAAC,CAAC;GAC/C;;AAED,MAAM,OAAO,GAAG,EAAE,CAAC;;AAEnB,sBAAE,OAAO,CAAC,MAAM,EAAE,UAAU,KAAK,EAAE;AACjC,QAAM,QAAQ,GAAG,oBAAE,SAAS,CAAC,KAAK,CAAC,CAAC;AACpC,WAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;;AAEvB,QAAI,QAAQ,CAAC,IAAI,KAAK,QAAQ,EAAE;AAC9B,0BAAE,QAAQ,CAAC,QAAQ,EAAE;AACnB,eAAO,EAAE,IAAI;AACb,gBAAQ,EAAE,IAAI;AACd,kBAAU,EAAE,KAAK;AACjB,gBAAQ,EAAE,KAAK;AACf,aAAK,EAAE,CAAC;OACT,CAAC,CAAC;;AAEH,aAAO,CAAC,IAAI,CAAC;AACX,YAAI,EAAE,QAAQ,CAAC,IAAI,GAAG,UAAU;AAChC,YAAI,EAAE,QAAQ;AACd,eAAO,EAAE,IAAI;AACb,gBAAQ,EAAE,KAAK;AACf,kBAAU,EAAE,IAAI;AAChB,gBAAQ,EAAE,KAAK;AACf,aAAK,EAAE,CAAC;OACT,CAAC,CAAC;KACJ,MACI;AACH,0BAAE,QAAQ,CAAC,QAAQ,EAAE;AACnB,eAAO,EAAE,IAAI;AACb,gBAAQ,EAAE,KAAK;AACf,kBAAU,EAAE,IAAI;AAChB,gBAAQ,EAAE,KAAK;AACf,aAAK,EAAE,CAAC;OACT,CAAC,CAAC;KACJ;;AAED,QAAI,+BAAiB,QAAQ,CAAC,IAAI,CAAC,EAAE;AACnC,0BAAE,MAAM,CAAC,QAAQ,EAAE,+BAAiB,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;KACrD;GACF,CAAC,CAAC;;AAEH,SAAO,OAAO,CAAC;CAChB,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/lib/init_default_field_props.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport mappingOverrides from './mapping_overrides';\n\nmodule.exports = function initDefaultFieldProps(fields) {\n  if (fields === undefined || !_.isArray(fields)) {\n    throw new Error('requires an array argument');\n  }\n\n  const results = [];\n\n  _.forEach(fields, function (field) {\n    const newField = _.cloneDeep(field);\n    results.push(newField);\n\n    if (newField.type === 'string') {\n      _.defaults(newField, {\n        indexed: true,\n        analyzed: true,\n        doc_values: false,\n        scripted: false,\n        count: 0\n      });\n\n      results.push({\n        name: newField.name + '.keyword',\n        type: 'string',\n        indexed: true,\n        analyzed: false,\n        doc_values: true,\n        scripted: false,\n        count: 0\n      });\n    }\n    else {\n      _.defaults(newField, {\n        indexed: true,\n        analyzed: false,\n        doc_values: true,\n        scripted: false,\n        count: 0\n      });\n    }\n\n    if (mappingOverrides[newField.name]) {\n      _.assign(newField, mappingOverrides[newField.name]);\n    }\n  });\n\n  return results;\n};\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/lib/mapping_overrides.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = {\n  _source: {\n    type: '_source',\n    indexed: false,\n    analyzed: false,\n    doc_values: false\n  },\n  _index: {\n    type: 'string',\n    indexed: false,\n    analyzed: false,\n    doc_values: false\n  },\n  _type: {\n    type: 'string',\n    indexed: false,\n    analyzed: false,\n    doc_values: false\n  },\n  _id: {\n    type: 'string',\n    indexed: false,\n    analyzed: false,\n    doc_values: false\n  },\n  _timestamp: {\n    type: 'date',\n    indexed: true,\n    analyzed: false,\n    doc_values: false\n  },\n  _score: {\n    type: 'number',\n    indexed: false,\n    analyzed: false,\n    doc_values: false\n  }\n};\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvbWFwcGluZ19vdmVycmlkZXMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7cUJBQWU7QUFDYixTQUFPLEVBQUU7QUFDUCxRQUFJLEVBQUUsU0FBUztBQUNmLFdBQU8sRUFBRSxLQUFLO0FBQ2QsWUFBUSxFQUFFLEtBQUs7QUFDZixjQUFVLEVBQUUsS0FBSztHQUNsQjtBQUNELFFBQU0sRUFBRTtBQUNOLFFBQUksRUFBRSxRQUFRO0FBQ2QsV0FBTyxFQUFFLEtBQUs7QUFDZCxZQUFRLEVBQUUsS0FBSztBQUNmLGNBQVUsRUFBRSxLQUFLO0dBQ2xCO0FBQ0QsT0FBSyxFQUFFO0FBQ0wsUUFBSSxFQUFFLFFBQVE7QUFDZCxXQUFPLEVBQUUsS0FBSztBQUNkLFlBQVEsRUFBRSxLQUFLO0FBQ2YsY0FBVSxFQUFFLEtBQUs7R0FDbEI7QUFDRCxLQUFHLEVBQUU7QUFDSCxRQUFJLEVBQUUsUUFBUTtBQUNkLFdBQU8sRUFBRSxLQUFLO0FBQ2QsWUFBUSxFQUFFLEtBQUs7QUFDZixjQUFVLEVBQUUsS0FBSztHQUNsQjtBQUNELFlBQVUsRUFBRTtBQUNWLFFBQUksRUFBRSxNQUFNO0FBQ1osV0FBTyxFQUFFLElBQUk7QUFDYixZQUFRLEVBQUUsS0FBSztBQUNmLGNBQVUsRUFBRSxLQUFLO0dBQ2xCO0FBQ0QsUUFBTSxFQUFFO0FBQ04sUUFBSSxFQUFFLFFBQVE7QUFDZCxXQUFPLEVBQUUsS0FBSztBQUNkLFlBQVEsRUFBRSxLQUFLO0FBQ2YsY0FBVSxFQUFFLEtBQUs7R0FDbEI7Q0FDRiIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9wbHVnaW5zL2tpYmFuYS9zZXJ2ZXIvbGliL21hcHBpbmdfb3ZlcnJpZGVzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQge1xuICBfc291cmNlOiB7XG4gICAgdHlwZTogJ19zb3VyY2UnLFxuICAgIGluZGV4ZWQ6IGZhbHNlLFxuICAgIGFuYWx5emVkOiBmYWxzZSxcbiAgICBkb2NfdmFsdWVzOiBmYWxzZVxuICB9LFxuICBfaW5kZXg6IHtcbiAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICBpbmRleGVkOiBmYWxzZSxcbiAgICBhbmFseXplZDogZmFsc2UsXG4gICAgZG9jX3ZhbHVlczogZmFsc2VcbiAgfSxcbiAgX3R5cGU6IHtcbiAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICBpbmRleGVkOiBmYWxzZSxcbiAgICBhbmFseXplZDogZmFsc2UsXG4gICAgZG9jX3ZhbHVlczogZmFsc2VcbiAgfSxcbiAgX2lkOiB7XG4gICAgdHlwZTogJ3N0cmluZycsXG4gICAgaW5kZXhlZDogZmFsc2UsXG4gICAgYW5hbHl6ZWQ6IGZhbHNlLFxuICAgIGRvY192YWx1ZXM6IGZhbHNlXG4gIH0sXG4gIF90aW1lc3RhbXA6IHtcbiAgICB0eXBlOiAnZGF0ZScsXG4gICAgaW5kZXhlZDogdHJ1ZSxcbiAgICBhbmFseXplZDogZmFsc2UsXG4gICAgZG9jX3ZhbHVlczogZmFsc2VcbiAgfSxcbiAgX3Njb3JlOiB7XG4gICAgdHlwZTogJ251bWJlcicsXG4gICAgaW5kZXhlZDogZmFsc2UsXG4gICAgYW5hbHl6ZWQ6IGZhbHNlLFxuICAgIGRvY192YWx1ZXM6IGZhbHNlXG4gIH1cbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/lib/mapping_overrides.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAAe;AACb,SAAO,EAAE;AACP,QAAI,EAAE,SAAS;AACf,WAAO,EAAE,KAAK;AACd,YAAQ,EAAE,KAAK;AACf,cAAU,EAAE,KAAK;GAClB;AACD,QAAM,EAAE;AACN,QAAI,EAAE,QAAQ;AACd,WAAO,EAAE,KAAK;AACd,YAAQ,EAAE,KAAK;AACf,cAAU,EAAE,KAAK;GAClB;AACD,OAAK,EAAE;AACL,QAAI,EAAE,QAAQ;AACd,WAAO,EAAE,KAAK;AACd,YAAQ,EAAE,KAAK;AACf,cAAU,EAAE,KAAK;GAClB;AACD,KAAG,EAAE;AACH,QAAI,EAAE,QAAQ;AACd,WAAO,EAAE,KAAK;AACd,YAAQ,EAAE,KAAK;AACf,cAAU,EAAE,KAAK;GAClB;AACD,YAAU,EAAE;AACV,QAAI,EAAE,MAAM;AACZ,WAAO,EAAE,IAAI;AACb,YAAQ,EAAE,KAAK;AACf,cAAU,EAAE,KAAK;GAClB;AACD,QAAM,EAAE;AACN,QAAI,EAAE,QAAQ;AACd,WAAO,EAAE,KAAK;AACd,YAAQ,EAAE,KAAK;AACf,cAAU,EAAE,KAAK;GAClB;CACF",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/lib/mapping_overrides.js",
      "sourcesContent": [
        "export default {\n  _source: {\n    type: '_source',\n    indexed: false,\n    analyzed: false,\n    doc_values: false\n  },\n  _index: {\n    type: 'string',\n    indexed: false,\n    analyzed: false,\n    doc_values: false\n  },\n  _type: {\n    type: 'string',\n    indexed: false,\n    analyzed: false,\n    doc_values: false\n  },\n  _id: {\n    type: 'string',\n    indexed: false,\n    analyzed: false,\n    doc_values: false\n  },\n  _timestamp: {\n    type: 'date',\n    indexed: true,\n    analyzed: false,\n    doc_values: false\n  },\n  _score: {\n    type: 'number',\n    indexed: false,\n    analyzed: false,\n    doc_values: false\n  }\n};\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/common/lib/convert_pattern_and_ingest_name.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "// To avoid index template naming collisions the index pattern creation API\n// namespaces template names by prepending 'kibana-' to the matching pattern's title.\n// e.g. a pattern with title `logstash-*` will have a matching template named `kibana-logstash-*`.\n// This module provides utility functions for easily converting between template and pattern names.\n\n'use strict';\n\nmodule.exports = {\n  ingestToPattern: function ingestToPattern(templateName) {\n    if (templateName.indexOf('kibana-') === -1) {\n      throw new Error('not a valid kibana namespaced template name');\n    }\n\n    return templateName.slice(templateName.indexOf('-') + 1);\n  },\n\n  patternToIngest: function patternToIngest(patternName) {\n    if (patternName === '') {\n      throw new Error('pattern must not be empty');\n    }\n\n    return 'kibana-' + patternName.toLowerCase();\n  }\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL2NvbW1vbi9saWIvY29udmVydF9wYXR0ZXJuX2FuZF9pbmdlc3RfbmFtZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBS0EsTUFBTSxDQUFDLE9BQU8sR0FBRztBQUNmLGlCQUFlLEVBQUUseUJBQUMsWUFBWSxFQUFLO0FBQ2pDLFFBQUksWUFBWSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRTtBQUMxQyxZQUFNLElBQUksS0FBSyxDQUFDLDZDQUE2QyxDQUFDLENBQUM7S0FDaEU7O0FBRUQsV0FBTyxZQUFZLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7R0FDMUQ7O0FBRUQsaUJBQWUsRUFBRSx5QkFBQyxXQUFXLEVBQUs7QUFDaEMsUUFBSSxXQUFXLEtBQUssRUFBRSxFQUFFO0FBQ3RCLFlBQU0sSUFBSSxLQUFLLENBQUMsMkJBQTJCLENBQUMsQ0FBQztLQUM5Qzs7QUFFRCx1QkFBaUIsV0FBVyxDQUFDLFdBQVcsRUFBRSxDQUFHO0dBQzlDO0NBQ0YsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9wbHVnaW5zL2tpYmFuYS9jb21tb24vbGliL2NvbnZlcnRfcGF0dGVybl9hbmRfaW5nZXN0X25hbWUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUbyBhdm9pZCBpbmRleCB0ZW1wbGF0ZSBuYW1pbmcgY29sbGlzaW9ucyB0aGUgaW5kZXggcGF0dGVybiBjcmVhdGlvbiBBUElcbi8vIG5hbWVzcGFjZXMgdGVtcGxhdGUgbmFtZXMgYnkgcHJlcGVuZGluZyAna2liYW5hLScgdG8gdGhlIG1hdGNoaW5nIHBhdHRlcm4ncyB0aXRsZS5cbi8vIGUuZy4gYSBwYXR0ZXJuIHdpdGggdGl0bGUgYGxvZ3N0YXNoLSpgIHdpbGwgaGF2ZSBhIG1hdGNoaW5nIHRlbXBsYXRlIG5hbWVkIGBraWJhbmEtbG9nc3Rhc2gtKmAuXG4vLyBUaGlzIG1vZHVsZSBwcm92aWRlcyB1dGlsaXR5IGZ1bmN0aW9ucyBmb3IgZWFzaWx5IGNvbnZlcnRpbmcgYmV0d2VlbiB0ZW1wbGF0ZSBhbmQgcGF0dGVybiBuYW1lcy5cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGluZ2VzdFRvUGF0dGVybjogKHRlbXBsYXRlTmFtZSkgPT4ge1xuICAgIGlmICh0ZW1wbGF0ZU5hbWUuaW5kZXhPZigna2liYW5hLScpID09PSAtMSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdub3QgYSB2YWxpZCBraWJhbmEgbmFtZXNwYWNlZCB0ZW1wbGF0ZSBuYW1lJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRlbXBsYXRlTmFtZS5zbGljZSh0ZW1wbGF0ZU5hbWUuaW5kZXhPZignLScpICsgMSk7XG4gIH0sXG5cbiAgcGF0dGVyblRvSW5nZXN0OiAocGF0dGVybk5hbWUpID0+IHtcbiAgICBpZiAocGF0dGVybk5hbWUgPT09ICcnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ3BhdHRlcm4gbXVzdCBub3QgYmUgZW1wdHknKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYGtpYmFuYS0ke3BhdHRlcm5OYW1lLnRvTG93ZXJDYXNlKCl9YDtcbiAgfVxufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/common/lib/convert_pattern_and_ingest_name.js"
      ],
      "names": [],
      "mappings": ";;;;;;;AAKA,MAAM,CAAC,OAAO,GAAG;AACf,iBAAe,EAAE,yBAAC,YAAY,EAAK;AACjC,QAAI,YAAY,CAAC,OAAO,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,EAAE;AAC1C,YAAM,IAAI,KAAK,CAAC,6CAA6C,CAAC,CAAC;KAChE;;AAED,WAAO,YAAY,CAAC,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;GAC1D;;AAED,iBAAe,EAAE,yBAAC,WAAW,EAAK;AAChC,QAAI,WAAW,KAAK,EAAE,EAAE;AACtB,YAAM,IAAI,KAAK,CAAC,2BAA2B,CAAC,CAAC;KAC9C;;AAED,uBAAiB,WAAW,CAAC,WAAW,EAAE,CAAG;GAC9C;CACF,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/kibana/common/lib/convert_pattern_and_ingest_name.js",
      "sourcesContent": [
        "// To avoid index template naming collisions the index pattern creation API\n// namespaces template names by prepending 'kibana-' to the matching pattern's title.\n// e.g. a pattern with title `logstash-*` will have a matching template named `kibana-logstash-*`.\n// This module provides utility functions for easily converting between template and pattern names.\n\nmodule.exports = {\n  ingestToPattern: (templateName) => {\n    if (templateName.indexOf('kibana-') === -1) {\n      throw new Error('not a valid kibana namespaced template name');\n    }\n\n    return templateName.slice(templateName.indexOf('-') + 1);\n  },\n\n  patternToIngest: (patternName) => {\n    if (patternName === '') {\n      throw new Error('pattern must not be empty');\n    }\n\n    return `kibana-${patternName.toLowerCase()}`;\n  }\n};\n"
      ]
    },
    "mtime": 1467036622821
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/common/lib/case_conversion.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nmodule.exports = {\n  keysToSnakeCaseShallow: function keysToSnakeCaseShallow(object) {\n    return _lodash2['default'].mapKeys(object, function (value, key) {\n      return _lodash2['default'].snakeCase(key);\n    });\n  },\n\n  keysToCamelCaseShallow: function keysToCamelCaseShallow(object) {\n    return _lodash2['default'].mapKeys(object, function (value, key) {\n      return _lodash2['default'].camelCase(key);\n    });\n  }\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL2NvbW1vbi9saWIvY2FzZV9jb252ZXJzaW9uLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7c0JBQWMsUUFBUTs7OztBQUV0QixNQUFNLENBQUMsT0FBTyxHQUFHO0FBQ2Ysd0JBQXNCLEVBQUUsZ0NBQVUsTUFBTSxFQUFFO0FBQ3hDLFdBQU8sb0JBQUUsT0FBTyxDQUFDLE1BQU0sRUFBRSxVQUFDLEtBQUssRUFBRSxHQUFHLEVBQUs7QUFDdkMsYUFBTyxvQkFBRSxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUM7S0FDekIsQ0FBQyxDQUFDO0dBQ0o7O0FBRUQsd0JBQXNCLEVBQUUsZ0NBQVUsTUFBTSxFQUFFO0FBQ3hDLFdBQU8sb0JBQUUsT0FBTyxDQUFDLE1BQU0sRUFBRSxVQUFDLEtBQUssRUFBRSxHQUFHLEVBQUs7QUFDdkMsYUFBTyxvQkFBRSxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUM7S0FDekIsQ0FBQyxDQUFDO0dBQ0o7Q0FDRixDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL2NvbW1vbi9saWIvY2FzZV9jb252ZXJzaW9uLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGtleXNUb1NuYWtlQ2FzZVNoYWxsb3c6IGZ1bmN0aW9uIChvYmplY3QpIHtcbiAgICByZXR1cm4gXy5tYXBLZXlzKG9iamVjdCwgKHZhbHVlLCBrZXkpID0+IHtcbiAgICAgIHJldHVybiBfLnNuYWtlQ2FzZShrZXkpO1xuICAgIH0pO1xuICB9LFxuXG4gIGtleXNUb0NhbWVsQ2FzZVNoYWxsb3c6IGZ1bmN0aW9uIChvYmplY3QpIHtcbiAgICByZXR1cm4gXy5tYXBLZXlzKG9iamVjdCwgKHZhbHVlLCBrZXkpID0+IHtcbiAgICAgIHJldHVybiBfLmNhbWVsQ2FzZShrZXkpO1xuICAgIH0pO1xuICB9XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/common/lib/case_conversion.js"
      ],
      "names": [],
      "mappings": ";;;;sBAAc,QAAQ;;;;AAEtB,MAAM,CAAC,OAAO,GAAG;AACf,wBAAsB,EAAE,gCAAU,MAAM,EAAE;AACxC,WAAO,oBAAE,OAAO,CAAC,MAAM,EAAE,UAAC,KAAK,EAAE,GAAG,EAAK;AACvC,aAAO,oBAAE,SAAS,CAAC,GAAG,CAAC,CAAC;KACzB,CAAC,CAAC;GACJ;;AAED,wBAAsB,EAAE,gCAAU,MAAM,EAAE;AACxC,WAAO,oBAAE,OAAO,CAAC,MAAM,EAAE,UAAC,KAAK,EAAE,GAAG,EAAK;AACvC,aAAO,oBAAE,SAAS,CAAC,GAAG,CAAC,CAAC;KACzB,CAAC,CAAC;GACJ;CACF,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/kibana/common/lib/case_conversion.js",
      "sourcesContent": [
        "import _ from 'lodash';\n\nmodule.exports = {\n  keysToSnakeCaseShallow: function (object) {\n    return _.mapKeys(object, (value, key) => {\n      return _.snakeCase(key);\n    });\n  },\n\n  keysToCamelCaseShallow: function (object) {\n    return _.mapKeys(object, (value, key) => {\n      return _.camelCase(key);\n    });\n  }\n};\n"
      ]
    },
    "mtime": 1467036622821
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/lib/converters/ingest_pipeline_api_kibana_to_es_converter.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "../processors/converters",
            "imported": [
              "*"
            ],
            "specifiers": [
              {
                "kind": "namespace",
                "local": "ingestProcessorApiKibanaToEsConverters"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "ingestPipelineApiKibanaToEsConverter",
            "pipelineApiDocument"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "ingestPipelineApiKibanaToEsConverter",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "pipelineApiDocument",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default",
        "interop-require-wildcard"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = ingestPipelineApiKibanaToEsConverter;\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _processorsConverters = require('../processors/converters');\n\nvar ingestProcessorApiKibanaToEsConverters = _interopRequireWildcard(_processorsConverters);\n\nfunction ingestPipelineApiKibanaToEsConverter(pipelineApiDocument) {\n  return {\n    processors: _lodash2['default'].map(pipelineApiDocument, function (processor) {\n      return ingestProcessorApiKibanaToEsConverters[processor.type_id](processor);\n    })\n  };\n}\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvY29udmVydGVycy9pbmdlc3RfcGlwZWxpbmVfYXBpX2tpYmFuYV90b19lc19jb252ZXJ0ZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7cUJBR3dCLG9DQUFvQzs7Ozs7O3NCQUg5QyxRQUFROzs7O29DQUNrQywwQkFBMEI7O0lBQXRFLHNDQUFzQzs7QUFFbkMsU0FBUyxvQ0FBb0MsQ0FBQyxtQkFBbUIsRUFBRTtBQUNoRixTQUFPO0FBQ0wsY0FBVSxFQUFFLG9CQUFFLEdBQUcsQ0FBQyxtQkFBbUIsRUFBRSxVQUFDLFNBQVMsRUFBSztBQUNwRCxhQUFPLHNDQUFzQyxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQztLQUM3RSxDQUFDO0dBQ0gsQ0FBQztDQUNIIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvY29udmVydGVycy9pbmdlc3RfcGlwZWxpbmVfYXBpX2tpYmFuYV90b19lc19jb252ZXJ0ZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0ICogYXMgaW5nZXN0UHJvY2Vzc29yQXBpS2liYW5hVG9Fc0NvbnZlcnRlcnMgZnJvbSAnLi4vcHJvY2Vzc29ycy9jb252ZXJ0ZXJzJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaW5nZXN0UGlwZWxpbmVBcGlLaWJhbmFUb0VzQ29udmVydGVyKHBpcGVsaW5lQXBpRG9jdW1lbnQpIHtcbiAgcmV0dXJuIHtcbiAgICBwcm9jZXNzb3JzOiBfLm1hcChwaXBlbGluZUFwaURvY3VtZW50LCAocHJvY2Vzc29yKSA9PiB7XG4gICAgICByZXR1cm4gaW5nZXN0UHJvY2Vzc29yQXBpS2liYW5hVG9Fc0NvbnZlcnRlcnNbcHJvY2Vzc29yLnR5cGVfaWRdKHByb2Nlc3Nvcik7XG4gICAgfSlcbiAgfTtcbn1cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/lib/converters/ingest_pipeline_api_kibana_to_es_converter.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAGwB,oCAAoC;;;;;;sBAH9C,QAAQ;;;;oCACkC,0BAA0B;;IAAtE,sCAAsC;;AAEnC,SAAS,oCAAoC,CAAC,mBAAmB,EAAE;AAChF,SAAO;AACL,cAAU,EAAE,oBAAE,GAAG,CAAC,mBAAmB,EAAE,UAAC,SAAS,EAAK;AACpD,aAAO,sCAAsC,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,SAAS,CAAC,CAAC;KAC7E,CAAC;GACH,CAAC;CACH",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/lib/converters/ingest_pipeline_api_kibana_to_es_converter.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport * as ingestProcessorApiKibanaToEsConverters from '../processors/converters';\n\nexport default function ingestPipelineApiKibanaToEsConverter(pipelineApiDocument) {\n  return {\n    processors: _.map(pipelineApiDocument, (processor) => {\n      return ingestProcessorApiKibanaToEsConverters[processor.type_id](processor);\n    })\n  };\n}\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/converters.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "append",
            "convert",
            "date",
            "geoip",
            "grok",
            "gsub",
            "join",
            "lowercase",
            "remove",
            "rename",
            "set",
            "split",
            "trim",
            "uppercase"
          ],
          "specifiers": [
            {
              "kind": "external",
              "local": "append",
              "exported": "append",
              "source": "../processors/append/kibana_to_es_converter"
            },
            {
              "kind": "external",
              "local": "convert",
              "exported": "convert",
              "source": "../processors/convert/kibana_to_es_converter"
            },
            {
              "kind": "external",
              "local": "date",
              "exported": "date",
              "source": "../processors/date/kibana_to_es_converter"
            },
            {
              "kind": "external",
              "local": "geoip",
              "exported": "geoip",
              "source": "../processors/geoip/kibana_to_es_converter"
            },
            {
              "kind": "external",
              "local": "grok",
              "exported": "grok",
              "source": "../processors/grok/kibana_to_es_converter"
            },
            {
              "kind": "external",
              "local": "gsub",
              "exported": "gsub",
              "source": "../processors/gsub/kibana_to_es_converter"
            },
            {
              "kind": "external",
              "local": "join",
              "exported": "join",
              "source": "../processors/join/kibana_to_es_converter"
            },
            {
              "kind": "external",
              "local": "lowercase",
              "exported": "lowercase",
              "source": "../processors/lowercase/kibana_to_es_converter"
            },
            {
              "kind": "external",
              "local": "remove",
              "exported": "remove",
              "source": "../processors/remove/kibana_to_es_converter"
            },
            {
              "kind": "external",
              "local": "rename",
              "exported": "rename",
              "source": "../processors/rename/kibana_to_es_converter"
            },
            {
              "kind": "external",
              "local": "set",
              "exported": "set",
              "source": "../processors/set/kibana_to_es_converter"
            },
            {
              "kind": "external",
              "local": "split",
              "exported": "split",
              "source": "../processors/split/kibana_to_es_converter"
            },
            {
              "kind": "external",
              "local": "trim",
              "exported": "trim",
              "source": "../processors/trim/kibana_to_es_converter"
            },
            {
              "kind": "external",
              "local": "uppercase",
              "exported": "uppercase",
              "source": "../processors/uppercase/kibana_to_es_converter"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _processorsAppendKibana_to_es_converter = require('../processors/append/kibana_to_es_converter');\n\nvar _processorsAppendKibana_to_es_converter2 = _interopRequireDefault(_processorsAppendKibana_to_es_converter);\n\nexports.append = _processorsAppendKibana_to_es_converter2['default'];\n\nvar _processorsConvertKibana_to_es_converter = require('../processors/convert/kibana_to_es_converter');\n\nvar _processorsConvertKibana_to_es_converter2 = _interopRequireDefault(_processorsConvertKibana_to_es_converter);\n\nexports.convert = _processorsConvertKibana_to_es_converter2['default'];\n\nvar _processorsDateKibana_to_es_converter = require('../processors/date/kibana_to_es_converter');\n\nvar _processorsDateKibana_to_es_converter2 = _interopRequireDefault(_processorsDateKibana_to_es_converter);\n\nexports.date = _processorsDateKibana_to_es_converter2['default'];\n\nvar _processorsGeoipKibana_to_es_converter = require('../processors/geoip/kibana_to_es_converter');\n\nvar _processorsGeoipKibana_to_es_converter2 = _interopRequireDefault(_processorsGeoipKibana_to_es_converter);\n\nexports.geoip = _processorsGeoipKibana_to_es_converter2['default'];\n\nvar _processorsGrokKibana_to_es_converter = require('../processors/grok/kibana_to_es_converter');\n\nvar _processorsGrokKibana_to_es_converter2 = _interopRequireDefault(_processorsGrokKibana_to_es_converter);\n\nexports.grok = _processorsGrokKibana_to_es_converter2['default'];\n\nvar _processorsGsubKibana_to_es_converter = require('../processors/gsub/kibana_to_es_converter');\n\nvar _processorsGsubKibana_to_es_converter2 = _interopRequireDefault(_processorsGsubKibana_to_es_converter);\n\nexports.gsub = _processorsGsubKibana_to_es_converter2['default'];\n\nvar _processorsJoinKibana_to_es_converter = require('../processors/join/kibana_to_es_converter');\n\nvar _processorsJoinKibana_to_es_converter2 = _interopRequireDefault(_processorsJoinKibana_to_es_converter);\n\nexports.join = _processorsJoinKibana_to_es_converter2['default'];\n\nvar _processorsLowercaseKibana_to_es_converter = require('../processors/lowercase/kibana_to_es_converter');\n\nvar _processorsLowercaseKibana_to_es_converter2 = _interopRequireDefault(_processorsLowercaseKibana_to_es_converter);\n\nexports.lowercase = _processorsLowercaseKibana_to_es_converter2['default'];\n\nvar _processorsRemoveKibana_to_es_converter = require('../processors/remove/kibana_to_es_converter');\n\nvar _processorsRemoveKibana_to_es_converter2 = _interopRequireDefault(_processorsRemoveKibana_to_es_converter);\n\nexports.remove = _processorsRemoveKibana_to_es_converter2['default'];\n\nvar _processorsRenameKibana_to_es_converter = require('../processors/rename/kibana_to_es_converter');\n\nvar _processorsRenameKibana_to_es_converter2 = _interopRequireDefault(_processorsRenameKibana_to_es_converter);\n\nexports.rename = _processorsRenameKibana_to_es_converter2['default'];\n\nvar _processorsSetKibana_to_es_converter = require('../processors/set/kibana_to_es_converter');\n\nvar _processorsSetKibana_to_es_converter2 = _interopRequireDefault(_processorsSetKibana_to_es_converter);\n\nexports.set = _processorsSetKibana_to_es_converter2['default'];\n\nvar _processorsSplitKibana_to_es_converter = require('../processors/split/kibana_to_es_converter');\n\nvar _processorsSplitKibana_to_es_converter2 = _interopRequireDefault(_processorsSplitKibana_to_es_converter);\n\nexports.split = _processorsSplitKibana_to_es_converter2['default'];\n\nvar _processorsTrimKibana_to_es_converter = require('../processors/trim/kibana_to_es_converter');\n\nvar _processorsTrimKibana_to_es_converter2 = _interopRequireDefault(_processorsTrimKibana_to_es_converter);\n\nexports.trim = _processorsTrimKibana_to_es_converter2['default'];\n\nvar _processorsUppercaseKibana_to_es_converter = require('../processors/uppercase/kibana_to_es_converter');\n\nvar _processorsUppercaseKibana_to_es_converter2 = _interopRequireDefault(_processorsUppercaseKibana_to_es_converter);\n\nexports.uppercase = _processorsUppercaseKibana_to_es_converter2['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvcHJvY2Vzc29ycy9jb252ZXJ0ZXJzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O3NEQUFtQiw2Q0FBNkM7Ozs7UUFBekQsTUFBTTs7dURBQ08sOENBQThDOzs7O1FBQTNELE9BQU87O29EQUNHLDJDQUEyQzs7OztRQUFyRCxJQUFJOztxREFDTyw0Q0FBNEM7Ozs7UUFBdkQsS0FBSzs7b0RBQ0ssMkNBQTJDOzs7O1FBQXJELElBQUk7O29EQUNNLDJDQUEyQzs7OztRQUFyRCxJQUFJOztvREFDTSwyQ0FBMkM7Ozs7UUFBckQsSUFBSTs7eURBQ1csZ0RBQWdEOzs7O1FBQS9ELFNBQVM7O3NEQUNHLDZDQUE2Qzs7OztRQUF6RCxNQUFNOztzREFDTSw2Q0FBNkM7Ozs7UUFBekQsTUFBTTs7bURBQ0csMENBQTBDOzs7O1FBQW5ELEdBQUc7O3FEQUNRLDRDQUE0Qzs7OztRQUF2RCxLQUFLOztvREFDSywyQ0FBMkM7Ozs7UUFBckQsSUFBSTs7eURBQ1csZ0RBQWdEOzs7O1FBQS9ELFNBQVMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvcGx1Z2lucy9raWJhbmEvc2VydmVyL2xpYi9wcm9jZXNzb3JzL2NvbnZlcnRlcnMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgYXBwZW5kIGZyb20gJy4uL3Byb2Nlc3NvcnMvYXBwZW5kL2tpYmFuYV90b19lc19jb252ZXJ0ZXInO1xuZXhwb3J0IGNvbnZlcnQgZnJvbSAnLi4vcHJvY2Vzc29ycy9jb252ZXJ0L2tpYmFuYV90b19lc19jb252ZXJ0ZXInO1xuZXhwb3J0IGRhdGUgZnJvbSAnLi4vcHJvY2Vzc29ycy9kYXRlL2tpYmFuYV90b19lc19jb252ZXJ0ZXInO1xuZXhwb3J0IGdlb2lwIGZyb20gJy4uL3Byb2Nlc3NvcnMvZ2VvaXAva2liYW5hX3RvX2VzX2NvbnZlcnRlcic7XG5leHBvcnQgZ3JvayBmcm9tICcuLi9wcm9jZXNzb3JzL2dyb2sva2liYW5hX3RvX2VzX2NvbnZlcnRlcic7XG5leHBvcnQgZ3N1YiBmcm9tICcuLi9wcm9jZXNzb3JzL2dzdWIva2liYW5hX3RvX2VzX2NvbnZlcnRlcic7XG5leHBvcnQgam9pbiBmcm9tICcuLi9wcm9jZXNzb3JzL2pvaW4va2liYW5hX3RvX2VzX2NvbnZlcnRlcic7XG5leHBvcnQgbG93ZXJjYXNlIGZyb20gJy4uL3Byb2Nlc3NvcnMvbG93ZXJjYXNlL2tpYmFuYV90b19lc19jb252ZXJ0ZXInO1xuZXhwb3J0IHJlbW92ZSBmcm9tICcuLi9wcm9jZXNzb3JzL3JlbW92ZS9raWJhbmFfdG9fZXNfY29udmVydGVyJztcbmV4cG9ydCByZW5hbWUgZnJvbSAnLi4vcHJvY2Vzc29ycy9yZW5hbWUva2liYW5hX3RvX2VzX2NvbnZlcnRlcic7XG5leHBvcnQgc2V0IGZyb20gJy4uL3Byb2Nlc3NvcnMvc2V0L2tpYmFuYV90b19lc19jb252ZXJ0ZXInO1xuZXhwb3J0IHNwbGl0IGZyb20gJy4uL3Byb2Nlc3NvcnMvc3BsaXQva2liYW5hX3RvX2VzX2NvbnZlcnRlcic7XG5leHBvcnQgdHJpbSBmcm9tICcuLi9wcm9jZXNzb3JzL3RyaW0va2liYW5hX3RvX2VzX2NvbnZlcnRlcic7XG5leHBvcnQgdXBwZXJjYXNlIGZyb20gJy4uL3Byb2Nlc3NvcnMvdXBwZXJjYXNlL2tpYmFuYV90b19lc19jb252ZXJ0ZXInO1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/converters.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;sDAAmB,6CAA6C;;;;QAAzD,MAAM;;uDACO,8CAA8C;;;;QAA3D,OAAO;;oDACG,2CAA2C;;;;QAArD,IAAI;;qDACO,4CAA4C;;;;QAAvD,KAAK;;oDACK,2CAA2C;;;;QAArD,IAAI;;oDACM,2CAA2C;;;;QAArD,IAAI;;oDACM,2CAA2C;;;;QAArD,IAAI;;yDACW,gDAAgD;;;;QAA/D,SAAS;;sDACG,6CAA6C;;;;QAAzD,MAAM;;sDACM,6CAA6C;;;;QAAzD,MAAM;;mDACG,0CAA0C;;;;QAAnD,GAAG;;qDACQ,4CAA4C;;;;QAAvD,KAAK;;oDACK,2CAA2C;;;;QAArD,IAAI;;yDACW,gDAAgD;;;;QAA/D,SAAS",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/converters.js",
      "sourcesContent": [
        "export append from '../processors/append/kibana_to_es_converter';\nexport convert from '../processors/convert/kibana_to_es_converter';\nexport date from '../processors/date/kibana_to_es_converter';\nexport geoip from '../processors/geoip/kibana_to_es_converter';\nexport grok from '../processors/grok/kibana_to_es_converter';\nexport gsub from '../processors/gsub/kibana_to_es_converter';\nexport join from '../processors/join/kibana_to_es_converter';\nexport lowercase from '../processors/lowercase/kibana_to_es_converter';\nexport remove from '../processors/remove/kibana_to_es_converter';\nexport rename from '../processors/rename/kibana_to_es_converter';\nexport set from '../processors/set/kibana_to_es_converter';\nexport split from '../processors/split/kibana_to_es_converter';\nexport trim from '../processors/trim/kibana_to_es_converter';\nexport uppercase from '../processors/uppercase/kibana_to_es_converter';\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/append/kibana_to_es_converter.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "append",
            "processorApiDocument"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "append",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "processorApiDocument",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = append;\n\nfunction append(processorApiDocument) {\n  return {\n    append: {\n      tag: processorApiDocument.processor_id,\n      field: processorApiDocument.target_field,\n      value: processorApiDocument.values\n    }\n  };\n}\n\nmodule.exports = exports[\"default\"];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvcHJvY2Vzc29ycy9hcHBlbmQva2liYW5hX3RvX2VzX2NvbnZlcnRlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztxQkFBd0IsTUFBTTs7QUFBZixTQUFTLE1BQU0sQ0FBQyxvQkFBb0IsRUFBRTtBQUNuRCxTQUFPO0FBQ0wsVUFBTSxFQUFFO0FBQ04sU0FBRyxFQUFFLG9CQUFvQixDQUFDLFlBQVk7QUFDdEMsV0FBSyxFQUFFLG9CQUFvQixDQUFDLFlBQVk7QUFDeEMsV0FBSyxFQUFFLG9CQUFvQixDQUFDLE1BQU07S0FDbkM7R0FDRixDQUFDO0NBQ0giLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvcGx1Z2lucy9raWJhbmEvc2VydmVyL2xpYi9wcm9jZXNzb3JzL2FwcGVuZC9raWJhbmFfdG9fZXNfY29udmVydGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYXBwZW5kKHByb2Nlc3NvckFwaURvY3VtZW50KSB7XG4gIHJldHVybiB7XG4gICAgYXBwZW5kOiB7XG4gICAgICB0YWc6IHByb2Nlc3NvckFwaURvY3VtZW50LnByb2Nlc3Nvcl9pZCxcbiAgICAgIGZpZWxkOiBwcm9jZXNzb3JBcGlEb2N1bWVudC50YXJnZXRfZmllbGQsXG4gICAgICB2YWx1ZTogcHJvY2Vzc29yQXBpRG9jdW1lbnQudmFsdWVzXG4gICAgfVxuICB9O1xufVxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/append/kibana_to_es_converter.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAAwB,MAAM;;AAAf,SAAS,MAAM,CAAC,oBAAoB,EAAE;AACnD,SAAO;AACL,UAAM,EAAE;AACN,SAAG,EAAE,oBAAoB,CAAC,YAAY;AACtC,WAAK,EAAE,oBAAoB,CAAC,YAAY;AACxC,WAAK,EAAE,oBAAoB,CAAC,MAAM;KACnC;GACF,CAAC;CACH",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/append/kibana_to_es_converter.js",
      "sourcesContent": [
        "export default function append(processorApiDocument) {\n  return {\n    append: {\n      tag: processorApiDocument.processor_id,\n      field: processorApiDocument.target_field,\n      value: processorApiDocument.values\n    }\n  };\n}\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/convert/kibana_to_es_converter.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "convert",
            "processorApiDocument"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "convert",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "processorApiDocument",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = convert;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nfunction convert(processorApiDocument) {\n  var types = {\n    //<kibana type>: <ingest type>,\n    auto: 'auto',\n    number: 'float',\n    string: 'string',\n    boolean: 'boolean'\n  };\n\n  var processor = {\n    convert: {\n      tag: processorApiDocument.processor_id,\n      field: processorApiDocument.source_field,\n      type: types[processorApiDocument.type]\n    }\n  };\n  if (!_lodash2['default'].isEmpty(processorApiDocument.target_field)) {\n    processor.convert.target_field = processorApiDocument.target_field;\n  }\n\n  return processor;\n}\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvcHJvY2Vzc29ycy9jb252ZXJ0L2tpYmFuYV90b19lc19jb252ZXJ0ZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7cUJBRXdCLE9BQU87Ozs7c0JBRmpCLFFBQVE7Ozs7QUFFUCxTQUFTLE9BQU8sQ0FBQyxvQkFBb0IsRUFBRTtBQUNwRCxNQUFNLEtBQUssR0FBRzs7QUFFWixRQUFJLEVBQUUsTUFBTTtBQUNaLFVBQU0sRUFBRSxPQUFPO0FBQ2YsVUFBTSxFQUFFLFFBQVE7QUFDaEIsV0FBTyxFQUFFLFNBQVM7R0FDbkIsQ0FBQzs7QUFFRixNQUFNLFNBQVMsR0FBRztBQUNoQixXQUFPLEVBQUU7QUFDUCxTQUFHLEVBQUUsb0JBQW9CLENBQUMsWUFBWTtBQUN0QyxXQUFLLEVBQUUsb0JBQW9CLENBQUMsWUFBWTtBQUN4QyxVQUFJLEVBQUUsS0FBSyxDQUFDLG9CQUFvQixDQUFDLElBQUksQ0FBQztLQUN2QztHQUNGLENBQUM7QUFDRixNQUFJLENBQUMsb0JBQUUsT0FBTyxDQUFDLG9CQUFvQixDQUFDLFlBQVksQ0FBQyxFQUFFO0FBQ2pELGFBQVMsQ0FBQyxPQUFPLENBQUMsWUFBWSxHQUFHLG9CQUFvQixDQUFDLFlBQVksQ0FBQztHQUNwRTs7QUFFRCxTQUFPLFNBQVMsQ0FBQztDQUNsQiIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9wbHVnaW5zL2tpYmFuYS9zZXJ2ZXIvbGliL3Byb2Nlc3NvcnMvY29udmVydC9raWJhbmFfdG9fZXNfY29udmVydGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY29udmVydChwcm9jZXNzb3JBcGlEb2N1bWVudCkge1xuICBjb25zdCB0eXBlcyA9IHtcbiAgICAvLzxraWJhbmEgdHlwZT46IDxpbmdlc3QgdHlwZT4sXG4gICAgYXV0bzogJ2F1dG8nLFxuICAgIG51bWJlcjogJ2Zsb2F0JyxcbiAgICBzdHJpbmc6ICdzdHJpbmcnLFxuICAgIGJvb2xlYW46ICdib29sZWFuJ1xuICB9O1xuXG4gIGNvbnN0IHByb2Nlc3NvciA9IHtcbiAgICBjb252ZXJ0OiB7XG4gICAgICB0YWc6IHByb2Nlc3NvckFwaURvY3VtZW50LnByb2Nlc3Nvcl9pZCxcbiAgICAgIGZpZWxkOiBwcm9jZXNzb3JBcGlEb2N1bWVudC5zb3VyY2VfZmllbGQsXG4gICAgICB0eXBlOiB0eXBlc1twcm9jZXNzb3JBcGlEb2N1bWVudC50eXBlXVxuICAgIH1cbiAgfTtcbiAgaWYgKCFfLmlzRW1wdHkocHJvY2Vzc29yQXBpRG9jdW1lbnQudGFyZ2V0X2ZpZWxkKSkge1xuICAgIHByb2Nlc3Nvci5jb252ZXJ0LnRhcmdldF9maWVsZCA9IHByb2Nlc3NvckFwaURvY3VtZW50LnRhcmdldF9maWVsZDtcbiAgfVxuXG4gIHJldHVybiBwcm9jZXNzb3I7XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/convert/kibana_to_es_converter.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAEwB,OAAO;;;;sBAFjB,QAAQ;;;;AAEP,SAAS,OAAO,CAAC,oBAAoB,EAAE;AACpD,MAAM,KAAK,GAAG;;AAEZ,QAAI,EAAE,MAAM;AACZ,UAAM,EAAE,OAAO;AACf,UAAM,EAAE,QAAQ;AAChB,WAAO,EAAE,SAAS;GACnB,CAAC;;AAEF,MAAM,SAAS,GAAG;AAChB,WAAO,EAAE;AACP,SAAG,EAAE,oBAAoB,CAAC,YAAY;AACtC,WAAK,EAAE,oBAAoB,CAAC,YAAY;AACxC,UAAI,EAAE,KAAK,CAAC,oBAAoB,CAAC,IAAI,CAAC;KACvC;GACF,CAAC;AACF,MAAI,CAAC,oBAAE,OAAO,CAAC,oBAAoB,CAAC,YAAY,CAAC,EAAE;AACjD,aAAS,CAAC,OAAO,CAAC,YAAY,GAAG,oBAAoB,CAAC,YAAY,CAAC;GACpE;;AAED,SAAO,SAAS,CAAC;CAClB",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/convert/kibana_to_es_converter.js",
      "sourcesContent": [
        "import _ from 'lodash';\n\nexport default function convert(processorApiDocument) {\n  const types = {\n    //<kibana type>: <ingest type>,\n    auto: 'auto',\n    number: 'float',\n    string: 'string',\n    boolean: 'boolean'\n  };\n\n  const processor = {\n    convert: {\n      tag: processorApiDocument.processor_id,\n      field: processorApiDocument.source_field,\n      type: types[processorApiDocument.type]\n    }\n  };\n  if (!_.isEmpty(processorApiDocument.target_field)) {\n    processor.convert.target_field = processorApiDocument.target_field;\n  }\n\n  return processor;\n}\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/date/kibana_to_es_converter.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "date",
            "processorApiDocument"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "date",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "processorApiDocument",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = date;\n\nfunction date(processorApiDocument) {\n  var formats = [];\n  processorApiDocument.formats.forEach(function (format) {\n    if (format.toUpperCase() === 'CUSTOM') {\n      if (processorApiDocument.custom_format) {\n        formats.push(processorApiDocument.custom_format);\n      }\n    } else {\n      formats.push(format);\n    }\n  });\n\n  return {\n    date: {\n      tag: processorApiDocument.processor_id,\n      field: processorApiDocument.source_field,\n      target_field: processorApiDocument.target_field,\n      formats: formats,\n      timezone: processorApiDocument.timezone,\n      locale: processorApiDocument.locale\n    }\n  };\n}\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvcHJvY2Vzc29ycy9kYXRlL2tpYmFuYV90b19lc19jb252ZXJ0ZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7cUJBQXdCLElBQUk7O0FBQWIsU0FBUyxJQUFJLENBQUMsb0JBQW9CLEVBQUU7QUFDakQsTUFBTSxPQUFPLEdBQUcsRUFBRSxDQUFDO0FBQ25CLHNCQUFvQixDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsVUFBQyxNQUFNLEVBQUs7QUFDL0MsUUFBSSxNQUFNLENBQUMsV0FBVyxFQUFFLEtBQUssUUFBUSxFQUFFO0FBQ3JDLFVBQUksb0JBQW9CLENBQUMsYUFBYSxFQUFFO0FBQ3RDLGVBQU8sQ0FBQyxJQUFJLENBQUMsb0JBQW9CLENBQUMsYUFBYSxDQUFDLENBQUM7T0FDbEQ7S0FDRixNQUFNO0FBQ0wsYUFBTyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztLQUN0QjtHQUNGLENBQUMsQ0FBQzs7QUFFSCxTQUFPO0FBQ0wsUUFBSSxFQUFFO0FBQ0osU0FBRyxFQUFFLG9CQUFvQixDQUFDLFlBQVk7QUFDdEMsV0FBSyxFQUFFLG9CQUFvQixDQUFDLFlBQVk7QUFDeEMsa0JBQVksRUFBRSxvQkFBb0IsQ0FBQyxZQUFZO0FBQy9DLGFBQU8sRUFBRSxPQUFPO0FBQ2hCLGNBQVEsRUFBRSxvQkFBb0IsQ0FBQyxRQUFRO0FBQ3ZDLFlBQU0sRUFBRSxvQkFBb0IsQ0FBQyxNQUFNO0tBQ3BDO0dBQ0YsQ0FBQztDQUNIIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvcHJvY2Vzc29ycy9kYXRlL2tpYmFuYV90b19lc19jb252ZXJ0ZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBkYXRlKHByb2Nlc3NvckFwaURvY3VtZW50KSB7XG4gIGNvbnN0IGZvcm1hdHMgPSBbXTtcbiAgcHJvY2Vzc29yQXBpRG9jdW1lbnQuZm9ybWF0cy5mb3JFYWNoKChmb3JtYXQpID0+IHtcbiAgICBpZiAoZm9ybWF0LnRvVXBwZXJDYXNlKCkgPT09ICdDVVNUT00nKSB7XG4gICAgICBpZiAocHJvY2Vzc29yQXBpRG9jdW1lbnQuY3VzdG9tX2Zvcm1hdCkge1xuICAgICAgICBmb3JtYXRzLnB1c2gocHJvY2Vzc29yQXBpRG9jdW1lbnQuY3VzdG9tX2Zvcm1hdCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvcm1hdHMucHVzaChmb3JtYXQpO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHtcbiAgICBkYXRlOiB7XG4gICAgICB0YWc6IHByb2Nlc3NvckFwaURvY3VtZW50LnByb2Nlc3Nvcl9pZCxcbiAgICAgIGZpZWxkOiBwcm9jZXNzb3JBcGlEb2N1bWVudC5zb3VyY2VfZmllbGQsXG4gICAgICB0YXJnZXRfZmllbGQ6IHByb2Nlc3NvckFwaURvY3VtZW50LnRhcmdldF9maWVsZCxcbiAgICAgIGZvcm1hdHM6IGZvcm1hdHMsXG4gICAgICB0aW1lem9uZTogcHJvY2Vzc29yQXBpRG9jdW1lbnQudGltZXpvbmUsXG4gICAgICBsb2NhbGU6IHByb2Nlc3NvckFwaURvY3VtZW50LmxvY2FsZVxuICAgIH1cbiAgfTtcbn1cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/date/kibana_to_es_converter.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAAwB,IAAI;;AAAb,SAAS,IAAI,CAAC,oBAAoB,EAAE;AACjD,MAAM,OAAO,GAAG,EAAE,CAAC;AACnB,sBAAoB,CAAC,OAAO,CAAC,OAAO,CAAC,UAAC,MAAM,EAAK;AAC/C,QAAI,MAAM,CAAC,WAAW,EAAE,KAAK,QAAQ,EAAE;AACrC,UAAI,oBAAoB,CAAC,aAAa,EAAE;AACtC,eAAO,CAAC,IAAI,CAAC,oBAAoB,CAAC,aAAa,CAAC,CAAC;OAClD;KACF,MAAM;AACL,aAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;KACtB;GACF,CAAC,CAAC;;AAEH,SAAO;AACL,QAAI,EAAE;AACJ,SAAG,EAAE,oBAAoB,CAAC,YAAY;AACtC,WAAK,EAAE,oBAAoB,CAAC,YAAY;AACxC,kBAAY,EAAE,oBAAoB,CAAC,YAAY;AAC/C,aAAO,EAAE,OAAO;AAChB,cAAQ,EAAE,oBAAoB,CAAC,QAAQ;AACvC,YAAM,EAAE,oBAAoB,CAAC,MAAM;KACpC;GACF,CAAC;CACH",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/date/kibana_to_es_converter.js",
      "sourcesContent": [
        "export default function date(processorApiDocument) {\n  const formats = [];\n  processorApiDocument.formats.forEach((format) => {\n    if (format.toUpperCase() === 'CUSTOM') {\n      if (processorApiDocument.custom_format) {\n        formats.push(processorApiDocument.custom_format);\n      }\n    } else {\n      formats.push(format);\n    }\n  });\n\n  return {\n    date: {\n      tag: processorApiDocument.processor_id,\n      field: processorApiDocument.source_field,\n      target_field: processorApiDocument.target_field,\n      formats: formats,\n      timezone: processorApiDocument.timezone,\n      locale: processorApiDocument.locale\n    }\n  };\n}\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/geoip/kibana_to_es_converter.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "geoip",
            "processorApiDocument"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "geoip",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "processorApiDocument",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = geoip;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nfunction geoip(processorApiDocument) {\n  var processor = {\n    geoip: {\n      tag: processorApiDocument.processor_id,\n      field: processorApiDocument.source_field\n    }\n  };\n  if (!_lodash2['default'].isEmpty(processorApiDocument.target_field)) {\n    processor.geoip.target_field = processorApiDocument.target_field;\n  }\n  if (!_lodash2['default'].isEmpty(processorApiDocument.database_file)) {\n    processor.geoip.database_file = processorApiDocument.database_file;\n  }\n  if (!_lodash2['default'].isEmpty(processorApiDocument.database_fields)) {\n    processor.geoip.properties = processorApiDocument.database_fields;\n  }\n\n  return processor;\n}\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvcHJvY2Vzc29ycy9nZW9pcC9raWJhbmFfdG9fZXNfY29udmVydGVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O3FCQUV3QixLQUFLOzs7O3NCQUZmLFFBQVE7Ozs7QUFFUCxTQUFTLEtBQUssQ0FBQyxvQkFBb0IsRUFBRTtBQUNsRCxNQUFNLFNBQVMsR0FBRztBQUNoQixTQUFLLEVBQUU7QUFDTCxTQUFHLEVBQUUsb0JBQW9CLENBQUMsWUFBWTtBQUN0QyxXQUFLLEVBQUUsb0JBQW9CLENBQUMsWUFBWTtLQUN6QztHQUNGLENBQUM7QUFDRixNQUFJLENBQUMsb0JBQUUsT0FBTyxDQUFDLG9CQUFvQixDQUFDLFlBQVksQ0FBQyxFQUFFO0FBQ2pELGFBQVMsQ0FBQyxLQUFLLENBQUMsWUFBWSxHQUFHLG9CQUFvQixDQUFDLFlBQVksQ0FBQztHQUNsRTtBQUNELE1BQUksQ0FBQyxvQkFBRSxPQUFPLENBQUMsb0JBQW9CLENBQUMsYUFBYSxDQUFDLEVBQUU7QUFDbEQsYUFBUyxDQUFDLEtBQUssQ0FBQyxhQUFhLEdBQUcsb0JBQW9CLENBQUMsYUFBYSxDQUFDO0dBQ3BFO0FBQ0QsTUFBSSxDQUFDLG9CQUFFLE9BQU8sQ0FBQyxvQkFBb0IsQ0FBQyxlQUFlLENBQUMsRUFBRTtBQUNwRCxhQUFTLENBQUMsS0FBSyxDQUFDLFVBQVUsR0FBRyxvQkFBb0IsQ0FBQyxlQUFlLENBQUM7R0FDbkU7O0FBRUQsU0FBTyxTQUFTLENBQUM7Q0FDbEIiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvcGx1Z2lucy9raWJhbmEvc2VydmVyL2xpYi9wcm9jZXNzb3JzL2dlb2lwL2tpYmFuYV90b19lc19jb252ZXJ0ZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZW9pcChwcm9jZXNzb3JBcGlEb2N1bWVudCkge1xuICBjb25zdCBwcm9jZXNzb3IgPSB7XG4gICAgZ2VvaXA6IHtcbiAgICAgIHRhZzogcHJvY2Vzc29yQXBpRG9jdW1lbnQucHJvY2Vzc29yX2lkLFxuICAgICAgZmllbGQ6IHByb2Nlc3NvckFwaURvY3VtZW50LnNvdXJjZV9maWVsZFxuICAgIH1cbiAgfTtcbiAgaWYgKCFfLmlzRW1wdHkocHJvY2Vzc29yQXBpRG9jdW1lbnQudGFyZ2V0X2ZpZWxkKSkge1xuICAgIHByb2Nlc3Nvci5nZW9pcC50YXJnZXRfZmllbGQgPSBwcm9jZXNzb3JBcGlEb2N1bWVudC50YXJnZXRfZmllbGQ7XG4gIH1cbiAgaWYgKCFfLmlzRW1wdHkocHJvY2Vzc29yQXBpRG9jdW1lbnQuZGF0YWJhc2VfZmlsZSkpIHtcbiAgICBwcm9jZXNzb3IuZ2VvaXAuZGF0YWJhc2VfZmlsZSA9IHByb2Nlc3NvckFwaURvY3VtZW50LmRhdGFiYXNlX2ZpbGU7XG4gIH1cbiAgaWYgKCFfLmlzRW1wdHkocHJvY2Vzc29yQXBpRG9jdW1lbnQuZGF0YWJhc2VfZmllbGRzKSkge1xuICAgIHByb2Nlc3Nvci5nZW9pcC5wcm9wZXJ0aWVzID0gcHJvY2Vzc29yQXBpRG9jdW1lbnQuZGF0YWJhc2VfZmllbGRzO1xuICB9XG5cbiAgcmV0dXJuIHByb2Nlc3Nvcjtcbn1cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/geoip/kibana_to_es_converter.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAEwB,KAAK;;;;sBAFf,QAAQ;;;;AAEP,SAAS,KAAK,CAAC,oBAAoB,EAAE;AAClD,MAAM,SAAS,GAAG;AAChB,SAAK,EAAE;AACL,SAAG,EAAE,oBAAoB,CAAC,YAAY;AACtC,WAAK,EAAE,oBAAoB,CAAC,YAAY;KACzC;GACF,CAAC;AACF,MAAI,CAAC,oBAAE,OAAO,CAAC,oBAAoB,CAAC,YAAY,CAAC,EAAE;AACjD,aAAS,CAAC,KAAK,CAAC,YAAY,GAAG,oBAAoB,CAAC,YAAY,CAAC;GAClE;AACD,MAAI,CAAC,oBAAE,OAAO,CAAC,oBAAoB,CAAC,aAAa,CAAC,EAAE;AAClD,aAAS,CAAC,KAAK,CAAC,aAAa,GAAG,oBAAoB,CAAC,aAAa,CAAC;GACpE;AACD,MAAI,CAAC,oBAAE,OAAO,CAAC,oBAAoB,CAAC,eAAe,CAAC,EAAE;AACpD,aAAS,CAAC,KAAK,CAAC,UAAU,GAAG,oBAAoB,CAAC,eAAe,CAAC;GACnE;;AAED,SAAO,SAAS,CAAC;CAClB",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/geoip/kibana_to_es_converter.js",
      "sourcesContent": [
        "import _ from 'lodash';\n\nexport default function geoip(processorApiDocument) {\n  const processor = {\n    geoip: {\n      tag: processorApiDocument.processor_id,\n      field: processorApiDocument.source_field\n    }\n  };\n  if (!_.isEmpty(processorApiDocument.target_field)) {\n    processor.geoip.target_field = processorApiDocument.target_field;\n  }\n  if (!_.isEmpty(processorApiDocument.database_file)) {\n    processor.geoip.database_file = processorApiDocument.database_file;\n  }\n  if (!_.isEmpty(processorApiDocument.database_fields)) {\n    processor.geoip.properties = processorApiDocument.database_fields;\n  }\n\n  return processor;\n}\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/grok/kibana_to_es_converter.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "grok",
            "processorApiDocument"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "grok",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "processorApiDocument",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = grok;\n\nfunction grok(processorApiDocument) {\n  return {\n    grok: {\n      tag: processorApiDocument.processor_id,\n      field: processorApiDocument.source_field,\n      patterns: [processorApiDocument.pattern]\n    }\n  };\n}\n\nmodule.exports = exports[\"default\"];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvcHJvY2Vzc29ycy9ncm9rL2tpYmFuYV90b19lc19jb252ZXJ0ZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7cUJBQXdCLElBQUk7O0FBQWIsU0FBUyxJQUFJLENBQUMsb0JBQW9CLEVBQUU7QUFDakQsU0FBTztBQUNMLFFBQUksRUFBRTtBQUNKLFNBQUcsRUFBRSxvQkFBb0IsQ0FBQyxZQUFZO0FBQ3RDLFdBQUssRUFBRSxvQkFBb0IsQ0FBQyxZQUFZO0FBQ3hDLGNBQVEsRUFBRSxDQUFFLG9CQUFvQixDQUFDLE9BQU8sQ0FBRTtLQUMzQztHQUNGLENBQUM7Q0FDSCIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9wbHVnaW5zL2tpYmFuYS9zZXJ2ZXIvbGliL3Byb2Nlc3NvcnMvZ3Jvay9raWJhbmFfdG9fZXNfY29udmVydGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ3Jvayhwcm9jZXNzb3JBcGlEb2N1bWVudCkge1xuICByZXR1cm4ge1xuICAgIGdyb2s6IHtcbiAgICAgIHRhZzogcHJvY2Vzc29yQXBpRG9jdW1lbnQucHJvY2Vzc29yX2lkLFxuICAgICAgZmllbGQ6IHByb2Nlc3NvckFwaURvY3VtZW50LnNvdXJjZV9maWVsZCxcbiAgICAgIHBhdHRlcm5zOiBbIHByb2Nlc3NvckFwaURvY3VtZW50LnBhdHRlcm4gXVxuICAgIH1cbiAgfTtcbn1cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/grok/kibana_to_es_converter.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAAwB,IAAI;;AAAb,SAAS,IAAI,CAAC,oBAAoB,EAAE;AACjD,SAAO;AACL,QAAI,EAAE;AACJ,SAAG,EAAE,oBAAoB,CAAC,YAAY;AACtC,WAAK,EAAE,oBAAoB,CAAC,YAAY;AACxC,cAAQ,EAAE,CAAE,oBAAoB,CAAC,OAAO,CAAE;KAC3C;GACF,CAAC;CACH",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/grok/kibana_to_es_converter.js",
      "sourcesContent": [
        "export default function grok(processorApiDocument) {\n  return {\n    grok: {\n      tag: processorApiDocument.processor_id,\n      field: processorApiDocument.source_field,\n      patterns: [ processorApiDocument.pattern ]\n    }\n  };\n}\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/gsub/kibana_to_es_converter.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "gsub",
            "processorApiDocument"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "gsub",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "processorApiDocument",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = gsub;\n\nfunction gsub(processorApiDocument) {\n  return {\n    gsub: {\n      tag: processorApiDocument.processor_id,\n      field: processorApiDocument.source_field,\n      pattern: processorApiDocument.pattern,\n      replacement: processorApiDocument.replacement\n    }\n  };\n}\n\nmodule.exports = exports[\"default\"];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvcHJvY2Vzc29ycy9nc3ViL2tpYmFuYV90b19lc19jb252ZXJ0ZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7cUJBQXdCLElBQUk7O0FBQWIsU0FBUyxJQUFJLENBQUMsb0JBQW9CLEVBQUU7QUFDakQsU0FBTztBQUNMLFFBQUksRUFBRTtBQUNKLFNBQUcsRUFBRSxvQkFBb0IsQ0FBQyxZQUFZO0FBQ3RDLFdBQUssRUFBRSxvQkFBb0IsQ0FBQyxZQUFZO0FBQ3hDLGFBQU8sRUFBRSxvQkFBb0IsQ0FBQyxPQUFPO0FBQ3JDLGlCQUFXLEVBQUUsb0JBQW9CLENBQUMsV0FBVztLQUM5QztHQUNGLENBQUM7Q0FDSCIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9wbHVnaW5zL2tpYmFuYS9zZXJ2ZXIvbGliL3Byb2Nlc3NvcnMvZ3N1Yi9raWJhbmFfdG9fZXNfY29udmVydGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ3N1Yihwcm9jZXNzb3JBcGlEb2N1bWVudCkge1xuICByZXR1cm4ge1xuICAgIGdzdWI6IHtcbiAgICAgIHRhZzogcHJvY2Vzc29yQXBpRG9jdW1lbnQucHJvY2Vzc29yX2lkLFxuICAgICAgZmllbGQ6IHByb2Nlc3NvckFwaURvY3VtZW50LnNvdXJjZV9maWVsZCxcbiAgICAgIHBhdHRlcm46IHByb2Nlc3NvckFwaURvY3VtZW50LnBhdHRlcm4sXG4gICAgICByZXBsYWNlbWVudDogcHJvY2Vzc29yQXBpRG9jdW1lbnQucmVwbGFjZW1lbnRcbiAgICB9XG4gIH07XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/gsub/kibana_to_es_converter.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAAwB,IAAI;;AAAb,SAAS,IAAI,CAAC,oBAAoB,EAAE;AACjD,SAAO;AACL,QAAI,EAAE;AACJ,SAAG,EAAE,oBAAoB,CAAC,YAAY;AACtC,WAAK,EAAE,oBAAoB,CAAC,YAAY;AACxC,aAAO,EAAE,oBAAoB,CAAC,OAAO;AACrC,iBAAW,EAAE,oBAAoB,CAAC,WAAW;KAC9C;GACF,CAAC;CACH",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/gsub/kibana_to_es_converter.js",
      "sourcesContent": [
        "export default function gsub(processorApiDocument) {\n  return {\n    gsub: {\n      tag: processorApiDocument.processor_id,\n      field: processorApiDocument.source_field,\n      pattern: processorApiDocument.pattern,\n      replacement: processorApiDocument.replacement\n    }\n  };\n}\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/join/kibana_to_es_converter.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "join",
            "processorApiDocument"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "join",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "processorApiDocument",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = join;\n\nfunction join(processorApiDocument) {\n  return {\n    join: {\n      tag: processorApiDocument.processor_id,\n      field: processorApiDocument.source_field,\n      separator: processorApiDocument.separator\n    }\n  };\n}\n\nmodule.exports = exports[\"default\"];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvcHJvY2Vzc29ycy9qb2luL2tpYmFuYV90b19lc19jb252ZXJ0ZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7cUJBQXdCLElBQUk7O0FBQWIsU0FBUyxJQUFJLENBQUMsb0JBQW9CLEVBQUU7QUFDakQsU0FBTztBQUNMLFFBQUksRUFBRTtBQUNKLFNBQUcsRUFBRSxvQkFBb0IsQ0FBQyxZQUFZO0FBQ3RDLFdBQUssRUFBRSxvQkFBb0IsQ0FBQyxZQUFZO0FBQ3hDLGVBQVMsRUFBRSxvQkFBb0IsQ0FBQyxTQUFTO0tBQzFDO0dBQ0YsQ0FBQztDQUNIIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvcHJvY2Vzc29ycy9qb2luL2tpYmFuYV90b19lc19jb252ZXJ0ZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBqb2luKHByb2Nlc3NvckFwaURvY3VtZW50KSB7XG4gIHJldHVybiB7XG4gICAgam9pbjoge1xuICAgICAgdGFnOiBwcm9jZXNzb3JBcGlEb2N1bWVudC5wcm9jZXNzb3JfaWQsXG4gICAgICBmaWVsZDogcHJvY2Vzc29yQXBpRG9jdW1lbnQuc291cmNlX2ZpZWxkLFxuICAgICAgc2VwYXJhdG9yOiBwcm9jZXNzb3JBcGlEb2N1bWVudC5zZXBhcmF0b3JcbiAgICB9XG4gIH07XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/join/kibana_to_es_converter.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAAwB,IAAI;;AAAb,SAAS,IAAI,CAAC,oBAAoB,EAAE;AACjD,SAAO;AACL,QAAI,EAAE;AACJ,SAAG,EAAE,oBAAoB,CAAC,YAAY;AACtC,WAAK,EAAE,oBAAoB,CAAC,YAAY;AACxC,eAAS,EAAE,oBAAoB,CAAC,SAAS;KAC1C;GACF,CAAC;CACH",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/join/kibana_to_es_converter.js",
      "sourcesContent": [
        "export default function join(processorApiDocument) {\n  return {\n    join: {\n      tag: processorApiDocument.processor_id,\n      field: processorApiDocument.source_field,\n      separator: processorApiDocument.separator\n    }\n  };\n}\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/lowercase/kibana_to_es_converter.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "lowercase",
            "processorApiDocument"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "lowercase",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "processorApiDocument",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = lowercase;\n\nfunction lowercase(processorApiDocument) {\n  return {\n    lowercase: {\n      tag: processorApiDocument.processor_id,\n      field: processorApiDocument.source_field\n    }\n  };\n}\n\nmodule.exports = exports[\"default\"];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvcHJvY2Vzc29ycy9sb3dlcmNhc2Uva2liYW5hX3RvX2VzX2NvbnZlcnRlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztxQkFBd0IsU0FBUzs7QUFBbEIsU0FBUyxTQUFTLENBQUMsb0JBQW9CLEVBQUU7QUFDdEQsU0FBTztBQUNMLGFBQVMsRUFBRTtBQUNULFNBQUcsRUFBRSxvQkFBb0IsQ0FBQyxZQUFZO0FBQ3RDLFdBQUssRUFBRSxvQkFBb0IsQ0FBQyxZQUFZO0tBQ3pDO0dBQ0YsQ0FBQztDQUNIIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvcHJvY2Vzc29ycy9sb3dlcmNhc2Uva2liYW5hX3RvX2VzX2NvbnZlcnRlci5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGxvd2VyY2FzZShwcm9jZXNzb3JBcGlEb2N1bWVudCkge1xuICByZXR1cm4ge1xuICAgIGxvd2VyY2FzZToge1xuICAgICAgdGFnOiBwcm9jZXNzb3JBcGlEb2N1bWVudC5wcm9jZXNzb3JfaWQsXG4gICAgICBmaWVsZDogcHJvY2Vzc29yQXBpRG9jdW1lbnQuc291cmNlX2ZpZWxkXG4gICAgfVxuICB9O1xufVxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/lowercase/kibana_to_es_converter.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAAwB,SAAS;;AAAlB,SAAS,SAAS,CAAC,oBAAoB,EAAE;AACtD,SAAO;AACL,aAAS,EAAE;AACT,SAAG,EAAE,oBAAoB,CAAC,YAAY;AACtC,WAAK,EAAE,oBAAoB,CAAC,YAAY;KACzC;GACF,CAAC;CACH",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/lowercase/kibana_to_es_converter.js",
      "sourcesContent": [
        "export default function lowercase(processorApiDocument) {\n  return {\n    lowercase: {\n      tag: processorApiDocument.processor_id,\n      field: processorApiDocument.source_field\n    }\n  };\n}\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/remove/kibana_to_es_converter.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "remove",
            "processorApiDocument"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "remove",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "processorApiDocument",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = remove;\n\nfunction remove(processorApiDocument) {\n  return {\n    remove: {\n      tag: processorApiDocument.processor_id,\n      field: processorApiDocument.source_field\n    }\n  };\n}\n\nmodule.exports = exports[\"default\"];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvcHJvY2Vzc29ycy9yZW1vdmUva2liYW5hX3RvX2VzX2NvbnZlcnRlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztxQkFBd0IsTUFBTTs7QUFBZixTQUFTLE1BQU0sQ0FBQyxvQkFBb0IsRUFBRTtBQUNuRCxTQUFPO0FBQ0wsVUFBTSxFQUFFO0FBQ04sU0FBRyxFQUFFLG9CQUFvQixDQUFDLFlBQVk7QUFDdEMsV0FBSyxFQUFFLG9CQUFvQixDQUFDLFlBQVk7S0FDekM7R0FDRixDQUFDO0NBQ0giLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvcGx1Z2lucy9raWJhbmEvc2VydmVyL2xpYi9wcm9jZXNzb3JzL3JlbW92ZS9raWJhbmFfdG9fZXNfY29udmVydGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcmVtb3ZlKHByb2Nlc3NvckFwaURvY3VtZW50KSB7XG4gIHJldHVybiB7XG4gICAgcmVtb3ZlOiB7XG4gICAgICB0YWc6IHByb2Nlc3NvckFwaURvY3VtZW50LnByb2Nlc3Nvcl9pZCxcbiAgICAgIGZpZWxkOiBwcm9jZXNzb3JBcGlEb2N1bWVudC5zb3VyY2VfZmllbGRcbiAgICB9XG4gIH07XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/remove/kibana_to_es_converter.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAAwB,MAAM;;AAAf,SAAS,MAAM,CAAC,oBAAoB,EAAE;AACnD,SAAO;AACL,UAAM,EAAE;AACN,SAAG,EAAE,oBAAoB,CAAC,YAAY;AACtC,WAAK,EAAE,oBAAoB,CAAC,YAAY;KACzC;GACF,CAAC;CACH",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/remove/kibana_to_es_converter.js",
      "sourcesContent": [
        "export default function remove(processorApiDocument) {\n  return {\n    remove: {\n      tag: processorApiDocument.processor_id,\n      field: processorApiDocument.source_field\n    }\n  };\n}\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/rename/kibana_to_es_converter.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "rename",
            "processorApiDocument"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "rename",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "processorApiDocument",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = rename;\n\nfunction rename(processorApiDocument) {\n  return {\n    rename: {\n      tag: processorApiDocument.processor_id,\n      field: processorApiDocument.source_field,\n      target_field: processorApiDocument.target_field\n    }\n  };\n}\n\nmodule.exports = exports[\"default\"];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvcHJvY2Vzc29ycy9yZW5hbWUva2liYW5hX3RvX2VzX2NvbnZlcnRlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztxQkFBd0IsTUFBTTs7QUFBZixTQUFTLE1BQU0sQ0FBQyxvQkFBb0IsRUFBRTtBQUNuRCxTQUFPO0FBQ0wsVUFBTSxFQUFFO0FBQ04sU0FBRyxFQUFFLG9CQUFvQixDQUFDLFlBQVk7QUFDdEMsV0FBSyxFQUFFLG9CQUFvQixDQUFDLFlBQVk7QUFDeEMsa0JBQVksRUFBRSxvQkFBb0IsQ0FBQyxZQUFZO0tBQ2hEO0dBQ0YsQ0FBQztDQUNIIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvcHJvY2Vzc29ycy9yZW5hbWUva2liYW5hX3RvX2VzX2NvbnZlcnRlci5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJlbmFtZShwcm9jZXNzb3JBcGlEb2N1bWVudCkge1xuICByZXR1cm4ge1xuICAgIHJlbmFtZToge1xuICAgICAgdGFnOiBwcm9jZXNzb3JBcGlEb2N1bWVudC5wcm9jZXNzb3JfaWQsXG4gICAgICBmaWVsZDogcHJvY2Vzc29yQXBpRG9jdW1lbnQuc291cmNlX2ZpZWxkLFxuICAgICAgdGFyZ2V0X2ZpZWxkOiBwcm9jZXNzb3JBcGlEb2N1bWVudC50YXJnZXRfZmllbGRcbiAgICB9XG4gIH07XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/rename/kibana_to_es_converter.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAAwB,MAAM;;AAAf,SAAS,MAAM,CAAC,oBAAoB,EAAE;AACnD,SAAO;AACL,UAAM,EAAE;AACN,SAAG,EAAE,oBAAoB,CAAC,YAAY;AACtC,WAAK,EAAE,oBAAoB,CAAC,YAAY;AACxC,kBAAY,EAAE,oBAAoB,CAAC,YAAY;KAChD;GACF,CAAC;CACH",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/rename/kibana_to_es_converter.js",
      "sourcesContent": [
        "export default function rename(processorApiDocument) {\n  return {\n    rename: {\n      tag: processorApiDocument.processor_id,\n      field: processorApiDocument.source_field,\n      target_field: processorApiDocument.target_field\n    }\n  };\n}\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/set/kibana_to_es_converter.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "set",
            "processorApiDocument"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "set",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "processorApiDocument",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = set;\n\nfunction set(processorApiDocument) {\n  return {\n    set: {\n      tag: processorApiDocument.processor_id,\n      field: processorApiDocument.target_field,\n      value: processorApiDocument.value\n    }\n  };\n}\n\nmodule.exports = exports[\"default\"];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvcHJvY2Vzc29ycy9zZXQva2liYW5hX3RvX2VzX2NvbnZlcnRlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztxQkFBd0IsR0FBRzs7QUFBWixTQUFTLEdBQUcsQ0FBQyxvQkFBb0IsRUFBRTtBQUNoRCxTQUFPO0FBQ0wsT0FBRyxFQUFFO0FBQ0gsU0FBRyxFQUFFLG9CQUFvQixDQUFDLFlBQVk7QUFDdEMsV0FBSyxFQUFFLG9CQUFvQixDQUFDLFlBQVk7QUFDeEMsV0FBSyxFQUFFLG9CQUFvQixDQUFDLEtBQUs7S0FDbEM7R0FDRixDQUFDO0NBQ0giLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvcGx1Z2lucy9raWJhbmEvc2VydmVyL2xpYi9wcm9jZXNzb3JzL3NldC9raWJhbmFfdG9fZXNfY29udmVydGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc2V0KHByb2Nlc3NvckFwaURvY3VtZW50KSB7XG4gIHJldHVybiB7XG4gICAgc2V0OiB7XG4gICAgICB0YWc6IHByb2Nlc3NvckFwaURvY3VtZW50LnByb2Nlc3Nvcl9pZCxcbiAgICAgIGZpZWxkOiBwcm9jZXNzb3JBcGlEb2N1bWVudC50YXJnZXRfZmllbGQsXG4gICAgICB2YWx1ZTogcHJvY2Vzc29yQXBpRG9jdW1lbnQudmFsdWVcbiAgICB9XG4gIH07XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/set/kibana_to_es_converter.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAAwB,GAAG;;AAAZ,SAAS,GAAG,CAAC,oBAAoB,EAAE;AAChD,SAAO;AACL,OAAG,EAAE;AACH,SAAG,EAAE,oBAAoB,CAAC,YAAY;AACtC,WAAK,EAAE,oBAAoB,CAAC,YAAY;AACxC,WAAK,EAAE,oBAAoB,CAAC,KAAK;KAClC;GACF,CAAC;CACH",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/set/kibana_to_es_converter.js",
      "sourcesContent": [
        "export default function set(processorApiDocument) {\n  return {\n    set: {\n      tag: processorApiDocument.processor_id,\n      field: processorApiDocument.target_field,\n      value: processorApiDocument.value\n    }\n  };\n}\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/split/kibana_to_es_converter.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "split",
            "processorApiDocument"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "split",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "processorApiDocument",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = split;\n\nfunction split(processorApiDocument) {\n  return {\n    split: {\n      tag: processorApiDocument.processor_id,\n      field: processorApiDocument.source_field,\n      separator: processorApiDocument.separator\n    }\n  };\n}\n\nmodule.exports = exports[\"default\"];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvcHJvY2Vzc29ycy9zcGxpdC9raWJhbmFfdG9fZXNfY29udmVydGVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O3FCQUF3QixLQUFLOztBQUFkLFNBQVMsS0FBSyxDQUFDLG9CQUFvQixFQUFFO0FBQ2xELFNBQU87QUFDTCxTQUFLLEVBQUU7QUFDTCxTQUFHLEVBQUUsb0JBQW9CLENBQUMsWUFBWTtBQUN0QyxXQUFLLEVBQUUsb0JBQW9CLENBQUMsWUFBWTtBQUN4QyxlQUFTLEVBQUUsb0JBQW9CLENBQUMsU0FBUztLQUMxQztHQUNGLENBQUM7Q0FDSCIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9wbHVnaW5zL2tpYmFuYS9zZXJ2ZXIvbGliL3Byb2Nlc3NvcnMvc3BsaXQva2liYW5hX3RvX2VzX2NvbnZlcnRlci5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHNwbGl0KHByb2Nlc3NvckFwaURvY3VtZW50KSB7XG4gIHJldHVybiB7XG4gICAgc3BsaXQ6IHtcbiAgICAgIHRhZzogcHJvY2Vzc29yQXBpRG9jdW1lbnQucHJvY2Vzc29yX2lkLFxuICAgICAgZmllbGQ6IHByb2Nlc3NvckFwaURvY3VtZW50LnNvdXJjZV9maWVsZCxcbiAgICAgIHNlcGFyYXRvcjogcHJvY2Vzc29yQXBpRG9jdW1lbnQuc2VwYXJhdG9yXG4gICAgfVxuICB9O1xufVxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/split/kibana_to_es_converter.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAAwB,KAAK;;AAAd,SAAS,KAAK,CAAC,oBAAoB,EAAE;AAClD,SAAO;AACL,SAAK,EAAE;AACL,SAAG,EAAE,oBAAoB,CAAC,YAAY;AACtC,WAAK,EAAE,oBAAoB,CAAC,YAAY;AACxC,eAAS,EAAE,oBAAoB,CAAC,SAAS;KAC1C;GACF,CAAC;CACH",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/split/kibana_to_es_converter.js",
      "sourcesContent": [
        "export default function split(processorApiDocument) {\n  return {\n    split: {\n      tag: processorApiDocument.processor_id,\n      field: processorApiDocument.source_field,\n      separator: processorApiDocument.separator\n    }\n  };\n}\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/trim/kibana_to_es_converter.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "trim",
            "processorApiDocument"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "trim",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "processorApiDocument",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = trim;\n\nfunction trim(processorApiDocument) {\n  return {\n    trim: {\n      tag: processorApiDocument.processor_id,\n      field: processorApiDocument.source_field\n    }\n  };\n}\n\nmodule.exports = exports[\"default\"];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvcHJvY2Vzc29ycy90cmltL2tpYmFuYV90b19lc19jb252ZXJ0ZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7cUJBQXdCLElBQUk7O0FBQWIsU0FBUyxJQUFJLENBQUMsb0JBQW9CLEVBQUU7QUFDakQsU0FBTztBQUNMLFFBQUksRUFBRTtBQUNKLFNBQUcsRUFBRSxvQkFBb0IsQ0FBQyxZQUFZO0FBQ3RDLFdBQUssRUFBRSxvQkFBb0IsQ0FBQyxZQUFZO0tBQ3pDO0dBQ0YsQ0FBQztDQUNIIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvcHJvY2Vzc29ycy90cmltL2tpYmFuYV90b19lc19jb252ZXJ0ZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0cmltKHByb2Nlc3NvckFwaURvY3VtZW50KSB7XG4gIHJldHVybiB7XG4gICAgdHJpbToge1xuICAgICAgdGFnOiBwcm9jZXNzb3JBcGlEb2N1bWVudC5wcm9jZXNzb3JfaWQsXG4gICAgICBmaWVsZDogcHJvY2Vzc29yQXBpRG9jdW1lbnQuc291cmNlX2ZpZWxkXG4gICAgfVxuICB9O1xufVxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/trim/kibana_to_es_converter.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAAwB,IAAI;;AAAb,SAAS,IAAI,CAAC,oBAAoB,EAAE;AACjD,SAAO;AACL,QAAI,EAAE;AACJ,SAAG,EAAE,oBAAoB,CAAC,YAAY;AACtC,WAAK,EAAE,oBAAoB,CAAC,YAAY;KACzC;GACF,CAAC;CACH",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/trim/kibana_to_es_converter.js",
      "sourcesContent": [
        "export default function trim(processorApiDocument) {\n  return {\n    trim: {\n      tag: processorApiDocument.processor_id,\n      field: processorApiDocument.source_field\n    }\n  };\n}\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/uppercase/kibana_to_es_converter.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "uppercase",
            "processorApiDocument"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "uppercase",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "processorApiDocument",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = uppercase;\n\nfunction uppercase(processorApiDocument) {\n  return {\n    uppercase: {\n      tag: processorApiDocument.processor_id,\n      field: processorApiDocument.source_field\n    }\n  };\n}\n\nmodule.exports = exports[\"default\"];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvcHJvY2Vzc29ycy91cHBlcmNhc2Uva2liYW5hX3RvX2VzX2NvbnZlcnRlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztxQkFBd0IsU0FBUzs7QUFBbEIsU0FBUyxTQUFTLENBQUMsb0JBQW9CLEVBQUU7QUFDdEQsU0FBTztBQUNMLGFBQVMsRUFBRTtBQUNULFNBQUcsRUFBRSxvQkFBb0IsQ0FBQyxZQUFZO0FBQ3RDLFdBQUssRUFBRSxvQkFBb0IsQ0FBQyxZQUFZO0tBQ3pDO0dBQ0YsQ0FBQztDQUNIIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvcHJvY2Vzc29ycy91cHBlcmNhc2Uva2liYW5hX3RvX2VzX2NvbnZlcnRlci5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVwcGVyY2FzZShwcm9jZXNzb3JBcGlEb2N1bWVudCkge1xuICByZXR1cm4ge1xuICAgIHVwcGVyY2FzZToge1xuICAgICAgdGFnOiBwcm9jZXNzb3JBcGlEb2N1bWVudC5wcm9jZXNzb3JfaWQsXG4gICAgICBmaWVsZDogcHJvY2Vzc29yQXBpRG9jdW1lbnQuc291cmNlX2ZpZWxkXG4gICAgfVxuICB9O1xufVxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/uppercase/kibana_to_es_converter.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAAwB,SAAS;;AAAlB,SAAS,SAAS,CAAC,oBAAoB,EAAE;AACtD,SAAO;AACL,aAAS,EAAE;AACT,SAAG,EAAE,oBAAoB,CAAC,YAAY;AACtC,WAAK,EAAE,oBAAoB,CAAC,YAAY;KACzC;GACF,CAAC;CACH",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/lib/processors/uppercase/kibana_to_es_converter.js",
      "sourcesContent": [
        "export default function uppercase(processorApiDocument) {\n  return {\n    uppercase: {\n      tag: processorApiDocument.processor_id,\n      field: processorApiDocument.source_field\n    }\n  };\n}\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/routes/api/ingest/register_delete.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "bluebird",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Promise"
              }
            ]
          },
          {
            "source": "../../../lib/handle_es_error",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "handleESError"
              }
            ]
          },
          {
            "source": "../../../../common/lib/convert_pattern_and_ingest_name",
            "imported": [
              "ingestToPattern",
              "patternToIngest"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "ingestToPattern",
                "local": "ingestToPattern"
              },
              {
                "kind": "named",
                "imported": "patternToIngest",
                "local": "patternToIngest"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "registerDelete",
            "server"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "registerDelete",
              "exported": "registerDelete"
            },
            {
              "kind": "local",
              "local": "server",
              "exported": "server"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports.registerDelete = registerDelete;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _bluebird = require('bluebird');\n\nvar _bluebird2 = _interopRequireDefault(_bluebird);\n\nvar _libHandle_es_error = require('../../../lib/handle_es_error');\n\nvar _libHandle_es_error2 = _interopRequireDefault(_libHandle_es_error);\n\nvar _commonLibConvert_pattern_and_ingest_name = require('../../../../common/lib/convert_pattern_and_ingest_name');\n\nfunction registerDelete(server) {\n  server.route({\n    path: '/api/kibana/ingest/{id}',\n    method: 'DELETE',\n    handler: function handler(req, reply) {\n      var kibanaIndex = server.config().get('kibana.index');\n      var callWithRequest = server.plugins.elasticsearch.callWithRequest;\n      var deletePatternParams = {\n        index: kibanaIndex,\n        type: 'index-pattern',\n        id: req.params.id\n      };\n\n      _bluebird2['default'].all([callWithRequest(req, 'delete', deletePatternParams), callWithRequest(req, 'indices.deleteTemplate', { name: (0, _commonLibConvert_pattern_and_ingest_name.patternToIngest)(req.params.id), ignore: [404] }), callWithRequest(req, 'transport.request', {\n        path: '_ingest/pipeline/' + (0, _commonLibConvert_pattern_and_ingest_name.patternToIngest)(req.params.id),\n        method: 'DELETE',\n        ignore: [404]\n      })]).then(function (pattern) {\n        reply({ success: true });\n      }, function (error) {\n        reply((0, _libHandle_es_error2['default'])(error));\n      });\n    }\n  });\n}\n\n;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9yb3V0ZXMvYXBpL2luZ2VzdC9yZWdpc3Rlcl9kZWxldGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O3dCQUFvQixVQUFVOzs7O2tDQUNKLDhCQUE4Qjs7Ozt3REFDVCx3REFBd0Q7O0FBRWhHLFNBQVMsY0FBYyxDQUFDLE1BQU0sRUFBRTtBQUNyQyxRQUFNLENBQUMsS0FBSyxDQUFDO0FBQ1gsUUFBSSxFQUFFLHlCQUF5QjtBQUMvQixVQUFNLEVBQUUsUUFBUTtBQUNoQixXQUFPLEVBQUUsaUJBQVUsR0FBRyxFQUFFLEtBQUssRUFBRTtBQUM3QixVQUFNLFdBQVcsR0FBRyxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQyxDQUFDO0FBQ3hELFVBQU0sZUFBZSxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLGVBQWUsQ0FBQztBQUNyRSxVQUFNLG1CQUFtQixHQUFHO0FBQzFCLGFBQUssRUFBRSxXQUFXO0FBQ2xCLFlBQUksRUFBRSxlQUFlO0FBQ3JCLFVBQUUsRUFBRSxHQUFHLENBQUMsTUFBTSxDQUFDLEVBQUU7T0FDbEIsQ0FBQzs7QUFFRiw0QkFBUSxHQUFHLENBQUMsQ0FDVixlQUFlLENBQUMsR0FBRyxFQUFFLFFBQVEsRUFBRSxtQkFBbUIsQ0FBQyxFQUNuRCxlQUFlLENBQUMsR0FBRyxFQUFFLHdCQUF3QixFQUFFLEVBQUMsSUFBSSxFQUFFLCtEQUFnQixHQUFHLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFDLENBQUMsRUFDckcsZUFBZSxDQUFDLEdBQUcsRUFBRSxtQkFBbUIsRUFBRTtBQUN4QyxZQUFJLHdCQUFzQiwrREFBZ0IsR0FBRyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsQUFBRTtBQUMxRCxjQUFNLEVBQUUsUUFBUTtBQUNoQixjQUFNLEVBQUUsQ0FBQyxHQUFHLENBQUM7T0FDZCxDQUFDLENBQ0gsQ0FBQyxDQUNELElBQUksQ0FDSCxVQUFVLE9BQU8sRUFBRTtBQUNqQixhQUFLLENBQUMsRUFBQyxPQUFPLEVBQUUsSUFBSSxFQUFDLENBQUMsQ0FBQztPQUN4QixFQUNELFVBQVUsS0FBSyxFQUFFO0FBQ2YsYUFBSyxDQUFDLHFDQUFjLEtBQUssQ0FBQyxDQUFDLENBQUM7T0FDN0IsQ0FDRixDQUFDO0tBQ0g7R0FDRixDQUFDLENBQUM7Q0FDSjs7QUFBQSxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9yb3V0ZXMvYXBpL2luZ2VzdC9yZWdpc3Rlcl9kZWxldGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUHJvbWlzZSBmcm9tICdibHVlYmlyZCc7XG5pbXBvcnQgaGFuZGxlRVNFcnJvciBmcm9tICcuLi8uLi8uLi9saWIvaGFuZGxlX2VzX2Vycm9yJztcbmltcG9ydCB7aW5nZXN0VG9QYXR0ZXJuLCBwYXR0ZXJuVG9Jbmdlc3R9IGZyb20gJy4uLy4uLy4uLy4uL2NvbW1vbi9saWIvY29udmVydF9wYXR0ZXJuX2FuZF9pbmdlc3RfbmFtZSc7XG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlckRlbGV0ZShzZXJ2ZXIpIHtcbiAgc2VydmVyLnJvdXRlKHtcbiAgICBwYXRoOiAnL2FwaS9raWJhbmEvaW5nZXN0L3tpZH0nLFxuICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgaGFuZGxlcjogZnVuY3Rpb24gKHJlcSwgcmVwbHkpIHtcbiAgICAgIGNvbnN0IGtpYmFuYUluZGV4ID0gc2VydmVyLmNvbmZpZygpLmdldCgna2liYW5hLmluZGV4Jyk7XG4gICAgICBjb25zdCBjYWxsV2l0aFJlcXVlc3QgPSBzZXJ2ZXIucGx1Z2lucy5lbGFzdGljc2VhcmNoLmNhbGxXaXRoUmVxdWVzdDtcbiAgICAgIGNvbnN0IGRlbGV0ZVBhdHRlcm5QYXJhbXMgPSB7XG4gICAgICAgIGluZGV4OiBraWJhbmFJbmRleCxcbiAgICAgICAgdHlwZTogJ2luZGV4LXBhdHRlcm4nLFxuICAgICAgICBpZDogcmVxLnBhcmFtcy5pZFxuICAgICAgfTtcblxuICAgICAgUHJvbWlzZS5hbGwoW1xuICAgICAgICBjYWxsV2l0aFJlcXVlc3QocmVxLCAnZGVsZXRlJywgZGVsZXRlUGF0dGVyblBhcmFtcyksXG4gICAgICAgIGNhbGxXaXRoUmVxdWVzdChyZXEsICdpbmRpY2VzLmRlbGV0ZVRlbXBsYXRlJywge25hbWU6IHBhdHRlcm5Ub0luZ2VzdChyZXEucGFyYW1zLmlkKSwgaWdub3JlOiBbNDA0XX0pLFxuICAgICAgICBjYWxsV2l0aFJlcXVlc3QocmVxLCAndHJhbnNwb3J0LnJlcXVlc3QnLCB7XG4gICAgICAgICAgcGF0aDogYF9pbmdlc3QvcGlwZWxpbmUvJHtwYXR0ZXJuVG9Jbmdlc3QocmVxLnBhcmFtcy5pZCl9YCxcbiAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgICAgIGlnbm9yZTogWzQwNF1cbiAgICAgICAgfSlcbiAgICAgIF0pXG4gICAgICAudGhlbihcbiAgICAgICAgZnVuY3Rpb24gKHBhdHRlcm4pIHtcbiAgICAgICAgICByZXBseSh7c3VjY2VzczogdHJ1ZX0pO1xuICAgICAgICB9LFxuICAgICAgICBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICByZXBseShoYW5kbGVFU0Vycm9yKGVycm9yKSk7XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgfVxuICB9KTtcbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/routes/api/ingest/register_delete.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;wBAAoB,UAAU;;;;kCACJ,8BAA8B;;;;wDACT,wDAAwD;;AAEhG,SAAS,cAAc,CAAC,MAAM,EAAE;AACrC,QAAM,CAAC,KAAK,CAAC;AACX,QAAI,EAAE,yBAAyB;AAC/B,UAAM,EAAE,QAAQ;AAChB,WAAO,EAAE,iBAAU,GAAG,EAAE,KAAK,EAAE;AAC7B,UAAM,WAAW,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;AACxD,UAAM,eAAe,GAAG,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,eAAe,CAAC;AACrE,UAAM,mBAAmB,GAAG;AAC1B,aAAK,EAAE,WAAW;AAClB,YAAI,EAAE,eAAe;AACrB,UAAE,EAAE,GAAG,CAAC,MAAM,CAAC,EAAE;OAClB,CAAC;;AAEF,4BAAQ,GAAG,CAAC,CACV,eAAe,CAAC,GAAG,EAAE,QAAQ,EAAE,mBAAmB,CAAC,EACnD,eAAe,CAAC,GAAG,EAAE,wBAAwB,EAAE,EAAC,IAAI,EAAE,+DAAgB,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,MAAM,EAAE,CAAC,GAAG,CAAC,EAAC,CAAC,EACrG,eAAe,CAAC,GAAG,EAAE,mBAAmB,EAAE;AACxC,YAAI,wBAAsB,+DAAgB,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,AAAE;AAC1D,cAAM,EAAE,QAAQ;AAChB,cAAM,EAAE,CAAC,GAAG,CAAC;OACd,CAAC,CACH,CAAC,CACD,IAAI,CACH,UAAU,OAAO,EAAE;AACjB,aAAK,CAAC,EAAC,OAAO,EAAE,IAAI,EAAC,CAAC,CAAC;OACxB,EACD,UAAU,KAAK,EAAE;AACf,aAAK,CAAC,qCAAc,KAAK,CAAC,CAAC,CAAC;OAC7B,CACF,CAAC;KACH;GACF,CAAC,CAAC;CACJ;;AAAA,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/routes/api/ingest/register_delete.js",
      "sourcesContent": [
        "import Promise from 'bluebird';\nimport handleESError from '../../../lib/handle_es_error';\nimport {ingestToPattern, patternToIngest} from '../../../../common/lib/convert_pattern_and_ingest_name';\n\nexport function registerDelete(server) {\n  server.route({\n    path: '/api/kibana/ingest/{id}',\n    method: 'DELETE',\n    handler: function (req, reply) {\n      const kibanaIndex = server.config().get('kibana.index');\n      const callWithRequest = server.plugins.elasticsearch.callWithRequest;\n      const deletePatternParams = {\n        index: kibanaIndex,\n        type: 'index-pattern',\n        id: req.params.id\n      };\n\n      Promise.all([\n        callWithRequest(req, 'delete', deletePatternParams),\n        callWithRequest(req, 'indices.deleteTemplate', {name: patternToIngest(req.params.id), ignore: [404]}),\n        callWithRequest(req, 'transport.request', {\n          path: `_ingest/pipeline/${patternToIngest(req.params.id)}`,\n          method: 'DELETE',\n          ignore: [404]\n        })\n      ])\n      .then(\n        function (pattern) {\n          reply({success: true});\n        },\n        function (error) {\n          reply(handleESError(error));\n        }\n      );\n    }\n  });\n};\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/routes/api/ingest/register_processors.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "../../../lib/handle_es_error",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "handleESError"
              }
            ]
          },
          {
            "source": "../../../lib/process_es_ingest_processors_response",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "handleResponse"
              }
            ]
          },
          {
            "source": "../../../../common/lib/case_conversion",
            "imported": [
              "keysToCamelCaseShallow",
              "keysToSnakeCaseShallow"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "keysToCamelCaseShallow",
                "local": "keysToCamelCaseShallow"
              },
              {
                "kind": "named",
                "imported": "keysToSnakeCaseShallow",
                "local": "keysToSnakeCaseShallow"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "registerProcessors",
            "server"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "registerProcessors",
              "exported": "registerProcessors"
            },
            {
              "kind": "local",
              "local": "server",
              "exported": "server"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports.registerProcessors = registerProcessors;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _libHandle_es_error = require('../../../lib/handle_es_error');\n\nvar _libHandle_es_error2 = _interopRequireDefault(_libHandle_es_error);\n\nvar _libProcess_es_ingest_processors_response = require('../../../lib/process_es_ingest_processors_response');\n\nvar _libProcess_es_ingest_processors_response2 = _interopRequireDefault(_libProcess_es_ingest_processors_response);\n\nvar _commonLibCase_conversion = require('../../../../common/lib/case_conversion');\n\nfunction registerProcessors(server) {\n  server.route({\n    path: '/api/kibana/ingest/processors',\n    method: 'GET',\n    handler: function handler(request, reply) {\n      var boundCallWithRequest = _lodash2['default'].partial(server.plugins.elasticsearch.callWithRequest, request);\n\n      return boundCallWithRequest('transport.request', {\n        path: '/_nodes/ingest',\n        method: 'GET'\n      }).then(_libProcess_es_ingest_processors_response2['default']).then(reply)['catch'](function (error) {\n        reply((0, _libHandle_es_error2['default'])(error));\n      });\n    }\n  });\n}\n\n;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9yb3V0ZXMvYXBpL2luZ2VzdC9yZWdpc3Rlcl9wcm9jZXNzb3JzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztzQkFBYyxRQUFROzs7O2tDQUNJLDhCQUE4Qjs7Ozt3REFDN0Isb0RBQW9EOzs7O3dDQUNoQix3Q0FBd0M7O0FBRWhHLFNBQVMsa0JBQWtCLENBQUMsTUFBTSxFQUFFO0FBQ3pDLFFBQU0sQ0FBQyxLQUFLLENBQUM7QUFDWCxRQUFJLEVBQUUsK0JBQStCO0FBQ3JDLFVBQU0sRUFBRSxLQUFLO0FBQ2IsV0FBTyxFQUFFLGlCQUFVLE9BQU8sRUFBRSxLQUFLLEVBQUU7QUFDakMsVUFBTSxvQkFBb0IsR0FBRyxvQkFBRSxPQUFPLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsZUFBZSxFQUFFLE9BQU8sQ0FBQyxDQUFDOztBQUU5RixhQUFPLG9CQUFvQixDQUFDLG1CQUFtQixFQUFFO0FBQy9DLFlBQUksRUFBRSxnQkFBZ0I7QUFDdEIsY0FBTSxFQUFFLEtBQUs7T0FDZCxDQUFDLENBQ0QsSUFBSSx1REFBZ0IsQ0FDcEIsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUNOLENBQUMsVUFBQyxLQUFLLEVBQUs7QUFDaEIsYUFBSyxDQUFDLHFDQUFjLEtBQUssQ0FBQyxDQUFDLENBQUM7T0FDN0IsQ0FBQyxDQUFDO0tBQ0o7R0FDRixDQUFDLENBQUM7Q0FDSjs7QUFBQSxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9yb3V0ZXMvYXBpL2luZ2VzdC9yZWdpc3Rlcl9wcm9jZXNzb3JzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBoYW5kbGVFU0Vycm9yIGZyb20gJy4uLy4uLy4uL2xpYi9oYW5kbGVfZXNfZXJyb3InO1xuaW1wb3J0IGhhbmRsZVJlc3BvbnNlIGZyb20gJy4uLy4uLy4uL2xpYi9wcm9jZXNzX2VzX2luZ2VzdF9wcm9jZXNzb3JzX3Jlc3BvbnNlJztcbmltcG9ydCB7IGtleXNUb0NhbWVsQ2FzZVNoYWxsb3csIGtleXNUb1NuYWtlQ2FzZVNoYWxsb3cgfSBmcm9tICcuLi8uLi8uLi8uLi9jb21tb24vbGliL2Nhc2VfY29udmVyc2lvbic7XG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlclByb2Nlc3NvcnMoc2VydmVyKSB7XG4gIHNlcnZlci5yb3V0ZSh7XG4gICAgcGF0aDogJy9hcGkva2liYW5hL2luZ2VzdC9wcm9jZXNzb3JzJyxcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIGhhbmRsZXI6IGZ1bmN0aW9uIChyZXF1ZXN0LCByZXBseSkge1xuICAgICAgY29uc3QgYm91bmRDYWxsV2l0aFJlcXVlc3QgPSBfLnBhcnRpYWwoc2VydmVyLnBsdWdpbnMuZWxhc3RpY3NlYXJjaC5jYWxsV2l0aFJlcXVlc3QsIHJlcXVlc3QpO1xuXG4gICAgICByZXR1cm4gYm91bmRDYWxsV2l0aFJlcXVlc3QoJ3RyYW5zcG9ydC5yZXF1ZXN0Jywge1xuICAgICAgICBwYXRoOiAnL19ub2Rlcy9pbmdlc3QnLFxuICAgICAgICBtZXRob2Q6ICdHRVQnXG4gICAgICB9KVxuICAgICAgLnRoZW4oaGFuZGxlUmVzcG9uc2UpXG4gICAgICAudGhlbihyZXBseSlcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgcmVwbHkoaGFuZGxlRVNFcnJvcihlcnJvcikpO1xuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/routes/api/ingest/register_processors.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;sBAAc,QAAQ;;;;kCACI,8BAA8B;;;;wDAC7B,oDAAoD;;;;wCAChB,wCAAwC;;AAEhG,SAAS,kBAAkB,CAAC,MAAM,EAAE;AACzC,QAAM,CAAC,KAAK,CAAC;AACX,QAAI,EAAE,+BAA+B;AACrC,UAAM,EAAE,KAAK;AACb,WAAO,EAAE,iBAAU,OAAO,EAAE,KAAK,EAAE;AACjC,UAAM,oBAAoB,GAAG,oBAAE,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,eAAe,EAAE,OAAO,CAAC,CAAC;;AAE9F,aAAO,oBAAoB,CAAC,mBAAmB,EAAE;AAC/C,YAAI,EAAE,gBAAgB;AACtB,cAAM,EAAE,KAAK;OACd,CAAC,CACD,IAAI,uDAAgB,CACpB,IAAI,CAAC,KAAK,CAAC,SACN,CAAC,UAAC,KAAK,EAAK;AAChB,aAAK,CAAC,qCAAc,KAAK,CAAC,CAAC,CAAC;OAC7B,CAAC,CAAC;KACJ;GACF,CAAC,CAAC;CACJ;;AAAA,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/routes/api/ingest/register_processors.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport handleESError from '../../../lib/handle_es_error';\nimport handleResponse from '../../../lib/process_es_ingest_processors_response';\nimport { keysToCamelCaseShallow, keysToSnakeCaseShallow } from '../../../../common/lib/case_conversion';\n\nexport function registerProcessors(server) {\n  server.route({\n    path: '/api/kibana/ingest/processors',\n    method: 'GET',\n    handler: function (request, reply) {\n      const boundCallWithRequest = _.partial(server.plugins.elasticsearch.callWithRequest, request);\n\n      return boundCallWithRequest('transport.request', {\n        path: '/_nodes/ingest',\n        method: 'GET'\n      })\n      .then(handleResponse)\n      .then(reply)\n      .catch((error) => {\n        reply(handleESError(error));\n      });\n    }\n  });\n};\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/lib/process_es_ingest_processors_response.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "processESIngestProcessorsResponse",
            "response"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "processESIngestProcessorsResponse",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "response",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = processESIngestProcessorsResponse;\nvar _ = require('lodash');\n\nfunction processESIngestProcessorsResponse(response) {\n  var nodes = _.get(response, 'nodes');\n\n  var results = _.chain(nodes).map('ingest.processors').reduce(function (result, processors) {\n    return result.concat(processors);\n  }).map('type').unique().value();\n\n  return results;\n}\n\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvcHJvY2Vzc19lc19pbmdlc3RfcHJvY2Vzc29yc19yZXNwb25zZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztxQkFFd0IsaUNBQWlDO0FBRnpELElBQU0sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQzs7QUFFYixTQUFTLGlDQUFpQyxDQUFDLFFBQVEsRUFBRTtBQUNsRSxNQUFNLEtBQUssR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSxPQUFPLENBQUMsQ0FBQzs7QUFFdkMsTUFBTSxPQUFPLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FDM0IsR0FBRyxDQUFDLG1CQUFtQixDQUFDLENBQ3hCLE1BQU0sQ0FBQyxVQUFDLE1BQU0sRUFBRSxVQUFVLEVBQUs7QUFDOUIsV0FBTyxNQUFNLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0dBQ2xDLENBQUMsQ0FDRCxHQUFHLENBQUMsTUFBTSxDQUFDLENBQ1gsTUFBTSxFQUFFLENBQ1IsS0FBSyxFQUFFLENBQUM7O0FBRVgsU0FBTyxPQUFPLENBQUM7Q0FDaEI7O0FBQUEsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9wbHVnaW5zL2tpYmFuYS9zZXJ2ZXIvbGliL3Byb2Nlc3NfZXNfaW5nZXN0X3Byb2Nlc3NvcnNfcmVzcG9uc2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHByb2Nlc3NFU0luZ2VzdFByb2Nlc3NvcnNSZXNwb25zZShyZXNwb25zZSkge1xuICBjb25zdCBub2RlcyA9IF8uZ2V0KHJlc3BvbnNlLCAnbm9kZXMnKTtcblxuICBjb25zdCByZXN1bHRzID0gXy5jaGFpbihub2RlcylcbiAgICAubWFwKCdpbmdlc3QucHJvY2Vzc29ycycpXG4gICAgLnJlZHVjZSgocmVzdWx0LCBwcm9jZXNzb3JzKSA9PiB7XG4gICAgICByZXR1cm4gcmVzdWx0LmNvbmNhdChwcm9jZXNzb3JzKTtcbiAgICB9KVxuICAgIC5tYXAoJ3R5cGUnKVxuICAgIC51bmlxdWUoKVxuICAgIC52YWx1ZSgpO1xuXG4gIHJldHVybiByZXN1bHRzO1xufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/lib/process_es_ingest_processors_response.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAEwB,iCAAiC;AAFzD,IAAM,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;;AAEb,SAAS,iCAAiC,CAAC,QAAQ,EAAE;AAClE,MAAM,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;;AAEvC,MAAM,OAAO,GAAG,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,CAC3B,GAAG,CAAC,mBAAmB,CAAC,CACxB,MAAM,CAAC,UAAC,MAAM,EAAE,UAAU,EAAK;AAC9B,WAAO,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;GAClC,CAAC,CACD,GAAG,CAAC,MAAM,CAAC,CACX,MAAM,EAAE,CACR,KAAK,EAAE,CAAC;;AAEX,SAAO,OAAO,CAAC;CAChB;;AAAA,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/lib/process_es_ingest_processors_response.js",
      "sourcesContent": [
        "const _ = require('lodash');\n\nexport default function processESIngestProcessorsResponse(response) {\n  const nodes = _.get(response, 'nodes');\n\n  const results = _.chain(nodes)\n    .map('ingest.processors')\n    .reduce((result, processors) => {\n      return result.concat(processors);\n    })\n    .map('type')\n    .unique()\n    .value();\n\n  return results;\n};\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/routes/api/ingest/register_simulate.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "../../../lib/handle_es_error",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "handleESError"
              }
            ]
          },
          {
            "source": "../../../lib/process_es_ingest_simulate_response",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "handleResponse"
              }
            ]
          },
          {
            "source": "../../../lib/process_es_ingest_simulate_error",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "handleError"
              }
            ]
          },
          {
            "source": "../../../lib/schemas/simulate_request_schema",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "simulateRequestSchema"
              }
            ]
          },
          {
            "source": "../../../lib/converters/ingest_simulate_api_kibana_to_es_converter",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "ingestSimulateApiKibanaToEsConverter"
              }
            ]
          },
          {
            "source": "../../../../common/lib/case_conversion",
            "imported": [
              "keysToCamelCaseShallow",
              "keysToSnakeCaseShallow"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "keysToCamelCaseShallow",
                "local": "keysToCamelCaseShallow"
              },
              {
                "kind": "named",
                "imported": "keysToSnakeCaseShallow",
                "local": "keysToSnakeCaseShallow"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "registerSimulate",
            "server"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "registerSimulate",
              "exported": "registerSimulate"
            },
            {
              "kind": "local",
              "local": "server",
              "exported": "server"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports.registerSimulate = registerSimulate;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _libHandle_es_error = require('../../../lib/handle_es_error');\n\nvar _libHandle_es_error2 = _interopRequireDefault(_libHandle_es_error);\n\nvar _libProcess_es_ingest_simulate_response = require('../../../lib/process_es_ingest_simulate_response');\n\nvar _libProcess_es_ingest_simulate_response2 = _interopRequireDefault(_libProcess_es_ingest_simulate_response);\n\nvar _libProcess_es_ingest_simulate_error = require('../../../lib/process_es_ingest_simulate_error');\n\nvar _libProcess_es_ingest_simulate_error2 = _interopRequireDefault(_libProcess_es_ingest_simulate_error);\n\nvar _libSchemasSimulate_request_schema = require('../../../lib/schemas/simulate_request_schema');\n\nvar _libSchemasSimulate_request_schema2 = _interopRequireDefault(_libSchemasSimulate_request_schema);\n\nvar _libConvertersIngest_simulate_api_kibana_to_es_converter = require('../../../lib/converters/ingest_simulate_api_kibana_to_es_converter');\n\nvar _libConvertersIngest_simulate_api_kibana_to_es_converter2 = _interopRequireDefault(_libConvertersIngest_simulate_api_kibana_to_es_converter);\n\nvar _commonLibCase_conversion = require('../../../../common/lib/case_conversion');\n\nfunction registerSimulate(server) {\n  server.route({\n    path: '/api/kibana/ingest/simulate',\n    method: 'POST',\n    config: {\n      validate: {\n        payload: _libSchemasSimulate_request_schema2['default']\n      }\n    },\n    handler: function handler(request, reply) {\n      var boundCallWithRequest = _lodash2['default'].partial(server.plugins.elasticsearch.callWithRequest, request);\n      var simulateApiDocument = request.payload;\n      var body = (0, _libConvertersIngest_simulate_api_kibana_to_es_converter2['default'])(simulateApiDocument);\n\n      return boundCallWithRequest('transport.request', {\n        path: '/_ingest/pipeline/_simulate',\n        query: { verbose: true },\n        method: 'POST',\n        body: body\n      }).then(_libProcess_es_ingest_simulate_response2['default'], _libProcess_es_ingest_simulate_error2['default']).then(function (processors) {\n        return _lodash2['default'].map(processors, _commonLibCase_conversion.keysToSnakeCaseShallow);\n      }).then(reply)['catch'](function (error) {\n        reply((0, _libHandle_es_error2['default'])(error));\n      });\n    }\n  });\n}\n\n;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9yb3V0ZXMvYXBpL2luZ2VzdC9yZWdpc3Rlcl9zaW11bGF0ZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7c0JBQWMsUUFBUTs7OztrQ0FDSSw4QkFBOEI7Ozs7c0RBQzdCLGtEQUFrRDs7OzttREFDckQsK0NBQStDOzs7O2lEQUNyQyw4Q0FBOEM7Ozs7dUVBQy9CLG9FQUFvRTs7Ozt3Q0FDdEQsd0NBQXdDOztBQUVoRyxTQUFTLGdCQUFnQixDQUFDLE1BQU0sRUFBRTtBQUN2QyxRQUFNLENBQUMsS0FBSyxDQUFDO0FBQ1gsUUFBSSxFQUFFLDZCQUE2QjtBQUNuQyxVQUFNLEVBQUUsTUFBTTtBQUNkLFVBQU0sRUFBRTtBQUNOLGNBQVEsRUFBRTtBQUNSLGVBQU8sZ0RBQXVCO09BQy9CO0tBQ0Y7QUFDRCxXQUFPLEVBQUUsaUJBQVUsT0FBTyxFQUFFLEtBQUssRUFBRTtBQUNqQyxVQUFNLG9CQUFvQixHQUFHLG9CQUFFLE9BQU8sQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxlQUFlLEVBQUUsT0FBTyxDQUFDLENBQUM7QUFDOUYsVUFBTSxtQkFBbUIsR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDO0FBQzVDLFVBQU0sSUFBSSxHQUFHLDBFQUFxQyxtQkFBbUIsQ0FBQyxDQUFDOztBQUV2RSxhQUFPLG9CQUFvQixDQUFDLG1CQUFtQixFQUFFO0FBQy9DLFlBQUksRUFBRSw2QkFBNkI7QUFDbkMsYUFBSyxFQUFFLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRTtBQUN4QixjQUFNLEVBQUUsTUFBTTtBQUNkLFlBQUksRUFBRSxJQUFJO09BQ1gsQ0FBQyxDQUNELElBQUksdUdBQTZCLENBQ2pDLElBQUksQ0FBQyxVQUFDLFVBQVU7ZUFBSyxvQkFBRSxHQUFHLENBQUMsVUFBVSxtREFBeUI7T0FBQSxDQUFDLENBQy9ELElBQUksQ0FBQyxLQUFLLENBQUMsU0FDTixDQUFDLFVBQUMsS0FBSyxFQUFLO0FBQ2hCLGFBQUssQ0FBQyxxQ0FBYyxLQUFLLENBQUMsQ0FBQyxDQUFDO09BQzdCLENBQUMsQ0FBQztLQUNKO0dBQ0YsQ0FBQyxDQUFDO0NBQ0o7O0FBQUEsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9wbHVnaW5zL2tpYmFuYS9zZXJ2ZXIvcm91dGVzL2FwaS9pbmdlc3QvcmVnaXN0ZXJfc2ltdWxhdGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IGhhbmRsZUVTRXJyb3IgZnJvbSAnLi4vLi4vLi4vbGliL2hhbmRsZV9lc19lcnJvcic7XG5pbXBvcnQgaGFuZGxlUmVzcG9uc2UgZnJvbSAnLi4vLi4vLi4vbGliL3Byb2Nlc3NfZXNfaW5nZXN0X3NpbXVsYXRlX3Jlc3BvbnNlJztcbmltcG9ydCBoYW5kbGVFcnJvciBmcm9tICcuLi8uLi8uLi9saWIvcHJvY2Vzc19lc19pbmdlc3Rfc2ltdWxhdGVfZXJyb3InO1xuaW1wb3J0IHNpbXVsYXRlUmVxdWVzdFNjaGVtYSBmcm9tICcuLi8uLi8uLi9saWIvc2NoZW1hcy9zaW11bGF0ZV9yZXF1ZXN0X3NjaGVtYSc7XG5pbXBvcnQgaW5nZXN0U2ltdWxhdGVBcGlLaWJhbmFUb0VzQ29udmVydGVyIGZyb20gJy4uLy4uLy4uL2xpYi9jb252ZXJ0ZXJzL2luZ2VzdF9zaW11bGF0ZV9hcGlfa2liYW5hX3RvX2VzX2NvbnZlcnRlcic7XG5pbXBvcnQgeyBrZXlzVG9DYW1lbENhc2VTaGFsbG93LCBrZXlzVG9TbmFrZUNhc2VTaGFsbG93IH0gZnJvbSAnLi4vLi4vLi4vLi4vY29tbW9uL2xpYi9jYXNlX2NvbnZlcnNpb24nO1xuXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJTaW11bGF0ZShzZXJ2ZXIpIHtcbiAgc2VydmVyLnJvdXRlKHtcbiAgICBwYXRoOiAnL2FwaS9raWJhbmEvaW5nZXN0L3NpbXVsYXRlJyxcbiAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICBjb25maWc6IHtcbiAgICAgIHZhbGlkYXRlOiB7XG4gICAgICAgIHBheWxvYWQ6IHNpbXVsYXRlUmVxdWVzdFNjaGVtYVxuICAgICAgfVxuICAgIH0sXG4gICAgaGFuZGxlcjogZnVuY3Rpb24gKHJlcXVlc3QsIHJlcGx5KSB7XG4gICAgICBjb25zdCBib3VuZENhbGxXaXRoUmVxdWVzdCA9IF8ucGFydGlhbChzZXJ2ZXIucGx1Z2lucy5lbGFzdGljc2VhcmNoLmNhbGxXaXRoUmVxdWVzdCwgcmVxdWVzdCk7XG4gICAgICBjb25zdCBzaW11bGF0ZUFwaURvY3VtZW50ID0gcmVxdWVzdC5wYXlsb2FkO1xuICAgICAgY29uc3QgYm9keSA9IGluZ2VzdFNpbXVsYXRlQXBpS2liYW5hVG9Fc0NvbnZlcnRlcihzaW11bGF0ZUFwaURvY3VtZW50KTtcblxuICAgICAgcmV0dXJuIGJvdW5kQ2FsbFdpdGhSZXF1ZXN0KCd0cmFuc3BvcnQucmVxdWVzdCcsIHtcbiAgICAgICAgcGF0aDogJy9faW5nZXN0L3BpcGVsaW5lL19zaW11bGF0ZScsXG4gICAgICAgIHF1ZXJ5OiB7IHZlcmJvc2U6IHRydWUgfSxcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHk6IGJvZHlcbiAgICAgIH0pXG4gICAgICAudGhlbihoYW5kbGVSZXNwb25zZSwgaGFuZGxlRXJyb3IpXG4gICAgICAudGhlbigocHJvY2Vzc29ycykgPT4gXy5tYXAocHJvY2Vzc29ycywga2V5c1RvU25ha2VDYXNlU2hhbGxvdykpXG4gICAgICAudGhlbihyZXBseSlcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgcmVwbHkoaGFuZGxlRVNFcnJvcihlcnJvcikpO1xuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/routes/api/ingest/register_simulate.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;sBAAc,QAAQ;;;;kCACI,8BAA8B;;;;sDAC7B,kDAAkD;;;;mDACrD,+CAA+C;;;;iDACrC,8CAA8C;;;;uEAC/B,oEAAoE;;;;wCACtD,wCAAwC;;AAEhG,SAAS,gBAAgB,CAAC,MAAM,EAAE;AACvC,QAAM,CAAC,KAAK,CAAC;AACX,QAAI,EAAE,6BAA6B;AACnC,UAAM,EAAE,MAAM;AACd,UAAM,EAAE;AACN,cAAQ,EAAE;AACR,eAAO,gDAAuB;OAC/B;KACF;AACD,WAAO,EAAE,iBAAU,OAAO,EAAE,KAAK,EAAE;AACjC,UAAM,oBAAoB,GAAG,oBAAE,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,eAAe,EAAE,OAAO,CAAC,CAAC;AAC9F,UAAM,mBAAmB,GAAG,OAAO,CAAC,OAAO,CAAC;AAC5C,UAAM,IAAI,GAAG,0EAAqC,mBAAmB,CAAC,CAAC;;AAEvE,aAAO,oBAAoB,CAAC,mBAAmB,EAAE;AAC/C,YAAI,EAAE,6BAA6B;AACnC,aAAK,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE;AACxB,cAAM,EAAE,MAAM;AACd,YAAI,EAAE,IAAI;OACX,CAAC,CACD,IAAI,uGAA6B,CACjC,IAAI,CAAC,UAAC,UAAU;eAAK,oBAAE,GAAG,CAAC,UAAU,mDAAyB;OAAA,CAAC,CAC/D,IAAI,CAAC,KAAK,CAAC,SACN,CAAC,UAAC,KAAK,EAAK;AAChB,aAAK,CAAC,qCAAc,KAAK,CAAC,CAAC,CAAC;OAC7B,CAAC,CAAC;KACJ;GACF,CAAC,CAAC;CACJ;;AAAA,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/routes/api/ingest/register_simulate.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport handleESError from '../../../lib/handle_es_error';\nimport handleResponse from '../../../lib/process_es_ingest_simulate_response';\nimport handleError from '../../../lib/process_es_ingest_simulate_error';\nimport simulateRequestSchema from '../../../lib/schemas/simulate_request_schema';\nimport ingestSimulateApiKibanaToEsConverter from '../../../lib/converters/ingest_simulate_api_kibana_to_es_converter';\nimport { keysToCamelCaseShallow, keysToSnakeCaseShallow } from '../../../../common/lib/case_conversion';\n\nexport function registerSimulate(server) {\n  server.route({\n    path: '/api/kibana/ingest/simulate',\n    method: 'POST',\n    config: {\n      validate: {\n        payload: simulateRequestSchema\n      }\n    },\n    handler: function (request, reply) {\n      const boundCallWithRequest = _.partial(server.plugins.elasticsearch.callWithRequest, request);\n      const simulateApiDocument = request.payload;\n      const body = ingestSimulateApiKibanaToEsConverter(simulateApiDocument);\n\n      return boundCallWithRequest('transport.request', {\n        path: '/_ingest/pipeline/_simulate',\n        query: { verbose: true },\n        method: 'POST',\n        body: body\n      })\n      .then(handleResponse, handleError)\n      .then((processors) => _.map(processors, keysToSnakeCaseShallow))\n      .then(reply)\n      .catch((error) => {\n        reply(handleESError(error));\n      });\n    }\n  });\n};\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/lib/process_es_ingest_simulate_response.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "processESIngestSimulateResponse",
            "resp"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "processESIngestSimulateResponse",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "resp",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = processESIngestSimulateResponse;\nvar _ = require('lodash');\n\nfunction buildError(error) {\n  var errorMessage = _.get(error, 'root_cause[0].reason') || _.get(error, 'root_cause[0].type');\n  if (!errorMessage) return;\n\n  return {\n    compile: false,\n    message: errorMessage\n  };\n}\n\nfunction processESIngestSimulateResponse(resp) {\n  var processorResults = _.get(resp, 'docs[0].processor_results');\n  var results = processorResults.map(function (processorResult) {\n    return {\n      processorId: _.get(processorResult, 'tag'),\n      output: _.get(processorResult, 'doc._source'),\n      error: buildError(_.get(processorResult, 'error'))\n    };\n  });\n\n  return results;\n}\n\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvcHJvY2Vzc19lc19pbmdlc3Rfc2ltdWxhdGVfcmVzcG9uc2UuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7cUJBWXdCLCtCQUErQjtBQVp2RCxJQUFNLENBQUMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7O0FBRTVCLFNBQVMsVUFBVSxDQUFDLEtBQUssRUFBRTtBQUN6QixNQUFNLFlBQVksR0FBSSxDQUFDLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxzQkFBc0IsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsS0FBSyxFQUFFLG9CQUFvQixDQUFDLENBQUM7QUFDakcsTUFBSSxDQUFDLFlBQVksRUFBRSxPQUFPOztBQUUxQixTQUFPO0FBQ0wsV0FBTyxFQUFFLEtBQUs7QUFDZCxXQUFPLEVBQUUsWUFBWTtHQUN0QixDQUFDO0NBQ0g7O0FBRWMsU0FBUywrQkFBK0IsQ0FBQyxJQUFJLEVBQUU7QUFDNUQsTUFBTSxnQkFBZ0IsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSwyQkFBMkIsQ0FBQyxDQUFDO0FBQ2xFLE1BQU0sT0FBTyxHQUFHLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxVQUFDLGVBQWUsRUFBSztBQUN4RCxXQUFPO0FBQ0wsaUJBQVcsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLGVBQWUsRUFBRSxLQUFLLENBQUM7QUFDMUMsWUFBTSxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsZUFBZSxFQUFFLGFBQWEsQ0FBQztBQUM3QyxXQUFLLEVBQUUsVUFBVSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsZUFBZSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0tBQ25ELENBQUM7R0FDSCxDQUFDLENBQUM7O0FBRUgsU0FBTyxPQUFPLENBQUM7Q0FDaEI7O0FBQUEsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9wbHVnaW5zL2tpYmFuYS9zZXJ2ZXIvbGliL3Byb2Nlc3NfZXNfaW5nZXN0X3NpbXVsYXRlX3Jlc3BvbnNlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xuXG5mdW5jdGlvbiBidWlsZEVycm9yKGVycm9yKSB7XG4gIGNvbnN0IGVycm9yTWVzc2FnZSA9ICBfLmdldChlcnJvciwgJ3Jvb3RfY2F1c2VbMF0ucmVhc29uJykgfHwgXy5nZXQoZXJyb3IsICdyb290X2NhdXNlWzBdLnR5cGUnKTtcbiAgaWYgKCFlcnJvck1lc3NhZ2UpIHJldHVybjtcblxuICByZXR1cm4ge1xuICAgIGNvbXBpbGU6IGZhbHNlLFxuICAgIG1lc3NhZ2U6IGVycm9yTWVzc2FnZVxuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBwcm9jZXNzRVNJbmdlc3RTaW11bGF0ZVJlc3BvbnNlKHJlc3ApIHtcbiAgY29uc3QgcHJvY2Vzc29yUmVzdWx0cyA9IF8uZ2V0KHJlc3AsICdkb2NzWzBdLnByb2Nlc3Nvcl9yZXN1bHRzJyk7XG4gIGNvbnN0IHJlc3VsdHMgPSBwcm9jZXNzb3JSZXN1bHRzLm1hcCgocHJvY2Vzc29yUmVzdWx0KSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHByb2Nlc3NvcklkOiBfLmdldChwcm9jZXNzb3JSZXN1bHQsICd0YWcnKSxcbiAgICAgIG91dHB1dDogXy5nZXQocHJvY2Vzc29yUmVzdWx0LCAnZG9jLl9zb3VyY2UnKSxcbiAgICAgIGVycm9yOiBidWlsZEVycm9yKF8uZ2V0KHByb2Nlc3NvclJlc3VsdCwgJ2Vycm9yJykpXG4gICAgfTtcbiAgfSk7XG5cbiAgcmV0dXJuIHJlc3VsdHM7XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/lib/process_es_ingest_simulate_response.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAYwB,+BAA+B;AAZvD,IAAM,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;;AAE5B,SAAS,UAAU,CAAC,KAAK,EAAE;AACzB,MAAM,YAAY,GAAI,CAAC,CAAC,GAAG,CAAC,KAAK,EAAE,sBAAsB,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,KAAK,EAAE,oBAAoB,CAAC,CAAC;AACjG,MAAI,CAAC,YAAY,EAAE,OAAO;;AAE1B,SAAO;AACL,WAAO,EAAE,KAAK;AACd,WAAO,EAAE,YAAY;GACtB,CAAC;CACH;;AAEc,SAAS,+BAA+B,CAAC,IAAI,EAAE;AAC5D,MAAM,gBAAgB,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,EAAE,2BAA2B,CAAC,CAAC;AAClE,MAAM,OAAO,GAAG,gBAAgB,CAAC,GAAG,CAAC,UAAC,eAAe,EAAK;AACxD,WAAO;AACL,iBAAW,EAAE,CAAC,CAAC,GAAG,CAAC,eAAe,EAAE,KAAK,CAAC;AAC1C,YAAM,EAAE,CAAC,CAAC,GAAG,CAAC,eAAe,EAAE,aAAa,CAAC;AAC7C,WAAK,EAAE,UAAU,CAAC,CAAC,CAAC,GAAG,CAAC,eAAe,EAAE,OAAO,CAAC,CAAC;KACnD,CAAC;GACH,CAAC,CAAC;;AAEH,SAAO,OAAO,CAAC;CAChB;;AAAA,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/lib/process_es_ingest_simulate_response.js",
      "sourcesContent": [
        "const _ = require('lodash');\n\nfunction buildError(error) {\n  const errorMessage =  _.get(error, 'root_cause[0].reason') || _.get(error, 'root_cause[0].type');\n  if (!errorMessage) return;\n\n  return {\n    compile: false,\n    message: errorMessage\n  };\n}\n\nexport default function processESIngestSimulateResponse(resp) {\n  const processorResults = _.get(resp, 'docs[0].processor_results');\n  const results = processorResults.map((processorResult) => {\n    return {\n      processorId: _.get(processorResult, 'tag'),\n      output: _.get(processorResult, 'doc._source'),\n      error: buildError(_.get(processorResult, 'error'))\n    };\n  });\n\n  return results;\n};\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/lib/process_es_ingest_simulate_error.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "processESIngestSimulateError",
            "error"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "processESIngestSimulateError",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "error",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = processESIngestSimulateError;\nvar _ = require('lodash');\n\nfunction buildError(error) {\n  var errorMessage = _.get(error, 'body.error.root_cause[0].reason');\n  return {\n    compile: true,\n    message: errorMessage\n  };\n}\n\nfunction processESIngestSimulateError(error) {\n  var processorId = _.get(error, 'body.error.root_cause[0].header.processor_tag');\n  if (!processorId) throw error;\n\n  var results = [{\n    processorId: processorId,\n    error: buildError(error)\n  }];\n\n  return results;\n}\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvcHJvY2Vzc19lc19pbmdlc3Rfc2ltdWxhdGVfZXJyb3IuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7cUJBVXdCLDRCQUE0QjtBQVZwRCxJQUFNLENBQUMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7O0FBRTVCLFNBQVMsVUFBVSxDQUFDLEtBQUssRUFBRTtBQUN6QixNQUFNLFlBQVksR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxpQ0FBaUMsQ0FBQyxDQUFDO0FBQ3JFLFNBQU87QUFDTCxXQUFPLEVBQUUsSUFBSTtBQUNiLFdBQU8sRUFBRSxZQUFZO0dBQ3RCLENBQUM7Q0FDSDs7QUFFYyxTQUFTLDRCQUE0QixDQUFDLEtBQUssRUFBRTtBQUMxRCxNQUFNLFdBQVcsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSwrQ0FBK0MsQ0FBQyxDQUFDO0FBQ2xGLE1BQUksQ0FBQyxXQUFXLEVBQUUsTUFBTSxLQUFLLENBQUM7O0FBRTlCLE1BQU0sT0FBTyxHQUFHLENBQ2Q7QUFDRSxlQUFXLEVBQUUsV0FBVztBQUN4QixTQUFLLEVBQUUsVUFBVSxDQUFDLEtBQUssQ0FBQztHQUN6QixDQUNGLENBQUM7O0FBRUYsU0FBTyxPQUFPLENBQUM7Q0FDaEIiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvcGx1Z2lucy9raWJhbmEvc2VydmVyL2xpYi9wcm9jZXNzX2VzX2luZ2VzdF9zaW11bGF0ZV9lcnJvci5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcblxuZnVuY3Rpb24gYnVpbGRFcnJvcihlcnJvcikge1xuICBjb25zdCBlcnJvck1lc3NhZ2UgPSBfLmdldChlcnJvciwgJ2JvZHkuZXJyb3Iucm9vdF9jYXVzZVswXS5yZWFzb24nKTtcbiAgcmV0dXJuIHtcbiAgICBjb21waWxlOiB0cnVlLFxuICAgIG1lc3NhZ2U6IGVycm9yTWVzc2FnZVxuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBwcm9jZXNzRVNJbmdlc3RTaW11bGF0ZUVycm9yKGVycm9yKSB7XG4gIGNvbnN0IHByb2Nlc3NvcklkID0gXy5nZXQoZXJyb3IsICdib2R5LmVycm9yLnJvb3RfY2F1c2VbMF0uaGVhZGVyLnByb2Nlc3Nvcl90YWcnKTtcbiAgaWYgKCFwcm9jZXNzb3JJZCkgdGhyb3cgZXJyb3I7XG5cbiAgY29uc3QgcmVzdWx0cyA9IFtcbiAgICB7XG4gICAgICBwcm9jZXNzb3JJZDogcHJvY2Vzc29ySWQsXG4gICAgICBlcnJvcjogYnVpbGRFcnJvcihlcnJvcilcbiAgICB9XG4gIF07XG5cbiAgcmV0dXJuIHJlc3VsdHM7XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/lib/process_es_ingest_simulate_error.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAUwB,4BAA4B;AAVpD,IAAM,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;;AAE5B,SAAS,UAAU,CAAC,KAAK,EAAE;AACzB,MAAM,YAAY,GAAG,CAAC,CAAC,GAAG,CAAC,KAAK,EAAE,iCAAiC,CAAC,CAAC;AACrE,SAAO;AACL,WAAO,EAAE,IAAI;AACb,WAAO,EAAE,YAAY;GACtB,CAAC;CACH;;AAEc,SAAS,4BAA4B,CAAC,KAAK,EAAE;AAC1D,MAAM,WAAW,GAAG,CAAC,CAAC,GAAG,CAAC,KAAK,EAAE,+CAA+C,CAAC,CAAC;AAClF,MAAI,CAAC,WAAW,EAAE,MAAM,KAAK,CAAC;;AAE9B,MAAM,OAAO,GAAG,CACd;AACE,eAAW,EAAE,WAAW;AACxB,SAAK,EAAE,UAAU,CAAC,KAAK,CAAC;GACzB,CACF,CAAC;;AAEF,SAAO,OAAO,CAAC;CAChB",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/lib/process_es_ingest_simulate_error.js",
      "sourcesContent": [
        "const _ = require('lodash');\n\nfunction buildError(error) {\n  const errorMessage = _.get(error, 'body.error.root_cause[0].reason');\n  return {\n    compile: true,\n    message: errorMessage\n  };\n}\n\nexport default function processESIngestSimulateError(error) {\n  const processorId = _.get(error, 'body.error.root_cause[0].header.processor_tag');\n  if (!processorId) throw error;\n\n  const results = [\n    {\n      processorId: processorId,\n      error: buildError(error)\n    }\n  ];\n\n  return results;\n}\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/lib/schemas/simulate_request_schema.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "joi",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Joi"
              }
            ]
          },
          {
            "source": "../processors/schemas",
            "imported": [
              "*"
            ],
            "specifiers": [
              {
                "kind": "namespace",
                "local": "ingestProcessorSchemas"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default",
        "interop-require-wildcard"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _joi = require('joi');\n\nvar _joi2 = _interopRequireDefault(_joi);\n\nvar _processorsSchemas = require('../processors/schemas');\n\nvar ingestProcessorSchemas = _interopRequireWildcard(_processorsSchemas);\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nexports['default'] = _joi2['default'].object({\n  processors: _joi2['default'].array().items(_lodash2['default'].values(ingestProcessorSchemas)).required().min(1),\n  input: _joi2['default'].object().required()\n});\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvc2NoZW1hcy9zaW11bGF0ZV9yZXF1ZXN0X3NjaGVtYS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O21CQUFnQixLQUFLOzs7O2lDQUNtQix1QkFBdUI7O0lBQW5ELHNCQUFzQjs7c0JBQ3BCLFFBQVE7Ozs7cUJBRVAsaUJBQUksTUFBTSxDQUFDO0FBQ3hCLFlBQVUsRUFBRSxpQkFBSSxLQUFLLEVBQUUsQ0FBQyxLQUFLLENBQUMsb0JBQUUsTUFBTSxDQUFDLHNCQUFzQixDQUFDLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQ2pGLE9BQUssRUFBRSxpQkFBSSxNQUFNLEVBQUUsQ0FBQyxRQUFRLEVBQUU7Q0FDL0IsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9wbHVnaW5zL2tpYmFuYS9zZXJ2ZXIvbGliL3NjaGVtYXMvc2ltdWxhdGVfcmVxdWVzdF9zY2hlbWEuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgSm9pIGZyb20gJ2pvaSc7XG5pbXBvcnQgKiBhcyBpbmdlc3RQcm9jZXNzb3JTY2hlbWFzIGZyb20gJy4uL3Byb2Nlc3NvcnMvc2NoZW1hcyc7XG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuXG5leHBvcnQgZGVmYXVsdCBKb2kub2JqZWN0KHtcbiAgcHJvY2Vzc29yczogSm9pLmFycmF5KCkuaXRlbXMoXy52YWx1ZXMoaW5nZXN0UHJvY2Vzc29yU2NoZW1hcykpLnJlcXVpcmVkKCkubWluKDEpLFxuICBpbnB1dDogSm9pLm9iamVjdCgpLnJlcXVpcmVkKClcbn0pO1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/lib/schemas/simulate_request_schema.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;mBAAgB,KAAK;;;;iCACmB,uBAAuB;;IAAnD,sBAAsB;;sBACpB,QAAQ;;;;qBAEP,iBAAI,MAAM,CAAC;AACxB,YAAU,EAAE,iBAAI,KAAK,EAAE,CAAC,KAAK,CAAC,oBAAE,MAAM,CAAC,sBAAsB,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;AACjF,OAAK,EAAE,iBAAI,MAAM,EAAE,CAAC,QAAQ,EAAE;CAC/B,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/lib/schemas/simulate_request_schema.js",
      "sourcesContent": [
        "import Joi from 'joi';\nimport * as ingestProcessorSchemas from '../processors/schemas';\nimport _ from 'lodash';\n\nexport default Joi.object({\n  processors: Joi.array().items(_.values(ingestProcessorSchemas)).required().min(1),\n  input: Joi.object().required()\n});\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/lib/converters/ingest_simulate_api_kibana_to_es_converter.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "./ingest_pipeline_api_kibana_to_es_converter",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "ingestPipelineApiKibanaToEsConverter"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "ingestSimulateApiKibanaToEsConverter",
            "simulateApiDocument"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "ingestSimulateApiKibanaToEsConverter",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "simulateApiDocument",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = ingestSimulateApiKibanaToEsConverter;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _ingest_pipeline_api_kibana_to_es_converter = require('./ingest_pipeline_api_kibana_to_es_converter');\n\nvar _ingest_pipeline_api_kibana_to_es_converter2 = _interopRequireDefault(_ingest_pipeline_api_kibana_to_es_converter);\n\nfunction ingestSimulateApiKibanaToEsConverter(simulateApiDocument) {\n  return {\n    pipeline: (0, _ingest_pipeline_api_kibana_to_es_converter2['default'])(simulateApiDocument.processors),\n    docs: [{\n      _source: simulateApiDocument.input\n    }]\n  };\n}\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9saWIvY29udmVydGVycy9pbmdlc3Rfc2ltdWxhdGVfYXBpX2tpYmFuYV90b19lc19jb252ZXJ0ZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7cUJBR3dCLG9DQUFvQzs7OztzQkFIOUMsUUFBUTs7OzswREFDMkIsOENBQThDOzs7O0FBRWhGLFNBQVMsb0NBQW9DLENBQUMsbUJBQW1CLEVBQUU7QUFDaEYsU0FBTztBQUNMLFlBQVEsRUFBRSw2REFBcUMsbUJBQW1CLENBQUMsVUFBVSxDQUFDO0FBQzlFLFFBQUksRUFBRSxDQUNKO0FBQ0UsYUFBTyxFQUFFLG1CQUFtQixDQUFDLEtBQUs7S0FDbkMsQ0FDRjtHQUNGLENBQUM7Q0FDSCIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9wbHVnaW5zL2tpYmFuYS9zZXJ2ZXIvbGliL2NvbnZlcnRlcnMvaW5nZXN0X3NpbXVsYXRlX2FwaV9raWJhbmFfdG9fZXNfY29udmVydGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBpbmdlc3RQaXBlbGluZUFwaUtpYmFuYVRvRXNDb252ZXJ0ZXIgZnJvbSAnLi9pbmdlc3RfcGlwZWxpbmVfYXBpX2tpYmFuYV90b19lc19jb252ZXJ0ZXInO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpbmdlc3RTaW11bGF0ZUFwaUtpYmFuYVRvRXNDb252ZXJ0ZXIoc2ltdWxhdGVBcGlEb2N1bWVudCkge1xuICByZXR1cm4ge1xuICAgIHBpcGVsaW5lOiBpbmdlc3RQaXBlbGluZUFwaUtpYmFuYVRvRXNDb252ZXJ0ZXIoc2ltdWxhdGVBcGlEb2N1bWVudC5wcm9jZXNzb3JzKSxcbiAgICBkb2NzOiBbXG4gICAgICB7XG4gICAgICAgIF9zb3VyY2U6IHNpbXVsYXRlQXBpRG9jdW1lbnQuaW5wdXRcbiAgICAgIH1cbiAgICBdXG4gIH07XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/lib/converters/ingest_simulate_api_kibana_to_es_converter.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAGwB,oCAAoC;;;;sBAH9C,QAAQ;;;;0DAC2B,8CAA8C;;;;AAEhF,SAAS,oCAAoC,CAAC,mBAAmB,EAAE;AAChF,SAAO;AACL,YAAQ,EAAE,6DAAqC,mBAAmB,CAAC,UAAU,CAAC;AAC9E,QAAI,EAAE,CACJ;AACE,aAAO,EAAE,mBAAmB,CAAC,KAAK;KACnC,CACF;GACF,CAAC;CACH",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/lib/converters/ingest_simulate_api_kibana_to_es_converter.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport ingestPipelineApiKibanaToEsConverter from './ingest_pipeline_api_kibana_to_es_converter';\n\nexport default function ingestSimulateApiKibanaToEsConverter(simulateApiDocument) {\n  return {\n    pipeline: ingestPipelineApiKibanaToEsConverter(simulateApiDocument.processors),\n    docs: [\n      {\n        _source: simulateApiDocument.input\n      }\n    ]\n  };\n}\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/routes/api/ingest/register_data.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "bluebird",
            "imported": [
              "Promise"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Promise",
                "local": "Promise"
              }
            ]
          },
          {
            "source": "csv-parse",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "parse"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "highland",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "hi"
              }
            ]
          },
          {
            "source": "../../../../common/lib/convert_pattern_and_ingest_name",
            "imported": [
              "patternToIngest"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "patternToIngest",
                "local": "patternToIngest"
              }
            ]
          },
          {
            "source": "stream",
            "imported": [
              "PassThrough"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "PassThrough",
                "local": "PassThrough"
              }
            ]
          },
          {
            "source": "JSONStream",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "JSONStream"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "registerData",
            "server"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "registerData",
              "exported": "registerData"
            },
            {
              "kind": "local",
              "local": "server",
              "exported": "server"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports.registerData = registerData;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _bluebird = require('bluebird');\n\nvar _csvParse = require('csv-parse');\n\nvar _csvParse2 = _interopRequireDefault(_csvParse);\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _highland = require('highland');\n\nvar _highland2 = _interopRequireDefault(_highland);\n\nvar _commonLibConvert_pattern_and_ingest_name = require('../../../../common/lib/convert_pattern_and_ingest_name');\n\nvar _stream = require('stream');\n\nvar _JSONStream = require('JSONStream');\n\nvar _JSONStream2 = _interopRequireDefault(_JSONStream);\n\nvar ONE_GIGABYTE = 1024 * 1024 * 1024;\n\nfunction registerData(server) {\n  server.route({\n    path: '/api/kibana/{id}/_data',\n    method: 'POST',\n    config: {\n      payload: {\n        output: 'stream',\n        maxBytes: ONE_GIGABYTE\n      }\n    },\n    handler: function handler(req, reply) {\n      var boundCallWithRequest = _lodash2['default'].partial(server.plugins.elasticsearch.callWithRequest, req);\n      var indexPattern = req.params.id;\n      var usePipeline = req.query.pipeline === 'true';\n      var delimiter = _lodash2['default'].get(req.query, 'csv_delimiter', ',');\n      var responseStream = new _stream.PassThrough();\n      var parser = (0, _csvParse2['default'])({\n        columns: true,\n        auto_parse: true,\n        delimiter: delimiter,\n        skip_empty_lines: true\n      });\n\n      var csv = req.payload.csv ? req.payload.csv : req.payload;\n      var fileName = req.payload.csv ? csv.hapi.filename : '';\n\n      var currentLine = 2; // Starts at 2 since we parse the header separately\n\n      csv.pipe(parser);\n\n      (0, _highland2['default'])(parser).consume(function (err, doc, push, next) {\n        if (err) {\n          push(err, null);\n          next();\n        } else if (doc === _highland2['default'].nil) {\n          // pass nil (end event) along the stream\n          push(null, doc);\n        } else {\n          push(null, { index: _lodash2['default'].isEmpty(fileName) ? {} : { _id: fileName + ':' + currentLine } });\n          push(null, doc);\n          currentLine++;\n          next();\n        }\n      }).batch(200).map(function (bulkBody) {\n        var bulkParams = {\n          index: indexPattern,\n          type: 'default',\n          body: bulkBody\n        };\n\n        if (usePipeline) {\n          bulkParams.pipeline = (0, _commonLibConvert_pattern_and_ingest_name.patternToIngest)(indexPattern);\n        }\n\n        return (0, _highland2['default'])(boundCallWithRequest('bulk', bulkParams));\n      }).parallel(2).map(function (response) {\n        return _lodash2['default'].reduce(response.items, function (memo, docResponse) {\n          var indexResult = docResponse.index;\n          if (indexResult.error) {\n            var hasIndexingErrors = _lodash2['default'].isUndefined(_lodash2['default'].get(memo, 'errors.index'));\n            if (hasIndexingErrors) {\n              _lodash2['default'].set(memo, 'errors.index', []);\n            }\n            memo.errors.index.push(_lodash2['default'].pick(indexResult, ['_id', 'error']));\n          } else {\n            memo.created++;\n          }\n\n          return memo;\n        }, { created: 0 });\n      }).stopOnError(function (err, push) {\n        push(null, { created: 0, errors: { other: [err.message] } });\n      }).pipe(_JSONStream2['default'].stringify()).pipe(responseStream);\n\n      reply(responseStream).type('application/json');\n    }\n  });\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9yb3V0ZXMvYXBpL2luZ2VzdC9yZWdpc3Rlcl9kYXRhLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozt3QkFBd0IsVUFBVTs7d0JBQ2hCLFdBQVc7Ozs7c0JBQ2YsUUFBUTs7Ozt3QkFDUCxVQUFVOzs7O3dEQUNPLHdEQUF3RDs7c0JBQzVELFFBQVE7OzBCQUNiLFlBQVk7Ozs7QUFFbkMsSUFBTSxZQUFZLEdBQUcsSUFBSSxHQUFHLElBQUksR0FBRyxJQUFJLENBQUM7O0FBRWpDLFNBQVMsWUFBWSxDQUFDLE1BQU0sRUFBRTtBQUNuQyxRQUFNLENBQUMsS0FBSyxDQUFDO0FBQ1gsUUFBSSxFQUFFLHdCQUF3QjtBQUM5QixVQUFNLEVBQUUsTUFBTTtBQUNkLFVBQU0sRUFBRTtBQUNOLGFBQU8sRUFBRTtBQUNQLGNBQU0sRUFBRSxRQUFRO0FBQ2hCLGdCQUFRLEVBQUUsWUFBWTtPQUN2QjtLQUNGO0FBQ0QsV0FBTyxFQUFFLGlCQUFVLEdBQUcsRUFBRSxLQUFLLEVBQUU7QUFDN0IsVUFBTSxvQkFBb0IsR0FBRyxvQkFBRSxPQUFPLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsZUFBZSxFQUFFLEdBQUcsQ0FBQyxDQUFDO0FBQzFGLFVBQU0sWUFBWSxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDO0FBQ25DLFVBQU0sV0FBVyxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUMsUUFBUSxLQUFLLE1BQU0sQ0FBQztBQUNsRCxVQUFNLFNBQVMsR0FBRyxvQkFBRSxHQUFHLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxlQUFlLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFDekQsVUFBTSxjQUFjLEdBQUcseUJBQWlCLENBQUM7QUFDekMsVUFBTSxNQUFNLEdBQUcsMkJBQU07QUFDbkIsZUFBTyxFQUFFLElBQUk7QUFDYixrQkFBVSxFQUFFLElB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TyxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsRUFBQyxLQUFLLEVBQUUsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLEVBQUMsRUFBQyxDQUFDLENBQUM7T0FDMUQsQ0FBQyxDQUNELElBQUksQ0FBQyx3QkFBVyxTQUFTLEVBQUUsQ0FBQyxDQUM1QixJQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7O0FBRXRCLFdBQUssQ0FBQyxjQUFjLENBQUMsQ0FBQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsQ0FBQztLQUNoRDtHQUNGLENBQUMsQ0FBQztDQUNKIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9yb3V0ZXMvYXBpL2luZ2VzdC9yZWdpc3Rlcl9kYXRhLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJvbWlzZSB9IGZyb20gJ2JsdWViaXJkJztcbmltcG9ydCBwYXJzZSBmcm9tICdjc3YtcGFyc2UnO1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBoaSBmcm9tICdoaWdobGFuZCc7XG5pbXBvcnQgeyBwYXR0ZXJuVG9Jbmdlc3QgfSBmcm9tICcuLi8uLi8uLi8uLi9jb21tb24vbGliL2NvbnZlcnRfcGF0dGVybl9hbmRfaW5nZXN0X25hbWUnO1xuaW1wb3J0IHsgUGFzc1Rocm91Z2ggfSBmcm9tICdzdHJlYW0nO1xuaW1wb3J0IEpTT05TdHJlYW0gZnJvbSAnSlNPTlN0cmVhbSc7XG5cbmNvbnN0IE9ORV9HSUdBQllURSA9IDEwMjQgKiAxMDI0ICogMTAyNDtcblxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyRGF0YShzZXJ2ZXIpIHtcbiAgc2VydmVyLnJvdXRlKHtcbiAgICBwYXRoOiAnL2FwaS9raWJhbmEve2lkfS9fZGF0YScsXG4gICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgY29uZmlnOiB7XG4gICAgICBwYXlsb2FkOiB7XG4gICAgICAgIG91dHB1dDogJ3N0cmVhbScsXG4gICAgICAgIG1heEJ5dGVzOiBPTkVfR0lHQUJZVEVcbiAgICAgIH1cbiAgICB9LFxuICAgIGhhbmRsZXI6IGZ1bmN0aW9uIChyZXEsIHJlcGx5KSB7XG4gICAgICBjb25zdCBib3VuZENhbGxXaXRoUmVxdWVzdCA9IF8ucGFydGlhbChzZXJ2ZXIucGx1Z2lucy5lbGFzdGljc2VhcmNoLmNhbGxXaXRoUmVxdWVzdCwgcmVxKTtcbiAgICAgIGNvbnN0IGluZGV4UGF0dGVybiA9IHJlcS5wYXJhbXMuaWQ7XG4gICAgICBjb25zdCB1c2VQaXBlbGluZSA9IHJlcS5xdWVyeS5waXBlbGluZSA9PT0gJ3RydWUnO1xuICAgICAgY29uc3QgZGVsaW1pdGVyID0gXy5nZXQocmVxLnF1ZXJ5LCAnY3N2X2RlbGltaXRlcicsICcsJyk7XG4gICAgICBjb25zdCByZXNwb25zZVN0cmVhbSA9IG5ldyBQYXNzVGhyb3VnaCgpO1xuICAgICAgY29uc3QgcGFyc2VyID0gcGFyc2Uoe1xuICAgICAgICBjb2x1bW5zOiB0cnVlLFxuICAgICAgICBhdXRvX3BhcnNlOiB0cnVlLFxuICAgICAgICBkZWxpbWl0ZXI6IGRlbGltaXRlcixcbiAgICAgICAgc2tpcF9lbXB0eV9saW5lczogdHJ1ZVxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGNzdiA9IHJlcS5wYXlsb2FkLmNzdiA/IHJlcS5wYXlsb2FkLmNzdiA6IHJlcS5wYXlsb2FkO1xuICAgICAgY29uc3QgZmlsZU5hbWUgPSByZXEucGF5bG9hZC5jc3YgPyBjc3YuaGFwaS5maWxlbmFtZSA6ICcnO1xuXG4gICAgICBsZXQgY3VycmVudExpbmUgPSAyOyAvLyBTdGFydHMgYXQgMiBzaW5jZSB3ZSBwYXJzZSB0aGUgaGVhZGVyIHNlcGFyYXRlbHlcblxuICAgICAgY3N2LnBpcGUocGFyc2VyKTtcblxuICAgICAgaGkocGFyc2VyKVxuICAgICAgLmNvbnN1bWUoKGVyciwgZG9jLCBwdXNoLCBuZXh0KSA9PiB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICBwdXNoKGVyciwgbnVsbCk7XG4gICAgICAgICAgbmV4dCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRvYyA9PT0gaGkubmlsKSB7XG4gICAgICAgICAgLy8gcGFzcyBuaWwgKGVuZCBldmVudCkgYWxvbmcgdGhlIHN0cmVhbVxuICAgICAgICAgIHB1c2gobnVsbCwgZG9jKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBwdXNoKG51bGwsIHtpbmRleDogXy5pc0VtcHR5KGZpbGVOYW1lKSA/IHt9IDoge19pZDogYCR7ZmlsZU5hbWV9OiR7Y3VycmVudExpbmV9YH19KTtcbiAgICAgICAgICBwdXNoKG51bGwsIGRvYyk7XG4gICAgICAgICAgY3VycmVudExpbmUrKztcbiAgICAgICAgICBuZXh0KCk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuYmF0Y2goMjAwKVxuICAgICAgLm1hcCgoYnVsa0JvZHkpID0+IHtcbiAgICAgICAgY29uc3QgYnVsa1BhcmFtcyA9IHtcbiAgICAgICAgICBpbmRleDogaW5kZXhQYXR0ZXJuLFxuICAgICAgICAgIHR5cGU6ICdkZWZhdWx0JyxcbiAgICAgICAgICBib2R5OiBidWxrQm9keVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmICh1c2VQaXBlbGluZSkge1xuICAgICAgICAgIGJ1bGtQYXJhbXMucGlwZWxpbmUgPSBwYXR0ZXJuVG9Jbmdlc3QoaW5kZXhQYXR0ZXJuKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBoaShib3VuZENhbGxXaXRoUmVxdWVzdCgnYnVsaycsIGJ1bGtQYXJhbXMpKTtcbiAgICAgIH0pXG4gICAgICAucGFyYWxsZWwoMilcbiAgICAgIC5tYXAoKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgIHJldHVybiBfLnJlZHVjZShyZXNwb25zZS5pdGVtcywgKG1lbW8sIGRvY1Jlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgY29uc3QgaW5kZXhSZXN1bHQgPSBkb2NSZXNwb25zZS5pbmRleDtcbiAgICAgICAgICBpZiAoaW5kZXhSZXN1bHQuZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnN0IGhhc0luZGV4aW5nRXJyb3JzID0gXy5pc1VuZGVmaW5lZChfLmdldChtZW1vLCAnZXJyb3JzLmluZGV4JykpO1xuICAgICAgICAgICAgaWYgKGhhc0luZGV4aW5nRXJyb3JzKSB7XG4gICAgICAgICAgICAgIF8uc2V0KG1lbW8sICdlcnJvcnMuaW5kZXgnLCBbXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtZW1vLmVycm9ycy5pbmRleC5wdXNoKF8ucGljayhpbmRleFJlc3VsdCwgWydfaWQnLCAnZXJyb3InXSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG1lbW8uY3JlYXRlZCsrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiBtZW1vO1xuICAgICAgICB9LCB7Y3JlYXRlZDogMH0pO1xuICAgICAgfSlcbiAgICAgIC5zdG9wT25FcnJvcigoZXJyLCBwdXNoKSA9PiB7XG4gICAgICAgIHB1c2gobnVsbCwge2NyZWF0ZWQ6IDAsIGVycm9yczoge290aGVyOiBbZXJyLm1lc3NhZ2VdfX0pO1xuICAgICAgfSlcbiAgICAgIC5waXBlKEpTT05TdHJlYW0uc3RyaW5naWZ5KCkpXG4gICAgICAucGlwZShyZXNwb25zZVN0cmVhbSk7XG5cbiAgICAgIHJlcGx5KHJlc3BvbnNlU3RyZWFtKS50eXBlKCdhcHBsaWNhdGlvbi9qc29uJyk7XG4gICAgfVxuICB9KTtcbn1cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/routes/api/ingest/register_data.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/routes/api/ingest/register_data.js",
      "sourcesContent": [
        "import { Promise } from 'bluebird';\nimport parse from 'csv-parse';\nimport _ from 'lodash';\nimport hi from 'highland';\nimport { patternToIngest } from '../../../../common/lib/convert_pattern_and_ingest_name';\nimport { PassThrough } from 'stream';\nimport JSONStream from 'JSONStream';\n\nconst ONE_GIGABYTE = 1024 * 1024 * 1024;\n\nexport function registerData(server) {\n  server.route({\n    path: '/api/kibana/{id}/_data',\n    method: 'POST',\n    config: {\n      payload: {\n        output: 'stream',\n        maxBytes: ONE_GIGABYTE\n      }\n    },\n    handler: function (req, reply) {\n      const boundCallWithRequest = _.partial(server.plugins.elasticsearch.callWithRequest, req);\n      const indexPattern = req.params.id;\n      const usePipeline = req.query.pipeline === 'true';\n      const delimiter = _.get(req.query, 'csv_delimiter', ',');\n      const responseStream = new PassThrough();\n      const parser = parse({\n        columns: true,\n        auto_parse: true,\n        delimiter: delimiter,\n        skip_empty_lines: true\n      });\n\n      const csv = req.payload.csv ? req.payload.csv : req.payload;\n      const fileName = req.payload.csv ? csv.hapi.filename : '';\n\n      let currentLine = 2; // Starts at 2 since we parse the header separately\n\n      csv.pipe(parser);\n\n      hi(parser)\n      .consume((err, doc, push, next) => {\n        if (err) {\n          push(err, null);\n          next();\n        }\n        else if (doc === hi.nil) {\n          // pass nil (end event) along the stream\n          push(null, doc);\n        }\n        else {\n          push(null, {index: _.isEmpty(fileName) ? {} : {_id: `${fileName}:${currentLine}`}});\n          push(null, doc);\n          currentLine++;\n          next();\n        }\n      })\n      .batch(200)\n      .map((bulkBody) => {\n        const bulkParams = {\n          index: indexPattern,\n          type: 'default',\n          body: bulkBody\n        };\n\n        if (usePipeline) {\n          bulkParams.pipeline = patternToIngest(indexPattern);\n        }\n\n        return hi(boundCallWithRequest('bulk', bulkParams));\n      })\n      .parallel(2)\n      .map((response) => {\n        return _.reduce(response.items, (memo, docResponse) => {\n          const indexResult = docResponse.index;\n          if (indexResult.error) {\n            const hasIndexingErrors = _.isUndefined(_.get(memo, 'errors.index'));\n            if (hasIndexingErrors) {\n              _.set(memo, 'errors.index', []);\n            }\n            memo.errors.index.push(_.pick(indexResult, ['_id', 'error']));\n          }\n          else {\n            memo.created++;\n          }\n\n          return memo;\n        }, {created: 0});\n      })\n      .stopOnError((err, push) => {\n        push(null, {created: 0, errors: {other: [err.message]}});\n      })\n      .pipe(JSONStream.stringify())\n      .pipe(responseStream);\n\n      reply(responseStream).type('application/json');\n    }\n  });\n}\n"
      ]
    },
    "mtime": 1467036622829
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/routes/api/search/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./count/register_count",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "registerCount"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _countRegister_count = require('./count/register_count');\n\nvar _countRegister_count2 = _interopRequireDefault(_countRegister_count);\n\nexports['default'] = function (server) {\n  (0, _countRegister_count2['default'])(server);\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9yb3V0ZXMvYXBpL3NlYXJjaC9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7OzttQ0FBMEIsd0JBQXdCOzs7O3FCQUVuQyxVQUFVLE1BQU0sRUFBRTtBQUMvQix3Q0FBYyxNQUFNLENBQUMsQ0FBQztDQUN2QiIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9wbHVnaW5zL2tpYmFuYS9zZXJ2ZXIvcm91dGVzL2FwaS9zZWFyY2gvaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcmVnaXN0ZXJDb3VudCBmcm9tICcuL2NvdW50L3JlZ2lzdGVyX2NvdW50JztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKHNlcnZlcikge1xuICByZWdpc3RlckNvdW50KHNlcnZlcik7XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/routes/api/search/index.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;mCAA0B,wBAAwB;;;;qBAEnC,UAAU,MAAM,EAAE;AAC/B,wCAAc,MAAM,CAAC,CAAC;CACvB",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/routes/api/search/index.js",
      "sourcesContent": [
        "import registerCount from './count/register_count';\n\nexport default function (server) {\n  registerCount(server);\n}\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/routes/api/search/count/register_count.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "../../../../lib/handle_es_error",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "handleESError"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "registerCount",
            "server"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "registerCount",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "server",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = registerCount;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _libHandle_es_error = require('../../../../lib/handle_es_error');\n\nvar _libHandle_es_error2 = _interopRequireDefault(_libHandle_es_error);\n\nfunction registerCount(server) {\n  server.route({\n    path: '/api/kibana/{id}/_count',\n    method: ['POST', 'GET'],\n    handler: function handler(req, reply) {\n      var boundCallWithRequest = _lodash2['default'].partial(server.plugins.elasticsearch.callWithRequest, req);\n\n      boundCallWithRequest('count', {\n        allowNoIndices: false,\n        index: req.params.id\n      }).then(function (res) {\n        reply({ count: res.count });\n      }, function (error) {\n        reply((0, _libHandle_es_error2['default'])(error));\n      });\n    }\n  });\n}\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9yb3V0ZXMvYXBpL3NlYXJjaC9jb3VudC9yZWdpc3Rlcl9jb3VudC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztxQkFHd0IsYUFBYTs7OztzQkFIdkIsUUFBUTs7OztrQ0FDSSxpQ0FBaUM7Ozs7QUFFNUMsU0FBUyxhQUFhLENBQUMsTUFBTSxFQUFFO0FBQzVDLFFBQU0sQ0FBQyxLQUFLLENBQUM7QUFDWCxRQUFJLEVBQUUseUJBQXlCO0FBQy9CLFVBQU0sRUFBRSxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUM7QUFDdkIsV0FBTyxFQUFFLGlCQUFVLEdBQUcsRUFBRSxLQUFLLEVBQUU7QUFDN0IsVUFBTSxvQkFBb0IsR0FBRyxvQkFBRSxPQUFPLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsZUFBZSxFQUFFLEdBQUcsQ0FBQyxDQUFDOztBQUUxRiwwQkFBb0IsQ0FBQyxPQUFPLEVBQUU7QUFDNUIsc0JBQWMsRUFBRSxLQUFLO0FBQ3JCLGFBQUssRUFBRSxHQUFHLENBQUMsTUFBTSxDQUFDLEVBQUU7T0FDckIsQ0FBQyxDQUNELElBQUksQ0FDSCxVQUFVLEdBQUcsRUFBRTtBQUNiLGFBQUssQ0FBQyxFQUFDLEtBQUssRUFBRSxHQUFHLENBQUMsS0FBSyxFQUFDLENBQUMsQ0FBQztPQUMzQixFQUNELFVBQVUsS0FBSyxFQUFFO0FBQ2YsYUFBSyxDQUFDLHFDQUFjLEtBQUssQ0FBQyxDQUFDLENBQUM7T0FDN0IsQ0FDRixDQUFDO0tBQ0g7R0FDRixDQUFDLENBQUM7Q0FDSiIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9wbHVnaW5zL2tpYmFuYS9zZXJ2ZXIvcm91dGVzL2FwaS9zZWFyY2gvY291bnQvcmVnaXN0ZXJfY291bnQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IGhhbmRsZUVTRXJyb3IgZnJvbSAnLi4vLi4vLi4vLi4vbGliL2hhbmRsZV9lc19lcnJvcic7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJlZ2lzdGVyQ291bnQoc2VydmVyKSB7XG4gIHNlcnZlci5yb3V0ZSh7XG4gICAgcGF0aDogJy9hcGkva2liYW5hL3tpZH0vX2NvdW50JyxcbiAgICBtZXRob2Q6IFsnUE9TVCcsICdHRVQnXSxcbiAgICBoYW5kbGVyOiBmdW5jdGlvbiAocmVxLCByZXBseSkge1xuICAgICAgY29uc3QgYm91bmRDYWxsV2l0aFJlcXVlc3QgPSBfLnBhcnRpYWwoc2VydmVyLnBsdWdpbnMuZWxhc3RpY3NlYXJjaC5jYWxsV2l0aFJlcXVlc3QsIHJlcSk7XG5cbiAgICAgIGJvdW5kQ2FsbFdpdGhSZXF1ZXN0KCdjb3VudCcsIHtcbiAgICAgICAgYWxsb3dOb0luZGljZXM6IGZhbHNlLFxuICAgICAgICBpbmRleDogcmVxLnBhcmFtcy5pZFxuICAgICAgfSlcbiAgICAgIC50aGVuKFxuICAgICAgICBmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgcmVwbHkoe2NvdW50OiByZXMuY291bnR9KTtcbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgcmVwbHkoaGFuZGxlRVNFcnJvcihlcnJvcikpO1xuICAgICAgICB9XG4gICAgICApO1xuICAgIH1cbiAgfSk7XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/routes/api/search/count/register_count.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAGwB,aAAa;;;;sBAHvB,QAAQ;;;;kCACI,iCAAiC;;;;AAE5C,SAAS,aAAa,CAAC,MAAM,EAAE;AAC5C,QAAM,CAAC,KAAK,CAAC;AACX,QAAI,EAAE,yBAAyB;AAC/B,UAAM,EAAE,CAAC,MAAM,EAAE,KAAK,CAAC;AACvB,WAAO,EAAE,iBAAU,GAAG,EAAE,KAAK,EAAE;AAC7B,UAAM,oBAAoB,GAAG,oBAAE,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,eAAe,EAAE,GAAG,CAAC,CAAC;;AAE1F,0BAAoB,CAAC,OAAO,EAAE;AAC5B,sBAAc,EAAE,KAAK;AACrB,aAAK,EAAE,GAAG,CAAC,MAAM,CAAC,EAAE;OACrB,CAAC,CACD,IAAI,CACH,UAAU,GAAG,EAAE;AACb,aAAK,CAAC,EAAC,KAAK,EAAE,GAAG,CAAC,KAAK,EAAC,CAAC,CAAC;OAC3B,EACD,UAAU,KAAK,EAAE;AACf,aAAK,CAAC,qCAAc,KAAK,CAAC,CAAC,CAAC;OAC7B,CACF,CAAC;KACH;GACF,CAAC,CAAC;CACJ",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/routes/api/search/count/register_count.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport handleESError from '../../../../lib/handle_es_error';\n\nexport default function registerCount(server) {\n  server.route({\n    path: '/api/kibana/{id}/_count',\n    method: ['POST', 'GET'],\n    handler: function (req, reply) {\n      const boundCallWithRequest = _.partial(server.plugins.elasticsearch.callWithRequest, req);\n\n      boundCallWithRequest('count', {\n        allowNoIndices: false,\n        index: req.params.id\n      })\n      .then(\n        function (res) {\n          reply({count: res.count});\n        },\n        function (error) {\n          reply(handleESError(error));\n        }\n      );\n    }\n  });\n}\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/routes/api/settings/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nexports['default'] = function (server) {\n  require('./register_get')(server);\n  require('./register_set')(server);\n  require('./register_set_many')(server);\n  require('./register_delete')(server);\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9yb3V0ZXMvYXBpL3NldHRpbmdzL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztxQkFBZSxVQUFVLE1BQU0sRUFBRTtBQUMvQixTQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUNsQyxTQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUNsQyxTQUFPLENBQUMscUJBQXFCLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUN2QyxTQUFPLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQztDQUN0QyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9wbHVnaW5zL2tpYmFuYS9zZXJ2ZXIvcm91dGVzL2FwaS9zZXR0aW5ncy9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChzZXJ2ZXIpIHtcbiAgcmVxdWlyZSgnLi9yZWdpc3Rlcl9nZXQnKShzZXJ2ZXIpO1xuICByZXF1aXJlKCcuL3JlZ2lzdGVyX3NldCcpKHNlcnZlcik7XG4gIHJlcXVpcmUoJy4vcmVnaXN0ZXJfc2V0X21hbnknKShzZXJ2ZXIpO1xuICByZXF1aXJlKCcuL3JlZ2lzdGVyX2RlbGV0ZScpKHNlcnZlcik7XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/routes/api/settings/index.js"
      ],
      "names": [],
      "mappings": ";;;;;;qBAAe,UAAU,MAAM,EAAE;AAC/B,SAAO,CAAC,gBAAgB,CAAC,CAAC,MAAM,CAAC,CAAC;AAClC,SAAO,CAAC,gBAAgB,CAAC,CAAC,MAAM,CAAC,CAAC;AAClC,SAAO,CAAC,qBAAqB,CAAC,CAAC,MAAM,CAAC,CAAC;AACvC,SAAO,CAAC,mBAAmB,CAAC,CAAC,MAAM,CAAC,CAAC;CACtC",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/routes/api/settings/index.js",
      "sourcesContent": [
        "export default function (server) {\n  require('./register_get')(server);\n  require('./register_set')(server);\n  require('./register_set_many')(server);\n  require('./register_delete')(server);\n}\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/markdown_vis/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nexports['default'] = function (kibana) {\n\n  return new kibana.Plugin({\n\n    uiExports: {\n      visTypes: ['plugins/markdown_vis/markdown_vis']\n    }\n\n  });\n};\n\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMvbWFya2Rvd25fdmlzL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztxQkFBZSxVQUFVLE1BQU0sRUFBRTs7QUFFL0IsU0FBTyxJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUM7O0FBRXZCLGFBQVMsRUFBRTtBQUNULGNBQVEsRUFBRSxDQUNSLG1DQUFtQyxDQUNwQztLQUNGOztHQUVGLENBQUMsQ0FBQztDQUVKOztBQUFBLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvcGx1Z2lucy9tYXJrZG93bl92aXMvaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoa2liYW5hKSB7XG5cbiAgcmV0dXJuIG5ldyBraWJhbmEuUGx1Z2luKHtcblxuICAgIHVpRXhwb3J0czoge1xuICAgICAgdmlzVHlwZXM6IFtcbiAgICAgICAgJ3BsdWdpbnMvbWFya2Rvd25fdmlzL21hcmtkb3duX3ZpcydcbiAgICAgIF1cbiAgICB9XG5cbiAgfSk7XG5cbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/markdown_vis/index.js"
      ],
      "names": [],
      "mappings": ";;;;;;qBAAe,UAAU,MAAM,EAAE;;AAE/B,SAAO,IAAI,MAAM,CAAC,MAAM,CAAC;;AAEvB,aAAS,EAAE;AACT,cAAQ,EAAE,CACR,mCAAmC,CACpC;KACF;;GAEF,CAAC,CAAC;CAEJ;;AAAA,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/markdown_vis/index.js",
      "sourcesContent": [
        "export default function (kibana) {\n\n  return new kibana.Plugin({\n\n    uiExports: {\n      visTypes: [\n        'plugins/markdown_vis/markdown_vis'\n      ]\n    }\n\n  });\n\n};\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/metric_vis/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nexports['default'] = function (kibana) {\n\n  return new kibana.Plugin({\n\n    uiExports: {\n      visTypes: ['plugins/metric_vis/metric_vis']\n    }\n\n  });\n};\n\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMvbWV0cmljX3Zpcy9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7cUJBQWUsVUFBVSxNQUFNLEVBQUU7O0FBRS9CLFNBQU8sSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDOztBQUV2QixhQUFTLEVBQUU7QUFDVCxjQUFRLEVBQUUsQ0FDUiwrQkFBK0IsQ0FDaEM7S0FDRjs7R0FFRixDQUFDLENBQUM7Q0FFSjs7QUFBQSxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMvbWV0cmljX3Zpcy9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChraWJhbmEpIHtcblxuICByZXR1cm4gbmV3IGtpYmFuYS5QbHVnaW4oe1xuXG4gICAgdWlFeHBvcnRzOiB7XG4gICAgICB2aXNUeXBlczogW1xuICAgICAgICAncGx1Z2lucy9tZXRyaWNfdmlzL21ldHJpY192aXMnXG4gICAgICBdXG4gICAgfVxuXG4gIH0pO1xuXG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/metric_vis/index.js"
      ],
      "names": [],
      "mappings": ";;;;;;qBAAe,UAAU,MAAM,EAAE;;AAE/B,SAAO,IAAI,MAAM,CAAC,MAAM,CAAC;;AAEvB,aAAS,EAAE;AACT,cAAQ,EAAE,CACR,+BAA+B,CAChC;KACF;;GAEF,CAAC,CAAC;CAEJ;;AAAA,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/metric_vis/index.js",
      "sourcesContent": [
        "export default function (kibana) {\n\n  return new kibana.Plugin({\n\n    uiExports: {\n      visTypes: [\n        'plugins/metric_vis/metric_vis'\n      ]\n    }\n\n  });\n\n};\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/spy_modes/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nexports['default'] = function (kibana) {\n  return new kibana.Plugin({\n    uiExports: {\n      spyModes: ['plugins/spy_modes/table_spy_mode', 'plugins/spy_modes/req_resp_stats_spy_mode']\n    }\n  });\n};\n\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMvc3B5X21vZGVzL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztxQkFBZSxVQUFVLE1BQU0sRUFBRTtBQUMvQixTQUFPLElBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQztBQUN2QixhQUFTLEVBQUU7QUFDVCxjQUFRLEVBQUUsQ0FDUixrQ0FBa0MsRUFDbEMsMkNBQTJDLENBQzVDO0tBQ0Y7R0FDRixDQUFDLENBQUM7Q0FDSjs7QUFBQSxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMvc3B5X21vZGVzL2luZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKGtpYmFuYSkge1xuICByZXR1cm4gbmV3IGtpYmFuYS5QbHVnaW4oe1xuICAgIHVpRXhwb3J0czoge1xuICAgICAgc3B5TW9kZXM6IFtcbiAgICAgICAgJ3BsdWdpbnMvc3B5X21vZGVzL3RhYmxlX3NweV9tb2RlJyxcbiAgICAgICAgJ3BsdWdpbnMvc3B5X21vZGVzL3JlcV9yZXNwX3N0YXRzX3NweV9tb2RlJ1xuICAgICAgXVxuICAgIH1cbiAgfSk7XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/spy_modes/index.js"
      ],
      "names": [],
      "mappings": ";;;;;;qBAAe,UAAU,MAAM,EAAE;AAC/B,SAAO,IAAI,MAAM,CAAC,MAAM,CAAC;AACvB,aAAS,EAAE;AACT,cAAQ,EAAE,CACR,kCAAkC,EAClC,2CAA2C,CAC5C;KACF;GACF,CAAC,CAAC;CACJ;;AAAA,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/spy_modes/index.js",
      "sourcesContent": [
        "export default function (kibana) {\n  return new kibana.Plugin({\n    uiExports: {\n      spyModes: [\n        'plugins/spy_modes/table_spy_mode',\n        'plugins/spy_modes/req_resp_stats_spy_mode'\n      ]\n    }\n  });\n};\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/status_page/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nexports['default'] = function (kibana) {\n  return new kibana.Plugin({\n    uiExports: {\n      app: {\n        title: 'Server Status',\n        main: 'plugins/status_page/status_page',\n        hidden: true,\n        url: '/status'\n      }\n    }\n  });\n};\n\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMvc3RhdHVzX3BhZ2UvaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O3FCQUFlLFVBQVUsTUFBTSxFQUFFO0FBQy9CLFNBQU8sSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDO0FBQ3ZCLGFBQVMsRUFBRTtBQUNULFNBQUcsRUFBRTtBQUNILGFBQUssRUFBRSxlQUFlO0FBQ3RCLFlBQUksRUFBRSxpQ0FBaUM7QUFDdkMsY0FBTSxFQUFFLElBQUk7QUFDWixXQUFHLEVBQUUsU0FBUztPQUNmO0tBQ0Y7R0FDRixDQUFDLENBQUM7Q0FDSjs7QUFBQSxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMvc3RhdHVzX3BhZ2UvaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoa2liYW5hKSB7XG4gIHJldHVybiBuZXcga2liYW5hLlBsdWdpbih7XG4gICAgdWlFeHBvcnRzOiB7XG4gICAgICBhcHA6IHtcbiAgICAgICAgdGl0bGU6ICdTZXJ2ZXIgU3RhdHVzJyxcbiAgICAgICAgbWFpbjogJ3BsdWdpbnMvc3RhdHVzX3BhZ2Uvc3RhdHVzX3BhZ2UnLFxuICAgICAgICBoaWRkZW46IHRydWUsXG4gICAgICAgIHVybDogJy9zdGF0dXMnXG4gICAgICB9XG4gICAgfVxuICB9KTtcbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/status_page/index.js"
      ],
      "names": [],
      "mappings": ";;;;;;qBAAe,UAAU,MAAM,EAAE;AAC/B,SAAO,IAAI,MAAM,CAAC,MAAM,CAAC;AACvB,aAAS,EAAE;AACT,SAAG,EAAE;AACH,aAAK,EAAE,eAAe;AACtB,YAAI,EAAE,iCAAiC;AACvC,cAAM,EAAE,IAAI;AACZ,WAAG,EAAE,SAAS;OACf;KACF;GACF,CAAC,CAAC;CACJ;;AAAA,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/status_page/index.js",
      "sourcesContent": [
        "export default function (kibana) {\n  return new kibana.Plugin({\n    uiExports: {\n      app: {\n        title: 'Server Status',\n        main: 'plugins/status_page/status_page',\n        hidden: true,\n        url: '/status'\n      }\n    }\n  });\n};\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/table_vis/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nexports['default'] = function (kibana) {\n\n  return new kibana.Plugin({\n    uiExports: {\n      visTypes: ['plugins/table_vis/table_vis']\n    }\n  });\n};\n\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMvdGFibGVfdmlzL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztxQkFBZSxVQUFVLE1BQU0sRUFBRTs7QUFFL0IsU0FBTyxJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUM7QUFDdkIsYUFBUyxFQUFFO0FBQ1QsY0FBUSxFQUFFLENBQ1IsNkJBQTZCLENBQzlCO0tBQ0Y7R0FDRixDQUFDLENBQUM7Q0FFSjs7QUFBQSxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMvdGFibGVfdmlzL2luZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKGtpYmFuYSkge1xuXG4gIHJldHVybiBuZXcga2liYW5hLlBsdWdpbih7XG4gICAgdWlFeHBvcnRzOiB7XG4gICAgICB2aXNUeXBlczogW1xuICAgICAgICAncGx1Z2lucy90YWJsZV92aXMvdGFibGVfdmlzJ1xuICAgICAgXVxuICAgIH1cbiAgfSk7XG5cbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/table_vis/index.js"
      ],
      "names": [],
      "mappings": ";;;;;;qBAAe,UAAU,MAAM,EAAE;;AAE/B,SAAO,IAAI,MAAM,CAAC,MAAM,CAAC;AACvB,aAAS,EAAE;AACT,cAAQ,EAAE,CACR,6BAA6B,CAC9B;KACF;GACF,CAAC,CAAC;CAEJ;;AAAA,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/table_vis/index.js",
      "sourcesContent": [
        "export default function (kibana) {\n\n  return new kibana.Plugin({\n    uiExports: {\n      visTypes: [\n        'plugins/table_vis/table_vis'\n      ]\n    }\n  });\n\n};\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/tests_bundle/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "union"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "union",
                "local": "union"
              }
            ]
          },
          {
            "source": "../../ui/settings/defaults",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "defaultsProvider"
              }
            ]
          },
          {
            "source": "./find_source_files",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "findSourceFiles"
              }
            ]
          },
          {
            "source": "../../utils",
            "imported": [
              "fromRoot"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "fromRoot",
                "local": "fromRoot"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "async-to-generator",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nvar _lodash = require('lodash');\n\nvar _uiSettingsDefaults = require('../../ui/settings/defaults');\n\nvar _uiSettingsDefaults2 = _interopRequireDefault(_uiSettingsDefaults);\n\nvar _find_source_files = require('./find_source_files');\n\nvar _find_source_files2 = _interopRequireDefault(_find_source_files);\n\nvar _utils = require('../../utils');\n\nexports['default'] = function (kibana) {\n  return new kibana.Plugin({\n    config: function config(Joi) {\n      return Joi.object({\n        enabled: Joi.boolean()['default'](true),\n        instrument: Joi.boolean()['default'](false),\n        pluginId: Joi.string()\n      })['default']();\n    },\n\n    uiExports: {\n      bundle: _asyncToGenerator(function* (UiBundle, env, apps, plugins) {\n        var modules = [];\n        var config = kibana.config;\n\n        var testGlobs = ['src/ui/public/**/*.js'];\n        var testingPluginIds = config.get('tests_bundle.pluginId');\n\n        if (testingPluginIds) {\n          testGlobs.push('!src/ui/public/**/__tests__/**/*');\n          testingPluginIds.split(',').forEach(function (pluginId) {\n            var plugin = plugins.byId[pluginId];\n            if (!plugin) throw new Error('Invalid testingPluginId :: unknown plugin ' + pluginId);\n\n            // add the modules from all of this plugins apps\n            var _iteratorNormalCompletion = true;\n            var _didIteratorError = false;\n            var _iteratorError = undefined;\n\n            try {\n              for (var _iterator = plugin.apps[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                var app = _step.value;\n\n                modules = (0, _lodash.union)(modules, app.getModules());\n              }\n            } catch (err) {\n              _didIteratorError = true;\n              _iteratorError = err;\n            } finally {\n              try {\n                if (!_iteratorNormalCompletion && _iterator['return']) {\n                  _iterator['return']();\n                }\n              } finally {\n                if (_didIteratorError) {\n                  throw _iteratorError;\n                }\n              }\n            }\n\n            testGlobs.push(plugin.publicDir + '/**/__tests__/**/*.js');\n          });\n        } else {\n\n          // add the modules from all of the apps\n          var _iteratorNormalCompletion2 = true;\n          var _didIteratorError2 = false;\n          var _iteratorError2 = undefined;\n\n          try {\n            for (var _iterator2 = apps[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n              var app = _step2.value;\n\n              modules = (0, _lodash.union)(modules, app.getModules());\n            }\n          } catch (err) {\n            _didIteratorError2 = true;\n            _iteratorError2 = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion2 && _iterator2['return']) {\n                _iterator2['return']();\n              }\n            } finally {\n              if (_didIteratorError2) {\n                throw _iteratorError2;\n              }\n            }\n          }\n\n          var _iteratorNormalCompletion3 = true;\n          var _didIteratorError3 = false;\n          var _iteratorError3 = undefined;\n\n          try {\n            for (var _iterator3 = plugins[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n              var plugin = _step3.value;\n\n              testGlobs.push(plugin.publicDir + '/**/__tests__/**/*.js');\n            }\n          } catch (err) {\n            _didIteratorError3 = true;\n            _iteratorError3 = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion3 && _iterator3['return']) {\n                _iterator3['return']();\n              }\n            } finally {\n              if (_didIteratorError3) {\n                throw _iteratorError3;\n              }\n            }\n          }\n        }\n\n        var testFiles = yield (0, _find_source_files2['default'])(testGlobs);\n        var _iteratorNormalCompletion4 = true;\n        var _didIteratorError4 = false;\n        var _iteratorError4 = undefined;\n\n        try {\n          for (var _iterator4 = testFiles[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n            var f = _step4.value;\n            modules.push(f);\n          }\n        } catch (err) {\n          _didIteratorError4 = true;\n          _iteratorError4 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion4 && _iterator4['return']) {\n              _iterator4['return']();\n            }\n          } finally {\n            if (_didIteratorError4) {\n              throw _iteratorError4;\n            }\n          }\n        }\n\n        if (config.get('tests_bundle.instrument')) {\n          env.addPostLoader({\n            test: /\\.jsx?$/,\n            exclude: /[\\/\\\\](__tests__|node_modules|bower_components|webpackShims)[\\/\\\\]/,\n            loader: 'istanbul-instrumenter'\n          });\n        }\n\n        env.defaultUiSettings = (0, _uiSettingsDefaults2['default'])();\n\n        return new UiBundle({\n          id: 'tests',\n          modules: modules,\n          template: require('./tests_entry_template'),\n          env: env\n        });\n      }),\n\n      modules: {\n        ng_mock$: (0, _utils.fromRoot)('src/plugins/dev_mode/public/ng_mock'),\n        fixtures: (0, _utils.fromRoot)('src/fixtures'),\n        test_utils: (0, _utils.fromRoot)('src/test_utils'),\n        'angular-mocks': {\n          path: require.resolve('angular-mocks'),\n          imports: 'angular'\n        }\n      }\n    }\n  });\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMvdGVzdHNfYnVuZGxlL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7c0JBQXNCLFFBQVE7O2tDQUNELDRCQUE0Qjs7OztpQ0FDN0IscUJBQXFCOzs7O3FCQUN4QixhQUFhOztxQkFFdkIsVUFBQyxNQUFNLEVBQUs7QUFDekIsU0FBTyxJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUM7QUFDdkIsVUFBTSxFQUFFLGdCQUFDLEdBQUcsRUFBSztBQUNmLGFBQU8sR0FBRyxDQUFDLE1BQU0sQ0FBQztBQUNoQixlQUFPLEVBQUUsR0FBRyxDQUFDLE9BQU8sRUFBRSxXQUFRLENBQUMsSUFBSSxDQUFDO0FBQ3BDLGtCQUFVLEVBQUUsR0FBRyxDQUFDLE9BQU8sRUFBRSxXQUFRLENBQUMsS0FBSyxDQUFDO0FBQ3hDLGdCQUFRLEVBQUUsR0FBRyxDQUFDLE1BQU0sRUFBRTtPQUN2QixDQUFDLFdBQVEsRUFBRSxDQUFDO0tBQ2Q7O0FBRUQsYUFBUyxFQUFFO0FBQ1QsWUFBTSxvQkFBRSxXQUFPLFFBQVEsRUFBRSxHQUFHLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBSztBQUM5QyxZQUFJLE9BQU8sR0FBRyxFQUFFLENBQUM7QUFDakIsWUFBSSxNQUFNLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQzs7QUFFM0IsWUFBTSxTQUFTLEdBQUcsQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDO0FBQzVDLFlBQU0sZ0JBQWdCLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDOztBQUU3RCxZQUFJLGdCQUFnQixFQUFFO0FBQ3BCLG1CQUFTLENBQUMsSUFBSSxDQUFDLGtDQUFrQyxDQUFDLENBQUM7QUFDbkQsMEJBQWdCLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxVQUFDLFFBQVEsRUFBSztBQUNoRCxnQkFBTSxNQUFNLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUN0QyxnQkFBSSxDQUFDLE1BQU0sRUFBRSxNQUFNLElBQUksS0FBSyxDQUFDLDRDQUE0QyxHQUFHLFFBQVEsQ0FBQyxDQUFDOzs7Ozs7OztBQUd0RixtQ0FBZ0IsTUFBTSxDQUFDLElBQUksOEhBQUU7b0JBQXBCLEdBQUc7O0FBQ1YsdUJBQU8sR0FBRyxtQkFBTSxPQUFPLEVBQUUsR0FBRyxDQUFDLFVBQVUsRUFBRSxDQUFDLENBQUM7ZUFDNUM7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFRCxxQkFBUyxDQUFDLElBQUksQ0FBSSxNQUFNLENBQUMsU0FBUywyQkFBd0IsQ0FBQztXQUM1RCxDQUFDLENBQUM7U0FDSixNQUFNOzs7Ozs7OztBQUdMLGtDQUFnQixJQUFJLG1JQUFFO2tCQUFiLEdBQUc7O0FBQ1YscUJBQU8sR0FBRyxtQkFBTSxPQUFPLEVBQUUsR0FBRyxDQUFDLFVBQVUsRUFBRSxDQUFDLENBQUM7YUFDNUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUVELGtDQUFxQixPQUFPLG1JQUFFO2tCQUFuQixNQUFNOztBQUNmLHVCQUFTLENBQUMsSUFBSSxDQUFJLE1BQU0sQ0FBQyxTQUFTLDJCQUF3QixDQUFDO2FBQzVEOzs7Ozs7Ozs7Ozs7Ozs7U0FDRjs7QUFFRCxZQUFNLFNBQVMsR0FBRyxNQUFNLG9DQUFnQixTQUFTLENBQUMsQ0FBQzs7Ozs7O0FBQ25ELGdDQUFjLFNBQVM7Z0JBQWQsQ0FBQztBQUFlLG1CQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1dBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFekMsWUFBSSxNQUFNLENBQUMsR0FBRyxDQUFDLHlCQUF5QixDQUFDLEVBQUU7QUFDekMsYUFBRyxDQUFDLGFBQWEsQ0FBQztBQUNoQixnQkFBSSxFQUFFLFNBQVM7QUFDZixtQkFBTyxFQUFFLG9FQUFvRTtBQUM3RSxrQkFBTSxFQUFFLHVCQUF1QjtXQUNoQyxDQUFDLENBQUM7U0FDSjs7QUFFRCxXQUFHLENBQUMsaUJBQWlCLEdBQUcsc0NBQWtCLENBQUM7O0FBRTNDLGVBQU8sSUFBSSxRQUFRLENBQUM7QUFDbEIsWUFBRSxFQUFFLE9BQU87QUFDWCxpQkFBTyxFQUFFLE9BQU87QUFDaEIsa0JBQVEsRUFBRSxPQUFPLENBQUMsd0JBQXdCLENBQUM7QUFDM0MsYUFBRyxFQUFFLEdBQUc7U0FDVCxDQUFDLENBQUM7T0FDSixDQUFBOztBQUVELGFBQU8sRUFBRTtBQUNQLGdCQUFRLEVBQUUscUJBQVMscUNBQXFDLENBQUM7QUFDekQsZ0JBQVEsRUFBRSxxQkFBUyxjQUFjLENBQUM7QUFDbEMsa0JBQVUsRUFBRSxxQkFBUyxnQkFBZ0IsQ0FBQztBQUN0Qyx1QkFBZSxFQUFFO0FBQ2YsY0FBSSxFQUFFLE9BQU8sQ0FBQyxPQUFPLENBQUMsZUFBZSxDQUFDO0FBQ3RDLGlCQUFPLEVBQUUsU0FBUztTQUNuQjtPQUNGO0tBQ0Y7R0FDRixDQUFDLENBQUM7Q0FDSiIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9wbHVnaW5zL3Rlc3RzX2J1bmRsZS9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVuaW9uIH0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBkZWZhdWx0c1Byb3ZpZGVyIGZyb20gJy4uLy4uL3VpL3NldHRpbmdzL2RlZmF1bHRzJztcbmltcG9ydCBmaW5kU291cmNlRmlsZXMgZnJvbSAnLi9maW5kX3NvdXJjZV9maWxlcyc7XG5pbXBvcnQgeyBmcm9tUm9vdCB9IGZyb20gJy4uLy4uL3V0aWxzJztcblxuZXhwb3J0IGRlZmF1bHQgKGtpYmFuYSkgPT4ge1xuICByZXR1cm4gbmV3IGtpYmFuYS5QbHVnaW4oe1xuICAgIGNvbmZpZzogKEpvaSkgPT4ge1xuICAgICAgcmV0dXJuIEpvaS5vYmplY3Qoe1xuICAgICAgICBlbmFibGVkOiBKb2kuYm9vbGVhbigpLmRlZmF1bHQodHJ1ZSksXG4gICAgICAgIGluc3RydW1lbnQ6IEpvaS5ib29sZWFuKCkuZGVmYXVsdChmYWxzZSksXG4gICAgICAgIHBsdWdpbklkOiBKb2kuc3RyaW5nKClcbiAgICAgIH0pLmRlZmF1bHQoKTtcbiAgICB9LFxuXG4gICAgdWlFeHBvcnRzOiB7XG4gICAgICBidW5kbGU6IGFzeW5jIChVaUJ1bmRsZSwgZW52LCBhcHBzLCBwbHVnaW5zKSA9PiB7XG4gICAgICAgIGxldCBtb2R1bGVzID0gW107XG4gICAgICAgIGxldCBjb25maWcgPSBraWJhbmEuY29uZmlnO1xuXG4gICAgICAgIGNvbnN0IHRlc3RHbG9icyA9IFsnc3JjL3VpL3B1YmxpYy8qKi8qLmpzJ107XG4gICAgICAgIGNvbnN0IHRlc3RpbmdQbHVnaW5JZHMgPSBjb25maWcuZ2V0KCd0ZXN0c19idW5kbGUucGx1Z2luSWQnKTtcblxuICAgICAgICBpZiAodGVzdGluZ1BsdWdpbklkcykge1xuICAgICAgICAgIHRlc3RHbG9icy5wdXNoKCchc3JjL3VpL3B1YmxpYy8qKi9fX3Rlc3RzX18vKiovKicpO1xuICAgICAgICAgIHRlc3RpbmdQbHVnaW5JZHMuc3BsaXQoJywnKS5mb3JFYWNoKChwbHVnaW5JZCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcGx1Z2luID0gcGx1Z2lucy5ieUlkW3BsdWdpbklkXTtcbiAgICAgICAgICAgIGlmICghcGx1Z2luKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgdGVzdGluZ1BsdWdpbklkIDo6IHVua25vd24gcGx1Z2luICcgKyBwbHVnaW5JZCk7XG5cbiAgICAgICAgICAgIC8vIGFkZCB0aGUgbW9kdWxlcyBmcm9tIGFsbCBvZiB0aGlzIHBsdWdpbnMgYXBwc1xuICAgICAgICAgICAgZm9yIChsZXQgYXBwIG9mIHBsdWdpbi5hcHBzKSB7XG4gICAgICAgICAgICAgIG1vZHVsZXMgPSB1bmlvbihtb2R1bGVzLCBhcHAuZ2V0TW9kdWxlcygpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGVzdEdsb2JzLnB1c2goYCR7cGx1Z2luLnB1YmxpY0Rpcn0vKiovX190ZXN0c19fLyoqLyouanNgKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgIC8vIGFkZCB0aGUgbW9kdWxlcyBmcm9tIGFsbCBvZiB0aGUgYXBwc1xuICAgICAgICAgIGZvciAobGV0IGFwcCBvZiBhcHBzKSB7XG4gICAgICAgICAgICBtb2R1bGVzID0gdW5pb24obW9kdWxlcywgYXBwLmdldE1vZHVsZXMoKSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZm9yIChjb25zdCBwbHVnaW4gb2YgcGx1Z2lucykge1xuICAgICAgICAgICAgdGVzdEdsb2JzLnB1c2goYCR7cGx1Z2luLnB1YmxpY0Rpcn0vKiovX190ZXN0c19fLyoqLyouanNgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB0ZXN0RmlsZXMgPSBhd2FpdCBmaW5kU291cmNlRmlsZXModGVzdEdsb2JzKTtcbiAgICAgICAgZm9yIChsZXQgZiBvZiB0ZXN0RmlsZXMpIG1vZHVsZXMucHVzaChmKTtcblxuICAgICAgICBpZiAoY29uZmlnLmdldCgndGVzdHNfYnVuZGxlLmluc3RydW1lbnQnKSkge1xuICAgICAgICAgIGVudi5hZGRQb3N0TG9hZGVyKHtcbiAgICAgICAgICAgIHRlc3Q6IC9cXC5qc3g/JC8sXG4gICAgICAgICAgICBleGNsdWRlOiAvW1xcL1xcXFxdKF9fdGVzdHNfX3xub2RlX21vZHVsZXN8Ym93ZXJfY29tcG9uZW50c3x3ZWJwYWNrU2hpbXMpW1xcL1xcXFxdLyxcbiAgICAgICAgICAgIGxvYWRlcjogJ2lzdGFuYnVsLWluc3RydW1lbnRlcidcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGVudi5kZWZhdWx0VWlTZXR0aW5ncyA9IGRlZmF1bHRzUHJvdmlkZXIoKTtcblxuICAgICAgICByZXR1cm4gbmV3IFVpQnVuZGxlKHtcbiAgICAgICAgICBpZDogJ3Rlc3RzJyxcbiAgICAgICAgICBtb2R1bGVzOiBtb2R1bGVzLFxuICAgICAgICAgIHRlbXBsYXRlOiByZXF1aXJlKCcuL3Rlc3RzX2VudHJ5X3RlbXBsYXRlJyksXG4gICAgICAgICAgZW52OiBlbnZcbiAgICAgICAgfSk7XG4gICAgICB9LFxuXG4gICAgICBtb2R1bGVzOiB7XG4gICAgICAgIG5nX21vY2skOiBmcm9tUm9vdCgnc3JjL3BsdWdpbnMvZGV2X21vZGUvcHVibGljL25nX21vY2snKSxcbiAgICAgICAgZml4dHVyZXM6IGZyb21Sb290KCdzcmMvZml4dHVyZXMnKSxcbiAgICAgICAgdGVzdF91dGlsczogZnJvbVJvb3QoJ3NyYy90ZXN0X3V0aWxzJyksXG4gICAgICAgICdhbmd1bGFyLW1vY2tzJzoge1xuICAgICAgICAgIHBhdGg6IHJlcXVpcmUucmVzb2x2ZSgnYW5ndWxhci1tb2NrcycpLFxuICAgICAgICAgIGltcG9ydHM6ICdhbmd1bGFyJ1xuICAgICAgICB9LFxuICAgICAgfVxuICAgIH1cbiAgfSk7XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/tests_bundle/index.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;sBAAsB,QAAQ;;kCACD,4BAA4B;;;;iCAC7B,qBAAqB;;;;qBACxB,aAAa;;qBAEvB,UAAC,MAAM,EAAK;AACzB,SAAO,IAAI,MAAM,CAAC,MAAM,CAAC;AACvB,UAAM,EAAE,gBAAC,GAAG,EAAK;AACf,aAAO,GAAG,CAAC,MAAM,CAAC;AAChB,eAAO,EAAE,GAAG,CAAC,OAAO,EAAE,WAAQ,CAAC,IAAI,CAAC;AACpC,kBAAU,EAAE,GAAG,CAAC,OAAO,EAAE,WAAQ,CAAC,KAAK,CAAC;AACxC,gBAAQ,EAAE,GAAG,CAAC,MAAM,EAAE;OACvB,CAAC,WAAQ,EAAE,CAAC;KACd;;AAED,aAAS,EAAE;AACT,YAAM,oBAAE,WAAO,QAAQ,EAAE,GAAG,EAAE,IAAI,EAAE,OAAO,EAAK;AAC9C,YAAI,OAAO,GAAG,EAAE,CAAC;AACjB,YAAI,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC;;AAE3B,YAAM,SAAS,GAAG,CAAC,uBAAuB,CAAC,CAAC;AAC5C,YAAM,gBAAgB,GAAG,MAAM,CAAC,GAAG,CAAC,uBAAuB,CAAC,CAAC;;AAE7D,YAAI,gBAAgB,EAAE;AACpB,mBAAS,CAAC,IAAI,CAAC,kCAAkC,CAAC,CAAC;AACnD,0BAAgB,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,UAAC,QAAQ,EAAK;AAChD,gBAAM,MAAM,GAAG,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AACtC,gBAAI,CAAC,MAAM,EAAE,MAAM,IAAI,KAAK,CAAC,4CAA4C,GAAG,QAAQ,CAAC,CAAC;;;;;;;;AAGtF,mCAAgB,MAAM,CAAC,IAAI,8HAAE;oBAApB,GAAG;;AACV,uBAAO,GAAG,mBAAM,OAAO,EAAE,GAAG,CAAC,UAAU,EAAE,CAAC,CAAC;eAC5C;;;;;;;;;;;;;;;;AAED,qBAAS,CAAC,IAAI,CAAI,MAAM,CAAC,SAAS,2BAAwB,CAAC;WAC5D,CAAC,CAAC;SACJ,MAAM;;;;;;;;AAGL,kCAAgB,IAAI,mIAAE;kBAAb,GAAG;;AACV,qBAAO,GAAG,mBAAM,OAAO,EAAE,GAAG,CAAC,UAAU,EAAE,CAAC,CAAC;aAC5C;;;;;;;;;;;;;;;;;;;;;AAED,kCAAqB,OAAO,mIAAE;kBAAnB,MAAM;;AACf,uBAAS,CAAC,IAAI,CAAI,MAAM,CAAC,SAAS,2BAAwB,CAAC;aAC5D;;;;;;;;;;;;;;;SACF;;AAED,YAAM,SAAS,GAAG,MAAM,oCAAgB,SAAS,CAAC,CAAC;;;;;;AACnD,gCAAc,SAAS;gBAAd,CAAC;AAAe,mBAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;WAAA;;;;;;;;;;;;;;;;AAEzC,YAAI,MAAM,CAAC,GAAG,CAAC,yBAAyB,CAAC,EAAE;AACzC,aAAG,CAAC,aAAa,CAAC;AAChB,gBAAI,EAAE,SAAS;AACf,mBAAO,EAAE,oEAAoE;AAC7E,kBAAM,EAAE,uBAAuB;WAChC,CAAC,CAAC;SACJ;;AAED,WAAG,CAAC,iBAAiB,GAAG,sCAAkB,CAAC;;AAE3C,eAAO,IAAI,QAAQ,CAAC;AAClB,YAAE,EAAE,OAAO;AACX,iBAAO,EAAE,OAAO;AAChB,kBAAQ,EAAE,OAAO,CAAC,wBAAwB,CAAC;AAC3C,aAAG,EAAE,GAAG;SACT,CAAC,CAAC;OACJ,CAAA;;AAED,aAAO,EAAE;AACP,gBAAQ,EAAE,qBAAS,qCAAqC,CAAC;AACzD,gBAAQ,EAAE,qBAAS,cAAc,CAAC;AAClC,kBAAU,EAAE,qBAAS,gBAAgB,CAAC;AACtC,uBAAe,EAAE;AACf,cAAI,EAAE,OAAO,CAAC,OAAO,CAAC,eAAe,CAAC;AACtC,iBAAO,EAAE,SAAS;SACnB;OACF;KACF;GACF,CAAC,CAAC;CACJ",
      "file": "/home/vio/v3metrics/src/plugins/tests_bundle/index.js",
      "sourcesContent": [
        "import { union } from 'lodash';\nimport defaultsProvider from '../../ui/settings/defaults';\nimport findSourceFiles from './find_source_files';\nimport { fromRoot } from '../../utils';\n\nexport default (kibana) => {\n  return new kibana.Plugin({\n    config: (Joi) => {\n      return Joi.object({\n        enabled: Joi.boolean().default(true),\n        instrument: Joi.boolean().default(false),\n        pluginId: Joi.string()\n      }).default();\n    },\n\n    uiExports: {\n      bundle: async (UiBundle, env, apps, plugins) => {\n        let modules = [];\n        let config = kibana.config;\n\n        const testGlobs = ['src/ui/public/**/*.js'];\n        const testingPluginIds = config.get('tests_bundle.pluginId');\n\n        if (testingPluginIds) {\n          testGlobs.push('!src/ui/public/**/__tests__/**/*');\n          testingPluginIds.split(',').forEach((pluginId) => {\n            const plugin = plugins.byId[pluginId];\n            if (!plugin) throw new Error('Invalid testingPluginId :: unknown plugin ' + pluginId);\n\n            // add the modules from all of this plugins apps\n            for (let app of plugin.apps) {\n              modules = union(modules, app.getModules());\n            }\n\n            testGlobs.push(`${plugin.publicDir}/**/__tests__/**/*.js`);\n          });\n        } else {\n\n          // add the modules from all of the apps\n          for (let app of apps) {\n            modules = union(modules, app.getModules());\n          }\n\n          for (const plugin of plugins) {\n            testGlobs.push(`${plugin.publicDir}/**/__tests__/**/*.js`);\n          }\n        }\n\n        const testFiles = await findSourceFiles(testGlobs);\n        for (let f of testFiles) modules.push(f);\n\n        if (config.get('tests_bundle.instrument')) {\n          env.addPostLoader({\n            test: /\\.jsx?$/,\n            exclude: /[\\/\\\\](__tests__|node_modules|bower_components|webpackShims)[\\/\\\\]/,\n            loader: 'istanbul-instrumenter'\n          });\n        }\n\n        env.defaultUiSettings = defaultsProvider();\n\n        return new UiBundle({\n          id: 'tests',\n          modules: modules,\n          template: require('./tests_entry_template'),\n          env: env\n        });\n      },\n\n      modules: {\n        ng_mock$: fromRoot('src/plugins/dev_mode/public/ng_mock'),\n        fixtures: fromRoot('src/fixtures'),\n        test_utils: fromRoot('src/test_utils'),\n        'angular-mocks': {\n          path: require.resolve('angular-mocks'),\n          imports: 'angular'\n        },\n      }\n    }\n  });\n};\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/tests_bundle/find_source_files.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "../../utils",
            "imported": [
              "fromRoot"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "fromRoot",
                "local": "fromRoot"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "chain",
              "memoize"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "chain",
                "local": "chain"
              },
              {
                "kind": "named",
                "imported": "memoize",
                "local": "memoize"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "resolve"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "resolve",
                "local": "resolve"
              }
            ]
          },
          {
            "source": "bluebird",
            "imported": [
              "map",
              "fromNode"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "map",
                "local": "map"
              },
              {
                "kind": "named",
                "imported": "fromNode",
                "local": "fromNode"
              }
            ]
          },
          {
            "source": "glob-all",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "glob"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "async-to-generator",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nvar _utils = require('../../utils');\n\nvar _lodash = require('lodash');\n\nvar _path = require('path');\n\nvar _bluebird = require('bluebird');\n\nvar _globAll = require('glob-all');\n\nvar _globAll2 = _interopRequireDefault(_globAll);\n\nvar findSourceFiles = _asyncToGenerator(function* (patterns) {\n  var cwd = arguments.length <= 1 || arguments[1] === undefined ? (0, _utils.fromRoot)('.') : arguments[1];\n\n  patterns = [].concat(patterns || []);\n\n  var matches = yield (0, _bluebird.fromNode)(function (cb) {\n    (0, _globAll2['default'])(patterns, {\n      cwd: cwd,\n      ignore: ['node_modules/**/*', 'bower_components/**/*', '**/_*.js'],\n      symlinks: findSourceFiles.symlinks,\n      statCache: findSourceFiles.statCache,\n      realpathCache: findSourceFiles.realpathCache,\n      cache: findSourceFiles.cache\n    }, cb);\n  });\n\n  return (0, _lodash.chain)(matches).flatten().uniq().map(function (match) {\n    return (0, _path.resolve)(cwd, match);\n  }).value();\n});\n\nfindSourceFiles.symlinks = {};\nfindSourceFiles.statCache = {};\nfindSourceFiles.realpathCache = {};\nfindSourceFiles.cache = {};\n\nmodule.exports = findSourceFiles;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMvdGVzdHNfYnVuZGxlL2ZpbmRfc291cmNlX2ZpbGVzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztxQkFDeUIsYUFBYTs7c0JBQ1AsUUFBUTs7b0JBQ2YsTUFBTTs7d0JBQ0EsVUFBVTs7dUJBQ3ZCLFVBQVU7Ozs7QUFFM0IsSUFBSSxlQUFlLHFCQUFHLFdBQU8sUUFBUSxFQUEwQjtNQUF4QixHQUFHLHlEQUFHLHFCQUFTLEdBQUcsQ0FBQzs7QUFDeEQsVUFBUSxHQUFHLEVBQUUsQ0FBQyxNQUFNLENBQUMsUUFBUSxJQUFJLEVBQUUsQ0FBQyxDQUFDOztBQUVyQyxNQUFNLE9BQU8sR0FBRyxNQUFNLHdCQUFTLFVBQUEsRUFBRSxFQUFJO0FBQ25DLDhCQUFLLFFBQVEsRUFBRTtBQUNiLFNBQUcsRUFBRSxHQUFHO0FBQ1IsWUFBTSxFQUFFLENBQ04sbUJBQW1CLEVBQ25CLHVCQUF1QixFQUN2QixVQUFVLENBQ1g7QUFDRCxjQUFRLEVBQUUsZUFBZSxDQUFDLFFBQVE7QUFDbEMsZUFBUyxFQUFFLGVBQWUsQ0FBQyxTQUFTO0FBQ3BDLG1CQUFhLEVBQUUsZUFBZSxDQUFDLGFBQWE7QUFDNUMsV0FBSyxFQUFFLGVBQWUsQ0FBQyxLQUFLO0tBQzdCLEVBQUUsRUFBRSxDQUFDLENBQUM7R0FDUixDQUFDLENBQUM7O0FBRUgsU0FBTyxtQkFBTSxPQUFPLENBQUMsQ0FDcEIsT0FBTyxFQUFFLENBQ1QsSUFBSSxFQUFFLENBQ04sR0FBRyxDQUFDLFVBQUEsS0FBSztXQUFJLG1CQUFRLEdBQUcsRUFBRSxLQUFLLENBQUM7R0FBQSxDQUFDLENBQ2pDLEtBQUssRUFBRSxDQUFDO0NBQ1YsQ0FBQSxDQUFDOztBQUVGLGVBQWUsQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFDO0FBQzlCLGVBQWUsQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDO0FBQy9CLGVBQWUsQ0FBQyxhQUFhLEdBQUcsRUFBRSxDQUFDO0FBQ25DLGVBQWUsQ0FBQyxLQUFLLEdBQUcsRUFBRSxDQUFDOztBQUUzQixNQUFNLENBQUMsT0FBTyxHQUFHLGVBQWUsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9wbHVnaW5zL3Rlc3RzX2J1bmRsZS9maW5kX3NvdXJjZV9maWxlcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxuaW1wb3J0IHsgZnJvbVJvb3QgfSBmcm9tICcuLi8uLi91dGlscyc7XG5pbXBvcnQgeyBjaGFpbiwgbWVtb2l6ZSB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgeyByZXNvbHZlIH0gZnJvbSAncGF0aCc7XG5pbXBvcnQgeyBtYXAsIGZyb21Ob2RlIH0gZnJvbSAnYmx1ZWJpcmQnO1xuaW1wb3J0IGdsb2IgZnJvbSAnZ2xvYi1hbGwnO1xuXG5sZXQgZmluZFNvdXJjZUZpbGVzID0gYXN5bmMgKHBhdHRlcm5zLCBjd2QgPSBmcm9tUm9vdCgnLicpKSA9PiB7XG4gIHBhdHRlcm5zID0gW10uY29uY2F0KHBhdHRlcm5zIHx8IFtdKTtcblxuICBjb25zdCBtYXRjaGVzID0gYXdhaXQgZnJvbU5vZGUoY2IgPT4ge1xuICAgIGdsb2IocGF0dGVybnMsIHtcbiAgICAgIGN3ZDogY3dkLFxuICAgICAgaWdub3JlOiBbXG4gICAgICAgICdub2RlX21vZHVsZXMvKiovKicsXG4gICAgICAgICdib3dlcl9jb21wb25lbnRzLyoqLyonLFxuICAgICAgICAnKiovXyouanMnXG4gICAgICBdLFxuICAgICAgc3ltbGlua3M6IGZpbmRTb3VyY2VGaWxlcy5zeW1saW5rcyxcbiAgICAgIHN0YXRDYWNoZTogZmluZFNvdXJjZUZpbGVzLnN0YXRDYWNoZSxcbiAgICAgIHJlYWxwYXRoQ2FjaGU6IGZpbmRTb3VyY2VGaWxlcy5yZWFscGF0aENhY2hlLFxuICAgICAgY2FjaGU6IGZpbmRTb3VyY2VGaWxlcy5jYWNoZVxuICAgIH0sIGNiKTtcbiAgfSk7XG5cbiAgcmV0dXJuIGNoYWluKG1hdGNoZXMpXG4gIC5mbGF0dGVuKClcbiAgLnVuaXEoKVxuICAubWFwKG1hdGNoID0+IHJlc29sdmUoY3dkLCBtYXRjaCkpXG4gIC52YWx1ZSgpO1xufTtcblxuZmluZFNvdXJjZUZpbGVzLnN5bWxpbmtzID0ge307XG5maW5kU291cmNlRmlsZXMuc3RhdENhY2hlID0ge307XG5maW5kU291cmNlRmlsZXMucmVhbHBhdGhDYWNoZSA9IHt9O1xuZmluZFNvdXJjZUZpbGVzLmNhY2hlID0ge307XG5cbm1vZHVsZS5leHBvcnRzID0gZmluZFNvdXJjZUZpbGVzO1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/tests_bundle/find_source_files.js"
      ],
      "names": [],
      "mappings": ";;;;;;qBACyB,aAAa;;sBACP,QAAQ;;oBACf,MAAM;;wBACA,UAAU;;uBACvB,UAAU;;;;AAE3B,IAAI,eAAe,qBAAG,WAAO,QAAQ,EAA0B;MAAxB,GAAG,yDAAG,qBAAS,GAAG,CAAC;;AACxD,UAAQ,GAAG,EAAE,CAAC,MAAM,CAAC,QAAQ,IAAI,EAAE,CAAC,CAAC;;AAErC,MAAM,OAAO,GAAG,MAAM,wBAAS,UAAA,EAAE,EAAI;AACnC,8BAAK,QAAQ,EAAE;AACb,SAAG,EAAE,GAAG;AACR,YAAM,EAAE,CACN,mBAAmB,EACnB,uBAAuB,EACvB,UAAU,CACX;AACD,cAAQ,EAAE,eAAe,CAAC,QAAQ;AAClC,eAAS,EAAE,eAAe,CAAC,SAAS;AACpC,mBAAa,EAAE,eAAe,CAAC,aAAa;AAC5C,WAAK,EAAE,eAAe,CAAC,KAAK;KAC7B,EAAE,EAAE,CAAC,CAAC;GACR,CAAC,CAAC;;AAEH,SAAO,mBAAM,OAAO,CAAC,CACpB,OAAO,EAAE,CACT,IAAI,EAAE,CACN,GAAG,CAAC,UAAA,KAAK;WAAI,mBAAQ,GAAG,EAAE,KAAK,CAAC;GAAA,CAAC,CACjC,KAAK,EAAE,CAAC;CACV,CAAA,CAAC;;AAEF,eAAe,CAAC,QAAQ,GAAG,EAAE,CAAC;AAC9B,eAAe,CAAC,SAAS,GAAG,EAAE,CAAC;AAC/B,eAAe,CAAC,aAAa,GAAG,EAAE,CAAC;AACnC,eAAe,CAAC,KAAK,GAAG,EAAE,CAAC;;AAE3B,MAAM,CAAC,OAAO,GAAG,eAAe,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/tests_bundle/find_source_files.js",
      "sourcesContent": [
        "\nimport { fromRoot } from '../../utils';\nimport { chain, memoize } from 'lodash';\nimport { resolve } from 'path';\nimport { map, fromNode } from 'bluebird';\nimport glob from 'glob-all';\n\nlet findSourceFiles = async (patterns, cwd = fromRoot('.')) => {\n  patterns = [].concat(patterns || []);\n\n  const matches = await fromNode(cb => {\n    glob(patterns, {\n      cwd: cwd,\n      ignore: [\n        'node_modules/**/*',\n        'bower_components/**/*',\n        '**/_*.js'\n      ],\n      symlinks: findSourceFiles.symlinks,\n      statCache: findSourceFiles.statCache,\n      realpathCache: findSourceFiles.realpathCache,\n      cache: findSourceFiles.cache\n    }, cb);\n  });\n\n  return chain(matches)\n  .flatten()\n  .uniq()\n  .map(match => resolve(cwd, match))\n  .value();\n};\n\nfindSourceFiles.symlinks = {};\nfindSourceFiles.statCache = {};\nfindSourceFiles.realpathCache = {};\nfindSourceFiles.cache = {};\n\nmodule.exports = findSourceFiles;\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/tests_bundle/tests_entry_template.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nmodule.exports = function (_ref) {\n  var env = _ref.env;\n  var bundle = _ref.bundle;\n\n  var pluginSlug = env.pluginInfo.sort().map(function (p) {\n    return ' *  - ' + p;\n  }).join('\\n');\n\n  var requires = bundle.modules.map(function (m) {\n    return 'require(' + JSON.stringify(m) + ');';\n  }).join('\\n');\n\n  return '\\n/**\\n * Test entry file\\n *\\n * This is programatically created and updated, do not modify\\n *\\n * context: ' + JSON.stringify(env.context) + '\\n * includes code from:\\n' + pluginSlug + '\\n *\\n */\\n\\nwindow.__KBN__ = {\\n  version: \\'1.2.3\\',\\n  buildNum: 1234,\\n  vars: {\\n    kbnIndex: \\'.kibana\\',\\n    esShardTimeout: 1500,\\n    esApiVersion: \\'2.0\\',\\n    esRequestTimeout: \\'300000\\'\\n  },\\n  uiSettings: {\\n    defaults: ' + JSON.stringify(env.defaultUiSettings, null, 2).split('\\n').join('\\n    ') + ',\\n    user: {}\\n  }\\n};\\n\\nrequire(\\'ui/test_harness\\');\\n' + requires + '\\nrequire(\\'ui/test_harness\\').bootstrap(/* go! */);\\n';\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMvdGVzdHNfYnVuZGxlL3Rlc3RzX2VudHJ5X3RlbXBsYXRlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTSxDQUFDLE9BQU8sR0FBRyxVQUFVLElBQWEsRUFBRTtNQUFkLEdBQUcsR0FBSixJQUFhLENBQVosR0FBRztNQUFFLE1BQU0sR0FBWixJQUFhLENBQVAsTUFBTTs7QUFFckMsTUFBTSxVQUFVLEdBQUcsR0FBRyxDQUFDLFVBQVUsQ0FBQyxJQUFJLEVBQUUsQ0FDckMsR0FBRyxDQUFDLFVBQUEsQ0FBQztXQUFJLFFBQVEsR0FBRyxDQUFDO0dBQUEsQ0FBQyxDQUN0QixJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7O0FBRWQsTUFBTSxRQUFRLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FDNUIsR0FBRyxDQUFDLFVBQUEsQ0FBQzt3QkFBZSxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztHQUFJLENBQUMsQ0FDMUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDOztBQUVkLDRIQU1ZLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxrQ0FFdkMsVUFBVSx3UEFjSSxJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsbUVBTXZGLFFBQVEsNERBRVI7Q0FFRCxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMvdGVzdHNfYnVuZGxlL3Rlc3RzX2VudHJ5X3RlbXBsYXRlLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoe2VudiwgYnVuZGxlfSkge1xuXG4gIGNvbnN0IHBsdWdpblNsdWcgPSBlbnYucGx1Z2luSW5mby5zb3J0KClcbiAgICAubWFwKHAgPT4gJyAqICAtICcgKyBwKVxuICAgIC5qb2luKCdcXG4nKTtcblxuICBjb25zdCByZXF1aXJlcyA9IGJ1bmRsZS5tb2R1bGVzXG4gICAgLm1hcChtID0+IGByZXF1aXJlKCR7SlNPTi5zdHJpbmdpZnkobSl9KTtgKVxuICAgIC5qb2luKCdcXG4nKTtcblxuICByZXR1cm4gYFxuLyoqXG4gKiBUZXN0IGVudHJ5IGZpbGVcbiAqXG4gKiBUaGlzIGlzIHByb2dyYW1hdGljYWxseSBjcmVhdGVkIGFuZCB1cGRhdGVkLCBkbyBub3QgbW9kaWZ5XG4gKlxuICogY29udGV4dDogJHtKU09OLnN0cmluZ2lmeShlbnYuY29udGV4dCl9XG4gKiBpbmNsdWRlcyBjb2RlIGZyb206XG4ke3BsdWdpblNsdWd9XG4gKlxuICovXG5cbndpbmRvdy5fX0tCTl9fID0ge1xuICB2ZXJzaW9uOiAnMS4yLjMnLFxuICBidWlsZE51bTogMTIzNCxcbiAgdmFyczoge1xuICAgIGtibkluZGV4OiAnLmtpYmFuYScsXG4gICAgZXNTaGFyZFRpbWVvdXQ6IDE1MDAsXG4gICAgZXNBcGlWZXJzaW9uOiAnMi4wJyxcbiAgICBlc1JlcXVlc3RUaW1lb3V0OiAnMzAwMDAwJ1xuICB9LFxuICB1aVNldHRpbmdzOiB7XG4gICAgZGVmYXVsdHM6ICR7SlNPTi5zdHJpbmdpZnkoZW52LmRlZmF1bHRVaVNldHRpbmdzLCBudWxsLCAyKS5zcGxpdCgnXFxuJykuam9pbignXFxuICAgICcpfSxcbiAgICB1c2VyOiB7fVxuICB9XG59O1xuXG5yZXF1aXJlKCd1aS90ZXN0X2hhcm5lc3MnKTtcbiR7cmVxdWlyZXN9XG5yZXF1aXJlKCd1aS90ZXN0X2hhcm5lc3MnKS5ib290c3RyYXAoLyogZ28hICovKTtcbmA7XG5cbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/tests_bundle/tests_entry_template.js"
      ],
      "names": [],
      "mappings": ";;AAAA,MAAM,CAAC,OAAO,GAAG,UAAU,IAAa,EAAE;MAAd,GAAG,GAAJ,IAAa,CAAZ,GAAG;MAAE,MAAM,GAAZ,IAAa,CAAP,MAAM;;AAErC,MAAM,UAAU,GAAG,GAAG,CAAC,UAAU,CAAC,IAAI,EAAE,CACrC,GAAG,CAAC,UAAA,CAAC;WAAI,QAAQ,GAAG,CAAC;GAAA,CAAC,CACtB,IAAI,CAAC,IAAI,CAAC,CAAC;;AAEd,MAAM,QAAQ,GAAG,MAAM,CAAC,OAAO,CAC5B,GAAG,CAAC,UAAA,CAAC;wBAAe,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;GAAI,CAAC,CAC1C,IAAI,CAAC,IAAI,CAAC,CAAC;;AAEd,4HAMY,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,OAAO,CAAC,kCAEvC,UAAU,wPAcI,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,iBAAiB,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,mEAMvF,QAAQ,4DAER;CAED,CAAC",
      "file": "/home/vio/v3metrics/src/plugins/tests_bundle/tests_entry_template.js",
      "sourcesContent": [
        "module.exports = function ({env, bundle}) {\n\n  const pluginSlug = env.pluginInfo.sort()\n    .map(p => ' *  - ' + p)\n    .join('\\n');\n\n  const requires = bundle.modules\n    .map(m => `require(${JSON.stringify(m)});`)\n    .join('\\n');\n\n  return `\n/**\n * Test entry file\n *\n * This is programatically created and updated, do not modify\n *\n * context: ${JSON.stringify(env.context)}\n * includes code from:\n${pluginSlug}\n *\n */\n\nwindow.__KBN__ = {\n  version: '1.2.3',\n  buildNum: 1234,\n  vars: {\n    kbnIndex: '.kibana',\n    esShardTimeout: 1500,\n    esApiVersion: '2.0',\n    esRequestTimeout: '300000'\n  },\n  uiSettings: {\n    defaults: ${JSON.stringify(env.defaultUiSettings, null, 2).split('\\n').join('\\n    ')},\n    user: {}\n  }\n};\n\nrequire('ui/test_harness');\n${requires}\nrequire('ui/test_harness').bootstrap(/* go! */);\n`;\n\n};\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/cli/cli.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "../utils/package_json",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "pkg"
              }
            ]
          },
          {
            "source": "./command",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Command"
              }
            ]
          },
          {
            "source": "./serve/serve",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "serveCommand"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _utilsPackage_json = require('../utils/package_json');\n\nvar _utilsPackage_json2 = _interopRequireDefault(_utilsPackage_json);\n\nvar _command = require('./command');\n\nvar _command2 = _interopRequireDefault(_command);\n\nvar _serveServe = require('./serve/serve');\n\nvar _serveServe2 = _interopRequireDefault(_serveServe);\n\nvar argv = process.env.kbnWorkerArgv ? JSON.parse(process.env.kbnWorkerArgv) : process.argv.slice();\nvar program = new _command2['default']('bin/kibana');\n\nprogram.version(_utilsPackage_json2['default'].version).description('Kibana is an open source (Apache Licensed), browser ' + 'based analytics and search dashboard for Elasticsearch.');\n\n// attach commands\n(0, _serveServe2['default'])(program);\n\nprogram.command('help <command>').description('Get the help for a specific command').action(function (cmdName) {\n  var cmd = _lodash2['default'].find(program.commands, { _name: cmdName });\n  if (!cmd) return program.error('unknown command ' + cmdName);\n  cmd.help();\n});\n\nprogram.command('*', null, { noHelp: true }).action(function (cmd, options) {\n  program.error('unknown command ' + cmd);\n});\n\n// check for no command name\nvar subCommand = argv[2] && !String(argv[2][0]).match(/^-|^\\.|\\//);\n\nif (!subCommand) {\n  if (_lodash2['default'].intersection(argv.slice(2), ['-h', '--help']).length) {\n    program.defaultHelp();\n  } else {\n    argv.splice(2, 0, ['serve']);\n  }\n}\n\nprogram.parse(argv);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL2NsaS9jbGkuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztzQkFBYyxRQUFROzs7O2lDQUNOLHVCQUF1Qjs7Ozt1QkFDbkIsV0FBVzs7OzswQkFDTixlQUFlOzs7O0FBRXhDLElBQU0sSUFBSSxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO0FBQ3RHLElBQU0sT0FBTyxHQUFHLHlCQUFZLFlBQVksQ0FBQyxDQUFDOztBQUUxQyxPQUFPLENBQ04sT0FBTyxDQUFDLCtCQUFJLE9BQU8sQ0FBQyxDQUNwQixXQUFXLENBQ1Ysc0RBQXNELEdBQ3RELHlEQUF5RCxDQUMxRCxDQUFDOzs7QUFHRiw2QkFBYSxPQUFPLENBQUMsQ0FBQzs7QUFFdEIsT0FBTyxDQUNOLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUN6QixXQUFXLENBQUMscUNBQXFDLENBQUMsQ0FDbEQsTUFBTSxDQUFDLFVBQVUsT0FBTyxFQUFFO0FBQ3pCLE1BQU0sR0FBRyxHQUFHLG9CQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxDQUFDLENBQUM7QUFDekQsTUFBSSxDQUFDLEdBQUcsRUFBRSxPQUFPLE9BQU8sQ0FBQyxLQUFLLHNCQUFvQixPQUFPLENBQUcsQ0FBQztBQUM3RCxLQUFHLENBQUMsSUFBSSxFQUFFLENBQUM7Q0FDWixDQUFDLENBQUM7O0FBRUgsT0FBTyxDQUNOLE9BQU8sQ0FBQyxHQUFHLEVBQUUsSUFBSSxFQUFFLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxDQUFDLENBQ3BDLE1BQU0sQ0FBQyxVQUFVLEdBQUcsRUFBRSxPQUFPLEVBQUU7QUFDOUIsU0FBTyxDQUFDLEtBQUssc0JBQW9CLEdBQUcsQ0FBRyxDQUFDO0NBQ3pDLENBQUMsQ0FBQzs7O0FBR0gsSUFBTSxVQUFVLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQzs7QUFFckUsSUFBSSxDQUFDLFVBQVUsRUFBRTtBQUNmLE1BQUksb0JBQUUsWUFBWSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQyxNQUFNLEVBQUU7QUFDMUQsV0FBTyxDQUFDLFdBQVcsRUFBRSxDQUFDO0dBQ3ZCLE1BQU07QUFDTCxRQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO0dBQzlCO0NBQ0Y7O0FBRUQsT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9jbGkvY2xpLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBwa2cgZnJvbSAnLi4vdXRpbHMvcGFja2FnZV9qc29uJztcbmltcG9ydCBDb21tYW5kIGZyb20gJy4vY29tbWFuZCc7XG5pbXBvcnQgc2VydmVDb21tYW5kIGZyb20gJy4vc2VydmUvc2VydmUnO1xuXG5jb25zdCBhcmd2ID0gcHJvY2Vzcy5lbnYua2JuV29ya2VyQXJndiA/IEpTT04ucGFyc2UocHJvY2Vzcy5lbnYua2JuV29ya2VyQXJndikgOiBwcm9jZXNzLmFyZ3Yuc2xpY2UoKTtcbmNvbnN0IHByb2dyYW0gPSBuZXcgQ29tbWFuZCgnYmluL2tpYmFuYScpO1xuXG5wcm9ncmFtXG4udmVyc2lvbihwa2cudmVyc2lvbilcbi5kZXNjcmlwdGlvbihcbiAgJ0tpYmFuYSBpcyBhbiBvcGVuIHNvdXJjZSAoQXBhY2hlIExpY2Vuc2VkKSwgYnJvd3NlciAnICtcbiAgJ2Jhc2VkIGFuYWx5dGljcyBhbmQgc2VhcmNoIGRhc2hib2FyZCBmb3IgRWxhc3RpY3NlYXJjaC4nXG4pO1xuXG4vLyBhdHRhY2ggY29tbWFuZHNcbnNlcnZlQ29tbWFuZChwcm9ncmFtKTtcblxucHJvZ3JhbVxuLmNvbW1hbmQoJ2hlbHAgPGNvbW1hbmQ+Jylcbi5kZXNjcmlwdGlvbignR2V0IHRoZSBoZWxwIGZvciBhIHNwZWNpZmljIGNvbW1hbmQnKVxuLmFjdGlvbihmdW5jdGlvbiAoY21kTmFtZSkge1xuICBjb25zdCBjbWQgPSBfLmZpbmQocHJvZ3JhbS5jb21tYW5kcywgeyBfbmFtZTogY21kTmFtZSB9KTtcbiAgaWYgKCFjbWQpIHJldHVybiBwcm9ncmFtLmVycm9yKGB1bmtub3duIGNvbW1hbmQgJHtjbWROYW1lfWApO1xuICBjbWQuaGVscCgpO1xufSk7XG5cbnByb2dyYW1cbi5jb21tYW5kKCcqJywgbnVsbCwgeyBub0hlbHA6IHRydWUgfSlcbi5hY3Rpb24oZnVuY3Rpb24gKGNtZCwgb3B0aW9ucykge1xuICBwcm9ncmFtLmVycm9yKGB1bmtub3duIGNvbW1hbmQgJHtjbWR9YCk7XG59KTtcblxuLy8gY2hlY2sgZm9yIG5vIGNvbW1hbmQgbmFtZVxuY29uc3Qgc3ViQ29tbWFuZCA9IGFyZ3ZbMl0gJiYgIVN0cmluZyhhcmd2WzJdWzBdKS5tYXRjaCgvXi18XlxcLnxcXC8vKTtcblxuaWYgKCFzdWJDb21tYW5kKSB7XG4gIGlmIChfLmludGVyc2VjdGlvbihhcmd2LnNsaWNlKDIpLCBbJy1oJywgJy0taGVscCddKS5sZW5ndGgpIHtcbiAgICBwcm9ncmFtLmRlZmF1bHRIZWxwKCk7XG4gIH0gZWxzZSB7XG4gICAgYXJndi5zcGxpY2UoMiwgMCwgWydzZXJ2ZSddKTtcbiAgfVxufVxuXG5wcm9ncmFtLnBhcnNlKGFyZ3YpO1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/cli/cli.js"
      ],
      "names": [],
      "mappings": ";;;;sBAAc,QAAQ;;;;iCACN,uBAAuB;;;;uBACnB,WAAW;;;;0BACN,eAAe;;;;AAExC,IAAM,IAAI,GAAG,OAAO,CAAC,GAAG,CAAC,aAAa,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC,GAAG,OAAO,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC;AACtG,IAAM,OAAO,GAAG,yBAAY,YAAY,CAAC,CAAC;;AAE1C,OAAO,CACN,OAAO,CAAC,+BAAI,OAAO,CAAC,CACpB,WAAW,CACV,sDAAsD,GACtD,yDAAyD,CAC1D,CAAC;;;AAGF,6BAAa,OAAO,CAAC,CAAC;;AAEtB,OAAO,CACN,OAAO,CAAC,gBAAgB,CAAC,CACzB,WAAW,CAAC,qCAAqC,CAAC,CAClD,MAAM,CAAC,UAAU,OAAO,EAAE;AACzB,MAAM,GAAG,GAAG,oBAAE,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,CAAC,CAAC;AACzD,MAAI,CAAC,GAAG,EAAE,OAAO,OAAO,CAAC,KAAK,sBAAoB,OAAO,CAAG,CAAC;AAC7D,KAAG,CAAC,IAAI,EAAE,CAAC;CACZ,CAAC,CAAC;;AAEH,OAAO,CACN,OAAO,CAAC,GAAG,EAAE,IAAI,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CACpC,MAAM,CAAC,UAAU,GAAG,EAAE,OAAO,EAAE;AAC9B,SAAO,CAAC,KAAK,sBAAoB,GAAG,CAAG,CAAC;CACzC,CAAC,CAAC;;;AAGH,IAAM,UAAU,GAAG,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;;AAErE,IAAI,CAAC,UAAU,EAAE;AACf,MAAI,oBAAE,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC,CAAC,MAAM,EAAE;AAC1D,WAAO,CAAC,WAAW,EAAE,CAAC;GACvB,MAAM;AACL,QAAI,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC;GAC9B;CACF;;AAED,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC",
      "file": "/home/vio/v3metrics/src/cli/cli.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport pkg from '../utils/package_json';\nimport Command from './command';\nimport serveCommand from './serve/serve';\n\nconst argv = process.env.kbnWorkerArgv ? JSON.parse(process.env.kbnWorkerArgv) : process.argv.slice();\nconst program = new Command('bin/kibana');\n\nprogram\n.version(pkg.version)\n.description(\n  'Kibana is an open source (Apache Licensed), browser ' +\n  'based analytics and search dashboard for Elasticsearch.'\n);\n\n// attach commands\nserveCommand(program);\n\nprogram\n.command('help <command>')\n.description('Get the help for a specific command')\n.action(function (cmdName) {\n  const cmd = _.find(program.commands, { _name: cmdName });\n  if (!cmd) return program.error(`unknown command ${cmdName}`);\n  cmd.help();\n});\n\nprogram\n.command('*', null, { noHelp: true })\n.action(function (cmd, options) {\n  program.error(`unknown command ${cmd}`);\n});\n\n// check for no command name\nconst subCommand = argv[2] && !String(argv[2][0]).match(/^-|^\\.|\\//);\n\nif (!subCommand) {\n  if (_.intersection(argv.slice(2), ['-h', '--help']).length) {\n    program.defaultHelp();\n  } else {\n    argv.splice(2, 0, ['serve']);\n  }\n}\n\nprogram.parse(argv);\n"
      ]
    },
    "mtime": 1467036622781
  },
  "{\"filename\":\"/home/vio/v3metrics/src/cli/serve/serve.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "fs",
            "imported": [
              "statSync"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "statSync",
                "local": "statSync"
              }
            ]
          },
          {
            "source": "cluster",
            "imported": [
              "isWorker"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "isWorker",
                "local": "isWorker"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "resolve"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "resolve",
                "local": "resolve"
              }
            ]
          },
          {
            "source": "../../utils",
            "imported": [
              "fromRoot"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "fromRoot",
                "local": "fromRoot"
              }
            ]
          },
          {
            "source": "../../server/path",
            "imported": [
              "getConfig"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "getConfig",
                "local": "getConfig"
              }
            ]
          },
          {
            "source": "./read_yaml_config",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "readYamlConfig"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "async-to-generator",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _fs = require('fs');\n\nvar _cluster = require('cluster');\n\nvar _path = require('path');\n\nvar _utils = require('../../utils');\n\nvar _serverPath = require('../../server/path');\n\nvar _read_yaml_config = require('./read_yaml_config');\n\nvar _read_yaml_config2 = _interopRequireDefault(_read_yaml_config);\n\nvar canCluster = undefined;\ntry {\n  require.resolve('../cluster/cluster_manager');\n  canCluster = true;\n} catch (e) {\n  canCluster = false;\n}\n\nvar pathCollector = function pathCollector() {\n  var paths = [];\n  return function (path) {\n    paths.push((0, _path.resolve)(process.cwd(), path));\n    return paths;\n  };\n};\n\nvar configPathCollector = pathCollector();\nvar pluginDirCollector = pathCollector();\nvar pluginPathCollector = pathCollector();\n\nfunction readServerSettings(opts, extraCliOptions) {\n  var settings = (0, _read_yaml_config2['default'])(opts.config);\n  var set = _lodash2['default'].partial(_lodash2['default'].set, settings);\n  var get = _lodash2['default'].partial(_lodash2['default'].get, settings);\n  var has = _lodash2['default'].partial(_lodash2['default'].has, settings);\n  var merge = _lodash2['default'].partial(_lodash2['default'].merge, settings);\n\n  if (opts.dev) {\n    set('env', 'development');\n    set('optimize.lazy', true);\n    if (opts.ssl && !has('server.ssl.cert') && !has('server.ssl.key')) {\n      set('server.host', 'localhost');\n      set('server.ssl.cert', (0, _utils.fromRoot)('test/dev_certs/server.crt'));\n      set('server.ssl.key', (0, _utils.fromRoot)('test/dev_certs/server.key'));\n    }\n  }\n\n  if (opts.elasticsearch) set('elasticsearch.url', opts.elasticsearch);\n  if (opts.port) set('server.port', opts.port);\n  if (opts.host) set('server.host', opts.host);\n  if (opts.quiet) set('logging.quiet', true);\n  if (opts.silent) set('logging.silent', true);\n  if (opts.verbose) set('logging.verbose', true);\n  if (opts.logFile) set('logging.dest', opts.logFile);\n\n  set('plugins.scanDirs', _lodash2['default'].compact([].concat(get('plugins.scanDirs'), opts.pluginDir)));\n\n  set('plugins.paths', _lodash2['default'].compact([].concat(get('plugins.paths'), opts.pluginPath)));\n\n  merge(extraCliOptions);\n\n  return settings;\n}\n\nmodule.exports = function (program) {\n  var command = program.command('serve');\n\n  command.description('Run the kibana server').collectUnknownOptions().option('-e, --elasticsearch <uri>', 'Elasticsearch instance').option('-c, --config <path>', 'Path to the config file, can be changed with the CONFIG_PATH environment variable as well. ' + 'Use mulitple --config args to include multiple config files.', configPathCollector, [(0, _serverPath.getConfig)()]).option('-p, --port <port>', 'The port to bind to', parseInt).option('-q, --quiet', 'Prevent all logging except errors').option('-Q, --silent', 'Prevent all logging').option('--verbose', 'Turns on verbose logging').option('-H, --host <host>', 'The host to bind to').option('-l, --log-file <path>', 'The file to log to').option('--plugin-dir <path>', 'A path to scan for plugins, this can be specified multiple ' + 'times to specify multiple directories', pluginDirCollector, [(0, _utils.fromRoot)('installedPlugins'), (0, _utils.fromRoot)('src/plugins')]).option('--plugin-path <path>', 'A path to a plugin which should be included by the server, ' + 'this can be specified multiple times to specify multiple paths', pluginPathCollector, []).option('--plugins <path>', 'an alias for --plugin-dir', pluginDirCollector);\n\n  if (canCluster) {\n    command.option('--dev', 'Run the server with development mode defaults').option('--no-ssl', 'Don\\'t run the dev server using HTTPS').option('--no-base-path', 'Don\\'t put a proxy in front of the dev server, which adds a random basePath').option('--no-watch', 'Prevents automatic restarts of the server in --dev mode');\n  }\n\n  command.action(_asyncToGenerator(function* (opts) {\n    var _this = this;\n\n    if (opts.dev) {\n      try {\n        var kbnDevConfig = (0, _utils.fromRoot)('config/kibana.dev.yml');\n        if ((0, _fs.statSync)(kbnDevConfig).isFile()) {\n          opts.config.push(kbnDevConfig);\n        }\n      } catch (err) {\n        // ignore, kibana.dev.yml does not exist\n      }\n    }\n\n    var getCurrentSettings = function getCurrentSettings() {\n      return readServerSettings(opts, _this.getUnknownOptions());\n    };\n    var settings = getCurrentSettings();\n\n    if (canCluster && opts.dev && !_cluster.isWorker) {\n      // stop processing the action and handoff to cluster manager\n      var ClusterManager = require('../cluster/cluster_manager');\n      new ClusterManager(opts, settings);\n      return;\n    }\n\n    var kbnServer = {};\n    var KbnServer = require('../../server/kbn_server');\n    try {\n      kbnServer = new KbnServer(settings);\n      yield kbnServer.ready();\n    } catch (err) {\n      var _kbnServer = kbnServer;\n      var server = _kbnServer.server;\n\n      if (err.code === 'EADDRINUSE') {\n        logFatal('Port ' + err.port + ' is already in use. Another instance of Kibana may be running!', server);\n      } else {\n        logFatal(err, server);\n      }\n\n      kbnServer.close();\n      process.exit(1); // eslint-disable-line no-process-exit\n    }\n\n    process.on('SIGHUP', function reloadConfig() {\n      var settings = getCurrentSettings();\n      kbnServer.server.log(['info', 'config'], 'Reloading logging configuration due to SIGHUP.');\n      kbnServer.applyLoggingConfiguration(settings);\n      kbnServer.server.log(['info', 'config'], 'Reloaded logging configuration due to SIGHUP.');\n    });\n\n    return kbnServer;\n  }));\n};\n\nfunction logFatal(message, server) {\n  if (server) {\n    server.log(['fatal'], message);\n  }\n  console.error('FATAL', message);\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL2NsaS9zZXJ2ZS9zZXJ2ZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7c0JBQWMsUUFBUTs7OztrQkFDRyxJQUFJOzt1QkFDSixTQUFTOztvQkFDVixNQUFNOztxQkFDTCxhQUFhOzswQkFDWixtQkFBbUI7O2dDQUNsQixvQkFBb0I7Ozs7QUFFL0MsSUFBSSxVQUFVLFlBQUEsQ0FBQztBQUNmLElBQUk7QUFDRixTQUFPLENBQUMsT0FBTyxDQUFDLDRCQUE0QixDQUFDLENBQUM7QUFDOUMsWUFBVSxHQUFHLElBQUksQ0FBQztDQUNuQixDQUFDLE9BQU8sQ0FBQyxFQUFFO0FBQ1YsWUFBVSxHQUFHLEtBQUssQ0FBQztDQUNwQjs7QUFFRCxJQUFNLGFBQWEsR0FBRyxTQUFoQixhQUFhLEdBQWU7QUFDaEMsTUFBTSxLQUFLLEdBQUcsRUFBRSxDQUFDO0FBQ2pCLFNBQU8sVUFBVSxJQUFJLEVBQUU7QUFDckIsU0FBSyxDQUFDLElBQUksQ0FBQyxtQkFBUSxPQUFPLENBQUMsR0FBRyxFQUFFLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQztBQUN6QyxXQUFPLEtBQUssQ0FBQztHQUNkLENBQUM7Q0FDSCxDQUFDOztBQUVGLElBQU0sbUJBQW1CLEdBQUcsYUFBYSxFQUFFLENBQUM7QUFDNUMsSUFBTSxrQkFBa0IsR0FBRyxhQUFhLEVBQUUsQ0FBQztBQUMzQyxJQUFNLG1CQUFtQixHQUFHLGFBQWEsRUFBRSxDQUFDOztBQUU1QyxTQUFTLGtCQUFrQixDQUFDLElBQUksRUFBRSxlQUFlLEVBQUU7QUFDakQsTUFBTSxRQUFRLEdBQUcsbUNBQWUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQzdDLE1BQU0sR0FBRyxHQUFHLG9CQUFFLE9BQU8sQ0FBQyxvQkFBRSxHQUFHLEVBQUUsUUFBUSxDQUFDLENBQUM7QUFDdkMsTUFBTSxHQUFHLEdBQUcsb0JBQUUsT0FBTyxDQUFDLG9CQUFFLEdBQUcsRUFBRSxRQUFR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QyxNQUFNLEVBQUUsUUFBUSxDQUFDLEVBQUUsK0NBQStDLENBQUMsQ0FBQztLQUMzRixDQUFDLENBQUM7O0FBRUgsV0FBTyxTQUFTLENBQUM7R0FDbEIsRUFBQyxDQUFDO0NBQ0osQ0FBQzs7QUFFRixTQUFTLFFBQVEsQ0FBQyxPQUFPLEVBQUUsTUFBTSxFQUFFO0FBQ2pDLE1BQUksTUFBTSxFQUFFO0FBQ1YsVUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0dBQ2hDO0FBQ0QsU0FBTyxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUM7Q0FDakMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvY2xpL3NlcnZlL3NlcnZlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IHN0YXRTeW5jIH0gZnJvbSAnZnMnO1xuaW1wb3J0IHsgaXNXb3JrZXIgfSBmcm9tICdjbHVzdGVyJztcbmltcG9ydCB7IHJlc29sdmUgfSBmcm9tICdwYXRoJztcbmltcG9ydCB7IGZyb21Sb290IH0gZnJvbSAnLi4vLi4vdXRpbHMnO1xuaW1wb3J0IHsgZ2V0Q29uZmlnIH0gZnJvbSAnLi4vLi4vc2VydmVyL3BhdGgnO1xuaW1wb3J0IHJlYWRZYW1sQ29uZmlnIGZyb20gJy4vcmVhZF95YW1sX2NvbmZpZyc7XG5cbmxldCBjYW5DbHVzdGVyO1xudHJ5IHtcbiAgcmVxdWlyZS5yZXNvbHZlKCcuLi9jbHVzdGVyL2NsdXN0ZXJfbWFuYWdlcicpO1xuICBjYW5DbHVzdGVyID0gdHJ1ZTtcbn0gY2F0Y2ggKGUpIHtcbiAgY2FuQ2x1c3RlciA9IGZhbHNlO1xufVxuXG5jb25zdCBwYXRoQ29sbGVjdG9yID0gZnVuY3Rpb24gKCkge1xuICBjb25zdCBwYXRocyA9IFtdO1xuICByZXR1cm4gZnVuY3Rpb24gKHBhdGgpIHtcbiAgICBwYXRocy5wdXNoKHJlc29sdmUocHJvY2Vzcy5jd2QoKSwgcGF0aCkpO1xuICAgIHJldHVybiBwYXRocztcbiAgfTtcbn07XG5cbmNvbnN0IGNvbmZpZ1BhdGhDb2xsZWN0b3IgPSBwYXRoQ29sbGVjdG9yKCk7XG5jb25zdCBwbHVnaW5EaXJDb2xsZWN0b3IgPSBwYXRoQ29sbGVjdG9yKCk7XG5jb25zdCBwbHVnaW5QYXRoQ29sbGVjdG9yID0gcGF0aENvbGxlY3RvcigpO1xuXG5mdW5jdGlvbiByZWFkU2VydmVyU2V0dGluZ3Mob3B0cywgZXh0cmFDbGlPcHRpb25zKSB7XG4gIGNvbnN0IHNldHRpbmdzID0gcmVhZFlhbWxDb25maWcob3B0cy5jb25maWcpO1xuICBjb25zdCBzZXQgPSBfLnBhcnRpYWwoXy5zZXQsIHNldHRpbmdzKTtcbiAgY29uc3QgZ2V0ID0gXy5wYXJ0aWFsKF8uZ2V0LCBzZXR0aW5ncyk7XG4gIGNvbnN0IGhhcyA9IF8ucGFydGlhbChfLmhhcywgc2V0dGluZ3MpO1xuICBjb25zdCBtZXJnZSA9IF8ucGFydGlhbChfLm1lcmdlLCBzZXR0aW5ncyk7XG5cbiAgaWYgKG9wdHMuZGV2KSB7XG4gICAgc2V0KCdlbnYnLCAnZGV2ZWxvcG1lbnQnKTtcbiAgICBzZXQoJ29wdGltaXplLmxhenknLCB0cnVlKTtcbiAgICBpZiAob3B0cy5zc2wgJiYgIWhhcygnc2VydmVyLnNzbC5jZXJ0JykgJiYgIWhhcygnc2VydmVyLnNzbC5rZXknKSkge1xuICAgICAgc2V0KCdzZXJ2ZXIuaG9zdCcsICdsb2NhbGhvc3QnKTtcbiAgICAgIHNldCgnc2VydmVyLnNzbC5jZXJ0JywgZnJvbVJvb3QoJ3Rlc3QvZGV2X2NlcnRzL3NlcnZlci5jcnQnKSk7XG4gICAgICBzZXQoJ3NlcnZlci5zc2wua2V5JywgZnJvbVJvb3QoJ3Rlc3QvZGV2X2NlcnRzL3NlcnZlci5rZXknKSk7XG4gICAgfVxuICB9XG5cbiAgaWYgKG9wdHMuZWxhc3RpY3NlYXJjaCkgc2V0KCdlbGFzdGljc2VhcmNoLnVybCcsIG9wdHMuZWxhc3RpY3NlYXJjaCk7XG4gIGlmIChvcHRzLnBvcnQpIHNldCgnc2VydmVyLnBvcnQnLCBvcHRzLnBvcnQpO1xuICBpZiAob3B0cy5ob3N0KSBzZXQoJ3NlcnZlci5ob3N0Jywgb3B0cy5ob3N0KTtcbiAgaWYgKG9wdHMucXVpZXQpIHNldCgnbG9nZ2luZy5xdWlldCcsIHRydWUpO1xuICBpZiAob3B0cy5zaWxlbnQpIHNldCgnbG9nZ2luZy5zaWxlbnQnLCB0cnVlKTtcbiAgaWYgKG9wdHMudmVyYm9zZSkgc2V0KCdsb2dnaW5nLnZlcmJvc2UnLCB0cnVlKTtcbiAgaWYgKG9wdHMubG9nRmlsZSkgc2V0KCdsb2dnaW5nLmRlc3QnLCBvcHRzLmxvZ0ZpbGUpO1xuXG4gIHNldCgncGx1Z2lucy5zY2FuRGlycycsIF8uY29tcGFjdChbXS5jb25jYXQoXG4gICAgZ2V0KCdwbHVnaW5zLnNjYW5EaXJzJyksXG4gICAgb3B0cy5wbHVnaW5EaXJcbiAgKSkpO1xuXG4gIHNldCgncGx1Z2lucy5wYXRocycsIF8uY29tcGFjdChbXS5jb25jYXQoXG4gICAgZ2V0KCdwbHVnaW5zLnBhdGhzJyksXG4gICAgb3B0cy5wbHVnaW5QYXRoXG4gICkpKTtcblxuICBtZXJnZShleHRyYUNsaU9wdGlvbnMpO1xuXG4gIHJldHVybiBzZXR0aW5ncztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAocHJvZ3JhbSkge1xuICBjb25zdCBjb21tYW5kID0gcHJvZ3JhbS5jb21tYW5kKCdzZXJ2ZScpO1xuXG4gIGNvbW1hbmRcbiAgLmRlc2NyaXB0aW9uKCdSdW4gdGhlIGtpYmFuYSBzZXJ2ZXInKVxuICAuY29sbGVjdFVua25vd25PcHRpb25zKClcbiAgLm9wdGlvbignLWUsIC0tZWxhc3RpY3NlYXJjaCA8dXJpPicsICdFbGFzdGljc2VhcmNoIGluc3RhbmNlJylcbiAgLm9wdGlvbihcbiAgICAnLWMsIC0tY29uZmlnIDxwYXRoPicsXG4gICAgJ1BhdGggdG8gdGhlIGNvbmZpZyBmaWxlLCBjYW4gYmUgY2hhbmdlZCB3aXRoIHRoZSBDT05GSUdfUEFUSCBlbnZpcm9ubWVudCB2YXJpYWJsZSBhcyB3ZWxsLiAnICtcbiAgICAnVXNlIG11bGl0cGxlIC0tY29uZmlnIGFyZ3MgdG8gaW5jbHVkZSBtdWx0aXBsZSBjb25maWcgZmlsZXMuJyxcbiAgICBjb25maWdQYXRoQ29sbGVjdG9yLFxuICAgIFsgZ2V0Q29uZmlnKCkgXVxuICApXG4gIC5vcHRpb24oJy1wLCAtLXBvcnQgPHBvcnQ+JywgJ1RoZSBwb3J0IHRvIGJpbmQgdG8nLCBwYXJzZUludClcbiAgLm9wdGlvbignLXEsIC0tcXVpZXQnLCAnUHJldmVudCBhbGwgbG9nZ2luZyBleGNlcHQgZXJyb3JzJylcbiAgLm9wdGlvbignLVEsIC0tc2lsZW50JywgJ1ByZXZlbnQgYWxsIGxvZ2dpbmcnKVxuICAub3B0aW9uKCctLXZlcmJvc2UnLCAnVHVybnMgb24gdmVyYm9zZSBsb2dnaW5nJylcbiAgLm9wdGlvbignLUgsIC0taG9zdCA8aG9zdD4nLCAnVGhlIGhvc3QgdG8gYmluZCB0bycpXG4gIC5vcHRpb24oJy1sLCAtLWxvZy1maWxlIDxwYXRoPicsICdUaGUgZmlsZSB0byBsb2cgdG8nKVxuICAub3B0aW9uKFxuICAgICctLXBsdWdpbi1kaXIgPHBhdGg+JyxcbiAgICAnQSBwYXRoIHRvIHNjYW4gZm9yIHBsdWdpbnMsIHRoaXMgY2FuIGJlIHNwZWNpZmllZCBtdWx0aXBsZSAnICtcbiAgICAndGltZXMgdG8gc3BlY2lmeSBtdWx0aXBsZSBkaXJlY3RvcmllcycsXG4gICAgcGx1Z2luRGlyQ29sbGVjdG9yLFxuICAgIFtcbiAgICAgIGZyb21Sb290KCdpbnN0YWxsZWRQbHVnaW5zJyksXG4gICAgICBmcm9tUm9vdCgnc3JjL3BsdWdpbnMnKVxuICAgIF1cbiAgKVxuICAub3B0aW9uKFxuICAgICctLXBsdWdpbi1wYXRoIDxwYXRoPicsXG4gICAgJ0EgcGF0aCB0byBhIHBsdWdpbiB3aGljaCBzaG91bGQgYmUgaW5jbHVkZWQgYnkgdGhlIHNlcnZlciwgJyArXG4gICAgJ3RoaXMgY2FuIGJlIHNwZWNpZmllZCBtdWx0aXBsZSB0aW1lcyB0byBzcGVjaWZ5IG11bHRpcGxlIHBhdGhzJyxcbiAgICBwbHVnaW5QYXRoQ29sbGVjdG9yLFxuICAgIFtdXG4gIClcbiAgLm9wdGlvbignLS1wbHVnaW5zIDxwYXRoPicsICdhbiBhbGlhcyBmb3IgLS1wbHVnaW4tZGlyJywgcGx1Z2luRGlyQ29sbGVjdG9yKTtcblxuICBpZiAoY2FuQ2x1c3Rlcikge1xuICAgIGNvbW1hbmRcbiAgICAub3B0aW9uKCctLWRldicsICdSdW4gdGhlIHNlcnZlciB3aXRoIGRldmVsb3BtZW50IG1vZGUgZGVmYXVsdHMnKVxuICAgIC5vcHRpb24oJy0tbm8tc3NsJywgJ0RvblxcJ3QgcnVuIHRoZSBkZXYgc2VydmVyIHVzaW5nIEhUVFBTJylcbiAgICAub3B0aW9uKCctLW5vLWJhc2UtcGF0aCcsICdEb25cXCd0IHB1dCBhIHByb3h5IGluIGZyb250IG9mIHRoZSBkZXYgc2VydmVyLCB3aGljaCBhZGRzIGEgcmFuZG9tIGJhc2VQYXRoJylcbiAgICAub3B0aW9uKCctLW5vLXdhdGNoJywgJ1ByZXZlbnRzIGF1dG9tYXRpYyByZXN0YXJ0cyBvZiB0aGUgc2VydmVyIGluIC0tZGV2IG1vZGUnKTtcbiAgfVxuXG4gIGNvbW1hbmRcbiAgLmFjdGlvbihhc3luYyBmdW5jdGlvbiAob3B0cykge1xuICAgIGlmIChvcHRzLmRldikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3Qga2JuRGV2Q29uZmlnID0gZnJvbVJvb3QoJ2NvbmZpZy9raWJhbmEuZGV2LnltbCcpO1xuICAgICAgICBpZiAoc3RhdFN5bmMoa2JuRGV2Q29uZmlnKS5pc0ZpbGUoKSkge1xuICAgICAgICAgIG9wdHMuY29uZmlnLnB1c2goa2JuRGV2Q29uZmlnKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIC8vIGlnbm9yZSwga2liYW5hLmRldi55bWwgZG9lcyBub3QgZXhpc3RcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBnZXRDdXJyZW50U2V0dGluZ3MgPSAoKSA9PiByZWFkU2VydmVyU2V0dGluZ3Mob3B0cywgdGhpcy5nZXRVbmtub3duT3B0aW9ucygpKTtcbiAgICBjb25zdCBzZXR0aW5ncyA9IGdldEN1cnJlbnRTZXR0aW5ncygpO1xuXG4gICAgaWYgKGNhbkNsdXN0ZXIgJiYgb3B0cy5kZXYgJiYgIWlzV29ya2VyKSB7XG4gICAgICAvLyBzdG9wIHByb2Nlc3NpbmcgdGhlIGFjdGlvbiBhbmQgaGFuZG9mZiB0byBjbHVzdGVyIG1hbmFnZXJcbiAgICAgIGNvbnN0IENsdXN0ZXJNYW5hZ2VyID0gcmVxdWlyZSgnLi4vY2x1c3Rlci9jbHVzdGVyX21hbmFnZXInKTtcbiAgICAgIG5ldyBDbHVzdGVyTWFuYWdlcihvcHRzLCBzZXR0aW5ncyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IGtiblNlcnZlciA9IHt9O1xuICAgIGNvbnN0IEtiblNlcnZlciA9IHJlcXVpcmUoJy4uLy4uL3NlcnZlci9rYm5fc2VydmVyJyk7XG4gICAgdHJ5IHtcbiAgICAgIGtiblNlcnZlciA9IG5ldyBLYm5TZXJ2ZXIoc2V0dGluZ3MpO1xuICAgICAgYXdhaXQga2JuU2VydmVyLnJlYWR5KCk7XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnN0IHsgc2VydmVyIH0gPSBrYm5TZXJ2ZXI7XG5cbiAgICAgIGlmIChlcnIuY29kZSA9PT0gJ0VBRERSSU5VU0UnKSB7XG4gICAgICAgIGxvZ0ZhdGFsKGBQb3J0ICR7ZXJyLnBvcnR9IGlzIGFscmVhZHkgaW4gdXNlLiBBbm90aGVyIGluc3RhbmNlIG9mIEtpYmFuYSBtYXkgYmUgcnVubmluZyFgLCBzZXJ2ZXIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbG9nRmF0YWwoZXJyLCBzZXJ2ZXIpO1xuICAgICAgfVxuXG4gICAgICBrYm5TZXJ2ZXIuY2xvc2UoKTtcbiAgICAgIHByb2Nlc3MuZXhpdCgxKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1wcm9jZXNzLWV4aXRcbiAgICB9XG5cbiAgICBwcm9jZXNzLm9uKCdTSUdIVVAnLCBmdW5jdGlvbiByZWxvYWRDb25maWcoKSB7XG4gICAgICBjb25zdCBzZXR0aW5ncyA9IGdldEN1cnJlbnRTZXR0aW5ncygpO1xuICAgICAga2JuU2VydmVyLnNlcnZlci5sb2coWydpbmZvJywgJ2NvbmZpZyddLCAnUmVsb2FkaW5nIGxvZ2dpbmcgY29uZmlndXJhdGlvbiBkdWUgdG8gU0lHSFVQLicpO1xuICAgICAga2JuU2VydmVyLmFwcGx5TG9nZ2luZ0NvbmZpZ3VyYXRpb24oc2V0dGluZ3MpO1xuICAgICAga2JuU2VydmVyLnNlcnZlci5sb2coWydpbmZvJywgJ2NvbmZpZyddLCAnUmVsb2FkZWQgbG9nZ2luZyBjb25maWd1cmF0aW9uIGR1ZSB0byBTSUdIVVAuJyk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4ga2JuU2VydmVyO1xuICB9KTtcbn07XG5cbmZ1bmN0aW9uIGxvZ0ZhdGFsKG1lc3NhZ2UsIHNlcnZlcikge1xuICBpZiAoc2VydmVyKSB7XG4gICAgc2VydmVyLmxvZyhbJ2ZhdGFsJ10sIG1lc3NhZ2UpO1xuICB9XG4gIGNvbnNvbGUuZXJyb3IoJ0ZBVEFMJywgbWVzc2FnZSk7XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/cli/serve/serve.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/src/cli/serve/serve.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport { statSync } from 'fs';\nimport { isWorker } from 'cluster';\nimport { resolve } from 'path';\nimport { fromRoot } from '../../utils';\nimport { getConfig } from '../../server/path';\nimport readYamlConfig from './read_yaml_config';\n\nlet canCluster;\ntry {\n  require.resolve('../cluster/cluster_manager');\n  canCluster = true;\n} catch (e) {\n  canCluster = false;\n}\n\nconst pathCollector = function () {\n  const paths = [];\n  return function (path) {\n    paths.push(resolve(process.cwd(), path));\n    return paths;\n  };\n};\n\nconst configPathCollector = pathCollector();\nconst pluginDirCollector = pathCollector();\nconst pluginPathCollector = pathCollector();\n\nfunction readServerSettings(opts, extraCliOptions) {\n  const settings = readYamlConfig(opts.config);\n  const set = _.partial(_.set, settings);\n  const get = _.partial(_.get, settings);\n  const has = _.partial(_.has, settings);\n  const merge = _.partial(_.merge, settings);\n\n  if (opts.dev) {\n    set('env', 'development');\n    set('optimize.lazy', true);\n    if (opts.ssl && !has('server.ssl.cert') && !has('server.ssl.key')) {\n      set('server.host', 'localhost');\n      set('server.ssl.cert', fromRoot('test/dev_certs/server.crt'));\n      set('server.ssl.key', fromRoot('test/dev_certs/server.key'));\n    }\n  }\n\n  if (opts.elasticsearch) set('elasticsearch.url', opts.elasticsearch);\n  if (opts.port) set('server.port', opts.port);\n  if (opts.host) set('server.host', opts.host);\n  if (opts.quiet) set('logging.quiet', true);\n  if (opts.silent) set('logging.silent', true);\n  if (opts.verbose) set('logging.verbose', true);\n  if (opts.logFile) set('logging.dest', opts.logFile);\n\n  set('plugins.scanDirs', _.compact([].concat(\n    get('plugins.scanDirs'),\n    opts.pluginDir\n  )));\n\n  set('plugins.paths', _.compact([].concat(\n    get('plugins.paths'),\n    opts.pluginPath\n  )));\n\n  merge(extraCliOptions);\n\n  return settings;\n}\n\nmodule.exports = function (program) {\n  const command = program.command('serve');\n\n  command\n  .description('Run the kibana server')\n  .collectUnknownOptions()\n  .option('-e, --elasticsearch <uri>', 'Elasticsearch instance')\n  .option(\n    '-c, --config <path>',\n    'Path to the config file, can be changed with the CONFIG_PATH environment variable as well. ' +\n    'Use mulitple --config args to include multiple config files.',\n    configPathCollector,\n    [ getConfig() ]\n  )\n  .option('-p, --port <port>', 'The port to bind to', parseInt)\n  .option('-q, --quiet', 'Prevent all logging except errors')\n  .option('-Q, --silent', 'Prevent all logging')\n  .option('--verbose', 'Turns on verbose logging')\n  .option('-H, --host <host>', 'The host to bind to')\n  .option('-l, --log-file <path>', 'The file to log to')\n  .option(\n    '--plugin-dir <path>',\n    'A path to scan for plugins, this can be specified multiple ' +\n    'times to specify multiple directories',\n    pluginDirCollector,\n    [\n      fromRoot('installedPlugins'),\n      fromRoot('src/plugins')\n    ]\n  )\n  .option(\n    '--plugin-path <path>',\n    'A path to a plugin which should be included by the server, ' +\n    'this can be specified multiple times to specify multiple paths',\n    pluginPathCollector,\n    []\n  )\n  .option('--plugins <path>', 'an alias for --plugin-dir', pluginDirCollector);\n\n  if (canCluster) {\n    command\n    .option('--dev', 'Run the server with development mode defaults')\n    .option('--no-ssl', 'Don\\'t run the dev server using HTTPS')\n    .option('--no-base-path', 'Don\\'t put a proxy in front of the dev server, which adds a random basePath')\n    .option('--no-watch', 'Prevents automatic restarts of the server in --dev mode');\n  }\n\n  command\n  .action(async function (opts) {\n    if (opts.dev) {\n      try {\n        const kbnDevConfig = fromRoot('config/kibana.dev.yml');\n        if (statSync(kbnDevConfig).isFile()) {\n          opts.config.push(kbnDevConfig);\n        }\n      } catch (err) {\n        // ignore, kibana.dev.yml does not exist\n      }\n    }\n\n    const getCurrentSettings = () => readServerSettings(opts, this.getUnknownOptions());\n    const settings = getCurrentSettings();\n\n    if (canCluster && opts.dev && !isWorker) {\n      // stop processing the action and handoff to cluster manager\n      const ClusterManager = require('../cluster/cluster_manager');\n      new ClusterManager(opts, settings);\n      return;\n    }\n\n    let kbnServer = {};\n    const KbnServer = require('../../server/kbn_server');\n    try {\n      kbnServer = new KbnServer(settings);\n      await kbnServer.ready();\n    }\n    catch (err) {\n      const { server } = kbnServer;\n\n      if (err.code === 'EADDRINUSE') {\n        logFatal(`Port ${err.port} is already in use. Another instance of Kibana may be running!`, server);\n      } else {\n        logFatal(err, server);\n      }\n\n      kbnServer.close();\n      process.exit(1); // eslint-disable-line no-process-exit\n    }\n\n    process.on('SIGHUP', function reloadConfig() {\n      const settings = getCurrentSettings();\n      kbnServer.server.log(['info', 'config'], 'Reloading logging configuration due to SIGHUP.');\n      kbnServer.applyLoggingConfiguration(settings);\n      kbnServer.server.log(['info', 'config'], 'Reloaded logging configuration due to SIGHUP.');\n    });\n\n    return kbnServer;\n  });\n};\n\nfunction logFatal(message, server) {\n  if (server) {\n    server.log(['fatal'], message);\n  }\n  console.error('FATAL', message);\n}\n"
      ]
    },
    "mtime": 1467036622785
  },
  "{\"filename\":\"/home/vio/v3metrics/src/cli/cluster/cluster_manager.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "cluster",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "cluster"
              }
            ]
          },
          {
            "source": "hapi",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Hapi"
              }
            ]
          },
          {
            "source": "../log",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Log"
              }
            ]
          },
          {
            "source": "./worker",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Worker"
              }
            ]
          },
          {
            "source": "./base_path_proxy",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "BasePathProxy"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "to-consumable-array",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i]; return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _cluster = require('cluster');\n\nvar _cluster2 = _interopRequireDefault(_cluster);\n\nvar _hapi = require('hapi');\n\nvar _hapi2 = _interopRequireDefault(_hapi);\n\nvar _log = require('../log');\n\nvar _log2 = _interopRequireDefault(_log);\n\nvar _worker = require('./worker');\n\nvar _worker2 = _interopRequireDefault(_worker);\n\nvar _base_path_proxy = require('./base_path_proxy');\n\nvar _base_path_proxy2 = _interopRequireDefault(_base_path_proxy);\n\nvar _require = require('path');\n\nvar join = _require.join;\nvar resolve = _require.resolve;\n\nvar _require2 = require('url');\n\nvar formatUrl = _require2.format;\n\nvar _require3 = require('lodash');\n\nvar debounce = _require3.debounce;\nvar compact = _require3.compact;\nvar get = _require3.get;\nvar invoke = _require3.invoke;\nvar bindAll = _require3.bindAll;\nvar once = _require3.once;\nvar sample = _require3.sample;\nvar uniq = _require3.uniq;\n\nprocess.env.kbnWorkerType = 'managr';\n\nmodule.exports = (function () {\n  function ClusterManager() {\n    var _this = this;\n\n    var opts = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n    var settings = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n    _classCallCheck(this, ClusterManager);\n\n    this.log = new _log2['default'](opts.quiet, opts.silent);\n    this.addedCount = 0;\n\n    var serverArgv = [];\n    var optimizerArgv = ['--plugins.initialize=false', '--server.autoListen=false'];\n\n    if (opts.basePath) {\n      this.basePathProxy = new _base_path_proxy2['default'](this, settings);\n\n      optimizerArgv.push('--server.basePath=' + this.basePathProxy.basePath);\n\n      serverArgv.push('--server.port=' + this.basePathProxy.targetPort, '--server.basePath=' + this.basePathProxy.basePath);\n    }\n\n    this.workers = [this.optimizer = new _worker2['default']({\n      type: 'optmzr',\n      title: 'optimizer',\n      log: this.log,\n      argv: optimizerArgv,\n      watch: false\n    }), this.server = new _worker2['default']({\n      type: 'server',\n      log: this.log,\n      argv: serverArgv\n    })];\n\n    // broker messages between workers\n    this.workers.forEach(function (worker) {\n      worker.on('broadcast', function (msg) {\n        _this.workers.forEach(function (to) {\n          if (to !== worker && to.online) {\n            to.fork.send(msg);\n          }\n        });\n      });\n    });\n\n    bindAll(this, 'onWatcherAdd', 'onWatcherError', 'onWatcherChange');\n\n    if (opts.watch) {\n      this.setupWatching([].concat(_toConsumableArray(settings.plugins.paths), _toConsumableArray(settings.plugins.scanDirs)));\n    } else this.startCluster();\n  }\n\n  _createClass(ClusterManager, [{\n    key: 'startCluster',\n    value: function startCluster() {\n      this.setupManualRestart();\n      invoke(this.workers, 'start');\n      if (this.basePathProxy) {\n        this.basePathProxy.listen();\n      }\n    }\n  }, {\n    key: 'setupWatching',\n    value: function setupWatching(extraPaths) {\n      var _this2 = this;\n\n      var chokidar = require('chokidar');\n      var fromRoot = require('../../utils/from_root');\n\n      var watchPaths = uniq([fromRoot('src/plugins'), fromRoot('src/server'), fromRoot('src/ui'), fromRoot('src/utils'), fromRoot('config')].concat(_toConsumableArray(extraPaths)).map(function (path) {\n        return resolve(path);\n      }));\n\n      this.watcher = chokidar.watch(watchPaths, {\n        cwd: fromRoot('.'),\n        ignored: /[\\\\\\/](\\..*|node_modules|bower_components|public|__tests__)[\\\\\\/]/\n      });\n\n      this.watcher.on('add', this.onWatcherAdd);\n      this.watcher.on('error', this.onWatcherError);\n\n      this.watcher.on('ready', once(function () {\n        // start sending changes to workers\n        _this2.watcher.removeListener('add', _this2.onWatcherAdd);\n        _this2.watcher.on('all', _this2.onWatcherChange);\n\n        _this2.log.good('watching for changes', '(' + _this2.addedCount + ' files)');\n        _this2.startCluster();\n      }));\n    }\n  }, {\n    key: 'setupManualRestart',\n    value: function setupManualRestart() {\n      var _this3 = this;\n\n      var readline = require('readline');\n      var rl = readline.createInterface(process.stdin, process.stdout);\n\n      var nls = 0;\n      var clear = function clear() {\n        return nls = 0;\n      };\n      var clearSoon = debounce(clear, 2000);\n\n      rl.setPrompt('');\n      rl.prompt();\n\n      rl.on('line', function (line) {\n        nls = nls + 1;\n\n        if (nls >= 2) {\n          clearSoon.cancel();\n          clear();\n          _this3.server.start();\n        } else {\n          clearSoon();\n        }\n\n        rl.prompt();\n      });\n\n      rl.on('SIGINT', function () {\n        rl.pause();\n        process.kill(process.pid, 'SIGINT');\n      });\n    }\n  }, {\n    key: 'onWatcherAdd',\n    value: function onWatcherAdd() {\n      this.addedCount += 1;\n    }\n  }, {\n    key: 'onWatcherChange',\n    value: function onWatcherChange(e, path) {\n      invoke(this.workers, 'onChange', path);\n    }\n  }, {\n    key: 'onWatcherError',\n    value: function onWatcherError(err) {\n      this.log.bad('failed to watch files!\\n', err.stack);\n      process.exit(1); // eslint-disable-line no-process-exit\n    }\n  }]);\n\n  return ClusterManager;\n})();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL2NsaS9jbHVzdGVyL2NsdXN0ZXJfbWFuYWdlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O3VCQUFvQixTQUFTOzs7O29CQUdaLE1BQU07Ozs7bUJBR1AsUUFBUTs7OztzQkFDTCxVQUFVOzs7OytCQUNILG1CQUFtQjs7OztlQVBuQixPQUFPLENBQUMsTUFBTSxDQUFDOztJQUFqQyxJQUFJLFlBQUosSUFBSTtJQUFFLE9BQU8sWUFBUCxPQUFPOztnQkFDUyxPQUFPLENBQUMsS0FBSyxDQUFDOztJQUE1QixTQUFTLGFBQWpCLE1BQU07O2dCQUUwRCxPQUFPLENBQUMsUUFBUSxDQUFDOztJQUFqRixRQUFRLGFBQVIsUUFBUTtJQUFFLE9BQU8sYUFBUCxPQUFPO0lBQUUsR0FBRyxhQUFILEdBQUc7SUFBRSxNQUFNLGFBQU4sTUFBTTtJQUFFLE9BQU8sYUFBUCxPQUFPO0lBQUUsSUFBSSxhQUFKLElBQUk7SUFBRSxNQUFNLGFBQU4sTUFBTTtJQUFFLElBQUksYUFBSixJQUFJOztBQU1uRSxPQUFPLENBQUMsR0FBRyxDQUFDLGFBQWEsR0FBRyxRQUFRLENBQUM7O0FBRXJDLE1BQU0sQ0FBQyxPQUFPO0FBQ0QsV0FEVSxjQUFjLEdBQ0c7OztRQUExQixJQUFJLHlEQUFHLEVBQUU7UUFBRSxRQUFRLHlEQUFHLEVBQUU7OzBCQURmLGNBQWM7O0FBRWpDLFFBQUksQ0FBQyxHQUFHLEdBQUcscUJBQVEsSUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDNUMsUUFBSSxDQUFDLFVBQVUsR0FBRyxDQUFDLENBQUM7O0FBRXBCLFFBQU0sVUFBVSxHQUFHLEVBQUUsQ0FBQztBQUN0QixRQUFNLGFBQWEsR0FBRyxDQUNwQiw0QkFBNEIsRUFDNUIsMkJBQTJCLENBQzVCLENBQUM7O0FBRUYsUUFBSSxJQUFJLENBQUMsUUFBUSxFQUFFO0FBQ2pCLFVBQUksQ0FBQyxhQUFhLEdBQUcsaUNBQWtCLElBQUksRUFBRSxRQUFRLENBQUMsQ0FBQzs7QUFFdkQsbUJBQWEsQ0FBQyxJQUFJLHdCQUNLLElBQUksQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUNqRCxDQUFDOztBQUVGLGdCQUFVLENBQUMsSUFBSSxvQkFDSSxJQUFJLENBQUMsYUFBYSxDQUFDLFVBQVUseUJBQ3pCLElBQUksQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUNqRCxDQUFDO0tBQ0g7O0FBRUQsUUFBSSxDQUFDLE9BQU8sR0FBRyxDQUNiLElBQUksQ0FBQyxTQUFTLEdBQUcsd0JBQVc7QUFDMUIsVUFBSSxFQUFFLFFBQVE7QUFDZCxXQUFLLEVBQUUsV0FBVztBQUNsQixTQUFHLEVBQUUsSUFBSSxDQUFDLEdBQUc7QUFDYixVQUFJLEVBQUUsYUFBYTtBQUNuQixXQUFLLEVBQUUsS0FBSztLQUNiLENBQUMsRUFFRixJQUFJLENBQUMsTUFBTSxHQUFHLHdCQUFXO0FBQ3ZCLFVBQUksRUFBRSxRQUFRO0FBQ2QsU0FBRyxFQUFFLElBQUksQ0FBQyxHQUFHO0FBQ2IsVUFBSSxFQUFFLFVBQVU7S0FDakIsQ0FBQyxDQUNILENBQUM7OztBQUdGLFFBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLFVBQUMsTUFBTSxFQUFLO0FBQy9CLFlBQU0sQ0FBQyxFQUFFLENBQUMsV0FBVyxFQUFFLFVBQUMsR0FBRyxFQUFLO0FBQzlCLGNBQUssT0FBTyxDQUFDLE9BQU8sQ0FBQyxVQUFDLEVBQUUsRUFBSztBQUMzQixjQUFJLEVBQUUsS0FBSyxNQUFNLElBQUksRUFBRSxDQUFDLE1BQU0sRUFBRTtBQUM5QixjQUFFLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztXQUNuQjtTQUNGLENBQUMsQ0FBQztPQUNKLENBQUMsQ0FBQztLQUNKLENBQUMsQ0FBQzs7QUFFSCxXQUFPLENBQUMsSUFBSSxFQUFFLGNBQWMsRUFBRSxnQkFBZ0IsRUFBRSxpQkFBaUIsQ0FBQyxDQUFDOztBQUVuRSxRQUFJLElBQUksQ0FBQyxLQUFLLEVBQUU7QUFDZCxVQUFJLENBQUMsYUFBYSw4QkFDYixRQUFRLENBQUMsT0FBTyxDQUFDLEtBQUssc0JBQ3RCLFFBQVEsQ0FBQyxPQUFPLENBQUMsUUFBUSxHQUM1QixDQUFDO0tBQ0osTUFFSSxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUM7R0FDMUI7O2VBN0RvQixjQUFjOztXQStEdkIsd0JBQUc7QUFDYixVQUFJLENBQUMsa0JBQWtCLEVBQUUsQ0FBQztBQUMxQixZQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQztBQUM5QixVQUFJLElBQUksQ0FBQyxhQUFhLEVBQUU7QUFDdEIsWUFBSSxDQUFDLGFBQWEsQ0FBQyxNQUFNLEVBQUUsQ0FBQztPQUM3QjtLQUNGOzs7V0FFWSx1QkFBQyxVQUFVLEVBQUU7OztBQUN4QixVQUFNLFFBQVEsR0FBRyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDckMsVUFBTSxRQUFRLEdBQUcsT0FBTyxDQUFDLHVCQUF1QixDQUFDLENBQUM7O0FBRWxELFVBQU0sVUFBVSxHQUFHLElBQUksQ0FDckIsQ0FDRSxRQUFRLENBQUMsYUFBYSxDQUFDLEVBQ3ZCLFFBQVEsQ0FBQyxZQUFZLENBQUMsRUFDdEIsUUFBUSxDQUFDLFFBQVEsQ0FBQyxFQUNsQixRQUFRLENBQUMsV0FBVyxDQUFDLEVBQ3JCLFFBQVEsQ0FBQyxRQUFRLENBQUMsNEJBQ2YsVUFBVSxHQUVkLEdBQUcsQ0FBQyxVQUFBLElBQUk7ZUFBSSxPQUFPLENBQUMsSUFBSSxDQUFDO09BQUEsQ0FBQyxDQUM1QixDQUFDOztBQUVGLFVBQUksQ0FBQyxPQUFPLEdBQUcsUUFBUSxDQUFDLEtBQUssQ0FBQyxVQUFVLEVBQUU7QUFDeEMsV0FBRyxFQUFFLFFBQVEsQ0FBQyxHQUFHLENBQUM7QUFDbEIsZUFBTyxFQUFFLG1FQUFtRTtPQUM3RSxDQUFDLENBQUM7O0FBRUgsVUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztBQUMxQyxVQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDOztBQUU5QyxVQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLFlBQU07O0FBRWxDLGVBQUssT0FBTyxDQUFDLGNBQWMsQ0FBQyxLQUFLLEVBQUUsT0FBSyxZQUFZLENBQUMsQ0FBQztBQUN0RCxlQUFLLE9BQU8sQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLE9BQUssZUFBZSxDQUFDLENBQUM7O0FBRTdDLGVBQUssR0FBRyxDQUFDLElBQUksQ0FBQyxzQkFBc0IsUUFBTSxPQUFLLFVBQVUsYUFBVSxDQUFDO0FBQ3BFLGVBQUssWUFBWSxFQUFFLENBQUM7T0FDckIsQ0FBQyxDQUFDLENBQUM7S0FDTDs7O1dBRWlCLDhCQUFHOzs7QUFDbkIsVUFBTSxRQUFRLEdBQUcsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQ3JDLFVBQU0sRUFBRSxHQUFHLFFBQVEsQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7O0FBRW5FLFVBQUksR0FBRyxHQUFHLENBQUMsQ0FBQztBQUNaLFVBQU0sS0FBSyxHQUFHLFNBQVIsS0FBSztlQUFTLEdBQUcsR0FBRyxDQUFDO09BQUEsQ0FBQztBQUM1QixVQUFNLFNBQVMsR0FBRyxRQUFRLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDOztBQUV4QyxRQUFFLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQ2pCLFFBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQzs7QUFFWixRQUFFLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxVQUFBLElBQUksRUFBSTtBQUNwQixXQUFHLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQzs7QUFFZCxZQUFJLEdBQUcsSUFBSSxDQUFDLEVBQUU7QUFDWixtQkFBUyxDQUFDLE1BQU0sRUFBRSxDQUFDO0FBQ25CLGVBQUssRUFBRSxDQUFDO0FBQ1IsaUJBQUssTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDO1NBQ3JCLE1BQU07QUFDTCxtQkFBUyxFQUFFLENBQUM7U0FDYjs7QUFFRCxVQUFFLENBQUMsTUFBTSxFQUFFLENBQUM7T0FDYixDQUFDLENBQUM7O0FBRUgsUUFBRSxDQUFDLEVBQUUsQ0FBQyxRQUFRLEVBQUUsWUFBTTtBQUNwQixVQUFFLENBQUMsS0FBSyxFQUFFLENBQUM7QUFDWCxlQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsUUFBUSxDQUFDLENBQUM7T0FDckMsQ0FBQyxDQUFDO0tBQ0o7OztXQUVXLHdCQUFHO0FBQ2IsVUFBSSxDQUFDLFVBQVUsSUFBSSxDQUFDLENBQUM7S0FDdEI7OztXQUVjLHlCQUFDLENBQUMsRUFBRSxJQUFJLEVBQUU7QUFDdkIsWUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsVUFBVSxFQUFFLElBQUksQ0FBQyxDQUFDO0tBQ3hDOzs7V0FFYSx3QkFBQyxHQUFHLEVBQUU7QUFDbEIsVUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsMEJBQTBCLEVBQUUsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ3BELGFBQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7S0FDakI7OztTQW5Kb0IsY0FBYztJQW9KcEMsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9jbGkvY2x1c3Rlci9jbHVzdGVyX21hbmFnZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY2x1c3RlciBmcm9tICdjbHVzdGVyJztcbmNvbnN0IHsgam9pbiwgcmVzb2x2ZSB9ID0gcmVxdWlyZSgncGF0aCcpO1xuY29uc3QgeyBmb3JtYXQ6IGZvcm1hdFVybCB9ID0gcmVxdWlyZSgndXJsJyk7XG5pbXBvcnQgSGFwaSBmcm9tICdoYXBpJztcbmNvbnN0IHsgZGVib3VuY2UsIGNvbXBhY3QsIGdldCwgaW52b2tlLCBiaW5kQWxsLCBvbmNlLCBzYW1wbGUsIHVuaXEgfSA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xuXG5pbXBvcnQgTG9nIGZyb20gJy4uL2xvZyc7XG5pbXBvcnQgV29ya2VyIGZyb20gJy4vd29ya2VyJztcbmltcG9ydCBCYXNlUGF0aFByb3h5IGZyb20gJy4vYmFzZV9wYXRoX3Byb3h5JztcblxucHJvY2Vzcy5lbnYua2JuV29ya2VyVHlwZSA9ICdtYW5hZ3InO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIENsdXN0ZXJNYW5hZ2VyIHtcbiAgY29uc3RydWN0b3Iob3B0cyA9IHt9LCBzZXR0aW5ncyA9IHt9KSB7XG4gICAgdGhpcy5sb2cgPSBuZXcgTG9nKG9wdHMucXVpZXQsIG9wdHMuc2lsZW50KTtcbiAgICB0aGlzLmFkZGVkQ291bnQgPSAwO1xuXG4gICAgY29uc3Qgc2VydmVyQXJndiA9IFtdO1xuICAgIGNvbnN0IG9wdGltaXplckFyZ3YgPSBbXG4gICAgICAnLS1wbHVnaW5zLmluaXRpYWxpemU9ZmFsc2UnLFxuICAgICAgJy0tc2VydmVyLmF1dG9MaXN0ZW49ZmFsc2UnLFxuICAgIF07XG5cbiAgICBpZiAob3B0cy5iYXNlUGF0aCkge1xuICAgICAgdGhpcy5iYXNlUGF0aFByb3h5ID0gbmV3IEJhc2VQYXRoUHJveHkodGhpcywgc2V0dGluZ3MpO1xuXG4gICAgICBvcHRpbWl6ZXJBcmd2LnB1c2goXG4gICAgICAgIGAtLXNlcnZlci5iYXNlUGF0aD0ke3RoaXMuYmFzZVBhdGhQcm94eS5iYXNlUGF0aH1gXG4gICAgICApO1xuXG4gICAgICBzZXJ2ZXJBcmd2LnB1c2goXG4gICAgICAgIGAtLXNlcnZlci5wb3J0PSR7dGhpcy5iYXNlUGF0aFByb3h5LnRhcmdldFBvcnR9YCxcbiAgICAgICAgYC0tc2VydmVyLmJhc2VQYXRoPSR7dGhpcy5iYXNlUGF0aFByb3h5LmJhc2VQYXRofWBcbiAgICAgICk7XG4gICAgfVxuXG4gICAgdGhpcy53b3JrZXJzID0gW1xuICAgICAgdGhpcy5vcHRpbWl6ZXIgPSBuZXcgV29ya2VyKHtcbiAgICAgICAgdHlwZTogJ29wdG16cicsXG4gICAgICAgIHRpdGxlOiAnb3B0aW1pemVyJyxcbiAgICAgICAgbG9nOiB0aGlzLmxvZyxcbiAgICAgICAgYXJndjogb3B0aW1pemVyQXJndixcbiAgICAgICAgd2F0Y2g6IGZhbHNlXG4gICAgICB9KSxcblxuICAgICAgdGhpcy5zZXJ2ZXIgPSBuZXcgV29ya2VyKHtcbiAgICAgICAgdHlwZTogJ3NlcnZlcicsXG4gICAgICAgIGxvZzogdGhpcy5sb2csXG4gICAgICAgIGFyZ3Y6IHNlcnZlckFyZ3ZcbiAgICAgIH0pXG4gICAgXTtcblxuICAgIC8vIGJyb2tlciBtZXNzYWdlcyBiZXR3ZWVuIHdvcmtlcnNcbiAgICB0aGlzLndvcmtlcnMuZm9yRWFjaCgod29ya2VyKSA9PiB7XG4gICAgICB3b3JrZXIub24oJ2Jyb2FkY2FzdCcsIChtc2cpID0+IHtcbiAgICAgICAgdGhpcy53b3JrZXJzLmZvckVhY2goKHRvKSA9PiB7XG4gICAgICAgICAgaWYgKHRvICE9PSB3b3JrZXIgJiYgdG8ub25saW5lKSB7XG4gICAgICAgICAgICB0by5mb3JrLnNlbmQobXNnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBiaW5kQWxsKHRoaXMsICdvbldhdGNoZXJBZGQnLCAnb25XYXRjaGVyRXJyb3InLCAnb25XYXRjaGVyQ2hhbmdlJyk7XG5cbiAgICBpZiAob3B0cy53YXRjaCkge1xuICAgICAgdGhpcy5zZXR1cFdhdGNoaW5nKFtcbiAgICAgICAgLi4uc2V0dGluZ3MucGx1Z2lucy5wYXRocyxcbiAgICAgICAgLi4uc2V0dGluZ3MucGx1Z2lucy5zY2FuRGlyc1xuICAgICAgXSk7XG4gICAgfVxuXG4gICAgZWxzZSB0aGlzLnN0YXJ0Q2x1c3RlcigpO1xuICB9XG5cbiAgc3RhcnRDbHVzdGVyKCkge1xuICAgIHRoaXMuc2V0dXBNYW51YWxSZXN0YXJ0KCk7XG4gICAgaW52b2tlKHRoaXMud29ya2VycywgJ3N0YXJ0Jyk7XG4gICAgaWYgKHRoaXMuYmFzZVBhdGhQcm94eSkge1xuICAgICAgdGhpcy5iYXNlUGF0aFByb3h5Lmxpc3RlbigpO1xuICAgIH1cbiAgfVxuXG4gIHNldHVwV2F0Y2hpbmcoZXh0cmFQYXRocykge1xuICAgIGNvbnN0IGNob2tpZGFyID0gcmVxdWlyZSgnY2hva2lkYXInKTtcbiAgICBjb25zdCBmcm9tUm9vdCA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL2Zyb21fcm9vdCcpO1xuXG4gICAgY29uc3Qgd2F0Y2hQYXRocyA9IHVuaXEoXG4gICAgICBbXG4gICAgICAgIGZyb21Sb290KCdzcmMvcGx1Z2lucycpLFxuICAgICAgICBmcm9tUm9vdCgnc3JjL3NlcnZlcicpLFxuICAgICAgICBmcm9tUm9vdCgnc3JjL3VpJyksXG4gICAgICAgIGZyb21Sb290KCdzcmMvdXRpbHMnKSxcbiAgICAgICAgZnJvbVJvb3QoJ2NvbmZpZycpLFxuICAgICAgICAuLi5leHRyYVBhdGhzXG4gICAgICBdXG4gICAgICAubWFwKHBhdGggPT4gcmVzb2x2ZShwYXRoKSlcbiAgICApO1xuXG4gICAgdGhpcy53YXRjaGVyID0gY2hva2lkYXIud2F0Y2god2F0Y2hQYXRocywge1xuICAgICAgY3dkOiBmcm9tUm9vdCgnLicpLFxuICAgICAgaWdub3JlZDogL1tcXFxcXFwvXShcXC4uKnxub2RlX21vZHVsZXN8Ym93ZXJfY29tcG9uZW50c3xwdWJsaWN8X190ZXN0c19fKVtcXFxcXFwvXS9cbiAgICB9KTtcblxuICAgIHRoaXMud2F0Y2hlci5vbignYWRkJywgdGhpcy5vbldhdGNoZXJBZGQpO1xuICAgIHRoaXMud2F0Y2hlci5vbignZXJyb3InLCB0aGlzLm9uV2F0Y2hlckVycm9yKTtcblxuICAgIHRoaXMud2F0Y2hlci5vbigncmVhZHknLCBvbmNlKCgpID0+IHtcbiAgICAgIC8vIHN0YXJ0IHNlbmRpbmcgY2hhbmdlcyB0byB3b3JrZXJzXG4gICAgICB0aGlzLndhdGNoZXIucmVtb3ZlTGlzdGVuZXIoJ2FkZCcsIHRoaXMub25XYXRjaGVyQWRkKTtcbiAgICAgIHRoaXMud2F0Y2hlci5vbignYWxsJywgdGhpcy5vbldhdGNoZXJDaGFuZ2UpO1xuXG4gICAgICB0aGlzLmxvZy5nb29kKCd3YXRjaGluZyBmb3IgY2hhbmdlcycsIGAoJHt0aGlzLmFkZGVkQ291bnR9IGZpbGVzKWApO1xuICAgICAgdGhpcy5zdGFydENsdXN0ZXIoKTtcbiAgICB9KSk7XG4gIH1cblxuICBzZXR1cE1hbnVhbFJlc3RhcnQoKSB7XG4gICAgY29uc3QgcmVhZGxpbmUgPSByZXF1aXJlKCdyZWFkbGluZScpO1xuICAgIGNvbnN0IHJsID0gcmVhZGxpbmUuY3JlYXRlSW50ZXJmYWNlKHByb2Nlc3Muc3RkaW4sIHByb2Nlc3Muc3Rkb3V0KTtcblxuICAgIGxldCBubHMgPSAwO1xuICAgIGNvbnN0IGNsZWFyID0gKCkgPT4gbmxzID0gMDtcbiAgICBjb25zdCBjbGVhclNvb24gPSBkZWJvdW5jZShjbGVhciwgMjAwMCk7XG5cbiAgICBybC5zZXRQcm9tcHQoJycpO1xuICAgIHJsLnByb21wdCgpO1xuXG4gICAgcmwub24oJ2xpbmUnLCBsaW5lID0+IHtcbiAgICAgIG5scyA9IG5scyArIDE7XG5cbiAgICAgIGlmIChubHMgPj0gMikge1xuICAgICAgICBjbGVhclNvb24uY2FuY2VsKCk7XG4gICAgICAgIGNsZWFyKCk7XG4gICAgICAgIHRoaXMuc2VydmVyLnN0YXJ0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjbGVhclNvb24oKTtcbiAgICAgIH1cblxuICAgICAgcmwucHJvbXB0KCk7XG4gICAgfSk7XG5cbiAgICBybC5vbignU0lHSU5UJywgKCkgPT4ge1xuICAgICAgcmwucGF1c2UoKTtcbiAgICAgIHByb2Nlc3Mua2lsbChwcm9jZXNzLnBpZCwgJ1NJR0lOVCcpO1xuICAgIH0pO1xuICB9XG5cbiAgb25XYXRjaGVyQWRkKCkge1xuICAgIHRoaXMuYWRkZWRDb3VudCArPSAxO1xuICB9XG5cbiAgb25XYXRjaGVyQ2hhbmdlKGUsIHBhdGgpIHtcbiAgICBpbnZva2UodGhpcy53b3JrZXJzLCAnb25DaGFuZ2UnLCBwYXRoKTtcbiAgfVxuXG4gIG9uV2F0Y2hlckVycm9yKGVycikge1xuICAgIHRoaXMubG9nLmJhZCgnZmFpbGVkIHRvIHdhdGNoIGZpbGVzIVxcbicsIGVyci5zdGFjayk7XG4gICAgcHJvY2Vzcy5leGl0KDEpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXByb2Nlc3MtZXhpdFxuICB9XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/cli/cluster/cluster_manager.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/src/cli/cluster/cluster_manager.js",
      "sourcesContent": [
        "import cluster from 'cluster';\nconst { join, resolve } = require('path');\nconst { format: formatUrl } = require('url');\nimport Hapi from 'hapi';\nconst { debounce, compact, get, invoke, bindAll, once, sample, uniq } = require('lodash');\n\nimport Log from '../log';\nimport Worker from './worker';\nimport BasePathProxy from './base_path_proxy';\n\nprocess.env.kbnWorkerType = 'managr';\n\nmodule.exports = class ClusterManager {\n  constructor(opts = {}, settings = {}) {\n    this.log = new Log(opts.quiet, opts.silent);\n    this.addedCount = 0;\n\n    const serverArgv = [];\n    const optimizerArgv = [\n      '--plugins.initialize=false',\n      '--server.autoListen=false',\n    ];\n\n    if (opts.basePath) {\n      this.basePathProxy = new BasePathProxy(this, settings);\n\n      optimizerArgv.push(\n        `--server.basePath=${this.basePathProxy.basePath}`\n      );\n\n      serverArgv.push(\n        `--server.port=${this.basePathProxy.targetPort}`,\n        `--server.basePath=${this.basePathProxy.basePath}`\n      );\n    }\n\n    this.workers = [\n      this.optimizer = new Worker({\n        type: 'optmzr',\n        title: 'optimizer',\n        log: this.log,\n        argv: optimizerArgv,\n        watch: false\n      }),\n\n      this.server = new Worker({\n        type: 'server',\n        log: this.log,\n        argv: serverArgv\n      })\n    ];\n\n    // broker messages between workers\n    this.workers.forEach((worker) => {\n      worker.on('broadcast', (msg) => {\n        this.workers.forEach((to) => {\n          if (to !== worker && to.online) {\n            to.fork.send(msg);\n          }\n        });\n      });\n    });\n\n    bindAll(this, 'onWatcherAdd', 'onWatcherError', 'onWatcherChange');\n\n    if (opts.watch) {\n      this.setupWatching([\n        ...settings.plugins.paths,\n        ...settings.plugins.scanDirs\n      ]);\n    }\n\n    else this.startCluster();\n  }\n\n  startCluster() {\n    this.setupManualRestart();\n    invoke(this.workers, 'start');\n    if (this.basePathProxy) {\n      this.basePathProxy.listen();\n    }\n  }\n\n  setupWatching(extraPaths) {\n    const chokidar = require('chokidar');\n    const fromRoot = require('../../utils/from_root');\n\n    const watchPaths = uniq(\n      [\n        fromRoot('src/plugins'),\n        fromRoot('src/server'),\n        fromRoot('src/ui'),\n        fromRoot('src/utils'),\n        fromRoot('config'),\n        ...extraPaths\n      ]\n      .map(path => resolve(path))\n    );\n\n    this.watcher = chokidar.watch(watchPaths, {\n      cwd: fromRoot('.'),\n      ignored: /[\\\\\\/](\\..*|node_modules|bower_components|public|__tests__)[\\\\\\/]/\n    });\n\n    this.watcher.on('add', this.onWatcherAdd);\n    this.watcher.on('error', this.onWatcherError);\n\n    this.watcher.on('ready', once(() => {\n      // start sending changes to workers\n      this.watcher.removeListener('add', this.onWatcherAdd);\n      this.watcher.on('all', this.onWatcherChange);\n\n      this.log.good('watching for changes', `(${this.addedCount} files)`);\n      this.startCluster();\n    }));\n  }\n\n  setupManualRestart() {\n    const readline = require('readline');\n    const rl = readline.createInterface(process.stdin, process.stdout);\n\n    let nls = 0;\n    const clear = () => nls = 0;\n    const clearSoon = debounce(clear, 2000);\n\n    rl.setPrompt('');\n    rl.prompt();\n\n    rl.on('line', line => {\n      nls = nls + 1;\n\n      if (nls >= 2) {\n        clearSoon.cancel();\n        clear();\n        this.server.start();\n      } else {\n        clearSoon();\n      }\n\n      rl.prompt();\n    });\n\n    rl.on('SIGINT', () => {\n      rl.pause();\n      process.kill(process.pid, 'SIGINT');\n    });\n  }\n\n  onWatcherAdd() {\n    this.addedCount += 1;\n  }\n\n  onWatcherChange(e, path) {\n    invoke(this.workers, 'onChange', path);\n  }\n\n  onWatcherError(err) {\n    this.log.bad('failed to watch files!\\n', err.stack);\n    process.exit(1); // eslint-disable-line no-process-exit\n  }\n};\n"
      ]
    },
    "mtime": 1467036622785
  },
  "{\"filename\":\"/home/vio/v3metrics/src/cli/log.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "ansicolors",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "ansicolors"
              }
            ]
          },
          {
            "source": "./color",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "color"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "class-call-check",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _ansicolors = require('ansicolors');\n\nvar _ansicolors2 = _interopRequireDefault(_ansicolors);\n\nvar _color = require('./color');\n\nvar _color2 = _interopRequireDefault(_color);\n\nvar log = _lodash2['default'].restParam(function (color, label, rest1) {\n  console.log.apply(console, [color(' ' + _lodash2['default'].trim(label) + ' ')].concat(rest1));\n});\n\nmodule.exports = function Log(quiet, silent) {\n  _classCallCheck(this, Log);\n\n  this.good = quiet || silent ? _lodash2['default'].noop : _lodash2['default'].partial(log, _color2['default'].green);\n  this.warn = quiet || silent ? _lodash2['default'].noop : _lodash2['default'].partial(log, _color2['default'].yellow);\n  this.bad = silent ? _lodash2['default'].noop : _lodash2['default'].partial(log, _color2['default'].red);\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL2NsaS9sb2cuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O3NCQUFjLFFBQVE7Ozs7MEJBQ0MsWUFBWTs7OztxQkFNakIsU0FBUzs7OztBQUozQixJQUFJLEdBQUcsR0FBRyxvQkFBRSxTQUFTLENBQUMsVUFBVSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRTtBQUNuRCxTQUFPLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQyxLQUFLLE9BQUssb0JBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFJLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztDQUN6RSxDQUFDLENBQUM7O0FBSUgsTUFBTSxDQUFDLE9BQU8sR0FDRCxTQURVLEdBQUcsQ0FDWixLQUFLLEVBQUUsTUFBTSxFQUFFO3dCQUROLEdBQUc7O0FBRXRCLE1BQUksQ0FBQyxJQUFJLEdBQUcsS0FBSyxJQUFJLE1BQU0sR0FBRyxvQkFBRSxJQUFJLEdBQUcsb0JBQUUsT0FBTyxDQUFDLEdBQUcsRUFBRSxtQkFBTSxLQUFLLENBQUMsQ0FBQztBQUNuRSxNQUFJLENBQUMsSUFBSSxHQUFHLEtBQUssSUFBSSxNQUFNLEdBQUcsb0JBQUUsSUFBSSxHQUFHLG9CQUFFLE9BQU8sQ0FBQyxHQUFHLEVBQUUsbUJBQU0sTUFBTSxDQUFDLENBQUM7QUFDcEUsTUFBSSxDQUFDLEdBQUcsR0FBRyxNQUFNLEdBQUcsb0JBQUUsSUFBSSxHQUFHLG9CQUFFLE9BQU8sQ0FBQyxHQUFHLEVBQUUsbUJBQU0sR0FBRyxDQUFDLENBQUM7Q0FDeEQsQUFDRixDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL2NsaS9sb2cuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IGFuc2ljb2xvcnMgZnJvbSAnYW5zaWNvbG9ycyc7XG5cbmxldCBsb2cgPSBfLnJlc3RQYXJhbShmdW5jdGlvbiAoY29sb3IsIGxhYmVsLCByZXN0MSkge1xuICBjb25zb2xlLmxvZy5hcHBseShjb25zb2xlLCBbY29sb3IoYCAke18udHJpbShsYWJlbCl9IGApXS5jb25jYXQocmVzdDEpKTtcbn0pO1xuXG5pbXBvcnQgY29sb3IgZnJvbSAnLi9jb2xvcic7XG5cbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgTG9nIHtcbiAgY29uc3RydWN0b3IocXVpZXQsIHNpbGVudCkge1xuICAgIHRoaXMuZ29vZCA9IHF1aWV0IHx8IHNpbGVudCA/IF8ubm9vcCA6IF8ucGFydGlhbChsb2csIGNvbG9yLmdyZWVuKTtcbiAgICB0aGlzLndhcm4gPSBxdWlldCB8fCBzaWxlbnQgPyBfLm5vb3AgOiBfLnBhcnRpYWwobG9nLCBjb2xvci55ZWxsb3cpO1xuICAgIHRoaXMuYmFkID0gc2lsZW50ID8gXy5ub29wIDogXy5wYXJ0aWFsKGxvZywgY29sb3IucmVkKTtcbiAgfVxufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/cli/log.js"
      ],
      "names": [],
      "mappings": ";;;;;;sBAAc,QAAQ;;;;0BACC,YAAY;;;;qBAMjB,SAAS;;;;AAJ3B,IAAI,GAAG,GAAG,oBAAE,SAAS,CAAC,UAAU,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE;AACnD,SAAO,CAAC,GAAG,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC,KAAK,OAAK,oBAAE,IAAI,CAAC,KAAK,CAAC,OAAI,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;CACzE,CAAC,CAAC;;AAIH,MAAM,CAAC,OAAO,GACD,SADU,GAAG,CACZ,KAAK,EAAE,MAAM,EAAE;wBADN,GAAG;;AAEtB,MAAI,CAAC,IAAI,GAAG,KAAK,IAAI,MAAM,GAAG,oBAAE,IAAI,GAAG,oBAAE,OAAO,CAAC,GAAG,EAAE,mBAAM,KAAK,CAAC,CAAC;AACnE,MAAI,CAAC,IAAI,GAAG,KAAK,IAAI,MAAM,GAAG,oBAAE,IAAI,GAAG,oBAAE,OAAO,CAAC,GAAG,EAAE,mBAAM,MAAM,CAAC,CAAC;AACpE,MAAI,CAAC,GAAG,GAAG,MAAM,GAAG,oBAAE,IAAI,GAAG,oBAAE,OAAO,CAAC,GAAG,EAAE,mBAAM,GAAG,CAAC,CAAC;CACxD,AACF,CAAC",
      "file": "/home/vio/v3metrics/src/cli/log.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport ansicolors from 'ansicolors';\n\nlet log = _.restParam(function (color, label, rest1) {\n  console.log.apply(console, [color(` ${_.trim(label)} `)].concat(rest1));\n});\n\nimport color from './color';\n\nmodule.exports = class Log {\n  constructor(quiet, silent) {\n    this.good = quiet || silent ? _.noop : _.partial(log, color.green);\n    this.warn = quiet || silent ? _.noop : _.partial(log, color.yellow);\n    this.bad = silent ? _.noop : _.partial(log, color.red);\n  }\n};\n"
      ]
    },
    "mtime": 1467036622785
  },
  "{\"filename\":\"/home/vio/v3metrics/src/cli/cluster/worker.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "cluster",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "cluster"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "resolve"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "resolve",
                "local": "resolve"
              }
            ]
          },
          {
            "source": "events",
            "imported": [
              "EventEmitter"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "EventEmitter",
                "local": "EventEmitter"
              }
            ]
          },
          {
            "source": "../../utils",
            "imported": [
              "BinderFor",
              "fromRoot"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "BinderFor",
                "local": "BinderFor"
              },
              {
                "kind": "named",
                "imported": "fromRoot",
                "local": "fromRoot"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "get",
        "inherits",
        "create-class",
        "class-call-check",
        "async-to-generator",
        "to-consumable-array",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i]; return arr2; } else { return Array.from(arr); } }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _cluster = require('cluster');\n\nvar _cluster2 = _interopRequireDefault(_cluster);\n\nvar _path = require('path');\n\nvar _events = require('events');\n\nvar _utils = require('../../utils');\n\nvar cliPath = (0, _utils.fromRoot)('src/cli');\nvar baseArgs = _lodash2['default'].difference(process.argv.slice(2), ['--no-watch']);\nvar baseArgv = [process.execPath, cliPath].concat(baseArgs);\n\n_cluster2['default'].setupMaster({\n  exec: cliPath,\n  silent: false\n});\n\nvar dead = function dead(fork) {\n  return fork.isDead() || fork.killed;\n};\n\nmodule.exports = (function (_EventEmitter) {\n  _inherits(Worker, _EventEmitter);\n\n  function Worker(opts) {\n    _classCallCheck(this, Worker);\n\n    opts = opts || {};\n    _get(Object.getPrototypeOf(Worker.prototype), 'constructor', this).call(this);\n\n    this.log = opts.log;\n    this.type = opts.type;\n    this.title = opts.title || opts.type;\n    this.watch = opts.watch !== false;\n    this.startCount = 0;\n\n    // status flags\n    this.online = false; // the fork can accept messages\n    this.listening = false; // the fork is listening for connections\n    this.crashed = false; // the fork crashed\n\n    this.changes = [];\n\n    this.forkBinder = null; // defined when the fork is\n    this.clusterBinder = new _utils.BinderFor(_cluster2['default']);\n    this.processBinder = new _utils.BinderFor(process);\n\n    var argv = _lodash2['default'].union(baseArgv, opts.argv || []);\n    this.env = {\n      kbnWorkerType: this.type,\n      kbnWorkerArgv: JSON.stringify(argv)\n    };\n  }\n\n  _createClass(Worker, [{\n    key: 'onExit',\n    value: function onExit(fork, code) {\n      if (this.fork !== fork) return;\n\n      // we have our fork's exit, so stop listening for others\n      this.clusterBinder.destroy();\n\n      // our fork is gone, clear our ref so we don't try to talk to it anymore\n      this.fork = null;\n      this.forkBinder = null;\n\n      this.online = false;\n      this.listening = false;\n      this.emit('fork:exit');\n      this.crashed = code > 0;\n\n      if (this.crashed) {\n        this.emit('crashed');\n        this.log.bad(this.title + ' crashed', 'with status code', code);\n        if (!this.watch) process.exit(code);\n      } else {\n        // restart after graceful shutdowns\n        this.start();\n      }\n    }\n  }, {\n    key: 'onChange',\n    value: function onChange(path) {\n      if (!this.watch) return;\n      this.changes.push(path);\n      this.start();\n    }\n  }, {\n    key: 'shutdown',\n    value: _asyncToGenerator(function* () {\n      var _this = this;\n\n      if (this.fork && !dead(this.fork)) {\n        // kill the fork\n        this.fork.process.kill();\n        this.fork.killed = true;\n\n        // stop listening to the fork, it's just going to die\n        this.forkBinder.destroy();\n\n        // we don't need to react to process.exit anymore\n        this.processBinder.destroy();\n\n        // wait until the cluster reports this fork has exitted, then resolve\n        yield new Promise(function (resolve) {\n          return _this.once('fork:exit', resolve);\n        });\n      }\n    })\n  }, {\n    key: 'parseIncomingMessage',\n    value: function parseIncomingMessage(msg) {\n      if (!_lodash2['default'].isArray(msg)) return;\n      this.onMessage.apply(this, _toConsumableArray(msg));\n    }\n  }, {\n    key: 'onMessage',\n    value: function onMessage(type, data) {\n      switch (type) {\n        case 'WORKER_BROADCAST':\n          this.emit('broadcast', data);\n          break;\n        case 'WORKER_LISTENING':\n          this.listening = true;\n          this.emit('listening');\n          break;\n      }\n    }\n  }, {\n    key: 'onOnline',\n    value: function onOnline() {\n      this.online = true;\n      this.emit('fork:online');\n      this.crashed = false;\n    }\n  }, {\n    key: 'onDisconnect',\n    value: function onDisconnect() {\n      this.online = false;\n      this.listening = false;\n    }\n  }, {\n    key: 'flushChangeBuffer',\n    value: function flushChangeBuffer() {\n      var files = _lodash2['default'].unique(this.changes.splice(0));\n      var prefix = files.length > 1 ? '\\n - ' : '';\n      return files.reduce(function (list, file) {\n        return '' + (list || '') + prefix + '\"' + file + '\"';\n      }, '');\n    }\n  }, {\n    key: 'start',\n    value: _asyncToGenerator(function* () {\n      var _this2 = this;\n\n      if (this.fork) {\n        // once \"exit\" event is received with 0 status, start() is called again\n        this.shutdown();\n        yield new Promise(function (cb) {\n          return _this2.once('online', cb);\n        });\n        return;\n      }\n\n      if (this.changes.length) {\n        this.log.warn('restarting ' + this.title, 'due to changes in ' + this.flushChangeBuffer());\n      } else if (this.startCount++) {\n        this.log.warn('restarting ' + this.title + '...');\n      }\n\n      this.fork = _cluster2['default'].fork(this.env);\n      this.forkBinder = new _utils.BinderFor(this.fork);\n\n      // when the fork sends a message, comes online, or looses it's connection, then react\n      this.forkBinder.on('message', function (msg) {\n        return _this2.parseIncomingMessage(msg);\n      });\n      this.forkBinder.on('online', function () {\n        return _this2.onOnline();\n      });\n      this.forkBinder.on('disconnect', function () {\n        return _this2.onDisconnect();\n      });\n\n      // when the cluster says a fork has exitted, check if it is ours\n      this.clusterBinder.on('exit', function (fork, code) {\n        return _this2.onExit(fork, code);\n      });\n\n      // when the process exits, make sure we kill our workers\n      this.processBinder.on('exit', function () {\n        return _this2.shutdown();\n      });\n\n      // wait for the fork to report it is online before resolving\n      yield new Promise(function (cb) {\n        return _this2.once('fork:online', cb);\n      });\n    })\n  }]);\n\n  return Worker;\n})(_events.EventEmitter);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL2NsaS9jbHVzdGVyL3dvcmtlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O3NCQUFjLFFBQVE7Ozs7dUJBQ0YsU0FBUzs7OztvQkFDTCxNQUFNOztzQkFDRCxRQUFROztxQkFFRCxhQUFhOztBQUVqRCxJQUFJLE9BQU8sR0FBRyxxQkFBUyxTQUFTLENBQUMsQ0FBQztBQUNsQyxJQUFJLFFBQVEsR0FBRyxvQkFBRSxVQUFVLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDO0FBQ25FLElBQUksUUFBUSxHQUFHLENBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRSxPQUFPLENBQUMsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUM7O0FBRTVELHFCQUFRLFdBQVcsQ0FBQztBQUNsQixNQUFJLEVBQUUsT0FBTztBQUNiLFFBQU0sRUFBRSxLQUFLO0NBQ2QsQ0FBQyxDQUFDOztBQUVILElBQUksSUFBSSxHQUFHLFNBQVAsSUFBSSxDQUFHLElBQUksRUFBSTtBQUNqQixTQUFPLElBQUksQ0FBQyxNQUFNLEVBQUUsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDO0NBQ3JDLENBQUM7O0FBRUYsTUFBTSxDQUFDLE9BQU87WUFBUyxNQUFNOztBQUNoQixXQURVLE1BQU0sQ0FDZixJQUFJLEVBQUU7MEJBREcsTUFBTTs7QUFFekIsUUFBSSxHQUFHLElBQUksSUFBSSxFQUFFLENBQUM7QUFDbEIsK0JBSG1CLE1BQU0sNkNBR2pCOztBQUVSLFFBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQztBQUNwQixRQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUM7QUFDdEIsUUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUM7QUFD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QUFDLENBQUM7OztBQUd2RSxVQUFJLENBQUMsYUFBYSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUU7ZUFBTSxPQUFLLFFBQVEsRUFBRTtPQUFBLENBQUMsQ0FBQzs7O0FBR3JELFlBQU0sSUFBSSxPQUFPLENBQUMsVUFBQSxFQUFFO2VBQUksT0FBSyxJQUFJLENBQUMsYUFBYSxFQUFFLEVBQUUsQ0FBQztPQUFBLENBQUMsQ0FBQztLQUN2RDs7O1NBaEpvQixNQUFNO3dCQWlKNUIsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9jbGkvY2x1c3Rlci93b3JrZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IGNsdXN0ZXIgZnJvbSAnY2x1c3Rlcic7XG5pbXBvcnQgeyByZXNvbHZlIH0gZnJvbSAncGF0aCc7XG5pbXBvcnQgeyBFdmVudEVtaXR0ZXIgfSBmcm9tICdldmVudHMnO1xuXG5pbXBvcnQgeyBCaW5kZXJGb3IsIGZyb21Sb290IH0gZnJvbSAnLi4vLi4vdXRpbHMnO1xuXG5sZXQgY2xpUGF0aCA9IGZyb21Sb290KCdzcmMvY2xpJyk7XG5sZXQgYmFzZUFyZ3MgPSBfLmRpZmZlcmVuY2UocHJvY2Vzcy5hcmd2LnNsaWNlKDIpLCBbJy0tbm8td2F0Y2gnXSk7XG5sZXQgYmFzZUFyZ3YgPSBbcHJvY2Vzcy5leGVjUGF0aCwgY2xpUGF0aF0uY29uY2F0KGJhc2VBcmdzKTtcblxuY2x1c3Rlci5zZXR1cE1hc3Rlcih7XG4gIGV4ZWM6IGNsaVBhdGgsXG4gIHNpbGVudDogZmFsc2Vcbn0pO1xuXG5sZXQgZGVhZCA9IGZvcmsgPT4ge1xuICByZXR1cm4gZm9yay5pc0RlYWQoKSB8fCBmb3JrLmtpbGxlZDtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgV29ya2VyIGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcbiAgY29uc3RydWN0b3Iob3B0cykge1xuICAgIG9wdHMgPSBvcHRzIHx8IHt9O1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLmxvZyA9IG9wdHMubG9nO1xuICAgIHRoaXMudHlwZSA9IG9wdHMudHlwZTtcbiAgICB0aGlzLnRpdGxlID0gb3B0cy50aXRsZSB8fCBvcHRzLnR5cGU7XG4gICAgdGhpcy53YXRjaCA9IChvcHRzLndhdGNoICE9PSBmYWxzZSk7XG4gICAgdGhpcy5zdGFydENvdW50ID0gMDtcblxuICAgIC8vIHN0YXR1cyBmbGFnc1xuICAgIHRoaXMub25saW5lID0gZmFsc2U7IC8vIHRoZSBmb3JrIGNhbiBhY2NlcHQgbWVzc2FnZXNcbiAgICB0aGlzLmxpc3RlbmluZyA9IGZhbHNlOyAvLyB0aGUgZm9yayBpcyBsaXN0ZW5pbmcgZm9yIGNvbm5lY3Rpb25zXG4gICAgdGhpcy5jcmFzaGVkID0gZmFsc2U7IC8vIHRoZSBmb3JrIGNyYXNoZWRcblxuICAgIHRoaXMuY2hhbmdlcyA9IFtdO1xuXG4gICAgdGhpcy5mb3JrQmluZGVyID0gbnVsbDsgLy8gZGVmaW5lZCB3aGVuIHRoZSBmb3JrIGlzXG4gICAgdGhpcy5jbHVzdGVyQmluZGVyID0gbmV3IEJpbmRlckZvcihjbHVzdGVyKTtcbiAgICB0aGlzLnByb2Nlc3NCaW5kZXIgPSBuZXcgQmluZGVyRm9yKHByb2Nlc3MpO1xuXG4gICAgbGV0IGFyZ3YgPSBfLnVuaW9uKGJhc2VBcmd2LCBvcHRzLmFyZ3YgfHwgW10pO1xuICAgIHRoaXMuZW52ID0ge1xuICAgICAga2JuV29ya2VyVHlwZTogdGhpcy50eXBlLFxuICAgICAga2JuV29ya2VyQXJndjogSlNPTi5zdHJpbmdpZnkoYXJndilcbiAgICB9O1xuICB9XG5cbiAgb25FeGl0KGZvcmssIGNvZGUpIHtcbiAgICBpZiAodGhpcy5mb3JrICE9PSBmb3JrKSByZXR1cm47XG5cbiAgICAvLyB3ZSBoYXZlIG91ciBmb3JrJ3MgZXhpdCwgc28gc3RvcCBsaXN0ZW5pbmcgZm9yIG90aGVyc1xuICAgIHRoaXMuY2x1c3RlckJpbmRlci5kZXN0cm95KCk7XG5cbiAgICAvLyBvdXIgZm9yayBpcyBnb25lLCBjbGVhciBvdXIgcmVmIHNvIHdlIGRvbid0IHRyeSB0byB0YWxrIHRvIGl0IGFueW1vcmVcbiAgICB0aGlzLmZvcmsgPSBudWxsO1xuICAgIHRoaXMuZm9ya0JpbmRlciA9IG51bGw7XG5cbiAgICB0aGlzLm9ubGluZSA9IGZhbHNlO1xuICAgIHRoaXMubGlzdGVuaW5nID0gZmFsc2U7XG4gICAgdGhpcy5lbWl0KCdmb3JrOmV4aXQnKTtcbiAgICB0aGlzLmNyYXNoZWQgPSBjb2RlID4gMDtcblxuICAgIGlmICh0aGlzLmNyYXNoZWQpIHtcbiAgICAgIHRoaXMuZW1pdCgnY3Jhc2hlZCcpO1xuICAgICAgdGhpcy5sb2cuYmFkKGAke3RoaXMudGl0bGV9IGNyYXNoZWRgLCAnd2l0aCBzdGF0dXMgY29kZScsIGNvZGUpO1xuICAgICAgaWYgKCF0aGlzLndhdGNoKSBwcm9jZXNzLmV4aXQoY29kZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHJlc3RhcnQgYWZ0ZXIgZ3JhY2VmdWwgc2h1dGRvd25zXG4gICAgICB0aGlzLnN0YXJ0KCk7XG4gICAgfVxuICB9XG5cbiAgb25DaGFuZ2UocGF0aCkge1xuICAgIGlmICghdGhpcy53YXRjaCkgcmV0dXJuO1xuICAgIHRoaXMuY2hhbmdlcy5wdXNoKHBhdGgpO1xuICAgIHRoaXMuc3RhcnQoKTtcbiAgfVxuXG4gIGFzeW5jIHNodXRkb3duKCkge1xuICAgIGlmICh0aGlzLmZvcmsgJiYgIWRlYWQodGhpcy5mb3JrKSkge1xuICAgICAgLy8ga2lsbCB0aGUgZm9ya1xuICAgICAgdGhpcy5mb3JrLnByb2Nlc3Mua2lsbCgpO1xuICAgICAgdGhpcy5mb3JrLmtpbGxlZCA9IHRydWU7XG5cbiAgICAgIC8vIHN0b3AgbGlzdGVuaW5nIHRvIHRoZSBmb3JrLCBpdCdzIGp1c3QgZ29pbmcgdG8gZGllXG4gICAgICB0aGlzLmZvcmtCaW5kZXIuZGVzdHJveSgpO1xuXG4gICAgICAvLyB3ZSBkb24ndCBuZWVkIHRvIHJlYWN0IHRvIHByb2Nlc3MuZXhpdCBhbnltb3JlXG4gICAgICB0aGlzLnByb2Nlc3NCaW5kZXIuZGVzdHJveSgpO1xuXG4gICAgICAvLyB3YWl0IHVudGlsIHRoZSBjbHVzdGVyIHJlcG9ydHMgdGhpcyBmb3JrIGhhcyBleGl0dGVkLCB0aGVuIHJlc29sdmVcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gdGhpcy5vbmNlKCdmb3JrOmV4aXQnLCByZXNvbHZlKSk7XG4gICAgfVxuICB9XG5cbiAgcGFyc2VJbmNvbWluZ01lc3NhZ2UobXNnKSB7XG4gICAgaWYgKCFfLmlzQXJyYXkobXNnKSkgcmV0dXJuO1xuICAgIHRoaXMub25NZXNzYWdlKC4uLm1zZyk7XG4gIH1cblxuICBvbk1lc3NhZ2UodHlwZSwgZGF0YSkge1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSAnV09SS0VSX0JST0FEQ0FTVCc6XG4gICAgICAgIHRoaXMuZW1pdCgnYnJvYWRjYXN0JywgZGF0YSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnV09SS0VSX0xJU1RFTklORyc6XG4gICAgICAgIHRoaXMubGlzdGVuaW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5lbWl0KCdsaXN0ZW5pbmcnKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgb25PbmxpbmUoKSB7XG4gICAgdGhpcy5vbmxpbmUgPSB0cnVlO1xuICAgIHRoaXMuZW1pdCgnZm9yazpvbmxpbmUnKTtcbiAgICB0aGlzLmNyYXNoZWQgPSBmYWxzZTtcbiAgfVxuXG4gIG9uRGlzY29ubmVjdCgpIHtcbiAgICB0aGlzLm9ubGluZSA9IGZhbHNlO1xuICAgIHRoaXMubGlzdGVuaW5nID0gZmFsc2U7XG4gIH1cblxuICBmbHVzaENoYW5nZUJ1ZmZlcigpIHtcbiAgICBsZXQgZmlsZXMgPSBfLnVuaXF1ZSh0aGlzLmNoYW5nZXMuc3BsaWNlKDApKTtcbiAgICBsZXQgcHJlZml4ID0gZmlsZXMubGVuZ3RoID4gMSA/ICdcXG4gLSAnIDogJyc7XG4gICAgcmV0dXJuIGZpbGVzLnJlZHVjZShmdW5jdGlvbiAobGlzdCwgZmlsZSkge1xuICAgICAgcmV0dXJuIGAke2xpc3QgfHwgJyd9JHtwcmVmaXh9XCIke2ZpbGV9XCJgO1xuICAgIH0sICcnKTtcbiAgfVxuXG4gIGFzeW5jIHN0YXJ0KCkge1xuICAgIGlmICh0aGlzLmZvcmspIHtcbiAgICAgIC8vIG9uY2UgXCJleGl0XCIgZXZlbnQgaXMgcmVjZWl2ZWQgd2l0aCAwIHN0YXR1cywgc3RhcnQoKSBpcyBjYWxsZWQgYWdhaW5cbiAgICAgIHRoaXMuc2h1dGRvd24oKTtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKGNiID0+IHRoaXMub25jZSgnb25saW5lJywgY2IpKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5jaGFuZ2VzLmxlbmd0aCkge1xuICAgICAgdGhpcy5sb2cud2FybihgcmVzdGFydGluZyAke3RoaXMudGl0bGV9YCwgYGR1ZSB0byBjaGFuZ2VzIGluICR7dGhpcy5mbHVzaENoYW5nZUJ1ZmZlcigpfWApO1xuICAgIH1cbiAgICBlbHNlIGlmICh0aGlzLnN0YXJ0Q291bnQrKykge1xuICAgICAgdGhpcy5sb2cud2FybihgcmVzdGFydGluZyAke3RoaXMudGl0bGV9Li4uYCk7XG4gICAgfVxuXG4gICAgdGhpcy5mb3JrID0gY2x1c3Rlci5mb3JrKHRoaXMuZW52KTtcbiAgICB0aGlzLmZvcmtCaW5kZXIgPSBuZXcgQmluZGVyRm9yKHRoaXMuZm9yayk7XG5cbiAgICAvLyB3aGVuIHRoZSBmb3JrIHNlbmRzIGEgbWVzc2FnZSwgY29tZXMgb25saW5lLCBvciBsb29zZXMgaXQncyBjb25uZWN0aW9uLCB0aGVuIHJlYWN0XG4gICAgdGhpcy5mb3JrQmluZGVyLm9uKCdtZXNzYWdlJywgbXNnID0+IHRoaXMucGFyc2VJbmNvbWluZ01lc3NhZ2UobXNnKSk7XG4gICAgdGhpcy5mb3JrQmluZGVyLm9uKCdvbmxpbmUnLCAoKSA9PiB0aGlzLm9uT25saW5lKCkpO1xuICAgIHRoaXMuZm9ya0JpbmRlci5vbignZGlzY29ubmVjdCcsICgpID0+IHRoaXMub25EaXNjb25uZWN0KCkpO1xuXG4gICAgLy8gd2hlbiB0aGUgY2x1c3RlciBzYXlzIGEgZm9yayBoYXMgZXhpdHRlZCwgY2hlY2sgaWYgaXQgaXMgb3Vyc1xuICAgIHRoaXMuY2x1c3RlckJpbmRlci5vbignZXhpdCcsIChmb3JrLCBjb2RlKSA9PiB0aGlzLm9uRXhpdChmb3JrLCBjb2RlKSk7XG5cbiAgICAvLyB3aGVuIHRoZSBwcm9jZXNzIGV4aXRzLCBtYWtlIHN1cmUgd2Uga2lsbCBvdXIgd29ya2Vyc1xuICAgIHRoaXMucHJvY2Vzc0JpbmRlci5vbignZXhpdCcsICgpID0+IHRoaXMuc2h1dGRvd24oKSk7XG5cbiAgICAvLyB3YWl0IGZvciB0aGUgZm9yayB0byByZXBvcnQgaXQgaXMgb25saW5lIGJlZm9yZSByZXNvbHZpbmdcbiAgICBhd2FpdCBuZXcgUHJvbWlzZShjYiA9PiB0aGlzLm9uY2UoJ2Zvcms6b25saW5lJywgY2IpKTtcbiAgfVxufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/cli/cluster/worker.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/src/cli/cluster/worker.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport cluster from 'cluster';\nimport { resolve } from 'path';\nimport { EventEmitter } from 'events';\n\nimport { BinderFor, fromRoot } from '../../utils';\n\nlet cliPath = fromRoot('src/cli');\nlet baseArgs = _.difference(process.argv.slice(2), ['--no-watch']);\nlet baseArgv = [process.execPath, cliPath].concat(baseArgs);\n\ncluster.setupMaster({\n  exec: cliPath,\n  silent: false\n});\n\nlet dead = fork => {\n  return fork.isDead() || fork.killed;\n};\n\nmodule.exports = class Worker extends EventEmitter {\n  constructor(opts) {\n    opts = opts || {};\n    super();\n\n    this.log = opts.log;\n    this.type = opts.type;\n    this.title = opts.title || opts.type;\n    this.watch = (opts.watch !== false);\n    this.startCount = 0;\n\n    // status flags\n    this.online = false; // the fork can accept messages\n    this.listening = false; // the fork is listening for connections\n    this.crashed = false; // the fork crashed\n\n    this.changes = [];\n\n    this.forkBinder = null; // defined when the fork is\n    this.clusterBinder = new BinderFor(cluster);\n    this.processBinder = new BinderFor(process);\n\n    let argv = _.union(baseArgv, opts.argv || []);\n    this.env = {\n      kbnWorkerType: this.type,\n      kbnWorkerArgv: JSON.stringify(argv)\n    };\n  }\n\n  onExit(fork, code) {\n    if (this.fork !== fork) return;\n\n    // we have our fork's exit, so stop listening for others\n    this.clusterBinder.destroy();\n\n    // our fork is gone, clear our ref so we don't try to talk to it anymore\n    this.fork = null;\n    this.forkBinder = null;\n\n    this.online = false;\n    this.listening = false;\n    this.emit('fork:exit');\n    this.crashed = code > 0;\n\n    if (this.crashed) {\n      this.emit('crashed');\n      this.log.bad(`${this.title} crashed`, 'with status code', code);\n      if (!this.watch) process.exit(code);\n    } else {\n      // restart after graceful shutdowns\n      this.start();\n    }\n  }\n\n  onChange(path) {\n    if (!this.watch) return;\n    this.changes.push(path);\n    this.start();\n  }\n\n  async shutdown() {\n    if (this.fork && !dead(this.fork)) {\n      // kill the fork\n      this.fork.process.kill();\n      this.fork.killed = true;\n\n      // stop listening to the fork, it's just going to die\n      this.forkBinder.destroy();\n\n      // we don't need to react to process.exit anymore\n      this.processBinder.destroy();\n\n      // wait until the cluster reports this fork has exitted, then resolve\n      await new Promise(resolve => this.once('fork:exit', resolve));\n    }\n  }\n\n  parseIncomingMessage(msg) {\n    if (!_.isArray(msg)) return;\n    this.onMessage(...msg);\n  }\n\n  onMessage(type, data) {\n    switch (type) {\n      case 'WORKER_BROADCAST':\n        this.emit('broadcast', data);\n        break;\n      case 'WORKER_LISTENING':\n        this.listening = true;\n        this.emit('listening');\n        break;\n    }\n  }\n\n  onOnline() {\n    this.online = true;\n    this.emit('fork:online');\n    this.crashed = false;\n  }\n\n  onDisconnect() {\n    this.online = false;\n    this.listening = false;\n  }\n\n  flushChangeBuffer() {\n    let files = _.unique(this.changes.splice(0));\n    let prefix = files.length > 1 ? '\\n - ' : '';\n    return files.reduce(function (list, file) {\n      return `${list || ''}${prefix}\"${file}\"`;\n    }, '');\n  }\n\n  async start() {\n    if (this.fork) {\n      // once \"exit\" event is received with 0 status, start() is called again\n      this.shutdown();\n      await new Promise(cb => this.once('online', cb));\n      return;\n    }\n\n    if (this.changes.length) {\n      this.log.warn(`restarting ${this.title}`, `due to changes in ${this.flushChangeBuffer()}`);\n    }\n    else if (this.startCount++) {\n      this.log.warn(`restarting ${this.title}...`);\n    }\n\n    this.fork = cluster.fork(this.env);\n    this.forkBinder = new BinderFor(this.fork);\n\n    // when the fork sends a message, comes online, or looses it's connection, then react\n    this.forkBinder.on('message', msg => this.parseIncomingMessage(msg));\n    this.forkBinder.on('online', () => this.onOnline());\n    this.forkBinder.on('disconnect', () => this.onDisconnect());\n\n    // when the cluster says a fork has exitted, check if it is ours\n    this.clusterBinder.on('exit', (fork, code) => this.onExit(fork, code));\n\n    // when the process exits, make sure we kill our workers\n    this.processBinder.on('exit', () => this.shutdown());\n\n    // wait for the fork to report it is online before resolving\n    await new Promise(cb => this.once('fork:online', cb));\n  }\n};\n"
      ]
    },
    "mtime": 1467036622785
  },
  "{\"filename\":\"/home/vio/v3metrics/src/cli/cluster/base_path_proxy.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "hapi",
            "imported": [
              "Server"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Server",
                "local": "Server"
              }
            ]
          },
          {
            "source": "boom",
            "imported": [
              "notFound"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "notFound",
                "local": "notFound"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "merge",
              "sample"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "merge",
                "local": "merge"
              },
              {
                "kind": "named",
                "imported": "sample",
                "local": "sample"
              }
            ]
          },
          {
            "source": "url",
            "imported": [
              "format"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "format",
                "local": "formatUrl"
              }
            ]
          },
          {
            "source": "bluebird",
            "imported": [
              "map",
              "fromNode"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "map",
                "local": "map"
              },
              {
                "kind": "named",
                "imported": "fromNode",
                "local": "fromNode"
              }
            ]
          },
          {
            "source": "https",
            "imported": [
              "Agent"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Agent",
                "local": "HttpsAgent"
              }
            ]
          },
          {
            "source": "fs",
            "imported": [
              "readFileSync"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "readFileSync",
                "local": "readFileSync"
              }
            ]
          },
          {
            "source": "../../server/config/config",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Config"
              }
            ]
          },
          {
            "source": "../../server/http/setup_connection",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "setupConnection"
              }
            ]
          },
          {
            "source": "../../server/logging",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "setupLogging"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "BasePathProxy"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "BasePathProxy",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "async-to-generator",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _hapi = require('hapi');\n\nvar _boom = require('boom');\n\nvar _lodash = require('lodash');\n\nvar _url = require('url');\n\nvar _bluebird = require('bluebird');\n\nvar _https = require('https');\n\nvar _fs = require('fs');\n\nvar _serverConfigConfig = require('../../server/config/config');\n\nvar _serverConfigConfig2 = _interopRequireDefault(_serverConfigConfig);\n\nvar _serverHttpSetup_connection = require('../../server/http/setup_connection');\n\nvar _serverHttpSetup_connection2 = _interopRequireDefault(_serverHttpSetup_connection);\n\nvar _serverLogging = require('../../server/logging');\n\nvar _serverLogging2 = _interopRequireDefault(_serverLogging);\n\nvar alphabet = 'abcdefghijklmnopqrztuvwxyz'.split('');\n\nvar BasePathProxy = (function () {\n  function BasePathProxy(clusterManager, userSettings) {\n    _classCallCheck(this, BasePathProxy);\n\n    this.clusterManager = clusterManager;\n    this.server = new _hapi.Server();\n\n    var config = _serverConfigConfig2['default'].withDefaultSchema(userSettings);\n\n    this.targetPort = config.get('dev.basePathProxyTarget');\n    this.basePath = config.get('server.basePath');\n\n    var _config$get = config.get('server.ssl');\n\n    var cert = _config$get.cert;\n\n    if (cert) {\n      this.proxyAgent = new _https.Agent({\n        ca: (0, _fs.readFileSync)(cert)\n      });\n    }\n\n    if (!this.basePath) {\n      this.basePath = '/' + (0, _lodash.sample)(alphabet, 3).join('');\n      config.set('server.basePath', this.basePath);\n    }\n\n    var ONE_GIGABYTE = 1024 * 1024 * 1024;\n    config.set('server.maxPayloadBytes', ONE_GIGABYTE);\n\n    (0, _serverLogging2['default'])(null, this.server, config);\n    (0, _serverHttpSetup_connection2['default'])(null, this.server, config);\n    this.setupRoutes();\n  }\n\n  _createClass(BasePathProxy, [{\n    key: 'setupRoutes',\n    value: function setupRoutes() {\n      var clusterManager = this.clusterManager;\n      var server = this.server;\n      var basePath = this.basePath;\n      var targetPort = this.targetPort;\n\n      server.route({\n        method: 'GET',\n        path: '/',\n        handler: function handler(req, reply) {\n          return reply.redirect(basePath);\n        }\n      });\n\n      server.route({\n        method: '*',\n        path: basePath + '/{kbnPath*}',\n        config: {\n          pre: [function (req, reply) {\n            (0, _bluebird.map)(clusterManager.workers, function (worker) {\n              if (worker.type === 'server' && !worker.listening && !worker.crashed) {\n                return (0, _bluebird.fromNode)(function (cb) {\n                  var done = function done() {\n                    worker.removeListener('listening', done);\n                    worker.removeListener('crashed', done);\n                    cb();\n                  };\n\n                  worker.on('listening', done);\n                  worker.on('crashed', done);\n                });\n              }\n            })['return'](undefined).nodeify(reply);\n          }]\n        },\n        handler: {\n          proxy: {\n            passThrough: true,\n            xforward: true,\n            agent: this.proxyAgent,\n            mapUri: function mapUri(req, callback) {\n              callback(null, (0, _url.format)({\n                protocol: server.info.protocol,\n                hostname: server.info.host,\n                port: targetPort,\n                pathname: req.params.kbnPath,\n                query: req.query\n              }));\n            }\n          }\n        }\n      });\n\n      server.route({\n        method: '*',\n        path: '/{oldBasePath}/{kbnPath*}',\n        handler: function handler(req, reply) {\n          var _req$params = req.params;\n          var oldBasePath = _req$params.oldBasePath;\n          var _req$params$kbnPath = _req$params.kbnPath;\n          var kbnPath = _req$params$kbnPath === undefined ? '' : _req$params$kbnPath;\n\n          var isGet = req.method === 'get';\n          var isBasePath = oldBasePath.length === 3;\n          var isApp = kbnPath.slice(0, 4) === 'app/';\n\n          if (isGet && isBasePath && isApp) {\n            return reply.redirect(basePath + '/' + kbnPath);\n          }\n\n          return reply((0, _boom.notFound)());\n        }\n      });\n    }\n  }, {\n    key: 'listen',\n    value: _asyncToGenerator(function* () {\n      var _this = this;\n\n      yield (0, _bluebird.fromNode)(function (cb) {\n        return _this.server.start(cb);\n      });\n      this.server.log(['listening', 'info'], 'basePath Proxy running at ' + this.server.info.uri + this.basePath);\n    })\n  }]);\n\n  return BasePathProxy;\n})();\n\nexports['default'] = BasePathProxy;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL2NsaS9jbHVzdGVyL2Jhc2VfcGF0aF9wcm94eS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztvQkFBdUIsTUFBTTs7b0JBQ0osTUFBTTs7c0JBQ0QsUUFBUTs7bUJBQ0YsS0FBSzs7d0JBQ1gsVUFBVTs7cUJBQ0osT0FBTzs7a0JBQ2QsSUFBSTs7a0NBRWQsNEJBQTRCOzs7OzBDQUNuQixvQ0FBb0M7Ozs7NkJBQ3ZDLHNCQUFzQjs7OztBQUUvQyxJQUFNLFFBQVEsR0FBRyw0QkFBNEIsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUM7O0lBRW5DLGFBQWE7QUFDckIsV0FEUSxhQUFhLENBQ3BCLGNBQWMsRUFBRSxZQUFZLEVBQUU7MEJBRHZCLGFBQWE7O0FBRTlCLFFBQUksQ0FBQyxjQUFjLEdBQUcsY0FBYyxDQUFDO0FBQ3JDLFFBQUksQ0FBQyxNQUFNLEdBQUcsa0JBQVksQ0FBQzs7QUFFM0IsUUFBTSxNQUFNLEdBQUcsZ0NBQU8saUJBQWlCLENBQUMsWUFBWSxDQUFDLENBQUM7O0FBRXRELFFBQUksQ0FBQyxVQUFVLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDO0FBQ3hELFFBQUksQ0FBQyxRQUFRLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDOztzQkFFN0IsTUFBTSxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUM7O1FBQWpDLElBQUksZUFBSixJQUFJOztBQUNaLFFBQUksSUFBSSxFQUFFO0FBQ1IsVUFBSSxDQUFDLFVBQVUsR0FBRyxpQkFBZTtBQUMvQixVQUFFLEVBQUUsc0JBQWEsSUFBSSxDQUFDO09BQ3ZCLENBQUMsQ0FBQztLQUNKOztBQUVELFFBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFO0FBQ2xCLFVBQUksQ0FBQyxRQUFRLFNBQU8sb0JBQU8sUUFBUSxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FB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LGNBQU0sRUFBRSxHQUFHO0FBQ1gsWUFBSSw2QkFBNkI7QUFDakMsZUFBTyxFQUFBLGlCQUFDLEdBQUcsRUFBRSxLQUFLLEVBQUU7NEJBQ2tCLEdBQUcsQ0FBQyxNQUFNO2NBQXZDLFdBQVcsZUFBWCxXQUFXO2dEQUFFLE9BQU87Y0FBUCxPQUFPLHVDQUFHLEVBQUU7O0FBRWhDLGNBQU0sS0FBSyxHQUFHLEdBQUcsQ0FBQyxNQUFNLEtBQUssS0FBSyxDQUFDO0FBQ25DLGNBQU0sVUFBVSxHQUFHLFdBQVcsQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDO0FBQzVDLGNBQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLE1BQU0sQ0FBQzs7QUFFN0MsY0FBSSxLQUFLLElBQUksVUFBVSxJQUFJLEtBQUssRUFBRTtBQUNoQyxtQkFBTyxLQUFLLENBQUMsUUFBUSxDQUFJLFFBQVEsU0FBSSxPQUFPLENBQUcsQ0FBQztXQUNqRDs7QUFFRCxpQkFBTyxLQUFLLENBQUMscUJBQVUsQ0FBQyxDQUFDO1NBQzFCO09BQ0YsQ0FBQyxDQUFDO0tBQ0o7Ozs2QkFFVyxhQUFHOzs7QUFDYixZQUFNLHdCQUFTLFVBQUEsRUFBRTtlQUFJLE1BQUssTUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUM7T0FBQSxDQUFDLENBQUM7QUFDNUMsVUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxXQUFXLEVBQUUsTUFBTSxDQUFDLGlDQUErQixJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBRyxDQUFDO0tBQzdHOzs7U0ExR2tCLGFBQWE7OztxQkFBYixhQUFhIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL2NsaS9jbHVzdGVyL2Jhc2VfcGF0aF9wcm94eS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNlcnZlciB9IGZyb20gJ2hhcGknO1xuaW1wb3J0IHsgbm90Rm91bmQgfSBmcm9tICdib29tJztcbmltcG9ydCB7IG1lcmdlLCBzYW1wbGUgfSBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHsgZm9ybWF0IGFzIGZvcm1hdFVybCB9IGZyb20gJ3VybCc7XG5pbXBvcnQgeyBtYXAsIGZyb21Ob2RlIH0gZnJvbSAnYmx1ZWJpcmQnO1xuaW1wb3J0IHsgQWdlbnQgYXMgSHR0cHNBZ2VudCB9IGZyb20gJ2h0dHBzJztcbmltcG9ydCB7IHJlYWRGaWxlU3luYyB9IGZyb20gJ2ZzJztcblxuaW1wb3J0IENvbmZpZyBmcm9tICcuLi8uLi9zZXJ2ZXIvY29uZmlnL2NvbmZpZyc7XG5pbXBvcnQgc2V0dXBDb25uZWN0aW9uIGZyb20gJy4uLy4uL3NlcnZlci9odHRwL3NldHVwX2Nvbm5lY3Rpb24nO1xuaW1wb3J0IHNldHVwTG9nZ2luZyBmcm9tICcuLi8uLi9zZXJ2ZXIvbG9nZ2luZyc7XG5cbmNvbnN0IGFscGhhYmV0ID0gJ2FiY2RlZmdoaWprbG1ub3Bxcnp0dXZ3eHl6Jy5zcGxpdCgnJyk7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJhc2VQYXRoUHJveHkge1xuICBjb25zdHJ1Y3RvcihjbHVzdGVyTWFuYWdlciwgdXNlclNldHRpbmdzKSB7XG4gICAgdGhpcy5jbHVzdGVyTWFuYWdlciA9IGNsdXN0ZXJNYW5hZ2VyO1xuICAgIHRoaXMuc2VydmVyID0gbmV3IFNlcnZlcigpO1xuXG4gICAgY29uc3QgY29uZmlnID0gQ29uZmlnLndpdGhEZWZhdWx0U2NoZW1hKHVzZXJTZXR0aW5ncyk7XG5cbiAgICB0aGlzLnRhcmdldFBvcnQgPSBjb25maWcuZ2V0KCdkZXYuYmFzZVBhdGhQcm94eVRhcmdldCcpO1xuICAgIHRoaXMuYmFzZVBhdGggPSBjb25maWcuZ2V0KCdzZXJ2ZXIuYmFzZVBhdGgnKTtcblxuICAgIGNvbnN0IHsgY2VydCB9ID0gY29uZmlnLmdldCgnc2VydmVyLnNzbCcpO1xuICAgIGlmIChjZXJ0KSB7XG4gICAgICB0aGlzLnByb3h5QWdlbnQgPSBuZXcgSHR0cHNBZ2VudCh7XG4gICAgICAgIGNhOiByZWFkRmlsZVN5bmMoY2VydClcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5iYXNlUGF0aCkge1xuICAgICAgdGhpcy5iYXNlUGF0aCA9IGAvJHtzYW1wbGUoYWxwaGFiZXQsIDMpLmpvaW4oJycpfWA7XG4gICAgICBjb25maWcuc2V0KCdzZXJ2ZXIuYmFzZVBhdGgnLCB0aGlzLmJhc2VQYXRoKTtcbiAgICB9XG5cbiAgICBjb25zdCBPTkVfR0lHQUJZVEUgPSAxMDI0ICogMTAyNCAqIDEwMjQ7XG4gICAgY29uZmlnLnNldCgnc2VydmVyLm1heFBheWxvYWRCeXRlcycsIE9ORV9HSUdBQllURSk7XG5cbiAgICBzZXR1cExvZ2dpbmcobnVsbCwgdGhpcy5zZXJ2ZXIsIGNvbmZpZyk7XG4gICAgc2V0dXBDb25uZWN0aW9uKG51bGwsIHRoaXMuc2VydmVyLCBjb25maWcpO1xuICAgIHRoaXMuc2V0dXBSb3V0ZXMoKTtcbiAgfVxuXG4gIHNldHVwUm91dGVzKCkge1xuICAgIGNvbnN0IHsgY2x1c3Rlck1hbmFnZXIsIHNlcnZlciwgYmFzZVBhdGgsIHRhcmdldFBvcnQgfSA9IHRoaXM7XG5cbiAgICBzZXJ2ZXIucm91dGUoe1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIHBhdGg6ICcvJyxcbiAgICAgIGhhbmRsZXIocmVxLCByZXBseSkge1xuICAgICAgICByZXR1cm4gcmVwbHkucmVkaXJlY3QoYmFzZVBhdGgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgc2VydmVyLnJvdXRlKHtcbiAgICAgIG1ldGhvZDogJyonLFxuICAgICAgcGF0aDogYCR7YmFzZVBhdGh9L3trYm5QYXRoKn1gLFxuICAgICAgY29uZmlnOiB7XG4gICAgICAgIHByZTogW1xuICAgICAgICAgIChyZXEsIHJlcGx5KSA9PiB7XG4gICAgICAgICAgICBtYXAoY2x1c3Rlck1hbmFnZXIud29ya2Vycywgd29ya2VyID0+IHtcbiAgICAgICAgICAgICAgaWYgKHdvcmtlci50eXBlID09PSAnc2VydmVyJyAmJiAhd29ya2VyLmxpc3RlbmluZyAmJiAhd29ya2VyLmNyYXNoZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZnJvbU5vZGUoY2IgPT4ge1xuICAgICAgICAgICAgICAgICAgY29uc3QgZG9uZSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgd29ya2VyLnJlbW92ZUxpc3RlbmVyKCdsaXN0ZW5pbmcnLCBkb25lKTtcbiAgICAgICAgICAgICAgICAgICAgd29ya2VyLnJlbW92ZUxpc3RlbmVyKCdjcmFzaGVkJywgZG9uZSk7XG4gICAgICAgICAgICAgICAgICAgIGNiKCk7XG4gICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICB3b3JrZXIub24oJ2xpc3RlbmluZycsIGRvbmUpO1xuICAgICAgICAgICAgICAgICAgd29ya2VyLm9uKCdjcmFzaGVkJywgZG9uZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAucmV0dXJuKHVuZGVmaW5lZClcbiAgICAgICAgICAgIC5ub2RlaWZ5KHJlcGx5KTtcbiAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgICAgaGFuZGxlcjoge1xuICAgICAgICBwcm94eToge1xuICAgICAgICAgIHBhc3NUaHJvdWdoOiB0cnVlLFxuICAgICAgICAgIHhmb3J3YXJkOiB0cnVlLFxuICAgICAgICAgIGFnZW50OiB0aGlzLnByb3h5QWdlbnQsXG4gICAgICAgICAgbWFwVXJpKHJlcSwgY2FsbGJhY2spIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGZvcm1hdFVybCh7XG4gICAgICAgICAgICAgIHByb3RvY29sOiBzZXJ2ZXIuaW5mby5wcm90b2NvbCxcbiAgICAgICAgICAgICAgaG9zdG5hbWU6IHNlcnZlci5pbmZvLmhvc3QsXG4gICAgICAgICAgICAgIHBvcnQ6IHRhcmdldFBvcnQsXG4gICAgICAgICAgICAgIHBhdGhuYW1lOiByZXEucGFyYW1zLmtiblBhdGgsXG4gICAgICAgICAgICAgIHF1ZXJ5OiByZXEucXVlcnksXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBzZXJ2ZXIucm91dGUoe1xuICAgICAgbWV0aG9kOiAnKicsXG4gICAgICBwYXRoOiBgL3tvbGRCYXNlUGF0aH0ve2tiblBhdGgqfWAsXG4gICAgICBoYW5kbGVyKHJlcSwgcmVwbHkpIHtcbiAgICAgICAgY29uc3Qge29sZEJhc2VQYXRoLCBrYm5QYXRoID0gJyd9ID0gcmVxLnBhcmFtcztcblxuICAgICAgICBjb25zdCBpc0dldCA9IHJlcS5tZXRob2QgPT09ICdnZXQnO1xuICAgICAgICBjb25zdCBpc0Jhc2VQYXRoID0gb2xkQmFzZVBhdGgubGVuZ3RoID09PSAzO1xuICAgICAgICBjb25zdCBpc0FwcCA9IGtiblBhdGguc2xpY2UoMCwgNCkgPT09ICdhcHAvJztcblxuICAgICAgICBpZiAoaXNHZXQgJiYgaXNCYXNlUGF0aCAmJiBpc0FwcCkge1xuICAgICAgICAgIHJldHVybiByZXBseS5yZWRpcmVjdChgJHtiYXNlUGF0aH0vJHtrYm5QYXRofWApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlcGx5KG5vdEZvdW5kKCkpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgbGlzdGVuKCkge1xuICAgIGF3YWl0IGZyb21Ob2RlKGNiID0+IHRoaXMuc2VydmVyLnN0YXJ0KGNiKSk7XG4gICAgdGhpcy5zZXJ2ZXIubG9nKFsnbGlzdGVuaW5nJywgJ2luZm8nXSwgYGJhc2VQYXRoIFByb3h5IHJ1bm5pbmcgYXQgJHt0aGlzLnNlcnZlci5pbmZvLnVyaX0ke3RoaXMuYmFzZVBhdGh9YCk7XG4gIH1cblxufVxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/cli/cluster/base_path_proxy.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/src/cli/cluster/base_path_proxy.js",
      "sourcesContent": [
        "import { Server } from 'hapi';\nimport { notFound } from 'boom';\nimport { merge, sample } from 'lodash';\nimport { format as formatUrl } from 'url';\nimport { map, fromNode } from 'bluebird';\nimport { Agent as HttpsAgent } from 'https';\nimport { readFileSync } from 'fs';\n\nimport Config from '../../server/config/config';\nimport setupConnection from '../../server/http/setup_connection';\nimport setupLogging from '../../server/logging';\n\nconst alphabet = 'abcdefghijklmnopqrztuvwxyz'.split('');\n\nexport default class BasePathProxy {\n  constructor(clusterManager, userSettings) {\n    this.clusterManager = clusterManager;\n    this.server = new Server();\n\n    const config = Config.withDefaultSchema(userSettings);\n\n    this.targetPort = config.get('dev.basePathProxyTarget');\n    this.basePath = config.get('server.basePath');\n\n    const { cert } = config.get('server.ssl');\n    if (cert) {\n      this.proxyAgent = new HttpsAgent({\n        ca: readFileSync(cert)\n      });\n    }\n\n    if (!this.basePath) {\n      this.basePath = `/${sample(alphabet, 3).join('')}`;\n      config.set('server.basePath', this.basePath);\n    }\n\n    const ONE_GIGABYTE = 1024 * 1024 * 1024;\n    config.set('server.maxPayloadBytes', ONE_GIGABYTE);\n\n    setupLogging(null, this.server, config);\n    setupConnection(null, this.server, config);\n    this.setupRoutes();\n  }\n\n  setupRoutes() {\n    const { clusterManager, server, basePath, targetPort } = this;\n\n    server.route({\n      method: 'GET',\n      path: '/',\n      handler(req, reply) {\n        return reply.redirect(basePath);\n      }\n    });\n\n    server.route({\n      method: '*',\n      path: `${basePath}/{kbnPath*}`,\n      config: {\n        pre: [\n          (req, reply) => {\n            map(clusterManager.workers, worker => {\n              if (worker.type === 'server' && !worker.listening && !worker.crashed) {\n                return fromNode(cb => {\n                  const done = () => {\n                    worker.removeListener('listening', done);\n                    worker.removeListener('crashed', done);\n                    cb();\n                  };\n\n                  worker.on('listening', done);\n                  worker.on('crashed', done);\n                });\n              }\n            })\n            .return(undefined)\n            .nodeify(reply);\n          }\n        ],\n      },\n      handler: {\n        proxy: {\n          passThrough: true,\n          xforward: true,\n          agent: this.proxyAgent,\n          mapUri(req, callback) {\n            callback(null, formatUrl({\n              protocol: server.info.protocol,\n              hostname: server.info.host,\n              port: targetPort,\n              pathname: req.params.kbnPath,\n              query: req.query,\n            }));\n          }\n        }\n      }\n    });\n\n    server.route({\n      method: '*',\n      path: `/{oldBasePath}/{kbnPath*}`,\n      handler(req, reply) {\n        const {oldBasePath, kbnPath = ''} = req.params;\n\n        const isGet = req.method === 'get';\n        const isBasePath = oldBasePath.length === 3;\n        const isApp = kbnPath.slice(0, 4) === 'app/';\n\n        if (isGet && isBasePath && isApp) {\n          return reply.redirect(`${basePath}/${kbnPath}`);\n        }\n\n        return reply(notFound());\n      }\n    });\n  }\n\n  async listen() {\n    await fromNode(cb => this.server.start(cb));\n    this.server.log(['listening', 'info'], `basePath Proxy running at ${this.server.info.uri}${this.basePath}`);\n  }\n\n}\n"
      ]
    },
    "mtime": 1467036622781
  },
  "{\"filename\":\"/home/vio/v3metrics/src/optimize/lazy/lazy.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "cluster",
            "imported": [
              "isWorker"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "isWorker",
                "local": "isWorker"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "async-to-generator"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nvar _cluster = require('cluster');\n\nmodule.exports = _asyncToGenerator(function* (kbnServer, server, config) {\n\n  if (!_cluster.isWorker) {\n    throw new Error('lazy optimization is only available in \"watch\" mode');\n  }\n\n  /**\n   * When running in lazy mode two workers/threads run in one\n   * of the modes: 'optmzr' or 'server'\n   *\n   * optmzr: this thread runs the LiveOptimizer and the LazyServer\n   *   which serves the LiveOptimizer's output and blocks requests\n   *   while the optimizer is running\n   *\n   * server: this thread runs the entire kibana server and proxies\n   *   all requests for /bundles/* to the optmzr\n   *\n   * @param  {string} process.env.kbnWorkerType\n   */\n  switch (process.env.kbnWorkerType) {\n    case 'optmzr':\n      yield kbnServer.mixin(require('./optmzr_role'));\n      break;\n\n    case 'server':\n      yield kbnServer.mixin(require('./proxy_role'));\n      break;\n\n    default:\n      throw new Error('unknown kbnWorkerType \"' + process.env.kbnWorkerType + '\"');\n  }\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL29wdGltaXplL2xhenkvbGF6eS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O3VCQUF5QixTQUFTOztBQUNsQyxNQUFNLENBQUMsT0FBTyxxQkFBRyxXQUFPLFNBQVMsRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFLOztBQUdwRCxNQUFJLGtCQUFTLEVBQUU7QUFDYixVQUFNLElBQUksS0FBSyx1REFBdUQsQ0FBQztHQUN4RTs7Ozs7Ozs7Ozs7Ozs7O0FBZUQsVUFBUSxPQUFPLENBQUMsR0FBRyxDQUFDLGFBQWE7QUFDL0IsU0FBSyxRQUFRO0FBQ1gsWUFBTSxTQUFTLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDO0FBQ2hELFlBQU07O0FBQUEsQUFFUixTQUFLLFFBQVE7QUFDWCxZQUFNLFNBQVMsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUM7QUFDL0MsWUFBTTs7QUFBQSxBQUVSO0FBQ0UsWUFBTSxJQUFJLEtBQUssNkJBQTJCLE9BQU8sQ0FBQyxHQUFHLENBQUMsYUFBYSxPQUFJLENBQUM7QUFBQSxHQUMzRTtDQUVGLENBQUEsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9vcHRpbWl6ZS9sYXp5L2xhenkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpc1dvcmtlciB9IGZyb20gJ2NsdXN0ZXInO1xubW9kdWxlLmV4cG9ydHMgPSBhc3luYyAoa2JuU2VydmVyLCBzZXJ2ZXIsIGNvbmZpZykgPT4ge1xuXG5cbiAgaWYgKCFpc1dvcmtlcikge1xuICAgIHRocm93IG5ldyBFcnJvcihgbGF6eSBvcHRpbWl6YXRpb24gaXMgb25seSBhdmFpbGFibGUgaW4gXCJ3YXRjaFwiIG1vZGVgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXaGVuIHJ1bm5pbmcgaW4gbGF6eSBtb2RlIHR3byB3b3JrZXJzL3RocmVhZHMgcnVuIGluIG9uZVxuICAgKiBvZiB0aGUgbW9kZXM6ICdvcHRtenInIG9yICdzZXJ2ZXInXG4gICAqXG4gICAqIG9wdG16cjogdGhpcyB0aHJlYWQgcnVucyB0aGUgTGl2ZU9wdGltaXplciBhbmQgdGhlIExhenlTZXJ2ZXJcbiAgICogICB3aGljaCBzZXJ2ZXMgdGhlIExpdmVPcHRpbWl6ZXIncyBvdXRwdXQgYW5kIGJsb2NrcyByZXF1ZXN0c1xuICAgKiAgIHdoaWxlIHRoZSBvcHRpbWl6ZXIgaXMgcnVubmluZ1xuICAgKlxuICAgKiBzZXJ2ZXI6IHRoaXMgdGhyZWFkIHJ1bnMgdGhlIGVudGlyZSBraWJhbmEgc2VydmVyIGFuZCBwcm94aWVzXG4gICAqICAgYWxsIHJlcXVlc3RzIGZvciAvYnVuZGxlcy8qIHRvIHRoZSBvcHRtenJcbiAgICpcbiAgICogQHBhcmFtICB7c3RyaW5nfSBwcm9jZXNzLmVudi5rYm5Xb3JrZXJUeXBlXG4gICAqL1xuICBzd2l0Y2ggKHByb2Nlc3MuZW52LmtibldvcmtlclR5cGUpIHtcbiAgICBjYXNlICdvcHRtenInOlxuICAgICAgYXdhaXQga2JuU2VydmVyLm1peGluKHJlcXVpcmUoJy4vb3B0bXpyX3JvbGUnKSk7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ3NlcnZlcic6XG4gICAgICBhd2FpdCBrYm5TZXJ2ZXIubWl4aW4ocmVxdWlyZSgnLi9wcm94eV9yb2xlJykpO1xuICAgICAgYnJlYWs7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgdGhyb3cgbmV3IEVycm9yKGB1bmtub3duIGtibldvcmtlclR5cGUgXCIke3Byb2Nlc3MuZW52LmtibldvcmtlclR5cGV9XCJgKTtcbiAgfVxuXG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/optimize/lazy/lazy.js"
      ],
      "names": [],
      "mappings": ";;;;uBAAyB,SAAS;;AAClC,MAAM,CAAC,OAAO,qBAAG,WAAO,SAAS,EAAE,MAAM,EAAE,MAAM,EAAK;;AAGpD,MAAI,kBAAS,EAAE;AACb,UAAM,IAAI,KAAK,uDAAuD,CAAC;GACxE;;;;;;;;;;;;;;;AAeD,UAAQ,OAAO,CAAC,GAAG,CAAC,aAAa;AAC/B,SAAK,QAAQ;AACX,YAAM,SAAS,CAAC,KAAK,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC,CAAC;AAChD,YAAM;;AAAA,AAER,SAAK,QAAQ;AACX,YAAM,SAAS,CAAC,KAAK,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC;AAC/C,YAAM;;AAAA,AAER;AACE,YAAM,IAAI,KAAK,6BAA2B,OAAO,CAAC,GAAG,CAAC,aAAa,OAAI,CAAC;AAAA,GAC3E;CAEF,CAAA,CAAC",
      "file": "/home/vio/v3metrics/src/optimize/lazy/lazy.js",
      "sourcesContent": [
        "import { isWorker } from 'cluster';\nmodule.exports = async (kbnServer, server, config) => {\n\n\n  if (!isWorker) {\n    throw new Error(`lazy optimization is only available in \"watch\" mode`);\n  }\n\n  /**\n   * When running in lazy mode two workers/threads run in one\n   * of the modes: 'optmzr' or 'server'\n   *\n   * optmzr: this thread runs the LiveOptimizer and the LazyServer\n   *   which serves the LiveOptimizer's output and blocks requests\n   *   while the optimizer is running\n   *\n   * server: this thread runs the entire kibana server and proxies\n   *   all requests for /bundles/* to the optmzr\n   *\n   * @param  {string} process.env.kbnWorkerType\n   */\n  switch (process.env.kbnWorkerType) {\n    case 'optmzr':\n      await kbnServer.mixin(require('./optmzr_role'));\n      break;\n\n    case 'server':\n      await kbnServer.mixin(require('./proxy_role'));\n      break;\n\n    default:\n      throw new Error(`unknown kbnWorkerType \"${process.env.kbnWorkerType}\"`);\n  }\n\n};\n"
      ]
    },
    "mtime": 1467036622805
  },
  "{\"filename\":\"/home/vio/v3metrics/src/optimize/lazy/optmzr_role.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./lazy_server",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "LazyServer"
              }
            ]
          },
          {
            "source": "./lazy_optimizer",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "LazyOptimizer"
              }
            ]
          },
          {
            "source": "../../utils",
            "imported": [
              "fromRoot"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "fromRoot",
                "local": "fromRoot"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "async-to-generator",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nvar _lazy_server = require('./lazy_server');\n\nvar _lazy_server2 = _interopRequireDefault(_lazy_server);\n\nvar _lazy_optimizer = require('./lazy_optimizer');\n\nvar _lazy_optimizer2 = _interopRequireDefault(_lazy_optimizer);\n\nvar _utils = require('../../utils');\n\nexports['default'] = _asyncToGenerator(function* (kbnServer, kibanaHapiServer, config) {\n  var server = new _lazy_server2['default'](config.get('optimize.lazyHost'), config.get('optimize.lazyPort'), new _lazy_optimizer2['default']({\n    log: function log(tags, data) {\n      return kibanaHapiServer.log(tags, data);\n    },\n    env: kbnServer.bundles.env,\n    bundles: kbnServer.bundles,\n    profile: config.get('optimize.profile'),\n    sourceMaps: config.get('optimize.sourceMaps'),\n    prebuild: config.get('optimize.lazyPrebuild'),\n    urlBasePath: config.get('server.basePath'),\n    unsafeCache: config.get('optimize.unsafeCache')\n  }));\n\n  var ready = false;\n\n  var sendReady = function sendReady() {\n    if (!process.connected) return;\n    process.send(['WORKER_BROADCAST', { optimizeReady: ready }]);\n  };\n\n  process.on('message', function (msg) {\n    if (msg && msg.optimizeReady === '?') sendReady();\n  });\n\n  sendReady();\n\n  yield server.init();\n\n  ready = true;\n  sendReady();\n});\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL29wdGltaXplL2xhenkvb3B0bXpyX3JvbGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OzsyQkFBdUIsZUFBZTs7Ozs4QkFDWixrQkFBa0I7Ozs7cUJBQ25CLGFBQWE7O3VDQUV2QixXQUFPLFNBQVMsRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLEVBQUs7QUFDNUQsTUFBSSxNQUFNLEdBQUcsNkJBQ1gsTUFBTSxDQUFDLEdBQUcsQ0FBQyxtQkFBbUIsQ0FBQyxFQUMvQixNQUFNLENBQUMsR0FBRyxDQUFDLG1CQUFtQixDQUFDLEVBQy9CLGdDQUFrQjtBQUNoQixPQUFHLEVBQUUsYUFBQyxJQUFJLEVBQUUsSUFBSTthQUFLLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDO0tBQUE7QUFDckQsT0FBRyxFQUFFLFNBQVMsQ0FBQyxPQUFPLENBQUMsR0FBRztBQUMxQixXQUFPLEVBQUUsU0FBUyxDQUFDLE9BQU87QUFDMUIsV0FBTyxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsa0JBQWtCLENBQUM7QUFDdkMsY0FBVSxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMscUJBQXFCLENBQUM7QUFDN0MsWUFBUSxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsdUJBQXVCLENBQUM7QUFDN0MsZUFBVyxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsaUJBQWlCLENBQUM7QUFDMUMsZUFBVyxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsc0JBQXNCLENBQUM7R0FDaEQsQ0FBQyxDQUNILENBQUM7O0FBRUYsTUFBSSxLQUFLLEdBQUcsS0FBSyxDQUFDOztBQUVsQixNQUFJLFNBQVMsR0FBRyxTQUFaLFNBQVMsR0FBUztBQUNwQixRQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSxPQUFPO0FBQy9CLFdBQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxrQkFBa0IsRUFBRSxFQUFFLGFBQWEsRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUM7R0FDOUQsQ0FBQzs7QUFFRixTQUFPLENBQUMsRUFBRSxDQUFDLFNBQVMsRUFBRSxVQUFDLEdBQUcsRUFBSztBQUM3QixRQUFJLEdBQUcsSUFBSSxHQUFHLENBQUMsYUFBYSxLQUFLLEdBQUcsRUFBRSxTQUFTLEVBQUUsQ0FBQztHQUNuRCxDQUFDLENBQUM7O0FBR0gsV0FBUyxFQUFFLENBQUM7O0FBRVosUUFBTSxNQUFNLENBQUMsSUFBSSxFQUFFLENBQUM7O0FBRXBCLE9BQUssR0FBRyxJQUFJLENBQUM7QUFDYixXQUFTLEVBQUUsQ0FBQztDQUNiIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL29wdGltaXplL2xhenkvb3B0bXpyX3JvbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTGF6eVNlcnZlciBmcm9tICcuL2xhenlfc2VydmVyJztcbmltcG9ydCBMYXp5T3B0aW1pemVyIGZyb20gJy4vbGF6eV9vcHRpbWl6ZXInO1xuaW1wb3J0IHsgZnJvbVJvb3QgfSBmcm9tICcuLi8uLi91dGlscyc7XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIChrYm5TZXJ2ZXIsIGtpYmFuYUhhcGlTZXJ2ZXIsIGNvbmZpZykgPT4ge1xuICBsZXQgc2VydmVyID0gbmV3IExhenlTZXJ2ZXIoXG4gICAgY29uZmlnLmdldCgnb3B0aW1pemUubGF6eUhvc3QnKSxcbiAgICBjb25maWcuZ2V0KCdvcHRpbWl6ZS5sYXp5UG9ydCcpLFxuICAgIG5ldyBMYXp5T3B0aW1pemVyKHtcbiAgICAgIGxvZzogKHRhZ3MsIGRhdGEpID0+IGtpYmFuYUhhcGlTZXJ2ZXIubG9nKHRhZ3MsIGRhdGEpLFxuICAgICAgZW52OiBrYm5TZXJ2ZXIuYnVuZGxlcy5lbnYsXG4gICAgICBidW5kbGVzOiBrYm5TZXJ2ZXIuYnVuZGxlcyxcbiAgICAgIHByb2ZpbGU6IGNvbmZpZy5nZXQoJ29wdGltaXplLnByb2ZpbGUnKSxcbiAgICAgIHNvdXJjZU1hcHM6IGNvbmZpZy5nZXQoJ29wdGltaXplLnNvdXJjZU1hcHMnKSxcbiAgICAgIHByZWJ1aWxkOiBjb25maWcuZ2V0KCdvcHRpbWl6ZS5sYXp5UHJlYnVpbGQnKSxcbiAgICAgIHVybEJhc2VQYXRoOiBjb25maWcuZ2V0KCdzZXJ2ZXIuYmFzZVBhdGgnKSxcbiAgICAgIHVuc2FmZUNhY2hlOiBjb25maWcuZ2V0KCdvcHRpbWl6ZS51bnNhZmVDYWNoZScpLFxuICAgIH0pXG4gICk7XG5cbiAgbGV0IHJlYWR5ID0gZmFsc2U7XG5cbiAgbGV0IHNlbmRSZWFkeSA9ICgpID0+IHtcbiAgICBpZiAoIXByb2Nlc3MuY29ubmVjdGVkKSByZXR1cm47XG4gICAgcHJvY2Vzcy5zZW5kKFsnV09SS0VSX0JST0FEQ0FTVCcsIHsgb3B0aW1pemVSZWFkeTogcmVhZHkgfV0pO1xuICB9O1xuXG4gIHByb2Nlc3Mub24oJ21lc3NhZ2UnLCAobXNnKSA9PiB7XG4gICAgaWYgKG1zZyAmJiBtc2cub3B0aW1pemVSZWFkeSA9PT0gJz8nKSBzZW5kUmVhZHkoKTtcbiAgfSk7XG5cblxuICBzZW5kUmVhZHkoKTtcblxuICBhd2FpdCBzZXJ2ZXIuaW5pdCgpO1xuXG4gIHJlYWR5ID0gdHJ1ZTtcbiAgc2VuZFJlYWR5KCk7XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/optimize/lazy/optmzr_role.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;2BAAuB,eAAe;;;;8BACZ,kBAAkB;;;;qBACnB,aAAa;;uCAEvB,WAAO,SAAS,EAAE,gBAAgB,EAAE,MAAM,EAAK;AAC5D,MAAI,MAAM,GAAG,6BACX,MAAM,CAAC,GAAG,CAAC,mBAAmB,CAAC,EAC/B,MAAM,CAAC,GAAG,CAAC,mBAAmB,CAAC,EAC/B,gCAAkB;AAChB,OAAG,EAAE,aAAC,IAAI,EAAE,IAAI;aAAK,gBAAgB,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,CAAC;KAAA;AACrD,OAAG,EAAE,SAAS,CAAC,OAAO,CAAC,GAAG;AAC1B,WAAO,EAAE,SAAS,CAAC,OAAO;AAC1B,WAAO,EAAE,MAAM,CAAC,GAAG,CAAC,kBAAkB,CAAC;AACvC,cAAU,EAAE,MAAM,CAAC,GAAG,CAAC,qBAAqB,CAAC;AAC7C,YAAQ,EAAE,MAAM,CAAC,GAAG,CAAC,uBAAuB,CAAC;AAC7C,eAAW,EAAE,MAAM,CAAC,GAAG,CAAC,iBAAiB,CAAC;AAC1C,eAAW,EAAE,MAAM,CAAC,GAAG,CAAC,sBAAsB,CAAC;GAChD,CAAC,CACH,CAAC;;AAEF,MAAI,KAAK,GAAG,KAAK,CAAC;;AAElB,MAAI,SAAS,GAAG,SAAZ,SAAS,GAAS;AACpB,QAAI,CAAC,OAAO,CAAC,SAAS,EAAE,OAAO;AAC/B,WAAO,CAAC,IAAI,CAAC,CAAC,kBAAkB,EAAE,EAAE,aAAa,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC;GAC9D,CAAC;;AAEF,SAAO,CAAC,EAAE,CAAC,SAAS,EAAE,UAAC,GAAG,EAAK;AAC7B,QAAI,GAAG,IAAI,GAAG,CAAC,aAAa,KAAK,GAAG,EAAE,SAAS,EAAE,CAAC;GACnD,CAAC,CAAC;;AAGH,WAAS,EAAE,CAAC;;AAEZ,QAAM,MAAM,CAAC,IAAI,EAAE,CAAC;;AAEpB,OAAK,GAAG,IAAI,CAAC;AACb,WAAS,EAAE,CAAC;CACb",
      "file": "/home/vio/v3metrics/src/optimize/lazy/optmzr_role.js",
      "sourcesContent": [
        "import LazyServer from './lazy_server';\nimport LazyOptimizer from './lazy_optimizer';\nimport { fromRoot } from '../../utils';\n\nexport default async (kbnServer, kibanaHapiServer, config) => {\n  let server = new LazyServer(\n    config.get('optimize.lazyHost'),\n    config.get('optimize.lazyPort'),\n    new LazyOptimizer({\n      log: (tags, data) => kibanaHapiServer.log(tags, data),\n      env: kbnServer.bundles.env,\n      bundles: kbnServer.bundles,\n      profile: config.get('optimize.profile'),\n      sourceMaps: config.get('optimize.sourceMaps'),\n      prebuild: config.get('optimize.lazyPrebuild'),\n      urlBasePath: config.get('server.basePath'),\n      unsafeCache: config.get('optimize.unsafeCache'),\n    })\n  );\n\n  let ready = false;\n\n  let sendReady = () => {\n    if (!process.connected) return;\n    process.send(['WORKER_BROADCAST', { optimizeReady: ready }]);\n  };\n\n  process.on('message', (msg) => {\n    if (msg && msg.optimizeReady === '?') sendReady();\n  });\n\n\n  sendReady();\n\n  await server.init();\n\n  ready = true;\n  sendReady();\n};\n"
      ]
    },
    "mtime": 1467036622805
  },
  "{\"filename\":\"/home/vio/v3metrics/src/optimize/lazy/lazy_server.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "boom",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Boom"
              }
            ]
          },
          {
            "source": "hapi",
            "imported": [
              "Server"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Server",
                "local": "Server"
              }
            ]
          },
          {
            "source": "bluebird",
            "imported": [
              "fromNode"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "fromNode",
                "local": "fromNode"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "async-to-generator",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _boom = require('boom');\n\nvar _boom2 = _interopRequireDefault(_boom);\n\nvar _hapi = require('hapi');\n\nvar _bluebird = require('bluebird');\n\nmodule.exports = (function () {\n  function LazyServer(host, port, optimizer) {\n    _classCallCheck(this, LazyServer);\n\n    this.optimizer = optimizer;\n    this.server = new _hapi.Server();\n    this.server.connection({\n      host: host,\n      port: port\n    });\n  }\n\n  _createClass(LazyServer, [{\n    key: 'init',\n    value: _asyncToGenerator(function* () {\n      var _this = this;\n\n      yield this.optimizer.init();\n      this.optimizer.bindToServer(this.server);\n      yield (0, _bluebird.fromNode)(function (cb) {\n        return _this.server.start(cb);\n      });\n    })\n  }]);\n\n  return LazyServer;\n})();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL29wdGltaXplL2xhenkvbGF6eV9zZXJ2ZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztvQkFDaUIsTUFBTTs7OztvQkFDQSxNQUFNOzt3QkFDSixVQUFVOztBQUduQyxNQUFNLENBQUMsT0FBTztBQUNELFdBRFUsVUFBVSxDQUNuQixJQUFJLEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBRTswQkFEZCxVQUFVOztBQUU3QixRQUFJLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQztBQUMzQixRQUFJLENBQUMsTUFBTSxHQUFHLGtCQUFZLENBQUM7QUFDM0IsUUFBSSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUM7QUFDckIsVUFBSSxFQUFFLElBQUk7QUFDVixVQUFJLEVBQUUsSUFBSTtLQUNYLENBQUMsQ0FBQztHQUNKOztlQVJvQixVQUFVOzs2QkFVckIsYUFBRzs7O0FBQ1gsWUFBTSxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksRUFBRSxDQUFDO0FBQzVCLFVBQUksQ0FBQyxTQUFTLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUN6QyxZQUFNLHdCQUFTLFVBQUEsRUFBRTtlQUFJLE1BQUssTUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUM7T0FBQSxDQUFDLENBQUM7S0FDN0M7OztTQWRvQixVQUFVO0lBZWhDLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvb3B0aW1pemUvbGF6eS9sYXp5X3NlcnZlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxuaW1wb3J0IEJvb20gZnJvbSAnYm9vbSc7XG5pbXBvcnQgeyBTZXJ2ZXIgfSBmcm9tICdoYXBpJztcbmltcG9ydCB7IGZyb21Ob2RlIH0gZnJvbSAnYmx1ZWJpcmQnO1xuXG5cbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgTGF6eVNlcnZlciB7XG4gIGNvbnN0cnVjdG9yKGhvc3QsIHBvcnQsIG9wdGltaXplcikge1xuICAgIHRoaXMub3B0aW1pemVyID0gb3B0aW1pemVyO1xuICAgIHRoaXMuc2VydmVyID0gbmV3IFNlcnZlcigpO1xuICAgIHRoaXMuc2VydmVyLmNvbm5lY3Rpb24oe1xuICAgICAgaG9zdDogaG9zdCxcbiAgICAgIHBvcnQ6IHBvcnRcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIGluaXQoKSB7XG4gICAgYXdhaXQgdGhpcy5vcHRpbWl6ZXIuaW5pdCgpO1xuICAgIHRoaXMub3B0aW1pemVyLmJpbmRUb1NlcnZlcih0aGlzLnNlcnZlcik7XG4gICAgYXdhaXQgZnJvbU5vZGUoY2IgPT4gdGhpcy5zZXJ2ZXIuc3RhcnQoY2IpKTtcbiAgfVxufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/optimize/lazy/lazy_server.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;oBACiB,MAAM;;;;oBACA,MAAM;;wBACJ,UAAU;;AAGnC,MAAM,CAAC,OAAO;AACD,WADU,UAAU,CACnB,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE;0BADd,UAAU;;AAE7B,QAAI,CAAC,SAAS,GAAG,SAAS,CAAC;AAC3B,QAAI,CAAC,MAAM,GAAG,kBAAY,CAAC;AAC3B,QAAI,CAAC,MAAM,CAAC,UAAU,CAAC;AACrB,UAAI,EAAE,IAAI;AACV,UAAI,EAAE,IAAI;KACX,CAAC,CAAC;GACJ;;eARoB,UAAU;;6BAUrB,aAAG;;;AACX,YAAM,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC;AAC5B,UAAI,CAAC,SAAS,CAAC,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AACzC,YAAM,wBAAS,UAAA,EAAE;eAAI,MAAK,MAAM,CAAC,KAAK,CAAC,EAAE,CAAC;OAAA,CAAC,CAAC;KAC7C;;;SAdoB,UAAU;IAehC,CAAC",
      "file": "/home/vio/v3metrics/src/optimize/lazy/lazy_server.js",
      "sourcesContent": [
        "\nimport Boom from 'boom';\nimport { Server } from 'hapi';\nimport { fromNode } from 'bluebird';\n\n\nmodule.exports = class LazyServer {\n  constructor(host, port, optimizer) {\n    this.optimizer = optimizer;\n    this.server = new Server();\n    this.server.connection({\n      host: host,\n      port: port\n    });\n  }\n\n  async init() {\n    await this.optimizer.init();\n    this.optimizer.bindToServer(this.server);\n    await fromNode(cb => this.server.start(cb));\n  }\n};\n"
      ]
    },
    "mtime": 1467036622805
  },
  "{\"filename\":\"/home/vio/v3metrics/src/optimize/lazy/lazy_optimizer.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "boom",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Boom"
              }
            ]
          },
          {
            "source": "../base_optimizer",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "BaseOptimizer"
              }
            ]
          },
          {
            "source": "./weird_control_flow",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "WeirdControlFlow"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "once",
              "pick",
              "size"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "once",
                "local": "once"
              },
              {
                "kind": "named",
                "imported": "pick",
                "local": "pick"
              },
              {
                "kind": "named",
                "imported": "size",
                "local": "size"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "join"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "join",
                "local": "join"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "get",
        "inherits",
        "create-class",
        "class-call-check",
        "async-to-generator",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _boom = require('boom');\n\nvar _boom2 = _interopRequireDefault(_boom);\n\nvar _base_optimizer = require('../base_optimizer');\n\nvar _base_optimizer2 = _interopRequireDefault(_base_optimizer);\n\nvar _weird_control_flow = require('./weird_control_flow');\n\nvar _weird_control_flow2 = _interopRequireDefault(_weird_control_flow);\n\nvar _lodash = require('lodash');\n\nvar _path = require('path');\n\nmodule.exports = (function (_BaseOptimizer) {\n  _inherits(LazyOptimizer, _BaseOptimizer);\n\n  function LazyOptimizer(opts) {\n    var _this = this;\n\n    _classCallCheck(this, LazyOptimizer);\n\n    _get(Object.getPrototypeOf(LazyOptimizer.prototype), 'constructor', this).call(this, opts);\n    this.log = opts.log || function () {\n      return null;\n    };\n    this.prebuild = opts.prebuild || false;\n\n    this.timer = {\n      ms: null,\n      start: function start() {\n        return _this.timer.ms = Date.now();\n      },\n      end: function end() {\n        return _this.timer.ms = ((Date.now() - _this.timer.ms) / 1000).toFixed(2);\n      }\n    };\n\n    this.build = new _weird_control_flow2['default']();\n  }\n\n  _createClass(LazyOptimizer, [{\n    key: 'init',\n    value: _asyncToGenerator(function* () {\n      var _this2 = this;\n\n      this.initializing = true;\n\n      yield this.bundles.writeEntryFiles();\n      yield this.initCompiler();\n\n      this.compiler.plugin('watch-run', function (w, webpackCb) {\n        _this2.build.work((0, _lodash.once)(function () {\n          _this2.timer.start();\n          _this2.logRunStart();\n          webpackCb();\n        }));\n      });\n\n      this.compiler.plugin('done', function (stats) {\n        if (!stats.hasErrors() && !stats.hasWarnings()) {\n          _this2.logRunSuccess();\n          _this2.build.success();\n          return;\n        }\n\n        var err = _this2.failedStatsToError(stats);\n        _this2.logRunFailure(err);\n        _this2.build.failure(err);\n        _this2.watching.invalidate();\n      });\n\n      this.watching = this.compiler.watch({ aggregateTimeout: 200 }, function (err) {\n        if (err) {\n          _this2.log('fatal', err);\n          process.exit(1);\n        }\n      });\n\n      var buildPromise = this.build.get();\n      if (this.prebuild) yield buildPromise;\n\n      this.initializing = false;\n      this.log(['info', 'optimize'], {\n        tmpl: 'Lazy optimization of ' + this.bundles.desc() + ' ready',\n        bundles: this.bundles.getIds()\n      });\n    })\n  }, {\n    key: 'getPath',\n    value: _asyncToGenerator(function* (relativePath) {\n      yield this.build.get();\n      return (0, _path.join)(this.compiler.outputPath, relativePath);\n    })\n  }, {\n    key: 'bindToServer',\n    value: function bindToServer(server) {\n      var _this3 = this;\n\n      server.route({\n        path: '/bundles/{asset*}',\n        method: 'GET',\n        handler: _asyncToGenerator(function* (request, reply) {\n          try {\n            var path = yield _this3.getPath(request.params.asset);\n            return reply.file(path);\n          } catch (error) {\n            console.log(error.stack);\n            return reply(error);\n          }\n        })\n      });\n    }\n  }, {\n    key: 'logRunStart',\n    value: function logRunStart() {\n      this.log(['info', 'optimize'], {\n        tmpl: 'Lazy optimization started',\n        bundles: this.bundles.getIds()\n      });\n    }\n  }, {\n    key: 'logRunSuccess',\n    value: function logRunSuccess() {\n      this.log(['info', 'optimize'], {\n        tmpl: 'Lazy optimization <%= status %> in <%= seconds %> seconds',\n        bundles: this.bundles.getIds(),\n        status: 'success',\n        seconds: this.timer.end()\n      });\n    }\n  }, {\n    key: 'logRunFailure',\n    value: function logRunFailure(err) {\n      // errors during initialization to the server, unlike the rest of the\n      // errors produced here. Lets not muddy the console with extra errors\n      if (this.initializing) return;\n\n      this.log(['fatal', 'optimize'], {\n        tmpl: 'Lazy optimization <%= status %> in <%= seconds %> seconds<%= err %>',\n        bundles: this.bundles.getIds(),\n        status: 'failed',\n        seconds: this.timer.end(),\n        err: err\n      });\n    }\n  }]);\n\n  return LazyOptimizer;\n})(_base_optimizer2['default']);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL29wdGltaXplL2xhenkvbGF6eV9vcHRpbWl6ZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7b0JBQWlCLE1BQU07Ozs7OEJBRUcsbUJBQW1COzs7O2tDQUNoQixzQkFBc0I7Ozs7c0JBQ2xCLFFBQVE7O29CQUNwQixNQUFNOztBQUUzQixNQUFNLENBQUMsT0FBTztZQUFTLGFBQWE7O0FBQ3ZCLFdBRFUsYUFBYSxDQUN0QixJQUFJLEVBQUU7OzswQkFERyxhQUFhOztBQUVoQywrQkFGbUIsYUFBYSw2Q0FFMUIsSUFBSSxFQUFFO0FBQ1osUUFBSSxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsR0FBRyxJQUFLO2FBQU0sSUFBSTtLQUFBLEFBQUMsQ0FBQztBQUNwQyxRQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxRQUFRLElBQUksS0FBSyxDQUFDOztBQUV2QyxRQUFJLENBQUMsS0FBSyxHQUFHO0FBQ1gsUUFBRSxFQUFFLElBQUk7QUFDUixXQUFLLEVBQUU7ZUFBTSxNQUFLLEtBQUssQ0FBQyxFQUFFLEdBQUcsSUFBSSxDQUFDLEdBQUcsRUFBRTtPQUFBO0FBQ3ZDLFNBQUcsRUFBRTtlQUFNLE1BQUssS0FBSyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxHQUFHLE1BQUssS0FBSyxDQUFDLEVBQUUsQ0FBQSxHQUFJLElBQUksQ0FBQSxDQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUM7T0FBQTtLQUM1RSxDQUFDOztBQUVGLFFBQUksQ0FBQyxLQUFLLEdBQUcscUNBQXNCLENBQUM7R0FDckM7O2VBYm9CLGFBQWE7OzZCQWV4QixhQUFHOzs7QUFDWCxVQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQzs7QUFFekIsWUFBTSxJQUFJLENBQUMsT0FBTyxDQUFDLGVBQWUsRUFBRSxDQUFDO0FBQ3JDLFlBQU0sSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFD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QUMsRUFBRTtBQUM3QixZQUFJLDZCQUE2QjtBQUNqQyxlQUFPLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUU7T0FDL0IsQ0FBQyxDQUFDO0tBQ0o7OztXQUVZLHlCQUFHO0FBQ2QsVUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sRUFBRSxVQUFVLENBQUMsRUFBRTtBQUM3QixZQUFJLEVBQUUsMkRBQTJEO0FBQ2pFLGVBQU8sRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRTtBQUM5QixjQUFNLEVBQUUsU0FBUztBQUNqQixlQUFPLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLEVBQUU7T0FDMUIsQ0FBQyxDQUFDO0tBQ0o7OztXQUVZLHVCQUFDLEdBQUcsRUFBRTs7O0FBR2pCLFVBQUksSUFBSSxDQUFDLFlBQVksRUFBRSxPQUFPOztBQUU5QixVQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxFQUFFLFVBQVUsQ0FBQyxFQUFFO0FBQzlCLFlBQUksRUFBRSxxRUFBcUU7QUFDM0UsZUFBTyxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFO0FBQzlCLGNBQU0sRUFBRSxRQUFRO0FBQ2hCLGVBQU8sRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFBRTtBQUN6QixXQUFHLEVBQUUsR0FBRztPQUNULENBQUMsQ0FBQztLQUNKOzs7U0E1R29CLGFBQWE7K0JBNkduQyxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL29wdGltaXplL2xhenkvbGF6eV9vcHRpbWl6ZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQm9vbSBmcm9tICdib29tJztcblxuaW1wb3J0IEJhc2VPcHRpbWl6ZXIgZnJvbSAnLi4vYmFzZV9vcHRpbWl6ZXInO1xuaW1wb3J0IFdlaXJkQ29udHJvbEZsb3cgZnJvbSAnLi93ZWlyZF9jb250cm9sX2Zsb3cnO1xuaW1wb3J0IHsgb25jZSwgcGljaywgc2l6ZSB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgeyBqb2luIH0gZnJvbSAncGF0aCc7XG5cbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgTGF6eU9wdGltaXplciBleHRlbmRzIEJhc2VPcHRpbWl6ZXIge1xuICBjb25zdHJ1Y3RvcihvcHRzKSB7XG4gICAgc3VwZXIob3B0cyk7XG4gICAgdGhpcy5sb2cgPSBvcHRzLmxvZyB8fCAoKCkgPT4gbnVsbCk7XG4gICAgdGhpcy5wcmVidWlsZCA9IG9wdHMucHJlYnVpbGQgfHwgZmFsc2U7XG5cbiAgICB0aGlzLnRpbWVyID0ge1xuICAgICAgbXM6IG51bGwsXG4gICAgICBzdGFydDogKCkgPT4gdGhpcy50aW1lci5tcyA9IERhdGUubm93KCksXG4gICAgICBlbmQ6ICgpID0+IHRoaXMudGltZXIubXMgPSAoKERhdGUubm93KCkgLSB0aGlzLnRpbWVyLm1zKSAvIDEwMDApLnRvRml4ZWQoMilcbiAgICB9O1xuXG4gICAgdGhpcy5idWlsZCA9IG5ldyBXZWlyZENvbnRyb2xGbG93KCk7XG4gIH1cblxuICBhc3luYyBpbml0KCkge1xuICAgIHRoaXMuaW5pdGlhbGl6aW5nID0gdHJ1ZTtcblxuICAgIGF3YWl0IHRoaXMuYnVuZGxlcy53cml0ZUVudHJ5RmlsZXMoKTtcbiAgICBhd2FpdCB0aGlzLmluaXRDb21waWxlcigpO1xuXG4gICAgdGhpcy5jb21waWxlci5wbHVnaW4oJ3dhdGNoLXJ1bicsICh3LCB3ZWJwYWNrQ2IpID0+IHtcbiAgICAgIHRoaXMuYnVpbGQud29yayhvbmNlKCgpID0+IHtcbiAgICAgICAgdGhpcy50aW1lci5zdGFydCgpO1xuICAgICAgICB0aGlzLmxvZ1J1blN0YXJ0KCk7XG4gICAgICAgIHdlYnBhY2tDYigpO1xuICAgICAgfSkpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5jb21waWxlci5wbHVnaW4oJ2RvbmUnLCBzdGF0cyA9PiB7XG4gICAgICBpZiAoIXN0YXRzLmhhc0Vycm9ycygpICYmICFzdGF0cy5oYXNXYXJuaW5ncygpKSB7XG4gICAgICAgIHRoaXMubG9nUnVuU3VjY2VzcygpO1xuICAgICAgICB0aGlzLmJ1aWxkLnN1Y2Nlc3MoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBsZXQgZXJyID0gdGhpcy5mYWlsZWRTdGF0c1RvRXJyb3Ioc3RhdHMpO1xuICAgICAgdGhpcy5sb2dSdW5GYWlsdXJlKGVycik7XG4gICAgICB0aGlzLmJ1aWxkLmZhaWx1cmUoZXJyKTtcbiAgICAgIHRoaXMud2F0Y2hpbmcuaW52YWxpZGF0ZSgpO1xuICAgIH0pO1xuXG4gICAgdGhpcy53YXRjaGluZyA9IHRoaXMuY29tcGlsZXIud2F0Y2goeyBhZ2dyZWdhdGVUaW1lb3V0OiAyMDAgfSwgZXJyID0+IHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgdGhpcy5sb2coJ2ZhdGFsJywgZXJyKTtcbiAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgbGV0IGJ1aWxkUHJvbWlzZSA9IHRoaXMuYnVpbGQuZ2V0KCk7XG4gICAgaWYgKHRoaXMucHJlYnVpbGQpIGF3YWl0IGJ1aWxkUHJvbWlzZTtcblxuICAgIHRoaXMuaW5pdGlhbGl6aW5nID0gZmFsc2U7XG4gICAgdGhpcy5sb2coWydpbmZvJywgJ29wdGltaXplJ10sIHtcbiAgICAgIHRtcGw6IGBMYXp5IG9wdGltaXphdGlvbiBvZiAke3RoaXMuYnVuZGxlcy5kZXNjKCl9IHJlYWR5YCxcbiAgICAgIGJ1bmRsZXM6IHRoaXMuYnVuZGxlcy5nZXRJZHMoKVxuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgZ2V0UGF0aChyZWxhdGl2ZVBhdGgpIHtcbiAgICBhd2FpdCB0aGlzLmJ1aWxkLmdldCgpO1xuICAgIHJldHVybiBqb2luKHRoaXMuY29tcGlsZXIub3V0cHV0UGF0aCwgcmVsYXRpdmVQYXRoKTtcbiAgfVxuXG4gIGJpbmRUb1NlcnZlcihzZXJ2ZXIpIHtcbiAgICBzZXJ2ZXIucm91dGUoe1xuICAgICAgcGF0aDogJy9idW5kbGVzL3thc3NldCp9JyxcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICBoYW5kbGVyOiBhc3luYyAocmVxdWVzdCwgcmVwbHkpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBsZXQgcGF0aCA9IGF3YWl0IHRoaXMuZ2V0UGF0aChyZXF1ZXN0LnBhcmFtcy5hc3NldCk7XG4gICAgICAgICAgcmV0dXJuIHJlcGx5LmZpbGUocGF0aCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coZXJyb3Iuc3RhY2spO1xuICAgICAgICAgIHJldHVybiByZXBseShlcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGxvZ1J1blN0YXJ0KCkge1xuICAgIHRoaXMubG9nKFsnaW5mbycsICdvcHRpbWl6ZSddLCB7XG4gICAgICB0bXBsOiBgTGF6eSBvcHRpbWl6YXRpb24gc3RhcnRlZGAsXG4gICAgICBidW5kbGVzOiB0aGlzLmJ1bmRsZXMuZ2V0SWRzKClcbiAgICB9KTtcbiAgfVxuXG4gIGxvZ1J1blN1Y2Nlc3MoKSB7XG4gICAgdGhpcy5sb2coWydpbmZvJywgJ29wdGltaXplJ10sIHtcbiAgICAgIHRtcGw6ICdMYXp5IG9wdGltaXphdGlvbiA8JT0gc3RhdHVzICU+IGluIDwlPSBzZWNvbmRzICU+IHNlY29uZHMnLFxuICAgICAgYnVuZGxlczogdGhpcy5idW5kbGVzLmdldElkcygpLFxuICAgICAgc3RhdHVzOiAnc3VjY2VzcycsXG4gICAgICBzZWNvbmRzOiB0aGlzLnRpbWVyLmVuZCgpXG4gICAgfSk7XG4gIH1cblxuICBsb2dSdW5GYWlsdXJlKGVycikge1xuICAgIC8vIGVycm9ycyBkdXJpbmcgaW5pdGlhbGl6YXRpb24gdG8gdGhlIHNlcnZlciwgdW5saWtlIHRoZSByZXN0IG9mIHRoZVxuICAgIC8vIGVycm9ycyBwcm9kdWNlZCBoZXJlLiBMZXRzIG5vdCBtdWRkeSB0aGUgY29uc29sZSB3aXRoIGV4dHJhIGVycm9yc1xuICAgIGlmICh0aGlzLmluaXRpYWxpemluZykgcmV0dXJuO1xuXG4gICAgdGhpcy5sb2coWydmYXRhbCcsICdvcHRpbWl6ZSddLCB7XG4gICAgICB0bXBsOiAnTGF6eSBvcHRpbWl6YXRpb24gPCU9IHN0YXR1cyAlPiBpbiA8JT0gc2Vjb25kcyAlPiBzZWNvbmRzPCU9IGVyciAlPicsXG4gICAgICBidW5kbGVzOiB0aGlzLmJ1bmRsZXMuZ2V0SWRzKCksXG4gICAgICBzdGF0dXM6ICdmYWlsZWQnLFxuICAgICAgc2Vjb25kczogdGhpcy50aW1lci5lbmQoKSxcbiAgICAgIGVycjogZXJyXG4gICAgfSk7XG4gIH1cbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/optimize/lazy/lazy_optimizer.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/src/optimize/lazy/lazy_optimizer.js",
      "sourcesContent": [
        "import Boom from 'boom';\n\nimport BaseOptimizer from '../base_optimizer';\nimport WeirdControlFlow from './weird_control_flow';\nimport { once, pick, size } from 'lodash';\nimport { join } from 'path';\n\nmodule.exports = class LazyOptimizer extends BaseOptimizer {\n  constructor(opts) {\n    super(opts);\n    this.log = opts.log || (() => null);\n    this.prebuild = opts.prebuild || false;\n\n    this.timer = {\n      ms: null,\n      start: () => this.timer.ms = Date.now(),\n      end: () => this.timer.ms = ((Date.now() - this.timer.ms) / 1000).toFixed(2)\n    };\n\n    this.build = new WeirdControlFlow();\n  }\n\n  async init() {\n    this.initializing = true;\n\n    await this.bundles.writeEntryFiles();\n    await this.initCompiler();\n\n    this.compiler.plugin('watch-run', (w, webpackCb) => {\n      this.build.work(once(() => {\n        this.timer.start();\n        this.logRunStart();\n        webpackCb();\n      }));\n    });\n\n    this.compiler.plugin('done', stats => {\n      if (!stats.hasErrors() && !stats.hasWarnings()) {\n        this.logRunSuccess();\n        this.build.success();\n        return;\n      }\n\n      let err = this.failedStatsToError(stats);\n      this.logRunFailure(err);\n      this.build.failure(err);\n      this.watching.invalidate();\n    });\n\n    this.watching = this.compiler.watch({ aggregateTimeout: 200 }, err => {\n      if (err) {\n        this.log('fatal', err);\n        process.exit(1);\n      }\n    });\n\n    let buildPromise = this.build.get();\n    if (this.prebuild) await buildPromise;\n\n    this.initializing = false;\n    this.log(['info', 'optimize'], {\n      tmpl: `Lazy optimization of ${this.bundles.desc()} ready`,\n      bundles: this.bundles.getIds()\n    });\n  }\n\n  async getPath(relativePath) {\n    await this.build.get();\n    return join(this.compiler.outputPath, relativePath);\n  }\n\n  bindToServer(server) {\n    server.route({\n      path: '/bundles/{asset*}',\n      method: 'GET',\n      handler: async (request, reply) => {\n        try {\n          let path = await this.getPath(request.params.asset);\n          return reply.file(path);\n        } catch (error) {\n          console.log(error.stack);\n          return reply(error);\n        }\n      }\n    });\n  }\n\n  logRunStart() {\n    this.log(['info', 'optimize'], {\n      tmpl: `Lazy optimization started`,\n      bundles: this.bundles.getIds()\n    });\n  }\n\n  logRunSuccess() {\n    this.log(['info', 'optimize'], {\n      tmpl: 'Lazy optimization <%= status %> in <%= seconds %> seconds',\n      bundles: this.bundles.getIds(),\n      status: 'success',\n      seconds: this.timer.end()\n    });\n  }\n\n  logRunFailure(err) {\n    // errors during initialization to the server, unlike the rest of the\n    // errors produced here. Lets not muddy the console with extra errors\n    if (this.initializing) return;\n\n    this.log(['fatal', 'optimize'], {\n      tmpl: 'Lazy optimization <%= status %> in <%= seconds %> seconds<%= err %>',\n      bundles: this.bundles.getIds(),\n      status: 'failed',\n      seconds: this.timer.end(),\n      err: err\n    });\n  }\n};\n"
      ]
    },
    "mtime": 1467036622805
  },
  "{\"filename\":\"/home/vio/v3metrics/src/optimize/lazy/weird_control_flow.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "bluebird",
            "imported": [
              "fromNode"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "fromNode",
                "local": "fromNode"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _bluebird = require('bluebird');\n\nmodule.exports = (function () {\n  function WeirdControlFlow(work) {\n    _classCallCheck(this, WeirdControlFlow);\n\n    this.handlers = [];\n  }\n\n  _createClass(WeirdControlFlow, [{\n    key: 'get',\n    value: function get() {\n      var _this = this;\n\n      return (0, _bluebird.fromNode)(function (cb) {\n        if (_this.ready) return cb();\n        _this.handlers.push(cb);\n        _this.start();\n      });\n    }\n  }, {\n    key: 'work',\n    value: function work(_work) {\n      this._work = _work;\n      this.stop();\n\n      if (this.handlers.length) {\n        this.start();\n      }\n    }\n  }, {\n    key: 'start',\n    value: function start() {\n      if (this.running) return;\n      this.stop();\n      if (this._work) {\n        this.running = true;\n        this._work();\n      }\n    }\n  }, {\n    key: 'stop',\n    value: function stop() {\n      this.ready = false;\n      this.error = false;\n      this.running = false;\n    }\n  }, {\n    key: 'success',\n    value: function success() {\n      this.stop();\n      this.ready = true;\n\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      this._flush(args);\n    }\n  }, {\n    key: 'failure',\n    value: function failure(err) {\n      this.stop();\n      this.error = err;\n      this._flush([err]);\n    }\n  }, {\n    key: '_flush',\n    value: function _flush(args) {\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.handlers.splice(0)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var fn = _step.value;\n\n          fn.apply(null, args);\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator['return']) {\n            _iterator['return']();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    }\n  }]);\n\n  return WeirdControlFlow;\n})();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL29wdGltaXplL2xhenkvd2VpcmRfY29udHJvbF9mbG93LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozt3QkFBeUIsVUFBVTs7QUFHbkMsTUFBTSxDQUFDLE9BQU87QUFDRCxXQURVLGdCQUFnQixDQUN6QixJQUFJLEVBQUU7MEJBREcsZ0JBQWdCOztBQUVuQyxRQUFJLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQztHQUNwQjs7ZUFIb0IsZ0JBQWdCOztXQUtsQyxlQUFHOzs7QUFDSixhQUFPLHdCQUFTLFVBQUEsRUFBRSxFQUFJO0FBQ3BCLFlBQUksTUFBSyxLQUFLLEVBQUUsT0FBTyxFQUFFLEVBQUUsQ0FBQztBQUM1QixjQUFLLFFBQVEsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDdkIsY0FBSyxLQUFLLEVBQUUsQ0FBQztPQUNkLENBQUMsQ0FBQztLQUNKOzs7V0FFRyxjQUFDLEtBQUksRUFBRTtBQUNULFVBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSSxDQUFDO0FBQ2xCLFVBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQzs7QUFFWixVQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxFQUFFO0FBQ3hCLFlBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztPQUNkO0tBQ0Y7OztXQUVJLGlCQUFHO0FBQ04sVUFBSSxJQUFJLENBQUMsT0FBTyxFQUFFLE9BQU87QUFDekIsVUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ1osVUFBSSxJQUFJLENBQUMsS0FBSyxFQUFFO0FBQ2QsWUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUM7QUFDcEIsWUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO09BQ2Q7S0FDRjs7O1dBRUcsZ0JBQUc7QUFDTCxVQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztBQUNuQixVQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztBQUNuQixVQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQztLQUN0Qjs7O1dBRU0sbUJBQVU7QUFDZixVQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixVQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQzs7d0NBRlQsSUFBSTtBQUFKLFlBQUk7OztBQUdiLFVBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7S0FDbkI7OztXQUVNLGlCQUFDLEdBQUcsRUFBRTtBQUNYLFVBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFVBQUksQ0FBQyxLQUFLLEdBQUcsR0FBRyxDQUFDO0FBQ2pCLFVBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0tBQ3BCOzs7V0FFSyxnQkFBQyxJQUFJLEVBQUU7Ozs7OztBQUNYLDZCQUFlLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyw4SEFBRTtjQUEvQixFQUFFOztBQUNULFlBQUUsQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO1NBQ3RCOzs7Ozs7Ozs7Ozs7Ozs7S0FDRjs7O1NBckRvQixnQkFBZ0I7SUFzRHRDLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvb3B0aW1pemUvbGF6eS93ZWlyZF9jb250cm9sX2Zsb3cuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBmcm9tTm9kZSB9IGZyb20gJ2JsdWViaXJkJztcblxuXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIFdlaXJkQ29udHJvbEZsb3cge1xuICBjb25zdHJ1Y3Rvcih3b3JrKSB7XG4gICAgdGhpcy5oYW5kbGVycyA9IFtdO1xuICB9XG5cbiAgZ2V0KCkge1xuICAgIHJldHVybiBmcm9tTm9kZShjYiA9PiB7XG4gICAgICBpZiAodGhpcy5yZWFkeSkgcmV0dXJuIGNiKCk7XG4gICAgICB0aGlzLmhhbmRsZXJzLnB1c2goY2IpO1xuICAgICAgdGhpcy5zdGFydCgpO1xuICAgIH0pO1xuICB9XG5cbiAgd29yayh3b3JrKSB7XG4gICAgdGhpcy5fd29yayA9IHdvcms7XG4gICAgdGhpcy5zdG9wKCk7XG5cbiAgICBpZiAodGhpcy5oYW5kbGVycy5sZW5ndGgpIHtcbiAgICAgIHRoaXMuc3RhcnQoKTtcbiAgICB9XG4gIH1cblxuICBzdGFydCgpIHtcbiAgICBpZiAodGhpcy5ydW5uaW5nKSByZXR1cm47XG4gICAgdGhpcy5zdG9wKCk7XG4gICAgaWYgKHRoaXMuX3dvcmspIHtcbiAgICAgIHRoaXMucnVubmluZyA9IHRydWU7XG4gICAgICB0aGlzLl93b3JrKCk7XG4gICAgfVxuICB9XG5cbiAgc3RvcCgpIHtcbiAgICB0aGlzLnJlYWR5ID0gZmFsc2U7XG4gICAgdGhpcy5lcnJvciA9IGZhbHNlO1xuICAgIHRoaXMucnVubmluZyA9IGZhbHNlO1xuICB9XG5cbiAgc3VjY2VzcyguLi5hcmdzKSB7XG4gICAgdGhpcy5zdG9wKCk7XG4gICAgdGhpcy5yZWFkeSA9IHRydWU7XG4gICAgdGhpcy5fZmx1c2goYXJncyk7XG4gIH1cblxuICBmYWlsdXJlKGVycikge1xuICAgIHRoaXMuc3RvcCgpO1xuICAgIHRoaXMuZXJyb3IgPSBlcnI7XG4gICAgdGhpcy5fZmx1c2goW2Vycl0pO1xuICB9XG5cbiAgX2ZsdXNoKGFyZ3MpIHtcbiAgICBmb3IgKGxldCBmbiBvZiB0aGlzLmhhbmRsZXJzLnNwbGljZSgwKSkge1xuICAgICAgZm4uYXBwbHkobnVsbCwgYXJncyk7XG4gICAgfVxuICB9XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/optimize/lazy/weird_control_flow.js"
      ],
      "names": [],
      "mappings": ";;;;;;wBAAyB,UAAU;;AAGnC,MAAM,CAAC,OAAO;AACD,WADU,gBAAgB,CACzB,IAAI,EAAE;0BADG,gBAAgB;;AAEnC,QAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;GACpB;;eAHoB,gBAAgB;;WAKlC,eAAG;;;AACJ,aAAO,wBAAS,UAAA,EAAE,EAAI;AACpB,YAAI,MAAK,KAAK,EAAE,OAAO,EAAE,EAAE,CAAC;AAC5B,cAAK,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;AACvB,cAAK,KAAK,EAAE,CAAC;OACd,CAAC,CAAC;KACJ;;;WAEG,cAAC,KAAI,EAAE;AACT,UAAI,CAAC,KAAK,GAAG,KAAI,CAAC;AAClB,UAAI,CAAC,IAAI,EAAE,CAAC;;AAEZ,UAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE;AACxB,YAAI,CAAC,KAAK,EAAE,CAAC;OACd;KACF;;;WAEI,iBAAG;AACN,UAAI,IAAI,CAAC,OAAO,EAAE,OAAO;AACzB,UAAI,CAAC,IAAI,EAAE,CAAC;AACZ,UAAI,IAAI,CAAC,KAAK,EAAE;AACd,YAAI,CAAC,OAAO,GAAG,IAAI,CAAC;AACpB,YAAI,CAAC,KAAK,EAAE,CAAC;OACd;KACF;;;WAEG,gBAAG;AACL,UAAI,CAAC,KAAK,GAAG,KAAK,CAAC;AACnB,UAAI,CAAC,KAAK,GAAG,KAAK,CAAC;AACnB,UAAI,CAAC,OAAO,GAAG,KAAK,CAAC;KACtB;;;WAEM,mBAAU;AACf,UAAI,CAAC,IAAI,EAAE,CAAC;AACZ,UAAI,CAAC,KAAK,GAAG,IAAI,CAAC;;wCAFT,IAAI;AAAJ,YAAI;;;AAGb,UAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;KACnB;;;WAEM,iBAAC,GAAG,EAAE;AACX,UAAI,CAAC,IAAI,EAAE,CAAC;AACZ,UAAI,CAAC,KAAK,GAAG,GAAG,CAAC;AACjB,UAAI,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;KACpB;;;WAEK,gBAAC,IAAI,EAAE;;;;;;AACX,6BAAe,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,8HAAE;cAA/B,EAAE;;AACT,YAAE,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;SACtB;;;;;;;;;;;;;;;KACF;;;SArDoB,gBAAgB;IAsDtC,CAAC",
      "file": "/home/vio/v3metrics/src/optimize/lazy/weird_control_flow.js",
      "sourcesContent": [
        "import { fromNode } from 'bluebird';\n\n\nmodule.exports = class WeirdControlFlow {\n  constructor(work) {\n    this.handlers = [];\n  }\n\n  get() {\n    return fromNode(cb => {\n      if (this.ready) return cb();\n      this.handlers.push(cb);\n      this.start();\n    });\n  }\n\n  work(work) {\n    this._work = work;\n    this.stop();\n\n    if (this.handlers.length) {\n      this.start();\n    }\n  }\n\n  start() {\n    if (this.running) return;\n    this.stop();\n    if (this._work) {\n      this.running = true;\n      this._work();\n    }\n  }\n\n  stop() {\n    this.ready = false;\n    this.error = false;\n    this.running = false;\n  }\n\n  success(...args) {\n    this.stop();\n    this.ready = true;\n    this._flush(args);\n  }\n\n  failure(err) {\n    this.stop();\n    this.error = err;\n    this._flush([err]);\n  }\n\n  _flush(args) {\n    for (let fn of this.handlers.splice(0)) {\n      fn.apply(null, args);\n    }\n  }\n};\n"
      ]
    },
    "mtime": 1467036622805
  },
  "{\"filename\":\"/home/vio/v3metrics/src/optimize/lazy/proxy_role.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "bluebird",
            "imported": [
              "fromNode"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "fromNode",
                "local": "fromNode"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "get",
              "once"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "get",
                "local": "get"
              },
              {
                "kind": "named",
                "imported": "once",
                "local": "once"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _bluebird = require('bluebird');\n\nvar _lodash = require('lodash');\n\nmodule.exports = function (kbnServer, server, config) {\n\n  server.route({\n    path: '/bundles/{path*}',\n    method: 'GET',\n    handler: {\n      proxy: {\n        host: config.get('optimize.lazyHost'),\n        port: config.get('optimize.lazyPort'),\n        passThrough: true,\n        xforward: true\n      }\n    },\n    config: { auth: false }\n  });\n\n  return (0, _bluebird.fromNode)(function (cb) {\n    var timeout = setTimeout(function () {\n      cb(new Error('Server timedout waiting for the optimizer to become ready'));\n    }, config.get('optimize.lazyProxyTimeout'));\n\n    var waiting = (0, _lodash.once)(function () {\n      server.log(['info', 'optimize'], 'Waiting for optimizer completion');\n    });\n\n    if (!process.connected) return;\n\n    process.send(['WORKER_BROADCAST', { optimizeReady: '?' }]);\n    process.on('message', function (msg) {\n      switch ((0, _lodash.get)(msg, 'optimizeReady')) {\n        case true:\n          clearTimeout(timeout);\n          cb();\n          break;\n        case false:\n          waiting();\n          break;\n      }\n    });\n  });\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL29wdGltaXplL2xhenkvcHJveHlfcm9sZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzt3QkFBeUIsVUFBVTs7c0JBQ1QsUUFBUTs7QUFFbEMsTUFBTSxDQUFDLE9BQU8sR0FBRyxVQUFDLFNBQVMsRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFLOztBQUU5QyxRQUFNLENBQUMsS0FBSyxDQUFDO0FBQ1gsUUFBSSxFQUFFLGtCQUFrQjtBQUN4QixVQUFNLEVBQUUsS0FBSztBQUNiLFdBQU8sRUFBRTtBQUNQLFdBQUssRUFBRTtBQUNMLFlBQUksRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLG1CQUFtQixDQUFDO0FBQ3JDLFlBQUksRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLG1CQUFtQixDQUFDO0FBQ3JDLG1CQUFXLEVBQUUsSUFBSTtBQUNqQixnQkFBUSxFQUFFLElBQUk7T0FDZjtLQUNGO0FBQ0QsVUFBTSxFQUFFLEVBQUMsSUFBSSxFQUFFLEtBQUssRUFBQztHQUN0QixDQUFDLENBQUM7O0FBRUgsU0FBTyx3QkFBUyxVQUFBLEVBQUUsRUFBSTtBQUNwQixRQUFJLE9BQU8sR0FBRyxVQUFVLENBQUMsWUFBTTtBQUM3QixRQUFFLENBQUMsSUFBSSxLQUFLLENBQUMsMkRBQTJELENBQUMsQ0FBQyxDQUFDO0tBQzVFLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQywyQkFBMkIsQ0FBQyxDQUFDLENBQUM7O0FBRTVDLFFBQUksT0FBTyxHQUFHLGtCQUFLLFlBQU07QUFDdkIsWUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sRUFBRSxVQUFVLENBQUMsRUFBRSxrQ0FBa0MsQ0FBQyxDQUFDO0tBQ3RFLENBQUMsQ0FBQzs7QUFFSCxRQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSxPQUFPOztBQUUvQixXQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsa0JBQWtCLEVBQUUsRUFBRSxhQUFhLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQzNELFdBQU8sQ0FBQyxFQUFFLENBQUMsU0FBUyxFQUFFLFVBQUMsR0FBRyxFQUFLO0FBQzdCLGNBQVEsaUJBQUksR0FBRyxFQUFFLGVBQWUsQ0FBQztBQUMvQixhQUFLLElBQUk7QUFDUCxzQkFBWSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQ3RCLFlBQUUsRUFBRSxDQUFDO0FBQ0wsZ0JBQU07QUFBQSxBQUNSLGFBQUssS0FBSztBQUNSLGlCQUFPLEVBQUUsQ0FBQztBQUNWLGdCQUFNO0FBQUEsT0FDVDtLQUNGLENBQUMsQ0FBQztHQUNKLENBQUMsQ0FBQztDQUVKLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvb3B0aW1pemUvbGF6eS9wcm94eV9yb2xlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZnJvbU5vZGUgfSBmcm9tICdibHVlYmlyZCc7XG5pbXBvcnQgeyBnZXQsIG9uY2UgfSBmcm9tICdsb2Rhc2gnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IChrYm5TZXJ2ZXIsIHNlcnZlciwgY29uZmlnKSA9PiB7XG5cbiAgc2VydmVyLnJvdXRlKHtcbiAgICBwYXRoOiAnL2J1bmRsZXMve3BhdGgqfScsXG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICBoYW5kbGVyOiB7XG4gICAgICBwcm94eToge1xuICAgICAgICBob3N0OiBjb25maWcuZ2V0KCdvcHRpbWl6ZS5sYXp5SG9zdCcpLFxuICAgICAgICBwb3J0OiBjb25maWcuZ2V0KCdvcHRpbWl6ZS5sYXp5UG9ydCcpLFxuICAgICAgICBwYXNzVGhyb3VnaDogdHJ1ZSxcbiAgICAgICAgeGZvcndhcmQ6IHRydWVcbiAgICAgIH1cbiAgICB9LFxuICAgIGNvbmZpZzoge2F1dGg6IGZhbHNlfVxuICB9KTtcblxuICByZXR1cm4gZnJvbU5vZGUoY2IgPT4ge1xuICAgIGxldCB0aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBjYihuZXcgRXJyb3IoJ1NlcnZlciB0aW1lZG91dCB3YWl0aW5nIGZvciB0aGUgb3B0aW1pemVyIHRvIGJlY29tZSByZWFkeScpKTtcbiAgICB9LCBjb25maWcuZ2V0KCdvcHRpbWl6ZS5sYXp5UHJveHlUaW1lb3V0JykpO1xuXG4gICAgbGV0IHdhaXRpbmcgPSBvbmNlKCgpID0+IHtcbiAgICAgIHNlcnZlci5sb2coWydpbmZvJywgJ29wdGltaXplJ10sICdXYWl0aW5nIGZvciBvcHRpbWl6ZXIgY29tcGxldGlvbicpO1xuICAgIH0pO1xuXG4gICAgaWYgKCFwcm9jZXNzLmNvbm5lY3RlZCkgcmV0dXJuO1xuXG4gICAgcHJvY2Vzcy5zZW5kKFsnV09SS0VSX0JST0FEQ0FTVCcsIHsgb3B0aW1pemVSZWFkeTogJz8nIH1dKTtcbiAgICBwcm9jZXNzLm9uKCdtZXNzYWdlJywgKG1zZykgPT4ge1xuICAgICAgc3dpdGNoIChnZXQobXNnLCAnb3B0aW1pemVSZWFkeScpKSB7XG4gICAgICAgIGNhc2UgdHJ1ZTpcbiAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgICAgY2IoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBmYWxzZTpcbiAgICAgICAgICB3YWl0aW5nKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/optimize/lazy/proxy_role.js"
      ],
      "names": [],
      "mappings": ";;wBAAyB,UAAU;;sBACT,QAAQ;;AAElC,MAAM,CAAC,OAAO,GAAG,UAAC,SAAS,EAAE,MAAM,EAAE,MAAM,EAAK;;AAE9C,QAAM,CAAC,KAAK,CAAC;AACX,QAAI,EAAE,kBAAkB;AACxB,UAAM,EAAE,KAAK;AACb,WAAO,EAAE;AACP,WAAK,EAAE;AACL,YAAI,EAAE,MAAM,CAAC,GAAG,CAAC,mBAAmB,CAAC;AACrC,YAAI,EAAE,MAAM,CAAC,GAAG,CAAC,mBAAmB,CAAC;AACrC,mBAAW,EAAE,IAAI;AACjB,gBAAQ,EAAE,IAAI;OACf;KACF;AACD,UAAM,EAAE,EAAC,IAAI,EAAE,KAAK,EAAC;GACtB,CAAC,CAAC;;AAEH,SAAO,wBAAS,UAAA,EAAE,EAAI;AACpB,QAAI,OAAO,GAAG,UAAU,CAAC,YAAM;AAC7B,QAAE,CAAC,IAAI,KAAK,CAAC,2DAA2D,CAAC,CAAC,CAAC;KAC5E,EAAE,MAAM,CAAC,GAAG,CAAC,2BAA2B,CAAC,CAAC,CAAC;;AAE5C,QAAI,OAAO,GAAG,kBAAK,YAAM;AACvB,YAAM,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,UAAU,CAAC,EAAE,kCAAkC,CAAC,CAAC;KACtE,CAAC,CAAC;;AAEH,QAAI,CAAC,OAAO,CAAC,SAAS,EAAE,OAAO;;AAE/B,WAAO,CAAC,IAAI,CAAC,CAAC,kBAAkB,EAAE,EAAE,aAAa,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC;AAC3D,WAAO,CAAC,EAAE,CAAC,SAAS,EAAE,UAAC,GAAG,EAAK;AAC7B,cAAQ,iBAAI,GAAG,EAAE,eAAe,CAAC;AAC/B,aAAK,IAAI;AACP,sBAAY,CAAC,OAAO,CAAC,CAAC;AACtB,YAAE,EAAE,CAAC;AACL,gBAAM;AAAA,AACR,aAAK,KAAK;AACR,iBAAO,EAAE,CAAC;AACV,gBAAM;AAAA,OACT;KACF,CAAC,CAAC;GACJ,CAAC,CAAC;CAEJ,CAAC",
      "file": "/home/vio/v3metrics/src/optimize/lazy/proxy_role.js",
      "sourcesContent": [
        "import { fromNode } from 'bluebird';\nimport { get, once } from 'lodash';\n\nmodule.exports = (kbnServer, server, config) => {\n\n  server.route({\n    path: '/bundles/{path*}',\n    method: 'GET',\n    handler: {\n      proxy: {\n        host: config.get('optimize.lazyHost'),\n        port: config.get('optimize.lazyPort'),\n        passThrough: true,\n        xforward: true\n      }\n    },\n    config: {auth: false}\n  });\n\n  return fromNode(cb => {\n    let timeout = setTimeout(() => {\n      cb(new Error('Server timedout waiting for the optimizer to become ready'));\n    }, config.get('optimize.lazyProxyTimeout'));\n\n    let waiting = once(() => {\n      server.log(['info', 'optimize'], 'Waiting for optimizer completion');\n    });\n\n    if (!process.connected) return;\n\n    process.send(['WORKER_BROADCAST', { optimizeReady: '?' }]);\n    process.on('message', (msg) => {\n      switch (get(msg, 'optimizeReady')) {\n        case true:\n          clearTimeout(timeout);\n          cb();\n          break;\n        case false:\n          waiting();\n          break;\n      }\n    });\n  });\n\n};\n"
      ]
    },
    "mtime": 1467036622805
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/routes/api/settings/register_get.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "boom",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Boom"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "registerGet",
            "server"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "registerGet",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "server",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = registerGet;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _boom = require('boom');\n\nvar _boom2 = _interopRequireDefault(_boom);\n\nfunction registerGet(server) {\n  server.route({\n    path: '/api/kibana/settings',\n    method: 'GET',\n    handler: function handler(req, reply) {\n      server.uiSettings().getUserProvided().then(function (settings) {\n        return reply({ settings: settings }).type('application/json');\n      })['catch'](function (reason) {\n        return reply(_boom2['default'].wrap(reason));\n      });\n    }\n  });\n}\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9yb3V0ZXMvYXBpL3NldHRpbmdzL3JlZ2lzdGVyX2dldC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztxQkFFd0IsV0FBVzs7OztvQkFGbEIsTUFBTTs7OztBQUVSLFNBQVMsV0FBVyxDQUFDLE1BQU0sRUFBRTtBQUMxQyxRQUFNLENBQUMsS0FBSyxDQUFDO0FBQ1gsUUFBSSxFQUFFLHNCQUFzQjtBQUM1QixVQUFNLEVBQUUsS0FBSztBQUNiLFdBQU8sRUFBRSxpQkFBVSxHQUFHLEVBQUUsS0FBSyxFQUFFO0FBQzdCLFlBQU0sQ0FDSCxVQUFVLEVBQUUsQ0FDWixlQUFlLEVBQUUsQ0FDakIsSUFBSSxDQUFDLFVBQUEsUUFBUTtlQUFJLEtBQUssQ0FBQyxFQUFFLFFBQVEsRUFBUixRQUFRLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQztPQUFBLENBQUMsU0FDekQsQ0FBQyxVQUFBLE1BQU07ZUFBSSxLQUFLLENBQUMsa0JBQUssSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO09BQUEsQ0FBQyxDQUFDO0tBQzlDO0dBQ0YsQ0FBQyxDQUFDO0NBQ0oiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvcGx1Z2lucy9raWJhbmEvc2VydmVyL3JvdXRlcy9hcGkvc2V0dGluZ3MvcmVnaXN0ZXJfZ2V0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJvb20gZnJvbSAnYm9vbSc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJlZ2lzdGVyR2V0KHNlcnZlcikge1xuICBzZXJ2ZXIucm91dGUoe1xuICAgIHBhdGg6ICcvYXBpL2tpYmFuYS9zZXR0aW5ncycsXG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICBoYW5kbGVyOiBmdW5jdGlvbiAocmVxLCByZXBseSkge1xuICAgICAgc2VydmVyXG4gICAgICAgIC51aVNldHRpbmdzKClcbiAgICAgICAgLmdldFVzZXJQcm92aWRlZCgpXG4gICAgICAgIC50aGVuKHNldHRpbmdzID0+IHJlcGx5KHsgc2V0dGluZ3MgfSkudHlwZSgnYXBwbGljYXRpb24vanNvbicpKVxuICAgICAgICAuY2F0Y2gocmVhc29uID0+IHJlcGx5KEJvb20ud3JhcChyZWFzb24pKSk7XG4gICAgfVxuICB9KTtcbn1cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/routes/api/settings/register_get.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAEwB,WAAW;;;;oBAFlB,MAAM;;;;AAER,SAAS,WAAW,CAAC,MAAM,EAAE;AAC1C,QAAM,CAAC,KAAK,CAAC;AACX,QAAI,EAAE,sBAAsB;AAC5B,UAAM,EAAE,KAAK;AACb,WAAO,EAAE,iBAAU,GAAG,EAAE,KAAK,EAAE;AAC7B,YAAM,CACH,UAAU,EAAE,CACZ,eAAe,EAAE,CACjB,IAAI,CAAC,UAAA,QAAQ;eAAI,KAAK,CAAC,EAAE,QAAQ,EAAR,QAAQ,EAAE,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC;OAAA,CAAC,SACzD,CAAC,UAAA,MAAM;eAAI,KAAK,CAAC,kBAAK,IAAI,CAAC,MAAM,CAAC,CAAC;OAAA,CAAC,CAAC;KAC9C;GACF,CAAC,CAAC;CACJ",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/routes/api/settings/register_get.js",
      "sourcesContent": [
        "import Boom from 'boom';\n\nexport default function registerGet(server) {\n  server.route({\n    path: '/api/kibana/settings',\n    method: 'GET',\n    handler: function (req, reply) {\n      server\n        .uiSettings()\n        .getUserProvided()\n        .then(settings => reply({ settings }).type('application/json'))\n        .catch(reason => reply(Boom.wrap(reason)));\n    }\n  });\n}\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/routes/api/settings/register_set.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "boom",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Boom"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "registerSet",
            "server"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "registerSet",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "server",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = registerSet;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _boom = require('boom');\n\nvar _boom2 = _interopRequireDefault(_boom);\n\nfunction registerSet(server) {\n  server.route({\n    path: '/api/kibana/settings/{key}',\n    method: 'POST',\n    handler: function handler(req, reply) {\n      var key = req.params.key;\n      var value = req.payload.value;\n\n      var uiSettings = server.uiSettings();\n      uiSettings.set(key, value).then(function () {\n        return uiSettings.getUserProvided().then(function (settings) {\n          return reply({ settings: settings }).type('application/json');\n        });\n      })['catch'](function (reason) {\n        return reply(_boom2['default'].wrap(reason));\n      });\n    }\n  });\n}\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9yb3V0ZXMvYXBpL3NldHRpbmdzL3JlZ2lzdGVyX3NldC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztxQkFFd0IsV0FBVzs7OztvQkFGbEIsTUFBTTs7OztBQUVSLFNBQVMsV0FBVyxDQUFDLE1BQU0sRUFBRTtBQUMxQyxRQUFNLENBQUMsS0FBSyxDQUFDO0FBQ1gsUUFBSSxFQUFFLDRCQUE0QjtBQUNsQyxVQUFNLEVBQUUsTUFBTTtBQUNkLFdBQU8sRUFBRSxpQkFBVSxHQUFHLEVBQUUsS0FBSyxFQUFFO1VBQ3JCLEdBQUcsR0FBSyxHQUFHLENBQUMsTUFBTSxDQUFsQixHQUFHO1VBQ0gsS0FBSyxHQUFLLEdBQUcsQ0FBQyxPQUFPLENBQXJCLEtBQUs7O0FBQ2IsVUFBTSxVQUFVLEdBQUcsTUFBTSxDQUFDLFVBQVUsRUFBRSxDQUFDO0FBQ3ZDLGdCQUFVLENBQ1AsR0FBRyxDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsQ0FDZixJQUFJLENBQUM7ZUFBTSxVQUFVLENBQ25CLGVBQWUsRUFBRSxDQUNqQixJQUFJLENBQUMsVUFBQSxRQUFRO2lCQUFJLEtBQUssQ0FBQyxFQUFFLFFBQVEsRUFBUixRQUFRLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQztTQUFBLENBQUM7T0FBQSxDQUNoRSxTQUNLLENBQUMsVUFBQSxNQUFNO2VBQUksS0FBSyxDQUFDLGtCQUFLLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztPQUFBLENBQUMsQ0FBQztLQUM5QztHQUNGLENBQUMsQ0FBQztDQUNKIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9yb3V0ZXMvYXBpL3NldHRpbmdzL3JlZ2lzdGVyX3NldC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCb29tIGZyb20gJ2Jvb20nO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiByZWdpc3RlclNldChzZXJ2ZXIpIHtcbiAgc2VydmVyLnJvdXRlKHtcbiAgICBwYXRoOiAnL2FwaS9raWJhbmEvc2V0dGluZ3Mve2tleX0nLFxuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIGhhbmRsZXI6IGZ1bmN0aW9uIChyZXEsIHJlcGx5KSB7XG4gICAgICBjb25zdCB7IGtleSB9ID0gcmVxLnBhcmFtcztcbiAgICAgIGNvbnN0IHsgdmFsdWUgfSA9IHJlcS5wYXlsb2FkO1xuICAgICAgY29uc3QgdWlTZXR0aW5ncyA9IHNlcnZlci51aVNldHRpbmdzKCk7XG4gICAgICB1aVNldHRpbmdzXG4gICAgICAgIC5zZXQoa2V5LCB2YWx1ZSlcbiAgICAgICAgLnRoZW4oKCkgPT4gdWlTZXR0aW5nc1xuICAgICAgICAgIC5nZXRVc2VyUHJvdmlkZWQoKVxuICAgICAgICAgIC50aGVuKHNldHRpbmdzID0+IHJlcGx5KHsgc2V0dGluZ3MgfSkudHlwZSgnYXBwbGljYXRpb24vanNvbicpKVxuICAgICAgICApXG4gICAgICAgIC5jYXRjaChyZWFzb24gPT4gcmVwbHkoQm9vbS53cmFwKHJlYXNvbikpKTtcbiAgICB9XG4gIH0pO1xufVxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/routes/api/settings/register_set.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAEwB,WAAW;;;;oBAFlB,MAAM;;;;AAER,SAAS,WAAW,CAAC,MAAM,EAAE;AAC1C,QAAM,CAAC,KAAK,CAAC;AACX,QAAI,EAAE,4BAA4B;AAClC,UAAM,EAAE,MAAM;AACd,WAAO,EAAE,iBAAU,GAAG,EAAE,KAAK,EAAE;UACrB,GAAG,GAAK,GAAG,CAAC,MAAM,CAAlB,GAAG;UACH,KAAK,GAAK,GAAG,CAAC,OAAO,CAArB,KAAK;;AACb,UAAM,UAAU,GAAG,MAAM,CAAC,UAAU,EAAE,CAAC;AACvC,gBAAU,CACP,GAAG,CAAC,GAAG,EAAE,KAAK,CAAC,CACf,IAAI,CAAC;eAAM,UAAU,CACnB,eAAe,EAAE,CACjB,IAAI,CAAC,UAAA,QAAQ;iBAAI,KAAK,CAAC,EAAE,QAAQ,EAAR,QAAQ,EAAE,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC;SAAA,CAAC;OAAA,CAChE,SACK,CAAC,UAAA,MAAM;eAAI,KAAK,CAAC,kBAAK,IAAI,CAAC,MAAM,CAAC,CAAC;OAAA,CAAC,CAAC;KAC9C;GACF,CAAC,CAAC;CACJ",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/routes/api/settings/register_set.js",
      "sourcesContent": [
        "import Boom from 'boom';\n\nexport default function registerSet(server) {\n  server.route({\n    path: '/api/kibana/settings/{key}',\n    method: 'POST',\n    handler: function (req, reply) {\n      const { key } = req.params;\n      const { value } = req.payload;\n      const uiSettings = server.uiSettings();\n      uiSettings\n        .set(key, value)\n        .then(() => uiSettings\n          .getUserProvided()\n          .then(settings => reply({ settings }).type('application/json'))\n        )\n        .catch(reason => reply(Boom.wrap(reason)));\n    }\n  });\n}\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/routes/api/settings/register_set_many.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "boom",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Boom"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "registerSet",
            "server"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "registerSet",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "server",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = registerSet;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _boom = require('boom');\n\nvar _boom2 = _interopRequireDefault(_boom);\n\nfunction registerSet(server) {\n  server.route({\n    path: '/api/kibana/settings',\n    method: 'POST',\n    handler: function handler(req, reply) {\n      var key = req.params.key;\n      var changes = req.payload.changes;\n\n      var uiSettings = server.uiSettings();\n      uiSettings.setMany(changes).then(function () {\n        return uiSettings.getUserProvided().then(function (settings) {\n          return reply({ settings: settings }).type('application/json');\n        });\n      })['catch'](function (reason) {\n        return reply(_boom2['default'].wrap(reason));\n      });\n    }\n  });\n}\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9yb3V0ZXMvYXBpL3NldHRpbmdzL3JlZ2lzdGVyX3NldF9tYW55LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O3FCQUV3QixXQUFXOzs7O29CQUZsQixNQUFNOzs7O0FBRVIsU0FBUyxXQUFXLENBQUMsTUFBTSxFQUFFO0FBQzFDLFFBQU0sQ0FBQyxLQUFLLENBQUM7QUFDWCxRQUFJLEVBQUUsc0JBQXNCO0FBQzVCLFVBQU0sRUFBRSxNQUFNO0FBQ2QsV0FBTyxFQUFFLGlCQUFVLEdBQUcsRUFBRSxLQUFLLEVBQUU7VUFDckIsR0FBRyxHQUFLLEdBQUcsQ0FBQyxNQUFNLENBQWxCLEdBQUc7VUFDSCxPQUFPLEdBQUssR0FBRyxDQUFDLE9BQU8sQ0FBdkIsT0FBTzs7QUFDZixVQUFNLFVBQVUsR0FBRyxNQUFNLENBQUMsVUFBVSxFQUFFLENBQUM7QUFDdkMsZ0JBQVUsQ0FDUCxPQUFPLENBQUMsT0FBTyxDQUFDLENBQ2hCLElBQUksQ0FBQztlQUFNLFVBQVUsQ0FDbkIsZUFBZSxFQUFFLENBQ2pCLElBQUksQ0FBQyxVQUFBLFFBQVE7aUJBQUksS0FBSyxDQUFDLEVBQUUsUUFBUSxFQUFSLFFBQVEsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDO1NBQUEsQ0FBQztPQUFBLENBQ2hFLFNBQ0ssQ0FBQyxVQUFBLE1BQU07ZUFBSSxLQUFLLENBQUMsa0JBQUssSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO09BQUEsQ0FBQyxDQUFDO0tBQzlDO0dBQ0YsQ0FBQyxDQUFDO0NBQ0oiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvcGx1Z2lucy9raWJhbmEvc2VydmVyL3JvdXRlcy9hcGkvc2V0dGluZ3MvcmVnaXN0ZXJfc2V0X21hbnkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQm9vbSBmcm9tICdib29tJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcmVnaXN0ZXJTZXQoc2VydmVyKSB7XG4gIHNlcnZlci5yb3V0ZSh7XG4gICAgcGF0aDogJy9hcGkva2liYW5hL3NldHRpbmdzJyxcbiAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICBoYW5kbGVyOiBmdW5jdGlvbiAocmVxLCByZXBseSkge1xuICAgICAgY29uc3QgeyBrZXkgfSA9IHJlcS5wYXJhbXM7XG4gICAgICBjb25zdCB7IGNoYW5nZXMgfSA9IHJlcS5wYXlsb2FkO1xuICAgICAgY29uc3QgdWlTZXR0aW5ncyA9IHNlcnZlci51aVNldHRpbmdzKCk7XG4gICAgICB1aVNldHRpbmdzXG4gICAgICAgIC5zZXRNYW55KGNoYW5nZXMpXG4gICAgICAgIC50aGVuKCgpID0+IHVpU2V0dGluZ3NcbiAgICAgICAgICAuZ2V0VXNlclByb3ZpZGVkKClcbiAgICAgICAgICAudGhlbihzZXR0aW5ncyA9PiByZXBseSh7IHNldHRpbmdzIH0pLnR5cGUoJ2FwcGxpY2F0aW9uL2pzb24nKSlcbiAgICAgICAgKVxuICAgICAgICAuY2F0Y2gocmVhc29uID0+IHJlcGx5KEJvb20ud3JhcChyZWFzb24pKSk7XG4gICAgfVxuICB9KTtcbn1cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/routes/api/settings/register_set_many.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAEwB,WAAW;;;;oBAFlB,MAAM;;;;AAER,SAAS,WAAW,CAAC,MAAM,EAAE;AAC1C,QAAM,CAAC,KAAK,CAAC;AACX,QAAI,EAAE,sBAAsB;AAC5B,UAAM,EAAE,MAAM;AACd,WAAO,EAAE,iBAAU,GAAG,EAAE,KAAK,EAAE;UACrB,GAAG,GAAK,GAAG,CAAC,MAAM,CAAlB,GAAG;UACH,OAAO,GAAK,GAAG,CAAC,OAAO,CAAvB,OAAO;;AACf,UAAM,UAAU,GAAG,MAAM,CAAC,UAAU,EAAE,CAAC;AACvC,gBAAU,CACP,OAAO,CAAC,OAAO,CAAC,CAChB,IAAI,CAAC;eAAM,UAAU,CACnB,eAAe,EAAE,CACjB,IAAI,CAAC,UAAA,QAAQ;iBAAI,KAAK,CAAC,EAAE,QAAQ,EAAR,QAAQ,EAAE,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC;SAAA,CAAC;OAAA,CAChE,SACK,CAAC,UAAA,MAAM;eAAI,KAAK,CAAC,kBAAK,IAAI,CAAC,MAAM,CAAC,CAAC;OAAA,CAAC,CAAC;KAC9C;GACF,CAAC,CAAC;CACJ",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/routes/api/settings/register_set_many.js",
      "sourcesContent": [
        "import Boom from 'boom';\n\nexport default function registerSet(server) {\n  server.route({\n    path: '/api/kibana/settings',\n    method: 'POST',\n    handler: function (req, reply) {\n      const { key } = req.params;\n      const { changes } = req.payload;\n      const uiSettings = server.uiSettings();\n      uiSettings\n        .setMany(changes)\n        .then(() => uiSettings\n          .getUserProvided()\n          .then(settings => reply({ settings }).type('application/json'))\n        )\n        .catch(reason => reply(Boom.wrap(reason)));\n    }\n  });\n}\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/plugins/kibana/server/routes/api/settings/register_delete.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "boom",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Boom"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "registerDelete",
            "server"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "registerDelete",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "server",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = registerDelete;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _boom = require('boom');\n\nvar _boom2 = _interopRequireDefault(_boom);\n\nfunction registerDelete(server) {\n  server.route({\n    path: '/api/kibana/settings/{key}',\n    method: 'DELETE',\n    handler: function handler(req, reply) {\n      var key = req.params.key;\n\n      var uiSettings = server.uiSettings();\n      uiSettings.remove(key).then(function () {\n        return uiSettings.getUserProvided().then(function (settings) {\n          return reply({ settings: settings }).type('application/json');\n        });\n      })['catch'](function (reason) {\n        return reply(_boom2['default'].wrap(reason));\n      });\n    }\n  });\n}\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3BsdWdpbnMva2liYW5hL3NlcnZlci9yb3V0ZXMvYXBpL3NldHRpbmdzL3JlZ2lzdGVyX2RlbGV0ZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztxQkFFd0IsY0FBYzs7OztvQkFGckIsTUFBTTs7OztBQUVSLFNBQVMsY0FBYyxDQUFDLE1BQU0sRUFBRTtBQUM3QyxRQUFNLENBQUMsS0FBSyxDQUFDO0FBQ1gsUUFBSSxFQUFFLDRCQUE0QjtBQUNsQyxVQUFNLEVBQUUsUUFBUTtBQUNoQixXQUFPLEVBQUUsaUJBQVUsR0FBRyxFQUFFLEtBQUssRUFBRTtVQUNyQixHQUFHLEdBQUssR0FBRyxDQUFDLE1BQU0sQ0FBbEIsR0FBRzs7QUFDWCxVQUFNLFVBQVUsR0FBRyxNQUFNLENBQUMsVUFBVSxFQUFFLENBQUM7QUFDdkMsZ0JBQVUsQ0FDUCxNQUFNLENBQUMsR0FBRyxDQUFDLENBQ1gsSUFBSSxDQUFDO2VBQU0sVUFBVSxDQUNuQixlQUFlLEVBQUUsQ0FDakIsSUFBSSxDQUFDLFVBQUEsUUFBUTtpQkFBSSxLQUFLLENBQUMsRUFBRSxRQUFRLEVBQVIsUUFBUSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsa0JBQWtCLENBQUM7U0FBQSxDQUFDO09BQUEsQ0FDaEUsU0FDSyxDQUFDLFVBQUEsTUFBTTtlQUFJLEtBQUssQ0FBQyxrQkFBSyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7T0FBQSxDQUFDLENBQUM7S0FDOUM7R0FDRixDQUFDLENBQUM7Q0FDSiIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9wbHVnaW5zL2tpYmFuYS9zZXJ2ZXIvcm91dGVzL2FwaS9zZXR0aW5ncy9yZWdpc3Rlcl9kZWxldGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQm9vbSBmcm9tICdib29tJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcmVnaXN0ZXJEZWxldGUoc2VydmVyKSB7XG4gIHNlcnZlci5yb3V0ZSh7XG4gICAgcGF0aDogJy9hcGkva2liYW5hL3NldHRpbmdzL3trZXl9JyxcbiAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgIGhhbmRsZXI6IGZ1bmN0aW9uIChyZXEsIHJlcGx5KSB7XG4gICAgICBjb25zdCB7IGtleSB9ID0gcmVxLnBhcmFtcztcbiAgICAgIGNvbnN0IHVpU2V0dGluZ3MgPSBzZXJ2ZXIudWlTZXR0aW5ncygpO1xuICAgICAgdWlTZXR0aW5nc1xuICAgICAgICAucmVtb3ZlKGtleSlcbiAgICAgICAgLnRoZW4oKCkgPT4gdWlTZXR0aW5nc1xuICAgICAgICAgIC5nZXRVc2VyUHJvdmlkZWQoKVxuICAgICAgICAgIC50aGVuKHNldHRpbmdzID0+IHJlcGx5KHsgc2V0dGluZ3MgfSkudHlwZSgnYXBwbGljYXRpb24vanNvbicpKVxuICAgICAgICApXG4gICAgICAgIC5jYXRjaChyZWFzb24gPT4gcmVwbHkoQm9vbS53cmFwKHJlYXNvbikpKTtcbiAgICB9XG4gIH0pO1xufVxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/plugins/kibana/server/routes/api/settings/register_delete.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAEwB,cAAc;;;;oBAFrB,MAAM;;;;AAER,SAAS,cAAc,CAAC,MAAM,EAAE;AAC7C,QAAM,CAAC,KAAK,CAAC;AACX,QAAI,EAAE,4BAA4B;AAClC,UAAM,EAAE,QAAQ;AAChB,WAAO,EAAE,iBAAU,GAAG,EAAE,KAAK,EAAE;UACrB,GAAG,GAAK,GAAG,CAAC,MAAM,CAAlB,GAAG;;AACX,UAAM,UAAU,GAAG,MAAM,CAAC,UAAU,EAAE,CAAC;AACvC,gBAAU,CACP,MAAM,CAAC,GAAG,CAAC,CACX,IAAI,CAAC;eAAM,UAAU,CACnB,eAAe,EAAE,CACjB,IAAI,CAAC,UAAA,QAAQ;iBAAI,KAAK,CAAC,EAAE,QAAQ,EAAR,QAAQ,EAAE,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC;SAAA,CAAC;OAAA,CAChE,SACK,CAAC,UAAA,MAAM;eAAI,KAAK,CAAC,kBAAK,IAAI,CAAC,MAAM,CAAC,CAAC;OAAA,CAAC,CAAC;KAC9C;GACF,CAAC,CAAC;CACJ",
      "file": "/home/vio/v3metrics/src/plugins/kibana/server/routes/api/settings/register_delete.js",
      "sourcesContent": [
        "import Boom from 'boom';\n\nexport default function registerDelete(server) {\n  server.route({\n    path: '/api/kibana/settings/{key}',\n    method: 'DELETE',\n    handler: function (req, reply) {\n      const { key } = req.params;\n      const uiSettings = server.uiSettings();\n      uiSettings\n        .remove(key)\n        .then(() => uiSettings\n          .getUserProvided()\n          .then(settings => reply({ settings }).type('application/json'))\n        )\n        .catch(reason => reply(Boom.wrap(reason)));\n    }\n  });\n}\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/routes/run.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar Promise = require('bluebird');\nvar Boom = require('boom');\nvar chainRunnerFn = require('../handlers/chain_runner.js');\n\nfunction replyWithError(e, reply) {\n  reply({ title: e.toString(), message: e.toString(), stack: e.stack }).code(400);\n}\n\nmodule.exports = function (server) {\n\n  server.route({\n    method: ['POST', 'GET'],\n    path: '/api/timelion/run',\n    handler: function handler(request, reply) {\n      var tlConfig = require('../handlers/lib/tl_config.js')({\n        server: server,\n        request: request\n      });\n      var chainRunner = chainRunnerFn(tlConfig);\n\n      var sheet;\n      try {\n        sheet = chainRunner.processRequest(request.payload || {\n          sheet: [request.query.expression],\n          time: {\n            from: request.query.from,\n            to: request.query.to,\n            interval: request.query.interval,\n            timezone: request.query.timezone\n          }\n        });\n      } catch (e) {\n        replyWithError(e, reply);\n        return;\n      }\n\n      return Promise.all(sheet).then(function (sheet) {\n        // TODO: Consider supporting returning either the sheet, or a flot png image?\n        var response = {\n          sheet: sheet,\n          stats: chainRunner.getStats()\n        };\n        reply(response);\n      })['catch'](function (e) {\n        // TODO Maybe we should just replace everywhere we throw with Boom? Probably.\n        if (e.isBoom) {\n          reply(e);\n        } else {\n          replyWithError(e, reply);\n        }\n      });\n    }\n  });\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvcm91dGVzL3J1bi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQUksT0FBTyxHQUFHLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUNsQyxJQUFJLElBQUksR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDM0IsSUFBSSxhQUFhLEdBQUcsT0FBTyxDQUFDLDZCQUE2QixDQUFDLENBQUM7O0FBRTNELFNBQVMsY0FBYyxDQUFDLENBQUMsRUFBRSxLQUFLLEVBQUU7QUFDaEMsT0FBSyxDQUFDLEVBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxRQUFRLEVBQUUsRUFBRSxPQUFPLEVBQUUsQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUMsS0FBSyxFQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7Q0FDL0U7O0FBR0QsTUFBTSxDQUFDLE9BQU8sR0FBRyxVQUFVLE1BQU0sRUFBRTs7QUFFakMsUUFBTSxDQUFDLEtBQUssQ0FBQztBQUNYLFVBQU0sRUFBRSxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUM7QUFDdkIsUUFBSSxFQUFFLG1CQUFtQjtBQUN6QixXQUFPLEVBQUUsaUJBQVUsT0FBTyxFQUFFLEtBQUssRUFBRTtBQUNqQyxVQUFJLFFBQVEsR0FBRyxPQUFPLENBQUMsOEJBQThCLENBQUMsQ0FBQztBQUNyRCxjQUFNLEVBQUUsTUFBTTtBQUNkLGVBQU8sRUFBRSxPQUFPO09BQ2pCLENBQUMsQ0FBQztBQUNILFVBQUksV0FBVyxHQUFHLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQzs7QUFFMUMsVUFBSSxLQUFLLENBQUM7QUFDVixVQUFJO0FBQ0YsYUFBSyxHQUFHLFdBQVcsQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDLE9BQU8sSUFBSTtBQUNwRCxlQUFLLEVBQUUsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQztBQUNqQyxjQUFJLEVBQUU7QUFDSixnQkFBSSxFQUFFLE9BQU8sQ0FBQyxLQUFLLENBQUMsSUFBSTtBQUN4QixjQUFFLEVBQUUsT0FBTyxDQUFDLEtBQUssQ0FBQyxFQUFFO0FBQ3BCLG9CQUFRLEVBQUUsT0FBTyxDQUFDLEtBQUssQ0FBQyxRQUFRO0FBQ2hDLG9CQUFRLEVBQUUsT0FBTyxDQUFDLEtBQUssQ0FBQyxRQUFRO1dBQ2pDO1NBQ0YsQ0FBQyxDQUFDO09BQ0osQ0FBQyxPQUFPLENBQUMsRUFBRTtBQUNWLHNCQUFjLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDO0FBQ3pCLGVBQU87T0FDUjs7QUFFRCxhQUFPLE9BQU8sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsS0FBSyxFQUFFOztBQUU5QyxZQUFJLFFBQVEsR0FBRztBQUNiLGVBQUssRUFBRSxLQUFLO0FBQ1osZUFBSyxFQUFFLFdBQVcsQ0FBQyxRQUFRLEVBQUU7U0FDOUIsQ0FBQztBQUNGLGFBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQztPQUNqQixDQUFDLFNBQU0sQ0FBQyxVQUFVLENBQUMsRUFBRTs7QUFFcEIsWUFBSSxDQUFDLENBQUMsTUFBTSxFQUFFO0FBQ1osZUFBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ1YsTUFBTTtBQUNMLHdCQUFjLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDO1NBQzFCO09BQ0YsQ0FBQyxDQUFDO0tBQ0o7R0FDRixDQUFDLENBQUM7Q0FFSixDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvcm91dGVzL3J1bi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBQcm9taXNlID0gcmVxdWlyZSgnYmx1ZWJpcmQnKTtcbnZhciBCb29tID0gcmVxdWlyZSgnYm9vbScpO1xudmFyIGNoYWluUnVubmVyRm4gPSByZXF1aXJlKCcuLi9oYW5kbGVycy9jaGFpbl9ydW5uZXIuanMnKTtcblxuZnVuY3Rpb24gcmVwbHlXaXRoRXJyb3IoZSwgcmVwbHkpIHtcbiAgcmVwbHkoe3RpdGxlOiBlLnRvU3RyaW5nKCksIG1lc3NhZ2U6IGUudG9TdHJpbmcoKSwgc3RhY2s6IGUuc3RhY2t9KS5jb2RlKDQwMCk7XG59XG5cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoc2VydmVyKSB7XG5cbiAgc2VydmVyLnJvdXRlKHtcbiAgICBtZXRob2Q6IFsnUE9TVCcsICdHRVQnXSxcbiAgICBwYXRoOiAnL2FwaS90aW1lbGlvbi9ydW4nLFxuICAgIGhhbmRsZXI6IGZ1bmN0aW9uIChyZXF1ZXN0LCByZXBseSkge1xuICAgICAgdmFyIHRsQ29uZmlnID0gcmVxdWlyZSgnLi4vaGFuZGxlcnMvbGliL3RsX2NvbmZpZy5qcycpKHtcbiAgICAgICAgc2VydmVyOiBzZXJ2ZXIsXG4gICAgICAgIHJlcXVlc3Q6IHJlcXVlc3RcbiAgICAgIH0pO1xuICAgICAgdmFyIGNoYWluUnVubmVyID0gY2hhaW5SdW5uZXJGbih0bENvbmZpZyk7XG5cbiAgICAgIHZhciBzaGVldDtcbiAgICAgIHRyeSB7XG4gICAgICAgIHNoZWV0ID0gY2hhaW5SdW5uZXIucHJvY2Vzc1JlcXVlc3QocmVxdWVzdC5wYXlsb2FkIHx8IHtcbiAgICAgICAgICBzaGVldDogW3JlcXVlc3QucXVlcnkuZXhwcmVzc2lvbl0sXG4gICAgICAgICAgdGltZToge1xuICAgICAgICAgICAgZnJvbTogcmVxdWVzdC5xdWVyeS5mcm9tLFxuICAgICAgICAgICAgdG86IHJlcXVlc3QucXVlcnkudG8sXG4gICAgICAgICAgICBpbnRlcnZhbDogcmVxdWVzdC5xdWVyeS5pbnRlcnZhbCxcbiAgICAgICAgICAgIHRpbWV6b25lOiByZXF1ZXN0LnF1ZXJ5LnRpbWV6b25lXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmVwbHlXaXRoRXJyb3IoZSwgcmVwbHkpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBQcm9taXNlLmFsbChzaGVldCkudGhlbihmdW5jdGlvbiAoc2hlZXQpIHtcbiAgICAgICAgLy8gVE9ETzogQ29uc2lkZXIgc3VwcG9ydGluZyByZXR1cm5pbmcgZWl0aGVyIHRoZSBzaGVldCwgb3IgYSBmbG90IHBuZyBpbWFnZT9cbiAgICAgICAgdmFyIHJlc3BvbnNlID0ge1xuICAgICAgICAgIHNoZWV0OiBzaGVldCxcbiAgICAgICAgICBzdGF0czogY2hhaW5SdW5uZXIuZ2V0U3RhdHMoKVxuICAgICAgICB9O1xuICAgICAgICByZXBseShyZXNwb25zZSk7XG4gICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICAvLyBUT0RPIE1heWJlIHdlIHNob3VsZCBqdXN0IHJlcGxhY2UgZXZlcnl3aGVyZSB3ZSB0aHJvdyB3aXRoIEJvb20/IFByb2JhYmx5LlxuICAgICAgICBpZiAoZS5pc0Jvb20pIHtcbiAgICAgICAgICByZXBseShlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXBseVdpdGhFcnJvcihlLCByZXBseSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG5cbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/routes/run.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,OAAO,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;AAClC,IAAI,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;AAC3B,IAAI,aAAa,GAAG,OAAO,CAAC,6BAA6B,CAAC,CAAC;;AAE3D,SAAS,cAAc,CAAC,CAAC,EAAE,KAAK,EAAE;AAChC,OAAK,CAAC,EAAC,KAAK,EAAE,CAAC,CAAC,QAAQ,EAAE,EAAE,OAAO,EAAE,CAAC,CAAC,QAAQ,EAAE,EAAE,KAAK,EAAE,CAAC,CAAC,KAAK,EAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;CAC/E;;AAGD,MAAM,CAAC,OAAO,GAAG,UAAU,MAAM,EAAE;;AAEjC,QAAM,CAAC,KAAK,CAAC;AACX,UAAM,EAAE,CAAC,MAAM,EAAE,KAAK,CAAC;AACvB,QAAI,EAAE,mBAAmB;AACzB,WAAO,EAAE,iBAAU,OAAO,EAAE,KAAK,EAAE;AACjC,UAAI,QAAQ,GAAG,OAAO,CAAC,8BAA8B,CAAC,CAAC;AACrD,cAAM,EAAE,MAAM;AACd,eAAO,EAAE,OAAO;OACjB,CAAC,CAAC;AACH,UAAI,WAAW,GAAG,aAAa,CAAC,QAAQ,CAAC,CAAC;;AAE1C,UAAI,KAAK,CAAC;AACV,UAAI;AACF,aAAK,GAAG,WAAW,CAAC,cAAc,CAAC,OAAO,CAAC,OAAO,IAAI;AACpD,eAAK,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC,UAAU,CAAC;AACjC,cAAI,EAAE;AACJ,gBAAI,EAAE,OAAO,CAAC,KAAK,CAAC,IAAI;AACxB,cAAE,EAAE,OAAO,CAAC,KAAK,CAAC,EAAE;AACpB,oBAAQ,EAAE,OAAO,CAAC,KAAK,CAAC,QAAQ;AAChC,oBAAQ,EAAE,OAAO,CAAC,KAAK,CAAC,QAAQ;WACjC;SACF,CAAC,CAAC;OACJ,CAAC,OAAO,CAAC,EAAE;AACV,sBAAc,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;AACzB,eAAO;OACR;;AAED,aAAO,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,UAAU,KAAK,EAAE;;AAE9C,YAAI,QAAQ,GAAG;AACb,eAAK,EAAE,KAAK;AACZ,eAAK,EAAE,WAAW,CAAC,QAAQ,EAAE;SAC9B,CAAC;AACF,aAAK,CAAC,QAAQ,CAAC,CAAC;OACjB,CAAC,SAAM,CAAC,UAAU,CAAC,EAAE;;AAEpB,YAAI,CAAC,CAAC,MAAM,EAAE;AACZ,eAAK,CAAC,CAAC,CAAC,CAAC;SACV,MAAM;AACL,wBAAc,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;SAC1B;OACF,CAAC,CAAC;KACJ;GACF,CAAC,CAAC;CAEJ,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/routes/run.js",
      "sourcesContent": [
        "var Promise = require('bluebird');\nvar Boom = require('boom');\nvar chainRunnerFn = require('../handlers/chain_runner.js');\n\nfunction replyWithError(e, reply) {\n  reply({title: e.toString(), message: e.toString(), stack: e.stack}).code(400);\n}\n\n\nmodule.exports = function (server) {\n\n  server.route({\n    method: ['POST', 'GET'],\n    path: '/api/timelion/run',\n    handler: function (request, reply) {\n      var tlConfig = require('../handlers/lib/tl_config.js')({\n        server: server,\n        request: request\n      });\n      var chainRunner = chainRunnerFn(tlConfig);\n\n      var sheet;\n      try {\n        sheet = chainRunner.processRequest(request.payload || {\n          sheet: [request.query.expression],\n          time: {\n            from: request.query.from,\n            to: request.query.to,\n            interval: request.query.interval,\n            timezone: request.query.timezone\n          }\n        });\n      } catch (e) {\n        replyWithError(e, reply);\n        return;\n      }\n\n      return Promise.all(sheet).then(function (sheet) {\n        // TODO: Consider supporting returning either the sheet, or a flot png image?\n        var response = {\n          sheet: sheet,\n          stats: chainRunner.getStats()\n        };\n        reply(response);\n      }).catch(function (e) {\n        // TODO Maybe we should just replace everywhere we throw with Boom? Probably.\n        if (e.isBoom) {\n          reply(e);\n        } else {\n          replyWithError(e, reply);\n        }\n      });\n    }\n  });\n\n};\n"
      ]
    },
    "mtime": 1467119944363
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/handlers/chain_runner.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _ = require('lodash');\nvar glob = require('glob');\nvar Promise = require('bluebird');\n\nvar parseSheet = require('./lib/parse_sheet.js');\nvar parseDateMath = require('../lib/date_math.js');\nvar loadFunctions = require('../lib/load_functions.js');\nvar repositionArguments = require('./lib/reposition_arguments.js');\nvar indexArguments = require('./lib/index_arguments.js');\nvar getFunctionByName = require('./lib/get_function_by_name.js');\nvar preprocessChain = require('./lib/preprocess_chain');\nvar validateTime = require('./lib/validate_time.js');\n\nvar functions = loadFunctions('series_functions');\nvar fitFunctions = loadFunctions('fit_functions');\n\nmodule.exports = function (tlConfig) {\n  var queryCache = {};\n  var stats = {};\n  var sheet;\n\n  function getQueryCacheKey(query) {\n    return JSON.stringify(_.omit(query, 'label'));\n  }\n\n  function throwWithCell(cell, exception) {\n    throw new Error(' in cell #' + (cell + 1) + ': ' + exception.message);\n  }\n\n  // Invokes a modifier function, resolving arguments into series as needed\n  function invoke(fnName, args) {\n    var functionDef = getFunctionByName(fnName);\n\n    function resolveArgument(item) {\n      if (_.isArray(item)) {\n        return Promise.all(_.map(item, resolveArgument));\n      }\n\n      if (_.isObject(item)) {\n        switch (item.type) {\n          case 'function':\n            var itemFunctionDef = getFunctionByName(item['function']);\n            if (itemFunctionDef.cacheKey && queryCache[itemFunctionDef.cacheKey(item)]) {\n              stats.queryCount++;\n              return Promise.resolve(_.cloneDeep(queryCache[itemFunctionDef.cacheKey(item)]));\n            }\n            return invoke(item['function'], item.arguments);\n          case 'reference':\n            var reference;\n            if (item.series) {\n              reference = sheet[item.plot - 1][item.series - 1];\n            } else {\n              reference = {\n                type: 'chainList',\n                list: sheet[item.plot - 1]\n              };\n            }\n            return invoke('first', [reference]);\n          case 'chain':\n            return invokeChain(item);\n          case 'chainList':\n            return resolveChainList(item.list);\n          case 'literal':\n            return item.value;\n          case 'requestList':\n          case 'seriesList':\n            return item;\n        }\n        throw new Error('Argument type not supported: ' + JSON.stringify(item));\n      } else {\n        return item;\n      }\n    }\n\n    args = repositionArguments(functionDef, args);\n    args = _.map(args, resolveArgument);\n\n    return Promise.all(args).then(function (args) {\n      args.byName = indexArguments(functionDef, args);\n      return functionDef.fn(args, tlConfig);\n    });\n  }\n\n  function invokeChain(chainObj, result) {\n    if (chainObj.chain.length === 0) return result[0];\n\n    var chain = _.clone(chainObj.chain);\n    var link = chain.shift();\n\n    var promise;\n    if (link.type === 'chain') {\n      promise = invokeChain(link);\n    } else if (!result) {\n      promise = invoke('first', [link]);\n    } else {\n      var args = link.arguments ? result.concat(link.arguments) : result;\n      promise = invoke(link['function'], args);\n    }\n\n    return promise.then(function (result) {\n      return invokeChain({ type: 'chain', chain: chain }, [result]);\n    });\n  }\n\n  function resolveChainList(chainList) {\n    var seriesList = _.map(chainList, function (chain) {\n      var values = invoke('first', [chain]);\n      return values.then(function (args) {\n        return args;\n      });\n    });\n    return Promise.all(seriesList).then(function (args) {\n      var list = _.chain(args).pluck('list').flatten().value();\n      return { type: 'seriesList', list: list };\n    });\n  }\n\n  function preProcessSheet(sheet) {\n\n    var queries = {};\n    _.each(sheet, function (chainList, i) {\n      try {\n        var queriesInCell = _.mapValues(preprocessChain(chainList), function (val) {\n          val.cell = i;\n          return val;\n        });\n        queries = _.extend(queries, queriesInCell);\n      } catch (e) {\n        throwWithCell(i, e);\n      }\n    });\n    queries = _.values(queries);\n\n    var promises = _.chain(queries).values().map(function (query) {\n      return invoke(query['function'], query.arguments);\n    }).value();\n\n    return Promise.settle(promises).then(function (resolvedDatasources) {\n\n      stats.queryTime = new Date().getTime();\n\n      _.each(queries, function (query, i) {\n        var functionDef = getFunctionByName(query['function']);\n        var resolvedDatasource = resolvedDatasources[i];\n\n        if (resolvedDatasource.isRejected()) {\n          if (resolvedDatasource.reason().isBoom) {\n            throw resolvedDatasource.reason();\n          } else {\n            throwWithCell(query.cell, resolvedDatasource.reason());\n          }\n        }\n\n        queryCache[functionDef.cacheKey(query)] = resolvedDatasource.value();\n      });\n\n      stats.cacheCount = _.keys(queryCache).length;\n      return sheet;\n    });\n  }\n\n  function processRequest(request) {\n    if (!request) throw new Error('Empty request body');\n\n    validateTime(request.time, tlConfig);\n\n    tlConfig.time = request.time;\n    tlConfig.time.to = parseDateMath(request.time.to, true).valueOf();\n    tlConfig.time.from = parseDateMath(request.time.from).valueOf();\n    tlConfig.setTargetSeries();\n\n    stats.invokeTime = new Date().getTime();\n    stats.queryCount = 0;\n    queryCache = {};\n\n    // This is setting the \"global\" sheet, required for resolving references\n    sheet = parseSheet(request.sheet);\n    return preProcessSheet(sheet).then(function () {\n      return _.map(sheet, function (chainList, i) {\n        return resolveChainList(chainList).then(function (seriesList) {\n          stats.sheetTime = new Date().getTime();\n          return seriesList.list;\n        })['catch'](function (e) {\n          throwWithCell(i, e);\n        });\n      });\n    });\n  }\n\n  return {\n    processRequest: processRequest,\n    getStats: function getStats() {\n      return stats;\n    }\n  };\n};\n\n/*\nfunction logObj(obj, thing) {\n  return JSON.stringify(obj, null, thing ? ' ' : undefined);\n}\n\nfunction debugSheet(sheet) {\n  sheet = processRequest(sheet);\n  Promise.all(sheet).then(function (sheet) {\n    console.log(logObj(sheet, 1));\n    console.log(logObj({done:true}));\n    return sheet;\n  });\n}\n\ndebugSheet(\n  {sheet:['es(q=-*)'], time: tlConfig.time}\n);\n*/\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvaGFuZGxlcnMvY2hhaW5fcnVubmVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQ0EsSUFBSSxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQzFCLElBQUksSUFBSSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUMzQixJQUFJLE9BQU8sR0FBRyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUM7O0FBRWxDLElBQUksVUFBVSxHQUFHLE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO0FBQ2pELElBQUksYUFBYSxHQUFHLE9BQU8sQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO0FBQ25ELElBQUksYUFBYSxHQUFHLE9BQU8sQ0FBQywwQkFBMEIsQ0FBQyxDQUFDO0FBQ3hELElBQUksbUJBQW1CLEdBQUcsT0FBTyxDQUFDLCtCQUErQixDQUFDLENBQUM7QUFDbkUsSUFBSSxjQUFjLEdBQUcsT0FBTyxDQUFDLDBCQUEwQixDQUFDLENBQUM7QUFDekQsSUFBSSxpQkFBaUIsR0FBRyxPQUFPLENBQUMsK0JBQStCLENBQUMsQ0FBQztBQUNqRSxJQUFJLGVBQWUsR0FBRyxPQUFPLENBQUMsd0JBQXdCLENBQUMsQ0FBQztBQUN4RCxJQUFJLFlBQVksR0FBRyxPQUFPLENBQUMsd0JBQXdCLENBQUMsQ0FBQzs7QUFFckQsSUFBSSxTQUFTLEdBQUksYUFBYSxDQUFDLGtCQUFrQixDQUFDLENBQUM7QUFDbkQsSUFBSSxZQUFZLEdBQUksYUFBYSxDQUFDLGVBQWUsQ0FBQyxDQUFDOztBQUVuRCxNQUFNLENBQUMsT0FBTyxHQUFHLFVBQVUsUUFBUSxFQUFFO0FBQ25DLE1BQUksVUFBVSxHQUFHLEVBQUUsQ0FBQztBQUNwQixNQUFJLEtBQUssR0FBRyxFQUFFLENBQUM7QUFDZixNQUFJLEtBQUssQ0FBQzs7QUFFVixXQUFTLGdCQUFnQixDQUFDLEtB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LGdCQUFnQixDQUFDLFNBQVMsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLFVBQVUsRUFBRTtBQUM1RCxlQUFLLENBQUMsU0FBUyxHQUFHLEFBQUMsSUFBSSxJQUFJLEVBQUUsQ0FBRSxPQUFPLEVBQUUsQ0FBQztBQUN6QyxpQkFBTyxVQUFVLENBQUMsSUFBSSxDQUFDO1NBQ3hCLENBQUMsU0FBTSxDQUFDLFVBQVUsQ0FBQyxFQUFFO0FBQ3BCLHVCQUFhLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1NBQ3JCLENBQUMsQ0FBQztPQUNKLENBQUMsQ0FBQztLQUNKLENBQUMsQ0FBQztHQUNKOztBQUVELFNBQU87QUFDTCxrQkFBYyxFQUFFLGNBQWM7QUFDOUIsWUFBUSxFQUFFLG9CQUFZO0FBQUUsYUFBTyxLQUFLLENBQUM7S0FBRTtHQUN4QyxDQUFDO0NBQ0gsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL2luc3RhbGxlZFBsdWdpbnMvdGltZWxpb24vc2VydmVyL2hhbmRsZXJzL2NoYWluX3J1bm5lci5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxudmFyIF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcbnZhciBnbG9iID0gcmVxdWlyZSgnZ2xvYicpO1xudmFyIFByb21pc2UgPSByZXF1aXJlKCdibHVlYmlyZCcpO1xuXG52YXIgcGFyc2VTaGVldCA9IHJlcXVpcmUoJy4vbGliL3BhcnNlX3NoZWV0LmpzJyk7XG52YXIgcGFyc2VEYXRlTWF0aCA9IHJlcXVpcmUoJy4uL2xpYi9kYXRlX21hdGguanMnKTtcbnZhciBsb2FkRnVuY3Rpb25zID0gcmVxdWlyZSgnLi4vbGliL2xvYWRfZnVuY3Rpb25zLmpzJyk7XG52YXIgcmVwb3NpdGlvbkFyZ3VtZW50cyA9IHJlcXVpcmUoJy4vbGliL3JlcG9zaXRpb25fYXJndW1lbnRzLmpzJyk7XG52YXIgaW5kZXhBcmd1bWVudHMgPSByZXF1aXJlKCcuL2xpYi9pbmRleF9hcmd1bWVudHMuanMnKTtcbnZhciBnZXRGdW5jdGlvbkJ5TmFtZSA9IHJlcXVpcmUoJy4vbGliL2dldF9mdW5jdGlvbl9ieV9uYW1lLmpzJyk7XG52YXIgcHJlcHJvY2Vzc0NoYWluID0gcmVxdWlyZSgnLi9saWIvcHJlcHJvY2Vzc19jaGFpbicpO1xudmFyIHZhbGlkYXRlVGltZSA9IHJlcXVpcmUoJy4vbGliL3ZhbGlkYXRlX3RpbWUuanMnKTtcblxudmFyIGZ1bmN0aW9ucyAgPSBsb2FkRnVuY3Rpb25zKCdzZXJpZXNfZnVuY3Rpb25zJyk7XG52YXIgZml0RnVuY3Rpb25zICA9IGxvYWRGdW5jdGlvbnMoJ2ZpdF9mdW5jdGlvbnMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodGxDb25maWcpIHtcbiAgdmFyIHF1ZXJ5Q2FjaGUgPSB7fTtcbiAgdmFyIHN0YXRzID0ge307XG4gIHZhciBzaGVldDtcblxuICBmdW5jdGlvbiBnZXRRdWVyeUNhY2hlS2V5KHF1ZXJ5KSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KF8ub21pdChxdWVyeSwgJ2xhYmVsJykpO1xuICB9XG5cbiAgZnVuY3Rpb24gdGhyb3dXaXRoQ2VsbChjZWxsLCBleGNlcHRpb24pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJyBpbiBjZWxsICMnICsgKGNlbGwgKyAxKSArICc6ICcgKyBleGNlcHRpb24ubWVzc2FnZSk7XG4gIH1cblxuICAvLyBJbnZva2VzIGEgbW9kaWZpZXIgZnVuY3Rpb24sIHJlc29sdmluZyBhcmd1bWVudHMgaW50byBzZXJpZXMgYXMgbmVlZGVkXG4gIGZ1bmN0aW9uIGludm9rZShmbk5hbWUsIGFyZ3MpIHtcbiAgICB2YXIgZnVuY3Rpb25EZWYgPSBnZXRGdW5jdGlvbkJ5TmFtZShmbk5hbWUpO1xuXG4gICAgZnVuY3Rpb24gcmVzb2x2ZUFyZ3VtZW50KGl0ZW0pIHtcbiAgICAgIGlmIChfLmlzQXJyYXkoaXRlbSkpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKF8ubWFwKGl0ZW0sIHJlc29sdmVBcmd1bWVudCkpO1xuICAgICAgfVxuXG4gICAgICBpZiAoXy5pc09iamVjdChpdGVtKSkge1xuICAgICAgICBzd2l0Y2ggKGl0ZW0udHlwZSkge1xuICAgICAgICAgIGNhc2UgJ2Z1bmN0aW9uJzpcbiAgICAgICAgICAgIHZhciBpdGVtRnVuY3Rpb25EZWYgPSBnZXRGdW5jdGlvbkJ5TmFtZShpdGVtLmZ1bmN0aW9uKTtcbiAgICAgICAgICAgIGlmIChpdGVtRnVuY3Rpb25EZWYuY2FjaGVLZXkgJiYgcXVlcnlDYWNoZVtpdGVtRnVuY3Rpb25EZWYuY2FjaGVLZXkoaXRlbSldKSB7XG4gICAgICAgICAgICAgIHN0YXRzLnF1ZXJ5Q291bnQrKztcbiAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShfLmNsb25lRGVlcChxdWVyeUNhY2hlW2l0ZW1GdW5jdGlvbkRlZi5jYWNoZUtleShpdGVtKV0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpbnZva2UoaXRlbS5mdW5jdGlvbiwgaXRlbS5hcmd1bWVudHMpO1xuICAgICAgICAgIGNhc2UgJ3JlZmVyZW5jZSc6XG4gICAgICAgICAgICB2YXIgcmVmZXJlbmNlO1xuICAgICAgICAgICAgaWYgKGl0ZW0uc2VyaWVzKSB7XG4gICAgICAgICAgICAgIHJlZmVyZW5jZSA9IHNoZWV0W2l0ZW0ucGxvdCAtIDFdW2l0ZW0uc2VyaWVzIC0gMV07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZWZlcmVuY2UgPSB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2NoYWluTGlzdCcsXG4gICAgICAgICAgICAgICAgbGlzdDogc2hlZXRbaXRlbS5wbG90IC0gMV1cbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpbnZva2UoJ2ZpcnN0JywgW3JlZmVyZW5jZV0pO1xuICAgICAgICAgIGNhc2UgJ2NoYWluJzpcbiAgICAgICAgICAgIHJldHVybiBpbnZva2VDaGFpbihpdGVtKTtcbiAgICAgICAgICBjYXNlICdjaGFpbkxpc3QnOlxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmVDaGFpbkxpc3QoaXRlbS5saXN0KTtcbiAgICAgICAgICBjYXNlICdsaXRlcmFsJzpcbiAgICAgICAgICAgIHJldHVybiBpdGVtLnZhbHVlO1xuICAgICAgICAgIGNhc2UgJ3JlcXVlc3RMaXN0JzpcbiAgICAgICAgICBjYXNlICdzZXJpZXNMaXN0JzpcbiAgICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvciAoJ0FyZ3VtZW50IHR5cGUgbm90IHN1cHBvcnRlZDogJyArIEpTT04uc3RyaW5naWZ5KGl0ZW0pKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgfVxuICAgIH1cblxuICAgIGFyZ3MgPSByZXBvc2l0aW9uQXJndW1lbnRzKGZ1bmN0aW9uRGVmLCBhcmdzKTtcbiAgICBhcmdzID0gXy5tYXAoYXJncywgcmVzb2x2ZUFyZ3VtZW50KTtcblxuICAgIHJldHVybiBQcm9taXNlLmFsbChhcmdzKS50aGVuKGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICBhcmdzLmJ5TmFtZSA9IGluZGV4QXJndW1lbnRzKGZ1bmN0aW9uRGVmLCBhcmdzKTtcbiAgICAgIHJldHVybiBmdW5jdGlvbkRlZi5mbihhcmdzLCB0bENvbmZpZyk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBpbnZva2VDaGFpbihjaGFpbk9iaiwgcmVzdWx0KSB7XG4gICAgaWYgKGNoYWluT2JqLmNoYWluLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHJlc3VsdFswXTtcblxuICAgIHZhciBjaGFpbiA9IF8uY2xvbmUoY2hhaW5PYmouY2hhaW4pO1xuICAgIHZhciBsaW5rID0gY2hhaW4uc2hpZnQoKTtcblxuICAgIHZhciBwcm9taXNlO1xuICAgIGlmIChsaW5rLnR5cGUgPT09ICdjaGFpbicpIHtcbiAgICAgIHByb21pc2UgPSBpbnZva2VDaGFpbihsaW5rKTtcbiAgICB9IGVsc2UgaWYgKCFyZXN1bHQpIHtcbiAgICAgIHByb21pc2UgPSBpbnZva2UoJ2ZpcnN0JywgW2xpbmtdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGFyZ3MgPSBsaW5rLmFyZ3VtZW50cyA/IHJlc3VsdC5jb25jYXQobGluay5hcmd1bWVudHMpIDogcmVzdWx0O1xuICAgICAgcHJvbWlzZSA9IGludm9rZShsaW5rLmZ1bmN0aW9uLCBhcmdzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcHJvbWlzZS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgIHJldHVybiBpbnZva2VDaGFpbih7dHlwZTonY2hhaW4nLCBjaGFpbjogY2hhaW59LCBbcmVzdWx0XSk7XG4gICAgfSk7XG5cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlc29sdmVDaGFpbkxpc3QoY2hhaW5MaXN0KSB7XG4gICAgdmFyIHNlcmllc0xpc3QgPSBfLm1hcChjaGFpbkxpc3QsIGZ1bmN0aW9uIChjaGFpbikge1xuICAgICAgdmFyIHZhbHVlcyA9IGludm9rZSgnZmlyc3QnLCBbY2hhaW5dKTtcbiAgICAgIHJldHVybiB2YWx1ZXMudGhlbihmdW5jdGlvbiAoYXJncykge1xuICAgICAgICByZXR1cm4gYXJncztcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJldHVybiBQcm9taXNlLmFsbChzZXJpZXNMaXN0KS50aGVuKGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICB2YXIgbGlzdCA9IF8uY2hhaW4oYXJncykucGx1Y2soJ2xpc3QnKS5mbGF0dGVuKCkudmFsdWUoKTtcbiAgICAgIHJldHVybiB7dHlwZTogJ3Nlcmllc0xpc3QnLCBsaXN0OiBsaXN0fTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByZVByb2Nlc3NTaGVldChzaGVldCkge1xuXG4gICAgdmFyIHF1ZXJpZXMgPSB7fTtcbiAgICBfLmVhY2goc2hlZXQsIGZ1bmN0aW9uIChjaGFpbkxpc3QsIGkpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciBxdWVyaWVzSW5DZWxsID0gXy5tYXBWYWx1ZXMocHJlcHJvY2Vzc0NoYWluKGNoYWluTGlzdCksIGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICB2YWwuY2VsbCA9IGk7XG4gICAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgICAgfSk7XG4gICAgICAgIHF1ZXJpZXMgPSBfLmV4dGVuZChxdWVyaWVzLCBxdWVyaWVzSW5DZWxsKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgdGhyb3dXaXRoQ2VsbChpLCBlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBxdWVyaWVzID0gXy52YWx1ZXMocXVlcmllcyk7XG5cbiAgICB2YXIgcHJvbWlzZXMgPSBfLmNoYWluKHF1ZXJpZXMpLnZhbHVlcygpLm1hcChmdW5jdGlvbiAocXVlcnkpIHtcbiAgICAgIHJldHVybiBpbnZva2UocXVlcnkuZnVuY3Rpb24sIHF1ZXJ5LmFyZ3VtZW50cyk7XG4gICAgfSkudmFsdWUoKTtcblxuICAgIHJldHVybiBQcm9taXNlLnNldHRsZShwcm9taXNlcykudGhlbihmdW5jdGlvbiAocmVzb2x2ZWREYXRhc291cmNlcykge1xuXG4gICAgICBzdGF0cy5xdWVyeVRpbWUgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpO1xuXG4gICAgICBfLmVhY2gocXVlcmllcywgZnVuY3Rpb24gKHF1ZXJ5LCBpKSB7XG4gICAgICAgIHZhciBmdW5jdGlvbkRlZiA9IGdldEZ1bmN0aW9uQnlOYW1lKHF1ZXJ5LmZ1bmN0aW9uKTtcbiAgICAgICAgdmFyIHJlc29sdmVkRGF0YXNvdXJjZSA9IHJlc29sdmVkRGF0YXNvdXJjZXNbaV07XG5cbiAgICAgICAgaWYgKHJlc29sdmVkRGF0YXNvdXJjZS5pc1JlamVjdGVkKCkpIHtcbiAgICAgICAgICBpZiAocmVzb2x2ZWREYXRhc291cmNlLnJlYXNvbigpLmlzQm9vbSkge1xuICAgICAgICAgICAgdGhyb3cgcmVzb2x2ZWREYXRhc291cmNlLnJlYXNvbigpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvd1dpdGhDZWxsKHF1ZXJ5LmNlbGwsIHJlc29sdmVkRGF0YXNvdXJjZS5yZWFzb24oKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcXVlcnlDYWNoZVtmdW5jdGlvbkRlZi5jYWNoZUtleShxdWVyeSldID0gcmVzb2x2ZWREYXRhc291cmNlLnZhbHVlKCk7XG4gICAgICB9KTtcblxuICAgICAgc3RhdHMuY2FjaGVDb3VudCA9IF8ua2V5cyhxdWVyeUNhY2hlKS5sZW5ndGg7XG4gICAgICByZXR1cm4gc2hlZXQ7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBwcm9jZXNzUmVxdWVzdChyZXF1ZXN0KSB7XG4gICAgaWYgKCFyZXF1ZXN0KSB0aHJvdyBuZXcgRXJyb3IoJ0VtcHR5IHJlcXVlc3QgYm9keScpO1xuXG4gICAgdmFsaWRhdGVUaW1lKHJlcXVlc3QudGltZSwgdGxDb25maWcpO1xuXG4gICAgdGxDb25maWcudGltZSA9IHJlcXVlc3QudGltZTtcbiAgICB0bENvbmZpZy50aW1lLnRvID0gcGFyc2VEYXRlTWF0aChyZXF1ZXN0LnRpbWUudG8sIHRydWUpLnZhbHVlT2YoKTtcbiAgICB0bENvbmZpZy50aW1lLmZyb20gPSBwYXJzZURhdGVNYXRoKHJlcXVlc3QudGltZS5mcm9tKS52YWx1ZU9mKCk7XG4gICAgdGxDb25maWcuc2V0VGFyZ2V0U2VyaWVzKCk7XG5cbiAgICBzdGF0cy5pbnZva2VUaW1lID0gKG5ldyBEYXRlKCkpLmdldFRpbWUoKTtcbiAgICBzdGF0cy5xdWVyeUNvdW50ID0gMDtcbiAgICBxdWVyeUNhY2hlID0ge307XG5cbiAgICAvLyBUaGlzIGlzIHNldHRpbmcgdGhlIFwiZ2xvYmFsXCIgc2hlZXQsIHJlcXVpcmVkIGZvciByZXNvbHZpbmcgcmVmZXJlbmNlc1xuICAgIHNoZWV0ID0gcGFyc2VTaGVldChyZXF1ZXN0LnNoZWV0KTtcbiAgICByZXR1cm4gcHJlUHJvY2Vzc1NoZWV0KHNoZWV0KS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBfLm1hcChzaGVldCwgZnVuY3Rpb24gKGNoYWluTGlzdCwgaSkge1xuICAgICAgICByZXR1cm4gcmVzb2x2ZUNoYWluTGlzdChjaGFpbkxpc3QpLnRoZW4oZnVuY3Rpb24gKHNlcmllc0xpc3QpIHtcbiAgICAgICAgICBzdGF0cy5zaGVldFRpbWUgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpO1xuICAgICAgICAgIHJldHVybiBzZXJpZXNMaXN0Lmxpc3Q7XG4gICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgdGhyb3dXaXRoQ2VsbChpLCBlKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcHJvY2Vzc1JlcXVlc3Q6IHByb2Nlc3NSZXF1ZXN0LFxuICAgIGdldFN0YXRzOiBmdW5jdGlvbiAoKSB7IHJldHVybiBzdGF0czsgfVxuICB9O1xufTtcblxuXG4vKlxuZnVuY3Rpb24gbG9nT2JqKG9iaiwgdGhpbmcpIHtcbiAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KG9iaiwgbnVsbCwgdGhpbmcgPyAnICcgOiB1bmRlZmluZWQpO1xufVxuXG5mdW5jdGlvbiBkZWJ1Z1NoZWV0KHNoZWV0KSB7XG4gIHNoZWV0ID0gcHJvY2Vzc1JlcXVlc3Qoc2hlZXQpO1xuICBQcm9taXNlLmFsbChzaGVldCkudGhlbihmdW5jdGlvbiAoc2hlZXQpIHtcbiAgICBjb25zb2xlLmxvZyhsb2dPYmooc2hlZXQsIDEpKTtcbiAgICBjb25zb2xlLmxvZyhsb2dPYmooe2RvbmU6dHJ1ZX0pKTtcbiAgICByZXR1cm4gc2hlZXQ7XG4gIH0pO1xufVxuXG5kZWJ1Z1NoZWV0KFxuICB7c2hlZXQ6WydlcyhxPS0qKSddLCB0aW1lOiB0bENvbmZpZy50aW1lfVxuKTtcbiovXG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/handlers/chain_runner.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/handlers/chain_runner.js",
      "sourcesContent": [
        "\nvar _ = require('lodash');\nvar glob = require('glob');\nvar Promise = require('bluebird');\n\nvar parseSheet = require('./lib/parse_sheet.js');\nvar parseDateMath = require('../lib/date_math.js');\nvar loadFunctions = require('../lib/load_functions.js');\nvar repositionArguments = require('./lib/reposition_arguments.js');\nvar indexArguments = require('./lib/index_arguments.js');\nvar getFunctionByName = require('./lib/get_function_by_name.js');\nvar preprocessChain = require('./lib/preprocess_chain');\nvar validateTime = require('./lib/validate_time.js');\n\nvar functions  = loadFunctions('series_functions');\nvar fitFunctions  = loadFunctions('fit_functions');\n\nmodule.exports = function (tlConfig) {\n  var queryCache = {};\n  var stats = {};\n  var sheet;\n\n  function getQueryCacheKey(query) {\n    return JSON.stringify(_.omit(query, 'label'));\n  }\n\n  function throwWithCell(cell, exception) {\n    throw new Error(' in cell #' + (cell + 1) + ': ' + exception.message);\n  }\n\n  // Invokes a modifier function, resolving arguments into series as needed\n  function invoke(fnName, args) {\n    var functionDef = getFunctionByName(fnName);\n\n    function resolveArgument(item) {\n      if (_.isArray(item)) {\n        return Promise.all(_.map(item, resolveArgument));\n      }\n\n      if (_.isObject(item)) {\n        switch (item.type) {\n          case 'function':\n            var itemFunctionDef = getFunctionByName(item.function);\n            if (itemFunctionDef.cacheKey && queryCache[itemFunctionDef.cacheKey(item)]) {\n              stats.queryCount++;\n              return Promise.resolve(_.cloneDeep(queryCache[itemFunctionDef.cacheKey(item)]));\n            }\n            return invoke(item.function, item.arguments);\n          case 'reference':\n            var reference;\n            if (item.series) {\n              reference = sheet[item.plot - 1][item.series - 1];\n            } else {\n              reference = {\n                type: 'chainList',\n                list: sheet[item.plot - 1]\n              };\n            }\n            return invoke('first', [reference]);\n          case 'chain':\n            return invokeChain(item);\n          case 'chainList':\n            return resolveChainList(item.list);\n          case 'literal':\n            return item.value;\n          case 'requestList':\n          case 'seriesList':\n            return item;\n        }\n        throw new Error ('Argument type not supported: ' + JSON.stringify(item));\n      } else {\n        return item;\n      }\n    }\n\n    args = repositionArguments(functionDef, args);\n    args = _.map(args, resolveArgument);\n\n    return Promise.all(args).then(function (args) {\n      args.byName = indexArguments(functionDef, args);\n      return functionDef.fn(args, tlConfig);\n    });\n  }\n\n  function invokeChain(chainObj, result) {\n    if (chainObj.chain.length === 0) return result[0];\n\n    var chain = _.clone(chainObj.chain);\n    var link = chain.shift();\n\n    var promise;\n    if (link.type === 'chain') {\n      promise = invokeChain(link);\n    } else if (!result) {\n      promise = invoke('first', [link]);\n    } else {\n      var args = link.arguments ? result.concat(link.arguments) : result;\n      promise = invoke(link.function, args);\n    }\n\n    return promise.then(function (result) {\n      return invokeChain({type:'chain', chain: chain}, [result]);\n    });\n\n  }\n\n  function resolveChainList(chainList) {\n    var seriesList = _.map(chainList, function (chain) {\n      var values = invoke('first', [chain]);\n      return values.then(function (args) {\n        return args;\n      });\n    });\n    return Promise.all(seriesList).then(function (args) {\n      var list = _.chain(args).pluck('list').flatten().value();\n      return {type: 'seriesList', list: list};\n    });\n  }\n\n  function preProcessSheet(sheet) {\n\n    var queries = {};\n    _.each(sheet, function (chainList, i) {\n      try {\n        var queriesInCell = _.mapValues(preprocessChain(chainList), function (val) {\n          val.cell = i;\n          return val;\n        });\n        queries = _.extend(queries, queriesInCell);\n      } catch (e) {\n        throwWithCell(i, e);\n      }\n    });\n    queries = _.values(queries);\n\n    var promises = _.chain(queries).values().map(function (query) {\n      return invoke(query.function, query.arguments);\n    }).value();\n\n    return Promise.settle(promises).then(function (resolvedDatasources) {\n\n      stats.queryTime = (new Date()).getTime();\n\n      _.each(queries, function (query, i) {\n        var functionDef = getFunctionByName(query.function);\n        var resolvedDatasource = resolvedDatasources[i];\n\n        if (resolvedDatasource.isRejected()) {\n          if (resolvedDatasource.reason().isBoom) {\n            throw resolvedDatasource.reason();\n          } else {\n            throwWithCell(query.cell, resolvedDatasource.reason());\n          }\n        }\n\n        queryCache[functionDef.cacheKey(query)] = resolvedDatasource.value();\n      });\n\n      stats.cacheCount = _.keys(queryCache).length;\n      return sheet;\n    });\n  }\n\n  function processRequest(request) {\n    if (!request) throw new Error('Empty request body');\n\n    validateTime(request.time, tlConfig);\n\n    tlConfig.time = request.time;\n    tlConfig.time.to = parseDateMath(request.time.to, true).valueOf();\n    tlConfig.time.from = parseDateMath(request.time.from).valueOf();\n    tlConfig.setTargetSeries();\n\n    stats.invokeTime = (new Date()).getTime();\n    stats.queryCount = 0;\n    queryCache = {};\n\n    // This is setting the \"global\" sheet, required for resolving references\n    sheet = parseSheet(request.sheet);\n    return preProcessSheet(sheet).then(function () {\n      return _.map(sheet, function (chainList, i) {\n        return resolveChainList(chainList).then(function (seriesList) {\n          stats.sheetTime = (new Date()).getTime();\n          return seriesList.list;\n        }).catch(function (e) {\n          throwWithCell(i, e);\n        });\n      });\n    });\n  }\n\n  return {\n    processRequest: processRequest,\n    getStats: function () { return stats; }\n  };\n};\n\n\n/*\nfunction logObj(obj, thing) {\n  return JSON.stringify(obj, null, thing ? ' ' : undefined);\n}\n\nfunction debugSheet(sheet) {\n  sheet = processRequest(sheet);\n  Promise.all(sheet).then(function (sheet) {\n    console.log(logObj(sheet, 1));\n    console.log(logObj({done:true}));\n    return sheet;\n  });\n}\n\ndebugSheet(\n  {sheet:['es(q=-*)'], time: tlConfig.time}\n);\n*/\n"
      ]
    },
    "mtime": 1467119944363
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/handlers/lib/parse_sheet.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar fs = require('fs');\nvar path = require('path');\nvar _ = require('lodash');\nvar grammar = fs.readFileSync(path.resolve(__dirname, '../../../public/chain.peg'), 'utf8');\nvar PEG = require('pegjs');\nvar Parser = PEG.buildParser(grammar);\n\nmodule.exports = function parseSheet(sheet) {\n  return _.map(sheet, function (plot) {\n    try {\n      return Parser.parse(plot).tree;\n    } catch (e) {\n      var message;\n      if (e.expected) {\n        throw new Error('Expected: ' + e.expected[0].description + ' @ character ' + e.column);\n      } else {\n        throw e;\n      }\n    }\n  });\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvaGFuZGxlcnMvbGliL3BhcnNlX3NoZWV0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBSSxFQUFFLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ3ZCLElBQUksSUFBSSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUMzQixJQUFJLENBQUMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDMUIsSUFBSSxPQUFPLEdBQUcsRUFBRSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSwyQkFBMkIsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQzVGLElBQUksR0FBRyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUMzQixJQUFJLE1BQU0sR0FBRyxHQUFHLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxDQUFDOztBQUV0QyxNQUFNLENBQUMsT0FBTyxHQUFHLFNBQVMsVUFBVSxDQUFDLEtBQUssRUFBRTtBQUMxQyxTQUFPLENBQUMsQ0FBQyxHQUFHLENBQUMsS0FBSyxFQUFFLFVBQVUsSUFBSSxFQUFFO0FBQ2xDLFFBQUk7QUFDRixhQUFPLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDO0tBQ2hDLENBQUMsT0FBTyxDQUFDLEVBQUU7QUFDVixVQUFJLE9BQU8sQ0FBQztBQUNaLFVBQUksQ0FBQyxDQUFDLFFBQVEsRUFBRTtBQUNkLGNBQU0sSUFBSSxLQUFLLENBQUMsWUFBWSxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsV0FBVyxHQUFHLGVBQWUsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUM7T0FDeEYsTUFBTTtBQUNMLGNBQU0sQ0FBQyxDQUFDO09BQ1Q7S0FDRjtHQUNGLENBQUMsQ0FBQztDQUNKLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9pbnN0YWxsZWRQbHVnaW5zL3RpbWVsaW9uL3NlcnZlci9oYW5kbGVycy9saWIvcGFyc2Vfc2hlZXQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZnMgPSByZXF1aXJlKCdmcycpO1xudmFyIHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XG52YXIgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xudmFyIGdyYW1tYXIgPSBmcy5yZWFkRmlsZVN5bmMocGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgJy4uLy4uLy4uL3B1YmxpYy9jaGFpbi5wZWcnKSwgJ3V0ZjgnKTtcbnZhciBQRUcgPSByZXF1aXJlKCdwZWdqcycpO1xudmFyIFBhcnNlciA9IFBFRy5idWlsZFBhcnNlcihncmFtbWFyKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBwYXJzZVNoZWV0KHNoZWV0KSB7XG4gIHJldHVybiBfLm1hcChzaGVldCwgZnVuY3Rpb24gKHBsb3QpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIFBhcnNlci5wYXJzZShwbG90KS50cmVlO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHZhciBtZXNzYWdlO1xuICAgICAgaWYgKGUuZXhwZWN0ZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFeHBlY3RlZDogJyArIGUuZXhwZWN0ZWRbMF0uZGVzY3JpcHRpb24gKyAnIEAgY2hhcmFjdGVyICcgKyBlLmNvbHVtbik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBlO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/handlers/lib/parse_sheet.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,EAAE,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;AACvB,IAAI,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;AAC3B,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC1B,IAAI,OAAO,GAAG,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,2BAA2B,CAAC,EAAE,MAAM,CAAC,CAAC;AAC5F,IAAI,GAAG,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC;AAC3B,IAAI,MAAM,GAAG,GAAG,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;;AAEtC,MAAM,CAAC,OAAO,GAAG,SAAS,UAAU,CAAC,KAAK,EAAE;AAC1C,SAAO,CAAC,CAAC,GAAG,CAAC,KAAK,EAAE,UAAU,IAAI,EAAE;AAClC,QAAI;AACF,aAAO,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC;KAChC,CAAC,OAAO,CAAC,EAAE;AACV,UAAI,OAAO,CAAC;AACZ,UAAI,CAAC,CAAC,QAAQ,EAAE;AACd,cAAM,IAAI,KAAK,CAAC,YAAY,GAAG,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,WAAW,GAAG,eAAe,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC;OACxF,MAAM;AACL,cAAM,CAAC,CAAC;OACT;KACF;GACF,CAAC,CAAC;CACJ,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/handlers/lib/parse_sheet.js",
      "sourcesContent": [
        "var fs = require('fs');\nvar path = require('path');\nvar _ = require('lodash');\nvar grammar = fs.readFileSync(path.resolve(__dirname, '../../../public/chain.peg'), 'utf8');\nvar PEG = require('pegjs');\nvar Parser = PEG.buildParser(grammar);\n\nmodule.exports = function parseSheet(sheet) {\n  return _.map(sheet, function (plot) {\n    try {\n      return Parser.parse(plot).tree;\n    } catch (e) {\n      var message;\n      if (e.expected) {\n        throw new Error('Expected: ' + e.expected[0].description + ' @ character ' + e.column);\n      } else {\n        throw e;\n      }\n    }\n  });\n};\n"
      ]
    },
    "mtime": 1467119944519
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/lib/date_math.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _ = require('lodash');\nvar moment = require('moment');\n\nvar units = ['y', 'M', 'w', 'd', 'h', 'm', 's'];\n\n/* This is a simplified version of elasticsearch's date parser */\nfunction parse(text, roundUp) {\n  if (!text) {\n    return undefined;\n  }\n  if (moment.isMoment(text)) {\n    return text;\n  }\n  if (_.isDate(text)) {\n    return moment(text);\n  }\n\n  var time;\n  var mathString = '';\n  var index;\n  var parseString;\n\n  if (text.substring(0, 3) === 'now') {\n    time = moment();\n    mathString = text.substring('now'.length);\n  } else {\n    index = text.indexOf('||');\n    if (index === -1) {\n      parseString = text;\n      mathString = ''; // nothing else\n    } else {\n        parseString = text.substring(0, index);\n        mathString = text.substring(index + 2);\n      }\n    // We're going to just require ISO8601 timestamps, k?\n    time = moment(parseString);\n  }\n\n  if (!mathString.length) {\n    return time;\n  }\n\n  return parseDateMath(mathString, time, roundUp);\n}\n\nfunction parseDateMath(mathString, time, roundUp) {\n  var dateTime = time;\n\n  for (var i = 0; i < mathString.length;) {\n    var c = mathString.charAt(i++);\n    var type;\n    var num;\n    var unit;\n\n    if (c === '/') {\n      type = 0;\n    } else if (c === '+') {\n      type = 1;\n    } else if (c === '-') {\n      type = 2;\n    } else {\n      return undefined;\n    }\n\n    if (isNaN(mathString.charAt(i))) {\n      num = 1;\n    } else if (mathString.length === 2) {\n      num = mathString.charAt(i);\n    } else {\n      var numFrom = i;\n      while (!isNaN(mathString.charAt(i))) {\n        i++;\n        if (i > 10) {\n          return undefined;\n        }\n      }\n      num = parseInt(mathString.substring(numFrom, i), 10);\n    }\n\n    if (type === 0) {\n      // rounding is only allowed on whole, single, units (eg M or 1M, not 0.5M or 2M)\n      if (num !== 1) {\n        return undefined;\n      }\n    }\n    unit = mathString.charAt(i++);\n\n    if (!_.contains(units, unit)) {\n      return undefined;\n    } else {\n      if (type === 0) {\n        if (roundUp) {\n          dateTime.endOf(unit);\n        } else {\n          dateTime.startOf(unit);\n        }\n      } else if (type === 1) {\n        dateTime.add(num, unit);\n      } else if (type === 2) {\n        dateTime.subtract(num, unit);\n      }\n    }\n  }\n  return dateTime;\n}\n\nmodule.exports = parse;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvbGliL2RhdGVfbWF0aC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQUksQ0FBQyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUMxQixJQUFJLE1BQU0sR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7O0FBRS9CLElBQUksS0FBSyxHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7OztBQUdoRCxTQUFTLEtBQUssQ0FBQyxJQUFJLEVBQUUsT0FBTyxFQUFFO0FBQzVCLE1BQUksQ0FBQyxJQUFJLEVBQUU7QUFDVCxXQUFPLFNBQVMsQ0FBQztHQUNsQjtBQUNELE1BQUksTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsRUFBRTtBQUN6QixXQUFPLElBQUksQ0FBQztHQUNiO0FBQ0QsTUFBSSxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFO0FBQ2xCLFdBQU8sTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO0dBQ3JCOztBQUVELE1BQUksSUFBSSxDQUFDO0FBQ1QsTUFBSSxVQUFVLEdBQUcsRUFBRSxDQUFDO0FBQ3BCLE1BQUksS0FBSyxDQUFDO0FBQ1YsTUFBSSxXQUFXLENBQUM7O0FBRWhCLE1BQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssS0FBSyxFQUFFO0FBQ2xDLFFBQUksR0FBRyxNQUFNLEVBQUUsQ0FBQztBQUNoQixjQUFVLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7R0FDM0MsTUFBTTtBQUNMLFNBQUssR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQzNCLFFBQUksS0FBSyxLQUFL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QUMsQ0FBQztPQUN6QixNQUFNLElBQUksSUFBSSxLQUFLLENBQUMsRUFBRTtBQUNyQixnQkFBUSxDQUFDLFFBQVEsQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUM7T0FDOUI7S0FDRjtHQUNGO0FBQ0QsU0FBTyxRQUFRLENBQUM7Q0FDakI7O0FBRUQsTUFBTSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9pbnN0YWxsZWRQbHVnaW5zL3RpbWVsaW9uL3NlcnZlci9saWIvZGF0ZV9tYXRoLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcbnZhciBtb21lbnQgPSByZXF1aXJlKCdtb21lbnQnKTtcblxudmFyIHVuaXRzID0gWyd5JywgJ00nLCAndycsICdkJywgJ2gnLCAnbScsICdzJ107XG5cbi8qIFRoaXMgaXMgYSBzaW1wbGlmaWVkIHZlcnNpb24gb2YgZWxhc3RpY3NlYXJjaCdzIGRhdGUgcGFyc2VyICovXG5mdW5jdGlvbiBwYXJzZSh0ZXh0LCByb3VuZFVwKSB7XG4gIGlmICghdGV4dCkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgaWYgKG1vbWVudC5pc01vbWVudCh0ZXh0KSkge1xuICAgIHJldHVybiB0ZXh0O1xuICB9XG4gIGlmIChfLmlzRGF0ZSh0ZXh0KSkge1xuICAgIHJldHVybiBtb21lbnQodGV4dCk7XG4gIH1cblxuICB2YXIgdGltZTtcbiAgdmFyIG1hdGhTdHJpbmcgPSAnJztcbiAgdmFyIGluZGV4O1xuICB2YXIgcGFyc2VTdHJpbmc7XG5cbiAgaWYgKHRleHQuc3Vic3RyaW5nKDAsIDMpID09PSAnbm93Jykge1xuICAgIHRpbWUgPSBtb21lbnQoKTtcbiAgICBtYXRoU3RyaW5nID0gdGV4dC5zdWJzdHJpbmcoJ25vdycubGVuZ3RoKTtcbiAgfSBlbHNlIHtcbiAgICBpbmRleCA9IHRleHQuaW5kZXhPZignfHwnKTtcbiAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICBwYXJzZVN0cmluZyA9IHRleHQ7XG4gICAgICBtYXRoU3RyaW5nID0gJyc7IC8vIG5vdGhpbmcgZWxzZVxuICAgIH0gZWxzZSB7XG4gICAgICBwYXJzZVN0cmluZyA9IHRleHQuc3Vic3RyaW5nKDAsIGluZGV4KTtcbiAgICAgIG1hdGhTdHJpbmcgPSB0ZXh0LnN1YnN0cmluZyhpbmRleCArIDIpO1xuICAgIH1cbiAgICAvLyBXZSdyZSBnb2luZyB0byBqdXN0IHJlcXVpcmUgSVNPODYwMSB0aW1lc3RhbXBzLCBrP1xuICAgIHRpbWUgPSBtb21lbnQocGFyc2VTdHJpbmcpO1xuICB9XG5cbiAgaWYgKCFtYXRoU3RyaW5nLmxlbmd0aCkge1xuICAgIHJldHVybiB0aW1lO1xuICB9XG5cbiAgcmV0dXJuIHBhcnNlRGF0ZU1hdGgobWF0aFN0cmluZywgdGltZSwgcm91bmRVcCk7XG59XG5cbmZ1bmN0aW9uIHBhcnNlRGF0ZU1hdGgobWF0aFN0cmluZywgdGltZSwgcm91bmRVcCkge1xuICB2YXIgZGF0ZVRpbWUgPSB0aW1lO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbWF0aFN0cmluZy5sZW5ndGg7KSB7XG4gICAgdmFyIGMgPSBtYXRoU3RyaW5nLmNoYXJBdChpKyspO1xuICAgIHZhciB0eXBlO1xuICAgIHZhciBudW07XG4gICAgdmFyIHVuaXQ7XG5cbiAgICBpZiAoYyA9PT0gJy8nKSB7XG4gICAgICB0eXBlID0gMDtcbiAgICB9IGVsc2UgaWYgKGMgPT09ICcrJykge1xuICAgICAgdHlwZSA9IDE7XG4gICAgfSBlbHNlIGlmIChjID09PSAnLScpIHtcbiAgICAgIHR5cGUgPSAyO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGlmIChpc05hTihtYXRoU3RyaW5nLmNoYXJBdChpKSkpIHtcbiAgICAgIG51bSA9IDE7XG4gICAgfSBlbHNlIGlmIChtYXRoU3RyaW5nLmxlbmd0aCA9PT0gMikge1xuICAgICAgbnVtID0gbWF0aFN0cmluZy5jaGFyQXQoaSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBudW1Gcm9tID0gaTtcbiAgICAgIHdoaWxlICghaXNOYU4obWF0aFN0cmluZy5jaGFyQXQoaSkpKSB7XG4gICAgICAgIGkrKztcbiAgICAgICAgaWYgKGkgPiAxMCkge1xuICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIG51bSA9IHBhcnNlSW50KG1hdGhTdHJpbmcuc3Vic3RyaW5nKG51bUZyb20sIGkpLCAxMCk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGUgPT09IDApIHtcbiAgICAgIC8vIHJvdW5kaW5nIGlzIG9ubHkgYWxsb3dlZCBvbiB3aG9sZSwgc2luZ2xlLCB1bml0cyAoZWcgTSBvciAxTSwgbm90IDAuNU0gb3IgMk0pXG4gICAgICBpZiAobnVtICE9PSAxKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfVxuICAgIHVuaXQgPSBtYXRoU3RyaW5nLmNoYXJBdChpKyspO1xuXG4gICAgaWYgKCFfLmNvbnRhaW5zKHVuaXRzLCB1bml0KSkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHR5cGUgPT09IDApIHtcbiAgICAgICAgaWYgKHJvdW5kVXApIHtcbiAgICAgICAgICBkYXRlVGltZS5lbmRPZih1bml0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkYXRlVGltZS5zdGFydE9mKHVuaXQpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHR5cGUgPT09IDEpIHtcbiAgICAgICAgZGF0ZVRpbWUuYWRkKG51bSwgdW5pdCk7XG4gICAgICB9IGVsc2UgaWYgKHR5cGUgPT09IDIpIHtcbiAgICAgICAgZGF0ZVRpbWUuc3VidHJhY3QobnVtLCB1bml0KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIGRhdGVUaW1lO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHBhcnNlOyJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/lib/date_math.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/lib/date_math.js",
      "sourcesContent": [
        "var _ = require('lodash');\nvar moment = require('moment');\n\nvar units = ['y', 'M', 'w', 'd', 'h', 'm', 's'];\n\n/* This is a simplified version of elasticsearch's date parser */\nfunction parse(text, roundUp) {\n  if (!text) {\n    return undefined;\n  }\n  if (moment.isMoment(text)) {\n    return text;\n  }\n  if (_.isDate(text)) {\n    return moment(text);\n  }\n\n  var time;\n  var mathString = '';\n  var index;\n  var parseString;\n\n  if (text.substring(0, 3) === 'now') {\n    time = moment();\n    mathString = text.substring('now'.length);\n  } else {\n    index = text.indexOf('||');\n    if (index === -1) {\n      parseString = text;\n      mathString = ''; // nothing else\n    } else {\n      parseString = text.substring(0, index);\n      mathString = text.substring(index + 2);\n    }\n    // We're going to just require ISO8601 timestamps, k?\n    time = moment(parseString);\n  }\n\n  if (!mathString.length) {\n    return time;\n  }\n\n  return parseDateMath(mathString, time, roundUp);\n}\n\nfunction parseDateMath(mathString, time, roundUp) {\n  var dateTime = time;\n\n  for (var i = 0; i < mathString.length;) {\n    var c = mathString.charAt(i++);\n    var type;\n    var num;\n    var unit;\n\n    if (c === '/') {\n      type = 0;\n    } else if (c === '+') {\n      type = 1;\n    } else if (c === '-') {\n      type = 2;\n    } else {\n      return undefined;\n    }\n\n    if (isNaN(mathString.charAt(i))) {\n      num = 1;\n    } else if (mathString.length === 2) {\n      num = mathString.charAt(i);\n    } else {\n      var numFrom = i;\n      while (!isNaN(mathString.charAt(i))) {\n        i++;\n        if (i > 10) {\n          return undefined;\n        }\n      }\n      num = parseInt(mathString.substring(numFrom, i), 10);\n    }\n\n    if (type === 0) {\n      // rounding is only allowed on whole, single, units (eg M or 1M, not 0.5M or 2M)\n      if (num !== 1) {\n        return undefined;\n      }\n    }\n    unit = mathString.charAt(i++);\n\n    if (!_.contains(units, unit)) {\n      return undefined;\n    } else {\n      if (type === 0) {\n        if (roundUp) {\n          dateTime.endOf(unit);\n        } else {\n          dateTime.startOf(unit);\n        }\n      } else if (type === 1) {\n        dateTime.add(num, unit);\n      } else if (type === 2) {\n        dateTime.subtract(num, unit);\n      }\n    }\n  }\n  return dateTime;\n}\n\nmodule.exports = parse;"
      ]
    },
    "mtime": 1467119944363
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/lib/load_functions.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _ = require('lodash');\nvar glob = require('glob');\nvar path = require('path');\n\nmodule.exports = function (directory) {\n\n  function getTuple(directory, name) {\n    var func = require('../' + directory + '/' + name);\n    return [name, require('../' + directory + '/' + name)];\n  }\n\n  // Get a list of all files and use the filename as the object key\n  var files = _.map(glob.sync(path.resolve(__dirname, '../' + directory + '/*.js')), function (file) {\n    var name = file.substring(file.lastIndexOf('/') + 1, file.lastIndexOf('.'));\n    return getTuple(directory, name);\n  });\n\n  // Get a list of all directories with an index.js, use the directory name as the key in the object\n  var directories = _.chain(glob.sync(path.resolve(__dirname, '../' + directory + '/*/index.js'))).filter(function (file) {\n    return file.match(/__test__/) == null;\n  }).map(function (file) {\n    var parts = file.split('/');\n    var name = parts[parts.length - 2];\n    return getTuple(directory, parts[parts.length - 2]);\n  }).value();\n\n  var functions = _.zipObject(files.concat(directories));\n\n  _.each(functions, function (func, name) {\n    if (func.aliases) {\n      _.each(func.aliases, function (alias) {\n        var aliasFn = _.clone(func);\n        aliasFn.isAlias = true;\n        functions[alias] = aliasFn;\n      });\n    }\n  });\n\n  return functions;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvbGliL2xvYWRfZnVuY3Rpb25zLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBSSxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQzFCLElBQUksSUFBSSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUMzQixJQUFJLElBQUksR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7O0FBRTNCLE1BQU0sQ0FBQyxPQUFPLEdBQUcsVUFBVSxTQUFTLEVBQUU7O0FBRXBDLFdBQVMsUUFBUSxDQUFDLFNBQVMsRUFBRSxJQUFJLEVBQUU7QUFDakMsUUFBSSxJQUFJLEdBQUcsT0FBTyxDQUFDLEtBQUssR0FBRyxTQUFTLEdBQUcsR0FBRyxHQUFHLElBQUksQ0FBQyxDQUFDO0FBQ25ELFdBQU8sQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDLEtBQUssR0FBRyxTQUFTLEdBQUcsR0FBRyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUM7R0FDeEQ7OztBQUdELE1BQUksS0FBSyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSxLQUFLLEdBQUcsU0FBUyxHQUFHLE9BQU8sQ0FBQyxDQUFDLEVBQUUsVUFBVSxJQUFJLEVBQUU7QUFDakcsUUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDNUUsV0FBTyxRQUFRLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQyxDQUFDO0dBQ2xDLENBQUMsQ0FBQzs7O0FBR0gsTUFBSSxXQUFXLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxFQUFFLEtBQUssR0FBRyxTQUFTLEdBQUcsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUMvRixNQUFNLENBQUMsVUFBVSxJQUFJLEVBQUU7QUFDdEIsV0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxJQUFJLElBQUksQ0FBQztHQUN2QyxDQUFDLENBQ0QsR0FBRyxDQUFDLFVBQVUsSUFBSSxFQUFFO0FBQ25CLFFBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDNUIsUUFBSSxJQUFJLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDbkMsV0FBTyxRQUFRLENBQUMsU0FBUyxFQUFFLEtBQUssQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7R0FDckQsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDOztBQUVYLE1BQUksU0FBUyxHQUFHLENBQUMsQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDOztBQUV2RCxHQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxVQUFVLElBQUksRUFBRSxJQUFJLEVBQUU7QUFDdEMsUUFBSSxJQUFJLENBQUMsT0FBTyxFQUFFO0FBQ2hCLE9BQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxVQUFVLEtBQUssRUFBRTtBQUNwQyxZQUFJLE9BQU8sR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQzVCLGVBQU8sQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDO0FBQ3ZCLGlCQUFTLENBQUMsS0FBSyxDQUFDLEdBQUcsT0FBTyxDQUFDO09BQzVCLENBQUMsQ0FBQztLQUNKO0dBQ0YsQ0FBQyxDQUFDOztBQUVILFNBQU8sU0FBUyxDQUFDO0NBQ2xCLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9pbnN0YWxsZWRQbHVnaW5zL3RpbWVsaW9uL3NlcnZlci9saWIvbG9hZF9mdW5jdGlvbnMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xudmFyIGdsb2IgPSByZXF1aXJlKCdnbG9iJyk7XG52YXIgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZGlyZWN0b3J5KSB7XG5cbiAgZnVuY3Rpb24gZ2V0VHVwbGUoZGlyZWN0b3J5LCBuYW1lKSB7XG4gICAgdmFyIGZ1bmMgPSByZXF1aXJlKCcuLi8nICsgZGlyZWN0b3J5ICsgJy8nICsgbmFtZSk7XG4gICAgcmV0dXJuIFtuYW1lLCByZXF1aXJlKCcuLi8nICsgZGlyZWN0b3J5ICsgJy8nICsgbmFtZSldO1xuICB9XG5cbiAgLy8gR2V0IGEgbGlzdCBvZiBhbGwgZmlsZXMgYW5kIHVzZSB0aGUgZmlsZW5hbWUgYXMgdGhlIG9iamVjdCBrZXlcbiAgdmFyIGZpbGVzID0gXy5tYXAoZ2xvYi5zeW5jKHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsICcuLi8nICsgZGlyZWN0b3J5ICsgJy8qLmpzJykpLCBmdW5jdGlvbiAoZmlsZSkge1xuICAgIHZhciBuYW1lID0gZmlsZS5zdWJzdHJpbmcoZmlsZS5sYXN0SW5kZXhPZignLycpICsgMSwgZmlsZS5sYXN0SW5kZXhPZignLicpKTtcbiAgICByZXR1cm4gZ2V0VHVwbGUoZGlyZWN0b3J5LCBuYW1lKTtcbiAgfSk7XG5cbiAgLy8gR2V0IGEgbGlzdCBvZiBhbGwgZGlyZWN0b3JpZXMgd2l0aCBhbiBpbmRleC5qcywgdXNlIHRoZSBkaXJlY3RvcnkgbmFtZSBhcyB0aGUga2V5IGluIHRoZSBvYmplY3RcbiAgdmFyIGRpcmVjdG9yaWVzID0gXy5jaGFpbihnbG9iLnN5bmMocGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgJy4uLycgKyBkaXJlY3RvcnkgKyAnLyovaW5kZXguanMnKSkpXG4gIC5maWx0ZXIoZnVuY3Rpb24gKGZpbGUpIHtcbiAgICByZXR1cm4gZmlsZS5tYXRjaCgvX190ZXN0X18vKSA9PSBudWxsO1xuICB9KVxuICAubWFwKGZ1bmN0aW9uIChmaWxlKSB7XG4gICAgdmFyIHBhcnRzID0gZmlsZS5zcGxpdCgnLycpO1xuICAgIHZhciBuYW1lID0gcGFydHNbcGFydHMubGVuZ3RoIC0gMl07XG4gICAgcmV0dXJuIGdldFR1cGxlKGRpcmVjdG9yeSwgcGFydHNbcGFydHMubGVuZ3RoIC0gMl0pO1xuICB9KS52YWx1ZSgpO1xuXG4gIHZhciBmdW5jdGlvbnMgPSBfLnppcE9iamVjdChmaWxlcy5jb25jYXQoZGlyZWN0b3JpZXMpKTtcblxuICBfLmVhY2goZnVuY3Rpb25zLCBmdW5jdGlvbiAoZnVuYywgbmFtZSkge1xuICAgIGlmIChmdW5jLmFsaWFzZXMpIHtcbiAgICAgIF8uZWFjaChmdW5jLmFsaWFzZXMsIGZ1bmN0aW9uIChhbGlhcykge1xuICAgICAgICB2YXIgYWxpYXNGbiA9IF8uY2xvbmUoZnVuYyk7XG4gICAgICAgIGFsaWFzRm4uaXNBbGlhcyA9IHRydWU7XG4gICAgICAgIGZ1bmN0aW9uc1thbGlhc10gPSBhbGlhc0ZuO1xuICAgICAgfSk7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gZnVuY3Rpb25zO1xufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/lib/load_functions.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC1B,IAAI,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;AAC3B,IAAI,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;;AAE3B,MAAM,CAAC,OAAO,GAAG,UAAU,SAAS,EAAE;;AAEpC,WAAS,QAAQ,CAAC,SAAS,EAAE,IAAI,EAAE;AACjC,QAAI,IAAI,GAAG,OAAO,CAAC,KAAK,GAAG,SAAS,GAAG,GAAG,GAAG,IAAI,CAAC,CAAC;AACnD,WAAO,CAAC,IAAI,EAAE,OAAO,CAAC,KAAK,GAAG,SAAS,GAAG,GAAG,GAAG,IAAI,CAAC,CAAC,CAAC;GACxD;;;AAGD,MAAI,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,KAAK,GAAG,SAAS,GAAG,OAAO,CAAC,CAAC,EAAE,UAAU,IAAI,EAAE;AACjG,QAAI,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,CAAC;AAC5E,WAAO,QAAQ,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;GAClC,CAAC,CAAC;;;AAGH,MAAI,WAAW,GAAG,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,KAAK,GAAG,SAAS,GAAG,aAAa,CAAC,CAAC,CAAC,CAC/F,MAAM,CAAC,UAAU,IAAI,EAAE;AACtB,WAAO,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,IAAI,CAAC;GACvC,CAAC,CACD,GAAG,CAAC,UAAU,IAAI,EAAE;AACnB,QAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AAC5B,QAAI,IAAI,GAAG,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;AACnC,WAAO,QAAQ,CAAC,SAAS,EAAE,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;GACrD,CAAC,CAAC,KAAK,EAAE,CAAC;;AAEX,MAAI,SAAS,GAAG,CAAC,CAAC,SAAS,CAAC,KAAK,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC;;AAEvD,GAAC,CAAC,IAAI,CAAC,SAAS,EAAE,UAAU,IAAI,EAAE,IAAI,EAAE;AACtC,QAAI,IAAI,CAAC,OAAO,EAAE;AAChB,OAAC,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,UAAU,KAAK,EAAE;AACpC,YAAI,OAAO,GAAG,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;AAC5B,eAAO,CAAC,OAAO,GAAG,IAAI,CAAC;AACvB,iBAAS,CAAC,KAAK,CAAC,GAAG,OAAO,CAAC;OAC5B,CAAC,CAAC;KACJ;GACF,CAAC,CAAC;;AAEH,SAAO,SAAS,CAAC;CAClB,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/lib/load_functions.js",
      "sourcesContent": [
        "var _ = require('lodash');\nvar glob = require('glob');\nvar path = require('path');\n\nmodule.exports = function (directory) {\n\n  function getTuple(directory, name) {\n    var func = require('../' + directory + '/' + name);\n    return [name, require('../' + directory + '/' + name)];\n  }\n\n  // Get a list of all files and use the filename as the object key\n  var files = _.map(glob.sync(path.resolve(__dirname, '../' + directory + '/*.js')), function (file) {\n    var name = file.substring(file.lastIndexOf('/') + 1, file.lastIndexOf('.'));\n    return getTuple(directory, name);\n  });\n\n  // Get a list of all directories with an index.js, use the directory name as the key in the object\n  var directories = _.chain(glob.sync(path.resolve(__dirname, '../' + directory + '/*/index.js')))\n  .filter(function (file) {\n    return file.match(/__test__/) == null;\n  })\n  .map(function (file) {\n    var parts = file.split('/');\n    var name = parts[parts.length - 2];\n    return getTuple(directory, parts[parts.length - 2]);\n  }).value();\n\n  var functions = _.zipObject(files.concat(directories));\n\n  _.each(functions, function (func, name) {\n    if (func.aliases) {\n      _.each(func.aliases, function (alias) {\n        var aliasFn = _.clone(func);\n        aliasFn.isAlias = true;\n        functions[alias] = aliasFn;\n      });\n    }\n  });\n\n  return functions;\n};\n"
      ]
    },
    "mtime": 1467119944363
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/handlers/lib/reposition_arguments.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _ = require('lodash');\n\n// Applies to unresolved arguments in the AST\nmodule.exports = function repositionArguments(functionDef, unorderedArgs) {\n  var args = [];\n\n  _.each(unorderedArgs, function (unorderedArg, i) {\n    var argDef;\n    var targetIndex;\n    var value;\n\n    if (_.isObject(unorderedArg) && unorderedArg.type === 'namedArg') {\n      var argIndex = _.findIndex(functionDef.args, function (orderedArg) {\n        return unorderedArg.name === orderedArg.name;\n      });\n      argDef = functionDef.args[argIndex];\n\n      if (!argDef) {\n        throw new Error('Unknown argument to ' + functionDef.name + ': ' + unorderedArg.name);\n      }\n\n      targetIndex = argIndex;\n      value = unorderedArg.value;\n    } else {\n      argDef = functionDef.args[i];\n      targetIndex = i;\n      value = unorderedArg;\n    }\n\n    if (argDef.multi) {\n      args[targetIndex] = args[targetIndex] || [];\n      args[targetIndex].push(value);\n    } else {\n      args[targetIndex] = value;\n    }\n  });\n\n  return args;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvaGFuZGxlcnMvbGliL3JlcG9zaXRpb25fYXJndW1lbnRzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBSSxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDOzs7QUFHMUIsTUFBTSxDQUFDLE9BQU8sR0FBRyxTQUFTLG1CQUFtQixDQUFDLFdBQVcsRUFBRSxhQUFhLEVBQUU7QUFDeEUsTUFBSSxJQUFJLEdBQUcsRUFBRSxDQUFDOztBQUVkLEdBQUMsQ0FBQyxJQUFJLENBQUMsYUFBYSxFQUFFLFVBQVUsWUFBWSxFQUFFLENBQUMsRUFBRTtBQUMvQyxRQUFJLE1BQU0sQ0FBQztBQUNYLFFBQUksV0FBVyxDQUFDO0FBQ2hCLFFBQUksS0FBSyxDQUFDOztBQUVWLFFBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQUMsSUFBSSxZQUFZLENBQUMsSUFBSSxLQUFLLFVBQVUsRUFBRTtBQUNoRSxVQUFJLFFBQVEsR0FBRyxDQUFDLENBQUMsU0FBUyxDQUFDLFdBQVcsQ0FBQyxJQUFJLEVBQUUsVUFBVSxVQUFVLEVBQUU7QUFDakUsZUFBTyxZQUFZLENBQUMsSUFBSSxLQUFLLFVBQVUsQ0FBQyxJQUFJLENBQUM7T0FDOUMsQ0FBQyxDQUFDO0FBQ0gsWUFBTSxHQUFHLFdBQVcsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7O0FBRXBDLFVBQUksQ0FBQyxNQUFNLEVBQUU7QUFDWCxjQUFNLElBQUksS0FBSyxDQUFDLHNCQUFzQixHQUFHLFdBQVcsQ0FBQyxJQUFJLEdBQUcsSUFBSSxHQUFHLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQztPQUN2Rjs7QUFFRCxpQkFBVyxHQUFHLFFBQVEsQ0FBQztBQUN2QixXQUFLLEdBQUcsWUFBWSxDQUFDLEtBQUssQ0FBQztLQUM1QixNQUFNO0FBQ0wsWUFBTSxHQUFHLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDN0IsaUJBQVcsR0FBRyxDQUFDLENBQUM7QUFDaEIsV0FBSyxHQUFHLFlBQVksQ0FBQztLQUN0Qjs7QUFFRCxRQUFJLE1BQU0sQ0FBQyxLQUFLLEVBQUU7QUFDaEIsVUFBSSxDQUFDLFdBQVcsQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDNUMsVUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztLQUMvQixNQUFNO0FBQ0wsVUFBSSxDQUFDLFdBQVcsQ0FBQyxHQUFHLEtBQUssQ0FBQztLQUMzQjtHQUNGLENBQUMsQ0FBQzs7QUFFSCxTQUFPLElBQUksQ0FBQztDQUViLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9pbnN0YWxsZWRQbHVnaW5zL3RpbWVsaW9uL3NlcnZlci9oYW5kbGVycy9saWIvcmVwb3NpdGlvbl9hcmd1bWVudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xuXG4vLyBBcHBsaWVzIHRvIHVucmVzb2x2ZWQgYXJndW1lbnRzIGluIHRoZSBBU1Rcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcmVwb3NpdGlvbkFyZ3VtZW50cyhmdW5jdGlvbkRlZiwgdW5vcmRlcmVkQXJncykge1xuICB2YXIgYXJncyA9IFtdO1xuXG4gIF8uZWFjaCh1bm9yZGVyZWRBcmdzLCBmdW5jdGlvbiAodW5vcmRlcmVkQXJnLCBpKSB7XG4gICAgdmFyIGFyZ0RlZjtcbiAgICB2YXIgdGFyZ2V0SW5kZXg7XG4gICAgdmFyIHZhbHVlO1xuXG4gICAgaWYgKF8uaXNPYmplY3QodW5vcmRlcmVkQXJnKSAmJiB1bm9yZGVyZWRBcmcudHlwZSA9PT0gJ25hbWVkQXJnJykge1xuICAgICAgdmFyIGFyZ0luZGV4ID0gXy5maW5kSW5kZXgoZnVuY3Rpb25EZWYuYXJncywgZnVuY3Rpb24gKG9yZGVyZWRBcmcpIHtcbiAgICAgICAgcmV0dXJuIHVub3JkZXJlZEFyZy5uYW1lID09PSBvcmRlcmVkQXJnLm5hbWU7XG4gICAgICB9KTtcbiAgICAgIGFyZ0RlZiA9IGZ1bmN0aW9uRGVmLmFyZ3NbYXJnSW5kZXhdO1xuXG4gICAgICBpZiAoIWFyZ0RlZikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gYXJndW1lbnQgdG8gJyArIGZ1bmN0aW9uRGVmLm5hbWUgKyAnOiAnICsgdW5vcmRlcmVkQXJnLm5hbWUpO1xuICAgICAgfVxuXG4gICAgICB0YXJnZXRJbmRleCA9IGFyZ0luZGV4O1xuICAgICAgdmFsdWUgPSB1bm9yZGVyZWRBcmcudmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFyZ0RlZiA9IGZ1bmN0aW9uRGVmLmFyZ3NbaV07XG4gICAgICB0YXJnZXRJbmRleCA9IGk7XG4gICAgICB2YWx1ZSA9IHVub3JkZXJlZEFyZztcbiAgICB9XG5cbiAgICBpZiAoYXJnRGVmLm11bHRpKSB7XG4gICAgICBhcmdzW3RhcmdldEluZGV4XSA9IGFyZ3NbdGFyZ2V0SW5kZXhdIHx8IFtdO1xuICAgICAgYXJnc1t0YXJnZXRJbmRleF0ucHVzaCh2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFyZ3NbdGFyZ2V0SW5kZXhdID0gdmFsdWU7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gYXJncztcblxufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/handlers/lib/reposition_arguments.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;;;AAG1B,MAAM,CAAC,OAAO,GAAG,SAAS,mBAAmB,CAAC,WAAW,EAAE,aAAa,EAAE;AACxE,MAAI,IAAI,GAAG,EAAE,CAAC;;AAEd,GAAC,CAAC,IAAI,CAAC,aAAa,EAAE,UAAU,YAAY,EAAE,CAAC,EAAE;AAC/C,QAAI,MAAM,CAAC;AACX,QAAI,WAAW,CAAC;AAChB,QAAI,KAAK,CAAC;;AAEV,QAAI,CAAC,CAAC,QAAQ,CAAC,YAAY,CAAC,IAAI,YAAY,CAAC,IAAI,KAAK,UAAU,EAAE;AAChE,UAAI,QAAQ,GAAG,CAAC,CAAC,SAAS,CAAC,WAAW,CAAC,IAAI,EAAE,UAAU,UAAU,EAAE;AACjE,eAAO,YAAY,CAAC,IAAI,KAAK,UAAU,CAAC,IAAI,CAAC;OAC9C,CAAC,CAAC;AACH,YAAM,GAAG,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;;AAEpC,UAAI,CAAC,MAAM,EAAE;AACX,cAAM,IAAI,KAAK,CAAC,sBAAsB,GAAG,WAAW,CAAC,IAAI,GAAG,IAAI,GAAG,YAAY,CAAC,IAAI,CAAC,CAAC;OACvF;;AAED,iBAAW,GAAG,QAAQ,CAAC;AACvB,WAAK,GAAG,YAAY,CAAC,KAAK,CAAC;KAC5B,MAAM;AACL,YAAM,GAAG,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AAC7B,iBAAW,GAAG,CAAC,CAAC;AAChB,WAAK,GAAG,YAAY,CAAC;KACtB;;AAED,QAAI,MAAM,CAAC,KAAK,EAAE;AAChB,UAAI,CAAC,WAAW,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC;AAC5C,UAAI,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KAC/B,MAAM;AACL,UAAI,CAAC,WAAW,CAAC,GAAG,KAAK,CAAC;KAC3B;GACF,CAAC,CAAC;;AAEH,SAAO,IAAI,CAAC;CAEb,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/handlers/lib/reposition_arguments.js",
      "sourcesContent": [
        "var _ = require('lodash');\n\n// Applies to unresolved arguments in the AST\nmodule.exports = function repositionArguments(functionDef, unorderedArgs) {\n  var args = [];\n\n  _.each(unorderedArgs, function (unorderedArg, i) {\n    var argDef;\n    var targetIndex;\n    var value;\n\n    if (_.isObject(unorderedArg) && unorderedArg.type === 'namedArg') {\n      var argIndex = _.findIndex(functionDef.args, function (orderedArg) {\n        return unorderedArg.name === orderedArg.name;\n      });\n      argDef = functionDef.args[argIndex];\n\n      if (!argDef) {\n        throw new Error('Unknown argument to ' + functionDef.name + ': ' + unorderedArg.name);\n      }\n\n      targetIndex = argIndex;\n      value = unorderedArg.value;\n    } else {\n      argDef = functionDef.args[i];\n      targetIndex = i;\n      value = unorderedArg;\n    }\n\n    if (argDef.multi) {\n      args[targetIndex] = args[targetIndex] || [];\n      args[targetIndex].push(value);\n    } else {\n      args[targetIndex] = value;\n    }\n  });\n\n  return args;\n\n};\n"
      ]
    },
    "mtime": 1467119944519
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/handlers/lib/index_arguments.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _ = require('lodash');\nvar argType = require('./arg_type');\n\n// Only applies to already resolved arguments\nmodule.exports = function indexArguments(functionDef, unorderedArgs) {\n\n  if (unorderedArgs.length > functionDef.args.length) throw new Error('Too many arguments passed to: ' + functionDef.name);\n\n  // Validation, does not change the arguments\n  _.each(unorderedArgs, function (arg, i) {\n    var type = argType(arg);\n\n    if (!functionDef.args[i]) {\n      throw new Error('Unknown argument #' + i + ' supplied to ' + functionDef.name);\n    }\n\n    var required = functionDef.args[i].types;\n    var multi = functionDef.args[i].multi;\n    var name = functionDef.args[i].name;\n\n    var isCorrectType = (function () {\n      // If argument is not allow to be specified multiple times, we're dealing with a plain value for type\n      if (!multi) return _.contains(required, type);\n\n      // If it is, we'll get an array for type\n      return _.difference(type, required).length === 0;\n    })();\n\n    if (!isCorrectType) {\n      console.log(type);\n      throw new Error(functionDef.name + '(' + name + ') must be one of ' + JSON.stringify(required) + '. Got: ' + type);\n    }\n  });\n\n  var indexedArgs = {};\n  var argumentsDef = functionDef.args;\n\n  _.each(unorderedArgs, function (unorderedArg, i) {\n    if (!argumentsDef[i]) throw new Error('Unknown argument #' + i + ' supplied to ' + functionDef.name);\n    indexedArgs[argumentsDef[i].name] = unorderedArg;\n  });\n\n  return indexedArgs;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvaGFuZGxlcnMvbGliL2luZGV4X2FyZ3VtZW50cy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQUksQ0FBQyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUMxQixJQUFJLE9BQU8sR0FBRyxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUM7OztBQUdwQyxNQUFNLENBQUMsT0FBTyxHQUFHLFNBQVMsY0FBYyxDQUFDLFdBQVcsRUFBRSxhQUFhLEVBQUU7O0FBRW5FLE1BQUksYUFBYSxDQUFDLE1BQU0sR0FBRyxXQUFXLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxNQUFNLElBQUksS0FBSyxDQUFFLGdDQUFnQyxHQUFHLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQzs7O0FBRzFILEdBQUMsQ0FBQyxJQUFJLENBQUMsYUFBYSxFQUFFLFVBQVUsR0FBRyxFQUFFLENBQUMsRUFBRTtBQUN0QyxRQUFJLElBQUksR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUM7O0FBRXhCLFFBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFO0FBQ3hCLFlBQU0sSUFBSSxLQUFLLENBQUUsb0JBQW9CLEdBQUcsQ0FBQyxHQUFHLGVBQWUsR0FBRyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUM7S0FDakY7O0FBRUQsUUFBSSxRQUFRLEdBQUcsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUM7QUFDekMsUUFBSSxLQUFLLEdBQUcsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUM7QUFDdEMsUUFBSSxJQUFJLEdBQUcsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7O0FBRXBDLFFBQUksYUFBYSxHQUFJLENBQUEsWUFBWTs7QUFFL0IsVUFBSSxDQUFDLEtBQUssRUFBRSxPQUFPLENBQUMsQ0FBQyxRQUFRLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxDQUFDOzs7QUFHOUMsYUFBTyxDQUFDLENBQUMsVUFBVSxDQUFDLElBQUksRUFBRSxRQUFRLENBQUMsQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDO0tBQ2xELENBQUEsRUFBRSxBQUFDLENBQUM7O0FBRUwsUUFBSSxDQUFDLGFBQWEsRUFBRTtBQUNsQixhQUFPLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ2xCLFlBQU0sSUFBSSxLQUFLLENBQUUsV0FBVyxDQUFDLElBQUksR0FBRyxHQUFHLEdBQUcsSUFBSSxHQUFHLG1CQUFtQixHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLEdBQUcsU0FBUyxHQUFHLElBQUksQ0FBQyxDQUFDO0tBQ3JIO0dBQ0YsQ0FBQyxDQUFDOztBQUVILE1BQUksV0FBVyxHQUFHLEVBQUUsQ0FBQztBQUNyQixNQUFJLFlBQVksR0FBRyxXQUFXLENBQUMsSUFBSSxDQUFDOztBQUVwQyxHQUFDLENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRSxVQUFVLFlBQVksRUFBRSxDQUFDLEVBQUU7QUFDL0MsUUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsRUFBRSxNQUFNLElBQUksS0FBSyxDQUFFLG9CQUFvQixHQUFHLENBQUMsR0FBRyxlQUFlLEdBQUcsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ3RHLGVBQVcsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsWUFBWSxDQUFDO0dBQ2xELENBQUMsQ0FBQzs7QUFFSCxTQUFPLFdBQVcsQ0FBQztDQUNwQixDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvaGFuZGxlcnMvbGliL2luZGV4X2FyZ3VtZW50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XG52YXIgYXJnVHlwZSA9IHJlcXVpcmUoJy4vYXJnX3R5cGUnKTtcblxuLy8gT25seSBhcHBsaWVzIHRvIGFscmVhZHkgcmVzb2x2ZWQgYXJndW1lbnRzXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluZGV4QXJndW1lbnRzKGZ1bmN0aW9uRGVmLCB1bm9yZGVyZWRBcmdzKSB7XG5cbiAgaWYgKHVub3JkZXJlZEFyZ3MubGVuZ3RoID4gZnVuY3Rpb25EZWYuYXJncy5sZW5ndGgpIHRocm93IG5ldyBFcnJvciAoJ1RvbyBtYW55IGFyZ3VtZW50cyBwYXNzZWQgdG86ICcgKyBmdW5jdGlvbkRlZi5uYW1lKTtcblxuICAvLyBWYWxpZGF0aW9uLCBkb2VzIG5vdCBjaGFuZ2UgdGhlIGFyZ3VtZW50c1xuICBfLmVhY2godW5vcmRlcmVkQXJncywgZnVuY3Rpb24gKGFyZywgaSkge1xuICAgIHZhciB0eXBlID0gYXJnVHlwZShhcmcpO1xuXG4gICAgaWYgKCFmdW5jdGlvbkRlZi5hcmdzW2ldKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IgKCdVbmtub3duIGFyZ3VtZW50ICMnICsgaSArICcgc3VwcGxpZWQgdG8gJyArIGZ1bmN0aW9uRGVmLm5hbWUpO1xuICAgIH1cblxuICAgIHZhciByZXF1aXJlZCA9IGZ1bmN0aW9uRGVmLmFyZ3NbaV0udHlwZXM7XG4gICAgdmFyIG11bHRpID0gZnVuY3Rpb25EZWYuYXJnc1tpXS5tdWx0aTtcbiAgICB2YXIgbmFtZSA9IGZ1bmN0aW9uRGVmLmFyZ3NbaV0ubmFtZTtcblxuICAgIHZhciBpc0NvcnJlY3RUeXBlID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIElmIGFyZ3VtZW50IGlzIG5vdCBhbGxvdyB0byBiZSBzcGVjaWZpZWQgbXVsdGlwbGUgdGltZXMsIHdlJ3JlIGRlYWxpbmcgd2l0aCBhIHBsYWluIHZhbHVlIGZvciB0eXBlXG4gICAgICBpZiAoIW11bHRpKSByZXR1cm4gXy5jb250YWlucyhyZXF1aXJlZCwgdHlwZSk7XG5cbiAgICAgIC8vIElmIGl0IGlzLCB3ZSdsbCBnZXQgYW4gYXJyYXkgZm9yIHR5cGVcbiAgICAgIHJldHVybiBfLmRpZmZlcmVuY2UodHlwZSwgcmVxdWlyZWQpLmxlbmd0aCA9PT0gMDtcbiAgICB9KCkpO1xuXG4gICAgaWYgKCFpc0NvcnJlY3RUeXBlKSB7XG4gICAgICBjb25zb2xlLmxvZyh0eXBlKTtcbiAgICAgIHRocm93IG5ldyBFcnJvciAoZnVuY3Rpb25EZWYubmFtZSArICcoJyArIG5hbWUgKyAnKSBtdXN0IGJlIG9uZSBvZiAnICsgSlNPTi5zdHJpbmdpZnkocmVxdWlyZWQpICsgJy4gR290OiAnICsgdHlwZSk7XG4gICAgfVxuICB9KTtcblxuICB2YXIgaW5kZXhlZEFyZ3MgPSB7fTtcbiAgdmFyIGFyZ3VtZW50c0RlZiA9IGZ1bmN0aW9uRGVmLmFyZ3M7XG5cbiAgXy5lYWNoKHVub3JkZXJlZEFyZ3MsIGZ1bmN0aW9uICh1bm9yZGVyZWRBcmcsIGkpIHtcbiAgICBpZiAoIWFyZ3VtZW50c0RlZltpXSkgdGhyb3cgbmV3IEVycm9yICgnVW5rbm93biBhcmd1bWVudCAjJyArIGkgKyAnIHN1cHBsaWVkIHRvICcgKyBmdW5jdGlvbkRlZi5uYW1lKTtcbiAgICBpbmRleGVkQXJnc1thcmd1bWVudHNEZWZbaV0ubmFtZV0gPSB1bm9yZGVyZWRBcmc7XG4gIH0pO1xuXG4gIHJldHVybiBpbmRleGVkQXJncztcbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/handlers/lib/index_arguments.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC1B,IAAI,OAAO,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC;;;AAGpC,MAAM,CAAC,OAAO,GAAG,SAAS,cAAc,CAAC,WAAW,EAAE,aAAa,EAAE;;AAEnE,MAAI,aAAa,CAAC,MAAM,GAAG,WAAW,CAAC,IAAI,CAAC,MAAM,EAAE,MAAM,IAAI,KAAK,CAAE,gCAAgC,GAAG,WAAW,CAAC,IAAI,CAAC,CAAC;;;AAG1H,GAAC,CAAC,IAAI,CAAC,aAAa,EAAE,UAAU,GAAG,EAAE,CAAC,EAAE;AACtC,QAAI,IAAI,GAAG,OAAO,CAAC,GAAG,CAAC,CAAC;;AAExB,QAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE;AACxB,YAAM,IAAI,KAAK,CAAE,oBAAoB,GAAG,CAAC,GAAG,eAAe,GAAG,WAAW,CAAC,IAAI,CAAC,CAAC;KACjF;;AAED,QAAI,QAAQ,GAAG,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;AACzC,QAAI,KAAK,GAAG,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;AACtC,QAAI,IAAI,GAAG,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;;AAEpC,QAAI,aAAa,GAAI,CAAA,YAAY;;AAE/B,UAAI,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC,QAAQ,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;;;AAG9C,aAAO,CAAC,CAAC,UAAU,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC,MAAM,KAAK,CAAC,CAAC;KAClD,CAAA,EAAE,AAAC,CAAC;;AAEL,QAAI,CAAC,aAAa,EAAE;AAClB,aAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;AAClB,YAAM,IAAI,KAAK,CAAE,WAAW,CAAC,IAAI,GAAG,GAAG,GAAG,IAAI,GAAG,mBAAmB,GAAG,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,GAAG,SAAS,GAAG,IAAI,CAAC,CAAC;KACrH;GACF,CAAC,CAAC;;AAEH,MAAI,WAAW,GAAG,EAAE,CAAC;AACrB,MAAI,YAAY,GAAG,WAAW,CAAC,IAAI,CAAC;;AAEpC,GAAC,CAAC,IAAI,CAAC,aAAa,EAAE,UAAU,YAAY,EAAE,CAAC,EAAE;AAC/C,QAAI,CAAC,YAAY,CAAC,CAAC,CAAC,EAAE,MAAM,IAAI,KAAK,CAAE,oBAAoB,GAAG,CAAC,GAAG,eAAe,GAAG,WAAW,CAAC,IAAI,CAAC,CAAC;AACtG,eAAW,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,YAAY,CAAC;GAClD,CAAC,CAAC;;AAEH,SAAO,WAAW,CAAC;CACpB,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/handlers/lib/index_arguments.js",
      "sourcesContent": [
        "var _ = require('lodash');\nvar argType = require('./arg_type');\n\n// Only applies to already resolved arguments\nmodule.exports = function indexArguments(functionDef, unorderedArgs) {\n\n  if (unorderedArgs.length > functionDef.args.length) throw new Error ('Too many arguments passed to: ' + functionDef.name);\n\n  // Validation, does not change the arguments\n  _.each(unorderedArgs, function (arg, i) {\n    var type = argType(arg);\n\n    if (!functionDef.args[i]) {\n      throw new Error ('Unknown argument #' + i + ' supplied to ' + functionDef.name);\n    }\n\n    var required = functionDef.args[i].types;\n    var multi = functionDef.args[i].multi;\n    var name = functionDef.args[i].name;\n\n    var isCorrectType = (function () {\n      // If argument is not allow to be specified multiple times, we're dealing with a plain value for type\n      if (!multi) return _.contains(required, type);\n\n      // If it is, we'll get an array for type\n      return _.difference(type, required).length === 0;\n    }());\n\n    if (!isCorrectType) {\n      console.log(type);\n      throw new Error (functionDef.name + '(' + name + ') must be one of ' + JSON.stringify(required) + '. Got: ' + type);\n    }\n  });\n\n  var indexedArgs = {};\n  var argumentsDef = functionDef.args;\n\n  _.each(unorderedArgs, function (unorderedArg, i) {\n    if (!argumentsDef[i]) throw new Error ('Unknown argument #' + i + ' supplied to ' + functionDef.name);\n    indexedArgs[argumentsDef[i].name] = unorderedArg;\n  });\n\n  return indexedArgs;\n};\n"
      ]
    },
    "mtime": 1467119944519
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/handlers/lib/arg_type.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _ = require('lodash');\n\nmodule.exports = function argType(arg) {\n  if (_.isArray(arg)) {\n    return _.chain(arg).map(argType).flattenDeep().value();\n  }\n\n  if (_.isObject(arg) && arg) {\n    return arg.type;\n  }\n  if (arg == null) {\n    return 'null';\n  }\n  return typeof arg;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvaGFuZGxlcnMvbGliL2FyZ190eXBlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBSSxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDOztBQUUxQixNQUFNLENBQUMsT0FBTyxHQUFHLFNBQVMsT0FBTyxDQUFDLEdBQUcsRUFBRTtBQUNyQyxNQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEVBQUU7QUFDbEIsV0FBTyxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUNoQixHQUFHLENBQUMsT0FBTyxDQUFDLENBQ1osV0FBVyxFQUFFLENBQ2IsS0FBSyxFQUFFLENBQUM7R0FDWjs7QUFFRCxNQUFJLENBQUMsQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLElBQUksR0FBRyxFQUFFO0FBQzFCLFdBQU8sR0FBRyxDQUFDLElBQUksQ0FBQztHQUNqQjtBQUNELE1BQUksR0FBRyxJQUFJLElBQUksRUFBRTtBQUNmLFdBQU8sTUFBTSxDQUFDO0dBQ2Y7QUFDRCxTQUFPLE9BQU8sR0FBRyxDQUFDO0NBQ25CLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9pbnN0YWxsZWRQbHVnaW5zL3RpbWVsaW9uL3NlcnZlci9oYW5kbGVycy9saWIvYXJnX3R5cGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGFyZ1R5cGUoYXJnKSB7XG4gIGlmIChfLmlzQXJyYXkoYXJnKSkge1xuICAgIHJldHVybiBfLmNoYWluKGFyZylcbiAgICAgIC5tYXAoYXJnVHlwZSlcbiAgICAgIC5mbGF0dGVuRGVlcCgpXG4gICAgICAudmFsdWUoKTtcbiAgfVxuXG4gIGlmIChfLmlzT2JqZWN0KGFyZykgJiYgYXJnKSB7XG4gICAgcmV0dXJuIGFyZy50eXBlO1xuICB9XG4gIGlmIChhcmcgPT0gbnVsbCkge1xuICAgIHJldHVybiAnbnVsbCc7XG4gIH1cbiAgcmV0dXJuIHR5cGVvZiBhcmc7XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/handlers/lib/arg_type.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;;AAE1B,MAAM,CAAC,OAAO,GAAG,SAAS,OAAO,CAAC,GAAG,EAAE;AACrC,MAAI,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE;AAClB,WAAO,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAChB,GAAG,CAAC,OAAO,CAAC,CACZ,WAAW,EAAE,CACb,KAAK,EAAE,CAAC;GACZ;;AAED,MAAI,CAAC,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,GAAG,EAAE;AAC1B,WAAO,GAAG,CAAC,IAAI,CAAC;GACjB;AACD,MAAI,GAAG,IAAI,IAAI,EAAE;AACf,WAAO,MAAM,CAAC;GACf;AACD,SAAO,OAAO,GAAG,CAAC;CACnB,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/handlers/lib/arg_type.js",
      "sourcesContent": [
        "var _ = require('lodash');\n\nmodule.exports = function argType(arg) {\n  if (_.isArray(arg)) {\n    return _.chain(arg)\n      .map(argType)\n      .flattenDeep()\n      .value();\n  }\n\n  if (_.isObject(arg) && arg) {\n    return arg.type;\n  }\n  if (arg == null) {\n    return 'null';\n  }\n  return typeof arg;\n};\n"
      ]
    },
    "mtime": 1467119944519
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/handlers/lib/get_function_by_name.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar loadFunctions = require('../../lib/load_functions.js');\nvar functions = loadFunctions('series_functions');\n\nmodule.exports = function getFunctionByName(name) {\n  if (!functions[name]) throw new Error('No such function: ' + name);\n  return functions[name];\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvaGFuZGxlcnMvbGliL2dldF9mdW5jdGlvbl9ieV9uYW1lLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBSSxhQUFhLEdBQUcsT0FBTyxDQUFDLDZCQUE2QixDQUFDLENBQUM7QUFDM0QsSUFBSSxTQUFTLEdBQUksYUFBYSxDQUFDLGtCQUFrQixDQUFDLENBQUM7O0FBRW5ELE1BQU0sQ0FBQyxPQUFPLEdBQUcsU0FBUyxpQkFBaUIsQ0FBQyxJQUFJLEVBQUU7QUFDaEQsTUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsRUFBRSxNQUFNLElBQUksS0FBSyxDQUFFLG9CQUFvQixHQUFHLElBQUksQ0FBQyxDQUFDO0FBQ3BFLFNBQU8sU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDO0NBQ3hCLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9pbnN0YWxsZWRQbHVnaW5zL3RpbWVsaW9uL3NlcnZlci9oYW5kbGVycy9saWIvZ2V0X2Z1bmN0aW9uX2J5X25hbWUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgbG9hZEZ1bmN0aW9ucyA9IHJlcXVpcmUoJy4uLy4uL2xpYi9sb2FkX2Z1bmN0aW9ucy5qcycpO1xudmFyIGZ1bmN0aW9ucyAgPSBsb2FkRnVuY3Rpb25zKCdzZXJpZXNfZnVuY3Rpb25zJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZ2V0RnVuY3Rpb25CeU5hbWUobmFtZSkge1xuICBpZiAoIWZ1bmN0aW9uc1tuYW1lXSkgdGhyb3cgbmV3IEVycm9yICgnTm8gc3VjaCBmdW5jdGlvbjogJyArIG5hbWUpO1xuICByZXR1cm4gZnVuY3Rpb25zW25hbWVdO1xufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/handlers/lib/get_function_by_name.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,aAAa,GAAG,OAAO,CAAC,6BAA6B,CAAC,CAAC;AAC3D,IAAI,SAAS,GAAI,aAAa,CAAC,kBAAkB,CAAC,CAAC;;AAEnD,MAAM,CAAC,OAAO,GAAG,SAAS,iBAAiB,CAAC,IAAI,EAAE;AAChD,MAAI,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,MAAM,IAAI,KAAK,CAAE,oBAAoB,GAAG,IAAI,CAAC,CAAC;AACpE,SAAO,SAAS,CAAC,IAAI,CAAC,CAAC;CACxB,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/handlers/lib/get_function_by_name.js",
      "sourcesContent": [
        "var loadFunctions = require('../../lib/load_functions.js');\nvar functions  = loadFunctions('series_functions');\n\nmodule.exports = function getFunctionByName(name) {\n  if (!functions[name]) throw new Error ('No such function: ' + name);\n  return functions[name];\n};\n"
      ]
    },
    "mtime": 1467119944519
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/abs.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar alter = require('../lib/alter.js');\nvar _ = require('lodash');\nvar Chainable = require('../lib/classes/chainable');\nmodule.exports = new Chainable('abs', {\n  args: [{\n    name: 'inputSeries',\n    types: ['seriesList']\n  }],\n  help: 'Return the absolute value of each value in the series list',\n  fn: function absFn(args) {\n    return alter(args, function (eachSeries) {\n      var data = _.map(eachSeries.data, function (point) {\n        return [point[0], Math.abs(point[1])];\n      });\n      eachSeries.data = data;\n      return eachSeries;\n    });\n  }\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy9hYnMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFJLEtBQUssR0FBRyxPQUFPLENBQUMsaUJBQWlCLENBQUMsQ0FBQztBQUN2QyxJQUFJLENBQUMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDMUIsSUFBSSxTQUFTLEdBQUcsT0FBTyxDQUFDLDBCQUEwQixDQUFDLENBQUM7QUFDcEQsTUFBTSxDQUFDLE9BQU8sR0FBRyxJQUFJLFNBQVMsQ0FBQyxLQUFLLEVBQUU7QUFDcEMsTUFBSSxFQUFFLENBQ0o7QUFDRSxRQUFJLEVBQUUsYUFBYTtBQUNuQixTQUFLLEVBQUUsQ0FBQyxZQUFZLENBQUM7R0FDdEIsQ0FDRjtBQUNELE1BQUksRUFBRSw0REFBNEQ7QUFDbEUsSUFBRSxFQUFFLFNBQVMsS0FBSyxDQUFDLElBQUksRUFBRTtBQUN2QixXQUFPLEtBQUssQ0FBQyxJQUFJLEVBQUUsVUFBVSxVQUFVLEVBQUU7QUFDdkMsVUFBSSxJQUFJLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLFVBQVUsS0FBSyxFQUFFO0FBQ2pELGVBQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO09BQ3ZDLENBQUMsQ0FBQztBQUNILGdCQUFVLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztBQUN2QixhQUFPLFVBQVUsQ0FBQztLQUNuQixDQUFDLENBQUM7R0FDSjtDQUNGLENBQUMsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL2luc3RhbGxlZFBsdWdpbnMvdGltZWxpb24vc2VydmVyL3Nlcmllc19mdW5jdGlvbnMvYWJzLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGFsdGVyID0gcmVxdWlyZSgnLi4vbGliL2FsdGVyLmpzJyk7XG52YXIgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xudmFyIENoYWluYWJsZSA9IHJlcXVpcmUoJy4uL2xpYi9jbGFzc2VzL2NoYWluYWJsZScpO1xubW9kdWxlLmV4cG9ydHMgPSBuZXcgQ2hhaW5hYmxlKCdhYnMnLCB7XG4gIGFyZ3M6IFtcbiAgICB7XG4gICAgICBuYW1lOiAnaW5wdXRTZXJpZXMnLFxuICAgICAgdHlwZXM6IFsnc2VyaWVzTGlzdCddXG4gICAgfVxuICBdLFxuICBoZWxwOiAnUmV0dXJuIHRoZSBhYnNvbHV0ZSB2YWx1ZSBvZiBlYWNoIHZhbHVlIGluIHRoZSBzZXJpZXMgbGlzdCcsXG4gIGZuOiBmdW5jdGlvbiBhYnNGbihhcmdzKSB7XG4gICAgcmV0dXJuIGFsdGVyKGFyZ3MsIGZ1bmN0aW9uIChlYWNoU2VyaWVzKSB7XG4gICAgICB2YXIgZGF0YSA9IF8ubWFwKGVhY2hTZXJpZXMuZGF0YSwgZnVuY3Rpb24gKHBvaW50KSB7XG4gICAgICAgIHJldHVybiBbcG9pbnRbMF0sIE1hdGguYWJzKHBvaW50WzFdKV07XG4gICAgICB9KTtcbiAgICAgIGVhY2hTZXJpZXMuZGF0YSA9IGRhdGE7XG4gICAgICByZXR1cm4gZWFjaFNlcmllcztcbiAgICB9KTtcbiAgfVxufSk7XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/abs.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,KAAK,GAAG,OAAO,CAAC,iBAAiB,CAAC,CAAC;AACvC,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC1B,IAAI,SAAS,GAAG,OAAO,CAAC,0BAA0B,CAAC,CAAC;AACpD,MAAM,CAAC,OAAO,GAAG,IAAI,SAAS,CAAC,KAAK,EAAE;AACpC,MAAI,EAAE,CACJ;AACE,QAAI,EAAE,aAAa;AACnB,SAAK,EAAE,CAAC,YAAY,CAAC;GACtB,CACF;AACD,MAAI,EAAE,4DAA4D;AAClE,IAAE,EAAE,SAAS,KAAK,CAAC,IAAI,EAAE;AACvB,WAAO,KAAK,CAAC,IAAI,EAAE,UAAU,UAAU,EAAE;AACvC,UAAI,IAAI,GAAG,CAAC,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,EAAE,UAAU,KAAK,EAAE;AACjD,eAAO,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;OACvC,CAAC,CAAC;AACH,gBAAU,CAAC,IAAI,GAAG,IAAI,CAAC;AACvB,aAAO,UAAU,CAAC;KACnB,CAAC,CAAC;GACJ;CACF,CAAC,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/abs.js",
      "sourcesContent": [
        "var alter = require('../lib/alter.js');\nvar _ = require('lodash');\nvar Chainable = require('../lib/classes/chainable');\nmodule.exports = new Chainable('abs', {\n  args: [\n    {\n      name: 'inputSeries',\n      types: ['seriesList']\n    }\n  ],\n  help: 'Return the absolute value of each value in the series list',\n  fn: function absFn(args) {\n    return alter(args, function (eachSeries) {\n      var data = _.map(eachSeries.data, function (point) {\n        return [point[0], Math.abs(point[1])];\n      });\n      eachSeries.data = data;\n      return eachSeries;\n    });\n  }\n});\n"
      ]
    },
    "mtime": 1467119944363
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/lib/alter.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar Promise = require('bluebird');\nvar _ = require('lodash');\n\n/* @param {Array} args\n * - args[0] must be a seriesList\n\n * @params {Function} fn - Function to apply to each series in the seriesList\n * @return {seriesList}\n */\n\nmodule.exports = function alter(args, fn) {\n  // In theory none of the args should ever be promises. This is probably a waste.\n  return Promise.all(args).then(function (args) {\n\n    var seriesList = args.shift();\n\n    if (seriesList.type !== 'seriesList') {\n      throw new Error('args[0] must be a seriesList');\n    }\n\n    var list = _.chain(seriesList.list).map(function (series) {\n      return fn.apply(this, [series].concat(args));\n    }).flatten().value();\n\n    seriesList.list = list;\n    return seriesList;\n  })['catch'](function (e) {\n    throw e;\n  });\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvbGliL2FsdGVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBSSxPQUFPLEdBQUcsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQ2xDLElBQUksQ0FBQyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQzs7Ozs7Ozs7O0FBUzFCLE1BQU0sQ0FBQyxPQUFPLEdBQUcsU0FBUyxLQUFLLENBQUMsSUFBSSxFQUFFLEVBQUUsRUFBRTs7QUFFeEMsU0FBTyxPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLElBQUksRUFBRTs7QUFFNUMsUUFBSSxVQUFVLEdBQUcsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDOztBQUU5QixRQUFJLFVBQVUsQ0FBQyxJQUFJLEtBQUssWUFBWSxFQUFFO0FBQ3BDLFlBQU0sSUFBSSxLQUFLLENBQUUsOEJBQThCLENBQUMsQ0FBQztLQUNsRDs7QUFFRCxRQUFJLElBQUksR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsVUFBVSxNQUFNLEVBQUU7QUFDeEQsYUFBTyxFQUFFLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0tBQzlDLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQzs7QUFFckIsY0FBVSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7QUFDdkIsV0FBTyxVQUFVLENBQUM7R0FDbkIsQ0FBQyxTQUFNLENBQUMsVUFBVSxDQUFDLEVBQUU7QUFDcEIsVUFBTSxDQUFDLENBQUM7R0FDVCxDQUFDLENBQUM7Q0FDSixDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvbGliL2FsdGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIFByb21pc2UgPSByZXF1aXJlKCdibHVlYmlyZCcpO1xudmFyIF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcblxuLyogQHBhcmFtIHtBcnJheX0gYXJnc1xuICogLSBhcmdzWzBdIG11c3QgYmUgYSBzZXJpZXNMaXN0XG5cbiAqIEBwYXJhbXMge0Z1bmN0aW9ufSBmbiAtIEZ1bmN0aW9uIHRvIGFwcGx5IHRvIGVhY2ggc2VyaWVzIGluIHRoZSBzZXJpZXNMaXN0XG4gKiBAcmV0dXJuIHtzZXJpZXNMaXN0fVxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gYWx0ZXIoYXJncywgZm4pIHtcbiAgLy8gSW4gdGhlb3J5IG5vbmUgb2YgdGhlIGFyZ3Mgc2hvdWxkIGV2ZXIgYmUgcHJvbWlzZXMuIFRoaXMgaXMgcHJvYmFibHkgYSB3YXN0ZS5cbiAgcmV0dXJuIFByb21pc2UuYWxsKGFyZ3MpLnRoZW4oZnVuY3Rpb24gKGFyZ3MpIHtcblxuICAgIHZhciBzZXJpZXNMaXN0ID0gYXJncy5zaGlmdCgpO1xuXG4gICAgaWYgKHNlcmllc0xpc3QudHlwZSAhPT0gJ3Nlcmllc0xpc3QnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IgKCdhcmdzWzBdIG11c3QgYmUgYSBzZXJpZXNMaXN0Jyk7XG4gICAgfVxuXG4gICAgdmFyIGxpc3QgPSBfLmNoYWluKHNlcmllc0xpc3QubGlzdCkubWFwKGZ1bmN0aW9uIChzZXJpZXMpIHtcbiAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBbc2VyaWVzXS5jb25jYXQoYXJncykpO1xuICAgIH0pLmZsYXR0ZW4oKS52YWx1ZSgpO1xuXG4gICAgc2VyaWVzTGlzdC5saXN0ID0gbGlzdDtcbiAgICByZXR1cm4gc2VyaWVzTGlzdDtcbiAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHtcbiAgICB0aHJvdyBlO1xuICB9KTtcbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/lib/alter.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,OAAO,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;AAClC,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;;;;;;;;;AAS1B,MAAM,CAAC,OAAO,GAAG,SAAS,KAAK,CAAC,IAAI,EAAE,EAAE,EAAE;;AAExC,SAAO,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,EAAE;;AAE5C,QAAI,UAAU,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC;;AAE9B,QAAI,UAAU,CAAC,IAAI,KAAK,YAAY,EAAE;AACpC,YAAM,IAAI,KAAK,CAAE,8BAA8B,CAAC,CAAC;KAClD;;AAED,QAAI,IAAI,GAAG,CAAC,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,UAAU,MAAM,EAAE;AACxD,aAAO,EAAE,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;KAC9C,CAAC,CAAC,OAAO,EAAE,CAAC,KAAK,EAAE,CAAC;;AAErB,cAAU,CAAC,IAAI,GAAG,IAAI,CAAC;AACvB,WAAO,UAAU,CAAC;GACnB,CAAC,SAAM,CAAC,UAAU,CAAC,EAAE;AACpB,UAAM,CAAC,CAAC;GACT,CAAC,CAAC;CACJ,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/lib/alter.js",
      "sourcesContent": [
        "var Promise = require('bluebird');\nvar _ = require('lodash');\n\n/* @param {Array} args\n * - args[0] must be a seriesList\n\n * @params {Function} fn - Function to apply to each series in the seriesList\n * @return {seriesList}\n */\n\nmodule.exports = function alter(args, fn) {\n  // In theory none of the args should ever be promises. This is probably a waste.\n  return Promise.all(args).then(function (args) {\n\n    var seriesList = args.shift();\n\n    if (seriesList.type !== 'seriesList') {\n      throw new Error ('args[0] must be a seriesList');\n    }\n\n    var list = _.chain(seriesList.list).map(function (series) {\n      return fn.apply(this, [series].concat(args));\n    }).flatten().value();\n\n    seriesList.list = list;\n    return seriesList;\n  }).catch(function (e) {\n    throw e;\n  });\n};\n"
      ]
    },
    "mtime": 1467119944363
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/lib/classes/chainable.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "get",
        "inherits",
        "class-call-check"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar TimelionFunction = require('./timelion_function');\n\nmodule.exports = (function (_TimelionFunction) {\n  _inherits(Chainable, _TimelionFunction);\n\n  function Chainable(name, config) {\n    _classCallCheck(this, Chainable);\n\n    _get(Object.getPrototypeOf(Chainable.prototype), 'constructor', this).call(this, name, config);\n    this.chainable = true;\n    Object.freeze(this);\n  }\n\n  return Chainable;\n})(TimelionFunction);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvbGliL2NsYXNzZXMvY2hhaW5hYmxlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUEsSUFBSSxnQkFBZ0IsR0FBRyxPQUFPLENBQUMscUJBQXFCLENBQUMsQ0FBQzs7QUFFdEQsTUFBTSxDQUFDLE9BQU87WUFBUyxTQUFTOztBQUNuQixXQURVLFNBQVMsQ0FDbEIsSUFBSSxFQUFFLE1BQU0sRUFBRTswQkFETCxTQUFTOztBQUU1QiwrQkFGbUIsU0FBUyw2Q0FFdEIsSUFBSSxFQUFFLE1BQU0sRUFBRTtBQUNwQixRQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQztBQUN0QixVQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO0dBQ3JCOztTQUxvQixTQUFTO0dBQVMsZ0JBQWdCLENBTXhELENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9pbnN0YWxsZWRQbHVnaW5zL3RpbWVsaW9uL3NlcnZlci9saWIvY2xhc3Nlcy9jaGFpbmFibGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgVGltZWxpb25GdW5jdGlvbiA9IHJlcXVpcmUoJy4vdGltZWxpb25fZnVuY3Rpb24nKTtcblxubW9kdWxlLmV4cG9ydHMgPSBjbGFzcyBDaGFpbmFibGUgZXh0ZW5kcyBUaW1lbGlvbkZ1bmN0aW9uIHtcbiAgY29uc3RydWN0b3IobmFtZSwgY29uZmlnKSB7XG4gICAgc3VwZXIobmFtZSwgY29uZmlnKTtcbiAgICB0aGlzLmNoYWluYWJsZSA9IHRydWU7XG4gICAgT2JqZWN0LmZyZWV6ZSh0aGlzKTtcbiAgfVxufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/lib/classes/chainable.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;AAAA,IAAI,gBAAgB,GAAG,OAAO,CAAC,qBAAqB,CAAC,CAAC;;AAEtD,MAAM,CAAC,OAAO;YAAS,SAAS;;AACnB,WADU,SAAS,CAClB,IAAI,EAAE,MAAM,EAAE;0BADL,SAAS;;AAE5B,+BAFmB,SAAS,6CAEtB,IAAI,EAAE,MAAM,EAAE;AACpB,QAAI,CAAC,SAAS,GAAG,IAAI,CAAC;AACtB,UAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;GACrB;;SALoB,SAAS;GAAS,gBAAgB,CAMxD,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/lib/classes/chainable.js",
      "sourcesContent": [
        "var TimelionFunction = require('./timelion_function');\n\nmodule.exports = class Chainable extends TimelionFunction {\n  constructor(name, config) {\n    super(name, config);\n    this.chainable = true;\n    Object.freeze(this);\n  }\n};\n"
      ]
    },
    "mtime": 1467119944519
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/lib/classes/timelion_function.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "class-call-check"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _ = require('lodash');\nvar loadFunctions = require('../load_functions.js');\nvar fitFunctions = loadFunctions('fit_functions');\n\nmodule.exports = function TimelionFunction(name, config) {\n  _classCallCheck(this, TimelionFunction);\n\n  this.name = name;\n  this.args = config.args || [];\n  this.argsByName = _.indexBy(this.args, 'name');\n  this.help = config.help || '';\n  this.aliases = config.aliases || [];\n\n  // WTF is this? How could you not have a fn? Wtf would the thing be used for?\n  var originalFunction = config.fn || function (input) {\n    return input;\n  };\n\n  // Currently only re-fits the series.\n  this.originalFn = originalFunction;\n\n  this.fn = function (args, tlConfig) {\n    var config = _.clone(tlConfig);\n    return Promise.resolve(originalFunction(args, config)).then(function (seriesList) {\n      seriesList.list = _.map(seriesList.list, function (series) {\n        var target = tlConfig.getTargetSeries();\n\n        // Don't fit if the series are already the same\n        if (_.isEqual(_.map(series.data, 0), _.map(target, 0))) return series;\n\n        var fit;\n        if (args.byName.fit) {\n          fit = args.byName.fit;\n        } else if (series.fit) {\n          fit = series.fit;\n        } else {\n          fit = 'nearest';\n        }\n\n        series.data = fitFunctions[fit](series.data, tlConfig.getTargetSeries());\n        return series;\n      });\n      return seriesList;\n    });\n  };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvbGliL2NsYXNzZXMvdGltZWxpb25fZnVuY3Rpb24uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLElBQUksQ0FBQyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUMxQixJQUFJLGFBQWEsR0FBRyxPQUFPLENBQUMsc0JBQXNCLENBQUMsQ0FBQztBQUNwRCxJQUFJLFlBQVksR0FBSSxhQUFhLENBQUMsZUFBZSxDQUFDLENBQUM7O0FBRW5ELE1BQU0sQ0FBQyxPQUFPLEdBQ0QsU0FEVSxnQkFBZ0IsQ0FDekIsSUFBSSxFQUFFLE1BQU0sRUFBRTt3QkFETCxnQkFBZ0I7O0FBRW5DLE1BQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO0FBQ2pCLE1BQUksQ0FBQyxJQUFJLEdBQUcsTUFBTSxDQUFDLElBQUksSUFBSSxFQUFFLENBQUM7QUFDOUIsTUFBSSxDQUFDLFVBQVUsR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFDL0MsTUFBSSxDQUFDLElBQUksR0FBRyxNQUFNLENBQUMsSUFBSSxJQUFJLEVBQUUsQ0FBQztBQUM5QixNQUFJLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQyxPQUFPLElBQUksRUFBRSxDQUFDOzs7QUFHcEMsTUFBSSxnQkFBZ0IsR0FBRyxNQUFNLENBQUMsRUFBRSxJQUFJLFVBQVUsS0FBSyxFQUFFO0FBQUUsV0FBTyxLQUFLLENBQUM7R0FBRSxDQUFDOzs7QUFHdkUsTUFBSSxDQUFDLFVBQVUsR0FBRyxnQkFBZ0IsQ0FBQzs7QUFFbkMsTUFBSSxDQUFDLEVBQUUsR0FBRyxVQUFVLElBQUksRUFBRSxRQUFRLEVBQUU7QUFDbEMsUUFBSSxNQUFNLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUMvQixXQUFPLE9BQU8sQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsVUFBVSxFQUFFO0FBQ2hGLGdCQUFVLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLElBQUksRUFBRSxVQUFVLE1BQU0sRUFBRTtBQUN6RCxZQUFJLE1BQU0sR0FBRyxRQUFRLENBQUMsZUFBZSxFQUFFLENBQUM7OztBQUd4QyxZQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsT0FBTyxNQUFNLENBQUM7O0FBRXRFLFlBQUksR0FBRyxDQUFDO0FBQ1IsWUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsRUFBRTtBQUNuQixhQUFHLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUM7U0FDdkIsTUFBTSxJQUFJLE1BQU0sQ0FBQyxHQUFHLEVBQUU7QUFDckIsYUFBRyxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUM7U0FDbEIsTUFBTTtBQUNMLGFBQUcsR0FBRyxTQUFTLENBQUM7U0FDakI7O0FBRUQsY0FBTSxDQUFDLElBQUksR0FBRyxZQUFZLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxRQUFRLENBQUMsZUFBZSxFQUFFLENBQUMsQ0FBQztBQUN6RSxlQUFPLE1BQU0sQ0FBQztPQUNmLENBQUMsQ0FBQztBQUNILGFBQU8sVUFBVSxDQUFDO0tBQ25CLENBQUMsQ0FBQztHQUNKLENBQUM7Q0FDSCxBQUNGLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9pbnN0YWxsZWRQbHVnaW5zL3RpbWVsaW9uL3NlcnZlci9saWIvY2xhc3Nlcy90aW1lbGlvbl9mdW5jdGlvbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XG52YXIgbG9hZEZ1bmN0aW9ucyA9IHJlcXVpcmUoJy4uL2xvYWRfZnVuY3Rpb25zLmpzJyk7XG52YXIgZml0RnVuY3Rpb25zICA9IGxvYWRGdW5jdGlvbnMoJ2ZpdF9mdW5jdGlvbnMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBjbGFzcyBUaW1lbGlvbkZ1bmN0aW9uIHtcbiAgY29uc3RydWN0b3IobmFtZSwgY29uZmlnKSB7XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB0aGlzLmFyZ3MgPSBjb25maWcuYXJncyB8fCBbXTtcbiAgICB0aGlzLmFyZ3NCeU5hbWUgPSBfLmluZGV4QnkodGhpcy5hcmdzLCAnbmFtZScpO1xuICAgIHRoaXMuaGVscCA9IGNvbmZpZy5oZWxwIHx8ICcnO1xuICAgIHRoaXMuYWxpYXNlcyA9IGNvbmZpZy5hbGlhc2VzIHx8IFtdO1xuXG4gICAgLy8gV1RGIGlzIHRoaXM/IEhvdyBjb3VsZCB5b3Ugbm90IGhhdmUgYSBmbj8gV3RmIHdvdWxkIHRoZSB0aGluZyBiZSB1c2VkIGZvcj9cbiAgICB2YXIgb3JpZ2luYWxGdW5jdGlvbiA9IGNvbmZpZy5mbiB8fCBmdW5jdGlvbiAoaW5wdXQpIHsgcmV0dXJuIGlucHV0OyB9O1xuXG4gICAgLy8gQ3VycmVudGx5IG9ubHkgcmUtZml0cyB0aGUgc2VyaWVzLlxuICAgIHRoaXMub3JpZ2luYWxGbiA9IG9yaWdpbmFsRnVuY3Rpb247XG5cbiAgICB0aGlzLmZuID0gZnVuY3Rpb24gKGFyZ3MsIHRsQ29uZmlnKSB7XG4gICAgICB2YXIgY29uZmlnID0gXy5jbG9uZSh0bENvbmZpZyk7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG9yaWdpbmFsRnVuY3Rpb24oYXJncywgY29uZmlnKSkudGhlbihmdW5jdGlvbiAoc2VyaWVzTGlzdCkge1xuICAgICAgICBzZXJpZXNMaXN0Lmxpc3QgPSBfLm1hcChzZXJpZXNMaXN0Lmxpc3QsIGZ1bmN0aW9uIChzZXJpZXMpIHtcbiAgICAgICAgICB2YXIgdGFyZ2V0ID0gdGxDb25maWcuZ2V0VGFyZ2V0U2VyaWVzKCk7XG5cbiAgICAgICAgICAvLyBEb24ndCBmaXQgaWYgdGhlIHNlcmllcyBhcmUgYWxyZWFkeSB0aGUgc2FtZVxuICAgICAgICAgIGlmIChfLmlzRXF1YWwoXy5tYXAoc2VyaWVzLmRhdGEsIDApLCBfLm1hcCh0YXJnZXQsIDApKSkgcmV0dXJuIHNlcmllcztcblxuICAgICAgICAgIHZhciBmaXQ7XG4gICAgICAgICAgaWYgKGFyZ3MuYnlOYW1lLmZpdCkge1xuICAgICAgICAgICAgZml0ID0gYXJncy5ieU5hbWUuZml0O1xuICAgICAgICAgIH0gZWxzZSBpZiAoc2VyaWVzLmZpdCkge1xuICAgICAgICAgICAgZml0ID0gc2VyaWVzLmZpdDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZml0ID0gJ25lYXJlc3QnO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHNlcmllcy5kYXRhID0gZml0RnVuY3Rpb25zW2ZpdF0oc2VyaWVzLmRhdGEsIHRsQ29uZmlnLmdldFRhcmdldFNlcmllcygpKTtcbiAgICAgICAgICByZXR1cm4gc2VyaWVzO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHNlcmllc0xpc3Q7XG4gICAgICB9KTtcbiAgICB9O1xuICB9XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/lib/classes/timelion_function.js"
      ],
      "names": [],
      "mappings": ";;;;AAAA,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC1B,IAAI,aAAa,GAAG,OAAO,CAAC,sBAAsB,CAAC,CAAC;AACpD,IAAI,YAAY,GAAI,aAAa,CAAC,eAAe,CAAC,CAAC;;AAEnD,MAAM,CAAC,OAAO,GACD,SADU,gBAAgB,CACzB,IAAI,EAAE,MAAM,EAAE;wBADL,gBAAgB;;AAEnC,MAAI,CAAC,IAAI,GAAG,IAAI,CAAC;AACjB,MAAI,CAAC,IAAI,GAAG,MAAM,CAAC,IAAI,IAAI,EAAE,CAAC;AAC9B,MAAI,CAAC,UAAU,GAAG,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;AAC/C,MAAI,CAAC,IAAI,GAAG,MAAM,CAAC,IAAI,IAAI,EAAE,CAAC;AAC9B,MAAI,CAAC,OAAO,GAAG,MAAM,CAAC,OAAO,IAAI,EAAE,CAAC;;;AAGpC,MAAI,gBAAgB,GAAG,MAAM,CAAC,EAAE,IAAI,UAAU,KAAK,EAAE;AAAE,WAAO,KAAK,CAAC;GAAE,CAAC;;;AAGvE,MAAI,CAAC,UAAU,GAAG,gBAAgB,CAAC;;AAEnC,MAAI,CAAC,EAAE,GAAG,UAAU,IAAI,EAAE,QAAQ,EAAE;AAClC,QAAI,MAAM,GAAG,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;AAC/B,WAAO,OAAO,CAAC,OAAO,CAAC,gBAAgB,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,UAAU,EAAE;AAChF,gBAAU,CAAC,IAAI,GAAG,CAAC,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,EAAE,UAAU,MAAM,EAAE;AACzD,YAAI,MAAM,GAAG,QAAQ,CAAC,eAAe,EAAE,CAAC;;;AAGxC,YAAI,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC,EAAE,OAAO,MAAM,CAAC;;AAEtE,YAAI,GAAG,CAAC;AACR,YAAI,IAAI,CAAC,MAAM,CAAC,GAAG,EAAE;AACnB,aAAG,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC;SACvB,MAAM,IAAI,MAAM,CAAC,GAAG,EAAE;AACrB,aAAG,GAAG,MAAM,CAAC,GAAG,CAAC;SAClB,MAAM;AACL,aAAG,GAAG,SAAS,CAAC;SACjB;;AAED,cAAM,CAAC,IAAI,GAAG,YAAY,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,IAAI,EAAE,QAAQ,CAAC,eAAe,EAAE,CAAC,CAAC;AACzE,eAAO,MAAM,CAAC;OACf,CAAC,CAAC;AACH,aAAO,UAAU,CAAC;KACnB,CAAC,CAAC;GACJ,CAAC;CACH,AACF,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/lib/classes/timelion_function.js",
      "sourcesContent": [
        "var _ = require('lodash');\nvar loadFunctions = require('../load_functions.js');\nvar fitFunctions  = loadFunctions('fit_functions');\n\nmodule.exports = class TimelionFunction {\n  constructor(name, config) {\n    this.name = name;\n    this.args = config.args || [];\n    this.argsByName = _.indexBy(this.args, 'name');\n    this.help = config.help || '';\n    this.aliases = config.aliases || [];\n\n    // WTF is this? How could you not have a fn? Wtf would the thing be used for?\n    var originalFunction = config.fn || function (input) { return input; };\n\n    // Currently only re-fits the series.\n    this.originalFn = originalFunction;\n\n    this.fn = function (args, tlConfig) {\n      var config = _.clone(tlConfig);\n      return Promise.resolve(originalFunction(args, config)).then(function (seriesList) {\n        seriesList.list = _.map(seriesList.list, function (series) {\n          var target = tlConfig.getTargetSeries();\n\n          // Don't fit if the series are already the same\n          if (_.isEqual(_.map(series.data, 0), _.map(target, 0))) return series;\n\n          var fit;\n          if (args.byName.fit) {\n            fit = args.byName.fit;\n          } else if (series.fit) {\n            fit = series.fit;\n          } else {\n            fit = 'nearest';\n          }\n\n          series.data = fitFunctions[fit](series.data, tlConfig.getTargetSeries());\n          return series;\n        });\n        return seriesList;\n      });\n    };\n  }\n};\n"
      ]
    },
    "mtime": 1467119944519
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/fit_functions/average.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _ = require('lodash');\n\n// Upsampling and down sampling of non-cummulative sets\n// Good: min, max, average\n// Bad: sum, count\n\nmodule.exports = function (dataTuples, targetTuples) {\n\n  // Phase 1: Downsample\n  // We nessecarily won't well match the dataSource here as we don't know how much data\n  // they had when creating their own average\n  var resultTimes = _.pluck(targetTuples, 0);\n  var dataTuplesQueue = _.clone(dataTuples);\n  var resultValues = _.map(targetTuples, function (bucket) {\n    var time = bucket[0];\n    var i = 0;\n    var avgSet = [];\n\n    // This is naive, it doesn't consider where the line is going next,\n    // It simply writes the point and moves on once it hits <= time.\n    // Thus this algorithm will tend to lag the trend.\n    // Deal with it, or write something better.\n    while (i < dataTuplesQueue.length && dataTuplesQueue[i][0] <= time) {\n      avgSet.push(dataTuplesQueue[i][1]);\n      i++;\n    }\n\n    dataTuplesQueue.splice(0, i);\n\n    var sum = _.reduce(avgSet, function (sum, num) {\n      return sum + num;\n    }, 0);\n\n    return avgSet.length ? sum / avgSet.length : NaN;\n  });\n\n  // Phase 2: Upsample if needed\n  // If we have any NaNs we are probably resampling from a big interval to a small one (eg, 1M as 1d)\n  // So look for the missing stuff in the array, and smooth it out\n  var naNIndex = _.findIndex(resultValues, function (val) {\n    return isNaN(val);\n  });\n\n  if (naNIndex > -1) {\n    var i = 0;\n    var naNCount = 0;\n    var filledValues = [];\n    var previousRealNumber;\n    var stepSize;\n    while (i < resultValues.length) {\n      if (isNaN(resultValues[i])) {\n        if (i === 0) {\n          // If our first number is NaN, intialize from dataTuples;\n          previousRealNumber = dataTuples[0][1];\n        }\n        naNCount++;\n      } else {\n        // Otherwise, backfill the NaNs with averaged out data\n        if (naNCount > 0) {\n          stepSize = (resultValues[i] - previousRealNumber) / (naNCount + 1);\n          while (naNCount > 0) {\n            resultValues[i - naNCount] = previousRealNumber + stepSize;\n            previousRealNumber = resultValues[i - naNCount];\n            naNCount--;\n          }\n        }\n        previousRealNumber = resultValues[i];\n        filledValues.push(resultValues[i]);\n      }\n      i++;\n    }\n  }\n\n  var resultTuples = _.zip(resultTimes, resultValues);\n  return resultTuples;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvZml0X2Z1bmN0aW9ucy9hdmVyYWdlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBSSxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDOzs7Ozs7QUFNMUIsTUFBTSxDQUFDLE9BQU8sR0FBRyxVQUFVLFVBQVUsRUFBRSxZQUFZLEVBQUU7Ozs7O0FBS25ELE1BQUksV0FBVyxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUMsWUFBWSxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQzNDLE1BQUksZUFBZSxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDMUMsTUFBSSxZQUFZLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxZQUFZLEVBQUUsVUFBVSxNQUFNLEVBQUU7QUFDdkQsUUFBSSxJQUFJLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3JCLFFBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNWLFFBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQzs7Ozs7O0FBTWhCLFdBQU8sQ0FBQyxHQUFHLGVBQWUsQ0FBQyxNQUFNLElBQUksZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksRUFBRTtBQUNsRSxZQUFNLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ25DLE9BQUMsRUFBRSxDQUFDO0tBQ0w7O0FBRUQsbUJBQWUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDOztBQUU3QixRQUFJLEdBQUcsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxVQUFVLEdBQUcsRUFBRSxHQUFHLEVBQUU7QUFBRSxhQUFPLEdBQUcsR0FBRyxHQUFHLENBQUM7S0FBRSxFQUFFLENBQUMsQ0FBQyxDQUFDOztBQUV6RSxXQUFPLE1BQU0sQ0FBQyxNQUFNLEdBQUksR0FBRyxHQUFHLE1BQU0sQ0FBQyxNQUFNLEdBQUksR0FBRyxDQUFDO0dBQ3BELENBQUMsQ0FBQzs7Ozs7QUFLSCxNQUFJLFFBQVEsR0FBRyxDQUFDLENBQUMsU0FBUyxDQUFDLFlBQVksRUFBRSxVQUFVLEdBQUcsRUFBRTtBQUN0RCxXQUFPLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztHQUNuQixDQUFDLENBQUM7O0FBRUgsTUFBSSxRQUFRLEdBQUcsQ0FBQyxDQUFDLEVBQUU7QUFDakIsUUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ1YsUUFBSSxRQUFRLEdBQUcsQ0FBQyxDQUFDO0FBQ2pCLFFBQUksWUFBWSxHQUFHLEVBQUUsQ0FBQztBQUN0QixRQUFJLGtCQUFrQixDQUFDO0FBQ3ZCLFFBQUksUUFBUSxDQUFDO0FBQ2IsV0FBTyxDQUFDLEdBQUcsWUFBWSxDQUFDLE1BQU0sRUFBRTtBQUM5QixVQUFJLEtBQUssQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRTtBQUMxQixZQUFJLENBQUMsS0FBSyxDQUFDLEVBQUU7O0FBRVgsNEJBQWtCLEdBQUcsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ3ZDO0FBQ0QsZ0JBQVEsRUFBRSxDQUFDO09BQ1osTUFBTTs7QUFFTCxZQUFJLFFBQVEsR0FBRyxDQUFDLEVBQUU7QUFDaEIsa0JBQVEsR0FBRyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsR0FBRyxrQkFBa0IsQ0FBQSxJQUFLLFFBQVEsR0FBRyxDQUFDLENBQUEsQUFBQyxDQUFDO0FBQ25FLGlCQUFPLFFBQVEsR0FBRyxDQUFDLEVBQUU7QUFDbkIsd0JBQVksQ0FBQyxDQUFDLEdBQUcsUUFBUSxDQUFDLEdBQUcsa0JBQWtCLEdBQUcsUUFBUSxDQUFDO0FBQzNELDhCQUFrQixHQUFHLFlBQVksQ0FBQyxDQUFDLEdBQUcsUUFBUSxDQUFDLENBQUM7QUFDaEQsb0JBQVEsRUFBRSxDQUFDO1dBQ1o7U0FDRjtBQUNELDBCQUFrQixHQUFHLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNyQyxvQkFBWSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztPQUNwQztBQUNELE9BQUMsRUFBRSxDQUFDO0tBQ0w7R0FFRjs7QUFFRCxNQUFJLFlBQVksR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBRSxZQUFZLENBQUMsQ0FBQztBQUNwRCxTQUFPLFlBQVksQ0FBQztDQUNyQixDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvZml0X2Z1bmN0aW9ucy9hdmVyYWdlLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcblxuLy8gVXBzYW1wbGluZyBhbmQgZG93biBzYW1wbGluZyBvZiBub24tY3VtbXVsYXRpdmUgc2V0c1xuLy8gR29vZDogbWluLCBtYXgsIGF2ZXJhZ2Vcbi8vIEJhZDogc3VtLCBjb3VudFxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChkYXRhVHVwbGVzLCB0YXJnZXRUdXBsZXMpIHtcblxuICAvLyBQaGFzZSAxOiBEb3duc2FtcGxlXG4gIC8vIFdlIG5lc3NlY2FyaWx5IHdvbid0IHdlbGwgbWF0Y2ggdGhlIGRhdGFTb3VyY2UgaGVyZSBhcyB3ZSBkb24ndCBrbm93IGhvdyBtdWNoIGRhdGFcbiAgLy8gdGhleSBoYWQgd2hlbiBjcmVhdGluZyB0aGVpciBvd24gYXZlcmFnZVxuICB2YXIgcmVzdWx0VGltZXMgPSBfLnBsdWNrKHRhcmdldFR1cGxlcywgMCk7XG4gIHZhciBkYXRhVHVwbGVzUXVldWUgPSBfLmNsb25lKGRhdGFUdXBsZXMpO1xuICB2YXIgcmVzdWx0VmFsdWVzID0gXy5tYXAodGFyZ2V0VHVwbGVzLCBmdW5jdGlvbiAoYnVja2V0KSB7XG4gICAgdmFyIHRpbWUgPSBidWNrZXRbMF07XG4gICAgdmFyIGkgPSAwO1xuICAgIHZhciBhdmdTZXQgPSBbXTtcblxuICAgIC8vIFRoaXMgaXMgbmFpdmUsIGl0IGRvZXNuJ3QgY29uc2lkZXIgd2hlcmUgdGhlIGxpbmUgaXMgZ29pbmcgbmV4dCxcbiAgICAvLyBJdCBzaW1wbHkgd3JpdGVzIHRoZSBwb2ludCBhbmQgbW92ZXMgb24gb25jZSBpdCBoaXRzIDw9IHRpbWUuXG4gICAgLy8gVGh1cyB0aGlzIGFsZ29yaXRobSB3aWxsIHRlbmQgdG8gbGFnIHRoZSB0cmVuZC5cbiAgICAvLyBEZWFsIHdpdGggaXQsIG9yIHdyaXRlIHNvbWV0aGluZyBiZXR0ZXIuXG4gICAgd2hpbGUgKGkgPCBkYXRhVHVwbGVzUXVldWUubGVuZ3RoICYmIGRhdGFUdXBsZXNRdWV1ZVtpXVswXSA8PSB0aW1lKSB7XG4gICAgICBhdmdTZXQucHVzaChkYXRhVHVwbGVzUXVldWVbaV1bMV0pO1xuICAgICAgaSsrO1xuICAgIH1cblxuICAgIGRhdGFUdXBsZXNRdWV1ZS5zcGxpY2UoMCwgaSk7XG5cbiAgICB2YXIgc3VtID0gXy5yZWR1Y2UoYXZnU2V0LCBmdW5jdGlvbiAoc3VtLCBudW0pIHsgcmV0dXJuIHN1bSArIG51bTsgfSwgMCk7XG5cbiAgICByZXR1cm4gYXZnU2V0Lmxlbmd0aCA/IChzdW0gLyBhdmdTZXQubGVuZ3RoKSA6IE5hTjtcbiAgfSk7XG5cbiAgLy8gUGhhc2UgMjogVXBzYW1wbGUgaWYgbmVlZGVkXG4gIC8vIElmIHdlIGhhdmUgYW55IE5hTnMgd2UgYXJlIHByb2JhYmx5IHJlc2FtcGxpbmcgZnJvbSBhIGJpZyBpbnRlcnZhbCB0byBhIHNtYWxsIG9uZSAoZWcsIDFNIGFzIDFkKVxuICAvLyBTbyBsb29rIGZvciB0aGUgbWlzc2luZyBzdHVmZiBpbiB0aGUgYXJyYXksIGFuZCBzbW9vdGggaXQgb3V0XG4gIHZhciBuYU5JbmRleCA9IF8uZmluZEluZGV4KHJlc3VsdFZhbHVlcywgZnVuY3Rpb24gKHZhbCkge1xuICAgIHJldHVybiBpc05hTih2YWwpO1xuICB9KTtcblxuICBpZiAobmFOSW5kZXggPiAtMSkge1xuICAgIHZhciBpID0gMDtcbiAgICB2YXIgbmFOQ291bnQgPSAwO1xuICAgIHZhciBmaWxsZWRWYWx1ZXMgPSBbXTtcbiAgICB2YXIgcHJldmlvdXNSZWFsTnVtYmVyO1xuICAgIHZhciBzdGVwU2l6ZTtcbiAgICB3aGlsZSAoaSA8IHJlc3VsdFZhbHVlcy5sZW5ndGgpIHtcbiAgICAgIGlmIChpc05hTihyZXN1bHRWYWx1ZXNbaV0pKSB7XG4gICAgICAgIGlmIChpID09PSAwKSB7XG4gICAgICAgICAgLy8gSWYgb3VyIGZpcnN0IG51bWJlciBpcyBOYU4sIGludGlhbGl6ZSBmcm9tIGRhdGFUdXBsZXM7XG4gICAgICAgICAgcHJldmlvdXNSZWFsTnVtYmVyID0gZGF0YVR1cGxlc1swXVsxXTtcbiAgICAgICAgfVxuICAgICAgICBuYU5Db3VudCsrO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gT3RoZXJ3aXNlLCBiYWNrZmlsbCB0aGUgTmFOcyB3aXRoIGF2ZXJhZ2VkIG91dCBkYXRhXG4gICAgICAgIGlmIChuYU5Db3VudCA+IDApIHtcbiAgICAgICAgICBzdGVwU2l6ZSA9IChyZXN1bHRWYWx1ZXNbaV0gLSBwcmV2aW91c1JlYWxOdW1iZXIpIC8gKG5hTkNvdW50ICsgMSk7XG4gICAgICAgICAgd2hpbGUgKG5hTkNvdW50ID4gMCkge1xuICAgICAgICAgICAgcmVzdWx0VmFsdWVzW2kgLSBuYU5Db3VudF0gPSBwcmV2aW91c1JlYWxOdW1iZXIgKyBzdGVwU2l6ZTtcbiAgICAgICAgICAgIHByZXZpb3VzUmVhbE51bWJlciA9IHJlc3VsdFZhbHVlc1tpIC0gbmFOQ291bnRdO1xuICAgICAgICAgICAgbmFOQ291bnQtLTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcHJldmlvdXNSZWFsTnVtYmVyID0gcmVzdWx0VmFsdWVzW2ldO1xuICAgICAgICBmaWxsZWRWYWx1ZXMucHVzaChyZXN1bHRWYWx1ZXNbaV0pO1xuICAgICAgfVxuICAgICAgaSsrO1xuICAgIH1cblxuICB9XG5cbiAgdmFyIHJlc3VsdFR1cGxlcyA9IF8uemlwKHJlc3VsdFRpbWVzLCByZXN1bHRWYWx1ZXMpO1xuICByZXR1cm4gcmVzdWx0VHVwbGVzO1xufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/fit_functions/average.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;;;;;;AAM1B,MAAM,CAAC,OAAO,GAAG,UAAU,UAAU,EAAE,YAAY,EAAE;;;;;AAKnD,MAAI,WAAW,GAAG,CAAC,CAAC,KAAK,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC;AAC3C,MAAI,eAAe,GAAG,CAAC,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;AAC1C,MAAI,YAAY,GAAG,CAAC,CAAC,GAAG,CAAC,YAAY,EAAE,UAAU,MAAM,EAAE;AACvD,QAAI,IAAI,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;AACrB,QAAI,CAAC,GAAG,CAAC,CAAC;AACV,QAAI,MAAM,GAAG,EAAE,CAAC;;;;;;AAMhB,WAAO,CAAC,GAAG,eAAe,CAAC,MAAM,IAAI,eAAe,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,EAAE;AAClE,YAAM,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACnC,OAAC,EAAE,CAAC;KACL;;AAED,mBAAe,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;;AAE7B,QAAI,GAAG,GAAG,CAAC,CAAC,MAAM,CAAC,MAAM,EAAE,UAAU,GAAG,EAAE,GAAG,EAAE;AAAE,aAAO,GAAG,GAAG,GAAG,CAAC;KAAE,EAAE,CAAC,CAAC,CAAC;;AAEzE,WAAO,MAAM,CAAC,MAAM,GAAI,GAAG,GAAG,MAAM,CAAC,MAAM,GAAI,GAAG,CAAC;GACpD,CAAC,CAAC;;;;;AAKH,MAAI,QAAQ,GAAG,CAAC,CAAC,SAAS,CAAC,YAAY,EAAE,UAAU,GAAG,EAAE;AACtD,WAAO,KAAK,CAAC,GAAG,CAAC,CAAC;GACnB,CAAC,CAAC;;AAEH,MAAI,QAAQ,GAAG,CAAC,CAAC,EAAE;AACjB,QAAI,CAAC,GAAG,CAAC,CAAC;AACV,QAAI,QAAQ,GAAG,CAAC,CAAC;AACjB,QAAI,YAAY,GAAG,EAAE,CAAC;AACtB,QAAI,kBAAkB,CAAC;AACvB,QAAI,QAAQ,CAAC;AACb,WAAO,CAAC,GAAG,YAAY,CAAC,MAAM,EAAE;AAC9B,UAAI,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,EAAE;AAC1B,YAAI,CAAC,KAAK,CAAC,EAAE;;AAEX,4BAAkB,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;SACvC;AACD,gBAAQ,EAAE,CAAC;OACZ,MAAM;;AAEL,YAAI,QAAQ,GAAG,CAAC,EAAE;AAChB,kBAAQ,GAAG,CAAC,YAAY,CAAC,CAAC,CAAC,GAAG,kBAAkB,CAAA,IAAK,QAAQ,GAAG,CAAC,CAAA,AAAC,CAAC;AACnE,iBAAO,QAAQ,GAAG,CAAC,EAAE;AACnB,wBAAY,CAAC,CAAC,GAAG,QAAQ,CAAC,GAAG,kBAAkB,GAAG,QAAQ,CAAC;AAC3D,8BAAkB,GAAG,YAAY,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC;AAChD,oBAAQ,EAAE,CAAC;WACZ;SACF;AACD,0BAAkB,GAAG,YAAY,CAAC,CAAC,CAAC,CAAC;AACrC,oBAAY,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC;OACpC;AACD,OAAC,EAAE,CAAC;KACL;GAEF;;AAED,MAAI,YAAY,GAAG,CAAC,CAAC,GAAG,CAAC,WAAW,EAAE,YAAY,CAAC,CAAC;AACpD,SAAO,YAAY,CAAC;CACrB,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/fit_functions/average.js",
      "sourcesContent": [
        "var _ = require('lodash');\n\n// Upsampling and down sampling of non-cummulative sets\n// Good: min, max, average\n// Bad: sum, count\n\nmodule.exports = function (dataTuples, targetTuples) {\n\n  // Phase 1: Downsample\n  // We nessecarily won't well match the dataSource here as we don't know how much data\n  // they had when creating their own average\n  var resultTimes = _.pluck(targetTuples, 0);\n  var dataTuplesQueue = _.clone(dataTuples);\n  var resultValues = _.map(targetTuples, function (bucket) {\n    var time = bucket[0];\n    var i = 0;\n    var avgSet = [];\n\n    // This is naive, it doesn't consider where the line is going next,\n    // It simply writes the point and moves on once it hits <= time.\n    // Thus this algorithm will tend to lag the trend.\n    // Deal with it, or write something better.\n    while (i < dataTuplesQueue.length && dataTuplesQueue[i][0] <= time) {\n      avgSet.push(dataTuplesQueue[i][1]);\n      i++;\n    }\n\n    dataTuplesQueue.splice(0, i);\n\n    var sum = _.reduce(avgSet, function (sum, num) { return sum + num; }, 0);\n\n    return avgSet.length ? (sum / avgSet.length) : NaN;\n  });\n\n  // Phase 2: Upsample if needed\n  // If we have any NaNs we are probably resampling from a big interval to a small one (eg, 1M as 1d)\n  // So look for the missing stuff in the array, and smooth it out\n  var naNIndex = _.findIndex(resultValues, function (val) {\n    return isNaN(val);\n  });\n\n  if (naNIndex > -1) {\n    var i = 0;\n    var naNCount = 0;\n    var filledValues = [];\n    var previousRealNumber;\n    var stepSize;\n    while (i < resultValues.length) {\n      if (isNaN(resultValues[i])) {\n        if (i === 0) {\n          // If our first number is NaN, intialize from dataTuples;\n          previousRealNumber = dataTuples[0][1];\n        }\n        naNCount++;\n      } else {\n        // Otherwise, backfill the NaNs with averaged out data\n        if (naNCount > 0) {\n          stepSize = (resultValues[i] - previousRealNumber) / (naNCount + 1);\n          while (naNCount > 0) {\n            resultValues[i - naNCount] = previousRealNumber + stepSize;\n            previousRealNumber = resultValues[i - naNCount];\n            naNCount--;\n          }\n        }\n        previousRealNumber = resultValues[i];\n        filledValues.push(resultValues[i]);\n      }\n      i++;\n    }\n\n  }\n\n  var resultTuples = _.zip(resultTimes, resultValues);\n  return resultTuples;\n};\n"
      ]
    },
    "mtime": 1467119944363
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/fit_functions/carry.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _ = require('lodash');\nvar moment = require('moment');\n\n// Upsampling of non-cummulative sets\n// Good: average, min, max\n// Bad: sum, count\n\n// Don't use this to down sample, it simply won't do the right thing.\nmodule.exports = function (dataTuples, targetTuples) {\n\n  if (dataTuples.length > targetTuples.length) {\n    throw new Error('Don\\'t use the \\'carry\\' fit method to down sample, use \\'scale\\' or \\'average\\'');\n  }\n\n  var currentCarry = dataTuples[0][1];\n  return _.map(targetTuples, function (bucket, h) {\n    var targetTime = bucket[0];\n    var dataTime = dataTuples[0][0];\n\n    if (dataTuples[0] && targetTime >= dataTime) {\n      currentCarry = dataTuples[0][1];\n      if (dataTuples.length > 1) {\n        dataTuples.shift();\n      }\n    }\n\n    return [bucket[0], currentCarry];\n  });\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvZml0X2Z1bmN0aW9ucy9jYXJyeS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQUksQ0FBQyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUMxQixJQUFJLE1BQU0sR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7Ozs7Ozs7QUFPL0IsTUFBTSxDQUFDLE9BQU8sR0FBRyxVQUFVLFVBQVUsRUFBRSxZQUFZLEVBQUU7O0FBRW5ELE1BQUksVUFBVSxDQUFDLE1BQU0sR0FBRyxZQUFZLENBQUMsTUFBTSxFQUFFO0FBQzNDLFVBQU0sSUFBSSxLQUFLLG9GQUE4RSxDQUFDO0dBQy9GOztBQUVELE1BQUksWUFBWSxHQUFHLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNwQyxTQUFPLENBQUMsQ0FBQyxHQUFHLENBQUMsWUFBWSxFQUFFLFVBQVUsTUFBTSxFQUFFLENBQUMsRUFBRTtBQUM5QyxRQUFJLFVBQVUsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDM0IsUUFBSSxRQUFRLEdBQUcsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDOztBQUVoQyxRQUFJLFVBQVUsQ0FBQyxDQUFDLENBQUMsSUFBSSxVQUFVLElBQUksUUFBUSxFQUFFO0FBQzNDLGtCQUFZLEdBQUcsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2hDLFVBQUksVUFBVSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7QUFBRSxrQkFBVSxDQUFDLEtBQUssRUFBRSxDQUFDO09BQUU7S0FDbkQ7O0FBRUQsV0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxZQUFZLENBQUMsQ0FBQztHQUNsQyxDQUFDLENBQUM7Q0FDSixDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvZml0X2Z1bmN0aW9ucy9jYXJyeS5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XG52YXIgbW9tZW50ID0gcmVxdWlyZSgnbW9tZW50Jyk7XG5cbi8vIFVwc2FtcGxpbmcgb2Ygbm9uLWN1bW11bGF0aXZlIHNldHNcbi8vIEdvb2Q6IGF2ZXJhZ2UsIG1pbiwgbWF4XG4vLyBCYWQ6IHN1bSwgY291bnRcblxuLy8gRG9uJ3QgdXNlIHRoaXMgdG8gZG93biBzYW1wbGUsIGl0IHNpbXBseSB3b24ndCBkbyB0aGUgcmlnaHQgdGhpbmcuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChkYXRhVHVwbGVzLCB0YXJnZXRUdXBsZXMpIHtcblxuICBpZiAoZGF0YVR1cGxlcy5sZW5ndGggPiB0YXJnZXRUdXBsZXMubGVuZ3RoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yIChgRG9uJ3QgdXNlIHRoZSAnY2FycnknIGZpdCBtZXRob2QgdG8gZG93biBzYW1wbGUsIHVzZSAnc2NhbGUnIG9yICdhdmVyYWdlJ2ApO1xuICB9XG5cbiAgdmFyIGN1cnJlbnRDYXJyeSA9IGRhdGFUdXBsZXNbMF1bMV07XG4gIHJldHVybiBfLm1hcCh0YXJnZXRUdXBsZXMsIGZ1bmN0aW9uIChidWNrZXQsIGgpIHtcbiAgICB2YXIgdGFyZ2V0VGltZSA9IGJ1Y2tldFswXTtcbiAgICB2YXIgZGF0YVRpbWUgPSBkYXRhVHVwbGVzWzBdWzBdO1xuXG4gICAgaWYgKGRhdGFUdXBsZXNbMF0gJiYgdGFyZ2V0VGltZSA+PSBkYXRhVGltZSkge1xuICAgICAgY3VycmVudENhcnJ5ID0gZGF0YVR1cGxlc1swXVsxXTtcbiAgICAgIGlmIChkYXRhVHVwbGVzLmxlbmd0aCA+IDEpIHsgZGF0YVR1cGxlcy5zaGlmdCgpOyB9XG4gICAgfVxuXG4gICAgcmV0dXJuIFtidWNrZXRbMF0sIGN1cnJlbnRDYXJyeV07XG4gIH0pO1xufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/fit_functions/carry.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC1B,IAAI,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;;;;;;;AAO/B,MAAM,CAAC,OAAO,GAAG,UAAU,UAAU,EAAE,YAAY,EAAE;;AAEnD,MAAI,UAAU,CAAC,MAAM,GAAG,YAAY,CAAC,MAAM,EAAE;AAC3C,UAAM,IAAI,KAAK,oFAA8E,CAAC;GAC/F;;AAED,MAAI,YAAY,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACpC,SAAO,CAAC,CAAC,GAAG,CAAC,YAAY,EAAE,UAAU,MAAM,EAAE,CAAC,EAAE;AAC9C,QAAI,UAAU,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;AAC3B,QAAI,QAAQ,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;AAEhC,QAAI,UAAU,CAAC,CAAC,CAAC,IAAI,UAAU,IAAI,QAAQ,EAAE;AAC3C,kBAAY,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAChC,UAAI,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE;AAAE,kBAAU,CAAC,KAAK,EAAE,CAAC;OAAE;KACnD;;AAED,WAAO,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,YAAY,CAAC,CAAC;GAClC,CAAC,CAAC;CACJ,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/fit_functions/carry.js",
      "sourcesContent": [
        "var _ = require('lodash');\nvar moment = require('moment');\n\n// Upsampling of non-cummulative sets\n// Good: average, min, max\n// Bad: sum, count\n\n// Don't use this to down sample, it simply won't do the right thing.\nmodule.exports = function (dataTuples, targetTuples) {\n\n  if (dataTuples.length > targetTuples.length) {\n    throw new Error (`Don't use the 'carry' fit method to down sample, use 'scale' or 'average'`);\n  }\n\n  var currentCarry = dataTuples[0][1];\n  return _.map(targetTuples, function (bucket, h) {\n    var targetTime = bucket[0];\n    var dataTime = dataTuples[0][0];\n\n    if (dataTuples[0] && targetTime >= dataTime) {\n      currentCarry = dataTuples[0][1];\n      if (dataTuples.length > 1) { dataTuples.shift(); }\n    }\n\n    return [bucket[0], currentCarry];\n  });\n};\n"
      ]
    },
    "mtime": 1467119944363
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/fit_functions/nearest.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _ = require('lodash');\nvar moment = require('moment');\n\n// Upsampling and downsampling of non-cummulative sets\n// Good: average, min, max\n// Bad: sum, count\nmodule.exports = function (dataTuples, targetTuples) {\n  return _.map(targetTuples, function (bucket, h) {\n    var time = bucket[0];\n    var i = 0;\n    while (i < dataTuples.length - 1 && (Math.abs(dataTuples[i + 1][0] - time) < Math.abs(dataTuples[i][0] - time) ||\n    // TODO: Certain offset= args can cause buckets with duplicate times, eg, offset=-1M\n    // check for that, and only use the last of the duplicates. The reason this happens?\n    // What is 1M before Mar 30th? What about 1M before Mar 31st? Both are the last day\n    // in Feb. Something has to be chucked. If offsetting by M user might want to use\n    // fit=average\n    Math.abs(dataTuples[i + 1][0] - time) === Math.abs(dataTuples[i][0] - time))) {\n      i++;\n    }\n\n    var closest = dataTuples[i];\n    dataTuples.splice(0, i);\n\n    return [bucket[0], closest[1]];\n  });\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvZml0X2Z1bmN0aW9ucy9uZWFyZXN0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBSSxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQzFCLElBQUksTUFBTSxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQzs7Ozs7QUFLL0IsTUFBTSxDQUFDLE9BQU8sR0FBRyxVQUFVLFVBQVUsRUFBRSxZQUFZLEVBQUU7QUFDbkQsU0FBTyxDQUFDLENBQUMsR0FBRyxDQUFDLFlBQVksRUFBRSxVQUFVLE1BQU0sRUFBRSxDQUFDLEVBQUU7QUFDOUMsUUFBSSxJQUFJLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3JCLFFBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNWLFdBQU8sQ0FBQyxHQUFHLFVBQVUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxLQUM3QixJQUFJLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDOzs7Ozs7QUFNekUsUUFBSSxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFBLEFBQUMsRUFDN0U7QUFDQSxPQUFDLEVBQUUsQ0FBQztLQUNMOztBQUVELFFBQUksT0FBTyxHQUFHLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM1QixjQUFVLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQzs7QUFFeEIsV0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztHQUNoQyxDQUFDLENBQUM7Q0FDSixDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvZml0X2Z1bmN0aW9ucy9uZWFyZXN0LmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcbnZhciBtb21lbnQgPSByZXF1aXJlKCdtb21lbnQnKTtcblxuLy8gVXBzYW1wbGluZyBhbmQgZG93bnNhbXBsaW5nIG9mIG5vbi1jdW1tdWxhdGl2ZSBzZXRzXG4vLyBHb29kOiBhdmVyYWdlLCBtaW4sIG1heFxuLy8gQmFkOiBzdW0sIGNvdW50XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChkYXRhVHVwbGVzLCB0YXJnZXRUdXBsZXMpIHtcbiAgcmV0dXJuIF8ubWFwKHRhcmdldFR1cGxlcywgZnVuY3Rpb24gKGJ1Y2tldCwgaCkge1xuICAgIHZhciB0aW1lID0gYnVja2V0WzBdO1xuICAgIHZhciBpID0gMDtcbiAgICB3aGlsZSAoaSA8IGRhdGFUdXBsZXMubGVuZ3RoIC0gMSAmJlxuICAgICAgKE1hdGguYWJzKGRhdGFUdXBsZXNbaSArIDFdWzBdIC0gdGltZSkgPCBNYXRoLmFicyhkYXRhVHVwbGVzW2ldWzBdIC0gdGltZSkgfHxcbiAgICAgICAvLyBUT0RPOiBDZXJ0YWluIG9mZnNldD0gYXJncyBjYW4gY2F1c2UgYnVja2V0cyB3aXRoIGR1cGxpY2F0ZSB0aW1lcywgZWcsIG9mZnNldD0tMU1cbiAgICAgICAvLyBjaGVjayBmb3IgdGhhdCwgYW5kIG9ubHkgdXNlIHRoZSBsYXN0IG9mIHRoZSBkdXBsaWNhdGVzLiBUaGUgcmVhc29uIHRoaXMgaGFwcGVucz9cbiAgICAgICAvLyBXaGF0IGlzIDFNIGJlZm9yZSBNYXIgMzB0aD8gV2hhdCBhYm91dCAxTSBiZWZvcmUgTWFyIDMxc3Q/IEJvdGggYXJlIHRoZSBsYXN0IGRheVxuICAgICAgIC8vIGluIEZlYi4gU29tZXRoaW5nIGhhcyB0byBiZSBjaHVja2VkLiBJZiBvZmZzZXR0aW5nIGJ5IE0gdXNlciBtaWdodCB3YW50IHRvIHVzZVxuICAgICAgIC8vIGZpdD1hdmVyYWdlXG4gICAgICAgTWF0aC5hYnMoZGF0YVR1cGxlc1tpICsgMV1bMF0gLSB0aW1lKSA9PT0gTWF0aC5hYnMoZGF0YVR1cGxlc1tpXVswXSAtIHRpbWUpKVxuICAgICkge1xuICAgICAgaSsrO1xuICAgIH1cblxuICAgIHZhciBjbG9zZXN0ID0gZGF0YVR1cGxlc1tpXTtcbiAgICBkYXRhVHVwbGVzLnNwbGljZSgwLCBpKTtcblxuICAgIHJldHVybiBbYnVja2V0WzBdLCBjbG9zZXN0WzFdXTtcbiAgfSk7XG59OyJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/fit_functions/nearest.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC1B,IAAI,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;;;;;AAK/B,MAAM,CAAC,OAAO,GAAG,UAAU,UAAU,EAAE,YAAY,EAAE;AACnD,SAAO,CAAC,CAAC,GAAG,CAAC,YAAY,EAAE,UAAU,MAAM,EAAE,CAAC,EAAE;AAC9C,QAAI,IAAI,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;AACrB,QAAI,CAAC,GAAG,CAAC,CAAC;AACV,WAAO,CAAC,GAAG,UAAU,CAAC,MAAM,GAAG,CAAC,KAC7B,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;;;;;;AAMzE,QAAI,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,CAAA,AAAC,EAC7E;AACA,OAAC,EAAE,CAAC;KACL;;AAED,QAAI,OAAO,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC;AAC5B,cAAU,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;;AAExB,WAAO,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;GAChC,CAAC,CAAC;CACJ,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/fit_functions/nearest.js",
      "sourcesContent": [
        "var _ = require('lodash');\nvar moment = require('moment');\n\n// Upsampling and downsampling of non-cummulative sets\n// Good: average, min, max\n// Bad: sum, count\nmodule.exports = function (dataTuples, targetTuples) {\n  return _.map(targetTuples, function (bucket, h) {\n    var time = bucket[0];\n    var i = 0;\n    while (i < dataTuples.length - 1 &&\n      (Math.abs(dataTuples[i + 1][0] - time) < Math.abs(dataTuples[i][0] - time) ||\n       // TODO: Certain offset= args can cause buckets with duplicate times, eg, offset=-1M\n       // check for that, and only use the last of the duplicates. The reason this happens?\n       // What is 1M before Mar 30th? What about 1M before Mar 31st? Both are the last day\n       // in Feb. Something has to be chucked. If offsetting by M user might want to use\n       // fit=average\n       Math.abs(dataTuples[i + 1][0] - time) === Math.abs(dataTuples[i][0] - time))\n    ) {\n      i++;\n    }\n\n    var closest = dataTuples[i];\n    dataTuples.splice(0, i);\n\n    return [bucket[0], closest[1]];\n  });\n};"
      ]
    },
    "mtime": 1467119944363
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/fit_functions/none.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "\n// **DON'T USE THIS**\n// Performing joins/math with other sets that don't match perfectly will be wrong\n// Does not resample at all.\n\"use strict\";\n\nmodule.exports = function (dataTuples) {\n  return dataTuples;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvZml0X2Z1bmN0aW9ucy9ub25lLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztBQUlBLE1BQU0sQ0FBQyxPQUFPLEdBQUcsVUFBVSxVQUFVLEVBQUU7QUFDckMsU0FBTyxVQUFVLENBQUM7Q0FDbkIsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL2luc3RhbGxlZFBsdWdpbnMvdGltZWxpb24vc2VydmVyL2ZpdF9mdW5jdGlvbnMvbm9uZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxuLy8gKipET04nVCBVU0UgVEhJUyoqXG4vLyBQZXJmb3JtaW5nIGpvaW5zL21hdGggd2l0aCBvdGhlciBzZXRzIHRoYXQgZG9uJ3QgbWF0Y2ggcGVyZmVjdGx5IHdpbGwgYmUgd3Jvbmdcbi8vIERvZXMgbm90IHJlc2FtcGxlIGF0IGFsbC5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGRhdGFUdXBsZXMpIHtcbiAgcmV0dXJuIGRhdGFUdXBsZXM7XG59OyJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/fit_functions/none.js"
      ],
      "names": [],
      "mappings": ";;;;;;AAIA,MAAM,CAAC,OAAO,GAAG,UAAU,UAAU,EAAE;AACrC,SAAO,UAAU,CAAC;CACnB,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/fit_functions/none.js",
      "sourcesContent": [
        "\n// **DON'T USE THIS**\n// Performing joins/math with other sets that don't match perfectly will be wrong\n// Does not resample at all.\nmodule.exports = function (dataTuples) {\n  return dataTuples;\n};"
      ]
    },
    "mtime": 1467119944363
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/fit_functions/scale.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _ = require('lodash');\n\n// Downsampling of cummulative metrics\n// Good: count, sum\n// Bad: avg, min, max\n\n// For upsampling cummulative metrics (eg sum from 1M to 1d), could rename this scale.\n// Really only the 0s that screws this up, need to distribute contents of spikes to empty buckets\n// Empty is currently 0, which is not right\n\nfunction sum(set) {\n  return _.reduce(set, function (sum, num) {\n    return sum + num;\n  }, 0);\n}\n\nmodule.exports = function (dataTuples, targetTuples) {\n\n  var i = 0;\n  var j = 0;\n  var spreadCount = 0;\n  var result = [];\n  var bucket;\n  var time;\n  var scaleSet;\n  var step;\n  var nextRealNumber;\n\n  while (i < targetTuples.length) {\n    scaleSet = [];\n    bucket = targetTuples[i];\n    time = bucket[0];\n\n    // Find stuff to sum\n    j = 0;\n    while (j < dataTuples.length && Math.abs(dataTuples[j][0] <= time)) {\n      scaleSet.push(dataTuples[j][1]);\n      j++;\n    }\n    dataTuples.splice(0, j);\n\n    // We hit a real number, or the end\n    if (scaleSet.length > 0 || i === targetTuples.length - 1) {\n\n      nextRealNumber = sum(scaleSet);\n\n      step = nextRealNumber;\n      // Backfill null buckets\n      if (spreadCount > 0) {\n        // Naively distibute the nextRealNumber amoungst the buckets\n        // Without considering where it is headed next\n        // We do spreadCount + 1 so that we include nextRealNumber when we smooth things out,\n        // since we'll overwrite it anyway.\n        // Thus [5, null, null, 30] becomes [5, 10, 10, 10]\n        step = nextRealNumber / (spreadCount + 1);\n        while (spreadCount > 0) {\n\n          result[i - spreadCount][1] = step;\n          spreadCount--;\n        }\n      }\n      result.push([time, step]);\n    } else {\n      result.push([time, null]);\n      spreadCount++;\n    }\n\n    i++;\n  }\n\n  return result;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvZml0X2Z1bmN0aW9ucy9zY2FsZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQUksQ0FBQyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQzs7Ozs7Ozs7OztBQVcxQixTQUFTLEdBQUcsQ0FBQyxHQUFHLEVBQUU7QUFDaEIsU0FBTyxDQUFDLENBQUMsTUFBTSxDQUFDLEdBQUcsRUFBRSxVQUFVLEdBQUcsRUFBRSxHQUFHLEVBQUU7QUFBRSxXQUFPLEdBQUcsR0FBRyxHQUFHLENBQUM7R0FBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO0NBQ3BFOztBQUVELE1BQU0sQ0FBQyxPQUFPLEdBQUcsVUFBVSxVQUFVLEVBQUUsWUFBWSxFQUFFOztBQUVuRCxNQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDVixNQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDVixNQUFJLFdBQVcsR0FBRyxDQUFDLENBQUM7QUFDcEIsTUFBSSxNQUFNLEdBQUcsRUFBRSxDQUFDO0FBQ2hCLE1BQUksTUFBTSxDQUFDO0FBQ1gsTUFBSSxJQUFJLENBQUM7QUFDVCxNQUFJLFFBQVEsQ0FBQztBQUNiLE1BQUksSUFBSSxDQUFDO0FBQ1QsTUFBSSxjQUFjLENBQUM7O0FBRW5CLFNBQU8sQ0FBQyxHQUFHLFlBQVksQ0FBQyxNQUFNLEVBQUU7QUFDOUIsWUFBUSxHQUFHLEVBQUUsQ0FBQztBQUNkLFVBQU0sR0FBRyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDekIsUUFBSSxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQzs7O0FBR2pCLEtBQUMsR0FBRyxDQUFDLENBQUM7QUFDTixXQUFPLENBQUMsR0FBRyxVQUFVLENBQUMsTUFBTSxJQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxFQUFFO0FBQ2xFLGNBQVEsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDaEMsT0FBQyxFQUFFLENBQUM7S0FDTDtBQUNELGNBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDOzs7QUFHeEIsUUFBSSxRQUFRLENBQUMsTUFBTSxHQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssWUFBWSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7O0FBRXhELG9CQUFjLEdBQUcsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDOztBQUUvQixVQUFJLEdBQUcsY0FBYyxDQUFDOztBQUV0QixVQUFJLFdBQVcsR0FBRyxDQUFDLEVBQUU7Ozs7OztBQU1uQixZQUFJLEdBQUcsY0FBYyxJQUFJLFdBQVcsR0FBRyxDQUFDLENBQUEsQUFBQyxDQUFDO0FBQzFDLGVBQU8sV0FBVyxHQUFHLENBQUMsRUFBRTs7QUFFdEIsZ0JBQU0sQ0FBQyxDQUFDLEdBQUcsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDO0FBQ2xDLHFCQUFXLEVBQUUsQ0FBQztTQUNmO09BQ0Y7QUFDRCxZQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUM7S0FFM0IsTUFBTTtBQUNMLFlBQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQztBQUMxQixpQkFBVyxFQUFFLENBQUM7S0FDZjs7QUFFRCxLQUFDLEVBQUUsQ0FBQztHQUVMOztBQUVELFNBQU8sTUFBTSxDQUFDO0NBQ2YsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL2luc3RhbGxlZFBsdWdpbnMvdGltZWxpb24vc2VydmVyL2ZpdF9mdW5jdGlvbnMvc2NhbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xuXG4vLyBEb3duc2FtcGxpbmcgb2YgY3VtbXVsYXRpdmUgbWV0cmljc1xuLy8gR29vZDogY291bnQsIHN1bVxuLy8gQmFkOiBhdmcsIG1pbiwgbWF4XG5cblxuLy8gRm9yIHVwc2FtcGxpbmcgY3VtbXVsYXRpdmUgbWV0cmljcyAoZWcgc3VtIGZyb20gMU0gdG8gMWQpLCBjb3VsZCByZW5hbWUgdGhpcyBzY2FsZS5cbi8vIFJlYWxseSBvbmx5IHRoZSAwcyB0aGF0IHNjcmV3cyB0aGlzIHVwLCBuZWVkIHRvIGRpc3RyaWJ1dGUgY29udGVudHMgb2Ygc3Bpa2VzIHRvIGVtcHR5IGJ1Y2tldHNcbi8vIEVtcHR5IGlzIGN1cnJlbnRseSAwLCB3aGljaCBpcyBub3QgcmlnaHRcblxuZnVuY3Rpb24gc3VtKHNldCkge1xuICByZXR1cm4gXy5yZWR1Y2Uoc2V0LCBmdW5jdGlvbiAoc3VtLCBudW0pIHsgcmV0dXJuIHN1bSArIG51bTsgfSwgMCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGRhdGFUdXBsZXMsIHRhcmdldFR1cGxlcykge1xuXG4gIHZhciBpID0gMDtcbiAgdmFyIGogPSAwO1xuICB2YXIgc3ByZWFkQ291bnQgPSAwO1xuICB2YXIgcmVzdWx0ID0gW107XG4gIHZhciBidWNrZXQ7XG4gIHZhciB0aW1lO1xuICB2YXIgc2NhbGVTZXQ7XG4gIHZhciBzdGVwO1xuICB2YXIgbmV4dFJlYWxOdW1iZXI7XG5cbiAgd2hpbGUgKGkgPCB0YXJnZXRUdXBsZXMubGVuZ3RoKSB7XG4gICAgc2NhbGVTZXQgPSBbXTtcbiAgICBidWNrZXQgPSB0YXJnZXRUdXBsZXNbaV07XG4gICAgdGltZSA9IGJ1Y2tldFswXTtcblxuICAgIC8vIEZpbmQgc3R1ZmYgdG8gc3VtXG4gICAgaiA9IDA7XG4gICAgd2hpbGUgKGogPCBkYXRhVHVwbGVzLmxlbmd0aCAmJiBNYXRoLmFicyhkYXRhVHVwbGVzW2pdWzBdIDw9IHRpbWUpKSB7XG4gICAgICBzY2FsZVNldC5wdXNoKGRhdGFUdXBsZXNbal1bMV0pO1xuICAgICAgaisrO1xuICAgIH1cbiAgICBkYXRhVHVwbGVzLnNwbGljZSgwLCBqKTtcblxuICAgIC8vIFdlIGhpdCBhIHJlYWwgbnVtYmVyLCBvciB0aGUgZW5kXG4gICAgaWYgKHNjYWxlU2V0Lmxlbmd0aCA+IDAgfHwgaSA9PT0gdGFyZ2V0VHVwbGVzLmxlbmd0aCAtIDEpIHtcblxuICAgICAgbmV4dFJlYWxOdW1iZXIgPSBzdW0oc2NhbGVTZXQpO1xuXG4gICAgICBzdGVwID0gbmV4dFJlYWxOdW1iZXI7XG4gICAgICAvLyBCYWNrZmlsbCBudWxsIGJ1Y2tldHNcbiAgICAgIGlmIChzcHJlYWRDb3VudCA+IDApIHtcbiAgICAgICAgLy8gTmFpdmVseSBkaXN0aWJ1dGUgdGhlIG5leHRSZWFsTnVtYmVyIGFtb3VuZ3N0IHRoZSBidWNrZXRzXG4gICAgICAgIC8vIFdpdGhvdXQgY29uc2lkZXJpbmcgd2hlcmUgaXQgaXMgaGVhZGVkIG5leHRcbiAgICAgICAgLy8gV2UgZG8gc3ByZWFkQ291bnQgKyAxIHNvIHRoYXQgd2UgaW5jbHVkZSBuZXh0UmVhbE51bWJlciB3aGVuIHdlIHNtb290aCB0aGluZ3Mgb3V0LFxuICAgICAgICAvLyBzaW5jZSB3ZSdsbCBvdmVyd3JpdGUgaXQgYW55d2F5LlxuICAgICAgICAvLyBUaHVzIFs1LCBudWxsLCBudWxsLCAzMF0gYmVjb21lcyBbNSwgMTAsIDEwLCAxMF1cbiAgICAgICAgc3RlcCA9IG5leHRSZWFsTnVtYmVyIC8gKHNwcmVhZENvdW50ICsgMSk7XG4gICAgICAgIHdoaWxlIChzcHJlYWRDb3VudCA+IDApIHtcblxuICAgICAgICAgIHJlc3VsdFtpIC0gc3ByZWFkQ291bnRdWzFdID0gc3RlcDtcbiAgICAgICAgICBzcHJlYWRDb3VudC0tO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXN1bHQucHVzaChbdGltZSwgc3RlcF0pO1xuXG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdC5wdXNoKFt0aW1lLCBudWxsXSk7XG4gICAgICBzcHJlYWRDb3VudCsrO1xuICAgIH1cblxuICAgIGkrKztcblxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/fit_functions/scale.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;;;;;;;;;;AAW1B,SAAS,GAAG,CAAC,GAAG,EAAE;AAChB,SAAO,CAAC,CAAC,MAAM,CAAC,GAAG,EAAE,UAAU,GAAG,EAAE,GAAG,EAAE;AAAE,WAAO,GAAG,GAAG,GAAG,CAAC;GAAE,EAAE,CAAC,CAAC,CAAC;CACpE;;AAED,MAAM,CAAC,OAAO,GAAG,UAAU,UAAU,EAAE,YAAY,EAAE;;AAEnD,MAAI,CAAC,GAAG,CAAC,CAAC;AACV,MAAI,CAAC,GAAG,CAAC,CAAC;AACV,MAAI,WAAW,GAAG,CAAC,CAAC;AACpB,MAAI,MAAM,GAAG,EAAE,CAAC;AAChB,MAAI,MAAM,CAAC;AACX,MAAI,IAAI,CAAC;AACT,MAAI,QAAQ,CAAC;AACb,MAAI,IAAI,CAAC;AACT,MAAI,cAAc,CAAC;;AAEnB,SAAO,CAAC,GAAG,YAAY,CAAC,MAAM,EAAE;AAC9B,YAAQ,GAAG,EAAE,CAAC;AACd,UAAM,GAAG,YAAY,CAAC,CAAC,CAAC,CAAC;AACzB,QAAI,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;;;AAGjB,KAAC,GAAG,CAAC,CAAC;AACN,WAAO,CAAC,GAAG,UAAU,CAAC,MAAM,IAAI,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,EAAE;AAClE,cAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAChC,OAAC,EAAE,CAAC;KACL;AACD,cAAU,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;;;AAGxB,QAAI,QAAQ,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,KAAK,YAAY,CAAC,MAAM,GAAG,CAAC,EAAE;;AAExD,oBAAc,GAAG,GAAG,CAAC,QAAQ,CAAC,CAAC;;AAE/B,UAAI,GAAG,cAAc,CAAC;;AAEtB,UAAI,WAAW,GAAG,CAAC,EAAE;;;;;;AAMnB,YAAI,GAAG,cAAc,IAAI,WAAW,GAAG,CAAC,CAAA,AAAC,CAAC;AAC1C,eAAO,WAAW,GAAG,CAAC,EAAE;;AAEtB,gBAAM,CAAC,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;AAClC,qBAAW,EAAE,CAAC;SACf;OACF;AACD,YAAM,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC;KAE3B,MAAM;AACL,YAAM,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC;AAC1B,iBAAW,EAAE,CAAC;KACf;;AAED,KAAC,EAAE,CAAC;GAEL;;AAED,SAAO,MAAM,CAAC;CACf,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/fit_functions/scale.js",
      "sourcesContent": [
        "var _ = require('lodash');\n\n// Downsampling of cummulative metrics\n// Good: count, sum\n// Bad: avg, min, max\n\n\n// For upsampling cummulative metrics (eg sum from 1M to 1d), could rename this scale.\n// Really only the 0s that screws this up, need to distribute contents of spikes to empty buckets\n// Empty is currently 0, which is not right\n\nfunction sum(set) {\n  return _.reduce(set, function (sum, num) { return sum + num; }, 0);\n}\n\nmodule.exports = function (dataTuples, targetTuples) {\n\n  var i = 0;\n  var j = 0;\n  var spreadCount = 0;\n  var result = [];\n  var bucket;\n  var time;\n  var scaleSet;\n  var step;\n  var nextRealNumber;\n\n  while (i < targetTuples.length) {\n    scaleSet = [];\n    bucket = targetTuples[i];\n    time = bucket[0];\n\n    // Find stuff to sum\n    j = 0;\n    while (j < dataTuples.length && Math.abs(dataTuples[j][0] <= time)) {\n      scaleSet.push(dataTuples[j][1]);\n      j++;\n    }\n    dataTuples.splice(0, j);\n\n    // We hit a real number, or the end\n    if (scaleSet.length > 0 || i === targetTuples.length - 1) {\n\n      nextRealNumber = sum(scaleSet);\n\n      step = nextRealNumber;\n      // Backfill null buckets\n      if (spreadCount > 0) {\n        // Naively distibute the nextRealNumber amoungst the buckets\n        // Without considering where it is headed next\n        // We do spreadCount + 1 so that we include nextRealNumber when we smooth things out,\n        // since we'll overwrite it anyway.\n        // Thus [5, null, null, 30] becomes [5, 10, 10, 10]\n        step = nextRealNumber / (spreadCount + 1);\n        while (spreadCount > 0) {\n\n          result[i - spreadCount][1] = step;\n          spreadCount--;\n        }\n      }\n      result.push([time, step]);\n\n    } else {\n      result.push([time, null]);\n      spreadCount++;\n    }\n\n    i++;\n\n  }\n\n  return result;\n};\n"
      ]
    },
    "mtime": 1467119944363
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/bars.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar alter = require('../lib/alter.js');\nvar Chainable = require('../lib/classes/chainable');\nmodule.exports = new Chainable('bars', {\n  args: [{\n    name: 'inputSeries',\n    types: ['seriesList']\n  }, {\n    name: 'width',\n    types: ['number', 'null'],\n    help: 'Width of bars in pixels'\n  }, {\n    name: 'stack',\n    types: ['boolean', 'null'],\n    help: 'Should bars be stacked, true by default'\n  }],\n  help: 'Show the seriesList as bars',\n  fn: function barsFn(args) {\n    return alter(args, function (eachSeries, width, stack) {\n      eachSeries.bars = eachSeries.bars || {};\n      eachSeries.bars.show = width == null ? 1 : width;\n      eachSeries.bars.lineWidth = width == null ? 6 : width;\n      eachSeries.stack = stack == null ? true : stack;\n      return eachSeries;\n    });\n  }\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy9iYXJzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBSSxLQUFLLEdBQUcsT0FBTyxDQUFDLGlCQUFpQixDQUFDLENBQUM7QUFDdkMsSUFBSSxTQUFTLEdBQUcsT0FBTyxDQUFDLDBCQUEwQixDQUFDLENBQUM7QUFDcEQsTUFBTSxDQUFDLE9BQU8sR0FBRyxJQUFJLFNBQVMsQ0FBQyxNQUFNLEVBQUU7QUFDckMsTUFBSSxFQUFFLENBQ0o7QUFDRSxRQUFJLEVBQUUsYUFBYTtBQUNuQixTQUFLLEVBQUUsQ0FBQyxZQUFZLENBQUM7R0FDdEIsRUFDRDtBQUNFLFFBQUksRUFBRSxPQUFPO0FBQ2IsU0FBSyxFQUFFLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQztBQUN6QixRQUFJLEVBQUUseUJBQXlCO0dBQ2hDLEVBQ0Q7QUFDRSxRQUFJLEVBQUUsT0FBTztBQUNiLFNBQUssRUFBRSxDQUFDLFNBQVMsRUFBRSxNQUFNLENBQUM7QUFDMUIsUUFBSSxFQUFFLHlDQUF5QztHQUNoRCxDQUNGO0FBQ0QsTUFBSSxFQUFFLDZCQUE2QjtBQUNuQyxJQUFFLEVBQUUsU0FBUyxNQUFNLENBQUMsSUFBSSxFQUFFO0FBQ3hCLFdBQU8sS0FBSyxDQUFDLElBQUksRUFBRSxVQUFVLFVBQVUsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFO0FBQ3JELGdCQUFVLENBQUMsSUFBSSxHQUFHLFVBQVUsQ0FBQyxJQUFJLElBQUksRUFBRSxDQUFDO0FBQ3hDLGdCQUFVLENBQUMsSUFBSSxDQUFDLElBQUksR0FBRyxLQUFLLElBQUksSUFBSSxHQUFHLENBQUMsR0FBRyxLQUFLLENBQUM7QUFDakQsZ0JBQVUsQ0FBQyxJQUFJLENBQUMsU0FBUyxHQUFHLEtBQUssSUFBSSxJQUFJLEdBQUcsQ0FBQyxHQUFHLEtBQUssQ0FBQztBQUN0RCxnQkFBVSxDQUFDLEtBQUssR0FBRyxLQUFLLElBQUksSUFBSSxHQUFHLElBQUksR0FBRyxLQUFLLENBQUM7QUFDaEQsYUFBTyxVQUFVLENBQUM7S0FDbkIsQ0FBQyxDQUFDO0dBQ0o7Q0FDRixDQUFDLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9pbnN0YWxsZWRQbHVnaW5zL3RpbWVsaW9uL3NlcnZlci9zZXJpZXNfZnVuY3Rpb25zL2JhcnMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYWx0ZXIgPSByZXF1aXJlKCcuLi9saWIvYWx0ZXIuanMnKTtcbnZhciBDaGFpbmFibGUgPSByZXF1aXJlKCcuLi9saWIvY2xhc3Nlcy9jaGFpbmFibGUnKTtcbm1vZHVsZS5leHBvcnRzID0gbmV3IENoYWluYWJsZSgnYmFycycsIHtcbiAgYXJnczogW1xuICAgIHtcbiAgICAgIG5hbWU6ICdpbnB1dFNlcmllcycsXG4gICAgICB0eXBlczogWydzZXJpZXNMaXN0J11cbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICd3aWR0aCcsXG4gICAgICB0eXBlczogWydudW1iZXInLCAnbnVsbCddLFxuICAgICAgaGVscDogJ1dpZHRoIG9mIGJhcnMgaW4gcGl4ZWxzJ1xuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ3N0YWNrJyxcbiAgICAgIHR5cGVzOiBbJ2Jvb2xlYW4nLCAnbnVsbCddLFxuICAgICAgaGVscDogJ1Nob3VsZCBiYXJzIGJlIHN0YWNrZWQsIHRydWUgYnkgZGVmYXVsdCdcbiAgICB9XG4gIF0sXG4gIGhlbHA6ICdTaG93IHRoZSBzZXJpZXNMaXN0IGFzIGJhcnMnLFxuICBmbjogZnVuY3Rpb24gYmFyc0ZuKGFyZ3MpIHtcbiAgICByZXR1cm4gYWx0ZXIoYXJncywgZnVuY3Rpb24gKGVhY2hTZXJpZXMsIHdpZHRoLCBzdGFjaykge1xuICAgICAgZWFjaFNlcmllcy5iYXJzID0gZWFjaFNlcmllcy5iYXJzIHx8IHt9O1xuICAgICAgZWFjaFNlcmllcy5iYXJzLnNob3cgPSB3aWR0aCA9PSBudWxsID8gMSA6IHdpZHRoO1xuICAgICAgZWFjaFNlcmllcy5iYXJzLmxpbmVXaWR0aCA9IHdpZHRoID09IG51bGwgPyA2IDogd2lkdGg7XG4gICAgICBlYWNoU2VyaWVzLnN0YWNrID0gc3RhY2sgPT0gbnVsbCA/IHRydWUgOiBzdGFjaztcbiAgICAgIHJldHVybiBlYWNoU2VyaWVzO1xuICAgIH0pO1xuICB9XG59KTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/bars.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,KAAK,GAAG,OAAO,CAAC,iBAAiB,CAAC,CAAC;AACvC,IAAI,SAAS,GAAG,OAAO,CAAC,0BAA0B,CAAC,CAAC;AACpD,MAAM,CAAC,OAAO,GAAG,IAAI,SAAS,CAAC,MAAM,EAAE;AACrC,MAAI,EAAE,CACJ;AACE,QAAI,EAAE,aAAa;AACnB,SAAK,EAAE,CAAC,YAAY,CAAC;GACtB,EACD;AACE,QAAI,EAAE,OAAO;AACb,SAAK,EAAE,CAAC,QAAQ,EAAE,MAAM,CAAC;AACzB,QAAI,EAAE,yBAAyB;GAChC,EACD;AACE,QAAI,EAAE,OAAO;AACb,SAAK,EAAE,CAAC,SAAS,EAAE,MAAM,CAAC;AAC1B,QAAI,EAAE,yCAAyC;GAChD,CACF;AACD,MAAI,EAAE,6BAA6B;AACnC,IAAE,EAAE,SAAS,MAAM,CAAC,IAAI,EAAE;AACxB,WAAO,KAAK,CAAC,IAAI,EAAE,UAAU,UAAU,EAAE,KAAK,EAAE,KAAK,EAAE;AACrD,gBAAU,CAAC,IAAI,GAAG,UAAU,CAAC,IAAI,IAAI,EAAE,CAAC;AACxC,gBAAU,CAAC,IAAI,CAAC,IAAI,GAAG,KAAK,IAAI,IAAI,GAAG,CAAC,GAAG,KAAK,CAAC;AACjD,gBAAU,CAAC,IAAI,CAAC,SAAS,GAAG,KAAK,IAAI,IAAI,GAAG,CAAC,GAAG,KAAK,CAAC;AACtD,gBAAU,CAAC,KAAK,GAAG,KAAK,IAAI,IAAI,GAAG,IAAI,GAAG,KAAK,CAAC;AAChD,aAAO,UAAU,CAAC;KACnB,CAAC,CAAC;GACJ;CACF,CAAC,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/bars.js",
      "sourcesContent": [
        "var alter = require('../lib/alter.js');\nvar Chainable = require('../lib/classes/chainable');\nmodule.exports = new Chainable('bars', {\n  args: [\n    {\n      name: 'inputSeries',\n      types: ['seriesList']\n    },\n    {\n      name: 'width',\n      types: ['number', 'null'],\n      help: 'Width of bars in pixels'\n    },\n    {\n      name: 'stack',\n      types: ['boolean', 'null'],\n      help: 'Should bars be stacked, true by default'\n    }\n  ],\n  help: 'Show the seriesList as bars',\n  fn: function barsFn(args) {\n    return alter(args, function (eachSeries, width, stack) {\n      eachSeries.bars = eachSeries.bars || {};\n      eachSeries.bars.show = width == null ? 1 : width;\n      eachSeries.bars.lineWidth = width == null ? 6 : width;\n      eachSeries.stack = stack == null ? true : stack;\n      return eachSeries;\n    });\n  }\n});\n"
      ]
    },
    "mtime": 1467119944363
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/color.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar alter = require('../lib/alter.js');\nvar Chainable = require('../lib/classes/chainable');\nvar tinygradient = require('tinygradient');\n\nmodule.exports = new Chainable('color', {\n  args: [{\n    name: 'inputSeries',\n    types: ['seriesList']\n  }, {\n    name: 'color',\n    types: ['string'],\n    help: 'Color of series, as hex, eg #c6c6c6 is a lovely light grey. If you specify multiple colors, and have ' + 'multiple series, you will get a gradient, eg \"#00B1CC:#00FF94:#FF3A39:#CC1A6F\"'\n  }],\n  help: 'Change the color of the series',\n  fn: function colorFn(args) {\n    var colors = args.byName.color.split(':');\n\n    if (colors.length > 1 && args.byName.inputSeries.list.length > 1) {\n      colors = tinygradient(colors).rgb(args.byName.inputSeries.list.length);\n    }\n\n    var i = 0;\n    return alter(args, function (eachSeries) {\n      if (colors.length === 1 || args.byName.inputSeries.list.length === 1) {\n        eachSeries.color = colors[0];\n      } else if (colors.length > 1) {\n        eachSeries.color = colors[i].toHexString();\n        i++;\n      } else {\n        throw new Error('Hey, I need at least one color to work with');\n      }\n\n      return eachSeries;\n    });\n  }\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy9jb2xvci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQUksS0FBSyxHQUFHLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0FBQ3ZDLElBQUksU0FBUyxHQUFHLE9BQU8sQ0FBQywwQkFBMEIsQ0FBQyxDQUFDO0FBQ3BELElBQUksWUFBWSxHQUFHLE9BQU8sQ0FBQyxjQUFjLENBQUMsQ0FBQzs7QUFFM0MsTUFBTSxDQUFDLE9BQU8sR0FBRyxJQUFJLFNBQVMsQ0FBQyxPQUFPLEVBQUU7QUFDdEMsTUFBSSxFQUFFLENBQ0o7QUFDRSxRQUFJLEVBQUUsYUFBYTtBQUNuQixTQUFLLEVBQUUsQ0FBQyxZQUFZLENBQUM7R0FDdEIsRUFDRDtBQUNFLFFBQUksRUFBRSxPQUFPO0FBQ2IsU0FBSyxFQUFFLENBQUMsUUFBUSxDQUFDO0FBQ2pCLFFBQUksRUFBRSx1R0FBdUcsR0FDNUcsZ0ZBQWdGO0dBQ2xGLENBQ0Y7QUFDRCxNQUFJLEVBQUUsZ0NBQWdDO0FBQ3RDLElBQUUsRUFBRSxTQUFTLE9BQU8sQ0FBQyxJQUFJLEVBQUU7QUFDekIsUUFBSSxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDOztBQUUxQyxRQUFJLE1BQU0sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO0FBQ2hFLFlBQU0sR0FBRyxZQUFZLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztLQUN4RTs7QUFFRCxRQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDVixXQUFPLEtBQUssQ0FBQyxJQUFJLEVBQUUsVUFBVSxVQUFVLEVBQUU7QUFDdkMsVUFBSSxNQUFNLENBQUMsTUFBTSxLQUFLLENBQUMsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRTtBQUNwRSxrQkFBVSxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7T0FDOUIsTUFBTSxJQUFJLE1BQU0sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO0FBQzVCLGtCQUFVLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztBQUMzQyxTQUFDLEVBQUUsQ0FBQztPQUNMLE1BQU07QUFDTCxjQUFNLElBQUksS0FBSyxDQUFDLDZDQUE2QyxDQUFDLENBQUM7T0FDaEU7O0FBRUQsYUFBTyxVQUFVLENBQUM7S0FDbkIsQ0FBQyxDQUFDO0dBQ0o7Q0FDRixDQUFDLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9pbnN0YWxsZWRQbHVnaW5zL3RpbWVsaW9uL3NlcnZlci9zZXJpZXNfZnVuY3Rpb25zL2NvbG9yLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGFsdGVyID0gcmVxdWlyZSgnLi4vbGliL2FsdGVyLmpzJyk7XG52YXIgQ2hhaW5hYmxlID0gcmVxdWlyZSgnLi4vbGliL2NsYXNzZXMvY2hhaW5hYmxlJyk7XG52YXIgdGlueWdyYWRpZW50ID0gcmVxdWlyZSgndGlueWdyYWRpZW50Jyk7XG5cbm1vZHVsZS5leHBvcnRzID0gbmV3IENoYWluYWJsZSgnY29sb3InLCB7XG4gIGFyZ3M6IFtcbiAgICB7XG4gICAgICBuYW1lOiAnaW5wdXRTZXJpZXMnLFxuICAgICAgdHlwZXM6IFsnc2VyaWVzTGlzdCddXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAnY29sb3InLFxuICAgICAgdHlwZXM6IFsnc3RyaW5nJ10sXG4gICAgICBoZWxwOiAnQ29sb3Igb2Ygc2VyaWVzLCBhcyBoZXgsIGVnICNjNmM2YzYgaXMgYSBsb3ZlbHkgbGlnaHQgZ3JleS4gSWYgeW91IHNwZWNpZnkgbXVsdGlwbGUgY29sb3JzLCBhbmQgaGF2ZSAnICtcbiAgICAgICAnbXVsdGlwbGUgc2VyaWVzLCB5b3Ugd2lsbCBnZXQgYSBncmFkaWVudCwgZWcgXCIjMDBCMUNDOiMwMEZGOTQ6I0ZGM0EzOTojQ0MxQTZGXCInXG4gICAgfVxuICBdLFxuICBoZWxwOiAnQ2hhbmdlIHRoZSBjb2xvciBvZiB0aGUgc2VyaWVzJyxcbiAgZm46IGZ1bmN0aW9uIGNvbG9yRm4oYXJncykge1xuICAgIHZhciBjb2xvcnMgPSBhcmdzLmJ5TmFtZS5jb2xvci5zcGxpdCgnOicpO1xuXG4gICAgaWYgKGNvbG9ycy5sZW5ndGggPiAxICYmIGFyZ3MuYnlOYW1lLmlucHV0U2VyaWVzLmxpc3QubGVuZ3RoID4gMSkge1xuICAgICAgY29sb3JzID0gdGlueWdyYWRpZW50KGNvbG9ycykucmdiKGFyZ3MuYnlOYW1lLmlucHV0U2VyaWVzLmxpc3QubGVuZ3RoKTtcbiAgICB9XG5cbiAgICB2YXIgaSA9IDA7XG4gICAgcmV0dXJuIGFsdGVyKGFyZ3MsIGZ1bmN0aW9uIChlYWNoU2VyaWVzKSB7XG4gICAgICBpZiAoY29sb3JzLmxlbmd0aCA9PT0gMSB8fCBhcmdzLmJ5TmFtZS5pbnB1dFNlcmllcy5saXN0Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBlYWNoU2VyaWVzLmNvbG9yID0gY29sb3JzWzBdO1xuICAgICAgfSBlbHNlIGlmIChjb2xvcnMubGVuZ3RoID4gMSkge1xuICAgICAgICBlYWNoU2VyaWVzLmNvbG9yID0gY29sb3JzW2ldLnRvSGV4U3RyaW5nKCk7XG4gICAgICAgIGkrKztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSGV5LCBJIG5lZWQgYXQgbGVhc3Qgb25lIGNvbG9yIHRvIHdvcmsgd2l0aCcpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZWFjaFNlcmllcztcbiAgICB9KTtcbiAgfVxufSk7XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/color.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,KAAK,GAAG,OAAO,CAAC,iBAAiB,CAAC,CAAC;AACvC,IAAI,SAAS,GAAG,OAAO,CAAC,0BAA0B,CAAC,CAAC;AACpD,IAAI,YAAY,GAAG,OAAO,CAAC,cAAc,CAAC,CAAC;;AAE3C,MAAM,CAAC,OAAO,GAAG,IAAI,SAAS,CAAC,OAAO,EAAE;AACtC,MAAI,EAAE,CACJ;AACE,QAAI,EAAE,aAAa;AACnB,SAAK,EAAE,CAAC,YAAY,CAAC;GACtB,EACD;AACE,QAAI,EAAE,OAAO;AACb,SAAK,EAAE,CAAC,QAAQ,CAAC;AACjB,QAAI,EAAE,uGAAuG,GAC5G,gFAAgF;GAClF,CACF;AACD,MAAI,EAAE,gCAAgC;AACtC,IAAE,EAAE,SAAS,OAAO,CAAC,IAAI,EAAE;AACzB,QAAI,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;;AAE1C,QAAI,MAAM,CAAC,MAAM,GAAG,CAAC,IAAI,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;AAChE,YAAM,GAAG,YAAY,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;KACxE;;AAED,QAAI,CAAC,GAAG,CAAC,CAAC;AACV,WAAO,KAAK,CAAC,IAAI,EAAE,UAAU,UAAU,EAAE;AACvC,UAAI,MAAM,CAAC,MAAM,KAAK,CAAC,IAAI,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,KAAK,CAAC,EAAE;AACpE,kBAAU,CAAC,KAAK,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;OAC9B,MAAM,IAAI,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE;AAC5B,kBAAU,CAAC,KAAK,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC;AAC3C,SAAC,EAAE,CAAC;OACL,MAAM;AACL,cAAM,IAAI,KAAK,CAAC,6CAA6C,CAAC,CAAC;OAChE;;AAED,aAAO,UAAU,CAAC;KACnB,CAAC,CAAC;GACJ;CACF,CAAC,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/color.js",
      "sourcesContent": [
        "var alter = require('../lib/alter.js');\nvar Chainable = require('../lib/classes/chainable');\nvar tinygradient = require('tinygradient');\n\nmodule.exports = new Chainable('color', {\n  args: [\n    {\n      name: 'inputSeries',\n      types: ['seriesList']\n    },\n    {\n      name: 'color',\n      types: ['string'],\n      help: 'Color of series, as hex, eg #c6c6c6 is a lovely light grey. If you specify multiple colors, and have ' +\n       'multiple series, you will get a gradient, eg \"#00B1CC:#00FF94:#FF3A39:#CC1A6F\"'\n    }\n  ],\n  help: 'Change the color of the series',\n  fn: function colorFn(args) {\n    var colors = args.byName.color.split(':');\n\n    if (colors.length > 1 && args.byName.inputSeries.list.length > 1) {\n      colors = tinygradient(colors).rgb(args.byName.inputSeries.list.length);\n    }\n\n    var i = 0;\n    return alter(args, function (eachSeries) {\n      if (colors.length === 1 || args.byName.inputSeries.list.length === 1) {\n        eachSeries.color = colors[0];\n      } else if (colors.length > 1) {\n        eachSeries.color = colors[i].toHexString();\n        i++;\n      } else {\n        throw new Error('Hey, I need at least one color to work with');\n      }\n\n      return eachSeries;\n    });\n  }\n});\n"
      ]
    },
    "mtime": 1467119944363
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/condition.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar alter = require('../lib/alter.js');\nvar _ = require('lodash');\nvar Chainable = require('../lib/classes/chainable');\nvar argType = require('../handlers/lib/arg_type.js');\n\nmodule.exports = new Chainable('condition', {\n  args: [{\n    name: 'inputSeries',\n    types: ['seriesList']\n  }, {\n    name: 'operator', // <, <=, >, >=, ==, !=\n    types: ['string'],\n    help: 'Operator to use for comparison, valid operators are eq (equal), ne (not equal), lt (less than), lte ' + '(less than equal), gt (greater than), gte (greater than equal)'\n  }, {\n    name: 'if',\n    types: ['number', 'seriesList', 'null'],\n    help: 'The value to which the point will be compared. If you pass a seriesList here the first series will be used'\n  }, {\n    name: 'then',\n    types: ['number', 'seriesList', 'null'],\n    help: 'The value the point will be set to if the comparison is true. If you pass a seriesList here the first series will be used'\n  }, {\n    name: 'else',\n    types: ['number', 'seriesList', 'null'],\n    help: 'The value the point will be set to if the comparison is false. If you pass a seriesList here the first series will be used'\n  }],\n  help: 'Compares each point to a number, or the same point in another series using an operator, then sets its value' + 'to the result if the condition proves true, with an optional else.',\n  aliases: ['if'],\n  fn: function conditionFn(args) {\n    var config = args.byName;\n    return alter(args, function (eachSeries) {\n      var data = _.map(eachSeries.data, function (point, i) {\n        function getNumber(source) {\n          if (argType(source) === 'number') return source;\n          if (argType(source) === 'null') return null;\n          if (argType(source) === 'seriesList') return source.list[0].data[i][1];\n          throw new Error('must be a number or a seriesList');\n        }\n\n        var ifVal = getNumber(config['if']);\n        var thenVal = getNumber(config.then);\n        var elseVal = _.isUndefined(config['else']) ? point[1] : getNumber(config['else']);\n\n        var newValue = (function () {\n          switch (config.operator) {\n            case 'lt':\n              return point[1] < ifVal ? thenVal : elseVal;\n            case 'lte':\n              return point[1] <= ifVal ? thenVal : elseVal;\n            case 'gt':\n              return point[1] > ifVal ? thenVal : elseVal;\n            case 'gte':\n              return point[1] >= ifVal ? thenVal : elseVal;\n            case 'eq':\n              return point[1] === ifVal ? thenVal : elseVal;\n            case 'ne':\n              return point[1] !== ifVal ? thenVal : elseVal;\n            default:\n              throw new Error('Unknown operator');\n          }\n        })();\n\n        return [point[0], newValue];\n      });\n      eachSeries.data = data;\n      return eachSeries;\n    });\n  }\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy9jb25kaXRpb24uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFJLEtBQUssR0FBRyxPQUFPLENBQUMsaUJBQWlCLENBQUMsQ0FBQztBQUN2QyxJQUFJLENBQUMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDMUIsSUFBSSxTQUFTLEdBQUcsT0FBTyxDQUFDLDBCQUEwQixDQUFDLENBQUM7QUFDcEQsSUFBSSxPQUFPLEdBQUcsT0FBTyxDQUFDLDZCQUE2QixDQUFDLENBQUM7O0FBRXJELE1BQU0sQ0FBQyxPQUFPLEdBQUcsSUFBSSxTQUFTLENBQUMsV0FBVyxFQUFFO0FBQzFDLE1BQUksRUFBRSxDQUNKO0FBQ0UsUUFBSSxFQUFFLGFBQWE7QUFDbkIsU0FBSyxFQUFFLENBQUMsWUFBWSxDQUFDO0dBQ3RCLEVBQ0Q7QUFDRSxRQUFJLEVBQUUsVUFBVTtBQUNoQixTQUFLLEVBQUUsQ0FBQyxRQUFRLENBQUM7QUFDakIsUUFBSSxFQUFFLHNHQUFzRyxHQUMxRyxnRUFBZ0U7R0FDbkUsRUFDRDtBQUNFLFFBQUksRUFBRSxJQUFJO0FBQ1YsU0FBSyxFQUFFLENBQUMsUUFBUSxFQUFFLFlBQVksRUFBRSxNQUFNLENBQUM7QUFDdkMsUUFBSSxFQUFFLDRHQUE0RztHQUNuSCxFQUNEO0FBQ0UsUUFBSSxFQUFFLE1BQU07QUFDWixTQUFLLEVBQUUsQ0FBQyxRQUFRLEVBQUUsWUFBWSxFQUFFLE1BQU0sQ0FBQztBQUN2QyxRQUFJLEVBQUUsMkhBQTJIO0dBQ2xJLEVBQ0Q7QUFDRSxRQUFJLEVBQUUsTUFBTTtBQUNaLFNBQUssRUFBRSxDQUFDLFFBQVEsRUFBRSxZQUFZLEVBQUUsTUFBTSxDQUFDO0FBQ3ZDLFFBQUksRUFBRSw0SEFBNEg7R0FDbkksQ0FDRjtBQUNELE1BQUksRUFBRSw2R0FBNkcsR0FDakgsb0VBQW9FO0FBQ3RFLFNBQU8sRUFBRSxDQUFDLElBQUksQ0FBQztBQUNmLElBQUUsRUFBRSxTQUFTLFdBQVcsQ0FBQyxJQUFJLEVBQUU7QUFDN0IsUUFBSSxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQztBQUN6QixXQUFPLEtBQUssQ0FBQyxJQUFJLEVBQUUsVUFBVSxVQUFVLEVBQUU7QUFDdkMsVUFBSSxJQUFJLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLFVBQVUsS0FBSyxFQUFFLENBQUMsRUFBRTtBQUNwRCxpQkFBUyxTQUFTLENBQUMsTUFBTSxFQUFFO0FBQ3pCLGNBQUksT0FBTyxDQUFDLE1BQU0sQ0FBQyxLQUFLLFFBQVEsRUFBRSxPQUFPLE1BQU0sQ0FBQztBQUNoRCxjQUFJLE9BQU8sQ0FBQyxNQUFNLENBQUMsS0FBSyxNQUFNLEVBQUUsT0FBTyxJQUFJLENBQUM7QUFDNUMsY0FBSSxPQUFPLENBQUMsTUFBTSxDQUFDLEtBQUssWUFBWSxFQUFFLE9BQU8sTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDdkUsZ0JBQU0sSUFBSSxLQUFLLENBQUUsa0NBQWtDLENBQUMsQ0FBQztTQUN0RDs7QUFFRCxZQUFJLEtBQUssR0FBRyxTQUFTLENBQUMsTUFBTSxNQUFHLENBQUMsQ0FBQztBQUNqQyxZQUFJLE9BQU8sR0FBRyxTQUFTLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ3JDLFlBQUksT0FBTyxHQUFHLENBQUMsQ0FBQyxXQUFXLENBQUMsTUFBTSxRQUFLLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsU0FBUyxDQUFDLE1BQU0sUUFBSyxDQUFDLENBQUM7O0FBRTdFLFlBQUksUUFBUSxHQUFJLENBQUEsWUFBWTtBQUMxQixrQkFBUSxNQUFNLENBQUMsUUFBUTtBQUNyQixpQkFBSyxJQUFJO0FBQ1AscUJBQU8sS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFLLEtBQUssR0FBRyxPQUFPLEdBQUcsT0FBTyxDQUFDO0FBQUEsQUFDaEQsaUJBQUssS0FBSztBQUNSLHFCQUFPLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSyxLQUFLLEdBQUcsT0FBTyxHQUFHLE9BQU8sQ0FBQztBQUFBLEFBQ2hELGlCQUFLLElBQUk7QUFDUCxxQkFBTyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUssS0FBSyxHQUFHLE9BQU8sR0FBRyxPQUFPLENBQUM7QUFBQSxBQUNoRCxpQkFBSyxLQUFLO0FBQ1IscUJBQU8sS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFLLEtBQUssR0FBRyxPQUFPLEdBQUcsT0FBTyxDQUFDO0FBQUEsQUFDaEQsaUJBQUssSUFBSTtBQUNQLHFCQUFPLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxLQUFLLEdBQUcsT0FBTyxHQUFHLE9BQU8sQ0FBQztBQUFBLEFBQ2hELGlCQUFLLElBQUk7QUFDUCxxQkFBTyxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssS0FBSyxHQUFHLE9BQU8sR0FBRyxPQUFPLENBQUM7QUFBQSxBQUNoRDtBQUNFLG9CQUFNLElBQUksS0FBSyxDQUFFLGtCQUFrQixDQUFDLENBQUM7QUFBQSxXQUN4QztTQUNGLENBQUEsRUFBRSxBQUFDLENBQUM7O0FBRUwsZUFBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxRQUFRLENBQUMsQ0FBQztPQUM3QixDQUFDLENBQUM7QUFDSCxnQkFBVSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7QUFDdkIsYUFBTyxVQUFVLENBQUM7S0FDbkIsQ0FBQyxDQUFDO0dBQ0o7Q0FDRixDQUFDLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9pbnN0YWxsZWRQbHVnaW5zL3RpbWVsaW9uL3NlcnZlci9zZXJpZXNfZnVuY3Rpb25zL2NvbmRpdGlvbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBhbHRlciA9IHJlcXVpcmUoJy4uL2xpYi9hbHRlci5qcycpO1xudmFyIF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcbnZhciBDaGFpbmFibGUgPSByZXF1aXJlKCcuLi9saWIvY2xhc3Nlcy9jaGFpbmFibGUnKTtcbnZhciBhcmdUeXBlID0gcmVxdWlyZSgnLi4vaGFuZGxlcnMvbGliL2FyZ190eXBlLmpzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gbmV3IENoYWluYWJsZSgnY29uZGl0aW9uJywge1xuICBhcmdzOiBbXG4gICAge1xuICAgICAgbmFtZTogJ2lucHV0U2VyaWVzJyxcbiAgICAgIHR5cGVzOiBbJ3Nlcmllc0xpc3QnXVxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ29wZXJhdG9yJywgLy8gPCwgPD0sID4sID49LCA9PSwgIT1cbiAgICAgIHR5cGVzOiBbJ3N0cmluZyddLFxuICAgICAgaGVscDogJ09wZXJhdG9yIHRvIHVzZSBmb3IgY29tcGFyaXNvbiwgdmFsaWQgb3BlcmF0b3JzIGFyZSBlcSAoZXF1YWwpLCBuZSAobm90IGVxdWFsKSwgbHQgKGxlc3MgdGhhbiksIGx0ZSAnICtcbiAgICAgICAgJyhsZXNzIHRoYW4gZXF1YWwpLCBndCAoZ3JlYXRlciB0aGFuKSwgZ3RlIChncmVhdGVyIHRoYW4gZXF1YWwpJ1xuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ2lmJyxcbiAgICAgIHR5cGVzOiBbJ251bWJlcicsICdzZXJpZXNMaXN0JywgJ251bGwnXSxcbiAgICAgIGhlbHA6ICdUaGUgdmFsdWUgdG8gd2hpY2ggdGhlIHBvaW50IHdpbGwgYmUgY29tcGFyZWQuIElmIHlvdSBwYXNzIGEgc2VyaWVzTGlzdCBoZXJlIHRoZSBmaXJzdCBzZXJpZXMgd2lsbCBiZSB1c2VkJ1xuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ3RoZW4nLFxuICAgICAgdHlwZXM6IFsnbnVtYmVyJywgJ3Nlcmllc0xpc3QnLCAnbnVsbCddLFxuICAgICAgaGVscDogJ1RoZSB2YWx1ZSB0aGUgcG9pbnQgd2lsbCBiZSBzZXQgdG8gaWYgdGhlIGNvbXBhcmlzb24gaXMgdHJ1ZS4gSWYgeW91IHBhc3MgYSBzZXJpZXNMaXN0IGhlcmUgdGhlIGZpcnN0IHNlcmllcyB3aWxsIGJlIHVzZWQnXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAnZWxzZScsXG4gICAgICB0eXBlczogWydudW1iZXInLCAnc2VyaWVzTGlzdCcsICdudWxsJ10sXG4gICAgICBoZWxwOiAnVGhlIHZhbHVlIHRoZSBwb2ludCB3aWxsIGJlIHNldCB0byBpZiB0aGUgY29tcGFyaXNvbiBpcyBmYWxzZS4gSWYgeW91IHBhc3MgYSBzZXJpZXNMaXN0IGhlcmUgdGhlIGZpcnN0IHNlcmllcyB3aWxsIGJlIHVzZWQnXG4gICAgfVxuICBdLFxuICBoZWxwOiAnQ29tcGFyZXMgZWFjaCBwb2ludCB0byBhIG51bWJlciwgb3IgdGhlIHNhbWUgcG9pbnQgaW4gYW5vdGhlciBzZXJpZXMgdXNpbmcgYW4gb3BlcmF0b3IsIHRoZW4gc2V0cyBpdHMgdmFsdWUnICtcbiAgICAndG8gdGhlIHJlc3VsdCBpZiB0aGUgY29uZGl0aW9uIHByb3ZlcyB0cnVlLCB3aXRoIGFuIG9wdGlvbmFsIGVsc2UuJyxcbiAgYWxpYXNlczogWydpZiddLFxuICBmbjogZnVuY3Rpb24gY29uZGl0aW9uRm4oYXJncykge1xuICAgIHZhciBjb25maWcgPSBhcmdzLmJ5TmFtZTtcbiAgICByZXR1cm4gYWx0ZXIoYXJncywgZnVuY3Rpb24gKGVhY2hTZXJpZXMpIHtcbiAgICAgIHZhciBkYXRhID0gXy5tYXAoZWFjaFNlcmllcy5kYXRhLCBmdW5jdGlvbiAocG9pbnQsIGkpIHtcbiAgICAgICAgZnVuY3Rpb24gZ2V0TnVtYmVyKHNvdXJjZSkge1xuICAgICAgICAgIGlmIChhcmdUeXBlKHNvdXJjZSkgPT09ICdudW1iZXInKSByZXR1cm4gc291cmNlO1xuICAgICAgICAgIGlmIChhcmdUeXBlKHNvdXJjZSkgPT09ICdudWxsJykgcmV0dXJuIG51bGw7XG4gICAgICAgICAgaWYgKGFyZ1R5cGUoc291cmNlKSA9PT0gJ3Nlcmllc0xpc3QnKSByZXR1cm4gc291cmNlLmxpc3RbMF0uZGF0YVtpXVsxXTtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IgKCdtdXN0IGJlIGEgbnVtYmVyIG9yIGEgc2VyaWVzTGlzdCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGlmVmFsID0gZ2V0TnVtYmVyKGNvbmZpZy5pZik7XG4gICAgICAgIHZhciB0aGVuVmFsID0gZ2V0TnVtYmVyKGNvbmZpZy50aGVuKTtcbiAgICAgICAgdmFyIGVsc2VWYWwgPSBfLmlzVW5kZWZpbmVkKGNvbmZpZy5lbHNlKSA/IHBvaW50WzFdIDogZ2V0TnVtYmVyKGNvbmZpZy5lbHNlKTtcblxuICAgICAgICB2YXIgbmV3VmFsdWUgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHN3aXRjaCAoY29uZmlnLm9wZXJhdG9yKSB7XG4gICAgICAgICAgICBjYXNlICdsdCc6XG4gICAgICAgICAgICAgIHJldHVybiBwb2ludFsxXSA8ICAgaWZWYWwgPyB0aGVuVmFsIDogZWxzZVZhbDtcbiAgICAgICAgICAgIGNhc2UgJ2x0ZSc6XG4gICAgICAgICAgICAgIHJldHVybiBwb2ludFsxXSA8PSAgaWZWYWwgPyB0aGVuVmFsIDogZWxzZVZhbDtcbiAgICAgICAgICAgIGNhc2UgJ2d0JzpcbiAgICAgICAgICAgICAgcmV0dXJuIHBvaW50WzFdID4gICBpZlZhbCA/IHRoZW5WYWwgOiBlbHNlVmFsO1xuICAgICAgICAgICAgY2FzZSAnZ3RlJzpcbiAgICAgICAgICAgICAgcmV0dXJuIHBvaW50WzFdID49ICBpZlZhbCA/IHRoZW5WYWwgOiBlbHNlVmFsO1xuICAgICAgICAgICAgY2FzZSAnZXEnOlxuICAgICAgICAgICAgICByZXR1cm4gcG9pbnRbMV0gPT09IGlmVmFsID8gdGhlblZhbCA6IGVsc2VWYWw7XG4gICAgICAgICAgICBjYXNlICduZSc6XG4gICAgICAgICAgICAgIHJldHVybiBwb2ludFsxXSAhPT0gaWZWYWwgPyB0aGVuVmFsIDogZWxzZVZhbDtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvciAoJ1Vua25vd24gb3BlcmF0b3InKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0oKSk7XG5cbiAgICAgICAgcmV0dXJuIFtwb2ludFswXSwgbmV3VmFsdWVdO1xuICAgICAgfSk7XG4gICAgICBlYWNoU2VyaWVzLmRhdGEgPSBkYXRhO1xuICAgICAgcmV0dXJuIGVhY2hTZXJpZXM7XG4gICAgfSk7XG4gIH1cbn0pO1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/condition.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,KAAK,GAAG,OAAO,CAAC,iBAAiB,CAAC,CAAC;AACvC,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC1B,IAAI,SAAS,GAAG,OAAO,CAAC,0BAA0B,CAAC,CAAC;AACpD,IAAI,OAAO,GAAG,OAAO,CAAC,6BAA6B,CAAC,CAAC;;AAErD,MAAM,CAAC,OAAO,GAAG,IAAI,SAAS,CAAC,WAAW,EAAE;AAC1C,MAAI,EAAE,CACJ;AACE,QAAI,EAAE,aAAa;AACnB,SAAK,EAAE,CAAC,YAAY,CAAC;GACtB,EACD;AACE,QAAI,EAAE,UAAU;AAChB,SAAK,EAAE,CAAC,QAAQ,CAAC;AACjB,QAAI,EAAE,sGAAsG,GAC1G,gEAAgE;GACnE,EACD;AACE,QAAI,EAAE,IAAI;AACV,SAAK,EAAE,CAAC,QAAQ,EAAE,YAAY,EAAE,MAAM,CAAC;AACvC,QAAI,EAAE,4GAA4G;GACnH,EACD;AACE,QAAI,EAAE,MAAM;AACZ,SAAK,EAAE,CAAC,QAAQ,EAAE,YAAY,EAAE,MAAM,CAAC;AACvC,QAAI,EAAE,2HAA2H;GAClI,EACD;AACE,QAAI,EAAE,MAAM;AACZ,SAAK,EAAE,CAAC,QAAQ,EAAE,YAAY,EAAE,MAAM,CAAC;AACvC,QAAI,EAAE,4HAA4H;GACnI,CACF;AACD,MAAI,EAAE,6GAA6G,GACjH,oEAAoE;AACtE,SAAO,EAAE,CAAC,IAAI,CAAC;AACf,IAAE,EAAE,SAAS,WAAW,CAAC,IAAI,EAAE;AAC7B,QAAI,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;AACzB,WAAO,KAAK,CAAC,IAAI,EAAE,UAAU,UAAU,EAAE;AACvC,UAAI,IAAI,GAAG,CAAC,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,EAAE,UAAU,KAAK,EAAE,CAAC,EAAE;AACpD,iBAAS,SAAS,CAAC,MAAM,EAAE;AACzB,cAAI,OAAO,CAAC,MAAM,CAAC,KAAK,QAAQ,EAAE,OAAO,MAAM,CAAC;AAChD,cAAI,OAAO,CAAC,MAAM,CAAC,KAAK,MAAM,EAAE,OAAO,IAAI,CAAC;AAC5C,cAAI,OAAO,CAAC,MAAM,CAAC,KAAK,YAAY,EAAE,OAAO,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACvE,gBAAM,IAAI,KAAK,CAAE,kCAAkC,CAAC,CAAC;SACtD;;AAED,YAAI,KAAK,GAAG,SAAS,CAAC,MAAM,MAAG,CAAC,CAAC;AACjC,YAAI,OAAO,GAAG,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;AACrC,YAAI,OAAO,GAAG,CAAC,CAAC,WAAW,CAAC,MAAM,QAAK,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC,MAAM,QAAK,CAAC,CAAC;;AAE7E,YAAI,QAAQ,GAAI,CAAA,YAAY;AAC1B,kBAAQ,MAAM,CAAC,QAAQ;AACrB,iBAAK,IAAI;AACP,qBAAO,KAAK,CAAC,CAAC,CAAC,GAAK,KAAK,GAAG,OAAO,GAAG,OAAO,CAAC;AAAA,AAChD,iBAAK,KAAK;AACR,qBAAO,KAAK,CAAC,CAAC,CAAC,IAAK,KAAK,GAAG,OAAO,GAAG,OAAO,CAAC;AAAA,AAChD,iBAAK,IAAI;AACP,qBAAO,KAAK,CAAC,CAAC,CAAC,GAAK,KAAK,GAAG,OAAO,GAAG,OAAO,CAAC;AAAA,AAChD,iBAAK,KAAK;AACR,qBAAO,KAAK,CAAC,CAAC,CAAC,IAAK,KAAK,GAAG,OAAO,GAAG,OAAO,CAAC;AAAA,AAChD,iBAAK,IAAI;AACP,qBAAO,KAAK,CAAC,CAAC,CAAC,KAAK,KAAK,GAAG,OAAO,GAAG,OAAO,CAAC;AAAA,AAChD,iBAAK,IAAI;AACP,qBAAO,KAAK,CAAC,CAAC,CAAC,KAAK,KAAK,GAAG,OAAO,GAAG,OAAO,CAAC;AAAA,AAChD;AACE,oBAAM,IAAI,KAAK,CAAE,kBAAkB,CAAC,CAAC;AAAA,WACxC;SACF,CAAA,EAAE,AAAC,CAAC;;AAEL,eAAO,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC;OAC7B,CAAC,CAAC;AACH,gBAAU,CAAC,IAAI,GAAG,IAAI,CAAC;AACvB,aAAO,UAAU,CAAC;KACnB,CAAC,CAAC;GACJ;CACF,CAAC,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/condition.js",
      "sourcesContent": [
        "var alter = require('../lib/alter.js');\nvar _ = require('lodash');\nvar Chainable = require('../lib/classes/chainable');\nvar argType = require('../handlers/lib/arg_type.js');\n\nmodule.exports = new Chainable('condition', {\n  args: [\n    {\n      name: 'inputSeries',\n      types: ['seriesList']\n    },\n    {\n      name: 'operator', // <, <=, >, >=, ==, !=\n      types: ['string'],\n      help: 'Operator to use for comparison, valid operators are eq (equal), ne (not equal), lt (less than), lte ' +\n        '(less than equal), gt (greater than), gte (greater than equal)'\n    },\n    {\n      name: 'if',\n      types: ['number', 'seriesList', 'null'],\n      help: 'The value to which the point will be compared. If you pass a seriesList here the first series will be used'\n    },\n    {\n      name: 'then',\n      types: ['number', 'seriesList', 'null'],\n      help: 'The value the point will be set to if the comparison is true. If you pass a seriesList here the first series will be used'\n    },\n    {\n      name: 'else',\n      types: ['number', 'seriesList', 'null'],\n      help: 'The value the point will be set to if the comparison is false. If you pass a seriesList here the first series will be used'\n    }\n  ],\n  help: 'Compares each point to a number, or the same point in another series using an operator, then sets its value' +\n    'to the result if the condition proves true, with an optional else.',\n  aliases: ['if'],\n  fn: function conditionFn(args) {\n    var config = args.byName;\n    return alter(args, function (eachSeries) {\n      var data = _.map(eachSeries.data, function (point, i) {\n        function getNumber(source) {\n          if (argType(source) === 'number') return source;\n          if (argType(source) === 'null') return null;\n          if (argType(source) === 'seriesList') return source.list[0].data[i][1];\n          throw new Error ('must be a number or a seriesList');\n        }\n\n        var ifVal = getNumber(config.if);\n        var thenVal = getNumber(config.then);\n        var elseVal = _.isUndefined(config.else) ? point[1] : getNumber(config.else);\n\n        var newValue = (function () {\n          switch (config.operator) {\n            case 'lt':\n              return point[1] <   ifVal ? thenVal : elseVal;\n            case 'lte':\n              return point[1] <=  ifVal ? thenVal : elseVal;\n            case 'gt':\n              return point[1] >   ifVal ? thenVal : elseVal;\n            case 'gte':\n              return point[1] >=  ifVal ? thenVal : elseVal;\n            case 'eq':\n              return point[1] === ifVal ? thenVal : elseVal;\n            case 'ne':\n              return point[1] !== ifVal ? thenVal : elseVal;\n            default:\n              throw new Error ('Unknown operator');\n          }\n        }());\n\n        return [point[0], newValue];\n      });\n      eachSeries.data = data;\n      return eachSeries;\n    });\n  }\n});\n"
      ]
    },
    "mtime": 1467119944363
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/cusum.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar alter = require('../lib/alter.js');\nvar _ = require('lodash');\nvar Chainable = require('../lib/classes/chainable');\nmodule.exports = new Chainable('cusum', {\n  args: [{\n    name: 'inputSeries',\n    types: ['seriesList']\n  }, {\n    name: 'base',\n    types: ['number'],\n    help: 'Number to start at. Basically just adds this to the beginning of the series'\n  }],\n  help: 'Return the cumulative sum of a series, starting at a base.',\n  fn: function cusumFn(args) {\n    return alter(args, function (eachSeries, base) {\n      var pairs = eachSeries.data;\n      var total = base || 0;\n      eachSeries.data = _.map(pairs, function (point, i) {\n        total += point[1];\n        return [point[0], total];\n      });\n\n      return eachSeries;\n    });\n  }\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy9jdXN1bS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQUksS0FBSyxHQUFHLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0FBQ3ZDLElBQUksQ0FBQyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUMxQixJQUFJLFNBQVMsR0FBRyxPQUFPLENBQUMsMEJBQTBCLENBQUMsQ0FBQztBQUNwRCxNQUFNLENBQUMsT0FBTyxHQUFHLElBQUksU0FBUyxDQUFDLE9BQU8sRUFBRTtBQUN0QyxNQUFJLEVBQUUsQ0FDSjtBQUNFLFFBQUksRUFBRSxhQUFhO0FBQ25CLFNBQUssRUFBRSxDQUFDLFlBQVksQ0FBQztHQUN0QixFQUNEO0FBQ0UsUUFBSSxFQUFFLE1BQU07QUFDWixTQUFLLEVBQUUsQ0FBQyxRQUFRLENBQUM7QUFDakIsUUFBSSxFQUFFLDZFQUE2RTtHQUNwRixDQUNGO0FBQ0QsTUFBSSxFQUFFLDREQUE0RDtBQUNsRSxJQUFFLEVBQUUsU0FBUyxPQUFPLENBQUMsSUFBSSxFQUFFO0FBQ3pCLFdBQU8sS0FBSyxDQUFDLElBQUksRUFBRSxVQUFVLFVBQVUsRUFBRSxJQUFJLEVBQUU7QUFDN0MsVUFBSSxLQUFLLEdBQUcsVUFBVSxDQUFDLElBQUksQ0FBQztBQUM1QixVQUFJLEtBQUssR0FBRyxJQUFJLElBQUksQ0FBQyxDQUFDO0FBQ3RCLGdCQUFVLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsS0FBSyxFQUFFLFVBQVUsS0FBSyxFQUFFLENBQUMsRUFBRTtBQUNqRCxhQUFLLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2xCLGVBQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUM7T0FDMUIsQ0FBQyxDQUFDOztBQUVILGFBQU8sVUFBVSxDQUFDO0tBQ25CLENBQUMsQ0FBQztHQUNKO0NBQ0YsQ0FBQyxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy9jdXN1bS5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBhbHRlciA9IHJlcXVpcmUoJy4uL2xpYi9hbHRlci5qcycpO1xudmFyIF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcbnZhciBDaGFpbmFibGUgPSByZXF1aXJlKCcuLi9saWIvY2xhc3Nlcy9jaGFpbmFibGUnKTtcbm1vZHVsZS5leHBvcnRzID0gbmV3IENoYWluYWJsZSgnY3VzdW0nLCB7XG4gIGFyZ3M6IFtcbiAgICB7XG4gICAgICBuYW1lOiAnaW5wdXRTZXJpZXMnLFxuICAgICAgdHlwZXM6IFsnc2VyaWVzTGlzdCddXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAnYmFzZScsXG4gICAgICB0eXBlczogWydudW1iZXInXSxcbiAgICAgIGhlbHA6ICdOdW1iZXIgdG8gc3RhcnQgYXQuIEJhc2ljYWxseSBqdXN0IGFkZHMgdGhpcyB0byB0aGUgYmVnaW5uaW5nIG9mIHRoZSBzZXJpZXMnXG4gICAgfVxuICBdLFxuICBoZWxwOiAnUmV0dXJuIHRoZSBjdW11bGF0aXZlIHN1bSBvZiBhIHNlcmllcywgc3RhcnRpbmcgYXQgYSBiYXNlLicsXG4gIGZuOiBmdW5jdGlvbiBjdXN1bUZuKGFyZ3MpIHtcbiAgICByZXR1cm4gYWx0ZXIoYXJncywgZnVuY3Rpb24gKGVhY2hTZXJpZXMsIGJhc2UpIHtcbiAgICAgIHZhciBwYWlycyA9IGVhY2hTZXJpZXMuZGF0YTtcbiAgICAgIHZhciB0b3RhbCA9IGJhc2UgfHwgMDtcbiAgICAgIGVhY2hTZXJpZXMuZGF0YSA9IF8ubWFwKHBhaXJzLCBmdW5jdGlvbiAocG9pbnQsIGkpIHtcbiAgICAgICAgdG90YWwgKz0gcG9pbnRbMV07XG4gICAgICAgIHJldHVybiBbcG9pbnRbMF0sIHRvdGFsXTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gZWFjaFNlcmllcztcbiAgICB9KTtcbiAgfVxufSk7XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/cusum.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,KAAK,GAAG,OAAO,CAAC,iBAAiB,CAAC,CAAC;AACvC,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC1B,IAAI,SAAS,GAAG,OAAO,CAAC,0BAA0B,CAAC,CAAC;AACpD,MAAM,CAAC,OAAO,GAAG,IAAI,SAAS,CAAC,OAAO,EAAE;AACtC,MAAI,EAAE,CACJ;AACE,QAAI,EAAE,aAAa;AACnB,SAAK,EAAE,CAAC,YAAY,CAAC;GACtB,EACD;AACE,QAAI,EAAE,MAAM;AACZ,SAAK,EAAE,CAAC,QAAQ,CAAC;AACjB,QAAI,EAAE,6EAA6E;GACpF,CACF;AACD,MAAI,EAAE,4DAA4D;AAClE,IAAE,EAAE,SAAS,OAAO,CAAC,IAAI,EAAE;AACzB,WAAO,KAAK,CAAC,IAAI,EAAE,UAAU,UAAU,EAAE,IAAI,EAAE;AAC7C,UAAI,KAAK,GAAG,UAAU,CAAC,IAAI,CAAC;AAC5B,UAAI,KAAK,GAAG,IAAI,IAAI,CAAC,CAAC;AACtB,gBAAU,CAAC,IAAI,GAAG,CAAC,CAAC,GAAG,CAAC,KAAK,EAAE,UAAU,KAAK,EAAE,CAAC,EAAE;AACjD,aAAK,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC;AAClB,eAAO,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;OAC1B,CAAC,CAAC;;AAEH,aAAO,UAAU,CAAC;KACnB,CAAC,CAAC;GACJ;CACF,CAAC,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/cusum.js",
      "sourcesContent": [
        "var alter = require('../lib/alter.js');\nvar _ = require('lodash');\nvar Chainable = require('../lib/classes/chainable');\nmodule.exports = new Chainable('cusum', {\n  args: [\n    {\n      name: 'inputSeries',\n      types: ['seriesList']\n    },\n    {\n      name: 'base',\n      types: ['number'],\n      help: 'Number to start at. Basically just adds this to the beginning of the series'\n    }\n  ],\n  help: 'Return the cumulative sum of a series, starting at a base.',\n  fn: function cusumFn(args) {\n    return alter(args, function (eachSeries, base) {\n      var pairs = eachSeries.data;\n      var total = base || 0;\n      eachSeries.data = _.map(pairs, function (point, i) {\n        total += point[1];\n        return [point[0], total];\n      });\n\n      return eachSeries;\n    });\n  }\n});\n"
      ]
    },
    "mtime": 1467119944363
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/derivative.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar alter = require('../lib/alter.js');\nvar _ = require('lodash');\nvar Chainable = require('../lib/classes/chainable');\nmodule.exports = new Chainable('derivative', {\n  args: [{\n    name: 'inputSeries',\n    types: ['seriesList']\n  }],\n  help: 'Plot the change in values over time.',\n  fn: function derivativeFn(args) {\n    return alter(args, function (eachSeries) {\n      var pairs = eachSeries.data;\n      eachSeries.data = _.map(pairs, function (point, i) {\n        if (i === 0 || pairs[i - 1][1] == null || point[1] == null) {\n          return [point[0], null];\n        }\n        return [point[0], point[1] - pairs[i - 1][1]];\n      });\n\n      return eachSeries;\n    });\n  }\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy9kZXJpdmF0aXZlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBSSxLQUFLLEdBQUcsT0FBTyxDQUFDLGlCQUFpQixDQUFDLENBQUM7QUFDdkMsSUFBSSxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQzFCLElBQUksU0FBUyxHQUFHLE9BQU8sQ0FBQywwQkFBMEIsQ0FBQyxDQUFDO0FBQ3BELE1BQU0sQ0FBQyxPQUFPLEdBQUcsSUFBSSxTQUFTLENBQUMsWUFBWSxFQUFFO0FBQzNDLE1BQUksRUFBRSxDQUNKO0FBQ0UsUUFBSSxFQUFFLGFBQWE7QUFDbkIsU0FBSyxFQUFFLENBQUMsWUFBWSxDQUFDO0dBQ3RCLENBQ0Y7QUFDRCxNQUFJLEVBQUUsc0NBQXNDO0FBQzVDLElBQUUsRUFBRSxTQUFTLFlBQVksQ0FBQyxJQUFJLEVBQUU7QUFDOUIsV0FBTyxLQUFLLENBQUMsSUFBSSxFQUFFLFVBQVUsVUFBVSxFQUFFO0FBQ3ZDLFVBQUksS0FBSyxHQUFHLFVBQVUsQ0FBQyxJQUFJLENBQUM7QUFDNUIsZ0JBQVUsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxLQUFLLEVBQUUsVUFBVSxLQUFLLEVBQUUsQ0FBQyxFQUFFO0FBQ2pELFlBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUksSUFBSSxFQUFFO0FBQUUsaUJBQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUM7U0FBRTtBQUN4RixlQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7T0FDL0MsQ0FBQyxDQUFDOztBQUVILGFBQU8sVUFBVSxDQUFDO0tBQ25CLENBQUMsQ0FBQztHQUNKO0NBQ0YsQ0FBQyxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy9kZXJpdmF0aXZlLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGFsdGVyID0gcmVxdWlyZSgnLi4vbGliL2FsdGVyLmpzJyk7XG52YXIgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xudmFyIENoYWluYWJsZSA9IHJlcXVpcmUoJy4uL2xpYi9jbGFzc2VzL2NoYWluYWJsZScpO1xubW9kdWxlLmV4cG9ydHMgPSBuZXcgQ2hhaW5hYmxlKCdkZXJpdmF0aXZlJywge1xuICBhcmdzOiBbXG4gICAge1xuICAgICAgbmFtZTogJ2lucHV0U2VyaWVzJyxcbiAgICAgIHR5cGVzOiBbJ3Nlcmllc0xpc3QnXVxuICAgIH1cbiAgXSxcbiAgaGVscDogJ1Bsb3QgdGhlIGNoYW5nZSBpbiB2YWx1ZXMgb3ZlciB0aW1lLicsXG4gIGZuOiBmdW5jdGlvbiBkZXJpdmF0aXZlRm4oYXJncykge1xuICAgIHJldHVybiBhbHRlcihhcmdzLCBmdW5jdGlvbiAoZWFjaFNlcmllcykge1xuICAgICAgdmFyIHBhaXJzID0gZWFjaFNlcmllcy5kYXRhO1xuICAgICAgZWFjaFNlcmllcy5kYXRhID0gXy5tYXAocGFpcnMsIGZ1bmN0aW9uIChwb2ludCwgaSkge1xuICAgICAgICBpZiAoaSA9PT0gMCB8fCBwYWlyc1tpIC0gMV1bMV0gPT0gbnVsbCB8fCBwb2ludFsxXSA9PSBudWxsKSB7IHJldHVybiBbcG9pbnRbMF0sIG51bGxdOyB9XG4gICAgICAgIHJldHVybiBbcG9pbnRbMF0sIHBvaW50WzFdIC0gcGFpcnNbaSAtIDFdWzFdXTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gZWFjaFNlcmllcztcbiAgICB9KTtcbiAgfVxufSk7XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/derivative.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,KAAK,GAAG,OAAO,CAAC,iBAAiB,CAAC,CAAC;AACvC,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC1B,IAAI,SAAS,GAAG,OAAO,CAAC,0BAA0B,CAAC,CAAC;AACpD,MAAM,CAAC,OAAO,GAAG,IAAI,SAAS,CAAC,YAAY,EAAE;AAC3C,MAAI,EAAE,CACJ;AACE,QAAI,EAAE,aAAa;AACnB,SAAK,EAAE,CAAC,YAAY,CAAC;GACtB,CACF;AACD,MAAI,EAAE,sCAAsC;AAC5C,IAAE,EAAE,SAAS,YAAY,CAAC,IAAI,EAAE;AAC9B,WAAO,KAAK,CAAC,IAAI,EAAE,UAAU,UAAU,EAAE;AACvC,UAAI,KAAK,GAAG,UAAU,CAAC,IAAI,CAAC;AAC5B,gBAAU,CAAC,IAAI,GAAG,CAAC,CAAC,GAAG,CAAC,KAAK,EAAE,UAAU,KAAK,EAAE,CAAC,EAAE;AACjD,YAAI,CAAC,KAAK,CAAC,IAAI,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,IAAI,KAAK,CAAC,CAAC,CAAC,IAAI,IAAI,EAAE;AAAE,iBAAO,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;SAAE;AACxF,eAAO,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;OAC/C,CAAC,CAAC;;AAEH,aAAO,UAAU,CAAC;KACnB,CAAC,CAAC;GACJ;CACF,CAAC,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/derivative.js",
      "sourcesContent": [
        "var alter = require('../lib/alter.js');\nvar _ = require('lodash');\nvar Chainable = require('../lib/classes/chainable');\nmodule.exports = new Chainable('derivative', {\n  args: [\n    {\n      name: 'inputSeries',\n      types: ['seriesList']\n    }\n  ],\n  help: 'Plot the change in values over time.',\n  fn: function derivativeFn(args) {\n    return alter(args, function (eachSeries) {\n      var pairs = eachSeries.data;\n      eachSeries.data = _.map(pairs, function (point, i) {\n        if (i === 0 || pairs[i - 1][1] == null || point[1] == null) { return [point[0], null]; }\n        return [point[0], point[1] - pairs[i - 1][1]];\n      });\n\n      return eachSeries;\n    });\n  }\n});\n"
      ]
    },
    "mtime": 1467119944363
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/divide.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar reduce = require('../lib/reduce.js');\n\nvar Chainable = require('../lib/classes/chainable');\nmodule.exports = new Chainable('divide', {\n  args: [{\n    name: 'inputSeries',\n    types: ['seriesList']\n  }, {\n    name: 'divisor',\n    types: ['seriesList', 'number'],\n    help: 'Number or series to divide by. If passing a seriesList it must contain exactly 1 series.'\n  }],\n  help: 'Divides the values of one or more series in a seriesList to each position, in each series, of the input seriesList',\n  fn: function divideFn(args) {\n    return reduce(args, function (a, b) {\n      return a / b;\n    });\n  }\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy9kaXZpZGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFJLE1BQU0sR0FBRyxPQUFPLENBQUMsa0JBQWtCLENBQUMsQ0FBQzs7QUFFekMsSUFBSSxTQUFTLEdBQUcsT0FBTyxDQUFDLDBCQUEwQixDQUFDLENBQUM7QUFDcEQsTUFBTSxDQUFDLE9BQU8sR0FBRyxJQUFJLFNBQVMsQ0FBQyxRQUFRLEVBQUU7QUFDdkMsTUFBSSxFQUFFLENBQ0o7QUFDRSxRQUFJLEVBQUUsYUFBYTtBQUNuQixTQUFLLEVBQUUsQ0FBQyxZQUFZLENBQUM7R0FDdEIsRUFDRDtBQUNFLFFBQUksRUFBRSxTQUFTO0FBQ2YsU0FBSyxFQUFFLENBQUMsWUFBWSxFQUFFLFFBQVEsQ0FBQztBQUMvQixRQUFJLEVBQUUsMEZBQTBGO0dBQ2pHLENBQ0Y7QUFDRCxNQUFJLEVBQUUsb0hBQW9IO0FBQzFILElBQUUsRUFBRSxTQUFTLFFBQVEsQ0FBQyxJQUFJLEVBQUU7QUFDMUIsV0FBTyxNQUFNLENBQUMsSUFBSSxFQUFFLFVBQVUsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUNsQyxhQUFPLENBQUMsR0FBRyxDQUFDLENBQUM7S0FDZCxDQUFDLENBQUM7R0FDSjtDQUNGLENBQUMsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL2luc3RhbGxlZFBsdWdpbnMvdGltZWxpb24vc2VydmVyL3Nlcmllc19mdW5jdGlvbnMvZGl2aWRlLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIHJlZHVjZSA9IHJlcXVpcmUoJy4uL2xpYi9yZWR1Y2UuanMnKTtcblxudmFyIENoYWluYWJsZSA9IHJlcXVpcmUoJy4uL2xpYi9jbGFzc2VzL2NoYWluYWJsZScpO1xubW9kdWxlLmV4cG9ydHMgPSBuZXcgQ2hhaW5hYmxlKCdkaXZpZGUnLCB7XG4gIGFyZ3M6IFtcbiAgICB7XG4gICAgICBuYW1lOiAnaW5wdXRTZXJpZXMnLFxuICAgICAgdHlwZXM6IFsnc2VyaWVzTGlzdCddXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAnZGl2aXNvcicsXG4gICAgICB0eXBlczogWydzZXJpZXNMaXN0JywgJ251bWJlciddLFxuICAgICAgaGVscDogJ051bWJlciBvciBzZXJpZXMgdG8gZGl2aWRlIGJ5LiBJZiBwYXNzaW5nIGEgc2VyaWVzTGlzdCBpdCBtdXN0IGNvbnRhaW4gZXhhY3RseSAxIHNlcmllcy4nXG4gICAgfVxuICBdLFxuICBoZWxwOiAnRGl2aWRlcyB0aGUgdmFsdWVzIG9mIG9uZSBvciBtb3JlIHNlcmllcyBpbiBhIHNlcmllc0xpc3QgdG8gZWFjaCBwb3NpdGlvbiwgaW4gZWFjaCBzZXJpZXMsIG9mIHRoZSBpbnB1dCBzZXJpZXNMaXN0JyxcbiAgZm46IGZ1bmN0aW9uIGRpdmlkZUZuKGFyZ3MpIHtcbiAgICByZXR1cm4gcmVkdWNlKGFyZ3MsIGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICByZXR1cm4gYSAvIGI7XG4gICAgfSk7XG4gIH1cbn0pO1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/divide.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,MAAM,GAAG,OAAO,CAAC,kBAAkB,CAAC,CAAC;;AAEzC,IAAI,SAAS,GAAG,OAAO,CAAC,0BAA0B,CAAC,CAAC;AACpD,MAAM,CAAC,OAAO,GAAG,IAAI,SAAS,CAAC,QAAQ,EAAE;AACvC,MAAI,EAAE,CACJ;AACE,QAAI,EAAE,aAAa;AACnB,SAAK,EAAE,CAAC,YAAY,CAAC;GACtB,EACD;AACE,QAAI,EAAE,SAAS;AACf,SAAK,EAAE,CAAC,YAAY,EAAE,QAAQ,CAAC;AAC/B,QAAI,EAAE,0FAA0F;GACjG,CACF;AACD,MAAI,EAAE,oHAAoH;AAC1H,IAAE,EAAE,SAAS,QAAQ,CAAC,IAAI,EAAE;AAC1B,WAAO,MAAM,CAAC,IAAI,EAAE,UAAU,CAAC,EAAE,CAAC,EAAE;AAClC,aAAO,CAAC,GAAG,CAAC,CAAC;KACd,CAAC,CAAC;GACJ;CACF,CAAC,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/divide.js",
      "sourcesContent": [
        "var reduce = require('../lib/reduce.js');\n\nvar Chainable = require('../lib/classes/chainable');\nmodule.exports = new Chainable('divide', {\n  args: [\n    {\n      name: 'inputSeries',\n      types: ['seriesList']\n    },\n    {\n      name: 'divisor',\n      types: ['seriesList', 'number'],\n      help: 'Number or series to divide by. If passing a seriesList it must contain exactly 1 series.'\n    }\n  ],\n  help: 'Divides the values of one or more series in a seriesList to each position, in each series, of the input seriesList',\n  fn: function divideFn(args) {\n    return reduce(args, function (a, b) {\n      return a / b;\n    });\n  }\n});\n"
      ]
    },
    "mtime": 1467119944363
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/lib/reduce.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _ = require('lodash');\nvar Promise = require('bluebird');\n\n/**\n * Reduces multiple arrays into a single array using a function\n * @param {Array} args - args[0] must always be a {type: 'seriesList'}\n *\n * - If only arg[0] exists, the seriesList will be reduced to a seriesList containing a single series\n * - If multiple arguments are passed, each argument will be mapped onto each series in the seriesList.\n\n * @params {Function} fn - Function used to combine points at same index in each array of each series in the seriesList.\n * @return {seriesList}\n */\nmodule.exports = function reduce(args, fn) {\n  return Promise.all(args).then(function (args) {\n\n    var seriesList = args.shift();\n    var argument = args.shift();\n\n    if (seriesList.type !== 'seriesList') {\n      throw new Error('input must be a seriesList');\n    }\n\n    if (_.isObject(argument) && argument.type === 'seriesList') {\n      if (argument.list.length !== 1) {\n        throw new Error('argument must be a seriesList with a single series');\n      } else {\n        argument = argument.list[0];\n      }\n    }\n\n    function reduceSeries(series) {\n      return _.reduce(series, function (destinationObject, argument, i, p) {\n\n        var output = _.map(destinationObject.data, function (point, index) {\n\n          var value = point[1];\n\n          if (value == null) {\n            return [point[0], null];\n          }\n\n          if (_.isNumber(argument)) {\n            return [point[0], fn(value, argument, i, p)];\n          }\n\n          if (argument.data[index] == null || argument.data[index][1] == null) {\n            return [point[0], null];\n          }\n          return [point[0], fn(value, argument.data[index][1], i, p)];\n        });\n\n        // Output = single series\n\n        output = {\n          data: output\n        };\n        output = _.defaults(output, destinationObject);\n        return output;\n      });\n    }\n\n    var reduced;\n\n    if (argument != null) {\n      reduced = _.map(seriesList.list, function (series) {\n        return reduceSeries([series].concat(argument));\n      });\n    } else {\n      reduced = [reduceSeries(seriesList.list)];\n    }\n\n    seriesList.list = reduced;\n    return seriesList;\n  })['catch'](function (e) {\n    throw e;\n  });\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvbGliL3JlZHVjZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQUksQ0FBQyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUMxQixJQUFJLE9BQU8sR0FBRyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUM7Ozs7Ozs7Ozs7OztBQWFsQyxNQUFNLENBQUMsT0FBTyxHQUFHLFNBQVMsTUFBTSxDQUFDLElBQUksRUFBRSxFQUFFLEVBQUU7QUFDekMsU0FBTyxPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLElBQUksRUFBRTs7QUFFNUMsUUFBSSxVQUFVLEdBQUcsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO0FBQzlCLFFBQUksUUFBUSxHQUFHLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQzs7QUFFNUIsUUFBSSxVQUFVLENBQUMsSUFBSSxLQUFLLFlBQVksRUFBRTtBQUNwQyxZQUFNLElBQUksS0FBSyxDQUFFLDRCQUE0QixDQUFDLENBQUM7S0FDaEQ7O0FBRUQsUUFBSSxDQUFDLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxJQUFJLFFBQVEsQ0FBQyxJQUFJLEtBQUssWUFBWSxFQUFFO0FBQzFELFVBQUksUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFO0FBQzlCLGNBQU0sSUFBSSxLQUFLLENBQUUsb0RBQW9ELENBQUMsQ0FBQztPQUN4RSxNQUFNO0FBQ0wsZ0JBQVEsR0FBRyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO09BQzdCO0tBQ0Y7O0FBR0QsYUFBUyxZQUFZLENBQUMsTUFBTSxFQUFFO0FBQzVCLGFBQU8sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsVUFBVSxpQkFBaUIsRUFBRSxRQUFRLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRTs7QUFFbkUsWUFBSSxNQUFNLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLEVBQUUsVUFBVSxLQUFLLEVBQUUsS0FBSyxFQUFFOztBQUVqRSxjQUFJLEtBQUssR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7O0FBRXJCLGNBQUksS0FBSyxJQUFJLElBQUksRUFBRTtBQUNqQixtQkFBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQztXQUN6Qjs7QUFFRCxjQUFJLENBQUMsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLEVBQUU7QUFDeEIsbUJBQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEtBQUssRUFBRSxRQUFRLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7V0FDOUM7O0FBRUQsY0FBSSxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLElBQUksSUFBSSxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksRUFBRTtBQUNuRSxtQkFBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQztXQUN6QjtBQUNELGlCQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUM3RCxDQUFDLENBQUM7Ozs7QUFJSCxjQUFNLEdBQUc7QUFDUCxjQUFJLEVBQUUsTUFBTTtTQUNiLENBQUM7QUFDRixjQUFNLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxNQUFNLEVBQUUsaUJBQWlCLENBQUMsQ0FBQztBQUMvQyxlQUFPLE1BQU0sQ0FBQztPQUVmLENBQUMsQ0FBQztLQUVKOztBQUVELFFBQUksT0FBTyxDQUFDOztBQUVaLFFBQUksUUFBUSxJQUFJLElBQUksRUFBRTtBQUNwQixhQUFPLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLFVBQVUsTUFBTSxFQUFFO0FBQ2pELGVBQU8sWUFBWSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7T0FDaEQsQ0FBQyxDQUFDO0tBQ0osTUFBTTtBQUNMLGFBQU8sR0FBRyxDQUFDLFlBQVksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztLQUMzQzs7QUFFRCxjQUFVLENBQUMsSUFBSSxHQUFHLE9BQU8sQ0FBQztBQUMxQixXQUFPLFVBQVUsQ0FBQztHQUVuQixDQUFDLFNBQU0sQ0FBQyxVQUFVLENBQUMsRUFBRTtBQUNwQixVQUFNLENBQUMsQ0FBQztHQUNULENBQUMsQ0FBQztDQUNKLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9pbnN0YWxsZWRQbHVnaW5zL3RpbWVsaW9uL3NlcnZlci9saWIvcmVkdWNlLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcbnZhciBQcm9taXNlID0gcmVxdWlyZSgnYmx1ZWJpcmQnKTtcblxuXG4vKipcbiAqIFJlZHVjZXMgbXVsdGlwbGUgYXJyYXlzIGludG8gYSBzaW5nbGUgYXJyYXkgdXNpbmcgYSBmdW5jdGlvblxuICogQHBhcmFtIHtBcnJheX0gYXJncyAtIGFyZ3NbMF0gbXVzdCBhbHdheXMgYmUgYSB7dHlwZTogJ3Nlcmllc0xpc3QnfVxuICpcbiAqIC0gSWYgb25seSBhcmdbMF0gZXhpc3RzLCB0aGUgc2VyaWVzTGlzdCB3aWxsIGJlIHJlZHVjZWQgdG8gYSBzZXJpZXNMaXN0IGNvbnRhaW5pbmcgYSBzaW5nbGUgc2VyaWVzXG4gKiAtIElmIG11bHRpcGxlIGFyZ3VtZW50cyBhcmUgcGFzc2VkLCBlYWNoIGFyZ3VtZW50IHdpbGwgYmUgbWFwcGVkIG9udG8gZWFjaCBzZXJpZXMgaW4gdGhlIHNlcmllc0xpc3QuXG5cbiAqIEBwYXJhbXMge0Z1bmN0aW9ufSBmbiAtIEZ1bmN0aW9uIHVzZWQgdG8gY29tYmluZSBwb2ludHMgYXQgc2FtZSBpbmRleCBpbiBlYWNoIGFycmF5IG9mIGVhY2ggc2VyaWVzIGluIHRoZSBzZXJpZXNMaXN0LlxuICogQHJldHVybiB7c2VyaWVzTGlzdH1cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiByZWR1Y2UoYXJncywgZm4pIHtcbiAgcmV0dXJuIFByb21pc2UuYWxsKGFyZ3MpLnRoZW4oZnVuY3Rpb24gKGFyZ3MpIHtcblxuICAgIHZhciBzZXJpZXNMaXN0ID0gYXJncy5zaGlmdCgpO1xuICAgIHZhciBhcmd1bWVudCA9IGFyZ3Muc2hpZnQoKTtcblxuICAgIGlmIChzZXJpZXNMaXN0LnR5cGUgIT09ICdzZXJpZXNMaXN0Jykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yICgnaW5wdXQgbXVzdCBiZSBhIHNlcmllc0xpc3QnKTtcbiAgICB9XG5cbiAgICBpZiAoXy5pc09iamVjdChhcmd1bWVudCkgJiYgYXJndW1lbnQudHlwZSA9PT0gJ3Nlcmllc0xpc3QnKSB7XG4gICAgICBpZiAoYXJndW1lbnQubGlzdC5sZW5ndGggIT09IDEpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yICgnYXJndW1lbnQgbXVzdCBiZSBhIHNlcmllc0xpc3Qgd2l0aCBhIHNpbmdsZSBzZXJpZXMnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFyZ3VtZW50ID0gYXJndW1lbnQubGlzdFswXTtcbiAgICAgIH1cbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIHJlZHVjZVNlcmllcyhzZXJpZXMpIHtcbiAgICAgIHJldHVybiBfLnJlZHVjZShzZXJpZXMsIGZ1bmN0aW9uIChkZXN0aW5hdGlvbk9iamVjdCwgYXJndW1lbnQsIGksIHApIHtcblxuICAgICAgICB2YXIgb3V0cHV0ID0gXy5tYXAoZGVzdGluYXRpb25PYmplY3QuZGF0YSwgZnVuY3Rpb24gKHBvaW50LCBpbmRleCkge1xuXG4gICAgICAgICAgdmFyIHZhbHVlID0gcG9pbnRbMV07XG5cbiAgICAgICAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIFtwb2ludFswXSwgbnVsbF07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKF8uaXNOdW1iZXIoYXJndW1lbnQpKSB7XG4gICAgICAgICAgICByZXR1cm4gW3BvaW50WzBdLCBmbih2YWx1ZSwgYXJndW1lbnQsIGksIHApXTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoYXJndW1lbnQuZGF0YVtpbmRleF0gPT0gbnVsbCB8fCBhcmd1bWVudC5kYXRhW2luZGV4XVsxXSA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gW3BvaW50WzBdLCBudWxsXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIFtwb2ludFswXSwgZm4odmFsdWUsIGFyZ3VtZW50LmRhdGFbaW5kZXhdWzFdLCBpLCBwKV07XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIE91dHB1dCA9IHNpbmdsZSBzZXJpZXNcblxuICAgICAgICBvdXRwdXQgPSB7XG4gICAgICAgICAgZGF0YTogb3V0cHV0XG4gICAgICAgIH07XG4gICAgICAgIG91dHB1dCA9IF8uZGVmYXVsdHMob3V0cHV0LCBkZXN0aW5hdGlvbk9iamVjdCk7XG4gICAgICAgIHJldHVybiBvdXRwdXQ7XG5cbiAgICAgIH0pO1xuXG4gICAgfVxuXG4gICAgdmFyIHJlZHVjZWQ7XG5cbiAgICBpZiAoYXJndW1lbnQgIT0gbnVsbCkge1xuICAgICAgcmVkdWNlZCA9IF8ubWFwKHNlcmllc0xpc3QubGlzdCwgZnVuY3Rpb24gKHNlcmllcykge1xuICAgICAgICByZXR1cm4gcmVkdWNlU2VyaWVzKFtzZXJpZXNdLmNvbmNhdChhcmd1bWVudCkpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlZHVjZWQgPSBbcmVkdWNlU2VyaWVzKHNlcmllc0xpc3QubGlzdCldO1xuICAgIH1cblxuICAgIHNlcmllc0xpc3QubGlzdCA9IHJlZHVjZWQ7XG4gICAgcmV0dXJuIHNlcmllc0xpc3Q7XG5cbiAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHtcbiAgICB0aHJvdyBlO1xuICB9KTtcbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/lib/reduce.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/lib/reduce.js",
      "sourcesContent": [
        "var _ = require('lodash');\nvar Promise = require('bluebird');\n\n\n/**\n * Reduces multiple arrays into a single array using a function\n * @param {Array} args - args[0] must always be a {type: 'seriesList'}\n *\n * - If only arg[0] exists, the seriesList will be reduced to a seriesList containing a single series\n * - If multiple arguments are passed, each argument will be mapped onto each series in the seriesList.\n\n * @params {Function} fn - Function used to combine points at same index in each array of each series in the seriesList.\n * @return {seriesList}\n */\nmodule.exports = function reduce(args, fn) {\n  return Promise.all(args).then(function (args) {\n\n    var seriesList = args.shift();\n    var argument = args.shift();\n\n    if (seriesList.type !== 'seriesList') {\n      throw new Error ('input must be a seriesList');\n    }\n\n    if (_.isObject(argument) && argument.type === 'seriesList') {\n      if (argument.list.length !== 1) {\n        throw new Error ('argument must be a seriesList with a single series');\n      } else {\n        argument = argument.list[0];\n      }\n    }\n\n\n    function reduceSeries(series) {\n      return _.reduce(series, function (destinationObject, argument, i, p) {\n\n        var output = _.map(destinationObject.data, function (point, index) {\n\n          var value = point[1];\n\n          if (value == null) {\n            return [point[0], null];\n          }\n\n          if (_.isNumber(argument)) {\n            return [point[0], fn(value, argument, i, p)];\n          }\n\n          if (argument.data[index] == null || argument.data[index][1] == null) {\n            return [point[0], null];\n          }\n          return [point[0], fn(value, argument.data[index][1], i, p)];\n        });\n\n        // Output = single series\n\n        output = {\n          data: output\n        };\n        output = _.defaults(output, destinationObject);\n        return output;\n\n      });\n\n    }\n\n    var reduced;\n\n    if (argument != null) {\n      reduced = _.map(seriesList.list, function (series) {\n        return reduceSeries([series].concat(argument));\n      });\n    } else {\n      reduced = [reduceSeries(seriesList.list)];\n    }\n\n    seriesList.list = reduced;\n    return seriesList;\n\n  }).catch(function (e) {\n    throw e;\n  });\n};\n"
      ]
    },
    "mtime": 1467119944363
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/first.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar alter = require('../lib/alter.js');\nvar Chainable = require('../lib/classes/chainable');\nmodule.exports = new Chainable('first', {\n  args: [{\n    name: 'inputSeries',\n    types: ['seriesList']\n  }],\n  help: 'This is an internal function that simply returns the input seriesList. Don\\'t use this',\n  fn: function firstFn(args) {\n    return alter(args, function (eachSeries) {\n      return eachSeries;\n    });\n  }\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy9maXJzdC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQUksS0FBSyxHQUFHLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0FBQ3ZDLElBQUksU0FBUyxHQUFHLE9BQU8sQ0FBQywwQkFBMEIsQ0FBQyxDQUFDO0FBQ3BELE1BQU0sQ0FBQyxPQUFPLEdBQUcsSUFBSSxTQUFTLENBQUMsT0FBTyxFQUFFO0FBQ3RDLE1BQUksRUFBRSxDQUNKO0FBQ0UsUUFBSSxFQUFFLGFBQWE7QUFDbkIsU0FBSyxFQUFFLENBQUMsWUFBWSxDQUFDO0dBQ3RCLENBQ0Y7QUFDRCxNQUFJLEVBQUUsd0ZBQXdGO0FBQzlGLElBQUUsRUFBRSxTQUFTLE9BQU8sQ0FBQyxJQUFJLEVBQUU7QUFDekIsV0FBTyxLQUFLLENBQUMsSUFBSSxFQUFFLFVBQVUsVUFBVSxFQUFFO0FBQ3ZDLGFBQU8sVUFBVSxDQUFDO0tBQ25CLENBQUMsQ0FBQztHQUNKO0NBQ0YsQ0FBQyxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy9maXJzdC5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBhbHRlciA9IHJlcXVpcmUoJy4uL2xpYi9hbHRlci5qcycpO1xudmFyIENoYWluYWJsZSA9IHJlcXVpcmUoJy4uL2xpYi9jbGFzc2VzL2NoYWluYWJsZScpO1xubW9kdWxlLmV4cG9ydHMgPSBuZXcgQ2hhaW5hYmxlKCdmaXJzdCcsIHtcbiAgYXJnczogW1xuICAgIHtcbiAgICAgIG5hbWU6ICdpbnB1dFNlcmllcycsXG4gICAgICB0eXBlczogWydzZXJpZXNMaXN0J11cbiAgICB9XG4gIF0sXG4gIGhlbHA6ICdUaGlzIGlzIGFuIGludGVybmFsIGZ1bmN0aW9uIHRoYXQgc2ltcGx5IHJldHVybnMgdGhlIGlucHV0IHNlcmllc0xpc3QuIERvblxcJ3QgdXNlIHRoaXMnLFxuICBmbjogZnVuY3Rpb24gZmlyc3RGbihhcmdzKSB7XG4gICAgcmV0dXJuIGFsdGVyKGFyZ3MsIGZ1bmN0aW9uIChlYWNoU2VyaWVzKSB7XG4gICAgICByZXR1cm4gZWFjaFNlcmllcztcbiAgICB9KTtcbiAgfVxufSk7Il19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/first.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,KAAK,GAAG,OAAO,CAAC,iBAAiB,CAAC,CAAC;AACvC,IAAI,SAAS,GAAG,OAAO,CAAC,0BAA0B,CAAC,CAAC;AACpD,MAAM,CAAC,OAAO,GAAG,IAAI,SAAS,CAAC,OAAO,EAAE;AACtC,MAAI,EAAE,CACJ;AACE,QAAI,EAAE,aAAa;AACnB,SAAK,EAAE,CAAC,YAAY,CAAC;GACtB,CACF;AACD,MAAI,EAAE,wFAAwF;AAC9F,IAAE,EAAE,SAAS,OAAO,CAAC,IAAI,EAAE;AACzB,WAAO,KAAK,CAAC,IAAI,EAAE,UAAU,UAAU,EAAE;AACvC,aAAO,UAAU,CAAC;KACnB,CAAC,CAAC;GACJ;CACF,CAAC,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/first.js",
      "sourcesContent": [
        "var alter = require('../lib/alter.js');\nvar Chainable = require('../lib/classes/chainable');\nmodule.exports = new Chainable('first', {\n  args: [\n    {\n      name: 'inputSeries',\n      types: ['seriesList']\n    }\n  ],\n  help: 'This is an internal function that simply returns the input seriesList. Don\\'t use this',\n  fn: function firstFn(args) {\n    return alter(args, function (eachSeries) {\n      return eachSeries;\n    });\n  }\n});"
      ]
    },
    "mtime": 1467119944363
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/fit.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar alter = require('../lib/alter.js');\nvar _ = require('lodash');\nvar Chainable = require('../lib/classes/chainable');\n\nvar loadFunctions = require('../lib/load_functions.js');\nvar fitFunctions = loadFunctions('fit_functions');\n\nmodule.exports = new Chainable('fit', {\n  args: [{\n    name: 'inputSeries',\n    types: ['seriesList']\n  }, {\n    name: 'mode',\n    types: ['string'],\n    help: 'The algorithm to use for fitting the series to the target. One of: ' + _.keys(fitFunctions).join(', ')\n  }],\n  help: 'Fills null values using a defined fit function',\n  fn: function absFn(args) {\n    return alter(args, function (eachSeries, mode) {\n\n      var noNulls = _.filter(eachSeries.data, 1);\n\n      eachSeries.data = fitFunctions[mode](noNulls, eachSeries.data);\n      return eachSeries;\n    });\n  }\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy9maXQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFJLEtBQUssR0FBRyxPQUFPLENBQUMsaUJBQWlCLENBQUMsQ0FBQztBQUN2QyxJQUFJLENBQUMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDMUIsSUFBSSxTQUFTLEdBQUcsT0FBTyxDQUFDLDBCQUEwQixDQUFDLENBQUM7O0FBRXBELElBQUksYUFBYSxHQUFHLE9BQU8sQ0FBQywwQkFBMEIsQ0FBQyxDQUFDO0FBQ3hELElBQUksWUFBWSxHQUFJLGFBQWEsQ0FBQyxlQUFlLENBQUMsQ0FBQzs7QUFFbkQsTUFBTSxDQUFDLE9BQU8sR0FBRyxJQUFJLFNBQVMsQ0FBQyxLQUFLLEVBQUU7QUFDcEMsTUFBSSxFQUFFLENBQ0o7QUFDRSxRQUFJLEVBQUUsYUFBYTtBQUNuQixTQUFLLEVBQUUsQ0FBQyxZQUFZLENBQUM7R0FDdEIsRUFDRDtBQUNFLFFBQUksRUFBRSxNQUFNO0FBQ1osU0FBSyxFQUFFLENBQUMsUUFBUSxDQUFDO0FBQ2pCLFFBQUksRUFBRSxxRUFBcUUsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7R0FDOUcsQ0FDRjtBQUNELE1BQUksRUFBRSxnREFBZ0Q7QUFDdEQsSUFBRSxFQUFFLFNBQVMsS0FBSyxDQUFDLElBQUksRUFBRTtBQUN2QixXQUFPLEtBQUssQ0FBQyxJQUFJLEVBQUUsVUFBVSxVQUFVLEVBQUUsSUFBSSxFQUFFOztBQUU3QyxVQUFJLE9BQU8sR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUM7O0FBRTNDLGdCQUFVLENBQUMsSUFBSSxHQUFHLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLEVBQUUsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQy9ELGFBQU8sVUFBVSxDQUFDO0tBQ25CLENBQUMsQ0FBQztHQUNKO0NBQ0YsQ0FBQyxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy9maXQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYWx0ZXIgPSByZXF1aXJlKCcuLi9saWIvYWx0ZXIuanMnKTtcbnZhciBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XG52YXIgQ2hhaW5hYmxlID0gcmVxdWlyZSgnLi4vbGliL2NsYXNzZXMvY2hhaW5hYmxlJyk7XG5cbnZhciBsb2FkRnVuY3Rpb25zID0gcmVxdWlyZSgnLi4vbGliL2xvYWRfZnVuY3Rpb25zLmpzJyk7XG52YXIgZml0RnVuY3Rpb25zICA9IGxvYWRGdW5jdGlvbnMoJ2ZpdF9mdW5jdGlvbnMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBuZXcgQ2hhaW5hYmxlKCdmaXQnLCB7XG4gIGFyZ3M6IFtcbiAgICB7XG4gICAgICBuYW1lOiAnaW5wdXRTZXJpZXMnLFxuICAgICAgdHlwZXM6IFsnc2VyaWVzTGlzdCddXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAnbW9kZScsXG4gICAgICB0eXBlczogWydzdHJpbmcnXSxcbiAgICAgIGhlbHA6ICdUaGUgYWxnb3JpdGhtIHRvIHVzZSBmb3IgZml0dGluZyB0aGUgc2VyaWVzIHRvIHRoZSB0YXJnZXQuIE9uZSBvZjogJyArIF8ua2V5cyhmaXRGdW5jdGlvbnMpLmpvaW4oJywgJylcbiAgICB9XG4gIF0sXG4gIGhlbHA6ICdGaWxscyBudWxsIHZhbHVlcyB1c2luZyBhIGRlZmluZWQgZml0IGZ1bmN0aW9uJyxcbiAgZm46IGZ1bmN0aW9uIGFic0ZuKGFyZ3MpIHtcbiAgICByZXR1cm4gYWx0ZXIoYXJncywgZnVuY3Rpb24gKGVhY2hTZXJpZXMsIG1vZGUpIHtcblxuICAgICAgdmFyIG5vTnVsbHMgPSBfLmZpbHRlcihlYWNoU2VyaWVzLmRhdGEsIDEpO1xuXG4gICAgICBlYWNoU2VyaWVzLmRhdGEgPSBmaXRGdW5jdGlvbnNbbW9kZV0obm9OdWxscywgZWFjaFNlcmllcy5kYXRhKTtcbiAgICAgIHJldHVybiBlYWNoU2VyaWVzO1xuICAgIH0pO1xuICB9XG59KTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/fit.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,KAAK,GAAG,OAAO,CAAC,iBAAiB,CAAC,CAAC;AACvC,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC1B,IAAI,SAAS,GAAG,OAAO,CAAC,0BAA0B,CAAC,CAAC;;AAEpD,IAAI,aAAa,GAAG,OAAO,CAAC,0BAA0B,CAAC,CAAC;AACxD,IAAI,YAAY,GAAI,aAAa,CAAC,eAAe,CAAC,CAAC;;AAEnD,MAAM,CAAC,OAAO,GAAG,IAAI,SAAS,CAAC,KAAK,EAAE;AACpC,MAAI,EAAE,CACJ;AACE,QAAI,EAAE,aAAa;AACnB,SAAK,EAAE,CAAC,YAAY,CAAC;GACtB,EACD;AACE,QAAI,EAAE,MAAM;AACZ,SAAK,EAAE,CAAC,QAAQ,CAAC;AACjB,QAAI,EAAE,qEAAqE,GAAG,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC;GAC9G,CACF;AACD,MAAI,EAAE,gDAAgD;AACtD,IAAE,EAAE,SAAS,KAAK,CAAC,IAAI,EAAE;AACvB,WAAO,KAAK,CAAC,IAAI,EAAE,UAAU,UAAU,EAAE,IAAI,EAAE;;AAE7C,UAAI,OAAO,GAAG,CAAC,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;;AAE3C,gBAAU,CAAC,IAAI,GAAG,YAAY,CAAC,IAAI,CAAC,CAAC,OAAO,EAAE,UAAU,CAAC,IAAI,CAAC,CAAC;AAC/D,aAAO,UAAU,CAAC;KACnB,CAAC,CAAC;GACJ;CACF,CAAC,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/fit.js",
      "sourcesContent": [
        "var alter = require('../lib/alter.js');\nvar _ = require('lodash');\nvar Chainable = require('../lib/classes/chainable');\n\nvar loadFunctions = require('../lib/load_functions.js');\nvar fitFunctions  = loadFunctions('fit_functions');\n\nmodule.exports = new Chainable('fit', {\n  args: [\n    {\n      name: 'inputSeries',\n      types: ['seriesList']\n    },\n    {\n      name: 'mode',\n      types: ['string'],\n      help: 'The algorithm to use for fitting the series to the target. One of: ' + _.keys(fitFunctions).join(', ')\n    }\n  ],\n  help: 'Fills null values using a defined fit function',\n  fn: function absFn(args) {\n    return alter(args, function (eachSeries, mode) {\n\n      var noNulls = _.filter(eachSeries.data, 1);\n\n      eachSeries.data = fitFunctions[mode](noNulls, eachSeries.data);\n      return eachSeries;\n    });\n  }\n});\n"
      ]
    },
    "mtime": 1467119944363
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/graphite.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _ = require('lodash');\nvar fetch = require('node-fetch');\nvar moment = require('moment');\nvar Datasource = require('../lib/classes/datasource');\n\nmodule.exports = new Datasource('graphite', {\n  args: [{\n    name: 'metric', // _test-data.users.*.data\n    types: ['string'],\n    help: 'Graphite metric to pull, eg _test-data.users.*.data'\n  }],\n  help: 'Pull data from graphite. Configure your graphite server in timelion.json',\n  fn: function graphite(args, tlConfig) {\n\n    var config = args.byName;\n\n    var time = {\n      min: moment(tlConfig.time.from).format('HH:mm[_]YYYYMMDD'),\n      max: moment(tlConfig.time.to).format('HH:mm[_]YYYYMMDD')\n    };\n\n    var URL = tlConfig.file.graphite.url + '/render/' + '?format=json' + '&from=' + time.min + '&until=' + time.max + '&target=' + config.metric;\n\n    return fetch(URL).then(function (resp) {\n      return resp.json();\n    }).then(function (resp) {\n      var list = _.map(resp, function (series) {\n        var data = _.map(series.datapoints, function (point) {\n          return [point[1] * 1000, point[0]];\n        });\n        return {\n          data: data,\n          type: 'series',\n          fit: 'nearest', // TODO make this customizable\n          label: series.target\n        };\n      });\n\n      return {\n        type: 'seriesList',\n        list: list\n      };\n    })['catch'](function (e) {\n      throw e;\n    });\n  }\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy9ncmFwaGl0ZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQUksQ0FBQyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUMxQixJQUFJLEtBQUssR0FBRyxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUM7QUFDbEMsSUFBSSxNQUFNLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQy9CLElBQUksVUFBVSxHQUFHLE9BQU8sQ0FBQywyQkFBMkIsQ0FBQyxDQUFDOztBQUd0RCxNQUFNLENBQUMsT0FBTyxHQUFHLElBQUksVUFBVSxDQUFFLFVBQVUsRUFBRTtBQUMzQyxNQUFJLEVBQUUsQ0FDSjtBQUNFLFFBQUksRUFBRSxRQUFRO0FBQ2QsU0FBSyxFQUFFLENBQUMsUUFBUSxDQUFDO0FBQ2pCLFFBQUksRUFBRSxxREFBcUQ7R0FDNUQsQ0FDRjtBQUNELE1BQUksRUFBRSwwRUFBMEU7QUFDaEYsSUFBRSxFQUFFLFNBQVMsUUFBUSxDQUFDLElBQUksRUFBRSxRQUFRLEVBQUU7O0FBRXBDLFFBQUksTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUM7O0FBRXpCLFFBQUksSUFBSSxHQUFHO0FBQ1QsU0FBRyxFQUFFLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQztBQUMxRCxTQUFHLEVBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLGtCQUFrQixDQUFDO0tBQzFELENBQUM7O0FBRUYsUUFBSSxHQUFHLEdBQUcsUUFBUSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxHQUFHLFVBQVUsR0FDL0MsY0FBYyxHQUNkLFFBQVEsR0FBRyxJQUFJLENBQUMsR0FBRyxHQUNuQixTQUFTLEdBQUcsSUFBSSxDQUFDLEdBQUcsR0FDcEIsVUFBVSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7O0FBRTdCLFdBQU8sS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLElBQUksRUFBRTtBQUNyQyxhQUFPLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztLQUNwQixDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsSUFBSSxFQUFFO0FBQ3RCLFVBQUksSUFBSSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLFVBQVUsTUFBTSxFQUFFO0FBQ3ZDLFlBQUksSUFBSSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLFVBQVUsRUFBRSxVQUFVLEtBQUssRUFBRTtBQUNuRCxpQkFBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDcEMsQ0FBQyxDQUFDO0FBQ0gsZUFBTztBQUNMLGNBQUksRUFBRSxJQUFJO0FBQ1YsY0FBSSxFQUFFLFFBQVE7QUFDZCxhQUFHLEVBQUUsU0FBUztBQUNkLGVBQUssRUFBRSxNQUFNLENBQUMsTUFBTTtTQUNyQixDQUFDO09BQ0gsQ0FBQyxDQUFDOztBQUVILGFBQU87QUFDTCxZQUFJLEVBQUUsWUFBWTtBQUNsQixZQUFJLEVBQUUsSUFBSTtPQUNYLENBQUM7S0FDSCxDQUFDLFNBQU0sQ0FBQyxVQUFVLENBQUMsRUFBRTtBQUNwQixZQUFNLENBQUMsQ0FBQztLQUNULENBQUMsQ0FBQztHQUNKO0NBQ0YsQ0FBQyxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy9ncmFwaGl0ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XG52YXIgZmV0Y2ggPSByZXF1aXJlKCdub2RlLWZldGNoJyk7XG52YXIgbW9tZW50ID0gcmVxdWlyZSgnbW9tZW50Jyk7XG52YXIgRGF0YXNvdXJjZSA9IHJlcXVpcmUoJy4uL2xpYi9jbGFzc2VzL2RhdGFzb3VyY2UnKTtcblxuXG5tb2R1bGUuZXhwb3J0cyA9IG5ldyBEYXRhc291cmNlICgnZ3JhcGhpdGUnLCB7XG4gIGFyZ3M6IFtcbiAgICB7XG4gICAgICBuYW1lOiAnbWV0cmljJywgLy8gX3Rlc3QtZGF0YS51c2Vycy4qLmRhdGFcbiAgICAgIHR5cGVzOiBbJ3N0cmluZyddLFxuICAgICAgaGVscDogJ0dyYXBoaXRlIG1ldHJpYyB0byBwdWxsLCBlZyBfdGVzdC1kYXRhLnVzZXJzLiouZGF0YSdcbiAgICB9XG4gIF0sXG4gIGhlbHA6ICdQdWxsIGRhdGEgZnJvbSBncmFwaGl0ZS4gQ29uZmlndXJlIHlvdXIgZ3JhcGhpdGUgc2VydmVyIGluIHRpbWVsaW9uLmpzb24nLFxuICBmbjogZnVuY3Rpb24gZ3JhcGhpdGUoYXJncywgdGxDb25maWcpIHtcblxuICAgIHZhciBjb25maWcgPSBhcmdzLmJ5TmFtZTtcblxuICAgIHZhciB0aW1lID0ge1xuICAgICAgbWluOiBtb21lbnQodGxDb25maWcudGltZS5mcm9tKS5mb3JtYXQoJ0hIOm1tW19dWVlZWU1NREQnKSxcbiAgICAgIG1heDogIG1vbWVudCh0bENvbmZpZy50aW1lLnRvKS5mb3JtYXQoJ0hIOm1tW19dWVlZWU1NREQnKVxuICAgIH07XG5cbiAgICB2YXIgVVJMID0gdGxDb25maWcuZmlsZS5ncmFwaGl0ZS51cmwgKyAnL3JlbmRlci8nICtcbiAgICAgICc/Zm9ybWF0PWpzb24nICtcbiAgICAgICcmZnJvbT0nICsgdGltZS5taW4gK1xuICAgICAgJyZ1bnRpbD0nICsgdGltZS5tYXggK1xuICAgICAgJyZ0YXJnZXQ9JyArIGNvbmZpZy5tZXRyaWM7XG5cbiAgICByZXR1cm4gZmV0Y2goVVJMKS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7XG4gICAgICByZXR1cm4gcmVzcC5qc29uKCk7XG4gICAgfSkudGhlbihmdW5jdGlvbiAocmVzcCkge1xuICAgICAgdmFyIGxpc3QgPSBfLm1hcChyZXNwLCBmdW5jdGlvbiAoc2VyaWVzKSB7XG4gICAgICAgIHZhciBkYXRhID0gXy5tYXAoc2VyaWVzLmRhdGFwb2ludHMsIGZ1bmN0aW9uIChwb2ludCkge1xuICAgICAgICAgIHJldHVybiBbcG9pbnRbMV0gKiAxMDAwLCBwb2ludFswXV07XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgICAgdHlwZTogJ3NlcmllcycsXG4gICAgICAgICAgZml0OiAnbmVhcmVzdCcsIC8vIFRPRE8gbWFrZSB0aGlzIGN1c3RvbWl6YWJsZVxuICAgICAgICAgIGxhYmVsOiBzZXJpZXMudGFyZ2V0XG4gICAgICAgIH07XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ3Nlcmllc0xpc3QnLFxuICAgICAgICBsaXN0OiBsaXN0XG4gICAgICB9O1xuICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aHJvdyBlO1xuICAgIH0pO1xuICB9XG59KTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/graphite.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC1B,IAAI,KAAK,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC;AAClC,IAAI,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC/B,IAAI,UAAU,GAAG,OAAO,CAAC,2BAA2B,CAAC,CAAC;;AAGtD,MAAM,CAAC,OAAO,GAAG,IAAI,UAAU,CAAE,UAAU,EAAE;AAC3C,MAAI,EAAE,CACJ;AACE,QAAI,EAAE,QAAQ;AACd,SAAK,EAAE,CAAC,QAAQ,CAAC;AACjB,QAAI,EAAE,qDAAqD;GAC5D,CACF;AACD,MAAI,EAAE,0EAA0E;AAChF,IAAE,EAAE,SAAS,QAAQ,CAAC,IAAI,EAAE,QAAQ,EAAE;;AAEpC,QAAI,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;;AAEzB,QAAI,IAAI,GAAG;AACT,SAAG,EAAE,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,kBAAkB,CAAC;AAC1D,SAAG,EAAG,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,kBAAkB,CAAC;KAC1D,CAAC;;AAEF,QAAI,GAAG,GAAG,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,GAAG,UAAU,GAC/C,cAAc,GACd,QAAQ,GAAG,IAAI,CAAC,GAAG,GACnB,SAAS,GAAG,IAAI,CAAC,GAAG,GACpB,UAAU,GAAG,MAAM,CAAC,MAAM,CAAC;;AAE7B,WAAO,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,EAAE;AACrC,aAAO,IAAI,CAAC,IAAI,EAAE,CAAC;KACpB,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,EAAE;AACtB,UAAI,IAAI,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,EAAE,UAAU,MAAM,EAAE;AACvC,YAAI,IAAI,GAAG,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,UAAU,EAAE,UAAU,KAAK,EAAE;AACnD,iBAAO,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,IAAI,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;SACpC,CAAC,CAAC;AACH,eAAO;AACL,cAAI,EAAE,IAAI;AACV,cAAI,EAAE,QAAQ;AACd,aAAG,EAAE,SAAS;AACd,eAAK,EAAE,MAAM,CAAC,MAAM;SACrB,CAAC;OACH,CAAC,CAAC;;AAEH,aAAO;AACL,YAAI,EAAE,YAAY;AAClB,YAAI,EAAE,IAAI;OACX,CAAC;KACH,CAAC,SAAM,CAAC,UAAU,CAAC,EAAE;AACpB,YAAM,CAAC,CAAC;KACT,CAAC,CAAC;GACJ;CACF,CAAC,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/graphite.js",
      "sourcesContent": [
        "var _ = require('lodash');\nvar fetch = require('node-fetch');\nvar moment = require('moment');\nvar Datasource = require('../lib/classes/datasource');\n\n\nmodule.exports = new Datasource ('graphite', {\n  args: [\n    {\n      name: 'metric', // _test-data.users.*.data\n      types: ['string'],\n      help: 'Graphite metric to pull, eg _test-data.users.*.data'\n    }\n  ],\n  help: 'Pull data from graphite. Configure your graphite server in timelion.json',\n  fn: function graphite(args, tlConfig) {\n\n    var config = args.byName;\n\n    var time = {\n      min: moment(tlConfig.time.from).format('HH:mm[_]YYYYMMDD'),\n      max:  moment(tlConfig.time.to).format('HH:mm[_]YYYYMMDD')\n    };\n\n    var URL = tlConfig.file.graphite.url + '/render/' +\n      '?format=json' +\n      '&from=' + time.min +\n      '&until=' + time.max +\n      '&target=' + config.metric;\n\n    return fetch(URL).then(function (resp) {\n      return resp.json();\n    }).then(function (resp) {\n      var list = _.map(resp, function (series) {\n        var data = _.map(series.datapoints, function (point) {\n          return [point[1] * 1000, point[0]];\n        });\n        return {\n          data: data,\n          type: 'series',\n          fit: 'nearest', // TODO make this customizable\n          label: series.target\n        };\n      });\n\n      return {\n        type: 'seriesList',\n        list: list\n      };\n    }).catch(function (e) {\n      throw e;\n    });\n  }\n});\n"
      ]
    },
    "mtime": 1467119944363
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/lib/classes/datasource.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "get",
        "inherits",
        "class-call-check"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar loadFunctions = require('../load_functions.js');\nvar fitFunctions = loadFunctions('fit_functions');\nvar TimelionFunction = require('./timelion_function');\nvar offsetTime = require('../offset_time');\n\nvar _ = require('lodash');\nvar moment = require('moment');\n\nfunction offsetSeries(response, offset) {\n  if (offset) {\n    response = _.map(response, function (point) {\n      return [offsetTime(point[0], offset, true), point[1]];\n    });\n  }\n  return response;\n}\n\nmodule.exports = (function (_TimelionFunction) {\n  _inherits(Datasource, _TimelionFunction);\n\n  function Datasource(name, config) {\n    _classCallCheck(this, Datasource);\n\n    // Additional arguments that every dataSource take\n    config.args.push({\n      name: 'offset',\n      types: ['string', 'null'],\n      help: 'Offset the series retrieval by a date expression. Eg -1M to make events from one month ago appear as if they are happening now'\n    });\n\n    config.args.push({\n      name: 'fit',\n      types: ['string', 'null'],\n      help: 'Algorithm to use for fitting series to the target time span and interval. Available: ' + _.keys(fitFunctions).join(', ')\n    });\n\n    // Wrap the original function so we can modify inputs/outputs with offset & fit\n    var originalFunction = config.fn;\n    config.fn = function (args, tlConfig) {\n      var config = _.clone(tlConfig);\n      if (args.byName.offset) {\n        config.time = _.cloneDeep(tlConfig.time);\n        config.time.from = offsetTime(config.time.from, args.byName.offset);\n        config.time.to = offsetTime(config.time.to, args.byName.offset);\n      }\n\n      return Promise.resolve(originalFunction(args, config)).then(function (seriesList) {\n        seriesList.list = _.map(seriesList.list, function (series) {\n          if (series.data.length === 0) throw new Error(name + '() returned no results');\n          series.data = offsetSeries(series.data, args.byName.offset);\n          series.fit = args.byName.fit || series.fit || 'nearest';\n          return series;\n        });\n        return seriesList;\n      });\n    };\n\n    _get(Object.getPrototypeOf(Datasource.prototype), 'constructor', this).call(this, name, config);\n\n    // You  need to call timelionFn if calling up a datasource from another datasource,\n    // otherwise teh series will end up being offset twice.\n    this.timelionFn = originalFunction;\n    this.datasource = true;\n    this.cacheKey = function (item) {\n      return item.text;\n    };\n    Object.freeze(this);\n  }\n\n  return Datasource;\n})(TimelionFunction);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvbGliL2NsYXNzZXMvZGF0YXNvdXJjZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBLElBQUksYUFBYSxHQUFHLE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO0FBQ3BELElBQUksWUFBWSxHQUFJLGFBQWEsQ0FBQyxlQUFlLENBQUMsQ0FBQztBQUNuRCxJQUFJLGdCQUFnQixHQUFHLE9BQU8sQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO0FBQ3RELElBQUksVUFBVSxHQUFHLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDOztBQUUzQyxJQUFJLENBQUMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDMUIsSUFBSSxNQUFNLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDOztBQUcvQixTQUFTLFlBQVksQ0FBQyxRQUFRLEVBQUUsTUFBTSxFQUFFO0FBQ3RDLE1BQUksTUFBTSxFQUFFO0FBQ1YsWUFBUSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFFLFVBQVUsS0FBSyxFQUFFO0FBQzFDLGFBQU8sQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLE1BQU0sRUFBRSxJQUFJLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztLQUN2RCxDQUFDLENBQUM7R0FDSjtBQUNELFNBQU8sUUFBUSxDQUFDO0NBQ2pCOztBQUVELE1BQU0sQ0FBQyxPQUFPO1lBQVMsVUFBVTs7QUFDcEIsV0FEVSxVQUFVLENBQ25CLElBQUksRUFBRSxNQUFNLEVBQUU7MEJBREwsVUFBVTs7O0FBSTdCLFVBQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDO0FBQ2YsVUFBSSxFQUFFLFFBQVE7QUFDZCxXQUFLLEVBQUUsQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDO0FBQ3pCLFVBQUksRUFBRSxnSUFBZ0k7S0FDdkksQ0FBQyxDQUFDOztBQUVILFVBQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDO0FBQ2YsVUFBSSxFQUFFLEtBQUs7QUFDWCxXQUFLLEVBQUUsQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDO0FBQ3pCLFVBQUksRUFBRSx1RkFBdUYsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7S0FDaEksQ0FBQyxDQUFDOzs7QUFHSCxRQUFJLGdCQUFnQixHQUFHLE1BQU0sQ0FBQyxFQUFFLENBQUM7QUFDakMsVUFBTSxDQUFDLEVBQUUsR0FBRyxVQUFVLElBQUksRUFBRSxRQUFRLEVBQUU7QUFDcEMsVUFBSSxNQUFNLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUMvQixVQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFO0FBQ3RCLGNBQU0sQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDekMsY0FBTSxDQUFDLElBQUksQ0FBQyxJQUFJLEdBQUcsVUFBVSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDcEUsY0FBTSxDQUFDLElBQUksQ0FBQyxFQUFFLEdBQUcsVUFBVSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7T0FDakU7O0FBRUQsYUFBTyxPQUFPLENBQUMsT0FBTyxDQUFDLGdCQUFnQixDQUFDLElBQUksRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLFVBQVUsRUFBRTtBQUNoRixrQkFBVSxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxJQUFJLEVBQUUsVUFBVSxNQUFNLEVBQUU7QUFDekQsY0FBSSxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUUsTUFBTSxJQUFJLEtBQUssQ0FBQyxJQUFJLEdBQUcsd0JBQXdCLENBQUMsQ0FBQztBQUMvRSxnQkFBTSxDQUFDLElBQUksR0FBRyxZQUFZLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQzVELGdCQUFNLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxJQUFJLE1BQU0sQ0FBQyxHQUFHLElBQUksU0FBUyxDQUFDO0FBQ3hELGlCQUFPLE1BQU0sQ0FBQztTQUNmLENBQUMsQ0FBQztBQUNILGVBQU8sVUFBVSxDQUFDO09BRW5CLENBQUMsQ0FBQztLQUNKLENBQUM7O0FBRUYsK0JBdENtQixVQUFVLDZDQXNDdkIsSUFBSSxFQUFFLE1BQU0sRUFBRTs7OztBQUlwQixRQUFJLENBQUMsVUFBVSxHQUFHLGdCQUFnQixDQUFDO0FBQ25DLFFBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDO0FBQ3ZCLFFBQUksQ0FBQyxRQUFRLEdBQUcsVUFBVSxJQUFJLEVBQUU7QUFDOUIsYUFBTyxJQUFJLENBQUMsSUFBSSxDQUFDO0tBQ2xCLENBQUM7QUFDRixVQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO0dBQ3JCOztTQWhEb0IsVUFBVTtHQUFTLGdCQUFnQixDQWtEekQsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL2luc3RhbGxlZFBsdWdpbnMvdGltZWxpb24vc2VydmVyL2xpYi9jbGFzc2VzL2RhdGFzb3VyY2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgbG9hZEZ1bmN0aW9ucyA9IHJlcXVpcmUoJy4uL2xvYWRfZnVuY3Rpb25zLmpzJyk7XG52YXIgZml0RnVuY3Rpb25zICA9IGxvYWRGdW5jdGlvbnMoJ2ZpdF9mdW5jdGlvbnMnKTtcbnZhciBUaW1lbGlvbkZ1bmN0aW9uID0gcmVxdWlyZSgnLi90aW1lbGlvbl9mdW5jdGlvbicpO1xudmFyIG9mZnNldFRpbWUgPSByZXF1aXJlKCcuLi9vZmZzZXRfdGltZScpO1xuXG52YXIgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xudmFyIG1vbWVudCA9IHJlcXVpcmUoJ21vbWVudCcpO1xuXG5cbmZ1bmN0aW9uIG9mZnNldFNlcmllcyhyZXNwb25zZSwgb2Zmc2V0KSB7XG4gIGlmIChvZmZzZXQpIHtcbiAgICByZXNwb25zZSA9IF8ubWFwKHJlc3BvbnNlLCBmdW5jdGlvbiAocG9pbnQpIHtcbiAgICAgIHJldHVybiBbb2Zmc2V0VGltZShwb2ludFswXSwgb2Zmc2V0LCB0cnVlKSwgcG9pbnRbMV1dO1xuICAgIH0pO1xuICB9XG4gIHJldHVybiByZXNwb25zZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjbGFzcyBEYXRhc291cmNlIGV4dGVuZHMgVGltZWxpb25GdW5jdGlvbiB7XG4gIGNvbnN0cnVjdG9yKG5hbWUsIGNvbmZpZykge1xuXG4gICAgLy8gQWRkaXRpb25hbCBhcmd1bWVudHMgdGhhdCBldmVyeSBkYXRhU291cmNlIHRha2VcbiAgICBjb25maWcuYXJncy5wdXNoKHtcbiAgICAgIG5hbWU6ICdvZmZzZXQnLFxuICAgICAgdHlwZXM6IFsnc3RyaW5nJywgJ251bGwnXSxcbiAgICAgIGhlbHA6ICdPZmZzZXQgdGhlIHNlcmllcyByZXRyaWV2YWwgYnkgYSBkYXRlIGV4cHJlc3Npb24uIEVnIC0xTSB0byBtYWtlIGV2ZW50cyBmcm9tIG9uZSBtb250aCBhZ28gYXBwZWFyIGFzIGlmIHRoZXkgYXJlIGhhcHBlbmluZyBub3cnXG4gICAgfSk7XG5cbiAgICBjb25maWcuYXJncy5wdXNoKHtcbiAgICAgIG5hbWU6ICdmaXQnLFxuICAgICAgdHlwZXM6IFsnc3RyaW5nJywgJ251bGwnXSxcbiAgICAgIGhlbHA6ICdBbGdvcml0aG0gdG8gdXNlIGZvciBmaXR0aW5nIHNlcmllcyB0byB0aGUgdGFyZ2V0IHRpbWUgc3BhbiBhbmQgaW50ZXJ2YWwuIEF2YWlsYWJsZTogJyArIF8ua2V5cyhmaXRGdW5jdGlvbnMpLmpvaW4oJywgJylcbiAgICB9KTtcblxuICAgIC8vIFdyYXAgdGhlIG9yaWdpbmFsIGZ1bmN0aW9uIHNvIHdlIGNhbiBtb2RpZnkgaW5wdXRzL291dHB1dHMgd2l0aCBvZmZzZXQgJiBmaXRcbiAgICB2YXIgb3JpZ2luYWxGdW5jdGlvbiA9IGNvbmZpZy5mbjtcbiAgICBjb25maWcuZm4gPSBmdW5jdGlvbiAoYXJncywgdGxDb25maWcpIHtcbiAgICAgIHZhciBjb25maWcgPSBfLmNsb25lKHRsQ29uZmlnKTtcbiAgICAgIGlmIChhcmdzLmJ5TmFtZS5vZmZzZXQpIHtcbiAgICAgICAgY29uZmlnLnRpbWUgPSBfLmNsb25lRGVlcCh0bENvbmZpZy50aW1lKTtcbiAgICAgICAgY29uZmlnLnRpbWUuZnJvbSA9IG9mZnNldFRpbWUoY29uZmlnLnRpbWUuZnJvbSwgYXJncy5ieU5hbWUub2Zmc2V0KTtcbiAgICAgICAgY29uZmlnLnRpbWUudG8gPSBvZmZzZXRUaW1lKGNvbmZpZy50aW1lLnRvLCBhcmdzLmJ5TmFtZS5vZmZzZXQpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG9yaWdpbmFsRnVuY3Rpb24oYXJncywgY29uZmlnKSkudGhlbihmdW5jdGlvbiAoc2VyaWVzTGlzdCkge1xuICAgICAgICBzZXJpZXNMaXN0Lmxpc3QgPSBfLm1hcChzZXJpZXNMaXN0Lmxpc3QsIGZ1bmN0aW9uIChzZXJpZXMpIHtcbiAgICAgICAgICBpZiAoc2VyaWVzLmRhdGEubGVuZ3RoID09PSAwKSB0aHJvdyBuZXcgRXJyb3IobmFtZSArICcoKSByZXR1cm5lZCBubyByZXN1bHRzJyk7XG4gICAgICAgICAgc2VyaWVzLmRhdGEgPSBvZmZzZXRTZXJpZXMoc2VyaWVzLmRhdGEsIGFyZ3MuYnlOYW1lLm9mZnNldCk7XG4gICAgICAgICAgc2VyaWVzLmZpdCA9IGFyZ3MuYnlOYW1lLmZpdCB8fCBzZXJpZXMuZml0IHx8ICduZWFyZXN0JztcbiAgICAgICAgICByZXR1cm4gc2VyaWVzO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHNlcmllc0xpc3Q7XG5cbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBzdXBlcihuYW1lLCBjb25maWcpO1xuXG4gICAgLy8gWW91ICBuZWVkIHRvIGNhbGwgdGltZWxpb25GbiBpZiBjYWxsaW5nIHVwIGEgZGF0YXNvdXJjZSBmcm9tIGFub3RoZXIgZGF0YXNvdXJjZSxcbiAgICAvLyBvdGhlcndpc2UgdGVoIHNlcmllcyB3aWxsIGVuZCB1cCBiZWluZyBvZmZzZXQgdHdpY2UuXG4gICAgdGhpcy50aW1lbGlvbkZuID0gb3JpZ2luYWxGdW5jdGlvbjtcbiAgICB0aGlzLmRhdGFzb3VyY2UgPSB0cnVlO1xuICAgIHRoaXMuY2FjaGVLZXkgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgcmV0dXJuIGl0ZW0udGV4dDtcbiAgICB9O1xuICAgIE9iamVjdC5mcmVlemUodGhpcyk7XG4gIH1cblxufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/lib/classes/datasource.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/lib/classes/datasource.js",
      "sourcesContent": [
        "var loadFunctions = require('../load_functions.js');\nvar fitFunctions  = loadFunctions('fit_functions');\nvar TimelionFunction = require('./timelion_function');\nvar offsetTime = require('../offset_time');\n\nvar _ = require('lodash');\nvar moment = require('moment');\n\n\nfunction offsetSeries(response, offset) {\n  if (offset) {\n    response = _.map(response, function (point) {\n      return [offsetTime(point[0], offset, true), point[1]];\n    });\n  }\n  return response;\n}\n\nmodule.exports = class Datasource extends TimelionFunction {\n  constructor(name, config) {\n\n    // Additional arguments that every dataSource take\n    config.args.push({\n      name: 'offset',\n      types: ['string', 'null'],\n      help: 'Offset the series retrieval by a date expression. Eg -1M to make events from one month ago appear as if they are happening now'\n    });\n\n    config.args.push({\n      name: 'fit',\n      types: ['string', 'null'],\n      help: 'Algorithm to use for fitting series to the target time span and interval. Available: ' + _.keys(fitFunctions).join(', ')\n    });\n\n    // Wrap the original function so we can modify inputs/outputs with offset & fit\n    var originalFunction = config.fn;\n    config.fn = function (args, tlConfig) {\n      var config = _.clone(tlConfig);\n      if (args.byName.offset) {\n        config.time = _.cloneDeep(tlConfig.time);\n        config.time.from = offsetTime(config.time.from, args.byName.offset);\n        config.time.to = offsetTime(config.time.to, args.byName.offset);\n      }\n\n      return Promise.resolve(originalFunction(args, config)).then(function (seriesList) {\n        seriesList.list = _.map(seriesList.list, function (series) {\n          if (series.data.length === 0) throw new Error(name + '() returned no results');\n          series.data = offsetSeries(series.data, args.byName.offset);\n          series.fit = args.byName.fit || series.fit || 'nearest';\n          return series;\n        });\n        return seriesList;\n\n      });\n    };\n\n    super(name, config);\n\n    // You  need to call timelionFn if calling up a datasource from another datasource,\n    // otherwise teh series will end up being offset twice.\n    this.timelionFn = originalFunction;\n    this.datasource = true;\n    this.cacheKey = function (item) {\n      return item.text;\n    };\n    Object.freeze(this);\n  }\n\n};\n"
      ]
    },
    "mtime": 1467119944519
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/lib/offset_time.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar moment = require('moment');\n\n// usually reverse = false on the request, true on the response\nmodule.exports = function offsetTime(milliseconds, offset, reverse) {\n  if (!offset.match(/[-+][0-9]+[mshdwMy]/g)) {\n    throw new Error('Malformed `offset` at ' + offset);\n  }\n  var parts = offset.match(/[-+]|[0-9]+|[mshdwMy]/g);\n\n  var add = parts[0] === '+';\n  add = reverse ? !add : add;\n\n  var mode = add ? 'add' : 'subtract';\n\n  var momentObj = moment(milliseconds)[mode](parts[1], parts[2]);\n  return momentObj.valueOf();\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvbGliL29mZnNldF90aW1lLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBSSxNQUFNLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDOzs7QUFHL0IsTUFBTSxDQUFDLE9BQU8sR0FBRyxTQUFTLFVBQVUsQ0FBQyxZQUFZLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRTtBQUNsRSxNQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxzQkFBc0IsQ0FBQyxFQUFFO0FBQ3pDLFVBQU0sSUFBSSxLQUFLLENBQUUsd0JBQXdCLEdBQUcsTUFBTSxDQUFDLENBQUM7R0FDckQ7QUFDRCxNQUFJLEtBQUssR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLHdCQUF3QixDQUFDLENBQUM7O0FBRW5ELE1BQUksR0FBRyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxHQUFHLENBQUM7QUFDM0IsS0FBRyxHQUFHLE9BQU8sR0FBRyxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUM7O0FBRTNCLE1BQUksSUFBSSxHQUFHLEdBQUcsR0FBRyxLQUFLLEdBQUcsVUFBVSxDQUFDOztBQUVwQyxNQUFJLFNBQVMsR0FBRyxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQy9ELFNBQU8sU0FBUyxDQUFDLE9BQU8sRUFBRSxDQUFDO0NBQzVCLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9pbnN0YWxsZWRQbHVnaW5zL3RpbWVsaW9uL3NlcnZlci9saWIvb2Zmc2V0X3RpbWUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgbW9tZW50ID0gcmVxdWlyZSgnbW9tZW50Jyk7XG5cbi8vIHVzdWFsbHkgcmV2ZXJzZSA9IGZhbHNlIG9uIHRoZSByZXF1ZXN0LCB0cnVlIG9uIHRoZSByZXNwb25zZVxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBvZmZzZXRUaW1lKG1pbGxpc2Vjb25kcywgb2Zmc2V0LCByZXZlcnNlKSB7XG4gIGlmICghb2Zmc2V0Lm1hdGNoKC9bLStdWzAtOV0rW21zaGR3TXldL2cpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yICgnTWFsZm9ybWVkIGBvZmZzZXRgIGF0ICcgKyBvZmZzZXQpO1xuICB9XG4gIHZhciBwYXJ0cyA9IG9mZnNldC5tYXRjaCgvWy0rXXxbMC05XSt8W21zaGR3TXldL2cpO1xuXG4gIHZhciBhZGQgPSBwYXJ0c1swXSA9PT0gJysnO1xuICBhZGQgPSByZXZlcnNlID8gIWFkZCA6IGFkZDtcblxuICB2YXIgbW9kZSA9IGFkZCA/ICdhZGQnIDogJ3N1YnRyYWN0JztcblxuICB2YXIgbW9tZW50T2JqID0gbW9tZW50KG1pbGxpc2Vjb25kcylbbW9kZV0ocGFydHNbMV0sIHBhcnRzWzJdKTtcbiAgcmV0dXJuIG1vbWVudE9iai52YWx1ZU9mKCk7XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/lib/offset_time.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;;;AAG/B,MAAM,CAAC,OAAO,GAAG,SAAS,UAAU,CAAC,YAAY,EAAE,MAAM,EAAE,OAAO,EAAE;AAClE,MAAI,CAAC,MAAM,CAAC,KAAK,CAAC,sBAAsB,CAAC,EAAE;AACzC,UAAM,IAAI,KAAK,CAAE,wBAAwB,GAAG,MAAM,CAAC,CAAC;GACrD;AACD,MAAI,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC,wBAAwB,CAAC,CAAC;;AAEnD,MAAI,GAAG,GAAG,KAAK,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC;AAC3B,KAAG,GAAG,OAAO,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC;;AAE3B,MAAI,IAAI,GAAG,GAAG,GAAG,KAAK,GAAG,UAAU,CAAC;;AAEpC,MAAI,SAAS,GAAG,MAAM,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;AAC/D,SAAO,SAAS,CAAC,OAAO,EAAE,CAAC;CAC5B,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/lib/offset_time.js",
      "sourcesContent": [
        "var moment = require('moment');\n\n// usually reverse = false on the request, true on the response\nmodule.exports = function offsetTime(milliseconds, offset, reverse) {\n  if (!offset.match(/[-+][0-9]+[mshdwMy]/g)) {\n    throw new Error ('Malformed `offset` at ' + offset);\n  }\n  var parts = offset.match(/[-+]|[0-9]+|[mshdwMy]/g);\n\n  var add = parts[0] === '+';\n  add = reverse ? !add : add;\n\n  var mode = add ? 'add' : 'subtract';\n\n  var momentObj = moment(milliseconds)[mode](parts[1], parts[2]);\n  return momentObj.valueOf();\n};\n"
      ]
    },
    "mtime": 1467119944363
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/hide.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar alter = require('../lib/alter.js');\nvar Chainable = require('../lib/classes/chainable');\nmodule.exports = new Chainable('hide', {\n  args: [{\n    name: 'inputSeries',\n    types: ['seriesList']\n  }, {\n    name: 'hide',\n    types: ['boolean', 'null'],\n    help: 'Hide or unhide the series'\n  }],\n  help: 'Hide the series by default',\n  fn: function hideFn(args) {\n    return alter(args, function (eachSeries, hide) {\n      eachSeries._hide = hide == null ? true : hide;\n      return eachSeries;\n    });\n  }\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy9oaWRlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBSSxLQUFLLEdBQUcsT0FBTyxDQUFDLGlCQUFpQixDQUFDLENBQUM7QUFDdkMsSUFBSSxTQUFTLEdBQUcsT0FBTyxDQUFDLDBCQUEwQixDQUFDLENBQUM7QUFDcEQsTUFBTSxDQUFDLE9BQU8sR0FBRyxJQUFJLFNBQVMsQ0FBQyxNQUFNLEVBQUU7QUFDckMsTUFBSSxFQUFFLENBQ0o7QUFDRSxRQUFJLEVBQUUsYUFBYTtBQUNuQixTQUFLLEVBQUUsQ0FBQyxZQUFZLENBQUM7R0FDdEIsRUFDRDtBQUNFLFFBQUksRUFBRSxNQUFNO0FBQ1osU0FBSyxFQUFFLENBQUMsU0FBUyxFQUFFLE1BQU0sQ0FBQztBQUMxQixRQUFJLEVBQUUsMkJBQTJCO0dBQ2xDLENBQ0Y7QUFDRCxNQUFJLEVBQUUsNEJBQTRCO0FBQ2xDLElBQUUsRUFBRSxTQUFTLE1BQU0sQ0FBQyxJQUFJLEVBQUU7QUFDeEIsV0FBTyxLQUFLLENBQUMsSUFBSSxFQUFFLFVBQVUsVUFBVSxFQUFFLElBQUksRUFBRTtBQUM3QyxnQkFBVSxDQUFDLEtBQUssR0FBRyxJQUFJLElBQUksSUFBSSxHQUFHLElBQUksR0FBRyxJQUFJLENBQUM7QUFDOUMsYUFBTyxVQUFVLENBQUM7S0FDbkIsQ0FBQyxDQUFDO0dBQ0o7Q0FDRixDQUFDLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9pbnN0YWxsZWRQbHVnaW5zL3RpbWVsaW9uL3NlcnZlci9zZXJpZXNfZnVuY3Rpb25zL2hpZGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYWx0ZXIgPSByZXF1aXJlKCcuLi9saWIvYWx0ZXIuanMnKTtcbnZhciBDaGFpbmFibGUgPSByZXF1aXJlKCcuLi9saWIvY2xhc3Nlcy9jaGFpbmFibGUnKTtcbm1vZHVsZS5leHBvcnRzID0gbmV3IENoYWluYWJsZSgnaGlkZScsIHtcbiAgYXJnczogW1xuICAgIHtcbiAgICAgIG5hbWU6ICdpbnB1dFNlcmllcycsXG4gICAgICB0eXBlczogWydzZXJpZXNMaXN0J11cbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICdoaWRlJyxcbiAgICAgIHR5cGVzOiBbJ2Jvb2xlYW4nLCAnbnVsbCddLFxuICAgICAgaGVscDogJ0hpZGUgb3IgdW5oaWRlIHRoZSBzZXJpZXMnXG4gICAgfVxuICBdLFxuICBoZWxwOiAnSGlkZSB0aGUgc2VyaWVzIGJ5IGRlZmF1bHQnLFxuICBmbjogZnVuY3Rpb24gaGlkZUZuKGFyZ3MpIHtcbiAgICByZXR1cm4gYWx0ZXIoYXJncywgZnVuY3Rpb24gKGVhY2hTZXJpZXMsIGhpZGUpIHtcbiAgICAgIGVhY2hTZXJpZXMuX2hpZGUgPSBoaWRlID09IG51bGwgPyB0cnVlIDogaGlkZTtcbiAgICAgIHJldHVybiBlYWNoU2VyaWVzO1xuICAgIH0pO1xuICB9XG59KTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/hide.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,KAAK,GAAG,OAAO,CAAC,iBAAiB,CAAC,CAAC;AACvC,IAAI,SAAS,GAAG,OAAO,CAAC,0BAA0B,CAAC,CAAC;AACpD,MAAM,CAAC,OAAO,GAAG,IAAI,SAAS,CAAC,MAAM,EAAE;AACrC,MAAI,EAAE,CACJ;AACE,QAAI,EAAE,aAAa;AACnB,SAAK,EAAE,CAAC,YAAY,CAAC;GACtB,EACD;AACE,QAAI,EAAE,MAAM;AACZ,SAAK,EAAE,CAAC,SAAS,EAAE,MAAM,CAAC;AAC1B,QAAI,EAAE,2BAA2B;GAClC,CACF;AACD,MAAI,EAAE,4BAA4B;AAClC,IAAE,EAAE,SAAS,MAAM,CAAC,IAAI,EAAE;AACxB,WAAO,KAAK,CAAC,IAAI,EAAE,UAAU,UAAU,EAAE,IAAI,EAAE;AAC7C,gBAAU,CAAC,KAAK,GAAG,IAAI,IAAI,IAAI,GAAG,IAAI,GAAG,IAAI,CAAC;AAC9C,aAAO,UAAU,CAAC;KACnB,CAAC,CAAC;GACJ;CACF,CAAC,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/hide.js",
      "sourcesContent": [
        "var alter = require('../lib/alter.js');\nvar Chainable = require('../lib/classes/chainable');\nmodule.exports = new Chainable('hide', {\n  args: [\n    {\n      name: 'inputSeries',\n      types: ['seriesList']\n    },\n    {\n      name: 'hide',\n      types: ['boolean', 'null'],\n      help: 'Hide or unhide the series'\n    }\n  ],\n  help: 'Hide the series by default',\n  fn: function hideFn(args) {\n    return alter(args, function (eachSeries, hide) {\n      eachSeries._hide = hide == null ? true : hide;\n      return eachSeries;\n    });\n  }\n});\n"
      ]
    },
    "mtime": 1467119944363
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/label.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar alter = require('../lib/alter.js');\nvar util = require('util');\n\nvar Chainable = require('../lib/classes/chainable');\nmodule.exports = new Chainable('label', {\n  args: [{\n    name: 'inputSeries',\n    types: ['seriesList']\n  }, {\n    name: 'label',\n    types: ['string'],\n    help: 'Legend value for series. You can use $1, $2, etc, in the string to match up with the regex capture groups'\n  }, {\n    name: 'regex',\n    types: ['string', 'null'],\n    help: 'A regex with capture group support'\n  }],\n  help: 'Change the label of the series. Use %s reference the existing label',\n  fn: function labelFn(args) {\n    var config = args.byName;\n    return alter(args, function (eachSeries) {\n      if (config.regex) {\n        eachSeries.label = eachSeries.label.replace(new RegExp(config.regex), config.label);\n      } else {\n        eachSeries.label = config.label;\n      }\n\n      return eachSeries;\n    });\n  }\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy9sYWJlbC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQUksS0FBSyxHQUFHLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0FBQ3ZDLElBQUksSUFBSSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQzs7QUFFM0IsSUFBSSxTQUFTLEdBQUcsT0FBTyxDQUFDLDBCQUEwQixDQUFDLENBQUM7QUFDcEQsTUFBTSxDQUFDLE9BQU8sR0FBRyxJQUFJLFNBQVMsQ0FBQyxPQUFPLEVBQUU7QUFDdEMsTUFBSSxFQUFFLENBQ0o7QUFDRSxRQUFJLEVBQUUsYUFBYTtBQUNuQixTQUFLLEVBQUUsQ0FBQyxZQUFZLENBQUM7R0FDdEIsRUFDRDtBQUNFLFFBQUksRUFBRSxPQUFPO0FBQ2IsU0FBSyxFQUFFLENBQUMsUUFBUSxDQUFDO0FBQ2pCLFFBQUksRUFBRSwyR0FBMkc7R0FDbEgsRUFDRDtBQUNFLFFBQUksRUFBRSxPQUFPO0FBQ2IsU0FBSyxFQUFFLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQztBQUN6QixRQUFJLEVBQUUsb0NBQW9DO0dBQzNDLENBQ0Y7QUFDRCxNQUFJLEVBQUUscUVBQXFFO0FBQzNFLElBQUUsRUFBRyxTQUFTLE9BQU8sQ0FBQyxJQUFJLEVBQUU7QUFDMUIsUUFBSSxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQztBQUN6QixXQUFPLEtBQUssQ0FBQyxJQUFJLEVBQUUsVUFBVSxVQUFVLEVBQUU7QUFDdkMsVUFBSSxNQUFNLENBQUMsS0FBSyxFQUFFO0FBQ2hCLGtCQUFVLENBQUMsS0FBSyxHQUFHLFVBQVUsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsRUFBRSxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7T0FDckYsTUFBTTtBQUNMLGtCQUFVLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUM7T0FDakM7O0FBRUQsYUFBTyxVQUFVLENBQUM7S0FDbkIsQ0FBQyxDQUFDO0dBQ0o7Q0FDRixDQUFDLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9pbnN0YWxsZWRQbHVnaW5zL3RpbWVsaW9uL3NlcnZlci9zZXJpZXNfZnVuY3Rpb25zL2xhYmVsLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGFsdGVyID0gcmVxdWlyZSgnLi4vbGliL2FsdGVyLmpzJyk7XG52YXIgdXRpbCA9IHJlcXVpcmUoJ3V0aWwnKTtcblxudmFyIENoYWluYWJsZSA9IHJlcXVpcmUoJy4uL2xpYi9jbGFzc2VzL2NoYWluYWJsZScpO1xubW9kdWxlLmV4cG9ydHMgPSBuZXcgQ2hhaW5hYmxlKCdsYWJlbCcsIHtcbiAgYXJnczogW1xuICAgIHtcbiAgICAgIG5hbWU6ICdpbnB1dFNlcmllcycsXG4gICAgICB0eXBlczogWydzZXJpZXNMaXN0J11cbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICdsYWJlbCcsXG4gICAgICB0eXBlczogWydzdHJpbmcnXSxcbiAgICAgIGhlbHA6ICdMZWdlbmQgdmFsdWUgZm9yIHNlcmllcy4gWW91IGNhbiB1c2UgJDEsICQyLCBldGMsIGluIHRoZSBzdHJpbmcgdG8gbWF0Y2ggdXAgd2l0aCB0aGUgcmVnZXggY2FwdHVyZSBncm91cHMnXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAncmVnZXgnLFxuICAgICAgdHlwZXM6IFsnc3RyaW5nJywgJ251bGwnXSxcbiAgICAgIGhlbHA6ICdBIHJlZ2V4IHdpdGggY2FwdHVyZSBncm91cCBzdXBwb3J0J1xuICAgIH1cbiAgXSxcbiAgaGVscDogJ0NoYW5nZSB0aGUgbGFiZWwgb2YgdGhlIHNlcmllcy4gVXNlICVzIHJlZmVyZW5jZSB0aGUgZXhpc3RpbmcgbGFiZWwnLFxuICBmbjogIGZ1bmN0aW9uIGxhYmVsRm4oYXJncykge1xuICAgIHZhciBjb25maWcgPSBhcmdzLmJ5TmFtZTtcbiAgICByZXR1cm4gYWx0ZXIoYXJncywgZnVuY3Rpb24gKGVhY2hTZXJpZXMpIHtcbiAgICAgIGlmIChjb25maWcucmVnZXgpIHtcbiAgICAgICAgZWFjaFNlcmllcy5sYWJlbCA9IGVhY2hTZXJpZXMubGFiZWwucmVwbGFjZShuZXcgUmVnRXhwKGNvbmZpZy5yZWdleCksIGNvbmZpZy5sYWJlbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlYWNoU2VyaWVzLmxhYmVsID0gY29uZmlnLmxhYmVsO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZWFjaFNlcmllcztcbiAgICB9KTtcbiAgfVxufSk7XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/label.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,KAAK,GAAG,OAAO,CAAC,iBAAiB,CAAC,CAAC;AACvC,IAAI,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;;AAE3B,IAAI,SAAS,GAAG,OAAO,CAAC,0BAA0B,CAAC,CAAC;AACpD,MAAM,CAAC,OAAO,GAAG,IAAI,SAAS,CAAC,OAAO,EAAE;AACtC,MAAI,EAAE,CACJ;AACE,QAAI,EAAE,aAAa;AACnB,SAAK,EAAE,CAAC,YAAY,CAAC;GACtB,EACD;AACE,QAAI,EAAE,OAAO;AACb,SAAK,EAAE,CAAC,QAAQ,CAAC;AACjB,QAAI,EAAE,2GAA2G;GAClH,EACD;AACE,QAAI,EAAE,OAAO;AACb,SAAK,EAAE,CAAC,QAAQ,EAAE,MAAM,CAAC;AACzB,QAAI,EAAE,oCAAoC;GAC3C,CACF;AACD,MAAI,EAAE,qEAAqE;AAC3E,IAAE,EAAG,SAAS,OAAO,CAAC,IAAI,EAAE;AAC1B,QAAI,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;AACzB,WAAO,KAAK,CAAC,IAAI,EAAE,UAAU,UAAU,EAAE;AACvC,UAAI,MAAM,CAAC,KAAK,EAAE;AAChB,kBAAU,CAAC,KAAK,GAAG,UAAU,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC;OACrF,MAAM;AACL,kBAAU,CAAC,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC;OACjC;;AAED,aAAO,UAAU,CAAC;KACnB,CAAC,CAAC;GACJ;CACF,CAAC,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/label.js",
      "sourcesContent": [
        "var alter = require('../lib/alter.js');\nvar util = require('util');\n\nvar Chainable = require('../lib/classes/chainable');\nmodule.exports = new Chainable('label', {\n  args: [\n    {\n      name: 'inputSeries',\n      types: ['seriesList']\n    },\n    {\n      name: 'label',\n      types: ['string'],\n      help: 'Legend value for series. You can use $1, $2, etc, in the string to match up with the regex capture groups'\n    },\n    {\n      name: 'regex',\n      types: ['string', 'null'],\n      help: 'A regex with capture group support'\n    }\n  ],\n  help: 'Change the label of the series. Use %s reference the existing label',\n  fn:  function labelFn(args) {\n    var config = args.byName;\n    return alter(args, function (eachSeries) {\n      if (config.regex) {\n        eachSeries.label = eachSeries.label.replace(new RegExp(config.regex), config.label);\n      } else {\n        eachSeries.label = config.label;\n      }\n\n      return eachSeries;\n    });\n  }\n});\n"
      ]
    },
    "mtime": 1467119944363
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/legend.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar alter = require('../lib/alter.js');\n\nvar Chainable = require('../lib/classes/chainable');\nmodule.exports = new Chainable('legend', {\n  args: [{\n    name: 'inputSeries',\n    types: ['seriesList']\n  }, {\n    name: 'position',\n    types: ['string', 'boolean', 'null'],\n    help: 'Corner to place the legend in: nw, ne, se, or sw. You can also pass false to disable the legend'\n  }, {\n    name: 'columns',\n    types: ['number', 'null'],\n    help: 'Number of columns to divide the legend into'\n  }],\n  help: 'Set the position and style of the legend on the plot',\n  fn: function legendFn(args) {\n    return alter(args, function (eachSeries, position, columns) {\n      eachSeries._global = eachSeries._global || {};\n      eachSeries._global.legend = eachSeries._global.legend || {};\n      eachSeries._global.legend.noColumns = columns;\n\n      if (position === false) {\n        eachSeries._global.legend.show = false;\n      } else {\n        eachSeries._global.legend.position = position;\n      }\n\n      return eachSeries;\n    });\n  }\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy9sZWdlbmQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFJLEtBQUssR0FBRyxPQUFPLENBQUMsaUJBQWlCLENBQUMsQ0FBQzs7QUFFdkMsSUFBSSxTQUFTLEdBQUcsT0FBTyxDQUFDLDBCQUEwQixDQUFDLENBQUM7QUFDcEQsTUFBTSxDQUFDLE9BQU8sR0FBRyxJQUFJLFNBQVMsQ0FBQyxRQUFRLEVBQUU7QUFDdkMsTUFBSSxFQUFFLENBQ0o7QUFDRSxRQUFJLEVBQUUsYUFBYTtBQUNuQixTQUFLLEVBQUUsQ0FBQyxZQUFZLENBQUM7R0FDdEIsRUFDRDtBQUNFLFFBQUksRUFBRSxVQUFVO0FBQ2hCLFNBQUssRUFBRSxDQUFDLFFBQVEsRUFBRSxTQUFTLEVBQUUsTUFBTSxDQUFDO0FBQ3BDLFFBQUksRUFBRSxpR0FBaUc7R0FDeEcsRUFDRDtBQUNFLFFBQUksRUFBRSxTQUFTO0FBQ2YsU0FBSyxFQUFFLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQztBQUN6QixRQUFJLEVBQUUsNkNBQTZDO0dBQ3BELENBQ0Y7QUFDRCxNQUFJLEVBQUUsc0RBQXNEO0FBQzVELElBQUUsRUFBRSxTQUFTLFFBQVEsQ0FBQyxJQUFJLEVBQUU7QUFDMUIsV0FBTyxLQUFLLENBQUMsSUFBSSxFQUFFLFVBQVUsVUFBVSxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUU7QUFDMUQsZ0JBQVUsQ0FBQyxPQUFPLEdBQUcsVUFBVSxDQUFDLE9BQU8sSUFBSSxFQUFFLENBQUM7QUFDOUMsZ0JBQVUsQ0FBQyxPQUFPLENBQUMsTUFBTSxHQUFHLFVBQVUsQ0FBQyxPQUFPLENBQUMsTUFBTSxJQUFJLEVBQUUsQ0FBQztBQUM1RCxnQkFBVSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsU0FBUyxHQUFHLE9BQU8sQ0FBQzs7QUFFOUMsVUFBSSxRQUFRLEtBQUssS0FBSyxFQUFFO0FBQ3RCLGtCQUFVLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEdBQUcsS0FBSyxDQUFDO09BQ3hDLE1BQU07QUFDTCxrQkFBVSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQztPQUMvQzs7QUFFRCxhQUFPLFVBQVUsQ0FBQztLQUNuQixDQUFDLENBQUM7R0FDSjtDQUNGLENBQUMsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL2luc3RhbGxlZFBsdWdpbnMvdGltZWxpb24vc2VydmVyL3Nlcmllc19mdW5jdGlvbnMvbGVnZW5kLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGFsdGVyID0gcmVxdWlyZSgnLi4vbGliL2FsdGVyLmpzJyk7XG5cbnZhciBDaGFpbmFibGUgPSByZXF1aXJlKCcuLi9saWIvY2xhc3Nlcy9jaGFpbmFibGUnKTtcbm1vZHVsZS5leHBvcnRzID0gbmV3IENoYWluYWJsZSgnbGVnZW5kJywge1xuICBhcmdzOiBbXG4gICAge1xuICAgICAgbmFtZTogJ2lucHV0U2VyaWVzJyxcbiAgICAgIHR5cGVzOiBbJ3Nlcmllc0xpc3QnXVxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ3Bvc2l0aW9uJyxcbiAgICAgIHR5cGVzOiBbJ3N0cmluZycsICdib29sZWFuJywgJ251bGwnXSxcbiAgICAgIGhlbHA6ICdDb3JuZXIgdG8gcGxhY2UgdGhlIGxlZ2VuZCBpbjogbncsIG5lLCBzZSwgb3Igc3cuIFlvdSBjYW4gYWxzbyBwYXNzIGZhbHNlIHRvIGRpc2FibGUgdGhlIGxlZ2VuZCdcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICdjb2x1bW5zJyxcbiAgICAgIHR5cGVzOiBbJ251bWJlcicsICdudWxsJ10sXG4gICAgICBoZWxwOiAnTnVtYmVyIG9mIGNvbHVtbnMgdG8gZGl2aWRlIHRoZSBsZWdlbmQgaW50bydcbiAgICB9LFxuICBdLFxuICBoZWxwOiAnU2V0IHRoZSBwb3NpdGlvbiBhbmQgc3R5bGUgb2YgdGhlIGxlZ2VuZCBvbiB0aGUgcGxvdCcsXG4gIGZuOiBmdW5jdGlvbiBsZWdlbmRGbihhcmdzKSB7XG4gICAgcmV0dXJuIGFsdGVyKGFyZ3MsIGZ1bmN0aW9uIChlYWNoU2VyaWVzLCBwb3NpdGlvbiwgY29sdW1ucykge1xuICAgICAgZWFjaFNlcmllcy5fZ2xvYmFsID0gZWFjaFNlcmllcy5fZ2xvYmFsIHx8IHt9O1xuICAgICAgZWFjaFNlcmllcy5fZ2xvYmFsLmxlZ2VuZCA9IGVhY2hTZXJpZXMuX2dsb2JhbC5sZWdlbmQgfHwge307XG4gICAgICBlYWNoU2VyaWVzLl9nbG9iYWwubGVnZW5kLm5vQ29sdW1ucyA9IGNvbHVtbnM7XG5cbiAgICAgIGlmIChwb3NpdGlvbiA9PT0gZmFsc2UpIHtcbiAgICAgICAgZWFjaFNlcmllcy5fZ2xvYmFsLmxlZ2VuZC5zaG93ID0gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlYWNoU2VyaWVzLl9nbG9iYWwubGVnZW5kLnBvc2l0aW9uID0gcG9zaXRpb247XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBlYWNoU2VyaWVzO1xuICAgIH0pO1xuICB9XG59KTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/legend.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,KAAK,GAAG,OAAO,CAAC,iBAAiB,CAAC,CAAC;;AAEvC,IAAI,SAAS,GAAG,OAAO,CAAC,0BAA0B,CAAC,CAAC;AACpD,MAAM,CAAC,OAAO,GAAG,IAAI,SAAS,CAAC,QAAQ,EAAE;AACvC,MAAI,EAAE,CACJ;AACE,QAAI,EAAE,aAAa;AACnB,SAAK,EAAE,CAAC,YAAY,CAAC;GACtB,EACD;AACE,QAAI,EAAE,UAAU;AAChB,SAAK,EAAE,CAAC,QAAQ,EAAE,SAAS,EAAE,MAAM,CAAC;AACpC,QAAI,EAAE,iGAAiG;GACxG,EACD;AACE,QAAI,EAAE,SAAS;AACf,SAAK,EAAE,CAAC,QAAQ,EAAE,MAAM,CAAC;AACzB,QAAI,EAAE,6CAA6C;GACpD,CACF;AACD,MAAI,EAAE,sDAAsD;AAC5D,IAAE,EAAE,SAAS,QAAQ,CAAC,IAAI,EAAE;AAC1B,WAAO,KAAK,CAAC,IAAI,EAAE,UAAU,UAAU,EAAE,QAAQ,EAAE,OAAO,EAAE;AAC1D,gBAAU,CAAC,OAAO,GAAG,UAAU,CAAC,OAAO,IAAI,EAAE,CAAC;AAC9C,gBAAU,CAAC,OAAO,CAAC,MAAM,GAAG,UAAU,CAAC,OAAO,CAAC,MAAM,IAAI,EAAE,CAAC;AAC5D,gBAAU,CAAC,OAAO,CAAC,MAAM,CAAC,SAAS,GAAG,OAAO,CAAC;;AAE9C,UAAI,QAAQ,KAAK,KAAK,EAAE;AACtB,kBAAU,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,GAAG,KAAK,CAAC;OACxC,MAAM;AACL,kBAAU,CAAC,OAAO,CAAC,MAAM,CAAC,QAAQ,GAAG,QAAQ,CAAC;OAC/C;;AAED,aAAO,UAAU,CAAC;KACnB,CAAC,CAAC;GACJ;CACF,CAAC,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/legend.js",
      "sourcesContent": [
        "var alter = require('../lib/alter.js');\n\nvar Chainable = require('../lib/classes/chainable');\nmodule.exports = new Chainable('legend', {\n  args: [\n    {\n      name: 'inputSeries',\n      types: ['seriesList']\n    },\n    {\n      name: 'position',\n      types: ['string', 'boolean', 'null'],\n      help: 'Corner to place the legend in: nw, ne, se, or sw. You can also pass false to disable the legend'\n    },\n    {\n      name: 'columns',\n      types: ['number', 'null'],\n      help: 'Number of columns to divide the legend into'\n    },\n  ],\n  help: 'Set the position and style of the legend on the plot',\n  fn: function legendFn(args) {\n    return alter(args, function (eachSeries, position, columns) {\n      eachSeries._global = eachSeries._global || {};\n      eachSeries._global.legend = eachSeries._global.legend || {};\n      eachSeries._global.legend.noColumns = columns;\n\n      if (position === false) {\n        eachSeries._global.legend.show = false;\n      } else {\n        eachSeries._global.legend.position = position;\n      }\n\n      return eachSeries;\n    });\n  }\n});\n"
      ]
    },
    "mtime": 1467119944363
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/lines.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar alter = require('../lib/alter.js');\n\nvar Chainable = require('../lib/classes/chainable');\nmodule.exports = new Chainable('lines', {\n  args: [{\n    name: 'inputSeries',\n    types: ['seriesList']\n  }, {\n    name: 'width',\n    types: ['number', 'null'],\n    help: 'Line thickness'\n  }, {\n    name: 'fill',\n    types: ['number', 'null'],\n    help: 'Number between 0 and 10. Use for making area charts'\n  }, {\n    name: 'stack',\n    types: ['boolean', 'null'],\n    help: 'Stack lines, often misleading. At least use some fill if you use this.'\n  }, {\n    name: 'show',\n    types: ['number', 'boolean', 'null'],\n    help: 'Show or hide lines'\n  }, {\n    name: 'steps',\n    types: ['number', 'boolean', 'null'],\n    help: 'Show line as step, eg, do not interpolate between points'\n  }],\n  help: 'Show the seriesList as lines',\n  fn: function linesFn(args) {\n    return alter(args, function (eachSeries, width, fill, stack, show, steps) {\n      eachSeries.lines = eachSeries.lines || {};\n\n      // Defaults\n      if (eachSeries.lines.lineWidth == null) eachSeries.lines.lineWidth = 3;\n\n      if (width != null) eachSeries.lines.lineWidth = width;\n      if (fill != null) eachSeries.lines.fill = fill / 10;\n      if (stack != null) eachSeries.stack = stack;\n      if (show != null) eachSeries.lines.show = show;\n      if (steps != null) eachSeries.lines.steps = steps;\n\n      return eachSeries;\n    });\n  }\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy9saW5lcy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQUksS0FBSyxHQUFHLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDOztBQUV2QyxJQUFJLFNBQVMsR0FBRyxPQUFPLENBQUMsMEJBQTBCLENBQUMsQ0FBQztBQUNwRCxNQUFNLENBQUMsT0FBTyxHQUFHLElBQUksU0FBUyxDQUFDLE9BQU8sRUFBRTtBQUN0QyxNQUFJLEVBQUUsQ0FDSjtBQUNFLFFBQUksRUFBRSxhQUFhO0FBQ25CLFNBQUssRUFBRSxDQUFDLFlBQVksQ0FBQztHQUN0QixFQUNEO0FBQ0UsUUFBSSxFQUFFLE9BQU87QUFDYixTQUFLLEVBQUUsQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDO0FBQ3pCLFFBQUksRUFBRSxnQkFBZ0I7R0FDdkIsRUFDRDtBQUNFLFFBQUksRUFBRSxNQUFNO0FBQ1osU0FBSyxFQUFFLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQztBQUN6QixRQUFJLEVBQUUscURBQXFEO0dBQzVELEVBQ0Q7QUFDRSxRQUFJLEVBQUUsT0FBTztBQUNiLFNBQUssRUFBRSxDQUFDLFNBQVMsRUFBRSxNQUFNLENBQUM7QUFDMUIsUUFBSSxFQUFFLHdFQUF3RTtHQUMvRSxFQUNEO0FBQ0UsUUFBSSxFQUFFLE1BQU07QUFDWixTQUFLLEVBQUUsQ0FBQyxRQUFRLEVBQUUsU0FBUyxFQUFFLE1BQU0sQ0FBQztBQUNwQyxRQUFJLEVBQUUsb0JBQW9CO0dBQzNCLEVBQ0Q7QUFDRSxRQUFJLEVBQUUsT0FBTztBQUNiLFNBQUssRUFBRSxDQUFDLFFBQVEsRUFBRSxTQUFTLEVBQUUsTUFBTSxDQUFDO0FBQ3BDLFFBQUksRUFBRSwwREFBMEQ7R0FDakUsQ0FDRjtBQUNELE1BQUksRUFBRSw4QkFBOEI7QUFDcEMsSUFBRSxFQUFFLFNBQVMsT0FBTyxDQUFDLElBQUksRUFBRTtBQUN6QixXQUFPLEtBQUssQ0FBQyxJQUFJLEVBQUUsVUFBVSxVQUFVLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRTtBQUN4RSxnQkFBVSxDQUFDLEtBQUssR0FBRyxVQUFVLENBQUMsS0FBSyxJQUFJLEVBQUUsQ0FBQzs7O0FBRzFDLFVBQUksVUFBVSxDQUFDLEtBQUssQ0FBQyxTQUFTLElBQUksSUFBSSxFQUFFLFVBQVUsQ0FBQyxLQUFLLENBQUMsU0FBUyxHQUFHLENBQUMsQ0FBQzs7QUFFdkUsVUFBSSxLQUFLLElBQUksSUFBSSxFQUFFLFVBQVUsQ0FBQyxLQUFLLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQztBQUN0RCxVQUFJLElBQUksSUFBSSxJQUFJLEVBQUcsVUFBVSxDQUFDLEtBQUssQ0FBQyxJQUFJLEdBQUcsSUFBSSxHQUFHLEVBQUUsQ0FBQztBQUNyRCxVQUFJLEtBQUssSUFBSSxJQUFJLEVBQUUsVUFBVSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7QUFDNUMsVUFBSSxJQUFJLElBQUksSUFBSSxFQUFHLFVBQVUsQ0FBQyxLQUFLLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztBQUNoRCxVQUFJLEtBQUssSUFBSSxJQUFJLEVBQUUsVUFBVSxDQUFDLEtBQUssQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDOztBQUVsRCxhQUFPLFVBQVUsQ0FBQztLQUNuQixDQUFDLENBQUM7R0FDSjtDQUNGLENBQUMsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL2luc3RhbGxlZFBsdWdpbnMvdGltZWxpb24vc2VydmVyL3Nlcmllc19mdW5jdGlvbnMvbGluZXMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYWx0ZXIgPSByZXF1aXJlKCcuLi9saWIvYWx0ZXIuanMnKTtcblxudmFyIENoYWluYWJsZSA9IHJlcXVpcmUoJy4uL2xpYi9jbGFzc2VzL2NoYWluYWJsZScpO1xubW9kdWxlLmV4cG9ydHMgPSBuZXcgQ2hhaW5hYmxlKCdsaW5lcycsIHtcbiAgYXJnczogW1xuICAgIHtcbiAgICAgIG5hbWU6ICdpbnB1dFNlcmllcycsXG4gICAgICB0eXBlczogWydzZXJpZXNMaXN0J11cbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICd3aWR0aCcsXG4gICAgICB0eXBlczogWydudW1iZXInLCAnbnVsbCddLFxuICAgICAgaGVscDogJ0xpbmUgdGhpY2tuZXNzJ1xuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ2ZpbGwnLFxuICAgICAgdHlwZXM6IFsnbnVtYmVyJywgJ251bGwnXSxcbiAgICAgIGhlbHA6ICdOdW1iZXIgYmV0d2VlbiAwIGFuZCAxMC4gVXNlIGZvciBtYWtpbmcgYXJlYSBjaGFydHMnXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAnc3RhY2snLFxuICAgICAgdHlwZXM6IFsnYm9vbGVhbicsICdudWxsJ10sXG4gICAgICBoZWxwOiAnU3RhY2sgbGluZXMsIG9mdGVuIG1pc2xlYWRpbmcuIEF0IGxlYXN0IHVzZSBzb21lIGZpbGwgaWYgeW91IHVzZSB0aGlzLidcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICdzaG93JyxcbiAgICAgIHR5cGVzOiBbJ251bWJlcicsICdib29sZWFuJywgJ251bGwnXSxcbiAgICAgIGhlbHA6ICdTaG93IG9yIGhpZGUgbGluZXMnXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAnc3RlcHMnLFxuICAgICAgdHlwZXM6IFsnbnVtYmVyJywgJ2Jvb2xlYW4nLCAnbnVsbCddLFxuICAgICAgaGVscDogJ1Nob3cgbGluZSBhcyBzdGVwLCBlZywgZG8gbm90IGludGVycG9sYXRlIGJldHdlZW4gcG9pbnRzJ1xuICAgIH1cbiAgXSxcbiAgaGVscDogJ1Nob3cgdGhlIHNlcmllc0xpc3QgYXMgbGluZXMnLFxuICBmbjogZnVuY3Rpb24gbGluZXNGbihhcmdzKSB7XG4gICAgcmV0dXJuIGFsdGVyKGFyZ3MsIGZ1bmN0aW9uIChlYWNoU2VyaWVzLCB3aWR0aCwgZmlsbCwgc3RhY2ssIHNob3csIHN0ZXBzKSB7XG4gICAgICBlYWNoU2VyaWVzLmxpbmVzID0gZWFjaFNlcmllcy5saW5lcyB8fCB7fTtcblxuICAgICAgLy8gRGVmYXVsdHNcbiAgICAgIGlmIChlYWNoU2VyaWVzLmxpbmVzLmxpbmVXaWR0aCA9PSBudWxsKSBlYWNoU2VyaWVzLmxpbmVzLmxpbmVXaWR0aCA9IDM7XG5cbiAgICAgIGlmICh3aWR0aCAhPSBudWxsKSBlYWNoU2VyaWVzLmxpbmVzLmxpbmVXaWR0aCA9IHdpZHRoO1xuICAgICAgaWYgKGZpbGwgIT0gbnVsbCkgIGVhY2hTZXJpZXMubGluZXMuZmlsbCA9IGZpbGwgLyAxMDtcbiAgICAgIGlmIChzdGFjayAhPSBudWxsKSBlYWNoU2VyaWVzLnN0YWNrID0gc3RhY2s7XG4gICAgICBpZiAoc2hvdyAhPSBudWxsKSAgZWFjaFNlcmllcy5saW5lcy5zaG93ID0gc2hvdztcbiAgICAgIGlmIChzdGVwcyAhPSBudWxsKSBlYWNoU2VyaWVzLmxpbmVzLnN0ZXBzID0gc3RlcHM7XG5cbiAgICAgIHJldHVybiBlYWNoU2VyaWVzO1xuICAgIH0pO1xuICB9XG59KTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/lines.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,KAAK,GAAG,OAAO,CAAC,iBAAiB,CAAC,CAAC;;AAEvC,IAAI,SAAS,GAAG,OAAO,CAAC,0BAA0B,CAAC,CAAC;AACpD,MAAM,CAAC,OAAO,GAAG,IAAI,SAAS,CAAC,OAAO,EAAE;AACtC,MAAI,EAAE,CACJ;AACE,QAAI,EAAE,aAAa;AACnB,SAAK,EAAE,CAAC,YAAY,CAAC;GACtB,EACD;AACE,QAAI,EAAE,OAAO;AACb,SAAK,EAAE,CAAC,QAAQ,EAAE,MAAM,CAAC;AACzB,QAAI,EAAE,gBAAgB;GACvB,EACD;AACE,QAAI,EAAE,MAAM;AACZ,SAAK,EAAE,CAAC,QAAQ,EAAE,MAAM,CAAC;AACzB,QAAI,EAAE,qDAAqD;GAC5D,EACD;AACE,QAAI,EAAE,OAAO;AACb,SAAK,EAAE,CAAC,SAAS,EAAE,MAAM,CAAC;AAC1B,QAAI,EAAE,wEAAwE;GAC/E,EACD;AACE,QAAI,EAAE,MAAM;AACZ,SAAK,EAAE,CAAC,QAAQ,EAAE,SAAS,EAAE,MAAM,CAAC;AACpC,QAAI,EAAE,oBAAoB;GAC3B,EACD;AACE,QAAI,EAAE,OAAO;AACb,SAAK,EAAE,CAAC,QAAQ,EAAE,SAAS,EAAE,MAAM,CAAC;AACpC,QAAI,EAAE,0DAA0D;GACjE,CACF;AACD,MAAI,EAAE,8BAA8B;AACpC,IAAE,EAAE,SAAS,OAAO,CAAC,IAAI,EAAE;AACzB,WAAO,KAAK,CAAC,IAAI,EAAE,UAAU,UAAU,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE;AACxE,gBAAU,CAAC,KAAK,GAAG,UAAU,CAAC,KAAK,IAAI,EAAE,CAAC;;;AAG1C,UAAI,UAAU,CAAC,KAAK,CAAC,SAAS,IAAI,IAAI,EAAE,UAAU,CAAC,KAAK,CAAC,SAAS,GAAG,CAAC,CAAC;;AAEvE,UAAI,KAAK,IAAI,IAAI,EAAE,UAAU,CAAC,KAAK,CAAC,SAAS,GAAG,KAAK,CAAC;AACtD,UAAI,IAAI,IAAI,IAAI,EAAG,UAAU,CAAC,KAAK,CAAC,IAAI,GAAG,IAAI,GAAG,EAAE,CAAC;AACrD,UAAI,KAAK,IAAI,IAAI,EAAE,UAAU,CAAC,KAAK,GAAG,KAAK,CAAC;AAC5C,UAAI,IAAI,IAAI,IAAI,EAAG,UAAU,CAAC,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC;AAChD,UAAI,KAAK,IAAI,IAAI,EAAE,UAAU,CAAC,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC;;AAElD,aAAO,UAAU,CAAC;KACnB,CAAC,CAAC;GACJ;CACF,CAAC,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/lines.js",
      "sourcesContent": [
        "var alter = require('../lib/alter.js');\n\nvar Chainable = require('../lib/classes/chainable');\nmodule.exports = new Chainable('lines', {\n  args: [\n    {\n      name: 'inputSeries',\n      types: ['seriesList']\n    },\n    {\n      name: 'width',\n      types: ['number', 'null'],\n      help: 'Line thickness'\n    },\n    {\n      name: 'fill',\n      types: ['number', 'null'],\n      help: 'Number between 0 and 10. Use for making area charts'\n    },\n    {\n      name: 'stack',\n      types: ['boolean', 'null'],\n      help: 'Stack lines, often misleading. At least use some fill if you use this.'\n    },\n    {\n      name: 'show',\n      types: ['number', 'boolean', 'null'],\n      help: 'Show or hide lines'\n    },\n    {\n      name: 'steps',\n      types: ['number', 'boolean', 'null'],\n      help: 'Show line as step, eg, do not interpolate between points'\n    }\n  ],\n  help: 'Show the seriesList as lines',\n  fn: function linesFn(args) {\n    return alter(args, function (eachSeries, width, fill, stack, show, steps) {\n      eachSeries.lines = eachSeries.lines || {};\n\n      // Defaults\n      if (eachSeries.lines.lineWidth == null) eachSeries.lines.lineWidth = 3;\n\n      if (width != null) eachSeries.lines.lineWidth = width;\n      if (fill != null)  eachSeries.lines.fill = fill / 10;\n      if (stack != null) eachSeries.stack = stack;\n      if (show != null)  eachSeries.lines.show = show;\n      if (steps != null) eachSeries.lines.steps = steps;\n\n      return eachSeries;\n    });\n  }\n});\n"
      ]
    },
    "mtime": 1467119944363
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/max.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar reduce = require('../lib/reduce.js');\n\nvar Chainable = require('../lib/classes/chainable');\nmodule.exports = new Chainable('max', {\n  args: [{\n    name: 'inputSeries',\n    types: ['seriesList']\n  }, {\n    name: 'value',\n    types: ['seriesList', 'number'],\n    help: 'Sets the point to whichever is higher, the existing value, or the one passed.' + ' If passing a seriesList it must contain exactly 1 series.'\n\n  }],\n  help: 'Maximum values of one or more series in a seriesList to each position, in each series, of the input seriesList',\n  fn: function maxFn(args) {\n    return reduce(args, function (a, b) {\n      return Math.max(a, b);\n    });\n  }\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy9tYXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFJLE1BQU0sR0FBRyxPQUFPLENBQUMsa0JBQWtCLENBQUMsQ0FBQzs7QUFFekMsSUFBSSxTQUFTLEdBQUcsT0FBTyxDQUFDLDBCQUEwQixDQUFDLENBQUM7QUFDcEQsTUFBTSxDQUFDLE9BQU8sR0FBRyxJQUFJLFNBQVMsQ0FBQyxLQUFLLEVBQUU7QUFDcEMsTUFBSSxFQUFFLENBQ0o7QUFDRSxRQUFJLEVBQUUsYUFBYTtBQUNuQixTQUFLLEVBQUUsQ0FBQyxZQUFZLENBQUM7R0FDdEIsRUFDRDtBQUNFLFFBQUksRUFBRSxPQUFPO0FBQ2IsU0FBSyxFQUFFLENBQUMsWUFBWSxFQUFFLFFBQVEsQ0FBQztBQUMvQixRQUFJLEVBQUUsK0VBQStFLEdBQ3JGLDREQUE0RDs7R0FFN0QsQ0FFRjtBQUNELE1BQUksRUFBRSxnSEFBZ0g7QUFDdEgsSUFBRSxFQUFFLFNBQVMsS0FBSyxDQUFDLElBQUksRUFBRTtBQUN2QixXQUFPLE1BQU0sQ0FBQyxJQUFJLEVBQUUsVUFBVSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQ2xDLGFBQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7S0FDdkIsQ0FBQyxDQUFDO0dBQ0o7Q0FDRixDQUFDLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9pbnN0YWxsZWRQbHVnaW5zL3RpbWVsaW9uL3NlcnZlci9zZXJpZXNfZnVuY3Rpb25zL21heC5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciByZWR1Y2UgPSByZXF1aXJlKCcuLi9saWIvcmVkdWNlLmpzJyk7XG5cbnZhciBDaGFpbmFibGUgPSByZXF1aXJlKCcuLi9saWIvY2xhc3Nlcy9jaGFpbmFibGUnKTtcbm1vZHVsZS5leHBvcnRzID0gbmV3IENoYWluYWJsZSgnbWF4Jywge1xuICBhcmdzOiBbXG4gICAge1xuICAgICAgbmFtZTogJ2lucHV0U2VyaWVzJyxcbiAgICAgIHR5cGVzOiBbJ3Nlcmllc0xpc3QnXVxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ3ZhbHVlJyxcbiAgICAgIHR5cGVzOiBbJ3Nlcmllc0xpc3QnLCAnbnVtYmVyJ10sXG4gICAgICBoZWxwOiAnU2V0cyB0aGUgcG9pbnQgdG8gd2hpY2hldmVyIGlzIGhpZ2hlciwgdGhlIGV4aXN0aW5nIHZhbHVlLCBvciB0aGUgb25lIHBhc3NlZC4nICtcbiAgICAgICcgSWYgcGFzc2luZyBhIHNlcmllc0xpc3QgaXQgbXVzdCBjb250YWluIGV4YWN0bHkgMSBzZXJpZXMuJ1xuXG4gICAgfVxuXG4gIF0sXG4gIGhlbHA6ICdNYXhpbXVtIHZhbHVlcyBvZiBvbmUgb3IgbW9yZSBzZXJpZXMgaW4gYSBzZXJpZXNMaXN0IHRvIGVhY2ggcG9zaXRpb24sIGluIGVhY2ggc2VyaWVzLCBvZiB0aGUgaW5wdXQgc2VyaWVzTGlzdCcsXG4gIGZuOiBmdW5jdGlvbiBtYXhGbihhcmdzKSB7XG4gICAgcmV0dXJuIHJlZHVjZShhcmdzLCBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgcmV0dXJuIE1hdGgubWF4KGEsIGIpO1xuICAgIH0pO1xuICB9XG59KTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/max.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,MAAM,GAAG,OAAO,CAAC,kBAAkB,CAAC,CAAC;;AAEzC,IAAI,SAAS,GAAG,OAAO,CAAC,0BAA0B,CAAC,CAAC;AACpD,MAAM,CAAC,OAAO,GAAG,IAAI,SAAS,CAAC,KAAK,EAAE;AACpC,MAAI,EAAE,CACJ;AACE,QAAI,EAAE,aAAa;AACnB,SAAK,EAAE,CAAC,YAAY,CAAC;GACtB,EACD;AACE,QAAI,EAAE,OAAO;AACb,SAAK,EAAE,CAAC,YAAY,EAAE,QAAQ,CAAC;AAC/B,QAAI,EAAE,+EAA+E,GACrF,4DAA4D;;GAE7D,CAEF;AACD,MAAI,EAAE,gHAAgH;AACtH,IAAE,EAAE,SAAS,KAAK,CAAC,IAAI,EAAE;AACvB,WAAO,MAAM,CAAC,IAAI,EAAE,UAAU,CAAC,EAAE,CAAC,EAAE;AAClC,aAAO,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;KACvB,CAAC,CAAC;GACJ;CACF,CAAC,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/max.js",
      "sourcesContent": [
        "var reduce = require('../lib/reduce.js');\n\nvar Chainable = require('../lib/classes/chainable');\nmodule.exports = new Chainable('max', {\n  args: [\n    {\n      name: 'inputSeries',\n      types: ['seriesList']\n    },\n    {\n      name: 'value',\n      types: ['seriesList', 'number'],\n      help: 'Sets the point to whichever is higher, the existing value, or the one passed.' +\n      ' If passing a seriesList it must contain exactly 1 series.'\n\n    }\n\n  ],\n  help: 'Maximum values of one or more series in a seriesList to each position, in each series, of the input seriesList',\n  fn: function maxFn(args) {\n    return reduce(args, function (a, b) {\n      return Math.max(a, b);\n    });\n  }\n});\n"
      ]
    },
    "mtime": 1467119944363
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/min.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar reduce = require('../lib/reduce.js');\n\nvar Chainable = require('../lib/classes/chainable');\nmodule.exports = new Chainable('min', {\n  args: [{\n    name: 'inputSeries',\n    types: ['seriesList']\n  }, {\n    name: 'value',\n    types: ['seriesList', 'number'],\n    help: 'Sets the point to whichever is lower, the existing value, or the one passed.' + ' If passing a seriesList it must contain exactly 1 series.'\n\n  }],\n  help: 'Minimum values of one or more series in a seriesList to each position, in each series, of the input seriesList',\n  fn: function minFn(args) {\n    return reduce(args, function (a, b) {\n      return Math.min(a, b);\n    });\n  }\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy9taW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFJLE1BQU0sR0FBRyxPQUFPLENBQUMsa0JBQWtCLENBQUMsQ0FBQzs7QUFFekMsSUFBSSxTQUFTLEdBQUcsT0FBTyxDQUFDLDBCQUEwQixDQUFDLENBQUM7QUFDcEQsTUFBTSxDQUFDLE9BQU8sR0FBRyxJQUFJLFNBQVMsQ0FBQyxLQUFLLEVBQUU7QUFDcEMsTUFBSSxFQUFFLENBQ0o7QUFDRSxRQUFJLEVBQUUsYUFBYTtBQUNuQixTQUFLLEVBQUUsQ0FBQyxZQUFZLENBQUM7R0FDdEIsRUFDRDtBQUNFLFFBQUksRUFBRSxPQUFPO0FBQ2IsU0FBSyxFQUFFLENBQUMsWUFBWSxFQUFFLFFBQVEsQ0FBQztBQUMvQixRQUFJLEVBQUUsOEVBQThFLEdBQ3BGLDREQUE0RDs7R0FFN0QsQ0FFRjtBQUNELE1BQUksRUFBRSxnSEFBZ0g7QUFDdEgsSUFBRSxFQUFFLFNBQVMsS0FBSyxDQUFDLElBQUksRUFBRTtBQUN2QixXQUFPLE1BQU0sQ0FBQyxJQUFJLEVBQUUsVUFBVSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQ2xDLGFBQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7S0FDdkIsQ0FBQyxDQUFDO0dBQ0o7Q0FDRixDQUFDLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9pbnN0YWxsZWRQbHVnaW5zL3RpbWVsaW9uL3NlcnZlci9zZXJpZXNfZnVuY3Rpb25zL21pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciByZWR1Y2UgPSByZXF1aXJlKCcuLi9saWIvcmVkdWNlLmpzJyk7XG5cbnZhciBDaGFpbmFibGUgPSByZXF1aXJlKCcuLi9saWIvY2xhc3Nlcy9jaGFpbmFibGUnKTtcbm1vZHVsZS5leHBvcnRzID0gbmV3IENoYWluYWJsZSgnbWluJywge1xuICBhcmdzOiBbXG4gICAge1xuICAgICAgbmFtZTogJ2lucHV0U2VyaWVzJyxcbiAgICAgIHR5cGVzOiBbJ3Nlcmllc0xpc3QnXVxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ3ZhbHVlJyxcbiAgICAgIHR5cGVzOiBbJ3Nlcmllc0xpc3QnLCAnbnVtYmVyJ10sXG4gICAgICBoZWxwOiAnU2V0cyB0aGUgcG9pbnQgdG8gd2hpY2hldmVyIGlzIGxvd2VyLCB0aGUgZXhpc3RpbmcgdmFsdWUsIG9yIHRoZSBvbmUgcGFzc2VkLicgK1xuICAgICAgJyBJZiBwYXNzaW5nIGEgc2VyaWVzTGlzdCBpdCBtdXN0IGNvbnRhaW4gZXhhY3RseSAxIHNlcmllcy4nXG5cbiAgICB9XG5cbiAgXSxcbiAgaGVscDogJ01pbmltdW0gdmFsdWVzIG9mIG9uZSBvciBtb3JlIHNlcmllcyBpbiBhIHNlcmllc0xpc3QgdG8gZWFjaCBwb3NpdGlvbiwgaW4gZWFjaCBzZXJpZXMsIG9mIHRoZSBpbnB1dCBzZXJpZXNMaXN0JyxcbiAgZm46IGZ1bmN0aW9uIG1pbkZuKGFyZ3MpIHtcbiAgICByZXR1cm4gcmVkdWNlKGFyZ3MsIGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICByZXR1cm4gTWF0aC5taW4oYSwgYik7XG4gICAgfSk7XG4gIH1cbn0pO1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/min.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,MAAM,GAAG,OAAO,CAAC,kBAAkB,CAAC,CAAC;;AAEzC,IAAI,SAAS,GAAG,OAAO,CAAC,0BAA0B,CAAC,CAAC;AACpD,MAAM,CAAC,OAAO,GAAG,IAAI,SAAS,CAAC,KAAK,EAAE;AACpC,MAAI,EAAE,CACJ;AACE,QAAI,EAAE,aAAa;AACnB,SAAK,EAAE,CAAC,YAAY,CAAC;GACtB,EACD;AACE,QAAI,EAAE,OAAO;AACb,SAAK,EAAE,CAAC,YAAY,EAAE,QAAQ,CAAC;AAC/B,QAAI,EAAE,8EAA8E,GACpF,4DAA4D;;GAE7D,CAEF;AACD,MAAI,EAAE,gHAAgH;AACtH,IAAE,EAAE,SAAS,KAAK,CAAC,IAAI,EAAE;AACvB,WAAO,MAAM,CAAC,IAAI,EAAE,UAAU,CAAC,EAAE,CAAC,EAAE;AAClC,aAAO,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;KACvB,CAAC,CAAC;GACJ;CACF,CAAC,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/min.js",
      "sourcesContent": [
        "var reduce = require('../lib/reduce.js');\n\nvar Chainable = require('../lib/classes/chainable');\nmodule.exports = new Chainable('min', {\n  args: [\n    {\n      name: 'inputSeries',\n      types: ['seriesList']\n    },\n    {\n      name: 'value',\n      types: ['seriesList', 'number'],\n      help: 'Sets the point to whichever is lower, the existing value, or the one passed.' +\n      ' If passing a seriesList it must contain exactly 1 series.'\n\n    }\n\n  ],\n  help: 'Minimum values of one or more series in a seriesList to each position, in each series, of the input seriesList',\n  fn: function minFn(args) {\n    return reduce(args, function (a, b) {\n      return Math.min(a, b);\n    });\n  }\n});\n"
      ]
    },
    "mtime": 1467119944363
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/movingaverage.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar alter = require('../lib/alter.js');\nvar _ = require('lodash');\nvar Chainable = require('../lib/classes/chainable');\nmodule.exports = new Chainable('movingaverage', {\n  args: [{\n    name: 'inputSeries',\n    types: ['seriesList']\n  }, {\n    name: 'window',\n    types: ['number'],\n    help: 'Number of points to average over'\n  }, {\n    name: 'position',\n    types: ['string', 'null'],\n    help: 'Position of the averaged points relative to the result time.  Options are left, right, and center (default).'\n  }],\n  aliases: ['mvavg'],\n  help: 'Calculate the moving average over a given window. Nice for smoothing noisey series',\n  fn: function movingaverageFn(args) {\n    return alter(args, function (eachSeries, _window, _position) {\n\n      _position = _position || 'center';\n      var validPositions = ['left', 'right', 'center'];\n      if (!_.contains(validPositions, _position)) throw new Error('Valid positions are: ' + validPositions.join(', '));\n\n      var pairs = eachSeries.data;\n      var pairsLen = pairs.length;\n      eachSeries.label = eachSeries.label + ' mvavg=' + _window;\n\n      function toPoint(point, pairSlice) {\n        var average = _.chain(pairSlice).map(1).reduce(function (memo, num) {\n          return memo + num;\n        }).value() / _window;\n\n        return [point[0], average];\n      }\n\n      if (_position === 'center') {\n        var windowLeft = Math.floor(_window / 2);\n        var windowRight = _window - windowLeft;\n        eachSeries.data = _.map(pairs, function (point, i) {\n          if (i < windowLeft || i >= pairsLen - windowRight) return [point[0], null];\n          return toPoint(point, pairs.slice(i - windowLeft, i + windowRight));\n        });\n      } else if (_position === 'left') {\n        eachSeries.data = _.map(pairs, function (point, i) {\n          if (i < _window) return [point[0], null];\n          return toPoint(point, pairs.slice(i - _window, i));\n        });\n      } else if (_position === 'right') {\n        eachSeries.data = _.map(pairs, function (point, i) {\n          if (i >= pairsLen - _window) return [point[0], null];\n          return toPoint(point, pairs.slice(i, i + _window));\n        });\n      }\n\n      return eachSeries;\n    });\n  }\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy9tb3ZpbmdhdmVyYWdlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBSSxLQUFLLEdBQUcsT0FBTyxDQUFDLGlCQUFpQixDQUFDLENBQUM7QUFDdkMsSUFBSSxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQzFCLElBQUksU0FBUyxHQUFHLE9BQU8sQ0FBQywwQkFBMEIsQ0FBQyxDQUFDO0FBQ3BELE1BQU0sQ0FBQyxPQUFPLEdBQUcsSUFBSSxTQUFTLENBQUMsZUFBZSxFQUFFO0FBQzlDLE1BQUksRUFBRSxDQUNKO0FBQ0UsUUFBSSxFQUFFLGFBQWE7QUFDbkIsU0FBSyxFQUFFLENBQUMsWUFBWSxDQUFDO0dBQ3RCLEVBQ0Q7QUFDRSxRQUFJLEVBQUUsUUFBUTtBQUNkLFNBQUssRUFBRSxDQUFDLFFBQVEsQ0FBQztBQUNqQixRQUFJLEVBQUUsa0NBQWtDO0dBQ3pDLEVBQ0Q7QUFDRSxRQUFJLEVBQUUsVUFBVTtBQUNoQixTQUFLLEVBQUUsQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDO0FBQ3pCLFFBQUksRUFBRSw4R0FBOEc7R0FDckgsQ0FDRjtBQUNELFNBQU8sRUFBRSxDQUFDLE9BQU8sQ0FBQztBQUNsQixNQUFJLEVBQUUsb0ZBQW9GO0FBQzFGLElBQUUsRUFBRSxTQUFTLGVBQWUsQ0FBQyxJQUFJLEVBQUU7QUFDakMsV0FBTyxLQUFLLENBQUMsSUFBSSxFQUFFLFVBQVUsVUFBVSxFQUFFLE9BQU8sRUFBRSxTQUFTLEVBQUU7O0FBRTNELGVBQVMsR0FBRyxTQUFTLElBQUksUUFBUSxDQUFDO0FBQ2xDLFVBQUksY0FBYyxHQUFHLENBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRSxRQUFRLENBQUMsQ0FBQztBQUNqRCxVQUFJLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxjQUFjLEVBQUUsU0FBUyxDQUFDLEVBQUUsTUFBTSxJQUFJLEtBQUssQ0FBQyx1QkFBdUIsR0FBRyxjQUFjLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7O0FBRWpILFVBQUksS0FBSyxHQUFHLFVBQVUsQ0FBQyxJQUFJLENBQUM7QUFDNUIsVUFBSSxRQUFRLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQztBQUM1QixnQkFBVSxDQUFDLEtBQUssR0FBRyxVQUFVLENBQUMsS0FBSyxHQUFHLFNBQVMsR0FBRyxPQUFPLENBQUM7O0FBRTFELGVBQVMsT0FBTyxDQUFDLEtBQUssRUFBRSxTQUFTLEVBQUU7QUFDakMsWUFBSSxPQUFPLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FDL0IsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxVQUFVLElBQUksRUFBRSxHQUFHLEVBQUU7QUFDbEMsaUJBQVEsSUFBSSxHQUFHLEdBQUcsQ0FBRTtTQUNyQixDQUFDLENBQUMsS0FBSyxFQUFFLEdBQUcsT0FBTyxDQUFDOztBQUVyQixlQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO09BQzVCOztBQUVELFVBQUksU0FBUyxLQUFLLFFBQVEsRUFBRTtBQUMxQixZQUFJLFVBQVUsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxDQUFDLENBQUMsQ0FBQztBQUN6QyxZQUFJLFdBQVcsR0FBRyxPQUFPLEdBQUcsVUFBVSxDQUFDO0FBQ3ZDLGtCQUFVLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsS0FBSyxFQUFFLFVBQVUsS0FBSyxFQUFFLENBQUMsRUFBRTtBQUNqRCxjQUFJLENBQUMsR0FBRyxVQUFVLElBQUksQ0FBQyxJQUFJLFFBQVEsR0FBRyxXQUFXLEVBQUUsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQztBQUMzRSxpQkFBTyxPQUFPLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLFVBQVUsRUFBRSxDQUFDLEdBQUcsV0FBVyxDQUFDLENBQUMsQ0FBQztTQUNyRSxDQUFDLENBQUM7T0FDSixNQUFNLElBQUksU0FBUyxLQUFLLE1BQU0sRUFBRTtBQUMvQixrQkFBVSxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxVQUFVLEtBQUssRUFBRSxDQUFDLEVBQUU7QUFDakQsY0FBSSxDQUFDLEdBQUcsT0FBTyxFQUFFLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDekMsaUJBQU8sT0FBTyxDQUFDLEtBQUssRUFBRSxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUNwRCxDQUFDLENBQUM7T0FFSixNQUFNLElBQUksU0FBUyxLQUFLLE9BQU8sRUFBRTtBQUNoQyxrQkFBVSxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxVQUFVLEtBQUssRUFBRSxDQUFDLEVBQUU7QUFDakQsY0FBSSxDQUFDLElBQUksUUFBUSxHQUFHLE9BQU8sRUFBRSxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQ3JELGlCQUFPLE9BQU8sQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUcsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUM7U0FDckQsQ0FBQyxDQUFDO09BRUo7O0FBRUQsYUFBTyxVQUFVLENBQUM7S0FDbkIsQ0FBQyxDQUFDO0dBQ0o7Q0FDRixDQUFDLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9pbnN0YWxsZWRQbHVnaW5zL3RpbWVsaW9uL3NlcnZlci9zZXJpZXNfZnVuY3Rpb25zL21vdmluZ2F2ZXJhZ2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYWx0ZXIgPSByZXF1aXJlKCcuLi9saWIvYWx0ZXIuanMnKTtcbnZhciBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XG52YXIgQ2hhaW5hYmxlID0gcmVxdWlyZSgnLi4vbGliL2NsYXNzZXMvY2hhaW5hYmxlJyk7XG5tb2R1bGUuZXhwb3J0cyA9IG5ldyBDaGFpbmFibGUoJ21vdmluZ2F2ZXJhZ2UnLCB7XG4gIGFyZ3M6IFtcbiAgICB7XG4gICAgICBuYW1lOiAnaW5wdXRTZXJpZXMnLFxuICAgICAgdHlwZXM6IFsnc2VyaWVzTGlzdCddXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAnd2luZG93JyxcbiAgICAgIHR5cGVzOiBbJ251bWJlciddLFxuICAgICAgaGVscDogJ051bWJlciBvZiBwb2ludHMgdG8gYXZlcmFnZSBvdmVyJ1xuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ3Bvc2l0aW9uJyxcbiAgICAgIHR5cGVzOiBbJ3N0cmluZycsICdudWxsJ10sXG4gICAgICBoZWxwOiAnUG9zaXRpb24gb2YgdGhlIGF2ZXJhZ2VkIHBvaW50cyByZWxhdGl2ZSB0byB0aGUgcmVzdWx0IHRpbWUuICBPcHRpb25zIGFyZSBsZWZ0LCByaWdodCwgYW5kIGNlbnRlciAoZGVmYXVsdCkuJ1xuICAgIH1cbiAgXSxcbiAgYWxpYXNlczogWydtdmF2ZyddLFxuICBoZWxwOiAnQ2FsY3VsYXRlIHRoZSBtb3ZpbmcgYXZlcmFnZSBvdmVyIGEgZ2l2ZW4gd2luZG93LiBOaWNlIGZvciBzbW9vdGhpbmcgbm9pc2V5IHNlcmllcycsXG4gIGZuOiBmdW5jdGlvbiBtb3ZpbmdhdmVyYWdlRm4oYXJncykge1xuICAgIHJldHVybiBhbHRlcihhcmdzLCBmdW5jdGlvbiAoZWFjaFNlcmllcywgX3dpbmRvdywgX3Bvc2l0aW9uKSB7XG5cbiAgICAgIF9wb3NpdGlvbiA9IF9wb3NpdGlvbiB8fCAnY2VudGVyJztcbiAgICAgIHZhciB2YWxpZFBvc2l0aW9ucyA9IFsnbGVmdCcsICdyaWdodCcsICdjZW50ZXInXTtcbiAgICAgIGlmICghXy5jb250YWlucyh2YWxpZFBvc2l0aW9ucywgX3Bvc2l0aW9uKSkgdGhyb3cgbmV3IEVycm9yKCdWYWxpZCBwb3NpdGlvbnMgYXJlOiAnICsgdmFsaWRQb3NpdGlvbnMuam9pbignLCAnKSk7XG5cbiAgICAgIHZhciBwYWlycyA9IGVhY2hTZXJpZXMuZGF0YTtcbiAgICAgIHZhciBwYWlyc0xlbiA9IHBhaXJzLmxlbmd0aDtcbiAgICAgIGVhY2hTZXJpZXMubGFiZWwgPSBlYWNoU2VyaWVzLmxhYmVsICsgJyBtdmF2Zz0nICsgX3dpbmRvdztcblxuICAgICAgZnVuY3Rpb24gdG9Qb2ludChwb2ludCwgcGFpclNsaWNlKSB7XG4gICAgICAgIHZhciBhdmVyYWdlID0gXy5jaGFpbihwYWlyU2xpY2UpXG4gICAgICAgIC5tYXAoMSkucmVkdWNlKGZ1bmN0aW9uIChtZW1vLCBudW0pIHtcbiAgICAgICAgICByZXR1cm4gKG1lbW8gKyBudW0pO1xuICAgICAgICB9KS52YWx1ZSgpIC8gX3dpbmRvdztcblxuICAgICAgICByZXR1cm4gW3BvaW50WzBdLCBhdmVyYWdlXTtcbiAgICAgIH1cblxuICAgICAgaWYgKF9wb3NpdGlvbiA9PT0gJ2NlbnRlcicpIHtcbiAgICAgICAgdmFyIHdpbmRvd0xlZnQgPSBNYXRoLmZsb29yKF93aW5kb3cgLyAyKTtcbiAgICAgICAgdmFyIHdpbmRvd1JpZ2h0ID0gX3dpbmRvdyAtIHdpbmRvd0xlZnQ7XG4gICAgICAgIGVhY2hTZXJpZXMuZGF0YSA9IF8ubWFwKHBhaXJzLCBmdW5jdGlvbiAocG9pbnQsIGkpIHtcbiAgICAgICAgICBpZiAoaSA8IHdpbmRvd0xlZnQgfHwgaSA+PSBwYWlyc0xlbiAtIHdpbmRvd1JpZ2h0KSByZXR1cm4gW3BvaW50WzBdLCBudWxsXTtcbiAgICAgICAgICByZXR1cm4gdG9Qb2ludChwb2ludCwgcGFpcnMuc2xpY2UoaSAtIHdpbmRvd0xlZnQsIGkgKyB3aW5kb3dSaWdodCkpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAoX3Bvc2l0aW9uID09PSAnbGVmdCcpIHtcbiAgICAgICAgZWFjaFNlcmllcy5kYXRhID0gXy5tYXAocGFpcnMsIGZ1bmN0aW9uIChwb2ludCwgaSkge1xuICAgICAgICAgIGlmIChpIDwgX3dpbmRvdykgcmV0dXJuIFtwb2ludFswXSwgbnVsbF07XG4gICAgICAgICAgcmV0dXJuIHRvUG9pbnQocG9pbnQsIHBhaXJzLnNsaWNlKGkgLSBfd2luZG93LCBpKSk7XG4gICAgICAgIH0pO1xuXG4gICAgICB9IGVsc2UgaWYgKF9wb3NpdGlvbiA9PT0gJ3JpZ2h0Jykge1xuICAgICAgICBlYWNoU2VyaWVzLmRhdGEgPSBfLm1hcChwYWlycywgZnVuY3Rpb24gKHBvaW50LCBpKSB7XG4gICAgICAgICAgaWYgKGkgPj0gcGFpcnNMZW4gLSBfd2luZG93KSByZXR1cm4gW3BvaW50WzBdLCBudWxsXTtcbiAgICAgICAgICByZXR1cm4gdG9Qb2ludChwb2ludCwgcGFpcnMuc2xpY2UoaSAsIGkgKyBfd2luZG93KSk7XG4gICAgICAgIH0pO1xuXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBlYWNoU2VyaWVzO1xuICAgIH0pO1xuICB9XG59KTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/movingaverage.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/movingaverage.js",
      "sourcesContent": [
        "var alter = require('../lib/alter.js');\nvar _ = require('lodash');\nvar Chainable = require('../lib/classes/chainable');\nmodule.exports = new Chainable('movingaverage', {\n  args: [\n    {\n      name: 'inputSeries',\n      types: ['seriesList']\n    },\n    {\n      name: 'window',\n      types: ['number'],\n      help: 'Number of points to average over'\n    },\n    {\n      name: 'position',\n      types: ['string', 'null'],\n      help: 'Position of the averaged points relative to the result time.  Options are left, right, and center (default).'\n    }\n  ],\n  aliases: ['mvavg'],\n  help: 'Calculate the moving average over a given window. Nice for smoothing noisey series',\n  fn: function movingaverageFn(args) {\n    return alter(args, function (eachSeries, _window, _position) {\n\n      _position = _position || 'center';\n      var validPositions = ['left', 'right', 'center'];\n      if (!_.contains(validPositions, _position)) throw new Error('Valid positions are: ' + validPositions.join(', '));\n\n      var pairs = eachSeries.data;\n      var pairsLen = pairs.length;\n      eachSeries.label = eachSeries.label + ' mvavg=' + _window;\n\n      function toPoint(point, pairSlice) {\n        var average = _.chain(pairSlice)\n        .map(1).reduce(function (memo, num) {\n          return (memo + num);\n        }).value() / _window;\n\n        return [point[0], average];\n      }\n\n      if (_position === 'center') {\n        var windowLeft = Math.floor(_window / 2);\n        var windowRight = _window - windowLeft;\n        eachSeries.data = _.map(pairs, function (point, i) {\n          if (i < windowLeft || i >= pairsLen - windowRight) return [point[0], null];\n          return toPoint(point, pairs.slice(i - windowLeft, i + windowRight));\n        });\n      } else if (_position === 'left') {\n        eachSeries.data = _.map(pairs, function (point, i) {\n          if (i < _window) return [point[0], null];\n          return toPoint(point, pairs.slice(i - _window, i));\n        });\n\n      } else if (_position === 'right') {\n        eachSeries.data = _.map(pairs, function (point, i) {\n          if (i >= pairsLen - _window) return [point[0], null];\n          return toPoint(point, pairs.slice(i , i + _window));\n        });\n\n      }\n\n      return eachSeries;\n    });\n  }\n});\n"
      ]
    },
    "mtime": 1467119944363
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/movingstd.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar alter = require('../lib/alter.js');\nvar _ = require('lodash');\nvar Chainable = require('../lib/classes/chainable');\nmodule.exports = new Chainable('movingstd', {\n  args: [{\n    name: 'inputSeries',\n    types: ['seriesList']\n  }, {\n    name: 'window',\n    types: ['number'],\n    help: 'Number of points to compute the standard deviation over'\n  }],\n  aliases: ['mvstd'],\n  help: 'Calculate the moving standard deviation over a given window. Uses naive two-pass algorithm. Rounding errors ' + 'may become more noticeable with very long series, or series with very large numbers.',\n  fn: function movingstdFn(args) {\n    return alter(args, function (eachSeries, _window) {\n\n      var pairs = eachSeries.data;\n\n      eachSeries.data = _.map(pairs, function (point, i) {\n        if (i < _window) {\n          return [point[0], null];\n        }\n\n        var average = _.chain(pairs.slice(i - _window, i)).map(function (point) {\n          return point[1];\n        }).reduce(function (memo, num) {\n          return memo + num;\n        }).value() / _window;\n\n        var variance = _.chain(pairs.slice(i - _window, i)).map(function (point) {\n          return point[1];\n        }).reduce(function (memo, num) {\n          return memo + Math.pow(num - average, 2);\n        }).value() / (_window - 1);\n\n        return [point[0], Math.sqrt(variance)];\n      });\n      return eachSeries;\n    });\n  }\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy9tb3ZpbmdzdGQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFJLEtBQUssR0FBRyxPQUFPLENBQUMsaUJBQWlCLENBQUMsQ0FBQztBQUN2QyxJQUFJLENBQUMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDMUIsSUFBSSxTQUFTLEdBQUcsT0FBTyxDQUFDLDBCQUEwQixDQUFDLENBQUM7QUFDcEQsTUFBTSxDQUFDLE9BQU8sR0FBRyxJQUFJLFNBQVMsQ0FBQyxXQUFXLEVBQUU7QUFDMUMsTUFBSSxFQUFFLENBQ0o7QUFDRSxRQUFJLEVBQUUsYUFBYTtBQUNuQixTQUFLLEVBQUUsQ0FBQyxZQUFZLENBQUM7R0FDdEIsRUFDRDtBQUNFLFFBQUksRUFBRSxRQUFRO0FBQ2QsU0FBSyxFQUFFLENBQUMsUUFBUSxDQUFDO0FBQ2pCLFFBQUksRUFBRSx5REFBeUQ7R0FDaEUsQ0FDRjtBQUNELFNBQU8sRUFBRSxDQUFDLE9BQU8sQ0FBQztBQUNsQixNQUFJLEVBQUUsOEdBQThHLEdBQ2xILHNGQUFzRjtBQUN4RixJQUFFLEVBQUUsU0FBUyxXQUFXLENBQUMsSUFBSSxFQUFFO0FBQzdCLFdBQU8sS0FBSyxDQUFDLElBQUksRUFBRSxVQUFVLFVBQVUsRUFBRSxPQUFPLEVBQUU7O0FBRWhELFVBQUksS0FBSyxHQUFHLFVBQVUsQ0FBQyxJQUFJLENBQUM7O0FBRTVCLGdCQUFVLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsS0FBSyxFQUFFLFVBQVUsS0FBSyxFQUFFLENBQUMsRUFBRTtBQUNqRCxZQUFJLENBQUMsR0FBRyxPQUFPLEVBQUU7QUFBRSxpQkFBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQztTQUFFOztBQUU3QyxZQUFJLE9BQU8sR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUNqRCxHQUFHLENBQUMsVUFBVSxLQUFLLEVBQUU7QUFDcEIsaUJBQU8sS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ2pCLENBQUMsQ0FBQyxNQUFNLENBQUMsVUFBVSxJQUFJLEVBQUUsR0FBRyxFQUFFO0FBQzdCLGlCQUFRLElBQUksR0FBRyxHQUFHLENBQUU7U0FDckIsQ0FBQyxDQUFDLEtBQUssRUFBRSxHQUFHLE9BQU8sQ0FBQzs7QUFFckIsWUFBSSxRQUFRLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FDbEQsR0FBRyxDQUFDLFVBQVUsS0FBSyxFQUFFO0FBQ3BCLGlCQUFPLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUNqQixDQUFDLENBQUMsTUFBTSxDQUFDLFVBQVUsSUFBSSxFQUFFLEdBQUcsRUFBRTtBQUM3QixpQkFBTyxJQUFJLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEdBQUcsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDO1NBQzFDLENBQUMsQ0FBQyxLQUFLLEVBQUUsSUFBSSxPQUFPLEdBQUcsQ0FBQyxDQUFBLEFBQUMsQ0FBQzs7QUFFM0IsZUFBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7T0FDeEMsQ0FBQyxDQUFDO0FBQ0gsYUFBTyxVQUFVLENBQUM7S0FDbkIsQ0FBQyxDQUFDO0dBQ0o7Q0FDRixDQUFDLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9pbnN0YWxsZWRQbHVnaW5zL3RpbWVsaW9uL3NlcnZlci9zZXJpZXNfZnVuY3Rpb25zL21vdmluZ3N0ZC5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBhbHRlciA9IHJlcXVpcmUoJy4uL2xpYi9hbHRlci5qcycpO1xudmFyIF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcbnZhciBDaGFpbmFibGUgPSByZXF1aXJlKCcuLi9saWIvY2xhc3Nlcy9jaGFpbmFibGUnKTtcbm1vZHVsZS5leHBvcnRzID0gbmV3IENoYWluYWJsZSgnbW92aW5nc3RkJywge1xuICBhcmdzOiBbXG4gICAge1xuICAgICAgbmFtZTogJ2lucHV0U2VyaWVzJyxcbiAgICAgIHR5cGVzOiBbJ3Nlcmllc0xpc3QnXVxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ3dpbmRvdycsXG4gICAgICB0eXBlczogWydudW1iZXInXSxcbiAgICAgIGhlbHA6ICdOdW1iZXIgb2YgcG9pbnRzIHRvIGNvbXB1dGUgdGhlIHN0YW5kYXJkIGRldmlhdGlvbiBvdmVyJ1xuICAgIH1cbiAgXSxcbiAgYWxpYXNlczogWydtdnN0ZCddLFxuICBoZWxwOiAnQ2FsY3VsYXRlIHRoZSBtb3Zpbmcgc3RhbmRhcmQgZGV2aWF0aW9uIG92ZXIgYSBnaXZlbiB3aW5kb3cuIFVzZXMgbmFpdmUgdHdvLXBhc3MgYWxnb3JpdGhtLiBSb3VuZGluZyBlcnJvcnMgJyArXG4gICAgJ21heSBiZWNvbWUgbW9yZSBub3RpY2VhYmxlIHdpdGggdmVyeSBsb25nIHNlcmllcywgb3Igc2VyaWVzIHdpdGggdmVyeSBsYXJnZSBudW1iZXJzLicsXG4gIGZuOiBmdW5jdGlvbiBtb3ZpbmdzdGRGbihhcmdzKSB7XG4gICAgcmV0dXJuIGFsdGVyKGFyZ3MsIGZ1bmN0aW9uIChlYWNoU2VyaWVzLCBfd2luZG93KSB7XG5cbiAgICAgIHZhciBwYWlycyA9IGVhY2hTZXJpZXMuZGF0YTtcblxuICAgICAgZWFjaFNlcmllcy5kYXRhID0gXy5tYXAocGFpcnMsIGZ1bmN0aW9uIChwb2ludCwgaSkge1xuICAgICAgICBpZiAoaSA8IF93aW5kb3cpIHsgcmV0dXJuIFtwb2ludFswXSwgbnVsbF07IH1cblxuICAgICAgICB2YXIgYXZlcmFnZSA9IF8uY2hhaW4ocGFpcnMuc2xpY2UoaSAtIF93aW5kb3csIGkpKVxuICAgICAgICAubWFwKGZ1bmN0aW9uIChwb2ludCkge1xuICAgICAgICAgIHJldHVybiBwb2ludFsxXTtcbiAgICAgICAgfSkucmVkdWNlKGZ1bmN0aW9uIChtZW1vLCBudW0pIHtcbiAgICAgICAgICByZXR1cm4gKG1lbW8gKyBudW0pO1xuICAgICAgICB9KS52YWx1ZSgpIC8gX3dpbmRvdztcblxuICAgICAgICB2YXIgdmFyaWFuY2UgPSBfLmNoYWluKHBhaXJzLnNsaWNlKGkgLSBfd2luZG93LCBpKSlcbiAgICAgICAgLm1hcChmdW5jdGlvbiAocG9pbnQpIHtcbiAgICAgICAgICByZXR1cm4gcG9pbnRbMV07XG4gICAgICAgIH0pLnJlZHVjZShmdW5jdGlvbiAobWVtbywgbnVtKSB7XG4gICAgICAgICAgcmV0dXJuIG1lbW8gKyBNYXRoLnBvdyhudW0gLSBhdmVyYWdlLCAyKTtcbiAgICAgICAgfSkudmFsdWUoKSAvIChfd2luZG93IC0gMSk7XG5cbiAgICAgICAgcmV0dXJuIFtwb2ludFswXSwgTWF0aC5zcXJ0KHZhcmlhbmNlKV07XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBlYWNoU2VyaWVzO1xuICAgIH0pO1xuICB9XG59KTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/movingstd.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,KAAK,GAAG,OAAO,CAAC,iBAAiB,CAAC,CAAC;AACvC,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC1B,IAAI,SAAS,GAAG,OAAO,CAAC,0BAA0B,CAAC,CAAC;AACpD,MAAM,CAAC,OAAO,GAAG,IAAI,SAAS,CAAC,WAAW,EAAE;AAC1C,MAAI,EAAE,CACJ;AACE,QAAI,EAAE,aAAa;AACnB,SAAK,EAAE,CAAC,YAAY,CAAC;GACtB,EACD;AACE,QAAI,EAAE,QAAQ;AACd,SAAK,EAAE,CAAC,QAAQ,CAAC;AACjB,QAAI,EAAE,yDAAyD;GAChE,CACF;AACD,SAAO,EAAE,CAAC,OAAO,CAAC;AAClB,MAAI,EAAE,8GAA8G,GAClH,sFAAsF;AACxF,IAAE,EAAE,SAAS,WAAW,CAAC,IAAI,EAAE;AAC7B,WAAO,KAAK,CAAC,IAAI,EAAE,UAAU,UAAU,EAAE,OAAO,EAAE;;AAEhD,UAAI,KAAK,GAAG,UAAU,CAAC,IAAI,CAAC;;AAE5B,gBAAU,CAAC,IAAI,GAAG,CAAC,CAAC,GAAG,CAAC,KAAK,EAAE,UAAU,KAAK,EAAE,CAAC,EAAE;AACjD,YAAI,CAAC,GAAG,OAAO,EAAE;AAAE,iBAAO,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;SAAE;;AAE7C,YAAI,OAAO,GAAG,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,GAAG,OAAO,EAAE,CAAC,CAAC,CAAC,CACjD,GAAG,CAAC,UAAU,KAAK,EAAE;AACpB,iBAAO,KAAK,CAAC,CAAC,CAAC,CAAC;SACjB,CAAC,CAAC,MAAM,CAAC,UAAU,IAAI,EAAE,GAAG,EAAE;AAC7B,iBAAQ,IAAI,GAAG,GAAG,CAAE;SACrB,CAAC,CAAC,KAAK,EAAE,GAAG,OAAO,CAAC;;AAErB,YAAI,QAAQ,GAAG,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,GAAG,OAAO,EAAE,CAAC,CAAC,CAAC,CAClD,GAAG,CAAC,UAAU,KAAK,EAAE;AACpB,iBAAO,KAAK,CAAC,CAAC,CAAC,CAAC;SACjB,CAAC,CAAC,MAAM,CAAC,UAAU,IAAI,EAAE,GAAG,EAAE;AAC7B,iBAAO,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,GAAG,OAAO,EAAE,CAAC,CAAC,CAAC;SAC1C,CAAC,CAAC,KAAK,EAAE,IAAI,OAAO,GAAG,CAAC,CAAA,AAAC,CAAC;;AAE3B,eAAO,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;OACxC,CAAC,CAAC;AACH,aAAO,UAAU,CAAC;KACnB,CAAC,CAAC;GACJ;CACF,CAAC,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/movingstd.js",
      "sourcesContent": [
        "var alter = require('../lib/alter.js');\nvar _ = require('lodash');\nvar Chainable = require('../lib/classes/chainable');\nmodule.exports = new Chainable('movingstd', {\n  args: [\n    {\n      name: 'inputSeries',\n      types: ['seriesList']\n    },\n    {\n      name: 'window',\n      types: ['number'],\n      help: 'Number of points to compute the standard deviation over'\n    }\n  ],\n  aliases: ['mvstd'],\n  help: 'Calculate the moving standard deviation over a given window. Uses naive two-pass algorithm. Rounding errors ' +\n    'may become more noticeable with very long series, or series with very large numbers.',\n  fn: function movingstdFn(args) {\n    return alter(args, function (eachSeries, _window) {\n\n      var pairs = eachSeries.data;\n\n      eachSeries.data = _.map(pairs, function (point, i) {\n        if (i < _window) { return [point[0], null]; }\n\n        var average = _.chain(pairs.slice(i - _window, i))\n        .map(function (point) {\n          return point[1];\n        }).reduce(function (memo, num) {\n          return (memo + num);\n        }).value() / _window;\n\n        var variance = _.chain(pairs.slice(i - _window, i))\n        .map(function (point) {\n          return point[1];\n        }).reduce(function (memo, num) {\n          return memo + Math.pow(num - average, 2);\n        }).value() / (_window - 1);\n\n        return [point[0], Math.sqrt(variance)];\n      });\n      return eachSeries;\n    });\n  }\n});\n"
      ]
    },
    "mtime": 1467119944363
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/multiply.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar reduce = require('../lib/reduce.js');\n\nvar Chainable = require('../lib/classes/chainable');\nmodule.exports = new Chainable('multiply', {\n  args: [{\n    name: 'inputSeries',\n    types: ['seriesList']\n  }, {\n    name: 'multiplier',\n    types: ['seriesList', 'number'],\n    help: 'Number or series by which to multiply. If passing a seriesList it must contain exactly 1 series.'\n  }],\n  help: 'Multiply the values of one or more series in a seriesList to each position, in each series, of the input seriesList',\n  fn: function multiplyFn(args) {\n    return reduce(args, function (a, b) {\n      return a * b;\n    });\n  }\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy9tdWx0aXBseS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQUksTUFBTSxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDOztBQUV6QyxJQUFJLFNBQVMsR0FBRyxPQUFPLENBQUMsMEJBQTBCLENBQUMsQ0FBQztBQUNwRCxNQUFNLENBQUMsT0FBTyxHQUFHLElBQUksU0FBUyxDQUFDLFVBQVUsRUFBRTtBQUN6QyxNQUFJLEVBQUUsQ0FDSjtBQUNFLFFBQUksRUFBRSxhQUFhO0FBQ25CLFNBQUssRUFBRSxDQUFDLFlBQVksQ0FBQztHQUN0QixFQUNEO0FBQ0UsUUFBSSxFQUFFLFlBQVk7QUFDbEIsU0FBSyxFQUFFLENBQUMsWUFBWSxFQUFFLFFBQVEsQ0FBQztBQUMvQixRQUFJLEVBQUUsa0dBQWtHO0dBQ3pHLENBQ0Y7QUFDRCxNQUFJLEVBQUUscUhBQXFIO0FBQzNILElBQUUsRUFBRSxTQUFTLFVBQVUsQ0FBQyxJQUFJLEVBQUU7QUFDNUIsV0FBTyxNQUFNLENBQUMsSUFBSSxFQUFFLFVBQVUsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUNsQyxhQUFPLENBQUMsR0FBRyxDQUFDLENBQUM7S0FDZCxDQUFDLENBQUM7R0FDSjtDQUNGLENBQUMsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL2luc3RhbGxlZFBsdWdpbnMvdGltZWxpb24vc2VydmVyL3Nlcmllc19mdW5jdGlvbnMvbXVsdGlwbHkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgcmVkdWNlID0gcmVxdWlyZSgnLi4vbGliL3JlZHVjZS5qcycpO1xuXG52YXIgQ2hhaW5hYmxlID0gcmVxdWlyZSgnLi4vbGliL2NsYXNzZXMvY2hhaW5hYmxlJyk7XG5tb2R1bGUuZXhwb3J0cyA9IG5ldyBDaGFpbmFibGUoJ211bHRpcGx5Jywge1xuICBhcmdzOiBbXG4gICAge1xuICAgICAgbmFtZTogJ2lucHV0U2VyaWVzJyxcbiAgICAgIHR5cGVzOiBbJ3Nlcmllc0xpc3QnXVxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ211bHRpcGxpZXInLFxuICAgICAgdHlwZXM6IFsnc2VyaWVzTGlzdCcsICdudW1iZXInXSxcbiAgICAgIGhlbHA6ICdOdW1iZXIgb3Igc2VyaWVzIGJ5IHdoaWNoIHRvIG11bHRpcGx5LiBJZiBwYXNzaW5nIGEgc2VyaWVzTGlzdCBpdCBtdXN0IGNvbnRhaW4gZXhhY3RseSAxIHNlcmllcy4nXG4gICAgfVxuICBdLFxuICBoZWxwOiAnTXVsdGlwbHkgdGhlIHZhbHVlcyBvZiBvbmUgb3IgbW9yZSBzZXJpZXMgaW4gYSBzZXJpZXNMaXN0IHRvIGVhY2ggcG9zaXRpb24sIGluIGVhY2ggc2VyaWVzLCBvZiB0aGUgaW5wdXQgc2VyaWVzTGlzdCcsXG4gIGZuOiBmdW5jdGlvbiBtdWx0aXBseUZuKGFyZ3MpIHtcbiAgICByZXR1cm4gcmVkdWNlKGFyZ3MsIGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICByZXR1cm4gYSAqIGI7XG4gICAgfSk7XG4gIH1cbn0pO1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/multiply.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,MAAM,GAAG,OAAO,CAAC,kBAAkB,CAAC,CAAC;;AAEzC,IAAI,SAAS,GAAG,OAAO,CAAC,0BAA0B,CAAC,CAAC;AACpD,MAAM,CAAC,OAAO,GAAG,IAAI,SAAS,CAAC,UAAU,EAAE;AACzC,MAAI,EAAE,CACJ;AACE,QAAI,EAAE,aAAa;AACnB,SAAK,EAAE,CAAC,YAAY,CAAC;GACtB,EACD;AACE,QAAI,EAAE,YAAY;AAClB,SAAK,EAAE,CAAC,YAAY,EAAE,QAAQ,CAAC;AAC/B,QAAI,EAAE,kGAAkG;GACzG,CACF;AACD,MAAI,EAAE,qHAAqH;AAC3H,IAAE,EAAE,SAAS,UAAU,CAAC,IAAI,EAAE;AAC5B,WAAO,MAAM,CAAC,IAAI,EAAE,UAAU,CAAC,EAAE,CAAC,EAAE;AAClC,aAAO,CAAC,GAAG,CAAC,CAAC;KACd,CAAC,CAAC;GACJ;CACF,CAAC,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/multiply.js",
      "sourcesContent": [
        "var reduce = require('../lib/reduce.js');\n\nvar Chainable = require('../lib/classes/chainable');\nmodule.exports = new Chainable('multiply', {\n  args: [\n    {\n      name: 'inputSeries',\n      types: ['seriesList']\n    },\n    {\n      name: 'multiplier',\n      types: ['seriesList', 'number'],\n      help: 'Number or series by which to multiply. If passing a seriesList it must contain exactly 1 series.'\n    }\n  ],\n  help: 'Multiply the values of one or more series in a seriesList to each position, in each series, of the input seriesList',\n  fn: function multiplyFn(args) {\n    return reduce(args, function (a, b) {\n      return a * b;\n    });\n  }\n});\n"
      ]
    },
    "mtime": 1467119944363
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/points.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar alter = require('../lib/alter.js');\nvar _ = require('lodash');\n\nvar Chainable = require('../lib/classes/chainable');\nmodule.exports = new Chainable('points', {\n  args: [{\n    name: 'inputSeries',\n    types: ['seriesList']\n  }, {\n    name: 'radius',\n    types: ['number', 'null'],\n    help: 'Size of points'\n  }, {\n    name: 'weight',\n    types: ['number', 'null'],\n    help: 'Thickness of line around point'\n  }, {\n    name: 'fill',\n    types: ['number', 'null'],\n    help: 'Number between 0 and 10 representing opacity of fill'\n  }, {\n    name: 'fillColor',\n    types: ['string', 'null'],\n    help: 'Color with which to fill point'\n  }, {\n    name: 'symbol',\n    help: 'cross, circle, triangle, square or diamond',\n    types: ['string', 'null']\n  }, {\n    name: 'show',\n    types: ['boolean', 'null'],\n    help: 'Show points or not'\n  }],\n  help: 'Show the series as points',\n  fn: function pointsFn(args) {\n    return alter(args, function (eachSeries, radius, weight, fill, fillColor, symbol, show) {\n      eachSeries.points = eachSeries.points || {};\n      eachSeries.points.radius = radius == null ? undefined : radius;\n\n      if (fill) {\n        eachSeries.points.fillColor = fillColor == null ? false : fillColor;\n      }\n\n      if (fill != null) {\n        eachSeries.points.fill = fill / 10;\n      }\n\n      if (weight != null) {\n        eachSeries.points.lineWidth = weight;\n      }\n\n      symbol = symbol || 'circle';\n      var validSymbols = ['triangle', 'cross', 'square', 'diamond', 'circle'];\n      if (!_.contains(['triangle', 'cross', 'square', 'diamond', 'circle'], symbol)) {\n        throw new Error('Valid symbols are: ' + validSymbols.join(', '));\n      }\n\n      eachSeries.points.symbol = symbol;\n\n      eachSeries.points.show = show == null ? true : show;\n\n      return eachSeries;\n    });\n  }\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy9wb2ludHMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFJLEtBQUssR0FBRyxPQUFPLENBQUMsaUJBQWlCLENBQUMsQ0FBQztBQUN2QyxJQUFJLENBQUMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7O0FBRTFCLElBQUksU0FBUyxHQUFHLE9BQU8sQ0FBQywwQkFBMEIsQ0FBQyxDQUFDO0FBQ3BELE1BQU0sQ0FBQyxPQUFPLEdBQUcsSUFBSSxTQUFTLENBQUMsUUFBUSxFQUFFO0FBQ3ZDLE1BQUksRUFBRSxDQUNKO0FBQ0UsUUFBSSxFQUFFLGFBQWE7QUFDbkIsU0FBSyxFQUFFLENBQUMsWUFBWSxDQUFDO0dBQ3RCLEVBQ0Q7QUFDRSxRQUFJLEVBQUUsUUFBUTtBQUNkLFNBQUssRUFBRSxDQUFDLFFBQVEsRUFBRSxNQUFNLENBQUM7QUFDekIsUUFBSSxFQUFFLGdCQUFnQjtHQUN2QixFQUNEO0FBQ0UsUUFBSSxFQUFFLFFBQVE7QUFDZCxTQUFLLEVBQUUsQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDO0FBQ3pCLFFBQUksRUFBRSxnQ0FBZ0M7R0FDdkMsRUFDRDtBQUNFLFFBQUksRUFBRSxNQUFNO0FBQ1osU0FBSyxFQUFFLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQztBQUN6QixRQUFJLEVBQUUsc0RBQXNEO0dBQzdELEVBQ0Q7QUFDRSxRQUFJLEVBQUUsV0FBVztBQUNqQixTQUFLLEVBQUUsQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDO0FBQ3pCLFFBQUksRUFBRSxnQ0FBZ0M7R0FDdkMsRUFDRDtBQUNFLFFBQUksRUFBRSxRQUFRO0FBQ2QsUUFBSSxFQUFFLDRDQUE0QztBQUNsRCxTQUFLLEVBQUUsQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDO0dBQzFCLEVBQ0Q7QUFDRSxRQUFJLEVBQUUsTUFBTTtBQUNaLFNBQUssRUFBRSxDQUFDLFNBQVMsRUFBRSxNQUFNLENBQUM7QUFDMUIsUUFBSSxFQUFFLG9CQUFvQjtHQUMzQixDQUNGO0FBQ0QsTUFBSSxFQUFFLDJCQUEyQjtBQUNqQyxJQUFFLEVBQUUsU0FBUyxRQUFRLENBQUMsSUFBSSxFQUFFO0FBQzFCLFdBQU8sS0FBSyxDQUFDLElBQUksRUFBRSxVQUFVLFVBQVUsRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRTtBQUN0RixnQkFBVSxDQUFDLE1BQU0sR0FBRyxVQUFVLENBQUMsTUFBTSxJQUFJLEVBQUUsQ0FBQztBQUM1QyxnQkFBVSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEdBQUcsTUFBTSxJQUFJLElBQUksR0FBRyxTQUFTLEdBQUcsTUFBTSxDQUFDOztBQUUvRCxVQUFJLElBQUksRUFBRTtBQUNSLGtCQUFVLENBQUMsTUFBTSxDQUFDLFNBQVMsR0FBRyxTQUFTLElBQUksSUFBSSxHQUFHLEtBQUssR0FBRyxTQUFTLENBQUM7T0FDckU7O0FBRUQsVUFBSSxJQUFJLElBQUksSUFBSSxFQUFFO0FBQ2hCLGtCQUFVLENBQUMsTUFBTSxDQUFDLElBQUksR0FBSSxJQUFJLEdBQUcsRUFBRSxDQUFDO09BQ3JDOztBQUVELFVBQUksTUFBTSxJQUFJLElBQUksRUFBRTtBQUNsQixrQkFBVSxDQUFDLE1BQU0sQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFDO09BQ3RDOztBQUVELFlBQU0sR0FBRyxNQUFNLElBQUksUUFBUSxDQUFDO0FBQzVCLFVBQUksWUFBWSxHQUFHLENBQUMsVUFBVSxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLFFBQVEsQ0FBQyxDQUFDO0FBQ3hFLFVBQUksQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsVUFBVSxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLFFBQVEsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxFQUFFO0FBQzdFLGNBQU0sSUFBSSxLQUFLLENBQUMscUJBQXFCLEdBQUcsWUFBWSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO09BQ2xFOztBQUVELGdCQUFVLENBQUMsTUFBTSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7O0FBRWxDLGdCQUFVLENBQUMsTUFBTSxDQUFDLElBQUksR0FBRyxJQUFJLElBQUksSUFBSSxHQUFHLElBQUksR0FBRyxJQUFJLENBQUM7O0FBSXBELGFBQU8sVUFBVSxDQUFDO0tBQ25CLENBQUMsQ0FBQztHQUNKO0NBQ0YsQ0FBQyxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy9wb2ludHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYWx0ZXIgPSByZXF1aXJlKCcuLi9saWIvYWx0ZXIuanMnKTtcbnZhciBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XG5cbnZhciBDaGFpbmFibGUgPSByZXF1aXJlKCcuLi9saWIvY2xhc3Nlcy9jaGFpbmFibGUnKTtcbm1vZHVsZS5leHBvcnRzID0gbmV3IENoYWluYWJsZSgncG9pbnRzJywge1xuICBhcmdzOiBbXG4gICAge1xuICAgICAgbmFtZTogJ2lucHV0U2VyaWVzJyxcbiAgICAgIHR5cGVzOiBbJ3Nlcmllc0xpc3QnXVxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ3JhZGl1cycsXG4gICAgICB0eXBlczogWydudW1iZXInLCAnbnVsbCddLFxuICAgICAgaGVscDogJ1NpemUgb2YgcG9pbnRzJ1xuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ3dlaWdodCcsXG4gICAgICB0eXBlczogWydudW1iZXInLCAnbnVsbCddLFxuICAgICAgaGVscDogJ1RoaWNrbmVzcyBvZiBsaW5lIGFyb3VuZCBwb2ludCdcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICdmaWxsJyxcbiAgICAgIHR5cGVzOiBbJ251bWJlcicsICdudWxsJ10sXG4gICAgICBoZWxwOiAnTnVtYmVyIGJldHdlZW4gMCBhbmQgMTAgcmVwcmVzZW50aW5nIG9wYWNpdHkgb2YgZmlsbCdcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICdmaWxsQ29sb3InLFxuICAgICAgdHlwZXM6IFsnc3RyaW5nJywgJ251bGwnXSxcbiAgICAgIGhlbHA6ICdDb2xvciB3aXRoIHdoaWNoIHRvIGZpbGwgcG9pbnQnXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAnc3ltYm9sJyxcbiAgICAgIGhlbHA6ICdjcm9zcywgY2lyY2xlLCB0cmlhbmdsZSwgc3F1YXJlIG9yIGRpYW1vbmQnLFxuICAgICAgdHlwZXM6IFsnc3RyaW5nJywgJ251bGwnXVxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ3Nob3cnLFxuICAgICAgdHlwZXM6IFsnYm9vbGVhbicsICdudWxsJ10sXG4gICAgICBoZWxwOiAnU2hvdyBwb2ludHMgb3Igbm90J1xuICAgIH1cbiAgXSxcbiAgaGVscDogJ1Nob3cgdGhlIHNlcmllcyBhcyBwb2ludHMnLFxuICBmbjogZnVuY3Rpb24gcG9pbnRzRm4oYXJncykge1xuICAgIHJldHVybiBhbHRlcihhcmdzLCBmdW5jdGlvbiAoZWFjaFNlcmllcywgcmFkaXVzLCB3ZWlnaHQsIGZpbGwsIGZpbGxDb2xvciwgc3ltYm9sLCBzaG93KSB7XG4gICAgICBlYWNoU2VyaWVzLnBvaW50cyA9IGVhY2hTZXJpZXMucG9pbnRzIHx8IHt9O1xuICAgICAgZWFjaFNlcmllcy5wb2ludHMucmFkaXVzID0gcmFkaXVzID09IG51bGwgPyB1bmRlZmluZWQgOiByYWRpdXM7XG5cbiAgICAgIGlmIChmaWxsKSB7XG4gICAgICAgIGVhY2hTZXJpZXMucG9pbnRzLmZpbGxDb2xvciA9IGZpbGxDb2xvciA9PSBudWxsID8gZmFsc2UgOiBmaWxsQ29sb3I7XG4gICAgICB9XG5cbiAgICAgIGlmIChmaWxsICE9IG51bGwpIHtcbiAgICAgICAgZWFjaFNlcmllcy5wb2ludHMuZmlsbCA9ICBmaWxsIC8gMTA7XG4gICAgICB9XG5cbiAgICAgIGlmICh3ZWlnaHQgIT0gbnVsbCkge1xuICAgICAgICBlYWNoU2VyaWVzLnBvaW50cy5saW5lV2lkdGggPSB3ZWlnaHQ7XG4gICAgICB9XG5cbiAgICAgIHN5bWJvbCA9IHN5bWJvbCB8fCAnY2lyY2xlJztcbiAgICAgIHZhciB2YWxpZFN5bWJvbHMgPSBbJ3RyaWFuZ2xlJywgJ2Nyb3NzJywgJ3NxdWFyZScsICdkaWFtb25kJywgJ2NpcmNsZSddO1xuICAgICAgaWYgKCFfLmNvbnRhaW5zKFsndHJpYW5nbGUnLCAnY3Jvc3MnLCAnc3F1YXJlJywgJ2RpYW1vbmQnLCAnY2lyY2xlJ10sIHN5bWJvbCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdWYWxpZCBzeW1ib2xzIGFyZTogJyArIHZhbGlkU3ltYm9scy5qb2luKCcsICcpKTtcbiAgICAgIH1cblxuICAgICAgZWFjaFNlcmllcy5wb2ludHMuc3ltYm9sID0gc3ltYm9sO1xuXG4gICAgICBlYWNoU2VyaWVzLnBvaW50cy5zaG93ID0gc2hvdyA9PSBudWxsID8gdHJ1ZSA6IHNob3c7XG5cblxuXG4gICAgICByZXR1cm4gZWFjaFNlcmllcztcbiAgICB9KTtcbiAgfVxufSk7XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/points.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,KAAK,GAAG,OAAO,CAAC,iBAAiB,CAAC,CAAC;AACvC,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;;AAE1B,IAAI,SAAS,GAAG,OAAO,CAAC,0BAA0B,CAAC,CAAC;AACpD,MAAM,CAAC,OAAO,GAAG,IAAI,SAAS,CAAC,QAAQ,EAAE;AACvC,MAAI,EAAE,CACJ;AACE,QAAI,EAAE,aAAa;AACnB,SAAK,EAAE,CAAC,YAAY,CAAC;GACtB,EACD;AACE,QAAI,EAAE,QAAQ;AACd,SAAK,EAAE,CAAC,QAAQ,EAAE,MAAM,CAAC;AACzB,QAAI,EAAE,gBAAgB;GACvB,EACD;AACE,QAAI,EAAE,QAAQ;AACd,SAAK,EAAE,CAAC,QAAQ,EAAE,MAAM,CAAC;AACzB,QAAI,EAAE,gCAAgC;GACvC,EACD;AACE,QAAI,EAAE,MAAM;AACZ,SAAK,EAAE,CAAC,QAAQ,EAAE,MAAM,CAAC;AACzB,QAAI,EAAE,sDAAsD;GAC7D,EACD;AACE,QAAI,EAAE,WAAW;AACjB,SAAK,EAAE,CAAC,QAAQ,EAAE,MAAM,CAAC;AACzB,QAAI,EAAE,gCAAgC;GACvC,EACD;AACE,QAAI,EAAE,QAAQ;AACd,QAAI,EAAE,4CAA4C;AAClD,SAAK,EAAE,CAAC,QAAQ,EAAE,MAAM,CAAC;GAC1B,EACD;AACE,QAAI,EAAE,MAAM;AACZ,SAAK,EAAE,CAAC,SAAS,EAAE,MAAM,CAAC;AAC1B,QAAI,EAAE,oBAAoB;GAC3B,CACF;AACD,MAAI,EAAE,2BAA2B;AACjC,IAAE,EAAE,SAAS,QAAQ,CAAC,IAAI,EAAE;AAC1B,WAAO,KAAK,CAAC,IAAI,EAAE,UAAU,UAAU,EAAE,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,SAAS,EAAE,MAAM,EAAE,IAAI,EAAE;AACtF,gBAAU,CAAC,MAAM,GAAG,UAAU,CAAC,MAAM,IAAI,EAAE,CAAC;AAC5C,gBAAU,CAAC,MAAM,CAAC,MAAM,GAAG,MAAM,IAAI,IAAI,GAAG,SAAS,GAAG,MAAM,CAAC;;AAE/D,UAAI,IAAI,EAAE;AACR,kBAAU,CAAC,MAAM,CAAC,SAAS,GAAG,SAAS,IAAI,IAAI,GAAG,KAAK,GAAG,SAAS,CAAC;OACrE;;AAED,UAAI,IAAI,IAAI,IAAI,EAAE;AAChB,kBAAU,CAAC,MAAM,CAAC,IAAI,GAAI,IAAI,GAAG,EAAE,CAAC;OACrC;;AAED,UAAI,MAAM,IAAI,IAAI,EAAE;AAClB,kBAAU,CAAC,MAAM,CAAC,SAAS,GAAG,MAAM,CAAC;OACtC;;AAED,YAAM,GAAG,MAAM,IAAI,QAAQ,CAAC;AAC5B,UAAI,YAAY,GAAG,CAAC,UAAU,EAAE,OAAO,EAAE,QAAQ,EAAE,SAAS,EAAE,QAAQ,CAAC,CAAC;AACxE,UAAI,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,UAAU,EAAE,OAAO,EAAE,QAAQ,EAAE,SAAS,EAAE,QAAQ,CAAC,EAAE,MAAM,CAAC,EAAE;AAC7E,cAAM,IAAI,KAAK,CAAC,qBAAqB,GAAG,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;OAClE;;AAED,gBAAU,CAAC,MAAM,CAAC,MAAM,GAAG,MAAM,CAAC;;AAElC,gBAAU,CAAC,MAAM,CAAC,IAAI,GAAG,IAAI,IAAI,IAAI,GAAG,IAAI,GAAG,IAAI,CAAC;;AAIpD,aAAO,UAAU,CAAC;KACnB,CAAC,CAAC;GACJ;CACF,CAAC,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/points.js",
      "sourcesContent": [
        "var alter = require('../lib/alter.js');\nvar _ = require('lodash');\n\nvar Chainable = require('../lib/classes/chainable');\nmodule.exports = new Chainable('points', {\n  args: [\n    {\n      name: 'inputSeries',\n      types: ['seriesList']\n    },\n    {\n      name: 'radius',\n      types: ['number', 'null'],\n      help: 'Size of points'\n    },\n    {\n      name: 'weight',\n      types: ['number', 'null'],\n      help: 'Thickness of line around point'\n    },\n    {\n      name: 'fill',\n      types: ['number', 'null'],\n      help: 'Number between 0 and 10 representing opacity of fill'\n    },\n    {\n      name: 'fillColor',\n      types: ['string', 'null'],\n      help: 'Color with which to fill point'\n    },\n    {\n      name: 'symbol',\n      help: 'cross, circle, triangle, square or diamond',\n      types: ['string', 'null']\n    },\n    {\n      name: 'show',\n      types: ['boolean', 'null'],\n      help: 'Show points or not'\n    }\n  ],\n  help: 'Show the series as points',\n  fn: function pointsFn(args) {\n    return alter(args, function (eachSeries, radius, weight, fill, fillColor, symbol, show) {\n      eachSeries.points = eachSeries.points || {};\n      eachSeries.points.radius = radius == null ? undefined : radius;\n\n      if (fill) {\n        eachSeries.points.fillColor = fillColor == null ? false : fillColor;\n      }\n\n      if (fill != null) {\n        eachSeries.points.fill =  fill / 10;\n      }\n\n      if (weight != null) {\n        eachSeries.points.lineWidth = weight;\n      }\n\n      symbol = symbol || 'circle';\n      var validSymbols = ['triangle', 'cross', 'square', 'diamond', 'circle'];\n      if (!_.contains(['triangle', 'cross', 'square', 'diamond', 'circle'], symbol)) {\n        throw new Error('Valid symbols are: ' + validSymbols.join(', '));\n      }\n\n      eachSeries.points.symbol = symbol;\n\n      eachSeries.points.show = show == null ? true : show;\n\n\n\n      return eachSeries;\n    });\n  }\n});\n"
      ]
    },
    "mtime": 1467119944363
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/precision.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar reduce = require('../lib/reduce.js');\nvar alter = require('../lib/alter.js');\n\nvar Chainable = require('../lib/classes/chainable');\nmodule.exports = new Chainable('precision', {\n  args: [{\n    name: 'inputSeries',\n    types: ['seriesList']\n  }, {\n    name: 'precision',\n    types: ['number'],\n    help: 'Number of digits to round each value to'\n  }],\n  help: 'number of digits to round the decimal portion of the value to',\n  fn: function precisionFn(args) {\n    alter(args, function (eachSeries, precision) {\n      eachSeries._meta = eachSeries._meta || {};\n      eachSeries._meta.precision = precision;\n      return eachSeries;\n    });\n\n    return reduce(args, function (a, b) {\n      return parseInt(a * Math.pow(10, b), 10) / Math.pow(10, b);\n    });\n  }\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy9wcmVjaXNpb24uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFJLE1BQU0sR0FBRyxPQUFPLENBQUMsa0JBQWtCLENBQUMsQ0FBQztBQUN6QyxJQUFJLEtBQUssR0FBRyxPQUFPLENBQUMsaUJBQWlCLENBQUMsQ0FBQzs7QUFHdkMsSUFBSSxTQUFTLEdBQUcsT0FBTyxDQUFDLDBCQUEwQixDQUFDLENBQUM7QUFDcEQsTUFBTSxDQUFDLE9BQU8sR0FBRyxJQUFJLFNBQVMsQ0FBQyxXQUFXLEVBQUU7QUFDMUMsTUFBSSxFQUFFLENBQ0o7QUFDRSxRQUFJLEVBQUUsYUFBYTtBQUNuQixTQUFLLEVBQUUsQ0FBQyxZQUFZLENBQUM7R0FDdEIsRUFDRDtBQUNFLFFBQUksRUFBRSxXQUFXO0FBQ2pCLFNBQUssRUFBRSxDQUFDLFFBQVEsQ0FBQztBQUNqQixRQUFJLEVBQUUseUNBQXlDO0dBQ2hELENBQ0Y7QUFDRCxNQUFJLEVBQUUsK0RBQStEO0FBQ3JFLElBQUUsRUFBRSxTQUFTLFdBQVcsQ0FBQyxJQUFJLEVBQUU7QUFDN0IsU0FBSyxDQUFDLElBQUksRUFBRSxVQUFVLFVBQVUsRUFBRSxTQUFTLEVBQUU7QUFDM0MsZ0JBQVUsQ0FBQyxLQUFLLEdBQUcsVUFBVSxDQUFDLEtBQUssSUFBSSxFQUFFLENBQUM7QUFDMUMsZ0JBQVUsQ0FBQyxLQUFLLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQztBQUN2QyxhQUFPLFVBQVUsQ0FBQztLQUNuQixDQUFDLENBQUM7O0FBRUgsV0FBTyxNQUFNLENBQUMsSUFBSSxFQUFFLFVBQVUsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUNsQyxhQUFPLFFBQVEsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7S0FDNUQsQ0FBQyxDQUFDO0dBQ0o7Q0FDRixDQUFDLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9pbnN0YWxsZWRQbHVnaW5zL3RpbWVsaW9uL3NlcnZlci9zZXJpZXNfZnVuY3Rpb25zL3ByZWNpc2lvbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciByZWR1Y2UgPSByZXF1aXJlKCcuLi9saWIvcmVkdWNlLmpzJyk7XG52YXIgYWx0ZXIgPSByZXF1aXJlKCcuLi9saWIvYWx0ZXIuanMnKTtcblxuXG52YXIgQ2hhaW5hYmxlID0gcmVxdWlyZSgnLi4vbGliL2NsYXNzZXMvY2hhaW5hYmxlJyk7XG5tb2R1bGUuZXhwb3J0cyA9IG5ldyBDaGFpbmFibGUoJ3ByZWNpc2lvbicsIHtcbiAgYXJnczogW1xuICAgIHtcbiAgICAgIG5hbWU6ICdpbnB1dFNlcmllcycsXG4gICAgICB0eXBlczogWydzZXJpZXNMaXN0J11cbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICdwcmVjaXNpb24nLFxuICAgICAgdHlwZXM6IFsnbnVtYmVyJ10sXG4gICAgICBoZWxwOiAnTnVtYmVyIG9mIGRpZ2l0cyB0byByb3VuZCBlYWNoIHZhbHVlIHRvJ1xuICAgIH1cbiAgXSxcbiAgaGVscDogJ251bWJlciBvZiBkaWdpdHMgdG8gcm91bmQgdGhlIGRlY2ltYWwgcG9ydGlvbiBvZiB0aGUgdmFsdWUgdG8nLFxuICBmbjogZnVuY3Rpb24gcHJlY2lzaW9uRm4oYXJncykge1xuICAgIGFsdGVyKGFyZ3MsIGZ1bmN0aW9uIChlYWNoU2VyaWVzLCBwcmVjaXNpb24pIHtcbiAgICAgIGVhY2hTZXJpZXMuX21ldGEgPSBlYWNoU2VyaWVzLl9tZXRhIHx8IHt9O1xuICAgICAgZWFjaFNlcmllcy5fbWV0YS5wcmVjaXNpb24gPSBwcmVjaXNpb247XG4gICAgICByZXR1cm4gZWFjaFNlcmllcztcbiAgICB9KTtcblxuICAgIHJldHVybiByZWR1Y2UoYXJncywgZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgIHJldHVybiBwYXJzZUludChhICogTWF0aC5wb3coMTAsIGIpLCAxMCkgLyBNYXRoLnBvdygxMCwgYik7XG4gICAgfSk7XG4gIH1cbn0pO1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/precision.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,MAAM,GAAG,OAAO,CAAC,kBAAkB,CAAC,CAAC;AACzC,IAAI,KAAK,GAAG,OAAO,CAAC,iBAAiB,CAAC,CAAC;;AAGvC,IAAI,SAAS,GAAG,OAAO,CAAC,0BAA0B,CAAC,CAAC;AACpD,MAAM,CAAC,OAAO,GAAG,IAAI,SAAS,CAAC,WAAW,EAAE;AAC1C,MAAI,EAAE,CACJ;AACE,QAAI,EAAE,aAAa;AACnB,SAAK,EAAE,CAAC,YAAY,CAAC;GACtB,EACD;AACE,QAAI,EAAE,WAAW;AACjB,SAAK,EAAE,CAAC,QAAQ,CAAC;AACjB,QAAI,EAAE,yCAAyC;GAChD,CACF;AACD,MAAI,EAAE,+DAA+D;AACrE,IAAE,EAAE,SAAS,WAAW,CAAC,IAAI,EAAE;AAC7B,SAAK,CAAC,IAAI,EAAE,UAAU,UAAU,EAAE,SAAS,EAAE;AAC3C,gBAAU,CAAC,KAAK,GAAG,UAAU,CAAC,KAAK,IAAI,EAAE,CAAC;AAC1C,gBAAU,CAAC,KAAK,CAAC,SAAS,GAAG,SAAS,CAAC;AACvC,aAAO,UAAU,CAAC;KACnB,CAAC,CAAC;;AAEH,WAAO,MAAM,CAAC,IAAI,EAAE,UAAU,CAAC,EAAE,CAAC,EAAE;AAClC,aAAO,QAAQ,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;KAC5D,CAAC,CAAC;GACJ;CACF,CAAC,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/precision.js",
      "sourcesContent": [
        "var reduce = require('../lib/reduce.js');\nvar alter = require('../lib/alter.js');\n\n\nvar Chainable = require('../lib/classes/chainable');\nmodule.exports = new Chainable('precision', {\n  args: [\n    {\n      name: 'inputSeries',\n      types: ['seriesList']\n    },\n    {\n      name: 'precision',\n      types: ['number'],\n      help: 'Number of digits to round each value to'\n    }\n  ],\n  help: 'number of digits to round the decimal portion of the value to',\n  fn: function precisionFn(args) {\n    alter(args, function (eachSeries, precision) {\n      eachSeries._meta = eachSeries._meta || {};\n      eachSeries._meta.precision = precision;\n      return eachSeries;\n    });\n\n    return reduce(args, function (a, b) {\n      return parseInt(a * Math.pow(10, b), 10) / Math.pow(10, b);\n    });\n  }\n});\n"
      ]
    },
    "mtime": 1467119944363
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/quandl.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _ = require('lodash');\nvar fetch = require('node-fetch');\nvar moment = require('moment');\nfetch.Promise = require('bluebird');\n//var parseDateMath = require('../utils/date_math.js');\n\nvar Datasource = require('../lib/classes/datasource');\n\nmodule.exports = new Datasource('quandl', {\n  dataSource: true,\n  args: [{\n    name: 'code',\n    types: ['string', 'null'],\n    help: 'The quandl code to plot. You can find these on quandl.com.'\n  }, {\n    name: 'position',\n    types: ['number', 'null'],\n    help: 'Some quandl sources return multiple series, which one should I use? 1 based index.'\n  }],\n  help: 'Pull data from quandl.com using the quandl code. Stick your free API key in timelion.json. API is rate limited without a key',\n  fn: function quandlFn(args, tlConfig) {\n    var intervalMap = {\n      '1d': 'daily',\n      '1w': 'weekly',\n      '1M': 'monthly',\n      '1y': 'annual'\n    };\n\n    var config = _.defaults(args.byName, {\n      code: 'WIKI/AAPL',\n      position: 1,\n      interval: intervalMap[tlConfig.time.interval],\n      apikey: tlConfig.file.quandl.key\n    });\n\n    if (!config.interval) {\n      throw new Error('quandl() unsupported interval: ' + tlConfig.time.interval + '. quandl() supports: ' + _.keys(intervalMap).join(', '));\n    }\n\n    var time = {\n      min: moment.utc(tlConfig.time.from).format('YYYY-MM-DD'),\n      max: moment.utc(tlConfig.time.to).format('YYYY-MM-DD')\n    };\n\n    // POSITIONS\n    // 1. open\n    // 2. high\n    // 3. low\n    // 4. close\n    // 5. volume\n\n    var URL = 'https://www.quandl.com/api/v1/datasets/' + config.code + '.json' + '?sort_order=asc' + '&trim_start=' + time.min + '&trim_end=' + time.max + '&collapse=' + config.interval + '&auth_token=' + config.apikey;\n\n    return fetch(URL).then(function (resp) {\n      return resp.json();\n    }).then(function (resp) {\n      var data = _.map(resp.data, function (bucket) {\n        return [moment(bucket[0]).valueOf(), bucket[config.position]];\n      });\n\n      return {\n        type: 'seriesList',\n        list: [{\n          data: data,\n          type: 'series',\n          fit: 'nearest',\n          label: resp.name\n        }]\n      };\n    })['catch'](function (e) {\n      throw e;\n    });\n  }\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy9xdWFuZGwuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFJLENBQUMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDMUIsSUFBSSxLQUFLLEdBQUcsT0FBTyxDQUFDLFlBQVksQ0FBQyxDQUFDO0FBQ2xDLElBQUksTUFBTSxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUMvQixLQUFLLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQzs7O0FBSXBDLElBQUksVUFBVSxHQUFHLE9BQU8sQ0FBQywyQkFBMkIsQ0FBQyxDQUFDOztBQUd0RCxNQUFNLENBQUMsT0FBTyxHQUFHLElBQUksVUFBVSxDQUFFLFFBQVEsRUFBRTtBQUN6QyxZQUFVLEVBQUUsSUFBSTtBQUNoQixNQUFJLEVBQUUsQ0FDSjtBQUNFLFFBQUksRUFBRSxNQUFNO0FBQ1osU0FBSyxFQUFFLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQztBQUN6QixRQUFJLEVBQUUsNERBQTREO0dBQ25FLEVBQ0Q7QUFDRSxRQUFJLEVBQUUsVUFBVTtBQUNoQixTQUFLLEVBQUUsQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDO0FBQ3pCLFFBQUksRUFBRSxvRkFBb0Y7R0FDM0YsQ0FDRjtBQUNELE1BQUksRUFBRSw4SEFBOEg7QUFDcEksSUFBRSxFQUFFLFNBQVMsUUFBUSxDQUFDLElBQUksRUFBRSxRQUFRLEVBQUU7QUFDcEMsUUFBSSxXQUFXLEdBQUc7QUFDaEIsVUFBSSxFQUFFLE9BQU87QUFDYixVQUFJLEVBQUUsUUFBUTtBQUNkLFVBQUksRUFBRSxTQUFTO0FBQ2YsVUFBSSxFQUFFLFFBQVE7S0FDZixDQUFDOztBQUVGLFFBQUksTUFBTSxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRTtBQUNuQyxVQUFJLEVBQUUsV0FBVztBQUNqQixjQUFRLEVBQUUsQ0FBQztBQUNYLGNBQVEsRUFBRSxXQUFXLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUM7QUFDN0MsWUFBTSxFQUFFLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUc7S0FDakMsQ0FBQyxDQUFDOztBQUVILFFBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFFO0FBQ3BCLFlBQU0sSUFBSSxLQUFLLENBQUMsaUNBQWlDLEdBQUcsUUFBUSxDQUFDLElBQUksQ0FBQyxRQUFRLEdBQzFFLHVCQUF1QixHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7S0FDM0Q7O0FBRUQsUUFBSSxJQUFJLEdBQUc7QUFDVCxTQUFHLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUM7QUFDeEQsU0FBRyxFQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDO0tBQ3hELENBQUM7Ozs7Ozs7OztBQVNGLFFBQUksR0FBRyxHQUFHLHlDQUF5QyxHQUFHLE1BQU0sQ0FBQyxJQUFJLEdBQUcsT0FBTyxHQUN6RSxpQkFBaUIsR0FDakIsY0FBYyxHQUFHLElBQUksQ0FBQyxHQUFHLEdBQ3pCLFlBQVksR0FBRyxJQUFJLENBQUMsR0FBRyxHQUN2QixZQUFZLEdBQUcsTUFBTSxDQUFDLFFBQVEsR0FDOUIsY0FBYyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7O0FBRWpDLFdBQU8sS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLElBQUksRUFBRTtBQUFFLGFBQU8sSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0tBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLElBQUksRUFBRTtBQUNuRixVQUFJLElBQUksR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsVUFBVSxNQUFNLEVBQUU7QUFDNUMsZUFBTyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLEVBQUUsRUFBRSxNQUFNLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7T0FDL0QsQ0FBQyxDQUFDOztBQUVILGFBQU87QUFDTCxZQUFJLEVBQUUsWUFBWTtBQUNsQixZQUFJLEVBQUUsQ0FBQztBQUNMLGNBQUksRUFBRyxJQUFJO0FBQ1gsY0FBSSxFQUFFLFFBQVE7QUFDZCxhQUFHLEVBQUUsU0FBUztBQUNkLGVBQUssRUFBRSxJQUFJLENBQUMsSUFBSTtTQUNqQixDQUFDO09BQ0gsQ0FBQztLQUNILENBQUMsU0FBTSxDQUFDLFVBQVUsQ0FBQyxFQUFFO0FBQ3BCLFlBQU0sQ0FBQyxDQUFDO0tBQ1QsQ0FBQyxDQUFDO0dBQ0o7Q0FDRixDQUFDLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9pbnN0YWxsZWRQbHVnaW5zL3RpbWVsaW9uL3NlcnZlci9zZXJpZXNfZnVuY3Rpb25zL3F1YW5kbC5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XG52YXIgZmV0Y2ggPSByZXF1aXJlKCdub2RlLWZldGNoJyk7XG52YXIgbW9tZW50ID0gcmVxdWlyZSgnbW9tZW50Jyk7XG5mZXRjaC5Qcm9taXNlID0gcmVxdWlyZSgnYmx1ZWJpcmQnKTtcbi8vdmFyIHBhcnNlRGF0ZU1hdGggPSByZXF1aXJlKCcuLi91dGlscy9kYXRlX21hdGguanMnKTtcblxuXG52YXIgRGF0YXNvdXJjZSA9IHJlcXVpcmUoJy4uL2xpYi9jbGFzc2VzL2RhdGFzb3VyY2UnKTtcblxuXG5tb2R1bGUuZXhwb3J0cyA9IG5ldyBEYXRhc291cmNlICgncXVhbmRsJywge1xuICBkYXRhU291cmNlOiB0cnVlLFxuICBhcmdzOiBbXG4gICAge1xuICAgICAgbmFtZTogJ2NvZGUnLFxuICAgICAgdHlwZXM6IFsnc3RyaW5nJywgJ251bGwnXSxcbiAgICAgIGhlbHA6ICdUaGUgcXVhbmRsIGNvZGUgdG8gcGxvdC4gWW91IGNhbiBmaW5kIHRoZXNlIG9uIHF1YW5kbC5jb20uJ1xuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ3Bvc2l0aW9uJyxcbiAgICAgIHR5cGVzOiBbJ251bWJlcicsICdudWxsJ10sXG4gICAgICBoZWxwOiAnU29tZSBxdWFuZGwgc291cmNlcyByZXR1cm4gbXVsdGlwbGUgc2VyaWVzLCB3aGljaCBvbmUgc2hvdWxkIEkgdXNlPyAxIGJhc2VkIGluZGV4LidcbiAgICB9XG4gIF0sXG4gIGhlbHA6ICdQdWxsIGRhdGEgZnJvbSBxdWFuZGwuY29tIHVzaW5nIHRoZSBxdWFuZGwgY29kZS4gU3RpY2sgeW91ciBmcmVlIEFQSSBrZXkgaW4gdGltZWxpb24uanNvbi4gQVBJIGlzIHJhdGUgbGltaXRlZCB3aXRob3V0IGEga2V5JyxcbiAgZm46IGZ1bmN0aW9uIHF1YW5kbEZuKGFyZ3MsIHRsQ29uZmlnKSB7XG4gICAgdmFyIGludGVydmFsTWFwID0ge1xuICAgICAgJzFkJzogJ2RhaWx5JyxcbiAgICAgICcxdyc6ICd3ZWVrbHknLFxuICAgICAgJzFNJzogJ21vbnRobHknLFxuICAgICAgJzF5JzogJ2FubnVhbCcsXG4gICAgfTtcblxuICAgIHZhciBjb25maWcgPSBfLmRlZmF1bHRzKGFyZ3MuYnlOYW1lLCB7XG4gICAgICBjb2RlOiAnV0lLSS9BQVBMJyxcbiAgICAgIHBvc2l0aW9uOiAxLFxuICAgICAgaW50ZXJ2YWw6IGludGVydmFsTWFwW3RsQ29uZmlnLnRpbWUuaW50ZXJ2YWxdLFxuICAgICAgYXBpa2V5OiB0bENvbmZpZy5maWxlLnF1YW5kbC5rZXlcbiAgICB9KTtcblxuICAgIGlmICghY29uZmlnLmludGVydmFsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ3F1YW5kbCgpIHVuc3VwcG9ydGVkIGludGVydmFsOiAnICsgdGxDb25maWcudGltZS5pbnRlcnZhbCArXG4gICAgICAnLiBxdWFuZGwoKSBzdXBwb3J0czogJyArIF8ua2V5cyhpbnRlcnZhbE1hcCkuam9pbignLCAnKSk7XG4gICAgfVxuXG4gICAgdmFyIHRpbWUgPSB7XG4gICAgICBtaW46IG1vbWVudC51dGModGxDb25maWcudGltZS5mcm9tKS5mb3JtYXQoJ1lZWVktTU0tREQnKSxcbiAgICAgIG1heDogIG1vbWVudC51dGModGxDb25maWcudGltZS50bykuZm9ybWF0KCdZWVlZLU1NLUREJylcbiAgICB9O1xuXG4gICAgLy8gUE9TSVRJT05TXG4gICAgLy8gMS4gb3BlblxuICAgIC8vIDIuIGhpZ2hcbiAgICAvLyAzLiBsb3dcbiAgICAvLyA0LiBjbG9zZVxuICAgIC8vIDUuIHZvbHVtZVxuXG4gICAgdmFyIFVSTCA9ICdodHRwczovL3d3dy5xdWFuZGwuY29tL2FwaS92MS9kYXRhc2V0cy8nICsgY29uZmlnLmNvZGUgKyAnLmpzb24nICtcbiAgICAgICc/c29ydF9vcmRlcj1hc2MnICtcbiAgICAgICcmdHJpbV9zdGFydD0nICsgdGltZS5taW4gK1xuICAgICAgJyZ0cmltX2VuZD0nICsgdGltZS5tYXggK1xuICAgICAgJyZjb2xsYXBzZT0nICsgY29uZmlnLmludGVydmFsICtcbiAgICAgICcmYXV0aF90b2tlbj0nICsgY29uZmlnLmFwaWtleTtcblxuICAgIHJldHVybiBmZXRjaChVUkwpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsgcmV0dXJuIHJlc3AuanNvbigpOyB9KS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7XG4gICAgICB2YXIgZGF0YSA9IF8ubWFwKHJlc3AuZGF0YSwgZnVuY3Rpb24gKGJ1Y2tldCkge1xuICAgICAgICByZXR1cm4gW21vbWVudChidWNrZXRbMF0pLnZhbHVlT2YoKSwgYnVja2V0W2NvbmZpZy5wb3NpdGlvbl1dO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdzZXJpZXNMaXN0JyxcbiAgICAgICAgbGlzdDogW3tcbiAgICAgICAgICBkYXRhOiAgZGF0YSxcbiAgICAgICAgICB0eXBlOiAnc2VyaWVzJyxcbiAgICAgICAgICBmaXQ6ICduZWFyZXN0JyxcbiAgICAgICAgICBsYWJlbDogcmVzcC5uYW1lXG4gICAgICAgIH1dXG4gICAgICB9O1xuICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aHJvdyBlO1xuICAgIH0pO1xuICB9XG59KTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/quandl.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/quandl.js",
      "sourcesContent": [
        "var _ = require('lodash');\nvar fetch = require('node-fetch');\nvar moment = require('moment');\nfetch.Promise = require('bluebird');\n//var parseDateMath = require('../utils/date_math.js');\n\n\nvar Datasource = require('../lib/classes/datasource');\n\n\nmodule.exports = new Datasource ('quandl', {\n  dataSource: true,\n  args: [\n    {\n      name: 'code',\n      types: ['string', 'null'],\n      help: 'The quandl code to plot. You can find these on quandl.com.'\n    },\n    {\n      name: 'position',\n      types: ['number', 'null'],\n      help: 'Some quandl sources return multiple series, which one should I use? 1 based index.'\n    }\n  ],\n  help: 'Pull data from quandl.com using the quandl code. Stick your free API key in timelion.json. API is rate limited without a key',\n  fn: function quandlFn(args, tlConfig) {\n    var intervalMap = {\n      '1d': 'daily',\n      '1w': 'weekly',\n      '1M': 'monthly',\n      '1y': 'annual',\n    };\n\n    var config = _.defaults(args.byName, {\n      code: 'WIKI/AAPL',\n      position: 1,\n      interval: intervalMap[tlConfig.time.interval],\n      apikey: tlConfig.file.quandl.key\n    });\n\n    if (!config.interval) {\n      throw new Error('quandl() unsupported interval: ' + tlConfig.time.interval +\n      '. quandl() supports: ' + _.keys(intervalMap).join(', '));\n    }\n\n    var time = {\n      min: moment.utc(tlConfig.time.from).format('YYYY-MM-DD'),\n      max:  moment.utc(tlConfig.time.to).format('YYYY-MM-DD')\n    };\n\n    // POSITIONS\n    // 1. open\n    // 2. high\n    // 3. low\n    // 4. close\n    // 5. volume\n\n    var URL = 'https://www.quandl.com/api/v1/datasets/' + config.code + '.json' +\n      '?sort_order=asc' +\n      '&trim_start=' + time.min +\n      '&trim_end=' + time.max +\n      '&collapse=' + config.interval +\n      '&auth_token=' + config.apikey;\n\n    return fetch(URL).then(function (resp) { return resp.json(); }).then(function (resp) {\n      var data = _.map(resp.data, function (bucket) {\n        return [moment(bucket[0]).valueOf(), bucket[config.position]];\n      });\n\n      return {\n        type: 'seriesList',\n        list: [{\n          data:  data,\n          type: 'series',\n          fit: 'nearest',\n          label: resp.name\n        }]\n      };\n    }).catch(function (e) {\n      throw e;\n    });\n  }\n});\n"
      ]
    },
    "mtime": 1467119944363
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/range.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar alter = require('../lib/alter.js');\nvar _ = require('lodash');\nvar Chainable = require('../lib/classes/chainable');\nmodule.exports = new Chainable('range', {\n  args: [{\n    name: 'inputSeries',\n    types: ['seriesList']\n  }, {\n    name: 'min',\n    types: ['number'],\n    help: 'New minimum value'\n  }, {\n    name: 'max',\n    types: ['number'],\n    help: 'New maximum value'\n  }],\n  help: 'Changes the max and min of a series while keeping the same shape',\n  fn: function range(args) {\n    return alter(args, function (eachSeries) {\n      var values = _.map(eachSeries.data, 1);\n      var min = _.min(values);\n      var max = _.max(values);\n\n      // newvalue= (max'-min')/(max-min)*(value-min)+min'.\n      var data = _.map(eachSeries.data, function (point) {\n        var val = (args.byName.max - args.byName.min) / (max - min) * (point[1] - min) + args.byName.min;\n        return [point[0], val];\n      });\n      eachSeries.data = data;\n      return eachSeries;\n    });\n  }\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy9yYW5nZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQUksS0FBSyxHQUFHLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0FBQ3ZDLElBQUksQ0FBQyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUMxQixJQUFJLFNBQVMsR0FBRyxPQUFPLENBQUMsMEJBQTBCLENBQUMsQ0FBQztBQUNwRCxNQUFNLENBQUMsT0FBTyxHQUFHLElBQUksU0FBUyxDQUFDLE9BQU8sRUFBRTtBQUN0QyxNQUFJLEVBQUUsQ0FDSjtBQUNFLFFBQUksRUFBRSxhQUFhO0FBQ25CLFNBQUssRUFBRSxDQUFDLFlBQVksQ0FBQztHQUN0QixFQUNEO0FBQ0UsUUFBSSxFQUFFLEtBQUs7QUFDWCxTQUFLLEVBQUUsQ0FBQyxRQUFRLENBQUM7QUFDakIsUUFBSSxFQUFFLG1CQUFtQjtHQUMxQixFQUNEO0FBQ0UsUUFBSSxFQUFFLEtBQUs7QUFDWCxTQUFLLEVBQUUsQ0FBQyxRQUFRLENBQUM7QUFDakIsUUFBSSxFQUFFLG1CQUFtQjtHQUMxQixDQUNGO0FBQ0QsTUFBSSxFQUFFLGtFQUFrRTtBQUN4RSxJQUFFLEVBQUUsU0FBUyxLQUFLLENBQUMsSUFBSSxFQUFFO0FBQ3ZCLFdBQU8sS0FBSyxDQUFDLElBQUksRUFBRSxVQUFVLFVBQVUsRUFBRTtBQUN2QyxVQUFJLE1BQU0sR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDdkMsVUFBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUN4QixVQUFJLEdBQUcsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDOzs7QUFHeEIsVUFBSSxJQUFJLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLFVBQVUsS0FBSyxFQUFFO0FBQ2pELFlBQUksR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUEsSUFDekMsR0FBRyxHQUFHLEdBQUcsQ0FBQSxBQUFDLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQSxBQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUM7QUFDbkQsZUFBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztPQUN4QixDQUFDLENBQUM7QUFDSCxnQkFBVSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7QUFDdkIsYUFBTyxVQUFVLENBQUM7S0FDbkIsQ0FBQyxDQUFDO0dBQ0o7Q0FDRixDQUFDLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9pbnN0YWxsZWRQbHVnaW5zL3RpbWVsaW9uL3NlcnZlci9zZXJpZXNfZnVuY3Rpb25zL3JhbmdlLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGFsdGVyID0gcmVxdWlyZSgnLi4vbGliL2FsdGVyLmpzJyk7XG52YXIgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xudmFyIENoYWluYWJsZSA9IHJlcXVpcmUoJy4uL2xpYi9jbGFzc2VzL2NoYWluYWJsZScpO1xubW9kdWxlLmV4cG9ydHMgPSBuZXcgQ2hhaW5hYmxlKCdyYW5nZScsIHtcbiAgYXJnczogW1xuICAgIHtcbiAgICAgIG5hbWU6ICdpbnB1dFNlcmllcycsXG4gICAgICB0eXBlczogWydzZXJpZXNMaXN0J11cbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICdtaW4nLFxuICAgICAgdHlwZXM6IFsnbnVtYmVyJ10sXG4gICAgICBoZWxwOiAnTmV3IG1pbmltdW0gdmFsdWUnXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAnbWF4JyxcbiAgICAgIHR5cGVzOiBbJ251bWJlciddLFxuICAgICAgaGVscDogJ05ldyBtYXhpbXVtIHZhbHVlJ1xuICAgIH1cbiAgXSxcbiAgaGVscDogJ0NoYW5nZXMgdGhlIG1heCBhbmQgbWluIG9mIGEgc2VyaWVzIHdoaWxlIGtlZXBpbmcgdGhlIHNhbWUgc2hhcGUnLFxuICBmbjogZnVuY3Rpb24gcmFuZ2UoYXJncykge1xuICAgIHJldHVybiBhbHRlcihhcmdzLCBmdW5jdGlvbiAoZWFjaFNlcmllcykge1xuICAgICAgdmFyIHZhbHVlcyA9IF8ubWFwKGVhY2hTZXJpZXMuZGF0YSwgMSk7XG4gICAgICB2YXIgbWluID0gXy5taW4odmFsdWVzKTtcbiAgICAgIHZhciBtYXggPSBfLm1heCh2YWx1ZXMpO1xuXG4gICAgICAvLyBuZXd2YWx1ZT0gKG1heCctbWluJykvKG1heC1taW4pKih2YWx1ZS1taW4pK21pbicuXG4gICAgICB2YXIgZGF0YSA9IF8ubWFwKGVhY2hTZXJpZXMuZGF0YSwgZnVuY3Rpb24gKHBvaW50KSB7XG4gICAgICAgIHZhciB2YWwgPSAoYXJncy5ieU5hbWUubWF4IC0gYXJncy5ieU5hbWUubWluKSAvXG4gICAgICAgICAgKG1heCAtIG1pbikgKiAocG9pbnRbMV0gLSBtaW4pICsgYXJncy5ieU5hbWUubWluO1xuICAgICAgICByZXR1cm4gW3BvaW50WzBdLCB2YWxdO1xuICAgICAgfSk7XG4gICAgICBlYWNoU2VyaWVzLmRhdGEgPSBkYXRhO1xuICAgICAgcmV0dXJuIGVhY2hTZXJpZXM7XG4gICAgfSk7XG4gIH1cbn0pO1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/range.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,KAAK,GAAG,OAAO,CAAC,iBAAiB,CAAC,CAAC;AACvC,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC1B,IAAI,SAAS,GAAG,OAAO,CAAC,0BAA0B,CAAC,CAAC;AACpD,MAAM,CAAC,OAAO,GAAG,IAAI,SAAS,CAAC,OAAO,EAAE;AACtC,MAAI,EAAE,CACJ;AACE,QAAI,EAAE,aAAa;AACnB,SAAK,EAAE,CAAC,YAAY,CAAC;GACtB,EACD;AACE,QAAI,EAAE,KAAK;AACX,SAAK,EAAE,CAAC,QAAQ,CAAC;AACjB,QAAI,EAAE,mBAAmB;GAC1B,EACD;AACE,QAAI,EAAE,KAAK;AACX,SAAK,EAAE,CAAC,QAAQ,CAAC;AACjB,QAAI,EAAE,mBAAmB;GAC1B,CACF;AACD,MAAI,EAAE,kEAAkE;AACxE,IAAE,EAAE,SAAS,KAAK,CAAC,IAAI,EAAE;AACvB,WAAO,KAAK,CAAC,IAAI,EAAE,UAAU,UAAU,EAAE;AACvC,UAAI,MAAM,GAAG,CAAC,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;AACvC,UAAI,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;AACxB,UAAI,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;;;AAGxB,UAAI,IAAI,GAAG,CAAC,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,EAAE,UAAU,KAAK,EAAE;AACjD,YAAI,GAAG,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAA,IACzC,GAAG,GAAG,GAAG,CAAA,AAAC,IAAI,KAAK,CAAC,CAAC,CAAC,GAAG,GAAG,CAAA,AAAC,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC;AACnD,eAAO,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;OACxB,CAAC,CAAC;AACH,gBAAU,CAAC,IAAI,GAAG,IAAI,CAAC;AACvB,aAAO,UAAU,CAAC;KACnB,CAAC,CAAC;GACJ;CACF,CAAC,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/range.js",
      "sourcesContent": [
        "var alter = require('../lib/alter.js');\nvar _ = require('lodash');\nvar Chainable = require('../lib/classes/chainable');\nmodule.exports = new Chainable('range', {\n  args: [\n    {\n      name: 'inputSeries',\n      types: ['seriesList']\n    },\n    {\n      name: 'min',\n      types: ['number'],\n      help: 'New minimum value'\n    },\n    {\n      name: 'max',\n      types: ['number'],\n      help: 'New maximum value'\n    }\n  ],\n  help: 'Changes the max and min of a series while keeping the same shape',\n  fn: function range(args) {\n    return alter(args, function (eachSeries) {\n      var values = _.map(eachSeries.data, 1);\n      var min = _.min(values);\n      var max = _.max(values);\n\n      // newvalue= (max'-min')/(max-min)*(value-min)+min'.\n      var data = _.map(eachSeries.data, function (point) {\n        var val = (args.byName.max - args.byName.min) /\n          (max - min) * (point[1] - min) + args.byName.min;\n        return [point[0], val];\n      });\n      eachSeries.data = data;\n      return eachSeries;\n    });\n  }\n});\n"
      ]
    },
    "mtime": 1467119944363
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/scale_interval.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar alter = require('../lib/alter.js');\nvar toMS = require('../lib/to_milliseconds.js');\n\nvar _ = require('lodash');\nvar Chainable = require('../lib/classes/chainable');\nmodule.exports = new Chainable('scale_interval', {\n  args: [{\n    name: 'inputSeries',\n    types: ['seriesList']\n  }, {\n    name: 'interval',\n    types: ['string'],\n    help: 'The new interval in date math notation, eg 1s for 1 second. 1m, 5m, 1M, 1w, 1y, etc.'\n  }],\n  help: 'Changes scales a value (usually a sum or a count) to a new interval. For example, as a per-second rate',\n  fn: function scaleIntervalFn(args, tlConfig) {\n    var currentInterval = toMS(tlConfig.time.interval);\n    var scaleInterval = toMS(args.byName.interval);\n\n    return alter(args, function (eachSeries) {\n      var data = _.map(eachSeries.data, function (point) {\n        return [point[0], point[1] / currentInterval * scaleInterval];\n      });\n      eachSeries.data = data;\n      return eachSeries;\n    });\n  }\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy9zY2FsZV9pbnRlcnZhbC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQUksS0FBSyxHQUFHLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0FBQ3ZDLElBQUksSUFBSSxHQUFHLE9BQU8sQ0FBQywyQkFBMkIsQ0FBQyxDQUFDOztBQUVoRCxJQUFJLENBQUMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDMUIsSUFBSSxTQUFTLEdBQUcsT0FBTyxDQUFDLDBCQUEwQixDQUFDLENBQUM7QUFDcEQsTUFBTSxDQUFDLE9BQU8sR0FBRyxJQUFJLFNBQVMsQ0FBQyxnQkFBZ0IsRUFBRTtBQUMvQyxNQUFJLEVBQUUsQ0FDSjtBQUNFLFFBQUksRUFBRSxhQUFhO0FBQ25CLFNBQUssRUFBRSxDQUFDLFlBQVksQ0FBQztHQUN0QixFQUNEO0FBQ0UsUUFBSSxFQUFFLFVBQVU7QUFDaEIsU0FBSyxFQUFFLENBQUMsUUFBUSxDQUFDO0FBQ2pCLFFBQUksRUFBRSxzRkFBc0Y7R0FDN0YsQ0FDRjtBQUNELE1BQUksRUFBRSx3R0FBd0c7QUFDOUcsSUFBRSxFQUFFLFNBQVMsZUFBZSxDQUFDLElBQUksRUFBRSxRQUFRLEVBQUU7QUFDM0MsUUFBSSxlQUFlLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDbkQsUUFBSSxhQUFhLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUM7O0FBRS9DLFdBQU8sS0FBSyxDQUFDLElBQUksRUFBRSxVQUFVLFVBQVUsRUFBRTtBQUN2QyxVQUFJLElBQUksR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxJQUFJLEVBQUUsVUFBVSxLQUFLLEVBQUU7QUFDakQsZUFBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxBQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxlQUFlLEdBQUksYUFBYSxDQUFDLENBQUM7T0FDakUsQ0FBQyxDQUFDO0FBQ0gsZ0JBQVUsQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO0FBQ3ZCLGFBQU8sVUFBVSxDQUFDO0tBQ25CLENBQUMsQ0FBQztHQUNKO0NBQ0YsQ0FBQyxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy9zY2FsZV9pbnRlcnZhbC5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBhbHRlciA9IHJlcXVpcmUoJy4uL2xpYi9hbHRlci5qcycpO1xudmFyIHRvTVMgPSByZXF1aXJlKCcuLi9saWIvdG9fbWlsbGlzZWNvbmRzLmpzJyk7XG5cbnZhciBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XG52YXIgQ2hhaW5hYmxlID0gcmVxdWlyZSgnLi4vbGliL2NsYXNzZXMvY2hhaW5hYmxlJyk7XG5tb2R1bGUuZXhwb3J0cyA9IG5ldyBDaGFpbmFibGUoJ3NjYWxlX2ludGVydmFsJywge1xuICBhcmdzOiBbXG4gICAge1xuICAgICAgbmFtZTogJ2lucHV0U2VyaWVzJyxcbiAgICAgIHR5cGVzOiBbJ3Nlcmllc0xpc3QnXVxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ2ludGVydmFsJyxcbiAgICAgIHR5cGVzOiBbJ3N0cmluZyddLFxuICAgICAgaGVscDogJ1RoZSBuZXcgaW50ZXJ2YWwgaW4gZGF0ZSBtYXRoIG5vdGF0aW9uLCBlZyAxcyBmb3IgMSBzZWNvbmQuIDFtLCA1bSwgMU0sIDF3LCAxeSwgZXRjLidcbiAgICB9XG4gIF0sXG4gIGhlbHA6ICdDaGFuZ2VzIHNjYWxlcyBhIHZhbHVlICh1c3VhbGx5IGEgc3VtIG9yIGEgY291bnQpIHRvIGEgbmV3IGludGVydmFsLiBGb3IgZXhhbXBsZSwgYXMgYSBwZXItc2Vjb25kIHJhdGUnLFxuICBmbjogZnVuY3Rpb24gc2NhbGVJbnRlcnZhbEZuKGFyZ3MsIHRsQ29uZmlnKSB7XG4gICAgdmFyIGN1cnJlbnRJbnRlcnZhbCA9IHRvTVModGxDb25maWcudGltZS5pbnRlcnZhbCk7XG4gICAgdmFyIHNjYWxlSW50ZXJ2YWwgPSB0b01TKGFyZ3MuYnlOYW1lLmludGVydmFsKTtcblxuICAgIHJldHVybiBhbHRlcihhcmdzLCBmdW5jdGlvbiAoZWFjaFNlcmllcykge1xuICAgICAgdmFyIGRhdGEgPSBfLm1hcChlYWNoU2VyaWVzLmRhdGEsIGZ1bmN0aW9uIChwb2ludCkge1xuICAgICAgICByZXR1cm4gW3BvaW50WzBdLCAocG9pbnRbMV0gLyBjdXJyZW50SW50ZXJ2YWwpICogc2NhbGVJbnRlcnZhbF07XG4gICAgICB9KTtcbiAgICAgIGVhY2hTZXJpZXMuZGF0YSA9IGRhdGE7XG4gICAgICByZXR1cm4gZWFjaFNlcmllcztcbiAgICB9KTtcbiAgfVxufSk7XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/scale_interval.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,KAAK,GAAG,OAAO,CAAC,iBAAiB,CAAC,CAAC;AACvC,IAAI,IAAI,GAAG,OAAO,CAAC,2BAA2B,CAAC,CAAC;;AAEhD,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC1B,IAAI,SAAS,GAAG,OAAO,CAAC,0BAA0B,CAAC,CAAC;AACpD,MAAM,CAAC,OAAO,GAAG,IAAI,SAAS,CAAC,gBAAgB,EAAE;AAC/C,MAAI,EAAE,CACJ;AACE,QAAI,EAAE,aAAa;AACnB,SAAK,EAAE,CAAC,YAAY,CAAC;GACtB,EACD;AACE,QAAI,EAAE,UAAU;AAChB,SAAK,EAAE,CAAC,QAAQ,CAAC;AACjB,QAAI,EAAE,sFAAsF;GAC7F,CACF;AACD,MAAI,EAAE,wGAAwG;AAC9G,IAAE,EAAE,SAAS,eAAe,CAAC,IAAI,EAAE,QAAQ,EAAE;AAC3C,QAAI,eAAe,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AACnD,QAAI,aAAa,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;;AAE/C,WAAO,KAAK,CAAC,IAAI,EAAE,UAAU,UAAU,EAAE;AACvC,UAAI,IAAI,GAAG,CAAC,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,EAAE,UAAU,KAAK,EAAE;AACjD,eAAO,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,AAAC,KAAK,CAAC,CAAC,CAAC,GAAG,eAAe,GAAI,aAAa,CAAC,CAAC;OACjE,CAAC,CAAC;AACH,gBAAU,CAAC,IAAI,GAAG,IAAI,CAAC;AACvB,aAAO,UAAU,CAAC;KACnB,CAAC,CAAC;GACJ;CACF,CAAC,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/scale_interval.js",
      "sourcesContent": [
        "var alter = require('../lib/alter.js');\nvar toMS = require('../lib/to_milliseconds.js');\n\nvar _ = require('lodash');\nvar Chainable = require('../lib/classes/chainable');\nmodule.exports = new Chainable('scale_interval', {\n  args: [\n    {\n      name: 'inputSeries',\n      types: ['seriesList']\n    },\n    {\n      name: 'interval',\n      types: ['string'],\n      help: 'The new interval in date math notation, eg 1s for 1 second. 1m, 5m, 1M, 1w, 1y, etc.'\n    }\n  ],\n  help: 'Changes scales a value (usually a sum or a count) to a new interval. For example, as a per-second rate',\n  fn: function scaleIntervalFn(args, tlConfig) {\n    var currentInterval = toMS(tlConfig.time.interval);\n    var scaleInterval = toMS(args.byName.interval);\n\n    return alter(args, function (eachSeries) {\n      var data = _.map(eachSeries.data, function (point) {\n        return [point[0], (point[1] / currentInterval) * scaleInterval];\n      });\n      eachSeries.data = data;\n      return eachSeries;\n    });\n  }\n});\n"
      ]
    },
    "mtime": 1467119944363
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/lib/to_milliseconds.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _ = require('lodash');\nvar moment = require('moment');\n\n// map of moment's short/long unit ids and elasticsearch's long unit ids\n// to their value in milliseconds\nvar vals = _.transform([['ms', 'milliseconds', 'millisecond'], ['s', 'seconds', 'second', 'sec'], ['m', 'minutes', 'minute', 'min'], ['h', 'hours', 'hour'], ['d', 'days', 'day'], ['w', 'weeks', 'week'], ['M', 'months', 'month'], ['quarter'], ['y', 'years', 'year']], function (vals, units) {\n  var normal = moment.normalizeUnits(units[0]);\n  var val = moment.duration(1, normal).asMilliseconds();\n  [].concat(normal, units).forEach(function (unit) {\n    vals[unit] = val;\n  });\n}, {});\n// match any key from the vals object prececed by an optional number\nvar parseRE = new RegExp('^(\\\\d+(?:\\\\.\\\\d*)?)?\\\\s*(' + _.keys(vals).join('|') + ')$');\n\nmodule.exports = function (expr) {\n  var match = expr.match(parseRE);\n  if (match) {\n    if (match[2] === 'M' && match[1] !== '1') {\n      throw new Error('Invalid interval. 1M is only valid monthly interval.');\n    }\n\n    return parseFloat(match[1] || 1) * vals[match[2]];\n  }\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvbGliL3RvX21pbGxpc2Vjb25kcy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQUksQ0FBQyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUMxQixJQUFJLE1BQU0sR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7Ozs7QUFJL0IsSUFBSSxJQUFJLEdBQUcsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUNyQixDQUFDLElBQUksRUFBRSxjQUFjLEVBQUUsYUFBYSxDQUFDLEVBQ3JDLENBQUMsR0FBRyxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQUUsS0FBSyxDQUFDLEVBQ2pDLENBQUMsR0FBRyxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQUUsS0FBSyxDQUFDLEVBQ2pDLENBQUMsR0FBRyxFQUFFLE9BQU8sRUFBRSxNQUFNLENBQUMsRUFDdEIsQ0FBQyxHQUFHLEVBQUUsTUFBTSxFQUFFLEtBQUssQ0FBQyxFQUNwQixDQUFDLEdBQUcsRUFBRSxPQUFPLEVBQUUsTUFBTSxDQUFDLEVBQ3RCLENBQUMsR0FBRyxFQUFFLFFBQVEsRUFBRSxPQUFPLENBQUMsRUFDeEIsQ0FBQyxTQUFTLENBQUMsRUFDWCxDQUFDLEdBQUcsRUFBRyxPQUFPLEVBQUUsTUFBTSxDQUFDLENBQ3hCLEVBQUUsVUFBVSxJQUFJLEVBQUUsS0FBSyxFQUFFO0FBQ3hCLE1BQUksTUFBTSxHQUFHLE1BQU0sQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDN0MsTUFBSSxHQUFHLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsY0FBYyxFQUFFLENBQUM7QUFDdEQsSUFBRSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsS0FBSyxDQUFDLENBQUMsT0FBTyxDQUFDLFVBQVUsSUFBSSxFQUFFO0FBQy9DLFFBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxHQUFHLENBQUM7R0FDbEIsQ0FBQyxDQUFDO0NBQ0osRUFBRSxFQUFFLENBQUMsQ0FBQzs7QUFFUCxJQUFJLE9BQU8sR0FBRyxJQUFJLE1BQU0sQ0FBQywyQkFBMkIsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQzs7QUFFdEYsTUFBTSxDQUFDLE9BQU8sR0FBRyxVQUFVLElBQUksRUFBRTtBQUMvQixNQUFJLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQ2hDLE1BQUksS0FBSyxFQUFFO0FBQ1QsUUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxHQUFHLEVBQUU7QUFDeEMsWUFBTSxJQUFJLEtBQUssQ0FBRSxzREFBc0QsQ0FBQyxDQUFDO0tBQzFFOztBQUVELFdBQU8sVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7R0FDbkQ7Q0FDRixDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvbGliL3RvX21pbGxpc2Vjb25kcy5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XG52YXIgbW9tZW50ID0gcmVxdWlyZSgnbW9tZW50Jyk7XG5cbi8vIG1hcCBvZiBtb21lbnQncyBzaG9ydC9sb25nIHVuaXQgaWRzIGFuZCBlbGFzdGljc2VhcmNoJ3MgbG9uZyB1bml0IGlkc1xuLy8gdG8gdGhlaXIgdmFsdWUgaW4gbWlsbGlzZWNvbmRzXG52YXIgdmFscyA9IF8udHJhbnNmb3JtKFtcbiAgWydtcycsICdtaWxsaXNlY29uZHMnLCAnbWlsbGlzZWNvbmQnXSxcbiAgWydzJywgJ3NlY29uZHMnLCAnc2Vjb25kJywgJ3NlYyddLFxuICBbJ20nLCAnbWludXRlcycsICdtaW51dGUnLCAnbWluJ10sXG4gIFsnaCcsICdob3VycycsICdob3VyJ10sXG4gIFsnZCcsICdkYXlzJywgJ2RheSddLFxuICBbJ3cnLCAnd2Vla3MnLCAnd2VlayddLFxuICBbJ00nLCAnbW9udGhzJywgJ21vbnRoJ10sXG4gIFsncXVhcnRlciddLFxuICBbJ3knLCAgJ3llYXJzJywgJ3llYXInXVxuXSwgZnVuY3Rpb24gKHZhbHMsIHVuaXRzKSB7XG4gIHZhciBub3JtYWwgPSBtb21lbnQubm9ybWFsaXplVW5pdHModW5pdHNbMF0pO1xuICB2YXIgdmFsID0gbW9tZW50LmR1cmF0aW9uKDEsIG5vcm1hbCkuYXNNaWxsaXNlY29uZHMoKTtcbiAgW10uY29uY2F0KG5vcm1hbCwgdW5pdHMpLmZvckVhY2goZnVuY3Rpb24gKHVuaXQpIHtcbiAgICB2YWxzW3VuaXRdID0gdmFsO1xuICB9KTtcbn0sIHt9KTtcbi8vIG1hdGNoIGFueSBrZXkgZnJvbSB0aGUgdmFscyBvYmplY3QgcHJlY2VjZWQgYnkgYW4gb3B0aW9uYWwgbnVtYmVyXG52YXIgcGFyc2VSRSA9IG5ldyBSZWdFeHAoJ14oXFxcXGQrKD86XFxcXC5cXFxcZCopPyk/XFxcXHMqKCcgKyBfLmtleXModmFscykuam9pbignfCcpICsgJykkJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGV4cHIpIHtcbiAgdmFyIG1hdGNoID0gZXhwci5tYXRjaChwYXJzZVJFKTtcbiAgaWYgKG1hdGNoKSB7XG4gICAgaWYgKG1hdGNoWzJdID09PSAnTScgJiYgbWF0Y2hbMV0gIT09ICcxJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yICgnSW52YWxpZCBpbnRlcnZhbC4gMU0gaXMgb25seSB2YWxpZCBtb250aGx5IGludGVydmFsLicpO1xuICAgIH1cblxuICAgIHJldHVybiBwYXJzZUZsb2F0KG1hdGNoWzFdIHx8IDEpICogdmFsc1ttYXRjaFsyXV07XG4gIH1cbn07Il19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/lib/to_milliseconds.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC1B,IAAI,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;;;;AAI/B,IAAI,IAAI,GAAG,CAAC,CAAC,SAAS,CAAC,CACrB,CAAC,IAAI,EAAE,cAAc,EAAE,aAAa,CAAC,EACrC,CAAC,GAAG,EAAE,SAAS,EAAE,QAAQ,EAAE,KAAK,CAAC,EACjC,CAAC,GAAG,EAAE,SAAS,EAAE,QAAQ,EAAE,KAAK,CAAC,EACjC,CAAC,GAAG,EAAE,OAAO,EAAE,MAAM,CAAC,EACtB,CAAC,GAAG,EAAE,MAAM,EAAE,KAAK,CAAC,EACpB,CAAC,GAAG,EAAE,OAAO,EAAE,MAAM,CAAC,EACtB,CAAC,GAAG,EAAE,QAAQ,EAAE,OAAO,CAAC,EACxB,CAAC,SAAS,CAAC,EACX,CAAC,GAAG,EAAG,OAAO,EAAE,MAAM,CAAC,CACxB,EAAE,UAAU,IAAI,EAAE,KAAK,EAAE;AACxB,MAAI,MAAM,GAAG,MAAM,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;AAC7C,MAAI,GAAG,GAAG,MAAM,CAAC,QAAQ,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,cAAc,EAAE,CAAC;AACtD,IAAE,CAAC,MAAM,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC,OAAO,CAAC,UAAU,IAAI,EAAE;AAC/C,QAAI,CAAC,IAAI,CAAC,GAAG,GAAG,CAAC;GAClB,CAAC,CAAC;CACJ,EAAE,EAAE,CAAC,CAAC;;AAEP,IAAI,OAAO,GAAG,IAAI,MAAM,CAAC,2BAA2B,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,CAAC;;AAEtF,MAAM,CAAC,OAAO,GAAG,UAAU,IAAI,EAAE;AAC/B,MAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;AAChC,MAAI,KAAK,EAAE;AACT,QAAI,KAAK,CAAC,CAAC,CAAC,KAAK,GAAG,IAAI,KAAK,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;AACxC,YAAM,IAAI,KAAK,CAAE,sDAAsD,CAAC,CAAC;KAC1E;;AAED,WAAO,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;GACnD;CACF,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/lib/to_milliseconds.js",
      "sourcesContent": [
        "var _ = require('lodash');\nvar moment = require('moment');\n\n// map of moment's short/long unit ids and elasticsearch's long unit ids\n// to their value in milliseconds\nvar vals = _.transform([\n  ['ms', 'milliseconds', 'millisecond'],\n  ['s', 'seconds', 'second', 'sec'],\n  ['m', 'minutes', 'minute', 'min'],\n  ['h', 'hours', 'hour'],\n  ['d', 'days', 'day'],\n  ['w', 'weeks', 'week'],\n  ['M', 'months', 'month'],\n  ['quarter'],\n  ['y',  'years', 'year']\n], function (vals, units) {\n  var normal = moment.normalizeUnits(units[0]);\n  var val = moment.duration(1, normal).asMilliseconds();\n  [].concat(normal, units).forEach(function (unit) {\n    vals[unit] = val;\n  });\n}, {});\n// match any key from the vals object prececed by an optional number\nvar parseRE = new RegExp('^(\\\\d+(?:\\\\.\\\\d*)?)?\\\\s*(' + _.keys(vals).join('|') + ')$');\n\nmodule.exports = function (expr) {\n  var match = expr.match(parseRE);\n  if (match) {\n    if (match[2] === 'M' && match[1] !== '1') {\n      throw new Error ('Invalid interval. 1M is only valid monthly interval.');\n    }\n\n    return parseFloat(match[1] || 1) * vals[match[2]];\n  }\n};"
      ]
    },
    "mtime": 1467119944363
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/static.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _ = require('lodash');\nvar fetch = require('node-fetch');\nvar moment = require('moment');\nvar Datasource = require('../lib/classes/datasource');\nvar Promise = require('bluebird');\n\nmodule.exports = new Datasource('static', {\n  aliases: ['value'],\n  args: [{\n    name: 'value', // _test-data.users.*.data\n    types: ['number', 'string'],\n    help: 'The single value to to display, you can also pass several values and I will interpolate them evenly ' + 'across your time range.'\n  }, {\n    name: 'label',\n    types: ['string', 'null'],\n    help: 'A quick way to set the label for the series. You could also use the .label() function'\n  }],\n  help: 'Draws a single value across the chart',\n  fn: function staticFn(args, tlConfig) {\n\n    var data;\n    var target = tlConfig.getTargetSeries();\n    if (typeof args.byName.value === 'string') {\n      var points = args.byName.value.split(':');\n      var begin = _.first(target)[0];\n      var end = _.last(target)[0];\n      var step = (end - begin) / (points.length - 1);\n      data = _.map(points, function (point, i) {\n        return [begin + i * step, parseFloat(point)];\n      });\n    } else {\n      data = _.map(target, function (bucket) {\n        return [bucket[0], args.byName.value];\n      });\n    }\n\n    return Promise.resolve({\n      type: 'seriesList',\n      list: [{\n        data: data,\n        type: 'series',\n        label: args.byName.label == null ? String(args.byName.value) : args.byName.label,\n        fit: args.byName.fit || 'average'\n      }]\n    });\n  }\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy9zdGF0aWMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFJLENBQUMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDMUIsSUFBSSxLQUFLLEdBQUcsT0FBTyxDQUFDLFlBQVksQ0FBQyxDQUFDO0FBQ2xDLElBQUksTUFBTSxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUMvQixJQUFJLFVBQVUsR0FBRyxPQUFPLENBQUMsMkJBQTJCLENBQUMsQ0FBQztBQUN0RCxJQUFJLE9BQU8sR0FBRyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUM7O0FBR2xDLE1BQU0sQ0FBQyxPQUFPLEdBQUcsSUFBSSxVQUFVLENBQUUsUUFBUSxFQUFFO0FBQ3pDLFNBQU8sRUFBRSxDQUFDLE9BQU8sQ0FBQztBQUNsQixNQUFJLEVBQUUsQ0FDSjtBQUNFLFFBQUksRUFBRSxPQUFPO0FBQ2IsU0FBSyxFQUFFLENBQUMsUUFBUSxFQUFFLFFBQVEsQ0FBQztBQUMzQixRQUFJLEVBQUUsc0dBQXNHLEdBQzFHLHlCQUF5QjtHQUM1QixFQUNEO0FBQ0UsUUFBSSxFQUFFLE9BQU87QUFDYixTQUFLLEVBQUUsQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDO0FBQ3pCLFFBQUksRUFBRSx1RkFBdUY7R0FDOUYsQ0FDRjtBQUNELE1BQUksRUFBRSx1Q0FBdUM7QUFDN0MsSUFBRSxFQUFFLFNBQVMsUUFBUSxDQUFDLElBQUksRUFBRSxRQUFRLEVBQUU7O0FBRXBDLFFBQUksSUFBSSxDQUFDO0FBQ1QsUUFBSSxNQUFNLEdBQUcsUUFBUSxDQUFDLGVBQWUsRUFBRSxDQUFDO0FBQ3hDLFFBQUksT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssS0FBSyxRQUFRLEVBQUU7QUFDekMsVUFBSSxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQzFDLFVBQUksS0FBSyxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDL0IsVUFBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM1QixVQUFJLElBQUksR0FBRyxDQUFDLEdBQUcsR0FBRyxLQUFLLENBQUEsSUFBSyxNQUFNLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQSxBQUFDLENBQUM7QUFDL0MsVUFBSSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLFVBQVUsS0FBSyxFQUFFLENBQUMsRUFBRTtBQUN2QyxlQUFPLENBQUMsS0FBSyxHQUFJLENBQUMsR0FBRyxJQUFJLEFBQUMsRUFBRSxVQUFVLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztPQUNoRCxDQUFDLENBQUM7S0FDSixNQUFNO0FBQ0wsVUFBSSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLFVBQVUsTUFBTSxFQUFFO0FBQ3JDLGVBQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztPQUN2QyxDQUFDLENBQUM7S0FDSjs7QUFFRCxXQUFPLE9BQU8sQ0FBQyxPQUFPLENBQUM7QUFDckIsVUFBSSxFQUFFLFlBQVk7QUFDbEIsVUFBSSxFQUFFLENBQ0o7QUFDRSxZQUFJLEVBQUUsSUFBSTtBQUNWLFlBQUksRUFBRSxRQUFRO0FBQ2QsYUFBSyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxJQUFJLElBQUksR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUs7QUFDaEYsV0FBRyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxJQUFJLFNBQVM7T0FDbEMsQ0FDRjtLQUNGLENBQUMsQ0FBQztHQUNKO0NBQ0YsQ0FBQyxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy9zdGF0aWMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xudmFyIGZldGNoID0gcmVxdWlyZSgnbm9kZS1mZXRjaCcpO1xudmFyIG1vbWVudCA9IHJlcXVpcmUoJ21vbWVudCcpO1xudmFyIERhdGFzb3VyY2UgPSByZXF1aXJlKCcuLi9saWIvY2xhc3Nlcy9kYXRhc291cmNlJyk7XG52YXIgUHJvbWlzZSA9IHJlcXVpcmUoJ2JsdWViaXJkJyk7XG5cblxubW9kdWxlLmV4cG9ydHMgPSBuZXcgRGF0YXNvdXJjZSAoJ3N0YXRpYycsIHtcbiAgYWxpYXNlczogWyd2YWx1ZSddLFxuICBhcmdzOiBbXG4gICAge1xuICAgICAgbmFtZTogJ3ZhbHVlJywgLy8gX3Rlc3QtZGF0YS51c2Vycy4qLmRhdGFcbiAgICAgIHR5cGVzOiBbJ251bWJlcicsICdzdHJpbmcnXSxcbiAgICAgIGhlbHA6ICdUaGUgc2luZ2xlIHZhbHVlIHRvIHRvIGRpc3BsYXksIHlvdSBjYW4gYWxzbyBwYXNzIHNldmVyYWwgdmFsdWVzIGFuZCBJIHdpbGwgaW50ZXJwb2xhdGUgdGhlbSBldmVubHkgJyArXG4gICAgICAgICdhY3Jvc3MgeW91ciB0aW1lIHJhbmdlLidcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICdsYWJlbCcsXG4gICAgICB0eXBlczogWydzdHJpbmcnLCAnbnVsbCddLFxuICAgICAgaGVscDogJ0EgcXVpY2sgd2F5IHRvIHNldCB0aGUgbGFiZWwgZm9yIHRoZSBzZXJpZXMuIFlvdSBjb3VsZCBhbHNvIHVzZSB0aGUgLmxhYmVsKCkgZnVuY3Rpb24nXG4gICAgfVxuICBdLFxuICBoZWxwOiAnRHJhd3MgYSBzaW5nbGUgdmFsdWUgYWNyb3NzIHRoZSBjaGFydCcsXG4gIGZuOiBmdW5jdGlvbiBzdGF0aWNGbihhcmdzLCB0bENvbmZpZykge1xuXG4gICAgdmFyIGRhdGE7XG4gICAgdmFyIHRhcmdldCA9IHRsQ29uZmlnLmdldFRhcmdldFNlcmllcygpO1xuICAgIGlmICh0eXBlb2YgYXJncy5ieU5hbWUudmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICB2YXIgcG9pbnRzID0gYXJncy5ieU5hbWUudmFsdWUuc3BsaXQoJzonKTtcbiAgICAgIHZhciBiZWdpbiA9IF8uZmlyc3QodGFyZ2V0KVswXTtcbiAgICAgIHZhciBlbmQgPSBfLmxhc3QodGFyZ2V0KVswXTtcbiAgICAgIHZhciBzdGVwID0gKGVuZCAtIGJlZ2luKSAvIChwb2ludHMubGVuZ3RoIC0gMSk7XG4gICAgICBkYXRhID0gXy5tYXAocG9pbnRzLCBmdW5jdGlvbiAocG9pbnQsIGkpIHtcbiAgICAgICAgcmV0dXJuIFtiZWdpbiArIChpICogc3RlcCksIHBhcnNlRmxvYXQocG9pbnQpXTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBkYXRhID0gXy5tYXAodGFyZ2V0LCBmdW5jdGlvbiAoYnVja2V0KSB7XG4gICAgICAgIHJldHVybiBbYnVja2V0WzBdLCBhcmdzLmJ5TmFtZS52YWx1ZV07XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgIHR5cGU6ICdzZXJpZXNMaXN0JyxcbiAgICAgIGxpc3Q6IFtcbiAgICAgICAge1xuICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgICAgdHlwZTogJ3NlcmllcycsXG4gICAgICAgICAgbGFiZWw6IGFyZ3MuYnlOYW1lLmxhYmVsID09IG51bGwgPyBTdHJpbmcoYXJncy5ieU5hbWUudmFsdWUpIDogYXJncy5ieU5hbWUubGFiZWwsXG4gICAgICAgICAgZml0OiBhcmdzLmJ5TmFtZS5maXQgfHwgJ2F2ZXJhZ2UnXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KTtcbiAgfVxufSk7XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/static.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC1B,IAAI,KAAK,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC;AAClC,IAAI,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC/B,IAAI,UAAU,GAAG,OAAO,CAAC,2BAA2B,CAAC,CAAC;AACtD,IAAI,OAAO,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;;AAGlC,MAAM,CAAC,OAAO,GAAG,IAAI,UAAU,CAAE,QAAQ,EAAE;AACzC,SAAO,EAAE,CAAC,OAAO,CAAC;AAClB,MAAI,EAAE,CACJ;AACE,QAAI,EAAE,OAAO;AACb,SAAK,EAAE,CAAC,QAAQ,EAAE,QAAQ,CAAC;AAC3B,QAAI,EAAE,sGAAsG,GAC1G,yBAAyB;GAC5B,EACD;AACE,QAAI,EAAE,OAAO;AACb,SAAK,EAAE,CAAC,QAAQ,EAAE,MAAM,CAAC;AACzB,QAAI,EAAE,uFAAuF;GAC9F,CACF;AACD,MAAI,EAAE,uCAAuC;AAC7C,IAAE,EAAE,SAAS,QAAQ,CAAC,IAAI,EAAE,QAAQ,EAAE;;AAEpC,QAAI,IAAI,CAAC;AACT,QAAI,MAAM,GAAG,QAAQ,CAAC,eAAe,EAAE,CAAC;AACxC,QAAI,OAAO,IAAI,CAAC,MAAM,CAAC,KAAK,KAAK,QAAQ,EAAE;AACzC,UAAI,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AAC1C,UAAI,KAAK,GAAG,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;AAC/B,UAAI,GAAG,GAAG,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;AAC5B,UAAI,IAAI,GAAG,CAAC,GAAG,GAAG,KAAK,CAAA,IAAK,MAAM,CAAC,MAAM,GAAG,CAAC,CAAA,AAAC,CAAC;AAC/C,UAAI,GAAG,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,UAAU,KAAK,EAAE,CAAC,EAAE;AACvC,eAAO,CAAC,KAAK,GAAI,CAAC,GAAG,IAAI,AAAC,EAAE,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC;OAChD,CAAC,CAAC;KACJ,MAAM;AACL,UAAI,GAAG,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,UAAU,MAAM,EAAE;AACrC,eAAO,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;OACvC,CAAC,CAAC;KACJ;;AAED,WAAO,OAAO,CAAC,OAAO,CAAC;AACrB,UAAI,EAAE,YAAY;AAClB,UAAI,EAAE,CACJ;AACE,YAAI,EAAE,IAAI;AACV,YAAI,EAAE,QAAQ;AACd,aAAK,EAAE,IAAI,CAAC,MAAM,CAAC,KAAK,IAAI,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK;AAChF,WAAG,EAAE,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,SAAS;OAClC,CACF;KACF,CAAC,CAAC;GACJ;CACF,CAAC,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/static.js",
      "sourcesContent": [
        "var _ = require('lodash');\nvar fetch = require('node-fetch');\nvar moment = require('moment');\nvar Datasource = require('../lib/classes/datasource');\nvar Promise = require('bluebird');\n\n\nmodule.exports = new Datasource ('static', {\n  aliases: ['value'],\n  args: [\n    {\n      name: 'value', // _test-data.users.*.data\n      types: ['number', 'string'],\n      help: 'The single value to to display, you can also pass several values and I will interpolate them evenly ' +\n        'across your time range.'\n    },\n    {\n      name: 'label',\n      types: ['string', 'null'],\n      help: 'A quick way to set the label for the series. You could also use the .label() function'\n    }\n  ],\n  help: 'Draws a single value across the chart',\n  fn: function staticFn(args, tlConfig) {\n\n    var data;\n    var target = tlConfig.getTargetSeries();\n    if (typeof args.byName.value === 'string') {\n      var points = args.byName.value.split(':');\n      var begin = _.first(target)[0];\n      var end = _.last(target)[0];\n      var step = (end - begin) / (points.length - 1);\n      data = _.map(points, function (point, i) {\n        return [begin + (i * step), parseFloat(point)];\n      });\n    } else {\n      data = _.map(target, function (bucket) {\n        return [bucket[0], args.byName.value];\n      });\n    }\n\n    return Promise.resolve({\n      type: 'seriesList',\n      list: [\n        {\n          data: data,\n          type: 'series',\n          label: args.byName.label == null ? String(args.byName.value) : args.byName.label,\n          fit: args.byName.fit || 'average'\n        }\n      ]\n    });\n  }\n});\n"
      ]
    },
    "mtime": 1467119944363
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/subtract.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar reduce = require('../lib/reduce.js');\n\nvar Chainable = require('../lib/classes/chainable');\nmodule.exports = new Chainable('subtract', {\n  args: [{\n    name: 'inputSeries',\n    types: ['seriesList']\n  }, {\n    name: 'term',\n    types: ['seriesList', 'number'],\n    help: 'Number or series to subtract from input. If passing a seriesList it must contain exactly 1 series.'\n  }],\n  help: 'Subtract the values of one or more series in a seriesList to each position, in each series, of the input seriesList',\n  fn: function subtractFn(args) {\n    return reduce(args, function (a, b) {\n      return a - b;\n    });\n  }\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy9zdWJ0cmFjdC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQUksTUFBTSxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDOztBQUd6QyxJQUFJLFNBQVMsR0FBRyxPQUFPLENBQUMsMEJBQTBCLENBQUMsQ0FBQztBQUNwRCxNQUFNLENBQUMsT0FBTyxHQUFHLElBQUksU0FBUyxDQUFDLFVBQVUsRUFBRTtBQUN6QyxNQUFJLEVBQUUsQ0FDSjtBQUNFLFFBQUksRUFBRSxhQUFhO0FBQ25CLFNBQUssRUFBRSxDQUFDLFlBQVksQ0FBQztHQUN0QixFQUNEO0FBQ0UsUUFBSSxFQUFFLE1BQU07QUFDWixTQUFLLEVBQUUsQ0FBQyxZQUFZLEVBQUUsUUFBUSxDQUFDO0FBQy9CLFFBQUksRUFBRSxvR0FBb0c7R0FDM0csQ0FDRjtBQUNELE1BQUksRUFBRSxxSEFBcUg7QUFDM0gsSUFBRSxFQUFFLFNBQVMsVUFBVSxDQUFDLElBQUksRUFBRTtBQUM1QixXQUFPLE1BQU0sQ0FBQyxJQUFJLEVBQUUsVUFBVSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQ2xDLGFBQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQztLQUNkLENBQUMsQ0FBQztHQUNKO0NBQ0YsQ0FBQyxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy9zdWJ0cmFjdC5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciByZWR1Y2UgPSByZXF1aXJlKCcuLi9saWIvcmVkdWNlLmpzJyk7XG5cblxudmFyIENoYWluYWJsZSA9IHJlcXVpcmUoJy4uL2xpYi9jbGFzc2VzL2NoYWluYWJsZScpO1xubW9kdWxlLmV4cG9ydHMgPSBuZXcgQ2hhaW5hYmxlKCdzdWJ0cmFjdCcsIHtcbiAgYXJnczogW1xuICAgIHtcbiAgICAgIG5hbWU6ICdpbnB1dFNlcmllcycsXG4gICAgICB0eXBlczogWydzZXJpZXNMaXN0J11cbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICd0ZXJtJyxcbiAgICAgIHR5cGVzOiBbJ3Nlcmllc0xpc3QnLCAnbnVtYmVyJ10sXG4gICAgICBoZWxwOiAnTnVtYmVyIG9yIHNlcmllcyB0byBzdWJ0cmFjdCBmcm9tIGlucHV0LiBJZiBwYXNzaW5nIGEgc2VyaWVzTGlzdCBpdCBtdXN0IGNvbnRhaW4gZXhhY3RseSAxIHNlcmllcy4nXG4gICAgfVxuICBdLFxuICBoZWxwOiAnU3VidHJhY3QgdGhlIHZhbHVlcyBvZiBvbmUgb3IgbW9yZSBzZXJpZXMgaW4gYSBzZXJpZXNMaXN0IHRvIGVhY2ggcG9zaXRpb24sIGluIGVhY2ggc2VyaWVzLCBvZiB0aGUgaW5wdXQgc2VyaWVzTGlzdCcsXG4gIGZuOiBmdW5jdGlvbiBzdWJ0cmFjdEZuKGFyZ3MpIHtcbiAgICByZXR1cm4gcmVkdWNlKGFyZ3MsIGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICByZXR1cm4gYSAtIGI7XG4gICAgfSk7XG4gIH1cbn0pO1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/subtract.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,MAAM,GAAG,OAAO,CAAC,kBAAkB,CAAC,CAAC;;AAGzC,IAAI,SAAS,GAAG,OAAO,CAAC,0BAA0B,CAAC,CAAC;AACpD,MAAM,CAAC,OAAO,GAAG,IAAI,SAAS,CAAC,UAAU,EAAE;AACzC,MAAI,EAAE,CACJ;AACE,QAAI,EAAE,aAAa;AACnB,SAAK,EAAE,CAAC,YAAY,CAAC;GACtB,EACD;AACE,QAAI,EAAE,MAAM;AACZ,SAAK,EAAE,CAAC,YAAY,EAAE,QAAQ,CAAC;AAC/B,QAAI,EAAE,oGAAoG;GAC3G,CACF;AACD,MAAI,EAAE,qHAAqH;AAC3H,IAAE,EAAE,SAAS,UAAU,CAAC,IAAI,EAAE;AAC5B,WAAO,MAAM,CAAC,IAAI,EAAE,UAAU,CAAC,EAAE,CAAC,EAAE;AAClC,aAAO,CAAC,GAAG,CAAC,CAAC;KACd,CAAC,CAAC;GACJ;CACF,CAAC,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/subtract.js",
      "sourcesContent": [
        "var reduce = require('../lib/reduce.js');\n\n\nvar Chainable = require('../lib/classes/chainable');\nmodule.exports = new Chainable('subtract', {\n  args: [\n    {\n      name: 'inputSeries',\n      types: ['seriesList']\n    },\n    {\n      name: 'term',\n      types: ['seriesList', 'number'],\n      help: 'Number or series to subtract from input. If passing a seriesList it must contain exactly 1 series.'\n    }\n  ],\n  help: 'Subtract the values of one or more series in a seriesList to each position, in each series, of the input seriesList',\n  fn: function subtractFn(args) {\n    return reduce(args, function (a, b) {\n      return a - b;\n    });\n  }\n});\n"
      ]
    },
    "mtime": 1467119944363
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/sum.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar reduce = require('../lib/reduce.js');\n\nvar Chainable = require('../lib/classes/chainable');\nmodule.exports = new Chainable('sum', {\n  args: [{\n    name: 'inputSeries',\n    types: ['seriesList']\n  }, {\n    name: 'term',\n    types: ['seriesList', 'number'],\n    help: 'Number or series to sum with the input series. If passing a seriesList it must contain exactly 1 series.'\n\n  }],\n  help: 'Adds the values of one or more series in a seriesList to each position, in each series, of the input seriesList',\n  aliases: ['add', 'plus'],\n  fn: function sumFn(args) {\n    return reduce(args, function (a, b) {\n      return a + b;\n    });\n  }\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy9zdW0uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFJLE1BQU0sR0FBRyxPQUFPLENBQUMsa0JBQWtCLENBQUMsQ0FBQzs7QUFFekMsSUFBSSxTQUFTLEdBQUcsT0FBTyxDQUFDLDBCQUEwQixDQUFDLENBQUM7QUFDcEQsTUFBTSxDQUFDLE9BQU8sR0FBRyxJQUFJLFNBQVMsQ0FBQyxLQUFLLEVBQUU7QUFDcEMsTUFBSSxFQUFFLENBQ0o7QUFDRSxRQUFJLEVBQUUsYUFBYTtBQUNuQixTQUFLLEVBQUUsQ0FBQyxZQUFZLENBQUM7R0FDdEIsRUFDRDtBQUNFLFFBQUksRUFBRSxNQUFNO0FBQ1osU0FBSyxFQUFFLENBQUMsWUFBWSxFQUFFLFFBQVEsQ0FBQztBQUMvQixRQUFJLEVBQUUsMEdBQTBHOztHQUVqSCxDQUNGO0FBQ0QsTUFBSSxFQUFFLGlIQUFpSDtBQUN2SCxTQUFPLEVBQUUsQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDO0FBQ3hCLElBQUUsRUFBRSxTQUFTLEtBQUssQ0FBQyxJQUFJLEVBQUU7QUFDdkIsV0FBTyxNQUFNLENBQUMsSUFBSSxFQUFFLFVBQVUsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUNsQyxhQUFPLENBQUMsR0FBRyxDQUFDLENBQUM7S0FDZCxDQUFDLENBQUM7R0FDSjtDQUNGLENBQUMsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL2luc3RhbGxlZFBsdWdpbnMvdGltZWxpb24vc2VydmVyL3Nlcmllc19mdW5jdGlvbnMvc3VtLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIHJlZHVjZSA9IHJlcXVpcmUoJy4uL2xpYi9yZWR1Y2UuanMnKTtcblxudmFyIENoYWluYWJsZSA9IHJlcXVpcmUoJy4uL2xpYi9jbGFzc2VzL2NoYWluYWJsZScpO1xubW9kdWxlLmV4cG9ydHMgPSBuZXcgQ2hhaW5hYmxlKCdzdW0nLCB7XG4gIGFyZ3M6IFtcbiAgICB7XG4gICAgICBuYW1lOiAnaW5wdXRTZXJpZXMnLFxuICAgICAgdHlwZXM6IFsnc2VyaWVzTGlzdCddXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAndGVybScsXG4gICAgICB0eXBlczogWydzZXJpZXNMaXN0JywgJ251bWJlciddLFxuICAgICAgaGVscDogJ051bWJlciBvciBzZXJpZXMgdG8gc3VtIHdpdGggdGhlIGlucHV0IHNlcmllcy4gSWYgcGFzc2luZyBhIHNlcmllc0xpc3QgaXQgbXVzdCBjb250YWluIGV4YWN0bHkgMSBzZXJpZXMuJ1xuXG4gICAgfVxuICBdLFxuICBoZWxwOiAnQWRkcyB0aGUgdmFsdWVzIG9mIG9uZSBvciBtb3JlIHNlcmllcyBpbiBhIHNlcmllc0xpc3QgdG8gZWFjaCBwb3NpdGlvbiwgaW4gZWFjaCBzZXJpZXMsIG9mIHRoZSBpbnB1dCBzZXJpZXNMaXN0JyxcbiAgYWxpYXNlczogWydhZGQnLCAncGx1cyddLFxuICBmbjogZnVuY3Rpb24gc3VtRm4oYXJncykge1xuICAgIHJldHVybiByZWR1Y2UoYXJncywgZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgIHJldHVybiBhICsgYjtcbiAgICB9KTtcbiAgfVxufSk7Il19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/sum.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,MAAM,GAAG,OAAO,CAAC,kBAAkB,CAAC,CAAC;;AAEzC,IAAI,SAAS,GAAG,OAAO,CAAC,0BAA0B,CAAC,CAAC;AACpD,MAAM,CAAC,OAAO,GAAG,IAAI,SAAS,CAAC,KAAK,EAAE;AACpC,MAAI,EAAE,CACJ;AACE,QAAI,EAAE,aAAa;AACnB,SAAK,EAAE,CAAC,YAAY,CAAC;GACtB,EACD;AACE,QAAI,EAAE,MAAM;AACZ,SAAK,EAAE,CAAC,YAAY,EAAE,QAAQ,CAAC;AAC/B,QAAI,EAAE,0GAA0G;;GAEjH,CACF;AACD,MAAI,EAAE,iHAAiH;AACvH,SAAO,EAAE,CAAC,KAAK,EAAE,MAAM,CAAC;AACxB,IAAE,EAAE,SAAS,KAAK,CAAC,IAAI,EAAE;AACvB,WAAO,MAAM,CAAC,IAAI,EAAE,UAAU,CAAC,EAAE,CAAC,EAAE;AAClC,aAAO,CAAC,GAAG,CAAC,CAAC;KACd,CAAC,CAAC;GACJ;CACF,CAAC,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/sum.js",
      "sourcesContent": [
        "var reduce = require('../lib/reduce.js');\n\nvar Chainable = require('../lib/classes/chainable');\nmodule.exports = new Chainable('sum', {\n  args: [\n    {\n      name: 'inputSeries',\n      types: ['seriesList']\n    },\n    {\n      name: 'term',\n      types: ['seriesList', 'number'],\n      help: 'Number or series to sum with the input series. If passing a seriesList it must contain exactly 1 series.'\n\n    }\n  ],\n  help: 'Adds the values of one or more series in a seriesList to each position, in each series, of the input seriesList',\n  aliases: ['add', 'plus'],\n  fn: function sumFn(args) {\n    return reduce(args, function (a, b) {\n      return a + b;\n    });\n  }\n});"
      ]
    },
    "mtime": 1467119944363
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/title.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar alter = require('../lib/alter.js');\nvar Chainable = require('../lib/classes/chainable');\nmodule.exports = new Chainable('title', {\n  args: [{\n    name: 'inputSeries',\n    types: ['seriesList']\n  }, {\n    name: 'title',\n    types: ['string', 'null'],\n    help: 'Title for the plot.'\n  }],\n  help: 'Adds a title to the top of the plot. If called on more than 1 seriesList the last call will be used.',\n  fn: function hideFn(args) {\n    return alter(args, function (eachSeries, title) {\n      eachSeries._title = title;\n      return eachSeries;\n    });\n  }\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy90aXRsZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQUksS0FBSyxHQUFHLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0FBQ3ZDLElBQUksU0FBUyxHQUFHLE9BQU8sQ0FBQywwQkFBMEIsQ0FBQyxDQUFDO0FBQ3BELE1BQU0sQ0FBQyxPQUFPLEdBQUcsSUFBSSxTQUFTLENBQUMsT0FBTyxFQUFFO0FBQ3RDLE1BQUksRUFBRSxDQUNKO0FBQ0UsUUFBSSxFQUFFLGFBQWE7QUFDbkIsU0FBSyxFQUFFLENBQUMsWUFBWSxDQUFDO0dBQ3RCLEVBQ0Q7QUFDRSxRQUFJLEVBQUUsT0FBTztBQUNiLFNBQUssRUFBRSxDQUFDLFFBQVEsRUFBRSxNQUFNLENBQUM7QUFDekIsUUFBSSxFQUFFLHFCQUFxQjtHQUM1QixDQUNGO0FBQ0QsTUFBSSxFQUFFLHNHQUFzRztBQUM1RyxJQUFFLEVBQUUsU0FBUyxNQUFNLENBQUMsSUFBSSxFQUFFO0FBQ3hCLFdBQU8sS0FBSyxDQUFDLElBQUksRUFBRSxVQUFVLFVBQVUsRUFBRSxLQUFLLEVBQUU7QUFDOUMsZ0JBQVUsQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDO0FBQzFCLGFBQU8sVUFBVSxDQUFDO0tBQ25CLENBQUMsQ0FBQztHQUNKO0NBQ0YsQ0FBQyxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy90aXRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBhbHRlciA9IHJlcXVpcmUoJy4uL2xpYi9hbHRlci5qcycpO1xudmFyIENoYWluYWJsZSA9IHJlcXVpcmUoJy4uL2xpYi9jbGFzc2VzL2NoYWluYWJsZScpO1xubW9kdWxlLmV4cG9ydHMgPSBuZXcgQ2hhaW5hYmxlKCd0aXRsZScsIHtcbiAgYXJnczogW1xuICAgIHtcbiAgICAgIG5hbWU6ICdpbnB1dFNlcmllcycsXG4gICAgICB0eXBlczogWydzZXJpZXNMaXN0J11cbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICd0aXRsZScsXG4gICAgICB0eXBlczogWydzdHJpbmcnLCAnbnVsbCddLFxuICAgICAgaGVscDogJ1RpdGxlIGZvciB0aGUgcGxvdC4nXG4gICAgfVxuICBdLFxuICBoZWxwOiAnQWRkcyBhIHRpdGxlIHRvIHRoZSB0b3Agb2YgdGhlIHBsb3QuIElmIGNhbGxlZCBvbiBtb3JlIHRoYW4gMSBzZXJpZXNMaXN0IHRoZSBsYXN0IGNhbGwgd2lsbCBiZSB1c2VkLicsXG4gIGZuOiBmdW5jdGlvbiBoaWRlRm4oYXJncykge1xuICAgIHJldHVybiBhbHRlcihhcmdzLCBmdW5jdGlvbiAoZWFjaFNlcmllcywgdGl0bGUpIHtcbiAgICAgIGVhY2hTZXJpZXMuX3RpdGxlID0gdGl0bGU7XG4gICAgICByZXR1cm4gZWFjaFNlcmllcztcbiAgICB9KTtcbiAgfVxufSk7XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/title.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,KAAK,GAAG,OAAO,CAAC,iBAAiB,CAAC,CAAC;AACvC,IAAI,SAAS,GAAG,OAAO,CAAC,0BAA0B,CAAC,CAAC;AACpD,MAAM,CAAC,OAAO,GAAG,IAAI,SAAS,CAAC,OAAO,EAAE;AACtC,MAAI,EAAE,CACJ;AACE,QAAI,EAAE,aAAa;AACnB,SAAK,EAAE,CAAC,YAAY,CAAC;GACtB,EACD;AACE,QAAI,EAAE,OAAO;AACb,SAAK,EAAE,CAAC,QAAQ,EAAE,MAAM,CAAC;AACzB,QAAI,EAAE,qBAAqB;GAC5B,CACF;AACD,MAAI,EAAE,sGAAsG;AAC5G,IAAE,EAAE,SAAS,MAAM,CAAC,IAAI,EAAE;AACxB,WAAO,KAAK,CAAC,IAAI,EAAE,UAAU,UAAU,EAAE,KAAK,EAAE;AAC9C,gBAAU,CAAC,MAAM,GAAG,KAAK,CAAC;AAC1B,aAAO,UAAU,CAAC;KACnB,CAAC,CAAC;GACJ;CACF,CAAC,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/title.js",
      "sourcesContent": [
        "var alter = require('../lib/alter.js');\nvar Chainable = require('../lib/classes/chainable');\nmodule.exports = new Chainable('title', {\n  args: [\n    {\n      name: 'inputSeries',\n      types: ['seriesList']\n    },\n    {\n      name: 'title',\n      types: ['string', 'null'],\n      help: 'Title for the plot.'\n    }\n  ],\n  help: 'Adds a title to the top of the plot. If called on more than 1 seriesList the last call will be used.',\n  fn: function hideFn(args) {\n    return alter(args, function (eachSeries, title) {\n      eachSeries._title = title;\n      return eachSeries;\n    });\n  }\n});\n"
      ]
    },
    "mtime": 1467119944363
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/trim.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar alter = require('../lib/alter.js');\nvar _ = require('lodash');\nvar Chainable = require('../lib/classes/chainable');\nvar argType = require('../handlers/lib/arg_type.js');\n\nmodule.exports = new Chainable('trim', {\n  args: [{\n    name: 'inputSeries',\n    types: ['seriesList']\n  }, {\n    name: 'start',\n    types: ['number', 'null'],\n    help: 'Buckets to trim from the beginning of the series. Default: 1'\n  }, {\n    name: 'end',\n    types: ['number', 'null'],\n    help: 'Buckets to trim from the end of the series. Default: 1'\n  }],\n  help: 'Set N buckets at the start or end of a series to null to fit the \"partial bucket issue\"',\n  fn: function conditionFn(args) {\n    var config = args.byName;\n    if (config.start == null) config.start = 1;\n    if (config.end == null) config.end = 1;\n\n    return alter(args, function (eachSeries) {\n\n      _.times(config.start, function (i) {\n        eachSeries.data[i][1] = null;\n      });\n\n      _.times(config.end, function (i) {\n        eachSeries.data[eachSeries.data.length - 1 - i][1] = null;\n      });\n\n      return eachSeries;\n    });\n  }\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy90cmltLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBSSxLQUFLLEdBQUcsT0FBTyxDQUFDLGlCQUFpQixDQUFDLENBQUM7QUFDdkMsSUFBSSxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQzFCLElBQUksU0FBUyxHQUFHLE9BQU8sQ0FBQywwQkFBMEIsQ0FBQyxDQUFDO0FBQ3BELElBQUksT0FBTyxHQUFHLE9BQU8sQ0FBQyw2QkFBNkIsQ0FBQyxDQUFDOztBQUVyRCxNQUFNLENBQUMsT0FBTyxHQUFHLElBQUksU0FBUyxDQUFDLE1BQU0sRUFBRTtBQUNyQyxNQUFJLEVBQUUsQ0FDSjtBQUNFLFFBQUksRUFBRSxhQUFhO0FBQ25CLFNBQUssRUFBRSxDQUFDLFlBQVksQ0FBQztHQUN0QixFQUNEO0FBQ0UsUUFBSSxFQUFFLE9BQU87QUFDYixTQUFLLEVBQUUsQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDO0FBQ3pCLFFBQUksRUFBRSw4REFBOEQ7R0FDckUsRUFDRDtBQUNFLFFBQUksRUFBRSxLQUFLO0FBQ1gsU0FBSyxFQUFFLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQztBQUN6QixRQUFJLEVBQUUsd0RBQXdEO0dBQy9ELENBQ0Y7QUFDRCxNQUFJLEVBQUUseUZBQXlGO0FBQy9GLElBQUUsRUFBRSxTQUFTLFdBQVcsQ0FBQyxJQUFJLEVBQUU7QUFDN0IsUUFBSSxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQztBQUN6QixRQUFJLE1BQU0sQ0FBQyxLQUFLLElBQUksSUFBSSxFQUFFLE1BQU0sQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDO0FBQzNDLFFBQUksTUFBTSxDQUFDLEdBQUcsSUFBSSxJQUFJLEVBQUUsTUFBTSxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUM7O0FBRXZDLFdBQU8sS0FBSyxDQUFDLElBQUksRUFBRSxVQUFVLFVBQVUsRUFBRTs7QUFFdkMsT0FBQyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFLFVBQVUsQ0FBQyxFQUFFO0FBQ2pDLGtCQUFVLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQztPQUM5QixDQUFDLENBQUM7O0FBRUgsT0FBQyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFLFVBQVUsQ0FBQyxFQUFFO0FBQy9CLGtCQUFVLENBQUMsSUFBSSxDQUFDLEFBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxHQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQztPQUM3RCxDQUFDLENBQUM7O0FBRUgsYUFBTyxVQUFVLENBQUM7S0FDbkIsQ0FBQyxDQUFDO0dBQ0o7Q0FDRixDQUFDLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9pbnN0YWxsZWRQbHVnaW5zL3RpbWVsaW9uL3NlcnZlci9zZXJpZXNfZnVuY3Rpb25zL3RyaW0uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYWx0ZXIgPSByZXF1aXJlKCcuLi9saWIvYWx0ZXIuanMnKTtcbnZhciBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XG52YXIgQ2hhaW5hYmxlID0gcmVxdWlyZSgnLi4vbGliL2NsYXNzZXMvY2hhaW5hYmxlJyk7XG52YXIgYXJnVHlwZSA9IHJlcXVpcmUoJy4uL2hhbmRsZXJzL2xpYi9hcmdfdHlwZS5qcycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IG5ldyBDaGFpbmFibGUoJ3RyaW0nLCB7XG4gIGFyZ3M6IFtcbiAgICB7XG4gICAgICBuYW1lOiAnaW5wdXRTZXJpZXMnLFxuICAgICAgdHlwZXM6IFsnc2VyaWVzTGlzdCddXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAnc3RhcnQnLFxuICAgICAgdHlwZXM6IFsnbnVtYmVyJywgJ251bGwnXSxcbiAgICAgIGhlbHA6ICdCdWNrZXRzIHRvIHRyaW0gZnJvbSB0aGUgYmVnaW5uaW5nIG9mIHRoZSBzZXJpZXMuIERlZmF1bHQ6IDEnXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAnZW5kJyxcbiAgICAgIHR5cGVzOiBbJ251bWJlcicsICdudWxsJ10sXG4gICAgICBoZWxwOiAnQnVja2V0cyB0byB0cmltIGZyb20gdGhlIGVuZCBvZiB0aGUgc2VyaWVzLiBEZWZhdWx0OiAxJ1xuICAgIH1cbiAgXSxcbiAgaGVscDogJ1NldCBOIGJ1Y2tldHMgYXQgdGhlIHN0YXJ0IG9yIGVuZCBvZiBhIHNlcmllcyB0byBudWxsIHRvIGZpdCB0aGUgXCJwYXJ0aWFsIGJ1Y2tldCBpc3N1ZVwiJyxcbiAgZm46IGZ1bmN0aW9uIGNvbmRpdGlvbkZuKGFyZ3MpIHtcbiAgICB2YXIgY29uZmlnID0gYXJncy5ieU5hbWU7XG4gICAgaWYgKGNvbmZpZy5zdGFydCA9PSBudWxsKSBjb25maWcuc3RhcnQgPSAxO1xuICAgIGlmIChjb25maWcuZW5kID09IG51bGwpIGNvbmZpZy5lbmQgPSAxO1xuXG4gICAgcmV0dXJuIGFsdGVyKGFyZ3MsIGZ1bmN0aW9uIChlYWNoU2VyaWVzKSB7XG5cbiAgICAgIF8udGltZXMoY29uZmlnLnN0YXJ0LCBmdW5jdGlvbiAoaSkge1xuICAgICAgICBlYWNoU2VyaWVzLmRhdGFbaV1bMV0gPSBudWxsO1xuICAgICAgfSk7XG5cbiAgICAgIF8udGltZXMoY29uZmlnLmVuZCwgZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgZWFjaFNlcmllcy5kYXRhWyhlYWNoU2VyaWVzLmRhdGEubGVuZ3RoIC0gMSkgLSBpXVsxXSA9IG51bGw7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIGVhY2hTZXJpZXM7XG4gICAgfSk7XG4gIH1cbn0pO1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/trim.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,KAAK,GAAG,OAAO,CAAC,iBAAiB,CAAC,CAAC;AACvC,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC1B,IAAI,SAAS,GAAG,OAAO,CAAC,0BAA0B,CAAC,CAAC;AACpD,IAAI,OAAO,GAAG,OAAO,CAAC,6BAA6B,CAAC,CAAC;;AAErD,MAAM,CAAC,OAAO,GAAG,IAAI,SAAS,CAAC,MAAM,EAAE;AACrC,MAAI,EAAE,CACJ;AACE,QAAI,EAAE,aAAa;AACnB,SAAK,EAAE,CAAC,YAAY,CAAC;GACtB,EACD;AACE,QAAI,EAAE,OAAO;AACb,SAAK,EAAE,CAAC,QAAQ,EAAE,MAAM,CAAC;AACzB,QAAI,EAAE,8DAA8D;GACrE,EACD;AACE,QAAI,EAAE,KAAK;AACX,SAAK,EAAE,CAAC,QAAQ,EAAE,MAAM,CAAC;AACzB,QAAI,EAAE,wDAAwD;GAC/D,CACF;AACD,MAAI,EAAE,yFAAyF;AAC/F,IAAE,EAAE,SAAS,WAAW,CAAC,IAAI,EAAE;AAC7B,QAAI,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;AACzB,QAAI,MAAM,CAAC,KAAK,IAAI,IAAI,EAAE,MAAM,CAAC,KAAK,GAAG,CAAC,CAAC;AAC3C,QAAI,MAAM,CAAC,GAAG,IAAI,IAAI,EAAE,MAAM,CAAC,GAAG,GAAG,CAAC,CAAC;;AAEvC,WAAO,KAAK,CAAC,IAAI,EAAE,UAAU,UAAU,EAAE;;AAEvC,OAAC,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,EAAE,UAAU,CAAC,EAAE;AACjC,kBAAU,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;OAC9B,CAAC,CAAC;;AAEH,OAAC,CAAC,KAAK,CAAC,MAAM,CAAC,GAAG,EAAE,UAAU,CAAC,EAAE;AAC/B,kBAAU,CAAC,IAAI,CAAC,AAAC,UAAU,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,GAAI,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;OAC7D,CAAC,CAAC;;AAEH,aAAO,UAAU,CAAC;KACnB,CAAC,CAAC;GACJ;CACF,CAAC,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/trim.js",
      "sourcesContent": [
        "var alter = require('../lib/alter.js');\nvar _ = require('lodash');\nvar Chainable = require('../lib/classes/chainable');\nvar argType = require('../handlers/lib/arg_type.js');\n\nmodule.exports = new Chainable('trim', {\n  args: [\n    {\n      name: 'inputSeries',\n      types: ['seriesList']\n    },\n    {\n      name: 'start',\n      types: ['number', 'null'],\n      help: 'Buckets to trim from the beginning of the series. Default: 1'\n    },\n    {\n      name: 'end',\n      types: ['number', 'null'],\n      help: 'Buckets to trim from the end of the series. Default: 1'\n    }\n  ],\n  help: 'Set N buckets at the start or end of a series to null to fit the \"partial bucket issue\"',\n  fn: function conditionFn(args) {\n    var config = args.byName;\n    if (config.start == null) config.start = 1;\n    if (config.end == null) config.end = 1;\n\n    return alter(args, function (eachSeries) {\n\n      _.times(config.start, function (i) {\n        eachSeries.data[i][1] = null;\n      });\n\n      _.times(config.end, function (i) {\n        eachSeries.data[(eachSeries.data.length - 1) - i][1] = null;\n      });\n\n      return eachSeries;\n    });\n  }\n});\n"
      ]
    },
    "mtime": 1467119944363
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/worldbank_indicators.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _ = require('lodash');\nvar fetch = require('node-fetch');\nvar moment = require('moment');\nvar worldbank = require('./worldbank.js');\nvar Promise = require('bluebird');\nvar Datasource = require('../lib/classes/datasource');\n\nmodule.exports = new Datasource('worldbank_indicators', {\n  args: [{\n    name: 'country', // countries/all/indicators/SP.POP.TOTL\n    types: ['string', 'null'],\n    help: 'Worldbank country identifier. Usually the country\\'s 2 letter code'\n  }, {\n    name: 'indicator',\n    types: ['string', 'null'],\n    help: 'The indicator code to use. You\\'ll have to look this up on data.worldbank.org.' + ' Often pretty obtuse. Eg SP.POP.TOTL is population'\n  }],\n  aliases: ['wbi'],\n  help: 'Pull data from http://data.worldbank.org/ using the country name and indicator. The worldbank provides' + ' mostly yearly data, and often has no data for the current year. Try offset=-1y if you get no data for recent' + ' time ranges.',\n  fn: function worldbankIndicators(args, tlConfig) {\n    var config = _.defaults(args.byName, {\n      country: 'wld',\n      indicator: 'SP.POP.TOTL'\n    });\n\n    var countries = config.country.split(':');\n    var seriesLists = _.map(countries, function (country) {\n      var code = 'countries/' + country + '/indicators/' + config.indicator;\n      var wbArgs = [code];\n      wbArgs.byName = { code: code };\n      return worldbank.timelionFn(wbArgs, tlConfig);\n    });\n\n    return Promise.map(seriesLists, function (seriesList) {\n      return seriesList.list[0];\n    }).then(function (list) {\n      return {\n        type: 'seriesList',\n        list: list\n      };\n    });\n  }\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy93b3JsZGJhbmtfaW5kaWNhdG9ycy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQUksQ0FBQyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUMxQixJQUFJLEtBQUssR0FBRyxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUM7QUFDbEMsSUFBSSxNQUFNLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQy9CLElBQUksU0FBUyxHQUFHLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0FBQzFDLElBQUksT0FBTyxHQUFHLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUNsQyxJQUFJLFVBQVUsR0FBRyxPQUFPLENBQUMsMkJBQTJCLENBQUMsQ0FBQzs7QUFHdEQsTUFBTSxDQUFDLE9BQU8sR0FBRyxJQUFJLFVBQVUsQ0FBRSxzQkFBc0IsRUFBRTtBQUN2RCxNQUFJLEVBQUUsQ0FDSjtBQUNFLFFBQUksRUFBRSxTQUFTO0FBQ2YsU0FBSyxFQUFFLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQztBQUN6QixRQUFJLEVBQUUsb0VBQW9FO0dBQzNFLEVBQ0Q7QUFDRSxRQUFJLEVBQUUsV0FBVztBQUNqQixTQUFLLEVBQUUsQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDO0FBQ3pCLFFBQUksRUFBRSxnRkFBZ0YsR0FDcEYsb0RBQW9EO0dBQ3ZELENBQ0Y7QUFDRCxTQUFPLEVBQUUsQ0FBQyxLQUFLLENBQUM7QUFDaEIsTUFBSSxFQUFFLHdHQUF3RyxHQUM5RywrR0FBK0csR0FDL0csZUFBZTtBQUNmLElBQUUsRUFBRSxTQUFTLG1CQUFtQixDQUFDLElBQUksRUFBRSxRQUFRLEVBQUU7QUFDL0MsUUFBSSxNQUFNLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFO0FBQ25DLGFBQU8sRUFBRSxLQUFLO0FBQ2QsZUFBUyxFQUFFLGFBQWE7S0FDekIsQ0FBQyxDQUFDOztBQUVILFFBQUksU0FBUyxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQzFDLFFBQUksV0FBVyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFLFVBQVUsT0FBTyxFQUFFO0FBQ3BELFVBQUksSUFBSSxHQUFHLFlBQVksR0FBRyxPQUFPLEdBQUcsY0FBYyxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUM7QUFDdEUsVUFBSSxNQUFNLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNwQixZQUFNLENBQUMsTUFBTSxHQUFHLEVBQUMsSUFBSSxFQUFFLElBQUksRUFBQyxDQUFDO0FBQzdCLGFBQU8sU0FBUyxDQUFDLFVBQVUsQ0FBQyxNQUFNLEVBQUUsUUFBUSxDQUFDLENBQUM7S0FDL0MsQ0FBQyxDQUFDOztBQUVILFdBQU8sT0FBTyxDQUFDLEdBQUcsQ0FBQyxXQUFXLEVBQUUsVUFBVSxVQUFVLEVBQUU7QUFDcEQsYUFBTyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0tBQzNCLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxJQUFJLEVBQUU7QUFDdEIsYUFBTztBQUNMLFlBQUksRUFBRSxZQUFZO0FBQ2xCLFlBQUksRUFBRSxJQUFJO09BQ1gsQ0FBQztLQUNILENBQUMsQ0FBQztHQUVKO0NBQ0YsQ0FBQyxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy93b3JsZGJhbmtfaW5kaWNhdG9ycy5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XG52YXIgZmV0Y2ggPSByZXF1aXJlKCdub2RlLWZldGNoJyk7XG52YXIgbW9tZW50ID0gcmVxdWlyZSgnbW9tZW50Jyk7XG52YXIgd29ybGRiYW5rID0gcmVxdWlyZSgnLi93b3JsZGJhbmsuanMnKTtcbnZhciBQcm9taXNlID0gcmVxdWlyZSgnYmx1ZWJpcmQnKTtcbnZhciBEYXRhc291cmNlID0gcmVxdWlyZSgnLi4vbGliL2NsYXNzZXMvZGF0YXNvdXJjZScpO1xuXG5cbm1vZHVsZS5leHBvcnRzID0gbmV3IERhdGFzb3VyY2UgKCd3b3JsZGJhbmtfaW5kaWNhdG9ycycsIHtcbiAgYXJnczogW1xuICAgIHtcbiAgICAgIG5hbWU6ICdjb3VudHJ5JywgLy8gY291bnRyaWVzL2FsbC9pbmRpY2F0b3JzL1NQLlBPUC5UT1RMXG4gICAgICB0eXBlczogWydzdHJpbmcnLCAnbnVsbCddLFxuICAgICAgaGVscDogJ1dvcmxkYmFuayBjb3VudHJ5IGlkZW50aWZpZXIuIFVzdWFsbHkgdGhlIGNvdW50cnlcXCdzIDIgbGV0dGVyIGNvZGUnXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAnaW5kaWNhdG9yJyxcbiAgICAgIHR5cGVzOiBbJ3N0cmluZycsICdudWxsJ10sXG4gICAgICBoZWxwOiAnVGhlIGluZGljYXRvciBjb2RlIHRvIHVzZS4gWW91XFwnbGwgaGF2ZSB0byBsb29rIHRoaXMgdXAgb24gZGF0YS53b3JsZGJhbmsub3JnLicgK1xuICAgICAgICAnIE9mdGVuIHByZXR0eSBvYnR1c2UuIEVnIFNQLlBPUC5UT1RMIGlzIHBvcHVsYXRpb24nXG4gICAgfVxuICBdLFxuICBhbGlhc2VzOiBbJ3diaSddLFxuICBoZWxwOiAnUHVsbCBkYXRhIGZyb20gaHR0cDovL2RhdGEud29ybGRiYW5rLm9yZy8gdXNpbmcgdGhlIGNvdW50cnkgbmFtZSBhbmQgaW5kaWNhdG9yLiBUaGUgd29ybGRiYW5rIHByb3ZpZGVzJyArXG4gICcgbW9zdGx5IHllYXJseSBkYXRhLCBhbmQgb2Z0ZW4gaGFzIG5vIGRhdGEgZm9yIHRoZSBjdXJyZW50IHllYXIuIFRyeSBvZmZzZXQ9LTF5IGlmIHlvdSBnZXQgbm8gZGF0YSBmb3IgcmVjZW50JyArXG4gICcgdGltZSByYW5nZXMuJyxcbiAgZm46IGZ1bmN0aW9uIHdvcmxkYmFua0luZGljYXRvcnMoYXJncywgdGxDb25maWcpIHtcbiAgICB2YXIgY29uZmlnID0gXy5kZWZhdWx0cyhhcmdzLmJ5TmFtZSwge1xuICAgICAgY291bnRyeTogJ3dsZCcsXG4gICAgICBpbmRpY2F0b3I6ICdTUC5QT1AuVE9UTCdcbiAgICB9KTtcblxuICAgIHZhciBjb3VudHJpZXMgPSBjb25maWcuY291bnRyeS5zcGxpdCgnOicpO1xuICAgIHZhciBzZXJpZXNMaXN0cyA9IF8ubWFwKGNvdW50cmllcywgZnVuY3Rpb24gKGNvdW50cnkpIHtcbiAgICAgIHZhciBjb2RlID0gJ2NvdW50cmllcy8nICsgY291bnRyeSArICcvaW5kaWNhdG9ycy8nICsgY29uZmlnLmluZGljYXRvcjtcbiAgICAgIHZhciB3YkFyZ3MgPSBbY29kZV07XG4gICAgICB3YkFyZ3MuYnlOYW1lID0ge2NvZGU6IGNvZGV9O1xuICAgICAgcmV0dXJuIHdvcmxkYmFuay50aW1lbGlvbkZuKHdiQXJncywgdGxDb25maWcpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIFByb21pc2UubWFwKHNlcmllc0xpc3RzLCBmdW5jdGlvbiAoc2VyaWVzTGlzdCkge1xuICAgICAgcmV0dXJuIHNlcmllc0xpc3QubGlzdFswXTtcbiAgICB9KS50aGVuKGZ1bmN0aW9uIChsaXN0KSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnc2VyaWVzTGlzdCcsXG4gICAgICAgIGxpc3Q6IGxpc3RcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgfVxufSk7XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/worldbank_indicators.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC1B,IAAI,KAAK,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC;AAClC,IAAI,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC/B,IAAI,SAAS,GAAG,OAAO,CAAC,gBAAgB,CAAC,CAAC;AAC1C,IAAI,OAAO,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;AAClC,IAAI,UAAU,GAAG,OAAO,CAAC,2BAA2B,CAAC,CAAC;;AAGtD,MAAM,CAAC,OAAO,GAAG,IAAI,UAAU,CAAE,sBAAsB,EAAE;AACvD,MAAI,EAAE,CACJ;AACE,QAAI,EAAE,SAAS;AACf,SAAK,EAAE,CAAC,QAAQ,EAAE,MAAM,CAAC;AACzB,QAAI,EAAE,oEAAoE;GAC3E,EACD;AACE,QAAI,EAAE,WAAW;AACjB,SAAK,EAAE,CAAC,QAAQ,EAAE,MAAM,CAAC;AACzB,QAAI,EAAE,gFAAgF,GACpF,oDAAoD;GACvD,CACF;AACD,SAAO,EAAE,CAAC,KAAK,CAAC;AAChB,MAAI,EAAE,wGAAwG,GAC9G,+GAA+G,GAC/G,eAAe;AACf,IAAE,EAAE,SAAS,mBAAmB,CAAC,IAAI,EAAE,QAAQ,EAAE;AAC/C,QAAI,MAAM,GAAG,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE;AACnC,aAAO,EAAE,KAAK;AACd,eAAS,EAAE,aAAa;KACzB,CAAC,CAAC;;AAEH,QAAI,SAAS,GAAG,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AAC1C,QAAI,WAAW,GAAG,CAAC,CAAC,GAAG,CAAC,SAAS,EAAE,UAAU,OAAO,EAAE;AACpD,UAAI,IAAI,GAAG,YAAY,GAAG,OAAO,GAAG,cAAc,GAAG,MAAM,CAAC,SAAS,CAAC;AACtE,UAAI,MAAM,GAAG,CAAC,IAAI,CAAC,CAAC;AACpB,YAAM,CAAC,MAAM,GAAG,EAAC,IAAI,EAAE,IAAI,EAAC,CAAC;AAC7B,aAAO,SAAS,CAAC,UAAU,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;KAC/C,CAAC,CAAC;;AAEH,WAAO,OAAO,CAAC,GAAG,CAAC,WAAW,EAAE,UAAU,UAAU,EAAE;AACpD,aAAO,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;KAC3B,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,EAAE;AACtB,aAAO;AACL,YAAI,EAAE,YAAY;AAClB,YAAI,EAAE,IAAI;OACX,CAAC;KACH,CAAC,CAAC;GAEJ;CACF,CAAC,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/worldbank_indicators.js",
      "sourcesContent": [
        "var _ = require('lodash');\nvar fetch = require('node-fetch');\nvar moment = require('moment');\nvar worldbank = require('./worldbank.js');\nvar Promise = require('bluebird');\nvar Datasource = require('../lib/classes/datasource');\n\n\nmodule.exports = new Datasource ('worldbank_indicators', {\n  args: [\n    {\n      name: 'country', // countries/all/indicators/SP.POP.TOTL\n      types: ['string', 'null'],\n      help: 'Worldbank country identifier. Usually the country\\'s 2 letter code'\n    },\n    {\n      name: 'indicator',\n      types: ['string', 'null'],\n      help: 'The indicator code to use. You\\'ll have to look this up on data.worldbank.org.' +\n        ' Often pretty obtuse. Eg SP.POP.TOTL is population'\n    }\n  ],\n  aliases: ['wbi'],\n  help: 'Pull data from http://data.worldbank.org/ using the country name and indicator. The worldbank provides' +\n  ' mostly yearly data, and often has no data for the current year. Try offset=-1y if you get no data for recent' +\n  ' time ranges.',\n  fn: function worldbankIndicators(args, tlConfig) {\n    var config = _.defaults(args.byName, {\n      country: 'wld',\n      indicator: 'SP.POP.TOTL'\n    });\n\n    var countries = config.country.split(':');\n    var seriesLists = _.map(countries, function (country) {\n      var code = 'countries/' + country + '/indicators/' + config.indicator;\n      var wbArgs = [code];\n      wbArgs.byName = {code: code};\n      return worldbank.timelionFn(wbArgs, tlConfig);\n    });\n\n    return Promise.map(seriesLists, function (seriesList) {\n      return seriesList.list[0];\n    }).then(function (list) {\n      return {\n        type: 'seriesList',\n        list: list\n      };\n    });\n\n  }\n});\n"
      ]
    },
    "mtime": 1467119944363
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/worldbank.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _ = require('lodash');\nvar fetch = require('node-fetch');\nvar moment = require('moment');\nvar Datasource = require('../lib/classes/datasource');\n\nmodule.exports = new Datasource('worldbank', {\n  args: [{\n    name: 'code', // countries/all/indicators/SP.POP.TOTL\n    types: ['string', 'null'],\n    help: 'Worldbank API path.' + ' This is usually everything after the domain, before the querystring. Eg: ' + '/en/countries/ind;chn/indicators/DPANUSSPF.'\n  }],\n  aliases: ['wb'],\n  help: 'Pull data from http://data.worldbank.org/ using path to series.' + ' The worldbank provides' + ' mostly yearly data, and often has no data for the current year. Try offset=-1y if you get no data for recent' + ' time ranges.',\n  fn: function worldbank(args, tlConfig) {\n    // http://api.worldbank.org/en/countries/ind;chn/indicators/DPANUSSPF?date=2000:2006&MRV=5\n\n    var config = _.defaults(args.byName, {\n      code: 'countries/wld/indicators/SP.POP.TOTL'\n    });\n\n    var time = {\n      min: moment(tlConfig.time.from).format('YYYY'),\n      max: moment(tlConfig.time.to).format('YYYY')\n    };\n\n    var URL = 'http://api.worldbank.org/' + config.code + '?date=' + time.min + ':' + time.max + '&format=json' + '&per_page=1000';\n\n    return fetch(URL).then(function (resp) {\n      return resp.json();\n    }).then(function (resp) {\n      var hasData = false;\n\n      var respSeries = resp[1];\n\n      var deduped = {};\n      var description;\n      _.each(respSeries, function (bucket) {\n        if (bucket.value != null) hasData = true;\n        description = bucket.country.value + ' ' + bucket.indicator.value;\n        deduped[bucket.date] = bucket.value;\n      });\n\n      var data = _.compact(_.map(deduped, function (val, date) {\n        // Discard nulls\n        if (val == null) return;\n        return [moment(date, 'YYYY').valueOf(), parseInt(val, 10)];\n      }));\n\n      if (!hasData) throw new Error('Worldbank request succeeded, but there was no data for ' + config.code);\n\n      return {\n        type: 'seriesList',\n        list: [{\n          data: data,\n          type: 'series',\n          label: description,\n          _meta: {\n            worldbank_request: URL\n          }\n        }]\n      };\n    })['catch'](function (e) {\n      throw e;\n    });\n  }\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy93b3JsZGJhbmsuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFJLENBQUMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDMUIsSUFBSSxLQUFLLEdBQUcsT0FBTyxDQUFDLFlBQVksQ0FBQyxDQUFDO0FBQ2xDLElBQUksTUFBTSxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUMvQixJQUFJLFVBQVUsR0FBRyxPQUFPLENBQUMsMkJBQTJCLENBQUMsQ0FBQzs7QUFFdEQsTUFBTSxDQUFDLE9BQU8sR0FBRyxJQUFJLFVBQVUsQ0FBRSxXQUFXLEVBQUU7QUFDNUMsTUFBSSxFQUFFLENBQ0o7QUFDRSxRQUFJLEVBQUUsTUFBTTtBQUNaLFNBQUssRUFBRSxDQUFDLFFBQVEsRUFBRSxNQUFNLENBQUM7QUFDekIsUUFBSSxFQUFFLHFCQUFxQixHQUN6Qiw0RUFBNEUsR0FDNUUsNkNBQTZDO0dBQ2hELENBQ0Y7QUFDRCxTQUFPLEVBQUUsQ0FBQyxJQUFJLENBQUM7QUFDZixNQUFJLEVBQUUsaUVBQWlFLEdBQ3ZFLHlCQUF5QixHQUN6QiwrR0FBK0csR0FDL0csZUFBZTtBQUNmLElBQUUsRUFBRSxTQUFTLFNBQVMsQ0FBQyxJQUFJLEVBQUUsUUFBUSxFQUFFOzs7QUFHckMsUUFBSSxNQUFNLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFO0FBQ25DLFVBQUksRUFBRSxzQ0FBc0M7S0FDN0MsQ0FBQyxDQUFDOztBQUVILFFBQUksSUFBSSxHQUFHO0FBQ1QsU0FBRyxFQUFFLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUM7QUFDOUMsU0FBRyxFQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUM7S0FDOUMsQ0FBQzs7QUFFRixRQUFJLEdBQUcsR0FBRywyQkFBMkIsR0FBRyxNQUFNLENBQUMsSUFBSSxHQUNqRCxRQUFRLEdBQUcsSUFBSSxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsR0FDcEMsY0FBYyxHQUNkLGdCQUFnQixDQUFDOztBQUVuQixXQUFPLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxJQUFJLEVBQUU7QUFBRSxhQUFPLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztLQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxJQUFJLEVBQUU7QUFDbkYsVUFBSSxPQUFPLEdBQUcsS0FBSyxDQUFDOztBQUVwQixVQUFJLFVBQVUsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7O0FBRXpCLFVBQUksT0FBTyxHQUFHLEVBQUUsQ0FBQztBQUNqQixVQUFJLFdBQVcsQ0FBQztBQUNoQixPQUFDLENBQUMsSUFBSSxDQUFFLFVBQVUsRUFBRSxVQUFVLE1BQU0sRUFBRTtBQUNwQyxZQUFJLE1BQU0sQ0FBQyxLQUFLLElBQUksSUFBSSxFQUFFLE9BQU8sR0FBRyxJQUFJLENBQUM7QUFDekMsbUJBQVcsR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLEtBQUssR0FBRyxHQUFHLEdBQUcsTUFBTSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUM7QUFDbEUsZUFBTyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDO09BQ3JDLENBQUMsQ0FBQzs7QUFFSCxVQUFJLElBQUksR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLFVBQVUsR0FBRyxFQUFFLElBQUksRUFBRTs7QUFFdkQsWUFBSSxHQUFHLElBQUksSUFBSSxFQUFFLE9BQU87QUFDeEIsZUFBTyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsTUFBTSxDQUFDLENBQUMsT0FBTyxFQUFFLEVBQUUsUUFBUSxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO09BQzVELENBQUMsQ0FBQyxDQUFDOztBQUVKLFVBQUksQ0FBQyxPQUFPLEVBQUUsTUFBTSxJQUFJLEtBQUssQ0FBQyx5REFBeUQsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7O0FBRXZHLGFBQU87QUFDTCxZQUFJLEVBQUUsWUFBWTtBQUNsQixZQUFJLEVBQUUsQ0FBQztBQUNMLGNBQUksRUFBRyxJQUFJO0FBQ1gsY0FBSSxFQUFFLFFBQVE7QUFDZCxlQUFLLEVBQUUsV0FBVztBQUNsQixlQUFLLEVBQUU7QUFDTCw2QkFBaUIsRUFBRSxHQUFHO1dBQ3ZCO1NBQ0YsQ0FBQztPQUNILENBQUM7S0FDSCxDQUFDLFNBQU0sQ0FBQyxVQUFVLENBQUMsRUFBRTtBQUNwQixZQUFNLENBQUMsQ0FBQztLQUNULENBQUMsQ0FBQztHQUNKO0NBQ0YsQ0FBQyxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy93b3JsZGJhbmsuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xudmFyIGZldGNoID0gcmVxdWlyZSgnbm9kZS1mZXRjaCcpO1xudmFyIG1vbWVudCA9IHJlcXVpcmUoJ21vbWVudCcpO1xudmFyIERhdGFzb3VyY2UgPSByZXF1aXJlKCcuLi9saWIvY2xhc3Nlcy9kYXRhc291cmNlJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gbmV3IERhdGFzb3VyY2UgKCd3b3JsZGJhbmsnLCB7XG4gIGFyZ3M6IFtcbiAgICB7XG4gICAgICBuYW1lOiAnY29kZScsIC8vIGNvdW50cmllcy9hbGwvaW5kaWNhdG9ycy9TUC5QT1AuVE9UTFxuICAgICAgdHlwZXM6IFsnc3RyaW5nJywgJ251bGwnXSxcbiAgICAgIGhlbHA6ICdXb3JsZGJhbmsgQVBJIHBhdGguJyArXG4gICAgICAgICcgVGhpcyBpcyB1c3VhbGx5IGV2ZXJ5dGhpbmcgYWZ0ZXIgdGhlIGRvbWFpbiwgYmVmb3JlIHRoZSBxdWVyeXN0cmluZy4gRWc6ICcgK1xuICAgICAgICAnL2VuL2NvdW50cmllcy9pbmQ7Y2huL2luZGljYXRvcnMvRFBBTlVTU1BGLidcbiAgICB9XG4gIF0sXG4gIGFsaWFzZXM6IFsnd2InXSxcbiAgaGVscDogJ1B1bGwgZGF0YSBmcm9tIGh0dHA6Ly9kYXRhLndvcmxkYmFuay5vcmcvIHVzaW5nIHBhdGggdG8gc2VyaWVzLicgK1xuICAnIFRoZSB3b3JsZGJhbmsgcHJvdmlkZXMnICtcbiAgJyBtb3N0bHkgeWVhcmx5IGRhdGEsIGFuZCBvZnRlbiBoYXMgbm8gZGF0YSBmb3IgdGhlIGN1cnJlbnQgeWVhci4gVHJ5IG9mZnNldD0tMXkgaWYgeW91IGdldCBubyBkYXRhIGZvciByZWNlbnQnICtcbiAgJyB0aW1lIHJhbmdlcy4nLFxuICBmbjogZnVuY3Rpb24gd29ybGRiYW5rKGFyZ3MsIHRsQ29uZmlnKSB7XG4gICAgLy8gaHR0cDovL2FwaS53b3JsZGJhbmsub3JnL2VuL2NvdW50cmllcy9pbmQ7Y2huL2luZGljYXRvcnMvRFBBTlVTU1BGP2RhdGU9MjAwMDoyMDA2Jk1SVj01XG5cbiAgICB2YXIgY29uZmlnID0gXy5kZWZhdWx0cyhhcmdzLmJ5TmFtZSwge1xuICAgICAgY29kZTogJ2NvdW50cmllcy93bGQvaW5kaWNhdG9ycy9TUC5QT1AuVE9UTCdcbiAgICB9KTtcblxuICAgIHZhciB0aW1lID0ge1xuICAgICAgbWluOiBtb21lbnQodGxDb25maWcudGltZS5mcm9tKS5mb3JtYXQoJ1lZWVknKSxcbiAgICAgIG1heDogIG1vbWVudCh0bENvbmZpZy50aW1lLnRvKS5mb3JtYXQoJ1lZWVknKVxuICAgIH07XG5cbiAgICB2YXIgVVJMID0gJ2h0dHA6Ly9hcGkud29ybGRiYW5rLm9yZy8nICsgY29uZmlnLmNvZGUgK1xuICAgICAgJz9kYXRlPScgKyB0aW1lLm1pbiArICc6JyArIHRpbWUubWF4ICtcbiAgICAgICcmZm9ybWF0PWpzb24nICtcbiAgICAgICcmcGVyX3BhZ2U9MTAwMCc7XG5cbiAgICByZXR1cm4gZmV0Y2goVVJMKS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7IHJldHVybiByZXNwLmpzb24oKTsgfSkudGhlbihmdW5jdGlvbiAocmVzcCkge1xuICAgICAgdmFyIGhhc0RhdGEgPSBmYWxzZTtcblxuICAgICAgdmFyIHJlc3BTZXJpZXMgPSByZXNwWzFdO1xuXG4gICAgICB2YXIgZGVkdXBlZCA9IHt9O1xuICAgICAgdmFyIGRlc2NyaXB0aW9uO1xuICAgICAgXy5lYWNoIChyZXNwU2VyaWVzLCBmdW5jdGlvbiAoYnVja2V0KSB7XG4gICAgICAgIGlmIChidWNrZXQudmFsdWUgIT0gbnVsbCkgaGFzRGF0YSA9IHRydWU7XG4gICAgICAgIGRlc2NyaXB0aW9uID0gYnVja2V0LmNvdW50cnkudmFsdWUgKyAnICcgKyBidWNrZXQuaW5kaWNhdG9yLnZhbHVlO1xuICAgICAgICBkZWR1cGVkW2J1Y2tldC5kYXRlXSA9IGJ1Y2tldC52YWx1ZTtcbiAgICAgIH0pO1xuXG4gICAgICB2YXIgZGF0YSA9IF8uY29tcGFjdChfLm1hcChkZWR1cGVkLCBmdW5jdGlvbiAodmFsLCBkYXRlKSB7XG4gICAgICAgIC8vIERpc2NhcmQgbnVsbHNcbiAgICAgICAgaWYgKHZhbCA9PSBudWxsKSByZXR1cm47XG4gICAgICAgIHJldHVybiBbbW9tZW50KGRhdGUsICdZWVlZJykudmFsdWVPZigpLCBwYXJzZUludCh2YWwsIDEwKV07XG4gICAgICB9KSk7XG5cbiAgICAgIGlmICghaGFzRGF0YSkgdGhyb3cgbmV3IEVycm9yKCdXb3JsZGJhbmsgcmVxdWVzdCBzdWNjZWVkZWQsIGJ1dCB0aGVyZSB3YXMgbm8gZGF0YSBmb3IgJyArIGNvbmZpZy5jb2RlKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ3Nlcmllc0xpc3QnLFxuICAgICAgICBsaXN0OiBbe1xuICAgICAgICAgIGRhdGE6ICBkYXRhLFxuICAgICAgICAgIHR5cGU6ICdzZXJpZXMnLFxuICAgICAgICAgIGxhYmVsOiBkZXNjcmlwdGlvbixcbiAgICAgICAgICBfbWV0YToge1xuICAgICAgICAgICAgd29ybGRiYW5rX3JlcXVlc3Q6IFVSTFxuICAgICAgICAgIH1cbiAgICAgICAgfV1cbiAgICAgIH07XG4gICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRocm93IGU7XG4gICAgfSk7XG4gIH1cbn0pOyJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/worldbank.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC1B,IAAI,KAAK,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC;AAClC,IAAI,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC/B,IAAI,UAAU,GAAG,OAAO,CAAC,2BAA2B,CAAC,CAAC;;AAEtD,MAAM,CAAC,OAAO,GAAG,IAAI,UAAU,CAAE,WAAW,EAAE;AAC5C,MAAI,EAAE,CACJ;AACE,QAAI,EAAE,MAAM;AACZ,SAAK,EAAE,CAAC,QAAQ,EAAE,MAAM,CAAC;AACzB,QAAI,EAAE,qBAAqB,GACzB,4EAA4E,GAC5E,6CAA6C;GAChD,CACF;AACD,SAAO,EAAE,CAAC,IAAI,CAAC;AACf,MAAI,EAAE,iEAAiE,GACvE,yBAAyB,GACzB,+GAA+G,GAC/G,eAAe;AACf,IAAE,EAAE,SAAS,SAAS,CAAC,IAAI,EAAE,QAAQ,EAAE;;;AAGrC,QAAI,MAAM,GAAG,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE;AACnC,UAAI,EAAE,sCAAsC;KAC7C,CAAC,CAAC;;AAEH,QAAI,IAAI,GAAG;AACT,SAAG,EAAE,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC;AAC9C,SAAG,EAAG,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC;KAC9C,CAAC;;AAEF,QAAI,GAAG,GAAG,2BAA2B,GAAG,MAAM,CAAC,IAAI,GACjD,QAAQ,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GACpC,cAAc,GACd,gBAAgB,CAAC;;AAEnB,WAAO,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,EAAE;AAAE,aAAO,IAAI,CAAC,IAAI,EAAE,CAAC;KAAE,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,EAAE;AACnF,UAAI,OAAO,GAAG,KAAK,CAAC;;AAEpB,UAAI,UAAU,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;;AAEzB,UAAI,OAAO,GAAG,EAAE,CAAC;AACjB,UAAI,WAAW,CAAC;AAChB,OAAC,CAAC,IAAI,CAAE,UAAU,EAAE,UAAU,MAAM,EAAE;AACpC,YAAI,MAAM,CAAC,KAAK,IAAI,IAAI,EAAE,OAAO,GAAG,IAAI,CAAC;AACzC,mBAAW,GAAG,MAAM,CAAC,OAAO,CAAC,KAAK,GAAG,GAAG,GAAG,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC;AAClE,eAAO,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,MAAM,CAAC,KAAK,CAAC;OACrC,CAAC,CAAC;;AAEH,UAAI,IAAI,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,OAAO,EAAE,UAAU,GAAG,EAAE,IAAI,EAAE;;AAEvD,YAAI,GAAG,IAAI,IAAI,EAAE,OAAO;AACxB,eAAO,CAAC,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC,OAAO,EAAE,EAAE,QAAQ,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC,CAAC;OAC5D,CAAC,CAAC,CAAC;;AAEJ,UAAI,CAAC,OAAO,EAAE,MAAM,IAAI,KAAK,CAAC,yDAAyD,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC;;AAEvG,aAAO;AACL,YAAI,EAAE,YAAY;AAClB,YAAI,EAAE,CAAC;AACL,cAAI,EAAG,IAAI;AACX,cAAI,EAAE,QAAQ;AACd,eAAK,EAAE,WAAW;AAClB,eAAK,EAAE;AACL,6BAAiB,EAAE,GAAG;WACvB;SACF,CAAC;OACH,CAAC;KACH,CAAC,SAAM,CAAC,UAAU,CAAC,EAAE;AACpB,YAAM,CAAC,CAAC;KACT,CAAC,CAAC;GACJ;CACF,CAAC,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/worldbank.js",
      "sourcesContent": [
        "var _ = require('lodash');\nvar fetch = require('node-fetch');\nvar moment = require('moment');\nvar Datasource = require('../lib/classes/datasource');\n\nmodule.exports = new Datasource ('worldbank', {\n  args: [\n    {\n      name: 'code', // countries/all/indicators/SP.POP.TOTL\n      types: ['string', 'null'],\n      help: 'Worldbank API path.' +\n        ' This is usually everything after the domain, before the querystring. Eg: ' +\n        '/en/countries/ind;chn/indicators/DPANUSSPF.'\n    }\n  ],\n  aliases: ['wb'],\n  help: 'Pull data from http://data.worldbank.org/ using path to series.' +\n  ' The worldbank provides' +\n  ' mostly yearly data, and often has no data for the current year. Try offset=-1y if you get no data for recent' +\n  ' time ranges.',\n  fn: function worldbank(args, tlConfig) {\n    // http://api.worldbank.org/en/countries/ind;chn/indicators/DPANUSSPF?date=2000:2006&MRV=5\n\n    var config = _.defaults(args.byName, {\n      code: 'countries/wld/indicators/SP.POP.TOTL'\n    });\n\n    var time = {\n      min: moment(tlConfig.time.from).format('YYYY'),\n      max:  moment(tlConfig.time.to).format('YYYY')\n    };\n\n    var URL = 'http://api.worldbank.org/' + config.code +\n      '?date=' + time.min + ':' + time.max +\n      '&format=json' +\n      '&per_page=1000';\n\n    return fetch(URL).then(function (resp) { return resp.json(); }).then(function (resp) {\n      var hasData = false;\n\n      var respSeries = resp[1];\n\n      var deduped = {};\n      var description;\n      _.each (respSeries, function (bucket) {\n        if (bucket.value != null) hasData = true;\n        description = bucket.country.value + ' ' + bucket.indicator.value;\n        deduped[bucket.date] = bucket.value;\n      });\n\n      var data = _.compact(_.map(deduped, function (val, date) {\n        // Discard nulls\n        if (val == null) return;\n        return [moment(date, 'YYYY').valueOf(), parseInt(val, 10)];\n      }));\n\n      if (!hasData) throw new Error('Worldbank request succeeded, but there was no data for ' + config.code);\n\n      return {\n        type: 'seriesList',\n        list: [{\n          data:  data,\n          type: 'series',\n          label: description,\n          _meta: {\n            worldbank_request: URL\n          }\n        }]\n      };\n    }).catch(function (e) {\n      throw e;\n    });\n  }\n});"
      ]
    },
    "mtime": 1467119944363
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/yaxis.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar alter = require('../lib/alter.js');\n\nvar Chainable = require('../lib/classes/chainable');\nmodule.exports = new Chainable('yaxis', {\n  args: [{\n    name: 'inputSeries',\n    types: ['seriesList']\n  }, {\n    name: 'yaxis',\n    types: ['number', 'null'],\n    help: 'The numbered y-axis to plot this series on, eg .yaxis(2) for a 2nd y-axis.'\n  }, {\n    name: 'min',\n    types: ['number', 'null'],\n    help: 'Min value'\n  }, {\n    name: 'max',\n    types: ['number', 'null'],\n    help: 'Max value'\n  }, {\n    name: 'position',\n    types: ['string', 'null'],\n    help: 'left or right'\n  }, {\n    name: 'label',\n    types: ['string', 'null'],\n    help: 'Label for axis'\n  }, {\n    name: 'color',\n    types: ['string', 'null'],\n    help: 'Color of axis label'\n  }],\n  help: 'Configures a variety of y-axis options, the most important likely being the ability to add an Nth (eg 2nd) y-axis',\n  fn: function yaxisFn(args) {\n    return alter(args, function (eachSeries, yaxis, min, max, position, label, color) {\n      yaxis = yaxis || 1;\n\n      eachSeries.yaxis = yaxis;\n      eachSeries._global = eachSeries._global || {};\n\n      eachSeries._global.yaxes = eachSeries._global.yaxes || [];\n      eachSeries._global.yaxes[yaxis - 1] = eachSeries._global.yaxes[yaxis - 1] || {};\n\n      var myAxis = eachSeries._global.yaxes[yaxis - 1];\n      myAxis.position = position || (yaxis % 2 ? 'left' : 'right');\n      myAxis.min = min == null ? 0 : min;\n      myAxis.max = max;\n      myAxis.axisLabelFontSizePixels = 11;\n      myAxis.axisLabel = label;\n      myAxis.axisLabelColour = color;\n      myAxis.axisLabelUseCanvas = true;\n\n      return eachSeries;\n    });\n  }\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy95YXhpcy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQUksS0FBSyxHQUFHLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDOztBQUV2QyxJQUFJLFNBQVMsR0FBRyxPQUFPLENBQUMsMEJBQTBCLENBQUMsQ0FBQztBQUNwRCxNQUFNLENBQUMsT0FBTyxHQUFHLElBQUksU0FBUyxDQUFDLE9BQU8sRUFBRTtBQUN0QyxNQUFJLEVBQUUsQ0FDSjtBQUNFLFFBQUksRUFBRSxhQUFhO0FBQ25CLFNBQUssRUFBRSxDQUFDLFlBQVksQ0FBQztHQUN0QixFQUNEO0FBQ0UsUUFBSSxFQUFFLE9BQU87QUFDYixTQUFLLEVBQUUsQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDO0FBQ3pCLFFBQUksRUFBRSw0RUFBNEU7R0FDbkYsRUFDRDtBQUNFLFFBQUksRUFBRSxLQUFLO0FBQ1gsU0FBSyxFQUFFLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQztBQUN6QixRQUFJLEVBQUUsV0FBVztHQUNsQixFQUNEO0FBQ0UsUUFBSSxFQUFFLEtBQUs7QUFDWCxTQUFLLEVBQUUsQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDO0FBQ3pCLFFBQUksRUFBRSxXQUFXO0dBQ2xCLEVBQ0Q7QUFDRSxRQUFJLEVBQUUsVUFBVTtBQUNoQixTQUFLLEVBQUUsQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDO0FBQ3pCLFFBQUksRUFBRSxlQUFlO0dBQ3RCLEVBQ0Q7QUFDRSxRQUFJLEVBQUUsT0FBTztBQUNiLFNBQUssRUFBRSxDQUFDLFFBQVEsRUFBRSxNQUFNLENBQUM7QUFDekIsUUFBSSxFQUFFLGdCQUFnQjtHQUN2QixFQUNEO0FBQ0UsUUFBSSxFQUFFLE9BQU87QUFDYixTQUFLLEVBQUUsQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDO0FBQ3pCLFFBQUksRUFBRSxxQkFBcUI7R0FDNUIsQ0FDRjtBQUNELE1BQUksRUFBRSxtSEFBbUg7QUFDekgsSUFBRSxFQUFFLFNBQVMsT0FBTyxDQUFDLElBQUksRUFBRTtBQUN6QixXQUFPLEtBQUssQ0FBQyxJQUFJLEVBQUUsVUFBVSxVQUFVLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUU7QUFDaEYsV0FBSyxHQUFHLEtBQUssSUFBSSxDQUFDLENBQUM7O0FBRW5CLGdCQUFVLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztBQUN6QixnQkFBVSxDQUFDLE9BQU8sR0FBRyxVQUFVLENBQUMsT0FBTyxJQUFJLEVBQUUsQ0FBQzs7QUFFOUMsZ0JBQVUsQ0FBQyxPQUFPLENBQUMsS0FBSyxHQUFHLFVBQVUsQ0FBQyxPQUFPLENBQUMsS0FBSyxJQUFJLEVBQUUsQ0FBQztBQUMxRCxnQkFBVSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxHQUFHLFVBQVUsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7O0FBRWhGLFVBQUksTUFBTSxHQUFHLFVBQVUsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQztBQUNqRCxZQUFNLENBQUMsUUFBUSxHQUFHLFFBQVEsS0FBSyxLQUFLLEdBQUcsQ0FBQyxHQUFHLE1BQU0sR0FBRyxPQUFPLENBQUEsQUFBQyxDQUFDO0FBQzdELFlBQU0sQ0FBQyxHQUFHLEdBQUcsR0FBRyxJQUFJLElBQUksR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDO0FBQ25DLFlBQU0sQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDO0FBQ2pCLFlBQU0sQ0FBQyx1QkFBdUIsR0FBRyxFQUFFLENBQUM7QUFDcEMsWUFBTSxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUM7QUFDekIsWUFBTSxDQUFDLGVBQWUsR0FBRyxLQUFLLENBQUM7QUFDL0IsWUFBTSxDQUFDLGtCQUFrQixHQUFHLElBQUksQ0FBQzs7QUFJakMsYUFBTyxVQUFVLENBQUM7S0FDbkIsQ0FBQyxDQUFDO0dBQ0o7Q0FDRixDQUFDLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9pbnN0YWxsZWRQbHVnaW5zL3RpbWVsaW9uL3NlcnZlci9zZXJpZXNfZnVuY3Rpb25zL3lheGlzLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGFsdGVyID0gcmVxdWlyZSgnLi4vbGliL2FsdGVyLmpzJyk7XG5cbnZhciBDaGFpbmFibGUgPSByZXF1aXJlKCcuLi9saWIvY2xhc3Nlcy9jaGFpbmFibGUnKTtcbm1vZHVsZS5leHBvcnRzID0gbmV3IENoYWluYWJsZSgneWF4aXMnLCB7XG4gIGFyZ3M6IFtcbiAgICB7XG4gICAgICBuYW1lOiAnaW5wdXRTZXJpZXMnLFxuICAgICAgdHlwZXM6IFsnc2VyaWVzTGlzdCddXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAneWF4aXMnLFxuICAgICAgdHlwZXM6IFsnbnVtYmVyJywgJ251bGwnXSxcbiAgICAgIGhlbHA6ICdUaGUgbnVtYmVyZWQgeS1heGlzIHRvIHBsb3QgdGhpcyBzZXJpZXMgb24sIGVnIC55YXhpcygyKSBmb3IgYSAybmQgeS1heGlzLidcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICdtaW4nLFxuICAgICAgdHlwZXM6IFsnbnVtYmVyJywgJ251bGwnXSxcbiAgICAgIGhlbHA6ICdNaW4gdmFsdWUnXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAnbWF4JyxcbiAgICAgIHR5cGVzOiBbJ251bWJlcicsICdudWxsJ10sXG4gICAgICBoZWxwOiAnTWF4IHZhbHVlJ1xuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ3Bvc2l0aW9uJyxcbiAgICAgIHR5cGVzOiBbJ3N0cmluZycsICdudWxsJ10sXG4gICAgICBoZWxwOiAnbGVmdCBvciByaWdodCdcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICdsYWJlbCcsXG4gICAgICB0eXBlczogWydzdHJpbmcnLCAnbnVsbCddLFxuICAgICAgaGVscDogJ0xhYmVsIGZvciBheGlzJ1xuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ2NvbG9yJyxcbiAgICAgIHR5cGVzOiBbJ3N0cmluZycsICdudWxsJ10sXG4gICAgICBoZWxwOiAnQ29sb3Igb2YgYXhpcyBsYWJlbCdcbiAgICB9LFxuICBdLFxuICBoZWxwOiAnQ29uZmlndXJlcyBhIHZhcmlldHkgb2YgeS1heGlzIG9wdGlvbnMsIHRoZSBtb3N0IGltcG9ydGFudCBsaWtlbHkgYmVpbmcgdGhlIGFiaWxpdHkgdG8gYWRkIGFuIE50aCAoZWcgMm5kKSB5LWF4aXMnLFxuICBmbjogZnVuY3Rpb24geWF4aXNGbihhcmdzKSB7XG4gICAgcmV0dXJuIGFsdGVyKGFyZ3MsIGZ1bmN0aW9uIChlYWNoU2VyaWVzLCB5YXhpcywgbWluLCBtYXgsIHBvc2l0aW9uLCBsYWJlbCwgY29sb3IpIHtcbiAgICAgIHlheGlzID0geWF4aXMgfHwgMTtcblxuICAgICAgZWFjaFNlcmllcy55YXhpcyA9IHlheGlzO1xuICAgICAgZWFjaFNlcmllcy5fZ2xvYmFsID0gZWFjaFNlcmllcy5fZ2xvYmFsIHx8IHt9O1xuXG4gICAgICBlYWNoU2VyaWVzLl9nbG9iYWwueWF4ZXMgPSBlYWNoU2VyaWVzLl9nbG9iYWwueWF4ZXMgfHwgW107XG4gICAgICBlYWNoU2VyaWVzLl9nbG9iYWwueWF4ZXNbeWF4aXMgLSAxXSA9IGVhY2hTZXJpZXMuX2dsb2JhbC55YXhlc1t5YXhpcyAtIDFdIHx8IHt9O1xuXG4gICAgICB2YXIgbXlBeGlzID0gZWFjaFNlcmllcy5fZ2xvYmFsLnlheGVzW3lheGlzIC0gMV07XG4gICAgICBteUF4aXMucG9zaXRpb24gPSBwb3NpdGlvbiB8fCAoeWF4aXMgJSAyID8gJ2xlZnQnIDogJ3JpZ2h0Jyk7XG4gICAgICBteUF4aXMubWluID0gbWluID09IG51bGwgPyAwIDogbWluO1xuICAgICAgbXlBeGlzLm1heCA9IG1heDtcbiAgICAgIG15QXhpcy5heGlzTGFiZWxGb250U2l6ZVBpeGVscyA9IDExO1xuICAgICAgbXlBeGlzLmF4aXNMYWJlbCA9IGxhYmVsO1xuICAgICAgbXlBeGlzLmF4aXNMYWJlbENvbG91ciA9IGNvbG9yO1xuICAgICAgbXlBeGlzLmF4aXNMYWJlbFVzZUNhbnZhcyA9IHRydWU7XG5cblxuXG4gICAgICByZXR1cm4gZWFjaFNlcmllcztcbiAgICB9KTtcbiAgfVxufSk7XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/yaxis.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,KAAK,GAAG,OAAO,CAAC,iBAAiB,CAAC,CAAC;;AAEvC,IAAI,SAAS,GAAG,OAAO,CAAC,0BAA0B,CAAC,CAAC;AACpD,MAAM,CAAC,OAAO,GAAG,IAAI,SAAS,CAAC,OAAO,EAAE;AACtC,MAAI,EAAE,CACJ;AACE,QAAI,EAAE,aAAa;AACnB,SAAK,EAAE,CAAC,YAAY,CAAC;GACtB,EACD;AACE,QAAI,EAAE,OAAO;AACb,SAAK,EAAE,CAAC,QAAQ,EAAE,MAAM,CAAC;AACzB,QAAI,EAAE,4EAA4E;GACnF,EACD;AACE,QAAI,EAAE,KAAK;AACX,SAAK,EAAE,CAAC,QAAQ,EAAE,MAAM,CAAC;AACzB,QAAI,EAAE,WAAW;GAClB,EACD;AACE,QAAI,EAAE,KAAK;AACX,SAAK,EAAE,CAAC,QAAQ,EAAE,MAAM,CAAC;AACzB,QAAI,EAAE,WAAW;GAClB,EACD;AACE,QAAI,EAAE,UAAU;AAChB,SAAK,EAAE,CAAC,QAAQ,EAAE,MAAM,CAAC;AACzB,QAAI,EAAE,eAAe;GACtB,EACD;AACE,QAAI,EAAE,OAAO;AACb,SAAK,EAAE,CAAC,QAAQ,EAAE,MAAM,CAAC;AACzB,QAAI,EAAE,gBAAgB;GACvB,EACD;AACE,QAAI,EAAE,OAAO;AACb,SAAK,EAAE,CAAC,QAAQ,EAAE,MAAM,CAAC;AACzB,QAAI,EAAE,qBAAqB;GAC5B,CACF;AACD,MAAI,EAAE,mHAAmH;AACzH,IAAE,EAAE,SAAS,OAAO,CAAC,IAAI,EAAE;AACzB,WAAO,KAAK,CAAC,IAAI,EAAE,UAAU,UAAU,EAAE,KAAK,EAAE,GAAG,EAAE,GAAG,EAAE,QAAQ,EAAE,KAAK,EAAE,KAAK,EAAE;AAChF,WAAK,GAAG,KAAK,IAAI,CAAC,CAAC;;AAEnB,gBAAU,CAAC,KAAK,GAAG,KAAK,CAAC;AACzB,gBAAU,CAAC,OAAO,GAAG,UAAU,CAAC,OAAO,IAAI,EAAE,CAAC;;AAE9C,gBAAU,CAAC,OAAO,CAAC,KAAK,GAAG,UAAU,CAAC,OAAO,CAAC,KAAK,IAAI,EAAE,CAAC;AAC1D,gBAAU,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,UAAU,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC;;AAEhF,UAAI,MAAM,GAAG,UAAU,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC;AACjD,YAAM,CAAC,QAAQ,GAAG,QAAQ,KAAK,KAAK,GAAG,CAAC,GAAG,MAAM,GAAG,OAAO,CAAA,AAAC,CAAC;AAC7D,YAAM,CAAC,GAAG,GAAG,GAAG,IAAI,IAAI,GAAG,CAAC,GAAG,GAAG,CAAC;AACnC,YAAM,CAAC,GAAG,GAAG,GAAG,CAAC;AACjB,YAAM,CAAC,uBAAuB,GAAG,EAAE,CAAC;AACpC,YAAM,CAAC,SAAS,GAAG,KAAK,CAAC;AACzB,YAAM,CAAC,eAAe,GAAG,KAAK,CAAC;AAC/B,YAAM,CAAC,kBAAkB,GAAG,IAAI,CAAC;;AAIjC,aAAO,UAAU,CAAC;KACnB,CAAC,CAAC;GACJ;CACF,CAAC,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/yaxis.js",
      "sourcesContent": [
        "var alter = require('../lib/alter.js');\n\nvar Chainable = require('../lib/classes/chainable');\nmodule.exports = new Chainable('yaxis', {\n  args: [\n    {\n      name: 'inputSeries',\n      types: ['seriesList']\n    },\n    {\n      name: 'yaxis',\n      types: ['number', 'null'],\n      help: 'The numbered y-axis to plot this series on, eg .yaxis(2) for a 2nd y-axis.'\n    },\n    {\n      name: 'min',\n      types: ['number', 'null'],\n      help: 'Min value'\n    },\n    {\n      name: 'max',\n      types: ['number', 'null'],\n      help: 'Max value'\n    },\n    {\n      name: 'position',\n      types: ['string', 'null'],\n      help: 'left or right'\n    },\n    {\n      name: 'label',\n      types: ['string', 'null'],\n      help: 'Label for axis'\n    },\n    {\n      name: 'color',\n      types: ['string', 'null'],\n      help: 'Color of axis label'\n    },\n  ],\n  help: 'Configures a variety of y-axis options, the most important likely being the ability to add an Nth (eg 2nd) y-axis',\n  fn: function yaxisFn(args) {\n    return alter(args, function (eachSeries, yaxis, min, max, position, label, color) {\n      yaxis = yaxis || 1;\n\n      eachSeries.yaxis = yaxis;\n      eachSeries._global = eachSeries._global || {};\n\n      eachSeries._global.yaxes = eachSeries._global.yaxes || [];\n      eachSeries._global.yaxes[yaxis - 1] = eachSeries._global.yaxes[yaxis - 1] || {};\n\n      var myAxis = eachSeries._global.yaxes[yaxis - 1];\n      myAxis.position = position || (yaxis % 2 ? 'left' : 'right');\n      myAxis.min = min == null ? 0 : min;\n      myAxis.max = max;\n      myAxis.axisLabelFontSizePixels = 11;\n      myAxis.axisLabel = label;\n      myAxis.axisLabelColour = color;\n      myAxis.axisLabelUseCanvas = true;\n\n\n\n      return eachSeries;\n    });\n  }\n});\n"
      ]
    },
    "mtime": 1467119944363
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/es/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./lib/agg_response_to_series_list",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "toSeriesList"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _libAgg_response_to_series_list = require('./lib/agg_response_to_series_list');\n\nvar _libAgg_response_to_series_list2 = _interopRequireDefault(_libAgg_response_to_series_list);\n\nvar _ = require('lodash');\nvar moment = require('moment');\nvar toMS = require('../../lib/to_milliseconds.js');\nvar Datasource = require('../../lib/classes/datasource');\nvar buildRequest = require('./lib/build_request');\n\nmodule.exports = new Datasource('es', {\n  args: [{\n    name: 'q',\n    types: ['string', 'null'],\n    multi: true,\n    help: 'Query in lucene query string syntax'\n  }, {\n    name: 'metric',\n    types: ['string', 'null'],\n    multi: true,\n    help: 'An elasticsearch single value metric agg, eg avg, sum, min, max or cardinality, followed by a field.' + ' Eg \"sum:bytes\", or just \"count\"'\n  }, {\n    name: 'split',\n    types: ['string', 'null'],\n    multi: true,\n    help: 'An elasticsearch field to split the series on and a limit. Eg, \"hostname:10\" to get the top 10 hostnames'\n  }, {\n    name: 'index',\n    types: ['string', 'null'],\n    help: 'Index to query, wildcards accepted'\n  }, {\n    name: 'timefield',\n    types: ['string', 'null'],\n    help: 'Field of type \"date\" to use for x-axis'\n  }, {\n    name: 'kibana',\n    types: ['boolean', 'null'],\n    help: 'Respect filters on Kibana dashboards. Only has an effect when using on Kibana dashboards'\n  }, {\n    name: 'interval', // You really shouldn't use this, use the interval picker instead\n    types: ['string', 'null'],\n    help: '**DO NOT USE THIS**. Its fun for debugging fit functions, but you really should use the interval picker'\n  }],\n  help: 'Pull data from an elasticsearch instance',\n  aliases: ['elasticsearch'],\n  fn: function esFn(args, tlConfig) {\n\n    var config = _.defaults(_.clone(args.byName), {\n      q: '*',\n      metric: ['count'],\n      index: tlConfig.file.es.default_index,\n      timefield: tlConfig.file.es.timefield,\n      interval: tlConfig.time.interval,\n      kibana: true,\n      fit: 'nearest'\n    });\n\n    var callWithRequest = tlConfig.server.plugins.elasticsearch.callWithRequest;\n\n    var body = buildRequest(config, tlConfig);\n    return callWithRequest(tlConfig.request, 'search', body).then(function (resp) {\n      if (!resp._shards.total) throw new Error('Elasticsearch index not found: ' + config.index);\n      return {\n        type: 'seriesList',\n        list: (0, _libAgg_response_to_series_list2['default'])(resp.aggregations, config)\n      };\n    });\n  }\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy9lcy9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OzhDQUt5QixtQ0FBbUM7Ozs7QUFMNUQsSUFBSSxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQzFCLElBQUksTUFBTSxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUMvQixJQUFJLElBQUksR0FBRyxPQUFPLENBQUMsOEJBQThCLENBQUMsQ0FBQztBQUNuRCxJQUFJLFVBQVUsR0FBRyxPQUFPLENBQUMsOEJBQThCLENBQUMsQ0FBQztBQUN6RCxJQUFJLFlBQVksR0FBRyxPQUFPLENBQUMscUJBQXFCLENBQUMsQ0FBQzs7QUFHbEQsTUFBTSxDQUFDLE9BQU8sR0FBRyxJQUFJLFVBQVUsQ0FBQyxJQUFJLEVBQUU7QUFDcEMsTUFBSSxFQUFFLENBQ0o7QUFDRSxRQUFJLEVBQUUsR0FBRztBQUNULFNBQUssRUFBRSxDQUFDLFFBQVEsRUFBRSxNQUFNLENBQUM7QUFDekIsU0FBSyxFQUFFLElBQUk7QUFDWCxRQUFJLEVBQUUscUNBQXFDO0dBQzVDLEVBQ0Q7QUFDRSxRQUFJLEVBQUUsUUFBUTtBQUNkLFNBQUssRUFBRSxDQUFDLFFBQVEsRUFBRSxNQUFNLENBQUM7QUFDekIsU0FBSyxFQUFFLElBQUk7QUFDWCxRQUFJLEVBQUUsc0dBQXNHLEdBQzFHLGtDQUFrQztHQUNyQyxFQUNEO0FBQ0UsUUFBSSxFQUFFLE9BQU87QUFDYixTQUFLLEVBQUUsQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDO0FBQ3pCLFNBQUssRUFBRSxJQUFJO0FBQ1gsUUFBSSxFQUFFLDBHQUEwRztHQUNqSCxFQUNEO0FBQ0UsUUFBSSxFQUFFLE9BQU87QUFDYixTQUFLLEVBQUUsQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDO0FBQ3pCLFFBQUksRUFBRSxvQ0FBb0M7R0FDM0MsRUFDRDtBQUNFLFFBQUksRUFBRSxXQUFXO0FBQ2pCLFNBQUssRUFBRSxDQUFDLFFBQVEsRUFBRSxNQUFNLENBQUM7QUFDekIsUUFBSSxFQUFFLHdDQUF3QztHQUMvQyxFQUNEO0FBQ0UsUUFBSSxFQUFFLFFBQVE7QUFDZCxTQUFLLEVBQUUsQ0FBQyxTQUFTLEVBQUUsTUFBTSxDQUFDO0FBQzFCLFFBQUksRUFBRSwwRkFBMEY7R0FDakcsRUFDRDtBQUNFLFFBQUksRUFBRSxVQUFVO0FBQ2hCLFNBQUssRUFBRSxDQUFDLFFBQVEsRUFBRSxNQUFNLENBQUM7QUFDekIsUUFBSSxFQUFFLHlHQUF5RztHQUNoSCxDQUNGO0FBQ0QsTUFBSSxFQUFFLDBDQUEwQztBQUNoRCxTQUFPLEVBQUUsQ0FBQyxlQUFlLENBQUM7QUFDMUIsSUFBRSxFQUFFLFNBQVMsSUFBSSxDQUFDLElBQUksRUFBRSxRQUFRLEVBQUU7O0FBRWhDLFFBQUksTUFBTSxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUU7QUFDNUMsT0FBQyxFQUFFLEdBQUc7QUFDTixZQUFNLEVBQUUsQ0FBQyxPQUFPLENBQUM7QUFDakIsV0FBSyxFQUFFLFFBQVEsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLGFBQWE7QUFDckMsZUFBUyxFQUFFLFFBQVEsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLFNBQVM7QUFDckMsY0FBUSxFQUFFLFFBQVEsQ0FBQyxJQUFJLENBQUMsUUFBUTtBQUNoQyxZQUFNLEVBQUUsSUFBSTtBQUNaLFNBQUcsRUFBRSxTQUFTO0tBQ2YsQ0FBQyxDQUFDOztBQUVILFFBQUksZUFBZSxHQUFHLFFBQVEsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxlQUFlLENBQUM7O0FBRTVFLFFBQUksSUFBSSxHQUFHLFlBQVksQ0FBQyxNQUFNLEVBQUUsUUFBUSxDQUFDLENBQUM7QUFDMUMsV0FBTyxlQUFlLENBQUMsUUFBUSxDQUFDLE9BQU8sRUFBRSxRQUFRLEVBQUUsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsSUFBSSxFQUFFO0FBQzVFLFVBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxNQUFNLElBQUksS0FBSyxDQUFDLGlDQUFpQyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUMzRixhQUFPO0FBQ0wsWUFBSSxFQUFFLFlBQVk7QUFDbEIsWUFBSSxFQUFFLGlEQUFhLElBQUksQ0FBQyxZQUFZLEVBQUUsTUFBTSxDQUFDO09BQzlDLENBQUM7S0FDSCxDQUFDLENBQUM7R0FDSjtDQUNGLENBQUMsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL2luc3RhbGxlZFBsdWdpbnMvdGltZWxpb24vc2VydmVyL3Nlcmllc19mdW5jdGlvbnMvZXMvaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xudmFyIG1vbWVudCA9IHJlcXVpcmUoJ21vbWVudCcpO1xudmFyIHRvTVMgPSByZXF1aXJlKCcuLi8uLi9saWIvdG9fbWlsbGlzZWNvbmRzLmpzJyk7XG52YXIgRGF0YXNvdXJjZSA9IHJlcXVpcmUoJy4uLy4uL2xpYi9jbGFzc2VzL2RhdGFzb3VyY2UnKTtcbnZhciBidWlsZFJlcXVlc3QgPSByZXF1aXJlKCcuL2xpYi9idWlsZF9yZXF1ZXN0Jyk7XG5pbXBvcnQgdG9TZXJpZXNMaXN0IGZyb20gJy4vbGliL2FnZ19yZXNwb25zZV90b19zZXJpZXNfbGlzdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gbmV3IERhdGFzb3VyY2UoJ2VzJywge1xuICBhcmdzOiBbXG4gICAge1xuICAgICAgbmFtZTogJ3EnLFxuICAgICAgdHlwZXM6IFsnc3RyaW5nJywgJ251bGwnXSxcbiAgICAgIG11bHRpOiB0cnVlLFxuICAgICAgaGVscDogJ1F1ZXJ5IGluIGx1Y2VuZSBxdWVyeSBzdHJpbmcgc3ludGF4J1xuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ21ldHJpYycsXG4gICAgICB0eXBlczogWydzdHJpbmcnLCAnbnVsbCddLFxuICAgICAgbXVsdGk6IHRydWUsXG4gICAgICBoZWxwOiAnQW4gZWxhc3RpY3NlYXJjaCBzaW5nbGUgdmFsdWUgbWV0cmljIGFnZywgZWcgYXZnLCBzdW0sIG1pbiwgbWF4IG9yIGNhcmRpbmFsaXR5LCBmb2xsb3dlZCBieSBhIGZpZWxkLicgK1xuICAgICAgICAnIEVnIFwic3VtOmJ5dGVzXCIsIG9yIGp1c3QgXCJjb3VudFwiJ1xuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ3NwbGl0JyxcbiAgICAgIHR5cGVzOiBbJ3N0cmluZycsICdudWxsJ10sXG4gICAgICBtdWx0aTogdHJ1ZSxcbiAgICAgIGhlbHA6ICdBbiBlbGFzdGljc2VhcmNoIGZpZWxkIHRvIHNwbGl0IHRoZSBzZXJpZXMgb24gYW5kIGEgbGltaXQuIEVnLCBcImhvc3RuYW1lOjEwXCIgdG8gZ2V0IHRoZSB0b3AgMTAgaG9zdG5hbWVzJ1xuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ2luZGV4JyxcbiAgICAgIHR5cGVzOiBbJ3N0cmluZycsICdudWxsJ10sXG4gICAgICBoZWxwOiAnSW5kZXggdG8gcXVlcnksIHdpbGRjYXJkcyBhY2NlcHRlZCdcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICd0aW1lZmllbGQnLFxuICAgICAgdHlwZXM6IFsnc3RyaW5nJywgJ251bGwnXSxcbiAgICAgIGhlbHA6ICdGaWVsZCBvZiB0eXBlIFwiZGF0ZVwiIHRvIHVzZSBmb3IgeC1heGlzJ1xuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ2tpYmFuYScsXG4gICAgICB0eXBlczogWydib29sZWFuJywgJ251bGwnXSxcbiAgICAgIGhlbHA6ICdSZXNwZWN0IGZpbHRlcnMgb24gS2liYW5hIGRhc2hib2FyZHMuIE9ubHkgaGFzIGFuIGVmZmVjdCB3aGVuIHVzaW5nIG9uIEtpYmFuYSBkYXNoYm9hcmRzJ1xuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ2ludGVydmFsJywgLy8gWW91IHJlYWxseSBzaG91bGRuJ3QgdXNlIHRoaXMsIHVzZSB0aGUgaW50ZXJ2YWwgcGlja2VyIGluc3RlYWRcbiAgICAgIHR5cGVzOiBbJ3N0cmluZycsICdudWxsJ10sXG4gICAgICBoZWxwOiAnKipETyBOT1QgVVNFIFRISVMqKi4gSXRzIGZ1biBmb3IgZGVidWdnaW5nIGZpdCBmdW5jdGlvbnMsIGJ1dCB5b3UgcmVhbGx5IHNob3VsZCB1c2UgdGhlIGludGVydmFsIHBpY2tlcidcbiAgICB9XG4gIF0sXG4gIGhlbHA6ICdQdWxsIGRhdGEgZnJvbSBhbiBlbGFzdGljc2VhcmNoIGluc3RhbmNlJyxcbiAgYWxpYXNlczogWydlbGFzdGljc2VhcmNoJ10sXG4gIGZuOiBmdW5jdGlvbiBlc0ZuKGFyZ3MsIHRsQ29uZmlnKSB7XG5cbiAgICB2YXIgY29uZmlnID0gXy5kZWZhdWx0cyhfLmNsb25lKGFyZ3MuYnlOYW1lKSwge1xuICAgICAgcTogJyonLFxuICAgICAgbWV0cmljOiBbJ2NvdW50J10sXG4gICAgICBpbmRleDogdGxDb25maWcuZmlsZS5lcy5kZWZhdWx0X2luZGV4LFxuICAgICAgdGltZWZpZWxkOiB0bENvbmZpZy5maWxlLmVzLnRpbWVmaWVsZCxcbiAgICAgIGludGVydmFsOiB0bENvbmZpZy50aW1lLmludGVydmFsLFxuICAgICAga2liYW5hOiB0cnVlLFxuICAgICAgZml0OiAnbmVhcmVzdCdcbiAgICB9KTtcblxuICAgIHZhciBjYWxsV2l0aFJlcXVlc3QgPSB0bENvbmZpZy5zZXJ2ZXIucGx1Z2lucy5lbGFzdGljc2VhcmNoLmNhbGxXaXRoUmVxdWVzdDtcblxuICAgIHZhciBib2R5ID0gYnVpbGRSZXF1ZXN0KGNvbmZpZywgdGxDb25maWcpO1xuICAgIHJldHVybiBjYWxsV2l0aFJlcXVlc3QodGxDb25maWcucmVxdWVzdCwgJ3NlYXJjaCcsIGJvZHkpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHtcbiAgICAgIGlmICghcmVzcC5fc2hhcmRzLnRvdGFsKSB0aHJvdyBuZXcgRXJyb3IoJ0VsYXN0aWNzZWFyY2ggaW5kZXggbm90IGZvdW5kOiAnICsgY29uZmlnLmluZGV4KTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdzZXJpZXNMaXN0JyxcbiAgICAgICAgbGlzdDogdG9TZXJpZXNMaXN0KHJlc3AuYWdncmVnYXRpb25zLCBjb25maWcpXG4gICAgICB9O1xuICAgIH0pO1xuICB9XG59KTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/es/index.js"
      ],
      "names": [],
      "mappings": ";;;;8CAKyB,mCAAmC;;;;AAL5D,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC1B,IAAI,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC/B,IAAI,IAAI,GAAG,OAAO,CAAC,8BAA8B,CAAC,CAAC;AACnD,IAAI,UAAU,GAAG,OAAO,CAAC,8BAA8B,CAAC,CAAC;AACzD,IAAI,YAAY,GAAG,OAAO,CAAC,qBAAqB,CAAC,CAAC;;AAGlD,MAAM,CAAC,OAAO,GAAG,IAAI,UAAU,CAAC,IAAI,EAAE;AACpC,MAAI,EAAE,CACJ;AACE,QAAI,EAAE,GAAG;AACT,SAAK,EAAE,CAAC,QAAQ,EAAE,MAAM,CAAC;AACzB,SAAK,EAAE,IAAI;AACX,QAAI,EAAE,qCAAqC;GAC5C,EACD;AACE,QAAI,EAAE,QAAQ;AACd,SAAK,EAAE,CAAC,QAAQ,EAAE,MAAM,CAAC;AACzB,SAAK,EAAE,IAAI;AACX,QAAI,EAAE,sGAAsG,GAC1G,kCAAkC;GACrC,EACD;AACE,QAAI,EAAE,OAAO;AACb,SAAK,EAAE,CAAC,QAAQ,EAAE,MAAM,CAAC;AACzB,SAAK,EAAE,IAAI;AACX,QAAI,EAAE,0GAA0G;GACjH,EACD;AACE,QAAI,EAAE,OAAO;AACb,SAAK,EAAE,CAAC,QAAQ,EAAE,MAAM,CAAC;AACzB,QAAI,EAAE,oCAAoC;GAC3C,EACD;AACE,QAAI,EAAE,WAAW;AACjB,SAAK,EAAE,CAAC,QAAQ,EAAE,MAAM,CAAC;AACzB,QAAI,EAAE,wCAAwC;GAC/C,EACD;AACE,QAAI,EAAE,QAAQ;AACd,SAAK,EAAE,CAAC,SAAS,EAAE,MAAM,CAAC;AAC1B,QAAI,EAAE,0FAA0F;GACjG,EACD;AACE,QAAI,EAAE,UAAU;AAChB,SAAK,EAAE,CAAC,QAAQ,EAAE,MAAM,CAAC;AACzB,QAAI,EAAE,yGAAyG;GAChH,CACF;AACD,MAAI,EAAE,0CAA0C;AAChD,SAAO,EAAE,CAAC,eAAe,CAAC;AAC1B,IAAE,EAAE,SAAS,IAAI,CAAC,IAAI,EAAE,QAAQ,EAAE;;AAEhC,QAAI,MAAM,GAAG,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE;AAC5C,OAAC,EAAE,GAAG;AACN,YAAM,EAAE,CAAC,OAAO,CAAC;AACjB,WAAK,EAAE,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,aAAa;AACrC,eAAS,EAAE,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,SAAS;AACrC,cAAQ,EAAE,QAAQ,CAAC,IAAI,CAAC,QAAQ;AAChC,YAAM,EAAE,IAAI;AACZ,SAAG,EAAE,SAAS;KACf,CAAC,CAAC;;AAEH,QAAI,eAAe,GAAG,QAAQ,CAAC,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,eAAe,CAAC;;AAE5E,QAAI,IAAI,GAAG,YAAY,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;AAC1C,WAAO,eAAe,CAAC,QAAQ,CAAC,OAAO,EAAE,QAAQ,EAAE,IAAI,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,EAAE;AAC5E,UAAI,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,MAAM,IAAI,KAAK,CAAC,iCAAiC,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC;AAC3F,aAAO;AACL,YAAI,EAAE,YAAY;AAClB,YAAI,EAAE,iDAAa,IAAI,CAAC,YAAY,EAAE,MAAM,CAAC;OAC9C,CAAC;KACH,CAAC,CAAC;GACJ;CACF,CAAC,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/es/index.js",
      "sourcesContent": [
        "var _ = require('lodash');\nvar moment = require('moment');\nvar toMS = require('../../lib/to_milliseconds.js');\nvar Datasource = require('../../lib/classes/datasource');\nvar buildRequest = require('./lib/build_request');\nimport toSeriesList from './lib/agg_response_to_series_list';\n\nmodule.exports = new Datasource('es', {\n  args: [\n    {\n      name: 'q',\n      types: ['string', 'null'],\n      multi: true,\n      help: 'Query in lucene query string syntax'\n    },\n    {\n      name: 'metric',\n      types: ['string', 'null'],\n      multi: true,\n      help: 'An elasticsearch single value metric agg, eg avg, sum, min, max or cardinality, followed by a field.' +\n        ' Eg \"sum:bytes\", or just \"count\"'\n    },\n    {\n      name: 'split',\n      types: ['string', 'null'],\n      multi: true,\n      help: 'An elasticsearch field to split the series on and a limit. Eg, \"hostname:10\" to get the top 10 hostnames'\n    },\n    {\n      name: 'index',\n      types: ['string', 'null'],\n      help: 'Index to query, wildcards accepted'\n    },\n    {\n      name: 'timefield',\n      types: ['string', 'null'],\n      help: 'Field of type \"date\" to use for x-axis'\n    },\n    {\n      name: 'kibana',\n      types: ['boolean', 'null'],\n      help: 'Respect filters on Kibana dashboards. Only has an effect when using on Kibana dashboards'\n    },\n    {\n      name: 'interval', // You really shouldn't use this, use the interval picker instead\n      types: ['string', 'null'],\n      help: '**DO NOT USE THIS**. Its fun for debugging fit functions, but you really should use the interval picker'\n    }\n  ],\n  help: 'Pull data from an elasticsearch instance',\n  aliases: ['elasticsearch'],\n  fn: function esFn(args, tlConfig) {\n\n    var config = _.defaults(_.clone(args.byName), {\n      q: '*',\n      metric: ['count'],\n      index: tlConfig.file.es.default_index,\n      timefield: tlConfig.file.es.timefield,\n      interval: tlConfig.time.interval,\n      kibana: true,\n      fit: 'nearest'\n    });\n\n    var callWithRequest = tlConfig.server.plugins.elasticsearch.callWithRequest;\n\n    var body = buildRequest(config, tlConfig);\n    return callWithRequest(tlConfig.request, 'search', body).then(function (resp) {\n      if (!resp._shards.total) throw new Error('Elasticsearch index not found: ' + config.index);\n      return {\n        type: 'seriesList',\n        list: toSeriesList(resp.aggregations, config)\n      };\n    });\n  }\n});\n"
      ]
    },
    "mtime": 1467119944519
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/es/lib/agg_response_to_series_list.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "timeBucketsToPairs",
            "buckets",
            "flattenBucket",
            "bucket",
            "path",
            "result",
            "toSeriesList",
            "aggs",
            "config"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "timeBucketsToPairs",
              "exported": "timeBucketsToPairs"
            },
            {
              "kind": "local",
              "local": "buckets",
              "exported": "buckets"
            },
            {
              "kind": "local",
              "local": "flattenBucket",
              "exported": "flattenBucket"
            },
            {
              "kind": "local",
              "local": "bucket",
              "exported": "bucket"
            },
            {
              "kind": "local",
              "local": "path",
              "exported": "path"
            },
            {
              "kind": "local",
              "local": "result",
              "exported": "result"
            },
            {
              "kind": "local",
              "local": "toSeriesList",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "aggs",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "config",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports.timeBucketsToPairs = timeBucketsToPairs;\nexports.flattenBucket = flattenBucket;\nexports['default'] = toSeriesList;\nvar _ = require('lodash');\n\nfunction timeBucketsToPairs(buckets) {\n  var timestamps = _.pluck(buckets, 'key');\n  var series = {};\n  _.each(buckets, function (bucket) {\n    _.forOwn(bucket, function (val, key) {\n      if (_.isPlainObject(val)) {\n        series[key] = series[key] || [];\n        series[key].push(val.value);\n      }\n    });\n  });\n\n  return _.mapValues(series, function (values) {\n    return _.zip(timestamps, values);\n  });\n}\n\nfunction flattenBucket(bucket, path, result) {\n  result = result || {};\n  path = path || [];\n  _.forOwn(bucket, function (val, key) {\n    if (!_.isPlainObject(val)) return;\n    if (_.get(val, 'meta.type') === 'split') {\n      _.each(val.buckets, function (bucket, bucketKey) {\n        if (bucket.key == null) bucket.key = bucketKey; // For handling \"keyed\" response formats, eg filters agg\n        flattenBucket(bucket, path.concat([key + ':' + bucket.key]), result);\n      });\n    } else if (_.get(val, 'meta.type') === 'time_buckets') {\n      var metrics = timeBucketsToPairs(val.buckets);\n      _.each(metrics, function (pairs, metricName) {\n        result[path.concat([metricName]).join(' > ')] = pairs;\n      });\n    }\n  });\n  return result;\n}\n\nfunction toSeriesList(aggs, config) {\n  return _.map(flattenBucket(aggs), function (values, name) {\n    return {\n      data: values,\n      type: 'series',\n      fit: config.fit,\n      label: name\n    };\n  });\n}\n\n;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy9lcy9saWIvYWdnX3Jlc3BvbnNlX3RvX3Nlcmllc19saXN0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7cUJBdUN3QixZQUFZO0FBdkNwQyxJQUFJLENBQUMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7O0FBRW5CLFNBQVMsa0JBQWtCLENBQUMsT0FBTyxFQUFFO0FBQzFDLE1BQUksVUFBVSxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFLEtBQUssQ0FBQyxDQUFDO0FBQ3pDLE1BQUksTUFBTSxHQUFHLEVBQUUsQ0FBQztBQUNoQixHQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxVQUFVLE1BQU0sRUFBRTtBQUNoQyxLQUFDLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxVQUFVLEdBQUcsRUFBRSxHQUFHLEVBQUU7QUFDbkMsVUFBSSxDQUFDLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FBQyxFQUFFO0FBQ3hCLGNBQU0sQ0FBQyxHQUFHLENBQUMsR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ2hDLGNBQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDO09BQzdCO0tBQ0YsQ0FBQyxDQUFDO0dBQ0osQ0FBQyxDQUFDOztBQUVILFNBQU8sQ0FBQyxDQUFDLFNBQVMsQ0FBQyxNQUFNLEVBQUUsVUFBVSxNQUFNLEVBQUU7QUFDM0MsV0FBTyxDQUFDLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBRSxNQUFNLENBQUMsQ0FBQztHQUNsQyxDQUFDLENBQUM7Q0FDSjs7QUFFTSxTQUFTLGFBQWEsQ0FBQyxNQUFNLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRTtBQUNsRCxRQUFNLEdBQUcsTUFBTSxJQUFJLEVBQUUsQ0FBQztBQUN0QixNQUFJLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQztBQUNsQixHQUFDLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxVQUFVLEdBQUcsRUFBRSxHQUFHLEVBQUU7QUFDbkMsUUFBSSxDQUFDLENBQUMsQ0FBQyxhQUFhLENBQUMsR0FBRyxDQUFDLEVBQUUsT0FBTztBQUNsQyxRQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLFdBQVcsQ0FBQyxLQUFLLE9BQU8sRUFBRTtBQUN2QyxPQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsVUFBVSxNQUFNLEVBQUUsU0FBUyxFQUFFO0FBQy9DLFlBQUksTUFBTSxDQUFDLEdBQUcsSUFBSSxJQUFJLEVBQUUsTUFBTSxDQUFDLEdBQUcsR0FBRyxTQUFTLENBQUM7QUFDL0MscUJBQWEsQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUM7T0FDdEUsQ0FBQyxDQUFDO0tBQ0osTUFBTSxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLFdBQVcsQ0FBQyxLQUFLLGNBQWMsRUFBRTtBQUNyRCxVQUFJLE9BQU8sR0FBRyxrQkFBa0IsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDOUMsT0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsVUFBVSxLQUFLLEVBQUUsVUFBVSxFQUFFO0FBQzNDLGNBQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUM7T0FDdkQsQ0FBQyxDQUFDO0tBQ0o7R0FDRixDQUFDLENBQUM7QUFDSCxTQUFPLE1BQU0sQ0FBQztDQUNmOztBQUVjLFNBQVMsWUFBWSxDQUFDLElBQUksRUFBRSxNQUFNLEVBQUU7QUFDakQsU0FBTyxDQUFDLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsRUFBRSxVQUFVLE1BQU0sRUFBRSxJQUFJLEVBQUU7QUFDeEQsV0FBTztBQUNMLFVBQUksRUFBRSxNQUFNO0FBQ1osVUFBSSxFQUFFLFFBQVE7QUFDZCxTQUFHLEVBQUUsTUFBTSxDQUFDLEdBQUc7QUFDZixXQUFLLEVBQUUsSUFBSTtLQUNaLENBQUM7R0FDSCxDQUFDLENBQUM7Q0FDSjs7QUFBQSxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy9lcy9saWIvYWdnX3Jlc3BvbnNlX3RvX3Nlcmllc19saXN0LmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcblxuZXhwb3J0IGZ1bmN0aW9uIHRpbWVCdWNrZXRzVG9QYWlycyhidWNrZXRzKSB7XG4gIHZhciB0aW1lc3RhbXBzID0gXy5wbHVjayhidWNrZXRzLCAna2V5Jyk7XG4gIHZhciBzZXJpZXMgPSB7fTtcbiAgXy5lYWNoKGJ1Y2tldHMsIGZ1bmN0aW9uIChidWNrZXQpIHtcbiAgICBfLmZvck93bihidWNrZXQsIGZ1bmN0aW9uICh2YWwsIGtleSkge1xuICAgICAgaWYgKF8uaXNQbGFpbk9iamVjdCh2YWwpKSB7XG4gICAgICAgIHNlcmllc1trZXldID0gc2VyaWVzW2tleV0gfHwgW107XG4gICAgICAgIHNlcmllc1trZXldLnB1c2godmFsLnZhbHVlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgcmV0dXJuIF8ubWFwVmFsdWVzKHNlcmllcywgZnVuY3Rpb24gKHZhbHVlcykge1xuICAgIHJldHVybiBfLnppcCh0aW1lc3RhbXBzLCB2YWx1ZXMpO1xuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZsYXR0ZW5CdWNrZXQoYnVja2V0LCBwYXRoLCByZXN1bHQpIHtcbiAgcmVzdWx0ID0gcmVzdWx0IHx8IHt9O1xuICBwYXRoID0gcGF0aCB8fCBbXTtcbiAgXy5mb3JPd24oYnVja2V0LCBmdW5jdGlvbiAodmFsLCBrZXkpIHtcbiAgICBpZiAoIV8uaXNQbGFpbk9iamVjdCh2YWwpKSByZXR1cm47XG4gICAgaWYgKF8uZ2V0KHZhbCwgJ21ldGEudHlwZScpID09PSAnc3BsaXQnKSB7XG4gICAgICBfLmVhY2godmFsLmJ1Y2tldHMsIGZ1bmN0aW9uIChidWNrZXQsIGJ1Y2tldEtleSkge1xuICAgICAgICBpZiAoYnVja2V0LmtleSA9PSBudWxsKSBidWNrZXQua2V5ID0gYnVja2V0S2V5OyAvLyBGb3IgaGFuZGxpbmcgXCJrZXllZFwiIHJlc3BvbnNlIGZvcm1hdHMsIGVnIGZpbHRlcnMgYWdnXG4gICAgICAgIGZsYXR0ZW5CdWNrZXQoYnVja2V0LCBwYXRoLmNvbmNhdChba2V5ICsgJzonICsgYnVja2V0LmtleV0pLCByZXN1bHQpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChfLmdldCh2YWwsICdtZXRhLnR5cGUnKSA9PT0gJ3RpbWVfYnVja2V0cycpIHtcbiAgICAgIHZhciBtZXRyaWNzID0gdGltZUJ1Y2tldHNUb1BhaXJzKHZhbC5idWNrZXRzKTtcbiAgICAgIF8uZWFjaChtZXRyaWNzLCBmdW5jdGlvbiAocGFpcnMsIG1ldHJpY05hbWUpIHtcbiAgICAgICAgcmVzdWx0W3BhdGguY29uY2F0KFttZXRyaWNOYW1lXSkuam9pbignID4gJyldID0gcGFpcnM7XG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0b1Nlcmllc0xpc3QoYWdncywgY29uZmlnKSB7XG4gIHJldHVybiBfLm1hcChmbGF0dGVuQnVja2V0KGFnZ3MpLCBmdW5jdGlvbiAodmFsdWVzLCBuYW1lKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGRhdGE6IHZhbHVlcyxcbiAgICAgIHR5cGU6ICdzZXJpZXMnLFxuICAgICAgZml0OiBjb25maWcuZml0LFxuICAgICAgbGFiZWw6IG5hbWVcbiAgICB9O1xuICB9KTtcbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/es/lib/agg_response_to_series_list.js"
      ],
      "names": [],
      "mappings": ";;;;;;;qBAuCwB,YAAY;AAvCpC,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;;AAEnB,SAAS,kBAAkB,CAAC,OAAO,EAAE;AAC1C,MAAI,UAAU,GAAG,CAAC,CAAC,KAAK,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;AACzC,MAAI,MAAM,GAAG,EAAE,CAAC;AAChB,GAAC,CAAC,IAAI,CAAC,OAAO,EAAE,UAAU,MAAM,EAAE;AAChC,KAAC,CAAC,MAAM,CAAC,MAAM,EAAE,UAAU,GAAG,EAAE,GAAG,EAAE;AACnC,UAAI,CAAC,CAAC,aAAa,CAAC,GAAG,CAAC,EAAE;AACxB,cAAM,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC;AAChC,cAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;OAC7B;KACF,CAAC,CAAC;GACJ,CAAC,CAAC;;AAEH,SAAO,CAAC,CAAC,SAAS,CAAC,MAAM,EAAE,UAAU,MAAM,EAAE;AAC3C,WAAO,CAAC,CAAC,GAAG,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC;GAClC,CAAC,CAAC;CACJ;;AAEM,SAAS,aAAa,CAAC,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE;AAClD,QAAM,GAAG,MAAM,IAAI,EAAE,CAAC;AACtB,MAAI,GAAG,IAAI,IAAI,EAAE,CAAC;AAClB,GAAC,CAAC,MAAM,CAAC,MAAM,EAAE,UAAU,GAAG,EAAE,GAAG,EAAE;AACnC,QAAI,CAAC,CAAC,CAAC,aAAa,CAAC,GAAG,CAAC,EAAE,OAAO;AAClC,QAAI,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,WAAW,CAAC,KAAK,OAAO,EAAE;AACvC,OAAC,CAAC,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,UAAU,MAAM,EAAE,SAAS,EAAE;AAC/C,YAAI,MAAM,CAAC,GAAG,IAAI,IAAI,EAAE,MAAM,CAAC,GAAG,GAAG,SAAS,CAAC;AAC/C,qBAAa,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC;OACtE,CAAC,CAAC;KACJ,MAAM,IAAI,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,WAAW,CAAC,KAAK,cAAc,EAAE;AACrD,UAAI,OAAO,GAAG,kBAAkB,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;AAC9C,OAAC,CAAC,IAAI,CAAC,OAAO,EAAE,UAAU,KAAK,EAAE,UAAU,EAAE;AAC3C,cAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,KAAK,CAAC;OACvD,CAAC,CAAC;KACJ;GACF,CAAC,CAAC;AACH,SAAO,MAAM,CAAC;CACf;;AAEc,SAAS,YAAY,CAAC,IAAI,EAAE,MAAM,EAAE;AACjD,SAAO,CAAC,CAAC,GAAG,CAAC,aAAa,CAAC,IAAI,CAAC,EAAE,UAAU,MAAM,EAAE,IAAI,EAAE;AACxD,WAAO;AACL,UAAI,EAAE,MAAM;AACZ,UAAI,EAAE,QAAQ;AACd,SAAG,EAAE,MAAM,CAAC,GAAG;AACf,WAAK,EAAE,IAAI;KACZ,CAAC;GACH,CAAC,CAAC;CACJ;;AAAA,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/es/lib/agg_response_to_series_list.js",
      "sourcesContent": [
        "var _ = require('lodash');\n\nexport function timeBucketsToPairs(buckets) {\n  var timestamps = _.pluck(buckets, 'key');\n  var series = {};\n  _.each(buckets, function (bucket) {\n    _.forOwn(bucket, function (val, key) {\n      if (_.isPlainObject(val)) {\n        series[key] = series[key] || [];\n        series[key].push(val.value);\n      }\n    });\n  });\n\n  return _.mapValues(series, function (values) {\n    return _.zip(timestamps, values);\n  });\n}\n\nexport function flattenBucket(bucket, path, result) {\n  result = result || {};\n  path = path || [];\n  _.forOwn(bucket, function (val, key) {\n    if (!_.isPlainObject(val)) return;\n    if (_.get(val, 'meta.type') === 'split') {\n      _.each(val.buckets, function (bucket, bucketKey) {\n        if (bucket.key == null) bucket.key = bucketKey; // For handling \"keyed\" response formats, eg filters agg\n        flattenBucket(bucket, path.concat([key + ':' + bucket.key]), result);\n      });\n    } else if (_.get(val, 'meta.type') === 'time_buckets') {\n      var metrics = timeBucketsToPairs(val.buckets);\n      _.each(metrics, function (pairs, metricName) {\n        result[path.concat([metricName]).join(' > ')] = pairs;\n      });\n    }\n  });\n  return result;\n}\n\nexport default function toSeriesList(aggs, config) {\n  return _.map(flattenBucket(aggs), function (values, name) {\n    return {\n      data: values,\n      type: 'series',\n      fit: config.fit,\n      label: name\n    };\n  });\n};\n"
      ]
    },
    "mtime": 1467119944687
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/es/lib/build_request.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _ = require('lodash');\nvar createDateAgg = require('./create_date_agg');\n\nmodule.exports = function buildRequest(config, tlConfig) {\n\n  var bool = { must: [], must_not: [] };\n\n  var timeFilter = { range: {} };\n  timeFilter.range[config.timefield] = { gte: tlConfig.time.from, lte: tlConfig.time.to, format: 'epoch_millis' };\n  bool.must.push(timeFilter);\n\n  // Use the kibana filter bar filters\n  if (config.kibana) {\n    bool.filter = _.get(tlConfig, 'request.payload.extended.es.filter') || {};\n  }\n\n  var aggs = {\n    'q': {\n      meta: { type: 'split' },\n      filters: {\n        filters: _.chain(config.q).map(function (q) {\n          return [q, { query_string: { query: q } }];\n        }).zipObject().value()\n      },\n      aggs: {}\n    }\n  };\n\n  var aggCursor = aggs.q.aggs;\n\n  _.each(config.split, function (clause, i) {\n    var clause = clause.split(':');\n    if (clause[0] && clause[1]) {\n      aggCursor[clause[0]] = {\n        meta: { type: 'split' },\n        terms: {\n          field: clause[0],\n          size: parseInt(clause[1], 10)\n        },\n        aggs: {}\n      };\n      aggCursor = aggCursor[clause[0]].aggs;\n    } else {\n      throw new Error('`split` requires field:limit');\n    }\n  });\n\n  _.assign(aggCursor, createDateAgg(config, tlConfig));\n\n  return {\n    index: config.index,\n    body: {\n      query: {\n        bool: bool\n      },\n      aggs: aggs,\n      size: 0\n    }\n  };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy9lcy9saWIvYnVpbGRfcmVxdWVzdC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQUssQ0FBQyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUMzQixJQUFJLGFBQWEsR0FBRyxPQUFPLENBQUMsbUJBQW1CLENBQUMsQ0FBQzs7QUFFakQsTUFBTSxDQUFDLE9BQU8sR0FBSSxTQUFTLFlBQVksQ0FBQyxNQUFNLEVBQUUsUUFBUSxFQUFFOztBQUV4RCxNQUFJLElBQUksR0FBRyxFQUFDLElBQUksRUFBRSxFQUFFLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBQyxDQUFDOztBQUVwQyxNQUFJLFVBQVUsR0FBRyxFQUFDLEtBQUssRUFBQyxFQUFFLEVBQUMsQ0FBQztBQUM1QixZQUFVLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsR0FBRyxFQUFDLEdBQUcsRUFBRSxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxHQUFHLEVBQUUsUUFBUSxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUUsTUFBTSxFQUFFLGNBQWMsRUFBQyxDQUFDO0FBQzlHLE1BQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDOzs7QUFHM0IsTUFBSSxNQUFNLENBQUMsTUFBTSxFQUFFO0FBQ2pCLFFBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxRQUFRLEVBQUUsb0NBQW9DLENBQUMsSUFBSSxFQUFFLENBQUM7R0FDM0U7O0FBRUQsTUFBSSxJQUFJLEdBQUc7QUFDVCxPQUFHLEVBQUU7QUFDSCxVQUFJLEVBQUUsRUFBQyxJQUFJLEVBQUUsT0FBTyxFQUFDO0FBQ3JCLGFBQU8sRUFBRTtBQUNQLGVBQU8sRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLEVBQUU7QUFDMUMsaUJBQU8sQ0FBQyxDQUFDLEVBQUUsRUFBQyxZQUFZLEVBQUMsRUFBQyxLQUFLLEVBQUUsQ0FBQyxFQUFDLEVBQUMsQ0FBQyxDQUFDO1NBQ3ZDLENBQUMsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxLQUFLLEVBQUU7T0FDdkI7QUFDRCxVQUFJLEVBQUUsRUFBRTtLQUNUO0dBQ0YsQ0FBQzs7QUFFRixNQUFJLFNBQVMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQzs7QUFFNUIsR0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFLFVBQVUsTUFBTSxFQUFFLENBQUMsRUFBRTtBQUN4QyxRQUFJLE1BQU0sR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQy9CLFFBQUksTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRTtBQUMxQixlQUFTLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUc7QUFDckIsWUFBSSxFQUFFLEVBQUMsSUFBSSxFQUFFLE9BQU8sRUFBQztBQUNyQixhQUFLLEVBQUU7QUFDTCxlQUFLLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQztBQUNoQixjQUFJLEVBQUUsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUM7U0FDOUI7QUFDRCxZQUFJLEVBQUUsRUFBRTtPQUNULENBQUM7QUFDRixlQUFTLEdBQUcsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztLQUN2QyxNQUFNO0FBQ0wsWUFBTSxJQUFJLEtBQUssQ0FBRSw4QkFBOEIsQ0FBQyxDQUFDO0tBQ2xEO0dBQ0YsQ0FBQyxDQUFDOztBQUVILEdBQUMsQ0FBQyxNQUFNLENBQUMsU0FBUyxFQUFFLGFBQWEsQ0FBQyxNQUFNLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQzs7QUFHckQsU0FBTztBQUNMLFNBQUssRUFBRSxNQUFNLENBQUMsS0FBSztBQUNuQixRQUFJLEVBQUU7QUFDSixXQUFLLEVBQUU7QUFDTCxZQUFJLEVBQUUsSUFBSTtPQUNYO0FBQ0QsVUFBSSxFQUFFLElBQUk7QUFDVixVQUFJLEVBQUUsQ0FBQztLQUNSO0dBQ0YsQ0FBQztDQUNILENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9pbnN0YWxsZWRQbHVnaW5zL3RpbWVsaW9uL3NlcnZlci9zZXJpZXNfZnVuY3Rpb25zL2VzL2xpYi9idWlsZF9yZXF1ZXN0LmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyICBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XG52YXIgY3JlYXRlRGF0ZUFnZyA9IHJlcXVpcmUoJy4vY3JlYXRlX2RhdGVfYWdnJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gIGZ1bmN0aW9uIGJ1aWxkUmVxdWVzdChjb25maWcsIHRsQ29uZmlnKSB7XG5cbiAgdmFyIGJvb2wgPSB7bXVzdDogW10sIG11c3Rfbm90OiBbXX07XG5cbiAgdmFyIHRpbWVGaWx0ZXIgPSB7cmFuZ2U6e319O1xuICB0aW1lRmlsdGVyLnJhbmdlW2NvbmZpZy50aW1lZmllbGRdID0ge2d0ZTogdGxDb25maWcudGltZS5mcm9tLCBsdGU6IHRsQ29uZmlnLnRpbWUudG8sIGZvcm1hdDogJ2Vwb2NoX21pbGxpcyd9O1xuICBib29sLm11c3QucHVzaCh0aW1lRmlsdGVyKTtcblxuICAvLyBVc2UgdGhlIGtpYmFuYSBmaWx0ZXIgYmFyIGZpbHRlcnNcbiAgaWYgKGNvbmZpZy5raWJhbmEpIHtcbiAgICBib29sLmZpbHRlciA9IF8uZ2V0KHRsQ29uZmlnLCAncmVxdWVzdC5wYXlsb2FkLmV4dGVuZGVkLmVzLmZpbHRlcicpIHx8IHt9O1xuICB9XG5cbiAgdmFyIGFnZ3MgPSB7XG4gICAgJ3EnOiB7XG4gICAgICBtZXRhOiB7dHlwZTogJ3NwbGl0J30sXG4gICAgICBmaWx0ZXJzOiB7XG4gICAgICAgIGZpbHRlcnM6IF8uY2hhaW4oY29uZmlnLnEpLm1hcChmdW5jdGlvbiAocSkge1xuICAgICAgICAgIHJldHVybiBbcSwge3F1ZXJ5X3N0cmluZzp7cXVlcnk6IHF9fV07XG4gICAgICAgIH0pLnppcE9iamVjdCgpLnZhbHVlKCksXG4gICAgICB9LFxuICAgICAgYWdnczoge31cbiAgICB9XG4gIH07XG5cbiAgdmFyIGFnZ0N1cnNvciA9IGFnZ3MucS5hZ2dzO1xuXG4gIF8uZWFjaChjb25maWcuc3BsaXQsIGZ1bmN0aW9uIChjbGF1c2UsIGkpIHtcbiAgICB2YXIgY2xhdXNlID0gY2xhdXNlLnNwbGl0KCc6Jyk7XG4gICAgaWYgKGNsYXVzZVswXSAmJiBjbGF1c2VbMV0pIHtcbiAgICAgIGFnZ0N1cnNvcltjbGF1c2VbMF1dID0ge1xuICAgICAgICBtZXRhOiB7dHlwZTogJ3NwbGl0J30sXG4gICAgICAgIHRlcm1zOiB7XG4gICAgICAgICAgZmllbGQ6IGNsYXVzZVswXSxcbiAgICAgICAgICBzaXplOiBwYXJzZUludChjbGF1c2VbMV0sIDEwKVxuICAgICAgICB9LFxuICAgICAgICBhZ2dzOiB7fVxuICAgICAgfTtcbiAgICAgIGFnZ0N1cnNvciA9IGFnZ0N1cnNvcltjbGF1c2VbMF1dLmFnZ3M7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvciAoJ2BzcGxpdGAgcmVxdWlyZXMgZmllbGQ6bGltaXQnKTtcbiAgICB9XG4gIH0pO1xuXG4gIF8uYXNzaWduKGFnZ0N1cnNvciwgY3JlYXRlRGF0ZUFnZyhjb25maWcsIHRsQ29uZmlnKSk7XG5cblxuICByZXR1cm4ge1xuICAgIGluZGV4OiBjb25maWcuaW5kZXgsXG4gICAgYm9keToge1xuICAgICAgcXVlcnk6IHtcbiAgICAgICAgYm9vbDogYm9vbFxuICAgICAgfSxcbiAgICAgIGFnZ3M6IGFnZ3MsXG4gICAgICBzaXplOiAwXG4gICAgfVxuICB9O1xufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/es/lib/build_request.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAK,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC3B,IAAI,aAAa,GAAG,OAAO,CAAC,mBAAmB,CAAC,CAAC;;AAEjD,MAAM,CAAC,OAAO,GAAI,SAAS,YAAY,CAAC,MAAM,EAAE,QAAQ,EAAE;;AAExD,MAAI,IAAI,GAAG,EAAC,IAAI,EAAE,EAAE,EAAE,QAAQ,EAAE,EAAE,EAAC,CAAC;;AAEpC,MAAI,UAAU,GAAG,EAAC,KAAK,EAAC,EAAE,EAAC,CAAC;AAC5B,YAAU,CAAC,KAAK,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG,EAAC,GAAG,EAAE,QAAQ,CAAC,IAAI,CAAC,IAAI,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,CAAC,EAAE,EAAE,MAAM,EAAE,cAAc,EAAC,CAAC;AAC9G,MAAI,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;;;AAG3B,MAAI,MAAM,CAAC,MAAM,EAAE;AACjB,QAAI,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,CAAC,QAAQ,EAAE,oCAAoC,CAAC,IAAI,EAAE,CAAC;GAC3E;;AAED,MAAI,IAAI,GAAG;AACT,OAAG,EAAE;AACH,UAAI,EAAE,EAAC,IAAI,EAAE,OAAO,EAAC;AACrB,aAAO,EAAE;AACP,eAAO,EAAE,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE;AAC1C,iBAAO,CAAC,CAAC,EAAE,EAAC,YAAY,EAAC,EAAC,KAAK,EAAE,CAAC,EAAC,EAAC,CAAC,CAAC;SACvC,CAAC,CAAC,SAAS,EAAE,CAAC,KAAK,EAAE;OACvB;AACD,UAAI,EAAE,EAAE;KACT;GACF,CAAC;;AAEF,MAAI,SAAS,GAAG,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC;;AAE5B,GAAC,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,UAAU,MAAM,EAAE,CAAC,EAAE;AACxC,QAAI,MAAM,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AAC/B,QAAI,MAAM,CAAC,CAAC,CAAC,IAAI,MAAM,CAAC,CAAC,CAAC,EAAE;AAC1B,eAAS,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG;AACrB,YAAI,EAAE,EAAC,IAAI,EAAE,OAAO,EAAC;AACrB,aAAK,EAAE;AACL,eAAK,EAAE,MAAM,CAAC,CAAC,CAAC;AAChB,cAAI,EAAE,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;SAC9B;AACD,YAAI,EAAE,EAAE;OACT,CAAC;AACF,eAAS,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;KACvC,MAAM;AACL,YAAM,IAAI,KAAK,CAAE,8BAA8B,CAAC,CAAC;KAClD;GACF,CAAC,CAAC;;AAEH,GAAC,CAAC,MAAM,CAAC,SAAS,EAAE,aAAa,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC,CAAC;;AAGrD,SAAO;AACL,SAAK,EAAE,MAAM,CAAC,KAAK;AACnB,QAAI,EAAE;AACJ,WAAK,EAAE;AACL,YAAI,EAAE,IAAI;OACX;AACD,UAAI,EAAE,IAAI;AACV,UAAI,EAAE,CAAC;KACR;GACF,CAAC;CACH,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/es/lib/build_request.js",
      "sourcesContent": [
        "var  _ = require('lodash');\nvar createDateAgg = require('./create_date_agg');\n\nmodule.exports =  function buildRequest(config, tlConfig) {\n\n  var bool = {must: [], must_not: []};\n\n  var timeFilter = {range:{}};\n  timeFilter.range[config.timefield] = {gte: tlConfig.time.from, lte: tlConfig.time.to, format: 'epoch_millis'};\n  bool.must.push(timeFilter);\n\n  // Use the kibana filter bar filters\n  if (config.kibana) {\n    bool.filter = _.get(tlConfig, 'request.payload.extended.es.filter') || {};\n  }\n\n  var aggs = {\n    'q': {\n      meta: {type: 'split'},\n      filters: {\n        filters: _.chain(config.q).map(function (q) {\n          return [q, {query_string:{query: q}}];\n        }).zipObject().value(),\n      },\n      aggs: {}\n    }\n  };\n\n  var aggCursor = aggs.q.aggs;\n\n  _.each(config.split, function (clause, i) {\n    var clause = clause.split(':');\n    if (clause[0] && clause[1]) {\n      aggCursor[clause[0]] = {\n        meta: {type: 'split'},\n        terms: {\n          field: clause[0],\n          size: parseInt(clause[1], 10)\n        },\n        aggs: {}\n      };\n      aggCursor = aggCursor[clause[0]].aggs;\n    } else {\n      throw new Error ('`split` requires field:limit');\n    }\n  });\n\n  _.assign(aggCursor, createDateAgg(config, tlConfig));\n\n\n  return {\n    index: config.index,\n    body: {\n      query: {\n        bool: bool\n      },\n      aggs: aggs,\n      size: 0\n    }\n  };\n};\n"
      ]
    },
    "mtime": 1467119944687
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/es/lib/create_date_agg.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _ = require('lodash');\n\nmodule.exports = function createDateAgg(config, tlConfig) {\n  var dateAgg = {\n    time_buckets: {\n      meta: { type: 'time_buckets' },\n      date_histogram: {\n        field: config.timefield,\n        interval: config.interval,\n        time_zone: tlConfig.time.timezone,\n        extended_bounds: {\n          min: tlConfig.time.from,\n          max: tlConfig.time.to\n        },\n        min_doc_count: 0\n      }\n    }\n  };\n\n  dateAgg.time_buckets.aggs = {};\n  _.each(config.metric, function (metric, i) {\n    var metric = metric.split(':');\n    if (metric[0] === 'count') {\n      // This is pretty lame, but its how the \"doc_count\" metric has to be implemented at the moment\n      // It simplifies the aggregation tree walking code considerably\n      dateAgg.time_buckets.aggs[metric] = {\n        bucket_script: {\n          buckets_path: '_count',\n          script: { inline: '_value', lang: 'expression' }\n        }\n      };\n    } else if (metric[0] && metric[1]) {\n      var metricName = metric[0] + '(' + metric[1] + ')';\n      dateAgg.time_buckets.aggs[metricName] = {};\n      dateAgg.time_buckets.aggs[metricName][metric[0]] = { field: metric[1] };\n    } else {\n      throw new Error('`metric` requires metric:field or simply count');\n    }\n  });\n\n  return dateAgg;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy9lcy9saWIvY3JlYXRlX2RhdGVfYWdnLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBSSxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDOztBQUUxQixNQUFNLENBQUMsT0FBTyxHQUFHLFNBQVMsYUFBYSxDQUFDLE1BQU0sRUFBRSxRQUFRLEVBQUU7QUFDeEQsTUFBSSxPQUFPLEdBQUc7QUFDWixnQkFBWSxFQUFFO0FBQ1osVUFBSSxFQUFFLEVBQUMsSUFBSSxFQUFFLGNBQWMsRUFBQztBQUM1QixvQkFBYyxFQUFFO0FBQ2QsYUFBSyxFQUFFLE1BQU0sQ0FBQyxTQUFTO0FBQ3ZCLGdCQUFRLEVBQUUsTUFBTSxDQUFDLFFBQVE7QUFDekIsaUJBQVMsRUFBRSxRQUFRLENBQUMsSUFBSSxDQUFDLFFBQVE7QUFDakMsdUJBQWUsRUFBRTtBQUNmLGFBQUcsRUFBRSxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUk7QUFDdkIsYUFBRyxFQUFFLFFBQVEsQ0FBQyxJQUFJLENBQUMsRUFBRTtTQUN0QjtBQUNELHFCQUFhLEVBQUUsQ0FBQztPQUNqQjtLQUNGO0dBQ0YsQ0FBQzs7QUFFRixTQUFPLENBQUMsWUFBWSxDQUFDLElBQUksR0FBRyxFQUFFLENBQUM7QUFDL0IsR0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFLFVBQVUsTUFBTSxFQUFFLENBQUMsRUFBRTtBQUN6QyxRQUFJLE1BQU0sR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQy9CLFFBQUksTUFBTSxDQUFDLENBQUMsQ0FBQyxLQUFLLE9BQU8sRUFBRTs7O0FBR3pCLGFBQU8sQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHO0FBQ2xDLHFCQUFhLEVBQUU7QUFDYixzQkFBWSxFQUFFLFFBQVE7QUFDdEIsZ0JBQU0sRUFBRSxFQUFDLE1BQU0sRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLFlBQVksRUFBQztTQUMvQztPQUNGLENBQUM7S0FDSCxNQUFNLElBQUksTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRTtBQUNqQyxVQUFJLFVBQVUsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUM7QUFDbkQsYUFBTyxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsRUFBRSxDQUFDO0FBQzNDLGFBQU8sQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBQyxDQUFDO0tBQ3ZFLE1BQU07QUFDTCxZQUFNLElBQUksS0FBSyxDQUFFLGdEQUFnRCxDQUFDLENBQUM7S0FDcEU7R0FDRixDQUFDLENBQUM7O0FBRUgsU0FBTyxPQUFPLENBQUM7Q0FDaEIsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL2luc3RhbGxlZFBsdWdpbnMvdGltZWxpb24vc2VydmVyL3Nlcmllc19mdW5jdGlvbnMvZXMvbGliL2NyZWF0ZV9kYXRlX2FnZy5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gY3JlYXRlRGF0ZUFnZyhjb25maWcsIHRsQ29uZmlnKSB7XG4gIHZhciBkYXRlQWdnID0ge1xuICAgIHRpbWVfYnVja2V0czoge1xuICAgICAgbWV0YToge3R5cGU6ICd0aW1lX2J1Y2tldHMnfSxcbiAgICAgIGRhdGVfaGlzdG9ncmFtOiB7XG4gICAgICAgIGZpZWxkOiBjb25maWcudGltZWZpZWxkLFxuICAgICAgICBpbnRlcnZhbDogY29uZmlnLmludGVydmFsLFxuICAgICAgICB0aW1lX3pvbmU6IHRsQ29uZmlnLnRpbWUudGltZXpvbmUsXG4gICAgICAgIGV4dGVuZGVkX2JvdW5kczoge1xuICAgICAgICAgIG1pbjogdGxDb25maWcudGltZS5mcm9tLFxuICAgICAgICAgIG1heDogdGxDb25maWcudGltZS50b1xuICAgICAgICB9LFxuICAgICAgICBtaW5fZG9jX2NvdW50OiAwXG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGRhdGVBZ2cudGltZV9idWNrZXRzLmFnZ3MgPSB7fTtcbiAgXy5lYWNoKGNvbmZpZy5tZXRyaWMsIGZ1bmN0aW9uIChtZXRyaWMsIGkpIHtcbiAgICB2YXIgbWV0cmljID0gbWV0cmljLnNwbGl0KCc6Jyk7XG4gICAgaWYgKG1ldHJpY1swXSA9PT0gJ2NvdW50Jykge1xuICAgICAgLy8gVGhpcyBpcyBwcmV0dHkgbGFtZSwgYnV0IGl0cyBob3cgdGhlIFwiZG9jX2NvdW50XCIgbWV0cmljIGhhcyB0byBiZSBpbXBsZW1lbnRlZCBhdCB0aGUgbW9tZW50XG4gICAgICAvLyBJdCBzaW1wbGlmaWVzIHRoZSBhZ2dyZWdhdGlvbiB0cmVlIHdhbGtpbmcgY29kZSBjb25zaWRlcmFibHlcbiAgICAgIGRhdGVBZ2cudGltZV9idWNrZXRzLmFnZ3NbbWV0cmljXSA9IHtcbiAgICAgICAgYnVja2V0X3NjcmlwdDoge1xuICAgICAgICAgIGJ1Y2tldHNfcGF0aDogJ19jb3VudCcsXG4gICAgICAgICAgc2NyaXB0OiB7aW5saW5lOiAnX3ZhbHVlJywgbGFuZzogJ2V4cHJlc3Npb24nfVxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0gZWxzZSBpZiAobWV0cmljWzBdICYmIG1ldHJpY1sxXSkge1xuICAgICAgdmFyIG1ldHJpY05hbWUgPSBtZXRyaWNbMF0gKyAnKCcgKyBtZXRyaWNbMV0gKyAnKSc7XG4gICAgICBkYXRlQWdnLnRpbWVfYnVja2V0cy5hZ2dzW21ldHJpY05hbWVdID0ge307XG4gICAgICBkYXRlQWdnLnRpbWVfYnVja2V0cy5hZ2dzW21ldHJpY05hbWVdW21ldHJpY1swXV0gPSB7ZmllbGQ6IG1ldHJpY1sxXX07XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvciAoJ2BtZXRyaWNgIHJlcXVpcmVzIG1ldHJpYzpmaWVsZCBvciBzaW1wbHkgY291bnQnKTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBkYXRlQWdnO1xufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/es/lib/create_date_agg.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;;AAE1B,MAAM,CAAC,OAAO,GAAG,SAAS,aAAa,CAAC,MAAM,EAAE,QAAQ,EAAE;AACxD,MAAI,OAAO,GAAG;AACZ,gBAAY,EAAE;AACZ,UAAI,EAAE,EAAC,IAAI,EAAE,cAAc,EAAC;AAC5B,oBAAc,EAAE;AACd,aAAK,EAAE,MAAM,CAAC,SAAS;AACvB,gBAAQ,EAAE,MAAM,CAAC,QAAQ;AACzB,iBAAS,EAAE,QAAQ,CAAC,IAAI,CAAC,QAAQ;AACjC,uBAAe,EAAE;AACf,aAAG,EAAE,QAAQ,CAAC,IAAI,CAAC,IAAI;AACvB,aAAG,EAAE,QAAQ,CAAC,IAAI,CAAC,EAAE;SACtB;AACD,qBAAa,EAAE,CAAC;OACjB;KACF;GACF,CAAC;;AAEF,SAAO,CAAC,YAAY,CAAC,IAAI,GAAG,EAAE,CAAC;AAC/B,GAAC,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,UAAU,MAAM,EAAE,CAAC,EAAE;AACzC,QAAI,MAAM,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AAC/B,QAAI,MAAM,CAAC,CAAC,CAAC,KAAK,OAAO,EAAE;;;AAGzB,aAAO,CAAC,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG;AAClC,qBAAa,EAAE;AACb,sBAAY,EAAE,QAAQ;AACtB,gBAAM,EAAE,EAAC,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,YAAY,EAAC;SAC/C;OACF,CAAC;KACH,MAAM,IAAI,MAAM,CAAC,CAAC,CAAC,IAAI,MAAM,CAAC,CAAC,CAAC,EAAE;AACjC,UAAI,UAAU,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;AACnD,aAAO,CAAC,YAAY,CAAC,IAAI,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC;AAC3C,aAAO,CAAC,YAAY,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,EAAC,KAAK,EAAE,MAAM,CAAC,CAAC,CAAC,EAAC,CAAC;KACvE,MAAM;AACL,YAAM,IAAI,KAAK,CAAE,gDAAgD,CAAC,CAAC;KACpE;GACF,CAAC,CAAC;;AAEH,SAAO,OAAO,CAAC;CAChB,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/es/lib/create_date_agg.js",
      "sourcesContent": [
        "var _ = require('lodash');\n\nmodule.exports = function createDateAgg(config, tlConfig) {\n  var dateAgg = {\n    time_buckets: {\n      meta: {type: 'time_buckets'},\n      date_histogram: {\n        field: config.timefield,\n        interval: config.interval,\n        time_zone: tlConfig.time.timezone,\n        extended_bounds: {\n          min: tlConfig.time.from,\n          max: tlConfig.time.to\n        },\n        min_doc_count: 0\n      }\n    }\n  };\n\n  dateAgg.time_buckets.aggs = {};\n  _.each(config.metric, function (metric, i) {\n    var metric = metric.split(':');\n    if (metric[0] === 'count') {\n      // This is pretty lame, but its how the \"doc_count\" metric has to be implemented at the moment\n      // It simplifies the aggregation tree walking code considerably\n      dateAgg.time_buckets.aggs[metric] = {\n        bucket_script: {\n          buckets_path: '_count',\n          script: {inline: '_value', lang: 'expression'}\n        }\n      };\n    } else if (metric[0] && metric[1]) {\n      var metricName = metric[0] + '(' + metric[1] + ')';\n      dateAgg.time_buckets.aggs[metricName] = {};\n      dateAgg.time_buckets.aggs[metricName][metric[0]] = {field: metric[1]};\n    } else {\n      throw new Error ('`metric` requires metric:field or simply count');\n    }\n  });\n\n  return dateAgg;\n};\n"
      ]
    },
    "mtime": 1467119944687
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/trend/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./lib/regress",
            "imported": [
              "*"
            ],
            "specifiers": [
              {
                "kind": "namespace",
                "local": "regress"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-wildcard"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\nvar _libRegress = require('./lib/regress');\n\nvar regress = _interopRequireWildcard(_libRegress);\n\nvar alter = require('../../lib/alter.js');\nvar _ = require('lodash');\nvar Chainable = require('../../lib/classes/chainable');\n\nvar loadFunctions = require('../../lib/load_functions.js');\nvar fitFunctions = loadFunctions('fit_functions');\n\nvar validRegressions = {\n  linear: 'linear',\n  log: 'logarithmic'\n};\n\nmodule.exports = new Chainable('trend', {\n  args: [{\n    name: 'inputSeries',\n    types: ['seriesList']\n  }, {\n    name: 'mode',\n    types: ['string'],\n    help: 'The algorithm to use for generating the trend line. One of: ' + _.keys(validRegressions).join(', ')\n  }, {\n    name: 'start',\n    types: ['number', 'null'],\n    help: 'Where to start calculating from the beginning or end. For example -10 would start calculating 10 points from' + ' the end, +15 would start 15 points from the beginning. Default: 0'\n  }, {\n    name: 'end',\n    types: ['number', 'null'],\n    help: 'Where to stop calculating from the beginning or end. For example -10 would stop calculating 10 points from' + ' the end, +15 would stop 15 points from the beginning. Default: 0'\n  }],\n  help: 'Fills null values using a defined fit function',\n  fn: function absFn(args) {\n    var newSeries = _.cloneDeep(args.byName.inputSeries);\n\n    _.each(newSeries.list, function (series) {\n      var length = series.data.length;\n      var start = args.byName.start == null ? 0 : args.byName.start;\n      var end = args.byName.end == null ? length : args.byName.end;\n      start = start >= 0 ? start : length + start;\n      end = end > 0 ? end : length + end;\n\n      var subset = series.data.slice(start, end);\n\n      var result = regress[args.byName.mode || 'linear'](subset);\n\n      _.each(series.data, function (point) {\n        point[1] = null;\n      });\n\n      _.each(result, function (point, i) {\n        series.data[start + i] = point;\n      });\n    });\n    return newSeries;\n  }\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy90cmVuZC9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OzBCQUd5QixlQUFlOztJQUE1QixPQUFPOztBQUhuQixJQUFJLEtBQUssR0FBRyxPQUFPLENBQUMsb0JBQW9CLENBQUMsQ0FBQztBQUMxQyxJQUFJLENBQUMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDMUIsSUFBSSxTQUFTLEdBQUcsT0FBTyxDQUFDLDZCQUE2QixDQUFDLENBQUM7O0FBR3ZELElBQUksYUFBYSxHQUFHLE9BQU8sQ0FBQyw2QkFBNkIsQ0FBQyxDQUFDO0FBQzNELElBQUksWUFBWSxHQUFJLGFBQWEsQ0FBQyxlQUFlLENBQUMsQ0FBQzs7QUFFbkQsSUFBSSxnQkFBZ0IsR0FBRztBQUNyQixRQUFNLEVBQUUsUUFBUTtBQUNoQixLQUFHLEVBQUUsYUFBYTtDQUNuQixDQUFDOztBQUVGLE1BQU0sQ0FBQyxPQUFPLEdBQUcsSUFBSSxTQUFTLENBQUMsT0FBTyxFQUFFO0FBQ3RDLE1BQUksRUFBRSxDQUNKO0FBQ0UsUUFBSSxFQUFFLGFBQWE7QUFDbkIsU0FBSyxFQUFFLENBQUMsWUFBWSxDQUFDO0dBQ3RCLEVBQ0Q7QUFDRSxRQUFJLEVBQUUsTUFBTTtBQUNaLFNBQUssRUFBRSxDQUFDLFFBQVEsQ0FBQztBQUNqQixRQUFJLEVBQUUsOERBQThELEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7R0FDM0csRUFDRDtBQUNFLFFBQUksRUFBRSxPQUFPO0FBQ2IsU0FBSyxFQUFFLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQztBQUN6QixRQUFJLEVBQUUsOEdBQThHLEdBQ3BILG9FQUFvRTtHQUNyRSxFQUNEO0FBQ0UsUUFBSSxFQUFFLEtBQUs7QUFDWCxTQUFLLEVBQUUsQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDO0FBQ3pCLFFBQUksRUFBRSw0R0FBNEcsR0FDbEgsbUVBQW1FO0dBQ3BFLENBQ0Y7QUFDRCxNQUFJLEVBQUUsZ0RBQWdEO0FBQ3RELElBQUUsRUFBRSxTQUFTLEtBQUssQ0FBQyxJQUFJLEVBQUU7QUFDdkIsUUFBSSxTQUFTLEdBQUcsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDOztBQUVyRCxLQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLEVBQUUsVUFBVSxNQUFNLEVBQUU7QUFDdkMsVUFBTSxNQUFNLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUM7QUFDbEMsVUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLElBQUksSUFBSSxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQztBQUM5RCxVQUFJLEdBQUcsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsSUFBSSxJQUFJLEdBQUcsTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDO0FBQzdELFdBQUssR0FBRyxLQUFLLElBQUksQ0FBQyxHQUFHLEtBQUssR0FBRyxNQUFNLEdBQUcsS0FBSyxDQUFDO0FBQzVDLFNBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxHQUFHLEdBQUcsR0FBRyxNQUFNLEdBQUcsR0FBRyxDQUFDOztBQUVuQyxVQUFNLE1BQU0sR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUUsR0FBRyxDQUFDLENBQUM7O0FBRTdDLFVBQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksSUFBSSxRQUFRLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQzs7QUFFN0QsT0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLFVBQVUsS0FBSyxFQUFFO0FBQ25DLGFBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUM7T0FDakIsQ0FBQyxDQUFDOztBQUVILE9BQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLFVBQVUsS0FBSyxFQUFFLENBQUMsRUFBRTtBQUNqQyxjQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUM7T0FDaEMsQ0FBQyxDQUFDO0tBQ0osQ0FBQyxDQUFDO0FBQ0gsV0FBTyxTQUFTLENBQUM7R0FDbEI7Q0FDRixDQUFDLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9pbnN0YWxsZWRQbHVnaW5zL3RpbWVsaW9uL3NlcnZlci9zZXJpZXNfZnVuY3Rpb25zL3RyZW5kL2luZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGFsdGVyID0gcmVxdWlyZSgnLi4vLi4vbGliL2FsdGVyLmpzJyk7XG52YXIgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xudmFyIENoYWluYWJsZSA9IHJlcXVpcmUoJy4uLy4uL2xpYi9jbGFzc2VzL2NoYWluYWJsZScpO1xuaW1wb3J0ICogYXMgcmVncmVzcyBmcm9tICcuL2xpYi9yZWdyZXNzJztcblxudmFyIGxvYWRGdW5jdGlvbnMgPSByZXF1aXJlKCcuLi8uLi9saWIvbG9hZF9mdW5jdGlvbnMuanMnKTtcbnZhciBmaXRGdW5jdGlvbnMgID0gbG9hZEZ1bmN0aW9ucygnZml0X2Z1bmN0aW9ucycpO1xuXG52YXIgdmFsaWRSZWdyZXNzaW9ucyA9IHtcbiAgbGluZWFyOiAnbGluZWFyJyxcbiAgbG9nOiAnbG9nYXJpdGhtaWMnLFxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBuZXcgQ2hhaW5hYmxlKCd0cmVuZCcsIHtcbiAgYXJnczogW1xuICAgIHtcbiAgICAgIG5hbWU6ICdpbnB1dFNlcmllcycsXG4gICAgICB0eXBlczogWydzZXJpZXNMaXN0J11cbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICdtb2RlJyxcbiAgICAgIHR5cGVzOiBbJ3N0cmluZyddLFxuICAgICAgaGVscDogJ1RoZSBhbGdvcml0aG0gdG8gdXNlIGZvciBnZW5lcmF0aW5nIHRoZSB0cmVuZCBsaW5lLiBPbmUgb2Y6ICcgKyBfLmtleXModmFsaWRSZWdyZXNzaW9ucykuam9pbignLCAnKVxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ3N0YXJ0JyxcbiAgICAgIHR5cGVzOiBbJ251bWJlcicsICdudWxsJ10sXG4gICAgICBoZWxwOiAnV2hlcmUgdG8gc3RhcnQgY2FsY3VsYXRpbmcgZnJvbSB0aGUgYmVnaW5uaW5nIG9yIGVuZC4gRm9yIGV4YW1wbGUgLTEwIHdvdWxkIHN0YXJ0IGNhbGN1bGF0aW5nIDEwIHBvaW50cyBmcm9tJyArXG4gICAgICAnIHRoZSBlbmQsICsxNSB3b3VsZCBzdGFydCAxNSBwb2ludHMgZnJvbSB0aGUgYmVnaW5uaW5nLiBEZWZhdWx0OiAwJyxcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICdlbmQnLFxuICAgICAgdHlwZXM6IFsnbnVtYmVyJywgJ251bGwnXSxcbiAgICAgIGhlbHA6ICdXaGVyZSB0byBzdG9wIGNhbGN1bGF0aW5nIGZyb20gdGhlIGJlZ2lubmluZyBvciBlbmQuIEZvciBleGFtcGxlIC0xMCB3b3VsZCBzdG9wIGNhbGN1bGF0aW5nIDEwIHBvaW50cyBmcm9tJyArXG4gICAgICAnIHRoZSBlbmQsICsxNSB3b3VsZCBzdG9wIDE1IHBvaW50cyBmcm9tIHRoZSBiZWdpbm5pbmcuIERlZmF1bHQ6IDAnLFxuICAgIH0sXG4gIF0sXG4gIGhlbHA6ICdGaWxscyBudWxsIHZhbHVlcyB1c2luZyBhIGRlZmluZWQgZml0IGZ1bmN0aW9uJyxcbiAgZm46IGZ1bmN0aW9uIGFic0ZuKGFyZ3MpIHtcbiAgICBsZXQgbmV3U2VyaWVzID0gXy5jbG9uZURlZXAoYXJncy5ieU5hbWUuaW5wdXRTZXJpZXMpO1xuXG4gICAgXy5lYWNoKG5ld1Nlcmllcy5saXN0LCBmdW5jdGlvbiAoc2VyaWVzKSB7XG4gICAgICBjb25zdCBsZW5ndGggPSBzZXJpZXMuZGF0YS5sZW5ndGg7XG4gICAgICBsZXQgc3RhcnQgPSBhcmdzLmJ5TmFtZS5zdGFydCA9PSBudWxsID8gMCA6IGFyZ3MuYnlOYW1lLnN0YXJ0O1xuICAgICAgbGV0IGVuZCA9IGFyZ3MuYnlOYW1lLmVuZCA9PSBudWxsID8gbGVuZ3RoIDogYXJncy5ieU5hbWUuZW5kO1xuICAgICAgc3RhcnQgPSBzdGFydCA+PSAwID8gc3RhcnQgOiBsZW5ndGggKyBzdGFydDtcbiAgICAgIGVuZCA9IGVuZCA+IDAgPyBlbmQgOiBsZW5ndGggKyBlbmQ7XG5cbiAgICAgIGNvbnN0IHN1YnNldCA9IHNlcmllcy5kYXRhLnNsaWNlKHN0YXJ0LCBlbmQpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSByZWdyZXNzW2FyZ3MuYnlOYW1lLm1vZGUgfHwgJ2xpbmVhciddKHN1YnNldCk7XG5cbiAgICAgIF8uZWFjaChzZXJpZXMuZGF0YSwgZnVuY3Rpb24gKHBvaW50KSB7XG4gICAgICAgIHBvaW50WzFdID0gbnVsbDtcbiAgICAgIH0pO1xuXG4gICAgICBfLmVhY2gocmVzdWx0LCBmdW5jdGlvbiAocG9pbnQsIGkpIHtcbiAgICAgICAgc2VyaWVzLmRhdGFbc3RhcnQgKyBpXSA9IHBvaW50O1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIG5ld1NlcmllcztcbiAgfVxufSk7XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/trend/index.js"
      ],
      "names": [],
      "mappings": ";;;;0BAGyB,eAAe;;IAA5B,OAAO;;AAHnB,IAAI,KAAK,GAAG,OAAO,CAAC,oBAAoB,CAAC,CAAC;AAC1C,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC1B,IAAI,SAAS,GAAG,OAAO,CAAC,6BAA6B,CAAC,CAAC;;AAGvD,IAAI,aAAa,GAAG,OAAO,CAAC,6BAA6B,CAAC,CAAC;AAC3D,IAAI,YAAY,GAAI,aAAa,CAAC,eAAe,CAAC,CAAC;;AAEnD,IAAI,gBAAgB,GAAG;AACrB,QAAM,EAAE,QAAQ;AAChB,KAAG,EAAE,aAAa;CACnB,CAAC;;AAEF,MAAM,CAAC,OAAO,GAAG,IAAI,SAAS,CAAC,OAAO,EAAE;AACtC,MAAI,EAAE,CACJ;AACE,QAAI,EAAE,aAAa;AACnB,SAAK,EAAE,CAAC,YAAY,CAAC;GACtB,EACD;AACE,QAAI,EAAE,MAAM;AACZ,SAAK,EAAE,CAAC,QAAQ,CAAC;AACjB,QAAI,EAAE,8DAA8D,GAAG,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC;GAC3G,EACD;AACE,QAAI,EAAE,OAAO;AACb,SAAK,EAAE,CAAC,QAAQ,EAAE,MAAM,CAAC;AACzB,QAAI,EAAE,8GAA8G,GACpH,oEAAoE;GACrE,EACD;AACE,QAAI,EAAE,KAAK;AACX,SAAK,EAAE,CAAC,QAAQ,EAAE,MAAM,CAAC;AACzB,QAAI,EAAE,4GAA4G,GAClH,mEAAmE;GACpE,CACF;AACD,MAAI,EAAE,gDAAgD;AACtD,IAAE,EAAE,SAAS,KAAK,CAAC,IAAI,EAAE;AACvB,QAAI,SAAS,GAAG,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC;;AAErD,KAAC,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,UAAU,MAAM,EAAE;AACvC,UAAM,MAAM,GAAG,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;AAClC,UAAI,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,IAAI,IAAI,GAAG,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;AAC9D,UAAI,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,IAAI,GAAG,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC;AAC7D,WAAK,GAAG,KAAK,IAAI,CAAC,GAAG,KAAK,GAAG,MAAM,GAAG,KAAK,CAAC;AAC5C,SAAG,GAAG,GAAG,GAAG,CAAC,GAAG,GAAG,GAAG,MAAM,GAAG,GAAG,CAAC;;AAEnC,UAAM,MAAM,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;;AAE7C,UAAM,MAAM,GAAG,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,IAAI,QAAQ,CAAC,CAAC,MAAM,CAAC,CAAC;;AAE7D,OAAC,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,UAAU,KAAK,EAAE;AACnC,aAAK,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;OACjB,CAAC,CAAC;;AAEH,OAAC,CAAC,IAAI,CAAC,MAAM,EAAE,UAAU,KAAK,EAAE,CAAC,EAAE;AACjC,cAAM,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC;OAChC,CAAC,CAAC;KACJ,CAAC,CAAC;AACH,WAAO,SAAS,CAAC;GAClB;CACF,CAAC,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/trend/index.js",
      "sourcesContent": [
        "var alter = require('../../lib/alter.js');\nvar _ = require('lodash');\nvar Chainable = require('../../lib/classes/chainable');\nimport * as regress from './lib/regress';\n\nvar loadFunctions = require('../../lib/load_functions.js');\nvar fitFunctions  = loadFunctions('fit_functions');\n\nvar validRegressions = {\n  linear: 'linear',\n  log: 'logarithmic',\n};\n\nmodule.exports = new Chainable('trend', {\n  args: [\n    {\n      name: 'inputSeries',\n      types: ['seriesList']\n    },\n    {\n      name: 'mode',\n      types: ['string'],\n      help: 'The algorithm to use for generating the trend line. One of: ' + _.keys(validRegressions).join(', ')\n    },\n    {\n      name: 'start',\n      types: ['number', 'null'],\n      help: 'Where to start calculating from the beginning or end. For example -10 would start calculating 10 points from' +\n      ' the end, +15 would start 15 points from the beginning. Default: 0',\n    },\n    {\n      name: 'end',\n      types: ['number', 'null'],\n      help: 'Where to stop calculating from the beginning or end. For example -10 would stop calculating 10 points from' +\n      ' the end, +15 would stop 15 points from the beginning. Default: 0',\n    },\n  ],\n  help: 'Fills null values using a defined fit function',\n  fn: function absFn(args) {\n    let newSeries = _.cloneDeep(args.byName.inputSeries);\n\n    _.each(newSeries.list, function (series) {\n      const length = series.data.length;\n      let start = args.byName.start == null ? 0 : args.byName.start;\n      let end = args.byName.end == null ? length : args.byName.end;\n      start = start >= 0 ? start : length + start;\n      end = end > 0 ? end : length + end;\n\n      const subset = series.data.slice(start, end);\n\n      const result = regress[args.byName.mode || 'linear'](subset);\n\n      _.each(series.data, function (point) {\n        point[1] = null;\n      });\n\n      _.each(result, function (point, i) {\n        series.data[start + i] = point;\n      });\n    });\n    return newSeries;\n  }\n});\n"
      ]
    },
    "mtime": 1467119944523
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/trend/lib/regress.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "linear",
            "data",
            "log",
            "data"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "linear",
              "exported": "linear"
            },
            {
              "kind": "local",
              "local": "data",
              "exported": "data"
            },
            {
              "kind": "local",
              "local": "log",
              "exported": "log"
            },
            {
              "kind": "local",
              "local": "data",
              "exported": "data"
            }
          ]
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "/*\n* Algorithms from\n* copyright(c) 2013 Tom Alexander\n* Licensed under the MIT license.\n*/\n\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports.linear = linear;\nexports.log = log;\nvar _ = require('lodash');\n\nfunction sum(data, fn) {\n  return _.reduce(data, function (sum, d) {\n    return sum + (d[1] == null ? 0 : fn(d));\n  }, 0);\n}\n\nfunction count(data) {\n  return _.filter(data, function (d) {\n    return d[1] == null ? false : true;\n  }).length;\n}\n\nfunction mapTuples(data, fn) {\n  return _.map(data, function (d) {\n    return [d[0], fn(d)];\n  });\n}\n\nfunction linear(data) {\n  var xSum = sum(data, function (d) {\n    return d[0];\n  });\n  var ySum = sum(data, function (d) {\n    return d[1];\n  });\n  var xSqSum = sum(data, function (d) {\n    return d[0] * d[0];\n  });\n  var xySum = sum(data, function (d) {\n    return d[0] * d[1];\n  });\n  var observations = count(data);\n\n  var gradient = (observations * xySum - xSum * ySum) / (observations * xSqSum - xSum * xSum);\n\n  var intercept = ySum / observations - gradient * xSum / observations;\n\n  return mapTuples(data, function (d) {\n    return d[0] * gradient + intercept;\n  });\n}\n\nfunction log(data) {\n  var logXSum = sum(data, function (d) {\n    return Math.log(d[0]);\n  });\n  var yLogXSum = sum(data, function (d) {\n    return d[1] * Math.log(d[0]);\n  });\n  var ySum = sum(data, function (d) {\n    return d[1];\n  });\n  var logXsqSum = sum(data, function (d) {\n    return Math.pow(Math.log(d[0]), 2);\n  });\n  var observations = count(data);\n\n  var b = (observations * yLogXSum - ySum * logXSum) / (observations * logXsqSum - logXSum * logXSum);\n\n  var a = (ySum - b * logXSum) / observations;\n\n  return mapTuples(data, function (d) {\n    return a + b * Math.log(d[0]);\n  });\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvc2VyaWVzX2Z1bmN0aW9ucy90cmVuZC9saWIvcmVncmVzcy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBTUEsSUFBSSxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDOztBQUUxQixTQUFTLEdBQUcsQ0FBQyxJQUFJLEVBQUUsRUFBRSxFQUFFO0FBQ3JCLFNBQU8sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsVUFBVSxHQUFHLEVBQUUsQ0FBQyxFQUFFO0FBQ3RDLFdBQU8sR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUFJLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQSxBQUFDLENBQUM7R0FDekMsRUFBRSxDQUFDLENBQUMsQ0FBQztDQUNQOztBQUVELFNBQVMsS0FBSyxDQUFDLElBQUksRUFBRTtBQUNuQixTQUFPLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLFVBQVUsQ0FBQyxFQUFFO0FBQ2pDLFdBQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksR0FBRyxLQUFLLEdBQUcsSUFBSSxDQUFDO0dBQ3BDLENBQUMsQ0FBQyxNQUFNLENBQUM7Q0FDWDs7QUFFRCxTQUFTLFNBQVMsQ0FBQyxJQUFJLEVBQUUsRUFBRSxFQUFFO0FBQzNCLFNBQU8sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsVUFBVSxDQUFDLEVBQUU7QUFDOUIsV0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztHQUN0QixDQUFDLENBQUM7Q0FDSjs7QUFFTSxTQUFTLE1BQU0sQ0FBQyxJQUFJLEVBQUU7QUFDM0IsTUFBSSxJQUFJLEdBQU0sR0FBRyxDQUFDLElBQUksRUFBRSxVQUFDLENBQUMsRUFBSztB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aG9tZS92aW8vdjNtZXRyaWNzL2luc3RhbGxlZFBsdWdpbnMvdGltZWxpb24vc2VydmVyL3Nlcmllc19mdW5jdGlvbnMvdHJlbmQvbGliL3JlZ3Jlc3MuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuKiBBbGdvcml0aG1zIGZyb21cbiogY29weXJpZ2h0KGMpIDIwMTMgVG9tIEFsZXhhbmRlclxuKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4qL1xuXG52YXIgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xuXG5mdW5jdGlvbiBzdW0oZGF0YSwgZm4pIHtcbiAgcmV0dXJuIF8ucmVkdWNlKGRhdGEsIGZ1bmN0aW9uIChzdW0sIGQpIHtcbiAgICByZXR1cm4gc3VtICsgKGRbMV0gPT0gbnVsbCA/IDAgOiBmbihkKSk7XG4gIH0sIDApO1xufVxuXG5mdW5jdGlvbiBjb3VudChkYXRhKSB7XG4gIHJldHVybiBfLmZpbHRlcihkYXRhLCBmdW5jdGlvbiAoZCkge1xuICAgIHJldHVybiBkWzFdID09IG51bGwgPyBmYWxzZSA6IHRydWU7XG4gIH0pLmxlbmd0aDtcbn1cblxuZnVuY3Rpb24gbWFwVHVwbGVzKGRhdGEsIGZuKSB7XG4gIHJldHVybiBfLm1hcChkYXRhLCBmdW5jdGlvbiAoZCkge1xuICAgIHJldHVybiBbZFswXSwgZm4oZCldO1xuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhcihkYXRhKSB7XG4gIHZhciB4U3VtICAgID0gc3VtKGRhdGEsIChkKSA9PiB7cmV0dXJuIGRbMF07IH0pO1xuICB2YXIgeVN1bSAgICA9IHN1bShkYXRhLCAoZCkgPT4ge3JldHVybiBkWzFdOyB9KTtcbiAgdmFyIHhTcVN1bSAgPSBzdW0oZGF0YSwgKGQpID0+IHtyZXR1cm4gZFswXSAqIGRbMF07IH0pO1xuICB2YXIgeHlTdW0gICA9IHN1bShkYXRhLCAoZCkgPT4ge3JldHVybiBkWzBdICogZFsxXTsgfSk7XG4gIHZhciBvYnNlcnZhdGlvbnMgPSBjb3VudChkYXRhKTtcblxuICB2YXIgZ3JhZGllbnQgPVxuICAgICgob2JzZXJ2YXRpb25zICogeHlTdW0pICAtICh4U3VtICogeVN1bSkpIC9cbiAgICAoKG9ic2VydmF0aW9ucyAqIHhTcVN1bSkgLSAoeFN1bSAqIHhTdW0pKTtcblxuICB2YXIgaW50ZXJjZXB0ID1cbiAgICAoeVN1bSAvIG9ic2VydmF0aW9ucykgLSAoZ3JhZGllbnQgKiB4U3VtKSAvIG9ic2VydmF0aW9ucztcblxuICByZXR1cm4gbWFwVHVwbGVzKGRhdGEsIChkKSA9PiB7IHJldHVybiBkWzBdICogZ3JhZGllbnQgKyBpbnRlcmNlcHQ7IH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbG9nKGRhdGEpIHtcbiAgdmFyIGxvZ1hTdW0gICA9IHN1bShkYXRhLCAoZCkgPT4ge3JldHVybiBNYXRoLmxvZyhkWzBdKTsgfSk7XG4gIHZhciB5TG9nWFN1bSAgPSBzdW0oZGF0YSwgKGQpID0+IHtyZXR1cm4gZFsxXSAqIE1hdGgubG9nKGRbMF0pOyB9KTtcbiAgdmFyIHlTdW0gICAgICA9IHN1bShkYXRhLCAoZCkgPT4ge3JldHVybiBkWzFdOyB9KTtcbiAgdmFyIGxvZ1hzcVN1bSA9IHN1bShkYXRhLCAoZCkgPT4ge3JldHVybiBNYXRoLnBvdyhNYXRoLmxvZyhkWzBdKSwgMik7IH0pO1xuICB2YXIgb2JzZXJ2YXRpb25zID0gY291bnQoZGF0YSk7XG5cbiAgdmFyIGIgPVxuICAgICgob2JzZXJ2YXRpb25zICogeUxvZ1hTdW0pIC0gICh5U3VtICogbG9nWFN1bSkpIC9cbiAgICAoKG9ic2VydmF0aW9ucyAqIGxvZ1hzcVN1bSkgLSAobG9nWFN1bSAqIGxvZ1hTdW0pKTtcblxuICB2YXIgYSA9XG4gICAgKHlTdW0gLSBiICogbG9nWFN1bSkgL1xuICAgIG9ic2VydmF0aW9ucztcblxuICByZXR1cm4gbWFwVHVwbGVzKGRhdGEsIChkKSA9PiB7IHJldHVybiBhICsgYiAqIE1hdGgubG9nKGRbMF0pOyB9KTtcbn1cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/trend/lib/regress.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/series_functions/trend/lib/regress.js",
      "sourcesContent": [
        "/*\n* Algorithms from\n* copyright(c) 2013 Tom Alexander\n* Licensed under the MIT license.\n*/\n\nvar _ = require('lodash');\n\nfunction sum(data, fn) {\n  return _.reduce(data, function (sum, d) {\n    return sum + (d[1] == null ? 0 : fn(d));\n  }, 0);\n}\n\nfunction count(data) {\n  return _.filter(data, function (d) {\n    return d[1] == null ? false : true;\n  }).length;\n}\n\nfunction mapTuples(data, fn) {\n  return _.map(data, function (d) {\n    return [d[0], fn(d)];\n  });\n}\n\nexport function linear(data) {\n  var xSum    = sum(data, (d) => {return d[0]; });\n  var ySum    = sum(data, (d) => {return d[1]; });\n  var xSqSum  = sum(data, (d) => {return d[0] * d[0]; });\n  var xySum   = sum(data, (d) => {return d[0] * d[1]; });\n  var observations = count(data);\n\n  var gradient =\n    ((observations * xySum)  - (xSum * ySum)) /\n    ((observations * xSqSum) - (xSum * xSum));\n\n  var intercept =\n    (ySum / observations) - (gradient * xSum) / observations;\n\n  return mapTuples(data, (d) => { return d[0] * gradient + intercept; });\n}\n\nexport function log(data) {\n  var logXSum   = sum(data, (d) => {return Math.log(d[0]); });\n  var yLogXSum  = sum(data, (d) => {return d[1] * Math.log(d[0]); });\n  var ySum      = sum(data, (d) => {return d[1]; });\n  var logXsqSum = sum(data, (d) => {return Math.pow(Math.log(d[0]), 2); });\n  var observations = count(data);\n\n  var b =\n    ((observations * yLogXSum) -  (ySum * logXSum)) /\n    ((observations * logXsqSum) - (logXSum * logXSum));\n\n  var a =\n    (ySum - b * logXSum) /\n    observations;\n\n  return mapTuples(data, (d) => { return a + b * Math.log(d[0]); });\n}\n"
      ]
    },
    "mtime": 1467119944687
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/handlers/lib/preprocess_chain.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _ = require('lodash');\nvar getFunctionByName = require('./get_function_by_name.js');\n\nmodule.exports = function preProcessChain(chain, queries) {\n  queries = queries || {};\n  function validateAndStore(item) {\n    if (_.isObject(item) && item.type === 'function') {\n      var functionDef = getFunctionByName(item['function']);\n\n      if (functionDef.datasource) {\n        queries[functionDef.cacheKey(item)] = item;\n        return true;\n      }\n      return false;\n    }\n  }\n\n  // Is this thing a function?\n  if (validateAndStore(chain)) {\n    return;\n  }\n\n  if (!_.isArray(chain)) return;\n\n  _.each(chain, function (operator) {\n    if (!_.isObject(operator)) {\n      return;\n    }\n    switch (operator.type) {\n      case 'chain':\n        preProcessChain(operator.chain, queries);\n        break;\n      case 'chainList':\n        preProcessChain(operator.list, queries);\n        break;\n      case 'function':\n        if (validateAndStore(operator)) {\n          break;\n        } else {\n          preProcessChain(operator.arguments, queries);\n        }\n        break;\n    }\n  });\n\n  return queries;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvaGFuZGxlcnMvbGliL3ByZXByb2Nlc3NfY2hhaW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFJLENBQUMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDMUIsSUFBSSxpQkFBaUIsR0FBRyxPQUFPLENBQUMsMkJBQTJCLENBQUMsQ0FBQzs7QUFFN0QsTUFBTSxDQUFDLE9BQU8sR0FBRyxTQUFTLGVBQWUsQ0FBQyxLQUFLLEVBQUUsT0FBTyxFQUFFO0FBQ3hELFNBQU8sR0FBRyxPQUFPLElBQUksRUFBRSxDQUFDO0FBQ3hCLFdBQVMsZ0JBQWdCLENBQUMsSUFBSSxFQUFFO0FBQzlCLFFBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxJQUFJLENBQUMsSUFBSSxLQUFLLFVBQVUsRUFBRTtBQUNoRCxVQUFJLFdBQVcsR0FBRyxpQkFBaUIsQ0FBQyxJQUFJLFlBQVMsQ0FBQyxDQUFDOztBQUVuRCxVQUFJLFdBQVcsQ0FBQyxVQUFVLEVBQUU7QUFDMUIsZUFBTyxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUM7QUFDM0MsZUFBTyxJQUFJLENBQUM7T0FDYjtBQUNELGFBQU8sS0FBSyxDQUFDO0tBQ2Q7R0FDRjs7O0FBR0QsTUFBSSxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsRUFBRTtBQUMzQixXQUFPO0dBQ1I7O0FBRUQsTUFBSSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEVBQUUsT0FBTzs7QUFFOUIsR0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsVUFBVSxRQUFRLEVBQUU7QUFDaEMsUUFBSSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLEVBQUU7QUFDekIsYUFBTztLQUNSO0FBQ0QsWUFBUSxRQUFRLENBQUMsSUFBSTtBQUNuQixXQUFLLE9BQU87QUFDVix1QkFBZSxDQUFDLFFBQVEsQ0FBQyxLQUFLLEVBQUUsT0FBTyxDQUFDLENBQUM7QUFDekMsY0FBTTtBQUFBLEFBQ1IsV0FBSyxXQUFXO0FBQ2QsdUJBQWUsQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQ3hDLGNBQU07QUFBQSxBQUNSLFdBQUssVUFBVTtBQUNiLFlBQUksZ0JBQWdCLENBQUMsUUFBUSxDQUFDLEVBQUU7QUFDOUIsZ0JBQU07U0FDUCxNQUFNO0FBQ0wseUJBQWUsQ0FBQyxRQUFRLENBQUMsU0FBUyxFQUFFLE9BQU8sQ0FBQyxDQUFDO1NBQzlDO0FBQ0QsY0FBTTtBQUFBLEtBQ1Q7R0FDRixDQUFDLENBQUM7O0FBRUgsU0FBTyxPQUFPLENBQUM7Q0FDaEIsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL2luc3RhbGxlZFBsdWdpbnMvdGltZWxpb24vc2VydmVyL2hhbmRsZXJzL2xpYi9wcmVwcm9jZXNzX2NoYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcbnZhciBnZXRGdW5jdGlvbkJ5TmFtZSA9IHJlcXVpcmUoJy4vZ2V0X2Z1bmN0aW9uX2J5X25hbWUuanMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBwcmVQcm9jZXNzQ2hhaW4oY2hhaW4sIHF1ZXJpZXMpIHtcbiAgcXVlcmllcyA9IHF1ZXJpZXMgfHwge307XG4gIGZ1bmN0aW9uIHZhbGlkYXRlQW5kU3RvcmUoaXRlbSkge1xuICAgIGlmIChfLmlzT2JqZWN0KGl0ZW0pICYmIGl0ZW0udHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdmFyIGZ1bmN0aW9uRGVmID0gZ2V0RnVuY3Rpb25CeU5hbWUoaXRlbS5mdW5jdGlvbik7XG5cbiAgICAgIGlmIChmdW5jdGlvbkRlZi5kYXRhc291cmNlKSB7XG4gICAgICAgIHF1ZXJpZXNbZnVuY3Rpb25EZWYuY2FjaGVLZXkoaXRlbSldID0gaXRlbTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLy8gSXMgdGhpcyB0aGluZyBhIGZ1bmN0aW9uP1xuICBpZiAodmFsaWRhdGVBbmRTdG9yZShjaGFpbikpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoIV8uaXNBcnJheShjaGFpbikpIHJldHVybjtcblxuICBfLmVhY2goY2hhaW4sIGZ1bmN0aW9uIChvcGVyYXRvcikge1xuICAgIGlmICghXy5pc09iamVjdChvcGVyYXRvcikpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc3dpdGNoIChvcGVyYXRvci50eXBlKSB7XG4gICAgICBjYXNlICdjaGFpbic6XG4gICAgICAgIHByZVByb2Nlc3NDaGFpbihvcGVyYXRvci5jaGFpbiwgcXVlcmllcyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnY2hhaW5MaXN0JzpcbiAgICAgICAgcHJlUHJvY2Vzc0NoYWluKG9wZXJhdG9yLmxpc3QsIHF1ZXJpZXMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2Z1bmN0aW9uJzpcbiAgICAgICAgaWYgKHZhbGlkYXRlQW5kU3RvcmUob3BlcmF0b3IpKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcHJlUHJvY2Vzc0NoYWluKG9wZXJhdG9yLmFyZ3VtZW50cywgcXVlcmllcyk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gcXVlcmllcztcbn07Il19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/handlers/lib/preprocess_chain.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC1B,IAAI,iBAAiB,GAAG,OAAO,CAAC,2BAA2B,CAAC,CAAC;;AAE7D,MAAM,CAAC,OAAO,GAAG,SAAS,eAAe,CAAC,KAAK,EAAE,OAAO,EAAE;AACxD,SAAO,GAAG,OAAO,IAAI,EAAE,CAAC;AACxB,WAAS,gBAAgB,CAAC,IAAI,EAAE;AAC9B,QAAI,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,IAAI,KAAK,UAAU,EAAE;AAChD,UAAI,WAAW,GAAG,iBAAiB,CAAC,IAAI,YAAS,CAAC,CAAC;;AAEnD,UAAI,WAAW,CAAC,UAAU,EAAE;AAC1B,eAAO,CAAC,WAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC;AAC3C,eAAO,IAAI,CAAC;OACb;AACD,aAAO,KAAK,CAAC;KACd;GACF;;;AAGD,MAAI,gBAAgB,CAAC,KAAK,CAAC,EAAE;AAC3B,WAAO;GACR;;AAED,MAAI,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,OAAO;;AAE9B,GAAC,CAAC,IAAI,CAAC,KAAK,EAAE,UAAU,QAAQ,EAAE;AAChC,QAAI,CAAC,CAAC,CAAC,QAAQ,CAAC,QAAQ,CAAC,EAAE;AACzB,aAAO;KACR;AACD,YAAQ,QAAQ,CAAC,IAAI;AACnB,WAAK,OAAO;AACV,uBAAe,CAAC,QAAQ,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;AACzC,cAAM;AAAA,AACR,WAAK,WAAW;AACd,uBAAe,CAAC,QAAQ,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;AACxC,cAAM;AAAA,AACR,WAAK,UAAU;AACb,YAAI,gBAAgB,CAAC,QAAQ,CAAC,EAAE;AAC9B,gBAAM;SACP,MAAM;AACL,yBAAe,CAAC,QAAQ,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;SAC9C;AACD,cAAM;AAAA,KACT;GACF,CAAC,CAAC;;AAEH,SAAO,OAAO,CAAC;CAChB,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/handlers/lib/preprocess_chain.js",
      "sourcesContent": [
        "var _ = require('lodash');\nvar getFunctionByName = require('./get_function_by_name.js');\n\nmodule.exports = function preProcessChain(chain, queries) {\n  queries = queries || {};\n  function validateAndStore(item) {\n    if (_.isObject(item) && item.type === 'function') {\n      var functionDef = getFunctionByName(item.function);\n\n      if (functionDef.datasource) {\n        queries[functionDef.cacheKey(item)] = item;\n        return true;\n      }\n      return false;\n    }\n  }\n\n  // Is this thing a function?\n  if (validateAndStore(chain)) {\n    return;\n  }\n\n  if (!_.isArray(chain)) return;\n\n  _.each(chain, function (operator) {\n    if (!_.isObject(operator)) {\n      return;\n    }\n    switch (operator.type) {\n      case 'chain':\n        preProcessChain(operator.chain, queries);\n        break;\n      case 'chainList':\n        preProcessChain(operator.list, queries);\n        break;\n      case 'function':\n        if (validateAndStore(operator)) {\n          break;\n        } else {\n          preProcessChain(operator.arguments, queries);\n        }\n        break;\n    }\n  });\n\n  return queries;\n};"
      ]
    },
    "mtime": 1467119944519
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/handlers/lib/validate_time.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar parseDateMath = require('../../lib/date_math.js');\nvar toMS = require('../../lib/to_milliseconds.js');\n\nmodule.exports = function validateTime(time, tlConfig) {\n  var span = parseDateMath(time.to, true) - parseDateMath(time.from);\n  var interval = toMS(time.interval);\n  var bucketCount = span / interval;\n  if (bucketCount > tlConfig.file.max_buckets) {\n    throw new Error('Max buckets exceeded: ' + Math.round(bucketCount) + ' of ' + tlConfig.file.max_buckets + ' allowed. ' + 'Choose a larger interval or a shorter time span');\n  }\n  return true;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvaGFuZGxlcnMvbGliL3ZhbGlkYXRlX3RpbWUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFJLGFBQWEsR0FBRyxPQUFPLENBQUMsd0JBQXdCLENBQUMsQ0FBQztBQUN0RCxJQUFJLElBQUksR0FBRyxPQUFPLENBQUMsOEJBQThCLENBQUMsQ0FBQzs7QUFFbkQsTUFBTSxDQUFDLE9BQU8sR0FBRyxTQUFTLFlBQVksQ0FBQyxJQUFJLEVBQUUsUUFBUSxFQUFFO0FBQ3JELE1BQUksSUFBSSxHQUFHLGFBQWEsQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxHQUFHLGFBQWEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDbkUsTUFBSSxRQUFRLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUNuQyxNQUFJLFdBQVcsR0FBRyxJQUFJLEdBQUcsUUFBUSxDQUFDO0FBQ2xDLE1BQUksV0FBVyxHQUFHLFFBQVEsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFO0FBQzNDLFVBQU0sSUFBSSxLQUFLLENBQUMsd0JBQXdCLEdBQ3RDLElBQUksQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLEdBQUcsTUFBTSxHQUFHLFFBQVEsQ0FBQyxJQUFJLENBQUMsV0FBVyxHQUFHLFlBQVksR0FDM0UsaURBQWlELENBQUMsQ0FBQztHQUN0RDtBQUNELFNBQU8sSUFBSSxDQUFDO0NBQ2IsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL2luc3RhbGxlZFBsdWdpbnMvdGltZWxpb24vc2VydmVyL2hhbmRsZXJzL2xpYi92YWxpZGF0ZV90aW1lLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIHBhcnNlRGF0ZU1hdGggPSByZXF1aXJlKCcuLi8uLi9saWIvZGF0ZV9tYXRoLmpzJyk7XG52YXIgdG9NUyA9IHJlcXVpcmUoJy4uLy4uL2xpYi90b19taWxsaXNlY29uZHMuanMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB2YWxpZGF0ZVRpbWUodGltZSwgdGxDb25maWcpIHtcbiAgdmFyIHNwYW4gPSBwYXJzZURhdGVNYXRoKHRpbWUudG8sIHRydWUpIC0gcGFyc2VEYXRlTWF0aCh0aW1lLmZyb20pO1xuICB2YXIgaW50ZXJ2YWwgPSB0b01TKHRpbWUuaW50ZXJ2YWwpO1xuICB2YXIgYnVja2V0Q291bnQgPSBzcGFuIC8gaW50ZXJ2YWw7XG4gIGlmIChidWNrZXRDb3VudCA+IHRsQ29uZmlnLmZpbGUubWF4X2J1Y2tldHMpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01heCBidWNrZXRzIGV4Y2VlZGVkOiAnICtcbiAgICAgIE1hdGgucm91bmQoYnVja2V0Q291bnQpICsgJyBvZiAnICsgdGxDb25maWcuZmlsZS5tYXhfYnVja2V0cyArICcgYWxsb3dlZC4gJyArXG4gICAgICAnQ2hvb3NlIGEgbGFyZ2VyIGludGVydmFsIG9yIGEgc2hvcnRlciB0aW1lIHNwYW4nKTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn07Il19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/handlers/lib/validate_time.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,aAAa,GAAG,OAAO,CAAC,wBAAwB,CAAC,CAAC;AACtD,IAAI,IAAI,GAAG,OAAO,CAAC,8BAA8B,CAAC,CAAC;;AAEnD,MAAM,CAAC,OAAO,GAAG,SAAS,YAAY,CAAC,IAAI,EAAE,QAAQ,EAAE;AACrD,MAAI,IAAI,GAAG,aAAa,CAAC,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,GAAG,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACnE,MAAI,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AACnC,MAAI,WAAW,GAAG,IAAI,GAAG,QAAQ,CAAC;AAClC,MAAI,WAAW,GAAG,QAAQ,CAAC,IAAI,CAAC,WAAW,EAAE;AAC3C,UAAM,IAAI,KAAK,CAAC,wBAAwB,GACtC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,GAAG,MAAM,GAAG,QAAQ,CAAC,IAAI,CAAC,WAAW,GAAG,YAAY,GAC3E,iDAAiD,CAAC,CAAC;GACtD;AACD,SAAO,IAAI,CAAC;CACb,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/handlers/lib/validate_time.js",
      "sourcesContent": [
        "var parseDateMath = require('../../lib/date_math.js');\nvar toMS = require('../../lib/to_milliseconds.js');\n\nmodule.exports = function validateTime(time, tlConfig) {\n  var span = parseDateMath(time.to, true) - parseDateMath(time.from);\n  var interval = toMS(time.interval);\n  var bucketCount = span / interval;\n  if (bucketCount > tlConfig.file.max_buckets) {\n    throw new Error('Max buckets exceeded: ' +\n      Math.round(bucketCount) + ' of ' + tlConfig.file.max_buckets + ' allowed. ' +\n      'Choose a larger interval or a shorter time span');\n  }\n  return true;\n};"
      ]
    },
    "mtime": 1467119944519
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/routes/functions.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar loadFunctions = require('../lib/load_functions.js');\nvar functions = loadFunctions('series_functions/');\nvar _ = require('lodash');\n\nmodule.exports = function (server) {\n  server.route({\n    method: 'GET',\n    path: '/api/timelion/functions',\n    handler: function handler(request, reply) {\n      var functionArray = _.map(functions, function (val, key) {\n        // TODO: This won't work on frozen objects, it should be removed when everything is converted to datasources and chainables\n        return _.extend({}, val, { name: key });\n      });\n      reply(functionArray);\n    }\n  });\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvcm91dGVzL2Z1bmN0aW9ucy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQUksYUFBYSxHQUFHLE9BQU8sQ0FBQywwQkFBMEIsQ0FBQyxDQUFDO0FBQ3hELElBQUksU0FBUyxHQUFJLGFBQWEsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO0FBQ3BELElBQUksQ0FBQyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQzs7QUFHMUIsTUFBTSxDQUFDLE9BQU8sR0FBRyxVQUFVLE1BQU0sRUFBRTtBQUNqQyxRQUFNLENBQUMsS0FBSyxDQUFDO0FBQ1gsVUFBTSxFQUFFLEtBQUs7QUFDYixRQUFJLEVBQUUseUJBQXlCO0FBQy9CLFdBQU8sRUFBRSxpQkFBVSxPQUFPLEVBQUUsS0FBSyxFQUFFO0FBQ2pDLFVBQUksYUFBYSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFLFVBQVUsR0FBRyxFQUFFLEdBQUcsRUFBRTs7QUFFdkQsZUFBTyxDQUFDLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxHQUFHLEVBQUUsRUFBQyxJQUFJLEVBQUUsR0FBRyxFQUFDLENBQUMsQ0FBQztPQUN2QyxDQUFDLENBQUM7QUFDSCxXQUFLLENBQUMsYUFBYSxDQUFDLENBQUM7S0FDdEI7R0FDRixDQUFDLENBQUM7Q0FDSixDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvcm91dGVzL2Z1bmN0aW9ucy5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBsb2FkRnVuY3Rpb25zID0gcmVxdWlyZSgnLi4vbGliL2xvYWRfZnVuY3Rpb25zLmpzJyk7XG52YXIgZnVuY3Rpb25zICA9IGxvYWRGdW5jdGlvbnMoJ3Nlcmllc19mdW5jdGlvbnMvJyk7XG52YXIgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xuXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHNlcnZlcikge1xuICBzZXJ2ZXIucm91dGUoe1xuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgcGF0aDogJy9hcGkvdGltZWxpb24vZnVuY3Rpb25zJyxcbiAgICBoYW5kbGVyOiBmdW5jdGlvbiAocmVxdWVzdCwgcmVwbHkpIHtcbiAgICAgIHZhciBmdW5jdGlvbkFycmF5ID0gXy5tYXAoZnVuY3Rpb25zLCBmdW5jdGlvbiAodmFsLCBrZXkpIHtcbiAgICAgICAgLy8gVE9ETzogVGhpcyB3b24ndCB3b3JrIG9uIGZyb3plbiBvYmplY3RzLCBpdCBzaG91bGQgYmUgcmVtb3ZlZCB3aGVuIGV2ZXJ5dGhpbmcgaXMgY29udmVydGVkIHRvIGRhdGFzb3VyY2VzIGFuZCBjaGFpbmFibGVzXG4gICAgICAgIHJldHVybiBfLmV4dGVuZCh7fSwgdmFsLCB7bmFtZToga2V5fSk7XG4gICAgICB9KTtcbiAgICAgIHJlcGx5KGZ1bmN0aW9uQXJyYXkpO1xuICAgIH1cbiAgfSk7XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/routes/functions.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,aAAa,GAAG,OAAO,CAAC,0BAA0B,CAAC,CAAC;AACxD,IAAI,SAAS,GAAI,aAAa,CAAC,mBAAmB,CAAC,CAAC;AACpD,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;;AAG1B,MAAM,CAAC,OAAO,GAAG,UAAU,MAAM,EAAE;AACjC,QAAM,CAAC,KAAK,CAAC;AACX,UAAM,EAAE,KAAK;AACb,QAAI,EAAE,yBAAyB;AAC/B,WAAO,EAAE,iBAAU,OAAO,EAAE,KAAK,EAAE;AACjC,UAAI,aAAa,GAAG,CAAC,CAAC,GAAG,CAAC,SAAS,EAAE,UAAU,GAAG,EAAE,GAAG,EAAE;;AAEvD,eAAO,CAAC,CAAC,MAAM,CAAC,EAAE,EAAE,GAAG,EAAE,EAAC,IAAI,EAAE,GAAG,EAAC,CAAC,CAAC;OACvC,CAAC,CAAC;AACH,WAAK,CAAC,aAAa,CAAC,CAAC;KACtB;GACF,CAAC,CAAC;CACJ,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/routes/functions.js",
      "sourcesContent": [
        "var loadFunctions = require('../lib/load_functions.js');\nvar functions  = loadFunctions('series_functions/');\nvar _ = require('lodash');\n\n\nmodule.exports = function (server) {\n  server.route({\n    method: 'GET',\n    path: '/api/timelion/functions',\n    handler: function (request, reply) {\n      var functionArray = _.map(functions, function (val, key) {\n        // TODO: This won't work on frozen objects, it should be removed when everything is converted to datasources and chainables\n        return _.extend({}, val, {name: key});\n      });\n      reply(functionArray);\n    }\n  });\n};\n"
      ]
    },
    "mtime": 1467119944363
  },
  "{\"filename\":\"/home/vio/v3metrics/installedPlugins/timelion/server/routes/validate_es.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nmodule.exports = function (server) {\n  server.route({\n    method: 'GET',\n    path: '/api/timelion/validate/es',\n    handler: function handler(request, reply) {\n      var config = require('../../timelion.json');\n      var callWithRequest = server.plugins.elasticsearch.callWithRequest;\n\n      var body = {\n        index: config.es.default_index,\n        fields: config.es.timefield\n      };\n\n      callWithRequest(request, 'fieldStats', body).then(function (resp) {\n        reply({\n          ok: true,\n          field: config.es.timefield,\n          min: resp.indices._all.fields[config.es.timefield].min_value,\n          max: resp.indices._all.fields[config.es.timefield].max_value\n        });\n      })['catch'](function (resp) {\n        reply({\n          ok: false,\n          resp: resp\n        });\n      });\n    }\n  });\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvcm91dGVzL3ZhbGlkYXRlX2VzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTSxDQUFDLE9BQU8sR0FBRyxVQUFVLE1BQU0sRUFBRTtBQUNqQyxRQUFNLENBQUMsS0FBSyxDQUFDO0FBQ1gsVUFBTSxFQUFFLEtBQUs7QUFDYixRQUFJLEVBQUUsMkJBQTJCO0FBQ2pDLFdBQU8sRUFBRSxpQkFBVSxPQUFPLEVBQUUsS0FBSyxFQUFFO0FBQ2pDLFVBQUksTUFBTSxHQUFHLE9BQU8sQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO0FBQzVDLFVBQUksZUFBZSxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLGVBQWUsQ0FBQzs7QUFFbkUsVUFBSSxJQUFJLEdBQUc7QUFDVCxhQUFLLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxhQUFhO0FBQzlCLGNBQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLFNBQVM7T0FDNUIsQ0FBQzs7QUFFRixxQkFBZSxDQUFDLE9BQU8sRUFBRSxZQUFZLEVBQUUsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsSUFBSSxFQUFFO0FBQ2hFLGFBQUssQ0FBQztBQUNKLFlBQUUsRUFBRSxJQUFJO0FBQ1IsZUFBSyxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsU0FBUztBQUMxQixhQUFHLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDLENBQUMsU0FBUztBQUM1RCxhQUFHLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDLENBQUMsU0FBUztTQUM3RCxDQUFDLENBQUM7T0FDSixDQUFDLFNBQU0sQ0FBQyxVQUFVLElBQUksRUFBRTtBQUN2QixhQUFLLENBQUM7QUFDSixZQUFFLEVBQUUsS0FBSztBQUNULGNBQUksRUFBRSxJQUFJO1NBQ1gsQ0FBQyxDQUFDO09BQ0osQ0FBQyxDQUFDO0tBRUo7R0FDRixDQUFDLENBQUM7Q0FDSixDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3MvaW5zdGFsbGVkUGx1Z2lucy90aW1lbGlvbi9zZXJ2ZXIvcm91dGVzL3ZhbGlkYXRlX2VzLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoc2VydmVyKSB7XG4gIHNlcnZlci5yb3V0ZSh7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICBwYXRoOiAnL2FwaS90aW1lbGlvbi92YWxpZGF0ZS9lcycsXG4gICAgaGFuZGxlcjogZnVuY3Rpb24gKHJlcXVlc3QsIHJlcGx5KSB7XG4gICAgICB2YXIgY29uZmlnID0gcmVxdWlyZSgnLi4vLi4vdGltZWxpb24uanNvbicpO1xuICAgICAgdmFyIGNhbGxXaXRoUmVxdWVzdCA9IHNlcnZlci5wbHVnaW5zLmVsYXN0aWNzZWFyY2guY2FsbFdpdGhSZXF1ZXN0O1xuXG4gICAgICB2YXIgYm9keSA9IHtcbiAgICAgICAgaW5kZXg6IGNvbmZpZy5lcy5kZWZhdWx0X2luZGV4LFxuICAgICAgICBmaWVsZHM6IGNvbmZpZy5lcy50aW1lZmllbGRcbiAgICAgIH07XG5cbiAgICAgIGNhbGxXaXRoUmVxdWVzdChyZXF1ZXN0LCAnZmllbGRTdGF0cycsIGJvZHkpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHtcbiAgICAgICAgcmVwbHkoe1xuICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgIGZpZWxkOiBjb25maWcuZXMudGltZWZpZWxkLFxuICAgICAgICAgIG1pbjogcmVzcC5pbmRpY2VzLl9hbGwuZmllbGRzW2NvbmZpZy5lcy50aW1lZmllbGRdLm1pbl92YWx1ZSxcbiAgICAgICAgICBtYXg6IHJlc3AuaW5kaWNlcy5fYWxsLmZpZWxkc1tjb25maWcuZXMudGltZWZpZWxkXS5tYXhfdmFsdWVcbiAgICAgICAgfSk7XG4gICAgICB9KS5jYXRjaChmdW5jdGlvbiAocmVzcCkge1xuICAgICAgICByZXBseSh7XG4gICAgICAgICAgb2s6IGZhbHNlLFxuICAgICAgICAgIHJlc3A6IHJlc3BcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgIH1cbiAgfSk7XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/installedPlugins/timelion/server/routes/validate_es.js"
      ],
      "names": [],
      "mappings": ";;AAAA,MAAM,CAAC,OAAO,GAAG,UAAU,MAAM,EAAE;AACjC,QAAM,CAAC,KAAK,CAAC;AACX,UAAM,EAAE,KAAK;AACb,QAAI,EAAE,2BAA2B;AACjC,WAAO,EAAE,iBAAU,OAAO,EAAE,KAAK,EAAE;AACjC,UAAI,MAAM,GAAG,OAAO,CAAC,qBAAqB,CAAC,CAAC;AAC5C,UAAI,eAAe,GAAG,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,eAAe,CAAC;;AAEnE,UAAI,IAAI,GAAG;AACT,aAAK,EAAE,MAAM,CAAC,EAAE,CAAC,aAAa;AAC9B,cAAM,EAAE,MAAM,CAAC,EAAE,CAAC,SAAS;OAC5B,CAAC;;AAEF,qBAAe,CAAC,OAAO,EAAE,YAAY,EAAE,IAAI,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,EAAE;AAChE,aAAK,CAAC;AACJ,YAAE,EAAE,IAAI;AACR,eAAK,EAAE,MAAM,CAAC,EAAE,CAAC,SAAS;AAC1B,aAAG,EAAE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,SAAS;AAC5D,aAAG,EAAE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,SAAS;SAC7D,CAAC,CAAC;OACJ,CAAC,SAAM,CAAC,UAAU,IAAI,EAAE;AACvB,aAAK,CAAC;AACJ,YAAE,EAAE,KAAK;AACT,cAAI,EAAE,IAAI;SACX,CAAC,CAAC;OACJ,CAAC,CAAC;KAEJ;GACF,CAAC,CAAC;CACJ,CAAC",
      "file": "/home/vio/v3metrics/installedPlugins/timelion/server/routes/validate_es.js",
      "sourcesContent": [
        "module.exports = function (server) {\n  server.route({\n    method: 'GET',\n    path: '/api/timelion/validate/es',\n    handler: function (request, reply) {\n      var config = require('../../timelion.json');\n      var callWithRequest = server.plugins.elasticsearch.callWithRequest;\n\n      var body = {\n        index: config.es.default_index,\n        fields: config.es.timefield\n      };\n\n      callWithRequest(request, 'fieldStats', body).then(function (resp) {\n        reply({\n          ok: true,\n          field: config.es.timefield,\n          min: resp.indices._all.fields[config.es.timefield].min_value,\n          max: resp.indices._all.fields[config.es.timefield].max_value\n        });\n      }).catch(function (resp) {\n        reply({\n          ok: false,\n          resp: resp\n        });\n      });\n\n    }\n  });\n};\n"
      ]
    },
    "mtime": 1467119944363
  }
}
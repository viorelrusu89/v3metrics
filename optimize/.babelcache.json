{
  "{\"filename\":\"/home/vio/kibana/src/cli/cli.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "../utils/package_json",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "pkg"
              }
            ]
          },
          {
            "source": "./command",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Command"
              }
            ]
          },
          {
            "source": "./serve/serve",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "serveCommand"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _utilsPackage_json = require('../utils/package_json');\n\nvar _utilsPackage_json2 = _interopRequireDefault(_utilsPackage_json);\n\nvar _command = require('./command');\n\nvar _command2 = _interopRequireDefault(_command);\n\nvar _serveServe = require('./serve/serve');\n\nvar _serveServe2 = _interopRequireDefault(_serveServe);\n\nvar argv = process.env.kbnWorkerArgv ? JSON.parse(process.env.kbnWorkerArgv) : process.argv.slice();\nvar program = new _command2['default']('bin/kibana');\n\nprogram.version(_utilsPackage_json2['default'].version).description('Kibana is an open source (Apache Licensed), browser ' + 'based analytics and search dashboard for Elasticsearch.');\n\n// attach commands\n(0, _serveServe2['default'])(program);\n\nprogram.command('help <command>').description('Get the help for a specific command').action(function (cmdName) {\n  var cmd = _lodash2['default'].find(program.commands, { _name: cmdName });\n  if (!cmd) return program.error('unknown command ' + cmdName);\n  cmd.help();\n});\n\nprogram.command('*', null, { noHelp: true }).action(function (cmd, options) {\n  program.error('unknown command ' + cmd);\n});\n\n// check for no command name\nvar subCommand = argv[2] && !String(argv[2][0]).match(/^-|^\\.|\\//);\n\nif (!subCommand) {\n  if (_lodash2['default'].intersection(argv.slice(2), ['-h', '--help']).length) {\n    program.defaultHelp();\n  } else {\n    argv.splice(2, 0, ['serve']);\n  }\n}\n\nprogram.parse(argv);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL2NsaS9jbGkuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztzQkFBYyxRQUFROzs7O2lDQUNOLHVCQUF1Qjs7Ozt1QkFDbkIsV0FBVzs7OzswQkFDTixlQUFlOzs7O0FBRXhDLElBQU0sSUFBSSxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO0FBQ3RHLElBQU0sT0FBTyxHQUFHLHlCQUFZLFlBQVksQ0FBQyxDQUFDOztBQUUxQyxPQUFPLENBQ04sT0FBTyxDQUFDLCtCQUFJLE9BQU8sQ0FBQyxDQUNwQixXQUFXLENBQ1Ysc0RBQXNELEdBQ3RELHlEQUF5RCxDQUMxRCxDQUFDOzs7QUFHRiw2QkFBYSxPQUFPLENBQUMsQ0FBQzs7QUFFdEIsT0FBTyxDQUNOLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUN6QixXQUFXLENBQUMscUNBQXFDLENBQUMsQ0FDbEQsTUFBTSxDQUFDLFVBQVUsT0FBTyxFQUFFO0FBQ3pCLE1BQU0sR0FBRyxHQUFHLG9CQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxDQUFDLENBQUM7QUFDekQsTUFBSSxDQUFDLEdBQUcsRUFBRSxPQUFPLE9BQU8sQ0FBQyxLQUFLLHNCQUFvQixPQUFPLENBQUcsQ0FBQztBQUM3RCxLQUFHLENBQUMsSUFBSSxFQUFFLENBQUM7Q0FDWixDQUFDLENBQUM7O0FBRUgsT0FBTyxDQUNOLE9BQU8sQ0FBQyxHQUFHLEVBQUUsSUFBSSxFQUFFLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxDQUFDLENBQ3BDLE1BQU0sQ0FBQyxVQUFVLEdBQUcsRUFBRSxPQUFPLEVBQUU7QUFDOUIsU0FBTyxDQUFDLEtBQUssc0JBQW9CLEdBQUcsQ0FBRyxDQUFDO0NBQ3pDLENBQUMsQ0FBQzs7O0FBR0gsSUFBTSxVQUFVLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQzs7QUFFckUsSUFBSSxDQUFDLFVBQVUsRUFBRTtBQUNmLE1BQUksb0JBQUUsWUFBWSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQyxNQUFNLEVBQUU7QUFDMUQsV0FBTyxDQUFDLFdBQVcsRUFBRSxDQUFDO0dBQ3ZCLE1BQU07QUFDTCxRQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO0dBQzlCO0NBQ0Y7O0FBRUQsT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8va2liYW5hL3NyYy9jbGkvY2xpLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBwa2cgZnJvbSAnLi4vdXRpbHMvcGFja2FnZV9qc29uJztcbmltcG9ydCBDb21tYW5kIGZyb20gJy4vY29tbWFuZCc7XG5pbXBvcnQgc2VydmVDb21tYW5kIGZyb20gJy4vc2VydmUvc2VydmUnO1xuXG5jb25zdCBhcmd2ID0gcHJvY2Vzcy5lbnYua2JuV29ya2VyQXJndiA/IEpTT04ucGFyc2UocHJvY2Vzcy5lbnYua2JuV29ya2VyQXJndikgOiBwcm9jZXNzLmFyZ3Yuc2xpY2UoKTtcbmNvbnN0IHByb2dyYW0gPSBuZXcgQ29tbWFuZCgnYmluL2tpYmFuYScpO1xuXG5wcm9ncmFtXG4udmVyc2lvbihwa2cudmVyc2lvbilcbi5kZXNjcmlwdGlvbihcbiAgJ0tpYmFuYSBpcyBhbiBvcGVuIHNvdXJjZSAoQXBhY2hlIExpY2Vuc2VkKSwgYnJvd3NlciAnICtcbiAgJ2Jhc2VkIGFuYWx5dGljcyBhbmQgc2VhcmNoIGRhc2hib2FyZCBmb3IgRWxhc3RpY3NlYXJjaC4nXG4pO1xuXG4vLyBhdHRhY2ggY29tbWFuZHNcbnNlcnZlQ29tbWFuZChwcm9ncmFtKTtcblxucHJvZ3JhbVxuLmNvbW1hbmQoJ2hlbHAgPGNvbW1hbmQ+Jylcbi5kZXNjcmlwdGlvbignR2V0IHRoZSBoZWxwIGZvciBhIHNwZWNpZmljIGNvbW1hbmQnKVxuLmFjdGlvbihmdW5jdGlvbiAoY21kTmFtZSkge1xuICBjb25zdCBjbWQgPSBfLmZpbmQocHJvZ3JhbS5jb21tYW5kcywgeyBfbmFtZTogY21kTmFtZSB9KTtcbiAgaWYgKCFjbWQpIHJldHVybiBwcm9ncmFtLmVycm9yKGB1bmtub3duIGNvbW1hbmQgJHtjbWROYW1lfWApO1xuICBjbWQuaGVscCgpO1xufSk7XG5cbnByb2dyYW1cbi5jb21tYW5kKCcqJywgbnVsbCwgeyBub0hlbHA6IHRydWUgfSlcbi5hY3Rpb24oZnVuY3Rpb24gKGNtZCwgb3B0aW9ucykge1xuICBwcm9ncmFtLmVycm9yKGB1bmtub3duIGNvbW1hbmQgJHtjbWR9YCk7XG59KTtcblxuLy8gY2hlY2sgZm9yIG5vIGNvbW1hbmQgbmFtZVxuY29uc3Qgc3ViQ29tbWFuZCA9IGFyZ3ZbMl0gJiYgIVN0cmluZyhhcmd2WzJdWzBdKS5tYXRjaCgvXi18XlxcLnxcXC8vKTtcblxuaWYgKCFzdWJDb21tYW5kKSB7XG4gIGlmIChfLmludGVyc2VjdGlvbihhcmd2LnNsaWNlKDIpLCBbJy1oJywgJy0taGVscCddKS5sZW5ndGgpIHtcbiAgICBwcm9ncmFtLmRlZmF1bHRIZWxwKCk7XG4gIH0gZWxzZSB7XG4gICAgYXJndi5zcGxpY2UoMiwgMCwgWydzZXJ2ZSddKTtcbiAgfVxufVxuXG5wcm9ncmFtLnBhcnNlKGFyZ3YpO1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/cli/cli.js"
      ],
      "names": [],
      "mappings": ";;;;sBAAc,QAAQ;;;;iCACN,uBAAuB;;;;uBACnB,WAAW;;;;0BACN,eAAe;;;;AAExC,IAAM,IAAI,GAAG,OAAO,CAAC,GAAG,CAAC,aAAa,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC,GAAG,OAAO,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC;AACtG,IAAM,OAAO,GAAG,yBAAY,YAAY,CAAC,CAAC;;AAE1C,OAAO,CACN,OAAO,CAAC,+BAAI,OAAO,CAAC,CACpB,WAAW,CACV,sDAAsD,GACtD,yDAAyD,CAC1D,CAAC;;;AAGF,6BAAa,OAAO,CAAC,CAAC;;AAEtB,OAAO,CACN,OAAO,CAAC,gBAAgB,CAAC,CACzB,WAAW,CAAC,qCAAqC,CAAC,CAClD,MAAM,CAAC,UAAU,OAAO,EAAE;AACzB,MAAM,GAAG,GAAG,oBAAE,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,CAAC,CAAC;AACzD,MAAI,CAAC,GAAG,EAAE,OAAO,OAAO,CAAC,KAAK,sBAAoB,OAAO,CAAG,CAAC;AAC7D,KAAG,CAAC,IAAI,EAAE,CAAC;CACZ,CAAC,CAAC;;AAEH,OAAO,CACN,OAAO,CAAC,GAAG,EAAE,IAAI,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CACpC,MAAM,CAAC,UAAU,GAAG,EAAE,OAAO,EAAE;AAC9B,SAAO,CAAC,KAAK,sBAAoB,GAAG,CAAG,CAAC;CACzC,CAAC,CAAC;;;AAGH,IAAM,UAAU,GAAG,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;;AAErE,IAAI,CAAC,UAAU,EAAE;AACf,MAAI,oBAAE,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC,CAAC,MAAM,EAAE;AAC1D,WAAO,CAAC,WAAW,EAAE,CAAC;GACvB,MAAM;AACL,QAAI,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC;GAC9B;CACF;;AAED,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC",
      "file": "/home/vio/kibana/src/cli/cli.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport pkg from '../utils/package_json';\nimport Command from './command';\nimport serveCommand from './serve/serve';\n\nconst argv = process.env.kbnWorkerArgv ? JSON.parse(process.env.kbnWorkerArgv) : process.argv.slice();\nconst program = new Command('bin/kibana');\n\nprogram\n.version(pkg.version)\n.description(\n  'Kibana is an open source (Apache Licensed), browser ' +\n  'based analytics and search dashboard for Elasticsearch.'\n);\n\n// attach commands\nserveCommand(program);\n\nprogram\n.command('help <command>')\n.description('Get the help for a specific command')\n.action(function (cmdName) {\n  const cmd = _.find(program.commands, { _name: cmdName });\n  if (!cmd) return program.error(`unknown command ${cmdName}`);\n  cmd.help();\n});\n\nprogram\n.command('*', null, { noHelp: true })\n.action(function (cmd, options) {\n  program.error(`unknown command ${cmd}`);\n});\n\n// check for no command name\nconst subCommand = argv[2] && !String(argv[2][0]).match(/^-|^\\.|\\//);\n\nif (!subCommand) {\n  if (_.intersection(argv.slice(2), ['-h', '--help']).length) {\n    program.defaultHelp();\n  } else {\n    argv.splice(2, 0, ['serve']);\n  }\n}\n\nprogram.parse(argv);\n"
      ]
    },
    "mtime": 1467036622781
  },
  "{\"filename\":\"/home/vio/kibana/src/utils/package_json.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "fs",
            "imported": [
              "existsSync"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "existsSync",
                "local": "existsSync"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "join"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "join",
                "local": "join"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _fs = require('fs');\n\nvar _path = require('path');\n\nvar packageDir = undefined;\nvar packagePath = undefined;\n\nwhile (!packagePath || !(0, _fs.existsSync)(packagePath)) {\n  var prev = packageDir;\n  packageDir = prev ? (0, _path.join)(prev, '..') : __dirname;\n  packagePath = (0, _path.join)(packageDir, 'package.json');\n\n  if (prev === packageDir) {\n    // if going up a directory doesn't work, we\n    // are already at the root of the filesystem\n    throw new Error('unable to find package.json');\n  }\n}\n\nmodule.exports = require(packagePath);\nmodule.exports.__filename = packagePath;\nmodule.exports.__dirname = packageDir;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3V0aWxzL3BhY2thZ2VfanNvbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztrQkFBMkIsSUFBSTs7b0JBQ1YsTUFBTTs7QUFFM0IsSUFBSSxVQUFVLFlBQUEsQ0FBQztBQUNmLElBQUksV0FBVyxZQUFBLENBQUM7O0FBRWhCLE9BQU8sQ0FBQyxXQUFXLElBQUksQ0FBQyxvQkFBVyxXQUFXLENBQUMsRUFBRTtBQUMvQyxNQUFJLElBQUksR0FBRyxVQUFVLENBQUM7QUFDdEIsWUFBVSxHQUFHLElBQUksR0FBRyxnQkFBSyxJQUFJLEVBQUUsSUFBSSxDQUFDLEdBQUcsU0FBUyxDQUFDO0FBQ2pELGFBQVcsR0FBRyxnQkFBSyxVQUFVLEVBQUUsY0FBYyxDQUFDLENBQUM7O0FBRS9DLE1BQUksSUFBSSxLQUFLLFVBQVUsRUFBRTs7O0FBR3ZCLFVBQU0sSUFBSSxLQUFLLENBQUMsNkJBQTZCLENBQUMsQ0FBQztHQUNoRDtDQUNGOztBQUdELE1BQU0sQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQ3RDLE1BQU0sQ0FBQyxPQUFPLENBQUMsVUFBVSxHQUFHLFdBQVcsQ0FBQztBQUN4QyxNQUFNLENBQUMsT0FBTyxDQUFDLFNBQVMsR0FBRyxVQUFVLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL2tpYmFuYS9zcmMvdXRpbHMvcGFja2FnZV9qc29uLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZXhpc3RzU3luYyB9IGZyb20gJ2ZzJztcbmltcG9ydCB7IGpvaW4gfSBmcm9tICdwYXRoJztcblxubGV0IHBhY2thZ2VEaXI7XG5sZXQgcGFja2FnZVBhdGg7XG5cbndoaWxlICghcGFja2FnZVBhdGggfHwgIWV4aXN0c1N5bmMocGFja2FnZVBhdGgpKSB7XG4gIGxldCBwcmV2ID0gcGFja2FnZURpcjtcbiAgcGFja2FnZURpciA9IHByZXYgPyBqb2luKHByZXYsICcuLicpIDogX19kaXJuYW1lO1xuICBwYWNrYWdlUGF0aCA9IGpvaW4ocGFja2FnZURpciwgJ3BhY2thZ2UuanNvbicpO1xuXG4gIGlmIChwcmV2ID09PSBwYWNrYWdlRGlyKSB7XG4gICAgLy8gaWYgZ29pbmcgdXAgYSBkaXJlY3RvcnkgZG9lc24ndCB3b3JrLCB3ZVxuICAgIC8vIGFyZSBhbHJlYWR5IGF0IHRoZSByb290IG9mIHRoZSBmaWxlc3lzdGVtXG4gICAgdGhyb3cgbmV3IEVycm9yKCd1bmFibGUgdG8gZmluZCBwYWNrYWdlLmpzb24nKTtcbiAgfVxufVxuXG5cbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShwYWNrYWdlUGF0aCk7XG5tb2R1bGUuZXhwb3J0cy5fX2ZpbGVuYW1lID0gcGFja2FnZVBhdGg7XG5tb2R1bGUuZXhwb3J0cy5fX2Rpcm5hbWUgPSBwYWNrYWdlRGlyO1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/utils/package_json.js"
      ],
      "names": [],
      "mappings": ";;kBAA2B,IAAI;;oBACV,MAAM;;AAE3B,IAAI,UAAU,YAAA,CAAC;AACf,IAAI,WAAW,YAAA,CAAC;;AAEhB,OAAO,CAAC,WAAW,IAAI,CAAC,oBAAW,WAAW,CAAC,EAAE;AAC/C,MAAI,IAAI,GAAG,UAAU,CAAC;AACtB,YAAU,GAAG,IAAI,GAAG,gBAAK,IAAI,EAAE,IAAI,CAAC,GAAG,SAAS,CAAC;AACjD,aAAW,GAAG,gBAAK,UAAU,EAAE,cAAc,CAAC,CAAC;;AAE/C,MAAI,IAAI,KAAK,UAAU,EAAE;;;AAGvB,UAAM,IAAI,KAAK,CAAC,6BAA6B,CAAC,CAAC;GAChD;CACF;;AAGD,MAAM,CAAC,OAAO,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC;AACtC,MAAM,CAAC,OAAO,CAAC,UAAU,GAAG,WAAW,CAAC;AACxC,MAAM,CAAC,OAAO,CAAC,SAAS,GAAG,UAAU,CAAC",
      "file": "/home/vio/kibana/src/utils/package_json.js",
      "sourcesContent": [
        "import { existsSync } from 'fs';\nimport { join } from 'path';\n\nlet packageDir;\nlet packagePath;\n\nwhile (!packagePath || !existsSync(packagePath)) {\n  let prev = packageDir;\n  packageDir = prev ? join(prev, '..') : __dirname;\n  packagePath = join(packageDir, 'package.json');\n\n  if (prev === packageDir) {\n    // if going up a directory doesn't work, we\n    // are already at the root of the filesystem\n    throw new Error('unable to find package.json');\n  }\n}\n\n\nmodule.exports = require(packagePath);\nmodule.exports.__filename = packagePath;\nmodule.exports.__dirname = packageDir;\n"
      ]
    },
    "mtime": 1467036622893
  },
  "{\"filename\":\"/home/vio/kibana/src/cli/command.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "./help",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "help"
              }
            ]
          },
          {
            "source": "commander",
            "imported": [
              "Command"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Command",
                "local": "Command"
              }
            ]
          },
          {
            "source": "./color",
            "imported": [
              "red"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "red",
                "local": "red"
              }
            ]
          },
          {
            "source": "./color",
            "imported": [
              "yellow"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "yellow",
                "local": "yellow"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _help = require('./help');\n\nvar _help2 = _interopRequireDefault(_help);\n\nvar _commander = require('commander');\n\nvar _color = require('./color');\n\n_commander.Command.prototype.error = function (err) {\n  if (err && err.message) err = err.message;\n\n  console.log('\\n' + (0, _color.red)(' ERROR ') + ' ' + err + '\\n\\n' + (0, _help2['default'])(this, '  ') + '\\n');\n\n  process.exit(64); // eslint-disable-line no-process-exit\n};\n\n_commander.Command.prototype.defaultHelp = function () {\n  console.log('\\n' + (0, _help2['default'])(this, '  ') + '\\n\\n');\n\n  process.exit(64); // eslint-disable-line no-process-exit\n};\n\n_commander.Command.prototype.unknownArgv = function (argv) {\n  if (argv) this.__unknownArgv = argv;\n  return this.__unknownArgv ? this.__unknownArgv.slice(0) : [];\n};\n\n/**\n * setup the command to accept arbitrary configuration via the cli\n * @return {[type]} [description]\n */\n_commander.Command.prototype.collectUnknownOptions = function () {\n  var title = 'Extra ' + this._name + ' options';\n\n  this.allowUnknownOption();\n  this.getUnknownOptions = function () {\n    var opts = {};\n    var unknowns = this.unknownArgv();\n\n    while (unknowns.length) {\n      var opt = unknowns.shift().split('=');\n      if (opt[0].slice(0, 2) !== '--') {\n        this.error(title + ' \"' + opt[0] + '\" must start with \"--\"');\n      }\n\n      if (opt.length === 1) {\n        if (!unknowns.length || unknowns[0][0] === '-') {\n          this.error(title + ' \"' + opt[0] + '\" must have a value');\n        }\n\n        opt.push(unknowns.shift());\n      }\n\n      var val = opt[1];\n      try {\n        val = JSON.parse(opt[1]);\n      } catch (e) {\n        val = opt[1];\n      }\n\n      _lodash2['default'].set(opts, opt[0].slice(2), val);\n    }\n\n    return opts;\n  };\n\n  return this;\n};\n\n_commander.Command.prototype.parseOptions = _lodash2['default'].wrap(_commander.Command.prototype.parseOptions, function (parse, argv) {\n  var opts = parse.call(this, argv);\n  this.unknownArgv(opts.unknown);\n  return opts;\n});\n\n_commander.Command.prototype.action = _lodash2['default'].wrap(_commander.Command.prototype.action, function (action, fn) {\n  return action.call(this, function () {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var ret = fn.apply(this, args);\n    if (ret && typeof ret.then === 'function') {\n      ret.then(null, function (e) {\n        console.log('FATAL CLI ERROR', e.stack);\n        process.exit(1);\n      });\n    }\n  });\n});\n\nmodule.exports = _commander.Command;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL2NsaS9jb21tYW5kLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7c0JBQWMsUUFBUTs7OztvQkFFTCxRQUFROzs7O3lCQUNELFdBQVc7O3FCQUNmLFNBQVM7O0FBRzdCLG1CQUFRLFNBQVMsQ0FBQyxLQUFLLEdBQUcsVUFBVSxHQUFHLEVBQUU7QUFDdkMsTUFBSSxHQUFHLElBQUksR0FBRyxDQUFDLE9BQU8sRUFBRSxHQUFHLEdBQUcsR0FBRyxDQUFDLE9BQU8sQ0FBQzs7QUFFMUMsU0FBTyxDQUFDLEdBQUcsUUFFWCxnQkFBSSxTQUFTLENBQUMsU0FBSSxHQUFHLFlBRXJCLHVCQUFLLElBQUksRUFBRSxJQUFJLENBQUMsUUFFZixDQUFDOztBQUVGLFNBQU8sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7Q0FDbEIsQ0FBQzs7QUFFRixtQkFBUSxTQUFTLENBQUMsV0FBVyxHQUFHLFlBQVk7QUFDMUMsU0FBTyxDQUFDLEdBQUcsUUFFWCx1QkFBSyxJQUFJLEVBQUUsSUFBSSxDQUFDLFVBR2YsQ0FBQzs7QUFFRixTQUFPLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0NBQ2xCLENBQUM7O0FBRUYsbUJBQVEsU0FBUyxDQUFDLFdBQVcsR0FBRyxVQUFVLElBQUksRUFBRTtBQUM5QyxNQUFJLElBQUksRUFBRSxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQztBQUNwQyxTQUFPLElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO0NBQzlELENBQUM7Ozs7OztBQU1GLG1CQUFRLFNBQVMsQ0FBQyxxQkFBcUIsR0FBRyxZQUFZO0FBQ3BELE1BQUksS0FBSyxjQUFZLElBQUksQ0FBQyxLQUFLLGFBQVUsQ0FBQzs7QUFFMUMsTUFBSSxDQUFDLGtCQUFrQixFQUFFLENBQUM7QUFDMUIsTUFBSSxDQUFDLGlCQUFpQixH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Q29udGVudCI6WyJpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQgaGVscCBmcm9tICcuL2hlbHAnO1xuaW1wb3J0IHsgQ29tbWFuZCB9IGZyb20gJ2NvbW1hbmRlcic7XG5pbXBvcnQgeyByZWQgfSBmcm9tICcuL2NvbG9yJztcbmltcG9ydCB7IHllbGxvdyB9IGZyb20gJy4vY29sb3InO1xuXG5Db21tYW5kLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgaWYgKGVyciAmJiBlcnIubWVzc2FnZSkgZXJyID0gZXJyLm1lc3NhZ2U7XG5cbiAgY29uc29sZS5sb2coXG5gXG4ke3JlZCgnIEVSUk9SICcpfSAke2Vycn1cblxuJHtoZWxwKHRoaXMsICcgICcpfVxuYFxuICApO1xuXG4gIHByb2Nlc3MuZXhpdCg2NCk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcHJvY2Vzcy1leGl0XG59O1xuXG5Db21tYW5kLnByb3RvdHlwZS5kZWZhdWx0SGVscCA9IGZ1bmN0aW9uICgpIHtcbiAgY29uc29sZS5sb2coXG5gXG4ke2hlbHAodGhpcywgJyAgJyl9XG5cbmBcbiAgKTtcblxuICBwcm9jZXNzLmV4aXQoNjQpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXByb2Nlc3MtZXhpdFxufTtcblxuQ29tbWFuZC5wcm90b3R5cGUudW5rbm93bkFyZ3YgPSBmdW5jdGlvbiAoYXJndikge1xuICBpZiAoYXJndikgdGhpcy5fX3Vua25vd25Bcmd2ID0gYXJndjtcbiAgcmV0dXJuIHRoaXMuX191bmtub3duQXJndiA/IHRoaXMuX191bmtub3duQXJndi5zbGljZSgwKSA6IFtdO1xufTtcblxuLyoqXG4gKiBzZXR1cCB0aGUgY29tbWFuZCB0byBhY2NlcHQgYXJiaXRyYXJ5IGNvbmZpZ3VyYXRpb24gdmlhIHRoZSBjbGlcbiAqIEByZXR1cm4ge1t0eXBlXX0gW2Rlc2NyaXB0aW9uXVxuICovXG5Db21tYW5kLnByb3RvdHlwZS5jb2xsZWN0VW5rbm93bk9wdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gIGxldCB0aXRsZSA9IGBFeHRyYSAke3RoaXMuX25hbWV9IG9wdGlvbnNgO1xuXG4gIHRoaXMuYWxsb3dVbmtub3duT3B0aW9uKCk7XG4gIHRoaXMuZ2V0VW5rbm93bk9wdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgbGV0IG9wdHMgPSB7fTtcbiAgICBsZXQgdW5rbm93bnMgPSB0aGlzLnVua25vd25Bcmd2KCk7XG5cbiAgICB3aGlsZSAodW5rbm93bnMubGVuZ3RoKSB7XG4gICAgICBsZXQgb3B0ID0gdW5rbm93bnMuc2hpZnQoKS5zcGxpdCgnPScpO1xuICAgICAgaWYgKG9wdFswXS5zbGljZSgwLCAyKSAhPT0gJy0tJykge1xuICAgICAgICB0aGlzLmVycm9yKGAke3RpdGxlfSBcIiR7b3B0WzBdfVwiIG11c3Qgc3RhcnQgd2l0aCBcIi0tXCJgKTtcbiAgICAgIH1cblxuICAgICAgaWYgKG9wdC5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgaWYgKCF1bmtub3ducy5sZW5ndGggfHwgdW5rbm93bnNbMF1bMF0gPT09ICctJykge1xuICAgICAgICAgIHRoaXMuZXJyb3IoYCR7dGl0bGV9IFwiJHtvcHRbMF19XCIgbXVzdCBoYXZlIGEgdmFsdWVgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG9wdC5wdXNoKHVua25vd25zLnNoaWZ0KCkpO1xuICAgICAgfVxuXG4gICAgICBsZXQgdmFsID0gb3B0WzFdO1xuICAgICAgdHJ5IHsgdmFsID0gSlNPTi5wYXJzZShvcHRbMV0pOyB9XG4gICAgICBjYXRjaCAoZSkgeyB2YWwgPSBvcHRbMV07IH1cblxuICAgICAgXy5zZXQob3B0cywgb3B0WzBdLnNsaWNlKDIpLCB2YWwpO1xuICAgIH1cblxuICAgIHJldHVybiBvcHRzO1xuICB9O1xuXG4gIHJldHVybiB0aGlzO1xufTtcblxuQ29tbWFuZC5wcm90b3R5cGUucGFyc2VPcHRpb25zID0gXy53cmFwKENvbW1hbmQucHJvdG90eXBlLnBhcnNlT3B0aW9ucywgZnVuY3Rpb24gKHBhcnNlLCBhcmd2KSB7XG4gIGxldCBvcHRzID0gcGFyc2UuY2FsbCh0aGlzLCBhcmd2KTtcbiAgdGhpcy51bmtub3duQXJndihvcHRzLnVua25vd24pO1xuICByZXR1cm4gb3B0cztcbn0pO1xuXG5Db21tYW5kLnByb3RvdHlwZS5hY3Rpb24gPSBfLndyYXAoQ29tbWFuZC5wcm90b3R5cGUuYWN0aW9uLCBmdW5jdGlvbiAoYWN0aW9uLCBmbikge1xuICByZXR1cm4gYWN0aW9uLmNhbGwodGhpcywgZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICBsZXQgcmV0ID0gZm4uYXBwbHkodGhpcywgYXJncyk7XG4gICAgaWYgKHJldCAmJiB0eXBlb2YgcmV0LnRoZW4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJldC50aGVuKG51bGwsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdGQVRBTMKgQ0xJIEVSUk9SJywgZS5zdGFjayk7XG4gICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBDb21tYW5kO1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/cli/command.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/kibana/src/cli/command.js",
      "sourcesContent": [
        "import _ from 'lodash';\n\nimport help from './help';\nimport { Command } from 'commander';\nimport { red } from './color';\nimport { yellow } from './color';\n\nCommand.prototype.error = function (err) {\n  if (err && err.message) err = err.message;\n\n  console.log(\n`\n${red(' ERROR ')} ${err}\n\n${help(this, '  ')}\n`\n  );\n\n  process.exit(64); // eslint-disable-line no-process-exit\n};\n\nCommand.prototype.defaultHelp = function () {\n  console.log(\n`\n${help(this, '  ')}\n\n`\n  );\n\n  process.exit(64); // eslint-disable-line no-process-exit\n};\n\nCommand.prototype.unknownArgv = function (argv) {\n  if (argv) this.__unknownArgv = argv;\n  return this.__unknownArgv ? this.__unknownArgv.slice(0) : [];\n};\n\n/**\n * setup the command to accept arbitrary configuration via the cli\n * @return {[type]} [description]\n */\nCommand.prototype.collectUnknownOptions = function () {\n  let title = `Extra ${this._name} options`;\n\n  this.allowUnknownOption();\n  this.getUnknownOptions = function () {\n    let opts = {};\n    let unknowns = this.unknownArgv();\n\n    while (unknowns.length) {\n      let opt = unknowns.shift().split('=');\n      if (opt[0].slice(0, 2) !== '--') {\n        this.error(`${title} \"${opt[0]}\" must start with \"--\"`);\n      }\n\n      if (opt.length === 1) {\n        if (!unknowns.length || unknowns[0][0] === '-') {\n          this.error(`${title} \"${opt[0]}\" must have a value`);\n        }\n\n        opt.push(unknowns.shift());\n      }\n\n      let val = opt[1];\n      try { val = JSON.parse(opt[1]); }\n      catch (e) { val = opt[1]; }\n\n      _.set(opts, opt[0].slice(2), val);\n    }\n\n    return opts;\n  };\n\n  return this;\n};\n\nCommand.prototype.parseOptions = _.wrap(Command.prototype.parseOptions, function (parse, argv) {\n  let opts = parse.call(this, argv);\n  this.unknownArgv(opts.unknown);\n  return opts;\n});\n\nCommand.prototype.action = _.wrap(Command.prototype.action, function (action, fn) {\n  return action.call(this, function (...args) {\n    let ret = fn.apply(this, args);\n    if (ret && typeof ret.then === 'function') {\n      ret.then(null, function (e) {\n        console.log('FATAL CLI ERROR', e.stack);\n        process.exit(1);\n      });\n    }\n  });\n});\n\nmodule.exports = Command;\n"
      ]
    },
    "mtime": 1467036622785
  },
  "{\"filename\":\"/home/vio/kibana/src/cli/help.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nmodule.exports = function (command, spaces) {\n  if (!_lodash2['default'].size(command.commands)) {\n    return command.outputHelp();\n  }\n\n  var defCmd = _lodash2['default'].find(command.commands, function (cmd) {\n    return cmd._name === 'serve';\n  });\n\n  var desc = !command.description() ? '' : command.description();\n  var cmdDef = !defCmd ? '' : '=' + defCmd._name;\n\n  return ('\\nUsage: ' + command._name + ' [command' + cmdDef + '] [options]\\n\\n' + desc + '\\n\\nCommands:\\n' + indent(commandsSummary(command), 2) + '\\n\\n' + cmdHelp(defCmd) + '\\n').trim().replace(/^/gm, spaces || '');\n};\n\nfunction indent(str, n) {\n  return String(str || '').trim().replace(/^/gm, _lodash2['default'].repeat(' ', n));\n}\n\nfunction commandsSummary(program) {\n  var cmds = _lodash2['default'].compact(program.commands.map(function (cmd) {\n    var name = cmd._name;\n    if (name === '*') return;\n    var opts = cmd.options.length ? ' [options]' : '';\n    var args = cmd._args.map(function (arg) {\n      return humanReadableArgName(arg);\n    }).join(' ');\n\n    return [name + ' ' + opts + ' ' + args, cmd.description()];\n  }));\n\n  var cmdLColWidth = cmds.reduce(function (width, cmd) {\n    return Math.max(width, cmd[0].length);\n  }, 0);\n\n  return cmds.reduce(function (help, cmd) {\n    return '' + (help || '') + _lodash2['default'].padRight(cmd[0], cmdLColWidth) + ' ' + (cmd[1] || '') + '\\n';\n  }, '');\n}\n\nfunction cmdHelp(cmd) {\n  if (!cmd) return '';\n  return ('\\n\"' + cmd._name + '\" Options:\\n\\n' + indent(cmd.optionHelp(), 2) + '\\n').trim();\n}\n\nfunction humanReadableArgName(arg) {\n  var nameOutput = arg.name + (arg.variadic === true ? '...' : '');\n  return arg.required ? '<' + nameOutput + '>' : '[' + nameOutput + ']';\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL2NsaS9oZWxwLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7c0JBQWMsUUFBUTs7OztBQUV0QixNQUFNLENBQUMsT0FBTyxHQUFHLFVBQVUsT0FBTyxFQUFFLE1BQU0sRUFBRTtBQUMxQyxNQUFJLENBQUMsb0JBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsRUFBRTtBQUM3QixXQUFPLE9BQU8sQ0FBQyxVQUFVLEVBQUUsQ0FBQztHQUM3Qjs7QUFFRCxNQUFJLE1BQU0sR0FBRyxvQkFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRSxVQUFVLEdBQUcsRUFBRTtBQUNuRCxXQUFPLEdBQUcsQ0FBQyxLQUFLLEtBQUssT0FBTyxDQUFDO0dBQzlCLENBQUMsQ0FBQzs7QUFFSCxNQUFJLElBQUksR0FBRyxDQUFDLE9BQU8sQ0FBQyxXQUFXLEVBQUUsR0FBRyxFQUFFLEdBQUcsT0FBTyxDQUFDLFdBQVcsRUFBRSxDQUFDO0FBQy9ELE1BQUksTUFBTSxHQUFHLENBQUMsTUFBTSxHQUFHLEVBQUUsU0FBTyxNQUFNLENBQUMsS0FBSyxBQUFFLENBQUM7O0FBRS9DLFNBQU8sZUFFQSxPQUFPLENBQUMsS0FBSyxpQkFBWSxNQUFNLHVCQUV0QyxJQUFJLHVCQUdKLE1BQU0sQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDLFlBRW5DLE9BQU8sQ0FBQyxNQUFNLENBQUMsU0FFYixJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLE1BQU0sSUFBSSxFQUFFLENBQUMsQ0FBQztDQUN2QyxDQUFDOztBQUVGLFNBQVMsTUFBTSxDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUU7QUFDdEIsU0FBTyxNQUFNLENBQUMsR0FBRyxJQUFJLEVBQUUsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsb0JBQUUsTUFBTSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0NBQ2xFOztBQUVELFNBQVMsZUFBZSxDQUFDLE9BQU8sRUFBRTtBQUNoQyxNQUFJLElBQUksR0FBRyxvQkFBRSxPQUFPLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsVUFBVSxHQUFHLEVBQUU7QUFDdkQsUUFBSSxJQUFJLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQztBQUNyQixRQUFJLElBQUksS0FBSyxHQUFHLEVBQUUsT0FBTztBQUN6QixRQUFJLElBQUksR0FBRyxHQUFHLENBQUMsT0FBTyxDQUFDLE1BQU0sR0FBRyxZQUFZLEdBQUcsRUFBRSxDQUFDO0FBQ2xELFFBQUksSUFBSSxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLFVBQVUsR0FBRyxFQUFFO0FBQ3RDLGFBQU8sb0JBQW9CLENBQUMsR0FBRyxDQUFDLENBQUM7S0FDbEMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQzs7QUFFYixXQUFPLENBQ0YsSUFBSSxTQUFJLElBQUksU0FBSSxJQUFJLEVBQ3ZCLEdBQUcsQ0FBQyxXQUFXLEVBQUUsQ0FDbEIsQ0FBQztHQUNILENBQUMsQ0FBQyxDQUFDOztBQUVKLE1BQUksWUFBWSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsVUFBVSxLQUFLLEVBQUUsR0FBRyxFQUFFO0FBQ25ELFdBQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0dBQ3ZDLEVBQUUsQ0FBQyxDQUFDLENBQUM7O0FBRU4sU0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLFVBQVUsSUFBSSxFQUFFLEdBQUcsRUFBRTtBQUN0QyxpQkFBVSxJQUFJLElBQUksRUFBRSxDQUFBLEdBQUcsb0JBQUUsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxZQUFZLENBQUMsVUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFBLFFBQUs7R0FDN0UsRUFBRSxFQUFFLENBQUMsQ0FBQztDQUNSOztBQUVELFNBQVMsT0FBTyxDQUFDLEdBQUcsRUFBRTtBQUNwQixNQUFJLENBQUMsR0FBRyxFQUFFLE9BQU8sRUFBRSxDQUFDO0FBQ3BCLFNBQU8sU0FHTixHQUFHLENBQUMsS0FBSyxzQkFFVixNQUFNLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBRSxFQUFFLENBQUMsQ0FBQyxTQUd6QixJQUFJLEVBQUUsQ0FBQztDQUVWOztBQUVELFNBQVMsb0JBQW9CLENBQUMsR0FBRyxFQUFFO0FBQ2pDLE1BQUksVUFBVSxHQUFHLEdBQUcsQ0FBQyxJQUFJLElBQUksR0FBRyxDQUFDLFFBQVEsS0FBSyxJQUFJLEdBQUcsS0FBSyxHQUFHLEVBQUUsQ0FBQSxBQUFDLENBQUM7QUFDakUsU0FBTyxHQUFHLENBQUMsUUFBUSxHQUFHLEdBQUcsR0FBRyxVQUFVLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxVQUFVLEdBQUcsR0FBRyxDQUFDO0NBQ3ZFIiwiZmlsZSI6Ii9ob21lL3Zpby9raWJhbmEvc3JjL2NsaS9oZWxwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY29tbWFuZCwgc3BhY2VzKSB7XG4gIGlmICghXy5zaXplKGNvbW1hbmQuY29tbWFuZHMpKSB7XG4gICAgcmV0dXJuIGNvbW1hbmQub3V0cHV0SGVscCgpO1xuICB9XG5cbiAgbGV0IGRlZkNtZCA9IF8uZmluZChjb21tYW5kLmNvbW1hbmRzLCBmdW5jdGlvbiAoY21kKSB7XG4gICAgcmV0dXJuIGNtZC5fbmFtZSA9PT0gJ3NlcnZlJztcbiAgfSk7XG5cbiAgbGV0IGRlc2MgPSAhY29tbWFuZC5kZXNjcmlwdGlvbigpID8gJycgOiBjb21tYW5kLmRlc2NyaXB0aW9uKCk7XG4gIGxldCBjbWREZWYgPSAhZGVmQ21kID8gJycgOiBgPSR7ZGVmQ21kLl9uYW1lfWA7XG5cbiAgcmV0dXJuIChcbmBcblVzYWdlOiAke2NvbW1hbmQuX25hbWV9IFtjb21tYW5kJHtjbWREZWZ9XSBbb3B0aW9uc11cblxuJHtkZXNjfVxuXG5Db21tYW5kczpcbiR7aW5kZW50KGNvbW1hbmRzU3VtbWFyeShjb21tYW5kKSwgMil9XG5cbiR7Y21kSGVscChkZWZDbWQpfVxuYFxuICApLnRyaW0oKS5yZXBsYWNlKC9eL2dtLCBzcGFjZXMgfHwgJycpO1xufTtcblxuZnVuY3Rpb24gaW5kZW50KHN0ciwgbikge1xuICByZXR1cm4gU3RyaW5nKHN0ciB8fCAnJykudHJpbSgpLnJlcGxhY2UoL14vZ20sIF8ucmVwZWF0KCcgJywgbikpO1xufVxuXG5mdW5jdGlvbiBjb21tYW5kc1N1bW1hcnkocHJvZ3JhbSkge1xuICBsZXQgY21kcyA9IF8uY29tcGFjdChwcm9ncmFtLmNvbW1hbmRzLm1hcChmdW5jdGlvbiAoY21kKSB7XG4gICAgbGV0IG5hbWUgPSBjbWQuX25hbWU7XG4gICAgaWYgKG5hbWUgPT09ICcqJykgcmV0dXJuO1xuICAgIGxldCBvcHRzID0gY21kLm9wdGlvbnMubGVuZ3RoID8gJyBbb3B0aW9uc10nIDogJyc7XG4gICAgbGV0IGFyZ3MgPSBjbWQuX2FyZ3MubWFwKGZ1bmN0aW9uIChhcmcpIHtcbiAgICAgIHJldHVybiBodW1hblJlYWRhYmxlQXJnTmFtZShhcmcpO1xuICAgIH0pLmpvaW4oJyAnKTtcblxuICAgIHJldHVybiBbXG4gICAgICBgJHtuYW1lfSAke29wdHN9ICR7YXJnc31gLFxuICAgICAgY21kLmRlc2NyaXB0aW9uKClcbiAgICBdO1xuICB9KSk7XG5cbiAgbGV0IGNtZExDb2xXaWR0aCA9IGNtZHMucmVkdWNlKGZ1bmN0aW9uICh3aWR0aCwgY21kKSB7XG4gICAgcmV0dXJuIE1hdGgubWF4KHdpZHRoLCBjbWRbMF0ubGVuZ3RoKTtcbiAgfSwgMCk7XG5cbiAgcmV0dXJuIGNtZHMucmVkdWNlKGZ1bmN0aW9uIChoZWxwLCBjbWQpIHtcbiAgICByZXR1cm4gYCR7aGVscCB8fCAnJ30ke18ucGFkUmlnaHQoY21kWzBdLCBjbWRMQ29sV2lkdGgpfSAke2NtZFsxXSB8fCAnJ31cXG5gO1xuICB9LCAnJyk7XG59XG5cbmZ1bmN0aW9uIGNtZEhlbHAoY21kKSB7XG4gIGlmICghY21kKSByZXR1cm4gJyc7XG4gIHJldHVybiAoXG5cbmBcblwiJHtjbWQuX25hbWV9XCIgT3B0aW9uczpcblxuJHtpbmRlbnQoY21kLm9wdGlvbkhlbHAoKSwgMil9XG5gXG5cbiAgKS50cmltKCk7XG5cbn1cblxuZnVuY3Rpb24gaHVtYW5SZWFkYWJsZUFyZ05hbWUoYXJnKSB7XG4gIGxldCBuYW1lT3V0cHV0ID0gYXJnLm5hbWUgKyAoYXJnLnZhcmlhZGljID09PSB0cnVlID8gJy4uLicgOiAnJyk7XG4gIHJldHVybiBhcmcucmVxdWlyZWQgPyAnPCcgKyBuYW1lT3V0cHV0ICsgJz4nIDogJ1snICsgbmFtZU91dHB1dCArICddJztcbn1cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/cli/help.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/kibana/src/cli/help.js",
      "sourcesContent": [
        "import _ from 'lodash';\n\nmodule.exports = function (command, spaces) {\n  if (!_.size(command.commands)) {\n    return command.outputHelp();\n  }\n\n  let defCmd = _.find(command.commands, function (cmd) {\n    return cmd._name === 'serve';\n  });\n\n  let desc = !command.description() ? '' : command.description();\n  let cmdDef = !defCmd ? '' : `=${defCmd._name}`;\n\n  return (\n`\nUsage: ${command._name} [command${cmdDef}] [options]\n\n${desc}\n\nCommands:\n${indent(commandsSummary(command), 2)}\n\n${cmdHelp(defCmd)}\n`\n  ).trim().replace(/^/gm, spaces || '');\n};\n\nfunction indent(str, n) {\n  return String(str || '').trim().replace(/^/gm, _.repeat(' ', n));\n}\n\nfunction commandsSummary(program) {\n  let cmds = _.compact(program.commands.map(function (cmd) {\n    let name = cmd._name;\n    if (name === '*') return;\n    let opts = cmd.options.length ? ' [options]' : '';\n    let args = cmd._args.map(function (arg) {\n      return humanReadableArgName(arg);\n    }).join(' ');\n\n    return [\n      `${name} ${opts} ${args}`,\n      cmd.description()\n    ];\n  }));\n\n  let cmdLColWidth = cmds.reduce(function (width, cmd) {\n    return Math.max(width, cmd[0].length);\n  }, 0);\n\n  return cmds.reduce(function (help, cmd) {\n    return `${help || ''}${_.padRight(cmd[0], cmdLColWidth)} ${cmd[1] || ''}\\n`;\n  }, '');\n}\n\nfunction cmdHelp(cmd) {\n  if (!cmd) return '';\n  return (\n\n`\n\"${cmd._name}\" Options:\n\n${indent(cmd.optionHelp(), 2)}\n`\n\n  ).trim();\n\n}\n\nfunction humanReadableArgName(arg) {\n  let nameOutput = arg.name + (arg.variadic === true ? '...' : '');\n  return arg.required ? '<' + nameOutput + '>' : '[' + nameOutput + ']';\n}\n"
      ]
    },
    "mtime": 1467036622785
  },
  "{\"filename\":\"/home/vio/kibana/src/cli/color.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "ansicolors",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "ansicolors"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _ansicolors = require('ansicolors');\n\nvar _ansicolors2 = _interopRequireDefault(_ansicolors);\n\nexports.green = _lodash2['default'].flow(_ansicolors2['default'].black, _ansicolors2['default'].bgGreen);\nexports.red = _lodash2['default'].flow(_ansicolors2['default'].white, _ansicolors2['default'].bgRed);\nexports.yellow = _lodash2['default'].flow(_ansicolors2['default'].black, _ansicolors2['default'].bgYellow);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL2NsaS9jb2xvci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O3NCQUNjLFFBQVE7Ozs7MEJBQ0MsWUFBWTs7OztBQUVuQyxPQUFPLENBQUMsS0FBSyxHQUFHLG9CQUFFLElBQUksQ0FBQyx3QkFBVyxLQUFLLEVBQUUsd0JBQVcsT0FBTyxDQUFDLENBQUM7QUFDN0QsT0FBTyxDQUFDLEdBQUcsR0FBRyxvQkFBRSxJQUFJLENBQUMsd0JBQVcsS0FBSyxFQUFFLHdCQUFXLEtBQUssQ0FBQyxDQUFDO0FBQ3pELE9BQU8sQ0FBQyxNQUFNLEdBQUcsb0JBQUUsSUFBSSxDQUFDLHdCQUFXLEtBQUssRUFBRSx3QkFBVyxRQUFRLENBQUMsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8va2liYW5hL3NyYy9jbGkvY29sb3IuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgYW5zaWNvbG9ycyBmcm9tICdhbnNpY29sb3JzJztcblxuZXhwb3J0cy5ncmVlbiA9IF8uZmxvdyhhbnNpY29sb3JzLmJsYWNrLCBhbnNpY29sb3JzLmJnR3JlZW4pO1xuZXhwb3J0cy5yZWQgPSBfLmZsb3coYW5zaWNvbG9ycy53aGl0ZSwgYW5zaWNvbG9ycy5iZ1JlZCk7XG5leHBvcnRzLnllbGxvdyA9IF8uZmxvdyhhbnNpY29sb3JzLmJsYWNrLCBhbnNpY29sb3JzLmJnWWVsbG93KTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/cli/color.js"
      ],
      "names": [],
      "mappings": ";;;;sBACc,QAAQ;;;;0BACC,YAAY;;;;AAEnC,OAAO,CAAC,KAAK,GAAG,oBAAE,IAAI,CAAC,wBAAW,KAAK,EAAE,wBAAW,OAAO,CAAC,CAAC;AAC7D,OAAO,CAAC,GAAG,GAAG,oBAAE,IAAI,CAAC,wBAAW,KAAK,EAAE,wBAAW,KAAK,CAAC,CAAC;AACzD,OAAO,CAAC,MAAM,GAAG,oBAAE,IAAI,CAAC,wBAAW,KAAK,EAAE,wBAAW,QAAQ,CAAC,CAAC",
      "file": "/home/vio/kibana/src/cli/color.js",
      "sourcesContent": [
        "\nimport _ from 'lodash';\nimport ansicolors from 'ansicolors';\n\nexports.green = _.flow(ansicolors.black, ansicolors.bgGreen);\nexports.red = _.flow(ansicolors.white, ansicolors.bgRed);\nexports.yellow = _.flow(ansicolors.black, ansicolors.bgYellow);\n"
      ]
    },
    "mtime": 1467036622785
  },
  "{\"filename\":\"/home/vio/kibana/src/cli/serve/serve.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "fs",
            "imported": [
              "statSync"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "statSync",
                "local": "statSync"
              }
            ]
          },
          {
            "source": "cluster",
            "imported": [
              "isWorker"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "isWorker",
                "local": "isWorker"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "resolve"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "resolve",
                "local": "resolve"
              }
            ]
          },
          {
            "source": "../../utils",
            "imported": [
              "fromRoot"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "fromRoot",
                "local": "fromRoot"
              }
            ]
          },
          {
            "source": "../../server/path",
            "imported": [
              "getConfig"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "getConfig",
                "local": "getConfig"
              }
            ]
          },
          {
            "source": "./read_yaml_config",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "readYamlConfig"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "async-to-generator",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _fs = require('fs');\n\nvar _cluster = require('cluster');\n\nvar _path = require('path');\n\nvar _utils = require('../../utils');\n\nvar _serverPath = require('../../server/path');\n\nvar _read_yaml_config = require('./read_yaml_config');\n\nvar _read_yaml_config2 = _interopRequireDefault(_read_yaml_config);\n\nvar canCluster = undefined;\ntry {\n  require.resolve('../cluster/cluster_manager');\n  canCluster = true;\n} catch (e) {\n  canCluster = false;\n}\n\nvar pathCollector = function pathCollector() {\n  var paths = [];\n  return function (path) {\n    paths.push((0, _path.resolve)(process.cwd(), path));\n    return paths;\n  };\n};\n\nvar configPathCollector = pathCollector();\nvar pluginDirCollector = pathCollector();\nvar pluginPathCollector = pathCollector();\n\nfunction readServerSettings(opts, extraCliOptions) {\n  var settings = (0, _read_yaml_config2['default'])(opts.config);\n  var set = _lodash2['default'].partial(_lodash2['default'].set, settings);\n  var get = _lodash2['default'].partial(_lodash2['default'].get, settings);\n  var has = _lodash2['default'].partial(_lodash2['default'].has, settings);\n  var merge = _lodash2['default'].partial(_lodash2['default'].merge, settings);\n\n  if (opts.dev) {\n    set('env', 'development');\n    set('optimize.lazy', true);\n    if (opts.ssl && !has('server.ssl.cert') && !has('server.ssl.key')) {\n      set('server.host', 'localhost');\n      set('server.ssl.cert', (0, _utils.fromRoot)('test/dev_certs/server.crt'));\n      set('server.ssl.key', (0, _utils.fromRoot)('test/dev_certs/server.key'));\n    }\n  }\n\n  if (opts.elasticsearch) set('elasticsearch.url', opts.elasticsearch);\n  if (opts.port) set('server.port', opts.port);\n  if (opts.host) set('server.host', opts.host);\n  if (opts.quiet) set('logging.quiet', true);\n  if (opts.silent) set('logging.silent', true);\n  if (opts.verbose) set('logging.verbose', true);\n  if (opts.logFile) set('logging.dest', opts.logFile);\n\n  set('plugins.scanDirs', _lodash2['default'].compact([].concat(get('plugins.scanDirs'), opts.pluginDir)));\n\n  set('plugins.paths', _lodash2['default'].compact([].concat(get('plugins.paths'), opts.pluginPath)));\n\n  merge(extraCliOptions);\n\n  return settings;\n}\n\nmodule.exports = function (program) {\n  var command = program.command('serve');\n\n  command.description('Run the kibana server').collectUnknownOptions().option('-e, --elasticsearch <uri>', 'Elasticsearch instance').option('-c, --config <path>', 'Path to the config file, can be changed with the CONFIG_PATH environment variable as well. ' + 'Use mulitple --config args to include multiple config files.', configPathCollector, [(0, _serverPath.getConfig)()]).option('-p, --port <port>', 'The port to bind to', parseInt).option('-q, --quiet', 'Prevent all logging except errors').option('-Q, --silent', 'Prevent all logging').option('--verbose', 'Turns on verbose logging').option('-H, --host <host>', 'The host to bind to').option('-l, --log-file <path>', 'The file to log to').option('--plugin-dir <path>', 'A path to scan for plugins, this can be specified multiple ' + 'times to specify multiple directories', pluginDirCollector, [(0, _utils.fromRoot)('installedPlugins'), (0, _utils.fromRoot)('src/plugins')]).option('--plugin-path <path>', 'A path to a plugin which should be included by the server, ' + 'this can be specified multiple times to specify multiple paths', pluginPathCollector, []).option('--plugins <path>', 'an alias for --plugin-dir', pluginDirCollector);\n\n  if (canCluster) {\n    command.option('--dev', 'Run the server with development mode defaults').option('--no-ssl', 'Don\\'t run the dev server using HTTPS').option('--no-base-path', 'Don\\'t put a proxy in front of the dev server, which adds a random basePath').option('--no-watch', 'Prevents automatic restarts of the server in --dev mode');\n  }\n\n  command.action(_asyncToGenerator(function* (opts) {\n    var _this = this;\n\n    if (opts.dev) {\n      try {\n        var kbnDevConfig = (0, _utils.fromRoot)('config/kibana.dev.yml');\n        if ((0, _fs.statSync)(kbnDevConfig).isFile()) {\n          opts.config.push(kbnDevConfig);\n        }\n      } catch (err) {\n        // ignore, kibana.dev.yml does not exist\n      }\n    }\n\n    var getCurrentSettings = function getCurrentSettings() {\n      return readServerSettings(opts, _this.getUnknownOptions());\n    };\n    var settings = getCurrentSettings();\n\n    if (canCluster && opts.dev && !_cluster.isWorker) {\n      // stop processing the action and handoff to cluster manager\n      var ClusterManager = require('../cluster/cluster_manager');\n      new ClusterManager(opts, settings);\n      return;\n    }\n\n    var kbnServer = {};\n    var KbnServer = require('../../server/kbn_server');\n    try {\n      kbnServer = new KbnServer(settings);\n      yield kbnServer.ready();\n    } catch (err) {\n      var _kbnServer = kbnServer;\n      var server = _kbnServer.server;\n\n      if (err.code === 'EADDRINUSE') {\n        logFatal('Port ' + err.port + ' is already in use. Another instance of Kibana may be running!', server);\n      } else {\n        logFatal(err, server);\n      }\n\n      kbnServer.close();\n      process.exit(1); // eslint-disable-line no-process-exit\n    }\n\n    process.on('SIGHUP', function reloadConfig() {\n      var settings = getCurrentSettings();\n      kbnServer.server.log(['info', 'config'], 'Reloading logging configuration due to SIGHUP.');\n      kbnServer.applyLoggingConfiguration(settings);\n      kbnServer.server.log(['info', 'config'], 'Reloaded logging configuration due to SIGHUP.');\n    });\n\n    return kbnServer;\n  }));\n};\n\nfunction logFatal(message, server) {\n  if (server) {\n    server.log(['fatal'], message);\n  }\n  console.error('FATAL', message);\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL2NsaS9zZXJ2ZS9zZXJ2ZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7c0JBQWMsUUFBUTs7OztrQkFDRyxJQUFJOzt1QkFDSixTQUFTOztvQkFDVixNQUFNOztxQkFDTCxhQUFhOzswQkFDWixtQkFBbUI7O2dDQUNsQixvQkFBb0I7Ozs7QUFFL0MsSUFBSSxVQUFVLFlBQUEsQ0FBQztBQUNmLElBQUk7QUFDRixTQUFPLENBQUMsT0FBTyxDQUFDLDRCQUE0QixDQUFDLENBQUM7QUFDOUMsWUFBVSxHQUFHLElBQUksQ0FBQztDQUNuQixDQUFDLE9BQU8sQ0FBQyxFQUFFO0FBQ1YsWUFBVSxHQUFHLEtBQUssQ0FBQztDQUNwQjs7QUFFRCxJQUFNLGFBQWEsR0FBRyxTQUFoQixhQUFhLEdBQWU7QUFDaEMsTUFBTSxLQUFLLEdBQUcsRUFBRSxDQUFDO0FBQ2pCLFNBQU8sVUFBVSxJQUFJLEVBQUU7QUFDckIsU0FBSyxDQUFDLElBQUksQ0FBQyxtQkFBUSxPQUFPLENBQUMsR0FBRyxFQUFFLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQztBQUN6QyxXQUFPLEtBQUssQ0FBQztHQUNkLENBQUM7Q0FDSCxDQUFDOztBQUVGLElBQU0sbUJBQW1CLEdBQUcsYUFBYSxFQUFFLENBQUM7QUFDNUMsSUFBTSxrQkFBa0IsR0FBRyxhQUFhLEVBQUUsQ0FBQztBQUMzQyxJQUFNLG1CQUFtQixHQUFHLGFBQWEsRUFBRSxDQUFDOztBQUU1QyxTQUFTLGtCQUFrQixDQUFDLElBQUksRUFBRSxlQUFlLEVBQUU7QUFDakQsTUFBTSxRQUFRLEdBQUcsbUNBQWUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQzdDLE1BQU0sR0FBRyxHQUFHLG9CQUFFLE9BQU8sQ0FBQyxvQkFBRSxHQUFHLEVBQUUsUUFBUSxDQUFDLENBQUM7QUFDdkMsTUFBTSxHQUFHLEdBQUcsb0JBQUUsT0FBTyxDQUFDLG9CQUFFLEdBQUcsRUFBRSxRQUFRLENB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QUFNLEVBQUUsUUFBUSxDQUFDLEVBQUUsK0NBQStDLENBQUMsQ0FBQztLQUMzRixDQUFDLENBQUM7O0FBRUgsV0FBTyxTQUFTLENBQUM7R0FDbEIsRUFBQyxDQUFDO0NBQ0osQ0FBQzs7QUFFRixTQUFTLFFBQVEsQ0FBQyxPQUFPLEVBQUUsTUFBTSxFQUFFO0FBQ2pDLE1BQUksTUFBTSxFQUFFO0FBQ1YsVUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0dBQ2hDO0FBQ0QsU0FBTyxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUM7Q0FDakMiLCJmaWxlIjoiL2hvbWUvdmlvL2tpYmFuYS9zcmMvY2xpL3NlcnZlL3NlcnZlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IHN0YXRTeW5jIH0gZnJvbSAnZnMnO1xuaW1wb3J0IHsgaXNXb3JrZXIgfSBmcm9tICdjbHVzdGVyJztcbmltcG9ydCB7IHJlc29sdmUgfSBmcm9tICdwYXRoJztcbmltcG9ydCB7IGZyb21Sb290IH0gZnJvbSAnLi4vLi4vdXRpbHMnO1xuaW1wb3J0IHsgZ2V0Q29uZmlnIH0gZnJvbSAnLi4vLi4vc2VydmVyL3BhdGgnO1xuaW1wb3J0IHJlYWRZYW1sQ29uZmlnIGZyb20gJy4vcmVhZF95YW1sX2NvbmZpZyc7XG5cbmxldCBjYW5DbHVzdGVyO1xudHJ5IHtcbiAgcmVxdWlyZS5yZXNvbHZlKCcuLi9jbHVzdGVyL2NsdXN0ZXJfbWFuYWdlcicpO1xuICBjYW5DbHVzdGVyID0gdHJ1ZTtcbn0gY2F0Y2ggKGUpIHtcbiAgY2FuQ2x1c3RlciA9IGZhbHNlO1xufVxuXG5jb25zdCBwYXRoQ29sbGVjdG9yID0gZnVuY3Rpb24gKCkge1xuICBjb25zdCBwYXRocyA9IFtdO1xuICByZXR1cm4gZnVuY3Rpb24gKHBhdGgpIHtcbiAgICBwYXRocy5wdXNoKHJlc29sdmUocHJvY2Vzcy5jd2QoKSwgcGF0aCkpO1xuICAgIHJldHVybiBwYXRocztcbiAgfTtcbn07XG5cbmNvbnN0IGNvbmZpZ1BhdGhDb2xsZWN0b3IgPSBwYXRoQ29sbGVjdG9yKCk7XG5jb25zdCBwbHVnaW5EaXJDb2xsZWN0b3IgPSBwYXRoQ29sbGVjdG9yKCk7XG5jb25zdCBwbHVnaW5QYXRoQ29sbGVjdG9yID0gcGF0aENvbGxlY3RvcigpO1xuXG5mdW5jdGlvbiByZWFkU2VydmVyU2V0dGluZ3Mob3B0cywgZXh0cmFDbGlPcHRpb25zKSB7XG4gIGNvbnN0IHNldHRpbmdzID0gcmVhZFlhbWxDb25maWcob3B0cy5jb25maWcpO1xuICBjb25zdCBzZXQgPSBfLnBhcnRpYWwoXy5zZXQsIHNldHRpbmdzKTtcbiAgY29uc3QgZ2V0ID0gXy5wYXJ0aWFsKF8uZ2V0LCBzZXR0aW5ncyk7XG4gIGNvbnN0IGhhcyA9IF8ucGFydGlhbChfLmhhcywgc2V0dGluZ3MpO1xuICBjb25zdCBtZXJnZSA9IF8ucGFydGlhbChfLm1lcmdlLCBzZXR0aW5ncyk7XG5cbiAgaWYgKG9wdHMuZGV2KSB7XG4gICAgc2V0KCdlbnYnLCAnZGV2ZWxvcG1lbnQnKTtcbiAgICBzZXQoJ29wdGltaXplLmxhenknLCB0cnVlKTtcbiAgICBpZiAob3B0cy5zc2wgJiYgIWhhcygnc2VydmVyLnNzbC5jZXJ0JykgJiYgIWhhcygnc2VydmVyLnNzbC5rZXknKSkge1xuICAgICAgc2V0KCdzZXJ2ZXIuaG9zdCcsICdsb2NhbGhvc3QnKTtcbiAgICAgIHNldCgnc2VydmVyLnNzbC5jZXJ0JywgZnJvbVJvb3QoJ3Rlc3QvZGV2X2NlcnRzL3NlcnZlci5jcnQnKSk7XG4gICAgICBzZXQoJ3NlcnZlci5zc2wua2V5JywgZnJvbVJvb3QoJ3Rlc3QvZGV2X2NlcnRzL3NlcnZlci5rZXknKSk7XG4gICAgfVxuICB9XG5cbiAgaWYgKG9wdHMuZWxhc3RpY3NlYXJjaCkgc2V0KCdlbGFzdGljc2VhcmNoLnVybCcsIG9wdHMuZWxhc3RpY3NlYXJjaCk7XG4gIGlmIChvcHRzLnBvcnQpIHNldCgnc2VydmVyLnBvcnQnLCBvcHRzLnBvcnQpO1xuICBpZiAob3B0cy5ob3N0KSBzZXQoJ3NlcnZlci5ob3N0Jywgb3B0cy5ob3N0KTtcbiAgaWYgKG9wdHMucXVpZXQpIHNldCgnbG9nZ2luZy5xdWlldCcsIHRydWUpO1xuICBpZiAob3B0cy5zaWxlbnQpIHNldCgnbG9nZ2luZy5zaWxlbnQnLCB0cnVlKTtcbiAgaWYgKG9wdHMudmVyYm9zZSkgc2V0KCdsb2dnaW5nLnZlcmJvc2UnLCB0cnVlKTtcbiAgaWYgKG9wdHMubG9nRmlsZSkgc2V0KCdsb2dnaW5nLmRlc3QnLCBvcHRzLmxvZ0ZpbGUpO1xuXG4gIHNldCgncGx1Z2lucy5zY2FuRGlycycsIF8uY29tcGFjdChbXS5jb25jYXQoXG4gICAgZ2V0KCdwbHVnaW5zLnNjYW5EaXJzJyksXG4gICAgb3B0cy5wbHVnaW5EaXJcbiAgKSkpO1xuXG4gIHNldCgncGx1Z2lucy5wYXRocycsIF8uY29tcGFjdChbXS5jb25jYXQoXG4gICAgZ2V0KCdwbHVnaW5zLnBhdGhzJyksXG4gICAgb3B0cy5wbHVnaW5QYXRoXG4gICkpKTtcblxuICBtZXJnZShleHRyYUNsaU9wdGlvbnMpO1xuXG4gIHJldHVybiBzZXR0aW5ncztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAocHJvZ3JhbSkge1xuICBjb25zdCBjb21tYW5kID0gcHJvZ3JhbS5jb21tYW5kKCdzZXJ2ZScpO1xuXG4gIGNvbW1hbmRcbiAgLmRlc2NyaXB0aW9uKCdSdW4gdGhlIGtpYmFuYSBzZXJ2ZXInKVxuICAuY29sbGVjdFVua25vd25PcHRpb25zKClcbiAgLm9wdGlvbignLWUsIC0tZWxhc3RpY3NlYXJjaCA8dXJpPicsICdFbGFzdGljc2VhcmNoIGluc3RhbmNlJylcbiAgLm9wdGlvbihcbiAgICAnLWMsIC0tY29uZmlnIDxwYXRoPicsXG4gICAgJ1BhdGggdG8gdGhlIGNvbmZpZyBmaWxlLCBjYW4gYmUgY2hhbmdlZCB3aXRoIHRoZSBDT05GSUdfUEFUSCBlbnZpcm9ubWVudCB2YXJpYWJsZSBhcyB3ZWxsLiAnICtcbiAgICAnVXNlIG11bGl0cGxlIC0tY29uZmlnIGFyZ3MgdG8gaW5jbHVkZSBtdWx0aXBsZSBjb25maWcgZmlsZXMuJyxcbiAgICBjb25maWdQYXRoQ29sbGVjdG9yLFxuICAgIFsgZ2V0Q29uZmlnKCkgXVxuICApXG4gIC5vcHRpb24oJy1wLCAtLXBvcnQgPHBvcnQ+JywgJ1RoZSBwb3J0IHRvIGJpbmQgdG8nLCBwYXJzZUludClcbiAgLm9wdGlvbignLXEsIC0tcXVpZXQnLCAnUHJldmVudCBhbGwgbG9nZ2luZyBleGNlcHQgZXJyb3JzJylcbiAgLm9wdGlvbignLVEsIC0tc2lsZW50JywgJ1ByZXZlbnQgYWxsIGxvZ2dpbmcnKVxuICAub3B0aW9uKCctLXZlcmJvc2UnLCAnVHVybnMgb24gdmVyYm9zZSBsb2dnaW5nJylcbiAgLm9wdGlvbignLUgsIC0taG9zdCA8aG9zdD4nLCAnVGhlIGhvc3QgdG8gYmluZCB0bycpXG4gIC5vcHRpb24oJy1sLCAtLWxvZy1maWxlIDxwYXRoPicsICdUaGUgZmlsZSB0byBsb2cgdG8nKVxuICAub3B0aW9uKFxuICAgICctLXBsdWdpbi1kaXIgPHBhdGg+JyxcbiAgICAnQSBwYXRoIHRvIHNjYW4gZm9yIHBsdWdpbnMsIHRoaXMgY2FuIGJlIHNwZWNpZmllZCBtdWx0aXBsZSAnICtcbiAgICAndGltZXMgdG8gc3BlY2lmeSBtdWx0aXBsZSBkaXJlY3RvcmllcycsXG4gICAgcGx1Z2luRGlyQ29sbGVjdG9yLFxuICAgIFtcbiAgICAgIGZyb21Sb290KCdpbnN0YWxsZWRQbHVnaW5zJyksXG4gICAgICBmcm9tUm9vdCgnc3JjL3BsdWdpbnMnKVxuICAgIF1cbiAgKVxuICAub3B0aW9uKFxuICAgICctLXBsdWdpbi1wYXRoIDxwYXRoPicsXG4gICAgJ0EgcGF0aCB0byBhIHBsdWdpbiB3aGljaCBzaG91bGQgYmUgaW5jbHVkZWQgYnkgdGhlIHNlcnZlciwgJyArXG4gICAgJ3RoaXMgY2FuIGJlIHNwZWNpZmllZCBtdWx0aXBsZSB0aW1lcyB0byBzcGVjaWZ5IG11bHRpcGxlIHBhdGhzJyxcbiAgICBwbHVnaW5QYXRoQ29sbGVjdG9yLFxuICAgIFtdXG4gIClcbiAgLm9wdGlvbignLS1wbHVnaW5zIDxwYXRoPicsICdhbiBhbGlhcyBmb3IgLS1wbHVnaW4tZGlyJywgcGx1Z2luRGlyQ29sbGVjdG9yKTtcblxuICBpZiAoY2FuQ2x1c3Rlcikge1xuICAgIGNvbW1hbmRcbiAgICAub3B0aW9uKCctLWRldicsICdSdW4gdGhlIHNlcnZlciB3aXRoIGRldmVsb3BtZW50IG1vZGUgZGVmYXVsdHMnKVxuICAgIC5vcHRpb24oJy0tbm8tc3NsJywgJ0RvblxcJ3QgcnVuIHRoZSBkZXYgc2VydmVyIHVzaW5nIEhUVFBTJylcbiAgICAub3B0aW9uKCctLW5vLWJhc2UtcGF0aCcsICdEb25cXCd0IHB1dCBhIHByb3h5IGluIGZyb250IG9mIHRoZSBkZXYgc2VydmVyLCB3aGljaCBhZGRzIGEgcmFuZG9tIGJhc2VQYXRoJylcbiAgICAub3B0aW9uKCctLW5vLXdhdGNoJywgJ1ByZXZlbnRzIGF1dG9tYXRpYyByZXN0YXJ0cyBvZiB0aGUgc2VydmVyIGluIC0tZGV2IG1vZGUnKTtcbiAgfVxuXG4gIGNvbW1hbmRcbiAgLmFjdGlvbihhc3luYyBmdW5jdGlvbiAob3B0cykge1xuICAgIGlmIChvcHRzLmRldikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3Qga2JuRGV2Q29uZmlnID0gZnJvbVJvb3QoJ2NvbmZpZy9raWJhbmEuZGV2LnltbCcpO1xuICAgICAgICBpZiAoc3RhdFN5bmMoa2JuRGV2Q29uZmlnKS5pc0ZpbGUoKSkge1xuICAgICAgICAgIG9wdHMuY29uZmlnLnB1c2goa2JuRGV2Q29uZmlnKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIC8vIGlnbm9yZSwga2liYW5hLmRldi55bWwgZG9lcyBub3QgZXhpc3RcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBnZXRDdXJyZW50U2V0dGluZ3MgPSAoKSA9PiByZWFkU2VydmVyU2V0dGluZ3Mob3B0cywgdGhpcy5nZXRVbmtub3duT3B0aW9ucygpKTtcbiAgICBjb25zdCBzZXR0aW5ncyA9IGdldEN1cnJlbnRTZXR0aW5ncygpO1xuXG4gICAgaWYgKGNhbkNsdXN0ZXIgJiYgb3B0cy5kZXYgJiYgIWlzV29ya2VyKSB7XG4gICAgICAvLyBzdG9wIHByb2Nlc3NpbmcgdGhlIGFjdGlvbiBhbmQgaGFuZG9mZiB0byBjbHVzdGVyIG1hbmFnZXJcbiAgICAgIGNvbnN0IENsdXN0ZXJNYW5hZ2VyID0gcmVxdWlyZSgnLi4vY2x1c3Rlci9jbHVzdGVyX21hbmFnZXInKTtcbiAgICAgIG5ldyBDbHVzdGVyTWFuYWdlcihvcHRzLCBzZXR0aW5ncyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IGtiblNlcnZlciA9IHt9O1xuICAgIGNvbnN0IEtiblNlcnZlciA9IHJlcXVpcmUoJy4uLy4uL3NlcnZlci9rYm5fc2VydmVyJyk7XG4gICAgdHJ5IHtcbiAgICAgIGtiblNlcnZlciA9IG5ldyBLYm5TZXJ2ZXIoc2V0dGluZ3MpO1xuICAgICAgYXdhaXQga2JuU2VydmVyLnJlYWR5KCk7XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnN0IHsgc2VydmVyIH0gPSBrYm5TZXJ2ZXI7XG5cbiAgICAgIGlmIChlcnIuY29kZSA9PT0gJ0VBRERSSU5VU0UnKSB7XG4gICAgICAgIGxvZ0ZhdGFsKGBQb3J0ICR7ZXJyLnBvcnR9IGlzIGFscmVhZHkgaW4gdXNlLiBBbm90aGVyIGluc3RhbmNlIG9mIEtpYmFuYSBtYXkgYmUgcnVubmluZyFgLCBzZXJ2ZXIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbG9nRmF0YWwoZXJyLCBzZXJ2ZXIpO1xuICAgICAgfVxuXG4gICAgICBrYm5TZXJ2ZXIuY2xvc2UoKTtcbiAgICAgIHByb2Nlc3MuZXhpdCgxKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1wcm9jZXNzLWV4aXRcbiAgICB9XG5cbiAgICBwcm9jZXNzLm9uKCdTSUdIVVAnLCBmdW5jdGlvbiByZWxvYWRDb25maWcoKSB7XG4gICAgICBjb25zdCBzZXR0aW5ncyA9IGdldEN1cnJlbnRTZXR0aW5ncygpO1xuICAgICAga2JuU2VydmVyLnNlcnZlci5sb2coWydpbmZvJywgJ2NvbmZpZyddLCAnUmVsb2FkaW5nIGxvZ2dpbmcgY29uZmlndXJhdGlvbiBkdWUgdG8gU0lHSFVQLicpO1xuICAgICAga2JuU2VydmVyLmFwcGx5TG9nZ2luZ0NvbmZpZ3VyYXRpb24oc2V0dGluZ3MpO1xuICAgICAga2JuU2VydmVyLnNlcnZlci5sb2coWydpbmZvJywgJ2NvbmZpZyddLCAnUmVsb2FkZWQgbG9nZ2luZyBjb25maWd1cmF0aW9uIGR1ZSB0byBTSUdIVVAuJyk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4ga2JuU2VydmVyO1xuICB9KTtcbn07XG5cbmZ1bmN0aW9uIGxvZ0ZhdGFsKG1lc3NhZ2UsIHNlcnZlcikge1xuICBpZiAoc2VydmVyKSB7XG4gICAgc2VydmVyLmxvZyhbJ2ZhdGFsJ10sIG1lc3NhZ2UpO1xuICB9XG4gIGNvbnNvbGUuZXJyb3IoJ0ZBVEFMJywgbWVzc2FnZSk7XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/cli/serve/serve.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/kibana/src/cli/serve/serve.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport { statSync } from 'fs';\nimport { isWorker } from 'cluster';\nimport { resolve } from 'path';\nimport { fromRoot } from '../../utils';\nimport { getConfig } from '../../server/path';\nimport readYamlConfig from './read_yaml_config';\n\nlet canCluster;\ntry {\n  require.resolve('../cluster/cluster_manager');\n  canCluster = true;\n} catch (e) {\n  canCluster = false;\n}\n\nconst pathCollector = function () {\n  const paths = [];\n  return function (path) {\n    paths.push(resolve(process.cwd(), path));\n    return paths;\n  };\n};\n\nconst configPathCollector = pathCollector();\nconst pluginDirCollector = pathCollector();\nconst pluginPathCollector = pathCollector();\n\nfunction readServerSettings(opts, extraCliOptions) {\n  const settings = readYamlConfig(opts.config);\n  const set = _.partial(_.set, settings);\n  const get = _.partial(_.get, settings);\n  const has = _.partial(_.has, settings);\n  const merge = _.partial(_.merge, settings);\n\n  if (opts.dev) {\n    set('env', 'development');\n    set('optimize.lazy', true);\n    if (opts.ssl && !has('server.ssl.cert') && !has('server.ssl.key')) {\n      set('server.host', 'localhost');\n      set('server.ssl.cert', fromRoot('test/dev_certs/server.crt'));\n      set('server.ssl.key', fromRoot('test/dev_certs/server.key'));\n    }\n  }\n\n  if (opts.elasticsearch) set('elasticsearch.url', opts.elasticsearch);\n  if (opts.port) set('server.port', opts.port);\n  if (opts.host) set('server.host', opts.host);\n  if (opts.quiet) set('logging.quiet', true);\n  if (opts.silent) set('logging.silent', true);\n  if (opts.verbose) set('logging.verbose', true);\n  if (opts.logFile) set('logging.dest', opts.logFile);\n\n  set('plugins.scanDirs', _.compact([].concat(\n    get('plugins.scanDirs'),\n    opts.pluginDir\n  )));\n\n  set('plugins.paths', _.compact([].concat(\n    get('plugins.paths'),\n    opts.pluginPath\n  )));\n\n  merge(extraCliOptions);\n\n  return settings;\n}\n\nmodule.exports = function (program) {\n  const command = program.command('serve');\n\n  command\n  .description('Run the kibana server')\n  .collectUnknownOptions()\n  .option('-e, --elasticsearch <uri>', 'Elasticsearch instance')\n  .option(\n    '-c, --config <path>',\n    'Path to the config file, can be changed with the CONFIG_PATH environment variable as well. ' +\n    'Use mulitple --config args to include multiple config files.',\n    configPathCollector,\n    [ getConfig() ]\n  )\n  .option('-p, --port <port>', 'The port to bind to', parseInt)\n  .option('-q, --quiet', 'Prevent all logging except errors')\n  .option('-Q, --silent', 'Prevent all logging')\n  .option('--verbose', 'Turns on verbose logging')\n  .option('-H, --host <host>', 'The host to bind to')\n  .option('-l, --log-file <path>', 'The file to log to')\n  .option(\n    '--plugin-dir <path>',\n    'A path to scan for plugins, this can be specified multiple ' +\n    'times to specify multiple directories',\n    pluginDirCollector,\n    [\n      fromRoot('installedPlugins'),\n      fromRoot('src/plugins')\n    ]\n  )\n  .option(\n    '--plugin-path <path>',\n    'A path to a plugin which should be included by the server, ' +\n    'this can be specified multiple times to specify multiple paths',\n    pluginPathCollector,\n    []\n  )\n  .option('--plugins <path>', 'an alias for --plugin-dir', pluginDirCollector);\n\n  if (canCluster) {\n    command\n    .option('--dev', 'Run the server with development mode defaults')\n    .option('--no-ssl', 'Don\\'t run the dev server using HTTPS')\n    .option('--no-base-path', 'Don\\'t put a proxy in front of the dev server, which adds a random basePath')\n    .option('--no-watch', 'Prevents automatic restarts of the server in --dev mode');\n  }\n\n  command\n  .action(async function (opts) {\n    if (opts.dev) {\n      try {\n        const kbnDevConfig = fromRoot('config/kibana.dev.yml');\n        if (statSync(kbnDevConfig).isFile()) {\n          opts.config.push(kbnDevConfig);\n        }\n      } catch (err) {\n        // ignore, kibana.dev.yml does not exist\n      }\n    }\n\n    const getCurrentSettings = () => readServerSettings(opts, this.getUnknownOptions());\n    const settings = getCurrentSettings();\n\n    if (canCluster && opts.dev && !isWorker) {\n      // stop processing the action and handoff to cluster manager\n      const ClusterManager = require('../cluster/cluster_manager');\n      new ClusterManager(opts, settings);\n      return;\n    }\n\n    let kbnServer = {};\n    const KbnServer = require('../../server/kbn_server');\n    try {\n      kbnServer = new KbnServer(settings);\n      await kbnServer.ready();\n    }\n    catch (err) {\n      const { server } = kbnServer;\n\n      if (err.code === 'EADDRINUSE') {\n        logFatal(`Port ${err.port} is already in use. Another instance of Kibana may be running!`, server);\n      } else {\n        logFatal(err, server);\n      }\n\n      kbnServer.close();\n      process.exit(1); // eslint-disable-line no-process-exit\n    }\n\n    process.on('SIGHUP', function reloadConfig() {\n      const settings = getCurrentSettings();\n      kbnServer.server.log(['info', 'config'], 'Reloading logging configuration due to SIGHUP.');\n      kbnServer.applyLoggingConfiguration(settings);\n      kbnServer.server.log(['info', 'config'], 'Reloaded logging configuration due to SIGHUP.');\n    });\n\n    return kbnServer;\n  });\n};\n\nfunction logFatal(message, server) {\n  if (server) {\n    server.log(['fatal'], message);\n  }\n  console.error('FATAL', message);\n}\n"
      ]
    },
    "mtime": 1467036622785
  },
  "{\"filename\":\"/home/vio/kibana/src/utils/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "Binder",
            "BinderFor",
            "fromRoot",
            "pkg"
          ],
          "specifiers": [
            {
              "kind": "external",
              "local": "Binder",
              "exported": "Binder",
              "source": "./binder"
            },
            {
              "kind": "external",
              "local": "BinderFor",
              "exported": "BinderFor",
              "source": "./binder_for"
            },
            {
              "kind": "external",
              "local": "fromRoot",
              "exported": "fromRoot",
              "source": "./from_root"
            },
            {
              "kind": "external",
              "local": "pkg",
              "exported": "pkg",
              "source": "./package_json"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _binder = require('./binder');\n\nvar _binder2 = _interopRequireDefault(_binder);\n\nexports.Binder = _binder2['default'];\n\nvar _binder_for = require('./binder_for');\n\nvar _binder_for2 = _interopRequireDefault(_binder_for);\n\nexports.BinderFor = _binder_for2['default'];\n\nvar _from_root = require('./from_root');\n\nvar _from_root2 = _interopRequireDefault(_from_root);\n\nexports.fromRoot = _from_root2['default'];\n\nvar _package_json = require('./package_json');\n\nvar _package_json2 = _interopRequireDefault(_package_json);\n\nexports.pkg = _package_json2['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3V0aWxzL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O3NCQUFtQixVQUFVOzs7O1FBQXRCLE1BQU07OzBCQUNTLGNBQWM7Ozs7UUFBN0IsU0FBUzs7eUJBQ0ssYUFBYTs7OztRQUEzQixRQUFROzs0QkFDQyxnQkFBZ0I7Ozs7UUFBekIsR0FBRyIsImZpbGUiOiIvaG9tZS92aW8va2liYW5hL3NyYy91dGlscy9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBCaW5kZXIgZnJvbSAnLi9iaW5kZXInO1xuZXhwb3J0IEJpbmRlckZvciBmcm9tICcuL2JpbmRlcl9mb3InO1xuZXhwb3J0IGZyb21Sb290IGZyb20gJy4vZnJvbV9yb290JztcbmV4cG9ydCBwa2cgZnJvbSAnLi9wYWNrYWdlX2pzb24nO1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/utils/index.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;sBAAmB,UAAU;;;;QAAtB,MAAM;;0BACS,cAAc;;;;QAA7B,SAAS;;yBACK,aAAa;;;;QAA3B,QAAQ;;4BACC,gBAAgB;;;;QAAzB,GAAG",
      "file": "/home/vio/kibana/src/utils/index.js",
      "sourcesContent": [
        "export Binder from './binder';\nexport BinderFor from './binder_for';\nexport fromRoot from './from_root';\nexport pkg from './package_json';\n"
      ]
    },
    "mtime": 1467036622893
  },
  "{\"filename\":\"/home/vio/kibana/src/utils/binder.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "Binder"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "Binder",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check"
      ]
    },
    "ignored": false,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Binder = (function () {\n  function Binder() {\n    _classCallCheck(this, Binder);\n\n    this.disposal = [];\n  }\n\n  _createClass(Binder, [{\n    key: \"on\",\n    value: function on(emitter) {\n      for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      var on = emitter.on || emitter.addListener;\n      var off = emitter.off || emitter.removeListener;\n\n      on.apply(emitter, args);\n      this.disposal.push(function () {\n        return off.apply(emitter, args);\n      });\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      var destroyers = this.disposal;\n      this.disposal = [];\n      destroyers.forEach(function (fn) {\n        return fn();\n      });\n    }\n  }]);\n\n  return Binder;\n})();\n\nexports[\"default\"] = Binder;\nmodule.exports = exports[\"default\"];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3V0aWxzL2JpbmRlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0lBQXFCLE1BQU07QUFDZCxXQURRLE1BQU0sR0FDWDswQkFESyxNQUFNOztBQUV2QixRQUFJLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQztHQUNwQjs7ZUFIa0IsTUFBTTs7V0FLdkIsWUFBQyxPQUFPLEVBQVc7d0NBQU4sSUFBSTtBQUFKLFlBQUk7OztBQUNqQixVQUFNLEVBQUUsR0FBRyxPQUFPLENBQUMsRUFBRSxJQUFJLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDN0MsVUFBTSxHQUFHLEdBQUcsT0FBTyxDQUFDLEdBQUcsSUFBSSxPQUFPLENBQUMsY0FBYyxDQUFDOztBQUVsRCxRQUFFLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsQ0FBQztBQUN4QixVQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQztlQUFNLEdBQUcsQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQztPQUFBLENBQUMsQ0FBQztLQUNwRDs7O1dBRU0sbUJBQUc7QUFDUixVQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDO0FBQ2pDLFVBQUksQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFDO0FBQ25CLGdCQUFVLENBQUMsT0FBTyxDQUFDLFVBQUEsRUFBRTtlQUFJLEVBQUUsRUFBRTtPQUFBLENBQUMsQ0FBQztLQUNoQzs7O1NBakJrQixNQUFNOzs7cUJBQU4sTUFBTSIsImZpbGUiOiIvaG9tZS92aW8va2liYW5hL3NyYy91dGlscy9iaW5kZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBCaW5kZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmRpc3Bvc2FsID0gW107XG4gIH1cblxuICBvbihlbWl0dGVyLCAuLi5hcmdzKSB7XG4gICAgY29uc3Qgb24gPSBlbWl0dGVyLm9uIHx8IGVtaXR0ZXIuYWRkTGlzdGVuZXI7XG4gICAgY29uc3Qgb2ZmID0gZW1pdHRlci5vZmYgfHwgZW1pdHRlci5yZW1vdmVMaXN0ZW5lcjtcblxuICAgIG9uLmFwcGx5KGVtaXR0ZXIsIGFyZ3MpO1xuICAgIHRoaXMuZGlzcG9zYWwucHVzaCgoKSA9PiBvZmYuYXBwbHkoZW1pdHRlciwgYXJncykpO1xuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICBjb25zdCBkZXN0cm95ZXJzID0gdGhpcy5kaXNwb3NhbDtcbiAgICB0aGlzLmRpc3Bvc2FsID0gW107XG4gICAgZGVzdHJveWVycy5mb3JFYWNoKGZuID0+IGZuKCkpO1xuICB9XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/utils/binder.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;IAAqB,MAAM;AACd,WADQ,MAAM,GACX;0BADK,MAAM;;AAEvB,QAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;GACpB;;eAHkB,MAAM;;WAKvB,YAAC,OAAO,EAAW;wCAAN,IAAI;AAAJ,YAAI;;;AACjB,UAAM,EAAE,GAAG,OAAO,CAAC,EAAE,IAAI,OAAO,CAAC,WAAW,CAAC;AAC7C,UAAM,GAAG,GAAG,OAAO,CAAC,GAAG,IAAI,OAAO,CAAC,cAAc,CAAC;;AAElD,QAAE,CAAC,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;AACxB,UAAI,CAAC,QAAQ,CAAC,IAAI,CAAC;eAAM,GAAG,CAAC,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC;OAAA,CAAC,CAAC;KACpD;;;WAEM,mBAAG;AACR,UAAM,UAAU,GAAG,IAAI,CAAC,QAAQ,CAAC;AACjC,UAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;AACnB,gBAAU,CAAC,OAAO,CAAC,UAAA,EAAE;eAAI,EAAE,EAAE;OAAA,CAAC,CAAC;KAChC;;;SAjBkB,MAAM;;;qBAAN,MAAM",
      "file": "/home/vio/kibana/src/utils/binder.js",
      "sourcesContent": [
        "export default class Binder {\n  constructor() {\n    this.disposal = [];\n  }\n\n  on(emitter, ...args) {\n    const on = emitter.on || emitter.addListener;\n    const off = emitter.off || emitter.removeListener;\n\n    on.apply(emitter, args);\n    this.disposal.push(() => off.apply(emitter, args));\n  }\n\n  destroy() {\n    const destroyers = this.disposal;\n    this.disposal = [];\n    destroyers.forEach(fn => fn());\n  }\n}\n"
      ]
    },
    "mtime": 1467036622893
  },
  "{\"filename\":\"/home/vio/kibana/src/utils/binder_for.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./",
            "imported": [
              "Binder"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Binder",
                "local": "Binder"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "BinderFor"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "BinderFor",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "get",
        "inherits",
        "create-class",
        "class-call-check"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _ = require('./');\n\nvar BinderFor = (function (_Binder) {\n  _inherits(BinderFor, _Binder);\n\n  function BinderFor(emitter) {\n    _classCallCheck(this, BinderFor);\n\n    _get(Object.getPrototypeOf(BinderFor.prototype), 'constructor', this).call(this);\n    this.emitter = emitter;\n  }\n\n  _createClass(BinderFor, [{\n    key: 'on',\n    value: function on() {\n      var _get2;\n\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      (_get2 = _get(Object.getPrototypeOf(BinderFor.prototype), 'on', this)).call.apply(_get2, [this, this.emitter].concat(args));\n    }\n  }]);\n\n  return BinderFor;\n})(_.Binder);\n\nexports['default'] = BinderFor;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3V0aWxzL2JpbmRlcl9mb3IuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Z0JBQXVCLElBQUk7O0lBRU4sU0FBUztZQUFULFNBQVM7O0FBQ2pCLFdBRFEsU0FBUyxDQUNoQixPQUFPLEVBQUU7MEJBREYsU0FBUzs7QUFFMUIsK0JBRmlCLFNBQVMsNkNBRWxCO0FBQ1IsUUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUM7R0FDeEI7O2VBSmtCLFNBQVM7O1dBTTFCLGNBQVU7Ozt3Q0FBTixJQUFJO0FBQUosWUFBSTs7O0FBQ1IsMENBUGlCLFNBQVMsbURBT2pCLElBQUksQ0FBQyxPQUFPLFNBQUssSUFBSSxHQUFFO0tBQ2pDOzs7U0FSa0IsU0FBUzs7O3FCQUFULFNBQVMiLCJmaWxlIjoiL2hvbWUvdmlvL2tpYmFuYS9zcmMvdXRpbHMvYmluZGVyX2Zvci5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJpbmRlciB9IGZyb20gJy4vJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmluZGVyRm9yIGV4dGVuZHMgQmluZGVyIHtcbiAgY29uc3RydWN0b3IoZW1pdHRlcikge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5lbWl0dGVyID0gZW1pdHRlcjtcbiAgfVxuXG4gIG9uKC4uLmFyZ3MpIHtcbiAgICBzdXBlci5vbih0aGlzLmVtaXR0ZXIsIC4uLmFyZ3MpO1xuICB9XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/utils/binder_for.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;;;;;gBAAuB,IAAI;;IAEN,SAAS;YAAT,SAAS;;AACjB,WADQ,SAAS,CAChB,OAAO,EAAE;0BADF,SAAS;;AAE1B,+BAFiB,SAAS,6CAElB;AACR,QAAI,CAAC,OAAO,GAAG,OAAO,CAAC;GACxB;;eAJkB,SAAS;;WAM1B,cAAU;;;wCAAN,IAAI;AAAJ,YAAI;;;AACR,0CAPiB,SAAS,mDAOjB,IAAI,CAAC,OAAO,SAAK,IAAI,GAAE;KACjC;;;SARkB,SAAS;;;qBAAT,SAAS",
      "file": "/home/vio/kibana/src/utils/binder_for.js",
      "sourcesContent": [
        "import { Binder } from './';\n\nexport default class BinderFor extends Binder {\n  constructor(emitter) {\n    super();\n    this.emitter = emitter;\n  }\n\n  on(...args) {\n    super.on(this.emitter, ...args);\n  }\n}\n"
      ]
    },
    "mtime": 1467036622893
  },
  "{\"filename\":\"/home/vio/kibana/src/utils/from_root.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "./package_json",
            "imported": [
              "__dirname"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "__dirname",
                "local": "root"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "join",
              "dirname",
              "normalize"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "join",
                "local": "join"
              },
              {
                "kind": "named",
                "imported": "dirname",
                "local": "dirname"
              },
              {
                "kind": "named",
                "imported": "normalize",
                "local": "normalize"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _package_json = require('./package_json');\n\nvar _path = require('path');\n\nmodule.exports = _lodash2['default'].flow(_lodash2['default'].partial(_path.join, _package_json.__dirname), _path.normalize);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3V0aWxzL2Zyb21fcm9vdC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O3NCQUFjLFFBQVE7Ozs7NEJBQ1ksZ0JBQWdCOztvQkFDVCxNQUFNOztBQUUvQyxNQUFNLENBQUMsT0FBTyxHQUFHLG9CQUFFLElBQUksQ0FBQyxvQkFBRSxPQUFPLHFDQUFZLGtCQUFZLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL2tpYmFuYS9zcmMvdXRpbHMvZnJvbV9yb290LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IF9fZGlybmFtZSBhcyByb290IH0gZnJvbSAnLi9wYWNrYWdlX2pzb24nO1xuaW1wb3J0IHsgam9pbiwgZGlybmFtZSwgbm9ybWFsaXplIH0gZnJvbSAncGF0aCc7XG5cbm1vZHVsZS5leHBvcnRzID0gXy5mbG93KF8ucGFydGlhbChqb2luLCByb290KSwgbm9ybWFsaXplKTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/utils/from_root.js"
      ],
      "names": [],
      "mappings": ";;;;sBAAc,QAAQ;;;;4BACY,gBAAgB;;oBACT,MAAM;;AAE/C,MAAM,CAAC,OAAO,GAAG,oBAAE,IAAI,CAAC,oBAAE,OAAO,qCAAY,kBAAY,CAAC",
      "file": "/home/vio/kibana/src/utils/from_root.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport { __dirname as root } from './package_json';\nimport { join, dirname, normalize } from 'path';\n\nmodule.exports = _.flow(_.partial(join, root), normalize);\n"
      ]
    },
    "mtime": 1467036622893
  },
  "{\"filename\":\"/home/vio/kibana/src/server/path/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "fs",
            "imported": [
              "accessSync",
              "R_OK"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "accessSync",
                "local": "accessSync"
              },
              {
                "kind": "named",
                "imported": "R_OK",
                "local": "R_OK"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "find"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "find",
                "local": "find"
              }
            ]
          },
          {
            "source": "../../utils",
            "imported": [
              "fromRoot"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "fromRoot",
                "local": "fromRoot"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _fs = require('fs');\n\nvar _lodash = require('lodash');\n\nvar _utils = require('../../utils');\n\nvar CONFIG_PATHS = [process.env.CONFIG_PATH, (0, _utils.fromRoot)('config/kibana.yml'), '/etc/kibana/kibana.yml'].filter(Boolean);\n\nvar DATA_PATHS = [process.env.DATA_PATH, (0, _utils.fromRoot)('installedPlugins/.data'), '/var/lib/kibana'].filter(Boolean);\n\nfunction findFile(paths) {\n  var availablePath = (0, _lodash.find)(paths, function (configPath) {\n    try {\n      (0, _fs.accessSync)(configPath, _fs.R_OK);\n      return true;\n    } catch (e) {\n      //Check the next path\n    }\n  });\n  return availablePath || paths[0];\n}\n\nexports['default'] = {\n  getConfig: function getConfig() {\n    return findFile(CONFIG_PATHS);\n  },\n  getData: function getData() {\n    return findFile(DATA_PATHS);\n  }\n};\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3NlcnZlci9wYXRoL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztrQkFBZ0MsSUFBSTs7c0JBQ2YsUUFBUTs7cUJBQ0osYUFBYTs7QUFFdEMsSUFBTSxZQUFZLEdBQUcsQ0FDbkIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxXQUFXLEVBQ3ZCLHFCQUFTLG1CQUFtQixDQUFDLEVBQzdCLHdCQUF3QixDQUN6QixDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQzs7QUFFbEIsSUFBTSxVQUFVLEdBQUcsQ0FDakIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQ3JCLHFCQUFTLHdCQUF3QixDQUFDLEVBQ2xDLGlCQUFpQixDQUNsQixDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQzs7QUFFbEIsU0FBUyxRQUFRLENBQUMsS0FBSyxFQUFFO0FBQ3ZCLE1BQU0sYUFBYSxHQUFHLGtCQUFLLEtBQUssRUFBRSxVQUFBLFVBQVUsRUFBSTtBQUM5QyxRQUFJO0FBQ0YsMEJBQVcsVUFBVSxXQUFPLENBQUM7QUFDN0IsYUFBTyxJQUFJLENBQUM7S0FDYixDQUFDLE9BQU8sQ0FBQyxFQUFFOztLQUVYO0dBQ0YsQ0FBQyxDQUFDO0FBQ0gsU0FBTyxhQUFhLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO0NBQ2xDOztxQkFFYztBQUNiLFdBQVMsRUFBRTtXQUFNLFFBQVEsQ0FBQyxZQUFZLENBQUM7R0FBQTtBQUN2QyxTQUFPLEVBQUU7V0FBTSxRQUFRLENBQUMsVUFBVSxDQUFDO0dBQUE7Q0FDcEMiLCJmaWxlIjoiL2hvbWUvdmlvL2tpYmFuYS9zcmMvc2VydmVyL3BhdGgvaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhY2Nlc3NTeW5jLCBSX09LfSBmcm9tICdmcyc7XG5pbXBvcnQgeyBmaW5kIH0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IGZyb21Sb290IH0gZnJvbSAnLi4vLi4vdXRpbHMnO1xuXG5jb25zdCBDT05GSUdfUEFUSFMgPSBbXG4gIHByb2Nlc3MuZW52LkNPTkZJR19QQVRILFxuICBmcm9tUm9vdCgnY29uZmlnL2tpYmFuYS55bWwnKSxcbiAgJy9ldGMva2liYW5hL2tpYmFuYS55bWwnXG5dLmZpbHRlcihCb29sZWFuKTtcblxuY29uc3QgREFUQV9QQVRIUyA9IFtcbiAgcHJvY2Vzcy5lbnYuREFUQV9QQVRILFxuICBmcm9tUm9vdCgnaW5zdGFsbGVkUGx1Z2lucy8uZGF0YScpLFxuICAnL3Zhci9saWIva2liYW5hJ1xuXS5maWx0ZXIoQm9vbGVhbik7XG5cbmZ1bmN0aW9uIGZpbmRGaWxlKHBhdGhzKSB7XG4gIGNvbnN0IGF2YWlsYWJsZVBhdGggPSBmaW5kKHBhdGhzLCBjb25maWdQYXRoID0+IHtcbiAgICB0cnkge1xuICAgICAgYWNjZXNzU3luYyhjb25maWdQYXRoLCBSX09LKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vQ2hlY2sgdGhlIG5leHQgcGF0aFxuICAgIH1cbiAgfSk7XG4gIHJldHVybiBhdmFpbGFibGVQYXRoIHx8IHBhdGhzWzBdO1xufVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIGdldENvbmZpZzogKCkgPT4gZmluZEZpbGUoQ09ORklHX1BBVEhTKSxcbiAgZ2V0RGF0YTogKCkgPT4gZmluZEZpbGUoREFUQV9QQVRIUylcbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/server/path/index.js"
      ],
      "names": [],
      "mappings": ";;;;;;kBAAgC,IAAI;;sBACf,QAAQ;;qBACJ,aAAa;;AAEtC,IAAM,YAAY,GAAG,CACnB,OAAO,CAAC,GAAG,CAAC,WAAW,EACvB,qBAAS,mBAAmB,CAAC,EAC7B,wBAAwB,CACzB,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;;AAElB,IAAM,UAAU,GAAG,CACjB,OAAO,CAAC,GAAG,CAAC,SAAS,EACrB,qBAAS,wBAAwB,CAAC,EAClC,iBAAiB,CAClB,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;;AAElB,SAAS,QAAQ,CAAC,KAAK,EAAE;AACvB,MAAM,aAAa,GAAG,kBAAK,KAAK,EAAE,UAAA,UAAU,EAAI;AAC9C,QAAI;AACF,0BAAW,UAAU,WAAO,CAAC;AAC7B,aAAO,IAAI,CAAC;KACb,CAAC,OAAO,CAAC,EAAE;;KAEX;GACF,CAAC,CAAC;AACH,SAAO,aAAa,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC;CAClC;;qBAEc;AACb,WAAS,EAAE;WAAM,QAAQ,CAAC,YAAY,CAAC;GAAA;AACvC,SAAO,EAAE;WAAM,QAAQ,CAAC,UAAU,CAAC;GAAA;CACpC",
      "file": "/home/vio/kibana/src/server/path/index.js",
      "sourcesContent": [
        "import { accessSync, R_OK} from 'fs';\nimport { find } from 'lodash';\nimport { fromRoot } from '../../utils';\n\nconst CONFIG_PATHS = [\n  process.env.CONFIG_PATH,\n  fromRoot('config/kibana.yml'),\n  '/etc/kibana/kibana.yml'\n].filter(Boolean);\n\nconst DATA_PATHS = [\n  process.env.DATA_PATH,\n  fromRoot('installedPlugins/.data'),\n  '/var/lib/kibana'\n].filter(Boolean);\n\nfunction findFile(paths) {\n  const availablePath = find(paths, configPath => {\n    try {\n      accessSync(configPath, R_OK);\n      return true;\n    } catch (e) {\n      //Check the next path\n    }\n  });\n  return availablePath || paths[0];\n}\n\nexport default {\n  getConfig: () => findFile(CONFIG_PATHS),\n  getData: () => findFile(DATA_PATHS)\n};\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/kibana/src/cli/serve/read_yaml_config.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "chain",
              "isArray",
              "isPlainObject",
              "forOwn",
              "memoize",
              "set",
              "transform"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "chain",
                "local": "chain"
              },
              {
                "kind": "named",
                "imported": "isArray",
                "local": "isArray"
              },
              {
                "kind": "named",
                "imported": "isPlainObject",
                "local": "isPlainObject"
              },
              {
                "kind": "named",
                "imported": "forOwn",
                "local": "forOwn"
              },
              {
                "kind": "named",
                "imported": "memoize",
                "local": "memoize"
              },
              {
                "kind": "named",
                "imported": "set",
                "local": "set"
              },
              {
                "kind": "named",
                "imported": "transform",
                "local": "transform"
              }
            ]
          },
          {
            "source": "fs",
            "imported": [
              "readFileSync"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "readFileSync",
                "local": "read"
              }
            ]
          },
          {
            "source": "js-yaml",
            "imported": [
              "safeLoad"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "safeLoad",
                "local": "safeLoad"
              }
            ]
          },
          {
            "source": "ansicolors",
            "imported": [
              "red"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "red",
                "local": "red"
              }
            ]
          },
          {
            "source": "../../utils",
            "imported": [
              "fromRoot"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "fromRoot",
                "local": "fromRoot"
              }
            ]
          },
          {
            "source": "./legacy_config",
            "imported": [
              "rewriteLegacyConfig"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "rewriteLegacyConfig",
                "local": "rewriteLegacyConfig"
              }
            ]
          },
          {
            "source": "./deprecated_config",
            "imported": [
              "checkForDeprecatedConfig"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "checkForDeprecatedConfig",
                "local": "checkForDeprecatedConfig"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "merge",
            "sources"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "merge",
              "exported": "merge"
            },
            {
              "kind": "local",
              "local": "sources",
              "exported": "sources"
            }
          ]
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports.merge = merge;\n\nvar _lodash = require('lodash');\n\nvar _fs = require('fs');\n\nvar _jsYaml = require('js-yaml');\n\nvar _ansicolors = require('ansicolors');\n\nvar _utils = require('../../utils');\n\nvar _legacy_config = require('./legacy_config');\n\nvar _deprecated_config = require('./deprecated_config');\n\nvar log = (0, _lodash.memoize)(function (message) {\n  console.log((0, _ansicolors.red)('WARNING:'), message);\n});\n\nfunction merge(sources) {\n  return (0, _lodash.transform)(sources, function (merged, source) {\n    (0, _lodash.forOwn)(source, function apply(val, key) {\n      if ((0, _lodash.isPlainObject)(val)) {\n        (0, _lodash.forOwn)(val, function (subVal, subKey) {\n          apply(subVal, key + '.' + subKey);\n        });\n        return;\n      }\n\n      if ((0, _lodash.isArray)(val)) {\n        (0, _lodash.set)(merged, key, []);\n        val.forEach(function (subVal, i) {\n          return apply(subVal, key + '.' + i);\n        });\n        return;\n      }\n\n      (0, _lodash.set)(merged, key, val);\n    });\n  }, {});\n}\n\nexports['default'] = function (paths) {\n  var files = [].concat(paths || []);\n  var yamls = files.map(function (path) {\n    return (0, _jsYaml.safeLoad)((0, _fs.readFileSync)(path, 'utf8'));\n  });\n  var config = merge(yamls.map(function (file) {\n    return (0, _legacy_config.rewriteLegacyConfig)(file, log);\n  }));\n  return (0, _deprecated_config.checkForDeprecatedConfig)(config, log);\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL2NsaS9zZXJ2ZS9yZWFkX3lhbWxfY29uZmlnLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7c0JBQStFLFFBQVE7O2tCQUNsRCxJQUFJOztzQkFDaEIsU0FBUzs7MEJBQ2QsWUFBWTs7cUJBRVAsYUFBYTs7NkJBQ0YsaUJBQWlCOztpQ0FDWixxQkFBcUI7O0FBRTlELElBQU0sR0FBRyxHQUFHLHFCQUFRLFVBQVUsT0FBTyxFQUFFO0FBQ3JDLFNBQU8sQ0FBQyxHQUFHLENBQUMscUJBQUksVUFBVSxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUM7Q0FDdkMsQ0FBQyxDQUFDOztBQUVJLFNBQVMsS0FBSyxDQUFDLE9BQU8sRUFBRTtBQUM3QixTQUFPLHVCQUFVLE9BQU8sRUFBRSxVQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUs7QUFDNUMsd0JBQU8sTUFBTSxFQUFFLFNBQVMsS0FBSyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUU7QUFDdEMsVUFBSSwyQkFBYyxHQUFHLENBQUMsRUFBRTtBQUN0Qiw0QkFBTyxHQUFHLEVBQUUsVUFBVSxNQUFNLEVBQUUsTUFBTSxFQUFFO0FBQ3BDLGVBQUssQ0FBQyxNQUFNLEVBQUUsR0FBRyxHQUFHLEdBQUcsR0FBRyxNQUFNLENBQUMsQ0FBQztTQUNuQyxDQUFDLENBQUM7QUFDSCxlQUFPO09BQ1I7O0FBRUQsVUFBSSxxQkFBUSxHQUFHLENBQUMsRUFBRTtBQUNoQix5QkFBSSxNQUFNLEVBQUUsR0FBRyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0FBQ3JCLFdBQUcsQ0FBQyxPQUFPLENBQUMsVUFBQyxNQUFNLEVBQUUsQ0FBQztpQkFBSyxLQUFLLENBQUMsTUFBTSxFQUFFLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO1NBQUEsQ0FBQyxDQUFDO0FBQ3pELGVBQU87T0FDUjs7QUFFRCx1QkFBSSxNQUFNLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0tBQ3ZCLENBQUMsQ0FBQztHQUNKLEVBQUUsRUFBRSxDQUFDLENBQUM7Q0FDUjs7cUJBRWMsVUFBVSxLQUFLLEVBQUU7QUFDOUIsTUFBTSxLQUFLLEdBQUcsRUFBRSxDQUFDLE1BQU0sQ0FBQyxLQUFLLElBQUksRUFBRSxDQUFDLENBQUM7QUFDckMsTUFBTSxLQUFLLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxVQUFBLElBQUk7V0FBSSxzQkFBUyxzQkFBSyxJQUFJLEVBQUUsTUFBTSxDQUFDLENBQUM7R0FBQSxDQUFDLENBQUM7QUFDOUQsTUFBTSxNQUFNLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsVUFBQSxJQUFJO1dBQUksd0NBQW9CLElBQUksRUFBRSxHQUFHLENBQUM7R0FBQSxDQUFDLENBQUMsQ0FBQztBQUN4RSxTQUFPLGlEQUF5QixNQUFNLEVBQUUsR0FBRyxDQUFDLENBQUM7Q0FDOUMiLCJmaWxlIjoiL2hvbWUvdmlvL2tpYmFuYS9zcmMvY2xpL3NlcnZlL3JlYWRfeWFtbF9jb25maWcuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjaGFpbiwgaXNBcnJheSwgaXNQbGFpbk9iamVjdCwgZm9yT3duLCBtZW1vaXplLCBzZXQsIHRyYW5zZm9ybSB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgeyByZWFkRmlsZVN5bmMgYXMgcmVhZCB9IGZyb20gJ2ZzJztcbmltcG9ydCB7IHNhZmVMb2FkIH0gZnJvbSAnanMteWFtbCc7XG5pbXBvcnQgeyByZWQgfSBmcm9tICdhbnNpY29sb3JzJztcblxuaW1wb3J0IHsgZnJvbVJvb3QgfSBmcm9tICcuLi8uLi91dGlscyc7XG5pbXBvcnQgeyByZXdyaXRlTGVnYWN5Q29uZmlnIH0gZnJvbSAnLi9sZWdhY3lfY29uZmlnJztcbmltcG9ydCB7IGNoZWNrRm9yRGVwcmVjYXRlZENvbmZpZyB9IGZyb20gJy4vZGVwcmVjYXRlZF9jb25maWcnO1xuXG5jb25zdCBsb2cgPSBtZW1vaXplKGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gIGNvbnNvbGUubG9nKHJlZCgnV0FSTklORzonKSwgbWVzc2FnZSk7XG59KTtcblxuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlKHNvdXJjZXMpIHtcbiAgcmV0dXJuIHRyYW5zZm9ybShzb3VyY2VzLCAobWVyZ2VkLCBzb3VyY2UpID0+IHtcbiAgICBmb3JPd24oc291cmNlLCBmdW5jdGlvbiBhcHBseSh2YWwsIGtleSkge1xuICAgICAgaWYgKGlzUGxhaW5PYmplY3QodmFsKSkge1xuICAgICAgICBmb3JPd24odmFsLCBmdW5jdGlvbiAoc3ViVmFsLCBzdWJLZXkpIHtcbiAgICAgICAgICBhcHBseShzdWJWYWwsIGtleSArICcuJyArIHN1YktleSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChpc0FycmF5KHZhbCkpIHtcbiAgICAgICAgc2V0KG1lcmdlZCwga2V5LCBbXSk7XG4gICAgICAgIHZhbC5mb3JFYWNoKChzdWJWYWwsIGkpID0+IGFwcGx5KHN1YlZhbCwga2V5ICsgJy4nICsgaSkpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHNldChtZXJnZWQsIGtleSwgdmFsKTtcbiAgICB9KTtcbiAgfSwge30pO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAocGF0aHMpIHtcbiAgY29uc3QgZmlsZXMgPSBbXS5jb25jYXQocGF0aHMgfHwgW10pO1xuICBjb25zdCB5YW1scyA9IGZpbGVzLm1hcChwYXRoID0+IHNhZmVMb2FkKHJlYWQocGF0aCwgJ3V0ZjgnKSkpO1xuICBjb25zdCBjb25maWcgPSBtZXJnZSh5YW1scy5tYXAoZmlsZSA9PiByZXdyaXRlTGVnYWN5Q29uZmlnKGZpbGUsIGxvZykpKTtcbiAgcmV0dXJuIGNoZWNrRm9yRGVwcmVjYXRlZENvbmZpZyhjb25maWcsIGxvZyk7XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/cli/serve/read_yaml_config.js"
      ],
      "names": [],
      "mappings": ";;;;;;;sBAA+E,QAAQ;;kBAClD,IAAI;;sBAChB,SAAS;;0BACd,YAAY;;qBAEP,aAAa;;6BACF,iBAAiB;;iCACZ,qBAAqB;;AAE9D,IAAM,GAAG,GAAG,qBAAQ,UAAU,OAAO,EAAE;AACrC,SAAO,CAAC,GAAG,CAAC,qBAAI,UAAU,CAAC,EAAE,OAAO,CAAC,CAAC;CACvC,CAAC,CAAC;;AAEI,SAAS,KAAK,CAAC,OAAO,EAAE;AAC7B,SAAO,uBAAU,OAAO,EAAE,UAAC,MAAM,EAAE,MAAM,EAAK;AAC5C,wBAAO,MAAM,EAAE,SAAS,KAAK,CAAC,GAAG,EAAE,GAAG,EAAE;AACtC,UAAI,2BAAc,GAAG,CAAC,EAAE;AACtB,4BAAO,GAAG,EAAE,UAAU,MAAM,EAAE,MAAM,EAAE;AACpC,eAAK,CAAC,MAAM,EAAE,GAAG,GAAG,GAAG,GAAG,MAAM,CAAC,CAAC;SACnC,CAAC,CAAC;AACH,eAAO;OACR;;AAED,UAAI,qBAAQ,GAAG,CAAC,EAAE;AAChB,yBAAI,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC,CAAC;AACrB,WAAG,CAAC,OAAO,CAAC,UAAC,MAAM,EAAE,CAAC;iBAAK,KAAK,CAAC,MAAM,EAAE,GAAG,GAAG,GAAG,GAAG,CAAC,CAAC;SAAA,CAAC,CAAC;AACzD,eAAO;OACR;;AAED,uBAAI,MAAM,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;KACvB,CAAC,CAAC;GACJ,EAAE,EAAE,CAAC,CAAC;CACR;;qBAEc,UAAU,KAAK,EAAE;AAC9B,MAAM,KAAK,GAAG,EAAE,CAAC,MAAM,CAAC,KAAK,IAAI,EAAE,CAAC,CAAC;AACrC,MAAM,KAAK,GAAG,KAAK,CAAC,GAAG,CAAC,UAAA,IAAI;WAAI,sBAAS,sBAAK,IAAI,EAAE,MAAM,CAAC,CAAC;GAAA,CAAC,CAAC;AAC9D,MAAM,MAAM,GAAG,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,UAAA,IAAI;WAAI,wCAAoB,IAAI,EAAE,GAAG,CAAC;GAAA,CAAC,CAAC,CAAC;AACxE,SAAO,iDAAyB,MAAM,EAAE,GAAG,CAAC,CAAC;CAC9C",
      "file": "/home/vio/kibana/src/cli/serve/read_yaml_config.js",
      "sourcesContent": [
        "import { chain, isArray, isPlainObject, forOwn, memoize, set, transform } from 'lodash';\nimport { readFileSync as read } from 'fs';\nimport { safeLoad } from 'js-yaml';\nimport { red } from 'ansicolors';\n\nimport { fromRoot } from '../../utils';\nimport { rewriteLegacyConfig } from './legacy_config';\nimport { checkForDeprecatedConfig } from './deprecated_config';\n\nconst log = memoize(function (message) {\n  console.log(red('WARNING:'), message);\n});\n\nexport function merge(sources) {\n  return transform(sources, (merged, source) => {\n    forOwn(source, function apply(val, key) {\n      if (isPlainObject(val)) {\n        forOwn(val, function (subVal, subKey) {\n          apply(subVal, key + '.' + subKey);\n        });\n        return;\n      }\n\n      if (isArray(val)) {\n        set(merged, key, []);\n        val.forEach((subVal, i) => apply(subVal, key + '.' + i));\n        return;\n      }\n\n      set(merged, key, val);\n    });\n  }, {});\n}\n\nexport default function (paths) {\n  const files = [].concat(paths || []);\n  const yamls = files.map(path => safeLoad(read(path, 'utf8')));\n  const config = merge(yamls.map(file => rewriteLegacyConfig(file, log)));\n  return checkForDeprecatedConfig(config, log);\n}\n"
      ]
    },
    "mtime": 1467036622785
  },
  "{\"filename\":\"/home/vio/kibana/src/cli/serve/legacy_config.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "noop",
              "transform"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "noop",
                "local": "noop"
              },
              {
                "kind": "named",
                "imported": "transform",
                "local": "transform"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "legacySettings",
            "rewriteLegacyConfig",
            "object",
            "log"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "legacySettings",
              "exported": "legacySettings"
            },
            {
              "kind": "local",
              "local": "rewriteLegacyConfig",
              "exported": "rewriteLegacyConfig"
            },
            {
              "kind": "local",
              "local": "object",
              "exported": "object"
            },
            {
              "kind": "local",
              "local": "log",
              "exported": "log"
            }
          ]
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports.rewriteLegacyConfig = rewriteLegacyConfig;\n\nvar _lodash = require('lodash');\n\n// legacySettings allow kibana 4.2+ to accept the same config file that people\n// used for kibana 4.0 and 4.1. These settings are transformed to their modern\n// equivalents at the very begining of the process\nvar legacySettings = {\n  // server\n  port: 'server.port',\n  host: 'server.host',\n  pid_file: 'pid.file',\n  ssl_cert_file: 'server.ssl.cert',\n  ssl_key_file: 'server.ssl.key',\n\n  // logging\n  log_file: 'logging.dest',\n\n  // kibana\n  kibana_index: 'kibana.index',\n  default_app_id: 'kibana.defaultAppId',\n\n  // es\n  ca: 'elasticsearch.ssl.ca',\n  elasticsearch_preserve_host: 'elasticsearch.preserveHost',\n  elasticsearch_url: 'elasticsearch.url',\n  kibana_elasticsearch_client_crt: 'elasticsearch.ssl.cert',\n  kibana_elasticsearch_client_key: 'elasticsearch.ssl.key',\n  kibana_elasticsearch_password: 'elasticsearch.password',\n  kibana_elasticsearch_username: 'elasticsearch.username',\n  ping_timeout: 'elasticsearch.pingTimeout',\n  request_timeout: 'elasticsearch.requestTimeout',\n  shard_timeout: 'elasticsearch.shardTimeout',\n  startup_timeout: 'elasticsearch.startupTimeout',\n  verify_ssl: 'elasticsearch.ssl.verify'\n};\n\nexports.legacySettings = legacySettings;\n// transform legacy options into new namespaced versions\n\nfunction rewriteLegacyConfig(object) {\n  var log = arguments.length <= 1 || arguments[1] === undefined ? _lodash.noop : arguments[1];\n\n  return (0, _lodash.transform)(object, function (clone, val, key) {\n    if (legacySettings.hasOwnProperty(key)) {\n      var replacement = legacySettings[key];\n      log('Config key \"' + key + '\" is deprecated. It has been replaced with \"' + replacement + '\"');\n      clone[replacement] = val;\n    } else {\n      clone[key] = val;\n    }\n  }, {});\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL2NsaS9zZXJ2ZS9sZWdhY3lfY29uZmlnLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7c0JBQWdDLFFBQVE7Ozs7O0FBS2pDLElBQU0sY0FBYyxHQUFHOztBQUU1QixNQUFJLEVBQUUsYUFBYTtBQUNuQixNQUFJLEVBQUUsYUFBYTtBQUNuQixVQUFRLEVBQUUsVUFBVTtBQUNwQixlQUFhLEVBQUUsaUJBQWlCO0FBQ2hDLGNBQVksRUFBRSxnQkFBZ0I7OztBQUc5QixVQUFRLEVBQUUsY0FBYzs7O0FBR3hCLGNBQVksRUFBRSxjQUFjO0FBQzVCLGdCQUFjLEVBQUUscUJBQXFCOzs7QUFHckMsSUFBRSxFQUFFLHNCQUFzQjtBQUMxQiw2QkFBMkIsRUFBRSw0QkFBNEI7QUFDekQsbUJBQWlCLEVBQUUsbUJBQW1CO0FBQ3RDLGlDQUErQixFQUFFLHdCQUF3QjtBQUN6RCxpQ0FBK0IsRUFBRSx1QkFBdUI7QUFDeEQsK0JBQTZCLEVBQUUsd0JBQXdCO0FBQ3ZELCtCQUE2QixFQUFFLHdCQUF3QjtBQUN2RCxjQUFZLEVBQUUsMkJBQTJCO0FBQ3pDLGlCQUFlLEVBQUUsOEJBQThCO0FBQy9DLGVBQWEsRUFBRSw0QkFBNEI7QUFDM0MsaUJBQWUsRUFBRSw4QkFBOEI7QUFDL0MsWUFBVSxFQUFFLDBCQUEwQjtDQUN2QyxDQUFDOzs7OztBQUdLLFNBQVMsbUJBQW1CLENBQUMsTUFBTSxFQUFjO01BQVosR0FBRzs7QUFDN0MsU0FBTyx1QkFBVSxNQUFNLEVBQUUsVUFBQyxLQUFLLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBSztBQUM1QyxRQUFJLGNBQWMsQ0FBQyxjQUFjLENBQUMsR0FBRyxDQUFDLEVBQUU7QUFDdEMsVUFBTSxXQUFXLEdBQUcsY0FBYyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ3hDLFNBQUcsa0JBQWdCLEdBQUcsb0RBQStDLFdBQVcsT0FBSSxDQUFDO0FBQ3JGLFdBQUssQ0FBQyxXQUFXLENBQUMsR0FBRyxHQUFHLENBQUM7S0FDMUIsTUFBTTtBQUNMLFdBQUssQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUM7S0FDbEI7R0FDRixFQUFFLEVBQUUsQ0FBQyxDQUFDO0NBQ1IiLCJmaWxlIjoiL2hvbWUvdmlvL2tpYmFuYS9zcmMvY2xpL3NlcnZlL2xlZ2FjeV9jb25maWcuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBub29wLCB0cmFuc2Zvcm0gfSBmcm9tICdsb2Rhc2gnO1xuXG4vLyBsZWdhY3lTZXR0aW5ncyBhbGxvdyBraWJhbmEgNC4yKyB0byBhY2NlcHQgdGhlIHNhbWUgY29uZmlnIGZpbGUgdGhhdCBwZW9wbGVcbi8vIHVzZWQgZm9yIGtpYmFuYSA0LjAgYW5kIDQuMS4gVGhlc2Ugc2V0dGluZ3MgYXJlIHRyYW5zZm9ybWVkIHRvIHRoZWlyIG1vZGVyblxuLy8gZXF1aXZhbGVudHMgYXQgdGhlIHZlcnkgYmVnaW5pbmcgb2YgdGhlIHByb2Nlc3NcbmV4cG9ydCBjb25zdCBsZWdhY3lTZXR0aW5ncyA9IHtcbiAgLy8gc2VydmVyXG4gIHBvcnQ6ICdzZXJ2ZXIucG9ydCcsXG4gIGhvc3Q6ICdzZXJ2ZXIuaG9zdCcsXG4gIHBpZF9maWxlOiAncGlkLmZpbGUnLFxuICBzc2xfY2VydF9maWxlOiAnc2VydmVyLnNzbC5jZXJ0JyxcbiAgc3NsX2tleV9maWxlOiAnc2VydmVyLnNzbC5rZXknLFxuXG4gIC8vIGxvZ2dpbmdcbiAgbG9nX2ZpbGU6ICdsb2dnaW5nLmRlc3QnLFxuXG4gIC8vIGtpYmFuYVxuICBraWJhbmFfaW5kZXg6ICdraWJhbmEuaW5kZXgnLFxuICBkZWZhdWx0X2FwcF9pZDogJ2tpYmFuYS5kZWZhdWx0QXBwSWQnLFxuXG4gIC8vIGVzXG4gIGNhOiAnZWxhc3RpY3NlYXJjaC5zc2wuY2EnLFxuICBlbGFzdGljc2VhcmNoX3ByZXNlcnZlX2hvc3Q6ICdlbGFzdGljc2VhcmNoLnByZXNlcnZlSG9zdCcsXG4gIGVsYXN0aWNzZWFyY2hfdXJsOiAnZWxhc3RpY3NlYXJjaC51cmwnLFxuICBraWJhbmFfZWxhc3RpY3NlYXJjaF9jbGllbnRfY3J0OiAnZWxhc3RpY3NlYXJjaC5zc2wuY2VydCcsXG4gIGtpYmFuYV9lbGFzdGljc2VhcmNoX2NsaWVudF9rZXk6ICdlbGFzdGljc2VhcmNoLnNzbC5rZXknLFxuICBraWJhbmFfZWxhc3RpY3NlYXJjaF9wYXNzd29yZDogJ2VsYXN0aWNzZWFyY2gucGFzc3dvcmQnLFxuICBraWJhbmFfZWxhc3RpY3NlYXJjaF91c2VybmFtZTogJ2VsYXN0aWNzZWFyY2gudXNlcm5hbWUnLFxuICBwaW5nX3RpbWVvdXQ6ICdlbGFzdGljc2VhcmNoLnBpbmdUaW1lb3V0JyxcbiAgcmVxdWVzdF90aW1lb3V0OiAnZWxhc3RpY3NlYXJjaC5yZXF1ZXN0VGltZW91dCcsXG4gIHNoYXJkX3RpbWVvdXQ6ICdlbGFzdGljc2VhcmNoLnNoYXJkVGltZW91dCcsXG4gIHN0YXJ0dXBfdGltZW91dDogJ2VsYXN0aWNzZWFyY2guc3RhcnR1cFRpbWVvdXQnLFxuICB2ZXJpZnlfc3NsOiAnZWxhc3RpY3NlYXJjaC5zc2wudmVyaWZ5Jyxcbn07XG5cbi8vIHRyYW5zZm9ybSBsZWdhY3kgb3B0aW9ucyBpbnRvIG5ldyBuYW1lc3BhY2VkIHZlcnNpb25zXG5leHBvcnQgZnVuY3Rpb24gcmV3cml0ZUxlZ2FjeUNvbmZpZyhvYmplY3QsIGxvZyA9IG5vb3ApIHtcbiAgcmV0dXJuIHRyYW5zZm9ybShvYmplY3QsIChjbG9uZSwgdmFsLCBrZXkpID0+IHtcbiAgICBpZiAobGVnYWN5U2V0dGluZ3MuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgY29uc3QgcmVwbGFjZW1lbnQgPSBsZWdhY3lTZXR0aW5nc1trZXldO1xuICAgICAgbG9nKGBDb25maWcga2V5IFwiJHtrZXl9XCIgaXMgZGVwcmVjYXRlZC4gSXQgaGFzIGJlZW4gcmVwbGFjZWQgd2l0aCBcIiR7cmVwbGFjZW1lbnR9XCJgKTtcbiAgICAgIGNsb25lW3JlcGxhY2VtZW50XSA9IHZhbDtcbiAgICB9IGVsc2Uge1xuICAgICAgY2xvbmVba2V5XSA9IHZhbDtcbiAgICB9XG4gIH0sIHt9KTtcbn1cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/cli/serve/legacy_config.js"
      ],
      "names": [],
      "mappings": ";;;;;;;sBAAgC,QAAQ;;;;;AAKjC,IAAM,cAAc,GAAG;;AAE5B,MAAI,EAAE,aAAa;AACnB,MAAI,EAAE,aAAa;AACnB,UAAQ,EAAE,UAAU;AACpB,eAAa,EAAE,iBAAiB;AAChC,cAAY,EAAE,gBAAgB;;;AAG9B,UAAQ,EAAE,cAAc;;;AAGxB,cAAY,EAAE,cAAc;AAC5B,gBAAc,EAAE,qBAAqB;;;AAGrC,IAAE,EAAE,sBAAsB;AAC1B,6BAA2B,EAAE,4BAA4B;AACzD,mBAAiB,EAAE,mBAAmB;AACtC,iCAA+B,EAAE,wBAAwB;AACzD,iCAA+B,EAAE,uBAAuB;AACxD,+BAA6B,EAAE,wBAAwB;AACvD,+BAA6B,EAAE,wBAAwB;AACvD,cAAY,EAAE,2BAA2B;AACzC,iBAAe,EAAE,8BAA8B;AAC/C,eAAa,EAAE,4BAA4B;AAC3C,iBAAe,EAAE,8BAA8B;AAC/C,YAAU,EAAE,0BAA0B;CACvC,CAAC;;;;;AAGK,SAAS,mBAAmB,CAAC,MAAM,EAAc;MAAZ,GAAG;;AAC7C,SAAO,uBAAU,MAAM,EAAE,UAAC,KAAK,EAAE,GAAG,EAAE,GAAG,EAAK;AAC5C,QAAI,cAAc,CAAC,cAAc,CAAC,GAAG,CAAC,EAAE;AACtC,UAAM,WAAW,GAAG,cAAc,CAAC,GAAG,CAAC,CAAC;AACxC,SAAG,kBAAgB,GAAG,oDAA+C,WAAW,OAAI,CAAC;AACrF,WAAK,CAAC,WAAW,CAAC,GAAG,GAAG,CAAC;KAC1B,MAAM;AACL,WAAK,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC;KAClB;GACF,EAAE,EAAE,CAAC,CAAC;CACR",
      "file": "/home/vio/kibana/src/cli/serve/legacy_config.js",
      "sourcesContent": [
        "import { noop, transform } from 'lodash';\n\n// legacySettings allow kibana 4.2+ to accept the same config file that people\n// used for kibana 4.0 and 4.1. These settings are transformed to their modern\n// equivalents at the very begining of the process\nexport const legacySettings = {\n  // server\n  port: 'server.port',\n  host: 'server.host',\n  pid_file: 'pid.file',\n  ssl_cert_file: 'server.ssl.cert',\n  ssl_key_file: 'server.ssl.key',\n\n  // logging\n  log_file: 'logging.dest',\n\n  // kibana\n  kibana_index: 'kibana.index',\n  default_app_id: 'kibana.defaultAppId',\n\n  // es\n  ca: 'elasticsearch.ssl.ca',\n  elasticsearch_preserve_host: 'elasticsearch.preserveHost',\n  elasticsearch_url: 'elasticsearch.url',\n  kibana_elasticsearch_client_crt: 'elasticsearch.ssl.cert',\n  kibana_elasticsearch_client_key: 'elasticsearch.ssl.key',\n  kibana_elasticsearch_password: 'elasticsearch.password',\n  kibana_elasticsearch_username: 'elasticsearch.username',\n  ping_timeout: 'elasticsearch.pingTimeout',\n  request_timeout: 'elasticsearch.requestTimeout',\n  shard_timeout: 'elasticsearch.shardTimeout',\n  startup_timeout: 'elasticsearch.startupTimeout',\n  verify_ssl: 'elasticsearch.ssl.verify',\n};\n\n// transform legacy options into new namespaced versions\nexport function rewriteLegacyConfig(object, log = noop) {\n  return transform(object, (clone, val, key) => {\n    if (legacySettings.hasOwnProperty(key)) {\n      const replacement = legacySettings[key];\n      log(`Config key \"${key}\" is deprecated. It has been replaced with \"${replacement}\"`);\n      clone[replacement] = val;\n    } else {\n      clone[key] = val;\n    }\n  }, {});\n}\n"
      ]
    },
    "mtime": 1467036622785
  },
  "{\"filename\":\"/home/vio/kibana/src/cli/serve/deprecated_config.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "forOwn",
              "has",
              "noop"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "forOwn",
                "local": "forOwn"
              },
              {
                "kind": "named",
                "imported": "has",
                "local": "has"
              },
              {
                "kind": "named",
                "imported": "noop",
                "local": "noop"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "deprecatedSettings",
            "checkForDeprecatedConfig",
            "object",
            "log"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "deprecatedSettings",
              "exported": "deprecatedSettings"
            },
            {
              "kind": "local",
              "local": "checkForDeprecatedConfig",
              "exported": "checkForDeprecatedConfig"
            },
            {
              "kind": "local",
              "local": "object",
              "exported": "object"
            },
            {
              "kind": "local",
              "local": "log",
              "exported": "log"
            }
          ]
        }
      },
      "usedHelpers": [
        "sliced-to-array"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }; })();\n\nexports.checkForDeprecatedConfig = checkForDeprecatedConfig;\n\nvar _lodash = require('lodash');\n\n// deprecated settings are still allowed, but will be removed at a later time. They\n// are checked for after the config object is prepared and known, so legacySettings\n// will have already been transformed.\nvar deprecatedSettings = new Map([[['server', 'xsrf', 'token'], 'server.xsrf.token is deprecated. It is no longer used when providing xsrf protection.']]);\n\nexports.deprecatedSettings = deprecatedSettings;\n// check for and warn about deprecated settings\n\nfunction checkForDeprecatedConfig(object) {\n  var log = arguments.length <= 1 || arguments[1] === undefined ? _lodash.noop : arguments[1];\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = deprecatedSettings.entries()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var _step$value = _slicedToArray(_step.value, 2);\n\n      var key = _step$value[0];\n      var msg = _step$value[1];\n\n      if ((0, _lodash.has)(object, key)) log(msg);\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator['return']) {\n        _iterator['return']();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  return object;\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL2NsaS9zZXJ2ZS9kZXByZWNhdGVkX2NvbmZpZy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O3NCQUFrQyxRQUFROzs7OztBQUtuQyxJQUFNLGtCQUFrQixHQUFHLElBQUksR0FBRyxDQUFDLENBQ3hDLENBQUMsQ0FBQyxRQUFRLEVBQUUsTUFBTSxFQUFFLE9BQU8sQ0FBQyxFQUFFLHVGQUF1RixDQUFDLENBQ3ZILENBQUMsQ0FBQzs7Ozs7QUFHSSxTQUFTLHdCQUF3QixDQUFDLE1BQU0sRUFBYztNQUFaLEdBQUc7Ozs7OztBQUNsRCx5QkFBeUIsa0JBQWtCLENBQUMsT0FBTyxFQUFFLDhIQUFFOzs7VUFBM0MsR0FBRztVQUFFLEdBQUc7O0FBQ2xCLFVBQUksaUJBQUksTUFBTSxFQUFFLEdBQUcsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztLQUNoQzs7Ozs7Ozs7Ozs7Ozs7OztBQUNELFNBQU8sTUFBTSxDQUFDO0NBQ2YiLCJmaWxlIjoiL2hvbWUvdmlvL2tpYmFuYS9zcmMvY2xpL3NlcnZlL2RlcHJlY2F0ZWRfY29uZmlnLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZm9yT3duLCBoYXMsIG5vb3AgfSBmcm9tICdsb2Rhc2gnO1xuXG4vLyBkZXByZWNhdGVkIHNldHRpbmdzIGFyZSBzdGlsbCBhbGxvd2VkLCBidXQgd2lsbCBiZSByZW1vdmVkIGF0IGEgbGF0ZXIgdGltZS4gVGhleVxuLy8gYXJlIGNoZWNrZWQgZm9yIGFmdGVyIHRoZSBjb25maWcgb2JqZWN0IGlzIHByZXBhcmVkIGFuZCBrbm93biwgc28gbGVnYWN5U2V0dGluZ3Ncbi8vIHdpbGwgaGF2ZSBhbHJlYWR5IGJlZW4gdHJhbnNmb3JtZWQuXG5leHBvcnQgY29uc3QgZGVwcmVjYXRlZFNldHRpbmdzID0gbmV3IE1hcChbXG4gIFtbJ3NlcnZlcicsICd4c3JmJywgJ3Rva2VuJ10sICdzZXJ2ZXIueHNyZi50b2tlbiBpcyBkZXByZWNhdGVkLiBJdCBpcyBubyBsb25nZXIgdXNlZCB3aGVuIHByb3ZpZGluZyB4c3JmIHByb3RlY3Rpb24uJ11cbl0pO1xuXG4vLyBjaGVjayBmb3IgYW5kIHdhcm4gYWJvdXQgZGVwcmVjYXRlZCBzZXR0aW5nc1xuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrRm9yRGVwcmVjYXRlZENvbmZpZyhvYmplY3QsIGxvZyA9IG5vb3ApIHtcbiAgZm9yIChjb25zdCBba2V5LCBtc2ddIG9mIGRlcHJlY2F0ZWRTZXR0aW5ncy5lbnRyaWVzKCkpIHtcbiAgICBpZiAoaGFzKG9iamVjdCwga2V5KSkgbG9nKG1zZyk7XG4gIH1cbiAgcmV0dXJuIG9iamVjdDtcbn1cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/cli/serve/deprecated_config.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;sBAAkC,QAAQ;;;;;AAKnC,IAAM,kBAAkB,GAAG,IAAI,GAAG,CAAC,CACxC,CAAC,CAAC,QAAQ,EAAE,MAAM,EAAE,OAAO,CAAC,EAAE,uFAAuF,CAAC,CACvH,CAAC,CAAC;;;;;AAGI,SAAS,wBAAwB,CAAC,MAAM,EAAc;MAAZ,GAAG;;;;;;AAClD,yBAAyB,kBAAkB,CAAC,OAAO,EAAE,8HAAE;;;UAA3C,GAAG;UAAE,GAAG;;AAClB,UAAI,iBAAI,MAAM,EAAE,GAAG,CAAC,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC;KAChC;;;;;;;;;;;;;;;;AACD,SAAO,MAAM,CAAC;CACf",
      "file": "/home/vio/kibana/src/cli/serve/deprecated_config.js",
      "sourcesContent": [
        "import { forOwn, has, noop } from 'lodash';\n\n// deprecated settings are still allowed, but will be removed at a later time. They\n// are checked for after the config object is prepared and known, so legacySettings\n// will have already been transformed.\nexport const deprecatedSettings = new Map([\n  [['server', 'xsrf', 'token'], 'server.xsrf.token is deprecated. It is no longer used when providing xsrf protection.']\n]);\n\n// check for and warn about deprecated settings\nexport function checkForDeprecatedConfig(object, log = noop) {\n  for (const [key, msg] of deprecatedSettings.entries()) {\n    if (has(object, key)) log(msg);\n  }\n  return object;\n}\n"
      ]
    },
    "mtime": 1467036622785
  },
  "{\"filename\":\"/home/vio/kibana/src/server/kbn_server.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "hapi",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Hapi"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "constant",
              "once",
              "compact",
              "flatten"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "constant",
                "local": "constant"
              },
              {
                "kind": "named",
                "imported": "once",
                "local": "once"
              },
              {
                "kind": "named",
                "imported": "compact",
                "local": "compact"
              },
              {
                "kind": "named",
                "imported": "flatten",
                "local": "flatten"
              }
            ]
          },
          {
            "source": "bluebird",
            "imported": [
              "promisify",
              "resolve",
              "fromNode"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "promisify",
                "local": "promisify"
              },
              {
                "kind": "named",
                "imported": "resolve",
                "local": "resolve"
              },
              {
                "kind": "named",
                "imported": "fromNode",
                "local": "fromNode"
              }
            ]
          },
          {
            "source": "cluster",
            "imported": [
              "isWorker"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "isWorker",
                "local": "isWorker"
              }
            ]
          },
          {
            "source": "../utils",
            "imported": [
              "fromRoot",
              "pkg"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "fromRoot",
                "local": "fromRoot"
              },
              {
                "kind": "named",
                "imported": "pkg",
                "local": "pkg"
              }
            ]
          },
          {
            "source": "./config/config",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Config"
              }
            ]
          },
          {
            "source": "./logging/configuration",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "loggingConfiguration"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "async-to-generator",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _hapi = require('hapi');\n\nvar _hapi2 = _interopRequireDefault(_hapi);\n\nvar _lodash = require('lodash');\n\nvar _bluebird = require('bluebird');\n\nvar _cluster = require('cluster');\n\nvar _utils = require('../utils');\n\nvar _configConfig = require('./config/config');\n\nvar _configConfig2 = _interopRequireDefault(_configConfig);\n\nvar _loggingConfiguration = require('./logging/configuration');\n\nvar _loggingConfiguration2 = _interopRequireDefault(_loggingConfiguration);\n\nvar rootDir = (0, _utils.fromRoot)('.');\n\nmodule.exports = (function () {\n  function KbnServer(settings) {\n    var _this = this;\n\n    _classCallCheck(this, KbnServer);\n\n    this.name = _utils.pkg.name;\n    this.version = _utils.pkg.version;\n    this.build = _utils.pkg.build || false;\n    this.rootDir = rootDir;\n    this.settings = settings || {};\n\n    this.ready = (0, _lodash.constant)(this.mixin(require('./config/setup'), // sets this.config, reads this.settings\n    require('./http'), // sets this.server\n    require('./logging'), require('./status'),\n\n    // writes pid file\n    require('./pid'),\n\n    // find plugins and set this.plugins\n    require('./plugins/scan'),\n\n    // tell the config we are done loading plugins\n    require('./config/complete'),\n\n    // setup this.uiExports and this.bundles\n    require('../ui'),\n\n    // setup server.uiSettings\n    require('../ui/settings'),\n\n    // ensure that all bundles are built, or that the\n    // lazy bundle server is running\n    require('../optimize'),\n\n    // finally, initialize the plugins\n    require('./plugins/initialize'), function () {\n      if (_this.config.get('server.autoListen')) {\n        _this.ready = (0, _lodash.constant)((0, _bluebird.resolve)());\n        return _this.listen();\n      }\n    }));\n\n    this.listen = (0, _lodash.once)(this.listen);\n  }\n\n  /**\n   * Extend the KbnServer outside of the constraits of a plugin. This allows access\n   * to APIs that are not exposed (intentionally) to the plugins and should only\n   * be used when the code will be kept up to date with Kibana.\n   *\n   * @param {...function} - functions that should be called to mixin functionality.\n   *                         They are called with the arguments (kibana, server, config)\n   *                         and can return a promise to delay execution of the next mixin\n   * @return {Promise} - promise that is resolved when the final mixin completes.\n   */\n\n  _createClass(KbnServer, [{\n    key: 'mixin',\n    value: _asyncToGenerator(function* () {\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _len = arguments.length, fns = Array(_len), _key = 0; _key < _len; _key++) {\n          fns[_key] = arguments[_key];\n        }\n\n        for (var _iterator = (0, _lodash.compact)((0, _lodash.flatten)(fns))[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var fn = _step.value;\n\n          yield fn.call(this, this, this.server, this.config);\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator['return']) {\n            _iterator['return']();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    })\n\n    /**\n     * Tell the server to listen for incoming requests, or get\n     * a promise that will be resolved once the server is listening.\n     *\n     * @return undefined\n     */\n  }, {\n    key: 'listen',\n    value: _asyncToGenerator(function* () {\n      var server = this.server;\n      var config = this.config;\n\n      yield this.ready();\n      yield (0, _bluebird.fromNode)(function (cb) {\n        return server.start(cb);\n      });\n\n      if (_cluster.isWorker) {\n        // help parent process know when we are ready\n        process.send(['WORKER_LISTENING']);\n      }\n\n      server.log(['listening', 'info'], 'Server running at ' + server.info.uri);\n      return server;\n    })\n  }, {\n    key: 'close',\n    value: _asyncToGenerator(function* () {\n      var _this2 = this;\n\n      yield (0, _bluebird.fromNode)(function (cb) {\n        return _this2.server.stop(cb);\n      });\n    })\n  }, {\n    key: 'inject',\n    value: _asyncToGenerator(function* (opts) {\n      var _this3 = this;\n\n      if (!this.server) yield this.ready();\n\n      return yield (0, _bluebird.fromNode)(function (cb) {\n        try {\n          _this3.server.inject(opts, function (resp) {\n            cb(null, resp);\n          });\n        } catch (err) {\n          cb(err);\n        }\n      });\n    })\n  }, {\n    key: 'applyLoggingConfiguration',\n    value: function applyLoggingConfiguration(settings) {\n      var config = _configConfig2['default'].withDefaultSchema(settings);\n      var loggingOptions = (0, _loggingConfiguration2['default'])(config);\n      var subset = {\n        ops: config.get('ops'),\n        logging: config.get('logging')\n      };\n      var plain = JSON.stringify(subset, null, 2);\n      this.server.log(['info', 'config'], 'New logging configuration:\\n' + plain);\n      this.server.plugins['even-better'].monitor.reconfigure(loggingOptions);\n    }\n  }]);\n\n  return KbnServer;\n})();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3NlcnZlci9rYm5fc2VydmVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7b0JBQWlCLE1BQU07Ozs7c0JBQzBCLFFBQVE7O3dCQUNaLFVBQVU7O3VCQUM5QixTQUFTOztxQkFDSixVQUFVOzs0QkFDckIsaUJBQWlCOzs7O29DQUNILHlCQUF5Qjs7OztBQUUxRCxJQUFJLE9BQU8sR0FBRyxxQkFBUyxHQUFHLENBQUMsQ0FBQzs7QUFFNUIsTUFBTSxDQUFDLE9BQU87QUFDRCxXQURVLFNBQVMsQ0FDbEIsUUFBUSxFQUFFOzs7MEJBREQsU0FBUzs7QUFFNUIsUUFBSSxDQUFDLElBQUksR0FBRyxXQUFJLElBQUksQ0FBQztBQUNyQixRQUFJLENBQUMsT0FBTyxHQUFHLFdBQUksT0FBTyxDQUFDO0FBQzNCLFFBQUksQ0FBQyxLQUFLLEdBQUcsV0FBSSxLQUFLLElBQUksS0FBSyxDQUFDO0FBQ2hDLFFBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDO0FBQ3ZCLFFBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxJQUFJLEVBQUUsQ0FBQzs7QUFFL0IsUUFBSSxDQUFDLEtBQUssR0FBRyxzQkFBUyxJQUFJLENBQUMsS0FBSyxDQUM5QixPQUFPLENBQUMsZ0JBQWdCLENBQUM7QUFDekIsV0FBTyxDQUFDLFFBQVEsQ0FBQztBQUNqQixXQUFPLENBQUMsV0FBVyxDQUFDLEVBQ3BCLE9BQU8sQ0FBQyxVQUFVLENBQUM7OztBQUduQixXQUFPLENBQUMsT0FBTyxDQUFDOzs7QUFHaEIsV0FBTyxDQUFDLGdCQUFnQixDQUFDOzs7QUFHekIsV0FBTyxDQUFDLG1CQUFtQixDQUFDOzs7QUFHNUIsV0FBTyxDQUFDLE9BQU8sQ0FBQzs7O0FBR2hCLFdBQU8sQ0FBQyxnQkFBZ0IsQ0FBQzs7OztBQUl6QixXQUFPLENBQUMsYUFBYSxDQUFDOzs7QUFHdEIsV0FBTyxDQUFDLHNCQUFzQixDQUFDLEVBRS9CLFlBQU07QUFDSixV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QUFDIiwiZmlsZSI6Ii9ob21lL3Zpby9raWJhbmEvc3JjL3NlcnZlci9rYm5fc2VydmVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEhhcGkgZnJvbSAnaGFwaSc7XG5pbXBvcnQgeyBjb25zdGFudCwgb25jZSwgY29tcGFjdCwgZmxhdHRlbiB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgeyBwcm9taXNpZnksIHJlc29sdmUsIGZyb21Ob2RlIH0gZnJvbSAnYmx1ZWJpcmQnO1xuaW1wb3J0IHsgaXNXb3JrZXIgfSBmcm9tICdjbHVzdGVyJztcbmltcG9ydCB7IGZyb21Sb290LCBwa2cgfSBmcm9tICcuLi91dGlscyc7XG5pbXBvcnQgQ29uZmlnIGZyb20gJy4vY29uZmlnL2NvbmZpZyc7XG5pbXBvcnQgbG9nZ2luZ0NvbmZpZ3VyYXRpb24gZnJvbSAnLi9sb2dnaW5nL2NvbmZpZ3VyYXRpb24nO1xuXG5sZXQgcm9vdERpciA9IGZyb21Sb290KCcuJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgS2JuU2VydmVyIHtcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MpIHtcbiAgICB0aGlzLm5hbWUgPSBwa2cubmFtZTtcbiAgICB0aGlzLnZlcnNpb24gPSBwa2cudmVyc2lvbjtcbiAgICB0aGlzLmJ1aWxkID0gcGtnLmJ1aWxkIHx8IGZhbHNlO1xuICAgIHRoaXMucm9vdERpciA9IHJvb3REaXI7XG4gICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzIHx8IHt9O1xuXG4gICAgdGhpcy5yZWFkeSA9IGNvbnN0YW50KHRoaXMubWl4aW4oXG4gICAgICByZXF1aXJlKCcuL2NvbmZpZy9zZXR1cCcpLCAvLyBzZXRzIHRoaXMuY29uZmlnLCByZWFkcyB0aGlzLnNldHRpbmdzXG4gICAgICByZXF1aXJlKCcuL2h0dHAnKSwgLy8gc2V0cyB0aGlzLnNlcnZlclxuICAgICAgcmVxdWlyZSgnLi9sb2dnaW5nJyksXG4gICAgICByZXF1aXJlKCcuL3N0YXR1cycpLFxuXG4gICAgICAvLyB3cml0ZXMgcGlkIGZpbGVcbiAgICAgIHJlcXVpcmUoJy4vcGlkJyksXG5cbiAgICAgIC8vIGZpbmQgcGx1Z2lucyBhbmQgc2V0IHRoaXMucGx1Z2luc1xuICAgICAgcmVxdWlyZSgnLi9wbHVnaW5zL3NjYW4nKSxcblxuICAgICAgLy8gdGVsbCB0aGUgY29uZmlnIHdlIGFyZSBkb25lIGxvYWRpbmcgcGx1Z2luc1xuICAgICAgcmVxdWlyZSgnLi9jb25maWcvY29tcGxldGUnKSxcblxuICAgICAgLy8gc2V0dXAgdGhpcy51aUV4cG9ydHMgYW5kIHRoaXMuYnVuZGxlc1xuICAgICAgcmVxdWlyZSgnLi4vdWknKSxcblxuICAgICAgLy8gc2V0dXAgc2VydmVyLnVpU2V0dGluZ3NcbiAgICAgIHJlcXVpcmUoJy4uL3VpL3NldHRpbmdzJyksXG5cbiAgICAgIC8vIGVuc3VyZSB0aGF0IGFsbCBidW5kbGVzIGFyZSBidWlsdCwgb3IgdGhhdCB0aGVcbiAgICAgIC8vIGxhenkgYnVuZGxlIHNlcnZlciBpcyBydW5uaW5nXG4gICAgICByZXF1aXJlKCcuLi9vcHRpbWl6ZScpLFxuXG4gICAgICAvLyBmaW5hbGx5LCBpbml0aWFsaXplIHRoZSBwbHVnaW5zXG4gICAgICByZXF1aXJlKCcuL3BsdWdpbnMvaW5pdGlhbGl6ZScpLFxuXG4gICAgICAoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5nZXQoJ3NlcnZlci5hdXRvTGlzdGVuJykpIHtcbiAgICAgICAgICB0aGlzLnJlYWR5ID0gY29uc3RhbnQocmVzb2x2ZSgpKTtcbiAgICAgICAgICByZXR1cm4gdGhpcy5saXN0ZW4oKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICkpO1xuXG4gICAgdGhpcy5saXN0ZW4gPSBvbmNlKHRoaXMubGlzdGVuKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHRlbmQgdGhlIEtiblNlcnZlciBvdXRzaWRlIG9mIHRoZSBjb25zdHJhaXRzIG9mIGEgcGx1Z2luLiBUaGlzIGFsbG93cyBhY2Nlc3NcbiAgICogdG8gQVBJcyB0aGF0IGFyZSBub3QgZXhwb3NlZCAoaW50ZW50aW9uYWxseSkgdG8gdGhlIHBsdWdpbnMgYW5kIHNob3VsZCBvbmx5XG4gICAqIGJlIHVzZWQgd2hlbiB0aGUgY29kZSB3aWxsIGJlIGtlcHQgdXAgdG8gZGF0ZSB3aXRoIEtpYmFuYS5cbiAgICpcbiAgICogQHBhcmFtIHsuLi5mdW5jdGlvbn0gLSBmdW5jdGlvbnMgdGhhdCBzaG91bGQgYmUgY2FsbGVkIHRvIG1peGluIGZ1bmN0aW9uYWxpdHkuXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgIFRoZXkgYXJlIGNhbGxlZCB3aXRoIHRoZSBhcmd1bWVudHMgKGtpYmFuYSwgc2VydmVyLCBjb25maWcpXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgIGFuZCBjYW4gcmV0dXJuIGEgcHJvbWlzZSB0byBkZWxheSBleGVjdXRpb24gb2YgdGhlIG5leHQgbWl4aW5cbiAgICogQHJldHVybiB7UHJvbWlzZX0gLSBwcm9taXNlIHRoYXQgaXMgcmVzb2x2ZWQgd2hlbiB0aGUgZmluYWwgbWl4aW4gY29tcGxldGVzLlxuICAgKi9cbiAgYXN5bmMgbWl4aW4oLi4uZm5zKSB7XG4gICAgZm9yIChsZXQgZm4gb2YgY29tcGFjdChmbGF0dGVuKGZucykpKSB7XG4gICAgICBhd2FpdCBmbi5jYWxsKHRoaXMsIHRoaXMsIHRoaXMuc2VydmVyLCB0aGlzLmNvbmZpZyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRlbGwgdGhlIHNlcnZlciB0byBsaXN0ZW4gZm9yIGluY29taW5nIHJlcXVlc3RzLCBvciBnZXRcbiAgICogYSBwcm9taXNlIHRoYXQgd2lsbCBiZSByZXNvbHZlZCBvbmNlIHRoZSBzZXJ2ZXIgaXMgbGlzdGVuaW5nLlxuICAgKlxuICAgKiBAcmV0dXJuIHVuZGVmaW5lZFxuICAgKi9cbiAgYXN5bmMgbGlzdGVuKCkge1xuICAgIGxldCB7IHNlcnZlciwgY29uZmlnIH0gPSB0aGlzO1xuXG4gICAgYXdhaXQgdGhpcy5yZWFkeSgpO1xuICAgIGF3YWl0IGZyb21Ob2RlKGNiID0+IHNlcnZlci5zdGFydChjYikpO1xuXG4gICAgaWYgKGlzV29ya2VyKSB7XG4gICAgICAvLyBoZWxwIHBhcmVudCBwcm9jZXNzIGtub3cgd2hlbiB3ZSBhcmUgcmVhZHlcbiAgICAgIHByb2Nlc3Muc2VuZChbJ1dPUktFUl9MSVNURU5JTkcnXSk7XG4gICAgfVxuXG4gICAgc2VydmVyLmxvZyhbJ2xpc3RlbmluZycsICdpbmZvJ10sIGBTZXJ2ZXIgcnVubmluZyBhdCAke3NlcnZlci5pbmZvLnVyaX1gKTtcbiAgICByZXR1cm4gc2VydmVyO1xuICB9XG5cbiAgYXN5bmMgY2xvc2UoKSB7XG4gICAgYXdhaXQgZnJvbU5vZGUoY2IgPT4gdGhpcy5zZXJ2ZXIuc3RvcChjYikpO1xuICB9XG5cbiAgYXN5bmMgaW5qZWN0KG9wdHMpIHtcbiAgICBpZiAoIXRoaXMuc2VydmVyKSBhd2FpdCB0aGlzLnJlYWR5KCk7XG5cbiAgICByZXR1cm4gYXdhaXQgZnJvbU5vZGUoY2IgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGhpcy5zZXJ2ZXIuaW5qZWN0KG9wdHMsIChyZXNwKSA9PiB7XG4gICAgICAgICAgY2IobnVsbCwgcmVzcCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNiKGVycik7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBhcHBseUxvZ2dpbmdDb25maWd1cmF0aW9uKHNldHRpbmdzKSB7XG4gICAgY29uc3QgY29uZmlnID0gQ29uZmlnLndpdGhEZWZhdWx0U2NoZW1hKHNldHRpbmdzKTtcbiAgICBjb25zdCBsb2dnaW5nT3B0aW9ucyA9IGxvZ2dpbmdDb25maWd1cmF0aW9uKGNvbmZpZyk7XG4gICAgY29uc3Qgc3Vic2V0ID0ge1xuICAgICAgb3BzOiBjb25maWcuZ2V0KCdvcHMnKSxcbiAgICAgIGxvZ2dpbmc6IGNvbmZpZy5nZXQoJ2xvZ2dpbmcnKVxuICAgIH07XG4gICAgY29uc3QgcGxhaW4gPSBKU09OLnN0cmluZ2lmeShzdWJzZXQsIG51bGwsIDIpO1xuICAgIHRoaXMuc2VydmVyLmxvZyhbJ2luZm8nLCAnY29uZmlnJ10sICdOZXcgbG9nZ2luZyBjb25maWd1cmF0aW9uOlxcbicgKyBwbGFpbik7XG4gICAgdGhpcy5zZXJ2ZXIucGx1Z2luc1snZXZlbi1iZXR0ZXInXS5tb25pdG9yLnJlY29uZmlndXJlKGxvZ2dpbmdPcHRpb25zKTtcbiAgfVxufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/server/kbn_server.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/kibana/src/server/kbn_server.js",
      "sourcesContent": [
        "import Hapi from 'hapi';\nimport { constant, once, compact, flatten } from 'lodash';\nimport { promisify, resolve, fromNode } from 'bluebird';\nimport { isWorker } from 'cluster';\nimport { fromRoot, pkg } from '../utils';\nimport Config from './config/config';\nimport loggingConfiguration from './logging/configuration';\n\nlet rootDir = fromRoot('.');\n\nmodule.exports = class KbnServer {\n  constructor(settings) {\n    this.name = pkg.name;\n    this.version = pkg.version;\n    this.build = pkg.build || false;\n    this.rootDir = rootDir;\n    this.settings = settings || {};\n\n    this.ready = constant(this.mixin(\n      require('./config/setup'), // sets this.config, reads this.settings\n      require('./http'), // sets this.server\n      require('./logging'),\n      require('./status'),\n\n      // writes pid file\n      require('./pid'),\n\n      // find plugins and set this.plugins\n      require('./plugins/scan'),\n\n      // tell the config we are done loading plugins\n      require('./config/complete'),\n\n      // setup this.uiExports and this.bundles\n      require('../ui'),\n\n      // setup server.uiSettings\n      require('../ui/settings'),\n\n      // ensure that all bundles are built, or that the\n      // lazy bundle server is running\n      require('../optimize'),\n\n      // finally, initialize the plugins\n      require('./plugins/initialize'),\n\n      () => {\n        if (this.config.get('server.autoListen')) {\n          this.ready = constant(resolve());\n          return this.listen();\n        }\n      }\n    ));\n\n    this.listen = once(this.listen);\n  }\n\n  /**\n   * Extend the KbnServer outside of the constraits of a plugin. This allows access\n   * to APIs that are not exposed (intentionally) to the plugins and should only\n   * be used when the code will be kept up to date with Kibana.\n   *\n   * @param {...function} - functions that should be called to mixin functionality.\n   *                         They are called with the arguments (kibana, server, config)\n   *                         and can return a promise to delay execution of the next mixin\n   * @return {Promise} - promise that is resolved when the final mixin completes.\n   */\n  async mixin(...fns) {\n    for (let fn of compact(flatten(fns))) {\n      await fn.call(this, this, this.server, this.config);\n    }\n  }\n\n  /**\n   * Tell the server to listen for incoming requests, or get\n   * a promise that will be resolved once the server is listening.\n   *\n   * @return undefined\n   */\n  async listen() {\n    let { server, config } = this;\n\n    await this.ready();\n    await fromNode(cb => server.start(cb));\n\n    if (isWorker) {\n      // help parent process know when we are ready\n      process.send(['WORKER_LISTENING']);\n    }\n\n    server.log(['listening', 'info'], `Server running at ${server.info.uri}`);\n    return server;\n  }\n\n  async close() {\n    await fromNode(cb => this.server.stop(cb));\n  }\n\n  async inject(opts) {\n    if (!this.server) await this.ready();\n\n    return await fromNode(cb => {\n      try {\n        this.server.inject(opts, (resp) => {\n          cb(null, resp);\n        });\n      } catch (err) {\n        cb(err);\n      }\n    });\n  }\n\n  applyLoggingConfiguration(settings) {\n    const config = Config.withDefaultSchema(settings);\n    const loggingOptions = loggingConfiguration(config);\n    const subset = {\n      ops: config.get('ops'),\n      logging: config.get('logging')\n    };\n    const plain = JSON.stringify(subset, null, 2);\n    this.server.log(['info', 'config'], 'New logging configuration:\\n' + plain);\n    this.server.plugins['even-better'].monitor.reconfigure(loggingOptions);\n  }\n};\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/kibana/src/server/config/config.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "bluebird",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Promise"
              }
            ]
          },
          {
            "source": "joi",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Joi"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "./override",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "override"
              }
            ]
          },
          {
            "source": "./unset",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "unset"
              }
            ]
          },
          {
            "source": "./schema",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "createDefaultSchema"
              }
            ]
          },
          {
            "source": "../../utils/package_json",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "pkg"
              }
            ]
          },
          {
            "source": "./deep_clone_with_buffers",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "clone"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "define-property",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _bluebird = require('bluebird');\n\nvar _bluebird2 = _interopRequireDefault(_bluebird);\n\nvar _joi = require('joi');\n\nvar _joi2 = _interopRequireDefault(_joi);\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _override = require('./override');\n\nvar _override2 = _interopRequireDefault(_override);\n\nvar _unset = require('./unset');\n\nvar _unset2 = _interopRequireDefault(_unset);\n\nvar _schema = require('./schema');\n\nvar _schema2 = _interopRequireDefault(_schema);\n\nvar _utilsPackage_json = require('../../utils/package_json');\n\nvar _utilsPackage_json2 = _interopRequireDefault(_utilsPackage_json);\n\nvar _deep_clone_with_buffers = require('./deep_clone_with_buffers');\n\nvar _deep_clone_with_buffers2 = _interopRequireDefault(_deep_clone_with_buffers);\n\nvar schema = Symbol('Joi Schema');\nvar schemaExts = Symbol('Schema Extensions');\nvar vals = Symbol('config values');\nvar pendingSets = Symbol('Pending Settings');\n\nmodule.exports = (function () {\n  _createClass(Config, null, [{\n    key: 'withDefaultSchema',\n    value: function withDefaultSchema() {\n      var settings = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n      return new Config((0, _schema2['default'])(), settings);\n    }\n  }]);\n\n  function Config(initialSchema, initialSettings) {\n    _classCallCheck(this, Config);\n\n    this[schemaExts] = Object.create(null);\n    this[vals] = Object.create(null);\n    this[pendingSets] = _lodash2['default'].merge(Object.create(null), initialSettings || {});\n\n    if (initialSchema) this.extendSchema(initialSchema);\n  }\n\n  _createClass(Config, [{\n    key: 'getPendingSets',\n    value: function getPendingSets() {\n      return new Map(_lodash2['default'].pairs(this[pendingSets]));\n    }\n  }, {\n    key: 'extendSchema',\n    value: function extendSchema(key, extension) {\n      var _this = this;\n\n      if (key && key.isJoi) {\n        return _lodash2['default'].each(key._inner.children, function (child) {\n          _this.extendSchema(child.key, child.schema);\n        });\n      }\n\n      if (this.has(key)) {\n        throw new Error('Config schema already has key: ' + key);\n      }\n\n      _lodash2['default'].set(this[schemaExts], key, extension);\n      this[schema] = null;\n\n      var initialVals = _lodash2['default'].get(this[pendingSets], key);\n      if (initialVals) {\n        this.set(key, initialVals);\n        (0, _unset2['default'])(this[pendingSets], key);\n      } else {\n        this._commit(this[vals]);\n      }\n    }\n  }, {\n    key: 'removeSchema',\n    value: function removeSchema(key) {\n      if (!_lodash2['default'].has(this[schemaExts], key)) {\n        throw new TypeError('Unknown schema key: ' + key);\n      }\n\n      this[schema] = null;\n      (0, _unset2['default'])(this[schemaExts], key);\n      (0, _unset2['default'])(this[pendingSets], key);\n      (0, _unset2['default'])(this[vals], key);\n    }\n  }, {\n    key: 'resetTo',\n    value: function resetTo(obj) {\n      this._commit(obj);\n    }\n  }, {\n    key: 'set',\n    value: function set(key, value) {\n      // clone and modify the config\n      var config = (0, _deep_clone_with_buffers2['default'])(this[vals]);\n      if (_lodash2['default'].isPlainObject(key)) {\n        config = (0, _override2['default'])(config, key);\n      } else {\n        _lodash2['default'].set(config, key, value);\n      }\n\n      // attempt to validate the config value\n      this._commit(config);\n    }\n  }, {\n    key: '_commit',\n    value: function _commit(newVals) {\n      // resolve the current environment\n      var env = newVals.env;\n      delete newVals.env;\n      if (_lodash2['default'].isObject(env)) env = env.name;\n      if (!env) env = process.env.NODE_ENV || 'production';\n\n      var dev = env === 'development';\n      var prod = env === 'production';\n\n      // pass the environment as context so that it can be refed in config\n      var context = {\n        env: env,\n        prod: prod,\n        dev: dev,\n        notProd: !prod,\n        notDev: !dev,\n        version: _lodash2['default'].get(_utilsPackage_json2['default'], 'version'),\n        buildNum: dev ? Math.pow(2, 53) - 1 : _lodash2['default'].get(_utilsPackage_json2['default'], 'build.number', NaN),\n        buildSha: dev ? 'XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' : _lodash2['default'].get(_utilsPackage_json2['default'], 'build.sha', '')\n      };\n\n      if (!context.dev && !context.prod) {\n        throw new TypeError('Unexpected environment \"' + env + '\", expected one of \"development\" or \"production\"');\n      }\n\n      var results = _joi2['default'].validate(newVals, this.getSchema(), { context: context });\n\n      if (results.error) {\n        throw results.error;\n      }\n\n      this[vals] = results.value;\n    }\n  }, {\n    key: 'get',\n    value: function get(key) {\n      if (!key) {\n        return (0, _deep_clone_with_buffers2['default'])(this[vals]);\n      }\n\n      var value = _lodash2['default'].get(this[vals], key);\n      if (value === undefined) {\n        if (!this.has(key)) {\n          throw new Error('Unknown config key: ' + key);\n        }\n      }\n      return (0, _deep_clone_with_buffers2['default'])(value);\n    }\n  }, {\n    key: 'has',\n    value: function has(key) {\n      function has(key, schema, path) {\n        path = path || [];\n        // Catch the partial paths\n        if (path.join('.') === key) return true;\n        // Only go deep on inner objects with children\n        if (_lodash2['default'].size(schema._inner.children)) {\n          for (var i = 0; i < schema._inner.children.length; i++) {\n            var child = schema._inner.children[i];\n            // If the child is an object recurse through it's children and return\n            // true if there's a match\n            if (child.schema._type === 'object') {\n              if (has(key, child.schema, path.concat([child.key]))) return true;\n              // if the child matches, return true\n            } else if (path.concat([child.key]).join('.') === key) {\n                return true;\n              }\n          }\n        }\n      }\n\n      if (_lodash2['default'].isArray(key)) {\n        // TODO: add .has() support for array keys\n        key = key.join('.');\n      }\n\n      return !!has(key, this.getSchema());\n    }\n  }, {\n    key: 'getSchema',\n    value: function getSchema() {\n      if (!this[schema]) {\n        this[schema] = (function convertToSchema(children) {\n          var schema = _joi2['default'].object().keys({})['default']();\n\n          var _iteratorNormalCompletion = true;\n          var _didIteratorError = false;\n          var _iteratorError = undefined;\n\n          try {\n            for (var _iterator = Object.keys(children)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n              var key = _step.value;\n\n              var child = children[key];\n              var childSchema = _lodash2['default'].isPlainObject(child) ? convertToSchema(child) : child;\n\n              if (!childSchema || !childSchema.isJoi) {\n                throw new TypeError('Unable to convert configuration definition value to Joi schema: ' + childSchema);\n              }\n\n              schema = schema.keys(_defineProperty({}, key, childSchema));\n            }\n          } catch (err) {\n            _didIteratorError = true;\n            _iteratorError = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion && _iterator['return']) {\n                _iterator['return']();\n              }\n            } finally {\n              if (_didIteratorError) {\n                throw _iteratorError;\n              }\n            }\n          }\n\n          return schema;\n        })(this[schemaExts]);\n      }\n\n      return this[schema];\n    }\n  }]);\n\n  return Config;\n})();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3NlcnZlci9jb25maWcvY29uZmlnLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7d0JBQW9CLFVBQVU7Ozs7bUJBQ2QsS0FBSzs7OztzQkFDUCxRQUFROzs7O3dCQUNELFlBQVk7Ozs7cUJBQ2YsU0FBUzs7OztzQkFDSyxVQUFVOzs7O2lDQUMxQiwwQkFBMEI7Ozs7dUNBQ3hCLDJCQUEyQjs7OztBQUU3QyxJQUFNLE1BQU0sR0FBRyxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUM7QUFDcEMsSUFBTSxVQUFVLEdBQUcsTUFBTSxDQUFDLG1CQUFtQixDQUFDLENBQUM7QUFDL0MsSUFBTSxJQUFJLEdBQUcsTUFBTSxDQUFDLGVBQWUsQ0FBQyxDQUFDO0FBQ3JDLElBQU0sV0FBVyxHQUFHLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDOztBQUUvQyxNQUFNLENBQUMsT0FBTztlQUFTLE1BQU07O1dBQ0gsNkJBQWdCO1VBQWYsUUFBUSx5REFBRyxFQUFFOztBQUNwQyxhQUFPLElBQUksTUFBTSxDQUFDLDBCQUFxQixFQUFFLFFBQVEsQ0FBQyxDQUFDO0tBQ3BEOzs7QUFFVSxXQUxVLE1BQU0sQ0FLZixhQUFhLEVBQUUsZUFBZSxFQUFFOzBCQUx2QixNQUFNOztBQU16QixRQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUN2QyxRQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNqQyxRQUFJLENBQUMsV0FBVyxDQUFDLEdBQUcsb0JBQUUsS0FBSyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsZUFBZSxJQUFJLEVBQUUsQ0FBQyxDQUFDOztBQUV4RSxRQUFJLGFBQWEsRUFBRSxJQUFJLENBQUMsWUFBWSxDQUFDLGFBQWEsQ0FBQyxDQUFDO0dBQ3JEOztlQVhv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QyxVQUFVLENBQUMsQ0FBQyxBQUFDLENBQUM7T0FDdEI7O0FBRUQsYUFBTyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7S0FDckI7OztTQXpLb0IsTUFBTTtJQTBLNUIsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8va2liYW5hL3NyYy9zZXJ2ZXIvY29uZmlnL2NvbmZpZy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQcm9taXNlIGZyb20gJ2JsdWViaXJkJztcbmltcG9ydCBKb2kgZnJvbSAnam9pJztcbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgb3ZlcnJpZGUgZnJvbSAnLi9vdmVycmlkZSc7XG5pbXBvcnQgdW5zZXQgZnJvbSAnLi91bnNldCc7XG5pbXBvcnQgY3JlYXRlRGVmYXVsdFNjaGVtYSBmcm9tICcuL3NjaGVtYSc7XG5pbXBvcnQgcGtnIGZyb20gJy4uLy4uL3V0aWxzL3BhY2thZ2VfanNvbic7XG5pbXBvcnQgY2xvbmUgZnJvbSAnLi9kZWVwX2Nsb25lX3dpdGhfYnVmZmVycyc7XG5cbmNvbnN0IHNjaGVtYSA9IFN5bWJvbCgnSm9pIFNjaGVtYScpO1xuY29uc3Qgc2NoZW1hRXh0cyA9IFN5bWJvbCgnU2NoZW1hIEV4dGVuc2lvbnMnKTtcbmNvbnN0IHZhbHMgPSBTeW1ib2woJ2NvbmZpZyB2YWx1ZXMnKTtcbmNvbnN0IHBlbmRpbmdTZXRzID0gU3ltYm9sKCdQZW5kaW5nIFNldHRpbmdzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgQ29uZmlnIHtcbiAgc3RhdGljIHdpdGhEZWZhdWx0U2NoZW1hKHNldHRpbmdzID0ge30pIHtcbiAgICByZXR1cm4gbmV3IENvbmZpZyhjcmVhdGVEZWZhdWx0U2NoZW1hKCksIHNldHRpbmdzKTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKGluaXRpYWxTY2hlbWEsIGluaXRpYWxTZXR0aW5ncykge1xuICAgIHRoaXNbc2NoZW1hRXh0c10gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRoaXNbdmFsc10gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRoaXNbcGVuZGluZ1NldHNdID0gXy5tZXJnZShPYmplY3QuY3JlYXRlKG51bGwpLCBpbml0aWFsU2V0dGluZ3MgfHwge30pO1xuXG4gICAgaWYgKGluaXRpYWxTY2hlbWEpIHRoaXMuZXh0ZW5kU2NoZW1hKGluaXRpYWxTY2hlbWEpO1xuICB9XG5cbiAgZ2V0UGVuZGluZ1NldHMoKSB7XG4gICAgcmV0dXJuIG5ldyBNYXAoXy5wYWlycyh0aGlzW3BlbmRpbmdTZXRzXSkpO1xuICB9XG5cbiAgZXh0ZW5kU2NoZW1hKGtleSwgZXh0ZW5zaW9uKSB7XG4gICAgaWYgKGtleSAmJiBrZXkuaXNKb2kpIHtcbiAgICAgIHJldHVybiBfLmVhY2goa2V5Ll9pbm5lci5jaGlsZHJlbiwgKGNoaWxkKSA9PiB7XG4gICAgICAgIHRoaXMuZXh0ZW5kU2NoZW1hKGNoaWxkLmtleSwgY2hpbGQuc2NoZW1hKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmhhcyhrZXkpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYENvbmZpZyBzY2hlbWEgYWxyZWFkeSBoYXMga2V5OiAke2tleX1gKTtcbiAgICB9XG5cbiAgICBfLnNldCh0aGlzW3NjaGVtYUV4dHNdLCBrZXksIGV4dGVuc2lvbik7XG4gICAgdGhpc1tzY2hlbWFdID0gbnVsbDtcblxuICAgIGxldCBpbml0aWFsVmFscyA9IF8uZ2V0KHRoaXNbcGVuZGluZ1NldHNdLCBrZXkpO1xuICAgIGlmIChpbml0aWFsVmFscykge1xuICAgICAgdGhpcy5zZXQoa2V5LCBpbml0aWFsVmFscyk7XG4gICAgICB1bnNldCh0aGlzW3BlbmRpbmdTZXRzXSwga2V5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fY29tbWl0KHRoaXNbdmFsc10pO1xuICAgIH1cbiAgfVxuXG4gIHJlbW92ZVNjaGVtYShrZXkpIHtcbiAgICBpZiAoIV8uaGFzKHRoaXNbc2NoZW1hRXh0c10sIGtleSkpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYFVua25vd24gc2NoZW1hIGtleTogJHtrZXl9YCk7XG4gICAgfVxuXG4gICAgdGhpc1tzY2hlbWFdID0gbnVsbDtcbiAgICB1bnNldCh0aGlzW3NjaGVtYUV4dHNdLCBrZXkpO1xuICAgIHVuc2V0KHRoaXNbcGVuZGluZ1NldHNdLCBrZXkpO1xuICAgIHVuc2V0KHRoaXNbdmFsc10sIGtleSk7XG4gIH1cblxuICByZXNldFRvKG9iaikge1xuICAgIHRoaXMuX2NvbW1pdChvYmopO1xuICB9XG5cbiAgc2V0KGtleSwgdmFsdWUpIHtcbiAgICAvLyBjbG9uZSBhbmQgbW9kaWZ5IHRoZSBjb25maWdcbiAgICBsZXQgY29uZmlnID0gY2xvbmUodGhpc1t2YWxzXSk7XG4gICAgaWYgKF8uaXNQbGFpbk9iamVjdChrZXkpKSB7XG4gICAgICBjb25maWcgPSBvdmVycmlkZShjb25maWcsIGtleSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIF8uc2V0KGNvbmZpZywga2V5LCB2YWx1ZSk7XG4gICAgfVxuXG4gICAgLy8gYXR0ZW1wdCB0byB2YWxpZGF0ZSB0aGUgY29uZmlnIHZhbHVlXG4gICAgdGhpcy5fY29tbWl0KGNvbmZpZyk7XG4gIH1cblxuICBfY29tbWl0KG5ld1ZhbHMpIHtcbiAgICAvLyByZXNvbHZlIHRoZSBjdXJyZW50IGVudmlyb25tZW50XG4gICAgbGV0IGVudiA9IG5ld1ZhbHMuZW52O1xuICAgIGRlbGV0ZSBuZXdWYWxzLmVudjtcbiAgICBpZiAoXy5pc09iamVjdChlbnYpKSBlbnYgPSBlbnYubmFtZTtcbiAgICBpZiAoIWVudikgZW52ID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgfHwgJ3Byb2R1Y3Rpb24nO1xuXG4gICAgbGV0IGRldiA9IGVudiA9PT0gJ2RldmVsb3BtZW50JztcbiAgICBsZXQgcHJvZCA9IGVudiA9PT0gJ3Byb2R1Y3Rpb24nO1xuXG4gICAgLy8gcGFzcyB0aGUgZW52aXJvbm1lbnQgYXMgY29udGV4dCBzbyB0aGF0IGl0IGNhbiBiZSByZWZlZCBpbiBjb25maWdcbiAgICBsZXQgY29udGV4dCA9IHtcbiAgICAgIGVudjogZW52LFxuICAgICAgcHJvZDogcHJvZCxcbiAgICAgIGRldjogZGV2LFxuICAgICAgbm90UHJvZDogIXByb2QsXG4gICAgICBub3REZXY6ICFkZXYsXG4gICAgICB2ZXJzaW9uOiBfLmdldChwa2csICd2ZXJzaW9uJyksXG4gICAgICBidWlsZE51bTogZGV2ID8gTWF0aC5wb3coMiwgNTMpIC0gMSA6IF8uZ2V0KHBrZywgJ2J1aWxkLm51bWJlcicsIE5hTiksXG4gICAgICBidWlsZFNoYTogZGV2ID8gJ1hYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFgnIDogXy5nZXQocGtnLCAnYnVpbGQuc2hhJywgJycpXG4gICAgfTtcblxuICAgIGlmICghY29udGV4dC5kZXYgJiYgIWNvbnRleHQucHJvZCkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICAgYFVuZXhwZWN0ZWQgZW52aXJvbm1lbnQgXCIke2Vudn1cIiwgZXhwZWN0ZWQgb25lIG9mIFwiZGV2ZWxvcG1lbnRcIiBvciBcInByb2R1Y3Rpb25cImBcbiAgICAgICk7XG4gICAgfVxuXG4gICAgbGV0IHJlc3VsdHMgPSBKb2kudmFsaWRhdGUobmV3VmFscywgdGhpcy5nZXRTY2hlbWEoKSwgeyBjb250ZXh0IH0pO1xuXG4gICAgaWYgKHJlc3VsdHMuZXJyb3IpIHtcbiAgICAgIHRocm93IHJlc3VsdHMuZXJyb3I7XG4gICAgfVxuXG4gICAgdGhpc1t2YWxzXSA9IHJlc3VsdHMudmFsdWU7XG4gIH1cblxuICBnZXQoa2V5KSB7XG4gICAgaWYgKCFrZXkpIHtcbiAgICAgIHJldHVybiBjbG9uZSh0aGlzW3ZhbHNdKTtcbiAgICB9XG5cbiAgICBsZXQgdmFsdWUgPSBfLmdldCh0aGlzW3ZhbHNdLCBrZXkpO1xuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAoIXRoaXMuaGFzKGtleSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmtub3duIGNvbmZpZyBrZXk6ICcgKyBrZXkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY2xvbmUodmFsdWUpO1xuICB9XG5cbiAgaGFzKGtleSkge1xuICAgIGZ1bmN0aW9uIGhhcyhrZXksIHNjaGVtYSwgcGF0aCkge1xuICAgICAgcGF0aCA9IHBhdGggfHwgW107XG4gICAgICAvLyBDYXRjaCB0aGUgcGFydGlhbCBwYXRoc1xuICAgICAgaWYgKHBhdGguam9pbignLicpID09PSBrZXkpIHJldHVybiB0cnVlO1xuICAgICAgLy8gT25seSBnbyBkZWVwIG9uIGlubmVyIG9iamVjdHMgd2l0aCBjaGlsZHJlblxuICAgICAgaWYgKF8uc2l6ZShzY2hlbWEuX2lubmVyLmNoaWxkcmVuKSkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNjaGVtYS5faW5uZXIuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBsZXQgY2hpbGQgPSBzY2hlbWEuX2lubmVyLmNoaWxkcmVuW2ldO1xuICAgICAgICAgIC8vIElmIHRoZSBjaGlsZCBpcyBhbiBvYmplY3QgcmVjdXJzZSB0aHJvdWdoIGl0J3MgY2hpbGRyZW4gYW5kIHJldHVyblxuICAgICAgICAgIC8vIHRydWUgaWYgdGhlcmUncyBhIG1hdGNoXG4gICAgICAgICAgaWYgKGNoaWxkLnNjaGVtYS5fdHlwZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGlmIChoYXMoa2V5LCBjaGlsZC5zY2hlbWEsIHBhdGguY29uY2F0KFtjaGlsZC5rZXldKSkpIHJldHVybiB0cnVlO1xuICAgICAgICAgIC8vIGlmIHRoZSBjaGlsZCBtYXRjaGVzLCByZXR1cm4gdHJ1ZVxuICAgICAgICAgIH0gZWxzZSBpZiAocGF0aC5jb25jYXQoW2NoaWxkLmtleV0pLmpvaW4oJy4nKSA9PT0ga2V5KSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoXy5pc0FycmF5KGtleSkpIHtcbiAgICAgIC8vIFRPRE86IGFkZCAuaGFzKCkgc3VwcG9ydCBmb3IgYXJyYXkga2V5c1xuICAgICAga2V5ID0ga2V5LmpvaW4oJy4nKTtcbiAgICB9XG5cbiAgICByZXR1cm4gISFoYXMoa2V5LCB0aGlzLmdldFNjaGVtYSgpKTtcbiAgfVxuXG4gIGdldFNjaGVtYSgpIHtcbiAgICBpZiAoIXRoaXNbc2NoZW1hXSkge1xuICAgICAgdGhpc1tzY2hlbWFdID0gKGZ1bmN0aW9uIGNvbnZlcnRUb1NjaGVtYShjaGlsZHJlbikge1xuICAgICAgICBsZXQgc2NoZW1hID0gSm9pLm9iamVjdCgpLmtleXMoe30pLmRlZmF1bHQoKTtcblxuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhjaGlsZHJlbikpIHtcbiAgICAgICAgICBjb25zdCBjaGlsZCA9IGNoaWxkcmVuW2tleV07XG4gICAgICAgICAgY29uc3QgY2hpbGRTY2hlbWEgPSBfLmlzUGxhaW5PYmplY3QoY2hpbGQpID8gY29udmVydFRvU2NoZW1hKGNoaWxkKSA6IGNoaWxkO1xuXG4gICAgICAgICAgaWYgKCFjaGlsZFNjaGVtYSB8fCAhY2hpbGRTY2hlbWEuaXNKb2kpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1VuYWJsZSB0byBjb252ZXJ0IGNvbmZpZ3VyYXRpb24gZGVmaW5pdGlvbiB2YWx1ZSB0byBKb2kgc2NoZW1hOiAnICsgY2hpbGRTY2hlbWEpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHNjaGVtYSA9IHNjaGVtYS5rZXlzKHsgW2tleV06IGNoaWxkU2NoZW1hIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNjaGVtYTtcbiAgICAgIH0odGhpc1tzY2hlbWFFeHRzXSkpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzW3NjaGVtYV07XG4gIH1cbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/server/config/config.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/kibana/src/server/config/config.js",
      "sourcesContent": [
        "import Promise from 'bluebird';\nimport Joi from 'joi';\nimport _ from 'lodash';\nimport override from './override';\nimport unset from './unset';\nimport createDefaultSchema from './schema';\nimport pkg from '../../utils/package_json';\nimport clone from './deep_clone_with_buffers';\n\nconst schema = Symbol('Joi Schema');\nconst schemaExts = Symbol('Schema Extensions');\nconst vals = Symbol('config values');\nconst pendingSets = Symbol('Pending Settings');\n\nmodule.exports = class Config {\n  static withDefaultSchema(settings = {}) {\n    return new Config(createDefaultSchema(), settings);\n  }\n\n  constructor(initialSchema, initialSettings) {\n    this[schemaExts] = Object.create(null);\n    this[vals] = Object.create(null);\n    this[pendingSets] = _.merge(Object.create(null), initialSettings || {});\n\n    if (initialSchema) this.extendSchema(initialSchema);\n  }\n\n  getPendingSets() {\n    return new Map(_.pairs(this[pendingSets]));\n  }\n\n  extendSchema(key, extension) {\n    if (key && key.isJoi) {\n      return _.each(key._inner.children, (child) => {\n        this.extendSchema(child.key, child.schema);\n      });\n    }\n\n    if (this.has(key)) {\n      throw new Error(`Config schema already has key: ${key}`);\n    }\n\n    _.set(this[schemaExts], key, extension);\n    this[schema] = null;\n\n    let initialVals = _.get(this[pendingSets], key);\n    if (initialVals) {\n      this.set(key, initialVals);\n      unset(this[pendingSets], key);\n    } else {\n      this._commit(this[vals]);\n    }\n  }\n\n  removeSchema(key) {\n    if (!_.has(this[schemaExts], key)) {\n      throw new TypeError(`Unknown schema key: ${key}`);\n    }\n\n    this[schema] = null;\n    unset(this[schemaExts], key);\n    unset(this[pendingSets], key);\n    unset(this[vals], key);\n  }\n\n  resetTo(obj) {\n    this._commit(obj);\n  }\n\n  set(key, value) {\n    // clone and modify the config\n    let config = clone(this[vals]);\n    if (_.isPlainObject(key)) {\n      config = override(config, key);\n    } else {\n      _.set(config, key, value);\n    }\n\n    // attempt to validate the config value\n    this._commit(config);\n  }\n\n  _commit(newVals) {\n    // resolve the current environment\n    let env = newVals.env;\n    delete newVals.env;\n    if (_.isObject(env)) env = env.name;\n    if (!env) env = process.env.NODE_ENV || 'production';\n\n    let dev = env === 'development';\n    let prod = env === 'production';\n\n    // pass the environment as context so that it can be refed in config\n    let context = {\n      env: env,\n      prod: prod,\n      dev: dev,\n      notProd: !prod,\n      notDev: !dev,\n      version: _.get(pkg, 'version'),\n      buildNum: dev ? Math.pow(2, 53) - 1 : _.get(pkg, 'build.number', NaN),\n      buildSha: dev ? 'XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' : _.get(pkg, 'build.sha', '')\n    };\n\n    if (!context.dev && !context.prod) {\n      throw new TypeError(\n        `Unexpected environment \"${env}\", expected one of \"development\" or \"production\"`\n      );\n    }\n\n    let results = Joi.validate(newVals, this.getSchema(), { context });\n\n    if (results.error) {\n      throw results.error;\n    }\n\n    this[vals] = results.value;\n  }\n\n  get(key) {\n    if (!key) {\n      return clone(this[vals]);\n    }\n\n    let value = _.get(this[vals], key);\n    if (value === undefined) {\n      if (!this.has(key)) {\n        throw new Error('Unknown config key: ' + key);\n      }\n    }\n    return clone(value);\n  }\n\n  has(key) {\n    function has(key, schema, path) {\n      path = path || [];\n      // Catch the partial paths\n      if (path.join('.') === key) return true;\n      // Only go deep on inner objects with children\n      if (_.size(schema._inner.children)) {\n        for (let i = 0; i < schema._inner.children.length; i++) {\n          let child = schema._inner.children[i];\n          // If the child is an object recurse through it's children and return\n          // true if there's a match\n          if (child.schema._type === 'object') {\n            if (has(key, child.schema, path.concat([child.key]))) return true;\n          // if the child matches, return true\n          } else if (path.concat([child.key]).join('.') === key) {\n            return true;\n          }\n        }\n      }\n    }\n\n    if (_.isArray(key)) {\n      // TODO: add .has() support for array keys\n      key = key.join('.');\n    }\n\n    return !!has(key, this.getSchema());\n  }\n\n  getSchema() {\n    if (!this[schema]) {\n      this[schema] = (function convertToSchema(children) {\n        let schema = Joi.object().keys({}).default();\n\n        for (const key of Object.keys(children)) {\n          const child = children[key];\n          const childSchema = _.isPlainObject(child) ? convertToSchema(child) : child;\n\n          if (!childSchema || !childSchema.isJoi) {\n            throw new TypeError('Unable to convert configuration definition value to Joi schema: ' + childSchema);\n          }\n\n          schema = schema.keys({ [key]: childSchema });\n        }\n\n        return schema;\n      }(this[schemaExts]));\n    }\n\n    return this[schema];\n  }\n};\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/kibana/src/server/config/override.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "./flatten_with",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "flattenWith"
              }
            ]
          },
          {
            "source": "./explode_by",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "explodeBy"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _flatten_with = require('./flatten_with');\n\nvar _flatten_with2 = _interopRequireDefault(_flatten_with);\n\nvar _explode_by = require('./explode_by');\n\nvar _explode_by2 = _interopRequireDefault(_explode_by);\n\nmodule.exports = function (target, source) {\n  var _target = (0, _flatten_with2['default'])('.', target);\n  var _source = (0, _flatten_with2['default'])('.', source);\n  return (0, _explode_by2['default'])('.', _lodash2['default'].defaults(_source, _target));\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3NlcnZlci9jb25maWcvb3ZlcnJpZGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztzQkFBYyxRQUFROzs7OzRCQUNFLGdCQUFnQjs7OzswQkFDbEIsY0FBYzs7OztBQUVwQyxNQUFNLENBQUMsT0FBTyxHQUFHLFVBQVUsTUFBTSxFQUFFLE1BQU0sRUFBRTtBQUN6QyxNQUFJLE9BQU8sR0FBRywrQkFBWSxHQUFHLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFDdkMsTUFBSSxPQUFPLEdBQUcsK0JBQVksR0FBRyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQ3ZDLFNBQU8sNkJBQVUsR0FBRyxFQUFFLG9CQUFFLFFBQVEsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQztDQUNyRCxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby9raWJhbmEvc3JjL3NlcnZlci9jb25maWcvb3ZlcnJpZGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IGZsYXR0ZW5XaXRoIGZyb20gJy4vZmxhdHRlbl93aXRoJztcbmltcG9ydCBleHBsb2RlQnkgZnJvbSAnLi9leHBsb2RlX2J5JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodGFyZ2V0LCBzb3VyY2UpIHtcbiAgbGV0IF90YXJnZXQgPSBmbGF0dGVuV2l0aCgnLicsIHRhcmdldCk7XG4gIGxldCBfc291cmNlID0gZmxhdHRlbldpdGgoJy4nLCBzb3VyY2UpO1xuICByZXR1cm4gZXhwbG9kZUJ5KCcuJywgXy5kZWZhdWx0cyhfc291cmNlLCBfdGFyZ2V0KSk7XG59O1xuXG5cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/server/config/override.js"
      ],
      "names": [],
      "mappings": ";;;;sBAAc,QAAQ;;;;4BACE,gBAAgB;;;;0BAClB,cAAc;;;;AAEpC,MAAM,CAAC,OAAO,GAAG,UAAU,MAAM,EAAE,MAAM,EAAE;AACzC,MAAI,OAAO,GAAG,+BAAY,GAAG,EAAE,MAAM,CAAC,CAAC;AACvC,MAAI,OAAO,GAAG,+BAAY,GAAG,EAAE,MAAM,CAAC,CAAC;AACvC,SAAO,6BAAU,GAAG,EAAE,oBAAE,QAAQ,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC,CAAC;CACrD,CAAC",
      "file": "/home/vio/kibana/src/server/config/override.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport flattenWith from './flatten_with';\nimport explodeBy from './explode_by';\n\nmodule.exports = function (target, source) {\n  let _target = flattenWith('.', target);\n  let _source = flattenWith('.', source);\n  return explodeBy('.', _.defaults(_source, _target));\n};\n\n\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/kibana/src/server/config/flatten_with.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nmodule.exports = function (dot, nestedObj, flattenArrays) {\n  var key = undefined; // original key\n  var stack = []; // track key stack\n  var flatObj = {};\n  (function flattenObj(obj) {\n    _lodash2['default'].keys(obj).forEach(function (key) {\n      stack.push(key);\n      if (!flattenArrays && _lodash2['default'].isArray(obj[key])) flatObj[stack.join(dot)] = obj[key];else if (_lodash2['default'].isObject(obj[key])) flattenObj(obj[key]);else flatObj[stack.join(dot)] = obj[key];\n      stack.pop();\n    });\n  })(nestedObj);\n  return flatObj;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3NlcnZlci9jb25maWcvZmxhdHRlbl93aXRoLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7c0JBQWMsUUFBUTs7OztBQUN0QixNQUFNLENBQUMsT0FBTyxHQUFHLFVBQVUsR0FBRyxFQUFFLFNBQVMsRUFBRSxhQUFhLEVBQUU7QUFDeEQsTUFBSSxHQUFHLFlBQUEsQ0FBQztBQUNSLE1BQUksS0FBSyxHQUFHLEVBQUUsQ0FBQztBQUNmLE1BQUksT0FBTyxHQUFHLEVBQUUsQ0FBQztBQUNqQixBQUFDLEdBQUEsU0FBUyxVQUFVLENBQUMsR0FBRyxFQUFFO0FBQ3hCLHdCQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUMsVUFBVSxHQUFHLEVBQUU7QUFDakMsV0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNoQixVQUFJLENBQUMsYUFBYSxJQUFJLG9CQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxPQUFPLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUMxRSxJQUFJLG9CQUFFLFFBQVEsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxVQUFVLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsS0FDL0MsT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDekMsV0FBSyxDQUFDLEdBQUcsRUFBRSxDQUFDO0tBQ2IsQ0FBQyxDQUFDO0dBQ0osQ0FBQSxDQUFDLFNBQVMsQ0FBQyxDQUFFO0FBQ2QsU0FBTyxPQUFPLENBQUM7Q0FDaEIsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8va2liYW5hL3NyYy9zZXJ2ZXIvY29uZmlnL2ZsYXR0ZW5fd2l0aC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChkb3QsIG5lc3RlZE9iaiwgZmxhdHRlbkFycmF5cykge1xuICBsZXQga2V5OyAvLyBvcmlnaW5hbCBrZXlcbiAgbGV0IHN0YWNrID0gW107IC8vIHRyYWNrIGtleSBzdGFja1xuICBsZXQgZmxhdE9iaiA9IHt9O1xuICAoZnVuY3Rpb24gZmxhdHRlbk9iaihvYmopIHtcbiAgICBfLmtleXMob2JqKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIHN0YWNrLnB1c2goa2V5KTtcbiAgICAgIGlmICghZmxhdHRlbkFycmF5cyAmJiBfLmlzQXJyYXkob2JqW2tleV0pKSBmbGF0T2JqW3N0YWNrLmpvaW4oZG90KV0gPSBvYmpba2V5XTtcbiAgICAgIGVsc2UgaWYgKF8uaXNPYmplY3Qob2JqW2tleV0pKSBmbGF0dGVuT2JqKG9ialtrZXldKTtcbiAgICAgIGVsc2UgZmxhdE9ialtzdGFjay5qb2luKGRvdCldID0gb2JqW2tleV07XG4gICAgICBzdGFjay5wb3AoKTtcbiAgICB9KTtcbiAgfShuZXN0ZWRPYmopKTtcbiAgcmV0dXJuIGZsYXRPYmo7XG59O1xuXG5cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/server/config/flatten_with.js"
      ],
      "names": [],
      "mappings": ";;;;sBAAc,QAAQ;;;;AACtB,MAAM,CAAC,OAAO,GAAG,UAAU,GAAG,EAAE,SAAS,EAAE,aAAa,EAAE;AACxD,MAAI,GAAG,YAAA,CAAC;AACR,MAAI,KAAK,GAAG,EAAE,CAAC;AACf,MAAI,OAAO,GAAG,EAAE,CAAC;AACjB,AAAC,GAAA,SAAS,UAAU,CAAC,GAAG,EAAE;AACxB,wBAAE,IAAI,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,UAAU,GAAG,EAAE;AACjC,WAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AAChB,UAAI,CAAC,aAAa,IAAI,oBAAE,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC,KAC1E,IAAI,oBAAE,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,UAAU,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,KAC/C,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC;AACzC,WAAK,CAAC,GAAG,EAAE,CAAC;KACb,CAAC,CAAC;GACJ,CAAA,CAAC,SAAS,CAAC,CAAE;AACd,SAAO,OAAO,CAAC;CAChB,CAAC",
      "file": "/home/vio/kibana/src/server/config/flatten_with.js",
      "sourcesContent": [
        "import _ from 'lodash';\nmodule.exports = function (dot, nestedObj, flattenArrays) {\n  let key; // original key\n  let stack = []; // track key stack\n  let flatObj = {};\n  (function flattenObj(obj) {\n    _.keys(obj).forEach(function (key) {\n      stack.push(key);\n      if (!flattenArrays && _.isArray(obj[key])) flatObj[stack.join(dot)] = obj[key];\n      else if (_.isObject(obj[key])) flattenObj(obj[key]);\n      else flatObj[stack.join(dot)] = obj[key];\n      stack.pop();\n    });\n  }(nestedObj));\n  return flatObj;\n};\n\n\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/kibana/src/server/config/explode_by.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nmodule.exports = function (dot, flatObject) {\n  var fullObject = {};\n  _lodash2['default'].each(flatObject, function (value, key) {\n    var keys = key.split(dot);\n    (function walk(memo, keys, value) {\n      var _key = keys.shift();\n      if (keys.length === 0) {\n        memo[_key] = value;\n      } else {\n        if (!memo[_key]) memo[_key] = {};\n        walk(memo[_key], keys, value);\n      }\n    })(fullObject, keys, value);\n  });\n  return fullObject;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3NlcnZlci9jb25maWcvZXhwbG9kZV9ieS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O3NCQUFjLFFBQVE7Ozs7QUFDdEIsTUFBTSxDQUFDLE9BQU8sR0FBRyxVQUFVLEdBQUcsRUFBRSxVQUFVLEVBQUU7QUFDMUMsTUFBSSxVQUFVLEdBQUcsRUFBRSxDQUFDO0FBQ3BCLHNCQUFFLElBQUksQ0FBQyxVQUFVLEVBQUUsVUFBVSxLQUFLLEVBQUUsR0FBRyxFQUFFO0FBQ3ZDLFFBQUksSUFBSSxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDMUIsQUFBQyxLQUFBLFNBQVMsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFO0FBQ2hDLFVBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztBQUN4QixVQUFJLElBQUksQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFO0FBQ3JCLFlBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxLQUFLLENBQUM7T0FDcEIsTUFBTTtBQUNMLFlBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztBQUNqQyxZQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQztPQUMvQjtLQUNGLENBQUEsQ0FBQyxVQUFVLEVBQUUsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFFO0dBQzdCLENBQUMsQ0FBQztBQUNILFNBQU8sVUFBVSxDQUFDO0NBQ25CLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL2tpYmFuYS9zcmMvc2VydmVyL2NvbmZpZy9leHBsb2RlX2J5LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGRvdCwgZmxhdE9iamVjdCkge1xuICBsZXQgZnVsbE9iamVjdCA9IHt9O1xuICBfLmVhY2goZmxhdE9iamVjdCwgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcbiAgICBsZXQga2V5cyA9IGtleS5zcGxpdChkb3QpO1xuICAgIChmdW5jdGlvbiB3YWxrKG1lbW8sIGtleXMsIHZhbHVlKSB7XG4gICAgICBsZXQgX2tleSA9IGtleXMuc2hpZnQoKTtcbiAgICAgIGlmIChrZXlzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBtZW1vW19rZXldID0gdmFsdWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIW1lbW9bX2tleV0pIG1lbW9bX2tleV0gPSB7fTtcbiAgICAgICAgd2FsayhtZW1vW19rZXldLCBrZXlzLCB2YWx1ZSk7XG4gICAgICB9XG4gICAgfShmdWxsT2JqZWN0LCBrZXlzLCB2YWx1ZSkpO1xuICB9KTtcbiAgcmV0dXJuIGZ1bGxPYmplY3Q7XG59O1xuXG5cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/server/config/explode_by.js"
      ],
      "names": [],
      "mappings": ";;;;sBAAc,QAAQ;;;;AACtB,MAAM,CAAC,OAAO,GAAG,UAAU,GAAG,EAAE,UAAU,EAAE;AAC1C,MAAI,UAAU,GAAG,EAAE,CAAC;AACpB,sBAAE,IAAI,CAAC,UAAU,EAAE,UAAU,KAAK,EAAE,GAAG,EAAE;AACvC,QAAI,IAAI,GAAG,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AAC1B,AAAC,KAAA,SAAS,IAAI,CAAC,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE;AAChC,UAAI,IAAI,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC;AACxB,UAAI,IAAI,CAAC,MAAM,KAAK,CAAC,EAAE;AACrB,YAAI,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC;OACpB,MAAM;AACL,YAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC;AACjC,YAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;OAC/B;KACF,CAAA,CAAC,UAAU,EAAE,IAAI,EAAE,KAAK,CAAC,CAAE;GAC7B,CAAC,CAAC;AACH,SAAO,UAAU,CAAC;CACnB,CAAC",
      "file": "/home/vio/kibana/src/server/config/explode_by.js",
      "sourcesContent": [
        "import _ from 'lodash';\nmodule.exports = function (dot, flatObject) {\n  let fullObject = {};\n  _.each(flatObject, function (value, key) {\n    let keys = key.split(dot);\n    (function walk(memo, keys, value) {\n      let _key = keys.shift();\n      if (keys.length === 0) {\n        memo[_key] = value;\n      } else {\n        if (!memo[_key]) memo[_key] = {};\n        walk(memo[_key], keys, value);\n      }\n    }(fullObject, keys, value));\n  });\n  return fullObject;\n};\n\n\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/kibana/src/server/config/unset.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "lodash/internal/toPath",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "toPath"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _lodashInternalToPath = require('lodash/internal/toPath');\n\nvar _lodashInternalToPath2 = _interopRequireDefault(_lodashInternalToPath);\n\nmodule.exports = function unset(object, rawPath) {\n  if (!object) return;\n  var path = (0, _lodashInternalToPath2['default'])(rawPath);\n\n  switch (path.length) {\n    case 0:\n      return;\n\n    case 1:\n      delete object[rawPath];\n      break;\n\n    default:\n      var leaf = path.pop();\n      var parentPath = path.slice();\n      var parent = _lodash2['default'].get(object, parentPath);\n      unset(parent, leaf);\n      if (!_lodash2['default'].size(parent)) {\n        unset(object, parentPath);\n      }\n      break;\n  }\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3NlcnZlci9jb25maWcvdW5zZXQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztzQkFBYyxRQUFROzs7O29DQUNILHdCQUF3Qjs7OztBQUUzQyxNQUFNLENBQUMsT0FBTyxHQUFHLFNBQVMsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUU7QUFDL0MsTUFBSSxDQUFDLE1BQU0sRUFBRSxPQUFPO0FBQ3BCLE1BQU0sSUFBSSxHQUFHLHVDQUFPLE9BQU8sQ0FBQyxDQUFDOztBQUU3QixVQUFRLElBQUksQ0FBQyxNQUFNO0FBQ2pCLFNBQUssQ0FBQztBQUNKLGFBQU87O0FBQUEsQUFFVCxTQUFLLENBQUM7QUFDSixhQUFPLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUN2QixZQUFNOztBQUFBLEFBRVI7QUFDRSxVQUFNLElBQUksR0FBRyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7QUFDeEIsVUFBTSxVQUFVLEdBQUcsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO0FBQ2hDLFVBQU0sTUFBTSxHQUFHLG9CQUFFLEdBQUcsQ0FBQyxNQUFNLEVBQUUsVUFBVSxDQUFDLENBQUM7QUFDekMsV0FBSyxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQztBQUNwQixVQUFJLENBQUMsb0JBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFO0FBQ25CLGFBQUssQ0FBQyxNQUFNLEVBQUUsVUFBVSxDQUFDLENBQUM7T0FDM0I7QUFDRCxZQUFNO0FBQUEsR0FDVDtDQUNGLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL2tpYmFuYS9zcmMvc2VydmVyL2NvbmZpZy91bnNldC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgdG9QYXRoIGZyb20gJ2xvZGFzaC9pbnRlcm5hbC90b1BhdGgnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHVuc2V0KG9iamVjdCwgcmF3UGF0aCkge1xuICBpZiAoIW9iamVjdCkgcmV0dXJuO1xuICBjb25zdCBwYXRoID0gdG9QYXRoKHJhd1BhdGgpO1xuXG4gIHN3aXRjaCAocGF0aC5sZW5ndGgpIHtcbiAgICBjYXNlIDA6XG4gICAgICByZXR1cm47XG5cbiAgICBjYXNlIDE6XG4gICAgICBkZWxldGUgb2JqZWN0W3Jhd1BhdGhdO1xuICAgICAgYnJlYWs7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgY29uc3QgbGVhZiA9IHBhdGgucG9wKCk7XG4gICAgICBjb25zdCBwYXJlbnRQYXRoID0gcGF0aC5zbGljZSgpO1xuICAgICAgY29uc3QgcGFyZW50ID0gXy5nZXQob2JqZWN0LCBwYXJlbnRQYXRoKTtcbiAgICAgIHVuc2V0KHBhcmVudCwgbGVhZik7XG4gICAgICBpZiAoIV8uc2l6ZShwYXJlbnQpKSB7XG4gICAgICAgIHVuc2V0KG9iamVjdCwgcGFyZW50UGF0aCk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgfVxufTsiXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/server/config/unset.js"
      ],
      "names": [],
      "mappings": ";;;;sBAAc,QAAQ;;;;oCACH,wBAAwB;;;;AAE3C,MAAM,CAAC,OAAO,GAAG,SAAS,KAAK,CAAC,MAAM,EAAE,OAAO,EAAE;AAC/C,MAAI,CAAC,MAAM,EAAE,OAAO;AACpB,MAAM,IAAI,GAAG,uCAAO,OAAO,CAAC,CAAC;;AAE7B,UAAQ,IAAI,CAAC,MAAM;AACjB,SAAK,CAAC;AACJ,aAAO;;AAAA,AAET,SAAK,CAAC;AACJ,aAAO,MAAM,CAAC,OAAO,CAAC,CAAC;AACvB,YAAM;;AAAA,AAER;AACE,UAAM,IAAI,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;AACxB,UAAM,UAAU,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC;AAChC,UAAM,MAAM,GAAG,oBAAE,GAAG,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC;AACzC,WAAK,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;AACpB,UAAI,CAAC,oBAAE,IAAI,CAAC,MAAM,CAAC,EAAE;AACnB,aAAK,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC;OAC3B;AACD,YAAM;AAAA,GACT;CACF,CAAC",
      "file": "/home/vio/kibana/src/server/config/unset.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport toPath from 'lodash/internal/toPath';\n\nmodule.exports = function unset(object, rawPath) {\n  if (!object) return;\n  const path = toPath(rawPath);\n\n  switch (path.length) {\n    case 0:\n      return;\n\n    case 1:\n      delete object[rawPath];\n      break;\n\n    default:\n      const leaf = path.pop();\n      const parentPath = path.slice();\n      const parent = _.get(object, parentPath);\n      unset(parent, leaf);\n      if (!_.size(parent)) {\n        unset(object, parentPath);\n      }\n      break;\n  }\n};"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/kibana/src/server/config/schema.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "joi",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Joi"
              }
            ]
          },
          {
            "source": "fs",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "fs"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "path"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "get"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "get",
                "local": "get"
              }
            ]
          },
          {
            "source": "crypto",
            "imported": [
              "randomBytes"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "randomBytes",
                "local": "randomBytes"
              }
            ]
          },
          {
            "source": "os",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "os"
              }
            ]
          },
          {
            "source": "../../utils",
            "imported": [
              "fromRoot"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "fromRoot",
                "local": "fromRoot"
              }
            ]
          },
          {
            "source": "../path",
            "imported": [
              "getData"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "getData",
                "local": "getData"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _joi = require('joi');\n\nvar _joi2 = _interopRequireDefault(_joi);\n\nvar _fs = require('fs');\n\nvar _fs2 = _interopRequireDefault(_fs);\n\nvar _path = require('path');\n\nvar _path2 = _interopRequireDefault(_path);\n\nvar _lodash = require('lodash');\n\nvar _crypto = require('crypto');\n\nvar _os = require('os');\n\nvar _os2 = _interopRequireDefault(_os);\n\nvar _utils = require('../../utils');\n\nvar _path3 = require('../path');\n\nmodule.exports = function () {\n  return _joi2['default'].object({\n    pkg: _joi2['default'].object({\n      version: _joi2['default'].string()['default'](_joi2['default'].ref('$version')),\n      buildNum: _joi2['default'].number()['default'](_joi2['default'].ref('$buildNum')),\n      buildSha: _joi2['default'].string()['default'](_joi2['default'].ref('$buildSha'))\n    })['default'](),\n\n    env: _joi2['default'].object({\n      name: _joi2['default'].string()['default'](_joi2['default'].ref('$env')),\n      dev: _joi2['default'].boolean()['default'](_joi2['default'].ref('$dev')),\n      prod: _joi2['default'].boolean()['default'](_joi2['default'].ref('$prod'))\n    })['default'](),\n\n    dev: _joi2['default'].object({\n      basePathProxyTarget: _joi2['default'].number()['default'](5603)\n    })['default'](),\n\n    pid: _joi2['default'].object({\n      file: _joi2['default'].string(),\n      exclusive: _joi2['default'].boolean()['default'](false)\n    })['default'](),\n\n    uuid: _joi2['default'].string().guid()['default'](),\n\n    server: _joi2['default'].object({\n      name: _joi2['default'].string()['default'](_os2['default'].hostname()),\n      host: _joi2['default'].string().hostname()['default']('0.0.0.0'),\n      port: _joi2['default'].number()['default'](5601),\n      maxPayloadBytes: _joi2['default'].number()['default'](1048576),\n      autoListen: _joi2['default'].boolean()['default'](true),\n      defaultRoute: _joi2['default'].string()['default']('/app/kibana').regex(/^\\//, 'start with a slash'),\n      basePath: _joi2['default'].string()['default']('').allow('').regex(/(^$|^\\/.*[^\\/]$)/, 'start with a slash, don\\'t end with one'),\n      ssl: _joi2['default'].object({\n        cert: _joi2['default'].string(),\n        key: _joi2['default'].string()\n      })['default'](),\n      cors: _joi2['default'].when('$dev', {\n        is: true,\n        then: _joi2['default'].object()['default']({\n          origin: ['*://localhost:9876'] // karma test server\n        }),\n        otherwise: _joi2['default'].boolean()['default'](false)\n      }),\n      xsrf: _joi2['default'].object({\n        disableProtection: _joi2['default'].boolean()['default'](false),\n        token: _joi2['default'].string().optional().notes('Deprecated')\n      })['default']()\n    })['default'](),\n\n    logging: _joi2['default'].object().keys({\n      silent: _joi2['default'].boolean()['default'](false),\n\n      quiet: _joi2['default'].boolean().when('silent', {\n        is: true,\n        then: _joi2['default']['default'](true).valid(true),\n        otherwise: _joi2['default']['default'](false)\n      }),\n\n      verbose: _joi2['default'].boolean().when('quiet', {\n        is: true,\n        then: _joi2['default'].valid(false)['default'](false),\n        otherwise: _joi2['default']['default'](false)\n      }),\n\n      events: _joi2['default'].any()['default']({}),\n      dest: _joi2['default'].string()['default']('stdout'),\n      filter: _joi2['default'].any()['default']({}),\n      json: _joi2['default'].boolean().when('dest', {\n        is: 'stdout',\n        then: _joi2['default']['default'](!process.stdout.isTTY),\n        otherwise: _joi2['default']['default'](true)\n      })\n    })['default'](),\n\n    ops: _joi2['default'].object({\n      interval: _joi2['default'].number()['default'](5000)\n    }),\n\n    plugins: _joi2['default'].object({\n      paths: _joi2['default'].array().items(_joi2['default'].string())['default']([]),\n      scanDirs: _joi2['default'].array().items(_joi2['default'].string())['default']([]),\n      initialize: _joi2['default'].boolean()['default'](true)\n    })['default'](),\n\n    path: _joi2['default'].object({\n      data: _joi2['default'].string()['default']((0, _path3.getData)())\n    })['default'](),\n\n    optimize: _joi2['default'].object({\n      enabled: _joi2['default'].boolean()['default'](true),\n      bundleFilter: _joi2['default'].string()['default']('!tests'),\n      bundleDir: _joi2['default'].string()['default']((0, _utils.fromRoot)('optimize/bundles')),\n      viewCaching: _joi2['default'].boolean()['default'](_joi2['default'].ref('$prod')),\n      lazy: _joi2['default'].boolean()['default'](false),\n      lazyPort: _joi2['default'].number()['default'](5602),\n      lazyHost: _joi2['default'].string().hostname()['default']('localhost'),\n      lazyPrebuild: _joi2['default'].boolean()['default'](false),\n      lazyProxyTimeout: _joi2['default'].number()['default'](5 * 60000),\n      useBundleCache: _joi2['default'].boolean()['default'](_joi2['default'].ref('$prod')),\n      unsafeCache: _joi2['default'].alternatives()['try'](_joi2['default'].boolean(), _joi2['default'].string().regex(/^\\/.+\\/$/))['default']('/[\\\\/\\\\\\\\](node_modules|bower_components)[\\\\/\\\\\\\\]/'),\n      sourceMaps: _joi2['default'].alternatives()['try'](_joi2['default'].string().required(), _joi2['default'].boolean())['default'](_joi2['default'].ref('$dev')),\n      profile: _joi2['default'].boolean()['default'](false)\n    })['default'](),\n\n    status: _joi2['default'].object({\n      allowAnonymous: _joi2['default'].boolean()['default'](false)\n    })['default']()\n\n  })['default']();\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3NlcnZlci9jb25maWcvc2NoZW1hLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7bUJBQWdCLEtBQUs7Ozs7a0JBQ04sSUFBSTs7OztvQkFDRixNQUFNOzs7O3NCQUNILFFBQVE7O3NCQUNBLFFBQVE7O2tCQUNyQixJQUFJOzs7O3FCQUVNLGFBQWE7O3FCQUNkLFNBQVM7O0FBRWpDLE1BQU0sQ0FBQyxPQUFPLEdBQUc7U0FBTSxpQkFBSSxNQUFNLENBQUM7QUFDaEMsT0FBRyxFQUFFLGlCQUFJLE1BQU0sQ0FBQztBQUNkLGFBQU8sRUFBRSxpQkFBSSxNQUFNLEVBQUUsV0FBUSxDQUFDLGlCQUFJLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUNsRCxjQUFRLEVBQUUsaUJBQUksTUFBTSxFQUFFLFdBQVEsQ0FBQyxpQkFBSSxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDcEQsY0FBUSxFQUFFLGlCQUFJLE1BQU0sRUFBRSxXQUFRLENBQUMsaUJBQUksR0FBRyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0tBQ3JELENBQUMsV0FBUSxFQUFFOztBQUVaLE9BQUcsRUFBRSxpQkFBSSxNQUFNLENBQUM7QUFDZCxVQUFJLEVBQUUsaUJBQUksTUFBTSxFQUFFLFdBQVEsQ0FBQyxpQkFBSSxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDM0MsU0FBRyxFQUFFLGlCQUFJLE9BQU8sRUFBRSxXQUFRLENBQUMsaUJBQUksR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQzNDLFVBQUksRUFBRSxpQkFBSSxPQUFPLEVBQUUsV0FBUSxDQUFDLGlCQUFJLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQztLQUM5QyxDQUFDLFdBQVEsRUFBRTs7QUFFWixPQUFHLEVBQUUsaUJBQUksTUFBTSxDQUFDO0FBQ2QseUJBQW1CLEVBQUUsaUJBQUksTUFBTSxFQUFFLFdBQVEsQ0FBQyxJQUFJLENBQUM7S0FDaEQsQ0FBQyxXQUFRLEVBQUU7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LENBQUMsS0FBSyxDQUFDO0tBQzdDLENBQUMsV0FBUSxFQUFFOztHQUViLENBQUMsV0FBUSxFQUFFO0NBQUEsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8va2liYW5hL3NyYy9zZXJ2ZXIvY29uZmlnL3NjaGVtYS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBKb2kgZnJvbSAnam9pJztcbmltcG9ydCBmcyBmcm9tICdmcyc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCB7IGdldCB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgeyByYW5kb21CeXRlcyB9IGZyb20gJ2NyeXB0byc7XG5pbXBvcnQgb3MgZnJvbSAnb3MnO1xuXG5pbXBvcnQgeyBmcm9tUm9vdCB9IGZyb20gJy4uLy4uL3V0aWxzJztcbmltcG9ydCB7IGdldERhdGEgfSBmcm9tICcuLi9wYXRoJztcblxubW9kdWxlLmV4cG9ydHMgPSAoKSA9PiBKb2kub2JqZWN0KHtcbiAgcGtnOiBKb2kub2JqZWN0KHtcbiAgICB2ZXJzaW9uOiBKb2kuc3RyaW5nKCkuZGVmYXVsdChKb2kucmVmKCckdmVyc2lvbicpKSxcbiAgICBidWlsZE51bTogSm9pLm51bWJlcigpLmRlZmF1bHQoSm9pLnJlZignJGJ1aWxkTnVtJykpLFxuICAgIGJ1aWxkU2hhOiBKb2kuc3RyaW5nKCkuZGVmYXVsdChKb2kucmVmKCckYnVpbGRTaGEnKSksXG4gIH0pLmRlZmF1bHQoKSxcblxuICBlbnY6IEpvaS5vYmplY3Qoe1xuICAgIG5hbWU6IEpvaS5zdHJpbmcoKS5kZWZhdWx0KEpvaS5yZWYoJyRlbnYnKSksXG4gICAgZGV2OiBKb2kuYm9vbGVhbigpLmRlZmF1bHQoSm9pLnJlZignJGRldicpKSxcbiAgICBwcm9kOiBKb2kuYm9vbGVhbigpLmRlZmF1bHQoSm9pLnJlZignJHByb2QnKSlcbiAgfSkuZGVmYXVsdCgpLFxuXG4gIGRldjogSm9pLm9iamVjdCh7XG4gICAgYmFzZVBhdGhQcm94eVRhcmdldDogSm9pLm51bWJlcigpLmRlZmF1bHQoNTYwMyksXG4gIH0pLmRlZmF1bHQoKSxcblxuICBwaWQ6IEpvaS5vYmplY3Qoe1xuICAgIGZpbGU6IEpvaS5zdHJpbmcoKSxcbiAgICBleGNsdXNpdmU6IEpvaS5ib29sZWFuKCkuZGVmYXVsdChmYWxzZSlcbiAgfSkuZGVmYXVsdCgpLFxuXG4gIHV1aWQ6IEpvaS5zdHJpbmcoKS5ndWlkKCkuZGVmYXVsdCgpLFxuXG4gIHNlcnZlcjogSm9pLm9iamVjdCh7XG4gICAgbmFtZTogSm9pLnN0cmluZygpLmRlZmF1bHQob3MuaG9zdG5hbWUoKSksXG4gICAgaG9zdDogSm9pLnN0cmluZygpLmhvc3RuYW1lKCkuZGVmYXVsdCgnMC4wLjAuMCcpLFxuICAgIHBvcnQ6IEpvaS5udW1iZXIoKS5kZWZhdWx0KDU2MDEpLFxuICAgIG1heFBheWxvYWRCeXRlczogSm9pLm51bWJlcigpLmRlZmF1bHQoMTA0ODU3NiksXG4gICAgYXV0b0xpc3RlbjogSm9pLmJvb2xlYW4oKS5kZWZhdWx0KHRydWUpLFxuICAgIGRlZmF1bHRSb3V0ZTogSm9pLnN0cmluZygpLmRlZmF1bHQoJy9hcHAva2liYW5hJykucmVnZXgoL15cXC8vLCBgc3RhcnQgd2l0aCBhIHNsYXNoYCksXG4gICAgYmFzZVBhdGg6IEpvaS5zdHJpbmcoKS5kZWZhdWx0KCcnKS5hbGxvdygnJykucmVnZXgoLyheJHxeXFwvLipbXlxcL10kKS8sIGBzdGFydCB3aXRoIGEgc2xhc2gsIGRvbid0IGVuZCB3aXRoIG9uZWApLFxuICAgIHNzbDogSm9pLm9iamVjdCh7XG4gICAgICBjZXJ0OiBKb2kuc3RyaW5nKCksXG4gICAgICBrZXk6IEpvaS5zdHJpbmcoKVxuICAgIH0pLmRlZmF1bHQoKSxcbiAgICBjb3JzOiBKb2kud2hlbignJGRldicsIHtcbiAgICAgIGlzOiB0cnVlLFxuICAgICAgdGhlbjogSm9pLm9iamVjdCgpLmRlZmF1bHQoe1xuICAgICAgICBvcmlnaW46IFsnKjovL2xvY2FsaG9zdDo5ODc2J10gLy8ga2FybWEgdGVzdCBzZXJ2ZXJcbiAgICAgIH0pLFxuICAgICAgb3RoZXJ3aXNlOiBKb2kuYm9vbGVhbigpLmRlZmF1bHQoZmFsc2UpXG4gICAgfSksXG4gICAgeHNyZjogSm9pLm9iamVjdCh7XG4gICAgICBkaXNhYmxlUHJvdGVjdGlvbjogSm9pLmJvb2xlYW4oKS5kZWZhdWx0KGZhbHNlKSxcbiAgICAgIHRva2VuOiBKb2kuc3RyaW5nKCkub3B0aW9uYWwoKS5ub3RlcygnRGVwcmVjYXRlZCcpXG4gICAgfSkuZGVmYXVsdCgpLFxuICB9KS5kZWZhdWx0KCksXG5cbiAgbG9nZ2luZzogSm9pLm9iamVjdCgpLmtleXMoe1xuICAgIHNpbGVudDogSm9pLmJvb2xlYW4oKS5kZWZhdWx0KGZhbHNlKSxcblxuICAgIHF1aWV0OiBKb2kuYm9vbGVhbigpXG4gICAgLndoZW4oJ3NpbGVudCcsIHtcbiAgICAgIGlzOiB0cnVlLFxuICAgICAgdGhlbjogSm9pLmRlZmF1bHQodHJ1ZSkudmFsaWQodHJ1ZSksXG4gICAgICBvdGhlcndpc2U6IEpvaS5kZWZhdWx0KGZhbHNlKVxuICAgIH0pLFxuXG4gICAgdmVyYm9zZTogSm9pLmJvb2xlYW4oKVxuICAgIC53aGVuKCdxdWlldCcsIHtcbiAgICAgIGlzOiB0cnVlLFxuICAgICAgdGhlbjogSm9pLnZhbGlkKGZhbHNlKS5kZWZhdWx0KGZhbHNlKSxcbiAgICAgIG90aGVyd2lzZTogSm9pLmRlZmF1bHQoZmFsc2UpXG4gICAgfSksXG5cbiAgICBldmVudHM6IEpvaS5hbnkoKS5kZWZhdWx0KHt9KSxcbiAgICBkZXN0OiBKb2kuc3RyaW5nKCkuZGVmYXVsdCgnc3Rkb3V0JyksXG4gICAgZmlsdGVyOiBKb2kuYW55KCkuZGVmYXVsdCh7fSksXG4gICAganNvbjogSm9pLmJvb2xlYW4oKVxuICAgIC53aGVuKCdkZXN0Jywge1xuICAgICAgaXM6ICdzdGRvdXQnLFxuICAgICAgdGhlbjogSm9pLmRlZmF1bHQoIXByb2Nlc3Muc3Rkb3V0LmlzVFRZKSxcbiAgICAgIG90aGVyd2lzZTogSm9pLmRlZmF1bHQodHJ1ZSlcbiAgICB9KVxuICB9KVxuICAuZGVmYXVsdCgpLFxuXG4gIG9wczogSm9pLm9iamVjdCh7XG4gICAgaW50ZXJ2YWw6IEpvaS5udW1iZXIoKS5kZWZhdWx0KDUwMDApLFxuICB9KSxcblxuICBwbHVnaW5zOiBKb2kub2JqZWN0KHtcbiAgICBwYXRoczogSm9pLmFycmF5KCkuaXRlbXMoSm9pLnN0cmluZygpKS5kZWZhdWx0KFtdKSxcbiAgICBzY2FuRGlyczogSm9pLmFycmF5KCkuaXRlbXMoSm9pLnN0cmluZygpKS5kZWZhdWx0KFtdKSxcbiAgICBpbml0aWFsaXplOiBKb2kuYm9vbGVhbigpLmRlZmF1bHQodHJ1ZSlcbiAgfSkuZGVmYXVsdCgpLFxuXG4gIHBhdGg6IEpvaS5vYmplY3Qoe1xuICAgIGRhdGE6IEpvaS5zdHJpbmcoKS5kZWZhdWx0KGdldERhdGEoKSlcbiAgfSkuZGVmYXVsdCgpLFxuXG4gIG9wdGltaXplOiBKb2kub2JqZWN0KHtcbiAgICBlbmFibGVkOiBKb2kuYm9vbGVhbigpLmRlZmF1bHQodHJ1ZSksXG4gICAgYnVuZGxlRmlsdGVyOiBKb2kuc3RyaW5nKCkuZGVmYXVsdCgnIXRlc3RzJyksXG4gICAgYnVuZGxlRGlyOiBKb2kuc3RyaW5nKCkuZGVmYXVsdChmcm9tUm9vdCgnb3B0aW1pemUvYnVuZGxlcycpKSxcbiAgICB2aWV3Q2FjaGluZzogSm9pLmJvb2xlYW4oKS5kZWZhdWx0KEpvaS5yZWYoJyRwcm9kJykpLFxuICAgIGxhenk6IEpvaS5ib29sZWFuKCkuZGVmYXVsdChmYWxzZSksXG4gICAgbGF6eVBvcnQ6IEpvaS5udW1iZXIoKS5kZWZhdWx0KDU2MDIpLFxuICAgIGxhenlIb3N0OiBKb2kuc3RyaW5nKCkuaG9zdG5hbWUoKS5kZWZhdWx0KCdsb2NhbGhvc3QnKSxcbiAgICBsYXp5UHJlYnVpbGQ6IEpvaS5ib29sZWFuKCkuZGVmYXVsdChmYWxzZSksXG4gICAgbGF6eVByb3h5VGltZW91dDogSm9pLm51bWJlcigpLmRlZmF1bHQoNSAqIDYwMDAwKSxcbiAgICB1c2VCdW5kbGVDYWNoZTogSm9pLmJvb2xlYW4oKS5kZWZhdWx0KEpvaS5yZWYoJyRwcm9kJykpLFxuICAgIHVuc2FmZUNhY2hlOiBKb2lcbiAgICAgIC5hbHRlcm5hdGl2ZXMoKVxuICAgICAgLnRyeShcbiAgICAgICAgSm9pLmJvb2xlYW4oKSxcbiAgICAgICAgSm9pLnN0cmluZygpLnJlZ2V4KC9eXFwvLitcXC8kLylcbiAgICAgIClcbiAgICAgIC5kZWZhdWx0KCcvW1xcXFwvXFxcXFxcXFxdKG5vZGVfbW9kdWxlc3xib3dlcl9jb21wb25lbnRzKVtcXFxcL1xcXFxcXFxcXS8nKSxcbiAgICBzb3VyY2VNYXBzOiBKb2lcbiAgICAgIC5hbHRlcm5hdGl2ZXMoKVxuICAgICAgLnRyeShcbiAgICAgICAgSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gICAgICAgIEpvaS5ib29sZWFuKClcbiAgICAgIClcbiAgICAgIC5kZWZhdWx0KEpvaS5yZWYoJyRkZXYnKSksXG4gICAgcHJvZmlsZTogSm9pLmJvb2xlYW4oKS5kZWZhdWx0KGZhbHNlKVxuICB9KS5kZWZhdWx0KCksXG5cbiAgc3RhdHVzOiBKb2kub2JqZWN0KHtcbiAgICBhbGxvd0Fub255bW91czogSm9pLmJvb2xlYW4oKS5kZWZhdWx0KGZhbHNlKVxuICB9KS5kZWZhdWx0KClcblxufSkuZGVmYXVsdCgpO1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/server/config/schema.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/kibana/src/server/config/schema.js",
      "sourcesContent": [
        "import Joi from 'joi';\nimport fs from 'fs';\nimport path from 'path';\nimport { get } from 'lodash';\nimport { randomBytes } from 'crypto';\nimport os from 'os';\n\nimport { fromRoot } from '../../utils';\nimport { getData } from '../path';\n\nmodule.exports = () => Joi.object({\n  pkg: Joi.object({\n    version: Joi.string().default(Joi.ref('$version')),\n    buildNum: Joi.number().default(Joi.ref('$buildNum')),\n    buildSha: Joi.string().default(Joi.ref('$buildSha')),\n  }).default(),\n\n  env: Joi.object({\n    name: Joi.string().default(Joi.ref('$env')),\n    dev: Joi.boolean().default(Joi.ref('$dev')),\n    prod: Joi.boolean().default(Joi.ref('$prod'))\n  }).default(),\n\n  dev: Joi.object({\n    basePathProxyTarget: Joi.number().default(5603),\n  }).default(),\n\n  pid: Joi.object({\n    file: Joi.string(),\n    exclusive: Joi.boolean().default(false)\n  }).default(),\n\n  uuid: Joi.string().guid().default(),\n\n  server: Joi.object({\n    name: Joi.string().default(os.hostname()),\n    host: Joi.string().hostname().default('0.0.0.0'),\n    port: Joi.number().default(5601),\n    maxPayloadBytes: Joi.number().default(1048576),\n    autoListen: Joi.boolean().default(true),\n    defaultRoute: Joi.string().default('/app/kibana').regex(/^\\//, `start with a slash`),\n    basePath: Joi.string().default('').allow('').regex(/(^$|^\\/.*[^\\/]$)/, `start with a slash, don't end with one`),\n    ssl: Joi.object({\n      cert: Joi.string(),\n      key: Joi.string()\n    }).default(),\n    cors: Joi.when('$dev', {\n      is: true,\n      then: Joi.object().default({\n        origin: ['*://localhost:9876'] // karma test server\n      }),\n      otherwise: Joi.boolean().default(false)\n    }),\n    xsrf: Joi.object({\n      disableProtection: Joi.boolean().default(false),\n      token: Joi.string().optional().notes('Deprecated')\n    }).default(),\n  }).default(),\n\n  logging: Joi.object().keys({\n    silent: Joi.boolean().default(false),\n\n    quiet: Joi.boolean()\n    .when('silent', {\n      is: true,\n      then: Joi.default(true).valid(true),\n      otherwise: Joi.default(false)\n    }),\n\n    verbose: Joi.boolean()\n    .when('quiet', {\n      is: true,\n      then: Joi.valid(false).default(false),\n      otherwise: Joi.default(false)\n    }),\n\n    events: Joi.any().default({}),\n    dest: Joi.string().default('stdout'),\n    filter: Joi.any().default({}),\n    json: Joi.boolean()\n    .when('dest', {\n      is: 'stdout',\n      then: Joi.default(!process.stdout.isTTY),\n      otherwise: Joi.default(true)\n    })\n  })\n  .default(),\n\n  ops: Joi.object({\n    interval: Joi.number().default(5000),\n  }),\n\n  plugins: Joi.object({\n    paths: Joi.array().items(Joi.string()).default([]),\n    scanDirs: Joi.array().items(Joi.string()).default([]),\n    initialize: Joi.boolean().default(true)\n  }).default(),\n\n  path: Joi.object({\n    data: Joi.string().default(getData())\n  }).default(),\n\n  optimize: Joi.object({\n    enabled: Joi.boolean().default(true),\n    bundleFilter: Joi.string().default('!tests'),\n    bundleDir: Joi.string().default(fromRoot('optimize/bundles')),\n    viewCaching: Joi.boolean().default(Joi.ref('$prod')),\n    lazy: Joi.boolean().default(false),\n    lazyPort: Joi.number().default(5602),\n    lazyHost: Joi.string().hostname().default('localhost'),\n    lazyPrebuild: Joi.boolean().default(false),\n    lazyProxyTimeout: Joi.number().default(5 * 60000),\n    useBundleCache: Joi.boolean().default(Joi.ref('$prod')),\n    unsafeCache: Joi\n      .alternatives()\n      .try(\n        Joi.boolean(),\n        Joi.string().regex(/^\\/.+\\/$/)\n      )\n      .default('/[\\\\/\\\\\\\\](node_modules|bower_components)[\\\\/\\\\\\\\]/'),\n    sourceMaps: Joi\n      .alternatives()\n      .try(\n        Joi.string().required(),\n        Joi.boolean()\n      )\n      .default(Joi.ref('$dev')),\n    profile: Joi.boolean().default(false)\n  }).default(),\n\n  status: Joi.object({\n    allowAnonymous: Joi.boolean().default(false)\n  }).default()\n\n}).default();\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/kibana/src/server/config/deep_clone_with_buffers.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "cloneDeep"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "cloneDeep",
                "local": "cloneDeep"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _lodash = require('lodash');\n\nfunction cloneBuffersCustomizer(val) {\n  if (Buffer.isBuffer(val)) {\n    return new Buffer(val);\n  }\n}\n\nexports['default'] = function (vals) {\n  return (0, _lodash.cloneDeep)(vals, cloneBuffersCustomizer);\n};\n\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3NlcnZlci9jb25maWcvZGVlcF9jbG9uZV93aXRoX2J1ZmZlcnMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O3NCQUEwQixRQUFROztBQUVsQyxTQUFTLHNCQUFzQixDQUFDLEdBQUcsRUFBRTtBQUNuQyxNQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLEVBQUU7QUFDeEIsV0FBTyxJQUFJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQztHQUN4QjtDQUNGOztxQkFFYyxVQUFVLElBQUksRUFBRTtBQUM3QixTQUFPLHVCQUFVLElBQUksRUFBRSxzQkFBc0IsQ0FBQyxDQUFDO0NBQ2hEOztBQUFBLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL2tpYmFuYS9zcmMvc2VydmVyL2NvbmZpZy9kZWVwX2Nsb25lX3dpdGhfYnVmZmVycy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNsb25lRGVlcCB9IGZyb20gJ2xvZGFzaCc7XG5cbmZ1bmN0aW9uIGNsb25lQnVmZmVyc0N1c3RvbWl6ZXIodmFsKSB7XG4gIGlmIChCdWZmZXIuaXNCdWZmZXIodmFsKSkge1xuICAgIHJldHVybiBuZXcgQnVmZmVyKHZhbCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKHZhbHMpIHtcbiAgcmV0dXJuIGNsb25lRGVlcCh2YWxzLCBjbG9uZUJ1ZmZlcnNDdXN0b21pemVyKTtcbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/server/config/deep_clone_with_buffers.js"
      ],
      "names": [],
      "mappings": ";;;;;;sBAA0B,QAAQ;;AAElC,SAAS,sBAAsB,CAAC,GAAG,EAAE;AACnC,MAAI,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE;AACxB,WAAO,IAAI,MAAM,CAAC,GAAG,CAAC,CAAC;GACxB;CACF;;qBAEc,UAAU,IAAI,EAAE;AAC7B,SAAO,uBAAU,IAAI,EAAE,sBAAsB,CAAC,CAAC;CAChD;;AAAA,CAAC",
      "file": "/home/vio/kibana/src/server/config/deep_clone_with_buffers.js",
      "sourcesContent": [
        "import { cloneDeep } from 'lodash';\n\nfunction cloneBuffersCustomizer(val) {\n  if (Buffer.isBuffer(val)) {\n    return new Buffer(val);\n  }\n}\n\nexport default function (vals) {\n  return cloneDeep(vals, cloneBuffersCustomizer);\n};\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/kibana/src/server/logging/configuration.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "./log_reporter",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "logReporter"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "loggingConfiguration",
            "config"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "loggingConfiguration",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "config",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = loggingConfiguration;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _log_reporter = require('./log_reporter');\n\nvar _log_reporter2 = _interopRequireDefault(_log_reporter);\n\nfunction loggingConfiguration(config) {\n  var events = config.get('logging.events');\n\n  if (config.get('logging.silent')) {\n    _lodash2['default'].defaults(events, {});\n  } else if (config.get('logging.quiet')) {\n    _lodash2['default'].defaults(events, {\n      log: ['listening', 'error', 'fatal'],\n      request: ['error'],\n      error: '*'\n    });\n  } else if (config.get('logging.verbose')) {\n    _lodash2['default'].defaults(events, {\n      log: '*',\n      ops: '*',\n      request: '*',\n      response: '*',\n      error: '*'\n    });\n  } else {\n    _lodash2['default'].defaults(events, {\n      log: ['info', 'warning', 'error', 'fatal'],\n      response: config.get('logging.json') ? '*' : '!',\n      request: ['info', 'warning', 'error', 'fatal'],\n      error: '*'\n    });\n  }\n\n  var options = {\n    opsInterval: config.get('ops.interval'),\n    requestHeaders: true,\n    requestPayload: true,\n    reporters: [{\n      reporter: _log_reporter2['default'],\n      config: {\n        json: config.get('logging.json'),\n        dest: config.get('logging.dest'),\n        // I'm adding the default here because if you add another filter\n        // using the commandline it will remove authorization. I want users\n        // to have to explicitly set --logging.filter.authorization=none to\n        // have it show up int he logs.\n        filter: _lodash2['default'].defaults(config.get('logging.filter'), {\n          authorization: 'remove'\n        })\n      },\n      events: _lodash2['default'].transform(events, function (filtered, val, key) {\n        // provide a string compatible way to remove events\n        if (val !== '!') filtered[key] = val;\n      }, {})\n    }]\n  };\n  return options;\n}\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3NlcnZlci9sb2dnaW5nL2NvbmZpZ3VyYXRpb24uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7cUJBR3dCLG9CQUFvQjs7OztzQkFIOUIsUUFBUTs7Ozs0QkFDRSxnQkFBZ0I7Ozs7QUFFekIsU0FBUyxvQkFBb0IsQ0FBQyxNQUFNLEVBQUU7QUFDbkQsTUFBSSxNQUFNLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDOztBQUUxQyxNQUFJLE1BQU0sQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLENBQUMsRUFBRTtBQUNoQyx3QkFBRSxRQUFRLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0dBQ3hCLE1BQ0ksSUFBSSxNQUFNLENBQUMsR0FBRyxDQUFDLGVBQWUsQ0FBQyxFQUFFO0FBQ3BDLHdCQUFFLFFBQVEsQ0FBQyxNQUFNLEVBQUU7QUFDakIsU0FBRyxFQUFFLENBQUMsV0FBVyxFQUFFLE9BQU8sRUFBRSxPQUFPLENBQUM7QUFDcEMsYUFBTyxFQUFFLENBQUMsT0FBTyxDQUFDO0FBQ2xCLFdBQUssRUFBRSxHQUFHO0tBQ1gsQ0FBQyxDQUFDO0dBQ0osTUFDSSxJQUFJLE1BQU0sQ0FBQyxHQUFHLENBQUMsaUJBQWlCLENBQUMsRUFBRTtBQUN0Qyx3QkFBRSxRQUFRLENBQUMsTUFBTSxFQUFFO0FBQ2pCLFNBQUcsRUFBRSxHQUFHO0FBQ1IsU0FBRyxFQUFFLEdBQUc7QUFDUixhQUFPLEVBQUUsR0FBRztBQUNaLGNBQVEsRUFBRSxHQUFHO0FBQ2IsV0FBSyxFQUFFLEdBQUc7S0FDWCxDQUFDLENBQUM7R0FDSixNQUNJO0FBQ0gsd0JBQUUsUUFBUSxDQUFDLE1BQU0sRUFBRTtBQUNqQixTQUFHLEVBQUUsQ0FBQyxNQUFNLEVBQUUsU0FBUyxFQUFFLE9BQU8sRUFBRSxPQUFPLENBQUM7QUFDMUMsY0FBUSxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsY0FBYyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUc7QUFDaEQsYUFBTyxFQUFFLENBQUMsTUFBTSxFQUFFLFNBQVMsRUFBRSxPQUFPLEVBQUUsT0FBTyxDQUFDO0FBQzlDLFdBQUssRUFBRSxHQUFHO0tBQ1gsQ0FBQyxDQUFDO0dBQ0o7O0FBRUQsTUFBTSxPQUFPLEdBQUc7QUFDZCxlQUFXLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUM7QUFDdkMsa0JBQWMsRUFBRSxJQUFJO0FBQ3BCLGtCQUFjLEVBQUUsSUFBSTtBQUNwQixhQUFTLEVBQUUsQ0FDVDtBQUNFLGNBQVEsMkJBQWE7QUFDckIsWUFBTSxFQUFFO0FBQ04sWUFBSSxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsY0FBYyxDQUFDO0FBQ2hDLFlBQUksRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQzs7Ozs7QUFLaEMsY0FBTSxFQUFFLG9CQUFFLFFBQVEsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLGdCQUFnQixDQUFDLEVBQUU7QUFDL0MsdUJBQWEsRUFBRSxRQUFRO1NBQ3hCLENBQUM7T0FDSDtBQUNELFlBQU0sRUFBRSxvQkFBRSxTQUFTLENBQUMsTUFBTSxFQUFFLFVBQVUsUUFBUSxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUU7O0FBRXhELFlBQUksR0FBRyxLQUFLLEdBQUcsRUFBRSxRQUFRLENBQUMsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDO09BQ3RDLEVBQUUsRUFBRSxDQUFDO0tBQ1AsQ0FDRjtHQUNGLENBQUM7QUFDRixTQUFPLE9BQU8sQ0FBQztDQUNoQiIsImZpbGUiOiIvaG9tZS92aW8va2liYW5hL3NyYy9zZXJ2ZXIvbG9nZ2luZy9jb25maWd1cmF0aW9uLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBsb2dSZXBvcnRlciBmcm9tICcuL2xvZ19yZXBvcnRlcic7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGxvZ2dpbmdDb25maWd1cmF0aW9uKGNvbmZpZykge1xuICBsZXQgZXZlbnRzID0gY29uZmlnLmdldCgnbG9nZ2luZy5ldmVudHMnKTtcblxuICBpZiAoY29uZmlnLmdldCgnbG9nZ2luZy5zaWxlbnQnKSkge1xuICAgIF8uZGVmYXVsdHMoZXZlbnRzLCB7fSk7XG4gIH1cbiAgZWxzZSBpZiAoY29uZmlnLmdldCgnbG9nZ2luZy5xdWlldCcpKSB7XG4gICAgXy5kZWZhdWx0cyhldmVudHMsIHtcbiAgICAgIGxvZzogWydsaXN0ZW5pbmcnLCAnZXJyb3InLCAnZmF0YWwnXSxcbiAgICAgIHJlcXVlc3Q6IFsnZXJyb3InXSxcbiAgICAgIGVycm9yOiAnKidcbiAgICB9KTtcbiAgfVxuICBlbHNlIGlmIChjb25maWcuZ2V0KCdsb2dnaW5nLnZlcmJvc2UnKSkge1xuICAgIF8uZGVmYXVsdHMoZXZlbnRzLCB7XG4gICAgICBsb2c6ICcqJyxcbiAgICAgIG9wczogJyonLFxuICAgICAgcmVxdWVzdDogJyonLFxuICAgICAgcmVzcG9uc2U6ICcqJyxcbiAgICAgIGVycm9yOiAnKidcbiAgICB9KTtcbiAgfVxuICBlbHNlIHtcbiAgICBfLmRlZmF1bHRzKGV2ZW50cywge1xuICAgICAgbG9nOiBbJ2luZm8nLCAnd2FybmluZycsICdlcnJvcicsICdmYXRhbCddLFxuICAgICAgcmVzcG9uc2U6IGNvbmZpZy5nZXQoJ2xvZ2dpbmcuanNvbicpID8gJyonIDogJyEnLFxuICAgICAgcmVxdWVzdDogWydpbmZvJywgJ3dhcm5pbmcnLCAnZXJyb3InLCAnZmF0YWwnXSxcbiAgICAgIGVycm9yOiAnKidcbiAgICB9KTtcbiAgfVxuXG4gIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgb3BzSW50ZXJ2YWw6IGNvbmZpZy5nZXQoJ29wcy5pbnRlcnZhbCcpLFxuICAgIHJlcXVlc3RIZWFkZXJzOiB0cnVlLFxuICAgIHJlcXVlc3RQYXlsb2FkOiB0cnVlLFxuICAgIHJlcG9ydGVyczogW1xuICAgICAge1xuICAgICAgICByZXBvcnRlcjogbG9nUmVwb3J0ZXIsXG4gICAgICAgIGNvbmZpZzoge1xuICAgICAgICAgIGpzb246IGNvbmZpZy5nZXQoJ2xvZ2dpbmcuanNvbicpLFxuICAgICAgICAgIGRlc3Q6IGNvbmZpZy5nZXQoJ2xvZ2dpbmcuZGVzdCcpLFxuICAgICAgICAgIC8vIEknbSBhZGRpbmcgdGhlIGRlZmF1bHQgaGVyZSBiZWNhdXNlIGlmIHlvdSBhZGQgYW5vdGhlciBmaWx0ZXJcbiAgICAgICAgICAvLyB1c2luZyB0aGUgY29tbWFuZGxpbmUgaXQgd2lsbCByZW1vdmUgYXV0aG9yaXphdGlvbi4gSSB3YW50IHVzZXJzXG4gICAgICAgICAgLy8gdG8gaGF2ZSB0byBleHBsaWNpdGx5IHNldCAtLWxvZ2dpbmcuZmlsdGVyLmF1dGhvcml6YXRpb249bm9uZSB0b1xuICAgICAgICAgIC8vIGhhdmUgaXQgc2hvdyB1cCBpbnQgaGUgbG9ncy5cbiAgICAgICAgICBmaWx0ZXI6IF8uZGVmYXVsdHMoY29uZmlnLmdldCgnbG9nZ2luZy5maWx0ZXInKSwge1xuICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogJ3JlbW92ZSdcbiAgICAgICAgICB9KVxuICAgICAgICB9LFxuICAgICAgICBldmVudHM6IF8udHJhbnNmb3JtKGV2ZW50cywgZnVuY3Rpb24gKGZpbHRlcmVkLCB2YWwsIGtleSkge1xuICAgICAgICAgIC8vIHByb3ZpZGUgYSBzdHJpbmcgY29tcGF0aWJsZSB3YXkgdG8gcmVtb3ZlIGV2ZW50c1xuICAgICAgICAgIGlmICh2YWwgIT09ICchJykgZmlsdGVyZWRba2V5XSA9IHZhbDtcbiAgICAgICAgfSwge30pXG4gICAgICB9XG4gICAgXVxuICB9O1xuICByZXR1cm4gb3B0aW9ucztcbn1cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/server/logging/configuration.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAGwB,oBAAoB;;;;sBAH9B,QAAQ;;;;4BACE,gBAAgB;;;;AAEzB,SAAS,oBAAoB,CAAC,MAAM,EAAE;AACnD,MAAI,MAAM,GAAG,MAAM,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;;AAE1C,MAAI,MAAM,CAAC,GAAG,CAAC,gBAAgB,CAAC,EAAE;AAChC,wBAAE,QAAQ,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;GACxB,MACI,IAAI,MAAM,CAAC,GAAG,CAAC,eAAe,CAAC,EAAE;AACpC,wBAAE,QAAQ,CAAC,MAAM,EAAE;AACjB,SAAG,EAAE,CAAC,WAAW,EAAE,OAAO,EAAE,OAAO,CAAC;AACpC,aAAO,EAAE,CAAC,OAAO,CAAC;AAClB,WAAK,EAAE,GAAG;KACX,CAAC,CAAC;GACJ,MACI,IAAI,MAAM,CAAC,GAAG,CAAC,iBAAiB,CAAC,EAAE;AACtC,wBAAE,QAAQ,CAAC,MAAM,EAAE;AACjB,SAAG,EAAE,GAAG;AACR,SAAG,EAAE,GAAG;AACR,aAAO,EAAE,GAAG;AACZ,cAAQ,EAAE,GAAG;AACb,WAAK,EAAE,GAAG;KACX,CAAC,CAAC;GACJ,MACI;AACH,wBAAE,QAAQ,CAAC,MAAM,EAAE;AACjB,SAAG,EAAE,CAAC,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,OAAO,CAAC;AAC1C,cAAQ,EAAE,MAAM,CAAC,GAAG,CAAC,cAAc,CAAC,GAAG,GAAG,GAAG,GAAG;AAChD,aAAO,EAAE,CAAC,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,OAAO,CAAC;AAC9C,WAAK,EAAE,GAAG;KACX,CAAC,CAAC;GACJ;;AAED,MAAM,OAAO,GAAG;AACd,eAAW,EAAE,MAAM,CAAC,GAAG,CAAC,cAAc,CAAC;AACvC,kBAAc,EAAE,IAAI;AACpB,kBAAc,EAAE,IAAI;AACpB,aAAS,EAAE,CACT;AACE,cAAQ,2BAAa;AACrB,YAAM,EAAE;AACN,YAAI,EAAE,MAAM,CAAC,GAAG,CAAC,cAAc,CAAC;AAChC,YAAI,EAAE,MAAM,CAAC,GAAG,CAAC,cAAc,CAAC;;;;;AAKhC,cAAM,EAAE,oBAAE,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,gBAAgB,CAAC,EAAE;AAC/C,uBAAa,EAAE,QAAQ;SACxB,CAAC;OACH;AACD,YAAM,EAAE,oBAAE,SAAS,CAAC,MAAM,EAAE,UAAU,QAAQ,EAAE,GAAG,EAAE,GAAG,EAAE;;AAExD,YAAI,GAAG,KAAK,GAAG,EAAE,QAAQ,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC;OACtC,EAAE,EAAE,CAAC;KACP,CACF;GACF,CAAC;AACF,SAAO,OAAO,CAAC;CAChB",
      "file": "/home/vio/kibana/src/server/logging/configuration.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport logReporter from './log_reporter';\n\nexport default function loggingConfiguration(config) {\n  let events = config.get('logging.events');\n\n  if (config.get('logging.silent')) {\n    _.defaults(events, {});\n  }\n  else if (config.get('logging.quiet')) {\n    _.defaults(events, {\n      log: ['listening', 'error', 'fatal'],\n      request: ['error'],\n      error: '*'\n    });\n  }\n  else if (config.get('logging.verbose')) {\n    _.defaults(events, {\n      log: '*',\n      ops: '*',\n      request: '*',\n      response: '*',\n      error: '*'\n    });\n  }\n  else {\n    _.defaults(events, {\n      log: ['info', 'warning', 'error', 'fatal'],\n      response: config.get('logging.json') ? '*' : '!',\n      request: ['info', 'warning', 'error', 'fatal'],\n      error: '*'\n    });\n  }\n\n  const options = {\n    opsInterval: config.get('ops.interval'),\n    requestHeaders: true,\n    requestPayload: true,\n    reporters: [\n      {\n        reporter: logReporter,\n        config: {\n          json: config.get('logging.json'),\n          dest: config.get('logging.dest'),\n          // I'm adding the default here because if you add another filter\n          // using the commandline it will remove authorization. I want users\n          // to have to explicitly set --logging.filter.authorization=none to\n          // have it show up int he logs.\n          filter: _.defaults(config.get('logging.filter'), {\n            authorization: 'remove'\n          })\n        },\n        events: _.transform(events, function (filtered, val, key) {\n          // provide a string compatible way to remove events\n          if (val !== '!') filtered[key] = val;\n        }, {})\n      }\n    ]\n  };\n  return options;\n}\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/kibana/src/server/logging/log_reporter.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "./log_format_json",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "LogFormatJson"
              }
            ]
          },
          {
            "source": "./log_format_string",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "LogFormatString"
              }
            ]
          },
          {
            "source": "good-squeeze",
            "imported": [
              "Squeeze"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Squeeze",
                "local": "Squeeze"
              }
            ]
          },
          {
            "source": "fs",
            "imported": [
              "createWriteStream"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "createWriteStream",
                "local": "writeStr"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _log_format_json = require('./log_format_json');\n\nvar _log_format_json2 = _interopRequireDefault(_log_format_json);\n\nvar _log_format_string = require('./log_format_string');\n\nvar _log_format_string2 = _interopRequireDefault(_log_format_string);\n\nvar _goodSqueeze = require('good-squeeze');\n\nvar _fs = require('fs');\n\nmodule.exports = (function () {\n  function KbnLogger(events, config) {\n    _classCallCheck(this, KbnLogger);\n\n    this.squeeze = new _goodSqueeze.Squeeze(events);\n    this.format = config.json ? new _log_format_json2['default'](config) : new _log_format_string2['default'](config);\n\n    if (config.dest === 'stdout') {\n      this.dest = process.stdout;\n    } else {\n      this.dest = (0, _fs.createWriteStream)(config.dest, {\n        flags: 'a',\n        encoding: 'utf8'\n      });\n    }\n  }\n\n  _createClass(KbnLogger, [{\n    key: 'init',\n    value: function init(readstream, emitter, callback) {\n      var _this = this;\n\n      this.output = readstream.pipe(this.squeeze).pipe(this.format);\n      this.output.pipe(this.dest);\n\n      emitter.on('stop', function () {\n        _this.output.unpipe(_this.dest);\n      });\n\n      callback();\n    }\n  }]);\n\n  return KbnLogger;\n})();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3NlcnZlci9sb2dnaW5nL2xvZ19yZXBvcnRlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7OztzQkFBYyxRQUFROzs7OytCQUVJLG1CQUFtQjs7OztpQ0FDakIscUJBQXFCOzs7OzJCQUN6QixjQUFjOztrQkFDUSxJQUFJOztBQUVsRCxNQUFNLENBQUMsT0FBTztBQUNELFdBRFUsU0FBUyxDQUNsQixNQUFNLEVBQUUsTUFBTSxFQUFFOzBCQURQLFNBQVM7O0FBRTVCLFFBQUksQ0FBQyxPQUFPLEdBQUcseUJBQVksTUFBTSxDQUFDLENBQUM7QUFDbkMsUUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUMsSUFBSSxHQUFHLGlDQUFrQixNQUFNLENBQUMsR0FBRyxtQ0FBb0IsTUFBTSxDQUFDLENBQUM7O0FBRXBGLFFBQUksTUFBTSxDQUFDLElBQUksS0FBSyxRQUFRLEVBQUU7QUFDNUIsVUFBSSxDQUFDLElBQUksR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDO0tBQzVCLE1BQU07QUFDTCxVQUFJLENBQUMsSUFBSSxHQUFHLDJCQUFTLE1BQU0sQ0FBQyxJQUFJLEVBQUU7QUFDaEMsYUFBSyxFQUFFLEdBQUc7QUFDVixnQkFBUSxFQUFFLE1BQU07T0FDakIsQ0FBQyxDQUFDO0tBQ0o7R0FDRjs7ZUFib0IsU0FBUzs7V0FlMUIsY0FBQyxVQUFVLEVBQUUsT0FBTyxFQUFFLFFBQVEsRUFBRTs7O0FBRWxDLFVBQUksQ0FBQyxNQUFNLEdBQUcsVUFBVSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUM5RCxVQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7O0FBRTVCLGFBQU8sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLFlBQU07QUFDdkIsY0FBSyxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQUssSUFBSSxDQUFDLENBQUM7T0FDL0IsQ0FBQyxDQUFDOztBQUVILGNBQVEsRUFBRSxDQUFDO0tBQ1o7OztTQXpCb0IsU0FBUztJQTBCL0IsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8va2liYW5hL3NyYy9zZXJ2ZXIvbG9nZ2luZy9sb2dfcmVwb3J0ZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQgTG9nRm9ybWF0SnNvbiBmcm9tICcuL2xvZ19mb3JtYXRfanNvbic7XG5pbXBvcnQgTG9nRm9ybWF0U3RyaW5nIGZyb20gJy4vbG9nX2Zvcm1hdF9zdHJpbmcnO1xuaW1wb3J0IHsgU3F1ZWV6ZSB9IGZyb20gJ2dvb2Qtc3F1ZWV6ZSc7XG5pbXBvcnQgeyBjcmVhdGVXcml0ZVN0cmVhbSBhcyB3cml0ZVN0ciB9IGZyb20gJ2ZzJztcblxubW9kdWxlLmV4cG9ydHMgPSBjbGFzcyBLYm5Mb2dnZXIge1xuICBjb25zdHJ1Y3RvcihldmVudHMsIGNvbmZpZykge1xuICAgIHRoaXMuc3F1ZWV6ZSA9IG5ldyBTcXVlZXplKGV2ZW50cyk7XG4gICAgdGhpcy5mb3JtYXQgPSBjb25maWcuanNvbiA/IG5ldyBMb2dGb3JtYXRKc29uKGNvbmZpZykgOiBuZXcgTG9nRm9ybWF0U3RyaW5nKGNvbmZpZyk7XG5cbiAgICBpZiAoY29uZmlnLmRlc3QgPT09ICdzdGRvdXQnKSB7XG4gICAgICB0aGlzLmRlc3QgPSBwcm9jZXNzLnN0ZG91dDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kZXN0ID0gd3JpdGVTdHIoY29uZmlnLmRlc3QsIHtcbiAgICAgICAgZmxhZ3M6ICdhJyxcbiAgICAgICAgZW5jb2Rpbmc6ICd1dGY4J1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgaW5pdChyZWFkc3RyZWFtLCBlbWl0dGVyLCBjYWxsYmFjaykge1xuXG4gICAgdGhpcy5vdXRwdXQgPSByZWFkc3RyZWFtLnBpcGUodGhpcy5zcXVlZXplKS5waXBlKHRoaXMuZm9ybWF0KTtcbiAgICB0aGlzLm91dHB1dC5waXBlKHRoaXMuZGVzdCk7XG5cbiAgICBlbWl0dGVyLm9uKCdzdG9wJywgKCkgPT4ge1xuICAgICAgdGhpcy5vdXRwdXQudW5waXBlKHRoaXMuZGVzdCk7XG4gICAgfSk7XG5cbiAgICBjYWxsYmFjaygpO1xuICB9XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/server/logging/log_reporter.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;sBAAc,QAAQ;;;;+BAEI,mBAAmB;;;;iCACjB,qBAAqB;;;;2BACzB,cAAc;;kBACQ,IAAI;;AAElD,MAAM,CAAC,OAAO;AACD,WADU,SAAS,CAClB,MAAM,EAAE,MAAM,EAAE;0BADP,SAAS;;AAE5B,QAAI,CAAC,OAAO,GAAG,yBAAY,MAAM,CAAC,CAAC;AACnC,QAAI,CAAC,MAAM,GAAG,MAAM,CAAC,IAAI,GAAG,iCAAkB,MAAM,CAAC,GAAG,mCAAoB,MAAM,CAAC,CAAC;;AAEpF,QAAI,MAAM,CAAC,IAAI,KAAK,QAAQ,EAAE;AAC5B,UAAI,CAAC,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC;KAC5B,MAAM;AACL,UAAI,CAAC,IAAI,GAAG,2BAAS,MAAM,CAAC,IAAI,EAAE;AAChC,aAAK,EAAE,GAAG;AACV,gBAAQ,EAAE,MAAM;OACjB,CAAC,CAAC;KACJ;GACF;;eAboB,SAAS;;WAe1B,cAAC,UAAU,EAAE,OAAO,EAAE,QAAQ,EAAE;;;AAElC,UAAI,CAAC,MAAM,GAAG,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AAC9D,UAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;;AAE5B,aAAO,CAAC,EAAE,CAAC,MAAM,EAAE,YAAM;AACvB,cAAK,MAAM,CAAC,MAAM,CAAC,MAAK,IAAI,CAAC,CAAC;OAC/B,CAAC,CAAC;;AAEH,cAAQ,EAAE,CAAC;KACZ;;;SAzBoB,SAAS;IA0B/B,CAAC",
      "file": "/home/vio/kibana/src/server/logging/log_reporter.js",
      "sourcesContent": [
        "import _ from 'lodash';\n\nimport LogFormatJson from './log_format_json';\nimport LogFormatString from './log_format_string';\nimport { Squeeze } from 'good-squeeze';\nimport { createWriteStream as writeStr } from 'fs';\n\nmodule.exports = class KbnLogger {\n  constructor(events, config) {\n    this.squeeze = new Squeeze(events);\n    this.format = config.json ? new LogFormatJson(config) : new LogFormatString(config);\n\n    if (config.dest === 'stdout') {\n      this.dest = process.stdout;\n    } else {\n      this.dest = writeStr(config.dest, {\n        flags: 'a',\n        encoding: 'utf8'\n      });\n    }\n  }\n\n  init(readstream, emitter, callback) {\n\n    this.output = readstream.pipe(this.squeeze).pipe(this.format);\n    this.output.pipe(this.dest);\n\n    emitter.on('stop', () => {\n      this.output.unpipe(this.dest);\n    });\n\n    callback();\n  }\n};\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/kibana/src/server/logging/log_format_json.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./log_format",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "LogFormat"
              }
            ]
          },
          {
            "source": "json-stringify-safe",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "stringify"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "get",
        "inherits",
        "create-class",
        "class-call-check",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _log_format = require('./log_format');\n\nvar _log_format2 = _interopRequireDefault(_log_format);\n\nvar _jsonStringifySafe = require('json-stringify-safe');\n\nvar _jsonStringifySafe2 = _interopRequireDefault(_jsonStringifySafe);\n\nvar stripColors = function stripColors(string) {\n  return string.replace(/\\u001b[^m]+m/g, '');\n};\n\nmodule.exports = (function (_LogFormat) {\n  _inherits(KbnLoggerJsonFormat, _LogFormat);\n\n  function KbnLoggerJsonFormat() {\n    _classCallCheck(this, KbnLoggerJsonFormat);\n\n    _get(Object.getPrototypeOf(KbnLoggerJsonFormat.prototype), 'constructor', this).apply(this, arguments);\n  }\n\n  _createClass(KbnLoggerJsonFormat, [{\n    key: 'format',\n    value: function format(data) {\n      data.message = stripColors(data.message);\n      return (0, _jsonStringifySafe2['default'])(data);\n    }\n  }]);\n\n  return KbnLoggerJsonFormat;\n})(_log_format2['default']);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3NlcnZlci9sb2dnaW5nL2xvZ19mb3JtYXRfanNvbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7MEJBQXNCLGNBQWM7Ozs7aUNBQ2QscUJBQXFCOzs7O0FBRTNDLElBQUksV0FBVyxHQUFHLFNBQWQsV0FBVyxDQUFhLE1BQU0sRUFBRTtBQUNsQyxTQUFPLE1BQU0sQ0FBQyxPQUFPLENBQUMsZUFBZSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0NBQzVDLENBQUM7O0FBRUYsTUFBTSxDQUFDLE9BQU87WUFBUyxtQkFBbUI7O1dBQW5CLG1CQUFtQjswQkFBbkIsbUJBQW1COzsrQkFBbkIsbUJBQW1COzs7ZUFBbkIsbUJBQW1COztXQUNsQyxnQkFBQyxJQUFJLEVBQUU7QUFDWCxVQUFJLENBQUMsT0FBTyxHQUFHLFdBQVcsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDekMsYUFBTyxvQ0FBVSxJQUFJLENBQUMsQ0FBQztLQUN4Qjs7O1NBSm9CLG1CQUFtQjsyQkFLekMsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8va2liYW5hL3NyYy9zZXJ2ZXIvbG9nZ2luZy9sb2dfZm9ybWF0X2pzb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTG9nRm9ybWF0IGZyb20gJy4vbG9nX2Zvcm1hdCc7XG5pbXBvcnQgc3RyaW5naWZ5IGZyb20gJ2pzb24tc3RyaW5naWZ5LXNhZmUnO1xuXG5sZXQgc3RyaXBDb2xvcnMgPSBmdW5jdGlvbiAoc3RyaW5nKSB7XG4gIHJldHVybiBzdHJpbmcucmVwbGFjZSgvXFx1MDAxYltebV0rbS9nLCAnJyk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIEtibkxvZ2dlckpzb25Gb3JtYXQgZXh0ZW5kcyBMb2dGb3JtYXQge1xuICBmb3JtYXQoZGF0YSkge1xuICAgIGRhdGEubWVzc2FnZSA9IHN0cmlwQ29sb3JzKGRhdGEubWVzc2FnZSk7XG4gICAgcmV0dXJuIHN0cmluZ2lmeShkYXRhKTtcbiAgfVxufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/server/logging/log_format_json.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;;;0BAAsB,cAAc;;;;iCACd,qBAAqB;;;;AAE3C,IAAI,WAAW,GAAG,SAAd,WAAW,CAAa,MAAM,EAAE;AAClC,SAAO,MAAM,CAAC,OAAO,CAAC,eAAe,EAAE,EAAE,CAAC,CAAC;CAC5C,CAAC;;AAEF,MAAM,CAAC,OAAO;YAAS,mBAAmB;;WAAnB,mBAAmB;0BAAnB,mBAAmB;;+BAAnB,mBAAmB;;;eAAnB,mBAAmB;;WAClC,gBAAC,IAAI,EAAE;AACX,UAAI,CAAC,OAAO,GAAG,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;AACzC,aAAO,oCAAU,IAAI,CAAC,CAAC;KACxB;;;SAJoB,mBAAmB;2BAKzC,CAAC",
      "file": "/home/vio/kibana/src/server/logging/log_format_json.js",
      "sourcesContent": [
        "import LogFormat from './log_format';\nimport stringify from 'json-stringify-safe';\n\nlet stripColors = function (string) {\n  return string.replace(/\\u001b[^m]+m/g, '');\n};\n\nmodule.exports = class KbnLoggerJsonFormat extends LogFormat {\n  format(data) {\n    data.message = stripColors(data.message);\n    return stringify(data);\n  }\n};\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/kibana/src/server/logging/log_format.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "stream",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Stream"
              }
            ]
          },
          {
            "source": "moment",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "moment"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "@spalger/numeral",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "numeral"
              }
            ]
          },
          {
            "source": "ansicolors",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "ansicolors"
              }
            ]
          },
          {
            "source": "json-stringify-safe",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "stringify"
              }
            ]
          },
          {
            "source": "querystring",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "querystring"
              }
            ]
          },
          {
            "source": "./apply_filters_to_keys",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "applyFiltersToKeys"
              }
            ]
          },
          {
            "source": "util",
            "imported": [
              "inspect"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "inspect",
                "local": "inspect"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "get",
        "inherits",
        "create-class",
        "class-call-check",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _stream = require('stream');\n\nvar _stream2 = _interopRequireDefault(_stream);\n\nvar _moment = require('moment');\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _spalgerNumeral = require('@spalger/numeral');\n\nvar _spalgerNumeral2 = _interopRequireDefault(_spalgerNumeral);\n\nvar _ansicolors = require('ansicolors');\n\nvar _ansicolors2 = _interopRequireDefault(_ansicolors);\n\nvar _jsonStringifySafe = require('json-stringify-safe');\n\nvar _jsonStringifySafe2 = _interopRequireDefault(_jsonStringifySafe);\n\nvar _querystring = require('querystring');\n\nvar _querystring2 = _interopRequireDefault(_querystring);\n\nvar _apply_filters_to_keys = require('./apply_filters_to_keys');\n\nvar _apply_filters_to_keys2 = _interopRequireDefault(_apply_filters_to_keys);\n\nvar _util = require('util');\n\nfunction serializeError(err) {\n  return {\n    message: err.message,\n    name: err.name,\n    stack: err.stack,\n    code: err.code,\n    signal: err.signal\n  };\n}\n\nvar levelColor = function levelColor(code) {\n  if (code < 299) return _ansicolors2['default'].green(code);\n  if (code < 399) return _ansicolors2['default'].yellow(code);\n  if (code < 499) return _ansicolors2['default'].magenta(code);\n  return _ansicolors2['default'].red(code);\n};\n\nmodule.exports = (function (_Stream$Transform) {\n  _inherits(TransformObjStream, _Stream$Transform);\n\n  function TransformObjStream(config) {\n    _classCallCheck(this, TransformObjStream);\n\n    _get(Object.getPrototypeOf(TransformObjStream.prototype), 'constructor', this).call(this, {\n      readableObjectMode: false,\n      writableObjectMode: true\n    });\n    this.config = config;\n  }\n\n  _createClass(TransformObjStream, [{\n    key: 'filter',\n    value: function filter(data) {\n      if (!this.config.filter) return data;\n      return (0, _apply_filters_to_keys2['default'])(data, this.config.filter);\n    }\n  }, {\n    key: '_transform',\n    value: function _transform(event, enc, next) {\n      var data = this.filter(this.readEvent(event));\n      this.push(this.format(data) + '\\n');\n      next();\n    }\n  }, {\n    key: 'readEvent',\n    value: function readEvent(event) {\n      var data = {\n        type: event.event,\n        '@timestamp': _moment2['default'].utc(event.timestamp).format(),\n        tags: [].concat(event.tags || []),\n        pid: event.pid\n      };\n\n      if (data.type === 'response') {\n        _lodash2['default'].defaults(data, _lodash2['default'].pick(event, ['method', 'statusCode']));\n\n        data.req = {\n          url: event.path,\n          method: event.method,\n          headers: event.headers,\n          remoteAddress: event.source.remoteAddress,\n          userAgent: event.source.remoteAddress,\n          referer: event.source.referer\n        };\n\n        var contentLength = 0;\n        if (typeof event.responsePayload === 'object') {\n          contentLength = (0, _jsonStringifySafe2['default'])(event.responsePayload).length;\n        } else {\n          contentLength = String(event.responsePayload).length;\n        }\n\n        data.res = {\n          statusCode: event.statusCode,\n          responseTime: event.responseTime,\n          contentLength: contentLength\n        };\n\n        var query = _querystring2['default'].stringify(event.query);\n        if (query) data.req.url += '?' + query;\n\n        data.message = data.req.method.toUpperCase() + ' ';\n        data.message += data.req.url;\n        data.message += ' ';\n        data.message += levelColor(data.res.statusCode);\n        data.message += ' ';\n        data.message += _ansicolors2['default'].brightBlack(data.res.responseTime + 'ms');\n        data.message += _ansicolors2['default'].brightBlack(' - ' + (0, _spalgerNumeral2['default'])(contentLength).format('0.0b'));\n      } else if (data.type === 'ops') {\n        _lodash2['default'].defaults(data, _lodash2['default'].pick(event, ['pid', 'os', 'proc', 'load']));\n        data.message = _ansicolors2['default'].brightBlack('memory: ');\n        data.message += (0, _spalgerNumeral2['default'])(data.proc.mem.heapUsed).format('0.0b');\n        data.message += ' ';\n        data.message += _ansicolors2['default'].brightBlack('uptime: ');\n        data.message += (0, _spalgerNumeral2['default'])(data.proc.uptime).format('00:00:00');\n        data.message += ' ';\n        data.message += _ansicolors2['default'].brightBlack('load: [');\n        data.message += data.os.load.map(function (val) {\n          return (0, _spalgerNumeral2['default'])(val).format('0.00');\n        }).join(' ');\n        data.message += _ansicolors2['default'].brightBlack(']');\n        data.message += ' ';\n        data.message += _ansicolors2['default'].brightBlack('delay: ');\n        data.message += (0, _spalgerNumeral2['default'])(data.proc.delay).format('0.000');\n      } else if (data.type === 'error') {\n        data.level = 'error';\n        data.message = event.error.message;\n        data.error = serializeError(event.error);\n        data.url = event.url;\n      } else if (event.data instanceof Error) {\n        data.level = _lodash2['default'].contains(event.tags, 'fatal') ? 'fatal' : 'error';\n        data.message = event.data.message;\n        data.error = serializeError(event.data);\n      } else if (_lodash2['default'].isPlainObject(event.data) && event.data.tmpl) {\n        _lodash2['default'].assign(data, event.data);\n        data.tmpl = undefined;\n        data.message = _lodash2['default'].template(event.data.tmpl)(event.data);\n      } else {\n        data.message = _lodash2['default'].isString(event.data) ? event.data : (0, _util.inspect)(event.data);\n      }\n      return data;\n    }\n  }]);\n\n  return TransformObjStream;\n})(_stream2['default'].Transform);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3NlcnZlci9sb2dnaW5nL2xvZ19mb3JtYXQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O3NCQUFtQixRQUFROzs7O3NCQUNSLFFBQVE7Ozs7c0JBQ2IsUUFBUTs7Ozs4QkFDRixrQkFBa0I7Ozs7MEJBQ2YsWUFBWTs7OztpQ0FDYixxQkFBcUI7Ozs7MkJBQ25CLGFBQWE7Ozs7cUNBQ04seUJBQXlCOzs7O29CQUNoQyxNQUFNOztBQUU5QixTQUFTLGNBQWMsQ0FBQyxHQUFHLEVBQUU7QUFDM0IsU0FBTztBQUNMLFdBQU8sRUFBRSxHQUFHLENBQUMsT0FBTztBQUNwQixRQUFJLEVBQUUsR0FBRyxDQUFDLElBQUk7QUFDZCxTQUFLLEVBQUUsR0FBRyxDQUFDLEtBQUs7QUFDaEIsUUFBSSxFQUFFLEdBQUcsQ0FBQyxJQUFJO0FBQ2QsVUFBTSxFQUFFLEdBQUcsQ0FBQyxNQUFNO0dBQ25CLENBQUM7Q0FDSDs7QUFFRCxJQUFJLFVBQVUsR0FBRyxTQUFiLFVBQVUsQ0FBYSxJQUFJLEVBQUU7QUFDL0IsTUFBSSxJQUFJLEdBQUcsR0FBRyxFQUFFLE9BQU8sd0JBQVcsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQzlDLE1BQUksSUFBSSxHQUFHLEdBQUcsRUFBRSxPQUFPLHdCQUFXLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUMvQyxNQUFJLElBQUksR0FBRyxHQUFHLEVBQUUsT0FBTyx3QkFBVyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDaEQsU0FBTyx3QkFBVyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7Q0FDN0IsQ0FBQzs7QUFHRixNQUFNLENBQUMsT0FBTztZQUFTLGtCQUFrQjs7QUFDNUIsV0FEVSxrQkFBa0IsQ0FDM0IsTUFBTSxFQUFFOzBCQURDLGtCQUFrQjs7QUFFckMsK0JBRm1CLGtCQUFrQiw2Q0FFL0I7QUFDSix3QkFBa0IsRUFBRSxLQUFLO0FBQ3pCLHdCQUFrQixFQUFFLElBQUk7S0FDekIsRUFBRTtBQUNILFFBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO0dBQ3RCOztlQVBvQixrQkFBa0I7O1dBU2pDLGdCQUFDLElBQUksRUFBRTtBQUNYLFVBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxPQUFPLElBQUksQ0FBQztBQUNyQyxhQUFPLHdDQUFtQixJQUFJLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztLQUNyRDs7O1dBRVMsb0JBQUMsS0FBSyxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUU7QUFDM0IsVUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7QUFDOUMsVUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDO0FBQ3BDLFVBQUksRUFBRSxDQUFDO0tBQ1I7OztXQUVRLG1CQUFDLEtBQUssRUFBRTtBQUNmLFVBQUksSUFBSSxHQUFHO0FBQ1QsWUFBSSxFQUFFLEtBQUssQ0FBQyxLQUFLO0FBQ2pCLG9CQUFZLEVBQUUsb0JBQU8sR0FBRyxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQyxNQUFNLEVBQUU7QUFDbEQsWUFBSSxFQUFFLEVBQUUsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksSUFBSSxFQUFFLENBQUM7QUFDakMsV0FBRyxFQUFFLEtBQUssQ0FBQyxHQUFHO09BQ2YsQ0FBQzs7QUFFRixVQUFJLElBQUksQ0FBQyxJQUFJLEtBQUssVUFBVSxFQUFFO0FBQzVCLDRCQUFFLFFBQVEsQ0FBQyxJQUFJLEVBQUUsb0JBQUUsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUM3QixRQUFRLEVBQ1IsWUFBWSxDQUNiLENBQUMsQ0FBQyxDQUFDOztBQUVKLFlBQUksQ0FBQyxHQUFHLEdBQUc7QUFDVCxhQUFHLEVBQUUsS0FBSyxDQUFDLElBQUk7QUFDZixnQkFBTSxFQUFFLEtBQUssQ0FBQyxNQUFNO0FBQ3BCLGlCQUFPLEVBQUUsS0FBSyxDQUFDLE9BQU87QUFDdEIsdUJBQWEsRUFBRSxLQUFLLENBQUMsTUFBTSxDQUFDLGFBQWE7QUFDekMsbUJBQVMsRUFBRSxLQUFLLENBQUMsTUFBTSxDQUFDLGFBQWE7QUFDckMsaUJBQU8sRUFBRSxLQUFLLENBQUMsTUFBTSxDQUFDLE9BQU87U0FDOUIsQ0FBQzs7QUFFRixZQUFJLGFBQWEsR0FBRyxDQUFDLENBQUM7QUFDdEIsWUFBSSxPQUFPLEtBQUssQ0FBQyxlQUFlLEtBQUssUUFBUSxFQUFFO0FBQzdDLHVCQUFhLEdBQUcsb0NBQVUsS0FBSyxDQUFDLGVBQWUsQ0FBQyxDQUFDLE1BQU0sQ0FBQztTQUN6RCxNQUFNO0FBQ0wsdUJBQWEsR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxDQUFDLE1BQU0sQ0FBQztTQUN0RDs7QUFFRCxZQUFJLENBQUMsR0FBRyxHQUFHO0FBQ1Qsb0JBQVUsRUFBRSxLQUFLLENBQUMsVUFBVTtBQUM1QixzQkFBWSxFQUFFLEtBQUssQ0FBQyxZQUFZO0FBQ2hDLHVCQUFhLEVBQUUsYUFBYTtTQUM3QixDQUFDOztBQUVGLFlBQUksS0FBSyxHQUFHLHlCQUFZLFNBQVMsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDL0MsWUFBSSxLQUFLLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLElBQUksR0FBRyxHQUFHLEtBQUssQ0FBQzs7QUFHdkMsWUFBSSxDQUFDLE9BQU8sR0FBSSxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxXQUFXLEVBQUUsR0FBRyxHQUFHLENBQUM7QUFDcEQsWUFBSSxDQUFDLE9BQU8sSUFBSSxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQztBQUM3QixZQUFJLENBQUMsT0FBTyxJQUFJLEdBQUcsQ0FBQztBQUNwQixZQUFJLENBQUMsT0FBTyxJQUFJLFVBQVUsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQ2hELFlBQUksQ0FBQyxPQUFPLElBQUksR0FBRyxDQUFDO0FBQ3BCLFlBQUksQ0FBQyxPQUFPLElBQUksd0JBQVcsV0FBVyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxDQUFDO0FBQ3JFLFlBQUksQ0FBQyxPQUFPLElBQUksd0JBQVcsV0FBVyxDQUFDLEtBQUssR0FBRyxpQ0FBUSxhQUFhLENBQUMsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztPQUN2RixNQUNJLElBQUksSUFBSSxDQUFDLElBQUksS0FBSyxLQUFLLEVBQUU7QUFDNUIsNEJBQUUsUUFBUSxDQUFDLElBQUksRUFBRSxvQkFBRSxJQUFJLENBQUMsS0FBSyxFQUFFLENBQzdCLEtBQUssRUFDTCxJQUFJLEVBQ0osTUFBTSxFQUNOLE1BQU0sQ0FDUCxDQUFDLENBQUMsQ0FBQztBQUNKLFlBQUksQ0FBQyxPQUFPLEdBQUksd0JBQVcsV0FBVyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQ25ELFlBQUksQ0FBQyxPQUFPLElBQUksaUNBQVEsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQy9ELFlBQUksQ0FBQyxPQUFPLElBQUksR0FBRyxDQUFDO0FBQ3BCLFlBQUksQ0FBQyxPQUFPLElBQUksd0JBQVcsV0FBVyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQ25ELFlBQUksQ0FBQyxPQUFPLElBQUksaUNBQVEsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDN0QsWUFBSSxDQUFDLE9BQU8sSUFBSSxHQUFHLENBQUM7QUFDcEIsWUFBSSxDQUFDLE9BQU8sSUFBSSx3QkFBVyxXQUFXLENBQUMsU0FBUyxDQUFDLENBQUM7QUFDbEQsWUFBSSxDQUFDLE9BQU8sSUFBSSxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsVUFBVSxHQUFHLEVBQUU7QUFDOUMsaUJBQU8saUNBQVEsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1NBQ3BDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDYixZQUFJLENBQUMsT0FBTyxJQUFJLHdCQUFXLFdBQVcsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUM1QyxZQUFJLENBQUMsT0FBTyxJQUFJLEdBQUcsQ0FBQztBQUNwQixZQUFJLENBQUMsT0FBTyxJQUFJLHdCQUFXLFdBQVcsQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUNsRCxZQUFJLENBQUMsT0FBTyxJQUFJLGlDQUFRLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDO09BQzFELE1BQ0ksSUFBSSxJQUFJLENBQUMsSUFBSSxLQUFLLE9BQU8sRUFBRTtBQUM5QixZQUFJLENBQUMsS0FBSyxHQUFHLE9BQU8sQ0FBQztBQUNyQixZQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDO0FBQ25DLFlBQUksQ0FBQyxLQUFLLEdBQUcsY0FBYyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUN6QyxZQUFJLENBQUMsR0FBRyxHQUFHLEtBQUssQ0FBQyxHQUFHLENBQUM7T0FDdEIsTUFDSSxJQUFJLEtBQUssQ0FBQyxJQUFJLFlBQVksS0FBSyxFQUFFO0FBQ3BDLFlBQUksQ0FBQyxLQUFLLEdBQUcsb0JBQUUsUUFBUSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDLEdBQUcsT0FBTyxHQUFHLE9BQU8sQ0FBQztBQUNqRSxZQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDO0FBQ2xDLFlBQUksQ0FBQyxLQUFLLEdBQUcsY0FBYyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztPQUN6QyxNQUNJLElBQUksb0JBQUUsYUFBYSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRTtBQUN2RCw0QkFBRSxNQUFNLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUMzQixZQUFJLENBQUMsSUFBSSxHQUFHLFNBQVMsQ0FBQztBQUN0QixZQUFJLENBQUMsT0FBTyxHQUFHLG9CQUFFLFFBQVEsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztPQUN4RCxNQUNJO0FBQ0gsWUFBSSxDQUFDLE9BQU8sR0FBRyxvQkFBRSxRQUFRLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLEtBQUssQ0FBQyxJQUFJLEdBQUcsbUJBQVEsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO09BQzFFO0FBQ0QsYUFBTyxJQUFJLENBQUM7S0FDYjs7O1NBOUdvQixrQkFBa0I7R0FBUyxvQkFBTyxTQUFTLENBK0dqRSxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby9raWJhbmEvc3JjL3NlcnZlci9sb2dnaW5nL2xvZ19mb3JtYXQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgU3RyZWFtIGZyb20gJ3N0cmVhbSc7XG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IG51bWVyYWwgZnJvbSAnQHNwYWxnZXIvbnVtZXJhbCc7XG5pbXBvcnQgYW5zaWNvbG9ycyBmcm9tICdhbnNpY29sb3JzJztcbmltcG9ydCBzdHJpbmdpZnkgZnJvbSAnanNvbi1zdHJpbmdpZnktc2FmZSc7XG5pbXBvcnQgcXVlcnlzdHJpbmcgZnJvbSAncXVlcnlzdHJpbmcnO1xuaW1wb3J0IGFwcGx5RmlsdGVyc1RvS2V5cyBmcm9tICcuL2FwcGx5X2ZpbHRlcnNfdG9fa2V5cyc7XG5pbXBvcnQgeyBpbnNwZWN0IH0gZnJvbSAndXRpbCc7XG5cbmZ1bmN0aW9uIHNlcmlhbGl6ZUVycm9yKGVycikge1xuICByZXR1cm4ge1xuICAgIG1lc3NhZ2U6IGVyci5tZXNzYWdlLFxuICAgIG5hbWU6IGVyci5uYW1lLFxuICAgIHN0YWNrOiBlcnIuc3RhY2ssXG4gICAgY29kZTogZXJyLmNvZGUsXG4gICAgc2lnbmFsOiBlcnIuc2lnbmFsXG4gIH07XG59XG5cbmxldCBsZXZlbENvbG9yID0gZnVuY3Rpb24gKGNvZGUpIHtcbiAgaWYgKGNvZGUgPCAyOTkpIHJldHVybiBhbnNpY29sb3JzLmdyZWVuKGNvZGUpO1xuICBpZiAoY29kZSA8IDM5OSkgcmV0dXJuIGFuc2ljb2xvcnMueWVsbG93KGNvZGUpO1xuICBpZiAoY29kZSA8IDQ5OSkgcmV0dXJuIGFuc2ljb2xvcnMubWFnZW50YShjb2RlKTtcbiAgcmV0dXJuIGFuc2ljb2xvcnMucmVkKGNvZGUpO1xufTtcblxuXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIFRyYW5zZm9ybU9ialN0cmVhbSBleHRlbmRzIFN0cmVhbS5UcmFuc2Zvcm0ge1xuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICBzdXBlcih7XG4gICAgICByZWFkYWJsZU9iamVjdE1vZGU6IGZhbHNlLFxuICAgICAgd3JpdGFibGVPYmplY3RNb2RlOiB0cnVlXG4gICAgfSk7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gIH1cblxuICBmaWx0ZXIoZGF0YSkge1xuICAgIGlmICghdGhpcy5jb25maWcuZmlsdGVyKSByZXR1cm4gZGF0YTtcbiAgICByZXR1cm4gYXBwbHlGaWx0ZXJzVG9LZXlzKGRhdGEsIHRoaXMuY29uZmlnLmZpbHRlcik7XG4gIH1cblxuICBfdHJhbnNmb3JtKGV2ZW50LCBlbmMsIG5leHQpIHtcbiAgICBsZXQgZGF0YSA9IHRoaXMuZmlsdGVyKHRoaXMucmVhZEV2ZW50KGV2ZW50KSk7XG4gICAgdGhpcy5wdXNoKHRoaXMuZm9ybWF0KGRhdGEpICsgJ1xcbicpO1xuICAgIG5leHQoKTtcbiAgfVxuXG4gIHJlYWRFdmVudChldmVudCkge1xuICAgIGxldCBkYXRhID0ge1xuICAgICAgdHlwZTogZXZlbnQuZXZlbnQsXG4gICAgICAnQHRpbWVzdGFtcCc6IG1vbWVudC51dGMoZXZlbnQudGltZXN0YW1wKS5mb3JtYXQoKSxcbiAgICAgIHRhZ3M6IFtdLmNvbmNhdChldmVudC50YWdzIHx8IFtdKSxcbiAgICAgIHBpZDogZXZlbnQucGlkXG4gICAgfTtcblxuICAgIGlmIChkYXRhLnR5cGUgPT09ICdyZXNwb25zZScpIHtcbiAgICAgIF8uZGVmYXVsdHMoZGF0YSwgXy5waWNrKGV2ZW50LCBbXG4gICAgICAgICdtZXRob2QnLFxuICAgICAgICAnc3RhdHVzQ29kZSdcbiAgICAgIF0pKTtcblxuICAgICAgZGF0YS5yZXEgPSB7XG4gICAgICAgIHVybDogZXZlbnQucGF0aCxcbiAgICAgICAgbWV0aG9kOiBldmVudC5tZXRob2QsXG4gICAgICAgIGhlYWRlcnM6IGV2ZW50LmhlYWRlcnMsXG4gICAgICAgIHJlbW90ZUFkZHJlc3M6IGV2ZW50LnNvdXJjZS5yZW1vdGVBZGRyZXNzLFxuICAgICAgICB1c2VyQWdlbnQ6IGV2ZW50LnNvdXJjZS5yZW1vdGVBZGRyZXNzLFxuICAgICAgICByZWZlcmVyOiBldmVudC5zb3VyY2UucmVmZXJlclxuICAgICAgfTtcblxuICAgICAgbGV0IGNvbnRlbnRMZW5ndGggPSAwO1xuICAgICAgaWYgKHR5cGVvZiBldmVudC5yZXNwb25zZVBheWxvYWQgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGNvbnRlbnRMZW5ndGggPSBzdHJpbmdpZnkoZXZlbnQucmVzcG9uc2VQYXlsb2FkKS5sZW5ndGg7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb250ZW50TGVuZ3RoID0gU3RyaW5nKGV2ZW50LnJlc3BvbnNlUGF5bG9hZCkubGVuZ3RoO1xuICAgICAgfVxuXG4gICAgICBkYXRhLnJlcyA9IHtcbiAgICAgICAgc3RhdHVzQ29kZTogZXZlbnQuc3RhdHVzQ29kZSxcbiAgICAgICAgcmVzcG9uc2VUaW1lOiBldmVudC5yZXNwb25zZVRpbWUsXG4gICAgICAgIGNvbnRlbnRMZW5ndGg6IGNvbnRlbnRMZW5ndGhcbiAgICAgIH07XG5cbiAgICAgIGxldCBxdWVyeSA9IHF1ZXJ5c3RyaW5nLnN0cmluZ2lmeShldmVudC5xdWVyeSk7XG4gICAgICBpZiAocXVlcnkpIGRhdGEucmVxLnVybCArPSAnPycgKyBxdWVyeTtcblxuXG4gICAgICBkYXRhLm1lc3NhZ2UgID0gZGF0YS5yZXEubWV0aG9kLnRvVXBwZXJDYXNlKCkgKyAnICc7XG4gICAgICBkYXRhLm1lc3NhZ2UgKz0gZGF0YS5yZXEudXJsO1xuICAgICAgZGF0YS5tZXNzYWdlICs9ICcgJztcbiAgICAgIGRhdGEubWVzc2FnZSArPSBsZXZlbENvbG9yKGRhdGEucmVzLnN0YXR1c0NvZGUpO1xuICAgICAgZGF0YS5tZXNzYWdlICs9ICcgJztcbiAgICAgIGRhdGEubWVzc2FnZSArPSBhbnNpY29sb3JzLmJyaWdodEJsYWNrKGRhdGEucmVzLnJlc3BvbnNlVGltZSArICdtcycpO1xuICAgICAgZGF0YS5tZXNzYWdlICs9IGFuc2ljb2xvcnMuYnJpZ2h0QmxhY2soJyAtICcgKyBudW1lcmFsKGNvbnRlbnRMZW5ndGgpLmZvcm1hdCgnMC4wYicpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZGF0YS50eXBlID09PSAnb3BzJykge1xuICAgICAgXy5kZWZhdWx0cyhkYXRhLCBfLnBpY2soZXZlbnQsIFtcbiAgICAgICAgJ3BpZCcsXG4gICAgICAgICdvcycsXG4gICAgICAgICdwcm9jJyxcbiAgICAgICAgJ2xvYWQnXG4gICAgICBdKSk7XG4gICAgICBkYXRhLm1lc3NhZ2UgID0gYW5zaWNvbG9ycy5icmlnaHRCbGFjaygnbWVtb3J5OiAnKTtcbiAgICAgIGRhdGEubWVzc2FnZSArPSBudW1lcmFsKGRhdGEucHJvYy5tZW0uaGVhcFVzZWQpLmZvcm1hdCgnMC4wYicpO1xuICAgICAgZGF0YS5tZXNzYWdlICs9ICcgJztcbiAgICAgIGRhdGEubWVzc2FnZSArPSBhbnNpY29sb3JzLmJyaWdodEJsYWNrKCd1cHRpbWU6ICcpO1xuICAgICAgZGF0YS5tZXNzYWdlICs9IG51bWVyYWwoZGF0YS5wcm9jLnVwdGltZSkuZm9ybWF0KCcwMDowMDowMCcpO1xuICAgICAgZGF0YS5tZXNzYWdlICs9ICcgJztcbiAgICAgIGRhdGEubWVzc2FnZSArPSBhbnNpY29sb3JzLmJyaWdodEJsYWNrKCdsb2FkOiBbJyk7XG4gICAgICBkYXRhLm1lc3NhZ2UgKz0gZGF0YS5vcy5sb2FkLm1hcChmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgIHJldHVybiBudW1lcmFsKHZhbCkuZm9ybWF0KCcwLjAwJyk7XG4gICAgICB9KS5qb2luKCcgJyk7XG4gICAgICBkYXRhLm1lc3NhZ2UgKz0gYW5zaWNvbG9ycy5icmlnaHRCbGFjaygnXScpO1xuICAgICAgZGF0YS5tZXNzYWdlICs9ICcgJztcbiAgICAgIGRhdGEubWVzc2FnZSArPSBhbnNpY29sb3JzLmJyaWdodEJsYWNrKCdkZWxheTogJyk7XG4gICAgICBkYXRhLm1lc3NhZ2UgKz0gbnVtZXJhbChkYXRhLnByb2MuZGVsYXkpLmZvcm1hdCgnMC4wMDAnKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZGF0YS50eXBlID09PSAnZXJyb3InKSB7XG4gICAgICBkYXRhLmxldmVsID0gJ2Vycm9yJztcbiAgICAgIGRhdGEubWVzc2FnZSA9IGV2ZW50LmVycm9yLm1lc3NhZ2U7XG4gICAgICBkYXRhLmVycm9yID0gc2VyaWFsaXplRXJyb3IoZXZlbnQuZXJyb3IpO1xuICAgICAgZGF0YS51cmwgPSBldmVudC51cmw7XG4gICAgfVxuICAgIGVsc2UgaWYgKGV2ZW50LmRhdGEgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgZGF0YS5sZXZlbCA9IF8uY29udGFpbnMoZXZlbnQudGFncywgJ2ZhdGFsJykgPyAnZmF0YWwnIDogJ2Vycm9yJztcbiAgICAgIGRhdGEubWVzc2FnZSA9IGV2ZW50LmRhdGEubWVzc2FnZTtcbiAgICAgIGRhdGEuZXJyb3IgPSBzZXJpYWxpemVFcnJvcihldmVudC5kYXRhKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoXy5pc1BsYWluT2JqZWN0KGV2ZW50LmRhdGEpICYmIGV2ZW50LmRhdGEudG1wbCkge1xuICAgICAgXy5hc3NpZ24oZGF0YSwgZXZlbnQuZGF0YSk7XG4gICAgICBkYXRhLnRtcGwgPSB1bmRlZmluZWQ7XG4gICAgICBkYXRhLm1lc3NhZ2UgPSBfLnRlbXBsYXRlKGV2ZW50LmRhdGEudG1wbCkoZXZlbnQuZGF0YSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgZGF0YS5tZXNzYWdlID0gXy5pc1N0cmluZyhldmVudC5kYXRhKSA/IGV2ZW50LmRhdGEgOiBpbnNwZWN0KGV2ZW50LmRhdGEpO1xuICAgIH1cbiAgICByZXR1cm4gZGF0YTtcbiAgfVxufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/server/logging/log_format.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/kibana/src/server/logging/log_format.js",
      "sourcesContent": [
        "import Stream from 'stream';\nimport moment from 'moment';\nimport _ from 'lodash';\nimport numeral from '@spalger/numeral';\nimport ansicolors from 'ansicolors';\nimport stringify from 'json-stringify-safe';\nimport querystring from 'querystring';\nimport applyFiltersToKeys from './apply_filters_to_keys';\nimport { inspect } from 'util';\n\nfunction serializeError(err) {\n  return {\n    message: err.message,\n    name: err.name,\n    stack: err.stack,\n    code: err.code,\n    signal: err.signal\n  };\n}\n\nlet levelColor = function (code) {\n  if (code < 299) return ansicolors.green(code);\n  if (code < 399) return ansicolors.yellow(code);\n  if (code < 499) return ansicolors.magenta(code);\n  return ansicolors.red(code);\n};\n\n\nmodule.exports = class TransformObjStream extends Stream.Transform {\n  constructor(config) {\n    super({\n      readableObjectMode: false,\n      writableObjectMode: true\n    });\n    this.config = config;\n  }\n\n  filter(data) {\n    if (!this.config.filter) return data;\n    return applyFiltersToKeys(data, this.config.filter);\n  }\n\n  _transform(event, enc, next) {\n    let data = this.filter(this.readEvent(event));\n    this.push(this.format(data) + '\\n');\n    next();\n  }\n\n  readEvent(event) {\n    let data = {\n      type: event.event,\n      '@timestamp': moment.utc(event.timestamp).format(),\n      tags: [].concat(event.tags || []),\n      pid: event.pid\n    };\n\n    if (data.type === 'response') {\n      _.defaults(data, _.pick(event, [\n        'method',\n        'statusCode'\n      ]));\n\n      data.req = {\n        url: event.path,\n        method: event.method,\n        headers: event.headers,\n        remoteAddress: event.source.remoteAddress,\n        userAgent: event.source.remoteAddress,\n        referer: event.source.referer\n      };\n\n      let contentLength = 0;\n      if (typeof event.responsePayload === 'object') {\n        contentLength = stringify(event.responsePayload).length;\n      } else {\n        contentLength = String(event.responsePayload).length;\n      }\n\n      data.res = {\n        statusCode: event.statusCode,\n        responseTime: event.responseTime,\n        contentLength: contentLength\n      };\n\n      let query = querystring.stringify(event.query);\n      if (query) data.req.url += '?' + query;\n\n\n      data.message  = data.req.method.toUpperCase() + ' ';\n      data.message += data.req.url;\n      data.message += ' ';\n      data.message += levelColor(data.res.statusCode);\n      data.message += ' ';\n      data.message += ansicolors.brightBlack(data.res.responseTime + 'ms');\n      data.message += ansicolors.brightBlack(' - ' + numeral(contentLength).format('0.0b'));\n    }\n    else if (data.type === 'ops') {\n      _.defaults(data, _.pick(event, [\n        'pid',\n        'os',\n        'proc',\n        'load'\n      ]));\n      data.message  = ansicolors.brightBlack('memory: ');\n      data.message += numeral(data.proc.mem.heapUsed).format('0.0b');\n      data.message += ' ';\n      data.message += ansicolors.brightBlack('uptime: ');\n      data.message += numeral(data.proc.uptime).format('00:00:00');\n      data.message += ' ';\n      data.message += ansicolors.brightBlack('load: [');\n      data.message += data.os.load.map(function (val) {\n        return numeral(val).format('0.00');\n      }).join(' ');\n      data.message += ansicolors.brightBlack(']');\n      data.message += ' ';\n      data.message += ansicolors.brightBlack('delay: ');\n      data.message += numeral(data.proc.delay).format('0.000');\n    }\n    else if (data.type === 'error') {\n      data.level = 'error';\n      data.message = event.error.message;\n      data.error = serializeError(event.error);\n      data.url = event.url;\n    }\n    else if (event.data instanceof Error) {\n      data.level = _.contains(event.tags, 'fatal') ? 'fatal' : 'error';\n      data.message = event.data.message;\n      data.error = serializeError(event.data);\n    }\n    else if (_.isPlainObject(event.data) && event.data.tmpl) {\n      _.assign(data, event.data);\n      data.tmpl = undefined;\n      data.message = _.template(event.data.tmpl)(event.data);\n    }\n    else {\n      data.message = _.isString(event.data) ? event.data : inspect(event.data);\n    }\n    return data;\n  }\n};\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/kibana/src/server/logging/apply_filters_to_keys.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction toPojo(obj) {\n  return JSON.parse(JSON.stringify(obj));\n}\n\nfunction replacer(match, group) {\n  return new Array(group.length + 1).join('X');\n}\n\nfunction apply(obj, key, action) {\n  for (var k in obj) {\n    if (obj.hasOwnProperty(k)) {\n      var val = obj[k];\n      if (k === key) {\n        if (action === 'remove') {\n          delete obj[k];\n        } else if (action === 'censor' && typeof val === 'object') {\n          delete obj[key];\n        } else if (action === 'censor') {\n          obj[k] = ('' + val).replace(/./g, 'X');\n        } else if (/\\/.+\\//.test(action)) {\n          var matches = action.match(/\\/(.+)\\//);\n          if (matches) {\n            var regex = new RegExp(matches[1]);\n            obj[k] = ('' + val).replace(regex, replacer);\n          }\n        }\n      } else if (typeof val === 'object') {\n        val = apply(val, key, action);\n      }\n    }\n  }\n  return obj;\n}\n\nmodule.exports = function (obj, actionsByKey) {\n  return Object.keys(actionsByKey).reduce(function (output, key) {\n    return apply(output, key, actionsByKey[key]);\n  }, toPojo(obj));\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3NlcnZlci9sb2dnaW5nL2FwcGx5X2ZpbHRlcnNfdG9fa2V5cy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLFNBQVMsTUFBTSxDQUFDLEdBQUcsRUFBRTtBQUNuQixTQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0NBQ3hDOztBQUVELFNBQVMsUUFBUSxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUU7QUFDOUIsU0FBUSxJQUFJLEtBQUssQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBRTtDQUNoRDs7QUFFRCxTQUFTLEtBQUssQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLE1BQU0sRUFBRTtBQUMvQixPQUFLLElBQUksQ0FBQyxJQUFJLEdBQUcsRUFBRztBQUNsQixRQUFJLEdBQUcsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLEVBQUU7QUFDekIsVUFBSSxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2pCLFVBQUksQ0FBQyxLQUFLLEdBQUcsRUFBRTtBQUNiLFlBQUksTUFBTSxLQUFLLFFBQVEsRUFBRTtBQUN2QixpQkFBTyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDZixNQUNJLElBQUksTUFBTSxLQUFLLFFBQVEsSUFBSSxPQUFPLEdBQUcsS0FBSyxRQUFRLEVBQUU7QUFDdkQsaUJBQU8sR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1NBQ2pCLE1BQ0ksSUFBSSxNQUFNLEtBQUssUUFBUSxFQUFFO0FBQzVCLGFBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsR0FBRyxHQUFHLENBQUEsQ0FBRSxPQUFPLENBQUMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDO1NBQ3hDLE1BQ0ksSUFBSSxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFO0FBQzlCLGNBQUksT0FBTyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDdkMsY0FBSSxPQUFPLEVBQUU7QUFDWCxnQkFBSSxLQUFLLEdBQUcsSUFBSSxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDbkMsZUFBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLEdBQUcsQ0FBQSxDQUFFLE9BQU8sQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLENBQUM7V0FDOUM7U0FDRjtPQUNGLE1BQU0sSUFBSSxPQUFPLEdBQUcsS0FBSyxRQUFRLEVBQUU7QUFDbEMsV0FBRyxHQUFHLEtBQUssQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLE1BQU0sQ0FBQyxDQUFDO09BQy9CO0tBQ0Y7R0FDRjtBQUNELFNBQU8sR0FBRyxDQUFDO0NBQ1o7O0FBRUQsTUFBTSxDQUFDLE9BQU8sR0FBRyxVQUFVLEdBQUcsRUFBRSxZQUFZLEVBQUU7QUFDNUMsU0FBTyxNQUFNLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxVQUFDLE1BQU0sRUFBRSxHQUFHLEVBQUs7QUFDdkQsV0FBTyxLQUFLLENBQUMsTUFBTSxFQUFFLEdBQUcsRUFBRSxZQUFZLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztHQUM5QyxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0NBQ2pCLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL2tpYmFuYS9zcmMvc2VydmVyL2xvZ2dpbmcvYXBwbHlfZmlsdGVyc190b19rZXlzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gdG9Qb2pvKG9iaikge1xuICByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShvYmopKTtcbn1cblxuZnVuY3Rpb24gcmVwbGFjZXIobWF0Y2gsIGdyb3VwKSB7XG4gIHJldHVybiAobmV3IEFycmF5KGdyb3VwLmxlbmd0aCArIDEpLmpvaW4oJ1gnKSk7XG59XG5cbmZ1bmN0aW9uIGFwcGx5KG9iaiwga2V5LCBhY3Rpb24pIHtcbiAgZm9yIChsZXQgayBpbiBvYmopICB7XG4gICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShrKSkge1xuICAgICAgbGV0IHZhbCA9IG9ialtrXTtcbiAgICAgIGlmIChrID09PSBrZXkpIHtcbiAgICAgICAgaWYgKGFjdGlvbiA9PT0gJ3JlbW92ZScpIHtcbiAgICAgICAgICBkZWxldGUgb2JqW2tdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGFjdGlvbiA9PT0gJ2NlbnNvcicgJiYgdHlwZW9mIHZhbCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICBkZWxldGUgb2JqW2tleV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYWN0aW9uID09PSAnY2Vuc29yJykge1xuICAgICAgICAgIG9ialtrXSA9ICgnJyArIHZhbCkucmVwbGFjZSgvLi9nLCAnWCcpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKC9cXC8uK1xcLy8udGVzdChhY3Rpb24pKSB7XG4gICAgICAgICAgbGV0IG1hdGNoZXMgPSBhY3Rpb24ubWF0Y2goL1xcLyguKylcXC8vKTtcbiAgICAgICAgICBpZiAobWF0Y2hlcykge1xuICAgICAgICAgICAgbGV0IHJlZ2V4ID0gbmV3IFJlZ0V4cChtYXRjaGVzWzFdKTtcbiAgICAgICAgICAgIG9ialtrXSA9ICgnJyArIHZhbCkucmVwbGFjZShyZWdleCwgcmVwbGFjZXIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSAnb2JqZWN0Jykge1xuICAgICAgICB2YWwgPSBhcHBseSh2YWwsIGtleSwgYWN0aW9uKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIG9iajtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAob2JqLCBhY3Rpb25zQnlLZXkpIHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKGFjdGlvbnNCeUtleSkucmVkdWNlKChvdXRwdXQsIGtleSkgPT4ge1xuICAgIHJldHVybiBhcHBseShvdXRwdXQsIGtleSwgYWN0aW9uc0J5S2V5W2tleV0pO1xuICB9LCB0b1Bvam8ob2JqKSk7XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/server/logging/apply_filters_to_keys.js"
      ],
      "names": [],
      "mappings": ";;AAAA,SAAS,MAAM,CAAC,GAAG,EAAE;AACnB,SAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC;CACxC;;AAED,SAAS,QAAQ,CAAC,KAAK,EAAE,KAAK,EAAE;AAC9B,SAAQ,IAAI,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAE;CAChD;;AAED,SAAS,KAAK,CAAC,GAAG,EAAE,GAAG,EAAE,MAAM,EAAE;AAC/B,OAAK,IAAI,CAAC,IAAI,GAAG,EAAG;AAClB,QAAI,GAAG,CAAC,cAAc,CAAC,CAAC,CAAC,EAAE;AACzB,UAAI,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;AACjB,UAAI,CAAC,KAAK,GAAG,EAAE;AACb,YAAI,MAAM,KAAK,QAAQ,EAAE;AACvB,iBAAO,GAAG,CAAC,CAAC,CAAC,CAAC;SACf,MACI,IAAI,MAAM,KAAK,QAAQ,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE;AACvD,iBAAO,GAAG,CAAC,GAAG,CAAC,CAAC;SACjB,MACI,IAAI,MAAM,KAAK,QAAQ,EAAE;AAC5B,aAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,CAAA,CAAE,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;SACxC,MACI,IAAI,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE;AAC9B,cAAI,OAAO,GAAG,MAAM,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;AACvC,cAAI,OAAO,EAAE;AACX,gBAAI,KAAK,GAAG,IAAI,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;AACnC,eAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,CAAA,CAAE,OAAO,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;WAC9C;SACF;OACF,MAAM,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE;AAClC,WAAG,GAAG,KAAK,CAAC,GAAG,EAAE,GAAG,EAAE,MAAM,CAAC,CAAC;OAC/B;KACF;GACF;AACD,SAAO,GAAG,CAAC;CACZ;;AAED,MAAM,CAAC,OAAO,GAAG,UAAU,GAAG,EAAE,YAAY,EAAE;AAC5C,SAAO,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,MAAM,CAAC,UAAC,MAAM,EAAE,GAAG,EAAK;AACvD,WAAO,KAAK,CAAC,MAAM,EAAE,GAAG,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC;GAC9C,EAAE,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC;CACjB,CAAC",
      "file": "/home/vio/kibana/src/server/logging/apply_filters_to_keys.js",
      "sourcesContent": [
        "function toPojo(obj) {\n  return JSON.parse(JSON.stringify(obj));\n}\n\nfunction replacer(match, group) {\n  return (new Array(group.length + 1).join('X'));\n}\n\nfunction apply(obj, key, action) {\n  for (let k in obj)  {\n    if (obj.hasOwnProperty(k)) {\n      let val = obj[k];\n      if (k === key) {\n        if (action === 'remove') {\n          delete obj[k];\n        }\n        else if (action === 'censor' && typeof val === 'object') {\n          delete obj[key];\n        }\n        else if (action === 'censor') {\n          obj[k] = ('' + val).replace(/./g, 'X');\n        }\n        else if (/\\/.+\\//.test(action)) {\n          let matches = action.match(/\\/(.+)\\//);\n          if (matches) {\n            let regex = new RegExp(matches[1]);\n            obj[k] = ('' + val).replace(regex, replacer);\n          }\n        }\n      } else if (typeof val === 'object') {\n        val = apply(val, key, action);\n      }\n    }\n  }\n  return obj;\n}\n\nmodule.exports = function (obj, actionsByKey) {\n  return Object.keys(actionsByKey).reduce((output, key) => {\n    return apply(output, key, actionsByKey[key]);\n  }, toPojo(obj));\n};\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/kibana/src/server/logging/log_format_string.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "ansicolors",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "ansicolors"
              }
            ]
          },
          {
            "source": "moment",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "moment"
              }
            ]
          },
          {
            "source": "./log_format",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "LogFormat"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "get",
        "inherits",
        "create-class",
        "class-call-check",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _ansicolors = require('ansicolors');\n\nvar _ansicolors2 = _interopRequireDefault(_ansicolors);\n\nvar _moment = require('moment');\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _log_format = require('./log_format');\n\nvar _log_format2 = _interopRequireDefault(_log_format);\n\nvar statuses = ['err', 'info', 'error', 'warning', 'fatal', 'status', 'debug'];\n\nvar typeColors = {\n  log: 'blue',\n  req: 'green',\n  res: 'green',\n  ops: 'cyan',\n  config: 'cyan',\n  err: 'red',\n  info: 'green',\n  error: 'red',\n  warning: 'red',\n  fatal: 'magenta',\n  status: 'yellow',\n  debug: 'brightBlack',\n  server: 'brightBlack',\n  optmzr: 'white',\n  managr: 'green',\n  optimize: 'magenta',\n  listening: 'magenta'\n};\n\nvar color = _lodash2['default'].memoize(function (name) {\n  return _ansicolors2['default'][typeColors[name]] || _lodash2['default'].identity;\n});\n\nvar type = _lodash2['default'].memoize(function (t) {\n  return color(t)(_lodash2['default'].pad(t, 7).slice(0, 7));\n});\n\nvar workerType = process.env.kbnWorkerType ? type(process.env.kbnWorkerType) + ' ' : '';\n\nmodule.exports = (function (_LogFormat) {\n  _inherits(KbnLoggerJsonFormat, _LogFormat);\n\n  function KbnLoggerJsonFormat() {\n    _classCallCheck(this, KbnLoggerJsonFormat);\n\n    _get(Object.getPrototypeOf(KbnLoggerJsonFormat.prototype), 'constructor', this).apply(this, arguments);\n  }\n\n  _createClass(KbnLoggerJsonFormat, [{\n    key: 'format',\n    value: function format(data) {\n      var time = color('time')((0, _moment2['default'])(data.timestamp).format('HH:mm:ss.SSS'));\n      var msg = data.error ? color('error')(data.error.stack) : color('message')(data.message);\n\n      var tags = (0, _lodash2['default'])(data.tags).sortBy(function (tag) {\n        if (color(tag) === _lodash2['default'].identity) return '2' + tag;\n        if (_lodash2['default'].includes(statuses, tag)) return '0' + tag;\n        return '1' + tag;\n      }).reduce(function (s, t) {\n        return s + ('[' + color(t)(t) + ']');\n      }, '');\n\n      return '' + workerType + type(data.type) + ' [' + time + '] ' + tags + ' ' + msg;\n    }\n  }]);\n\n  return KbnLoggerJsonFormat;\n})(_log_format2['default']);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3NlcnZlci9sb2dnaW5nL2xvZ19mb3JtYXRfc3RyaW5nLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztzQkFBYyxRQUFROzs7OzBCQUNDLFlBQVk7Ozs7c0JBQ2hCLFFBQVE7Ozs7MEJBRUwsY0FBYzs7OztBQUVwQyxJQUFJLFFBQVEsR0FBRyxDQUNiLEtBQUssRUFDTCxNQUFNLEVBQ04sT0FBTyxFQUNQLFNBQVMsRUFDVCxPQUFPLEVBQ1AsUUFBUSxFQUNSLE9BQU8sQ0FDUixDQUFDOztBQUVGLElBQUksVUFBVSxHQUFHO0FBQ2YsS0FBRyxFQUFFLE1BQU07QUFDWCxLQUFHLEVBQUUsT0FBTztBQUNaLEtBQUcsRUFBRSxPQUFPO0FBQ1osS0FBRyxFQUFFLE1BQU07QUFDWCxRQUFNLEVBQUUsTUFBTTtBQUNkLEtBQUcsRUFBRSxLQUFLO0FBQ1YsTUFBSSxFQUFFLE9BQU87QUFDYixPQUFLLEVBQUUsS0FBSztBQUNaLFNBQU8sRUFBRSxLQUFLO0FBQ2QsT0FBSyxFQUFFLFNBQVM7QUFDaEIsUUFBTSxFQUFFLFFBQVE7QUFDaEIsT0FBSyxFQUFFLGFBQWE7QUFDcEIsUUFBTSxFQUFFLGFBQWE7QUFDckIsUUFBTSxFQUFFLE9BQU87QUFDZixRQUFNLEVBQUUsT0FBTztBQUNmLFVBQVEsRUFBRSxTQUFTO0FBQ25CLFdBQVMsRUFBRSxTQUFTO0NBQ3JCLENBQUM7O0FBRUYsSUFBSSxLQUFLLEdBQUcsb0JBQUUsT0FBTyxDQUFDLFVBQVUsSUFBSSxFQUFFO0FBQ3BDLFNBQU8sd0JBQVcsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksb0JBQUUsUUFBUSxDQUFDO0NBQ25ELENBQUMsQ0FBQzs7QUFFSCxJQUFJLElBQUksR0FBRyxvQkFBRSxPQUFPLENBQUMsVUFBVSxDQUFDLEVBQUU7QUFDaEMsU0FBTyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsb0JBQUUsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7Q0FDMUMsQ0FBQyxDQUFDOztBQUVILElBQUksVUFBVSxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsYUFBYSxHQUFNLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxTQUFNLEVBQUUsQ0FBQzs7QUFFeEYsTUFBTSxDQUFDLE9BQU87WUFBUyxtQkFBbUI7O1dBQW5CLG1CQUFtQjswQkFBbkIsbUJBQW1COzsrQkFBbkIsbUJBQW1COzs7ZUFBbkIsbUJBQW1COztXQUNsQyxnQkFBQyxJQUFJLEVBQUU7QUFDWCxVQUFJLElBQUksR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMseUJBQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDO0FBQ3hFLFVBQUksR0FBRyxHQUFHLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQzs7QUFFekYsVUFBSSxJQUFJLEdBQUcseUJBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUN0QixNQUFNLENBQUMsVUFBVSxHQUFHLEVBQUU7QUFDckIsWUFBSSxLQUFLLENBQUMsR0FBRyxDQUFDLEtBQUssb0JBQUUsUUFBUSxFQUFFLGFBQVcsR0FBRyxDQUFHO0FBQ2hELFlBQUksb0JBQUUsUUFBUSxDQUFDLFFBQVEsRUFBRSxHQUFHLENBQUMsRUFBRSxhQUFXLEdBQUcsQ0FBRztBQUNoRCxxQkFBVyxHQUFHLENBQUc7T0FDbEIsQ0FBQyxDQUNELE1BQU0sQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFDdEIsZUFBTyxDQUFDLFVBQVEsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFJLENBQUM7T0FDakMsRUFBRSxFQUFFLENBQUMsQ0FBQzs7QUFFUCxrQkFBVSxVQUFVLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBSyxJQUFJLFVBQUssSUFBSSxTQUFJLEdBQUcsQ0FBRztLQUNuRTs7O1NBaEJvQixtQkFBbUI7MkJBaUJ6QyxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby9raWJhbmEvc3JjL3NlcnZlci9sb2dnaW5nL2xvZ19mb3JtYXRfc3RyaW5nLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBhbnNpY29sb3JzIGZyb20gJ2Fuc2ljb2xvcnMnO1xuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xuXG5pbXBvcnQgTG9nRm9ybWF0IGZyb20gJy4vbG9nX2Zvcm1hdCc7XG5cbmxldCBzdGF0dXNlcyA9IFtcbiAgJ2VycicsXG4gICdpbmZvJyxcbiAgJ2Vycm9yJyxcbiAgJ3dhcm5pbmcnLFxuICAnZmF0YWwnLFxuICAnc3RhdHVzJyxcbiAgJ2RlYnVnJ1xuXTtcblxubGV0IHR5cGVDb2xvcnMgPSB7XG4gIGxvZzogJ2JsdWUnLFxuICByZXE6ICdncmVlbicsXG4gIHJlczogJ2dyZWVuJyxcbiAgb3BzOiAnY3lhbicsXG4gIGNvbmZpZzogJ2N5YW4nLFxuICBlcnI6ICdyZWQnLFxuICBpbmZvOiAnZ3JlZW4nLFxuICBlcnJvcjogJ3JlZCcsXG4gIHdhcm5pbmc6ICdyZWQnLFxuICBmYXRhbDogJ21hZ2VudGEnLFxuICBzdGF0dXM6ICd5ZWxsb3cnLFxuICBkZWJ1ZzogJ2JyaWdodEJsYWNrJyxcbiAgc2VydmVyOiAnYnJpZ2h0QmxhY2snLFxuICBvcHRtenI6ICd3aGl0ZScsXG4gIG1hbmFncjogJ2dyZWVuJyxcbiAgb3B0aW1pemU6ICdtYWdlbnRhJyxcbiAgbGlzdGVuaW5nOiAnbWFnZW50YSdcbn07XG5cbmxldCBjb2xvciA9IF8ubWVtb2l6ZShmdW5jdGlvbiAobmFtZSkge1xuICByZXR1cm4gYW5zaWNvbG9yc1t0eXBlQ29sb3JzW25hbWVdXSB8fCBfLmlkZW50aXR5O1xufSk7XG5cbmxldCB0eXBlID0gXy5tZW1vaXplKGZ1bmN0aW9uICh0KSB7XG4gIHJldHVybiBjb2xvcih0KShfLnBhZCh0LCA3KS5zbGljZSgwLCA3KSk7XG59KTtcblxubGV0IHdvcmtlclR5cGUgPSBwcm9jZXNzLmVudi5rYm5Xb3JrZXJUeXBlID8gYCR7dHlwZShwcm9jZXNzLmVudi5rYm5Xb3JrZXJUeXBlKX0gYCA6ICcnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIEtibkxvZ2dlckpzb25Gb3JtYXQgZXh0ZW5kcyBMb2dGb3JtYXQge1xuICBmb3JtYXQoZGF0YSkge1xuICAgIGxldCB0aW1lID0gY29sb3IoJ3RpbWUnKShtb21lbnQoZGF0YS50aW1lc3RhbXApLmZvcm1hdCgnSEg6bW06c3MuU1NTJykpO1xuICAgIGxldCBtc2cgPSBkYXRhLmVycm9yID8gY29sb3IoJ2Vycm9yJykoZGF0YS5lcnJvci5zdGFjaykgOiBjb2xvcignbWVzc2FnZScpKGRhdGEubWVzc2FnZSk7XG5cbiAgICBsZXQgdGFncyA9IF8oZGF0YS50YWdzKVxuICAgIC5zb3J0QnkoZnVuY3Rpb24gKHRhZykge1xuICAgICAgaWYgKGNvbG9yKHRhZykgPT09IF8uaWRlbnRpdHkpIHJldHVybiBgMiR7dGFnfWA7XG4gICAgICBpZiAoXy5pbmNsdWRlcyhzdGF0dXNlcywgdGFnKSkgcmV0dXJuIGAwJHt0YWd9YDtcbiAgICAgIHJldHVybiBgMSR7dGFnfWA7XG4gICAgfSlcbiAgICAucmVkdWNlKGZ1bmN0aW9uIChzLCB0KSB7XG4gICAgICByZXR1cm4gcyArIGBbJHsgY29sb3IodCkodCkgfV1gO1xuICAgIH0sICcnKTtcblxuICAgIHJldHVybiBgJHt3b3JrZXJUeXBlfSR7dHlwZShkYXRhLnR5cGUpfSBbJHt0aW1lfV0gJHt0YWdzfSAke21zZ31gO1xuICB9XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/server/logging/log_format_string.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;;;sBAAc,QAAQ;;;;0BACC,YAAY;;;;sBAChB,QAAQ;;;;0BAEL,cAAc;;;;AAEpC,IAAI,QAAQ,GAAG,CACb,KAAK,EACL,MAAM,EACN,OAAO,EACP,SAAS,EACT,OAAO,EACP,QAAQ,EACR,OAAO,CACR,CAAC;;AAEF,IAAI,UAAU,GAAG;AACf,KAAG,EAAE,MAAM;AACX,KAAG,EAAE,OAAO;AACZ,KAAG,EAAE,OAAO;AACZ,KAAG,EAAE,MAAM;AACX,QAAM,EAAE,MAAM;AACd,KAAG,EAAE,KAAK;AACV,MAAI,EAAE,OAAO;AACb,OAAK,EAAE,KAAK;AACZ,SAAO,EAAE,KAAK;AACd,OAAK,EAAE,SAAS;AAChB,QAAM,EAAE,QAAQ;AAChB,OAAK,EAAE,aAAa;AACpB,QAAM,EAAE,aAAa;AACrB,QAAM,EAAE,OAAO;AACf,QAAM,EAAE,OAAO;AACf,UAAQ,EAAE,SAAS;AACnB,WAAS,EAAE,SAAS;CACrB,CAAC;;AAEF,IAAI,KAAK,GAAG,oBAAE,OAAO,CAAC,UAAU,IAAI,EAAE;AACpC,SAAO,wBAAW,UAAU,CAAC,IAAI,CAAC,CAAC,IAAI,oBAAE,QAAQ,CAAC;CACnD,CAAC,CAAC;;AAEH,IAAI,IAAI,GAAG,oBAAE,OAAO,CAAC,UAAU,CAAC,EAAE;AAChC,SAAO,KAAK,CAAC,CAAC,CAAC,CAAC,oBAAE,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;CAC1C,CAAC,CAAC;;AAEH,IAAI,UAAU,GAAG,OAAO,CAAC,GAAG,CAAC,aAAa,GAAM,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC,SAAM,EAAE,CAAC;;AAExF,MAAM,CAAC,OAAO;YAAS,mBAAmB;;WAAnB,mBAAmB;0BAAnB,mBAAmB;;+BAAnB,mBAAmB;;;eAAnB,mBAAmB;;WAClC,gBAAC,IAAI,EAAE;AACX,UAAI,IAAI,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC,yBAAO,IAAI,CAAC,SAAS,CAAC,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC,CAAC;AACxE,UAAI,GAAG,GAAG,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;;AAEzF,UAAI,IAAI,GAAG,yBAAE,IAAI,CAAC,IAAI,CAAC,CACtB,MAAM,CAAC,UAAU,GAAG,EAAE;AACrB,YAAI,KAAK,CAAC,GAAG,CAAC,KAAK,oBAAE,QAAQ,EAAE,aAAW,GAAG,CAAG;AAChD,YAAI,oBAAE,QAAQ,CAAC,QAAQ,EAAE,GAAG,CAAC,EAAE,aAAW,GAAG,CAAG;AAChD,qBAAW,GAAG,CAAG;OAClB,CAAC,CACD,MAAM,CAAC,UAAU,CAAC,EAAE,CAAC,EAAE;AACtB,eAAO,CAAC,UAAQ,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAI,CAAC;OACjC,EAAE,EAAE,CAAC,CAAC;;AAEP,kBAAU,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,UAAK,IAAI,UAAK,IAAI,SAAI,GAAG,CAAG;KACnE;;;SAhBoB,mBAAmB;2BAiBzC,CAAC",
      "file": "/home/vio/kibana/src/server/logging/log_format_string.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport ansicolors from 'ansicolors';\nimport moment from 'moment';\n\nimport LogFormat from './log_format';\n\nlet statuses = [\n  'err',\n  'info',\n  'error',\n  'warning',\n  'fatal',\n  'status',\n  'debug'\n];\n\nlet typeColors = {\n  log: 'blue',\n  req: 'green',\n  res: 'green',\n  ops: 'cyan',\n  config: 'cyan',\n  err: 'red',\n  info: 'green',\n  error: 'red',\n  warning: 'red',\n  fatal: 'magenta',\n  status: 'yellow',\n  debug: 'brightBlack',\n  server: 'brightBlack',\n  optmzr: 'white',\n  managr: 'green',\n  optimize: 'magenta',\n  listening: 'magenta'\n};\n\nlet color = _.memoize(function (name) {\n  return ansicolors[typeColors[name]] || _.identity;\n});\n\nlet type = _.memoize(function (t) {\n  return color(t)(_.pad(t, 7).slice(0, 7));\n});\n\nlet workerType = process.env.kbnWorkerType ? `${type(process.env.kbnWorkerType)} ` : '';\n\nmodule.exports = class KbnLoggerJsonFormat extends LogFormat {\n  format(data) {\n    let time = color('time')(moment(data.timestamp).format('HH:mm:ss.SSS'));\n    let msg = data.error ? color('error')(data.error.stack) : color('message')(data.message);\n\n    let tags = _(data.tags)\n    .sortBy(function (tag) {\n      if (color(tag) === _.identity) return `2${tag}`;\n      if (_.includes(statuses, tag)) return `0${tag}`;\n      return `1${tag}`;\n    })\n    .reduce(function (s, t) {\n      return s + `[${ color(t)(t) }]`;\n    }, '');\n\n    return `${workerType}${type(data.type)} [${time}] ${tags} ${msg}`;\n  }\n};\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/kibana/src/server/config/setup.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./config",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Config"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _config = require('./config');\n\nvar _config2 = _interopRequireDefault(_config);\n\nmodule.exports = function (kbnServer) {\n  kbnServer.config = _config2['default'].withDefaultSchema(kbnServer.settings);\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3NlcnZlci9jb25maWcvc2V0dXAuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztzQkFBbUIsVUFBVTs7OztBQUM3QixNQUFNLENBQUMsT0FBTyxHQUFHLFVBQVUsU0FBUyxFQUFFO0FBQ3BDLFdBQVMsQ0FBQyxNQUFNLEdBQUcsb0JBQU8saUJBQWlCLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0NBQ2pFLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL2tpYmFuYS9zcmMvc2VydmVyL2NvbmZpZy9zZXR1cC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDb25maWcgZnJvbSAnLi9jb25maWcnO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoa2JuU2VydmVyKSB7XG4gIGtiblNlcnZlci5jb25maWcgPSBDb25maWcud2l0aERlZmF1bHRTY2hlbWEoa2JuU2VydmVyLnNldHRpbmdzKTtcbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/server/config/setup.js"
      ],
      "names": [],
      "mappings": ";;;;sBAAmB,UAAU;;;;AAC7B,MAAM,CAAC,OAAO,GAAG,UAAU,SAAS,EAAE;AACpC,WAAS,CAAC,MAAM,GAAG,oBAAO,iBAAiB,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;CACjE,CAAC",
      "file": "/home/vio/kibana/src/server/config/setup.js",
      "sourcesContent": [
        "import Config from './config';\nmodule.exports = function (kbnServer) {\n  kbnServer.config = Config.withDefaultSchema(kbnServer.settings);\n};\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/kibana/src/server/http/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "url",
            "imported": [
              "parse"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "parse",
                "local": "parse"
              }
            ]
          },
          {
            "source": "url",
            "imported": [
              "format"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "format",
                "local": "format"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "fs",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "fs"
              }
            ]
          },
          {
            "source": "boom",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Boom"
              }
            ]
          },
          {
            "source": "hapi",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Hapi"
              }
            ]
          },
          {
            "source": "./get_default_route",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "getDefaultRoute"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "async-to-generator",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nvar _url = require('url');\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _fs = require('fs');\n\nvar _fs2 = _interopRequireDefault(_fs);\n\nvar _boom = require('boom');\n\nvar _boom2 = _interopRequireDefault(_boom);\n\nvar _hapi = require('hapi');\n\nvar _hapi2 = _interopRequireDefault(_hapi);\n\nvar _get_default_route = require('./get_default_route');\n\nvar _get_default_route2 = _interopRequireDefault(_get_default_route);\n\nmodule.exports = _asyncToGenerator(function* (kbnServer, server, config) {\n\n  server = kbnServer.server = new _hapi2['default'].Server();\n\n  var shortUrlLookup = require('./short_url_lookup')(server);\n  yield kbnServer.mixin(require('./setup_connection'));\n\n  // provide a simple way to expose static directories\n  server.decorate('server', 'exposeStaticDir', function (routePath, dirPath) {\n    this.route({\n      path: routePath,\n      method: 'GET',\n      handler: {\n        directory: {\n          path: dirPath,\n          listing: false,\n          lookupCompressed: true\n        }\n      },\n      config: { auth: false }\n    });\n  });\n\n  // provide a simple way to expose static files\n  server.decorate('server', 'exposeStaticFile', function (routePath, filePath) {\n    this.route({\n      path: routePath,\n      method: 'GET',\n      handler: {\n        file: filePath\n      },\n      config: { auth: false }\n    });\n  });\n\n  // helper for creating view managers for servers\n  server.decorate('server', 'setupViews', function (path, engines) {\n    this.views({\n      path: path,\n      isCached: config.get('optimize.viewCaching'),\n      engines: _lodash2['default'].assign({ jade: require('jade') }, engines || {})\n    });\n  });\n\n  server.decorate('server', 'redirectToSlash', function (route) {\n    this.route({\n      path: route,\n      method: 'GET',\n      handler: function handler(req, reply) {\n        return reply.redirect((0, _url.format)({\n          search: req.url.search,\n          pathname: req.url.pathname + '/'\n        }));\n      }\n    });\n  });\n\n  // attach the app name to the server, so we can be sure we are actually talking to kibana\n  server.ext('onPreResponse', function (req, reply) {\n    var response = req.response;\n\n    if (response.isBoom) {\n      response.output.headers['kbn-name'] = kbnServer.name;\n      response.output.headers['kbn-version'] = kbnServer.version;\n    } else {\n      response.header('kbn-name', kbnServer.name);\n      response.header('kbn-version', kbnServer.version);\n    }\n\n    return reply['continue']();\n  });\n\n  server.route({\n    path: '/',\n    method: 'GET',\n    handler: function handler(req, reply) {\n      return reply.view('root_redirect', {\n        hashRoute: config.get('server.basePath') + '/app/kibana',\n        defaultRoute: (0, _get_default_route2['default'])(kbnServer)\n      });\n    }\n  });\n\n  server.route({\n    method: 'GET',\n    path: '/{p*}',\n    handler: function handler(req, reply) {\n      var path = req.path;\n      if (path === '/' || path.charAt(path.length - 1) !== '/') {\n        return reply(_boom2['default'].notFound());\n      }\n\n      return reply.redirect((0, _url.format)({\n        search: req.url.search,\n        pathname: path.slice(0, -1)\n      })).permanent(true);\n    }\n  });\n\n  server.route({\n    method: 'GET',\n    path: '/goto/{urlId}',\n    handler: _asyncToGenerator(function* (request, reply) {\n      try {\n        var url = yield shortUrlLookup.getUrl(request.params.urlId);\n        reply().redirect(config.get('server.basePath') + url);\n      } catch (err) {\n        reply(err);\n      }\n    })\n  });\n\n  server.route({\n    method: 'POST',\n    path: '/shorten',\n    handler: _asyncToGenerator(function* (request, reply) {\n      try {\n        var urlId = yield shortUrlLookup.generateUrlId(request.payload.url);\n        reply(urlId);\n      } catch (err) {\n        reply(err);\n      }\n    })\n  });\n\n  return kbnServer.mixin(require('./xsrf'));\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3NlcnZlci9odHRwL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OzttQkFBc0IsS0FBSzs7c0JBRWIsUUFBUTs7OztrQkFDUCxJQUFJOzs7O29CQUNGLE1BQU07Ozs7b0JBQ04sTUFBTTs7OztpQ0FDSyxxQkFBcUI7Ozs7QUFDakQsTUFBTSxDQUFDLE9BQU8scUJBQUcsV0FBZ0IsU0FBUyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUU7O0FBRzFELFFBQU0sR0FBRyxTQUFTLENBQUMsTUFBTSxHQUFHLElBQUksa0JBQUssTUFBTSxFQUFFLENBQUM7O0FBRTlDLE1BQU0sY0FBYyxHQUFHLE9BQU8sQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQzdELFFBQU0sU0FBUyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxDQUFDOzs7QUFHckQsUUFBTSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEVBQUUsaUJBQWlCLEVBQUUsVUFBVSxTQUFTLEVBQUUsT0FBTyxFQUFFO0FBQ3pFLFFBQUksQ0FBQyxLQUFLLENBQUM7QUFDVCxVQUFJLEVBQUUsU0FBUztBQUNmLFlBQU0sRUFBRSxLQUFLO0FBQ2IsYUFBTyxFQUFFO0FBQ1AsaUJBQVMsRUFBRTtBQUNULGNBQUksRUFBRSxPQUFPO0FBQ2IsaUJBQU8sRUFBRSxLQUFLO0FBQ2QsMEJBQWdCLEVBQUUsSUFBSTtTQUN2QjtPQUNGO0FBQ0QsWUFBTSxFQUFFLEVBQUMsSUFBSSxFQUFFLEtBQUssRUFBQztLQUN0QixDQUFDLENBQUM7R0FDSixDQUFDLENBQUM7OztBQUdILFFBQU0sQ0FBQyxRQUFRLENBQUMsUUFBUSxFQUFFLGtCQUFrQixFQUFFLFVBQVUsU0FBUyxFQUFFLFFBQVEsRUFBRTtBQUMzRSxRQUFJLENBQUMsS0FBSyxDQUFDO0FBQ1QsVUFBSSxFQUFFLFNBQVM7QUFDZixZQUFNLEVBQUUsS0FBSztBQUNiLGFB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QUFLLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7Q0FDM0MsQ0FBQSxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby9raWJhbmEvc3JjL3NlcnZlci9odHRwL2luZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcGFyc2UgfSBmcm9tICd1cmwnO1xuaW1wb3J0IHsgZm9ybWF0IH0gZnJvbSAndXJsJztcbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgZnMgZnJvbSAnZnMnO1xuaW1wb3J0IEJvb20gZnJvbSAnYm9vbSc7XG5pbXBvcnQgSGFwaSBmcm9tICdoYXBpJztcbmltcG9ydCBnZXREZWZhdWx0Um91dGUgZnJvbSAnLi9nZXRfZGVmYXVsdF9yb3V0ZSc7XG5tb2R1bGUuZXhwb3J0cyA9IGFzeW5jIGZ1bmN0aW9uIChrYm5TZXJ2ZXIsIHNlcnZlciwgY29uZmlnKSB7XG5cblxuICBzZXJ2ZXIgPSBrYm5TZXJ2ZXIuc2VydmVyID0gbmV3IEhhcGkuU2VydmVyKCk7XG5cbiAgY29uc3Qgc2hvcnRVcmxMb29rdXAgPSByZXF1aXJlKCcuL3Nob3J0X3VybF9sb29rdXAnKShzZXJ2ZXIpO1xuICBhd2FpdCBrYm5TZXJ2ZXIubWl4aW4ocmVxdWlyZSgnLi9zZXR1cF9jb25uZWN0aW9uJykpO1xuXG4gIC8vIHByb3ZpZGUgYSBzaW1wbGUgd2F5IHRvIGV4cG9zZSBzdGF0aWMgZGlyZWN0b3JpZXNcbiAgc2VydmVyLmRlY29yYXRlKCdzZXJ2ZXInLCAnZXhwb3NlU3RhdGljRGlyJywgZnVuY3Rpb24gKHJvdXRlUGF0aCwgZGlyUGF0aCkge1xuICAgIHRoaXMucm91dGUoe1xuICAgICAgcGF0aDogcm91dGVQYXRoLFxuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIGhhbmRsZXI6IHtcbiAgICAgICAgZGlyZWN0b3J5OiB7XG4gICAgICAgICAgcGF0aDogZGlyUGF0aCxcbiAgICAgICAgICBsaXN0aW5nOiBmYWxzZSxcbiAgICAgICAgICBsb29rdXBDb21wcmVzc2VkOiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBjb25maWc6IHthdXRoOiBmYWxzZX1cbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8gcHJvdmlkZSBhIHNpbXBsZSB3YXkgdG8gZXhwb3NlIHN0YXRpYyBmaWxlc1xuICBzZXJ2ZXIuZGVjb3JhdGUoJ3NlcnZlcicsICdleHBvc2VTdGF0aWNGaWxlJywgZnVuY3Rpb24gKHJvdXRlUGF0aCwgZmlsZVBhdGgpIHtcbiAgICB0aGlzLnJvdXRlKHtcbiAgICAgIHBhdGg6IHJvdXRlUGF0aCxcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICBoYW5kbGVyOiB7XG4gICAgICAgIGZpbGU6IGZpbGVQYXRoXG4gICAgICB9LFxuICAgICAgY29uZmlnOiB7YXV0aDogZmFsc2V9XG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vIGhlbHBlciBmb3IgY3JlYXRpbmcgdmlldyBtYW5hZ2VycyBmb3Igc2VydmVyc1xuICBzZXJ2ZXIuZGVjb3JhdGUoJ3NlcnZlcicsICdzZXR1cFZpZXdzJywgZnVuY3Rpb24gKHBhdGgsIGVuZ2luZXMpIHtcbiAgICB0aGlzLnZpZXdzKHtcbiAgICAgIHBhdGg6IHBhdGgsXG4gICAgICBpc0NhY2hlZDogY29uZmlnLmdldCgnb3B0aW1pemUudmlld0NhY2hpbmcnKSxcbiAgICAgIGVuZ2luZXM6IF8uYXNzaWduKHsgamFkZTogcmVxdWlyZSgnamFkZScpIH0sIGVuZ2luZXMgfHwge30pXG4gICAgfSk7XG4gIH0pO1xuXG4gIHNlcnZlci5kZWNvcmF0ZSgnc2VydmVyJywgJ3JlZGlyZWN0VG9TbGFzaCcsIGZ1bmN0aW9uIChyb3V0ZSkge1xuICAgIHRoaXMucm91dGUoe1xuICAgICAgcGF0aDogcm91dGUsXG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgaGFuZGxlcjogZnVuY3Rpb24gKHJlcSwgcmVwbHkpIHtcbiAgICAgICAgcmV0dXJuIHJlcGx5LnJlZGlyZWN0KGZvcm1hdCh7XG4gICAgICAgICAgc2VhcmNoOiByZXEudXJsLnNlYXJjaCxcbiAgICAgICAgICBwYXRobmFtZTogcmVxLnVybC5wYXRobmFtZSArICcvJyxcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICAvLyBhdHRhY2ggdGhlIGFwcCBuYW1lIHRvIHRoZSBzZXJ2ZXIsIHNvIHdlIGNhbiBiZSBzdXJlIHdlIGFyZSBhY3R1YWxseSB0YWxraW5nIHRvIGtpYmFuYVxuICBzZXJ2ZXIuZXh0KCdvblByZVJlc3BvbnNlJywgZnVuY3Rpb24gKHJlcSwgcmVwbHkpIHtcbiAgICBsZXQgcmVzcG9uc2UgPSByZXEucmVzcG9uc2U7XG5cbiAgICBpZiAocmVzcG9uc2UuaXNCb29tKSB7XG4gICAgICByZXNwb25zZS5vdXRwdXQuaGVhZGVyc1sna2JuLW5hbWUnXSA9IGtiblNlcnZlci5uYW1lO1xuICAgICAgcmVzcG9uc2Uub3V0cHV0LmhlYWRlcnNbJ2tibi12ZXJzaW9uJ10gPSBrYm5TZXJ2ZXIudmVyc2lvbjtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzcG9uc2UuaGVhZGVyKCdrYm4tbmFtZScsIGtiblNlcnZlci5uYW1lKTtcbiAgICAgIHJlc3BvbnNlLmhlYWRlcigna2JuLXZlcnNpb24nLCBrYm5TZXJ2ZXIudmVyc2lvbik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlcGx5LmNvbnRpbnVlKCk7XG4gIH0pO1xuXG4gIHNlcnZlci5yb3V0ZSh7XG4gICAgcGF0aDogJy8nLFxuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgaGFuZGxlcjogZnVuY3Rpb24gKHJlcSwgcmVwbHkpIHtcbiAgICAgIHJldHVybiByZXBseS52aWV3KCdyb290X3JlZGlyZWN0Jywge1xuICAgICAgICBoYXNoUm91dGU6IGAke2NvbmZpZy5nZXQoJ3NlcnZlci5iYXNlUGF0aCcpfS9hcHAva2liYW5hYCxcbiAgICAgICAgZGVmYXVsdFJvdXRlOiBnZXREZWZhdWx0Um91dGUoa2JuU2VydmVyKSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG5cbiAgc2VydmVyLnJvdXRlKHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIHBhdGg6ICcve3AqfScsXG4gICAgaGFuZGxlcjogZnVuY3Rpb24gKHJlcSwgcmVwbHkpIHtcbiAgICAgIGxldCBwYXRoID0gcmVxLnBhdGg7XG4gICAgICBpZiAocGF0aCA9PT0gJy8nIHx8IHBhdGguY2hhckF0KHBhdGgubGVuZ3RoIC0gMSkgIT09ICcvJykge1xuICAgICAgICByZXR1cm4gcmVwbHkoQm9vbS5ub3RGb3VuZCgpKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlcGx5LnJlZGlyZWN0KGZvcm1hdCh7XG4gICAgICAgIHNlYXJjaDogcmVxLnVybC5zZWFyY2gsXG4gICAgICAgIHBhdGhuYW1lOiBwYXRoLnNsaWNlKDAsIC0xKSxcbiAgICAgIH0pKVxuICAgICAgLnBlcm1hbmVudCh0cnVlKTtcbiAgICB9XG4gIH0pO1xuXG4gIHNlcnZlci5yb3V0ZSh7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICBwYXRoOiAnL2dvdG8ve3VybElkfScsXG4gICAgaGFuZGxlcjogYXN5bmMgZnVuY3Rpb24gKHJlcXVlc3QsIHJlcGx5KSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB1cmwgPSBhd2FpdCBzaG9ydFVybExvb2t1cC5nZXRVcmwocmVxdWVzdC5wYXJhbXMudXJsSWQpO1xuICAgICAgICByZXBseSgpLnJlZGlyZWN0KGNvbmZpZy5nZXQoJ3NlcnZlci5iYXNlUGF0aCcpICsgdXJsKTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICByZXBseShlcnIpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgc2VydmVyLnJvdXRlKHtcbiAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICBwYXRoOiAnL3Nob3J0ZW4nLFxuICAgIGhhbmRsZXI6IGFzeW5jIGZ1bmN0aW9uIChyZXF1ZXN0LCByZXBseSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXJsSWQgPSBhd2FpdCBzaG9ydFVybExvb2t1cC5nZW5lcmF0ZVVybElkKHJlcXVlc3QucGF5bG9hZC51cmwpO1xuICAgICAgICByZXBseSh1cmxJZCk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmVwbHkoZXJyKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBrYm5TZXJ2ZXIubWl4aW4ocmVxdWlyZSgnLi94c3JmJykpO1xufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/server/http/index.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/kibana/src/server/http/index.js",
      "sourcesContent": [
        "import { parse } from 'url';\nimport { format } from 'url';\nimport _ from 'lodash';\nimport fs from 'fs';\nimport Boom from 'boom';\nimport Hapi from 'hapi';\nimport getDefaultRoute from './get_default_route';\nmodule.exports = async function (kbnServer, server, config) {\n\n\n  server = kbnServer.server = new Hapi.Server();\n\n  const shortUrlLookup = require('./short_url_lookup')(server);\n  await kbnServer.mixin(require('./setup_connection'));\n\n  // provide a simple way to expose static directories\n  server.decorate('server', 'exposeStaticDir', function (routePath, dirPath) {\n    this.route({\n      path: routePath,\n      method: 'GET',\n      handler: {\n        directory: {\n          path: dirPath,\n          listing: false,\n          lookupCompressed: true\n        }\n      },\n      config: {auth: false}\n    });\n  });\n\n  // provide a simple way to expose static files\n  server.decorate('server', 'exposeStaticFile', function (routePath, filePath) {\n    this.route({\n      path: routePath,\n      method: 'GET',\n      handler: {\n        file: filePath\n      },\n      config: {auth: false}\n    });\n  });\n\n  // helper for creating view managers for servers\n  server.decorate('server', 'setupViews', function (path, engines) {\n    this.views({\n      path: path,\n      isCached: config.get('optimize.viewCaching'),\n      engines: _.assign({ jade: require('jade') }, engines || {})\n    });\n  });\n\n  server.decorate('server', 'redirectToSlash', function (route) {\n    this.route({\n      path: route,\n      method: 'GET',\n      handler: function (req, reply) {\n        return reply.redirect(format({\n          search: req.url.search,\n          pathname: req.url.pathname + '/',\n        }));\n      }\n    });\n  });\n\n  // attach the app name to the server, so we can be sure we are actually talking to kibana\n  server.ext('onPreResponse', function (req, reply) {\n    let response = req.response;\n\n    if (response.isBoom) {\n      response.output.headers['kbn-name'] = kbnServer.name;\n      response.output.headers['kbn-version'] = kbnServer.version;\n    } else {\n      response.header('kbn-name', kbnServer.name);\n      response.header('kbn-version', kbnServer.version);\n    }\n\n    return reply.continue();\n  });\n\n  server.route({\n    path: '/',\n    method: 'GET',\n    handler: function (req, reply) {\n      return reply.view('root_redirect', {\n        hashRoute: `${config.get('server.basePath')}/app/kibana`,\n        defaultRoute: getDefaultRoute(kbnServer),\n      });\n    }\n  });\n\n  server.route({\n    method: 'GET',\n    path: '/{p*}',\n    handler: function (req, reply) {\n      let path = req.path;\n      if (path === '/' || path.charAt(path.length - 1) !== '/') {\n        return reply(Boom.notFound());\n      }\n\n      return reply.redirect(format({\n        search: req.url.search,\n        pathname: path.slice(0, -1),\n      }))\n      .permanent(true);\n    }\n  });\n\n  server.route({\n    method: 'GET',\n    path: '/goto/{urlId}',\n    handler: async function (request, reply) {\n      try {\n        const url = await shortUrlLookup.getUrl(request.params.urlId);\n        reply().redirect(config.get('server.basePath') + url);\n      } catch (err) {\n        reply(err);\n      }\n    }\n  });\n\n  server.route({\n    method: 'POST',\n    path: '/shorten',\n    handler: async function (request, reply) {\n      try {\n        const urlId = await shortUrlLookup.generateUrlId(request.payload.url);\n        reply(urlId);\n      } catch (err) {\n        reply(err);\n      }\n    }\n  });\n\n  return kbnServer.mixin(require('./xsrf'));\n};\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/kibana/src/server/http/get_default_route.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nmodule.exports = _lodash2['default'].once(function (kbnServer) {\n  var uiExports = kbnServer.uiExports;\n  var config = kbnServer.config;\n\n  return '' + config.get('server.basePath') + config.get('server.defaultRoute');\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3NlcnZlci9odHRwL2dldF9kZWZhdWx0X3JvdXRlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7c0JBQWMsUUFBUTs7OztBQUV0QixNQUFNLENBQUMsT0FBTyxHQUFHLG9CQUFFLElBQUksQ0FBQyxVQUFVLFNBQVMsRUFBRTtNQUNuQyxTQUFTLEdBQWEsU0FBUyxDQUEvQixTQUFTO01BQUUsTUFBTSxHQUFLLFNBQVMsQ0FBcEIsTUFBTTs7QUFDekIsY0FBVSxNQUFNLENBQUMsR0FBRyxDQUFDLGlCQUFpQixDQUFDLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFHO0NBQy9FLENBQUMsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8va2liYW5hL3NyYy9zZXJ2ZXIvaHR0cC9nZXRfZGVmYXVsdF9yb3V0ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5cbm1vZHVsZS5leHBvcnRzID0gXy5vbmNlKGZ1bmN0aW9uIChrYm5TZXJ2ZXIpIHtcbiAgY29uc3QgeyB1aUV4cG9ydHMsIGNvbmZpZyB9ID0ga2JuU2VydmVyO1xuICByZXR1cm4gYCR7Y29uZmlnLmdldCgnc2VydmVyLmJhc2VQYXRoJyl9JHtjb25maWcuZ2V0KCdzZXJ2ZXIuZGVmYXVsdFJvdXRlJyl9YDtcbn0pO1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/server/http/get_default_route.js"
      ],
      "names": [],
      "mappings": ";;;;sBAAc,QAAQ;;;;AAEtB,MAAM,CAAC,OAAO,GAAG,oBAAE,IAAI,CAAC,UAAU,SAAS,EAAE;MACnC,SAAS,GAAa,SAAS,CAA/B,SAAS;MAAE,MAAM,GAAK,SAAS,CAApB,MAAM;;AACzB,cAAU,MAAM,CAAC,GAAG,CAAC,iBAAiB,CAAC,GAAG,MAAM,CAAC,GAAG,CAAC,qBAAqB,CAAC,CAAG;CAC/E,CAAC,CAAC",
      "file": "/home/vio/kibana/src/server/http/get_default_route.js",
      "sourcesContent": [
        "import _ from 'lodash';\n\nmodule.exports = _.once(function (kbnServer) {\n  const { uiExports, config } = kbnServer;\n  return `${config.get('server.basePath')}${config.get('server.defaultRoute')}`;\n});\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/kibana/src/server/logging/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "bluebird",
            "imported": [
              "fromNode"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "fromNode",
                "local": "fromNode"
              }
            ]
          },
          {
            "source": "even-better",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "evenBetter"
              }
            ]
          },
          {
            "source": "./configuration",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "loggingConfiguration"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _bluebird = require('bluebird');\n\nvar _evenBetter = require('even-better');\n\nvar _evenBetter2 = _interopRequireDefault(_evenBetter);\n\nvar _configuration = require('./configuration');\n\nvar _configuration2 = _interopRequireDefault(_configuration);\n\nexports['default'] = function (kbnServer, server, config) {\n  // prevent relying on kbnServer so this can be used with other hapi servers\n  kbnServer = null;\n\n  return (0, _bluebird.fromNode)(function (cb) {\n    server.register({\n      register: _evenBetter2['default'],\n      options: (0, _configuration2['default'])(config)\n    }, cb);\n  });\n};\n\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3NlcnZlci9sb2dnaW5nL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O3dCQUF5QixVQUFVOzswQkFDWixhQUFhOzs7OzZCQUNILGlCQUFpQjs7OztxQkFFbkMsVUFBVSxTQUFTLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRTs7QUFFbEQsV0FBUyxHQUFHLElBQUksQ0FBQzs7QUFFakIsU0FBTyx3QkFBUyxVQUFVLEVBQUUsRUFBRTtBQUM1QixVQUFNLENBQUMsUUFBUSxDQUFDO0FBQ2QsY0FBUSx5QkFBWTtBQUNwQixhQUFPLEVBQUUsZ0NBQXFCLE1BQU0sQ0FBQztLQUN0QyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0dBQ1IsQ0FBQyxDQUFDO0NBQ0o7O0FBQUEsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8va2liYW5hL3NyYy9zZXJ2ZXIvbG9nZ2luZy9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGZyb21Ob2RlIH0gZnJvbSAnYmx1ZWJpcmQnO1xuaW1wb3J0IGV2ZW5CZXR0ZXIgZnJvbSAnZXZlbi1iZXR0ZXInO1xuaW1wb3J0IGxvZ2dpbmdDb25maWd1cmF0aW9uIGZyb20gJy4vY29uZmlndXJhdGlvbic7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChrYm5TZXJ2ZXIsIHNlcnZlciwgY29uZmlnKSB7XG4gIC8vIHByZXZlbnQgcmVseWluZyBvbiBrYm5TZXJ2ZXIgc28gdGhpcyBjYW4gYmUgdXNlZCB3aXRoIG90aGVyIGhhcGkgc2VydmVyc1xuICBrYm5TZXJ2ZXIgPSBudWxsO1xuXG4gIHJldHVybiBmcm9tTm9kZShmdW5jdGlvbiAoY2IpIHtcbiAgICBzZXJ2ZXIucmVnaXN0ZXIoe1xuICAgICAgcmVnaXN0ZXI6IGV2ZW5CZXR0ZXIsXG4gICAgICBvcHRpb25zOiBsb2dnaW5nQ29uZmlndXJhdGlvbihjb25maWcpXG4gICAgfSwgY2IpO1xuICB9KTtcbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/server/logging/index.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;wBAAyB,UAAU;;0BACZ,aAAa;;;;6BACH,iBAAiB;;;;qBAEnC,UAAU,SAAS,EAAE,MAAM,EAAE,MAAM,EAAE;;AAElD,WAAS,GAAG,IAAI,CAAC;;AAEjB,SAAO,wBAAS,UAAU,EAAE,EAAE;AAC5B,UAAM,CAAC,QAAQ,CAAC;AACd,cAAQ,yBAAY;AACpB,aAAO,EAAE,gCAAqB,MAAM,CAAC;KACtC,EAAE,EAAE,CAAC,CAAC;GACR,CAAC,CAAC;CACJ;;AAAA,CAAC",
      "file": "/home/vio/kibana/src/server/logging/index.js",
      "sourcesContent": [
        "import { fromNode } from 'bluebird';\nimport evenBetter from 'even-better';\nimport loggingConfiguration from './configuration';\n\nexport default function (kbnServer, server, config) {\n  // prevent relying on kbnServer so this can be used with other hapi servers\n  kbnServer = null;\n\n  return fromNode(function (cb) {\n    server.register({\n      register: evenBetter,\n      options: loggingConfiguration(config)\n    }, cb);\n  });\n};\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/kibana/src/server/status/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "./server_status",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "ServerStatus"
              }
            ]
          },
          {
            "source": "./wrap_auth_config",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "wrapAuthConfig"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "join"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "join",
                "local": "join"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "async-to-generator",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _server_status = require('./server_status');\n\nvar _server_status2 = _interopRequireDefault(_server_status);\n\nvar _wrap_auth_config = require('./wrap_auth_config');\n\nvar _wrap_auth_config2 = _interopRequireDefault(_wrap_auth_config);\n\nvar _path = require('path');\n\nexports['default'] = function (kbnServer, server, config) {\n  kbnServer.status = new _server_status2['default'](kbnServer.server);\n\n  if (server.plugins['even-better']) {\n    kbnServer.mixin(require('./metrics'));\n  }\n\n  var wrapAuth = (0, _wrap_auth_config2['default'])(config.get('status.allowAnonymous'));\n\n  server.route(wrapAuth({\n    method: 'GET',\n    path: '/api/status',\n    handler: function handler(request, reply) {\n      return reply({\n        name: config.get('server.name'),\n        uuid: config.get('uuid'),\n        status: kbnServer.status.toJSON(),\n        metrics: kbnServer.metrics\n      });\n    }\n  }));\n\n  server.decorate('reply', 'renderStatusPage', _asyncToGenerator(function* () {\n    var app = kbnServer.uiExports.getHiddenApp('status_page');\n    var response = yield getResponse(this);\n    response.code(kbnServer.status.isGreen() ? 200 : 503);\n    return response;\n\n    function getResponse(ctx) {\n      if (app) {\n        return ctx.renderApp(app);\n      }\n      return ctx(kbnServer.status.toString());\n    }\n  }));\n\n  server.route(wrapAuth({\n    method: 'GET',\n    path: '/status',\n    handler: function handler(request, reply) {\n      return reply.renderStatusPage();\n    }\n  }));\n};\n\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3NlcnZlci9zdGF0dXMvaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztzQkFBYyxRQUFROzs7OzZCQUNHLGlCQUFpQjs7OztnQ0FDZixvQkFBb0I7Ozs7b0JBQzFCLE1BQU07O3FCQUVaLFVBQVUsU0FBUyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUU7QUFDbEQsV0FBUyxDQUFDLE1BQU0sR0FBRywrQkFBaUIsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDOztBQUV0RCxNQUFJLE1BQU0sQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLEVBQUU7QUFDakMsYUFBUyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQztHQUN2Qzs7QUFFRCxNQUFNLFFBQVEsR0FBRyxtQ0FBZSxNQUFNLENBQUMsR0FBRyxDQUFDLHVCQUF1QixDQUFDLENBQUMsQ0FBQzs7QUFFckUsUUFBTSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUM7QUFDcEIsVUFBTSxFQUFFLEtBQUs7QUFDYixRQUFJLEVBQUUsYUFBYTtBQUNuQixXQUFPLEVBQUUsaUJBQVUsT0FBTyxFQUFFLEtBQUssRUFBRTtBQUNqQyxhQUFPLEtBQUssQ0FBQztBQUNYLFlBQUksRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQztBQUMvQixZQUFJLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUM7QUFDeEIsY0FBTSxFQUFFLFNBQVMsQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFO0FBQ2pDLGVBQU8sRUFBRSxTQUFTLENBQUMsT0FBTztPQUMzQixDQUFDLENBQUM7S0FDSjtHQUNGLENBQUMsQ0FBQyxDQUFDOztBQUVKLFFBQU0sQ0FBQyxRQUFRLENBQUMsT0FBTyxFQUFFLGtCQUFrQixvQkFBRSxhQUFrQjtBQUM3RCxRQUFNLEdBQUcsR0FBRyxTQUFTLENBQUMsU0FBUyxDQUFDLFlBQVksQ0FBQyxhQUFhLENBQUMsQ0FBQztBQUM1RCxRQUFNLFFBQVEsR0FBRyxNQUFNLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUN6QyxZQUFRLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsT0FBTyxFQUFFLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQ3RELFdBQU8sUUFBUSxDQUFDOztBQUVoQixhQUFTLFdBQVcsQ0FBQyxHQUFHLEVBQUU7QUFDeEIsVUFBSSxHQUFHLEVBQUU7QUFDUCxlQUFPLEdBQUcsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUM7T0FDM0I7QUFDRCxhQUFPLEdBQUcsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUM7S0FDekM7R0FDRixFQUFDLENBQUM7O0FBRUgsUUFBTSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUM7QUFDcEIsVUFBTSxFQUFFLEtBQUs7QUFDYixRQUFJLEVBQUUsU0FBUztBQUNmLFdBQU8sRUFBRSxpQkFBVSxPQUFPLEVBQUUsS0FBSyxFQUFFO0FBQ2pDLGFBQU8sS0FBSyxDQUFDLGdCQUFnQixFQUFFLENBQUM7S0FDakM7R0FDRixDQUFDLENBQUMsQ0FBQztDQUNMOztBQUFBLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL2tpYmFuYS9zcmMvc2VydmVyL3N0YXR1cy9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgU2VydmVyU3RhdHVzIGZyb20gJy4vc2VydmVyX3N0YXR1cyc7XG5pbXBvcnQgd3JhcEF1dGhDb25maWcgZnJvbSAnLi93cmFwX2F1dGhfY29uZmlnJztcbmltcG9ydCB7IGpvaW4gfSBmcm9tICdwYXRoJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKGtiblNlcnZlciwgc2VydmVyLCBjb25maWcpIHtcbiAga2JuU2VydmVyLnN0YXR1cyA9IG5ldyBTZXJ2ZXJTdGF0dXMoa2JuU2VydmVyLnNlcnZlcik7XG5cbiAgaWYgKHNlcnZlci5wbHVnaW5zWydldmVuLWJldHRlciddKSB7XG4gICAga2JuU2VydmVyLm1peGluKHJlcXVpcmUoJy4vbWV0cmljcycpKTtcbiAgfVxuXG4gIGNvbnN0IHdyYXBBdXRoID0gd3JhcEF1dGhDb25maWcoY29uZmlnLmdldCgnc3RhdHVzLmFsbG93QW5vbnltb3VzJykpO1xuXG4gIHNlcnZlci5yb3V0ZSh3cmFwQXV0aCh7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICBwYXRoOiAnL2FwaS9zdGF0dXMnLFxuICAgIGhhbmRsZXI6IGZ1bmN0aW9uIChyZXF1ZXN0LCByZXBseSkge1xuICAgICAgcmV0dXJuIHJlcGx5KHtcbiAgICAgICAgbmFtZTogY29uZmlnLmdldCgnc2VydmVyLm5hbWUnKSxcbiAgICAgICAgdXVpZDogY29uZmlnLmdldCgndXVpZCcpLFxuICAgICAgICBzdGF0dXM6IGtiblNlcnZlci5zdGF0dXMudG9KU09OKCksXG4gICAgICAgIG1ldHJpY3M6IGtiblNlcnZlci5tZXRyaWNzXG4gICAgICB9KTtcbiAgICB9XG4gIH0pKTtcblxuICBzZXJ2ZXIuZGVjb3JhdGUoJ3JlcGx5JywgJ3JlbmRlclN0YXR1c1BhZ2UnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgYXBwID0ga2JuU2VydmVyLnVpRXhwb3J0cy5nZXRIaWRkZW5BcHAoJ3N0YXR1c19wYWdlJyk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBnZXRSZXNwb25zZSh0aGlzKTtcbiAgICByZXNwb25zZS5jb2RlKGtiblNlcnZlci5zdGF0dXMuaXNHcmVlbigpID8gMjAwIDogNTAzKTtcbiAgICByZXR1cm4gcmVzcG9uc2U7XG5cbiAgICBmdW5jdGlvbiBnZXRSZXNwb25zZShjdHgpIHtcbiAgICAgIGlmIChhcHApIHtcbiAgICAgICAgcmV0dXJuIGN0eC5yZW5kZXJBcHAoYXBwKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjdHgoa2JuU2VydmVyLnN0YXR1cy50b1N0cmluZygpKTtcbiAgICB9XG4gIH0pO1xuXG4gIHNlcnZlci5yb3V0ZSh3cmFwQXV0aCh7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICBwYXRoOiAnL3N0YXR1cycsXG4gICAgaGFuZGxlcjogZnVuY3Rpb24gKHJlcXVlc3QsIHJlcGx5KSB7XG4gICAgICByZXR1cm4gcmVwbHkucmVuZGVyU3RhdHVzUGFnZSgpO1xuICAgIH1cbiAgfSkpO1xufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/server/status/index.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;sBAAc,QAAQ;;;;6BACG,iBAAiB;;;;gCACf,oBAAoB;;;;oBAC1B,MAAM;;qBAEZ,UAAU,SAAS,EAAE,MAAM,EAAE,MAAM,EAAE;AAClD,WAAS,CAAC,MAAM,GAAG,+BAAiB,SAAS,CAAC,MAAM,CAAC,CAAC;;AAEtD,MAAI,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,EAAE;AACjC,aAAS,CAAC,KAAK,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC;GACvC;;AAED,MAAM,QAAQ,GAAG,mCAAe,MAAM,CAAC,GAAG,CAAC,uBAAuB,CAAC,CAAC,CAAC;;AAErE,QAAM,CAAC,KAAK,CAAC,QAAQ,CAAC;AACpB,UAAM,EAAE,KAAK;AACb,QAAI,EAAE,aAAa;AACnB,WAAO,EAAE,iBAAU,OAAO,EAAE,KAAK,EAAE;AACjC,aAAO,KAAK,CAAC;AACX,YAAI,EAAE,MAAM,CAAC,GAAG,CAAC,aAAa,CAAC;AAC/B,YAAI,EAAE,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC;AACxB,cAAM,EAAE,SAAS,CAAC,MAAM,CAAC,MAAM,EAAE;AACjC,eAAO,EAAE,SAAS,CAAC,OAAO;OAC3B,CAAC,CAAC;KACJ;GACF,CAAC,CAAC,CAAC;;AAEJ,QAAM,CAAC,QAAQ,CAAC,OAAO,EAAE,kBAAkB,oBAAE,aAAkB;AAC7D,QAAM,GAAG,GAAG,SAAS,CAAC,SAAS,CAAC,YAAY,CAAC,aAAa,CAAC,CAAC;AAC5D,QAAM,QAAQ,GAAG,MAAM,WAAW,CAAC,IAAI,CAAC,CAAC;AACzC,YAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,OAAO,EAAE,GAAG,GAAG,GAAG,GAAG,CAAC,CAAC;AACtD,WAAO,QAAQ,CAAC;;AAEhB,aAAS,WAAW,CAAC,GAAG,EAAE;AACxB,UAAI,GAAG,EAAE;AACP,eAAO,GAAG,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;OAC3B;AACD,aAAO,GAAG,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,CAAC;KACzC;GACF,EAAC,CAAC;;AAEH,QAAM,CAAC,KAAK,CAAC,QAAQ,CAAC;AACpB,UAAM,EAAE,KAAK;AACb,QAAI,EAAE,SAAS;AACf,WAAO,EAAE,iBAAU,OAAO,EAAE,KAAK,EAAE;AACjC,aAAO,KAAK,CAAC,gBAAgB,EAAE,CAAC;KACjC;GACF,CAAC,CAAC,CAAC;CACL;;AAAA,CAAC",
      "file": "/home/vio/kibana/src/server/status/index.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport ServerStatus from './server_status';\nimport wrapAuthConfig from './wrap_auth_config';\nimport { join } from 'path';\n\nexport default function (kbnServer, server, config) {\n  kbnServer.status = new ServerStatus(kbnServer.server);\n\n  if (server.plugins['even-better']) {\n    kbnServer.mixin(require('./metrics'));\n  }\n\n  const wrapAuth = wrapAuthConfig(config.get('status.allowAnonymous'));\n\n  server.route(wrapAuth({\n    method: 'GET',\n    path: '/api/status',\n    handler: function (request, reply) {\n      return reply({\n        name: config.get('server.name'),\n        uuid: config.get('uuid'),\n        status: kbnServer.status.toJSON(),\n        metrics: kbnServer.metrics\n      });\n    }\n  }));\n\n  server.decorate('reply', 'renderStatusPage', async function () {\n    const app = kbnServer.uiExports.getHiddenApp('status_page');\n    const response = await getResponse(this);\n    response.code(kbnServer.status.isGreen() ? 200 : 503);\n    return response;\n\n    function getResponse(ctx) {\n      if (app) {\n        return ctx.renderApp(app);\n      }\n      return ctx(kbnServer.status.toString());\n    }\n  });\n\n  server.route(wrapAuth({\n    method: 'GET',\n    path: '/status',\n    handler: function (request, reply) {\n      return reply.renderStatusPage();\n    }\n  }));\n};\n"
      ]
    },
    "mtime": 1467036622849
  },
  "{\"filename\":\"/home/vio/kibana/src/server/status/server_status.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "./states",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "states"
              }
            ]
          },
          {
            "source": "./status",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Status"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _states = require('./states');\n\nvar _states2 = _interopRequireDefault(_states);\n\nvar _status = require('./status');\n\nvar _status2 = _interopRequireDefault(_status);\n\nmodule.exports = (function () {\n  function ServerStatus(server) {\n    _classCallCheck(this, ServerStatus);\n\n    this.server = server;\n    this._created = {};\n  }\n\n  _createClass(ServerStatus, [{\n    key: 'create',\n    value: function create(id) {\n      var status = new _status2['default'](id, this.server);\n      this._created[status.id] = status;\n      return status;\n    }\n  }, {\n    key: 'createForPlugin',\n    value: function createForPlugin(plugin) {\n      var status = this.create('plugin:' + plugin.id + '@' + plugin.version);\n      status.plugin = plugin;\n      return status;\n    }\n  }, {\n    key: 'each',\n    value: function each(fn) {\n      var self = this;\n      _lodash2['default'].forOwn(self._created, function (status, i, list) {\n        if (status.state !== 'disabled') {\n          fn.call(self, status, i, list);\n        }\n      });\n    }\n  }, {\n    key: 'get',\n    value: function get(id) {\n      return this._created[id];\n    }\n  }, {\n    key: 'getForPluginId',\n    value: function getForPluginId(pluginId) {\n      return _lodash2['default'].find(this._created, function (s) {\n        return s.plugin && s.plugin.id === pluginId;\n      });\n    }\n  }, {\n    key: 'getState',\n    value: function getState(id) {\n      var status = this.get(id);\n      if (!status) return undefined;\n      return status.state || 'uninitialized';\n    }\n  }, {\n    key: 'getStateForPluginId',\n    value: function getStateForPluginId(pluginId) {\n      var status = this.getForPluginId(pluginId);\n      if (!status) return undefined;\n      return status.state || 'uninitialized';\n    }\n  }, {\n    key: 'overall',\n    value: function overall() {\n      var state = (0, _lodash2['default'])(this._created).map(function (status) {\n        return _states2['default'].get(status.state);\n      }).sortBy('severity').pop();\n\n      var statuses = _lodash2['default'].where(this._created, { state: state.id });\n      var since = _lodash2['default'].get(_lodash2['default'].sortBy(statuses, 'since'), [0, 'since']);\n\n      return {\n        state: state.id,\n        title: state.title,\n        nickname: _lodash2['default'].sample(state.nicknames),\n        icon: state.icon,\n        since: since\n      };\n    }\n  }, {\n    key: 'isGreen',\n    value: function isGreen() {\n      return this.overall().state === 'green';\n    }\n  }, {\n    key: 'notGreen',\n    value: function notGreen() {\n      return !this.isGreen();\n    }\n  }, {\n    key: 'toString',\n    value: function toString() {\n      var overall = this.overall();\n      return overall.title + ' – ' + overall.nickname;\n    }\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      return {\n        overall: this.overall(),\n        statuses: _lodash2['default'].values(this._created)\n      };\n    }\n  }]);\n\n  return ServerStatus;\n})();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3NlcnZlci9zdGF0dXMvc2VydmVyX3N0YXR1cy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7OztzQkFBYyxRQUFROzs7O3NCQUVILFVBQVU7Ozs7c0JBQ1YsVUFBVTs7OztBQUU3QixNQUFNLENBQUMsT0FBTztBQUNELFdBRFUsWUFBWSxDQUNyQixNQUFNLEVBQUU7MEJBREMsWUFBWTs7QUFFL0IsUUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7QUFDckIsUUFBSSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUM7R0FDcEI7O2VBSm9CLFlBQVk7O1dBTTNCLGdCQUFDLEVBQUUsRUFBRTtBQUNULFVBQU0sTUFBTSxHQUFHLHdCQUFXLEVBQUUsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDM0MsVUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLEdBQUcsTUFBTSxDQUFDO0FBQ2xDLGFBQU8sTUFBTSxDQUFDO0tBQ2Y7OztXQUVjLHlCQUFDLE1BQU0sRUFBRTtBQUN0QixVQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxhQUFXLE1BQU0sQ0FBQyxFQUFFLFNBQUksTUFBTSxDQUFDLE9BQU8sQ0FBRyxDQUFDO0FBQ3BFLFlBQU0sQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO0FBQ3ZCLGFBQU8sTUFBTSxDQUFDO0tBQ2Y7OztXQUVHLGNBQUMsRUFBRSxFQUFFO0FBQ1AsVUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDO0FBQ2hCLDBCQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLFVBQVUsTUFBTSxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUU7QUFDakQsWUFBSSxNQUFNLENBQUMsS0FBSyxLQUFLLFVBQVUsRUFBRTtBQUMvQixZQUFFLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxNQUFNLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO1NBQ2hDO09BQ0YsQ0FBQyxDQUFDO0tBQ0o7OztXQUVFLGFBQUMsRUFBRSxFQUFFO0FBQ04sYUFBTyxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0tBQzFCOzs7V0FFYSx3QkFBQyxRQUFRLEVBQUU7QUFDdkIsYUFBTyxvQkFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxVQUFBLENBQUM7ZUFDNUIsQ0FBQyxDQUFDLE1BQU0sSUFBSSxDQUFDLENBQUMsTUFBTSxDQUFDLEVBQUUsS0FBSyxRQUFRO09BQUEsQ0FDckMsQ0FBQztLQUNIOzs7V0FFTyxrQkFBQyxFQUFFLEVBQUU7QUFDWCxVQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQzVCLFVBQUksQ0FBQyxNQUFNLEVBQUUsT0FBTyxTQUFTLENBQUM7QUFDOUIsYUFBTyxNQUFNLENBQUMsS0FBSyxJQUFJLGVBQWUsQ0FBQztLQUN4Qzs7O1dBRWtCLDZCQUFDLFFBQVEsRUFBRTtBQUM1QixVQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQzdDLFVBQUksQ0FBQyxNQUFNLEVBQUUsT0FBTyxTQUFTLENBQUM7QUFDOUIsYUFBTyxNQUFNLENBQUMsS0FBSyxJQUFJLGVBQWUsQ0FBQztLQUN4Qzs7O1dBRU0sbUJBQUc7QUFDUixVQUFJLEtBQUssR0FBRyx5QkFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLENBQzNCLEdBQUcsQ0FBQyxVQUFVLE1BQU0sRUFBRTtBQUNyQixlQUFPLG9CQUFPLEdBQUcsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7T0FDakMsQ0FBQyxDQUNELE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FDbEIsR0FBRyxFQUFFLENBQUM7O0FBRVAsVUFBSSxRQUFRLEdBQUcsb0JBQUUsS0FBSyxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsRUFBRSxLQUFLLEVBQUUsS0FBSyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7QUFDM0QsVUFBSSxLQUFLLEdBQUcsb0JBQUUsR0FBRyxDQUFDLG9CQUFFLE1BQU0sQ0FBQyxRQUFRLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQzs7QUFFN0QsYUFBTztBQUNMLGFBQUssRUFBRSxLQUFLLENBQUMsRUFBRTtBQUNmLGFBQUssRUFBRSxLQUFLLENBQUMsS0FBSztBQUNsQixnQkFBUSxFQUFFLG9CQUFFLE1BQU0sQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDO0FBQ25DLFlBQUksRUFBRSxLQUFLLENBQUMsSUFBSTtBQUNoQixhQUFLLEVBQUUsS0FBSztPQUNiLENBQUM7S0FDSDs7O1dBRU0sbUJBQUc7QUFDUixhQUFRLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQyxLQUFLLEtBQUssT0FBTyxDQUFFO0tBQzNDOzs7V0FFTyxvQkFBRztBQUNULGFBQU8sQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7S0FDeEI7OztXQUVPLG9CQUFHO0FBQ1QsVUFBSSxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO0FBQzdCLGFBQVUsT0FBTyxDQUFDLEtBQUssV0FBTSxPQUFPLENBQUMsUUFBUSxDQUFHO0tBQ2pEOzs7V0FFSyxrQkFBRztBQUNQLGFBQU87QUFDTCxlQUFPLEVBQUUsSUFBSSxDQUFDLE9BQU8sRUFBRTtBQUN2QixnQkFBUSxFQUFFLG9CQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDO09BQ2xDLENBQUM7S0FDSDs7O1NBdkZvQixZQUFZO0lBd0ZsQyxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby9raWJhbmEvc3JjL3NlcnZlci9zdGF0dXMvc2VydmVyX3N0YXR1cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCBzdGF0ZXMgZnJvbSAnLi9zdGF0ZXMnO1xuaW1wb3J0IFN0YXR1cyBmcm9tICcuL3N0YXR1cyc7XG5cbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgU2VydmVyU3RhdHVzIHtcbiAgY29uc3RydWN0b3Ioc2VydmVyKSB7XG4gICAgdGhpcy5zZXJ2ZXIgPSBzZXJ2ZXI7XG4gICAgdGhpcy5fY3JlYXRlZCA9IHt9O1xuICB9XG5cbiAgY3JlYXRlKGlkKSB7XG4gICAgY29uc3Qgc3RhdHVzID0gbmV3IFN0YXR1cyhpZCwgdGhpcy5zZXJ2ZXIpO1xuICAgIHRoaXMuX2NyZWF0ZWRbc3RhdHVzLmlkXSA9IHN0YXR1cztcbiAgICByZXR1cm4gc3RhdHVzO1xuICB9XG5cbiAgY3JlYXRlRm9yUGx1Z2luKHBsdWdpbikge1xuICAgIGNvbnN0IHN0YXR1cyA9IHRoaXMuY3JlYXRlKGBwbHVnaW46JHtwbHVnaW4uaWR9QCR7cGx1Z2luLnZlcnNpb259YCk7XG4gICAgc3RhdHVzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICByZXR1cm4gc3RhdHVzO1xuICB9XG5cbiAgZWFjaChmbikge1xuICAgIGxldCBzZWxmID0gdGhpcztcbiAgICBfLmZvck93bihzZWxmLl9jcmVhdGVkLCBmdW5jdGlvbiAoc3RhdHVzLCBpLCBsaXN0KSB7XG4gICAgICBpZiAoc3RhdHVzLnN0YXRlICE9PSAnZGlzYWJsZWQnKSB7XG4gICAgICAgIGZuLmNhbGwoc2VsZiwgc3RhdHVzLCBpLCBsaXN0KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGdldChpZCkge1xuICAgIHJldHVybiB0aGlzLl9jcmVhdGVkW2lkXTtcbiAgfVxuXG4gIGdldEZvclBsdWdpbklkKHBsdWdpbklkKSB7XG4gICAgcmV0dXJuIF8uZmluZCh0aGlzLl9jcmVhdGVkLCBzID0+XG4gICAgICBzLnBsdWdpbiAmJiBzLnBsdWdpbi5pZCA9PT0gcGx1Z2luSWRcbiAgICApO1xuICB9XG5cbiAgZ2V0U3RhdGUoaWQpIHtcbiAgICBjb25zdCBzdGF0dXMgPSB0aGlzLmdldChpZCk7XG4gICAgaWYgKCFzdGF0dXMpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIHN0YXR1cy5zdGF0ZSB8fCAndW5pbml0aWFsaXplZCc7XG4gIH1cblxuICBnZXRTdGF0ZUZvclBsdWdpbklkKHBsdWdpbklkKSB7XG4gICAgY29uc3Qgc3RhdHVzID0gdGhpcy5nZXRGb3JQbHVnaW5JZChwbHVnaW5JZCk7XG4gICAgaWYgKCFzdGF0dXMpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIHN0YXR1cy5zdGF0ZSB8fCAndW5pbml0aWFsaXplZCc7XG4gIH1cblxuICBvdmVyYWxsKCkge1xuICAgIGxldCBzdGF0ZSA9IF8odGhpcy5fY3JlYXRlZClcbiAgICAubWFwKGZ1bmN0aW9uIChzdGF0dXMpIHtcbiAgICAgIHJldHVybiBzdGF0ZXMuZ2V0KHN0YXR1cy5zdGF0ZSk7XG4gICAgfSlcbiAgICAuc29ydEJ5KCdzZXZlcml0eScpXG4gICAgLnBvcCgpO1xuXG4gICAgbGV0IHN0YXR1c2VzID0gXy53aGVyZSh0aGlzLl9jcmVhdGVkLCB7IHN0YXRlOiBzdGF0ZS5pZCB9KTtcbiAgICBsZXQgc2luY2UgPSBfLmdldChfLnNvcnRCeShzdGF0dXNlcywgJ3NpbmNlJyksIFswLCAnc2luY2UnXSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgc3RhdGU6IHN0YXRlLmlkLFxuICAgICAgdGl0bGU6IHN0YXRlLnRpdGxlLFxuICAgICAgbmlja25hbWU6IF8uc2FtcGxlKHN0YXRlLm5pY2tuYW1lcyksXG4gICAgICBpY29uOiBzdGF0ZS5pY29uLFxuICAgICAgc2luY2U6IHNpbmNlLFxuICAgIH07XG4gIH1cblxuICBpc0dyZWVuKCkge1xuICAgIHJldHVybiAodGhpcy5vdmVyYWxsKCkuc3RhdGUgPT09ICdncmVlbicpO1xuICB9XG5cbiAgbm90R3JlZW4oKSB7XG4gICAgcmV0dXJuICF0aGlzLmlzR3JlZW4oKTtcbiAgfVxuXG4gIHRvU3RyaW5nKCkge1xuICAgIGxldCBvdmVyYWxsID0gdGhpcy5vdmVyYWxsKCk7XG4gICAgcmV0dXJuIGAke292ZXJhbGwudGl0bGV9IOKAkyAke292ZXJhbGwubmlja25hbWV9YDtcbiAgfVxuXG4gIHRvSlNPTigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgb3ZlcmFsbDogdGhpcy5vdmVyYWxsKCksXG4gICAgICBzdGF0dXNlczogXy52YWx1ZXModGhpcy5fY3JlYXRlZClcbiAgICB9O1xuICB9XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/server/status/server_status.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/kibana/src/server/status/server_status.js",
      "sourcesContent": [
        "import _ from 'lodash';\n\nimport states from './states';\nimport Status from './status';\n\nmodule.exports = class ServerStatus {\n  constructor(server) {\n    this.server = server;\n    this._created = {};\n  }\n\n  create(id) {\n    const status = new Status(id, this.server);\n    this._created[status.id] = status;\n    return status;\n  }\n\n  createForPlugin(plugin) {\n    const status = this.create(`plugin:${plugin.id}@${plugin.version}`);\n    status.plugin = plugin;\n    return status;\n  }\n\n  each(fn) {\n    let self = this;\n    _.forOwn(self._created, function (status, i, list) {\n      if (status.state !== 'disabled') {\n        fn.call(self, status, i, list);\n      }\n    });\n  }\n\n  get(id) {\n    return this._created[id];\n  }\n\n  getForPluginId(pluginId) {\n    return _.find(this._created, s =>\n      s.plugin && s.plugin.id === pluginId\n    );\n  }\n\n  getState(id) {\n    const status = this.get(id);\n    if (!status) return undefined;\n    return status.state || 'uninitialized';\n  }\n\n  getStateForPluginId(pluginId) {\n    const status = this.getForPluginId(pluginId);\n    if (!status) return undefined;\n    return status.state || 'uninitialized';\n  }\n\n  overall() {\n    let state = _(this._created)\n    .map(function (status) {\n      return states.get(status.state);\n    })\n    .sortBy('severity')\n    .pop();\n\n    let statuses = _.where(this._created, { state: state.id });\n    let since = _.get(_.sortBy(statuses, 'since'), [0, 'since']);\n\n    return {\n      state: state.id,\n      title: state.title,\n      nickname: _.sample(state.nicknames),\n      icon: state.icon,\n      since: since,\n    };\n  }\n\n  isGreen() {\n    return (this.overall().state === 'green');\n  }\n\n  notGreen() {\n    return !this.isGreen();\n  }\n\n  toString() {\n    let overall = this.overall();\n    return `${overall.title} – ${overall.nickname}`;\n  }\n\n  toJSON() {\n    return {\n      overall: this.overall(),\n      statuses: _.values(this._created)\n    };\n  }\n};\n"
      ]
    },
    "mtime": 1467036622849
  },
  "{\"filename\":\"/home/vio/kibana/src/server/status/states.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nexports.all = [{\n  id: 'red',\n  title: 'Red',\n  icon: 'danger',\n  severity: 1000,\n  nicknames: ['Danger Will Robinson! Danger!']\n}, {\n  id: 'uninitialized',\n  title: 'Uninitialized',\n  icon: 'spinner',\n  severity: 900,\n  nicknames: ['Initializing']\n}, {\n  id: 'yellow',\n  title: 'Yellow',\n  icon: 'warning',\n  severity: 800,\n  nicknames: ['S.N.A.F.U', 'I\\'ll be back', 'brb']\n}, {\n  id: 'green',\n  title: 'Green',\n  icon: 'success',\n  severity: 0,\n  nicknames: ['Looking good']\n}, {\n  id: 'disabled',\n  title: 'Disabled',\n  severity: -1,\n  icon: 'toggle-off',\n  nicknames: ['I\\'m I even a thing?']\n}];\n\nexports.allById = _lodash2['default'].indexBy(exports.all, 'id');\n\nexports.defaults = {\n  icon: 'question',\n  severity: Infinity\n};\n\nexports.get = function (id) {\n  return exports.allById[id] || _lodash2['default'].defaults({ id: id }, exports.defaults);\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3NlcnZlci9zdGF0dXMvc3RhdGVzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7c0JBQWMsUUFBUTs7OztBQUV0QixPQUFPLENBQUMsR0FBRyxHQUFHLENBQ1o7QUFDRSxJQUFFLEVBQUUsS0FBSztBQUNULE9BQUssRUFBRSxLQUFLO0FBQ1osTUFBSSxFQUFFLFFBQVE7QUFDZCxVQUFRLEVBQUUsSUFBSTtBQUNkLFdBQVMsRUFBRSxDQUNULCtCQUErQixDQUNoQztDQUNGLEVBQ0Q7QUFDRSxJQUFFLEVBQUUsZUFBZTtBQUNuQixPQUFLLEVBQUUsZUFBZTtBQUN0QixNQUFJLEVBQUUsU0FBUztBQUNmLFVBQVEsRUFBRSxHQUFHO0FBQ2IsV0FBUyxFQUFFLENBQ1QsY0FBYyxDQUNmO0NBQ0YsRUFDRDtBQUNFLElBQUUsRUFBRSxRQUFRO0FBQ1osT0FBSyxFQUFFLFFBQVE7QUFDZixNQUFJLEVBQUUsU0FBUztBQUNmLFVBQVEsRUFBRSxHQUFHO0FBQ2IsV0FBUyxFQUFFLENBQ1QsV0FBVyxFQUNYLGVBQWUsRUFDZixLQUFLLENBQ047Q0FDRixFQUNEO0FBQ0UsSUFBRSxFQUFFLE9BQU87QUFDWCxPQUFLLEVBQUUsT0FBTztBQUNkLE1BQUksRUFBRSxTQUFTO0FBQ2YsVUFBUSxFQUFFLENBQUM7QUFDWCxXQUFTLEVBQUUsQ0FDVCxjQUFjLENBQ2Y7Q0FDRixFQUNEO0FBQ0UsSUFBRSxFQUFFLFVBQVU7QUFDZCxPQUFLLEVBQUUsVUFBVTtBQUNqQixVQUFRLEVBQUUsQ0FBQyxDQUFDO0FBQ1osTUFBSSxFQUFFLFlBQVk7QUFDbEIsV0FBUyxFQUFFLENBQ1Qsc0JBQXNCLENBQ3ZCO0NBQ0YsQ0FDRixDQUFDOztBQUVGLE9BQU8sQ0FBQyxPQUFPLEdBQUcsb0JBQUUsT0FBTyxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUM7O0FBRS9DLE9BQU8sQ0FBQyxRQUFRLEdBQUc7QUFDakIsTUFBSSxFQUFFLFVBQVU7QUFDaEIsVUFBUSxFQUFFLFFBQVE7Q0FDbkIsQ0FBQzs7QUFFRixPQUFPLENBQUMsR0FBRyxHQUFHLFVBQVUsRUFBRSxFQUFFO0FBQzFCLFNBQU8sT0FBTyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsSUFBSSxvQkFBRSxRQUFRLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0NBQ3hFLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL2tpYmFuYS9zcmMvc2VydmVyL3N0YXR1cy9zdGF0ZXMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuXG5leHBvcnRzLmFsbCA9IFtcbiAge1xuICAgIGlkOiAncmVkJyxcbiAgICB0aXRsZTogJ1JlZCcsXG4gICAgaWNvbjogJ2RhbmdlcicsXG4gICAgc2V2ZXJpdHk6IDEwMDAsXG4gICAgbmlja25hbWVzOiBbXG4gICAgICAnRGFuZ2VyIFdpbGwgUm9iaW5zb24hIERhbmdlciEnXG4gICAgXVxuICB9LFxuICB7XG4gICAgaWQ6ICd1bmluaXRpYWxpemVkJyxcbiAgICB0aXRsZTogJ1VuaW5pdGlhbGl6ZWQnLFxuICAgIGljb246ICdzcGlubmVyJyxcbiAgICBzZXZlcml0eTogOTAwLFxuICAgIG5pY2tuYW1lczogW1xuICAgICAgJ0luaXRpYWxpemluZydcbiAgICBdXG4gIH0sXG4gIHtcbiAgICBpZDogJ3llbGxvdycsXG4gICAgdGl0bGU6ICdZZWxsb3cnLFxuICAgIGljb246ICd3YXJuaW5nJyxcbiAgICBzZXZlcml0eTogODAwLFxuICAgIG5pY2tuYW1lczogW1xuICAgICAgJ1MuTi5BLkYuVScsXG4gICAgICAnSVxcJ2xsIGJlIGJhY2snLFxuICAgICAgJ2JyYidcbiAgICBdXG4gIH0sXG4gIHtcbiAgICBpZDogJ2dyZWVuJyxcbiAgICB0aXRsZTogJ0dyZWVuJyxcbiAgICBpY29uOiAnc3VjY2VzcycsXG4gICAgc2V2ZXJpdHk6IDAsXG4gICAgbmlja25hbWVzOiBbXG4gICAgICAnTG9va2luZyBnb29kJ1xuICAgIF1cbiAgfSxcbiAge1xuICAgIGlkOiAnZGlzYWJsZWQnLFxuICAgIHRpdGxlOiAnRGlzYWJsZWQnLFxuICAgIHNldmVyaXR5OiAtMSxcbiAgICBpY29uOiAndG9nZ2xlLW9mZicsXG4gICAgbmlja25hbWVzOiBbXG4gICAgICAnSVxcJ20gSSBldmVuIGEgdGhpbmc/J1xuICAgIF1cbiAgfVxuXTtcblxuZXhwb3J0cy5hbGxCeUlkID0gXy5pbmRleEJ5KGV4cG9ydHMuYWxsLCAnaWQnKTtcblxuZXhwb3J0cy5kZWZhdWx0cyA9IHtcbiAgaWNvbjogJ3F1ZXN0aW9uJyxcbiAgc2V2ZXJpdHk6IEluZmluaXR5XG59O1xuXG5leHBvcnRzLmdldCA9IGZ1bmN0aW9uIChpZCkge1xuICByZXR1cm4gZXhwb3J0cy5hbGxCeUlkW2lkXSB8fCBfLmRlZmF1bHRzKHsgaWQ6IGlkIH0sIGV4cG9ydHMuZGVmYXVsdHMpO1xufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/server/status/states.js"
      ],
      "names": [],
      "mappings": ";;;;sBAAc,QAAQ;;;;AAEtB,OAAO,CAAC,GAAG,GAAG,CACZ;AACE,IAAE,EAAE,KAAK;AACT,OAAK,EAAE,KAAK;AACZ,MAAI,EAAE,QAAQ;AACd,UAAQ,EAAE,IAAI;AACd,WAAS,EAAE,CACT,+BAA+B,CAChC;CACF,EACD;AACE,IAAE,EAAE,eAAe;AACnB,OAAK,EAAE,eAAe;AACtB,MAAI,EAAE,SAAS;AACf,UAAQ,EAAE,GAAG;AACb,WAAS,EAAE,CACT,cAAc,CACf;CACF,EACD;AACE,IAAE,EAAE,QAAQ;AACZ,OAAK,EAAE,QAAQ;AACf,MAAI,EAAE,SAAS;AACf,UAAQ,EAAE,GAAG;AACb,WAAS,EAAE,CACT,WAAW,EACX,eAAe,EACf,KAAK,CACN;CACF,EACD;AACE,IAAE,EAAE,OAAO;AACX,OAAK,EAAE,OAAO;AACd,MAAI,EAAE,SAAS;AACf,UAAQ,EAAE,CAAC;AACX,WAAS,EAAE,CACT,cAAc,CACf;CACF,EACD;AACE,IAAE,EAAE,UAAU;AACd,OAAK,EAAE,UAAU;AACjB,UAAQ,EAAE,CAAC,CAAC;AACZ,MAAI,EAAE,YAAY;AAClB,WAAS,EAAE,CACT,sBAAsB,CACvB;CACF,CACF,CAAC;;AAEF,OAAO,CAAC,OAAO,GAAG,oBAAE,OAAO,CAAC,OAAO,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;;AAE/C,OAAO,CAAC,QAAQ,GAAG;AACjB,MAAI,EAAE,UAAU;AAChB,UAAQ,EAAE,QAAQ;CACnB,CAAC;;AAEF,OAAO,CAAC,GAAG,GAAG,UAAU,EAAE,EAAE;AAC1B,SAAO,OAAO,CAAC,OAAO,CAAC,EAAE,CAAC,IAAI,oBAAE,QAAQ,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,OAAO,CAAC,QAAQ,CAAC,CAAC;CACxE,CAAC",
      "file": "/home/vio/kibana/src/server/status/states.js",
      "sourcesContent": [
        "import _ from 'lodash';\n\nexports.all = [\n  {\n    id: 'red',\n    title: 'Red',\n    icon: 'danger',\n    severity: 1000,\n    nicknames: [\n      'Danger Will Robinson! Danger!'\n    ]\n  },\n  {\n    id: 'uninitialized',\n    title: 'Uninitialized',\n    icon: 'spinner',\n    severity: 900,\n    nicknames: [\n      'Initializing'\n    ]\n  },\n  {\n    id: 'yellow',\n    title: 'Yellow',\n    icon: 'warning',\n    severity: 800,\n    nicknames: [\n      'S.N.A.F.U',\n      'I\\'ll be back',\n      'brb'\n    ]\n  },\n  {\n    id: 'green',\n    title: 'Green',\n    icon: 'success',\n    severity: 0,\n    nicknames: [\n      'Looking good'\n    ]\n  },\n  {\n    id: 'disabled',\n    title: 'Disabled',\n    severity: -1,\n    icon: 'toggle-off',\n    nicknames: [\n      'I\\'m I even a thing?'\n    ]\n  }\n];\n\nexports.allById = _.indexBy(exports.all, 'id');\n\nexports.defaults = {\n  icon: 'question',\n  severity: Infinity\n};\n\nexports.get = function (id) {\n  return exports.allById[id] || _.defaults({ id: id }, exports.defaults);\n};\n"
      ]
    },
    "mtime": 1467036622849
  },
  "{\"filename\":\"/home/vio/kibana/src/server/status/status.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "./states",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "states"
              }
            ]
          },
          {
            "source": "events",
            "imported": [
              "EventEmitter"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "EventEmitter",
                "local": "EventEmitter"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "get",
        "inherits",
        "create-class",
        "class-call-check",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _states = require('./states');\n\nvar _states2 = _interopRequireDefault(_states);\n\nvar _events = require('events');\n\nvar Status = (function (_EventEmitter) {\n  _inherits(Status, _EventEmitter);\n\n  function Status(id, server) {\n    _classCallCheck(this, Status);\n\n    _get(Object.getPrototypeOf(Status.prototype), 'constructor', this).call(this);\n\n    if (!id || typeof id !== 'string') {\n      throw new TypeError('Status constructor requires an `id` string');\n    }\n\n    this.id = id;\n    this.since = new Date();\n    this.state = 'uninitialized';\n    this.message = 'uninitialized';\n\n    this.on('change', function (previous, previousMsg) {\n      this.since = new Date();\n\n      var tags = ['status', this.id, this.state === 'red' ? 'error' : 'info'];\n\n      server.log(tags, {\n        tmpl: 'Status changed from <%= prevState %> to <%= state %><%= message ? \" - \" + message : \"\" %>',\n        state: this.state,\n        message: this.message,\n        prevState: previous,\n        prevMsg: previousMsg\n      });\n    });\n  }\n\n  _createClass(Status, [{\n    key: 'toJSON',\n    value: function toJSON() {\n      return {\n        id: this.id,\n        state: this.state,\n        icon: _states2['default'].get(this.state).icon,\n        message: this.message,\n        since: this.since\n      };\n    }\n  }, {\n    key: 'on',\n    value: function on(eventName, handler) {\n      var _this = this;\n\n      _get(Object.getPrototypeOf(Status.prototype), 'on', this).call(this, eventName, handler);\n\n      if (eventName === this.state) {\n        setImmediate(function () {\n          return handler(_this.state, _this.message);\n        });\n      }\n    }\n  }, {\n    key: 'once',\n    value: function once(eventName, handler) {\n      var _this2 = this;\n\n      if (eventName === this.state) {\n        setImmediate(function () {\n          return handler(_this2.state, _this2.message);\n        });\n      } else {\n        _get(Object.getPrototypeOf(Status.prototype), 'once', this).call(this, eventName, handler);\n      }\n    }\n  }]);\n\n  return Status;\n})(_events.EventEmitter);\n\n_states2['default'].all.forEach(function (state) {\n  Status.prototype[state.id] = function (message) {\n    if (this.state === 'disabled') return;\n\n    var previous = this.state;\n    var previousMsg = this.message;\n\n    this.error = null;\n    this.message = message || state.title;\n    this.state = state.id;\n\n    if (message instanceof Error) {\n      this.error = message;\n      this.message = message.message;\n    }\n\n    if (previous === this.state && previousMsg === this.message) {\n      // noop\n      return;\n    }\n\n    this.emit(state.id, previous, previousMsg, this.state, this.message);\n    this.emit('change', previous, previousMsg, this.state, this.message);\n  };\n});\n\nmodule.exports = Status;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3NlcnZlci9zdGF0dXMvc3RhdHVzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztzQkFBYyxRQUFROzs7O3NCQUNILFVBQVU7Ozs7c0JBQ0EsUUFBUTs7SUFFL0IsTUFBTTtZQUFOLE1BQU07O0FBQ0MsV0FEUCxNQUFNLENBQ0UsRUFBRSxFQUFFLE1BQU0sRUFBRTswQkFEcEIsTUFBTTs7QUFFUiwrQkFGRSxNQUFNLDZDQUVBOztBQUVSLFFBQUksQ0FBQyxFQUFFLElBQUksT0FBTyxFQUFFLEtBQUssUUFBUSxFQUFFO0FBQ2pDLFlBQU0sSUFBSSxTQUFTLENBQUMsNENBQTRDLENBQUMsQ0FBQztLQUNuRTs7QUFFRCxRQUFJLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQztBQUNiLFFBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQztBQUN4QixRQUFJLENBQUMsS0FBSyxHQUFHLGVBQWUsQ0FBQztBQUM3QixRQUFJLENBQUMsT0FBTyxHQUFHLGVBQWUsQ0FBQzs7QUFFL0IsUUFBSSxDQUFDLEVBQUUsQ0FBQyxRQUFRLEVBQUUsVUFBVSxRQUFRLEVBQUUsV0FBVyxFQUFFO0FBQ2pELFVBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQzs7QUFFeEIsVUFBTSxJQUFJLEdBQUcsQ0FDWCxRQUFRLEVBQ1IsSUFBSSxDQUFDLEVBQUUsRUFDUCxJQUFJLENBQUMsS0FBSyxLQUFLLEtBQUssR0FBRyxPQUFPLEdBQUcsTUFBTSxDQUN4QyxDQUFDOztBQUVGLFlBQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFO0FBQ2YsWUFBSSxFQUFFLDJGQUEyRjtBQUNqRyxhQUFLLEVBQUUsSUFBSSxDQUFDLEtBQUs7QUFDakIsZUFBTyxFQUFFLElBQUksQ0FBQyxPQUFPO0FBQ3JCLGlCQUFTLEVBQUUsUUFBUTtBQUNuQixlQUFPLEVBQUUsV0FBVztPQUNyQixDQUFDLENBQUM7S0FDSixDQUFDLENBQUM7R0FDSjs7ZUE5QkcsTUFBTTs7V0FnQ0osa0JBQUc7QUFDUCxhQUFPO0FBQ0wsVUFBRSxFQUFFLElBQUksQ0FBQyxFQUFFO0FBQ1gsYUFBSyxFQUFFLElBQUksQ0FBQyxLQUFLO0FBQ2pCLFlBQUksRUFBRSxvQkFBTyxHQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUk7QUFDakMsZUFBTyxFQUFFLElBQUksQ0FBQyxPQUFPO0FBQ3JCLGFBQUssRUFBRSxJQUFJLENBQUMsS0FBSztPQUNsQixDQUFDO0tBQ0g7OztXQUVDLFlBQUMsU0FBUyxFQUFFLE9BQU8sRUFBRTs7O0FBQ3JCLGlDQTNDRSxNQUFNLG9DQTJDQyxTQUFTLEVBQUUsT0FBTyxFQUFFOztBQUU3QixVQUFJLFNBQVMsS0FBSyxJQUFJLENBQUMsS0FBSyxFQUFFO0FBQzVCLG9CQUFZLENBQUM7aUJBQU0sT0FBTyxDQUFDLE1BQUssS0FBSyxFQUFFLE1BQUssT0FBTyxDQUFDO1NBQUEsQ0FBQyxDQUFDO09BQ3ZEO0tBQ0Y7OztXQUVHLGNBQUMsU0FBUyxFQUFFLE9BQU8sRUFBRTs7O0FBQ3ZCLFVBQUksU0FBUyxLQUFLLElBQUksQ0FBQyxLQUFLLEVBQUU7QUFDNUIsb0JBQVksQ0FBQztpQkFBTSxPQUFPLENBQUMsT0FBSyxLQUFLLEVBQUUsT0FBSyxPQUFPLENBQUM7U0FBQSxDQUFDLENBQUM7T0FDdkQsTUFBTTtBQUNMLG1DQXREQSxNQUFNLHNDQXNESyxTQUFTLEVBQUUsT0FBTyxFQUFFO09BQ2hDO0tBQ0Y7OztTQXhERyxNQUFNOzs7QUEyRFosb0JBQU8sR0FBRyxDQUFDLE9BQU8sQ0FBQyxVQUFVLEtBQUssRUFBRTtBQUNsQyxRQUFNLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsR0FBRyxVQUFVLE9BQU8sRUFBRTtBQUM5QyxRQUFJLElBQUksQ0FBQyxLQUFLLEtBQUssVUFBVSxFQUFFLE9BQU87O0FBRXRDLFFBQUksUUFBUSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUM7QUFDMUIsUUFBSSxXQUFXLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQzs7QUFFL0IsUUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7QUFDbEIsUUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLElBQUksS0FBSyxDQUFDLEtBQUssQ0FBQztBQUN0QyxRQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxFQUFFLENBQUM7O0FBRXRCLFFBQUksT0FBTyxZQUFZLEtBQUssRUFBRTtBQUM1QixVQUFJLENBQUMsS0FBSyxHQUFHLE9BQU8sQ0FBQztBQUNyQixVQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUM7S0FDaEM7O0FBRUQsUUFBSSxRQUFRLEtBQUssSUFBSSxDQUFDLEtBQUssSUFBSSxXQUFXLEtBQUssSUFBSSxDQUFDLE9BQU8sRUFBRTs7QUFFM0QsYUFBTztLQUNSOztBQUVELFFBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRSxRQUFRLEVBQUUsV0FBVyxFQUFFLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQ3JFLFFBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLFFBQVEsRUFBRSxXQUFXLEVBQUUsSUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7R0FDdEUsQ0FBQztDQUNILENBQUMsQ0FBQzs7QUFFSCxNQUFNLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8va2liYW5hL3NyYy9zZXJ2ZXIvc3RhdHVzL3N0YXR1cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgc3RhdGVzIGZyb20gJy4vc3RhdGVzJztcbmltcG9ydCB7IEV2ZW50RW1pdHRlciB9IGZyb20gJ2V2ZW50cyc7XG5cbmNsYXNzIFN0YXR1cyBleHRlbmRzIEV2ZW50RW1pdHRlciB7XG4gIGNvbnN0cnVjdG9yKGlkLCBzZXJ2ZXIpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgaWYgKCFpZCB8fCB0eXBlb2YgaWQgIT09ICdzdHJpbmcnKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdTdGF0dXMgY29uc3RydWN0b3IgcmVxdWlyZXMgYW4gYGlkYCBzdHJpbmcnKTtcbiAgICB9XG5cbiAgICB0aGlzLmlkID0gaWQ7XG4gICAgdGhpcy5zaW5jZSA9IG5ldyBEYXRlKCk7XG4gICAgdGhpcy5zdGF0ZSA9ICd1bmluaXRpYWxpemVkJztcbiAgICB0aGlzLm1lc3NhZ2UgPSAndW5pbml0aWFsaXplZCc7XG5cbiAgICB0aGlzLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAocHJldmlvdXMsIHByZXZpb3VzTXNnKSB7XG4gICAgICB0aGlzLnNpbmNlID0gbmV3IERhdGUoKTtcblxuICAgICAgY29uc3QgdGFncyA9IFtcbiAgICAgICAgJ3N0YXR1cycsXG4gICAgICAgIHRoaXMuaWQsXG4gICAgICAgIHRoaXMuc3RhdGUgPT09ICdyZWQnID8gJ2Vycm9yJyA6ICdpbmZvJ1xuICAgICAgXTtcblxuICAgICAgc2VydmVyLmxvZyh0YWdzLCB7XG4gICAgICAgIHRtcGw6ICdTdGF0dXMgY2hhbmdlZCBmcm9tIDwlPSBwcmV2U3RhdGUgJT4gdG8gPCU9IHN0YXRlICU+PCU9IG1lc3NhZ2UgPyBcIiAtIFwiICsgbWVzc2FnZSA6IFwiXCIgJT4nLFxuICAgICAgICBzdGF0ZTogdGhpcy5zdGF0ZSxcbiAgICAgICAgbWVzc2FnZTogdGhpcy5tZXNzYWdlLFxuICAgICAgICBwcmV2U3RhdGU6IHByZXZpb3VzLFxuICAgICAgICBwcmV2TXNnOiBwcmV2aW91c01zZ1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICB0b0pTT04oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiB0aGlzLmlkLFxuICAgICAgc3RhdGU6IHRoaXMuc3RhdGUsXG4gICAgICBpY29uOiBzdGF0ZXMuZ2V0KHRoaXMuc3RhdGUpLmljb24sXG4gICAgICBtZXNzYWdlOiB0aGlzLm1lc3NhZ2UsXG4gICAgICBzaW5jZTogdGhpcy5zaW5jZVxuICAgIH07XG4gIH1cblxuICBvbihldmVudE5hbWUsIGhhbmRsZXIpIHtcbiAgICBzdXBlci5vbihldmVudE5hbWUsIGhhbmRsZXIpO1xuXG4gICAgaWYgKGV2ZW50TmFtZSA9PT0gdGhpcy5zdGF0ZSkge1xuICAgICAgc2V0SW1tZWRpYXRlKCgpID0+IGhhbmRsZXIodGhpcy5zdGF0ZSwgdGhpcy5tZXNzYWdlKSk7XG4gICAgfVxuICB9XG5cbiAgb25jZShldmVudE5hbWUsIGhhbmRsZXIpIHtcbiAgICBpZiAoZXZlbnROYW1lID09PSB0aGlzLnN0YXRlKSB7XG4gICAgICBzZXRJbW1lZGlhdGUoKCkgPT4gaGFuZGxlcih0aGlzLnN0YXRlLCB0aGlzLm1lc3NhZ2UpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3VwZXIub25jZShldmVudE5hbWUsIGhhbmRsZXIpO1xuICAgIH1cbiAgfVxufVxuXG5zdGF0ZXMuYWxsLmZvckVhY2goZnVuY3Rpb24gKHN0YXRlKSB7XG4gIFN0YXR1cy5wcm90b3R5cGVbc3RhdGUuaWRdID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICBpZiAodGhpcy5zdGF0ZSA9PT0gJ2Rpc2FibGVkJykgcmV0dXJuO1xuXG4gICAgbGV0IHByZXZpb3VzID0gdGhpcy5zdGF0ZTtcbiAgICBsZXQgcHJldmlvdXNNc2cgPSB0aGlzLm1lc3NhZ2U7XG5cbiAgICB0aGlzLmVycm9yID0gbnVsbDtcbiAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlIHx8IHN0YXRlLnRpdGxlO1xuICAgIHRoaXMuc3RhdGUgPSBzdGF0ZS5pZDtcblxuICAgIGlmIChtZXNzYWdlIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIHRoaXMuZXJyb3IgPSBtZXNzYWdlO1xuICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZS5tZXNzYWdlO1xuICAgIH1cblxuICAgIGlmIChwcmV2aW91cyA9PT0gdGhpcy5zdGF0ZSAmJiBwcmV2aW91c01zZyA9PT0gdGhpcy5tZXNzYWdlKSB7XG4gICAgICAvLyBub29wXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5lbWl0KHN0YXRlLmlkLCBwcmV2aW91cywgcHJldmlvdXNNc2csIHRoaXMuc3RhdGUsIHRoaXMubWVzc2FnZSk7XG4gICAgdGhpcy5lbWl0KCdjaGFuZ2UnLCBwcmV2aW91cywgcHJldmlvdXNNc2csIHRoaXMuc3RhdGUsIHRoaXMubWVzc2FnZSk7XG4gIH07XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBTdGF0dXM7XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/server/status/status.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/kibana/src/server/status/status.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport states from './states';\nimport { EventEmitter } from 'events';\n\nclass Status extends EventEmitter {\n  constructor(id, server) {\n    super();\n\n    if (!id || typeof id !== 'string') {\n      throw new TypeError('Status constructor requires an `id` string');\n    }\n\n    this.id = id;\n    this.since = new Date();\n    this.state = 'uninitialized';\n    this.message = 'uninitialized';\n\n    this.on('change', function (previous, previousMsg) {\n      this.since = new Date();\n\n      const tags = [\n        'status',\n        this.id,\n        this.state === 'red' ? 'error' : 'info'\n      ];\n\n      server.log(tags, {\n        tmpl: 'Status changed from <%= prevState %> to <%= state %><%= message ? \" - \" + message : \"\" %>',\n        state: this.state,\n        message: this.message,\n        prevState: previous,\n        prevMsg: previousMsg\n      });\n    });\n  }\n\n  toJSON() {\n    return {\n      id: this.id,\n      state: this.state,\n      icon: states.get(this.state).icon,\n      message: this.message,\n      since: this.since\n    };\n  }\n\n  on(eventName, handler) {\n    super.on(eventName, handler);\n\n    if (eventName === this.state) {\n      setImmediate(() => handler(this.state, this.message));\n    }\n  }\n\n  once(eventName, handler) {\n    if (eventName === this.state) {\n      setImmediate(() => handler(this.state, this.message));\n    } else {\n      super.once(eventName, handler);\n    }\n  }\n}\n\nstates.all.forEach(function (state) {\n  Status.prototype[state.id] = function (message) {\n    if (this.state === 'disabled') return;\n\n    let previous = this.state;\n    let previousMsg = this.message;\n\n    this.error = null;\n    this.message = message || state.title;\n    this.state = state.id;\n\n    if (message instanceof Error) {\n      this.error = message;\n      this.message = message.message;\n    }\n\n    if (previous === this.state && previousMsg === this.message) {\n      // noop\n      return;\n    }\n\n    this.emit(state.id, previous, previousMsg, this.state, this.message);\n    this.emit('change', previous, previousMsg, this.state, this.message);\n  };\n});\n\nmodule.exports = Status;\n"
      ]
    },
    "mtime": 1467036622849
  },
  "{\"filename\":\"/home/vio/kibana/src/server/status/wrap_auth_config.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "assign",
              "identity"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "assign",
                "local": "assign"
              },
              {
                "kind": "named",
                "imported": "identity",
                "local": "identity"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _lodash = require('lodash');\n\nexports['default'] = function (allowAnonymous) {\n  if (allowAnonymous) return function (options) {\n    return (0, _lodash.assign)(options, { config: { auth: false } });\n  };\n  return _lodash.identity;\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3NlcnZlci9zdGF0dXMvd3JhcF9hdXRoX2NvbmZpZy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7c0JBQStCLFFBQVE7O3FCQUV4QixVQUFDLGNBQWMsRUFBSztBQUNqQyxNQUFJLGNBQWMsRUFBRSxPQUFPLFVBQUEsT0FBTztXQUFJLG9CQUFPLE9BQU8sRUFBRSxFQUFDLE1BQU0sRUFBRSxFQUFDLElBQUksRUFBRSxLQUFLLEVBQUMsRUFBQyxDQUFDO0dBQUEsQ0FBQztBQUMvRSwwQkFBZ0I7Q0FDakIiLCJmaWxlIjoiL2hvbWUvdmlvL2tpYmFuYS9zcmMvc2VydmVyL3N0YXR1cy93cmFwX2F1dGhfY29uZmlnLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHthc3NpZ24sIGlkZW50aXR5fSBmcm9tICdsb2Rhc2gnO1xuXG5leHBvcnQgZGVmYXVsdCAoYWxsb3dBbm9ueW1vdXMpID0+IHtcbiAgaWYgKGFsbG93QW5vbnltb3VzKSByZXR1cm4gb3B0aW9ucyA9PiBhc3NpZ24ob3B0aW9ucywge2NvbmZpZzoge2F1dGg6IGZhbHNlfX0pO1xuICByZXR1cm4gaWRlbnRpdHk7XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/server/status/wrap_auth_config.js"
      ],
      "names": [],
      "mappings": ";;;;;;sBAA+B,QAAQ;;qBAExB,UAAC,cAAc,EAAK;AACjC,MAAI,cAAc,EAAE,OAAO,UAAA,OAAO;WAAI,oBAAO,OAAO,EAAE,EAAC,MAAM,EAAE,EAAC,IAAI,EAAE,KAAK,EAAC,EAAC,CAAC;GAAA,CAAC;AAC/E,0BAAgB;CACjB",
      "file": "/home/vio/kibana/src/server/status/wrap_auth_config.js",
      "sourcesContent": [
        "import {assign, identity} from 'lodash';\n\nexport default (allowAnonymous) => {\n  if (allowAnonymous) return options => assign(options, {config: {auth: false}});\n  return identity;\n};\n"
      ]
    },
    "mtime": 1467036622849
  },
  "{\"filename\":\"/home/vio/kibana/src/server/pid/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "boom",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Boom"
              }
            ]
          },
          {
            "source": "bluebird",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Promise"
              }
            ]
          },
          {
            "source": "fs",
            "imported": [
              "unlinkSync"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "unlinkSync",
                "local": "unlink"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _boom = require('boom');\n\nvar _boom2 = _interopRequireDefault(_boom);\n\nvar _bluebird = require('bluebird');\n\nvar _bluebird2 = _interopRequireDefault(_bluebird);\n\nvar _fs = require('fs');\n\nvar writeFile = _bluebird2['default'].promisify(require('fs').writeFile);\n\nmodule.exports = _bluebird2['default'].method(function (kbnServer, server, config) {\n  var path = config.get('pid.file');\n  if (!path) return;\n\n  var pid = String(process.pid);\n\n  return writeFile(path, pid, { flag: 'wx' })['catch'](function (err) {\n    if (err.code !== 'EEXIST') throw err;\n\n    var log = {\n      tmpl: 'pid file already exists at <%= path %>',\n      path: path,\n      pid: pid\n    };\n\n    if (config.get('pid.exclusive')) {\n      throw _boom2['default'].create(500, _lodash2['default'].template(log.tmpl)(log), log);\n    } else {\n      server.log(['pid', 'warning'], log);\n    }\n\n    return writeFile(path, pid);\n  }).then(function () {\n\n    server.log(['pid', 'debug'], {\n      tmpl: 'wrote pid file to <%= path %>',\n      path: path,\n      pid: pid\n    });\n\n    var clean = _lodash2['default'].once(function (code) {\n      (0, _fs.unlinkSync)(path);\n    });\n\n    process.once('exit', clean); // for \"natural\" exits\n    process.once('SIGINT', function () {\n      // for Ctrl-C exits\n      clean();\n\n      // resend SIGINT\n      process.kill(process.pid, 'SIGINT');\n    });\n\n    process.on('unhandledRejection', function (reason, promise) {\n      server.log(['warning'], 'Detected an unhandled Promise rejection.\\n' + reason);\n    });\n  });\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3NlcnZlci9waWQvaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztzQkFBYyxRQUFROzs7O29CQUNMLE1BQU07Ozs7d0JBQ0gsVUFBVTs7OztrQkFDTyxJQUFJOztBQUN6QyxJQUFJLFNBQVMsR0FBRyxzQkFBUSxTQUFTLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDOztBQUUzRCxNQUFNLENBQUMsT0FBTyxHQUFHLHNCQUFRLE1BQU0sQ0FBQyxVQUFVLFNBQVMsRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFO0FBQ25FLE1BQUksSUFBSSxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDbEMsTUFBSSxDQUFDLElBQUksRUFBRSxPQUFPOztBQUVsQixNQUFJLEdBQUcsR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDOztBQUU5QixTQUFPLFNBQVMsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxDQUFDLFNBQ3JDLENBQUMsVUFBVSxHQUFHLEVBQUU7QUFDcEIsUUFBSSxHQUFHLENBQUMsSUFBSSxLQUFLLFFBQVEsRUFBRSxNQUFNLEdBQUcsQ0FBQzs7QUFFckMsUUFBSSxHQUFHLEdBQUc7QUFDUixVQUFJLEVBQUUsd0NBQXdDO0FBQzlDLFVBQUksRUFBRSxJQUFJO0FBQ1YsU0FBRyxFQUFFLEdBQUc7S0FDVCxDQUFDOztBQUVGLFFBQUksTUFBTSxDQUFDLEdBQUcsQ0FBQyxlQUFlLENBQUMsRUFBRTtBQUMvQixZQUFNLGtCQUFLLE1BQU0sQ0FBQyxHQUFHLEVBQUUsb0JBQUUsUUFBUSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztLQUN4RCxNQUFNO0FBQ0wsWUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEtBQUssRUFBRSxTQUFTLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztLQUNyQzs7QUFFRCxXQUFPLFNBQVMsQ0FBQyxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUM7R0FDN0IsQ0FBQyxDQUNELElBQUksQ0FBQyxZQUFZOztBQUVoQixVQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsS0FBSyxFQUFFLE9BQU8sQ0FBQyxFQUFFO0FBQzNCLFVBQUksRUFBRSwrQkFBK0I7QUFDckMsVUFBSSxFQUFFLElBQUk7QUFDVixTQUFHLEVBQUUsR0FBRztLQUNULENBQUMsQ0FBQzs7QUFFSCxRQUFJLEtBQUssR0FBRyxvQkFBRSxJQUFJLENBQUMsVUFBVSxJQUFJLEVBQUU7QUFDakMsMEJBQU8sSUFBSSxDQUFDLENBQUM7S0FDZCxDQUFDLENBQUM7O0FBRUgsV0FBTyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDNUIsV0FBTyxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsWUFBWTs7QUFDakMsV0FBSyxFQUFFLENBQUM7OztBQUdSLGFBQU8sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxRQUFRLENBQUMsQ0FBQztLQUNyQyxDQUFDLENBQUM7O0FBRUgsV0FBTyxDQUFDLEVBQUUsQ0FBQyxvQkFBb0IsRUFBRSxVQUFVLE1BQU0sRUFBRSxPQUFPLEVBQUU7QUFDMUQsWUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxpREFBK0MsTUFBTSxDQUFHLENBQUM7S0FDaEYsQ0FBQyxDQUFDO0dBQ0osQ0FBQyxDQUFDO0NBQ0osQ0FBQyxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby9raWJhbmEvc3JjL3NlcnZlci9waWQvaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IEJvb20gZnJvbSAnYm9vbSc7XG5pbXBvcnQgUHJvbWlzZSBmcm9tICdibHVlYmlyZCc7XG5pbXBvcnQgeyB1bmxpbmtTeW5jIGFzIHVubGluayB9IGZyb20gJ2ZzJztcbmxldCB3cml0ZUZpbGUgPSBQcm9taXNlLnByb21pc2lmeShyZXF1aXJlKCdmcycpLndyaXRlRmlsZSk7XG5cbm1vZHVsZS5leHBvcnRzID0gUHJvbWlzZS5tZXRob2QoZnVuY3Rpb24gKGtiblNlcnZlciwgc2VydmVyLCBjb25maWcpIHtcbiAgbGV0IHBhdGggPSBjb25maWcuZ2V0KCdwaWQuZmlsZScpO1xuICBpZiAoIXBhdGgpIHJldHVybjtcblxuICBsZXQgcGlkID0gU3RyaW5nKHByb2Nlc3MucGlkKTtcblxuICByZXR1cm4gd3JpdGVGaWxlKHBhdGgsIHBpZCwgeyBmbGFnOiAnd3gnIH0pXG4gIC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgaWYgKGVyci5jb2RlICE9PSAnRUVYSVNUJykgdGhyb3cgZXJyO1xuXG4gICAgbGV0IGxvZyA9IHtcbiAgICAgIHRtcGw6ICdwaWQgZmlsZSBhbHJlYWR5IGV4aXN0cyBhdCA8JT0gcGF0aCAlPicsXG4gICAgICBwYXRoOiBwYXRoLFxuICAgICAgcGlkOiBwaWRcbiAgICB9O1xuXG4gICAgaWYgKGNvbmZpZy5nZXQoJ3BpZC5leGNsdXNpdmUnKSkge1xuICAgICAgdGhyb3cgQm9vbS5jcmVhdGUoNTAwLCBfLnRlbXBsYXRlKGxvZy50bXBsKShsb2cpLCBsb2cpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXJ2ZXIubG9nKFsncGlkJywgJ3dhcm5pbmcnXSwgbG9nKTtcbiAgICB9XG5cbiAgICByZXR1cm4gd3JpdGVGaWxlKHBhdGgsIHBpZCk7XG4gIH0pXG4gIC50aGVuKGZ1bmN0aW9uICgpIHtcblxuICAgIHNlcnZlci5sb2coWydwaWQnLCAnZGVidWcnXSwge1xuICAgICAgdG1wbDogJ3dyb3RlIHBpZCBmaWxlIHRvIDwlPSBwYXRoICU+JyxcbiAgICAgIHBhdGg6IHBhdGgsXG4gICAgICBwaWQ6IHBpZFxuICAgIH0pO1xuXG4gICAgbGV0IGNsZWFuID0gXy5vbmNlKGZ1bmN0aW9uIChjb2RlKSB7XG4gICAgICB1bmxpbmsocGF0aCk7XG4gICAgfSk7XG5cbiAgICBwcm9jZXNzLm9uY2UoJ2V4aXQnLCBjbGVhbik7IC8vIGZvciBcIm5hdHVyYWxcIiBleGl0c1xuICAgIHByb2Nlc3Mub25jZSgnU0lHSU5UJywgZnVuY3Rpb24gKCkgeyAvLyBmb3IgQ3RybC1DIGV4aXRzXG4gICAgICBjbGVhbigpO1xuXG4gICAgICAvLyByZXNlbmQgU0lHSU5UXG4gICAgICBwcm9jZXNzLmtpbGwocHJvY2Vzcy5waWQsICdTSUdJTlQnKTtcbiAgICB9KTtcblxuICAgIHByb2Nlc3Mub24oJ3VuaGFuZGxlZFJlamVjdGlvbicsIGZ1bmN0aW9uIChyZWFzb24sIHByb21pc2UpIHtcbiAgICAgIHNlcnZlci5sb2coWyd3YXJuaW5nJ10sIGBEZXRlY3RlZCBhbiB1bmhhbmRsZWQgUHJvbWlzZSByZWplY3Rpb24uXFxuJHtyZWFzb259YCk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/server/pid/index.js"
      ],
      "names": [],
      "mappings": ";;;;sBAAc,QAAQ;;;;oBACL,MAAM;;;;wBACH,UAAU;;;;kBACO,IAAI;;AACzC,IAAI,SAAS,GAAG,sBAAQ,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,CAAC;;AAE3D,MAAM,CAAC,OAAO,GAAG,sBAAQ,MAAM,CAAC,UAAU,SAAS,EAAE,MAAM,EAAE,MAAM,EAAE;AACnE,MAAI,IAAI,GAAG,MAAM,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;AAClC,MAAI,CAAC,IAAI,EAAE,OAAO;;AAElB,MAAI,GAAG,GAAG,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;;AAE9B,SAAO,SAAS,CAAC,IAAI,EAAE,GAAG,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,SACrC,CAAC,UAAU,GAAG,EAAE;AACpB,QAAI,GAAG,CAAC,IAAI,KAAK,QAAQ,EAAE,MAAM,GAAG,CAAC;;AAErC,QAAI,GAAG,GAAG;AACR,UAAI,EAAE,wCAAwC;AAC9C,UAAI,EAAE,IAAI;AACV,SAAG,EAAE,GAAG;KACT,CAAC;;AAEF,QAAI,MAAM,CAAC,GAAG,CAAC,eAAe,CAAC,EAAE;AAC/B,YAAM,kBAAK,MAAM,CAAC,GAAG,EAAE,oBAAE,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC;KACxD,MAAM;AACL,YAAM,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,SAAS,CAAC,EAAE,GAAG,CAAC,CAAC;KACrC;;AAED,WAAO,SAAS,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;GAC7B,CAAC,CACD,IAAI,CAAC,YAAY;;AAEhB,UAAM,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,OAAO,CAAC,EAAE;AAC3B,UAAI,EAAE,+BAA+B;AACrC,UAAI,EAAE,IAAI;AACV,SAAG,EAAE,GAAG;KACT,CAAC,CAAC;;AAEH,QAAI,KAAK,GAAG,oBAAE,IAAI,CAAC,UAAU,IAAI,EAAE;AACjC,0BAAO,IAAI,CAAC,CAAC;KACd,CAAC,CAAC;;AAEH,WAAO,CAAC,IAAI,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;AAC5B,WAAO,CAAC,IAAI,CAAC,QAAQ,EAAE,YAAY;;AACjC,WAAK,EAAE,CAAC;;;AAGR,aAAO,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAC;KACrC,CAAC,CAAC;;AAEH,WAAO,CAAC,EAAE,CAAC,oBAAoB,EAAE,UAAU,MAAM,EAAE,OAAO,EAAE;AAC1D,YAAM,CAAC,GAAG,CAAC,CAAC,SAAS,CAAC,iDAA+C,MAAM,CAAG,CAAC;KAChF,CAAC,CAAC;GACJ,CAAC,CAAC;CACJ,CAAC,CAAC",
      "file": "/home/vio/kibana/src/server/pid/index.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport Boom from 'boom';\nimport Promise from 'bluebird';\nimport { unlinkSync as unlink } from 'fs';\nlet writeFile = Promise.promisify(require('fs').writeFile);\n\nmodule.exports = Promise.method(function (kbnServer, server, config) {\n  let path = config.get('pid.file');\n  if (!path) return;\n\n  let pid = String(process.pid);\n\n  return writeFile(path, pid, { flag: 'wx' })\n  .catch(function (err) {\n    if (err.code !== 'EEXIST') throw err;\n\n    let log = {\n      tmpl: 'pid file already exists at <%= path %>',\n      path: path,\n      pid: pid\n    };\n\n    if (config.get('pid.exclusive')) {\n      throw Boom.create(500, _.template(log.tmpl)(log), log);\n    } else {\n      server.log(['pid', 'warning'], log);\n    }\n\n    return writeFile(path, pid);\n  })\n  .then(function () {\n\n    server.log(['pid', 'debug'], {\n      tmpl: 'wrote pid file to <%= path %>',\n      path: path,\n      pid: pid\n    });\n\n    let clean = _.once(function (code) {\n      unlink(path);\n    });\n\n    process.once('exit', clean); // for \"natural\" exits\n    process.once('SIGINT', function () { // for Ctrl-C exits\n      clean();\n\n      // resend SIGINT\n      process.kill(process.pid, 'SIGINT');\n    });\n\n    process.on('unhandledRejection', function (reason, promise) {\n      server.log(['warning'], `Detected an unhandled Promise rejection.\\n${reason}`);\n    });\n  });\n});\n"
      ]
    },
    "mtime": 1467036622849
  },
  "{\"filename\":\"/home/vio/kibana/src/server/plugins/scan.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "bluebird",
            "imported": [
              "fromNode"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "fromNode",
                "local": "fromNode"
              }
            ]
          },
          {
            "source": "fs",
            "imported": [
              "readdir",
              "stat"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "readdir",
                "local": "readdir"
              },
              {
                "kind": "named",
                "imported": "stat",
                "local": "stat"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "resolve"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "resolve",
                "local": "resolve"
              }
            ]
          },
          {
            "source": "bluebird",
            "imported": [
              "each"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "each",
                "local": "each"
              }
            ]
          },
          {
            "source": "./plugin_collection",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "PluginCollection"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "async-to-generator",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _bluebird = require('bluebird');\n\nvar _fs = require('fs');\n\nvar _path = require('path');\n\nvar _plugin_collection = require('./plugin_collection');\n\nvar _plugin_collection2 = _interopRequireDefault(_plugin_collection);\n\nmodule.exports = _asyncToGenerator(function* (kbnServer, server, config) {\n\n  var plugins = kbnServer.plugins = new _plugin_collection2['default'](kbnServer);\n\n  var scanDirs = [].concat(config.get('plugins.scanDirs') || []);\n  var pluginPaths = [].concat(config.get('plugins.paths') || []);\n\n  var debug = _lodash2['default'].bindKey(server, 'log', ['plugins', 'debug']);\n  var warning = _lodash2['default'].bindKey(server, 'log', ['plugins', 'warning']);\n\n  // scan all scanDirs to find pluginPaths\n  yield (0, _bluebird.each)(scanDirs, _asyncToGenerator(function* (dir) {\n    debug({ tmpl: 'Scanning `<%= dir %>` for plugins', dir: dir });\n\n    var filenames = null;\n\n    try {\n      filenames = yield (0, _bluebird.fromNode)(function (cb) {\n        return (0, _fs.readdir)(dir, cb);\n      });\n    } catch (err) {\n      if (err.code !== 'ENOENT') throw err;\n\n      filenames = [];\n      warning({\n        tmpl: '<%= err.code %>: Unable to scan non-existent directory for plugins \"<%= dir %>\"',\n        err: err,\n        dir: dir\n      });\n    }\n\n    yield (0, _bluebird.each)(filenames, _asyncToGenerator(function* (name) {\n      if (name[0] === '.') return;\n\n      var path = (0, _path.resolve)(dir, name);\n      var stats = yield (0, _bluebird.fromNode)(function (cb) {\n        return (0, _fs.stat)(path, cb);\n      });\n      if (stats.isDirectory()) {\n        pluginPaths.push(path);\n      }\n    }));\n  }));\n\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = pluginPaths[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var path = _step.value;\n\n      var modulePath = undefined;\n      try {\n        modulePath = require.resolve(path);\n      } catch (e) {\n        warning({ tmpl: 'Skipping non-plugin directory at <%= path %>', path: path });\n        continue;\n      }\n\n      yield plugins['new'](path);\n      debug({ tmpl: 'Found plugin at <%= path %>', path: modulePath });\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator['return']) {\n        _iterator['return']();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3NlcnZlci9wbHVnaW5zL3NjYW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O3NCQUFjLFFBQVE7Ozs7d0JBQ0csVUFBVTs7a0JBQ0wsSUFBSTs7b0JBQ1YsTUFBTTs7aUNBRUQscUJBQXFCOzs7O0FBQ2xELE1BQU0sQ0FBQyxPQUFPLHFCQUFHLFdBQU8sU0FBUyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUs7O0FBRXBELE1BQUksT0FBTyxHQUFHLFNBQVMsQ0FBQyxPQUFPLEdBQUcsbUNBQXFCLFNBQVMsQ0FBQyxDQUFDOztBQUVsRSxNQUFJLFFBQVEsR0FBRyxFQUFFLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsa0JBQWtCLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQztBQUMvRCxNQUFJLFdBQVcsR0FBRyxFQUFFLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsZUFBZSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7O0FBRS9ELE1BQUksS0FBSyxHQUFHLG9CQUFFLE9BQU8sQ0FBQyxNQUFNLEVBQUUsS0FBSyxFQUFFLENBQUMsU0FBUyxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUM7QUFDM0QsTUFBSSxPQUFPLEdBQUcsb0JBQUUsT0FBTyxDQUFDLE1BQU0sRUFBRSxLQUFLLEVBQUUsQ0FBQyxTQUFTLEVBQUUsU0FBUyxDQUFDLENBQUMsQ0FBQzs7O0FBRy9ELFFBQU0sb0JBQUssUUFBUSxvQkFBRSxXQUFNLEdBQUcsRUFBSTtBQUNoQyxTQUFLLENBQUMsRUFBRSxJQUFJLEVBQUUsbUNBQW1DLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7O0FBRS9ELFFBQUksU0FBUyxHQUFHLElBQUksQ0FBQzs7QUFFckIsUUFBSTtBQUNGLGVBQVMsR0FBRyxNQUFNLHdCQUFTLFVBQUEsRUFBRTtlQUFJLGlCQUFRLEdBQUcsRUFBRSxFQUFFLENBQUM7T0FBQSxDQUFDLENBQUM7S0FDcEQsQ0FBQyxPQUFPLEdBQUcsRUFBRTtBQUNaLFVBQUksR0FBRyxDQUFDLElBQUksS0FBSyxRQUFRLEVBQUUsTUFBTSxHQUFHLENBQUM7O0FBRXJDLGVBQVMsR0FBRyxFQUFFLENBQUM7QUFDZixhQUFPLENBQUM7QUFDTixZQUFJLEVBQUUsaUZBQWlGO0FBQ3ZGLFdBQUcsRUFBRSxHQUFHO0FBQ1IsV0FBRyxFQUFFLEdBQUc7T0FDVCxDQUFDLENBQUM7S0FDSjs7QUFFRCxVQUFNLG9CQUFLLFNBQVMsb0JBQUUsV0FBTSxJQUFJLEVBQUk7QUFDbEMsVUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxFQUFFLE9BQU87O0FBRTVCLFVBQUksSUFBSSxHQUFHLG1CQUFRLEdBQUcsRUFBRSxJQUFJLENBQUMsQ0FBQztBQUM5QixVQUFJLEtBQUssR0FBRyxNQUFNLHdCQUFTLFVBQUEsRUFBRTtlQUFJLGNBQUssSUFBSSxFQUFFLEVBQUUsQ0FBQztPQUFBLENBQUMsQ0FBQztBQUNqRCxVQUFJLEtBQUssQ0FBQyxXQUFXLEVBQUUsRUFBRTtBQUN2QixtQkFBVyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztPQUN4QjtLQUNGLEVBQUMsQ0FBQztHQUNKLEVBQUMsQ0FBQzs7Ozs7OztBQUVILHlCQUFpQixXQUFXLDhIQUFFO1VBQXJCLElBQUk7O0FBQ1gsVUFBSSxVQUFVLFlBQUEsQ0FBQztBQUNmLFVBQUk7QUFDRixrQkFBVSxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7T0FDcEMsQ0FBQyxPQUFPLENBQUMsRUFBRTtBQUNWLGVBQU8sQ0FBQyxFQUFFLElBQUksRUFBRSw4Q0FBOEMsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztBQUM5RSxpQkFBUztPQUNWOztBQUVELFlBQU0sT0FBTyxPQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDeEIsV0FBSyxDQUFDLEVBQUUsSUFBSSxFQUFFLDZCQUE2QixFQUFFLElBQUksRUFBRSxVQUFVLEVBQUUsQ0FBQyxDQUFDO0tBQ2xFOzs7Ozs7Ozs7Ozs7Ozs7Q0FDRixDQUFBLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL2tpYmFuYS9zcmMvc2VydmVyL3BsdWdpbnMvc2Nhbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgeyBmcm9tTm9kZSB9IGZyb20gJ2JsdWViaXJkJztcbmltcG9ydCB7IHJlYWRkaXIsIHN0YXQgfSBmcm9tICdmcyc7XG5pbXBvcnQgeyByZXNvbHZlIH0gZnJvbSAncGF0aCc7XG5pbXBvcnQgeyBlYWNoIH0gZnJvbSAnYmx1ZWJpcmQnO1xuaW1wb3J0IFBsdWdpbkNvbGxlY3Rpb24gZnJvbSAnLi9wbHVnaW5fY29sbGVjdGlvbic7XG5tb2R1bGUuZXhwb3J0cyA9IGFzeW5jIChrYm5TZXJ2ZXIsIHNlcnZlciwgY29uZmlnKSA9PiB7XG5cbiAgbGV0IHBsdWdpbnMgPSBrYm5TZXJ2ZXIucGx1Z2lucyA9IG5ldyBQbHVnaW5Db2xsZWN0aW9uKGtiblNlcnZlcik7XG5cbiAgbGV0IHNjYW5EaXJzID0gW10uY29uY2F0KGNvbmZpZy5nZXQoJ3BsdWdpbnMuc2NhbkRpcnMnKSB8fCBbXSk7XG4gIGxldCBwbHVnaW5QYXRocyA9IFtdLmNvbmNhdChjb25maWcuZ2V0KCdwbHVnaW5zLnBhdGhzJykgfHwgW10pO1xuXG4gIGxldCBkZWJ1ZyA9IF8uYmluZEtleShzZXJ2ZXIsICdsb2cnLCBbJ3BsdWdpbnMnLCAnZGVidWcnXSk7XG4gIGxldCB3YXJuaW5nID0gXy5iaW5kS2V5KHNlcnZlciwgJ2xvZycsIFsncGx1Z2lucycsICd3YXJuaW5nJ10pO1xuXG4gIC8vIHNjYW4gYWxsIHNjYW5EaXJzIHRvIGZpbmQgcGx1Z2luUGF0aHNcbiAgYXdhaXQgZWFjaChzY2FuRGlycywgYXN5bmMgZGlyID0+IHtcbiAgICBkZWJ1Zyh7IHRtcGw6ICdTY2FubmluZyBgPCU9IGRpciAlPmAgZm9yIHBsdWdpbnMnLCBkaXI6IGRpciB9KTtcblxuICAgIGxldCBmaWxlbmFtZXMgPSBudWxsO1xuXG4gICAgdHJ5IHtcbiAgICAgIGZpbGVuYW1lcyA9IGF3YWl0IGZyb21Ob2RlKGNiID0+IHJlYWRkaXIoZGlyLCBjYikpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgaWYgKGVyci5jb2RlICE9PSAnRU5PRU5UJykgdGhyb3cgZXJyO1xuXG4gICAgICBmaWxlbmFtZXMgPSBbXTtcbiAgICAgIHdhcm5pbmcoe1xuICAgICAgICB0bXBsOiAnPCU9IGVyci5jb2RlICU+OiBVbmFibGUgdG8gc2NhbiBub24tZXhpc3RlbnQgZGlyZWN0b3J5IGZvciBwbHVnaW5zIFwiPCU9IGRpciAlPlwiJyxcbiAgICAgICAgZXJyOiBlcnIsXG4gICAgICAgIGRpcjogZGlyXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBhd2FpdCBlYWNoKGZpbGVuYW1lcywgYXN5bmMgbmFtZSA9PiB7XG4gICAgICBpZiAobmFtZVswXSA9PT0gJy4nKSByZXR1cm47XG5cbiAgICAgIGxldCBwYXRoID0gcmVzb2x2ZShkaXIsIG5hbWUpO1xuICAgICAgbGV0IHN0YXRzID0gYXdhaXQgZnJvbU5vZGUoY2IgPT4gc3RhdChwYXRoLCBjYikpO1xuICAgICAgaWYgKHN0YXRzLmlzRGlyZWN0b3J5KCkpIHtcbiAgICAgICAgcGx1Z2luUGF0aHMucHVzaChwYXRoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgZm9yIChsZXQgcGF0aCBvZiBwbHVnaW5QYXRocykge1xuICAgIGxldCBtb2R1bGVQYXRoO1xuICAgIHRyeSB7XG4gICAgICBtb2R1bGVQYXRoID0gcmVxdWlyZS5yZXNvbHZlKHBhdGgpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHdhcm5pbmcoeyB0bXBsOiAnU2tpcHBpbmcgbm9uLXBsdWdpbiBkaXJlY3RvcnkgYXQgPCU9IHBhdGggJT4nLCBwYXRoOiBwYXRoIH0pO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgYXdhaXQgcGx1Z2lucy5uZXcocGF0aCk7XG4gICAgZGVidWcoeyB0bXBsOiAnRm91bmQgcGx1Z2luIGF0IDwlPSBwYXRoICU+JywgcGF0aDogbW9kdWxlUGF0aCB9KTtcbiAgfVxufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/server/plugins/scan.js"
      ],
      "names": [],
      "mappings": ";;;;;;sBAAc,QAAQ;;;;wBACG,UAAU;;kBACL,IAAI;;oBACV,MAAM;;iCAED,qBAAqB;;;;AAClD,MAAM,CAAC,OAAO,qBAAG,WAAO,SAAS,EAAE,MAAM,EAAE,MAAM,EAAK;;AAEpD,MAAI,OAAO,GAAG,SAAS,CAAC,OAAO,GAAG,mCAAqB,SAAS,CAAC,CAAC;;AAElE,MAAI,QAAQ,GAAG,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,kBAAkB,CAAC,IAAI,EAAE,CAAC,CAAC;AAC/D,MAAI,WAAW,GAAG,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,eAAe,CAAC,IAAI,EAAE,CAAC,CAAC;;AAE/D,MAAI,KAAK,GAAG,oBAAE,OAAO,CAAC,MAAM,EAAE,KAAK,EAAE,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC,CAAC;AAC3D,MAAI,OAAO,GAAG,oBAAE,OAAO,CAAC,MAAM,EAAE,KAAK,EAAE,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC,CAAC;;;AAG/D,QAAM,oBAAK,QAAQ,oBAAE,WAAM,GAAG,EAAI;AAChC,SAAK,CAAC,EAAE,IAAI,EAAE,mCAAmC,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;;AAE/D,QAAI,SAAS,GAAG,IAAI,CAAC;;AAErB,QAAI;AACF,eAAS,GAAG,MAAM,wBAAS,UAAA,EAAE;eAAI,iBAAQ,GAAG,EAAE,EAAE,CAAC;OAAA,CAAC,CAAC;KACpD,CAAC,OAAO,GAAG,EAAE;AACZ,UAAI,GAAG,CAAC,IAAI,KAAK,QAAQ,EAAE,MAAM,GAAG,CAAC;;AAErC,eAAS,GAAG,EAAE,CAAC;AACf,aAAO,CAAC;AACN,YAAI,EAAE,iFAAiF;AACvF,WAAG,EAAE,GAAG;AACR,WAAG,EAAE,GAAG;OACT,CAAC,CAAC;KACJ;;AAED,UAAM,oBAAK,SAAS,oBAAE,WAAM,IAAI,EAAI;AAClC,UAAI,IAAI,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE,OAAO;;AAE5B,UAAI,IAAI,GAAG,mBAAQ,GAAG,EAAE,IAAI,CAAC,CAAC;AAC9B,UAAI,KAAK,GAAG,MAAM,wBAAS,UAAA,EAAE;eAAI,cAAK,IAAI,EAAE,EAAE,CAAC;OAAA,CAAC,CAAC;AACjD,UAAI,KAAK,CAAC,WAAW,EAAE,EAAE;AACvB,mBAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;OACxB;KACF,EAAC,CAAC;GACJ,EAAC,CAAC;;;;;;;AAEH,yBAAiB,WAAW,8HAAE;UAArB,IAAI;;AACX,UAAI,UAAU,YAAA,CAAC;AACf,UAAI;AACF,kBAAU,GAAG,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;OACpC,CAAC,OAAO,CAAC,EAAE;AACV,eAAO,CAAC,EAAE,IAAI,EAAE,8CAA8C,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC;AAC9E,iBAAS;OACV;;AAED,YAAM,OAAO,OAAI,CAAC,IAAI,CAAC,CAAC;AACxB,WAAK,CAAC,EAAE,IAAI,EAAE,6BAA6B,EAAE,IAAI,EAAE,UAAU,EAAE,CAAC,CAAC;KAClE;;;;;;;;;;;;;;;CACF,CAAA,CAAC",
      "file": "/home/vio/kibana/src/server/plugins/scan.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport { fromNode } from 'bluebird';\nimport { readdir, stat } from 'fs';\nimport { resolve } from 'path';\nimport { each } from 'bluebird';\nimport PluginCollection from './plugin_collection';\nmodule.exports = async (kbnServer, server, config) => {\n\n  let plugins = kbnServer.plugins = new PluginCollection(kbnServer);\n\n  let scanDirs = [].concat(config.get('plugins.scanDirs') || []);\n  let pluginPaths = [].concat(config.get('plugins.paths') || []);\n\n  let debug = _.bindKey(server, 'log', ['plugins', 'debug']);\n  let warning = _.bindKey(server, 'log', ['plugins', 'warning']);\n\n  // scan all scanDirs to find pluginPaths\n  await each(scanDirs, async dir => {\n    debug({ tmpl: 'Scanning `<%= dir %>` for plugins', dir: dir });\n\n    let filenames = null;\n\n    try {\n      filenames = await fromNode(cb => readdir(dir, cb));\n    } catch (err) {\n      if (err.code !== 'ENOENT') throw err;\n\n      filenames = [];\n      warning({\n        tmpl: '<%= err.code %>: Unable to scan non-existent directory for plugins \"<%= dir %>\"',\n        err: err,\n        dir: dir\n      });\n    }\n\n    await each(filenames, async name => {\n      if (name[0] === '.') return;\n\n      let path = resolve(dir, name);\n      let stats = await fromNode(cb => stat(path, cb));\n      if (stats.isDirectory()) {\n        pluginPaths.push(path);\n      }\n    });\n  });\n\n  for (let path of pluginPaths) {\n    let modulePath;\n    try {\n      modulePath = require.resolve(path);\n    } catch (e) {\n      warning({ tmpl: 'Skipping non-plugin directory at <%= path %>', path: path });\n      continue;\n    }\n\n    await plugins.new(path);\n    debug({ tmpl: 'Found plugin at <%= path %>', path: modulePath });\n  }\n};\n"
      ]
    },
    "mtime": 1467036622849
  },
  "{\"filename\":\"/home/vio/kibana/src/server/plugins/plugin_collection.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./plugin_api",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "PluginApi"
              }
            ]
          },
          {
            "source": "util",
            "imported": [
              "inspect"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "inspect",
                "local": "inspect"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "get",
              "indexBy"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "get",
                "local": "get"
              },
              {
                "kind": "named",
                "imported": "indexBy",
                "local": "indexBy"
              }
            ]
          },
          {
            "source": "../../utils/collection",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Collection"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "get",
        "inherits",
        "create-class",
        "class-call-check",
        "async-to-generator",
        "to-consumable-array",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i]; return arr2; } else { return Array.from(arr); } }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _plugin_api = require('./plugin_api');\n\nvar _plugin_api2 = _interopRequireDefault(_plugin_api);\n\nvar _util = require('util');\n\nvar _lodash = require('lodash');\n\nvar _utilsCollection = require('../../utils/collection');\n\nvar _utilsCollection2 = _interopRequireDefault(_utilsCollection);\n\nvar byIdCache = Symbol('byIdCache');\nvar pluginApis = Symbol('pluginApis');\n\nmodule.exports = (function (_Collection) {\n  _inherits(Plugins, _Collection);\n\n  function Plugins(kbnServer) {\n    _classCallCheck(this, Plugins);\n\n    _get(Object.getPrototypeOf(Plugins.prototype), 'constructor', this).call(this);\n    this.kbnServer = kbnServer;\n    this[pluginApis] = new Set();\n  }\n\n  _createClass(Plugins, [{\n    key: 'new',\n    value: _asyncToGenerator(function* (path) {\n      var api = new _plugin_api2['default'](this.kbnServer, path);\n      this[pluginApis].add(api);\n\n      var output = [].concat(require(path)(api) || []);\n      var config = this.kbnServer.config;\n\n      if (!output.length) return;\n\n      // clear the byIdCache\n      this[byIdCache] = null;\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = output[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var product = _step.value;\n\n          if (product instanceof api.Plugin) {\n            var plugin = product;\n            this.add(plugin);\n\n            var enabled = yield plugin.readConfig();\n            if (!enabled) this['delete'](plugin);\n            continue;\n          }\n\n          throw new TypeError('unexpected plugin export ' + (0, _util.inspect)(product));\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator['return']) {\n            _iterator['return']();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    })\n  }, {\n    key: 'getPluginApis',\n    value: function getPluginApis() {\n      return this[pluginApis];\n    }\n  }, {\n    key: 'byId',\n    get: function get() {\n      return this[byIdCache] || (this[byIdCache] = (0, _lodash.indexBy)([].concat(_toConsumableArray(this)), 'id'));\n    }\n  }]);\n\n  return Plugins;\n})(_utilsCollection2['default']);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3NlcnZlci9wbHVnaW5zL3BsdWdpbl9jb2xsZWN0aW9uLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7MEJBQ3NCLGNBQWM7Ozs7b0JBQ1osTUFBTTs7c0JBQ0QsUUFBUTs7K0JBQ2Qsd0JBQXdCOzs7O0FBRS9DLElBQUksU0FBUyxHQUFHLE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUNwQyxJQUFJLFVBQVUsR0FBRyxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUM7O0FBRXRDLE1BQU0sQ0FBQyxPQUFPO1lBQVMsT0FBTzs7QUFFakIsV0FGVSxPQUFPLENBRWhCLFNBQVMsRUFBRTswQkFGRixPQUFPOztBQUcxQiwrQkFIbUIsT0FBTyw2Q0FHbEI7QUFDUixRQUFJLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQztBQUMzQixRQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsSUFBSSxHQUFHLEVBQUUsQ0FBQztHQUM5Qjs7ZUFOb0IsT0FBTzs7NkJBUW5CLFdBQUMsSUFBSSxFQUFFO0FBQ2QsVUFBSSxHQUFHLEdBQUcsNEJBQWMsSUFBSSxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsQ0FBQztBQUM5QyxVQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDOztBQUUxQixVQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQztBQUNqRCxVQUFJLE1BQU0sR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQzs7QUFFbkMsVUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsT0FBTzs7O0FBRzNCLFVBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxJQUFJLENBQUM7Ozs7Ozs7QUFFdkIsNkJBQW9CLE1BQU0sOEhBQUU7Y0FBbkIsT0FBTzs7QUFFZCxjQUFJLE9BQU8sWUFBWSxHQUFHLENBQUMsTUFBTSxFQUFFO0FBQ2pDLGdCQUFJLE1BQU0sR0FBRyxPQUFPLENBQUM7QUFDckIsZ0JBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7O0FBRWpCLGdCQUFJLE9BQU8sR0FBRyxNQUFNLE1BQU0sQ0FBQyxVQUFVLEVBQUUsQ0FBQztBQUN4QyxnQkFBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLFVBQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUNsQyxxQkFBUztXQUNWOztBQUVELGdCQUFNLElBQUksU0FBUyxDQUFDLDJCQUEyQixHQUFHLG1CQUFRLE9BQU8sQ0FBQyxDQUFDLENBQUM7U0FDckU7Ozs7Ozs7Ozs7Ozs7OztLQUNGOzs7V0FNWSx5QkFBRztBQUNkLGFBQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0tBQ3pCOzs7U0FOTyxlQUFHO0FBQ1QsYUFBTyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLGtEQUFZLElBQUksSUFBRyxJQUFJLENBQUMsQ0FBQSxBQUFDLENBQUM7S0FDeEU7OztTQXJDb0IsT0FBTztnQ0EyQzdCLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL2tpYmFuYS9zcmMvc2VydmVyL3BsdWdpbnMvcGx1Z2luX2NvbGxlY3Rpb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbmltcG9ydCBQbHVnaW5BcGkgZnJvbSAnLi9wbHVnaW5fYXBpJztcbmltcG9ydCB7IGluc3BlY3QgfSBmcm9tICd1dGlsJztcbmltcG9ydCB7IGdldCwgaW5kZXhCeSB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgQ29sbGVjdGlvbiBmcm9tICcuLi8uLi91dGlscy9jb2xsZWN0aW9uJztcblxubGV0IGJ5SWRDYWNoZSA9IFN5bWJvbCgnYnlJZENhY2hlJyk7XG5sZXQgcGx1Z2luQXBpcyA9IFN5bWJvbCgncGx1Z2luQXBpcycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIFBsdWdpbnMgZXh0ZW5kcyBDb2xsZWN0aW9uIHtcblxuICBjb25zdHJ1Y3RvcihrYm5TZXJ2ZXIpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMua2JuU2VydmVyID0ga2JuU2VydmVyO1xuICAgIHRoaXNbcGx1Z2luQXBpc10gPSBuZXcgU2V0KCk7XG4gIH1cblxuICBhc3luYyBuZXcocGF0aCkge1xuICAgIGxldCBhcGkgPSBuZXcgUGx1Z2luQXBpKHRoaXMua2JuU2VydmVyLCBwYXRoKTtcbiAgICB0aGlzW3BsdWdpbkFwaXNdLmFkZChhcGkpO1xuXG4gICAgbGV0IG91dHB1dCA9IFtdLmNvbmNhdChyZXF1aXJlKHBhdGgpKGFwaSkgfHwgW10pO1xuICAgIGxldCBjb25maWcgPSB0aGlzLmtiblNlcnZlci5jb25maWc7XG5cbiAgICBpZiAoIW91dHB1dC5sZW5ndGgpIHJldHVybjtcblxuICAgIC8vIGNsZWFyIHRoZSBieUlkQ2FjaGVcbiAgICB0aGlzW2J5SWRDYWNoZV0gPSBudWxsO1xuXG4gICAgZm9yIChsZXQgcHJvZHVjdCBvZiBvdXRwdXQpIHtcblxuICAgICAgaWYgKHByb2R1Y3QgaW5zdGFuY2VvZiBhcGkuUGx1Z2luKSB7XG4gICAgICAgIGxldCBwbHVnaW4gPSBwcm9kdWN0O1xuICAgICAgICB0aGlzLmFkZChwbHVnaW4pO1xuXG4gICAgICAgIGxldCBlbmFibGVkID0gYXdhaXQgcGx1Z2luLnJlYWRDb25maWcoKTtcbiAgICAgICAgaWYgKCFlbmFibGVkKSB0aGlzLmRlbGV0ZShwbHVnaW4pO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigndW5leHBlY3RlZCBwbHVnaW4gZXhwb3J0ICcgKyBpbnNwZWN0KHByb2R1Y3QpKTtcbiAgICB9XG4gIH1cblxuICBnZXQgYnlJZCgpIHtcbiAgICByZXR1cm4gdGhpc1tieUlkQ2FjaGVdIHx8ICh0aGlzW2J5SWRDYWNoZV0gPSBpbmRleEJ5KFsuLi50aGlzXSwgJ2lkJykpO1xuICB9XG5cbiAgZ2V0UGx1Z2luQXBpcygpIHtcbiAgICByZXR1cm4gdGhpc1twbHVnaW5BcGlzXTtcbiAgfVxuXG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/server/plugins/plugin_collection.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;;;;;;;0BACsB,cAAc;;;;oBACZ,MAAM;;sBACD,QAAQ;;+BACd,wBAAwB;;;;AAE/C,IAAI,SAAS,GAAG,MAAM,CAAC,WAAW,CAAC,CAAC;AACpC,IAAI,UAAU,GAAG,MAAM,CAAC,YAAY,CAAC,CAAC;;AAEtC,MAAM,CAAC,OAAO;YAAS,OAAO;;AAEjB,WAFU,OAAO,CAEhB,SAAS,EAAE;0BAFF,OAAO;;AAG1B,+BAHmB,OAAO,6CAGlB;AACR,QAAI,CAAC,SAAS,GAAG,SAAS,CAAC;AAC3B,QAAI,CAAC,UAAU,CAAC,GAAG,IAAI,GAAG,EAAE,CAAC;GAC9B;;eANoB,OAAO;;6BAQnB,WAAC,IAAI,EAAE;AACd,UAAI,GAAG,GAAG,4BAAc,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;AAC9C,UAAI,CAAC,UAAU,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;;AAE1B,UAAI,MAAM,GAAG,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC;AACjD,UAAI,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;;AAEnC,UAAI,CAAC,MAAM,CAAC,MAAM,EAAE,OAAO;;;AAG3B,UAAI,CAAC,SAAS,CAAC,GAAG,IAAI,CAAC;;;;;;;AAEvB,6BAAoB,MAAM,8HAAE;cAAnB,OAAO;;AAEd,cAAI,OAAO,YAAY,GAAG,CAAC,MAAM,EAAE;AACjC,gBAAI,MAAM,GAAG,OAAO,CAAC;AACrB,gBAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;;AAEjB,gBAAI,OAAO,GAAG,MAAM,MAAM,CAAC,UAAU,EAAE,CAAC;AACxC,gBAAI,CAAC,OAAO,EAAE,IAAI,UAAO,CAAC,MAAM,CAAC,CAAC;AAClC,qBAAS;WACV;;AAED,gBAAM,IAAI,SAAS,CAAC,2BAA2B,GAAG,mBAAQ,OAAO,CAAC,CAAC,CAAC;SACrE;;;;;;;;;;;;;;;KACF;;;WAMY,yBAAG;AACd,aAAO,IAAI,CAAC,UAAU,CAAC,CAAC;KACzB;;;SANO,eAAG;AACT,aAAO,IAAI,CAAC,SAAS,CAAC,KAAK,IAAI,CAAC,SAAS,CAAC,GAAG,kDAAY,IAAI,IAAG,IAAI,CAAC,CAAA,AAAC,CAAC;KACxE;;;SArCoB,OAAO;gCA2C7B,CAAC",
      "file": "/home/vio/kibana/src/server/plugins/plugin_collection.js",
      "sourcesContent": [
        "\nimport PluginApi from './plugin_api';\nimport { inspect } from 'util';\nimport { get, indexBy } from 'lodash';\nimport Collection from '../../utils/collection';\n\nlet byIdCache = Symbol('byIdCache');\nlet pluginApis = Symbol('pluginApis');\n\nmodule.exports = class Plugins extends Collection {\n\n  constructor(kbnServer) {\n    super();\n    this.kbnServer = kbnServer;\n    this[pluginApis] = new Set();\n  }\n\n  async new(path) {\n    let api = new PluginApi(this.kbnServer, path);\n    this[pluginApis].add(api);\n\n    let output = [].concat(require(path)(api) || []);\n    let config = this.kbnServer.config;\n\n    if (!output.length) return;\n\n    // clear the byIdCache\n    this[byIdCache] = null;\n\n    for (let product of output) {\n\n      if (product instanceof api.Plugin) {\n        let plugin = product;\n        this.add(plugin);\n\n        let enabled = await plugin.readConfig();\n        if (!enabled) this.delete(plugin);\n        continue;\n      }\n\n      throw new TypeError('unexpected plugin export ' + inspect(product));\n    }\n  }\n\n  get byId() {\n    return this[byIdCache] || (this[byIdCache] = indexBy([...this], 'id'));\n  }\n\n  getPluginApis() {\n    return this[pluginApis];\n  }\n\n};\n"
      ]
    },
    "mtime": 1467036622849
  },
  "{\"filename\":\"/home/vio/kibana/src/server/plugins/plugin_api.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "./plugin",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Plugin"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "basename",
              "join"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "basename",
                "local": "basename"
              },
              {
                "kind": "named",
                "imported": "join",
                "local": "join"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _plugin = require('./plugin');\n\nvar _plugin2 = _interopRequireDefault(_plugin);\n\nvar _path = require('path');\n\nmodule.exports = (function () {\n  function PluginApi(kibana, pluginPath) {\n    _classCallCheck(this, PluginApi);\n\n    this.config = kibana.config;\n    this.rootDir = kibana.rootDir;\n    this['package'] = require((0, _path.join)(pluginPath, 'package.json'));\n    this.Plugin = _plugin2['default'].scoped(kibana, pluginPath, this['package']);\n  }\n\n  _createClass(PluginApi, [{\n    key: 'uiExports',\n    get: function get() {\n      throw new Error('plugin.uiExports is not defined until initialize phase');\n    }\n  }, {\n    key: 'autoload',\n    get: function get() {\n      console.warn(this['package'].id + ' accessed the autoload lists which are no longer available via the Plugin API.' + 'Use the `ui/autoload/*` modules instead.');\n\n      return {\n        directives: [],\n        filters: [],\n        styles: [],\n        modules: [],\n        require: []\n      };\n    }\n  }]);\n\n  return PluginApi;\n})();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3NlcnZlci9wbHVnaW5zL3BsdWdpbl9hcGkuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7c0JBQWMsUUFBUTs7OztzQkFDSCxVQUFVOzs7O29CQUNFLE1BQU07O0FBRXJDLE1BQU0sQ0FBQyxPQUFPO0FBQ0QsV0FEVSxTQUFTLENBQ2xCLE1BQU0sRUFBRSxVQUFVLEVBQUU7MEJBRFgsU0FBUzs7QUFFNUIsUUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDO0FBQzVCLFFBQUksQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQztBQUM5QixRQUFJLFdBQVEsR0FBRyxPQUFPLENBQUMsZ0JBQUssVUFBVSxFQUFFLGNBQWMsQ0FBQyxDQUFDLENBQUM7QUFDekQsUUFBSSxDQUFDLE1BQU0sR0FBRyxvQkFBTyxNQUFNLENBQUMsTUFBTSxFQUFFLFVBQVUsRUFBRSxJQUFJLFdBQVEsQ0FBQyxDQUFDO0dBQy9EOztlQU5vQixTQUFTOztTQVFqQixlQUFHO0FBQ2QsWUFBTSxJQUFJLEtBQUssQ0FBQyx3REFBd0QsQ0FBQyxDQUFDO0tBQzNFOzs7U0FFVyxlQUFHO0FBQ2IsYUFBTyxDQUFDLElBQUksQ0FDVixBQUFHLElBQUksV0FBUSxDQUFDLEVBQUUsc0ZBQ2xCLDBDQUEwQyxDQUMzQyxDQUFDOztBQUVGLGFBQU87QUFDTCxrQkFBVSxFQUFFLEVBQUU7QUFDZCxlQUFPLEVBQUUsRUFBRTtBQUNYLGNBQU0sRUFBRSxFQUFFO0FBQ1YsZUFBTyxFQUFFLEVBQUU7QUFDWCxlQUFPLEVBQUUsRUFBRTtPQUNaLENBQUM7S0FDSDs7O1NBekJvQixTQUFTO0lBMEIvQixDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby9raWJhbmEvc3JjL3NlcnZlci9wbHVnaW5zL3BsdWdpbl9hcGkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IFBsdWdpbiBmcm9tICcuL3BsdWdpbic7XG5pbXBvcnQgeyBiYXNlbmFtZSwgam9pbiB9IGZyb20gJ3BhdGgnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIFBsdWdpbkFwaSB7XG4gIGNvbnN0cnVjdG9yKGtpYmFuYSwgcGx1Z2luUGF0aCkge1xuICAgIHRoaXMuY29uZmlnID0ga2liYW5hLmNvbmZpZztcbiAgICB0aGlzLnJvb3REaXIgPSBraWJhbmEucm9vdERpcjtcbiAgICB0aGlzLnBhY2thZ2UgPSByZXF1aXJlKGpvaW4ocGx1Z2luUGF0aCwgJ3BhY2thZ2UuanNvbicpKTtcbiAgICB0aGlzLlBsdWdpbiA9IFBsdWdpbi5zY29wZWQoa2liYW5hLCBwbHVnaW5QYXRoLCB0aGlzLnBhY2thZ2UpO1xuICB9XG5cbiAgZ2V0IHVpRXhwb3J0cygpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3BsdWdpbi51aUV4cG9ydHMgaXMgbm90IGRlZmluZWQgdW50aWwgaW5pdGlhbGl6ZSBwaGFzZScpO1xuICB9XG5cbiAgZ2V0IGF1dG9sb2FkKCkge1xuICAgIGNvbnNvbGUud2FybihcbiAgICAgIGAke3RoaXMucGFja2FnZS5pZH0gYWNjZXNzZWQgdGhlIGF1dG9sb2FkIGxpc3RzIHdoaWNoIGFyZSBubyBsb25nZXIgYXZhaWxhYmxlIHZpYSB0aGUgUGx1Z2luIEFQSS5gICtcbiAgICAgICdVc2UgdGhlIGB1aS9hdXRvbG9hZC8qYCBtb2R1bGVzIGluc3RlYWQuJ1xuICAgICk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgZGlyZWN0aXZlczogW10sXG4gICAgICBmaWx0ZXJzOiBbXSxcbiAgICAgIHN0eWxlczogW10sXG4gICAgICBtb2R1bGVzOiBbXSxcbiAgICAgIHJlcXVpcmU6IFtdXG4gICAgfTtcbiAgfVxufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/server/plugins/plugin_api.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;sBAAc,QAAQ;;;;sBACH,UAAU;;;;oBACE,MAAM;;AAErC,MAAM,CAAC,OAAO;AACD,WADU,SAAS,CAClB,MAAM,EAAE,UAAU,EAAE;0BADX,SAAS;;AAE5B,QAAI,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC;AAC5B,QAAI,CAAC,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC;AAC9B,QAAI,WAAQ,GAAG,OAAO,CAAC,gBAAK,UAAU,EAAE,cAAc,CAAC,CAAC,CAAC;AACzD,QAAI,CAAC,MAAM,GAAG,oBAAO,MAAM,CAAC,MAAM,EAAE,UAAU,EAAE,IAAI,WAAQ,CAAC,CAAC;GAC/D;;eANoB,SAAS;;SAQjB,eAAG;AACd,YAAM,IAAI,KAAK,CAAC,wDAAwD,CAAC,CAAC;KAC3E;;;SAEW,eAAG;AACb,aAAO,CAAC,IAAI,CACV,AAAG,IAAI,WAAQ,CAAC,EAAE,sFAClB,0CAA0C,CAC3C,CAAC;;AAEF,aAAO;AACL,kBAAU,EAAE,EAAE;AACd,eAAO,EAAE,EAAE;AACX,cAAM,EAAE,EAAE;AACV,eAAO,EAAE,EAAE;AACX,eAAO,EAAE,EAAE;OACZ,CAAC;KACH;;;SAzBoB,SAAS;IA0B/B,CAAC",
      "file": "/home/vio/kibana/src/server/plugins/plugin_api.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport Plugin from './plugin';\nimport { basename, join } from 'path';\n\nmodule.exports = class PluginApi {\n  constructor(kibana, pluginPath) {\n    this.config = kibana.config;\n    this.rootDir = kibana.rootDir;\n    this.package = require(join(pluginPath, 'package.json'));\n    this.Plugin = Plugin.scoped(kibana, pluginPath, this.package);\n  }\n\n  get uiExports() {\n    throw new Error('plugin.uiExports is not defined until initialize phase');\n  }\n\n  get autoload() {\n    console.warn(\n      `${this.package.id} accessed the autoload lists which are no longer available via the Plugin API.` +\n      'Use the `ui/autoload/*` modules instead.'\n    );\n\n    return {\n      directives: [],\n      filters: [],\n      styles: [],\n      modules: [],\n      require: []\n    };\n  }\n};\n"
      ]
    },
    "mtime": 1467036622849
  },
  "{\"filename\":\"/home/vio/kibana/src/server/plugins/plugin.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "lodash/internal/toPath",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "toPath"
              }
            ]
          },
          {
            "source": "joi",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Joi"
              }
            ]
          },
          {
            "source": "bluebird",
            "imported": [
              "default",
              "attempt",
              "fromNode"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Bluebird"
              },
              {
                "kind": "named",
                "imported": "attempt",
                "local": "attempt"
              },
              {
                "kind": "named",
                "imported": "fromNode",
                "local": "fromNode"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "basename",
              "resolve"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "basename",
                "local": "basename"
              },
              {
                "kind": "named",
                "imported": "resolve",
                "local": "resolve"
              }
            ]
          },
          {
            "source": "util",
            "imported": [
              "inherits"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "inherits",
                "local": "inherits"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "async-to-generator",
        "get",
        "inherits",
        "to-consumable-array",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i]; return arr2; } else { return Array.from(arr); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _lodashInternalToPath = require('lodash/internal/toPath');\n\nvar _lodashInternalToPath2 = _interopRequireDefault(_lodashInternalToPath);\n\nvar _joi = require('joi');\n\nvar _joi2 = _interopRequireDefault(_joi);\n\nvar _bluebird = require('bluebird');\n\nvar _bluebird2 = _interopRequireDefault(_bluebird);\n\nvar _path = require('path');\n\nvar _util = require('util');\n\nvar extendInitFns = Symbol('extend plugin initialization');\n\nvar defaultConfigSchema = _joi2['default'].object({\n  enabled: _joi2['default'].boolean()['default'](true)\n})['default']();\n\n/**\n * The server plugin class, used to extend the server\n * and add custom behavior. A \"scoped\" plugin class is\n * created by the PluginApi class and provided to plugin\n * providers that automatically binds all but the `opts`\n * arguments.\n *\n * @class Plugin\n * @param {KbnServer} kbnServer - the KbnServer this plugin\n *                              belongs to.\n * @param {String} path - the path from which the plugin hails\n * @param {Object} pkg - the value of package.json for the plugin\n * @param {Objects} opts - the options for this plugin\n * @param {String} [opts.id=pkg.name] - the id for this plugin.\n * @param {Object} [opts.uiExports] - a mapping of UiExport types\n *                                  to UI modules or metadata about\n *                                  the UI module\n * @param {Array} [opts.require] - the other plugins that this plugin\n *                               requires. These plugins must exist and\n *                               be enabled for this plugin to function.\n *                               The require'd plugins will also be\n *                               initialized first, in order to make sure\n *                               that dependencies provided by these plugins\n *                               are available\n * @param {String} [opts.version=pkg.version] - the version of this plugin\n * @param {Function} [opts.init] - A function that will be called to initialize\n *                               this plugin at the appropriate time.\n * @param {Function} [opts.configPrefix=this.id] - The prefix to use for configuration\n *                               values in the main configuration service\n * @param {Function} [opts.config] - A function that produces a configuration\n *                                 schema using Joi, which is passed as its\n *                                 first argument.\n * @param {String|False} [opts.publicDir=path + '/public']\n *    - the public directory for this plugin. The final directory must\n *    have the name \"public\", though it can be located somewhere besides\n *    the root of the plugin. Set this to false to disable exposure of a\n *    public directory\n */\nmodule.exports = (function () {\n  function Plugin(kbnServer, path, pkg, opts) {\n    _classCallCheck(this, Plugin);\n\n    this.kbnServer = kbnServer;\n    this.pkg = pkg;\n    this.path = path;\n\n    this.id = opts.id || pkg.name;\n    this.uiExportsSpecs = opts.uiExports || {};\n    this.requiredIds = opts.require || [];\n    this.version = opts.version || pkg.version;\n    this.externalPreInit = opts.preInit || _lodash2['default'].noop;\n    this.externalInit = opts.init || _lodash2['default'].noop;\n    this.configPrefix = opts.configPrefix || this.id;\n    this.getConfigSchema = opts.config || _lodash2['default'].noop;\n    this.preInit = _lodash2['default'].once(this.preInit);\n    this.init = _lodash2['default'].once(this.init);\n    this[extendInitFns] = [];\n\n    if (opts.publicDir === false) {\n      this.publicDir = null;\n    } else if (!opts.publicDir) {\n      this.publicDir = (0, _path.resolve)(this.path, 'public');\n    } else {\n      this.publicDir = opts.publicDir;\n      if ((0, _path.basename)(this.publicDir) !== 'public') {\n        throw new Error('publicDir for plugin ' + this.id + ' must end with a \"public\" directory.');\n      }\n    }\n  }\n\n  _createClass(Plugin, [{\n    key: 'readConfig',\n    value: _asyncToGenerator(function* () {\n      var schema = yield this.getConfigSchema(_joi2['default']);\n      var config = this.kbnServer.config;\n\n      config.extendSchema(this.configPrefix, schema || defaultConfigSchema);\n\n      if (config.get([].concat(_toConsumableArray((0, _lodashInternalToPath2['default'])(this.configPrefix)), ['enabled']))) {\n        return true;\n      } else {\n        config.removeSchema(this.configPrefix);\n        return false;\n      }\n    })\n  }, {\n    key: 'preInit',\n    value: _asyncToGenerator(function* () {\n      return yield this.externalPreInit(this.kbnServer.server);\n    })\n  }, {\n    key: 'init',\n    value: _asyncToGenerator(function* () {\n      var _this = this;\n\n      var id = this.id;\n      var version = this.version;\n      var kbnServer = this.kbnServer;\n      var configPrefix = this.configPrefix;\n      var config = kbnServer.config;\n\n      // setup the hapi register function and get on with it\n      var asyncRegister = _asyncToGenerator(function* (server, options) {\n        _this.server = server;\n\n        yield Promise.all(_this[extendInitFns].map(_asyncToGenerator(function* (fn) {\n          yield fn.call(_this, server, options);\n        })));\n\n        server.log(['plugins', 'debug'], {\n          tmpl: 'Initializing plugin <%= plugin.toString() %>',\n          plugin: _this\n        });\n\n        if (_this.publicDir) {\n          server.exposeStaticDir('/plugins/' + id + '/{path*}', _this.publicDir);\n        }\n\n        _this.status = kbnServer.status.createForPlugin(_this);\n        server.expose('status', _this.status);\n\n        return yield (0, _bluebird.attempt)(_this.externalInit, [server, options], _this);\n      });\n\n      var register = function register(server, options, next) {\n        _bluebird2['default'].resolve(asyncRegister(server, options)).nodeify(next);\n      };\n\n      register.attributes = { name: id, version: version };\n\n      yield (0, _bluebird.fromNode)(function (cb) {\n        kbnServer.server.register({\n          register: register,\n          options: config.has(configPrefix) ? config.get(configPrefix) : null\n        }, cb);\n      });\n\n      // Only change the plugin status to green if the\n      // intial status has not been changed\n      if (this.status.state === 'uninitialized') {\n        this.status.green('Ready');\n      }\n    })\n  }, {\n    key: 'extendInit',\n    value: function extendInit(fn) {\n      this[extendInitFns].push(fn);\n    }\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      return this.pkg;\n    }\n  }, {\n    key: 'toString',\n    value: function toString() {\n      return this.id + '@' + this.version;\n    }\n  }], [{\n    key: 'scoped',\n    value: function scoped(kbnServer, path, pkg) {\n      return (function (_Plugin) {\n        _inherits(ScopedPlugin, _Plugin);\n\n        function ScopedPlugin(opts) {\n          _classCallCheck(this, ScopedPlugin);\n\n          _get(Object.getPrototypeOf(ScopedPlugin.prototype), 'constructor', this).call(this, kbnServer, path, pkg, opts || {});\n        }\n\n        return ScopedPlugin;\n      })(Plugin);\n    }\n  }]);\n\n  return Plugin;\n})();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3NlcnZlci9wbHVnaW5zL3BsdWdpbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O3NCQUFjLFFBQVE7Ozs7b0NBQ0gsd0JBQXdCOzs7O21CQUMzQixLQUFLOzs7O3dCQUN1QixVQUFVOzs7O29CQUNwQixNQUFNOztvQkFDZixNQUFNOztBQUUvQixJQUFNLGFBQWEsR0FBRyxNQUFNLENBQUMsOEJBQThCLENBQUMsQ0FBQzs7QUFFN0QsSUFBTSxtQkFBbUIsR0FBRyxpQkFBSSxNQUFNLENBQUM7QUFDckMsU0FBTyxFQUFFLGlCQUFJLE9BQU8sRUFBRSxXQUFRLENBQUMsSUFBSSxDQUFDO0NBQ3JDLENBQUMsV0FBUSxFQUFFLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUF3Q2IsTUFBTSxDQUFDLE9BQU87QUFDRCxXQURVLE1BQU0sQ0FDZixTQUFTLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUU7MEJBRG5CLE1BQU07O0FBRXpCLFFBQUksQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO0FBQzNCLFFBQUksQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDO0FBQ2YsUUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7O0FBRWpCLFFBQUksQ0FBQyxFQUFFLEdBQUcsSUFBSSxDQUFDLEVBQUUsSUFBSSxHQUFHLENBQUMsSUFBSSxDQUFDO0FBQzlCLFFBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDLFNBQVMsSUFBSSxFQUFFLENBQUM7QUFDM0MsUUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsT0FBTyxJQUFJLEVBQUUsQ0FBQztBQUN0QyxRQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxPQUFPLElBQUksR0FBRyxDQUFDLE9BQU8sQ0FBQztBQUMzQyxRQUFJLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQyxPQUFPLElBQUksb0JBQUUs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QUFDUCxhQUFPLElBQUksQ0FBQyxHQUFHLENBQUM7S0FDakI7OztXQUVPLG9CQUFHO0FBQ1QsYUFBVSxJQUFJLENBQUMsRUFBRSxTQUFJLElBQUksQ0FBQyxPQUFPLENBQUc7S0FDckM7OztXQWxGWSxnQkFBQyxTQUFTLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRTtBQUNsQztrQkFBYSxZQUFZOztBQUNaLGlCQURBLFlBQVksQ0FDWCxJQUFJLEVBQUU7Z0NBRFAsWUFBWTs7QUFFckIscUNBRlMsWUFBWSw2Q0FFZixTQUFTLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRSxJQUFJLElBQUksRUFBRSxFQUFFO1NBQ3pDOztlQUhVLFlBQVk7U0FBUyxNQUFNLEVBSXRDO0tBQ0g7OztTQXRDb0IsTUFBTTtJQW1INUIsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8va2liYW5hL3NyYy9zZXJ2ZXIvcGx1Z2lucy9wbHVnaW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHRvUGF0aCBmcm9tICdsb2Rhc2gvaW50ZXJuYWwvdG9QYXRoJztcbmltcG9ydCBKb2kgZnJvbSAnam9pJztcbmltcG9ydCBCbHVlYmlyZCwgeyBhdHRlbXB0LCBmcm9tTm9kZSB9IGZyb20gJ2JsdWViaXJkJztcbmltcG9ydCB7IGJhc2VuYW1lLCByZXNvbHZlIH0gZnJvbSAncGF0aCc7XG5pbXBvcnQgeyBpbmhlcml0cyB9IGZyb20gJ3V0aWwnO1xuXG5jb25zdCBleHRlbmRJbml0Rm5zID0gU3ltYm9sKCdleHRlbmQgcGx1Z2luIGluaXRpYWxpemF0aW9uJyk7XG5cbmNvbnN0IGRlZmF1bHRDb25maWdTY2hlbWEgPSBKb2kub2JqZWN0KHtcbiAgZW5hYmxlZDogSm9pLmJvb2xlYW4oKS5kZWZhdWx0KHRydWUpXG59KS5kZWZhdWx0KCk7XG5cbi8qKlxuICogVGhlIHNlcnZlciBwbHVnaW4gY2xhc3MsIHVzZWQgdG8gZXh0ZW5kIHRoZSBzZXJ2ZXJcbiAqIGFuZCBhZGQgY3VzdG9tIGJlaGF2aW9yLiBBIFwic2NvcGVkXCIgcGx1Z2luIGNsYXNzIGlzXG4gKiBjcmVhdGVkIGJ5IHRoZSBQbHVnaW5BcGkgY2xhc3MgYW5kIHByb3ZpZGVkIHRvIHBsdWdpblxuICogcHJvdmlkZXJzIHRoYXQgYXV0b21hdGljYWxseSBiaW5kcyBhbGwgYnV0IHRoZSBgb3B0c2BcbiAqIGFyZ3VtZW50cy5cbiAqXG4gKiBAY2xhc3MgUGx1Z2luXG4gKiBAcGFyYW0ge0tiblNlcnZlcn0ga2JuU2VydmVyIC0gdGhlIEtiblNlcnZlciB0aGlzIHBsdWdpblxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWxvbmdzIHRvLlxuICogQHBhcmFtIHtTdHJpbmd9IHBhdGggLSB0aGUgcGF0aCBmcm9tIHdoaWNoIHRoZSBwbHVnaW4gaGFpbHNcbiAqIEBwYXJhbSB7T2JqZWN0fSBwa2cgLSB0aGUgdmFsdWUgb2YgcGFja2FnZS5qc29uIGZvciB0aGUgcGx1Z2luXG4gKiBAcGFyYW0ge09iamVjdHN9IG9wdHMgLSB0aGUgb3B0aW9ucyBmb3IgdGhpcyBwbHVnaW5cbiAqIEBwYXJhbSB7U3RyaW5nfSBbb3B0cy5pZD1wa2cubmFtZV0gLSB0aGUgaWQgZm9yIHRoaXMgcGx1Z2luLlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRzLnVpRXhwb3J0c10gLSBhIG1hcHBpbmcgb2YgVWlFeHBvcnQgdHlwZXNcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIFVJIG1vZHVsZXMgb3IgbWV0YWRhdGEgYWJvdXRcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZSBVSSBtb2R1bGVcbiAqIEBwYXJhbSB7QXJyYXl9IFtvcHRzLnJlcXVpcmVdIC0gdGhlIG90aGVyIHBsdWdpbnMgdGhhdCB0aGlzIHBsdWdpblxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZXMuIFRoZXNlIHBsdWdpbnMgbXVzdCBleGlzdCBhbmRcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlIGVuYWJsZWQgZm9yIHRoaXMgcGx1Z2luIHRvIGZ1bmN0aW9uLlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGhlIHJlcXVpcmUnZCBwbHVnaW5zIHdpbGwgYWxzbyBiZVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbGl6ZWQgZmlyc3QsIGluIG9yZGVyIHRvIG1ha2Ugc3VyZVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdCBkZXBlbmRlbmNpZXMgcHJvdmlkZWQgYnkgdGhlc2UgcGx1Z2luc1xuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJlIGF2YWlsYWJsZVxuICogQHBhcmFtIHtTdHJpbmd9IFtvcHRzLnZlcnNpb249cGtnLnZlcnNpb25dIC0gdGhlIHZlcnNpb24gb2YgdGhpcyBwbHVnaW5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRzLmluaXRdIC0gQSBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgY2FsbGVkIHRvIGluaXRpYWxpemVcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMgcGx1Z2luIGF0IHRoZSBhcHByb3ByaWF0ZSB0aW1lLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdHMuY29uZmlnUHJlZml4PXRoaXMuaWRdIC0gVGhlIHByZWZpeCB0byB1c2UgZm9yIGNvbmZpZ3VyYXRpb25cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlcyBpbiB0aGUgbWFpbiBjb25maWd1cmF0aW9uIHNlcnZpY2VcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRzLmNvbmZpZ10gLSBBIGZ1bmN0aW9uIHRoYXQgcHJvZHVjZXMgYSBjb25maWd1cmF0aW9uXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjaGVtYSB1c2luZyBKb2ksIHdoaWNoIGlzIHBhc3NlZCBhcyBpdHNcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3QgYXJndW1lbnQuXG4gKiBAcGFyYW0ge1N0cmluZ3xGYWxzZX0gW29wdHMucHVibGljRGlyPXBhdGggKyAnL3B1YmxpYyddXG4gKiAgICAtIHRoZSBwdWJsaWMgZGlyZWN0b3J5IGZvciB0aGlzIHBsdWdpbi4gVGhlIGZpbmFsIGRpcmVjdG9yeSBtdXN0XG4gKiAgICBoYXZlIHRoZSBuYW1lIFwicHVibGljXCIsIHRob3VnaCBpdCBjYW4gYmUgbG9jYXRlZCBzb21ld2hlcmUgYmVzaWRlc1xuICogICAgdGhlIHJvb3Qgb2YgdGhlIHBsdWdpbi4gU2V0IHRoaXMgdG8gZmFsc2UgdG8gZGlzYWJsZSBleHBvc3VyZSBvZiBhXG4gKiAgICBwdWJsaWMgZGlyZWN0b3J5XG4gKi9cbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgUGx1Z2luIHtcbiAgY29uc3RydWN0b3Ioa2JuU2VydmVyLCBwYXRoLCBwa2csIG9wdHMpIHtcbiAgICB0aGlzLmtiblNlcnZlciA9IGtiblNlcnZlcjtcbiAgICB0aGlzLnBrZyA9IHBrZztcbiAgICB0aGlzLnBhdGggPSBwYXRoO1xuXG4gICAgdGhpcy5pZCA9IG9wdHMuaWQgfHwgcGtnLm5hbWU7XG4gICAgdGhpcy51aUV4cG9ydHNTcGVjcyA9IG9wdHMudWlFeHBvcnRzIHx8IHt9O1xuICAgIHRoaXMucmVxdWlyZWRJZHMgPSBvcHRzLnJlcXVpcmUgfHwgW107XG4gICAgdGhpcy52ZXJzaW9uID0gb3B0cy52ZXJzaW9uIHx8IHBrZy52ZXJzaW9uO1xuICAgIHRoaXMuZXh0ZXJuYWxQcmVJbml0ID0gb3B0cy5wcmVJbml0IHx8IF8ubm9vcDtcbiAgICB0aGlzLmV4dGVybmFsSW5pdCA9IG9wdHMuaW5pdCB8fCBfLm5vb3A7XG4gICAgdGhpcy5jb25maWdQcmVmaXggPSBvcHRzLmNvbmZpZ1ByZWZpeCB8fCB0aGlzLmlkO1xuICAgIHRoaXMuZ2V0Q29uZmlnU2NoZW1hID0gb3B0cy5jb25maWcgfHwgXy5ub29wO1xuICAgIHRoaXMucHJlSW5pdCA9IF8ub25jZSh0aGlzLnByZUluaXQpO1xuICAgIHRoaXMuaW5pdCA9IF8ub25jZSh0aGlzLmluaXQpO1xuICAgIHRoaXNbZXh0ZW5kSW5pdEZuc10gPSBbXTtcblxuICAgIGlmIChvcHRzLnB1YmxpY0RpciA9PT0gZmFsc2UpIHtcbiAgICAgIHRoaXMucHVibGljRGlyID0gbnVsbDtcbiAgICB9XG4gICAgZWxzZSBpZiAoIW9wdHMucHVibGljRGlyKSB7XG4gICAgICB0aGlzLnB1YmxpY0RpciA9IHJlc29sdmUodGhpcy5wYXRoLCAncHVibGljJyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdGhpcy5wdWJsaWNEaXIgPSBvcHRzLnB1YmxpY0RpcjtcbiAgICAgIGlmIChiYXNlbmFtZSh0aGlzLnB1YmxpY0RpcikgIT09ICdwdWJsaWMnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgcHVibGljRGlyIGZvciBwbHVnaW4gJHt0aGlzLmlkfSBtdXN0IGVuZCB3aXRoIGEgXCJwdWJsaWNcIiBkaXJlY3RvcnkuYCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIHNjb3BlZChrYm5TZXJ2ZXIsIHBhdGgsIHBrZykge1xuICAgIHJldHVybiBjbGFzcyBTY29wZWRQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICAgICAgY29uc3RydWN0b3Iob3B0cykge1xuICAgICAgICBzdXBlcihrYm5TZXJ2ZXIsIHBhdGgsIHBrZywgb3B0cyB8fCB7fSk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIGFzeW5jIHJlYWRDb25maWcoKSB7XG4gICAgbGV0IHNjaGVtYSA9IGF3YWl0IHRoaXMuZ2V0Q29uZmlnU2NoZW1hKEpvaSk7XG4gICAgbGV0IHsgY29uZmlnIH0gPSB0aGlzLmtiblNlcnZlcjtcbiAgICBjb25maWcuZXh0ZW5kU2NoZW1hKHRoaXMuY29uZmlnUHJlZml4LCBzY2hlbWEgfHwgZGVmYXVsdENvbmZpZ1NjaGVtYSk7XG5cbiAgICBpZiAoY29uZmlnLmdldChbLi4udG9QYXRoKHRoaXMuY29uZmlnUHJlZml4KSwgJ2VuYWJsZWQnXSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25maWcucmVtb3ZlU2NoZW1hKHRoaXMuY29uZmlnUHJlZml4KTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBwcmVJbml0KCkge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLmV4dGVybmFsUHJlSW5pdCh0aGlzLmtiblNlcnZlci5zZXJ2ZXIpO1xuICB9XG5cbiAgYXN5bmMgaW5pdCgpIHtcbiAgICBsZXQgeyBpZCwgdmVyc2lvbiwga2JuU2VydmVyLCBjb25maWdQcmVmaXggfSA9IHRoaXM7XG4gICAgbGV0IHsgY29uZmlnIH0gPSBrYm5TZXJ2ZXI7XG5cbiAgICAvLyBzZXR1cCB0aGUgaGFwaSByZWdpc3RlciBmdW5jdGlvbiBhbmQgZ2V0IG9uIHdpdGggaXRcbiAgICBjb25zdCBhc3luY1JlZ2lzdGVyID0gYXN5bmMgKHNlcnZlciwgb3B0aW9ucykgPT4ge1xuICAgICAgdGhpcy5zZXJ2ZXIgPSBzZXJ2ZXI7XG5cbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXNbZXh0ZW5kSW5pdEZuc10ubWFwKGFzeW5jIGZuID0+IHtcbiAgICAgICAgYXdhaXQgZm4uY2FsbCh0aGlzLCBzZXJ2ZXIsIG9wdGlvbnMpO1xuICAgICAgfSkpO1xuXG4gICAgICBzZXJ2ZXIubG9nKFsncGx1Z2lucycsICdkZWJ1ZyddLCB7XG4gICAgICAgIHRtcGw6ICdJbml0aWFsaXppbmcgcGx1Z2luIDwlPSBwbHVnaW4udG9TdHJpbmcoKSAlPicsXG4gICAgICAgIHBsdWdpbjogdGhpc1xuICAgICAgfSk7XG5cbiAgICAgIGlmICh0aGlzLnB1YmxpY0Rpcikge1xuICAgICAgICBzZXJ2ZXIuZXhwb3NlU3RhdGljRGlyKGAvcGx1Z2lucy8ke2lkfS97cGF0aCp9YCwgdGhpcy5wdWJsaWNEaXIpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnN0YXR1cyA9IGtiblNlcnZlci5zdGF0dXMuY3JlYXRlRm9yUGx1Z2luKHRoaXMpO1xuICAgICAgc2VydmVyLmV4cG9zZSgnc3RhdHVzJywgdGhpcy5zdGF0dXMpO1xuXG4gICAgICByZXR1cm4gYXdhaXQgYXR0ZW1wdCh0aGlzLmV4dGVybmFsSW5pdCwgW3NlcnZlciwgb3B0aW9uc10sIHRoaXMpO1xuICAgIH07XG5cbiAgICBjb25zdCByZWdpc3RlciA9IChzZXJ2ZXIsIG9wdGlvbnMsIG5leHQpID0+IHtcbiAgICAgIEJsdWViaXJkLnJlc29sdmUoYXN5bmNSZWdpc3RlcihzZXJ2ZXIsIG9wdGlvbnMpKS5ub2RlaWZ5KG5leHQpO1xuICAgIH07XG5cbiAgICByZWdpc3Rlci5hdHRyaWJ1dGVzID0geyBuYW1lOiBpZCwgdmVyc2lvbjogdmVyc2lvbiB9O1xuXG4gICAgYXdhaXQgZnJvbU5vZGUoY2IgPT4ge1xuICAgICAga2JuU2VydmVyLnNlcnZlci5yZWdpc3Rlcih7XG4gICAgICAgIHJlZ2lzdGVyOiByZWdpc3RlcixcbiAgICAgICAgb3B0aW9uczogY29uZmlnLmhhcyhjb25maWdQcmVmaXgpID8gY29uZmlnLmdldChjb25maWdQcmVmaXgpIDogbnVsbFxuICAgICAgfSwgY2IpO1xuICAgIH0pO1xuXG4gICAgLy8gT25seSBjaGFuZ2UgdGhlIHBsdWdpbiBzdGF0dXMgdG8gZ3JlZW4gaWYgdGhlXG4gICAgLy8gaW50aWFsIHN0YXR1cyBoYXMgbm90IGJlZW4gY2hhbmdlZFxuICAgIGlmICh0aGlzLnN0YXR1cy5zdGF0ZSA9PT0gJ3VuaW5pdGlhbGl6ZWQnKSB7XG4gICAgICB0aGlzLnN0YXR1cy5ncmVlbignUmVhZHknKTtcbiAgICB9XG4gIH1cblxuICBleHRlbmRJbml0KGZuKSB7XG4gICAgdGhpc1tleHRlbmRJbml0Rm5zXS5wdXNoKGZuKTtcbiAgfVxuXG4gIHRvSlNPTigpIHtcbiAgICByZXR1cm4gdGhpcy5wa2c7XG4gIH1cblxuICB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gYCR7dGhpcy5pZH1AJHt0aGlzLnZlcnNpb259YDtcbiAgfVxufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/server/plugins/plugin.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/kibana/src/server/plugins/plugin.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport toPath from 'lodash/internal/toPath';\nimport Joi from 'joi';\nimport Bluebird, { attempt, fromNode } from 'bluebird';\nimport { basename, resolve } from 'path';\nimport { inherits } from 'util';\n\nconst extendInitFns = Symbol('extend plugin initialization');\n\nconst defaultConfigSchema = Joi.object({\n  enabled: Joi.boolean().default(true)\n}).default();\n\n/**\n * The server plugin class, used to extend the server\n * and add custom behavior. A \"scoped\" plugin class is\n * created by the PluginApi class and provided to plugin\n * providers that automatically binds all but the `opts`\n * arguments.\n *\n * @class Plugin\n * @param {KbnServer} kbnServer - the KbnServer this plugin\n *                              belongs to.\n * @param {String} path - the path from which the plugin hails\n * @param {Object} pkg - the value of package.json for the plugin\n * @param {Objects} opts - the options for this plugin\n * @param {String} [opts.id=pkg.name] - the id for this plugin.\n * @param {Object} [opts.uiExports] - a mapping of UiExport types\n *                                  to UI modules or metadata about\n *                                  the UI module\n * @param {Array} [opts.require] - the other plugins that this plugin\n *                               requires. These plugins must exist and\n *                               be enabled for this plugin to function.\n *                               The require'd plugins will also be\n *                               initialized first, in order to make sure\n *                               that dependencies provided by these plugins\n *                               are available\n * @param {String} [opts.version=pkg.version] - the version of this plugin\n * @param {Function} [opts.init] - A function that will be called to initialize\n *                               this plugin at the appropriate time.\n * @param {Function} [opts.configPrefix=this.id] - The prefix to use for configuration\n *                               values in the main configuration service\n * @param {Function} [opts.config] - A function that produces a configuration\n *                                 schema using Joi, which is passed as its\n *                                 first argument.\n * @param {String|False} [opts.publicDir=path + '/public']\n *    - the public directory for this plugin. The final directory must\n *    have the name \"public\", though it can be located somewhere besides\n *    the root of the plugin. Set this to false to disable exposure of a\n *    public directory\n */\nmodule.exports = class Plugin {\n  constructor(kbnServer, path, pkg, opts) {\n    this.kbnServer = kbnServer;\n    this.pkg = pkg;\n    this.path = path;\n\n    this.id = opts.id || pkg.name;\n    this.uiExportsSpecs = opts.uiExports || {};\n    this.requiredIds = opts.require || [];\n    this.version = opts.version || pkg.version;\n    this.externalPreInit = opts.preInit || _.noop;\n    this.externalInit = opts.init || _.noop;\n    this.configPrefix = opts.configPrefix || this.id;\n    this.getConfigSchema = opts.config || _.noop;\n    this.preInit = _.once(this.preInit);\n    this.init = _.once(this.init);\n    this[extendInitFns] = [];\n\n    if (opts.publicDir === false) {\n      this.publicDir = null;\n    }\n    else if (!opts.publicDir) {\n      this.publicDir = resolve(this.path, 'public');\n    }\n    else {\n      this.publicDir = opts.publicDir;\n      if (basename(this.publicDir) !== 'public') {\n        throw new Error(`publicDir for plugin ${this.id} must end with a \"public\" directory.`);\n      }\n    }\n  }\n\n  static scoped(kbnServer, path, pkg) {\n    return class ScopedPlugin extends Plugin {\n      constructor(opts) {\n        super(kbnServer, path, pkg, opts || {});\n      }\n    };\n  }\n\n  async readConfig() {\n    let schema = await this.getConfigSchema(Joi);\n    let { config } = this.kbnServer;\n    config.extendSchema(this.configPrefix, schema || defaultConfigSchema);\n\n    if (config.get([...toPath(this.configPrefix), 'enabled'])) {\n      return true;\n    } else {\n      config.removeSchema(this.configPrefix);\n      return false;\n    }\n  }\n\n  async preInit() {\n    return await this.externalPreInit(this.kbnServer.server);\n  }\n\n  async init() {\n    let { id, version, kbnServer, configPrefix } = this;\n    let { config } = kbnServer;\n\n    // setup the hapi register function and get on with it\n    const asyncRegister = async (server, options) => {\n      this.server = server;\n\n      await Promise.all(this[extendInitFns].map(async fn => {\n        await fn.call(this, server, options);\n      }));\n\n      server.log(['plugins', 'debug'], {\n        tmpl: 'Initializing plugin <%= plugin.toString() %>',\n        plugin: this\n      });\n\n      if (this.publicDir) {\n        server.exposeStaticDir(`/plugins/${id}/{path*}`, this.publicDir);\n      }\n\n      this.status = kbnServer.status.createForPlugin(this);\n      server.expose('status', this.status);\n\n      return await attempt(this.externalInit, [server, options], this);\n    };\n\n    const register = (server, options, next) => {\n      Bluebird.resolve(asyncRegister(server, options)).nodeify(next);\n    };\n\n    register.attributes = { name: id, version: version };\n\n    await fromNode(cb => {\n      kbnServer.server.register({\n        register: register,\n        options: config.has(configPrefix) ? config.get(configPrefix) : null\n      }, cb);\n    });\n\n    // Only change the plugin status to green if the\n    // intial status has not been changed\n    if (this.status.state === 'uninitialized') {\n      this.status.green('Ready');\n    }\n  }\n\n  extendInit(fn) {\n    this[extendInitFns].push(fn);\n  }\n\n  toJSON() {\n    return this.pkg;\n  }\n\n  toString() {\n    return `${this.id}@${this.version}`;\n  }\n};\n"
      ]
    },
    "mtime": 1467036622849
  },
  "{\"filename\":\"/home/vio/kibana/src/utils/collection.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "to-consumable-array"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i]; return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar set = Symbol('internal set');\n\nmodule.exports = (function () {\n  function Collection() {\n    _classCallCheck(this, Collection);\n\n    // Set's have a length of 0, mimic that\n    this[set] = new Set(arguments[0] || []);\n  }\n\n  /******\n   ** Collection API\n   ******/\n\n  _createClass(Collection, [{\n    key: 'toArray',\n    value: function toArray() {\n      return [].concat(_toConsumableArray(this.values()));\n    }\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      return this.toArray();\n    }\n\n    /******\n     ** ES Set Api\n     ******/\n\n  }, {\n    key: 'add',\n    value: function add(value) {\n      return this[set].add(value);\n    }\n  }, {\n    key: 'clear',\n    value: function clear() {\n      return this[set].clear();\n    }\n  }, {\n    key: 'delete',\n    value: function _delete(value) {\n      return this[set]['delete'](value);\n    }\n  }, {\n    key: 'entries',\n    value: function entries() {\n      return this[set].entries();\n    }\n  }, {\n    key: 'forEach',\n    value: function forEach(callbackFn, thisArg) {\n      return this[set].forEach(callbackFn, thisArg);\n    }\n  }, {\n    key: 'has',\n    value: function has(value) {\n      return this[set].has(value);\n    }\n  }, {\n    key: 'keys',\n    value: function keys() {\n      return this[set].keys();\n    }\n  }, {\n    key: 'values',\n    value: function values() {\n      return this[set].values();\n    }\n  }, {\n    key: Symbol.iterator,\n    value: function value() {\n      return this[set][Symbol.iterator]();\n    }\n  }, {\n    key: 'size',\n    get: function get() {\n      return this[set].size;\n    }\n  }], [{\n    key: Symbol.species,\n    get: function get() {\n      return Collection;\n    }\n  }]);\n\n  return Collection;\n})();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3V0aWxzL2NvbGxlY3Rpb24uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFDQSxJQUFJLEdBQUcsR0FBRyxNQUFNLENBQUMsY0FBYyxDQUFDLENBQUM7O0FBRWpDLE1BQU0sQ0FBQyxPQUFPO0FBQ0QsV0FEVSxVQUFVLEdBQ2pCOzBCQURPLFVBQVU7OztBQUU3QixRQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDO0dBQ3pDOzs7Ozs7ZUFIb0IsVUFBVTs7V0FTeEIsbUJBQUc7QUFDUiwwQ0FBVyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUU7S0FDM0I7OztXQUVLLGtCQUFHO0FBQ1AsYUFBTyxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7S0FDdkI7Ozs7Ozs7O1dBY0UsYUFBQyxLQUFLLEVBQUU7QUFDVCxhQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7S0FDN0I7OztXQUVJLGlCQUFHO0FBQ04sYUFBTyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUM7S0FDMUI7OztXQUVLLGlCQUFDLEtBQUssRUFBRTtBQUNaLGFBQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxVQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7S0FDaEM7OztXQUVNLG1CQUFHO0FBQ1IsYUFBTyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUM7S0FDNUI7OztXQUVNLGlCQUFDLFVBQVUsRUFBRSxPQUFPLEVBQUU7QUFDM0IsYUFBTyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLFVBQVUsRUFBRSxPQUFPLENBQUMsQ0FBQztLQUMvQzs7O1dBRUUsYUFBQyxLQUFLLEVBQUU7QUFDVCxhQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7S0FDN0I7OztXQUVHLGdCQUFHO0FBQ0wsYUFBTyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7S0FDekI7OztXQUVLLGtCQUFHO0FBQ1AsYUFBTyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUM7S0FDM0I7O1NBRUEsTUFBTSxDQUFDLFFBQVE7V0FBQyxpQkFBRztBQUNsQixhQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQztLQUNyQzs7O1NBdENPLGVBQUc7QUFDVCxhQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUM7S0FDdkI7O1NBTlcsTUFBTSxDQUFDLE9BQU87U0FBQyxlQUFHO0FBQzVCLGFBQU8sVUFBVSxDQUFDO0tBQ25COzs7U0F2Qm9CLFVBQVU7SUFnRWhDLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL2tpYmFuYS9zcmMvdXRpbHMvY29sbGVjdGlvbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxubGV0IHNldCA9IFN5bWJvbCgnaW50ZXJuYWwgc2V0Jyk7XG5cbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgQ29sbGVjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKCkgeyAvLyBTZXQncyBoYXZlIGEgbGVuZ3RoIG9mIDAsIG1pbWljIHRoYXRcbiAgICB0aGlzW3NldF0gPSBuZXcgU2V0KGFyZ3VtZW50c1swXSB8fCBbXSk7XG4gIH1cblxuICAvKioqKioqXG4gICAqKiBDb2xsZWN0aW9uIEFQSVxuICAgKioqKioqL1xuXG4gIHRvQXJyYXkoKSB7XG4gICAgcmV0dXJuIFsuLi50aGlzLnZhbHVlcygpXTtcbiAgfVxuXG4gIHRvSlNPTigpIHtcbiAgICByZXR1cm4gdGhpcy50b0FycmF5KCk7XG4gIH1cblxuICAvKioqKioqXG4gICAqKiBFUyBTZXQgQXBpXG4gICAqKioqKiovXG5cbiAgc3RhdGljIGdldCBbU3ltYm9sLnNwZWNpZXNdKCkge1xuICAgIHJldHVybiBDb2xsZWN0aW9uO1xuICB9XG5cbiAgZ2V0IHNpemUoKSB7XG4gICAgcmV0dXJuIHRoaXNbc2V0XS5zaXplO1xuICB9XG5cbiAgYWRkKHZhbHVlKSB7XG4gICAgcmV0dXJuIHRoaXNbc2V0XS5hZGQodmFsdWUpO1xuICB9XG5cbiAgY2xlYXIoKSB7XG4gICAgcmV0dXJuIHRoaXNbc2V0XS5jbGVhcigpO1xuICB9XG5cbiAgZGVsZXRlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHRoaXNbc2V0XS5kZWxldGUodmFsdWUpO1xuICB9XG5cbiAgZW50cmllcygpIHtcbiAgICByZXR1cm4gdGhpc1tzZXRdLmVudHJpZXMoKTtcbiAgfVxuXG4gIGZvckVhY2goY2FsbGJhY2tGbiwgdGhpc0FyZykge1xuICAgIHJldHVybiB0aGlzW3NldF0uZm9yRWFjaChjYWxsYmFja0ZuLCB0aGlzQXJnKTtcbiAgfVxuXG4gIGhhcyh2YWx1ZSkge1xuICAgIHJldHVybiB0aGlzW3NldF0uaGFzKHZhbHVlKTtcbiAgfVxuXG4gIGtleXMoKSB7XG4gICAgcmV0dXJuIHRoaXNbc2V0XS5rZXlzKCk7XG4gIH1cblxuICB2YWx1ZXMoKSB7XG4gICAgcmV0dXJuIHRoaXNbc2V0XS52YWx1ZXMoKTtcbiAgfVxuXG4gIFtTeW1ib2wuaXRlcmF0b3JdKCkge1xuICAgIHJldHVybiB0aGlzW3NldF1bU3ltYm9sLml0ZXJhdG9yXSgpO1xuICB9XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/utils/collection.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;AACA,IAAI,GAAG,GAAG,MAAM,CAAC,cAAc,CAAC,CAAC;;AAEjC,MAAM,CAAC,OAAO;AACD,WADU,UAAU,GACjB;0BADO,UAAU;;;AAE7B,QAAI,CAAC,GAAG,CAAC,GAAG,IAAI,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC;GACzC;;;;;;eAHoB,UAAU;;WASxB,mBAAG;AACR,0CAAW,IAAI,CAAC,MAAM,EAAE,GAAE;KAC3B;;;WAEK,kBAAG;AACP,aAAO,IAAI,CAAC,OAAO,EAAE,CAAC;KACvB;;;;;;;;WAcE,aAAC,KAAK,EAAE;AACT,aAAO,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;KAC7B;;;WAEI,iBAAG;AACN,aAAO,IAAI,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,CAAC;KAC1B;;;WAEK,iBAAC,KAAK,EAAE;AACZ,aAAO,IAAI,CAAC,GAAG,CAAC,UAAO,CAAC,KAAK,CAAC,CAAC;KAChC;;;WAEM,mBAAG;AACR,aAAO,IAAI,CAAC,GAAG,CAAC,CAAC,OAAO,EAAE,CAAC;KAC5B;;;WAEM,iBAAC,UAAU,EAAE,OAAO,EAAE;AAC3B,aAAO,IAAI,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC;KAC/C;;;WAEE,aAAC,KAAK,EAAE;AACT,aAAO,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;KAC7B;;;WAEG,gBAAG;AACL,aAAO,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC;KACzB;;;WAEK,kBAAG;AACP,aAAO,IAAI,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC;KAC3B;;SAEA,MAAM,CAAC,QAAQ;WAAC,iBAAG;AAClB,aAAO,IAAI,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,CAAC;KACrC;;;SAtCO,eAAG;AACT,aAAO,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;KACvB;;SANW,MAAM,CAAC,OAAO;SAAC,eAAG;AAC5B,aAAO,UAAU,CAAC;KACnB;;;SAvBoB,UAAU;IAgEhC,CAAC",
      "file": "/home/vio/kibana/src/utils/collection.js",
      "sourcesContent": [
        "\nlet set = Symbol('internal set');\n\nmodule.exports = class Collection {\n  constructor() { // Set's have a length of 0, mimic that\n    this[set] = new Set(arguments[0] || []);\n  }\n\n  /******\n   ** Collection API\n   ******/\n\n  toArray() {\n    return [...this.values()];\n  }\n\n  toJSON() {\n    return this.toArray();\n  }\n\n  /******\n   ** ES Set Api\n   ******/\n\n  static get [Symbol.species]() {\n    return Collection;\n  }\n\n  get size() {\n    return this[set].size;\n  }\n\n  add(value) {\n    return this[set].add(value);\n  }\n\n  clear() {\n    return this[set].clear();\n  }\n\n  delete(value) {\n    return this[set].delete(value);\n  }\n\n  entries() {\n    return this[set].entries();\n  }\n\n  forEach(callbackFn, thisArg) {\n    return this[set].forEach(callbackFn, thisArg);\n  }\n\n  has(value) {\n    return this[set].has(value);\n  }\n\n  keys() {\n    return this[set].keys();\n  }\n\n  values() {\n    return this[set].values();\n  }\n\n  [Symbol.iterator]() {\n    return this[set][Symbol.iterator]();\n  }\n};\n"
      ]
    },
    "mtime": 1467036622893
  },
  "{\"filename\":\"/home/vio/kibana/src/server/config/complete.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "sliced-to-array"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }; })();\n\nexports['default'] = function (kbnServer, server, config) {\n\n  server.decorate('server', 'config', function () {\n    return kbnServer.config;\n  });\n\n  var tmpl = 'Settings for \"<%= key %>\" were not applied, check for spelling errors and ensure the plugin is loaded.';\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = config.getPendingSets()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var _step$value = _slicedToArray(_step.value, 2);\n\n      var key = _step$value[0];\n      var val = _step$value[1];\n\n      server.log(['warning', 'config'], { key: key, val: val, tmpl: tmpl });\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator['return']) {\n        _iterator['return']();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n};\n\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3NlcnZlci9jb25maWcvY29tcGxldGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7cUJBQWUsVUFBVSxTQUFTLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRTs7QUFFbEQsUUFBTSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEVBQUUsUUFBUSxFQUFFLFlBQVk7QUFDOUMsV0FBTyxTQUFTLENBQUMsTUFBTSxDQUFDO0dBQ3pCLENBQUMsQ0FBQzs7QUFFSCxNQUFJLElBQUksR0FBRyx3R0FBd0csQ0FBQzs7Ozs7O0FBQ3BILHlCQUF1QixNQUFNLENBQUMsY0FBYyxFQUFFLDhIQUFFOzs7VUFBdEMsR0FBRztVQUFFLEdBQUc7O0FBQ2hCLFlBQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxTQUFTLEVBQUUsUUFBUSxDQUFDLEVBQUUsRUFBRSxHQUFHLEVBQUgsR0FBRyxFQUFFLEdBQUcsRUFBSCxHQUFHLEVBQUUsSUFBSSxFQUFKLElBQUksRUFBRSxDQUFDLENBQUM7S0FDdkQ7Ozs7Ozs7Ozs7Ozs7OztDQUNGOztBQUFBLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL2tpYmFuYS9zcmMvc2VydmVyL2NvbmZpZy9jb21wbGV0ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChrYm5TZXJ2ZXIsIHNlcnZlciwgY29uZmlnKSB7XG5cbiAgc2VydmVyLmRlY29yYXRlKCdzZXJ2ZXInLCAnY29uZmlnJywgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBrYm5TZXJ2ZXIuY29uZmlnO1xuICB9KTtcblxuICBsZXQgdG1wbCA9ICdTZXR0aW5ncyBmb3IgXCI8JT0ga2V5ICU+XCIgd2VyZSBub3QgYXBwbGllZCwgY2hlY2sgZm9yIHNwZWxsaW5nIGVycm9ycyBhbmQgZW5zdXJlIHRoZSBwbHVnaW4gaXMgbG9hZGVkLic7XG4gIGZvciAobGV0IFtrZXksIHZhbF0gb2YgY29uZmlnLmdldFBlbmRpbmdTZXRzKCkpIHtcbiAgICBzZXJ2ZXIubG9nKFsnd2FybmluZycsICdjb25maWcnXSwgeyBrZXksIHZhbCwgdG1wbCB9KTtcbiAgfVxufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/server/config/complete.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;qBAAe,UAAU,SAAS,EAAE,MAAM,EAAE,MAAM,EAAE;;AAElD,QAAM,CAAC,QAAQ,CAAC,QAAQ,EAAE,QAAQ,EAAE,YAAY;AAC9C,WAAO,SAAS,CAAC,MAAM,CAAC;GACzB,CAAC,CAAC;;AAEH,MAAI,IAAI,GAAG,wGAAwG,CAAC;;;;;;AACpH,yBAAuB,MAAM,CAAC,cAAc,EAAE,8HAAE;;;UAAtC,GAAG;UAAE,GAAG;;AAChB,YAAM,CAAC,GAAG,CAAC,CAAC,SAAS,EAAE,QAAQ,CAAC,EAAE,EAAE,GAAG,EAAH,GAAG,EAAE,GAAG,EAAH,GAAG,EAAE,IAAI,EAAJ,IAAI,EAAE,CAAC,CAAC;KACvD;;;;;;;;;;;;;;;CACF;;AAAA,CAAC",
      "file": "/home/vio/kibana/src/server/config/complete.js",
      "sourcesContent": [
        "export default function (kbnServer, server, config) {\n\n  server.decorate('server', 'config', function () {\n    return kbnServer.config;\n  });\n\n  let tmpl = 'Settings for \"<%= key %>\" were not applied, check for spelling errors and ensure the plugin is loaded.';\n  for (let [key, val] of config.getPendingSets()) {\n    server.log(['warning', 'config'], { key, val, tmpl });\n  }\n};\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/kibana/src/ui/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "url",
            "imported": [
              "format"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "format",
                "local": "formatUrl"
              }
            ]
          },
          {
            "source": "fs",
            "imported": [
              "readFileSync"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "readFileSync",
                "local": "readFile"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "defaults"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "defaults",
                "local": "defaults"
              }
            ]
          },
          {
            "source": "boom",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Boom"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "resolve"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "resolve",
                "local": "resolve"
              }
            ]
          },
          {
            "source": "../utils/from_root",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "fromRoot"
              }
            ]
          },
          {
            "source": "./ui_exports",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "UiExports"
              }
            ]
          },
          {
            "source": "./ui_bundle",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "UiBundle"
              }
            ]
          },
          {
            "source": "./ui_bundle_collection",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "UiBundleCollection"
              }
            ]
          },
          {
            "source": "./ui_bundler_env",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "UiBundlerEnv"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "async-to-generator",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nvar _url = require('url');\n\nvar _fs = require('fs');\n\nvar _lodash = require('lodash');\n\nvar _boom = require('boom');\n\nvar _boom2 = _interopRequireDefault(_boom);\n\nvar _path = require('path');\n\nvar _utilsFrom_root = require('../utils/from_root');\n\nvar _utilsFrom_root2 = _interopRequireDefault(_utilsFrom_root);\n\nvar _ui_exports = require('./ui_exports');\n\nvar _ui_exports2 = _interopRequireDefault(_ui_exports);\n\nvar _ui_bundle = require('./ui_bundle');\n\nvar _ui_bundle2 = _interopRequireDefault(_ui_bundle);\n\nvar _ui_bundle_collection = require('./ui_bundle_collection');\n\nvar _ui_bundle_collection2 = _interopRequireDefault(_ui_bundle_collection);\n\nvar _ui_bundler_env = require('./ui_bundler_env');\n\nvar _ui_bundler_env2 = _interopRequireDefault(_ui_bundler_env);\n\nexports['default'] = _asyncToGenerator(function* (kbnServer, server, config) {\n\n  var loadingGif = (0, _fs.readFileSync)((0, _utilsFrom_root2['default'])('src/ui/public/loading.gif'), { encoding: 'base64' });\n\n  var uiExports = kbnServer.uiExports = new _ui_exports2['default']({\n    urlBasePath: config.get('server.basePath')\n  });\n\n  var bundlerEnv = new _ui_bundler_env2['default'](config.get('optimize.bundleDir'));\n  bundlerEnv.addContext('env', config.get('env.name'));\n  bundlerEnv.addContext('urlBasePath', config.get('server.basePath'));\n  bundlerEnv.addContext('sourceMaps', config.get('optimize.sourceMaps'));\n  bundlerEnv.addContext('kbnVersion', config.get('pkg.version'));\n  bundlerEnv.addContext('buildNum', config.get('pkg.buildNum'));\n  uiExports.addConsumer(bundlerEnv);\n\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = kbnServer.plugins[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var plugin = _step.value;\n\n      uiExports.consumePlugin(plugin);\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator['return']) {\n        _iterator['return']();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  var bundles = kbnServer.bundles = new _ui_bundle_collection2['default'](bundlerEnv, config.get('optimize.bundleFilter'));\n\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = uiExports.getAllApps()[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var app = _step2.value;\n\n      bundles.addApp(app);\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2['return']) {\n        _iterator2['return']();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n\n  var _iteratorNormalCompletion3 = true;\n  var _didIteratorError3 = false;\n  var _iteratorError3 = undefined;\n\n  try {\n    for (var _iterator3 = uiExports.getBundleProviders()[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n      var gen = _step3.value;\n\n      var bundle = yield gen(_ui_bundle2['default'], bundlerEnv, uiExports.getAllApps(), kbnServer.plugins);\n      if (bundle) bundles.add(bundle);\n    }\n\n    // render all views from the ui/views directory\n  } catch (err) {\n    _didIteratorError3 = true;\n    _iteratorError3 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion3 && _iterator3['return']) {\n        _iterator3['return']();\n      }\n    } finally {\n      if (_didIteratorError3) {\n        throw _iteratorError3;\n      }\n    }\n  }\n\n  server.setupViews((0, _path.resolve)(__dirname, 'views'));\n  server.exposeStaticFile('/loading.gif', (0, _path.resolve)(__dirname, 'public/loading.gif'));\n\n  server.route({\n    path: '/app/{id}',\n    method: 'GET',\n    handler: function handler(req, reply) {\n      var id = req.params.id;\n      var app = uiExports.apps.byId[id];\n      if (!app) return reply(_boom2['default'].notFound('Unknown app ' + id));\n\n      if (kbnServer.status.isGreen()) {\n        return reply.renderApp(app);\n      } else {\n        return reply.renderStatusPage();\n      }\n    }\n  });\n\n  server.decorate('reply', 'renderApp', _asyncToGenerator(function* (app) {\n    var isElasticsearchPluginRed = server.plugins.elasticsearch.status.state === 'red';\n    var uiSettings = server.uiSettings();\n    var payload = {\n      app: app,\n      nav: uiExports.navLinks.inOrder,\n      version: kbnServer.version,\n      buildNum: config.get('pkg.buildNum'),\n      buildSha: config.get('pkg.buildSha'),\n      basePath: config.get('server.basePath'),\n      serverName: config.get('server.name'),\n      uiSettings: {\n        defaults: yield uiSettings.getDefaults(),\n        user: isElasticsearchPluginRed ? {} : (yield uiSettings.getUserProvided())\n      },\n      vars: (0, _lodash.defaults)(app.getInjectedVars() || {}, uiExports.defaultInjectedVars)\n    };\n\n    return this.view(app.templateName, {\n      app: app,\n      loadingGif: loadingGif,\n      kibanaPayload: payload,\n      bundlePath: config.get('server.basePath') + '/bundles'\n    });\n  }));\n});\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3VpL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7bUJBQW9DLEtBQUs7O2tCQUNBLElBQUk7O3NCQUNwQixRQUFROztvQkFDaEIsTUFBTTs7OztvQkFDQyxNQUFNOzs4QkFDVCxvQkFBb0I7Ozs7MEJBQ25CLGNBQWM7Ozs7eUJBQ2YsYUFBYTs7OztvQ0FDSCx3QkFBd0I7Ozs7OEJBQzlCLGtCQUFrQjs7Ozt1Q0FFNUIsV0FBTyxTQUFTLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBSzs7QUFFbEQsTUFBTSxVQUFVLEdBQUcsc0JBQVMsaUNBQVMsMkJBQTJCLENBQUMsRUFBRSxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUMsQ0FBQyxDQUFDOztBQUUxRixNQUFNLFNBQVMsR0FBRyxTQUFTLENBQUMsU0FBUyxHQUFHLDRCQUFjO0FBQ3BELGVBQVcsRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLGlCQUFpQixDQUFDO0dBQzNDLENBQUMsQ0FBQzs7QUFFSCxNQUFNLFVBQVUsR0FBRyxnQ0FBaUIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLENBQUM7QUFDdEUsWUFBVSxDQUFDLFVBQVUsQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDO0FBQ3JELFlBQVUsQ0FBQyxVQUFVLENBQUMsYUFBYSxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxDQUFDO0FBQ3BFLFlBQVUsQ0FBQyxVQUFVLENBQUMsWUFBWSxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMscUJBQXFCLENBQUMsQ0FBQyxDQUFDO0FBQ3ZFLFlBQVUsQ0FBQyxVQUFVLENBQUMsWUFBWSxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQztBQUMvRCxZQUFVLENBQUMsVUFBVSxDQUFDLFVBQVUsRUFBRSxNQUFNLENBQUMs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QUN4QyxZQUFJLEVBQUUsd0JBQXdCLEdBQUcsRUFBRSxJQUFHLE1BQU0sVUFBVSxDQUFDLGVBQWUsRUFBRSxDQUFBO09BQ3pFO0FBQ0QsVUFBSSxFQUFFLHNCQUFTLEdBQUcsQ0FBQyxlQUFlLEVBQUUsSUFBSSxFQUFFLEVBQUUsU0FBUyxDQUFDLG1CQUFtQixDQUFDO0tBQzNFLENBQUM7O0FBRUYsV0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxZQUFZLEVBQUU7QUFDakMsU0FBRyxFQUFFLEdBQUc7QUFDUixnQkFBVSxFQUFFLFVBQVU7QUFDdEIsbUJBQWEsRUFBRSxPQUFPO0FBQ3RCLGdCQUFVLEVBQUssTUFBTSxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQyxhQUFVO0tBQ3ZELENBQUMsQ0FBQztHQUNKLEVBQUMsQ0FBQztDQUNKIiwiZmlsZSI6Ii9ob21lL3Zpby9raWJhbmEvc3JjL3VpL2luZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZm9ybWF0IGFzIGZvcm1hdFVybCB9IGZyb20gJ3VybCc7XG5pbXBvcnQgeyByZWFkRmlsZVN5bmMgYXMgcmVhZEZpbGUgfSBmcm9tICdmcyc7XG5pbXBvcnQgeyBkZWZhdWx0cyB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgQm9vbSBmcm9tICdib29tJztcbmltcG9ydCB7IHJlc29sdmUgfSBmcm9tICdwYXRoJztcbmltcG9ydCBmcm9tUm9vdCBmcm9tICcuLi91dGlscy9mcm9tX3Jvb3QnO1xuaW1wb3J0IFVpRXhwb3J0cyBmcm9tICcuL3VpX2V4cG9ydHMnO1xuaW1wb3J0IFVpQnVuZGxlIGZyb20gJy4vdWlfYnVuZGxlJztcbmltcG9ydCBVaUJ1bmRsZUNvbGxlY3Rpb24gZnJvbSAnLi91aV9idW5kbGVfY29sbGVjdGlvbic7XG5pbXBvcnQgVWlCdW5kbGVyRW52IGZyb20gJy4vdWlfYnVuZGxlcl9lbnYnO1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyAoa2JuU2VydmVyLCBzZXJ2ZXIsIGNvbmZpZykgPT4ge1xuXG4gIGNvbnN0IGxvYWRpbmdHaWYgPSByZWFkRmlsZShmcm9tUm9vdCgnc3JjL3VpL3B1YmxpYy9sb2FkaW5nLmdpZicpLCB7IGVuY29kaW5nOiAnYmFzZTY0J30pO1xuXG4gIGNvbnN0IHVpRXhwb3J0cyA9IGtiblNlcnZlci51aUV4cG9ydHMgPSBuZXcgVWlFeHBvcnRzKHtcbiAgICB1cmxCYXNlUGF0aDogY29uZmlnLmdldCgnc2VydmVyLmJhc2VQYXRoJylcbiAgfSk7XG5cbiAgY29uc3QgYnVuZGxlckVudiA9IG5ldyBVaUJ1bmRsZXJFbnYoY29uZmlnLmdldCgnb3B0aW1pemUuYnVuZGxlRGlyJykpO1xuICBidW5kbGVyRW52LmFkZENvbnRleHQoJ2VudicsIGNvbmZpZy5nZXQoJ2Vudi5uYW1lJykpO1xuICBidW5kbGVyRW52LmFkZENvbnRleHQoJ3VybEJhc2VQYXRoJywgY29uZmlnLmdldCgnc2VydmVyLmJhc2VQYXRoJykpO1xuICBidW5kbGVyRW52LmFkZENvbnRleHQoJ3NvdXJjZU1hcHMnLCBjb25maWcuZ2V0KCdvcHRpbWl6ZS5zb3VyY2VNYXBzJykpO1xuICBidW5kbGVyRW52LmFkZENvbnRleHQoJ2tiblZlcnNpb24nLCBjb25maWcuZ2V0KCdwa2cudmVyc2lvbicpKTtcbiAgYnVuZGxlckVudi5hZGRDb250ZXh0KCdidWlsZE51bScsIGNvbmZpZy5nZXQoJ3BrZy5idWlsZE51bScpKTtcbiAgdWlFeHBvcnRzLmFkZENvbnN1bWVyKGJ1bmRsZXJFbnYpO1xuXG4gIGZvciAobGV0IHBsdWdpbiBvZiBrYm5TZXJ2ZXIucGx1Z2lucykge1xuICAgIHVpRXhwb3J0cy5jb25zdW1lUGx1Z2luKHBsdWdpbik7XG4gIH1cblxuICBjb25zdCBidW5kbGVzID0ga2JuU2VydmVyLmJ1bmRsZXMgPSBuZXcgVWlCdW5kbGVDb2xsZWN0aW9uKGJ1bmRsZXJFbnYsIGNvbmZpZy5nZXQoJ29wdGltaXplLmJ1bmRsZUZpbHRlcicpKTtcblxuICBmb3IgKGxldCBhcHAgb2YgdWlFeHBvcnRzLmdldEFsbEFwcHMoKSkge1xuICAgIGJ1bmRsZXMuYWRkQXBwKGFwcCk7XG4gIH1cblxuICBmb3IgKGxldCBnZW4gb2YgdWlFeHBvcnRzLmdldEJ1bmRsZVByb3ZpZGVycygpKSB7XG4gICAgY29uc3QgYnVuZGxlID0gYXdhaXQgZ2VuKFVpQnVuZGxlLCBidW5kbGVyRW52LCB1aUV4cG9ydHMuZ2V0QWxsQXBwcygpLCBrYm5TZXJ2ZXIucGx1Z2lucyk7XG4gICAgaWYgKGJ1bmRsZSkgYnVuZGxlcy5hZGQoYnVuZGxlKTtcbiAgfVxuXG4gIC8vIHJlbmRlciBhbGwgdmlld3MgZnJvbSB0aGUgdWkvdmlld3MgZGlyZWN0b3J5XG4gIHNlcnZlci5zZXR1cFZpZXdzKHJlc29sdmUoX19kaXJuYW1lLCAndmlld3MnKSk7XG4gIHNlcnZlci5leHBvc2VTdGF0aWNGaWxlKCcvbG9hZGluZy5naWYnLCByZXNvbHZlKF9fZGlybmFtZSwgJ3B1YmxpYy9sb2FkaW5nLmdpZicpKTtcblxuICBzZXJ2ZXIucm91dGUoe1xuICAgIHBhdGg6ICcvYXBwL3tpZH0nLFxuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgaGFuZGxlcjogZnVuY3Rpb24gKHJlcSwgcmVwbHkpIHtcbiAgICAgIGNvbnN0IGlkID0gcmVxLnBhcmFtcy5pZDtcbiAgICAgIGNvbnN0IGFwcCA9IHVpRXhwb3J0cy5hcHBzLmJ5SWRbaWRdO1xuICAgICAgaWYgKCFhcHApIHJldHVybiByZXBseShCb29tLm5vdEZvdW5kKCdVbmtub3duIGFwcCAnICsgaWQpKTtcblxuICAgICAgaWYgKGtiblNlcnZlci5zdGF0dXMuaXNHcmVlbigpKSB7XG4gICAgICAgIHJldHVybiByZXBseS5yZW5kZXJBcHAoYXBwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiByZXBseS5yZW5kZXJTdGF0dXNQYWdlKCk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICBzZXJ2ZXIuZGVjb3JhdGUoJ3JlcGx5JywgJ3JlbmRlckFwcCcsIGFzeW5jIGZ1bmN0aW9uIChhcHApIHtcbiAgICBjb25zdCBpc0VsYXN0aWNzZWFyY2hQbHVnaW5SZWQgPSBzZXJ2ZXIucGx1Z2lucy5lbGFzdGljc2VhcmNoLnN0YXR1cy5zdGF0ZSA9PT0gJ3JlZCc7XG4gICAgY29uc3QgdWlTZXR0aW5ncyA9IHNlcnZlci51aVNldHRpbmdzKCk7XG4gICAgY29uc3QgcGF5bG9hZCA9IHtcbiAgICAgIGFwcDogYXBwLFxuICAgICAgbmF2OiB1aUV4cG9ydHMubmF2TGlua3MuaW5PcmRlcixcbiAgICAgIHZlcnNpb246IGtiblNlcnZlci52ZXJzaW9uLFxuICAgICAgYnVpbGROdW06IGNvbmZpZy5nZXQoJ3BrZy5idWlsZE51bScpLFxuICAgICAgYnVpbGRTaGE6IGNvbmZpZy5nZXQoJ3BrZy5idWlsZFNoYScpLFxuICAgICAgYmFzZVBhdGg6IGNvbmZpZy5nZXQoJ3NlcnZlci5iYXNlUGF0aCcpLFxuICAgICAgc2VydmVyTmFtZTogY29uZmlnLmdldCgnc2VydmVyLm5hbWUnKSxcbiAgICAgIHVpU2V0dGluZ3M6IHtcbiAgICAgICAgZGVmYXVsdHM6IGF3YWl0IHVpU2V0dGluZ3MuZ2V0RGVmYXVsdHMoKSxcbiAgICAgICAgdXNlcjogaXNFbGFzdGljc2VhcmNoUGx1Z2luUmVkID8ge30gOiBhd2FpdCB1aVNldHRpbmdzLmdldFVzZXJQcm92aWRlZCgpXG4gICAgICB9LFxuICAgICAgdmFyczogZGVmYXVsdHMoYXBwLmdldEluamVjdGVkVmFycygpIHx8IHt9LCB1aUV4cG9ydHMuZGVmYXVsdEluamVjdGVkVmFycyksXG4gICAgfTtcblxuICAgIHJldHVybiB0aGlzLnZpZXcoYXBwLnRlbXBsYXRlTmFtZSwge1xuICAgICAgYXBwOiBhcHAsXG4gICAgICBsb2FkaW5nR2lmOiBsb2FkaW5nR2lmLFxuICAgICAga2liYW5hUGF5bG9hZDogcGF5bG9hZCxcbiAgICAgIGJ1bmRsZVBhdGg6IGAke2NvbmZpZy5nZXQoJ3NlcnZlci5iYXNlUGF0aCcpfS9idW5kbGVzYCxcbiAgICB9KTtcbiAgfSk7XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/ui/index.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/kibana/src/ui/index.js",
      "sourcesContent": [
        "import { format as formatUrl } from 'url';\nimport { readFileSync as readFile } from 'fs';\nimport { defaults } from 'lodash';\nimport Boom from 'boom';\nimport { resolve } from 'path';\nimport fromRoot from '../utils/from_root';\nimport UiExports from './ui_exports';\nimport UiBundle from './ui_bundle';\nimport UiBundleCollection from './ui_bundle_collection';\nimport UiBundlerEnv from './ui_bundler_env';\n\nexport default async (kbnServer, server, config) => {\n\n  const loadingGif = readFile(fromRoot('src/ui/public/loading.gif'), { encoding: 'base64'});\n\n  const uiExports = kbnServer.uiExports = new UiExports({\n    urlBasePath: config.get('server.basePath')\n  });\n\n  const bundlerEnv = new UiBundlerEnv(config.get('optimize.bundleDir'));\n  bundlerEnv.addContext('env', config.get('env.name'));\n  bundlerEnv.addContext('urlBasePath', config.get('server.basePath'));\n  bundlerEnv.addContext('sourceMaps', config.get('optimize.sourceMaps'));\n  bundlerEnv.addContext('kbnVersion', config.get('pkg.version'));\n  bundlerEnv.addContext('buildNum', config.get('pkg.buildNum'));\n  uiExports.addConsumer(bundlerEnv);\n\n  for (let plugin of kbnServer.plugins) {\n    uiExports.consumePlugin(plugin);\n  }\n\n  const bundles = kbnServer.bundles = new UiBundleCollection(bundlerEnv, config.get('optimize.bundleFilter'));\n\n  for (let app of uiExports.getAllApps()) {\n    bundles.addApp(app);\n  }\n\n  for (let gen of uiExports.getBundleProviders()) {\n    const bundle = await gen(UiBundle, bundlerEnv, uiExports.getAllApps(), kbnServer.plugins);\n    if (bundle) bundles.add(bundle);\n  }\n\n  // render all views from the ui/views directory\n  server.setupViews(resolve(__dirname, 'views'));\n  server.exposeStaticFile('/loading.gif', resolve(__dirname, 'public/loading.gif'));\n\n  server.route({\n    path: '/app/{id}',\n    method: 'GET',\n    handler: function (req, reply) {\n      const id = req.params.id;\n      const app = uiExports.apps.byId[id];\n      if (!app) return reply(Boom.notFound('Unknown app ' + id));\n\n      if (kbnServer.status.isGreen()) {\n        return reply.renderApp(app);\n      } else {\n        return reply.renderStatusPage();\n      }\n    }\n  });\n\n  server.decorate('reply', 'renderApp', async function (app) {\n    const isElasticsearchPluginRed = server.plugins.elasticsearch.status.state === 'red';\n    const uiSettings = server.uiSettings();\n    const payload = {\n      app: app,\n      nav: uiExports.navLinks.inOrder,\n      version: kbnServer.version,\n      buildNum: config.get('pkg.buildNum'),\n      buildSha: config.get('pkg.buildSha'),\n      basePath: config.get('server.basePath'),\n      serverName: config.get('server.name'),\n      uiSettings: {\n        defaults: await uiSettings.getDefaults(),\n        user: isElasticsearchPluginRed ? {} : await uiSettings.getUserProvided()\n      },\n      vars: defaults(app.getInjectedVars() || {}, uiExports.defaultInjectedVars),\n    };\n\n    return this.view(app.templateName, {\n      app: app,\n      loadingGif: loadingGif,\n      kibanaPayload: payload,\n      bundlePath: `${config.get('server.basePath')}/bundles`,\n    });\n  });\n};\n"
      ]
    },
    "mtime": 1467036622849
  },
  "{\"filename\":\"/home/vio/kibana/src/ui/ui_exports.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "minimatch",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "minimatch"
              }
            ]
          },
          {
            "source": "./ui_app_collection",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "UiAppCollection"
              }
            ]
          },
          {
            "source": "./ui_nav_link_collection",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "UiNavLinkCollection"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "async-to-generator",
        "to-consumable-array",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i]; return arr2; } else { return Array.from(arr); } }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _minimatch = require('minimatch');\n\nvar _minimatch2 = _interopRequireDefault(_minimatch);\n\nvar _ui_app_collection = require('./ui_app_collection');\n\nvar _ui_app_collection2 = _interopRequireDefault(_ui_app_collection);\n\nvar _ui_nav_link_collection = require('./ui_nav_link_collection');\n\nvar _ui_nav_link_collection2 = _interopRequireDefault(_ui_nav_link_collection);\n\nvar UiExports = (function () {\n  function UiExports(_ref) {\n    var urlBasePath = _ref.urlBasePath;\n\n    _classCallCheck(this, UiExports);\n\n    this.navLinks = new _ui_nav_link_collection2['default'](this);\n    this.apps = new _ui_app_collection2['default'](this);\n    this.aliases = {};\n    this.urlBasePath = urlBasePath;\n    this.exportConsumer = _lodash2['default'].memoize(this.exportConsumer);\n    this.consumers = [];\n    this.bundleProviders = [];\n    this.defaultInjectedVars = {};\n  }\n\n  _createClass(UiExports, [{\n    key: 'consumePlugin',\n    value: function consumePlugin(plugin) {\n      var _this = this;\n\n      plugin.apps = new _ui_app_collection2['default'](this);\n\n      var types = _lodash2['default'].keys(plugin.uiExportsSpecs);\n      if (!types) return false;\n\n      var unkown = _lodash2['default'].reject(types, this.exportConsumer, this);\n      if (unkown.length) {\n        throw new Error('unknown export types ' + unkown.join(', ') + ' in plugin ' + plugin.id);\n      }\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.consumers[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var consumer = _step.value;\n\n          consumer.consumePlugin && consumer.consumePlugin(plugin);\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator['return']) {\n            _iterator['return']();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      types.forEach(function (type) {\n        _this.exportConsumer(type)(plugin, plugin.uiExportsSpecs[type]);\n      });\n    }\n  }, {\n    key: 'addConsumer',\n    value: function addConsumer(consumer) {\n      this.consumers.push(consumer);\n    }\n  }, {\n    key: 'exportConsumer',\n    value: function exportConsumer(type) {\n      var _this2 = this;\n\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = this.consumers[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var consumer = _step2.value;\n\n          if (!consumer.exportConsumer) continue;\n          var fn = consumer.exportConsumer(type);\n          if (fn) return fn;\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2['return']) {\n            _iterator2['return']();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      switch (type) {\n        case 'app':\n        case 'apps':\n          return function (plugin, specs) {\n            var id = plugin.id;\n            var _iteratorNormalCompletion3 = true;\n            var _didIteratorError3 = false;\n            var _iteratorError3 = undefined;\n\n            try {\n              var _loop = function () {\n                var spec = _step3.value;\n\n                var app = _this2.apps['new'](_lodash2['default'].defaults({}, spec, {\n                  id: plugin.id,\n                  urlBasePath: _this2.urlBasePath\n                }));\n\n                plugin.extendInit(function (server, options) {\n                  // eslint-disable-line no-loop-func\n                  var wrapped = app.getInjectedVars;\n                  app.getInjectedVars = function () {\n                    return wrapped.call(plugin, server, options);\n                  };\n                });\n\n                plugin.apps.add(app);\n              };\n\n              for (var _iterator3 = [].concat(specs || [])[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n                _loop();\n              }\n            } catch (err) {\n              _didIteratorError3 = true;\n              _iteratorError3 = err;\n            } finally {\n              try {\n                if (!_iteratorNormalCompletion3 && _iterator3['return']) {\n                  _iterator3['return']();\n                }\n              } finally {\n                if (_didIteratorError3) {\n                  throw _iteratorError3;\n                }\n              }\n            }\n          };\n\n        case 'link':\n        case 'links':\n          return function (plugin, spec) {\n            var _iteratorNormalCompletion4 = true;\n            var _didIteratorError4 = false;\n            var _iteratorError4 = undefined;\n\n            try {\n              for (var _iterator4 = [].concat(spec || [])[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n                var _spec = _step4.value;\n\n                _this2.navLinks['new'](_spec);\n              }\n            } catch (err) {\n              _didIteratorError4 = true;\n              _iteratorError4 = err;\n            } finally {\n              try {\n                if (!_iteratorNormalCompletion4 && _iterator4['return']) {\n                  _iterator4['return']();\n                }\n              } finally {\n                if (_didIteratorError4) {\n                  throw _iteratorError4;\n                }\n              }\n            }\n          };\n\n        case 'visTypes':\n        case 'fieldFormats':\n        case 'spyModes':\n        case 'chromeNavControls':\n        case 'navbarExtensions':\n        case 'managementSections':\n        case 'docViews':\n        case 'hacks':\n          return function (plugin, spec) {\n            _this2.aliases[type] = _lodash2['default'].union(_this2.aliases[type] || [], spec);\n          };\n\n        case 'bundle':\n          return function (plugin, spec) {\n            _this2.bundleProviders.push(spec);\n          };\n\n        case 'aliases':\n          return function (plugin, specs) {\n            _lodash2['default'].forOwn(specs, function (spec, adhocType) {\n              _this2.aliases[adhocType] = _lodash2['default'].union(_this2.aliases[adhocType] || [], spec);\n            });\n          };\n\n        case 'injectDefaultVars':\n          return function (plugin, injector) {\n            plugin.extendInit(_asyncToGenerator(function* (server, options) {\n              _lodash2['default'].merge(_this2.defaultInjectedVars, (yield injector.call(plugin, server, options)));\n            }));\n          };\n      }\n    }\n  }, {\n    key: 'find',\n    value: function find(patterns) {\n      var aliases = this.aliases;\n      var names = _lodash2['default'].keys(aliases);\n      var matcher = _lodash2['default'].partialRight(_minimatch2['default'].filter, { matchBase: true });\n\n      return _lodash2['default'].chain(patterns).map(function (pattern) {\n        return names.filter(matcher(pattern));\n      }).flattenDeep().reduce(function (found, name) {\n        return found.concat(aliases[name]);\n      }, []).value();\n    }\n  }, {\n    key: 'getAllApps',\n    value: function getAllApps() {\n      var _ref2;\n\n      var apps = this.apps;\n\n      return (_ref2 = [].concat(_toConsumableArray(apps))).concat.apply(_ref2, _toConsumableArray(apps.hidden));\n    }\n  }, {\n    key: 'getApp',\n    value: function getApp(id) {\n      return this.apps.byId[id];\n    }\n  }, {\n    key: 'getHiddenApp',\n    value: function getHiddenApp(id) {\n      return this.apps.hidden.byId[id];\n    }\n  }, {\n    key: 'getBundleProviders',\n    value: function getBundleProviders() {\n      return this.bundleProviders;\n    }\n  }]);\n\n  return UiExports;\n})();\n\nmodule.exports = UiExports;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3VpL3VpX2V4cG9ydHMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O3NCQUFjLFFBQVE7Ozs7eUJBQ0EsV0FBVzs7OztpQ0FFTCxxQkFBcUI7Ozs7c0NBQ2pCLDBCQUEwQjs7OztJQUVwRCxTQUFTO0FBQ0YsV0FEUCxTQUFTLENBQ0QsSUFBZSxFQUFFO1FBQWYsV0FBVyxHQUFiLElBQWUsQ0FBYixXQUFXOzswQkFEckIsU0FBUzs7QUFFWCxRQUFJLENBQUMsUUFBUSxHQUFHLHdDQUF3QixJQUFJLENBQUMsQ0FBQztBQUM5QyxRQUFJLENBQUMsSUFBSSxHQUFHLG1DQUFvQixJQUFJLENBQUMsQ0FBQztBQUN0QyxRQUFJLENBQUMsT0FBTyxHQUFHLEVBQUUsQ0FBQztBQUNsQixRQUFJLENBQUMsV0FBVyxHQUFHLFdBQVcsQ0FBQztBQUMvQixRQUFJLENBQUMsY0FBYyxHQUFHLG9CQUFFLE9BQU8sQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7QUFDckQsUUFBSSxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUM7QUFDcEIsUUFBSSxDQUFDLGVBQWUsR0FBRyxFQUFFLENBQUM7QUFDMUIsUUFBSSxDQUFDLG1CQUFtQixHQUFHLEVBQUUsQ0FBQztHQUMvQjs7ZUFWRyxTQUFTOztXQVlBLHVCQUFDLE1BQU0sRUFBRTs7O0FBQ3BCLFlBQU0sQ0FBQyxJQUFJLEdBQUcsbUNBQW9CLElBQUksQ0FBQyxDQUFDOztBQUV4QyxVQUFNLEtBQUssR0FBRyxvQkFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDO0FBQzVDLFVBQUksQ0FBQyxLQUFLLEVBQUUsT0FBTyxLQUFLLENBQUM7O0FBRXpCLFVBQU0sTUFBTSxHQUFHLG9CQUFFLE1BQU0sQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUMsQ0FBQztBQUMxRCxVQUFJLE1BQU0sQ0FBQyxNQUFNLEVBQUU7QUFD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RUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQzs7QUFFdEUsYUFBTyxvQkFBRSxLQUFLLENBQUMsUUFBUSxDQUFDLENBQ3ZCLEdBQUcsQ0FBQyxVQUFVLE9BQU8sRUFBRTtBQUN0QixlQUFPLEtBQUssQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7T0FDdkMsQ0FBQyxDQUNELFdBQVcsRUFBRSxDQUNiLE1BQU0sQ0FBQyxVQUFVLEtBQUssRUFBRSxJQUFJLEVBQUU7QUFDN0IsZUFBTyxLQUFLLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO09BQ3BDLEVBQUUsRUFBRSxDQUFDLENBQ0wsS0FBSyxFQUFFLENBQUM7S0FDVjs7O1dBRVMsc0JBQUc7OztVQUNMLElBQUksR0FBSyxJQUFJLENBQWIsSUFBSTs7QUFDVixhQUFPLHNDQUFJLElBQUksSUFBRSxNQUFNLE1BQUEsMkJBQUksSUFBSSxDQUFDLE1BQU0sRUFBQyxDQUFDO0tBQ3pDOzs7V0FFSyxnQkFBQyxFQUFFLEVBQUU7QUFDVCxhQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0tBQzNCOzs7V0FFVyxzQkFBQyxFQUFFLEVBQUU7QUFDZixhQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztLQUNsQzs7O1dBRWlCLDhCQUFHO0FBQ25CLGFBQU8sSUFBSSxDQUFDLGVBQWUsQ0FBQztLQUM3Qjs7O1NBeElHLFNBQVM7OztBQTJJZixNQUFNLENBQUMsT0FBTyxHQUFHLFNBQVMsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8va2liYW5hL3NyYy91aS91aV9leHBvcnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBtaW5pbWF0Y2ggZnJvbSAnbWluaW1hdGNoJztcblxuaW1wb3J0IFVpQXBwQ29sbGVjdGlvbiBmcm9tICcuL3VpX2FwcF9jb2xsZWN0aW9uJztcbmltcG9ydCBVaU5hdkxpbmtDb2xsZWN0aW9uIGZyb20gJy4vdWlfbmF2X2xpbmtfY29sbGVjdGlvbic7XG5cbmNsYXNzIFVpRXhwb3J0cyB7XG4gIGNvbnN0cnVjdG9yKHsgdXJsQmFzZVBhdGggfSkge1xuICAgIHRoaXMubmF2TGlua3MgPSBuZXcgVWlOYXZMaW5rQ29sbGVjdGlvbih0aGlzKTtcbiAgICB0aGlzLmFwcHMgPSBuZXcgVWlBcHBDb2xsZWN0aW9uKHRoaXMpO1xuICAgIHRoaXMuYWxpYXNlcyA9IHt9O1xuICAgIHRoaXMudXJsQmFzZVBhdGggPSB1cmxCYXNlUGF0aDtcbiAgICB0aGlzLmV4cG9ydENvbnN1bWVyID0gXy5tZW1vaXplKHRoaXMuZXhwb3J0Q29uc3VtZXIpO1xuICAgIHRoaXMuY29uc3VtZXJzID0gW107XG4gICAgdGhpcy5idW5kbGVQcm92aWRlcnMgPSBbXTtcbiAgICB0aGlzLmRlZmF1bHRJbmplY3RlZFZhcnMgPSB7fTtcbiAgfVxuXG4gIGNvbnN1bWVQbHVnaW4ocGx1Z2luKSB7XG4gICAgcGx1Z2luLmFwcHMgPSBuZXcgVWlBcHBDb2xsZWN0aW9uKHRoaXMpO1xuXG4gICAgY29uc3QgdHlwZXMgPSBfLmtleXMocGx1Z2luLnVpRXhwb3J0c1NwZWNzKTtcbiAgICBpZiAoIXR5cGVzKSByZXR1cm4gZmFsc2U7XG5cbiAgICBjb25zdCB1bmtvd24gPSBfLnJlamVjdCh0eXBlcywgdGhpcy5leHBvcnRDb25zdW1lciwgdGhpcyk7XG4gICAgaWYgKHVua293bi5sZW5ndGgpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigndW5rbm93biBleHBvcnQgdHlwZXMgJyArIHVua293bi5qb2luKCcsICcpICsgJyBpbiBwbHVnaW4gJyArIHBsdWdpbi5pZCk7XG4gICAgfVxuXG4gICAgZm9yIChsZXQgY29uc3VtZXIgb2YgdGhpcy5jb25zdW1lcnMpIHtcbiAgICAgIGNvbnN1bWVyLmNvbnN1bWVQbHVnaW4gJiYgY29uc3VtZXIuY29uc3VtZVBsdWdpbihwbHVnaW4pO1xuICAgIH1cblxuICAgIHR5cGVzLmZvckVhY2goKHR5cGUpID0+IHtcbiAgICAgIHRoaXMuZXhwb3J0Q29uc3VtZXIodHlwZSkocGx1Z2luLCBwbHVnaW4udWlFeHBvcnRzU3BlY3NbdHlwZV0pO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkQ29uc3VtZXIoY29uc3VtZXIpIHtcbiAgICB0aGlzLmNvbnN1bWVycy5wdXNoKGNvbnN1bWVyKTtcbiAgfVxuXG4gIGV4cG9ydENvbnN1bWVyKHR5cGUpIHtcbiAgICBmb3IgKGxldCBjb25zdW1lciBvZiB0aGlzLmNvbnN1bWVycykge1xuICAgICAgaWYgKCFjb25zdW1lci5leHBvcnRDb25zdW1lcikgY29udGludWU7XG4gICAgICBjb25zdCBmbiA9IGNvbnN1bWVyLmV4cG9ydENvbnN1bWVyKHR5cGUpO1xuICAgICAgaWYgKGZuKSByZXR1cm4gZm47XG4gICAgfVxuXG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlICdhcHAnOlxuICAgICAgY2FzZSAnYXBwcyc6XG4gICAgICAgIHJldHVybiAocGx1Z2luLCBzcGVjcykgPT4ge1xuICAgICAgICAgIGNvbnN0IGlkID0gcGx1Z2luLmlkO1xuICAgICAgICAgIGZvciAobGV0IHNwZWMgb2YgW10uY29uY2F0KHNwZWNzIHx8IFtdKSkge1xuXG4gICAgICAgICAgICBjb25zdCBhcHAgPSB0aGlzLmFwcHMubmV3KF8uZGVmYXVsdHMoe30sIHNwZWMsIHtcbiAgICAgICAgICAgICAgaWQ6IHBsdWdpbi5pZCxcbiAgICAgICAgICAgICAgdXJsQmFzZVBhdGg6IHRoaXMudXJsQmFzZVBhdGhcbiAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgcGx1Z2luLmV4dGVuZEluaXQoKHNlcnZlciwgb3B0aW9ucykgPT4geyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWxvb3AtZnVuY1xuICAgICAgICAgICAgICBjb25zdCB3cmFwcGVkID0gYXBwLmdldEluamVjdGVkVmFycztcbiAgICAgICAgICAgICAgYXBwLmdldEluamVjdGVkVmFycyA9ICgpID0+IHdyYXBwZWQuY2FsbChwbHVnaW4sIHNlcnZlciwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcGx1Z2luLmFwcHMuYWRkKGFwcCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICBjYXNlICdsaW5rJzpcbiAgICAgIGNhc2UgJ2xpbmtzJzpcbiAgICAgICAgcmV0dXJuIChwbHVnaW4sIHNwZWMpID0+IHtcbiAgICAgICAgICBmb3IgKGNvbnN0IHNwZWMgb2YgW10uY29uY2F0KHNwZWMgfHwgW10pKSB7XG4gICAgICAgICAgICB0aGlzLm5hdkxpbmtzLm5ldyhzcGVjKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgIGNhc2UgJ3Zpc1R5cGVzJzpcbiAgICAgIGNhc2UgJ2ZpZWxkRm9ybWF0cyc6XG4gICAgICBjYXNlICdzcHlNb2Rlcyc6XG4gICAgICBjYXNlICdjaHJvbWVOYXZDb250cm9scyc6XG4gICAgICBjYXNlICduYXZiYXJFeHRlbnNpb25zJzpcbiAgICAgIGNhc2UgJ21hbmFnZW1lbnRTZWN0aW9ucyc6XG4gICAgICBjYXNlICdkb2NWaWV3cyc6XG4gICAgICBjYXNlICdoYWNrcyc6XG4gICAgICAgIHJldHVybiAocGx1Z2luLCBzcGVjKSA9PiB7XG4gICAgICAgICAgdGhpcy5hbGlhc2VzW3R5cGVdID0gXy51bmlvbih0aGlzLmFsaWFzZXNbdHlwZV0gfHwgW10sIHNwZWMpO1xuICAgICAgICB9O1xuXG4gICAgICBjYXNlICdidW5kbGUnOlxuICAgICAgICByZXR1cm4gKHBsdWdpbiwgc3BlYykgPT4ge1xuICAgICAgICAgIHRoaXMuYnVuZGxlUHJvdmlkZXJzLnB1c2goc3BlYyk7XG4gICAgICAgIH07XG5cbiAgICAgIGNhc2UgJ2FsaWFzZXMnOlxuICAgICAgICByZXR1cm4gKHBsdWdpbiwgc3BlY3MpID0+IHtcbiAgICAgICAgICBfLmZvck93bihzcGVjcywgKHNwZWMsIGFkaG9jVHlwZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5hbGlhc2VzW2FkaG9jVHlwZV0gPSBfLnVuaW9uKHRoaXMuYWxpYXNlc1thZGhvY1R5cGVdIHx8IFtdLCBzcGVjKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgY2FzZSAnaW5qZWN0RGVmYXVsdFZhcnMnOlxuICAgICAgICByZXR1cm4gKHBsdWdpbiwgaW5qZWN0b3IpID0+IHtcbiAgICAgICAgICBwbHVnaW4uZXh0ZW5kSW5pdChhc3luYyAoc2VydmVyLCBvcHRpb25zKSA9PiB7XG4gICAgICAgICAgICBfLm1lcmdlKHRoaXMuZGVmYXVsdEluamVjdGVkVmFycywgYXdhaXQgaW5qZWN0b3IuY2FsbChwbHVnaW4sIHNlcnZlciwgb3B0aW9ucykpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIGZpbmQocGF0dGVybnMpIHtcbiAgICBjb25zdCBhbGlhc2VzID0gdGhpcy5hbGlhc2VzO1xuICAgIGNvbnN0IG5hbWVzID0gXy5rZXlzKGFsaWFzZXMpO1xuICAgIGNvbnN0IG1hdGNoZXIgPSBfLnBhcnRpYWxSaWdodChtaW5pbWF0Y2guZmlsdGVyLCB7IG1hdGNoQmFzZTogdHJ1ZSB9KTtcblxuICAgIHJldHVybiBfLmNoYWluKHBhdHRlcm5zKVxuICAgIC5tYXAoZnVuY3Rpb24gKHBhdHRlcm4pIHtcbiAgICAgIHJldHVybiBuYW1lcy5maWx0ZXIobWF0Y2hlcihwYXR0ZXJuKSk7XG4gICAgfSlcbiAgICAuZmxhdHRlbkRlZXAoKVxuICAgIC5yZWR1Y2UoZnVuY3Rpb24gKGZvdW5kLCBuYW1lKSB7XG4gICAgICByZXR1cm4gZm91bmQuY29uY2F0KGFsaWFzZXNbbmFtZV0pO1xuICAgIH0sIFtdKVxuICAgIC52YWx1ZSgpO1xuICB9XG5cbiAgZ2V0QWxsQXBwcygpIHtcbiAgICBsZXQgeyBhcHBzIH0gPSB0aGlzO1xuICAgIHJldHVybiBbLi4uYXBwc10uY29uY2F0KC4uLmFwcHMuaGlkZGVuKTtcbiAgfVxuXG4gIGdldEFwcChpZCkge1xuICAgIHJldHVybiB0aGlzLmFwcHMuYnlJZFtpZF07XG4gIH1cblxuICBnZXRIaWRkZW5BcHAoaWQpIHtcbiAgICByZXR1cm4gdGhpcy5hcHBzLmhpZGRlbi5ieUlkW2lkXTtcbiAgfVxuXG4gIGdldEJ1bmRsZVByb3ZpZGVycygpIHtcbiAgICByZXR1cm4gdGhpcy5idW5kbGVQcm92aWRlcnM7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBVaUV4cG9ydHM7XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/ui/ui_exports.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/kibana/src/ui/ui_exports.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport minimatch from 'minimatch';\n\nimport UiAppCollection from './ui_app_collection';\nimport UiNavLinkCollection from './ui_nav_link_collection';\n\nclass UiExports {\n  constructor({ urlBasePath }) {\n    this.navLinks = new UiNavLinkCollection(this);\n    this.apps = new UiAppCollection(this);\n    this.aliases = {};\n    this.urlBasePath = urlBasePath;\n    this.exportConsumer = _.memoize(this.exportConsumer);\n    this.consumers = [];\n    this.bundleProviders = [];\n    this.defaultInjectedVars = {};\n  }\n\n  consumePlugin(plugin) {\n    plugin.apps = new UiAppCollection(this);\n\n    const types = _.keys(plugin.uiExportsSpecs);\n    if (!types) return false;\n\n    const unkown = _.reject(types, this.exportConsumer, this);\n    if (unkown.length) {\n      throw new Error('unknown export types ' + unkown.join(', ') + ' in plugin ' + plugin.id);\n    }\n\n    for (let consumer of this.consumers) {\n      consumer.consumePlugin && consumer.consumePlugin(plugin);\n    }\n\n    types.forEach((type) => {\n      this.exportConsumer(type)(plugin, plugin.uiExportsSpecs[type]);\n    });\n  }\n\n  addConsumer(consumer) {\n    this.consumers.push(consumer);\n  }\n\n  exportConsumer(type) {\n    for (let consumer of this.consumers) {\n      if (!consumer.exportConsumer) continue;\n      const fn = consumer.exportConsumer(type);\n      if (fn) return fn;\n    }\n\n    switch (type) {\n      case 'app':\n      case 'apps':\n        return (plugin, specs) => {\n          const id = plugin.id;\n          for (let spec of [].concat(specs || [])) {\n\n            const app = this.apps.new(_.defaults({}, spec, {\n              id: plugin.id,\n              urlBasePath: this.urlBasePath\n            }));\n\n            plugin.extendInit((server, options) => { // eslint-disable-line no-loop-func\n              const wrapped = app.getInjectedVars;\n              app.getInjectedVars = () => wrapped.call(plugin, server, options);\n            });\n\n            plugin.apps.add(app);\n          }\n        };\n\n      case 'link':\n      case 'links':\n        return (plugin, spec) => {\n          for (const spec of [].concat(spec || [])) {\n            this.navLinks.new(spec);\n          }\n        };\n\n      case 'visTypes':\n      case 'fieldFormats':\n      case 'spyModes':\n      case 'chromeNavControls':\n      case 'navbarExtensions':\n      case 'managementSections':\n      case 'docViews':\n      case 'hacks':\n        return (plugin, spec) => {\n          this.aliases[type] = _.union(this.aliases[type] || [], spec);\n        };\n\n      case 'bundle':\n        return (plugin, spec) => {\n          this.bundleProviders.push(spec);\n        };\n\n      case 'aliases':\n        return (plugin, specs) => {\n          _.forOwn(specs, (spec, adhocType) => {\n            this.aliases[adhocType] = _.union(this.aliases[adhocType] || [], spec);\n          });\n        };\n\n      case 'injectDefaultVars':\n        return (plugin, injector) => {\n          plugin.extendInit(async (server, options) => {\n            _.merge(this.defaultInjectedVars, await injector.call(plugin, server, options));\n          });\n        };\n    }\n  }\n\n  find(patterns) {\n    const aliases = this.aliases;\n    const names = _.keys(aliases);\n    const matcher = _.partialRight(minimatch.filter, { matchBase: true });\n\n    return _.chain(patterns)\n    .map(function (pattern) {\n      return names.filter(matcher(pattern));\n    })\n    .flattenDeep()\n    .reduce(function (found, name) {\n      return found.concat(aliases[name]);\n    }, [])\n    .value();\n  }\n\n  getAllApps() {\n    let { apps } = this;\n    return [...apps].concat(...apps.hidden);\n  }\n\n  getApp(id) {\n    return this.apps.byId[id];\n  }\n\n  getHiddenApp(id) {\n    return this.apps.hidden.byId[id];\n  }\n\n  getBundleProviders() {\n    return this.bundleProviders;\n  }\n}\n\nmodule.exports = UiExports;\n"
      ]
    },
    "mtime": 1467036622893
  },
  "{\"filename\":\"/home/vio/kibana/src/ui/ui_app_collection.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "./ui_app",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "UiApp"
              }
            ]
          },
          {
            "source": "../utils/collection",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Collection"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "get",
        "inherits",
        "create-class",
        "class-call-check",
        "to-consumable-array",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i]; return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _ui_app = require('./ui_app');\n\nvar _ui_app2 = _interopRequireDefault(_ui_app);\n\nvar _utilsCollection = require('../utils/collection');\n\nvar _utilsCollection2 = _interopRequireDefault(_utilsCollection);\n\nvar byIdCache = Symbol('byId');\n\nmodule.exports = (function (_Collection) {\n  _inherits(UiAppCollection, _Collection);\n\n  function UiAppCollection(uiExports, parent) {\n    _classCallCheck(this, UiAppCollection);\n\n    _get(Object.getPrototypeOf(UiAppCollection.prototype), 'constructor', this).call(this);\n\n    this.uiExports = uiExports;\n\n    if (!parent) {\n      this.claimedIds = [];\n      this.hidden = new UiAppCollection(uiExports, this);\n    } else {\n      this.claimedIds = parent.claimedIds;\n    }\n  }\n\n  _createClass(UiAppCollection, [{\n    key: 'new',\n    value: function _new(spec) {\n      if (this.hidden && spec.hidden) {\n        return this.hidden['new'](spec);\n      }\n\n      var app = new _ui_app2['default'](this.uiExports, spec);\n\n      if (_lodash2['default'].includes(this.claimedIds, app.id)) {\n        throw new Error('Unable to create two apps with the id ' + app.id + '.');\n      } else {\n        this.claimedIds.push(app.id);\n      }\n\n      this[byIdCache] = null;\n      this.add(app);\n      return app;\n    }\n  }, {\n    key: 'byId',\n    get: function get() {\n      return this[byIdCache] || (this[byIdCache] = _lodash2['default'].indexBy([].concat(_toConsumableArray(this)), 'id'));\n    }\n  }]);\n\n  return UiAppCollection;\n})(_utilsCollection2['default']);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3VpL3VpX2FwcF9jb2xsZWN0aW9uLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O3NCQUFjLFFBQVE7Ozs7c0JBQ0osVUFBVTs7OzsrQkFDTCxxQkFBcUI7Ozs7QUFFNUMsSUFBTSxTQUFTLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDOztBQUVqQyxNQUFNLENBQUMsT0FBTztZQUFTLGVBQWU7O0FBRXpCLFdBRlUsZUFBZSxDQUV4QixTQUFTLEVBQUUsTUFBTSxFQUFFOzBCQUZWLGVBQWU7O0FBR2xDLCtCQUhtQixlQUFlLDZDQUcxQjs7QUFFUixRQUFJLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQzs7QUFFM0IsUUFBSSxDQUFDLE1BQU0sRUFBRTtBQUNYLFVBQUksQ0FBQyxVQUFVLEdBQUcsRUFBRSxDQUFDO0FBQ3JCLFVBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxlQUFlLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQyxDQUFDO0tBQ3BELE1BQU07QUFDTCxVQUFJLENBQUMsVUFBVSxHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUM7S0FDckM7R0FFRjs7ZUFkb0IsZUFBZTs7V0FnQmpDLGNBQUMsSUFBSSxFQUFFO0FBQ1IsVUFBSSxJQUFJLENBQUMsTUFBTSxJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUU7QUFDOUIsZUFBTyxJQUFJLENBQUMsTUFBTSxPQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7T0FDOUI7O0FBRUQsVUFBTSxHQUFHLEdBQUcsd0JBQVUsSUFBSSxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsQ0FBQzs7QUFFNUMsVUFBSSxvQkFBRSxRQUFRLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFDdkMsY0FBTSxJQUFJLEtBQUssQ0FBQyx3Q0FBd0MsR0FBRyxHQUFHLENBQUMsRUFBRSxHQUFHLEdBQUcsQ0FBQyxDQUFDO09BQzFFLE1BQU07QUFDTCxZQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7T0FDOUI7O0FBRUQsVUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLElBQUksQ0FBQztBQUN2QixVQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ2QsYUFBTyxHQUFHLENBQUM7S0FDWjs7O1NBRU8sZUFBRztBQUNULGFBQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxvQkFBRSxPQUFPLDhCQUFLLElBQUksSUFBRyxJQUFJLENBQUMsQ0FBQSxBQUFDLENBQUM7S0FDMUU7OztTQXBDb0IsZUFBZTtnQ0FzQ3JDLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL2tpYmFuYS9zcmMvdWkvdWlfYXBwX2NvbGxlY3Rpb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IFVpQXBwIGZyb20gJy4vdWlfYXBwJztcbmltcG9ydCBDb2xsZWN0aW9uIGZyb20gJy4uL3V0aWxzL2NvbGxlY3Rpb24nO1xuXG5jb25zdCBieUlkQ2FjaGUgPSBTeW1ib2woJ2J5SWQnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBjbGFzcyBVaUFwcENvbGxlY3Rpb24gZXh0ZW5kcyBDb2xsZWN0aW9uIHtcblxuICBjb25zdHJ1Y3Rvcih1aUV4cG9ydHMsIHBhcmVudCkge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLnVpRXhwb3J0cyA9IHVpRXhwb3J0cztcblxuICAgIGlmICghcGFyZW50KSB7XG4gICAgICB0aGlzLmNsYWltZWRJZHMgPSBbXTtcbiAgICAgIHRoaXMuaGlkZGVuID0gbmV3IFVpQXBwQ29sbGVjdGlvbih1aUV4cG9ydHMsIHRoaXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNsYWltZWRJZHMgPSBwYXJlbnQuY2xhaW1lZElkcztcbiAgICB9XG5cbiAgfVxuXG4gIG5ldyhzcGVjKSB7XG4gICAgaWYgKHRoaXMuaGlkZGVuICYmIHNwZWMuaGlkZGVuKSB7XG4gICAgICByZXR1cm4gdGhpcy5oaWRkZW4ubmV3KHNwZWMpO1xuICAgIH1cblxuICAgIGNvbnN0IGFwcCA9IG5ldyBVaUFwcCh0aGlzLnVpRXhwb3J0cywgc3BlYyk7XG5cbiAgICBpZiAoXy5pbmNsdWRlcyh0aGlzLmNsYWltZWRJZHMsIGFwcC5pZCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIGNyZWF0ZSB0d28gYXBwcyB3aXRoIHRoZSBpZCAnICsgYXBwLmlkICsgJy4nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jbGFpbWVkSWRzLnB1c2goYXBwLmlkKTtcbiAgICB9XG5cbiAgICB0aGlzW2J5SWRDYWNoZV0gPSBudWxsO1xuICAgIHRoaXMuYWRkKGFwcCk7XG4gICAgcmV0dXJuIGFwcDtcbiAgfVxuXG4gIGdldCBieUlkKCkge1xuICAgIHJldHVybiB0aGlzW2J5SWRDYWNoZV0gfHwgKHRoaXNbYnlJZENhY2hlXSA9IF8uaW5kZXhCeShbLi4udGhpc10sICdpZCcpKTtcbiAgfVxuXG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/ui/ui_app_collection.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;;;;;sBAAc,QAAQ;;;;sBACJ,UAAU;;;;+BACL,qBAAqB;;;;AAE5C,IAAM,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC;;AAEjC,MAAM,CAAC,OAAO;YAAS,eAAe;;AAEzB,WAFU,eAAe,CAExB,SAAS,EAAE,MAAM,EAAE;0BAFV,eAAe;;AAGlC,+BAHmB,eAAe,6CAG1B;;AAER,QAAI,CAAC,SAAS,GAAG,SAAS,CAAC;;AAE3B,QAAI,CAAC,MAAM,EAAE;AACX,UAAI,CAAC,UAAU,GAAG,EAAE,CAAC;AACrB,UAAI,CAAC,MAAM,GAAG,IAAI,eAAe,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;KACpD,MAAM;AACL,UAAI,CAAC,UAAU,GAAG,MAAM,CAAC,UAAU,CAAC;KACrC;GAEF;;eAdoB,eAAe;;WAgBjC,cAAC,IAAI,EAAE;AACR,UAAI,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,EAAE;AAC9B,eAAO,IAAI,CAAC,MAAM,OAAI,CAAC,IAAI,CAAC,CAAC;OAC9B;;AAED,UAAM,GAAG,GAAG,wBAAU,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;;AAE5C,UAAI,oBAAE,QAAQ,CAAC,IAAI,CAAC,UAAU,EAAE,GAAG,CAAC,EAAE,CAAC,EAAE;AACvC,cAAM,IAAI,KAAK,CAAC,wCAAwC,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,CAAC;OAC1E,MAAM;AACL,YAAI,CAAC,UAAU,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;OAC9B;;AAED,UAAI,CAAC,SAAS,CAAC,GAAG,IAAI,CAAC;AACvB,UAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;AACd,aAAO,GAAG,CAAC;KACZ;;;SAEO,eAAG;AACT,aAAO,IAAI,CAAC,SAAS,CAAC,KAAK,IAAI,CAAC,SAAS,CAAC,GAAG,oBAAE,OAAO,8BAAK,IAAI,IAAG,IAAI,CAAC,CAAA,AAAC,CAAC;KAC1E;;;SApCoB,eAAe;gCAsCrC,CAAC",
      "file": "/home/vio/kibana/src/ui/ui_app_collection.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport UiApp from './ui_app';\nimport Collection from '../utils/collection';\n\nconst byIdCache = Symbol('byId');\n\nmodule.exports = class UiAppCollection extends Collection {\n\n  constructor(uiExports, parent) {\n    super();\n\n    this.uiExports = uiExports;\n\n    if (!parent) {\n      this.claimedIds = [];\n      this.hidden = new UiAppCollection(uiExports, this);\n    } else {\n      this.claimedIds = parent.claimedIds;\n    }\n\n  }\n\n  new(spec) {\n    if (this.hidden && spec.hidden) {\n      return this.hidden.new(spec);\n    }\n\n    const app = new UiApp(this.uiExports, spec);\n\n    if (_.includes(this.claimedIds, app.id)) {\n      throw new Error('Unable to create two apps with the id ' + app.id + '.');\n    } else {\n      this.claimedIds.push(app.id);\n    }\n\n    this[byIdCache] = null;\n    this.add(app);\n    return app;\n  }\n\n  get byId() {\n    return this[byIdCache] || (this[byIdCache] = _.indexBy([...this], 'id'));\n  }\n\n};\n"
      ]
    },
    "mtime": 1467036622893
  },
  "{\"filename\":\"/home/vio/kibana/src/ui/ui_app.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "chain",
              "get",
              "noop",
              "once",
              "pick"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "chain",
                "local": "chain"
              },
              {
                "kind": "named",
                "imported": "get",
                "local": "get"
              },
              {
                "kind": "named",
                "imported": "noop",
                "local": "noop"
              },
              {
                "kind": "named",
                "imported": "once",
                "local": "once"
              },
              {
                "kind": "named",
                "imported": "pick",
                "local": "pick"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar UiApp = (function () {\n  function UiApp(uiExports, spec) {\n    _classCallCheck(this, UiApp);\n\n    this.uiExports = uiExports;\n    this.spec = spec || {};\n\n    this.id = this.spec.id;\n    if (!this.id) {\n      throw new Error('Every app must specify it\\'s id');\n    }\n\n    this.main = this.spec.main;\n    this.title = this.spec.title;\n    this.description = this.spec.description;\n    this.icon = this.spec.icon;\n    this.hidden = !!this.spec.hidden;\n    this.listed = this.spec.listed == null ? !this.hidden : this.spec.listed;\n    this.templateName = this.spec.templateName || 'ui_app';\n\n    if (!this.hidden) {\n      // any non-hidden app has a url, so it gets a \"navLink\"\n      this.navLink = this.uiExports.navLinks['new']({\n        title: this.title,\n        description: this.description,\n        icon: this.icon,\n        url: this.spec.url || '/app/' + this.id\n      });\n\n      if (!this.listed) {\n        // unlisted apps remove their navLinks from the uiExports collection though\n        this.uiExports.navLinks['delete'](this.navLink);\n      }\n    }\n\n    if (this.spec.autoload) {\n      console.warn('\"autoload\" (used by ' + this.id + ' app) is no longer a valid app configuration directive.' + 'Use the \\`ui/autoload/*\\` modules instead.');\n    }\n\n    // once this resolves, no reason to run it again\n    this.getModules = (0, _lodash.once)(this.getModules);\n\n    // variables that are injected into the browser, must serialize to JSON\n    this.getInjectedVars = this.spec.injectVars || _lodash.noop;\n  }\n\n  _createClass(UiApp, [{\n    key: 'getModules',\n    value: function getModules() {\n      return (0, _lodash.chain)([this.uiExports.find((0, _lodash.get)(this, 'spec.uses', [])), this.uiExports.find(['chromeNavControls', 'hacks'])]).flatten().uniq().unshift(this.main).value();\n    }\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      return (0, _lodash.pick)(this, ['id', 'title', 'description', 'icon', 'main', 'navLink']);\n    }\n  }]);\n\n  return UiApp;\n})();\n\nmodule.exports = UiApp;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3VpL3VpX2FwcC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7OztzQkFBNkMsUUFBUTs7OztJQUcvQyxLQUFLO0FBQ0UsV0FEUCxLQUFLLENBQ0csU0FBUyxFQUFFLElBQUksRUFBRTswQkFEekIsS0FBSzs7QUFFUCxRQUFJLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQztBQUMzQixRQUFJLENBQUMsSUFBSSxHQUFHLElBQUksSUFBSSxFQUFFLENBQUM7O0FBRXZCLFFBQUksQ0FBQyxFQUFFLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUM7QUFDdkIsUUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUU7QUFDWixZQUFNLElBQUksS0FBSyxDQUFDLGlDQUFpQyxDQUFDLENBQUM7S0FDcEQ7O0FBRUQsUUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQztBQUMzQixRQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO0FBQzdCLFFBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUM7QUFDekMsUUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQztBQUMzQixRQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQztBQUNqQyxRQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxJQUFJLElBQUksR0FBRyxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUM7QUFDekUsUUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksSUFBSSxRQUFRLENBQUM7O0FBRXZELFFBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFOztBQUVoQixVQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxPQUFJLENBQUM7QUFDekMsYUFBSyxFQUFFLElBQUksQ0FBQyxLQUFLO0FBQ2pCLG1CQUFXLEVBQUUsSUFBSSxDQUFDLFdBQVc7QUFDN0IsWUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJO0FBQ2YsV0FBRyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxjQUFZLElBQUksQ0FBQyxFQUFFLEFBQUU7T0FDeEMsQ0FBQyxDQUFDOztBQUVILFVBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFOztBQUVoQixZQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsVUFBTyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztPQUM5QztLQUNGOztBQUVELFFBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUU7QUFDdEIsYUFBTyxDQUFDLElBQUksQ0FDVix5QkFBdUIsSUFBSSxDQUFDLEVBQUUsK0RBQzlCLDRDQUE0QyxDQUM3QyxDQUFDO0tBQ0g7OztBQUdELFFBQUksQ0FBQyxVQUFVLEdBQUcsa0JBQUssSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDOzs7QUFHeEMsUUFBSSxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsZ0JBQVEsQ0FBQztHQUNyRDs7ZUE3Q0csS0FBSzs7V0ErQ0Msc0JBQUc7QUFDWCxhQUFPLG1CQUFNLENBQ1gsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsaUJBQUksSUFBSSxFQUFFLFdBQVcsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUMvQyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLG1CQUFtQixFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQ3BELENBQUMsQ0FDRCxPQUFPLEVBQUUsQ0FDVCxJQUFJLEVBQUUsQ0FDTixPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUNsQixLQUFLLEVBQUUsQ0FBQztLQUNWOzs7V0FFSyxrQkFBRztBQUNQLGFBQU8sa0JBQUssSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxTQUFTLENBQUMsQ0FBQyxDQUFDO0tBQzlFOzs7U0E1REcsS0FBSzs7O0FBK0RYLE1BQU0sQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby9raWJhbmEvc3JjL3VpL3VpX2FwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNoYWluLCBnZXQsIG5vb3AsIG9uY2UsIHBpY2sgfSBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcblxuY2xhc3MgVWlBcHAge1xuICBjb25zdHJ1Y3Rvcih1aUV4cG9ydHMsIHNwZWMpIHtcbiAgICB0aGlzLnVpRXhwb3J0cyA9IHVpRXhwb3J0cztcbiAgICB0aGlzLnNwZWMgPSBzcGVjIHx8IHt9O1xuXG4gICAgdGhpcy5pZCA9IHRoaXMuc3BlYy5pZDtcbiAgICBpZiAoIXRoaXMuaWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRXZlcnkgYXBwIG11c3Qgc3BlY2lmeSBpdFxcJ3MgaWQnKTtcbiAgICB9XG5cbiAgICB0aGlzLm1haW4gPSB0aGlzLnNwZWMubWFpbjtcbiAgICB0aGlzLnRpdGxlID0gdGhpcy5zcGVjLnRpdGxlO1xuICAgIHRoaXMuZGVzY3JpcHRpb24gPSB0aGlzLnNwZWMuZGVzY3JpcHRpb247XG4gICAgdGhpcy5pY29uID0gdGhpcy5zcGVjLmljb247XG4gICAgdGhpcy5oaWRkZW4gPSAhIXRoaXMuc3BlYy5oaWRkZW47XG4gICAgdGhpcy5saXN0ZWQgPSB0aGlzLnNwZWMubGlzdGVkID09IG51bGwgPyAhdGhpcy5oaWRkZW4gOiB0aGlzLnNwZWMubGlzdGVkO1xuICAgIHRoaXMudGVtcGxhdGVOYW1lID0gdGhpcy5zcGVjLnRlbXBsYXRlTmFtZSB8fCAndWlfYXBwJztcblxuICAgIGlmICghdGhpcy5oaWRkZW4pIHtcbiAgICAgIC8vIGFueSBub24taGlkZGVuIGFwcCBoYXMgYSB1cmwsIHNvIGl0IGdldHMgYSBcIm5hdkxpbmtcIlxuICAgICAgdGhpcy5uYXZMaW5rID0gdGhpcy51aUV4cG9ydHMubmF2TGlua3MubmV3KHtcbiAgICAgICAgdGl0bGU6IHRoaXMudGl0bGUsXG4gICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLmRlc2NyaXB0aW9uLFxuICAgICAgICBpY29uOiB0aGlzLmljb24sXG4gICAgICAgIHVybDogdGhpcy5zcGVjLnVybCB8fCBgL2FwcC8ke3RoaXMuaWR9YFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghdGhpcy5saXN0ZWQpIHtcbiAgICAgICAgLy8gdW5saXN0ZWQgYXBwcyByZW1vdmUgdGhlaXIgbmF2TGlua3MgZnJvbSB0aGUgdWlFeHBvcnRzIGNvbGxlY3Rpb24gdGhvdWdoXG4gICAgICAgIHRoaXMudWlFeHBvcnRzLm5hdkxpbmtzLmRlbGV0ZSh0aGlzLm5hdkxpbmspO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLnNwZWMuYXV0b2xvYWQpIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgYFwiYXV0b2xvYWRcIiAodXNlZCBieSAke3RoaXMuaWR9IGFwcCkgaXMgbm8gbG9uZ2VyIGEgdmFsaWQgYXBwIGNvbmZpZ3VyYXRpb24gZGlyZWN0aXZlLmAgK1xuICAgICAgICAnVXNlIHRoZSBcXGB1aS9hdXRvbG9hZC8qXFxgIG1vZHVsZXMgaW5zdGVhZC4nXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIG9uY2UgdGhpcyByZXNvbHZlcywgbm8gcmVhc29uIHRvIHJ1biBpdCBhZ2FpblxuICAgIHRoaXMuZ2V0TW9kdWxlcyA9IG9uY2UodGhpcy5nZXRNb2R1bGVzKTtcblxuICAgIC8vIHZhcmlhYmxlcyB0aGF0IGFyZSBpbmplY3RlZCBpbnRvIHRoZSBicm93c2VyLCBtdXN0IHNlcmlhbGl6ZSB0byBKU09OXG4gICAgdGhpcy5nZXRJbmplY3RlZFZhcnMgPSB0aGlzLnNwZWMuaW5qZWN0VmFycyB8fCBub29wO1xuICB9XG5cbiAgZ2V0TW9kdWxlcygpIHtcbiAgICByZXR1cm4gY2hhaW4oW1xuICAgICAgdGhpcy51aUV4cG9ydHMuZmluZChnZXQodGhpcywgJ3NwZWMudXNlcycsIFtdKSksXG4gICAgICB0aGlzLnVpRXhwb3J0cy5maW5kKFsnY2hyb21lTmF2Q29udHJvbHMnLCAnaGFja3MnXSksXG4gICAgXSlcbiAgICAuZmxhdHRlbigpXG4gICAgLnVuaXEoKVxuICAgIC51bnNoaWZ0KHRoaXMubWFpbilcbiAgICAudmFsdWUoKTtcbiAgfVxuXG4gIHRvSlNPTigpIHtcbiAgICByZXR1cm4gcGljayh0aGlzLCBbJ2lkJywgJ3RpdGxlJywgJ2Rlc2NyaXB0aW9uJywgJ2ljb24nLCAnbWFpbicsICduYXZMaW5rJ10pO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gVWlBcHA7XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/ui/ui_app.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;sBAA6C,QAAQ;;;;IAG/C,KAAK;AACE,WADP,KAAK,CACG,SAAS,EAAE,IAAI,EAAE;0BADzB,KAAK;;AAEP,QAAI,CAAC,SAAS,GAAG,SAAS,CAAC;AAC3B,QAAI,CAAC,IAAI,GAAG,IAAI,IAAI,EAAE,CAAC;;AAEvB,QAAI,CAAC,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC;AACvB,QAAI,CAAC,IAAI,CAAC,EAAE,EAAE;AACZ,YAAM,IAAI,KAAK,CAAC,iCAAiC,CAAC,CAAC;KACpD;;AAED,QAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;AAC3B,QAAI,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC;AAC7B,QAAI,CAAC,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC;AACzC,QAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;AAC3B,QAAI,CAAC,MAAM,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;AACjC,QAAI,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,IAAI,GAAG,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;AACzE,QAAI,CAAC,YAAY,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,IAAI,QAAQ,CAAC;;AAEvD,QAAI,CAAC,IAAI,CAAC,MAAM,EAAE;;AAEhB,UAAI,CAAC,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,QAAQ,OAAI,CAAC;AACzC,aAAK,EAAE,IAAI,CAAC,KAAK;AACjB,mBAAW,EAAE,IAAI,CAAC,WAAW;AAC7B,YAAI,EAAE,IAAI,CAAC,IAAI;AACf,WAAG,EAAE,IAAI,CAAC,IAAI,CAAC,GAAG,cAAY,IAAI,CAAC,EAAE,AAAE;OACxC,CAAC,CAAC;;AAEH,UAAI,CAAC,IAAI,CAAC,MAAM,EAAE;;AAEhB,YAAI,CAAC,SAAS,CAAC,QAAQ,UAAO,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;OAC9C;KACF;;AAED,QAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;AACtB,aAAO,CAAC,IAAI,CACV,yBAAuB,IAAI,CAAC,EAAE,+DAC9B,4CAA4C,CAC7C,CAAC;KACH;;;AAGD,QAAI,CAAC,UAAU,GAAG,kBAAK,IAAI,CAAC,UAAU,CAAC,CAAC;;;AAGxC,QAAI,CAAC,eAAe,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,gBAAQ,CAAC;GACrD;;eA7CG,KAAK;;WA+CC,sBAAG;AACX,aAAO,mBAAM,CACX,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,iBAAI,IAAI,EAAE,WAAW,EAAE,EAAE,CAAC,CAAC,EAC/C,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,mBAAmB,EAAE,OAAO,CAAC,CAAC,CACpD,CAAC,CACD,OAAO,EAAE,CACT,IAAI,EAAE,CACN,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAClB,KAAK,EAAE,CAAC;KACV;;;WAEK,kBAAG;AACP,aAAO,kBAAK,IAAI,EAAE,CAAC,IAAI,EAAE,OAAO,EAAE,aAAa,EAAE,MAAM,EAAE,MAAM,EAAE,SAAS,CAAC,CAAC,CAAC;KAC9E;;;SA5DG,KAAK;;;AA+DX,MAAM,CAAC,OAAO,GAAG,KAAK,CAAC",
      "file": "/home/vio/kibana/src/ui/ui_app.js",
      "sourcesContent": [
        "import { chain, get, noop, once, pick } from 'lodash';\nimport _ from 'lodash';\n\nclass UiApp {\n  constructor(uiExports, spec) {\n    this.uiExports = uiExports;\n    this.spec = spec || {};\n\n    this.id = this.spec.id;\n    if (!this.id) {\n      throw new Error('Every app must specify it\\'s id');\n    }\n\n    this.main = this.spec.main;\n    this.title = this.spec.title;\n    this.description = this.spec.description;\n    this.icon = this.spec.icon;\n    this.hidden = !!this.spec.hidden;\n    this.listed = this.spec.listed == null ? !this.hidden : this.spec.listed;\n    this.templateName = this.spec.templateName || 'ui_app';\n\n    if (!this.hidden) {\n      // any non-hidden app has a url, so it gets a \"navLink\"\n      this.navLink = this.uiExports.navLinks.new({\n        title: this.title,\n        description: this.description,\n        icon: this.icon,\n        url: this.spec.url || `/app/${this.id}`\n      });\n\n      if (!this.listed) {\n        // unlisted apps remove their navLinks from the uiExports collection though\n        this.uiExports.navLinks.delete(this.navLink);\n      }\n    }\n\n    if (this.spec.autoload) {\n      console.warn(\n        `\"autoload\" (used by ${this.id} app) is no longer a valid app configuration directive.` +\n        'Use the \\`ui/autoload/*\\` modules instead.'\n      );\n    }\n\n    // once this resolves, no reason to run it again\n    this.getModules = once(this.getModules);\n\n    // variables that are injected into the browser, must serialize to JSON\n    this.getInjectedVars = this.spec.injectVars || noop;\n  }\n\n  getModules() {\n    return chain([\n      this.uiExports.find(get(this, 'spec.uses', [])),\n      this.uiExports.find(['chromeNavControls', 'hacks']),\n    ])\n    .flatten()\n    .uniq()\n    .unshift(this.main)\n    .value();\n  }\n\n  toJSON() {\n    return pick(this, ['id', 'title', 'description', 'icon', 'main', 'navLink']);\n  }\n}\n\nmodule.exports = UiApp;\n"
      ]
    },
    "mtime": 1467036622893
  },
  "{\"filename\":\"/home/vio/kibana/src/ui/ui_nav_link_collection.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "sortBy"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "sortBy",
                "local": "sortBy"
              }
            ]
          },
          {
            "source": "./ui_nav_link",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "UiNavLink"
              }
            ]
          },
          {
            "source": "../utils/collection",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Collection"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "UiNavLinkCollection"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "UiNavLinkCollection",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "get",
        "inherits",
        "create-class",
        "class-call-check",
        "to-consumable-array",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i]; return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _lodash = require('lodash');\n\nvar _ui_nav_link = require('./ui_nav_link');\n\nvar _ui_nav_link2 = _interopRequireDefault(_ui_nav_link);\n\nvar _utilsCollection = require('../utils/collection');\n\nvar _utilsCollection2 = _interopRequireDefault(_utilsCollection);\n\nvar inOrderCache = Symbol('inOrder');\n\nvar UiNavLinkCollection = (function (_Collection) {\n  _inherits(UiNavLinkCollection, _Collection);\n\n  function UiNavLinkCollection(uiExports, parent) {\n    _classCallCheck(this, UiNavLinkCollection);\n\n    _get(Object.getPrototypeOf(UiNavLinkCollection.prototype), 'constructor', this).call(this);\n    this.uiExports = uiExports;\n  }\n\n  _createClass(UiNavLinkCollection, [{\n    key: 'new',\n    value: function _new(spec) {\n      var link = new _ui_nav_link2['default'](this.uiExports, spec);\n      this[inOrderCache] = null;\n      this.add(link);\n      return link;\n    }\n  }, {\n    key: 'delete',\n    value: function _delete(value) {\n      this[inOrderCache] = null;\n      return _get(Object.getPrototypeOf(UiNavLinkCollection.prototype), 'delete', this).call(this, value);\n    }\n  }, {\n    key: 'inOrder',\n    get: function get() {\n      if (!this[inOrderCache]) {\n        this[inOrderCache] = (0, _lodash.sortBy)([].concat(_toConsumableArray(this)), 'order');\n      }\n\n      return this[inOrderCache];\n    }\n  }]);\n\n  return UiNavLinkCollection;\n})(_utilsCollection2['default']);\n\nexports['default'] = UiNavLinkCollection;\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3VpL3VpX25hdl9saW5rX2NvbGxlY3Rpb24uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O3NCQUF1QixRQUFROzsyQkFDVCxlQUFlOzs7OytCQUNkLHFCQUFxQjs7OztBQUU1QyxJQUFNLFlBQVksR0FBRyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUM7O0lBRWxCLG1CQUFtQjtZQUFuQixtQkFBbUI7O0FBRTNCLFdBRlEsbUJBQW1CLENBRTFCLFNBQVMsRUFBRSxNQUFNLEVBQUU7MEJBRlosbUJBQW1COztBQUdwQywrQkFIaUIsbUJBQW1CLDZDQUc1QjtBQUNSLFFBQUksQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO0dBQzVCOztlQUxrQixtQkFBbUI7O1dBT25DLGNBQUMsSUFBSSxFQUFFO0FBQ1IsVUFBTSxJQUFJLEdBQUcsNkJBQWMsSUFBSSxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsQ0FBQztBQUNqRCxVQUFJLENBQUMsWUFBWSxDQUFDLEdBQUcsSUFBSSxDQUFDO0FBQzFCLFVBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDZixhQUFPLElBQUksQ0FBQztLQUNiOzs7V0FVSyxpQkFBQyxLQUFLLEVBQUU7QUFDWixVQUFJLENBQUMsWUFBWSxDQUFDLEdBQUcsSUFBSSxDQUFDO0FBQzFCLHdDQXhCaUIsbUJBQW1CLHdDQXdCaEIsS0FBSyxFQUFFO0tBQzVCOzs7U0FYVSxlQUFHO0FBQ1osVUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsRUFBRTtBQUN2QixZQUFJLENBQUMsWUFBWSxDQUFDLEdBQUcsaURBQVcsSUFBSSxJQUFHLE9BQU8sQ0FBQyxDQUFDO09BQ2pEOztBQUVELGFBQU8sSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO0tBQzNCOzs7U0FwQmtCLG1CQUFtQjs7O3FCQUFuQixtQkFBbUI7QUEyQnZDLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL2tpYmFuYS9zcmMvdWkvdWlfbmF2X2xpbmtfY29sbGVjdGlvbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNvcnRCeSB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgVWlOYXZMaW5rIGZyb20gJy4vdWlfbmF2X2xpbmsnO1xuaW1wb3J0IENvbGxlY3Rpb24gZnJvbSAnLi4vdXRpbHMvY29sbGVjdGlvbic7XG5cbmNvbnN0IGluT3JkZXJDYWNoZSA9IFN5bWJvbCgnaW5PcmRlcicpO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVaU5hdkxpbmtDb2xsZWN0aW9uIGV4dGVuZHMgQ29sbGVjdGlvbiB7XG5cbiAgY29uc3RydWN0b3IodWlFeHBvcnRzLCBwYXJlbnQpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMudWlFeHBvcnRzID0gdWlFeHBvcnRzO1xuICB9XG5cbiAgbmV3KHNwZWMpIHtcbiAgICBjb25zdCBsaW5rID0gbmV3IFVpTmF2TGluayh0aGlzLnVpRXhwb3J0cywgc3BlYyk7XG4gICAgdGhpc1tpbk9yZGVyQ2FjaGVdID0gbnVsbDtcbiAgICB0aGlzLmFkZChsaW5rKTtcbiAgICByZXR1cm4gbGluaztcbiAgfVxuXG4gIGdldCBpbk9yZGVyKCkge1xuICAgIGlmICghdGhpc1tpbk9yZGVyQ2FjaGVdKSB7XG4gICAgICB0aGlzW2luT3JkZXJDYWNoZV0gPSBzb3J0QnkoWy4uLnRoaXNdLCAnb3JkZXInKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpc1tpbk9yZGVyQ2FjaGVdO1xuICB9XG5cbiAgZGVsZXRlKHZhbHVlKSB7XG4gICAgdGhpc1tpbk9yZGVyQ2FjaGVdID0gbnVsbDtcbiAgICByZXR1cm4gc3VwZXIuZGVsZXRlKHZhbHVlKTtcbiAgfVxuXG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/ui/ui_nav_link_collection.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;;;;;;;;;sBAAuB,QAAQ;;2BACT,eAAe;;;;+BACd,qBAAqB;;;;AAE5C,IAAM,YAAY,GAAG,MAAM,CAAC,SAAS,CAAC,CAAC;;IAElB,mBAAmB;YAAnB,mBAAmB;;AAE3B,WAFQ,mBAAmB,CAE1B,SAAS,EAAE,MAAM,EAAE;0BAFZ,mBAAmB;;AAGpC,+BAHiB,mBAAmB,6CAG5B;AACR,QAAI,CAAC,SAAS,GAAG,SAAS,CAAC;GAC5B;;eALkB,mBAAmB;;WAOnC,cAAC,IAAI,EAAE;AACR,UAAM,IAAI,GAAG,6BAAc,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;AACjD,UAAI,CAAC,YAAY,CAAC,GAAG,IAAI,CAAC;AAC1B,UAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;AACf,aAAO,IAAI,CAAC;KACb;;;WAUK,iBAAC,KAAK,EAAE;AACZ,UAAI,CAAC,YAAY,CAAC,GAAG,IAAI,CAAC;AAC1B,wCAxBiB,mBAAmB,wCAwBhB,KAAK,EAAE;KAC5B;;;SAXU,eAAG;AACZ,UAAI,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE;AACvB,YAAI,CAAC,YAAY,CAAC,GAAG,iDAAW,IAAI,IAAG,OAAO,CAAC,CAAC;OACjD;;AAED,aAAO,IAAI,CAAC,YAAY,CAAC,CAAC;KAC3B;;;SApBkB,mBAAmB;;;qBAAnB,mBAAmB;AA2BvC,CAAC",
      "file": "/home/vio/kibana/src/ui/ui_nav_link_collection.js",
      "sourcesContent": [
        "import { sortBy } from 'lodash';\nimport UiNavLink from './ui_nav_link';\nimport Collection from '../utils/collection';\n\nconst inOrderCache = Symbol('inOrder');\n\nexport default class UiNavLinkCollection extends Collection {\n\n  constructor(uiExports, parent) {\n    super();\n    this.uiExports = uiExports;\n  }\n\n  new(spec) {\n    const link = new UiNavLink(this.uiExports, spec);\n    this[inOrderCache] = null;\n    this.add(link);\n    return link;\n  }\n\n  get inOrder() {\n    if (!this[inOrderCache]) {\n      this[inOrderCache] = sortBy([...this], 'order');\n    }\n\n    return this[inOrderCache];\n  }\n\n  delete(value) {\n    this[inOrderCache] = null;\n    return super.delete(value);\n  }\n\n};\n"
      ]
    },
    "mtime": 1467036622893
  },
  "{\"filename\":\"/home/vio/kibana/src/ui/ui_nav_link.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "pick"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "pick",
                "local": "pick"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "join"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "join",
                "local": "join"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "UiNavLink"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "UiNavLink",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _lodash = require('lodash');\n\nvar _path = require('path');\n\nvar UiNavLink = (function () {\n  function UiNavLink(uiExports, spec) {\n    _classCallCheck(this, UiNavLink);\n\n    this.title = spec.title;\n    this.order = spec.order || 0;\n    this.url = '' + (uiExports.urlBasePath || '') + spec.url;\n    this.description = spec.description;\n    this.icon = spec.icon;\n    this.linkToLastSubUrl = spec.linkToLastSubUrl === false ? false : true;\n  }\n\n  _createClass(UiNavLink, [{\n    key: 'toJSON',\n    value: function toJSON() {\n      return (0, _lodash.pick)(this, ['title', 'url', 'order', 'description', 'icon', 'linkToLastSubUrl']);\n    }\n  }]);\n\n  return UiNavLink;\n})();\n\nexports['default'] = UiNavLink;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3VpL3VpX25hdl9saW5rLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7c0JBQXFCLFFBQVE7O29CQUNSLE1BQU07O0lBRU4sU0FBUztBQUNqQixXQURRLFNBQVMsQ0FDaEIsU0FBUyxFQUFFLElBQUksRUFBRTswQkFEVixTQUFTOztBQUUxQixRQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUM7QUFDeEIsUUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxJQUFJLENBQUMsQ0FBQztBQUM3QixRQUFJLENBQUMsR0FBRyxTQUFNLFNBQVMsQ0FBQyxXQUFXLElBQUksRUFBRSxDQUFBLEdBQUcsSUFBSSxDQUFDLEdBQUcsQUFBRSxDQUFDO0FBQ3ZELFFBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQztBQUNwQyxRQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUM7QUFDdEIsUUFBSSxDQUFDLGdCQUFnQixHQUFHLElBQUksQ0FBQyxnQkFBZ0IsS0FBSyxLQUFLLEdBQUcsS0FBSyxHQUFHLElBQUksQ0FBQztHQUN4RTs7ZUFSa0IsU0FBUzs7V0FVdEIsa0JBQUc7QUFDUCxhQUFPLGtCQUFLLElBQUksRUFBRSxDQUFDLE9BQU8sRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLEVBQUUsa0JBQWtCLENBQUMsQ0FBQyxDQUFDO0tBQ3pGOzs7U0Faa0IsU0FBUzs7O3FCQUFULFNBQVMiLCJmaWxlIjoiL2hvbWUvdmlvL2tpYmFuYS9zcmMvdWkvdWlfbmF2X2xpbmsuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwaWNrIH0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IGpvaW4gfSBmcm9tICdwYXRoJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVWlOYXZMaW5rIHtcbiAgY29uc3RydWN0b3IodWlFeHBvcnRzLCBzcGVjKSB7XG4gICAgdGhpcy50aXRsZSA9IHNwZWMudGl0bGU7XG4gICAgdGhpcy5vcmRlciA9IHNwZWMub3JkZXIgfHwgMDtcbiAgICB0aGlzLnVybCA9IGAke3VpRXhwb3J0cy51cmxCYXNlUGF0aCB8fCAnJ30ke3NwZWMudXJsfWA7XG4gICAgdGhpcy5kZXNjcmlwdGlvbiA9IHNwZWMuZGVzY3JpcHRpb247XG4gICAgdGhpcy5pY29uID0gc3BlYy5pY29uO1xuICAgIHRoaXMubGlua1RvTGFzdFN1YlVybCA9IHNwZWMubGlua1RvTGFzdFN1YlVybCA9PT0gZmFsc2UgPyBmYWxzZSA6IHRydWU7XG4gIH1cblxuICB0b0pTT04oKSB7XG4gICAgcmV0dXJuIHBpY2sodGhpcywgWyd0aXRsZScsICd1cmwnLCAnb3JkZXInLCAnZGVzY3JpcHRpb24nLCAnaWNvbicsICdsaW5rVG9MYXN0U3ViVXJsJ10pO1xuICB9XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/ui/ui_nav_link.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;sBAAqB,QAAQ;;oBACR,MAAM;;IAEN,SAAS;AACjB,WADQ,SAAS,CAChB,SAAS,EAAE,IAAI,EAAE;0BADV,SAAS;;AAE1B,QAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;AACxB,QAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,IAAI,CAAC,CAAC;AAC7B,QAAI,CAAC,GAAG,SAAM,SAAS,CAAC,WAAW,IAAI,EAAE,CAAA,GAAG,IAAI,CAAC,GAAG,AAAE,CAAC;AACvD,QAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC;AACpC,QAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;AACtB,QAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,gBAAgB,KAAK,KAAK,GAAG,KAAK,GAAG,IAAI,CAAC;GACxE;;eARkB,SAAS;;WAUtB,kBAAG;AACP,aAAO,kBAAK,IAAI,EAAE,CAAC,OAAO,EAAE,KAAK,EAAE,OAAO,EAAE,aAAa,EAAE,MAAM,EAAE,kBAAkB,CAAC,CAAC,CAAC;KACzF;;;SAZkB,SAAS;;;qBAAT,SAAS",
      "file": "/home/vio/kibana/src/ui/ui_nav_link.js",
      "sourcesContent": [
        "import { pick } from 'lodash';\nimport { join } from 'path';\n\nexport default class UiNavLink {\n  constructor(uiExports, spec) {\n    this.title = spec.title;\n    this.order = spec.order || 0;\n    this.url = `${uiExports.urlBasePath || ''}${spec.url}`;\n    this.description = spec.description;\n    this.icon = spec.icon;\n    this.linkToLastSubUrl = spec.linkToLastSubUrl === false ? false : true;\n  }\n\n  toJSON() {\n    return pick(this, ['title', 'url', 'order', 'description', 'icon', 'linkToLastSubUrl']);\n  }\n}\n"
      ]
    },
    "mtime": 1467036622893
  },
  "{\"filename\":\"/home/vio/kibana/src/ui/ui_bundle.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "path",
            "imported": [
              "join"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "join",
                "local": "join"
              }
            ]
          },
          {
            "source": "bluebird",
            "imported": [
              "promisify"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "promisify",
                "local": "promisify"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "async-to-generator"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _path = require('path');\n\nvar _bluebird = require('bluebird');\n\nvar read = (0, _bluebird.promisify)(require('fs').readFile);\nvar write = (0, _bluebird.promisify)(require('fs').writeFile);\nvar unlink = (0, _bluebird.promisify)(require('fs').unlink);\nvar stat = (0, _bluebird.promisify)(require('fs').stat);\n\nmodule.exports = (function () {\n  function UiBundle(opts) {\n    _classCallCheck(this, UiBundle);\n\n    opts = opts || {};\n    this.id = opts.id;\n    this.modules = opts.modules;\n    this.template = opts.template;\n    this.env = opts.env;\n\n    var pathBase = (0, _path.join)(this.env.workingDir, this.id);\n    this.entryPath = pathBase + '.entry.js';\n    this.outputPath = pathBase + '.bundle.js';\n  }\n\n  _createClass(UiBundle, [{\n    key: 'renderContent',\n    value: function renderContent() {\n      return this.template({\n        env: this.env,\n        bundle: this\n      });\n    }\n  }, {\n    key: 'readEntryFile',\n    value: _asyncToGenerator(function* () {\n      try {\n        var content = yield read(this.entryPath);\n        return content.toString('utf8');\n      } catch (e) {\n        return null;\n      }\n    })\n  }, {\n    key: 'writeEntryFile',\n    value: _asyncToGenerator(function* () {\n      return yield write(this.entryPath, this.renderContent(), { encoding: 'utf8' });\n    })\n  }, {\n    key: 'clearBundleFile',\n    value: _asyncToGenerator(function* () {\n      try {\n        yield unlink(this.outputPath);\n      } catch (e) {\n        return null;\n      }\n    })\n  }, {\n    key: 'checkForExistingOutput',\n    value: _asyncToGenerator(function* () {\n      try {\n        yield stat(this.outputPath);\n        return true;\n      } catch (e) {\n        return false;\n      }\n    })\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      return {\n        id: this.id,\n        modules: this.modules,\n        entryPath: this.entryPath,\n        outputPath: this.outputPath\n      };\n    }\n  }]);\n\n  return UiBundle;\n})();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3VpL3VpX2J1bmRsZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7OztvQkFBcUIsTUFBTTs7d0JBQ0QsVUFBVTs7QUFFcEMsSUFBTSxJQUFJLEdBQUcseUJBQVUsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQy9DLElBQU0sS0FBSyxHQUFHLHlCQUFVLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUNqRCxJQUFNLE1BQU0sR0FBRyx5QkFBVSxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDL0MsSUFBTSxJQUFJLEdBQUcseUJBQVUsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDOztBQUUzQyxNQUFNLENBQUMsT0FBTztBQUNELFdBRFUsUUFBUSxDQUNqQixJQUFJLEVBQUU7MEJBREcsUUFBUTs7QUFHM0IsUUFBSSxHQUFHLElBQUksSUFBSSxFQUFFLENBQUM7QUFDbEIsUUFBSSxDQUFDLEVBQUUsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDO0FBQ2xCLFFBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQztBQUM1QixRQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUM7QUFDOUIsUUFBSSxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDOztBQUVwQixRQUFNLFFBQVEsR0FBRyxnQkFBSyxJQUFJLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDcEQsUUFBSSxDQUFDLFNBQVMsR0FBTSxRQUFRLGNBQVcsQ0FBQztBQUN4QyxRQUFJLENBQUMsVUFBVSxHQUFNLFFBQVEsZUFBWSxDQUFDO0dBRTNDOztlQWJvQixRQUFROztXQWVoQix5QkFBRztBQUNkLGFBQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQztBQUNuQixXQUFHLEVBQUUsSUFBSSxDQUFDLEdBQUc7QUFDYixjQUFNLEVBQUUsSUFBSTtPQUNiLENBQUMsQ0FBQztLQUNKOzs7NkJBRWtCLGFBQUc7QUFDcEIsVUFBSTtBQUNGLFlBQU0sT0FBTyxHQUFHLE1BQU0sSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUMzQyxlQUFPLE9BQU8sQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUM7T0FDakMsQ0FDRCxPQUFPLENBQUMsRUFBRTtBQUNSLGVBQU8sSUFBSSxDQUFDO09BQ2I7S0FDRjs7OzZCQUVtQixhQUFHO0FBQ3JCLGFBQU8sTUFBTSxLQUFLLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsYUFBYSxFQUFFLEVBQUUsRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQztLQUNoRjs7OzZCQUVvQixhQUFHO0FBQ3RCLFVBQUk7QUFBRSxjQUFNLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7T0FBRSxDQUN0QyxPQUFPLENBQUMsRUFBRTtBQUFFLGVBQU8sSUFBSSxDQUFDO09BQUU7S0FDM0I7Ozs2QkFFMkIsYUFBRztBQUM3QixVQUFJO0FBQ0YsY0FBTSxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQzVCLGVBQU8sSUFBSSxDQUFDO09BQ2IsQ0FDRCxPQUFPLENBQUMsRUFBRTtBQUNSLGVBQU8sS0FBSyxDQUFDO09BQ2Q7S0FDRjs7O1dBRUssa0JBQUc7QUFDUCxhQUFPO0FBQ0wsVUFBRSxFQUFFLElBQUksQ0FBQyxFQUFFO0FBQ1gsZUFBTyxFQUFFLElBQUksQ0FBQyxPQUFPO0FBQ3JCLGlCQUFTLEVBQUUsSUFBSSxDQUFDLFNBQVM7QUFDekIsa0JBQVUsRUFBRSxJQUFJLENBQUMsVUFBVTtPQUM1QixDQUFDO0tBQ0g7OztTQTFEb0IsUUFBUTtJQTJEOUIsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8va2liYW5hL3NyYy91aS91aV9idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBqb2luIH0gZnJvbSAncGF0aCc7XG5pbXBvcnQgeyBwcm9taXNpZnkgfSBmcm9tICdibHVlYmlyZCc7XG5cbmNvbnN0IHJlYWQgPSBwcm9taXNpZnkocmVxdWlyZSgnZnMnKS5yZWFkRmlsZSk7XG5jb25zdCB3cml0ZSA9IHByb21pc2lmeShyZXF1aXJlKCdmcycpLndyaXRlRmlsZSk7XG5jb25zdCB1bmxpbmsgPSBwcm9taXNpZnkocmVxdWlyZSgnZnMnKS51bmxpbmspO1xuY29uc3Qgc3RhdCA9IHByb21pc2lmeShyZXF1aXJlKCdmcycpLnN0YXQpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIFVpQnVuZGxlIHtcbiAgY29uc3RydWN0b3Iob3B0cykge1xuXG4gICAgb3B0cyA9IG9wdHMgfHwge307XG4gICAgdGhpcy5pZCA9IG9wdHMuaWQ7XG4gICAgdGhpcy5tb2R1bGVzID0gb3B0cy5tb2R1bGVzO1xuICAgIHRoaXMudGVtcGxhdGUgPSBvcHRzLnRlbXBsYXRlO1xuICAgIHRoaXMuZW52ID0gb3B0cy5lbnY7XG5cbiAgICBjb25zdCBwYXRoQmFzZSA9IGpvaW4odGhpcy5lbnYud29ya2luZ0RpciwgdGhpcy5pZCk7XG4gICAgdGhpcy5lbnRyeVBhdGggPSBgJHtwYXRoQmFzZX0uZW50cnkuanNgO1xuICAgIHRoaXMub3V0cHV0UGF0aCA9IGAke3BhdGhCYXNlfS5idW5kbGUuanNgO1xuXG4gIH1cblxuICByZW5kZXJDb250ZW50KCkge1xuICAgIHJldHVybiB0aGlzLnRlbXBsYXRlKHtcbiAgICAgIGVudjogdGhpcy5lbnYsXG4gICAgICBidW5kbGU6IHRoaXNcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIHJlYWRFbnRyeUZpbGUoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCByZWFkKHRoaXMuZW50cnlQYXRoKTtcbiAgICAgIHJldHVybiBjb250ZW50LnRvU3RyaW5nKCd1dGY4Jyk7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICBhc3luYyB3cml0ZUVudHJ5RmlsZSgpIHtcbiAgICByZXR1cm4gYXdhaXQgd3JpdGUodGhpcy5lbnRyeVBhdGgsIHRoaXMucmVuZGVyQ29udGVudCgpLCB7IGVuY29kaW5nOiAndXRmOCcgfSk7XG4gIH1cblxuICBhc3luYyBjbGVhckJ1bmRsZUZpbGUoKSB7XG4gICAgdHJ5IHsgYXdhaXQgdW5saW5rKHRoaXMub3V0cHV0UGF0aCk7IH1cbiAgICBjYXRjaCAoZSkgeyByZXR1cm4gbnVsbDsgfVxuICB9XG5cbiAgYXN5bmMgY2hlY2tGb3JFeGlzdGluZ091dHB1dCgpIHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgc3RhdCh0aGlzLm91dHB1dFBhdGgpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgdG9KU09OKCkge1xuICAgIHJldHVybiB7XG4gICAgICBpZDogdGhpcy5pZCxcbiAgICAgIG1vZHVsZXM6IHRoaXMubW9kdWxlcyxcbiAgICAgIGVudHJ5UGF0aDogdGhpcy5lbnRyeVBhdGgsXG4gICAgICBvdXRwdXRQYXRoOiB0aGlzLm91dHB1dFBhdGhcbiAgICB9O1xuICB9XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/ui/ui_bundle.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;oBAAqB,MAAM;;wBACD,UAAU;;AAEpC,IAAM,IAAI,GAAG,yBAAU,OAAO,CAAC,IAAI,CAAC,CAAC,QAAQ,CAAC,CAAC;AAC/C,IAAM,KAAK,GAAG,yBAAU,OAAO,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,CAAC;AACjD,IAAM,MAAM,GAAG,yBAAU,OAAO,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,CAAC;AAC/C,IAAM,IAAI,GAAG,yBAAU,OAAO,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC;;AAE3C,MAAM,CAAC,OAAO;AACD,WADU,QAAQ,CACjB,IAAI,EAAE;0BADG,QAAQ;;AAG3B,QAAI,GAAG,IAAI,IAAI,EAAE,CAAC;AAClB,QAAI,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC;AAClB,QAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;AAC5B,QAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;AAC9B,QAAI,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC;;AAEpB,QAAM,QAAQ,GAAG,gBAAK,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC;AACpD,QAAI,CAAC,SAAS,GAAM,QAAQ,cAAW,CAAC;AACxC,QAAI,CAAC,UAAU,GAAM,QAAQ,eAAY,CAAC;GAE3C;;eAboB,QAAQ;;WAehB,yBAAG;AACd,aAAO,IAAI,CAAC,QAAQ,CAAC;AACnB,WAAG,EAAE,IAAI,CAAC,GAAG;AACb,cAAM,EAAE,IAAI;OACb,CAAC,CAAC;KACJ;;;6BAEkB,aAAG;AACpB,UAAI;AACF,YAAM,OAAO,GAAG,MAAM,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;AAC3C,eAAO,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;OACjC,CACD,OAAO,CAAC,EAAE;AACR,eAAO,IAAI,CAAC;OACb;KACF;;;6BAEmB,aAAG;AACrB,aAAO,MAAM,KAAK,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,aAAa,EAAE,EAAE,EAAE,QAAQ,EAAE,MAAM,EAAE,CAAC,CAAC;KAChF;;;6BAEoB,aAAG;AACtB,UAAI;AAAE,cAAM,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;OAAE,CACtC,OAAO,CAAC,EAAE;AAAE,eAAO,IAAI,CAAC;OAAE;KAC3B;;;6BAE2B,aAAG;AAC7B,UAAI;AACF,cAAM,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;AAC5B,eAAO,IAAI,CAAC;OACb,CACD,OAAO,CAAC,EAAE;AACR,eAAO,KAAK,CAAC;OACd;KACF;;;WAEK,kBAAG;AACP,aAAO;AACL,UAAE,EAAE,IAAI,CAAC,EAAE;AACX,eAAO,EAAE,IAAI,CAAC,OAAO;AACrB,iBAAS,EAAE,IAAI,CAAC,SAAS;AACzB,kBAAU,EAAE,IAAI,CAAC,UAAU;OAC5B,CAAC;KACH;;;SA1DoB,QAAQ;IA2D9B,CAAC",
      "file": "/home/vio/kibana/src/ui/ui_bundle.js",
      "sourcesContent": [
        "import { join } from 'path';\nimport { promisify } from 'bluebird';\n\nconst read = promisify(require('fs').readFile);\nconst write = promisify(require('fs').writeFile);\nconst unlink = promisify(require('fs').unlink);\nconst stat = promisify(require('fs').stat);\n\nmodule.exports = class UiBundle {\n  constructor(opts) {\n\n    opts = opts || {};\n    this.id = opts.id;\n    this.modules = opts.modules;\n    this.template = opts.template;\n    this.env = opts.env;\n\n    const pathBase = join(this.env.workingDir, this.id);\n    this.entryPath = `${pathBase}.entry.js`;\n    this.outputPath = `${pathBase}.bundle.js`;\n\n  }\n\n  renderContent() {\n    return this.template({\n      env: this.env,\n      bundle: this\n    });\n  }\n\n  async readEntryFile() {\n    try {\n      const content = await read(this.entryPath);\n      return content.toString('utf8');\n    }\n    catch (e) {\n      return null;\n    }\n  }\n\n  async writeEntryFile() {\n    return await write(this.entryPath, this.renderContent(), { encoding: 'utf8' });\n  }\n\n  async clearBundleFile() {\n    try { await unlink(this.outputPath); }\n    catch (e) { return null; }\n  }\n\n  async checkForExistingOutput() {\n    try {\n      await stat(this.outputPath);\n      return true;\n    }\n    catch (e) {\n      return false;\n    }\n  }\n\n  toJSON() {\n    return {\n      id: this.id,\n      modules: this.modules,\n      entryPath: this.entryPath,\n      outputPath: this.outputPath\n    };\n  }\n};\n"
      ]
    },
    "mtime": 1467036622893
  },
  "{\"filename\":\"/home/vio/kibana/src/ui/ui_bundle_collection.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./ui_bundle",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "UiBundle"
              }
            ]
          },
          {
            "source": "./app_entry_template",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "appEntryTemplate"
              }
            ]
          },
          {
            "source": "fs",
            "imported": [
              "readFileSync"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "readFileSync",
                "local": "readSync"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "pull",
              "transform",
              "pluck"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "pull",
                "local": "pull"
              },
              {
                "kind": "named",
                "imported": "transform",
                "local": "transform"
              },
              {
                "kind": "named",
                "imported": "pluck",
                "local": "pluck"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "join"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "join",
                "local": "join"
              }
            ]
          },
          {
            "source": "bluebird",
            "imported": [
              "resolve",
              "promisify"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "resolve",
                "local": "resolve"
              },
              {
                "kind": "named",
                "imported": "promisify",
                "local": "promisify"
              }
            ]
          },
          {
            "source": "minimatch",
            "imported": [
              "makeRe"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "makeRe",
                "local": "makeRe"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "async-to-generator",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _ui_bundle = require('./ui_bundle');\n\nvar _ui_bundle2 = _interopRequireDefault(_ui_bundle);\n\nvar _app_entry_template = require('./app_entry_template');\n\nvar _app_entry_template2 = _interopRequireDefault(_app_entry_template);\n\nvar _fs = require('fs');\n\nvar _lodash = require('lodash');\n\nvar _path = require('path');\n\nvar _bluebird = require('bluebird');\n\nvar _minimatch = require('minimatch');\n\nvar rimraf = (0, _bluebird.promisify)(require('rimraf'));\nvar mkdirp = (0, _bluebird.promisify)(require('mkdirp'));\nvar unlink = (0, _bluebird.promisify)(require('fs').unlink);\nvar readdir = (0, _bluebird.promisify)(require('fs').readdir);\n\nvar UiBundleCollection = (function () {\n  function UiBundleCollection(bundlerEnv, filter) {\n    _classCallCheck(this, UiBundleCollection);\n\n    this.each = [];\n    this.env = bundlerEnv;\n    this.filter = (0, _minimatch.makeRe)(filter || '*', {\n      noglobstar: true,\n      noext: true,\n      matchBase: true\n    });\n  }\n\n  _createClass(UiBundleCollection, [{\n    key: 'add',\n    value: function add(bundle) {\n      if (!(bundle instanceof _ui_bundle2['default'])) {\n        throw new TypeError('expected bundle to be an instance of UiBundle');\n      }\n\n      if (this.filter.test(bundle.id)) {\n        this.each.push(bundle);\n      }\n    }\n  }, {\n    key: 'addApp',\n    value: function addApp(app) {\n      this.add(new _ui_bundle2['default']({\n        id: app.id,\n        modules: app.getModules(),\n        template: _app_entry_template2['default'],\n        env: this.env\n      }));\n    }\n  }, {\n    key: 'desc',\n    value: function desc() {\n      switch (this.each.length) {\n        case 0:\n          return '0 bundles';\n        case 1:\n          return 'bundle for ' + this.each[0].id;\n        default:\n          var ids = this.getIds();\n          var last = ids.pop();\n          var commas = ids.join(', ');\n          return 'bundles for ' + commas + ' and ' + last;\n      }\n    }\n  }, {\n    key: 'ensureDir',\n    value: _asyncToGenerator(function* () {\n      yield mkdirp(this.env.workingDir);\n    })\n  }, {\n    key: 'writeEntryFiles',\n    value: _asyncToGenerator(function* () {\n      yield this.ensureDir();\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.each[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var bundle = _step.value;\n\n          var existing = yield bundle.readEntryFile();\n          var expected = bundle.renderContent();\n\n          if (existing !== expected) {\n            yield bundle.writeEntryFile();\n            yield bundle.clearBundleFile();\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator['return']) {\n            _iterator['return']();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    })\n  }, {\n    key: 'getInvalidBundles',\n    value: _asyncToGenerator(function* () {\n      var invalids = new UiBundleCollection(this.env);\n\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = this.each[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var bundle = _step2.value;\n\n          var exists = yield bundle.checkForExistingOutput();\n          if (!exists) {\n            invalids.add(bundle);\n          }\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2['return']) {\n            _iterator2['return']();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      return invalids;\n    })\n  }, {\n    key: 'toWebpackEntries',\n    value: function toWebpackEntries() {\n      return (0, _lodash.transform)(this.each, function (entries, bundle) {\n        entries[bundle.id] = bundle.entryPath;\n      }, {});\n    }\n  }, {\n    key: 'getIds',\n    value: function getIds() {\n      return (0, _lodash.pluck)(this.each, 'id');\n    }\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      return this.each;\n    }\n  }]);\n\n  return UiBundleCollection;\n})();\n\nmodule.exports = UiBundleCollection;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3VpL3VpX2J1bmRsZV9jb2xsZWN0aW9uLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7eUJBS3FCLGFBQWE7Ozs7a0NBQ0wsc0JBQXNCOzs7O2tCQUNWLElBQUk7O3NCQUNOLFFBQVE7O29CQUMxQixNQUFNOzt3QkFDUSxVQUFVOzt5QkFDdEIsV0FBVzs7QUFYbEMsSUFBTSxNQUFNLEdBQUcseUJBQVUsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7QUFDNUMsSUFBTSxNQUFNLEdBQUcseUJBQVUsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7QUFDNUMsSUFBTSxNQUFNLEdBQUcseUJBQVUsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQy9DLElBQU0sT0FBTyxHQUFHLHlCQUFVLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQzs7SUFVM0Msa0JBQWtCO0FBQ1gsV0FEUCxrQkFBa0IsQ0FDVixVQUFVLEVBQUUsTUFBTSxFQUFFOzBCQUQ1QixrQkFBa0I7O0FBRXBCLFFBQUksQ0FBQyxJQUFJLEdBQUcsRUFBRSxDQUFDO0FBQ2YsUUFBSSxDQUFDLEdBQUcsR0FBRyxVQUFVLENBQUM7QUFDdEIsUUFBSSxDQUFDLE1BQU0sR0FBRyx1QkFBTyxNQUFNLElBQUksR0FBRyxFQUFFO0FBQ2xDLGdCQUFVLEVBQUUsSUFBSTtBQUNoQixXQUFLLEVBQUUsSUFBSTtBQUNYLGVBQVMsRUFBRSxJQUFJO0tBQ2hCLENBQUMsQ0FBQztHQUNKOztlQVRHLGtCQUFrQjs7V0FXbkIsYUFBQyxNQUFNLEVBQUU7QUFDVixVQUFJLEVBQUUsTUFBTSxtQ0FBb0IsQUFBQyxFQUFFO0FBQ2pDLGNBQU0sSUFBSSxTQUFTLENBQUMsK0NBQStDLENBQUMsQ0FBQztPQUN0RTs7QUFFRCxVQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUMvQixZQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztPQUN4QjtLQUNGOzs7V0FFSyxnQkFBQyxHQUFHLEVBQUU7QUFDVixVQUFJLENBQUMsR0FBRyxDQUFDLDJCQUFhO0FBQ3BCLFVBQUUsRUFBRSxHQUFHLENBQUMsRUFBRTtBQUNWLGVBQU8sRUFBRSxHQUFHLENBQUMsVUFBVSxFQUFFO0FBQ3pCLGdCQUFRLGlDQUFrQjtBQUMxQixXQUFHLEVBQUUsSUFBSSxDQUFDLEdBQUc7T0FDZCxDQUFDLENBQUMsQ0FBQztLQUNMOzs7V0FFRyxnQkFBRztBQUNMLGNBQVEsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNO0FBQ3RCLGFBQUssQ0FBQztBQUNKLGlCQUFPLFdBQVcsQ0FBQztBQUFBLEFBQ3JCLGFBQUssQ0FBQztBQUNKLGlDQUFxQixJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBRztBQUFBLEFBQ3pDO0FBQ0UsY0FBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO0FBQzFCLGNBQU0sSUFBSSxHQUFHLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQztBQUN2QixjQUFNLE1BQU0sR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQzlCLGtDQUFzQixNQUFNLGFBQVEsSUFBSSxDQUFHO0FBQUEsT0FDOUM7S0FDRjs7OzZCQUVjLGFBQUc7QUFDaEIsWUFBTSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQztLQUNuQzs7OzZCQUVvQixhQUFHO0FBQ3RCLFlBQU0sSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDOzs7Ozs7O0FBRXZCLDZCQUFtQixJQUFJLENBQUMsSUFBSSw4SEFBRTtjQUFyQixNQUFNOztBQUNiLGNBQU0sUUFBUSxHQUFHLE1BQU0sTUFBTSxDQUFDLGFBQWEsRUFBRSxDQUFDO0FBQzlDLGNBQU0sUUFBUSxHQUFHLE1BQU0sQ0FBQyxhQUFhLEVBQUUsQ0FBQzs7QUFFeEMsY0FBSSxRQUFRLEtBQUssUUFBUSxFQUFFO0FBQ3pCLGtCQUFNLE1BQU0sQ0FBQyxjQUFjLEVBQUUsQ0FBQztBQUM5QixrQkFBTSxNQUFNLENBQUMsZUFBZSxFQUFFLENBQUM7V0FDaEM7U0FDRjs7Ozs7Ozs7Ozs7Ozs7O0tBQ0Y7Ozs2QkFFc0IsYUFBRztBQUN4QixVQUFNLFFBQVEsR0FBRyxJQUFJLGtCQUFrQixDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQzs7Ozs7OztBQUVsRCw4QkFBbUIsSUFBSSxDQUFDLElBQUksbUlBQUU7Y0FBckIsTUFBTTs7QUFDYixjQUFNLE1BQU0sR0FBRyxNQUFNLE1BQU0sQ0FBQyxzQkFBc0IsRUFBRSxDQUFDO0FBQ3JELGNBQUksQ0FBQyxNQUFNLEVBQUU7QUFDWCxvQkFBUSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQztXQUN0QjtTQUNGOzs7Ozs7Ozs7Ozs7Ozs7O0FBRUQsYUFBTyxRQUFRLENBQUM7S0FDakI7OztXQUVlLDRCQUFHO0FBQ2pCLGFBQU8sdUJBQVUsSUFBSSxDQUFDLElBQUksRUFBRSxVQUFVLE9BQU8sRUFBRSxNQUFNLEVBQUU7QUFDckQsZUFBTyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsR0FBRyxNQUFNLENBQUMsU0FBUyxDQUFDO09BQ3ZDLEVBQUUsRUFBRSxDQUFDLENBQUM7S0FDUjs7O1dBRUssa0JBQUc7QUFDUCxhQUFPLG1CQUFNLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7S0FDL0I7OztXQUVLLGtCQUFHO0FBQ1AsYUFBTyxJQUFJLENBQUMsSUFBSSxDQUFDO0tBQ2xCOzs7U0F2Rkcsa0JBQWtCOzs7QUEwRnhCLE1BQU0sQ0FBQyxPQUFPLEdBQUcsa0JBQWtCLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL2tpYmFuYS9zcmMvdWkvdWlfYnVuZGxlX2NvbGxlY3Rpb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCByaW1yYWYgPSBwcm9taXNpZnkocmVxdWlyZSgncmltcmFmJykpO1xuY29uc3QgbWtkaXJwID0gcHJvbWlzaWZ5KHJlcXVpcmUoJ21rZGlycCcpKTtcbmNvbnN0IHVubGluayA9IHByb21pc2lmeShyZXF1aXJlKCdmcycpLnVubGluayk7XG5jb25zdCByZWFkZGlyID0gcHJvbWlzaWZ5KHJlcXVpcmUoJ2ZzJykucmVhZGRpcik7XG5cbmltcG9ydCBVaUJ1bmRsZSBmcm9tICcuL3VpX2J1bmRsZSc7XG5pbXBvcnQgYXBwRW50cnlUZW1wbGF0ZSBmcm9tICcuL2FwcF9lbnRyeV90ZW1wbGF0ZSc7XG5pbXBvcnQgeyByZWFkRmlsZVN5bmMgYXMgcmVhZFN5bmMgfSBmcm9tICdmcyc7XG5pbXBvcnQgeyBwdWxsLCB0cmFuc2Zvcm0sIHBsdWNrIH0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IGpvaW4gfSBmcm9tICdwYXRoJztcbmltcG9ydCB7IHJlc29sdmUsIHByb21pc2lmeSB9IGZyb20gJ2JsdWViaXJkJztcbmltcG9ydCB7IG1ha2VSZSB9IGZyb20gJ21pbmltYXRjaCc7XG5cbmNsYXNzIFVpQnVuZGxlQ29sbGVjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKGJ1bmRsZXJFbnYsIGZpbHRlcikge1xuICAgIHRoaXMuZWFjaCA9IFtdO1xuICAgIHRoaXMuZW52ID0gYnVuZGxlckVudjtcbiAgICB0aGlzLmZpbHRlciA9IG1ha2VSZShmaWx0ZXIgfHwgJyonLCB7XG4gICAgICBub2dsb2JzdGFyOiB0cnVlLFxuICAgICAgbm9leHQ6IHRydWUsXG4gICAgICBtYXRjaEJhc2U6IHRydWVcbiAgICB9KTtcbiAgfVxuXG4gIGFkZChidW5kbGUpIHtcbiAgICBpZiAoIShidW5kbGUgaW5zdGFuY2VvZiBVaUJ1bmRsZSkpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2V4cGVjdGVkIGJ1bmRsZSB0byBiZSBhbiBpbnN0YW5jZSBvZiBVaUJ1bmRsZScpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmZpbHRlci50ZXN0KGJ1bmRsZS5pZCkpIHtcbiAgICAgIHRoaXMuZWFjaC5wdXNoKGJ1bmRsZSk7XG4gICAgfVxuICB9XG5cbiAgYWRkQXBwKGFwcCkge1xuICAgIHRoaXMuYWRkKG5ldyBVaUJ1bmRsZSh7XG4gICAgICBpZDogYXBwLmlkLFxuICAgICAgbW9kdWxlczogYXBwLmdldE1vZHVsZXMoKSxcbiAgICAgIHRlbXBsYXRlOiBhcHBFbnRyeVRlbXBsYXRlLFxuICAgICAgZW52OiB0aGlzLmVudlxuICAgIH0pKTtcbiAgfVxuXG4gIGRlc2MoKSB7XG4gICAgc3dpdGNoICh0aGlzLmVhY2gubGVuZ3RoKSB7XG4gICAgICBjYXNlIDA6XG4gICAgICAgIHJldHVybiAnMCBidW5kbGVzJztcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgcmV0dXJuIGBidW5kbGUgZm9yICR7dGhpcy5lYWNoWzBdLmlkfWA7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBjb25zdCBpZHMgPSB0aGlzLmdldElkcygpO1xuICAgICAgICBjb25zdCBsYXN0ID0gaWRzLnBvcCgpO1xuICAgICAgICBjb25zdCBjb21tYXMgPSBpZHMuam9pbignLCAnKTtcbiAgICAgICAgcmV0dXJuIGBidW5kbGVzIGZvciAke2NvbW1hc30gYW5kICR7bGFzdH1gO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGVuc3VyZURpcigpIHtcbiAgICBhd2FpdCBta2RpcnAodGhpcy5lbnYud29ya2luZ0Rpcik7XG4gIH1cblxuICBhc3luYyB3cml0ZUVudHJ5RmlsZXMoKSB7XG4gICAgYXdhaXQgdGhpcy5lbnN1cmVEaXIoKTtcblxuICAgIGZvciAobGV0IGJ1bmRsZSBvZiB0aGlzLmVhY2gpIHtcbiAgICAgIGNvbnN0IGV4aXN0aW5nID0gYXdhaXQgYnVuZGxlLnJlYWRFbnRyeUZpbGUoKTtcbiAgICAgIGNvbnN0IGV4cGVjdGVkID0gYnVuZGxlLnJlbmRlckNvbnRlbnQoKTtcblxuICAgICAgaWYgKGV4aXN0aW5nICE9PSBleHBlY3RlZCkge1xuICAgICAgICBhd2FpdCBidW5kbGUud3JpdGVFbnRyeUZpbGUoKTtcbiAgICAgICAgYXdhaXQgYnVuZGxlLmNsZWFyQnVuZGxlRmlsZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldEludmFsaWRCdW5kbGVzKCkge1xuICAgIGNvbnN0IGludmFsaWRzID0gbmV3IFVpQnVuZGxlQ29sbGVjdGlvbih0aGlzLmVudik7XG5cbiAgICBmb3IgKGxldCBidW5kbGUgb2YgdGhpcy5lYWNoKSB7XG4gICAgICBjb25zdCBleGlzdHMgPSBhd2FpdCBidW5kbGUuY2hlY2tGb3JFeGlzdGluZ091dHB1dCgpO1xuICAgICAgaWYgKCFleGlzdHMpIHtcbiAgICAgICAgaW52YWxpZHMuYWRkKGJ1bmRsZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGludmFsaWRzO1xuICB9XG5cbiAgdG9XZWJwYWNrRW50cmllcygpIHtcbiAgICByZXR1cm4gdHJhbnNmb3JtKHRoaXMuZWFjaCwgZnVuY3Rpb24gKGVudHJpZXMsIGJ1bmRsZSkge1xuICAgICAgZW50cmllc1tidW5kbGUuaWRdID0gYnVuZGxlLmVudHJ5UGF0aDtcbiAgICB9LCB7fSk7XG4gIH1cblxuICBnZXRJZHMoKSB7XG4gICAgcmV0dXJuIHBsdWNrKHRoaXMuZWFjaCwgJ2lkJyk7XG4gIH1cblxuICB0b0pTT04oKSB7XG4gICAgcmV0dXJuIHRoaXMuZWFjaDtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFVpQnVuZGxlQ29sbGVjdGlvbjtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/ui/ui_bundle_collection.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/kibana/src/ui/ui_bundle_collection.js",
      "sourcesContent": [
        "const rimraf = promisify(require('rimraf'));\nconst mkdirp = promisify(require('mkdirp'));\nconst unlink = promisify(require('fs').unlink);\nconst readdir = promisify(require('fs').readdir);\n\nimport UiBundle from './ui_bundle';\nimport appEntryTemplate from './app_entry_template';\nimport { readFileSync as readSync } from 'fs';\nimport { pull, transform, pluck } from 'lodash';\nimport { join } from 'path';\nimport { resolve, promisify } from 'bluebird';\nimport { makeRe } from 'minimatch';\n\nclass UiBundleCollection {\n  constructor(bundlerEnv, filter) {\n    this.each = [];\n    this.env = bundlerEnv;\n    this.filter = makeRe(filter || '*', {\n      noglobstar: true,\n      noext: true,\n      matchBase: true\n    });\n  }\n\n  add(bundle) {\n    if (!(bundle instanceof UiBundle)) {\n      throw new TypeError('expected bundle to be an instance of UiBundle');\n    }\n\n    if (this.filter.test(bundle.id)) {\n      this.each.push(bundle);\n    }\n  }\n\n  addApp(app) {\n    this.add(new UiBundle({\n      id: app.id,\n      modules: app.getModules(),\n      template: appEntryTemplate,\n      env: this.env\n    }));\n  }\n\n  desc() {\n    switch (this.each.length) {\n      case 0:\n        return '0 bundles';\n      case 1:\n        return `bundle for ${this.each[0].id}`;\n      default:\n        const ids = this.getIds();\n        const last = ids.pop();\n        const commas = ids.join(', ');\n        return `bundles for ${commas} and ${last}`;\n    }\n  }\n\n  async ensureDir() {\n    await mkdirp(this.env.workingDir);\n  }\n\n  async writeEntryFiles() {\n    await this.ensureDir();\n\n    for (let bundle of this.each) {\n      const existing = await bundle.readEntryFile();\n      const expected = bundle.renderContent();\n\n      if (existing !== expected) {\n        await bundle.writeEntryFile();\n        await bundle.clearBundleFile();\n      }\n    }\n  }\n\n  async getInvalidBundles() {\n    const invalids = new UiBundleCollection(this.env);\n\n    for (let bundle of this.each) {\n      const exists = await bundle.checkForExistingOutput();\n      if (!exists) {\n        invalids.add(bundle);\n      }\n    }\n\n    return invalids;\n  }\n\n  toWebpackEntries() {\n    return transform(this.each, function (entries, bundle) {\n      entries[bundle.id] = bundle.entryPath;\n    }, {});\n  }\n\n  getIds() {\n    return pluck(this.each, 'id');\n  }\n\n  toJSON() {\n    return this.each;\n  }\n}\n\nmodule.exports = UiBundleCollection;\n"
      ]
    },
    "mtime": 1467036622893
  },
  "{\"filename\":\"/home/vio/kibana/src/ui/app_entry_template.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nmodule.exports = function (_ref) {\n  var env = _ref.env;\n  var bundle = _ref.bundle;\n\n  var pluginSlug = env.pluginInfo.sort().map(function (p) {\n    return ' *  - ' + p;\n  }).join('\\n');\n\n  var requires = bundle.modules.map(function (m) {\n    return 'require(\\'' + m + '\\');';\n  }).join('\\n');\n\n  return '\\n/**\\n * Test entry file\\n *\\n * This is programatically created and updated, do not modify\\n *\\n * context: ' + JSON.stringify(env.context) + '\\n * includes code from:\\n' + pluginSlug + '\\n *\\n */\\n\\nrequire(\\'ui/chrome\\');\\n' + requires + '\\nrequire(\\'ui/chrome\\').bootstrap(/* xoxo */);\\n\\n';\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3VpL2FwcF9lbnRyeV90ZW1wbGF0ZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU0sQ0FBQyxPQUFPLEdBQUcsVUFBVSxJQUFhLEVBQUU7TUFBZCxHQUFHLEdBQUosSUFBYSxDQUFaLEdBQUc7TUFBRSxNQUFNLEdBQVosSUFBYSxDQUFQLE1BQU07O0FBRXJDLE1BQU0sVUFBVSxHQUFHLEdBQUcsQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLENBQ3ZDLEdBQUcsQ0FBQyxVQUFBLENBQUM7V0FBSSxRQUFRLEdBQUcsQ0FBQztHQUFBLENBQUMsQ0FDdEIsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDOztBQUVaLE1BQU0sUUFBUSxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQzlCLEdBQUcsQ0FBQyxVQUFBLENBQUM7MEJBQWdCLENBQUM7R0FBSyxDQUFDLENBQzVCLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQzs7QUFFWiw0SEFNWSxJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsa0NBRXZDLFVBQVUsOENBS1YsUUFBUSx5REFHUjtDQUVELENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL2tpYmFuYS9zcmMvdWkvYXBwX2VudHJ5X3RlbXBsYXRlLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoe2VudiwgYnVuZGxlfSkge1xuXG4gIGNvbnN0IHBsdWdpblNsdWcgPSBlbnYucGx1Z2luSW5mby5zb3J0KClcbiAgLm1hcChwID0+ICcgKiAgLSAnICsgcClcbiAgLmpvaW4oJ1xcbicpO1xuXG4gIGNvbnN0IHJlcXVpcmVzID0gYnVuZGxlLm1vZHVsZXNcbiAgLm1hcChtID0+IGByZXF1aXJlKCcke219Jyk7YClcbiAgLmpvaW4oJ1xcbicpO1xuXG4gIHJldHVybiBgXG4vKipcbiAqIFRlc3QgZW50cnkgZmlsZVxuICpcbiAqIFRoaXMgaXMgcHJvZ3JhbWF0aWNhbGx5IGNyZWF0ZWQgYW5kIHVwZGF0ZWQsIGRvIG5vdCBtb2RpZnlcbiAqXG4gKiBjb250ZXh0OiAke0pTT04uc3RyaW5naWZ5KGVudi5jb250ZXh0KX1cbiAqIGluY2x1ZGVzIGNvZGUgZnJvbTpcbiR7cGx1Z2luU2x1Z31cbiAqXG4gKi9cblxucmVxdWlyZSgndWkvY2hyb21lJyk7XG4ke3JlcXVpcmVzfVxucmVxdWlyZSgndWkvY2hyb21lJykuYm9vdHN0cmFwKC8qIHhveG8gKi8pO1xuXG5gO1xuXG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/ui/app_entry_template.js"
      ],
      "names": [],
      "mappings": ";;AAAA,MAAM,CAAC,OAAO,GAAG,UAAU,IAAa,EAAE;MAAd,GAAG,GAAJ,IAAa,CAAZ,GAAG;MAAE,MAAM,GAAZ,IAAa,CAAP,MAAM;;AAErC,MAAM,UAAU,GAAG,GAAG,CAAC,UAAU,CAAC,IAAI,EAAE,CACvC,GAAG,CAAC,UAAA,CAAC;WAAI,QAAQ,GAAG,CAAC;GAAA,CAAC,CACtB,IAAI,CAAC,IAAI,CAAC,CAAC;;AAEZ,MAAM,QAAQ,GAAG,MAAM,CAAC,OAAO,CAC9B,GAAG,CAAC,UAAA,CAAC;0BAAgB,CAAC;GAAK,CAAC,CAC5B,IAAI,CAAC,IAAI,CAAC,CAAC;;AAEZ,4HAMY,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,OAAO,CAAC,kCAEvC,UAAU,8CAKV,QAAQ,yDAGR;CAED,CAAC",
      "file": "/home/vio/kibana/src/ui/app_entry_template.js",
      "sourcesContent": [
        "module.exports = function ({env, bundle}) {\n\n  const pluginSlug = env.pluginInfo.sort()\n  .map(p => ' *  - ' + p)\n  .join('\\n');\n\n  const requires = bundle.modules\n  .map(m => `require('${m}');`)\n  .join('\\n');\n\n  return `\n/**\n * Test entry file\n *\n * This is programatically created and updated, do not modify\n *\n * context: ${JSON.stringify(env.context)}\n * includes code from:\n${pluginSlug}\n *\n */\n\nrequire('ui/chrome');\n${requires}\nrequire('ui/chrome').bootstrap(/* xoxo */);\n\n`;\n\n};\n"
      ]
    },
    "mtime": 1467036622849
  },
  "{\"filename\":\"/home/vio/kibana/src/ui/ui_bundler_env.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "../utils/from_root",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "fromRoot"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "includes",
              "flow",
              "escapeRegExp"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "includes",
                "local": "includes"
              },
              {
                "kind": "named",
                "imported": "flow",
                "local": "flow"
              },
              {
                "kind": "named",
                "imported": "escapeRegExp",
                "local": "escapeRegExp"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "isString",
              "isArray",
              "isPlainObject",
              "get"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "isString",
                "local": "isString"
              },
              {
                "kind": "named",
                "imported": "isArray",
                "local": "isArray"
              },
              {
                "kind": "named",
                "imported": "isPlainObject",
                "local": "isPlainObject"
              },
              {
                "kind": "named",
                "imported": "get",
                "local": "get"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "keys"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "keys",
                "local": "keys"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _utilsFrom_root = require('../utils/from_root');\n\nvar _utilsFrom_root2 = _interopRequireDefault(_utilsFrom_root);\n\nvar _lodash = require('lodash');\n\nvar asRegExp = (0, _lodash.flow)(_lodash.escapeRegExp, function (path) {\n  var last = path.slice(-1);\n  if (last === '/' || last === '\\\\') {\n    // match a directory explicitly\n    return path + '.*';\n  } else {\n    // match a directory or files or just the absolute path\n    return path + '(?:\\\\.js$|$|\\\\\\\\|\\\\/)?';\n  }\n}, RegExp);\n\nvar arr = function arr(v) {\n  return [].concat(v || []);\n};\n\nmodule.exports = (function () {\n  function UiBundlerEnv(workingDir) {\n    _classCallCheck(this, UiBundlerEnv);\n\n    // the location that bundle entry files and all compiles files will\n    // be written\n    this.workingDir = workingDir;\n\n    // the context that the bundler is running in, this is not officially\n    // used for anything but it is serialized into the entry file to ensure\n    // that they are invalidated when the context changes\n    this.context = {};\n\n    // the plugins that are used to build this environment\n    // are tracked and embedded into the entry file so that when the\n    // environment changes we can rebuild the bundles\n    this.pluginInfo = [];\n\n    // regular expressions which will prevent webpack from parsing the file\n    this.noParse = [/node_modules[\\/\\\\](angular|elasticsearch-browser)[\\/\\\\]/, /node_modules[\\/\\\\](mocha|moment)[\\/\\\\]/];\n\n    // webpack aliases, like require paths, mapping a prefix to a directory\n    this.aliases = {\n      ui: (0, _utilsFrom_root2['default'])('src/ui/public'),\n      test_harness: (0, _utilsFrom_root2['default'])('src/test_harness/public')\n    };\n\n    // map of which plugins created which aliases\n    this.aliasOwners = {};\n\n    // webpack loaders map loader configuration to regexps\n    this.loaders = [];\n    this.postLoaders = [];\n  }\n\n  _createClass(UiBundlerEnv, [{\n    key: 'consumePlugin',\n    value: function consumePlugin(plugin) {\n      var tag = plugin.id + '@' + plugin.version;\n      if ((0, _lodash.includes)(this.pluginInfo, tag)) return;\n\n      if (plugin.publicDir) {\n        this.aliases['plugins/' + plugin.id] = plugin.publicDir;\n      }\n\n      this.pluginInfo.push(tag);\n    }\n  }, {\n    key: 'exportConsumer',\n    value: function exportConsumer(type) {\n      var _this = this;\n\n      switch (type) {\n        case 'loaders':\n          return function (plugin, spec) {\n            var _iteratorNormalCompletion = true;\n            var _didIteratorError = false;\n            var _iteratorError = undefined;\n\n            try {\n              for (var _iterator = arr(spec)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                var loader = _step.value;\n                _this.addLoader(loader);\n              }\n            } catch (err) {\n              _didIteratorError = true;\n              _iteratorError = err;\n            } finally {\n              try {\n                if (!_iteratorNormalCompletion && _iterator['return']) {\n                  _iterator['return']();\n                }\n              } finally {\n                if (_didIteratorError) {\n                  throw _iteratorError;\n                }\n              }\n            }\n          };\n\n        case 'postLoaders':\n          return function (plugin, spec) {\n            var _iteratorNormalCompletion2 = true;\n            var _didIteratorError2 = false;\n            var _iteratorError2 = undefined;\n\n            try {\n              for (var _iterator2 = arr(spec)[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n                var loader = _step2.value;\n                _this.addPostLoader(loader);\n              }\n            } catch (err) {\n              _didIteratorError2 = true;\n              _iteratorError2 = err;\n            } finally {\n              try {\n                if (!_iteratorNormalCompletion2 && _iterator2['return']) {\n                  _iterator2['return']();\n                }\n              } finally {\n                if (_didIteratorError2) {\n                  throw _iteratorError2;\n                }\n              }\n            }\n          };\n\n        case 'noParse':\n          return function (plugin, spec) {\n            var _iteratorNormalCompletion3 = true;\n            var _didIteratorError3 = false;\n            var _iteratorError3 = undefined;\n\n            try {\n              for (var _iterator3 = arr(spec)[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n                var re = _step3.value;\n                _this.addNoParse(re);\n              }\n            } catch (err) {\n              _didIteratorError3 = true;\n              _iteratorError3 = err;\n            } finally {\n              try {\n                if (!_iteratorNormalCompletion3 && _iterator3['return']) {\n                  _iterator3['return']();\n                }\n              } finally {\n                if (_didIteratorError3) {\n                  throw _iteratorError3;\n                }\n              }\n            }\n          };\n\n        case 'modules':\n          return function (plugin, spec) {\n            var _iteratorNormalCompletion4 = true;\n            var _didIteratorError4 = false;\n            var _iteratorError4 = undefined;\n\n            try {\n              for (var _iterator4 = (0, _lodash.keys)(spec)[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n                var id = _step4.value;\n                _this.addModule(id, spec[id], plugin.id);\n              }\n            } catch (err) {\n              _didIteratorError4 = true;\n              _iteratorError4 = err;\n            } finally {\n              try {\n                if (!_iteratorNormalCompletion4 && _iterator4['return']) {\n                  _iterator4['return']();\n                }\n              } finally {\n                if (_didIteratorError4) {\n                  throw _iteratorError4;\n                }\n              }\n            }\n          };\n      }\n    }\n  }, {\n    key: 'addContext',\n    value: function addContext(key, val) {\n      this.context[key] = val;\n    }\n  }, {\n    key: 'addLoader',\n    value: function addLoader(loader) {\n      this.loaders.push(loader);\n    }\n  }, {\n    key: 'addPostLoader',\n    value: function addPostLoader(loader) {\n      this.postLoaders.push(loader);\n    }\n  }, {\n    key: 'addNoParse',\n    value: function addNoParse(regExp) {\n      this.noParse.push(regExp);\n    }\n  }, {\n    key: 'addModule',\n    value: function addModule(id, spec, pluginId) {\n      this.claim(id, pluginId);\n\n      // configurable via spec\n      var path = undefined;\n      var parse = true;\n      var imports = null;\n      var exports = null;\n      var expose = null;\n\n      // basic style, just a path\n      if ((0, _lodash.isString)(spec)) path = spec;\n\n      if ((0, _lodash.isArray)(spec)) {\n        path = spec[0];\n        imports = spec[1];\n        exports = spec[2];\n      }\n\n      if ((0, _lodash.isPlainObject)(spec)) {\n        path = spec.path;\n        parse = (0, _lodash.get)(spec, 'parse', parse);\n        imports = (0, _lodash.get)(spec, 'imports', imports);\n        exports = (0, _lodash.get)(spec, 'exports', exports);\n        expose = (0, _lodash.get)(spec, 'expose', expose);\n      }\n\n      if (!path) {\n        throw new TypeError('Invalid spec definition, unable to identify path');\n      }\n\n      this.aliases[id] = path;\n\n      var loader = [];\n      if (imports) {\n        loader.push('imports?' + imports);\n      }\n\n      if (exports) loader.push('exports?' + exports);\n      if (expose) loader.push('expose?' + expose);\n      if (loader.length) this.loaders.push({ test: asRegExp(path), loader: loader.join('!') });\n      if (!parse) this.addNoParse(path);\n    }\n  }, {\n    key: 'claim',\n    value: function claim(id, pluginId) {\n      var owner = pluginId ? 'Plugin ' + pluginId : 'Kibana Server';\n\n      // TODO(spalger): we could do a lot more to detect colliding module defs\n      var existingOwner = this.aliasOwners[id] || this.aliasOwners[id + '$'];\n\n      if (existingOwner) {\n        throw new TypeError(owner + ' attempted to override export \"' + id + '\" from ' + existingOwner);\n      }\n\n      this.aliasOwners[id] = owner;\n    }\n  }]);\n\n  return UiBundlerEnv;\n})();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3VpL3VpX2J1bmRsZXJfZW52LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OzhCQUFxQixvQkFBb0I7Ozs7c0JBQ0ksUUFBUTs7QUFJckQsSUFBTSxRQUFRLEdBQUcsd0NBRWYsVUFBVSxJQUFJLEVBQUU7QUFDZCxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDNUIsTUFBSSxJQUFJLEtBQUssR0FBRyxJQUFJLElBQUksS0FBSyxJQUFJLEVBQUU7O0FBRWpDLFdBQU8sSUFBSSxHQUFHLElBQUksQ0FBQztHQUNwQixNQUFNOztBQUVMLFdBQU8sSUFBSSxHQUFHLHdCQUF3QixDQUFDO0dBQ3hDO0NBQ0YsRUFDRCxNQUFNLENBQ1AsQ0FBQzs7QUFFRixJQUFNLEdBQUcsR0FBRyxTQUFOLEdBQUcsQ0FBRyxDQUFDO1NBQUksRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDO0NBQUEsQ0FBQzs7QUFFcEMsTUFBTSxDQUFDLE9BQU87QUFDRCxXQURVLFlBQVksQ0FDckIsVUFBVSxFQUFFOzBCQURILFlBQVk7Ozs7QUFLL0IsUUFBSSxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUM7Ozs7O0FBSzdCLFFBQUksQ0FBQyxPQUFPLEdBQUcsRUFBRSxDQUFDOzs7OztBQUtsQixRQUFJLENBQUMsVUFBVSxHQUFHLEVBQUUsQ0FBQzs7O0FBR3JCLFFBQUksQ0FBQyxPQUFPLEdBQUcsQ0FDYix5REFBeUQsRUFDekQsd0NBQXdDLENBQ3pDLENBQUM7OztBQUdGLFFBQUksQ0FBQyxPQUFPLEdBQUc7QUFDYixRQUFFLEVBQUUsaUNBQVMsZUFBZSxDQUFDO0FBQzdCLGtCQUFZLEVBQUUsaUNBQVMseUJBQXlCLENBQUM7S0FDbEQsQ0FBQzs7O0FBR0YsUUFBSSxDQUFDLFdBQVcsR0FBRyxFQUFFLENBQUM7OztBQUd0QixRQUFJLENBQUMsT0FBTyxHQUFH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TUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDekYsVUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQ25DOzs7V0FFSSxlQUFDLEVBQUUsRUFBRSxRQUFRLEVBQUU7QUFDbEIsVUFBTSxLQUFLLEdBQUcsUUFBUSxlQUFhLFFBQVEsR0FBSyxlQUFlLENBQUM7OztBQUdoRSxVQUFNLGFBQWEsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUksRUFBRSxPQUFJLENBQUM7O0FBRXpFLFVBQUksYUFBYSxFQUFFO0FBQ2pCLGNBQU0sSUFBSSxTQUFTLENBQUksS0FBSyx1Q0FBa0MsRUFBRSxlQUFVLGFBQWEsQ0FBRyxDQUFDO09BQzVGOztBQUVELFVBQUksQ0FBQyxXQUFXLENBQUMsRUFBRSxDQUFDLEdBQUcsS0FBSyxDQUFDO0tBQzlCOzs7U0EvSW9CLFlBQVk7SUFnSmxDLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL2tpYmFuYS9zcmMvdWkvdWlfYnVuZGxlcl9lbnYuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZnJvbVJvb3QgZnJvbSAnLi4vdXRpbHMvZnJvbV9yb290JztcbmltcG9ydCB7IGluY2x1ZGVzLCBmbG93LCBlc2NhcGVSZWdFeHAgfSBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHsgaXNTdHJpbmcsIGlzQXJyYXksIGlzUGxhaW5PYmplY3QsIGdldCB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgeyBrZXlzIH0gZnJvbSAnbG9kYXNoJztcblxuY29uc3QgYXNSZWdFeHAgPSBmbG93KFxuICBlc2NhcGVSZWdFeHAsXG4gIGZ1bmN0aW9uIChwYXRoKSB7XG4gICAgY29uc3QgbGFzdCA9IHBhdGguc2xpY2UoLTEpO1xuICAgIGlmIChsYXN0ID09PSAnLycgfHwgbGFzdCA9PT0gJ1xcXFwnKSB7XG4gICAgICAvLyBtYXRjaCBhIGRpcmVjdG9yeSBleHBsaWNpdGx5XG4gICAgICByZXR1cm4gcGF0aCArICcuKic7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG1hdGNoIGEgZGlyZWN0b3J5IG9yIGZpbGVzIG9yIGp1c3QgdGhlIGFic29sdXRlIHBhdGhcbiAgICAgIHJldHVybiBwYXRoICsgJyg/OlxcXFwuanMkfCR8XFxcXFxcXFx8XFxcXC8pPyc7XG4gICAgfVxuICB9LFxuICBSZWdFeHBcbik7XG5cbmNvbnN0IGFyciA9IHYgPT4gW10uY29uY2F0KHYgfHwgW10pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIFVpQnVuZGxlckVudiB7XG4gIGNvbnN0cnVjdG9yKHdvcmtpbmdEaXIpIHtcblxuICAgIC8vIHRoZSBsb2NhdGlvbiB0aGF0IGJ1bmRsZSBlbnRyeSBmaWxlcyBhbmQgYWxsIGNvbXBpbGVzIGZpbGVzIHdpbGxcbiAgICAvLyBiZSB3cml0dGVuXG4gICAgdGhpcy53b3JraW5nRGlyID0gd29ya2luZ0RpcjtcblxuICAgIC8vIHRoZSBjb250ZXh0IHRoYXQgdGhlIGJ1bmRsZXIgaXMgcnVubmluZyBpbiwgdGhpcyBpcyBub3Qgb2ZmaWNpYWxseVxuICAgIC8vIHVzZWQgZm9yIGFueXRoaW5nIGJ1dCBpdCBpcyBzZXJpYWxpemVkIGludG8gdGhlIGVudHJ5IGZpbGUgdG8gZW5zdXJlXG4gICAgLy8gdGhhdCB0aGV5IGFyZSBpbnZhbGlkYXRlZCB3aGVuIHRoZSBjb250ZXh0IGNoYW5nZXNcbiAgICB0aGlzLmNvbnRleHQgPSB7fTtcblxuICAgIC8vIHRoZSBwbHVnaW5zIHRoYXQgYXJlIHVzZWQgdG8gYnVpbGQgdGhpcyBlbnZpcm9ubWVudFxuICAgIC8vIGFyZSB0cmFja2VkIGFuZCBlbWJlZGRlZCBpbnRvIHRoZSBlbnRyeSBmaWxlIHNvIHRoYXQgd2hlbiB0aGVcbiAgICAvLyBlbnZpcm9ubWVudCBjaGFuZ2VzIHdlIGNhbiByZWJ1aWxkIHRoZSBidW5kbGVzXG4gICAgdGhpcy5wbHVnaW5JbmZvID0gW107XG5cbiAgICAvLyByZWd1bGFyIGV4cHJlc3Npb25zIHdoaWNoIHdpbGwgcHJldmVudCB3ZWJwYWNrIGZyb20gcGFyc2luZyB0aGUgZmlsZVxuICAgIHRoaXMubm9QYXJzZSA9IFtcbiAgICAgIC9ub2RlX21vZHVsZXNbXFwvXFxcXF0oYW5ndWxhcnxlbGFzdGljc2VhcmNoLWJyb3dzZXIpW1xcL1xcXFxdLyxcbiAgICAgIC9ub2RlX21vZHVsZXNbXFwvXFxcXF0obW9jaGF8bW9tZW50KVtcXC9cXFxcXS9cbiAgICBdO1xuXG4gICAgLy8gd2VicGFjayBhbGlhc2VzLCBsaWtlIHJlcXVpcmUgcGF0aHMsIG1hcHBpbmcgYSBwcmVmaXggdG8gYSBkaXJlY3RvcnlcbiAgICB0aGlzLmFsaWFzZXMgPSB7XG4gICAgICB1aTogZnJvbVJvb3QoJ3NyYy91aS9wdWJsaWMnKSxcbiAgICAgIHRlc3RfaGFybmVzczogZnJvbVJvb3QoJ3NyYy90ZXN0X2hhcm5lc3MvcHVibGljJylcbiAgICB9O1xuXG4gICAgLy8gbWFwIG9mIHdoaWNoIHBsdWdpbnMgY3JlYXRlZCB3aGljaCBhbGlhc2VzXG4gICAgdGhpcy5hbGlhc093bmVycyA9IHt9O1xuXG4gICAgLy8gd2VicGFjayBsb2FkZXJzIG1hcCBsb2FkZXIgY29uZmlndXJhdGlvbiB0byByZWdleHBzXG4gICAgdGhpcy5sb2FkZXJzID0gW107XG4gICAgdGhpcy5wb3N0TG9hZGVycyA9IFtdO1xuICB9XG5cbiAgY29uc3VtZVBsdWdpbihwbHVnaW4pIHtcbiAgICBjb25zdCB0YWcgPSBgJHtwbHVnaW4uaWR9QCR7cGx1Z2luLnZlcnNpb259YDtcbiAgICBpZiAoaW5jbHVkZXModGhpcy5wbHVnaW5JbmZvLCB0YWcpKSByZXR1cm47XG5cbiAgICBpZiAocGx1Z2luLnB1YmxpY0Rpcikge1xuICAgICAgdGhpcy5hbGlhc2VzW2BwbHVnaW5zLyR7cGx1Z2luLmlkfWBdID0gcGx1Z2luLnB1YmxpY0RpcjtcbiAgICB9XG5cbiAgICB0aGlzLnBsdWdpbkluZm8ucHVzaCh0YWcpO1xuICB9XG5cbiAgZXhwb3J0Q29uc3VtZXIodHlwZSkge1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSAnbG9hZGVycyc6XG4gICAgICAgIHJldHVybiAocGx1Z2luLCBzcGVjKSA9PiB7XG4gICAgICAgICAgZm9yIChsZXQgbG9hZGVyIG9mIGFycihzcGVjKSkgdGhpcy5hZGRMb2FkZXIobG9hZGVyKTtcbiAgICAgICAgfTtcblxuICAgICAgY2FzZSAncG9zdExvYWRlcnMnOlxuICAgICAgICByZXR1cm4gKHBsdWdpbiwgc3BlYykgPT4ge1xuICAgICAgICAgIGZvciAobGV0IGxvYWRlciBvZiBhcnIoc3BlYykpIHRoaXMuYWRkUG9zdExvYWRlcihsb2FkZXIpO1xuICAgICAgICB9O1xuXG4gICAgICBjYXNlICdub1BhcnNlJzpcbiAgICAgICAgcmV0dXJuIChwbHVnaW4sIHNwZWMpID0+IHtcbiAgICAgICAgICBmb3IgKGxldCByZSBvZiBhcnIoc3BlYykpIHRoaXMuYWRkTm9QYXJzZShyZSk7XG4gICAgICAgIH07XG5cbiAgICAgIGNhc2UgJ21vZHVsZXMnOlxuICAgICAgICByZXR1cm4gKHBsdWdpbiwgc3BlYykgPT4ge1xuICAgICAgICAgIGZvciAobGV0IGlkIG9mIGtleXMoc3BlYykpIHRoaXMuYWRkTW9kdWxlKGlkLCBzcGVjW2lkXSwgcGx1Z2luLmlkKTtcbiAgICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBhZGRDb250ZXh0KGtleSwgdmFsKSB7XG4gICAgdGhpcy5jb250ZXh0W2tleV0gPSB2YWw7XG4gIH1cblxuICBhZGRMb2FkZXIobG9hZGVyKSB7XG4gICAgdGhpcy5sb2FkZXJzLnB1c2gobG9hZGVyKTtcbiAgfVxuXG4gIGFkZFBvc3RMb2FkZXIobG9hZGVyKSB7XG4gICAgdGhpcy5wb3N0TG9hZGVycy5wdXNoKGxvYWRlcik7XG4gIH1cblxuICBhZGROb1BhcnNlKHJlZ0V4cCkge1xuICAgIHRoaXMubm9QYXJzZS5wdXNoKHJlZ0V4cCk7XG4gIH1cblxuICBhZGRNb2R1bGUoaWQsIHNwZWMsIHBsdWdpbklkKSB7XG4gICAgdGhpcy5jbGFpbShpZCwgcGx1Z2luSWQpO1xuXG4gICAgLy8gY29uZmlndXJhYmxlIHZpYSBzcGVjXG4gICAgbGV0IHBhdGg7XG4gICAgbGV0IHBhcnNlID0gdHJ1ZTtcbiAgICBsZXQgaW1wb3J0cyA9IG51bGw7XG4gICAgbGV0IGV4cG9ydHMgPSBudWxsO1xuICAgIGxldCBleHBvc2UgPSBudWxsO1xuXG4gICAgLy8gYmFzaWMgc3R5bGUsIGp1c3QgYSBwYXRoXG4gICAgaWYgKGlzU3RyaW5nKHNwZWMpKSBwYXRoID0gc3BlYztcblxuICAgIGlmIChpc0FycmF5KHNwZWMpKSB7XG4gICAgICBwYXRoID0gc3BlY1swXTtcbiAgICAgIGltcG9ydHMgPSBzcGVjWzFdO1xuICAgICAgZXhwb3J0cyA9IHNwZWNbMl07XG4gICAgfVxuXG4gICAgaWYgKGlzUGxhaW5PYmplY3Qoc3BlYykpIHtcbiAgICAgIHBhdGggPSBzcGVjLnBhdGg7XG4gICAgICBwYXJzZSA9IGdldChzcGVjLCAncGFyc2UnLCBwYXJzZSk7XG4gICAgICBpbXBvcnRzID0gZ2V0KHNwZWMsICdpbXBvcnRzJywgaW1wb3J0cyk7XG4gICAgICBleHBvcnRzID0gZ2V0KHNwZWMsICdleHBvcnRzJywgZXhwb3J0cyk7XG4gICAgICBleHBvc2UgPSBnZXQoc3BlYywgJ2V4cG9zZScsIGV4cG9zZSk7XG4gICAgfVxuXG4gICAgaWYgKCFwYXRoKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIHNwZWMgZGVmaW5pdGlvbiwgdW5hYmxlIHRvIGlkZW50aWZ5IHBhdGgnKTtcbiAgICB9XG5cbiAgICB0aGlzLmFsaWFzZXNbaWRdID0gcGF0aDtcblxuICAgIGNvbnN0IGxvYWRlciA9IFtdO1xuICAgIGlmIChpbXBvcnRzKSB7XG4gICAgICBsb2FkZXIucHVzaChgaW1wb3J0cz8ke2ltcG9ydHN9YCk7XG4gICAgfVxuXG4gICAgaWYgKGV4cG9ydHMpIGxvYWRlci5wdXNoKGBleHBvcnRzPyR7ZXhwb3J0c31gKTtcbiAgICBpZiAoZXhwb3NlKSBsb2FkZXIucHVzaChgZXhwb3NlPyR7ZXhwb3NlfWApO1xuICAgIGlmIChsb2FkZXIubGVuZ3RoKSB0aGlzLmxvYWRlcnMucHVzaCh7IHRlc3Q6IGFzUmVnRXhwKHBhdGgpLCBsb2FkZXI6IGxvYWRlci5qb2luKCchJykgfSk7XG4gICAgaWYgKCFwYXJzZSkgdGhpcy5hZGROb1BhcnNlKHBhdGgpO1xuICB9XG5cbiAgY2xhaW0oaWQsIHBsdWdpbklkKSB7XG4gICAgY29uc3Qgb3duZXIgPSBwbHVnaW5JZCA/IGBQbHVnaW4gJHtwbHVnaW5JZH1gIDogJ0tpYmFuYSBTZXJ2ZXInO1xuXG4gICAgLy8gVE9ETyhzcGFsZ2VyKTogd2UgY291bGQgZG8gYSBsb3QgbW9yZSB0byBkZXRlY3QgY29sbGlkaW5nIG1vZHVsZSBkZWZzXG4gICAgY29uc3QgZXhpc3RpbmdPd25lciA9IHRoaXMuYWxpYXNPd25lcnNbaWRdIHx8IHRoaXMuYWxpYXNPd25lcnNbYCR7aWR9JGBdO1xuXG4gICAgaWYgKGV4aXN0aW5nT3duZXIpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYCR7b3duZXJ9IGF0dGVtcHRlZCB0byBvdmVycmlkZSBleHBvcnQgXCIke2lkfVwiIGZyb20gJHtleGlzdGluZ093bmVyfWApO1xuICAgIH1cblxuICAgIHRoaXMuYWxpYXNPd25lcnNbaWRdID0gb3duZXI7XG4gIH1cbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/ui/ui_bundler_env.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/kibana/src/ui/ui_bundler_env.js",
      "sourcesContent": [
        "import fromRoot from '../utils/from_root';\nimport { includes, flow, escapeRegExp } from 'lodash';\nimport { isString, isArray, isPlainObject, get } from 'lodash';\nimport { keys } from 'lodash';\n\nconst asRegExp = flow(\n  escapeRegExp,\n  function (path) {\n    const last = path.slice(-1);\n    if (last === '/' || last === '\\\\') {\n      // match a directory explicitly\n      return path + '.*';\n    } else {\n      // match a directory or files or just the absolute path\n      return path + '(?:\\\\.js$|$|\\\\\\\\|\\\\/)?';\n    }\n  },\n  RegExp\n);\n\nconst arr = v => [].concat(v || []);\n\nmodule.exports = class UiBundlerEnv {\n  constructor(workingDir) {\n\n    // the location that bundle entry files and all compiles files will\n    // be written\n    this.workingDir = workingDir;\n\n    // the context that the bundler is running in, this is not officially\n    // used for anything but it is serialized into the entry file to ensure\n    // that they are invalidated when the context changes\n    this.context = {};\n\n    // the plugins that are used to build this environment\n    // are tracked and embedded into the entry file so that when the\n    // environment changes we can rebuild the bundles\n    this.pluginInfo = [];\n\n    // regular expressions which will prevent webpack from parsing the file\n    this.noParse = [\n      /node_modules[\\/\\\\](angular|elasticsearch-browser)[\\/\\\\]/,\n      /node_modules[\\/\\\\](mocha|moment)[\\/\\\\]/\n    ];\n\n    // webpack aliases, like require paths, mapping a prefix to a directory\n    this.aliases = {\n      ui: fromRoot('src/ui/public'),\n      test_harness: fromRoot('src/test_harness/public')\n    };\n\n    // map of which plugins created which aliases\n    this.aliasOwners = {};\n\n    // webpack loaders map loader configuration to regexps\n    this.loaders = [];\n    this.postLoaders = [];\n  }\n\n  consumePlugin(plugin) {\n    const tag = `${plugin.id}@${plugin.version}`;\n    if (includes(this.pluginInfo, tag)) return;\n\n    if (plugin.publicDir) {\n      this.aliases[`plugins/${plugin.id}`] = plugin.publicDir;\n    }\n\n    this.pluginInfo.push(tag);\n  }\n\n  exportConsumer(type) {\n    switch (type) {\n      case 'loaders':\n        return (plugin, spec) => {\n          for (let loader of arr(spec)) this.addLoader(loader);\n        };\n\n      case 'postLoaders':\n        return (plugin, spec) => {\n          for (let loader of arr(spec)) this.addPostLoader(loader);\n        };\n\n      case 'noParse':\n        return (plugin, spec) => {\n          for (let re of arr(spec)) this.addNoParse(re);\n        };\n\n      case 'modules':\n        return (plugin, spec) => {\n          for (let id of keys(spec)) this.addModule(id, spec[id], plugin.id);\n        };\n    }\n  }\n\n  addContext(key, val) {\n    this.context[key] = val;\n  }\n\n  addLoader(loader) {\n    this.loaders.push(loader);\n  }\n\n  addPostLoader(loader) {\n    this.postLoaders.push(loader);\n  }\n\n  addNoParse(regExp) {\n    this.noParse.push(regExp);\n  }\n\n  addModule(id, spec, pluginId) {\n    this.claim(id, pluginId);\n\n    // configurable via spec\n    let path;\n    let parse = true;\n    let imports = null;\n    let exports = null;\n    let expose = null;\n\n    // basic style, just a path\n    if (isString(spec)) path = spec;\n\n    if (isArray(spec)) {\n      path = spec[0];\n      imports = spec[1];\n      exports = spec[2];\n    }\n\n    if (isPlainObject(spec)) {\n      path = spec.path;\n      parse = get(spec, 'parse', parse);\n      imports = get(spec, 'imports', imports);\n      exports = get(spec, 'exports', exports);\n      expose = get(spec, 'expose', expose);\n    }\n\n    if (!path) {\n      throw new TypeError('Invalid spec definition, unable to identify path');\n    }\n\n    this.aliases[id] = path;\n\n    const loader = [];\n    if (imports) {\n      loader.push(`imports?${imports}`);\n    }\n\n    if (exports) loader.push(`exports?${exports}`);\n    if (expose) loader.push(`expose?${expose}`);\n    if (loader.length) this.loaders.push({ test: asRegExp(path), loader: loader.join('!') });\n    if (!parse) this.addNoParse(path);\n  }\n\n  claim(id, pluginId) {\n    const owner = pluginId ? `Plugin ${pluginId}` : 'Kibana Server';\n\n    // TODO(spalger): we could do a lot more to detect colliding module defs\n    const existingOwner = this.aliasOwners[id] || this.aliasOwners[`${id}$`];\n\n    if (existingOwner) {\n      throw new TypeError(`${owner} attempted to override export \"${id}\" from ${existingOwner}`);\n    }\n\n    this.aliasOwners[id] = owner;\n  }\n};\n"
      ]
    },
    "mtime": 1467036622893
  },
  "{\"filename\":\"/home/vio/kibana/src/ui/settings/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "defaultsDeep",
              "partial"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "defaultsDeep",
                "local": "defaultsDeep"
              },
              {
                "kind": "named",
                "imported": "partial",
                "local": "partial"
              }
            ]
          },
          {
            "source": "./defaults",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "defaultsProvider"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "setupSettings",
            "kbnServer",
            "server",
            "config"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "setupSettings",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "kbnServer",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "server",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "config",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "extends",
        "define-property",
        "sliced-to-array",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }; })();\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports['default'] = setupSettings;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar _lodash = require('lodash');\n\nvar _defaults = require('./defaults');\n\nvar _defaults2 = _interopRequireDefault(_defaults);\n\nfunction setupSettings(kbnServer, server, config) {\n  var status = kbnServer.status.create('ui settings');\n  var uiSettings = {\n    getAll: getAll,\n    getDefaults: getDefaults,\n    getUserProvided: getUserProvided,\n    set: set,\n    setMany: setMany,\n    remove: remove\n  };\n\n  server.decorate('server', 'uiSettings', function () {\n    return uiSettings;\n  });\n  kbnServer.ready().then(mirrorEsStatus);\n\n  function getAll() {\n    return Promise.all([getDefaults(), getUserProvided()]).then(function (_ref) {\n      var _ref2 = _slicedToArray(_ref, 2);\n\n      var defaults = _ref2[0];\n      var user = _ref2[1];\n      return (0, _lodash.defaultsDeep)(user, defaults);\n    });\n  }\n\n  function getDefaults() {\n    return Promise.resolve((0, _defaults2['default'])());\n  }\n\n  function userSettingsNotFound(kibanaVersion) {\n    status.red('Could not find user-provided settings for Kibana ' + kibanaVersion);\n    return {};\n  }\n\n  function getUserProvided() {\n    var client = server.plugins.elasticsearch.client;\n\n    var clientSettings = getClientSettings(config);\n    return client.get(_extends({}, clientSettings)).then(function (res) {\n      return res._source;\n    })['catch']((0, _lodash.partial)(userSettingsNotFound, clientSettings.id)).then(function (user) {\n      return hydrateUserSettings(user);\n    });\n  }\n\n  function setMany(changes) {\n    var client = server.plugins.elasticsearch.client;\n\n    var clientSettings = getClientSettings(config);\n    return client.update(_extends({}, clientSettings, {\n      body: { doc: changes }\n    })).then(function () {\n      return {};\n    });\n  }\n\n  function set(key, value) {\n    return setMany(_defineProperty({}, key, value));\n  }\n\n  function remove(key) {\n    return set(key, null);\n  }\n\n  function mirrorEsStatus() {\n    var esStatus = kbnServer.status.getForPluginId('elasticsearch');\n\n    copyStatus();\n    esStatus.on('change', copyStatus);\n\n    function copyStatus() {\n      var state = esStatus.state;\n\n      var statusMessage = state === 'green' ? 'Ready' : 'Elasticsearch plugin is ' + state;\n      status[state](statusMessage);\n    }\n  }\n}\n\nfunction hydrateUserSettings(user) {\n  return Object.keys(user).reduce(expand, {});\n  function expand(expanded, key) {\n    var userValue = user[key];\n    if (userValue !== null) {\n      expanded[key] = { userValue: userValue };\n    }\n    return expanded;\n  }\n}\n\nfunction getClientSettings(config) {\n  var index = config.get('kibana.index');\n  var id = config.get('pkg.version');\n  var type = 'config';\n  return { index: index, type: type, id: id };\n}\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3VpL3NldHRpbmdzL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7cUJBR3dCLGFBQWE7Ozs7OztzQkFIQyxRQUFROzt3QkFDakIsWUFBWTs7OztBQUUxQixTQUFTLGFBQWEsQ0FBQyxTQUFTLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRTtBQUMvRCxNQUFNLE1BQU0sR0FBRyxTQUFTLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsQ0FBQztBQUN0RCxNQUFNLFVBQVUsR0FBRztBQUNqQixVQUFNLEVBQU4sTUFBTTtBQUNOLGVBQVcsRUFBWCxXQUFXO0FBQ1gsbUJBQWUsRUFBZixlQUFlO0FBQ2YsT0FBRyxFQUFILEdBQUc7QUFDSCxXQUFPLEVBQVAsT0FBTztBQUNQLFVBQU0sRUFBTixNQUFNO0dBQ1AsQ0FBQzs7QUFFRixRQUFNLENBQUMsUUFBUSxDQUFDLFFBQVEsRUFBRSxZQUFZLEVBQUU7V0FBTSxVQUFVO0dBQUEsQ0FBQyxDQUFDO0FBQzFELFdBQVMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7O0FBRXZDLFdBQVMsTUFBTSxHQUFHO0FBQ2hCLFdBQU8sT0FBTyxDQUNYLEdBQUcsQ0FBQyxDQUFDLFdBQVcsRUFBRSxFQUFFLGVBQWUsRUFBRSxDQUFDLENBQUMsQ0FDdkMsSUFBSSxDQUFDLFVBQUMsSUFBZ0I7aUNBQWhCLElBQWdCOztVQUFmLFFBQVE7VUFBRSxJQUFJO2FBQU0sMEJBQWEsSUFBSSxFQUFFLFFBQVEsQ0FBQztLQUFBLENBQUMsQ0FBQztHQUM3RDs7QUFFRCxXQUFTLFdBQVcsR0FBRztBQUNyQixXQUFPLE9BQU8sQ0FBQyxPQUFPLENBQUMsNEJBQWtCLENBQUMsQ0FBQztHQUM1Qzs7QUFFRCxXQUFTLG9CQUFvQixDQUFDLGFBQWEsRUFBRTtBQUMzQyxVQUFNLENBQUMsR0FBRyx1REFBcUQsYUFBYSxDQUFHLENBQUM7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cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGVmYXVsdHNEZWVwLCBwYXJ0aWFsIH0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBkZWZhdWx0c1Byb3ZpZGVyIGZyb20gJy4vZGVmYXVsdHMnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzZXR1cFNldHRpbmdzKGtiblNlcnZlciwgc2VydmVyLCBjb25maWcpIHtcbiAgY29uc3Qgc3RhdHVzID0ga2JuU2VydmVyLnN0YXR1cy5jcmVhdGUoJ3VpIHNldHRpbmdzJyk7XG4gIGNvbnN0IHVpU2V0dGluZ3MgPSB7XG4gICAgZ2V0QWxsLFxuICAgIGdldERlZmF1bHRzLFxuICAgIGdldFVzZXJQcm92aWRlZCxcbiAgICBzZXQsXG4gICAgc2V0TWFueSxcbiAgICByZW1vdmVcbiAgfTtcblxuICBzZXJ2ZXIuZGVjb3JhdGUoJ3NlcnZlcicsICd1aVNldHRpbmdzJywgKCkgPT4gdWlTZXR0aW5ncyk7XG4gIGtiblNlcnZlci5yZWFkeSgpLnRoZW4obWlycm9yRXNTdGF0dXMpO1xuXG4gIGZ1bmN0aW9uIGdldEFsbCgpIHtcbiAgICByZXR1cm4gUHJvbWlzZVxuICAgICAgLmFsbChbZ2V0RGVmYXVsdHMoKSwgZ2V0VXNlclByb3ZpZGVkKCldKVxuICAgICAgLnRoZW4oKFtkZWZhdWx0cywgdXNlcl0pID0+IGRlZmF1bHRzRGVlcCh1c2VyLCBkZWZhdWx0cykpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0RGVmYXVsdHMoKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShkZWZhdWx0c1Byb3ZpZGVyKCkpO1xuICB9XG5cbiAgZnVuY3Rpb24gdXNlclNldHRpbmdzTm90Rm91bmQoa2liYW5hVmVyc2lvbikge1xuICAgIHN0YXR1cy5yZWQoYENvdWxkIG5vdCBmaW5kIHVzZXItcHJvdmlkZWQgc2V0dGluZ3MgZm9yIEtpYmFuYSAke2tpYmFuYVZlcnNpb259YCk7XG4gICAgcmV0dXJuIHt9O1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0VXNlclByb3ZpZGVkKCkge1xuICAgIGNvbnN0IHsgY2xpZW50IH0gPSBzZXJ2ZXIucGx1Z2lucy5lbGFzdGljc2VhcmNoO1xuICAgIGNvbnN0IGNsaWVudFNldHRpbmdzID0gZ2V0Q2xpZW50U2V0dGluZ3MoY29uZmlnKTtcbiAgICByZXR1cm4gY2xpZW50XG4gICAgICAuZ2V0KHsgLi4uY2xpZW50U2V0dGluZ3MgfSlcbiAgICAgIC50aGVuKHJlcyA9PiByZXMuX3NvdXJjZSlcbiAgICAgIC5jYXRjaChwYXJ0aWFsKHVzZXJTZXR0aW5nc05vdEZvdW5kLCBjbGllbnRTZXR0aW5ncy5pZCkpXG4gICAgICAudGhlbih1c2VyID0+IGh5ZHJhdGVVc2VyU2V0dGluZ3ModXNlcikpO1xuICB9XG5cbiAgZnVuY3Rpb24gc2V0TWFueShjaGFuZ2VzKSB7XG4gICAgY29uc3QgeyBjbGllbnQgfSA9IHNlcnZlci5wbHVnaW5zLmVsYXN0aWNzZWFyY2g7XG4gICAgY29uc3QgY2xpZW50U2V0dGluZ3MgPSBnZXRDbGllbnRTZXR0aW5ncyhjb25maWcpO1xuICAgIHJldHVybiBjbGllbnRcbiAgICAgIC51cGRhdGUoe1xuICAgICAgICAuLi5jbGllbnRTZXR0aW5ncyxcbiAgICAgICAgYm9keTogeyBkb2M6IGNoYW5nZXMgfVxuICAgICAgfSlcbiAgICAgIC50aGVuKCgpID0+ICh7fSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gc2V0KGtleSwgdmFsdWUpIHtcbiAgICByZXR1cm4gc2V0TWFueSh7IFtrZXldOiB2YWx1ZSB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZShrZXkpIHtcbiAgICByZXR1cm4gc2V0KGtleSwgbnVsbCk7XG4gIH1cblxuICBmdW5jdGlvbiBtaXJyb3JFc1N0YXR1cygpIHtcbiAgICBjb25zdCBlc1N0YXR1cyA9IGtiblNlcnZlci5zdGF0dXMuZ2V0Rm9yUGx1Z2luSWQoJ2VsYXN0aWNzZWFyY2gnKTtcblxuICAgIGNvcHlTdGF0dXMoKTtcbiAgICBlc1N0YXR1cy5vbignY2hhbmdlJywgY29weVN0YXR1cyk7XG5cbiAgICBmdW5jdGlvbiBjb3B5U3RhdHVzKCkge1xuICAgICAgY29uc3QgeyBzdGF0ZSB9ID0gZXNTdGF0dXM7XG4gICAgICBjb25zdCBzdGF0dXNNZXNzYWdlID0gc3RhdGUgPT09ICdncmVlbicgPyAnUmVhZHknIDogYEVsYXN0aWNzZWFyY2ggcGx1Z2luIGlzICR7c3RhdGV9YDtcbiAgICAgIHN0YXR1c1tzdGF0ZV0oc3RhdHVzTWVzc2FnZSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGh5ZHJhdGVVc2VyU2V0dGluZ3ModXNlcikge1xuICByZXR1cm4gT2JqZWN0LmtleXModXNlcikucmVkdWNlKGV4cGFuZCwge30pO1xuICBmdW5jdGlvbiBleHBhbmQoZXhwYW5kZWQsIGtleSkge1xuICAgIGNvbnN0IHVzZXJWYWx1ZSA9IHVzZXJba2V5XTtcbiAgICBpZiAodXNlclZhbHVlICE9PSBudWxsKSB7XG4gICAgICBleHBhbmRlZFtrZXldID0geyB1c2VyVmFsdWUgfTtcbiAgICB9XG4gICAgcmV0dXJuIGV4cGFuZGVkO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldENsaWVudFNldHRpbmdzKGNvbmZpZykge1xuICBjb25zdCBpbmRleCA9IGNvbmZpZy5nZXQoJ2tpYmFuYS5pbmRleCcpO1xuICBjb25zdCBpZCA9IGNvbmZpZy5nZXQoJ3BrZy52ZXJzaW9uJyk7XG4gIGNvbnN0IHR5cGUgPSAnY29uZmlnJztcbiAgcmV0dXJuIHsgaW5kZXgsIHR5cGUsIGlkIH07XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/ui/settings/index.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/kibana/src/ui/settings/index.js",
      "sourcesContent": [
        "import { defaultsDeep, partial } from 'lodash';\nimport defaultsProvider from './defaults';\n\nexport default function setupSettings(kbnServer, server, config) {\n  const status = kbnServer.status.create('ui settings');\n  const uiSettings = {\n    getAll,\n    getDefaults,\n    getUserProvided,\n    set,\n    setMany,\n    remove\n  };\n\n  server.decorate('server', 'uiSettings', () => uiSettings);\n  kbnServer.ready().then(mirrorEsStatus);\n\n  function getAll() {\n    return Promise\n      .all([getDefaults(), getUserProvided()])\n      .then(([defaults, user]) => defaultsDeep(user, defaults));\n  }\n\n  function getDefaults() {\n    return Promise.resolve(defaultsProvider());\n  }\n\n  function userSettingsNotFound(kibanaVersion) {\n    status.red(`Could not find user-provided settings for Kibana ${kibanaVersion}`);\n    return {};\n  }\n\n  function getUserProvided() {\n    const { client } = server.plugins.elasticsearch;\n    const clientSettings = getClientSettings(config);\n    return client\n      .get({ ...clientSettings })\n      .then(res => res._source)\n      .catch(partial(userSettingsNotFound, clientSettings.id))\n      .then(user => hydrateUserSettings(user));\n  }\n\n  function setMany(changes) {\n    const { client } = server.plugins.elasticsearch;\n    const clientSettings = getClientSettings(config);\n    return client\n      .update({\n        ...clientSettings,\n        body: { doc: changes }\n      })\n      .then(() => ({}));\n  }\n\n  function set(key, value) {\n    return setMany({ [key]: value });\n  }\n\n  function remove(key) {\n    return set(key, null);\n  }\n\n  function mirrorEsStatus() {\n    const esStatus = kbnServer.status.getForPluginId('elasticsearch');\n\n    copyStatus();\n    esStatus.on('change', copyStatus);\n\n    function copyStatus() {\n      const { state } = esStatus;\n      const statusMessage = state === 'green' ? 'Ready' : `Elasticsearch plugin is ${state}`;\n      status[state](statusMessage);\n    }\n  }\n}\n\nfunction hydrateUserSettings(user) {\n  return Object.keys(user).reduce(expand, {});\n  function expand(expanded, key) {\n    const userValue = user[key];\n    if (userValue !== null) {\n      expanded[key] = { userValue };\n    }\n    return expanded;\n  }\n}\n\nfunction getClientSettings(config) {\n  const index = config.get('kibana.index');\n  const id = config.get('pkg.version');\n  const type = 'config';\n  return { index, type, id };\n}\n"
      ]
    },
    "mtime": 1467036622893
  },
  "{\"filename\":\"/home/vio/kibana/src/ui/settings/defaults.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "moment-timezone",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "moment"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "defaultSettingsProvider"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "defaultSettingsProvider",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "sliced-to-array",
        "to-consumable-array",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }; })();\n\nexports['default'] = defaultSettingsProvider;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i]; return arr2; } else { return Array.from(arr); } }\n\nvar _momentTimezone = require('moment-timezone');\n\nvar _momentTimezone2 = _interopRequireDefault(_momentTimezone);\n\nfunction defaultSettingsProvider() {\n  var weekdays = _momentTimezone2['default'].weekdays().slice();\n\n  var _weekdays = _slicedToArray(weekdays, 1);\n\n  var defaultWeekday = _weekdays[0];\n\n  // wrapped in provider so that a new instance is given to each app/test\n  return {\n    'buildNum': {\n      readonly: true\n    },\n    'query:queryString:options': {\n      value: '{ \"analyze_wildcard\": true }',\n      description: '<a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-query-string-query.html\" target=\"_blank\">Options</a> for the lucene query string parser',\n      type: 'json'\n    },\n    'sort:options': {\n      value: '{ \"unmapped_type\": \"boolean\" }',\n      description: '<a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/search-request-sort.html\" target=\"_blank\">Options</a> for the Elasticsearch sort parameter',\n      type: 'json'\n    },\n    'dateFormat': {\n      value: 'MMMM Do YYYY, HH:mm:ss.SSS',\n      description: 'When displaying a pretty formatted date, use this <a href=\"http://momentjs.com/docs/#/displaying/format/\" target=\"_blank\">format</a>'\n    },\n    'dateFormat:tz': {\n      value: 'Browser',\n      description: 'Which timezone should be used.  \"Browser\" will use the timezone detected by your browser.',\n      type: 'select',\n      options: ['Browser'].concat(_toConsumableArray(_momentTimezone2['default'].tz.names()))\n    },\n    'dateFormat:scaled': {\n      type: 'json',\n      value: '[\\n  [\"\", \"HH:mm:ss.SSS\"],\\n  [\"PT1S\", \"HH:mm:ss\"],\\n  [\"PT1M\", \"HH:mm\"],\\n  [\"PT1H\", \"YYYY-MM-DD HH:mm\"],\\n  [\"P1DT\", \"YYYY-MM-DD\"],\\n  [\"P1YT\", \"YYYY\"]\\n]',\n      description: 'Values that define the format used in situations where timebased' + ' data is rendered in order, and formatted timestamps should adapt to the' + ' interval between measurements. Keys are' + ' <a href=\"http://en.wikipedia.org/wiki/ISO_8601#Time_intervals\" target=\"_blank\">' + 'ISO8601 intervals.</a>'\n    },\n    'dateFormat:dow': {\n      value: defaultWeekday,\n      description: 'What day should weeks start on?',\n      type: 'select',\n      options: weekdays\n    },\n    'defaultIndex': {\n      value: null,\n      description: 'The index to access if no index is set'\n    },\n    'defaultColumns': {\n      value: ['_source'],\n      description: 'Columns displayed by default in the Discovery tab'\n    },\n    'metaFields': {\n      value: ['_source', '_id', '_type', '_index', '_score'],\n      description: 'Fields that exist outside of _source to merge into our document when displaying it'\n    },\n    'discover:sampleSize': {\n      value: 500,\n      description: 'The number of rows to show in the table'\n    },\n    'doc_table:highlight': {\n      value: true,\n      description: 'Highlight results in Discover and Saved Searches Dashboard.' + 'Highlighing makes request slow when working on big documents.'\n    },\n    'courier:maxSegmentCount': {\n      value: 30,\n      description: 'Requests in discover are split into segments to prevent massive requests from being sent to ' + 'elasticsearch. This setting attempts to prevent the list of segments from getting too long, which might ' + 'cause requests to take much longer to process'\n    },\n    'fields:popularLimit': {\n      value: 10,\n      description: 'The top N most popular fields to show'\n    },\n    'histogram:barTarget': {\n      value: 50,\n      description: 'Attempt to generate around this many bar when using \"auto\" interval in date histograms'\n    },\n    'histogram:maxBars': {\n      value: 100,\n      description: 'Never show more than this many bar in date histograms, scale values if needed'\n    },\n    'visualization:tileMap:maxPrecision': {\n      value: 7,\n      description: 'The maximum geoHash precision displayed on tile maps: 7 is high, 10 is very high, ' + '12 is the max. ' + '<a href=\"http://www.elastic.co/guide/en/elasticsearch/reference/current/' + 'search-aggregations-bucket-geohashgrid-aggregation.html#_cell_dimensions_at_the_equator\" target=\"_blank\">' + 'Explanation of cell dimensions</a>'\n    },\n    'visualization:tileMap:WMSdefaults': {\n      value: JSON.stringify({\n        enabled: false,\n        url: 'https://basemap.nationalmap.gov/arcgis/services/USGSTopo/MapServer/WMSServer',\n        options: {\n          version: '1.3.0',\n          layers: '0',\n          format: 'image/png',\n          transparent: true,\n          attribution: 'Maps provided by USGS',\n          styles: ''\n        }\n      }, null, 2),\n      type: 'json',\n      description: 'Default <a href=\"http://leafletjs.com/reference.html#tilelayer-wms\" target=\"_blank\">properties</a> for the WMS map server support in the tile map'\n    },\n    'visualization:colorMapping': {\n      type: 'json',\n      value: JSON.stringify({\n        Count: '#6eadc1'\n      }),\n      description: 'Maps values to specified colors within visualizations'\n    },\n    'visualization:loadingDelay': {\n      value: '2s',\n      description: 'Time to wait before dimming visualizations during query'\n    },\n    'csv:separator': {\n      value: ',',\n      description: 'Separate exported values with this string'\n    },\n    'csv:quoteValues': {\n      value: true,\n      description: 'Should values be quoted in csv exports?'\n    },\n    'history:limit': {\n      value: 10,\n      description: 'In fields that have history (e.g. query inputs), show this many recent values'\n    },\n    'shortDots:enable': {\n      value: false,\n      description: 'Shorten long fields, for example, instead of foo.bar.baz, show f.b.baz'\n    },\n    'truncate:maxHeight': {\n      value: 115,\n      description: 'The maximum height that a cell in a table should occupy. Set to 0 to disable truncation'\n    },\n    'indexPattern:fieldMapping:lookBack': {\n      value: 5,\n      description: 'For index patterns containing timestamps in their names, look for this many recent matching ' + 'patterns from which to query the field mapping'\n    },\n    'format:defaultTypeMap': {\n      type: 'json',\n      value: '{\\n  \"ip\": { \"id\": \"ip\", \"params\": {} },\\n  \"date\": { \"id\": \"date\", \"params\": {} },\\n  \"number\": { \"id\": \"number\", \"params\": {} },\\n  \"_source\": { \"id\": \"_source\", \"params\": {} },\\n  \"_default_\": { \"id\": \"string\", \"params\": {} }\\n}',\n      description: 'Map of the format name to use by default for each field type. ' + '\"_default_\" is used if the field type is not mentioned explicitly'\n    },\n    'format:number:defaultPattern': {\n      type: 'string',\n      value: '0,0.[000]',\n      description: 'Default <a href=\"http://numeraljs.com/\" target=\"_blank\">numeral format</a> for the \"number\" format'\n    },\n    'format:bytes:defaultPattern': {\n      type: 'string',\n      value: '0,0.[000]b',\n      description: 'Default <a href=\"http://numeraljs.com/\" target=\"_blank\">numeral format</a> for the \"bytes\" format'\n    },\n    'format:percent:defaultPattern': {\n      type: 'string',\n      value: '0,0.[000]%',\n      description: 'Default <a href=\"http://numeraljs.com/\" target=\"_blank\">numeral format</a> for the \"percent\" format'\n    },\n    'format:currency:defaultPattern': {\n      type: 'string',\n      value: '($0,0.[00])',\n      description: 'Default <a href=\"http://numeraljs.com/\" target=\"_blank\">numeral format</a> for the \"currency\" format'\n    },\n    'savedObjects:perPage': {\n      type: 'number',\n      value: 5,\n      description: 'Number of objects to show per page in the load dialog'\n    },\n    'timepicker:timeDefaults': {\n      type: 'json',\n      value: '{\\n  \"from\": \"now-15m\",\\n  \"to\": \"now\",\\n  \"mode\": \"quick\"\\n}',\n      description: 'The timefilter selection to use when Kibana is started without one'\n    },\n    'timepicker:refreshIntervalDefaults': {\n      type: 'json',\n      value: '{\\n  \"display\": \"Off\",\\n  \"pause\": false,\\n  \"value\": 0\\n}',\n      description: 'The timefilter\\'s default refresh interval'\n    },\n    'dashboard:defaultDarkTheme': {\n      value: false,\n      description: 'New dashboards use dark theme by default'\n    },\n    'filters:pinnedByDefault': {\n      value: false,\n      description: 'Whether the filters should have a global state (be pinned) by default'\n    },\n    'notifications:banner': {\n      type: 'markdown',\n      description: 'A custom banner intended for temporary notices to all users. <a href=\"https://help.github.com/articles/basic-writing-and-formatting-syntax/\" target=\"_blank\">Markdown supported</a>.',\n      value: ''\n    },\n    'notifications:lifetime:banner': {\n      value: 3000000,\n      description: 'The time in milliseconds which a banner notification ' + 'will be displayed on-screen for. Setting to Infinity will disable.'\n    },\n    'notifications:lifetime:error': {\n      value: 300000,\n      description: 'The time in milliseconds which an error notification ' + 'will be displayed on-screen for. Setting to Infinity will disable.'\n    },\n    'notifications:lifetime:warning': {\n      value: 10000,\n      description: 'The time in milliseconds which a warning notification ' + 'will be displayed on-screen for. Setting to Infinity will disable.'\n    },\n    'notifications:lifetime:info': {\n      value: 5000,\n      description: 'The time in milliseconds which an information notification ' + 'will be displayed on-screen for. Setting to Infinity will disable.'\n    }\n  };\n}\n\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3VpL3NldHRpbmdzL2RlZmF1bHRzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O3FCQUV3Qix1QkFBdUI7Ozs7Ozs4QkFGNUIsaUJBQWlCOzs7O0FBRXJCLFNBQVMsdUJBQXVCLEdBQUc7QUFDaEQsTUFBTSxRQUFRLEdBQUcsNEJBQU8sUUFBUSxFQUFFLENBQUMsS0FBSyxFQUFFLENBQUM7O2lDQUNsQixRQUFROztNQUExQixjQUFjOzs7QUFHckIsU0FBTztBQUNMLGNBQVUsRUFBRTtBQUNWLGNBQVEsRUFBRSxJQUFJO0tBQ2Y7QUFDRCwrQkFBMkIsRUFBRTtBQUMzQixXQUFLLEVBQUUsOEJBQThCO0FBQ3JDLGlCQUFXLEVBQUUsNEtBQTRLO0FBQ3pMLFVBQUksRUFBRSxNQUFNO0tBQ2I7QUFDRCxrQkFBYyxFQUFFO0FBQ2QsV0FBSyxFQUFFLGdDQUFnQztBQUN2QyxpQkFBVyxFQUFFLHFLQUFxSztBQUNsTCxVQUFJLEVBQUUsTUFBTTtLQUNiO0FBQ0QsZ0JBQVksRUFBRTtBQUNaLFdBQUssRUFBRSw0QkFBNEI7QUFDbkMsaUJBQVcsRUFBRSxzSUFBc0k7S0FDcEo7QUFDRCxtQkFBZSxFQUFFO0FBQ2YsV0FBSyxFQUFFLFNBQVM7QUFDaEIsaUJBQVcsRUFBRSwyRkFBMkY7QUFDeEcsVUFBSSxFQUFFLFFBQVE7QUFDZCxhQUFPLEdBQUcsU0FBUyw0QkFBSyw0QkFBTyxFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUM7S0FDM0M7QUFDRCx1QkFBbUIsRUFBRTtBQUNuQixVQUFJLEVBQUUsTUFBTTtBQUNaLFdBQUssZ0tBUVQ7QUFDSSxpQkFBVyxFQUNULGtFQUFrRSxHQUNsRSwwRUFBMEUsR0FDMUUsMENBQTBDLEdBQzFDLGtGQUFrRixHQUNsRix3QkFBd0IsQUFDekI7S0FDRjtBQUNELG9CQUFnQixFQUFFO0FBQ2hCLFdBQUssRUFBRSxjQUFjO0FBQ3JCLGlCQUFXLEVBQUUsaUNBQWlDO0FBQzlDLFVBQUks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QUssRUFBRSxFQUFFO0tBQ1Y7QUFDRCxtQ0FBK0IsRUFBRTtBQUMvQixXQUFLLEVBQUUsT0FBTztBQUNkLGlCQUFXLEVBQUUsdURBQXVELEdBQ3BFLG9FQUFvRTtLQUNyRTtBQUNELGtDQUE4QixFQUFFO0FBQzlCLFdBQUssRUFBRSxNQUFNO0FBQ2IsaUJBQVcsRUFBRSx1REFBdUQsR0FDcEUsb0VBQW9FO0tBQ3JFO0FBQ0Qsb0NBQWdDLEVBQUU7QUFDaEMsV0FBSyxFQUFFLEtBQUs7QUFDWixpQkFBVyxFQUFFLHdEQUF3RCxHQUNuRSxvRUFBb0U7S0FDdkU7QUFDRCxpQ0FBNkIsRUFBRTtBQUM3QixXQUFLLEVBQUUsSUFBSTtBQUNYLGlCQUFXLEVBQUUsNkRBQTZELEdBQ3hFLG9FQUFvRTtLQUN2RTtHQUNGLENBQUM7Q0FDSDs7QUFBQSxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby9raWJhbmEvc3JjL3VpL3NldHRpbmdzL2RlZmF1bHRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQtdGltZXpvbmUnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBkZWZhdWx0U2V0dGluZ3NQcm92aWRlcigpIHtcbiAgY29uc3Qgd2Vla2RheXMgPSBtb21lbnQud2Vla2RheXMoKS5zbGljZSgpO1xuICBjb25zdCBbZGVmYXVsdFdlZWtkYXldID0gd2Vla2RheXM7XG5cbiAgLy8gd3JhcHBlZCBpbiBwcm92aWRlciBzbyB0aGF0IGEgbmV3IGluc3RhbmNlIGlzIGdpdmVuIHRvIGVhY2ggYXBwL3Rlc3RcbiAgcmV0dXJuIHtcbiAgICAnYnVpbGROdW0nOiB7XG4gICAgICByZWFkb25seTogdHJ1ZVxuICAgIH0sXG4gICAgJ3F1ZXJ5OnF1ZXJ5U3RyaW5nOm9wdGlvbnMnOiB7XG4gICAgICB2YWx1ZTogJ3sgXCJhbmFseXplX3dpbGRjYXJkXCI6IHRydWUgfScsXG4gICAgICBkZXNjcmlwdGlvbjogJzxhIGhyZWY9XCJodHRwczovL3d3dy5lbGFzdGljLmNvL2d1aWRlL2VuL2VsYXN0aWNzZWFyY2gvcmVmZXJlbmNlL2N1cnJlbnQvcXVlcnktZHNsLXF1ZXJ5LXN0cmluZy1xdWVyeS5odG1sXCIgdGFyZ2V0PVwiX2JsYW5rXCI+T3B0aW9uczwvYT4gZm9yIHRoZSBsdWNlbmUgcXVlcnkgc3RyaW5nIHBhcnNlcicsXG4gICAgICB0eXBlOiAnanNvbidcbiAgICB9LFxuICAgICdzb3J0Om9wdGlvbnMnOiB7XG4gICAgICB2YWx1ZTogJ3sgXCJ1bm1hcHBlZF90eXBlXCI6IFwiYm9vbGVhblwiIH0nLFxuICAgICAgZGVzY3JpcHRpb246ICc8YSBocmVmPVwiaHR0cHM6Ly93d3cuZWxhc3RpYy5jby9ndWlkZS9lbi9lbGFzdGljc2VhcmNoL3JlZmVyZW5jZS9jdXJyZW50L3NlYXJjaC1yZXF1ZXN0LXNvcnQuaHRtbFwiIHRhcmdldD1cIl9ibGFua1wiPk9wdGlvbnM8L2E+IGZvciB0aGUgRWxhc3RpY3NlYXJjaCBzb3J0IHBhcmFtZXRlcicsXG4gICAgICB0eXBlOiAnanNvbidcbiAgICB9LFxuICAgICdkYXRlRm9ybWF0Jzoge1xuICAgICAgdmFsdWU6ICdNTU1NIERvIFlZWVksIEhIOm1tOnNzLlNTUycsXG4gICAgICBkZXNjcmlwdGlvbjogJ1doZW4gZGlzcGxheWluZyBhIHByZXR0eSBmb3JtYXR0ZWQgZGF0ZSwgdXNlIHRoaXMgPGEgaHJlZj1cImh0dHA6Ly9tb21lbnRqcy5jb20vZG9jcy8jL2Rpc3BsYXlpbmcvZm9ybWF0L1wiIHRhcmdldD1cIl9ibGFua1wiPmZvcm1hdDwvYT4nLFxuICAgIH0sXG4gICAgJ2RhdGVGb3JtYXQ6dHonOiB7XG4gICAgICB2YWx1ZTogJ0Jyb3dzZXInLFxuICAgICAgZGVzY3JpcHRpb246ICdXaGljaCB0aW1lem9uZSBzaG91bGQgYmUgdXNlZC4gIFwiQnJvd3NlclwiIHdpbGwgdXNlIHRoZSB0aW1lem9uZSBkZXRlY3RlZCBieSB5b3VyIGJyb3dzZXIuJyxcbiAgICAgIHR5cGU6ICdzZWxlY3QnLFxuICAgICAgb3B0aW9uczogWydCcm93c2VyJywgLi4ubW9tZW50LnR6Lm5hbWVzKCldXG4gICAgfSxcbiAgICAnZGF0ZUZvcm1hdDpzY2FsZWQnOiB7XG4gICAgICB0eXBlOiAnanNvbicsXG4gICAgICB2YWx1ZTpcbmBbXG4gIFtcIlwiLCBcIkhIOm1tOnNzLlNTU1wiXSxcbiAgW1wiUFQxU1wiLCBcIkhIOm1tOnNzXCJdLFxuICBbXCJQVDFNXCIsIFwiSEg6bW1cIl0sXG4gIFtcIlBUMUhcIiwgXCJZWVlZLU1NLUREIEhIOm1tXCJdLFxuICBbXCJQMURUXCIsIFwiWVlZWS1NTS1ERFwiXSxcbiAgW1wiUDFZVFwiLCBcIllZWVlcIl1cbl1gLFxuICAgICAgZGVzY3JpcHRpb246IChcbiAgICAgICAgJ1ZhbHVlcyB0aGF0IGRlZmluZSB0aGUgZm9ybWF0IHVzZWQgaW4gc2l0dWF0aW9ucyB3aGVyZSB0aW1lYmFzZWQnICtcbiAgICAgICAgJyBkYXRhIGlzIHJlbmRlcmVkIGluIG9yZGVyLCBhbmQgZm9ybWF0dGVkIHRpbWVzdGFtcHMgc2hvdWxkIGFkYXB0IHRvIHRoZScgK1xuICAgICAgICAnIGludGVydmFsIGJldHdlZW4gbWVhc3VyZW1lbnRzLiBLZXlzIGFyZScgK1xuICAgICAgICAnIDxhIGhyZWY9XCJodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT184NjAxI1RpbWVfaW50ZXJ2YWxzXCIgdGFyZ2V0PVwiX2JsYW5rXCI+JyArXG4gICAgICAgICdJU084NjAxIGludGVydmFscy48L2E+J1xuICAgICAgKVxuICAgIH0sXG4gICAgJ2RhdGVGb3JtYXQ6ZG93Jzoge1xuICAgICAgdmFsdWU6IGRlZmF1bHRXZWVrZGF5LFxuICAgICAgZGVzY3JpcHRpb246ICdXaGF0IGRheSBzaG91bGQgd2Vla3Mgc3RhcnQgb24/JyxcbiAgICAgIHR5cGU6ICdzZWxlY3QnLFxuICAgICAgb3B0aW9uczogd2Vla2RheXNcbiAgICB9LFxuICAgICdkZWZhdWx0SW5kZXgnOiB7XG4gICAgICB2YWx1ZTogbnVsbCxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGhlIGluZGV4IHRvIGFjY2VzcyBpZiBubyBpbmRleCBpcyBzZXQnLFxuICAgIH0sXG4gICAgJ2RlZmF1bHRDb2x1bW5zJzoge1xuICAgICAgdmFsdWU6IFsnX3NvdXJjZSddLFxuICAgICAgZGVzY3JpcHRpb246ICdDb2x1bW5zIGRpc3BsYXllZCBieSBkZWZhdWx0IGluIHRoZSBEaXNjb3ZlcnkgdGFiJyxcbiAgICB9LFxuICAgICdtZXRhRmllbGRzJzoge1xuICAgICAgdmFsdWU6IFsnX3NvdXJjZScsICdfaWQnLCAnX3R5cGUnLCAnX2luZGV4JywgJ19zY29yZSddLFxuICAgICAgZGVzY3JpcHRpb246ICdGaWVsZHMgdGhhdCBleGlzdCBvdXRzaWRlIG9mIF9zb3VyY2UgdG8gbWVyZ2UgaW50byBvdXIgZG9jdW1lbnQgd2hlbiBkaXNwbGF5aW5nIGl0JyxcbiAgICB9LFxuICAgICdkaXNjb3ZlcjpzYW1wbGVTaXplJzoge1xuICAgICAgdmFsdWU6IDUwMCxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGhlIG51bWJlciBvZiByb3dzIHRvIHNob3cgaW4gdGhlIHRhYmxlJyxcbiAgICB9LFxuICAgICdkb2NfdGFibGU6aGlnaGxpZ2h0Jzoge1xuICAgICAgdmFsdWU6IHRydWUsXG4gICAgICBkZXNjcmlwdGlvbjogJ0hpZ2hsaWdodCByZXN1bHRzIGluIERpc2NvdmVyIGFuZCBTYXZlZCBTZWFyY2hlcyBEYXNoYm9hcmQuJyArXG4gICAgICAgICdIaWdobGlnaGluZyBtYWtlcyByZXF1ZXN0IHNsb3cgd2hlbiB3b3JraW5nIG9uIGJpZyBkb2N1bWVudHMuJyxcbiAgICB9LFxuICAgICdjb3VyaWVyOm1heFNlZ21lbnRDb3VudCc6IHtcbiAgICAgIHZhbHVlOiAzMCxcbiAgICAgIGRlc2NyaXB0aW9uOiAnUmVxdWVzdHMgaW4gZGlzY292ZXIgYXJlIHNwbGl0IGludG8gc2VnbWVudHMgdG8gcHJldmVudCBtYXNzaXZlIHJlcXVlc3RzIGZyb20gYmVpbmcgc2VudCB0byAnICtcbiAgICAgICAgJ2VsYXN0aWNzZWFyY2guIFRoaXMgc2V0dGluZyBhdHRlbXB0cyB0byBwcmV2ZW50IHRoZSBsaXN0IG9mIHNlZ21lbnRzIGZyb20gZ2V0dGluZyB0b28gbG9uZywgd2hpY2ggbWlnaHQgJyArXG4gICAgICAgICdjYXVzZSByZXF1ZXN0cyB0byB0YWtlIG11Y2ggbG9uZ2VyIHRvIHByb2Nlc3MnXG4gICAgfSxcbiAgICAnZmllbGRzOnBvcHVsYXJMaW1pdCc6IHtcbiAgICAgIHZhbHVlOiAxMCxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGhlIHRvcCBOIG1vc3QgcG9wdWxhciBmaWVsZHMgdG8gc2hvdycsXG4gICAgfSxcbiAgICAnaGlzdG9ncmFtOmJhclRhcmdldCc6IHtcbiAgICAgIHZhbHVlOiA1MCxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQXR0ZW1wdCB0byBnZW5lcmF0ZSBhcm91bmQgdGhpcyBtYW55IGJhciB3aGVuIHVzaW5nIFwiYXV0b1wiIGludGVydmFsIGluIGRhdGUgaGlzdG9ncmFtcycsXG4gICAgfSxcbiAgICAnaGlzdG9ncmFtOm1heEJhcnMnOiB7XG4gICAgICB2YWx1ZTogMTAwLFxuICAgICAgZGVzY3JpcHRpb246ICdOZXZlciBzaG93IG1vcmUgdGhhbiB0aGlzIG1hbnkgYmFyIGluIGRhdGUgaGlzdG9ncmFtcywgc2NhbGUgdmFsdWVzIGlmIG5lZWRlZCcsXG4gICAgfSxcbiAgICAndmlzdWFsaXphdGlvbjp0aWxlTWFwOm1heFByZWNpc2lvbic6IHtcbiAgICAgIHZhbHVlOiA3LFxuICAgICAgZGVzY3JpcHRpb246ICdUaGUgbWF4aW11bSBnZW9IYXNoIHByZWNpc2lvbiBkaXNwbGF5ZWQgb24gdGlsZSBtYXBzOiA3IGlzIGhpZ2gsIDEwIGlzIHZlcnkgaGlnaCwgJyArXG4gICAgICAnMTIgaXMgdGhlIG1heC4gJyArXG4gICAgICAnPGEgaHJlZj1cImh0dHA6Ly93d3cuZWxhc3RpYy5jby9ndWlkZS9lbi9lbGFzdGljc2VhcmNoL3JlZmVyZW5jZS9jdXJyZW50LycgK1xuICAgICAgJ3NlYXJjaC1hZ2dyZWdhdGlvbnMtYnVja2V0LWdlb2hhc2hncmlkLWFnZ3JlZ2F0aW9uLmh0bWwjX2NlbGxfZGltZW5zaW9uc19hdF90aGVfZXF1YXRvclwiIHRhcmdldD1cIl9ibGFua1wiPicgK1xuICAgICAgJ0V4cGxhbmF0aW9uIG9mIGNlbGwgZGltZW5zaW9uczwvYT4nLFxuICAgIH0sXG4gICAgJ3Zpc3VhbGl6YXRpb246dGlsZU1hcDpXTVNkZWZhdWx0cyc6IHtcbiAgICAgIHZhbHVlOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGVuYWJsZWQ6IGZhbHNlLFxuICAgICAgICB1cmw6ICdodHRwczovL2Jhc2VtYXAubmF0aW9uYWxtYXAuZ292L2FyY2dpcy9zZXJ2aWNlcy9VU0dTVG9wby9NYXBTZXJ2ZXIvV01TU2VydmVyJyxcbiAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgIHZlcnNpb246ICcxLjMuMCcsXG4gICAgICAgICAgbGF5ZXJzOiAnMCcsXG4gICAgICAgICAgZm9ybWF0OiAnaW1hZ2UvcG5nJyxcbiAgICAgICAgICB0cmFuc3BhcmVudDogdHJ1ZSxcbiAgICAgICAgICBhdHRyaWJ1dGlvbjogJ01hcHMgcHJvdmlkZWQgYnkgVVNHUycsXG4gICAgICAgICAgc3R5bGVzOiAnJyxcbiAgICAgICAgfVxuICAgICAgfSwgbnVsbCwgMiksXG4gICAgICB0eXBlOiAnanNvbicsXG4gICAgICBkZXNjcmlwdGlvbjogJ0RlZmF1bHQgPGEgaHJlZj1cImh0dHA6Ly9sZWFmbGV0anMuY29tL3JlZmVyZW5jZS5odG1sI3RpbGVsYXllci13bXNcIiB0YXJnZXQ9XCJfYmxhbmtcIj5wcm9wZXJ0aWVzPC9hPiBmb3IgdGhlIFdNUyBtYXAgc2VydmVyIHN1cHBvcnQgaW4gdGhlIHRpbGUgbWFwJ1xuICAgIH0sXG4gICAgJ3Zpc3VhbGl6YXRpb246Y29sb3JNYXBwaW5nJzoge1xuICAgICAgdHlwZTogJ2pzb24nLFxuICAgICAgdmFsdWU6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgQ291bnQ6ICcjNmVhZGMxJ1xuICAgICAgfSksXG4gICAgICBkZXNjcmlwdGlvbjogJ01hcHMgdmFsdWVzIHRvIHNwZWNpZmllZCBjb2xvcnMgd2l0aGluIHZpc3VhbGl6YXRpb25zJ1xuICAgIH0sXG4gICAgJ3Zpc3VhbGl6YXRpb246bG9hZGluZ0RlbGF5Jzoge1xuICAgICAgdmFsdWU6ICcycycsXG4gICAgICBkZXNjcmlwdGlvbjogJ1RpbWUgdG8gd2FpdCBiZWZvcmUgZGltbWluZyB2aXN1YWxpemF0aW9ucyBkdXJpbmcgcXVlcnknXG4gICAgfSxcbiAgICAnY3N2OnNlcGFyYXRvcic6IHtcbiAgICAgIHZhbHVlOiAnLCcsXG4gICAgICBkZXNjcmlwdGlvbjogJ1NlcGFyYXRlIGV4cG9ydGVkIHZhbHVlcyB3aXRoIHRoaXMgc3RyaW5nJyxcbiAgICB9LFxuICAgICdjc3Y6cXVvdGVWYWx1ZXMnOiB7XG4gICAgICB2YWx1ZTogdHJ1ZSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnU2hvdWxkIHZhbHVlcyBiZSBxdW90ZWQgaW4gY3N2IGV4cG9ydHM/JyxcbiAgICB9LFxuICAgICdoaXN0b3J5OmxpbWl0Jzoge1xuICAgICAgdmFsdWU6IDEwLFxuICAgICAgZGVzY3JpcHRpb246ICdJbiBmaWVsZHMgdGhhdCBoYXZlIGhpc3RvcnkgKGUuZy4gcXVlcnkgaW5wdXRzKSwgc2hvdyB0aGlzIG1hbnkgcmVjZW50IHZhbHVlcycsXG4gICAgfSxcbiAgICAnc2hvcnREb3RzOmVuYWJsZSc6IHtcbiAgICAgIHZhbHVlOiBmYWxzZSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnU2hvcnRlbiBsb25nIGZpZWxkcywgZm9yIGV4YW1wbGUsIGluc3RlYWQgb2YgZm9vLmJhci5iYXosIHNob3cgZi5iLmJheicsXG4gICAgfSxcbiAgICAndHJ1bmNhdGU6bWF4SGVpZ2h0Jzoge1xuICAgICAgdmFsdWU6IDExNSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGhlIG1heGltdW0gaGVpZ2h0IHRoYXQgYSBjZWxsIGluIGEgdGFibGUgc2hvdWxkIG9jY3VweS4gU2V0IHRvIDAgdG8gZGlzYWJsZSB0cnVuY2F0aW9uJ1xuICAgIH0sXG4gICAgJ2luZGV4UGF0dGVybjpmaWVsZE1hcHBpbmc6bG9va0JhY2snOiB7XG4gICAgICB2YWx1ZTogNSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnRm9yIGluZGV4IHBhdHRlcm5zIGNvbnRhaW5pbmcgdGltZXN0YW1wcyBpbiB0aGVpciBuYW1lcywgbG9vayBmb3IgdGhpcyBtYW55IHJlY2VudCBtYXRjaGluZyAnICtcbiAgICAgICAgJ3BhdHRlcm5zIGZyb20gd2hpY2ggdG8gcXVlcnkgdGhlIGZpZWxkIG1hcHBpbmcnXG4gICAgfSxcbiAgICAnZm9ybWF0OmRlZmF1bHRUeXBlTWFwJzoge1xuICAgICAgdHlwZTogJ2pzb24nLFxuICAgICAgdmFsdWU6XG5ge1xuICBcImlwXCI6IHsgXCJpZFwiOiBcImlwXCIsIFwicGFyYW1zXCI6IHt9IH0sXG4gIFwiZGF0ZVwiOiB7IFwiaWRcIjogXCJkYXRlXCIsIFwicGFyYW1zXCI6IHt9IH0sXG4gIFwibnVtYmVyXCI6IHsgXCJpZFwiOiBcIm51bWJlclwiLCBcInBhcmFtc1wiOiB7fSB9LFxuICBcIl9zb3VyY2VcIjogeyBcImlkXCI6IFwiX3NvdXJjZVwiLCBcInBhcmFtc1wiOiB7fSB9LFxuICBcIl9kZWZhdWx0X1wiOiB7IFwiaWRcIjogXCJzdHJpbmdcIiwgXCJwYXJhbXNcIjoge30gfVxufWAsXG4gICAgICBkZXNjcmlwdGlvbjogJ01hcCBvZiB0aGUgZm9ybWF0IG5hbWUgdG8gdXNlIGJ5IGRlZmF1bHQgZm9yIGVhY2ggZmllbGQgdHlwZS4gJyArXG4gICAgICAgICdcIl9kZWZhdWx0X1wiIGlzIHVzZWQgaWYgdGhlIGZpZWxkIHR5cGUgaXMgbm90IG1lbnRpb25lZCBleHBsaWNpdGx5J1xuICAgIH0sXG4gICAgJ2Zvcm1hdDpudW1iZXI6ZGVmYXVsdFBhdHRlcm4nOiB7XG4gICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgIHZhbHVlOiAnMCwwLlswMDBdJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnRGVmYXVsdCA8YSBocmVmPVwiaHR0cDovL251bWVyYWxqcy5jb20vXCIgdGFyZ2V0PVwiX2JsYW5rXCI+bnVtZXJhbCBmb3JtYXQ8L2E+IGZvciB0aGUgXCJudW1iZXJcIiBmb3JtYXQnXG4gICAgfSxcbiAgICAnZm9ybWF0OmJ5dGVzOmRlZmF1bHRQYXR0ZXJuJzoge1xuICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICB2YWx1ZTogJzAsMC5bMDAwXWInLFxuICAgICAgZGVzY3JpcHRpb246ICdEZWZhdWx0IDxhIGhyZWY9XCJodHRwOi8vbnVtZXJhbGpzLmNvbS9cIiB0YXJnZXQ9XCJfYmxhbmtcIj5udW1lcmFsIGZvcm1hdDwvYT4gZm9yIHRoZSBcImJ5dGVzXCIgZm9ybWF0J1xuICAgIH0sXG4gICAgJ2Zvcm1hdDpwZXJjZW50OmRlZmF1bHRQYXR0ZXJuJzoge1xuICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICB2YWx1ZTogJzAsMC5bMDAwXSUnLFxuICAgICAgZGVzY3JpcHRpb246ICdEZWZhdWx0IDxhIGhyZWY9XCJodHRwOi8vbnVtZXJhbGpzLmNvbS9cIiB0YXJnZXQ9XCJfYmxhbmtcIj5udW1lcmFsIGZvcm1hdDwvYT4gZm9yIHRoZSBcInBlcmNlbnRcIiBmb3JtYXQnXG4gICAgfSxcbiAgICAnZm9ybWF0OmN1cnJlbmN5OmRlZmF1bHRQYXR0ZXJuJzoge1xuICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICB2YWx1ZTogJygkMCwwLlswMF0pJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnRGVmYXVsdCA8YSBocmVmPVwiaHR0cDovL251bWVyYWxqcy5jb20vXCIgdGFyZ2V0PVwiX2JsYW5rXCI+bnVtZXJhbCBmb3JtYXQ8L2E+IGZvciB0aGUgXCJjdXJyZW5jeVwiIGZvcm1hdCdcbiAgICB9LFxuICAgICdzYXZlZE9iamVjdHM6cGVyUGFnZSc6IHtcbiAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgdmFsdWU6IDUsXG4gICAgICBkZXNjcmlwdGlvbjogJ051bWJlciBvZiBvYmplY3RzIHRvIHNob3cgcGVyIHBhZ2UgaW4gdGhlIGxvYWQgZGlhbG9nJ1xuICAgIH0sXG4gICAgJ3RpbWVwaWNrZXI6dGltZURlZmF1bHRzJzoge1xuICAgICAgdHlwZTogJ2pzb24nLFxuICAgICAgdmFsdWU6XG5ge1xuICBcImZyb21cIjogXCJub3ctMTVtXCIsXG4gIFwidG9cIjogXCJub3dcIixcbiAgXCJtb2RlXCI6IFwicXVpY2tcIlxufWAsXG4gICAgICBkZXNjcmlwdGlvbjogJ1RoZSB0aW1lZmlsdGVyIHNlbGVjdGlvbiB0byB1c2Ugd2hlbiBLaWJhbmEgaXMgc3RhcnRlZCB3aXRob3V0IG9uZSdcbiAgICB9LFxuICAgICd0aW1lcGlja2VyOnJlZnJlc2hJbnRlcnZhbERlZmF1bHRzJzoge1xuICAgICAgdHlwZTogJ2pzb24nLFxuICAgICAgdmFsdWU6XG5ge1xuICBcImRpc3BsYXlcIjogXCJPZmZcIixcbiAgXCJwYXVzZVwiOiBmYWxzZSxcbiAgXCJ2YWx1ZVwiOiAwXG59YCxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGhlIHRpbWVmaWx0ZXJcXCdzIGRlZmF1bHQgcmVmcmVzaCBpbnRlcnZhbCdcbiAgICB9LFxuICAgICdkYXNoYm9hcmQ6ZGVmYXVsdERhcmtUaGVtZSc6IHtcbiAgICAgIHZhbHVlOiBmYWxzZSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnTmV3IGRhc2hib2FyZHMgdXNlIGRhcmsgdGhlbWUgYnkgZGVmYXVsdCdcbiAgICB9LFxuICAgICdmaWx0ZXJzOnBpbm5lZEJ5RGVmYXVsdCc6IHtcbiAgICAgIHZhbHVlOiBmYWxzZSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnV2hldGhlciB0aGUgZmlsdGVycyBzaG91bGQgaGF2ZSBhIGdsb2JhbCBzdGF0ZSAoYmUgcGlubmVkKSBieSBkZWZhdWx0J1xuICAgIH0sXG4gICAgJ25vdGlmaWNhdGlvbnM6YmFubmVyJzoge1xuICAgICAgdHlwZTogJ21hcmtkb3duJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQSBjdXN0b20gYmFubmVyIGludGVuZGVkIGZvciB0ZW1wb3Jhcnkgbm90aWNlcyB0byBhbGwgdXNlcnMuIDxhIGhyZWY9XCJodHRwczovL2hlbHAuZ2l0aHViLmNvbS9hcnRpY2xlcy9iYXNpYy13cml0aW5nLWFuZC1mb3JtYXR0aW5nLXN5bnRheC9cIiB0YXJnZXQ9XCJfYmxhbmtcIj5NYXJrZG93biBzdXBwb3J0ZWQ8L2E+LicsXG4gICAgICB2YWx1ZTogJydcbiAgICB9LFxuICAgICdub3RpZmljYXRpb25zOmxpZmV0aW1lOmJhbm5lcic6IHtcbiAgICAgIHZhbHVlOiAzMDAwMDAwLFxuICAgICAgZGVzY3JpcHRpb246ICdUaGUgdGltZSBpbiBtaWxsaXNlY29uZHMgd2hpY2ggYSBiYW5uZXIgbm90aWZpY2F0aW9uICcgK1xuICAgICAgJ3dpbGwgYmUgZGlzcGxheWVkIG9uLXNjcmVlbiBmb3IuIFNldHRpbmcgdG8gSW5maW5pdHkgd2lsbCBkaXNhYmxlLidcbiAgICB9LFxuICAgICdub3RpZmljYXRpb25zOmxpZmV0aW1lOmVycm9yJzoge1xuICAgICAgdmFsdWU6IDMwMDAwMCxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGhlIHRpbWUgaW4gbWlsbGlzZWNvbmRzIHdoaWNoIGFuIGVycm9yIG5vdGlmaWNhdGlvbiAnICtcbiAgICAgICd3aWxsIGJlIGRpc3BsYXllZCBvbi1zY3JlZW4gZm9yLiBTZXR0aW5nIHRvIEluZmluaXR5IHdpbGwgZGlzYWJsZS4nXG4gICAgfSxcbiAgICAnbm90aWZpY2F0aW9uczpsaWZldGltZTp3YXJuaW5nJzoge1xuICAgICAgdmFsdWU6IDEwMDAwLFxuICAgICAgZGVzY3JpcHRpb246ICdUaGUgdGltZSBpbiBtaWxsaXNlY29uZHMgd2hpY2ggYSB3YXJuaW5nIG5vdGlmaWNhdGlvbiAnICtcbiAgICAgICAgJ3dpbGwgYmUgZGlzcGxheWVkIG9uLXNjcmVlbiBmb3IuIFNldHRpbmcgdG8gSW5maW5pdHkgd2lsbCBkaXNhYmxlLidcbiAgICB9LFxuICAgICdub3RpZmljYXRpb25zOmxpZmV0aW1lOmluZm8nOiB7XG4gICAgICB2YWx1ZTogNTAwMCxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGhlIHRpbWUgaW4gbWlsbGlzZWNvbmRzIHdoaWNoIGFuIGluZm9ybWF0aW9uIG5vdGlmaWNhdGlvbiAnICtcbiAgICAgICAgJ3dpbGwgYmUgZGlzcGxheWVkIG9uLXNjcmVlbiBmb3IuIFNldHRpbmcgdG8gSW5maW5pdHkgd2lsbCBkaXNhYmxlLidcbiAgICB9LFxuICB9O1xufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/ui/settings/defaults.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/kibana/src/ui/settings/defaults.js",
      "sourcesContent": [
        "import moment from 'moment-timezone';\n\nexport default function defaultSettingsProvider() {\n  const weekdays = moment.weekdays().slice();\n  const [defaultWeekday] = weekdays;\n\n  // wrapped in provider so that a new instance is given to each app/test\n  return {\n    'buildNum': {\n      readonly: true\n    },\n    'query:queryString:options': {\n      value: '{ \"analyze_wildcard\": true }',\n      description: '<a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-query-string-query.html\" target=\"_blank\">Options</a> for the lucene query string parser',\n      type: 'json'\n    },\n    'sort:options': {\n      value: '{ \"unmapped_type\": \"boolean\" }',\n      description: '<a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/search-request-sort.html\" target=\"_blank\">Options</a> for the Elasticsearch sort parameter',\n      type: 'json'\n    },\n    'dateFormat': {\n      value: 'MMMM Do YYYY, HH:mm:ss.SSS',\n      description: 'When displaying a pretty formatted date, use this <a href=\"http://momentjs.com/docs/#/displaying/format/\" target=\"_blank\">format</a>',\n    },\n    'dateFormat:tz': {\n      value: 'Browser',\n      description: 'Which timezone should be used.  \"Browser\" will use the timezone detected by your browser.',\n      type: 'select',\n      options: ['Browser', ...moment.tz.names()]\n    },\n    'dateFormat:scaled': {\n      type: 'json',\n      value:\n`[\n  [\"\", \"HH:mm:ss.SSS\"],\n  [\"PT1S\", \"HH:mm:ss\"],\n  [\"PT1M\", \"HH:mm\"],\n  [\"PT1H\", \"YYYY-MM-DD HH:mm\"],\n  [\"P1DT\", \"YYYY-MM-DD\"],\n  [\"P1YT\", \"YYYY\"]\n]`,\n      description: (\n        'Values that define the format used in situations where timebased' +\n        ' data is rendered in order, and formatted timestamps should adapt to the' +\n        ' interval between measurements. Keys are' +\n        ' <a href=\"http://en.wikipedia.org/wiki/ISO_8601#Time_intervals\" target=\"_blank\">' +\n        'ISO8601 intervals.</a>'\n      )\n    },\n    'dateFormat:dow': {\n      value: defaultWeekday,\n      description: 'What day should weeks start on?',\n      type: 'select',\n      options: weekdays\n    },\n    'defaultIndex': {\n      value: null,\n      description: 'The index to access if no index is set',\n    },\n    'defaultColumns': {\n      value: ['_source'],\n      description: 'Columns displayed by default in the Discovery tab',\n    },\n    'metaFields': {\n      value: ['_source', '_id', '_type', '_index', '_score'],\n      description: 'Fields that exist outside of _source to merge into our document when displaying it',\n    },\n    'discover:sampleSize': {\n      value: 500,\n      description: 'The number of rows to show in the table',\n    },\n    'doc_table:highlight': {\n      value: true,\n      description: 'Highlight results in Discover and Saved Searches Dashboard.' +\n        'Highlighing makes request slow when working on big documents.',\n    },\n    'courier:maxSegmentCount': {\n      value: 30,\n      description: 'Requests in discover are split into segments to prevent massive requests from being sent to ' +\n        'elasticsearch. This setting attempts to prevent the list of segments from getting too long, which might ' +\n        'cause requests to take much longer to process'\n    },\n    'fields:popularLimit': {\n      value: 10,\n      description: 'The top N most popular fields to show',\n    },\n    'histogram:barTarget': {\n      value: 50,\n      description: 'Attempt to generate around this many bar when using \"auto\" interval in date histograms',\n    },\n    'histogram:maxBars': {\n      value: 100,\n      description: 'Never show more than this many bar in date histograms, scale values if needed',\n    },\n    'visualization:tileMap:maxPrecision': {\n      value: 7,\n      description: 'The maximum geoHash precision displayed on tile maps: 7 is high, 10 is very high, ' +\n      '12 is the max. ' +\n      '<a href=\"http://www.elastic.co/guide/en/elasticsearch/reference/current/' +\n      'search-aggregations-bucket-geohashgrid-aggregation.html#_cell_dimensions_at_the_equator\" target=\"_blank\">' +\n      'Explanation of cell dimensions</a>',\n    },\n    'visualization:tileMap:WMSdefaults': {\n      value: JSON.stringify({\n        enabled: false,\n        url: 'https://basemap.nationalmap.gov/arcgis/services/USGSTopo/MapServer/WMSServer',\n        options: {\n          version: '1.3.0',\n          layers: '0',\n          format: 'image/png',\n          transparent: true,\n          attribution: 'Maps provided by USGS',\n          styles: '',\n        }\n      }, null, 2),\n      type: 'json',\n      description: 'Default <a href=\"http://leafletjs.com/reference.html#tilelayer-wms\" target=\"_blank\">properties</a> for the WMS map server support in the tile map'\n    },\n    'visualization:colorMapping': {\n      type: 'json',\n      value: JSON.stringify({\n        Count: '#6eadc1'\n      }),\n      description: 'Maps values to specified colors within visualizations'\n    },\n    'visualization:loadingDelay': {\n      value: '2s',\n      description: 'Time to wait before dimming visualizations during query'\n    },\n    'csv:separator': {\n      value: ',',\n      description: 'Separate exported values with this string',\n    },\n    'csv:quoteValues': {\n      value: true,\n      description: 'Should values be quoted in csv exports?',\n    },\n    'history:limit': {\n      value: 10,\n      description: 'In fields that have history (e.g. query inputs), show this many recent values',\n    },\n    'shortDots:enable': {\n      value: false,\n      description: 'Shorten long fields, for example, instead of foo.bar.baz, show f.b.baz',\n    },\n    'truncate:maxHeight': {\n      value: 115,\n      description: 'The maximum height that a cell in a table should occupy. Set to 0 to disable truncation'\n    },\n    'indexPattern:fieldMapping:lookBack': {\n      value: 5,\n      description: 'For index patterns containing timestamps in their names, look for this many recent matching ' +\n        'patterns from which to query the field mapping'\n    },\n    'format:defaultTypeMap': {\n      type: 'json',\n      value:\n`{\n  \"ip\": { \"id\": \"ip\", \"params\": {} },\n  \"date\": { \"id\": \"date\", \"params\": {} },\n  \"number\": { \"id\": \"number\", \"params\": {} },\n  \"_source\": { \"id\": \"_source\", \"params\": {} },\n  \"_default_\": { \"id\": \"string\", \"params\": {} }\n}`,\n      description: 'Map of the format name to use by default for each field type. ' +\n        '\"_default_\" is used if the field type is not mentioned explicitly'\n    },\n    'format:number:defaultPattern': {\n      type: 'string',\n      value: '0,0.[000]',\n      description: 'Default <a href=\"http://numeraljs.com/\" target=\"_blank\">numeral format</a> for the \"number\" format'\n    },\n    'format:bytes:defaultPattern': {\n      type: 'string',\n      value: '0,0.[000]b',\n      description: 'Default <a href=\"http://numeraljs.com/\" target=\"_blank\">numeral format</a> for the \"bytes\" format'\n    },\n    'format:percent:defaultPattern': {\n      type: 'string',\n      value: '0,0.[000]%',\n      description: 'Default <a href=\"http://numeraljs.com/\" target=\"_blank\">numeral format</a> for the \"percent\" format'\n    },\n    'format:currency:defaultPattern': {\n      type: 'string',\n      value: '($0,0.[00])',\n      description: 'Default <a href=\"http://numeraljs.com/\" target=\"_blank\">numeral format</a> for the \"currency\" format'\n    },\n    'savedObjects:perPage': {\n      type: 'number',\n      value: 5,\n      description: 'Number of objects to show per page in the load dialog'\n    },\n    'timepicker:timeDefaults': {\n      type: 'json',\n      value:\n`{\n  \"from\": \"now-15m\",\n  \"to\": \"now\",\n  \"mode\": \"quick\"\n}`,\n      description: 'The timefilter selection to use when Kibana is started without one'\n    },\n    'timepicker:refreshIntervalDefaults': {\n      type: 'json',\n      value:\n`{\n  \"display\": \"Off\",\n  \"pause\": false,\n  \"value\": 0\n}`,\n      description: 'The timefilter\\'s default refresh interval'\n    },\n    'dashboard:defaultDarkTheme': {\n      value: false,\n      description: 'New dashboards use dark theme by default'\n    },\n    'filters:pinnedByDefault': {\n      value: false,\n      description: 'Whether the filters should have a global state (be pinned) by default'\n    },\n    'notifications:banner': {\n      type: 'markdown',\n      description: 'A custom banner intended for temporary notices to all users. <a href=\"https://help.github.com/articles/basic-writing-and-formatting-syntax/\" target=\"_blank\">Markdown supported</a>.',\n      value: ''\n    },\n    'notifications:lifetime:banner': {\n      value: 3000000,\n      description: 'The time in milliseconds which a banner notification ' +\n      'will be displayed on-screen for. Setting to Infinity will disable.'\n    },\n    'notifications:lifetime:error': {\n      value: 300000,\n      description: 'The time in milliseconds which an error notification ' +\n      'will be displayed on-screen for. Setting to Infinity will disable.'\n    },\n    'notifications:lifetime:warning': {\n      value: 10000,\n      description: 'The time in milliseconds which a warning notification ' +\n        'will be displayed on-screen for. Setting to Infinity will disable.'\n    },\n    'notifications:lifetime:info': {\n      value: 5000,\n      description: 'The time in milliseconds which an information notification ' +\n        'will be displayed on-screen for. Setting to Infinity will disable.'\n    },\n  };\n};\n"
      ]
    },
    "mtime": 1467036622893
  },
  "{\"filename\":\"/home/vio/kibana/src/optimize/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./fs_optimizer",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "FsOptimizer"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "async-to-generator",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nvar _fs_optimizer = require('./fs_optimizer');\n\nvar _fs_optimizer2 = _interopRequireDefault(_fs_optimizer);\n\nmodule.exports = _asyncToGenerator(function* (kbnServer, server, config) {\n  if (!config.get('optimize.enabled')) return;\n\n  // the lazy optimizer sets up two threads, one is the server listening\n  // on 5601 and the other is a server listening on 5602 that builds the\n  // bundles in a \"middleware\" style.\n  //\n  // the server listening on 5601 may be restarted a number of times, depending\n  // on the watch setup managed by the cli. It proxies all bundles/* requests to\n  // the other server. The server on 5602 is long running, in order to prevent\n  // complete rebuilds of the optimize content.\n  var lazy = config.get('optimize.lazy');\n  if (lazy) {\n    return yield kbnServer.mixin(require('./lazy/lazy'));\n  }\n\n  var bundles = kbnServer.bundles;\n  server.exposeStaticDir('/bundles/{path*}', bundles.env.workingDir);\n  yield bundles.writeEntryFiles();\n\n  // in prod, only bundle what looks invalid or missing\n  if (config.get('optimize.useBundleCache')) {\n    bundles = yield bundles.getInvalidBundles();\n  }\n\n  // we might not have any work to do\n  if (!bundles.getIds().length) {\n    server.log(['debug', 'optimize'], 'All bundles are cached and ready to go!');\n    return;\n  }\n\n  // only require the FsOptimizer when we need to\n  var optimizer = new _fs_optimizer2['default']({\n    env: bundles.env,\n    bundles: bundles,\n    profile: config.get('optimize.profile'),\n    urlBasePath: config.get('server.basePath'),\n    sourceMaps: config.get('optimize.sourceMaps'),\n    unsafeCache: config.get('optimize.unsafeCache')\n  });\n\n  server.log(['info', 'optimize'], 'Optimizing and caching ' + bundles.desc() + '. This may take a few minutes');\n\n  var start = Date.now();\n  yield optimizer.run();\n  var seconds = ((Date.now() - start) / 1000).toFixed(2);\n\n  server.log(['info', 'optimize'], 'Optimization of ' + bundles.desc() + ' complete in ' + seconds + ' seconds');\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL29wdGltaXplL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs0QkFBd0IsZ0JBQWdCOzs7O0FBQ3hDLE1BQU0sQ0FBQyxPQUFPLHFCQUFHLFdBQU8sU0FBUyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUs7QUFDcEQsTUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsa0JBQWtCLENBQUMsRUFBRSxPQUFPOzs7Ozs7Ozs7O0FBVTVDLE1BQUksSUFBSSxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsZUFBZSxDQUFDLENBQUM7QUFDdkMsTUFBSSxJQUFJLEVBQUU7QUFDUixXQUFPLE1BQU0sU0FBUyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQztHQUN0RDs7QUFFRCxNQUFJLE9BQU8sR0FBRyxTQUFTLENBQUMsT0FBTyxDQUFDO0FBQ2hDLFFBQU0sQ0FBQyxlQUFlLENBQUMsa0JBQWtCLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUNuRSxRQUFNLE9BQU8sQ0FBQyxlQUFlLEVBQUUsQ0FBQzs7O0FBR2hDLE1BQUksTUFBTSxDQUFDLEdBQUcsQ0FBQyx5QkFBeUIsQ0FBQyxFQUFFO0FBQ3pDLFdBQU8sR0FBRyxNQUFNLE9BQU8sQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO0dBQzdDOzs7QUFHRCxNQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFDLE1BQU0sRUFBRTtBQUM1QixVQUFNLENBQUMsR0FBRyxDQUNSLENBQUMsT0FBTyxFQUFFLFVBQVUsQ0FBQyw0Q0FFdEIsQ0FBQztBQUNGLFdBQU87R0FDUjs7O0FBR0QsTUFBSSxTQUFTLEdBQUcsOEJBQWdCO0FBQzlCLE9BQUcsRUFBRSxPQUFPLENBQUMsR0FBRztBQUNoQixXQUFPLEVBQUUsT0FBTztBQUNoQixXQUFPLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxrQkFBa0IsQ0FBQztBQUN2QyxlQUFXLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQztBQUMxQyxjQUFVLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxxQkFBcUIsQ0FBQztBQUM3QyxlQUFXLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxzQkFBc0IsQ0FBQztHQUNoRCxDQUFDLENBQUM7O0FBRUgsUUFBTSxDQUFDLEdBQUcsQ0FDUixDQUFDLE1BQU0sRUFBRSxVQUFVLENBQUMsOEJBQ00sT0FBTyxDQUFDLElBQUksRUFBRSxtQ0FDekMsQ0FBQzs7QUFFRixNQUFJLEtBQUssR0FBRyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7QUFDdkIsUUFBTSxTQUFTLENBQUMsR0FBRyxFQUFFLENBQUM7QUFDdEIsTUFBSSxPQUFPLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxLQUFLLENBQUEsR0FBSSxJQUFJLENBQUEsQ0FBRSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7O0FBRXZELFFBQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLEVBQUUsVUFBVSxDQUFDLHVCQUFxQixPQUFPLENBQUMsSUFBSSxFQUFFLHFCQUFnQixPQUFPLGNBQVcsQ0FBQztDQUN0RyxDQUFBLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL2tpYmFuYS9zcmMvb3B0aW1pemUvaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgRnNPcHRpbWl6ZXIgZnJvbSAnLi9mc19vcHRpbWl6ZXInO1xubW9kdWxlLmV4cG9ydHMgPSBhc3luYyAoa2JuU2VydmVyLCBzZXJ2ZXIsIGNvbmZpZykgPT4ge1xuICBpZiAoIWNvbmZpZy5nZXQoJ29wdGltaXplLmVuYWJsZWQnKSkgcmV0dXJuO1xuXG4gIC8vIHRoZSBsYXp5IG9wdGltaXplciBzZXRzIHVwIHR3byB0aHJlYWRzLCBvbmUgaXMgdGhlIHNlcnZlciBsaXN0ZW5pbmdcbiAgLy8gb24gNTYwMSBhbmQgdGhlIG90aGVyIGlzIGEgc2VydmVyIGxpc3RlbmluZyBvbiA1NjAyIHRoYXQgYnVpbGRzIHRoZVxuICAvLyBidW5kbGVzIGluIGEgXCJtaWRkbGV3YXJlXCIgc3R5bGUuXG4gIC8vXG4gIC8vIHRoZSBzZXJ2ZXIgbGlzdGVuaW5nIG9uIDU2MDEgbWF5IGJlIHJlc3RhcnRlZCBhIG51bWJlciBvZiB0aW1lcywgZGVwZW5kaW5nXG4gIC8vIG9uIHRoZSB3YXRjaCBzZXR1cCBtYW5hZ2VkIGJ5IHRoZSBjbGkuIEl0IHByb3hpZXMgYWxsIGJ1bmRsZXMvKiByZXF1ZXN0cyB0b1xuICAvLyB0aGUgb3RoZXIgc2VydmVyLiBUaGUgc2VydmVyIG9uIDU2MDIgaXMgbG9uZyBydW5uaW5nLCBpbiBvcmRlciB0byBwcmV2ZW50XG4gIC8vIGNvbXBsZXRlIHJlYnVpbGRzIG9mIHRoZSBvcHRpbWl6ZSBjb250ZW50LlxuICBsZXQgbGF6eSA9IGNvbmZpZy5nZXQoJ29wdGltaXplLmxhenknKTtcbiAgaWYgKGxhenkpIHtcbiAgICByZXR1cm4gYXdhaXQga2JuU2VydmVyLm1peGluKHJlcXVpcmUoJy4vbGF6eS9sYXp5JykpO1xuICB9XG5cbiAgbGV0IGJ1bmRsZXMgPSBrYm5TZXJ2ZXIuYnVuZGxlcztcbiAgc2VydmVyLmV4cG9zZVN0YXRpY0RpcignL2J1bmRsZXMve3BhdGgqfScsIGJ1bmRsZXMuZW52LndvcmtpbmdEaXIpO1xuICBhd2FpdCBidW5kbGVzLndyaXRlRW50cnlGaWxlcygpO1xuXG4gIC8vIGluIHByb2QsIG9ubHkgYnVuZGxlIHdoYXQgbG9va3MgaW52YWxpZCBvciBtaXNzaW5nXG4gIGlmIChjb25maWcuZ2V0KCdvcHRpbWl6ZS51c2VCdW5kbGVDYWNoZScpKSB7XG4gICAgYnVuZGxlcyA9IGF3YWl0IGJ1bmRsZXMuZ2V0SW52YWxpZEJ1bmRsZXMoKTtcbiAgfVxuXG4gIC8vIHdlIG1pZ2h0IG5vdCBoYXZlIGFueSB3b3JrIHRvIGRvXG4gIGlmICghYnVuZGxlcy5nZXRJZHMoKS5sZW5ndGgpIHtcbiAgICBzZXJ2ZXIubG9nKFxuICAgICAgWydkZWJ1ZycsICdvcHRpbWl6ZSddLFxuICAgICAgYEFsbCBidW5kbGVzIGFyZSBjYWNoZWQgYW5kIHJlYWR5IHRvIGdvIWBcbiAgICApO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIG9ubHkgcmVxdWlyZSB0aGUgRnNPcHRpbWl6ZXIgd2hlbiB3ZSBuZWVkIHRvXG4gIGxldCBvcHRpbWl6ZXIgPSBuZXcgRnNPcHRpbWl6ZXIoe1xuICAgIGVudjogYnVuZGxlcy5lbnYsXG4gICAgYnVuZGxlczogYnVuZGxlcyxcbiAgICBwcm9maWxlOiBjb25maWcuZ2V0KCdvcHRpbWl6ZS5wcm9maWxlJyksXG4gICAgdXJsQmFzZVBhdGg6IGNvbmZpZy5nZXQoJ3NlcnZlci5iYXNlUGF0aCcpLFxuICAgIHNvdXJjZU1hcHM6IGNvbmZpZy5nZXQoJ29wdGltaXplLnNvdXJjZU1hcHMnKSxcbiAgICB1bnNhZmVDYWNoZTogY29uZmlnLmdldCgnb3B0aW1pemUudW5zYWZlQ2FjaGUnKSxcbiAgfSk7XG5cbiAgc2VydmVyLmxvZyhcbiAgICBbJ2luZm8nLCAnb3B0aW1pemUnXSxcbiAgICBgT3B0aW1pemluZyBhbmQgY2FjaGluZyAke2J1bmRsZXMuZGVzYygpfS4gVGhpcyBtYXkgdGFrZSBhIGZldyBtaW51dGVzYFxuICApO1xuXG4gIGxldCBzdGFydCA9IERhdGUubm93KCk7XG4gIGF3YWl0IG9wdGltaXplci5ydW4oKTtcbiAgbGV0IHNlY29uZHMgPSAoKERhdGUubm93KCkgLSBzdGFydCkgLyAxMDAwKS50b0ZpeGVkKDIpO1xuXG4gIHNlcnZlci5sb2coWydpbmZvJywgJ29wdGltaXplJ10sIGBPcHRpbWl6YXRpb24gb2YgJHtidW5kbGVzLmRlc2MoKX0gY29tcGxldGUgaW4gJHtzZWNvbmRzfSBzZWNvbmRzYCk7XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/optimize/index.js"
      ],
      "names": [],
      "mappings": ";;;;;;4BAAwB,gBAAgB;;;;AACxC,MAAM,CAAC,OAAO,qBAAG,WAAO,SAAS,EAAE,MAAM,EAAE,MAAM,EAAK;AACpD,MAAI,CAAC,MAAM,CAAC,GAAG,CAAC,kBAAkB,CAAC,EAAE,OAAO;;;;;;;;;;AAU5C,MAAI,IAAI,GAAG,MAAM,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;AACvC,MAAI,IAAI,EAAE;AACR,WAAO,MAAM,SAAS,CAAC,KAAK,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC;GACtD;;AAED,MAAI,OAAO,GAAG,SAAS,CAAC,OAAO,CAAC;AAChC,QAAM,CAAC,eAAe,CAAC,kBAAkB,EAAE,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;AACnE,QAAM,OAAO,CAAC,eAAe,EAAE,CAAC;;;AAGhC,MAAI,MAAM,CAAC,GAAG,CAAC,yBAAyB,CAAC,EAAE;AACzC,WAAO,GAAG,MAAM,OAAO,CAAC,iBAAiB,EAAE,CAAC;GAC7C;;;AAGD,MAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,MAAM,EAAE;AAC5B,UAAM,CAAC,GAAG,CACR,CAAC,OAAO,EAAE,UAAU,CAAC,4CAEtB,CAAC;AACF,WAAO;GACR;;;AAGD,MAAI,SAAS,GAAG,8BAAgB;AAC9B,OAAG,EAAE,OAAO,CAAC,GAAG;AAChB,WAAO,EAAE,OAAO;AAChB,WAAO,EAAE,MAAM,CAAC,GAAG,CAAC,kBAAkB,CAAC;AACvC,eAAW,EAAE,MAAM,CAAC,GAAG,CAAC,iBAAiB,CAAC;AAC1C,cAAU,EAAE,MAAM,CAAC,GAAG,CAAC,qBAAqB,CAAC;AAC7C,eAAW,EAAE,MAAM,CAAC,GAAG,CAAC,sBAAsB,CAAC;GAChD,CAAC,CAAC;;AAEH,QAAM,CAAC,GAAG,CACR,CAAC,MAAM,EAAE,UAAU,CAAC,8BACM,OAAO,CAAC,IAAI,EAAE,mCACzC,CAAC;;AAEF,MAAI,KAAK,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;AACvB,QAAM,SAAS,CAAC,GAAG,EAAE,CAAC;AACtB,MAAI,OAAO,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,KAAK,CAAA,GAAI,IAAI,CAAA,CAAE,OAAO,CAAC,CAAC,CAAC,CAAC;;AAEvD,QAAM,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,UAAU,CAAC,uBAAqB,OAAO,CAAC,IAAI,EAAE,qBAAgB,OAAO,cAAW,CAAC;CACtG,CAAA,CAAC",
      "file": "/home/vio/kibana/src/optimize/index.js",
      "sourcesContent": [
        "import FsOptimizer from './fs_optimizer';\nmodule.exports = async (kbnServer, server, config) => {\n  if (!config.get('optimize.enabled')) return;\n\n  // the lazy optimizer sets up two threads, one is the server listening\n  // on 5601 and the other is a server listening on 5602 that builds the\n  // bundles in a \"middleware\" style.\n  //\n  // the server listening on 5601 may be restarted a number of times, depending\n  // on the watch setup managed by the cli. It proxies all bundles/* requests to\n  // the other server. The server on 5602 is long running, in order to prevent\n  // complete rebuilds of the optimize content.\n  let lazy = config.get('optimize.lazy');\n  if (lazy) {\n    return await kbnServer.mixin(require('./lazy/lazy'));\n  }\n\n  let bundles = kbnServer.bundles;\n  server.exposeStaticDir('/bundles/{path*}', bundles.env.workingDir);\n  await bundles.writeEntryFiles();\n\n  // in prod, only bundle what looks invalid or missing\n  if (config.get('optimize.useBundleCache')) {\n    bundles = await bundles.getInvalidBundles();\n  }\n\n  // we might not have any work to do\n  if (!bundles.getIds().length) {\n    server.log(\n      ['debug', 'optimize'],\n      `All bundles are cached and ready to go!`\n    );\n    return;\n  }\n\n  // only require the FsOptimizer when we need to\n  let optimizer = new FsOptimizer({\n    env: bundles.env,\n    bundles: bundles,\n    profile: config.get('optimize.profile'),\n    urlBasePath: config.get('server.basePath'),\n    sourceMaps: config.get('optimize.sourceMaps'),\n    unsafeCache: config.get('optimize.unsafeCache'),\n  });\n\n  server.log(\n    ['info', 'optimize'],\n    `Optimizing and caching ${bundles.desc()}. This may take a few minutes`\n  );\n\n  let start = Date.now();\n  await optimizer.run();\n  let seconds = ((Date.now() - start) / 1000).toFixed(2);\n\n  server.log(['info', 'optimize'], `Optimization of ${bundles.desc()} complete in ${seconds} seconds`);\n};\n"
      ]
    },
    "mtime": 1467036622805
  },
  "{\"filename\":\"/home/vio/kibana/src/optimize/fs_optimizer.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./base_optimizer",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "BaseOptimizer"
              }
            ]
          },
          {
            "source": "../utils/from_root",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "fromRoot"
              }
            ]
          },
          {
            "source": "bluebird",
            "imported": [
              "fromNode"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "fromNode",
                "local": "fromNode"
              }
            ]
          },
          {
            "source": "fs",
            "imported": [
              "writeFile"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "writeFile",
                "local": "writeFile"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "get",
        "inherits",
        "create-class",
        "class-call-check",
        "async-to-generator",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _base_optimizer = require('./base_optimizer');\n\nvar _base_optimizer2 = _interopRequireDefault(_base_optimizer);\n\nvar _utilsFrom_root = require('../utils/from_root');\n\nvar _utilsFrom_root2 = _interopRequireDefault(_utilsFrom_root);\n\nvar _bluebird = require('bluebird');\n\nvar _fs = require('fs');\n\nmodule.exports = (function (_BaseOptimizer) {\n  _inherits(FsOptimizer, _BaseOptimizer);\n\n  function FsOptimizer() {\n    _classCallCheck(this, FsOptimizer);\n\n    _get(Object.getPrototypeOf(FsOptimizer.prototype), 'constructor', this).apply(this, arguments);\n  }\n\n  _createClass(FsOptimizer, [{\n    key: 'init',\n    value: _asyncToGenerator(function* () {\n      yield this.initCompiler();\n    })\n  }, {\n    key: 'run',\n    value: _asyncToGenerator(function* () {\n      var _this = this;\n\n      if (!this.compiler) yield this.init();\n\n      var stats = yield (0, _bluebird.fromNode)(function (cb) {\n        _this.compiler.run(function (err, stats) {\n          if (err || !stats) return cb(err);\n\n          if (stats.hasErrors() || stats.hasWarnings()) {\n            return cb(_this.failedStatsToError(stats));\n          } else {\n            cb(null, stats);\n          }\n        });\n      });\n    })\n  }]);\n\n  return FsOptimizer;\n})(_base_optimizer2['default']);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL29wdGltaXplL2ZzX29wdGltaXplci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs4QkFDMEIsa0JBQWtCOzs7OzhCQUN2QixvQkFBb0I7Ozs7d0JBQ2hCLFVBQVU7O2tCQUNULElBQUk7O0FBRTlCLE1BQU0sQ0FBQyxPQUFPO1lBQVMsV0FBVzs7V0FBWCxXQUFXOzBCQUFYLFdBQVc7OytCQUFYLFdBQVc7OztlQUFYLFdBQVc7OzZCQUN0QixhQUFHO0FBQ1gsWUFBTSxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUM7S0FDM0I7Ozs2QkFFUSxhQUFHOzs7QUFDVixVQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxNQUFNLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQzs7QUFFdEMsVUFBSSxLQUFLLEdBQUcsTUFBTSx3QkFBUyxVQUFBLEVBQUUsRUFBSTtBQUMvQixjQUFLLFFBQVEsQ0FBQyxHQUFHLENBQUMsVUFBQyxHQUFHLEVBQUUsS0FBSyxFQUFLO0FBQ2hDLGNBQUksR0FBRyxJQUFJLENBQUMsS0FBSyxFQUFFLE9BQU8sRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDOztBQUVsQyxjQUFJLEtBQUssQ0FBQyxTQUFTLEVBQUUsSUFBSSxLQUFLLENBQUMsV0FBVyxFQUFFLEVBQUU7QUFDNUMsbUJBQU8sRUFBRSxDQUFDLE1BQUssa0JBQWtCLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztXQUMzQyxNQUNJO0FBQ0gsY0FBRSxDQUFDLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQztXQUNqQjtTQUNGLENBQUMsQ0FBQztPQUNKLENBQUMsQ0FBQztLQUNKOzs7U0FwQm9CLFdBQVc7K0JBcUJqQyxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby9raWJhbmEvc3JjL29wdGltaXplL2ZzX29wdGltaXplci5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxuaW1wb3J0IEJhc2VPcHRpbWl6ZXIgZnJvbSAnLi9iYXNlX29wdGltaXplcic7XG5pbXBvcnQgZnJvbVJvb3QgZnJvbSAnLi4vdXRpbHMvZnJvbV9yb290JztcbmltcG9ydCB7IGZyb21Ob2RlIH0gZnJvbSAnYmx1ZWJpcmQnO1xuaW1wb3J0IHsgd3JpdGVGaWxlIH0gZnJvbSAnZnMnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIEZzT3B0aW1pemVyIGV4dGVuZHMgQmFzZU9wdGltaXplciB7XG4gIGFzeW5jIGluaXQoKSB7XG4gICAgYXdhaXQgdGhpcy5pbml0Q29tcGlsZXIoKTtcbiAgfVxuXG4gIGFzeW5jIHJ1bigpIHtcbiAgICBpZiAoIXRoaXMuY29tcGlsZXIpIGF3YWl0IHRoaXMuaW5pdCgpO1xuXG4gICAgbGV0IHN0YXRzID0gYXdhaXQgZnJvbU5vZGUoY2IgPT4ge1xuICAgICAgdGhpcy5jb21waWxlci5ydW4oKGVyciwgc3RhdHMpID0+IHtcbiAgICAgICAgaWYgKGVyciB8fCAhc3RhdHMpIHJldHVybiBjYihlcnIpO1xuXG4gICAgICAgIGlmIChzdGF0cy5oYXNFcnJvcnMoKSB8fCBzdGF0cy5oYXNXYXJuaW5ncygpKSB7XG4gICAgICAgICAgcmV0dXJuIGNiKHRoaXMuZmFpbGVkU3RhdHNUb0Vycm9yKHN0YXRzKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgY2IobnVsbCwgc3RhdHMpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/optimize/fs_optimizer.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;;;;;8BAC0B,kBAAkB;;;;8BACvB,oBAAoB;;;;wBAChB,UAAU;;kBACT,IAAI;;AAE9B,MAAM,CAAC,OAAO;YAAS,WAAW;;WAAX,WAAW;0BAAX,WAAW;;+BAAX,WAAW;;;eAAX,WAAW;;6BACtB,aAAG;AACX,YAAM,IAAI,CAAC,YAAY,EAAE,CAAC;KAC3B;;;6BAEQ,aAAG;;;AACV,UAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,MAAM,IAAI,CAAC,IAAI,EAAE,CAAC;;AAEtC,UAAI,KAAK,GAAG,MAAM,wBAAS,UAAA,EAAE,EAAI;AAC/B,cAAK,QAAQ,CAAC,GAAG,CAAC,UAAC,GAAG,EAAE,KAAK,EAAK;AAChC,cAAI,GAAG,IAAI,CAAC,KAAK,EAAE,OAAO,EAAE,CAAC,GAAG,CAAC,CAAC;;AAElC,cAAI,KAAK,CAAC,SAAS,EAAE,IAAI,KAAK,CAAC,WAAW,EAAE,EAAE;AAC5C,mBAAO,EAAE,CAAC,MAAK,kBAAkB,CAAC,KAAK,CAAC,CAAC,CAAC;WAC3C,MACI;AACH,cAAE,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;WACjB;SACF,CAAC,CAAC;OACJ,CAAC,CAAC;KACJ;;;SApBoB,WAAW;+BAqBjC,CAAC",
      "file": "/home/vio/kibana/src/optimize/fs_optimizer.js",
      "sourcesContent": [
        "\nimport BaseOptimizer from './base_optimizer';\nimport fromRoot from '../utils/from_root';\nimport { fromNode } from 'bluebird';\nimport { writeFile } from 'fs';\n\nmodule.exports = class FsOptimizer extends BaseOptimizer {\n  async init() {\n    await this.initCompiler();\n  }\n\n  async run() {\n    if (!this.compiler) await this.init();\n\n    let stats = await fromNode(cb => {\n      this.compiler.run((err, stats) => {\n        if (err || !stats) return cb(err);\n\n        if (stats.hasErrors() || stats.hasWarnings()) {\n          return cb(this.failedStatsToError(stats));\n        }\n        else {\n          cb(null, stats);\n        }\n      });\n    });\n  }\n};\n"
      ]
    },
    "mtime": 1467036622805
  },
  "{\"filename\":\"/home/vio/kibana/src/optimize/base_optimizer.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "webpack",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "webpack"
              }
            ]
          },
          {
            "source": "boom",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Boom"
              }
            ]
          },
          {
            "source": "webpack-directory-name-as-main",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "DirectoryNameAsMain"
              }
            ]
          },
          {
            "source": "extract-text-webpack-plugin",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "ExtractTextPlugin"
              }
            ]
          },
          {
            "source": "webpack/lib/optimize/CommonsChunkPlugin",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "CommonsChunkPlugin"
              }
            ]
          },
          {
            "source": "webpack/lib/DefinePlugin",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "DefinePlugin"
              }
            ]
          },
          {
            "source": "webpack/lib/optimize/UglifyJsPlugin",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "UglifyJsPlugin"
              }
            ]
          },
          {
            "source": "../utils/from_root",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "fromRoot"
              }
            ]
          },
          {
            "source": "./babel_options",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "babelOptions"
              }
            ]
          },
          {
            "source": "util",
            "imported": [
              "inherits"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "inherits",
                "local": "inherits"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "defaults",
              "transform"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "defaults",
                "local": "defaults"
              },
              {
                "kind": "named",
                "imported": "transform",
                "local": "transform"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "resolve"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "resolve",
                "local": "resolve"
              }
            ]
          },
          {
            "source": "fs",
            "imported": [
              "writeFile"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "writeFile",
                "local": "writeFile"
              }
            ]
          },
          {
            "source": "../../package.json",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "pkg"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "async-to-generator",
        "to-consumable-array",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i]; return arr2; } else { return Array.from(arr); } }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _webpack = require('webpack');\n\nvar _webpack2 = _interopRequireDefault(_webpack);\n\nvar _boom = require('boom');\n\nvar _boom2 = _interopRequireDefault(_boom);\n\nvar _webpackDirectoryNameAsMain = require('webpack-directory-name-as-main');\n\nvar _webpackDirectoryNameAsMain2 = _interopRequireDefault(_webpackDirectoryNameAsMain);\n\nvar _extractTextWebpackPlugin = require('extract-text-webpack-plugin');\n\nvar _extractTextWebpackPlugin2 = _interopRequireDefault(_extractTextWebpackPlugin);\n\nvar _webpackLibOptimizeCommonsChunkPlugin = require('webpack/lib/optimize/CommonsChunkPlugin');\n\nvar _webpackLibOptimizeCommonsChunkPlugin2 = _interopRequireDefault(_webpackLibOptimizeCommonsChunkPlugin);\n\nvar _webpackLibDefinePlugin = require('webpack/lib/DefinePlugin');\n\nvar _webpackLibDefinePlugin2 = _interopRequireDefault(_webpackLibDefinePlugin);\n\nvar _webpackLibOptimizeUglifyJsPlugin = require('webpack/lib/optimize/UglifyJsPlugin');\n\nvar _webpackLibOptimizeUglifyJsPlugin2 = _interopRequireDefault(_webpackLibOptimizeUglifyJsPlugin);\n\nvar _utilsFrom_root = require('../utils/from_root');\n\nvar _utilsFrom_root2 = _interopRequireDefault(_utilsFrom_root);\n\nvar _babel_options = require('./babel_options');\n\nvar _babel_options2 = _interopRequireDefault(_babel_options);\n\nvar _util = require('util');\n\nvar _lodash = require('lodash');\n\nvar _path = require('path');\n\nvar _fs = require('fs');\n\nvar _packageJson = require('../../package.json');\n\nvar _packageJson2 = _interopRequireDefault(_packageJson);\n\nvar babelExclude = [/[\\/\\\\](webpackShims|node_modules|bower_components)[\\/\\\\]/];\n\nvar BaseOptimizer = (function () {\n  function BaseOptimizer(opts) {\n    _classCallCheck(this, BaseOptimizer);\n\n    this.env = opts.env;\n    this.urlBasePath = opts.urlBasePath;\n    this.bundles = opts.bundles;\n    this.profile = opts.profile || false;\n\n    switch (opts.sourceMaps) {\n      case true:\n        this.sourceMaps = 'source-map';\n        break;\n\n      case 'fast':\n        this.sourceMaps = 'cheap-module-eval-source-map';\n        break;\n\n      default:\n        this.sourceMaps = opts.sourceMaps || false;\n        break;\n    }\n\n    this.unsafeCache = opts.unsafeCache || false;\n    if (typeof this.unsafeCache === 'string') {\n      this.unsafeCache = [new RegExp(this.unsafeCache.slice(1, -1))];\n    }\n  }\n\n  _createClass(BaseOptimizer, [{\n    key: 'initCompiler',\n    value: _asyncToGenerator(function* () {\n      var _this = this;\n\n      if (this.compiler) return this.compiler;\n\n      var compilerConfig = this.getConfig();\n      this.compiler = (0, _webpack2['default'])(compilerConfig);\n\n      this.compiler.plugin('done', function (stats) {\n        if (!_this.profile) return;\n\n        var path = (0, _path.resolve)(_this.env.workingDir, 'stats.json');\n        var content = JSON.stringify(stats.toJson());\n        (0, _fs.writeFile)(path, content, function (err) {\n          if (err) throw err;\n        });\n      });\n\n      return this.compiler;\n    })\n  }, {\n    key: 'getConfig',\n    value: function getConfig() {\n      var mapQ = this.sourceMaps ? '?sourceMap' : '';\n      var mapQPre = mapQ ? mapQ + '&' : '?';\n\n      return {\n        context: (0, _utilsFrom_root2['default'])('.'),\n        entry: this.bundles.toWebpackEntries(),\n\n        devtool: this.sourceMaps,\n        profile: this.profile || false,\n\n        output: {\n          path: this.env.workingDir,\n          filename: '[name].bundle.js',\n          sourceMapFilename: '[file].map',\n          publicPath: (this.urlBasePath || '') + '/bundles/',\n          devtoolModuleFilenameTemplate: '[absolute-resource-path]'\n        },\n\n        recordsPath: (0, _path.resolve)(this.env.workingDir, 'webpack.records'),\n\n        plugins: [new _webpack2['default'].ResolverPlugin([new _webpackDirectoryNameAsMain2['default']()]), new _webpack2['default'].NoErrorsPlugin(), new _extractTextWebpackPlugin2['default']('[name].style.css', {\n          allChunks: true\n        }), new _webpackLibOptimizeCommonsChunkPlugin2['default']({\n          name: 'commons',\n          filename: 'commons.bundle.js'\n        })].concat(_toConsumableArray(this.pluginsForEnv(this.env.context.env))),\n\n        module: {\n          loaders: [{\n            test: /\\.less$/,\n            loader: _extractTextWebpackPlugin2['default'].extract('style', 'css' + mapQ + '!autoprefixer' + mapQPre + '{ \"browsers\": [\"last 2 versions\",\"> 5%\"] }!less' + mapQPre + 'dumpLineNumbers=comments')\n          }, { test: /\\.css$/, loader: _extractTextWebpackPlugin2['default'].extract('style', 'css' + mapQ) }, { test: /\\.jade$/, loader: 'jade' }, { test: /\\.json$/, loader: 'json' }, { test: /\\.(html|tmpl)$/, loader: 'raw' }, { test: /\\.png$/, loader: 'url?limit=10000&name=[path][name].[ext]' }, { test: /\\.(woff|woff2|ttf|eot|svg|ico)(\\?|$)/, loader: 'file?name=[path][name].[ext]' }, { test: /[\\/\\\\]src[\\/\\\\](plugins|ui)[\\/\\\\].+\\.js$/, loader: 'rjs-repack' + mapQ }, {\n            test: /\\.js$/,\n            exclude: babelExclude.concat(this.env.noParse),\n            loader: 'babel',\n            query: _babel_options2['default'].webpack\n          }, {\n            test: /\\.jsx$/,\n            exclude: babelExclude.concat(this.env.noParse),\n            loader: 'babel',\n            query: (0, _lodash.defaults)({\n              nonStandard: true\n            }, _babel_options2['default'].webpack)\n          }].concat(this.env.loaders),\n          postLoaders: this.env.postLoaders || [],\n          noParse: this.env.noParse\n        },\n\n        resolve: {\n          extensions: ['.js', '.json', '.jsx', '.less', ''],\n          postfixes: [''],\n          modulesDirectories: ['webpackShims', 'node_modules'],\n          fallback: [(0, _utilsFrom_root2['default'])('webpackShims'), (0, _utilsFrom_root2['default'])('node_modules')],\n          loaderPostfixes: ['-loader', ''],\n          root: (0, _utilsFrom_root2['default'])('.'),\n          alias: this.env.aliases,\n          unsafeCache: this.unsafeCache\n        },\n\n        resolveLoader: {\n          alias: (0, _lodash.transform)(_packageJson2['default'].dependencies, function (aliases, version, name) {\n            if (name.endsWith('-loader')) {\n              aliases[name.replace(/-loader$/, '')] = require.resolve(name);\n            }\n          }, {})\n        }\n      };\n    }\n  }, {\n    key: 'pluginsForEnv',\n    value: function pluginsForEnv(env) {\n      if (env !== 'production') {\n        return [];\n      }\n\n      return [new _webpackLibDefinePlugin2['default']({\n        'process.env': {\n          'NODE_ENV': '\"production\"'\n        }\n      }), new _webpackLibOptimizeUglifyJsPlugin2['default']({\n        compress: {\n          warnings: false\n        },\n        sourceMap: false,\n        mangle: false\n      })];\n    }\n  }, {\n    key: 'failedStatsToError',\n    value: function failedStatsToError(stats) {\n      var statFormatOpts = {\n        hash: false, // add the hash of the compilation\n        version: false, // add webpack version information\n        timings: false, // add timing information\n        assets: false, // add assets information\n        chunks: false, // add chunk information\n        chunkModules: false, // add built modules information to chunk information\n        modules: false, // add built modules information\n        cached: false, // add also information about cached (not built) modules\n        reasons: false, // add information about the reasons why modules are included\n        source: false, // add the source code of modules\n        errorDetails: false, // add details to errors (like resolving log)\n        chunkOrigins: false, // add the origins of chunks and chunk merging info\n        modulesSort: false, // (string) sort the modules by that field\n        chunksSort: false, // (string) sort the chunks by that field\n        assetsSort: false, // (string) sort the assets by that field\n        children: false\n      };\n\n      var details = stats.toString((0, _lodash.defaults)({ colors: true }, statFormatOpts));\n\n      return _boom2['default'].create(500, 'Optimizations failure.\\n' + details.split('\\n').join('\\n    ') + '\\n', stats.toJson(statFormatOpts));\n    }\n  }]);\n\n  return BaseOptimizer;\n})();\n\nmodule.exports = BaseOptimizer;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL29wdGltaXplL2Jhc2Vfb3B0aW1pemVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozt1QkFBb0IsU0FBUzs7OztvQkFDWixNQUFNOzs7OzBDQUNTLGdDQUFnQzs7Ozt3Q0FDbEMsNkJBQTZCOzs7O29EQUM1Qix5Q0FBeUM7Ozs7c0NBQy9DLDBCQUEwQjs7OztnREFDeEIscUNBQXFDOzs7OzhCQUUzQyxvQkFBb0I7Ozs7NkJBQ2hCLGlCQUFpQjs7OztvQkFDakIsTUFBTTs7c0JBQ0ssUUFBUTs7b0JBQ3BCLE1BQU07O2tCQUNKLElBQUk7OzJCQUVkLG9CQUFvQjs7OztBQURwQyxJQUFJLFlBQVksR0FBRyxDQUFDLDBEQUEwRCxDQUFDLENBQUM7O0lBRzFFLGFBQWE7QUFDTixXQURQLGFBQWEsQ0FDTCxJQUFJLEVBQUU7MEJBRGQsYUFBYTs7QUFFZixRQUFJLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUM7QUFDcEIsUUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDO0FBQ3BDLFFBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQztBQUM1QixRQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxPQUFPLElBQUksS0FBSyxDQUFDOztBQUVyQyxZQUFRLElBQUksQ0FBQyxVQUFVO0FBQ3JCLFdBQUssSUFBSTtBQUNQLFlBQUksQ0FBQyxVQUFVLEdBQUcsWUFBWSxDQUFDO0FBQy9CLGNBQU07O0FBQUEsQUFFUixXQUFLLE1BQU07QUFDVCxZQUFJLENBQUMsVUFBVSxHQUFHLDhCQUE4QixDQUFDO0FBQ2pELGNBQU07O0FBQUEsQUFFUjtBQUNFLFlBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLFVBQVUsSUFBSSxLQUFLLENBQUM7QUFDM0MsY0FBTTtBQUFBLEtBQ1Q7O0FBRUQsUUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsV0FBVyxJ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QUFjLEdBQUc7QUFDbkIsWUFBSSxFQUFFLEtBQUs7QUFDWCxlQUFPLEVBQUUsS0FBSztBQUNkLGVBQU8sRUFBRSxLQUFLO0FBQ2QsY0FBTSxFQUFFLEtBQUs7QUFDYixjQUFNLEVBQUUsS0FBSztBQUNiLG9CQUFZLEVBQUUsS0FBSztBQUNuQixlQUFPLEVBQUUsS0FBSztBQUNkLGNBQU0sRUFBRSxLQUFLO0FBQ2IsZUFBTyxFQUFFLEtBQUs7QUFDZCxjQUFNLEVBQUUsS0FBSztBQUNiLG9CQUFZLEVBQUUsS0FBSztBQUNuQixvQkFBWSxFQUFFLEtBQUs7QUFDbkIsbUJBQVcsRUFBRSxLQUFLO0FBQ2xCLGtCQUFVLEVBQUUsS0FBSztBQUNqQixrQkFBVSxFQUFFLEtBQUs7QUFDakIsZ0JBQVEsRUFBRSxLQUFLO09BQ2hCLENBQUM7O0FBRUYsVUFBSSxPQUFPLEdBQUcsS0FBSyxDQUFDLFFBQVEsQ0FBQyxzQkFBUyxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsRUFBRSxjQUFjLENBQUMsQ0FBQyxDQUFDOztBQUV6RSxhQUFPLGtCQUFLLE1BQU0sQ0FDaEIsR0FBRywrQkFDd0IsT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLFNBQzdELEtBQUssQ0FBQyxNQUFNLENBQUMsY0FBYyxDQUFDLENBQzdCLENBQUM7S0FDSDs7O1NBNUxHLGFBQWE7OztBQStMbkIsTUFBTSxDQUFDLE9BQU8sR0FBRyxhQUFhLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL2tpYmFuYS9zcmMvb3B0aW1pemUvYmFzZV9vcHRpbWl6ZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgd2VicGFjayBmcm9tICd3ZWJwYWNrJztcbmltcG9ydCBCb29tIGZyb20gJ2Jvb20nO1xuaW1wb3J0IERpcmVjdG9yeU5hbWVBc01haW4gZnJvbSAnd2VicGFjay1kaXJlY3RvcnktbmFtZS1hcy1tYWluJztcbmltcG9ydCBFeHRyYWN0VGV4dFBsdWdpbiBmcm9tICdleHRyYWN0LXRleHQtd2VicGFjay1wbHVnaW4nO1xuaW1wb3J0IENvbW1vbnNDaHVua1BsdWdpbiBmcm9tICd3ZWJwYWNrL2xpYi9vcHRpbWl6ZS9Db21tb25zQ2h1bmtQbHVnaW4nO1xuaW1wb3J0IERlZmluZVBsdWdpbiBmcm9tICd3ZWJwYWNrL2xpYi9EZWZpbmVQbHVnaW4nO1xuaW1wb3J0IFVnbGlmeUpzUGx1Z2luIGZyb20gJ3dlYnBhY2svbGliL29wdGltaXplL1VnbGlmeUpzUGx1Z2luJztcblxuaW1wb3J0IGZyb21Sb290IGZyb20gJy4uL3V0aWxzL2Zyb21fcm9vdCc7XG5pbXBvcnQgYmFiZWxPcHRpb25zIGZyb20gJy4vYmFiZWxfb3B0aW9ucyc7XG5pbXBvcnQgeyBpbmhlcml0cyB9IGZyb20gJ3V0aWwnO1xuaW1wb3J0IHsgZGVmYXVsdHMsIHRyYW5zZm9ybSB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgeyByZXNvbHZlIH0gZnJvbSAncGF0aCc7XG5pbXBvcnQgeyB3cml0ZUZpbGUgfSBmcm9tICdmcyc7XG5sZXQgYmFiZWxFeGNsdWRlID0gWy9bXFwvXFxcXF0od2VicGFja1NoaW1zfG5vZGVfbW9kdWxlc3xib3dlcl9jb21wb25lbnRzKVtcXC9cXFxcXS9dO1xuaW1wb3J0IHBrZyBmcm9tICcuLi8uLi9wYWNrYWdlLmpzb24nO1xuXG5jbGFzcyBCYXNlT3B0aW1pemVyIHtcbiAgY29uc3RydWN0b3Iob3B0cykge1xuICAgIHRoaXMuZW52ID0gb3B0cy5lbnY7XG4gICAgdGhpcy51cmxCYXNlUGF0aCA9IG9wdHMudXJsQmFzZVBhdGg7XG4gICAgdGhpcy5idW5kbGVzID0gb3B0cy5idW5kbGVzO1xuICAgIHRoaXMucHJvZmlsZSA9IG9wdHMucHJvZmlsZSB8fCBmYWxzZTtcblxuICAgIHN3aXRjaCAob3B0cy5zb3VyY2VNYXBzKSB7XG4gICAgICBjYXNlIHRydWU6XG4gICAgICAgIHRoaXMuc291cmNlTWFwcyA9ICdzb3VyY2UtbWFwJztcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2Zhc3QnOlxuICAgICAgICB0aGlzLnNvdXJjZU1hcHMgPSAnY2hlYXAtbW9kdWxlLWV2YWwtc291cmNlLW1hcCc7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aGlzLnNvdXJjZU1hcHMgPSBvcHRzLnNvdXJjZU1hcHMgfHwgZmFsc2U7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIHRoaXMudW5zYWZlQ2FjaGUgPSBvcHRzLnVuc2FmZUNhY2hlIHx8IGZhbHNlO1xuICAgIGlmICh0eXBlb2YgdGhpcy51bnNhZmVDYWNoZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRoaXMudW5zYWZlQ2FjaGUgPSBbXG4gICAgICAgIG5ldyBSZWdFeHAodGhpcy51bnNhZmVDYWNoZS5zbGljZSgxLCAtMSkpXG4gICAgICBdO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGluaXRDb21waWxlcigpIHtcbiAgICBpZiAodGhpcy5jb21waWxlcikgcmV0dXJuIHRoaXMuY29tcGlsZXI7XG5cbiAgICBsZXQgY29tcGlsZXJDb25maWcgPSB0aGlzLmdldENvbmZpZygpO1xuICAgIHRoaXMuY29tcGlsZXIgPSB3ZWJwYWNrKGNvbXBpbGVyQ29uZmlnKTtcblxuICAgIHRoaXMuY29tcGlsZXIucGx1Z2luKCdkb25lJywgc3RhdHMgPT4ge1xuICAgICAgaWYgKCF0aGlzLnByb2ZpbGUpIHJldHVybjtcblxuICAgICAgbGV0IHBhdGggPSByZXNvbHZlKHRoaXMuZW52LndvcmtpbmdEaXIsICdzdGF0cy5qc29uJyk7XG4gICAgICBsZXQgY29udGVudCA9IEpTT04uc3RyaW5naWZ5KHN0YXRzLnRvSnNvbigpKTtcbiAgICAgIHdyaXRlRmlsZShwYXRoLCBjb250ZW50LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGlmIChlcnIpIHRocm93IGVycjtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXMuY29tcGlsZXI7XG4gIH1cblxuICBnZXRDb25maWcoKSB7XG4gICAgbGV0IG1hcFEgPSB0aGlzLnNvdXJjZU1hcHMgPyAnP3NvdXJjZU1hcCcgOiAnJztcbiAgICBsZXQgbWFwUVByZSA9IG1hcFEgPyBtYXBRICsgJyYnIDogJz8nO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbnRleHQ6IGZyb21Sb290KCcuJyksXG4gICAgICBlbnRyeTogdGhpcy5idW5kbGVzLnRvV2VicGFja0VudHJpZXMoKSxcblxuICAgICAgZGV2dG9vbDogdGhpcy5zb3VyY2VNYXBzLFxuICAgICAgcHJvZmlsZTogdGhpcy5wcm9maWxlIHx8IGZhbHNlLFxuXG4gICAgICBvdXRwdXQ6IHtcbiAgICAgICAgcGF0aDogdGhpcy5lbnYud29ya2luZ0RpcixcbiAgICAgICAgZmlsZW5hbWU6ICdbbmFtZV0uYnVuZGxlLmpzJyxcbiAgICAgICAgc291cmNlTWFwRmlsZW5hbWU6ICdbZmlsZV0ubWFwJyxcbiAgICAgICAgcHVibGljUGF0aDogYCR7dGhpcy51cmxCYXNlUGF0aCB8fCAnJ30vYnVuZGxlcy9gLFxuICAgICAgICBkZXZ0b29sTW9kdWxlRmlsZW5hbWVUZW1wbGF0ZTogJ1thYnNvbHV0ZS1yZXNvdXJjZS1wYXRoXSdcbiAgICAgIH0sXG5cbiAgICAgIHJlY29yZHNQYXRoOiByZXNvbHZlKHRoaXMuZW52LndvcmtpbmdEaXIsICd3ZWJwYWNrLnJlY29yZHMnKSxcblxuICAgICAgcGx1Z2luczogW1xuICAgICAgICBuZXcgd2VicGFjay5SZXNvbHZlclBsdWdpbihbXG4gICAgICAgICAgbmV3IERpcmVjdG9yeU5hbWVBc01haW4oKVxuICAgICAgICBdKSxcbiAgICAgICAgbmV3IHdlYnBhY2suTm9FcnJvcnNQbHVnaW4oKSxcbiAgICAgICAgbmV3IEV4dHJhY3RUZXh0UGx1Z2luKCdbbmFtZV0uc3R5bGUuY3NzJywge1xuICAgICAgICAgIGFsbENodW5rczogdHJ1ZVxuICAgICAgICB9KSxcbiAgICAgICAgbmV3IENvbW1vbnNDaHVua1BsdWdpbih7XG4gICAgICAgICAgbmFtZTogJ2NvbW1vbnMnLFxuICAgICAgICAgIGZpbGVuYW1lOiAnY29tbW9ucy5idW5kbGUuanMnXG4gICAgICAgIH0pLFxuICAgICAgICAuLi50aGlzLnBsdWdpbnNGb3JFbnYodGhpcy5lbnYuY29udGV4dC5lbnYpXG4gICAgICBdLFxuXG4gICAgICBtb2R1bGU6IHtcbiAgICAgICAgbG9hZGVyczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRlc3Q6IC9cXC5sZXNzJC8sXG4gICAgICAgICAgICBsb2FkZXI6IEV4dHJhY3RUZXh0UGx1Z2luLmV4dHJhY3QoXG4gICAgICAgICAgICAgICdzdHlsZScsXG4gICAgICAgICAgICAgIGBjc3Mke21hcFF9IWF1dG9wcmVmaXhlciR7bWFwUVByZX17IFwiYnJvd3NlcnNcIjogW1wibGFzdCAyIHZlcnNpb25zXCIsXCI+IDUlXCJdIH0hbGVzcyR7bWFwUVByZX1kdW1wTGluZU51bWJlcnM9Y29tbWVudHNgXG4gICAgICAgICAgICApXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7IHRlc3Q6IC9cXC5jc3MkLywgbG9hZGVyOiBFeHRyYWN0VGV4dFBsdWdpbi5leHRyYWN0KCdzdHlsZScsIGBjc3Mke21hcFF9YCkgfSxcbiAgICAgICAgICB7IHRlc3Q6IC9cXC5qYWRlJC8sIGxvYWRlcjogJ2phZGUnIH0sXG4gICAgICAgICAgeyB0ZXN0OiAvXFwuanNvbiQvLCBsb2FkZXI6ICdqc29uJyB9LFxuICAgICAgICAgIHsgdGVzdDogL1xcLihodG1sfHRtcGwpJC8sIGxvYWRlcjogJ3JhdycgfSxcbiAgICAgICAgICB7IHRlc3Q6IC9cXC5wbmckLywgbG9hZGVyOiAndXJsP2xpbWl0PTEwMDAwJm5hbWU9W3BhdGhdW25hbWVdLltleHRdJyB9LFxuICAgICAgICAgIHsgdGVzdDogL1xcLih3b2ZmfHdvZmYyfHR0Znxlb3R8c3ZnfGljbykoXFw/fCQpLywgbG9hZGVyOiAnZmlsZT9uYW1lPVtwYXRoXVtuYW1lXS5bZXh0XScgfSxcbiAgICAgICAgICB7IHRlc3Q6IC9bXFwvXFxcXF1zcmNbXFwvXFxcXF0ocGx1Z2luc3x1aSlbXFwvXFxcXF0uK1xcLmpzJC8sIGxvYWRlcjogYHJqcy1yZXBhY2ske21hcFF9YCB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRlc3Q6IC9cXC5qcyQvLFxuICAgICAgICAgICAgZXhjbHVkZTogYmFiZWxFeGNsdWRlLmNvbmNhdCh0aGlzLmVudi5ub1BhcnNlKSxcbiAgICAgICAgICAgIGxvYWRlcjogJ2JhYmVsJyxcbiAgICAgICAgICAgIHF1ZXJ5OiBiYWJlbE9wdGlvbnMud2VicGFja1xuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgdGVzdDogL1xcLmpzeCQvLFxuICAgICAgICAgICAgZXhjbHVkZTogYmFiZWxFeGNsdWRlLmNvbmNhdCh0aGlzLmVudi5ub1BhcnNlKSxcbiAgICAgICAgICAgIGxvYWRlcjogJ2JhYmVsJyxcbiAgICAgICAgICAgIHF1ZXJ5OiBkZWZhdWx0cyh7XG4gICAgICAgICAgICAgIG5vblN0YW5kYXJkOiB0cnVlLFxuICAgICAgICAgICAgfSwgYmFiZWxPcHRpb25zLndlYnBhY2spXG4gICAgICAgICAgfVxuICAgICAgICBdLmNvbmNhdCh0aGlzLmVudi5sb2FkZXJzKSxcbiAgICAgICAgcG9zdExvYWRlcnM6IHRoaXMuZW52LnBvc3RMb2FkZXJzIHx8IFtdLFxuICAgICAgICBub1BhcnNlOiB0aGlzLmVudi5ub1BhcnNlLFxuICAgICAgfSxcblxuICAgICAgcmVzb2x2ZToge1xuICAgICAgICBleHRlbnNpb25zOiBbJy5qcycsICcuanNvbicsICcuanN4JywgJy5sZXNzJywgJyddLFxuICAgICAgICBwb3N0Zml4ZXM6IFsnJ10sXG4gICAgICAgIG1vZHVsZXNEaXJlY3RvcmllczogWyd3ZWJwYWNrU2hpbXMnLCAnbm9kZV9tb2R1bGVzJ10sXG4gICAgICAgIGZhbGxiYWNrOiBbZnJvbVJvb3QoJ3dlYnBhY2tTaGltcycpLCBmcm9tUm9vdCgnbm9kZV9tb2R1bGVzJyldLFxuICAgICAgICBsb2FkZXJQb3N0Zml4ZXM6IFsnLWxvYWRlcicsICcnXSxcbiAgICAgICAgcm9vdDogZnJvbVJvb3QoJy4nKSxcbiAgICAgICAgYWxpYXM6IHRoaXMuZW52LmFsaWFzZXMsXG4gICAgICAgIHVuc2FmZUNhY2hlOiB0aGlzLnVuc2FmZUNhY2hlLFxuICAgICAgfSxcblxuICAgICAgcmVzb2x2ZUxvYWRlcjoge1xuICAgICAgICBhbGlhczogdHJhbnNmb3JtKHBrZy5kZXBlbmRlbmNpZXMsIGZ1bmN0aW9uIChhbGlhc2VzLCB2ZXJzaW9uLCBuYW1lKSB7XG4gICAgICAgICAgaWYgKG5hbWUuZW5kc1dpdGgoJy1sb2FkZXInKSkge1xuICAgICAgICAgICAgYWxpYXNlc1tuYW1lLnJlcGxhY2UoLy1sb2FkZXIkLywgJycpXSA9IHJlcXVpcmUucmVzb2x2ZShuYW1lKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIHt9KVxuICAgICAgfVxuICAgIH07XG4gIH1cblxuICBwbHVnaW5zRm9yRW52KGVudikge1xuICAgIGlmIChlbnYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIHJldHVybiBbXG4gICAgICBuZXcgRGVmaW5lUGx1Z2luKHtcbiAgICAgICAgJ3Byb2Nlc3MuZW52Jzoge1xuICAgICAgICAgICdOT0RFX0VOVic6ICdcInByb2R1Y3Rpb25cIidcbiAgICAgICAgfVxuICAgICAgfSksXG4gICAgICBuZXcgVWdsaWZ5SnNQbHVnaW4oe1xuICAgICAgICBjb21wcmVzczoge1xuICAgICAgICAgIHdhcm5pbmdzOiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICBzb3VyY2VNYXA6IGZhbHNlLFxuICAgICAgICBtYW5nbGU6IGZhbHNlXG4gICAgICB9KSxcbiAgICBdO1xuICB9XG5cbiAgZmFpbGVkU3RhdHNUb0Vycm9yKHN0YXRzKSB7XG4gICAgbGV0IHN0YXRGb3JtYXRPcHRzID0ge1xuICAgICAgaGFzaDogZmFsc2UsICAvLyBhZGQgdGhlIGhhc2ggb2YgdGhlIGNvbXBpbGF0aW9uXG4gICAgICB2ZXJzaW9uOiBmYWxzZSwgIC8vIGFkZCB3ZWJwYWNrIHZlcnNpb24gaW5mb3JtYXRpb25cbiAgICAgIHRpbWluZ3M6IGZhbHNlLCAgLy8gYWRkIHRpbWluZyBpbmZvcm1hdGlvblxuICAgICAgYXNzZXRzOiBmYWxzZSwgIC8vIGFkZCBhc3NldHMgaW5mb3JtYXRpb25cbiAgICAgIGNodW5rczogZmFsc2UsICAvLyBhZGQgY2h1bmsgaW5mb3JtYXRpb25cbiAgICAgIGNodW5rTW9kdWxlczogZmFsc2UsICAvLyBhZGQgYnVpbHQgbW9kdWxlcyBpbmZvcm1hdGlvbiB0byBjaHVuayBpbmZvcm1hdGlvblxuICAgICAgbW9kdWxlczogZmFsc2UsICAvLyBhZGQgYnVpbHQgbW9kdWxlcyBpbmZvcm1hdGlvblxuICAgICAgY2FjaGVkOiBmYWxzZSwgIC8vIGFkZCBhbHNvIGluZm9ybWF0aW9uIGFib3V0IGNhY2hlZCAobm90IGJ1aWx0KSBtb2R1bGVzXG4gICAgICByZWFzb25zOiBmYWxzZSwgIC8vIGFkZCBpbmZvcm1hdGlvbiBhYm91dCB0aGUgcmVhc29ucyB3aHkgbW9kdWxlcyBhcmUgaW5jbHVkZWRcbiAgICAgIHNvdXJjZTogZmFsc2UsICAvLyBhZGQgdGhlIHNvdXJjZSBjb2RlIG9mIG1vZHVsZXNcbiAgICAgIGVycm9yRGV0YWlsczogZmFsc2UsICAvLyBhZGQgZGV0YWlscyB0byBlcnJvcnMgKGxpa2UgcmVzb2x2aW5nIGxvZylcbiAgICAgIGNodW5rT3JpZ2luczogZmFsc2UsICAvLyBhZGQgdGhlIG9yaWdpbnMgb2YgY2h1bmtzIGFuZCBjaHVuayBtZXJnaW5nIGluZm9cbiAgICAgIG1vZHVsZXNTb3J0OiBmYWxzZSwgIC8vIChzdHJpbmcpIHNvcnQgdGhlIG1vZHVsZXMgYnkgdGhhdCBmaWVsZFxuICAgICAgY2h1bmtzU29ydDogZmFsc2UsICAvLyAoc3RyaW5nKSBzb3J0IHRoZSBjaHVua3MgYnkgdGhhdCBmaWVsZFxuICAgICAgYXNzZXRzU29ydDogZmFsc2UsICAvLyAoc3RyaW5nKSBzb3J0IHRoZSBhc3NldHMgYnkgdGhhdCBmaWVsZFxuICAgICAgY2hpbGRyZW46IGZhbHNlLFxuICAgIH07XG5cbiAgICBsZXQgZGV0YWlscyA9IHN0YXRzLnRvU3RyaW5nKGRlZmF1bHRzKHsgY29sb3JzOiB0cnVlIH0sIHN0YXRGb3JtYXRPcHRzKSk7XG5cbiAgICByZXR1cm4gQm9vbS5jcmVhdGUoXG4gICAgICA1MDAsXG4gICAgICBgT3B0aW1pemF0aW9ucyBmYWlsdXJlLlxcbiR7ZGV0YWlscy5zcGxpdCgnXFxuJykuam9pbignXFxuICAgICcpfVxcbmAsXG4gICAgICBzdGF0cy50b0pzb24oc3RhdEZvcm1hdE9wdHMpXG4gICAgKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEJhc2VPcHRpbWl6ZXI7XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/optimize/base_optimizer.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/kibana/src/optimize/base_optimizer.js",
      "sourcesContent": [
        "import webpack from 'webpack';\nimport Boom from 'boom';\nimport DirectoryNameAsMain from 'webpack-directory-name-as-main';\nimport ExtractTextPlugin from 'extract-text-webpack-plugin';\nimport CommonsChunkPlugin from 'webpack/lib/optimize/CommonsChunkPlugin';\nimport DefinePlugin from 'webpack/lib/DefinePlugin';\nimport UglifyJsPlugin from 'webpack/lib/optimize/UglifyJsPlugin';\n\nimport fromRoot from '../utils/from_root';\nimport babelOptions from './babel_options';\nimport { inherits } from 'util';\nimport { defaults, transform } from 'lodash';\nimport { resolve } from 'path';\nimport { writeFile } from 'fs';\nlet babelExclude = [/[\\/\\\\](webpackShims|node_modules|bower_components)[\\/\\\\]/];\nimport pkg from '../../package.json';\n\nclass BaseOptimizer {\n  constructor(opts) {\n    this.env = opts.env;\n    this.urlBasePath = opts.urlBasePath;\n    this.bundles = opts.bundles;\n    this.profile = opts.profile || false;\n\n    switch (opts.sourceMaps) {\n      case true:\n        this.sourceMaps = 'source-map';\n        break;\n\n      case 'fast':\n        this.sourceMaps = 'cheap-module-eval-source-map';\n        break;\n\n      default:\n        this.sourceMaps = opts.sourceMaps || false;\n        break;\n    }\n\n    this.unsafeCache = opts.unsafeCache || false;\n    if (typeof this.unsafeCache === 'string') {\n      this.unsafeCache = [\n        new RegExp(this.unsafeCache.slice(1, -1))\n      ];\n    }\n  }\n\n  async initCompiler() {\n    if (this.compiler) return this.compiler;\n\n    let compilerConfig = this.getConfig();\n    this.compiler = webpack(compilerConfig);\n\n    this.compiler.plugin('done', stats => {\n      if (!this.profile) return;\n\n      let path = resolve(this.env.workingDir, 'stats.json');\n      let content = JSON.stringify(stats.toJson());\n      writeFile(path, content, function (err) {\n        if (err) throw err;\n      });\n    });\n\n    return this.compiler;\n  }\n\n  getConfig() {\n    let mapQ = this.sourceMaps ? '?sourceMap' : '';\n    let mapQPre = mapQ ? mapQ + '&' : '?';\n\n    return {\n      context: fromRoot('.'),\n      entry: this.bundles.toWebpackEntries(),\n\n      devtool: this.sourceMaps,\n      profile: this.profile || false,\n\n      output: {\n        path: this.env.workingDir,\n        filename: '[name].bundle.js',\n        sourceMapFilename: '[file].map',\n        publicPath: `${this.urlBasePath || ''}/bundles/`,\n        devtoolModuleFilenameTemplate: '[absolute-resource-path]'\n      },\n\n      recordsPath: resolve(this.env.workingDir, 'webpack.records'),\n\n      plugins: [\n        new webpack.ResolverPlugin([\n          new DirectoryNameAsMain()\n        ]),\n        new webpack.NoErrorsPlugin(),\n        new ExtractTextPlugin('[name].style.css', {\n          allChunks: true\n        }),\n        new CommonsChunkPlugin({\n          name: 'commons',\n          filename: 'commons.bundle.js'\n        }),\n        ...this.pluginsForEnv(this.env.context.env)\n      ],\n\n      module: {\n        loaders: [\n          {\n            test: /\\.less$/,\n            loader: ExtractTextPlugin.extract(\n              'style',\n              `css${mapQ}!autoprefixer${mapQPre}{ \"browsers\": [\"last 2 versions\",\"> 5%\"] }!less${mapQPre}dumpLineNumbers=comments`\n            )\n          },\n          { test: /\\.css$/, loader: ExtractTextPlugin.extract('style', `css${mapQ}`) },\n          { test: /\\.jade$/, loader: 'jade' },\n          { test: /\\.json$/, loader: 'json' },\n          { test: /\\.(html|tmpl)$/, loader: 'raw' },\n          { test: /\\.png$/, loader: 'url?limit=10000&name=[path][name].[ext]' },\n          { test: /\\.(woff|woff2|ttf|eot|svg|ico)(\\?|$)/, loader: 'file?name=[path][name].[ext]' },\n          { test: /[\\/\\\\]src[\\/\\\\](plugins|ui)[\\/\\\\].+\\.js$/, loader: `rjs-repack${mapQ}` },\n          {\n            test: /\\.js$/,\n            exclude: babelExclude.concat(this.env.noParse),\n            loader: 'babel',\n            query: babelOptions.webpack\n          },\n          {\n            test: /\\.jsx$/,\n            exclude: babelExclude.concat(this.env.noParse),\n            loader: 'babel',\n            query: defaults({\n              nonStandard: true,\n            }, babelOptions.webpack)\n          }\n        ].concat(this.env.loaders),\n        postLoaders: this.env.postLoaders || [],\n        noParse: this.env.noParse,\n      },\n\n      resolve: {\n        extensions: ['.js', '.json', '.jsx', '.less', ''],\n        postfixes: [''],\n        modulesDirectories: ['webpackShims', 'node_modules'],\n        fallback: [fromRoot('webpackShims'), fromRoot('node_modules')],\n        loaderPostfixes: ['-loader', ''],\n        root: fromRoot('.'),\n        alias: this.env.aliases,\n        unsafeCache: this.unsafeCache,\n      },\n\n      resolveLoader: {\n        alias: transform(pkg.dependencies, function (aliases, version, name) {\n          if (name.endsWith('-loader')) {\n            aliases[name.replace(/-loader$/, '')] = require.resolve(name);\n          }\n        }, {})\n      }\n    };\n  }\n\n  pluginsForEnv(env) {\n    if (env !== 'production') {\n      return [];\n    }\n\n    return [\n      new DefinePlugin({\n        'process.env': {\n          'NODE_ENV': '\"production\"'\n        }\n      }),\n      new UglifyJsPlugin({\n        compress: {\n          warnings: false\n        },\n        sourceMap: false,\n        mangle: false\n      }),\n    ];\n  }\n\n  failedStatsToError(stats) {\n    let statFormatOpts = {\n      hash: false,  // add the hash of the compilation\n      version: false,  // add webpack version information\n      timings: false,  // add timing information\n      assets: false,  // add assets information\n      chunks: false,  // add chunk information\n      chunkModules: false,  // add built modules information to chunk information\n      modules: false,  // add built modules information\n      cached: false,  // add also information about cached (not built) modules\n      reasons: false,  // add information about the reasons why modules are included\n      source: false,  // add the source code of modules\n      errorDetails: false,  // add details to errors (like resolving log)\n      chunkOrigins: false,  // add the origins of chunks and chunk merging info\n      modulesSort: false,  // (string) sort the modules by that field\n      chunksSort: false,  // (string) sort the chunks by that field\n      assetsSort: false,  // (string) sort the assets by that field\n      children: false,\n    };\n\n    let details = stats.toString(defaults({ colors: true }, statFormatOpts));\n\n    return Boom.create(\n      500,\n      `Optimizations failure.\\n${details.split('\\n').join('\\n    ')}\\n`,\n      stats.toJson(statFormatOpts)\n    );\n  }\n}\n\nmodule.exports = BaseOptimizer;\n"
      ]
    },
    "mtime": 1467036622805
  },
  "{\"filename\":\"/home/vio/kibana/src/server/plugins/initialize.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./plugin_init",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "pluginInit"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "async-to-generator",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nvar _plugin_init = require('./plugin_init');\n\nvar _plugin_init2 = _interopRequireDefault(_plugin_init);\n\nmodule.exports = _asyncToGenerator(function* (kbnServer, server, config) {\n\n  if (!config.get('plugins.initialize')) {\n    server.log(['info'], 'Plugin initialization disabled.');\n    return [];\n  }\n\n  var plugins = kbnServer.plugins;\n\n  // extend plugin apis with additional context\n  plugins.getPluginApis().forEach(function (api) {\n\n    Object.defineProperty(api, 'uiExports', {\n      value: kbnServer.uiExports\n    });\n  });\n\n  yield (0, _plugin_init2['default'])(plugins);\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3NlcnZlci9wbHVnaW5zL2luaXRpYWxpemUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7OzJCQUF1QixlQUFlOzs7O0FBRXRDLE1BQU0sQ0FBQyxPQUFPLHFCQUFHLFdBQWdCLFNBQVMsRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFOztBQUUxRCxNQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxvQkFBb0IsQ0FBQyxFQUFFO0FBQ3JDLFVBQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsRUFBRSxpQ0FBaUMsQ0FBQyxDQUFDO0FBQ3hELFdBQU8sRUFBRSxDQUFDO0dBQ1g7O01BRUssT0FBTyxHQUFLLFNBQVMsQ0FBckIsT0FBTzs7O0FBR2IsU0FBTyxDQUFDLGFBQWEsRUFBRSxDQUFDLE9BQU8sQ0FBQyxVQUFBLEdBQUcsRUFBSTs7QUFFckMsVUFBTSxDQUFDLGNBQWMsQ0FBQyxHQUFHLEVBQUUsV0FBVyxFQUFFO0FBQ3RDLFdBQUssRUFBRSxTQUFTLENBQUMsU0FBUztLQUMzQixDQUFDLENBQUM7R0FFSixDQUFDLENBQUM7O0FBRUgsUUFBTSw4QkFBVyxPQUFPLENBQUMsQ0FBQztDQUMzQixDQUFBLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL2tpYmFuYS9zcmMvc2VydmVyL3BsdWdpbnMvaW5pdGlhbGl6ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBwbHVnaW5Jbml0IGZyb20gJy4vcGx1Z2luX2luaXQnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGFzeW5jIGZ1bmN0aW9uIChrYm5TZXJ2ZXIsIHNlcnZlciwgY29uZmlnKSB7XG5cbiAgaWYgKCFjb25maWcuZ2V0KCdwbHVnaW5zLmluaXRpYWxpemUnKSkge1xuICAgIHNlcnZlci5sb2coWydpbmZvJ10sICdQbHVnaW4gaW5pdGlhbGl6YXRpb24gZGlzYWJsZWQuJyk7XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgbGV0IHsgcGx1Z2lucyB9ID0ga2JuU2VydmVyO1xuXG4gIC8vIGV4dGVuZCBwbHVnaW4gYXBpcyB3aXRoIGFkZGl0aW9uYWwgY29udGV4dFxuICBwbHVnaW5zLmdldFBsdWdpbkFwaXMoKS5mb3JFYWNoKGFwaSA9PiB7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoYXBpLCAndWlFeHBvcnRzJywge1xuICAgICAgdmFsdWU6IGtiblNlcnZlci51aUV4cG9ydHNcbiAgICB9KTtcblxuICB9KTtcblxuICBhd2FpdCBwbHVnaW5Jbml0KHBsdWdpbnMpO1xufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/server/plugins/initialize.js"
      ],
      "names": [],
      "mappings": ";;;;;;2BAAuB,eAAe;;;;AAEtC,MAAM,CAAC,OAAO,qBAAG,WAAgB,SAAS,EAAE,MAAM,EAAE,MAAM,EAAE;;AAE1D,MAAI,CAAC,MAAM,CAAC,GAAG,CAAC,oBAAoB,CAAC,EAAE;AACrC,UAAM,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,EAAE,iCAAiC,CAAC,CAAC;AACxD,WAAO,EAAE,CAAC;GACX;;MAEK,OAAO,GAAK,SAAS,CAArB,OAAO;;;AAGb,SAAO,CAAC,aAAa,EAAE,CAAC,OAAO,CAAC,UAAA,GAAG,EAAI;;AAErC,UAAM,CAAC,cAAc,CAAC,GAAG,EAAE,WAAW,EAAE;AACtC,WAAK,EAAE,SAAS,CAAC,SAAS;KAC3B,CAAC,CAAC;GAEJ,CAAC,CAAC;;AAEH,QAAM,8BAAW,OAAO,CAAC,CAAC;CAC3B,CAAA,CAAC",
      "file": "/home/vio/kibana/src/server/plugins/initialize.js",
      "sourcesContent": [
        "import pluginInit from './plugin_init';\n\nmodule.exports = async function (kbnServer, server, config) {\n\n  if (!config.get('plugins.initialize')) {\n    server.log(['info'], 'Plugin initialization disabled.');\n    return [];\n  }\n\n  let { plugins } = kbnServer;\n\n  // extend plugin apis with additional context\n  plugins.getPluginApis().forEach(api => {\n\n    Object.defineProperty(api, 'uiExports', {\n      value: kbnServer.uiExports\n    });\n\n  });\n\n  await pluginInit(plugins);\n};\n"
      ]
    },
    "mtime": 1467036622849
  },
  "{\"filename\":\"/home/vio/kibana/src/server/plugins/plugin_init.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "includes"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "includes",
                "local": "includes"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "async-to-generator"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nvar _lodash = require('lodash');\n\nexports['default'] = _asyncToGenerator(function* (plugins) {\n  var path = [];\n\n  var initialize = _asyncToGenerator(function* (id, fn) {\n    var plugin = plugins.byId[id];\n\n    if ((0, _lodash.includes)(path, id)) {\n      throw new Error('circular dependencies found: \"' + path.concat(id).join(' -> ') + '\"');\n    }\n\n    path.push(id);\n\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = plugin.requiredIds[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var reqId = _step.value;\n\n        if (!plugins.byId[reqId]) {\n          throw new Error('Unmet requirement \"' + reqId + '\" for plugin \"' + id + '\"');\n        }\n\n        yield initialize(reqId, fn);\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator['return']) {\n          _iterator['return']();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    yield plugin[fn]();\n    path.pop();\n  });\n\n  var collection = plugins.toArray();\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = collection[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var id = _step2.value.id;\n\n      yield initialize(id, 'preInit');\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2['return']) {\n        _iterator2['return']();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n\n  var _iteratorNormalCompletion3 = true;\n  var _didIteratorError3 = false;\n  var _iteratorError3 = undefined;\n\n  try {\n    for (var _iterator3 = collection[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n      var id = _step3.value.id;\n\n      yield initialize(id, 'init');\n    }\n  } catch (err) {\n    _didIteratorError3 = true;\n    _iteratorError3 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion3 && _iterator3['return']) {\n        _iterator3['return']();\n      }\n    } finally {\n      if (_didIteratorError3) {\n        throw _iteratorError3;\n      }\n    }\n  }\n});\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby9raWJhbmEvc3JjL3NlcnZlci9wbHVnaW5zL3BsdWdpbl9pbml0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O3NCQUF5QixRQUFROzt1Q0FFbEIsV0FBTyxPQUFPLEVBQUs7QUFDaEMsTUFBSSxJQUFJLEdBQUcsRUFBRSxDQUFDOztBQUVkLE1BQU0sVUFBVSxxQkFBRyxXQUFnQixFQUFFLEVBQUUsRUFBRSxFQUFFO0FBQ3pDLFFBQUksTUFBTSxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7O0FBRTlCLFFBQUksc0JBQVMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxFQUFFO0FBQ3RCLFlBQU0sSUFBSSxLQUFLLG9DQUFrQyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBSSxDQUFDO0tBQ25GOztBQUVELFFBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7Ozs7Ozs7QUFFZCwyQkFBa0IsTUFBTSxDQUFDLFdBQVcsOEhBQUU7WUFBN0IsS0FBSzs7QUFDWixZQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRTtBQUN4QixnQkFBTSxJQUFJLEtBQUsseUJBQXVCLEtBQUssc0JBQWlCLEVBQUUsT0FBSSxDQUFDO1NBQ3BFOztBQUVELGNBQU0sVUFBVSxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsQ0FBQztPQUM3Qjs7Ozs7Ozs7Ozs7Ozs7OztBQUVELFVBQU0sTUFBTSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUM7QUFDbkIsUUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDO0dBQ1osQ0FBQSxDQUFDOztBQUVGLE1BQU0sVUFBVSxHQUFHLE9BQU8sQ0FBQyxPQUFPLEVBQUUsQ0FBQzs7Ozs7O0FBQ3JDLDBCQUFpQixVQUFVLG1JQUFFO1VBQW5CLEVBQUUsZ0JBQUYsRUFBRTs7QUFDVixZQUFNLFVBQVUsQ0FBQyxFQUFFLEVBQUUsU0FBUyxDQUFDLENBQUM7S0FDakM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUVELDBCQUFpQixVQUFVLG1JQUFFO1VBQW5CLEVBQUUsZ0JBQUYsRUFBRTs7QUFDVixZQUFNLFVBQVUsQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDLENBQUM7S0FDOUI7Ozs7Ozs7Ozs7Ozs7OztDQUNGIiwiZmlsZSI6Ii9ob21lL3Zpby9raWJhbmEvc3JjL3NlcnZlci9wbHVnaW5zL3BsdWdpbl9pbml0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaW5jbHVkZXMgfSBmcm9tICdsb2Rhc2gnO1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyAocGx1Z2lucykgPT4ge1xuICBsZXQgcGF0aCA9IFtdO1xuXG4gIGNvbnN0IGluaXRpYWxpemUgPSBhc3luYyBmdW5jdGlvbiAoaWQsIGZuKSB7XG4gICAgbGV0IHBsdWdpbiA9IHBsdWdpbnMuYnlJZFtpZF07XG5cbiAgICBpZiAoaW5jbHVkZXMocGF0aCwgaWQpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYGNpcmN1bGFyIGRlcGVuZGVuY2llcyBmb3VuZDogXCIke3BhdGguY29uY2F0KGlkKS5qb2luKCcgLT4gJyl9XCJgKTtcbiAgICB9XG5cbiAgICBwYXRoLnB1c2goaWQpO1xuXG4gICAgZm9yIChsZXQgcmVxSWQgb2YgcGx1Z2luLnJlcXVpcmVkSWRzKSB7XG4gICAgICBpZiAoIXBsdWdpbnMuYnlJZFtyZXFJZF0pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbm1ldCByZXF1aXJlbWVudCBcIiR7cmVxSWR9XCIgZm9yIHBsdWdpbiBcIiR7aWR9XCJgKTtcbiAgICAgIH1cblxuICAgICAgYXdhaXQgaW5pdGlhbGl6ZShyZXFJZCwgZm4pO1xuICAgIH1cblxuICAgIGF3YWl0IHBsdWdpbltmbl0oKTtcbiAgICBwYXRoLnBvcCgpO1xuICB9O1xuXG4gIGNvbnN0IGNvbGxlY3Rpb24gPSBwbHVnaW5zLnRvQXJyYXkoKTtcbiAgZm9yIChsZXQge2lkfSBvZiBjb2xsZWN0aW9uKSB7XG4gICAgYXdhaXQgaW5pdGlhbGl6ZShpZCwgJ3ByZUluaXQnKTtcbiAgfVxuXG4gIGZvciAobGV0IHtpZH0gb2YgY29sbGVjdGlvbikge1xuICAgIGF3YWl0IGluaXRpYWxpemUoaWQsICdpbml0Jyk7XG4gIH1cbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/kibana/src/server/plugins/plugin_init.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;sBAAyB,QAAQ;;uCAElB,WAAO,OAAO,EAAK;AAChC,MAAI,IAAI,GAAG,EAAE,CAAC;;AAEd,MAAM,UAAU,qBAAG,WAAgB,EAAE,EAAE,EAAE,EAAE;AACzC,QAAI,MAAM,GAAG,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;;AAE9B,QAAI,sBAAS,IAAI,EAAE,EAAE,CAAC,EAAE;AACtB,YAAM,IAAI,KAAK,oCAAkC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,OAAI,CAAC;KACnF;;AAED,QAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;;;;;;;AAEd,2BAAkB,MAAM,CAAC,WAAW,8HAAE;YAA7B,KAAK;;AACZ,YAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;AACxB,gBAAM,IAAI,KAAK,yBAAuB,KAAK,sBAAiB,EAAE,OAAI,CAAC;SACpE;;AAED,cAAM,UAAU,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;OAC7B;;;;;;;;;;;;;;;;AAED,UAAM,MAAM,CAAC,EAAE,CAAC,EAAE,CAAC;AACnB,QAAI,CAAC,GAAG,EAAE,CAAC;GACZ,CAAA,CAAC;;AAEF,MAAM,UAAU,GAAG,OAAO,CAAC,OAAO,EAAE,CAAC;;;;;;AACrC,0BAAiB,UAAU,mIAAE;UAAnB,EAAE,gBAAF,EAAE;;AACV,YAAM,UAAU,CAAC,EAAE,EAAE,SAAS,CAAC,CAAC;KACjC;;;;;;;;;;;;;;;;;;;;;AAED,0BAAiB,UAAU,mIAAE;UAAnB,EAAE,gBAAF,EAAE;;AACV,YAAM,UAAU,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC;KAC9B;;;;;;;;;;;;;;;CACF",
      "file": "/home/vio/kibana/src/server/plugins/plugin_init.js",
      "sourcesContent": [
        "import { includes } from 'lodash';\n\nexport default async (plugins) => {\n  let path = [];\n\n  const initialize = async function (id, fn) {\n    let plugin = plugins.byId[id];\n\n    if (includes(path, id)) {\n      throw new Error(`circular dependencies found: \"${path.concat(id).join(' -> ')}\"`);\n    }\n\n    path.push(id);\n\n    for (let reqId of plugin.requiredIds) {\n      if (!plugins.byId[reqId]) {\n        throw new Error(`Unmet requirement \"${reqId}\" for plugin \"${id}\"`);\n      }\n\n      await initialize(reqId, fn);\n    }\n\n    await plugin[fn]();\n    path.pop();\n  };\n\n  const collection = plugins.toArray();\n  for (let {id} of collection) {\n    await initialize(id, 'preInit');\n  }\n\n  for (let {id} of collection) {\n    await initialize(id, 'init');\n  }\n};\n"
      ]
    },
    "mtime": 1467036622849
  },
  "{\"filename\":\"/home/vio/v3metrics/src/cli/cli.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "../utils/package_json",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "pkg"
              }
            ]
          },
          {
            "source": "./command",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Command"
              }
            ]
          },
          {
            "source": "./serve/serve",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "serveCommand"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _utilsPackage_json = require('../utils/package_json');\n\nvar _utilsPackage_json2 = _interopRequireDefault(_utilsPackage_json);\n\nvar _command = require('./command');\n\nvar _command2 = _interopRequireDefault(_command);\n\nvar _serveServe = require('./serve/serve');\n\nvar _serveServe2 = _interopRequireDefault(_serveServe);\n\nvar argv = process.env.kbnWorkerArgv ? JSON.parse(process.env.kbnWorkerArgv) : process.argv.slice();\nvar program = new _command2['default']('bin/kibana');\n\nprogram.version(_utilsPackage_json2['default'].version).description('Kibana is an open source (Apache Licensed), browser ' + 'based analytics and search dashboard for Elasticsearch.');\n\n// attach commands\n(0, _serveServe2['default'])(program);\n\nprogram.command('help <command>').description('Get the help for a specific command').action(function (cmdName) {\n  var cmd = _lodash2['default'].find(program.commands, { _name: cmdName });\n  if (!cmd) return program.error('unknown command ' + cmdName);\n  cmd.help();\n});\n\nprogram.command('*', null, { noHelp: true }).action(function (cmd, options) {\n  program.error('unknown command ' + cmd);\n});\n\n// check for no command name\nvar subCommand = argv[2] && !String(argv[2][0]).match(/^-|^\\.|\\//);\n\nif (!subCommand) {\n  if (_lodash2['default'].intersection(argv.slice(2), ['-h', '--help']).length) {\n    program.defaultHelp();\n  } else {\n    argv.splice(2, 0, ['serve']);\n  }\n}\n\nprogram.parse(argv);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL2NsaS9jbGkuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztzQkFBYyxRQUFROzs7O2lDQUNOLHVCQUF1Qjs7Ozt1QkFDbkIsV0FBVzs7OzswQkFDTixlQUFlOzs7O0FBRXhDLElBQU0sSUFBSSxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO0FBQ3RHLElBQU0sT0FBTyxHQUFHLHlCQUFZLFlBQVksQ0FBQyxDQUFDOztBQUUxQyxPQUFPLENBQ04sT0FBTyxDQUFDLCtCQUFJLE9BQU8sQ0FBQyxDQUNwQixXQUFXLENBQ1Ysc0RBQXNELEdBQ3RELHlEQUF5RCxDQUMxRCxDQUFDOzs7QUFHRiw2QkFBYSxPQUFPLENBQUMsQ0FBQzs7QUFFdEIsT0FBTyxDQUNOLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUN6QixXQUFXLENBQUMscUNBQXFDLENBQUMsQ0FDbEQsTUFBTSxDQUFDLFVBQVUsT0FBTyxFQUFFO0FBQ3pCLE1BQU0sR0FBRyxHQUFHLG9CQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxDQUFDLENBQUM7QUFDekQsTUFBSSxDQUFDLEdBQUcsRUFBRSxPQUFPLE9BQU8sQ0FBQyxLQUFLLHNCQUFvQixPQUFPLENBQUcsQ0FBQztBQUM3RCxLQUFHLENBQUMsSUFBSSxFQUFFLENBQUM7Q0FDWixDQUFDLENBQUM7O0FBRUgsT0FBTyxDQUNOLE9BQU8sQ0FBQyxHQUFHLEVBQUUsSUFBSSxFQUFFLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxDQUFDLENBQ3BDLE1BQU0sQ0FBQyxVQUFVLEdBQUcsRUFBRSxPQUFPLEVBQUU7QUFDOUIsU0FBTyxDQUFDLEtBQUssc0JBQW9CLEdBQUcsQ0FBRyxDQUFDO0NBQ3pDLENBQUMsQ0FBQzs7O0FBR0gsSUFBTSxVQUFVLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQzs7QUFFckUsSUFBSSxDQUFDLFVBQVUsRUFBRTtBQUNmLE1BQUksb0JBQUUsWUFBWSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQyxNQUFNLEVBQUU7QUFDMUQsV0FBTyxDQUFDLFdBQVcsRUFBRSxDQUFDO0dBQ3ZCLE1BQU07QUFDTCxRQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO0dBQzlCO0NBQ0Y7O0FBRUQsT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9jbGkvY2xpLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBwa2cgZnJvbSAnLi4vdXRpbHMvcGFja2FnZV9qc29uJztcbmltcG9ydCBDb21tYW5kIGZyb20gJy4vY29tbWFuZCc7XG5pbXBvcnQgc2VydmVDb21tYW5kIGZyb20gJy4vc2VydmUvc2VydmUnO1xuXG5jb25zdCBhcmd2ID0gcHJvY2Vzcy5lbnYua2JuV29ya2VyQXJndiA/IEpTT04ucGFyc2UocHJvY2Vzcy5lbnYua2JuV29ya2VyQXJndikgOiBwcm9jZXNzLmFyZ3Yuc2xpY2UoKTtcbmNvbnN0IHByb2dyYW0gPSBuZXcgQ29tbWFuZCgnYmluL2tpYmFuYScpO1xuXG5wcm9ncmFtXG4udmVyc2lvbihwa2cudmVyc2lvbilcbi5kZXNjcmlwdGlvbihcbiAgJ0tpYmFuYSBpcyBhbiBvcGVuIHNvdXJjZSAoQXBhY2hlIExpY2Vuc2VkKSwgYnJvd3NlciAnICtcbiAgJ2Jhc2VkIGFuYWx5dGljcyBhbmQgc2VhcmNoIGRhc2hib2FyZCBmb3IgRWxhc3RpY3NlYXJjaC4nXG4pO1xuXG4vLyBhdHRhY2ggY29tbWFuZHNcbnNlcnZlQ29tbWFuZChwcm9ncmFtKTtcblxucHJvZ3JhbVxuLmNvbW1hbmQoJ2hlbHAgPGNvbW1hbmQ+Jylcbi5kZXNjcmlwdGlvbignR2V0IHRoZSBoZWxwIGZvciBhIHNwZWNpZmljIGNvbW1hbmQnKVxuLmFjdGlvbihmdW5jdGlvbiAoY21kTmFtZSkge1xuICBjb25zdCBjbWQgPSBfLmZpbmQocHJvZ3JhbS5jb21tYW5kcywgeyBfbmFtZTogY21kTmFtZSB9KTtcbiAgaWYgKCFjbWQpIHJldHVybiBwcm9ncmFtLmVycm9yKGB1bmtub3duIGNvbW1hbmQgJHtjbWROYW1lfWApO1xuICBjbWQuaGVscCgpO1xufSk7XG5cbnByb2dyYW1cbi5jb21tYW5kKCcqJywgbnVsbCwgeyBub0hlbHA6IHRydWUgfSlcbi5hY3Rpb24oZnVuY3Rpb24gKGNtZCwgb3B0aW9ucykge1xuICBwcm9ncmFtLmVycm9yKGB1bmtub3duIGNvbW1hbmQgJHtjbWR9YCk7XG59KTtcblxuLy8gY2hlY2sgZm9yIG5vIGNvbW1hbmQgbmFtZVxuY29uc3Qgc3ViQ29tbWFuZCA9IGFyZ3ZbMl0gJiYgIVN0cmluZyhhcmd2WzJdWzBdKS5tYXRjaCgvXi18XlxcLnxcXC8vKTtcblxuaWYgKCFzdWJDb21tYW5kKSB7XG4gIGlmIChfLmludGVyc2VjdGlvbihhcmd2LnNsaWNlKDIpLCBbJy1oJywgJy0taGVscCddKS5sZW5ndGgpIHtcbiAgICBwcm9ncmFtLmRlZmF1bHRIZWxwKCk7XG4gIH0gZWxzZSB7XG4gICAgYXJndi5zcGxpY2UoMiwgMCwgWydzZXJ2ZSddKTtcbiAgfVxufVxuXG5wcm9ncmFtLnBhcnNlKGFyZ3YpO1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/cli/cli.js"
      ],
      "names": [],
      "mappings": ";;;;sBAAc,QAAQ;;;;iCACN,uBAAuB;;;;uBACnB,WAAW;;;;0BACN,eAAe;;;;AAExC,IAAM,IAAI,GAAG,OAAO,CAAC,GAAG,CAAC,aAAa,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC,GAAG,OAAO,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC;AACtG,IAAM,OAAO,GAAG,yBAAY,YAAY,CAAC,CAAC;;AAE1C,OAAO,CACN,OAAO,CAAC,+BAAI,OAAO,CAAC,CACpB,WAAW,CACV,sDAAsD,GACtD,yDAAyD,CAC1D,CAAC;;;AAGF,6BAAa,OAAO,CAAC,CAAC;;AAEtB,OAAO,CACN,OAAO,CAAC,gBAAgB,CAAC,CACzB,WAAW,CAAC,qCAAqC,CAAC,CAClD,MAAM,CAAC,UAAU,OAAO,EAAE;AACzB,MAAM,GAAG,GAAG,oBAAE,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,CAAC,CAAC;AACzD,MAAI,CAAC,GAAG,EAAE,OAAO,OAAO,CAAC,KAAK,sBAAoB,OAAO,CAAG,CAAC;AAC7D,KAAG,CAAC,IAAI,EAAE,CAAC;CACZ,CAAC,CAAC;;AAEH,OAAO,CACN,OAAO,CAAC,GAAG,EAAE,IAAI,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CACpC,MAAM,CAAC,UAAU,GAAG,EAAE,OAAO,EAAE;AAC9B,SAAO,CAAC,KAAK,sBAAoB,GAAG,CAAG,CAAC;CACzC,CAAC,CAAC;;;AAGH,IAAM,UAAU,GAAG,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;;AAErE,IAAI,CAAC,UAAU,EAAE;AACf,MAAI,oBAAE,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC,CAAC,MAAM,EAAE;AAC1D,WAAO,CAAC,WAAW,EAAE,CAAC;GACvB,MAAM;AACL,QAAI,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC;GAC9B;CACF;;AAED,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC",
      "file": "/home/vio/v3metrics/src/cli/cli.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport pkg from '../utils/package_json';\nimport Command from './command';\nimport serveCommand from './serve/serve';\n\nconst argv = process.env.kbnWorkerArgv ? JSON.parse(process.env.kbnWorkerArgv) : process.argv.slice();\nconst program = new Command('bin/kibana');\n\nprogram\n.version(pkg.version)\n.description(\n  'Kibana is an open source (Apache Licensed), browser ' +\n  'based analytics and search dashboard for Elasticsearch.'\n);\n\n// attach commands\nserveCommand(program);\n\nprogram\n.command('help <command>')\n.description('Get the help for a specific command')\n.action(function (cmdName) {\n  const cmd = _.find(program.commands, { _name: cmdName });\n  if (!cmd) return program.error(`unknown command ${cmdName}`);\n  cmd.help();\n});\n\nprogram\n.command('*', null, { noHelp: true })\n.action(function (cmd, options) {\n  program.error(`unknown command ${cmd}`);\n});\n\n// check for no command name\nconst subCommand = argv[2] && !String(argv[2][0]).match(/^-|^\\.|\\//);\n\nif (!subCommand) {\n  if (_.intersection(argv.slice(2), ['-h', '--help']).length) {\n    program.defaultHelp();\n  } else {\n    argv.splice(2, 0, ['serve']);\n  }\n}\n\nprogram.parse(argv);\n"
      ]
    },
    "mtime": 1467036622781
  },
  "{\"filename\":\"/home/vio/v3metrics/src/utils/package_json.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "fs",
            "imported": [
              "existsSync"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "existsSync",
                "local": "existsSync"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "join"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "join",
                "local": "join"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _fs = require('fs');\n\nvar _path = require('path');\n\nvar packageDir = undefined;\nvar packagePath = undefined;\n\nwhile (!packagePath || !(0, _fs.existsSync)(packagePath)) {\n  var prev = packageDir;\n  packageDir = prev ? (0, _path.join)(prev, '..') : __dirname;\n  packagePath = (0, _path.join)(packageDir, 'package.json');\n\n  if (prev === packageDir) {\n    // if going up a directory doesn't work, we\n    // are already at the root of the filesystem\n    throw new Error('unable to find package.json');\n  }\n}\n\nmodule.exports = require(packagePath);\nmodule.exports.__filename = packagePath;\nmodule.exports.__dirname = packageDir;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3V0aWxzL3BhY2thZ2VfanNvbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztrQkFBMkIsSUFBSTs7b0JBQ1YsTUFBTTs7QUFFM0IsSUFBSSxVQUFVLFlBQUEsQ0FBQztBQUNmLElBQUksV0FBVyxZQUFBLENBQUM7O0FBRWhCLE9BQU8sQ0FBQyxXQUFXLElBQUksQ0FBQyxvQkFBVyxXQUFXLENBQUMsRUFBRTtBQUMvQyxNQUFJLElBQUksR0FBRyxVQUFVLENBQUM7QUFDdEIsWUFBVSxHQUFHLElBQUksR0FBRyxnQkFBSyxJQUFJLEVBQUUsSUFBSSxDQUFDLEdBQUcsU0FBUyxDQUFDO0FBQ2pELGFBQVcsR0FBRyxnQkFBSyxVQUFVLEVBQUUsY0FBYyxDQUFDLENBQUM7O0FBRS9DLE1BQUksSUFBSSxLQUFLLFVBQVUsRUFBRTs7O0FBR3ZCLFVBQU0sSUFBSSxLQUFLLENBQUMsNkJBQTZCLENBQUMsQ0FBQztHQUNoRDtDQUNGOztBQUdELE1BQU0sQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQ3RDLE1BQU0sQ0FBQyxPQUFPLENBQUMsVUFBVSxHQUFHLFdBQVcsQ0FBQztBQUN4QyxNQUFNLENBQUMsT0FBTyxDQUFDLFNBQVMsR0FBRyxVQUFVLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvdXRpbHMvcGFja2FnZV9qc29uLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZXhpc3RzU3luYyB9IGZyb20gJ2ZzJztcbmltcG9ydCB7IGpvaW4gfSBmcm9tICdwYXRoJztcblxubGV0IHBhY2thZ2VEaXI7XG5sZXQgcGFja2FnZVBhdGg7XG5cbndoaWxlICghcGFja2FnZVBhdGggfHwgIWV4aXN0c1N5bmMocGFja2FnZVBhdGgpKSB7XG4gIGxldCBwcmV2ID0gcGFja2FnZURpcjtcbiAgcGFja2FnZURpciA9IHByZXYgPyBqb2luKHByZXYsICcuLicpIDogX19kaXJuYW1lO1xuICBwYWNrYWdlUGF0aCA9IGpvaW4ocGFja2FnZURpciwgJ3BhY2thZ2UuanNvbicpO1xuXG4gIGlmIChwcmV2ID09PSBwYWNrYWdlRGlyKSB7XG4gICAgLy8gaWYgZ29pbmcgdXAgYSBkaXJlY3RvcnkgZG9lc24ndCB3b3JrLCB3ZVxuICAgIC8vIGFyZSBhbHJlYWR5IGF0IHRoZSByb290IG9mIHRoZSBmaWxlc3lzdGVtXG4gICAgdGhyb3cgbmV3IEVycm9yKCd1bmFibGUgdG8gZmluZCBwYWNrYWdlLmpzb24nKTtcbiAgfVxufVxuXG5cbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShwYWNrYWdlUGF0aCk7XG5tb2R1bGUuZXhwb3J0cy5fX2ZpbGVuYW1lID0gcGFja2FnZVBhdGg7XG5tb2R1bGUuZXhwb3J0cy5fX2Rpcm5hbWUgPSBwYWNrYWdlRGlyO1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/utils/package_json.js"
      ],
      "names": [],
      "mappings": ";;kBAA2B,IAAI;;oBACV,MAAM;;AAE3B,IAAI,UAAU,YAAA,CAAC;AACf,IAAI,WAAW,YAAA,CAAC;;AAEhB,OAAO,CAAC,WAAW,IAAI,CAAC,oBAAW,WAAW,CAAC,EAAE;AAC/C,MAAI,IAAI,GAAG,UAAU,CAAC;AACtB,YAAU,GAAG,IAAI,GAAG,gBAAK,IAAI,EAAE,IAAI,CAAC,GAAG,SAAS,CAAC;AACjD,aAAW,GAAG,gBAAK,UAAU,EAAE,cAAc,CAAC,CAAC;;AAE/C,MAAI,IAAI,KAAK,UAAU,EAAE;;;AAGvB,UAAM,IAAI,KAAK,CAAC,6BAA6B,CAAC,CAAC;GAChD;CACF;;AAGD,MAAM,CAAC,OAAO,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC;AACtC,MAAM,CAAC,OAAO,CAAC,UAAU,GAAG,WAAW,CAAC;AACxC,MAAM,CAAC,OAAO,CAAC,SAAS,GAAG,UAAU,CAAC",
      "file": "/home/vio/v3metrics/src/utils/package_json.js",
      "sourcesContent": [
        "import { existsSync } from 'fs';\nimport { join } from 'path';\n\nlet packageDir;\nlet packagePath;\n\nwhile (!packagePath || !existsSync(packagePath)) {\n  let prev = packageDir;\n  packageDir = prev ? join(prev, '..') : __dirname;\n  packagePath = join(packageDir, 'package.json');\n\n  if (prev === packageDir) {\n    // if going up a directory doesn't work, we\n    // are already at the root of the filesystem\n    throw new Error('unable to find package.json');\n  }\n}\n\n\nmodule.exports = require(packagePath);\nmodule.exports.__filename = packagePath;\nmodule.exports.__dirname = packageDir;\n"
      ]
    },
    "mtime": 1467036622893
  },
  "{\"filename\":\"/home/vio/v3metrics/src/cli/command.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "./help",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "help"
              }
            ]
          },
          {
            "source": "commander",
            "imported": [
              "Command"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Command",
                "local": "Command"
              }
            ]
          },
          {
            "source": "./color",
            "imported": [
              "red"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "red",
                "local": "red"
              }
            ]
          },
          {
            "source": "./color",
            "imported": [
              "yellow"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "yellow",
                "local": "yellow"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _help = require('./help');\n\nvar _help2 = _interopRequireDefault(_help);\n\nvar _commander = require('commander');\n\nvar _color = require('./color');\n\n_commander.Command.prototype.error = function (err) {\n  if (err && err.message) err = err.message;\n\n  console.log('\\n' + (0, _color.red)(' ERROR ') + ' ' + err + '\\n\\n' + (0, _help2['default'])(this, '  ') + '\\n');\n\n  process.exit(64); // eslint-disable-line no-process-exit\n};\n\n_commander.Command.prototype.defaultHelp = function () {\n  console.log('\\n' + (0, _help2['default'])(this, '  ') + '\\n\\n');\n\n  process.exit(64); // eslint-disable-line no-process-exit\n};\n\n_commander.Command.prototype.unknownArgv = function (argv) {\n  if (argv) this.__unknownArgv = argv;\n  return this.__unknownArgv ? this.__unknownArgv.slice(0) : [];\n};\n\n/**\n * setup the command to accept arbitrary configuration via the cli\n * @return {[type]} [description]\n */\n_commander.Command.prototype.collectUnknownOptions = function () {\n  var title = 'Extra ' + this._name + ' options';\n\n  this.allowUnknownOption();\n  this.getUnknownOptions = function () {\n    var opts = {};\n    var unknowns = this.unknownArgv();\n\n    while (unknowns.length) {\n      var opt = unknowns.shift().split('=');\n      if (opt[0].slice(0, 2) !== '--') {\n        this.error(title + ' \"' + opt[0] + '\" must start with \"--\"');\n      }\n\n      if (opt.length === 1) {\n        if (!unknowns.length || unknowns[0][0] === '-') {\n          this.error(title + ' \"' + opt[0] + '\" must have a value');\n        }\n\n        opt.push(unknowns.shift());\n      }\n\n      var val = opt[1];\n      try {\n        val = JSON.parse(opt[1]);\n      } catch (e) {\n        val = opt[1];\n      }\n\n      _lodash2['default'].set(opts, opt[0].slice(2), val);\n    }\n\n    return opts;\n  };\n\n  return this;\n};\n\n_commander.Command.prototype.parseOptions = _lodash2['default'].wrap(_commander.Command.prototype.parseOptions, function (parse, argv) {\n  var opts = parse.call(this, argv);\n  this.unknownArgv(opts.unknown);\n  return opts;\n});\n\n_commander.Command.prototype.action = _lodash2['default'].wrap(_commander.Command.prototype.action, function (action, fn) {\n  return action.call(this, function () {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var ret = fn.apply(this, args);\n    if (ret && typeof ret.then === 'function') {\n      ret.then(null, function (e) {\n        console.log('FATAL CLI ERROR', e.stack);\n        process.exit(1);\n      });\n    }\n  });\n});\n\nmodule.exports = _commander.Command;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL2NsaS9jb21tYW5kLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7c0JBQWMsUUFBUTs7OztvQkFFTCxRQUFROzs7O3lCQUNELFdBQVc7O3FCQUNmLFNBQVM7O0FBRzdCLG1CQUFRLFNBQVMsQ0FBQyxLQUFLLEdBQUcsVUFBVSxHQUFHLEVBQUU7QUFDdkMsTUFBSSxHQUFHLElBQUksR0FBRyxDQUFDLE9BQU8sRUFBRSxHQUFHLEdBQUcsR0FBRyxDQUFDLE9BQU8sQ0FBQzs7QUFFMUMsU0FBTyxDQUFDLEdBQUcsUUFFWCxnQkFBSSxTQUFTLENBQUMsU0FBSSxHQUFHLFlBRXJCLHVCQUFLLElBQUksRUFBRSxJQUFJLENBQUMsUUFFZixDQUFDOztBQUVGLFNBQU8sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7Q0FDbEIsQ0FBQzs7QUFFRixtQkFBUSxTQUFTLENBQUMsV0FBVyxHQUFHLFlBQVk7QUFDMUMsU0FBTyxDQUFDLEdBQUcsUUFFWCx1QkFBSyxJQUFJLEVBQUUsSUFBSSxDQUFDLFVBR2YsQ0FBQzs7QUFFRixTQUFPLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0NBQ2xCLENBQUM7O0FBRUYsbUJBQVEsU0FBUyxDQUFDLFdBQVcsR0FBRyxVQUFVLElBQUksRUFBRTtBQUM5QyxNQUFJLElBQUksRUFBRSxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQztBQUNwQyxTQUFPLElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO0NBQzlELENBQUM7Ozs7OztBQU1GLG1CQUFRLFNBQVMsQ0FBQyxxQkFBcUIsR0FBRyxZQUFZO0FBQ3BELE1BQUksS0FBSyxjQUFZLElBQUksQ0FBQyxLQUFLLGFBQVUsQ0FBQzs7QUFFMUMsTUFBSSxDQUFDLGtCQUFrQixFQUFFLENBQUM7QUFDMUIsTUFBSSxDQUFDLGlCQUFpQixHQUFHLFlBQVk7QUFDbkMsUUFBSSxJQUFJLEdBQUcsRUFBRSxDQUFDO0FBQ2QsUUFBSSxRQUFRLEdBQUcsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDOztBQUVsQyxXQUFPLFFBQVEsQ0FBQyxNQUFNLEVBQUU7QUFDdEIsVUFBSSxHQUFHLEdBQUcsUUFBUSxDQUFDLEtBQUssRUFBRSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUN0QyxVQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLElBQUksRUFBRTtBQUMvQixZQUFJLENBQUMsS0FBSyxDQUFJLEtBQUssVUFBSyxHQUFHLENBQUMsQ0FBQyxDQUFDLDRCQUF5QixDQUFDO09BQ3pEOztBQUVELFVBQUksR0FBRyxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUU7QUFDcEIsWUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLElBQUksUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsRUFBRTtBQUM5QyxjQUFJLENBQUMsS0FBSyxDQUFJLEtBQUssVUFBSyxHQUFHLENBQUMsQ0FBQyxDQUFDLHlCQUFzQixDQUFDO1NBQ3REOztBQUVELFdBQUcsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUM7T0FDNUI7O0FBRUQsVUFBSSxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2pCLFVBQUk7QUFBRSxXQUFHLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztPQUFFLENBQ2pDLE9BQU8sQ0FBQyxFQUFFO0FBQUUsV0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztPQUFFOztBQUUzQiwwQkFBRSxHQUFHLENBQUMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7S0FDbkM7O0FBRUQsV0FBTyxJQUFJLENBQUM7R0FDYixDQUFDOztBQUVGLFNBQU8sSUFBSSxDQUFDO0NBQ2IsQ0FBQzs7QUFFRixtQkFBUSxTQUFTLENBQUMsWUFBWSxHQUFHLG9CQUFFLElBQUksQ0FBQyxtQkFBUSxTQUFTLENBQUMsWUFBWSxFQUFFLFVBQVUsS0FBSyxFQUFFLElBQUksRUFBRTtBQUM3RixNQUFJLElBQUksR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztBQUNsQyxNQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUMvQixTQUFPLElBQUksQ0FBQztDQUNiLENBQUMsQ0FBQzs7QUFFSCxtQkFBUSxTQUFTLENBQUMsTUFBTSxHQUFHLG9CQUFFLElBQUksQ0FBQyxtQkFBUSxTQUFTLENBQUMsTUFBTSxFQUFFLFVBQVUsTUFBTSxFQUFFLEVBQUUsRUFBRTtBQUNoRixTQUFPLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLFlBQW1CO3NDQUFOLElBQUk7QUFBSixVQUFJOzs7QUFDeEMsUUFBSSxHQUFHLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDL0IsUUFBSSxHQUFHLElBQUksT0FBTyxHQUFHLENBQUMsSUFBSSxLQUFLLFVBQVUsRUFBRTtBQUN6QyxTQUFHLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxVQUFVLENBQUMsRUFBRTtBQUMxQixlQUFPLENBQUMsR0FBRyxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUN4QyxlQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO09BQ2pCLENBQUMsQ0FBQztLQUNKO0dBQ0YsQ0FBQyxDQUFDO0NBQ0osQ0FBQyxDQUFDOztBQUVILE1BQU0sQ0FBQyxPQUFPLHFCQUFVLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvY2xpL2NvbW1hbmQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQgaGVscCBmcm9tICcuL2hlbHAnO1xuaW1wb3J0IHsgQ29tbWFuZCB9IGZyb20gJ2NvbW1hbmRlcic7XG5pbXBvcnQgeyByZWQgfSBmcm9tICcuL2NvbG9yJztcbmltcG9ydCB7IHllbGxvdyB9IGZyb20gJy4vY29sb3InO1xuXG5Db21tYW5kLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgaWYgKGVyciAmJiBlcnIubWVzc2FnZSkgZXJyID0gZXJyLm1lc3NhZ2U7XG5cbiAgY29uc29sZS5sb2coXG5gXG4ke3JlZCgnIEVSUk9SICcpfSAke2Vycn1cblxuJHtoZWxwKHRoaXMsICcgICcpfVxuYFxuICApO1xuXG4gIHByb2Nlc3MuZXhpdCg2NCk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcHJvY2Vzcy1leGl0XG59O1xuXG5Db21tYW5kLnByb3RvdHlwZS5kZWZhdWx0SGVscCA9IGZ1bmN0aW9uICgpIHtcbiAgY29uc29sZS5sb2coXG5gXG4ke2hlbHAodGhpcywgJyAgJyl9XG5cbmBcbiAgKTtcblxuICBwcm9jZXNzLmV4aXQoNjQpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXByb2Nlc3MtZXhpdFxufTtcblxuQ29tbWFuZC5wcm90b3R5cGUudW5rbm93bkFyZ3YgPSBmdW5jdGlvbiAoYXJndikge1xuICBpZiAoYXJndikgdGhpcy5fX3Vua25vd25Bcmd2ID0gYXJndjtcbiAgcmV0dXJuIHRoaXMuX191bmtub3duQXJndiA/IHRoaXMuX191bmtub3duQXJndi5zbGljZSgwKSA6IFtdO1xufTtcblxuLyoqXG4gKiBzZXR1cCB0aGUgY29tbWFuZCB0byBhY2NlcHQgYXJiaXRyYXJ5IGNvbmZpZ3VyYXRpb24gdmlhIHRoZSBjbGlcbiAqIEByZXR1cm4ge1t0eXBlXX0gW2Rlc2NyaXB0aW9uXVxuICovXG5Db21tYW5kLnByb3RvdHlwZS5jb2xsZWN0VW5rbm93bk9wdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gIGxldCB0aXRsZSA9IGBFeHRyYSAke3RoaXMuX25hbWV9IG9wdGlvbnNgO1xuXG4gIHRoaXMuYWxsb3dVbmtub3duT3B0aW9uKCk7XG4gIHRoaXMuZ2V0VW5rbm93bk9wdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgbGV0IG9wdHMgPSB7fTtcbiAgICBsZXQgdW5rbm93bnMgPSB0aGlzLnVua25vd25Bcmd2KCk7XG5cbiAgICB3aGlsZSAodW5rbm93bnMubGVuZ3RoKSB7XG4gICAgICBsZXQgb3B0ID0gdW5rbm93bnMuc2hpZnQoKS5zcGxpdCgnPScpO1xuICAgICAgaWYgKG9wdFswXS5zbGljZSgwLCAyKSAhPT0gJy0tJykge1xuICAgICAgICB0aGlzLmVycm9yKGAke3RpdGxlfSBcIiR7b3B0WzBdfVwiIG11c3Qgc3RhcnQgd2l0aCBcIi0tXCJgKTtcbiAgICAgIH1cblxuICAgICAgaWYgKG9wdC5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgaWYgKCF1bmtub3ducy5sZW5ndGggfHwgdW5rbm93bnNbMF1bMF0gPT09ICctJykge1xuICAgICAgICAgIHRoaXMuZXJyb3IoYCR7dGl0bGV9IFwiJHtvcHRbMF19XCIgbXVzdCBoYXZlIGEgdmFsdWVgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG9wdC5wdXNoKHVua25vd25zLnNoaWZ0KCkpO1xuICAgICAgfVxuXG4gICAgICBsZXQgdmFsID0gb3B0WzFdO1xuICAgICAgdHJ5IHsgdmFsID0gSlNPTi5wYXJzZShvcHRbMV0pOyB9XG4gICAgICBjYXRjaCAoZSkgeyB2YWwgPSBvcHRbMV07IH1cblxuICAgICAgXy5zZXQob3B0cywgb3B0WzBdLnNsaWNlKDIpLCB2YWwpO1xuICAgIH1cblxuICAgIHJldHVybiBvcHRzO1xuICB9O1xuXG4gIHJldHVybiB0aGlzO1xufTtcblxuQ29tbWFuZC5wcm90b3R5cGUucGFyc2VPcHRpb25zID0gXy53cmFwKENvbW1hbmQucHJvdG90eXBlLnBhcnNlT3B0aW9ucywgZnVuY3Rpb24gKHBhcnNlLCBhcmd2KSB7XG4gIGxldCBvcHRzID0gcGFyc2UuY2FsbCh0aGlzLCBhcmd2KTtcbiAgdGhpcy51bmtub3duQXJndihvcHRzLnVua25vd24pO1xuICByZXR1cm4gb3B0cztcbn0pO1xuXG5Db21tYW5kLnByb3RvdHlwZS5hY3Rpb24gPSBfLndyYXAoQ29tbWFuZC5wcm90b3R5cGUuYWN0aW9uLCBmdW5jdGlvbiAoYWN0aW9uLCBmbikge1xuICByZXR1cm4gYWN0aW9uLmNhbGwodGhpcywgZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICBsZXQgcmV0ID0gZm4uYXBwbHkodGhpcywgYXJncyk7XG4gICAgaWYgKHJldCAmJiB0eXBlb2YgcmV0LnRoZW4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJldC50aGVuKG51bGwsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdGQVRBTMKgQ0xJIEVSUk9SJywgZS5zdGFjayk7XG4gICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBDb21tYW5kO1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/cli/command.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/src/cli/command.js",
      "sourcesContent": [
        "import _ from 'lodash';\n\nimport help from './help';\nimport { Command } from 'commander';\nimport { red } from './color';\nimport { yellow } from './color';\n\nCommand.prototype.error = function (err) {\n  if (err && err.message) err = err.message;\n\n  console.log(\n`\n${red(' ERROR ')} ${err}\n\n${help(this, '  ')}\n`\n  );\n\n  process.exit(64); // eslint-disable-line no-process-exit\n};\n\nCommand.prototype.defaultHelp = function () {\n  console.log(\n`\n${help(this, '  ')}\n\n`\n  );\n\n  process.exit(64); // eslint-disable-line no-process-exit\n};\n\nCommand.prototype.unknownArgv = function (argv) {\n  if (argv) this.__unknownArgv = argv;\n  return this.__unknownArgv ? this.__unknownArgv.slice(0) : [];\n};\n\n/**\n * setup the command to accept arbitrary configuration via the cli\n * @return {[type]} [description]\n */\nCommand.prototype.collectUnknownOptions = function () {\n  let title = `Extra ${this._name} options`;\n\n  this.allowUnknownOption();\n  this.getUnknownOptions = function () {\n    let opts = {};\n    let unknowns = this.unknownArgv();\n\n    while (unknowns.length) {\n      let opt = unknowns.shift().split('=');\n      if (opt[0].slice(0, 2) !== '--') {\n        this.error(`${title} \"${opt[0]}\" must start with \"--\"`);\n      }\n\n      if (opt.length === 1) {\n        if (!unknowns.length || unknowns[0][0] === '-') {\n          this.error(`${title} \"${opt[0]}\" must have a value`);\n        }\n\n        opt.push(unknowns.shift());\n      }\n\n      let val = opt[1];\n      try { val = JSON.parse(opt[1]); }\n      catch (e) { val = opt[1]; }\n\n      _.set(opts, opt[0].slice(2), val);\n    }\n\n    return opts;\n  };\n\n  return this;\n};\n\nCommand.prototype.parseOptions = _.wrap(Command.prototype.parseOptions, function (parse, argv) {\n  let opts = parse.call(this, argv);\n  this.unknownArgv(opts.unknown);\n  return opts;\n});\n\nCommand.prototype.action = _.wrap(Command.prototype.action, function (action, fn) {\n  return action.call(this, function (...args) {\n    let ret = fn.apply(this, args);\n    if (ret && typeof ret.then === 'function') {\n      ret.then(null, function (e) {\n        console.log('FATAL CLI ERROR', e.stack);\n        process.exit(1);\n      });\n    }\n  });\n});\n\nmodule.exports = Command;\n"
      ]
    },
    "mtime": 1467036622785
  },
  "{\"filename\":\"/home/vio/v3metrics/src/cli/help.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nmodule.exports = function (command, spaces) {\n  if (!_lodash2['default'].size(command.commands)) {\n    return command.outputHelp();\n  }\n\n  var defCmd = _lodash2['default'].find(command.commands, function (cmd) {\n    return cmd._name === 'serve';\n  });\n\n  var desc = !command.description() ? '' : command.description();\n  var cmdDef = !defCmd ? '' : '=' + defCmd._name;\n\n  return ('\\nUsage: ' + command._name + ' [command' + cmdDef + '] [options]\\n\\n' + desc + '\\n\\nCommands:\\n' + indent(commandsSummary(command), 2) + '\\n\\n' + cmdHelp(defCmd) + '\\n').trim().replace(/^/gm, spaces || '');\n};\n\nfunction indent(str, n) {\n  return String(str || '').trim().replace(/^/gm, _lodash2['default'].repeat(' ', n));\n}\n\nfunction commandsSummary(program) {\n  var cmds = _lodash2['default'].compact(program.commands.map(function (cmd) {\n    var name = cmd._name;\n    if (name === '*') return;\n    var opts = cmd.options.length ? ' [options]' : '';\n    var args = cmd._args.map(function (arg) {\n      return humanReadableArgName(arg);\n    }).join(' ');\n\n    return [name + ' ' + opts + ' ' + args, cmd.description()];\n  }));\n\n  var cmdLColWidth = cmds.reduce(function (width, cmd) {\n    return Math.max(width, cmd[0].length);\n  }, 0);\n\n  return cmds.reduce(function (help, cmd) {\n    return '' + (help || '') + _lodash2['default'].padRight(cmd[0], cmdLColWidth) + ' ' + (cmd[1] || '') + '\\n';\n  }, '');\n}\n\nfunction cmdHelp(cmd) {\n  if (!cmd) return '';\n  return ('\\n\"' + cmd._name + '\" Options:\\n\\n' + indent(cmd.optionHelp(), 2) + '\\n').trim();\n}\n\nfunction humanReadableArgName(arg) {\n  var nameOutput = arg.name + (arg.variadic === true ? '...' : '');\n  return arg.required ? '<' + nameOutput + '>' : '[' + nameOutput + ']';\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL2NsaS9oZWxwLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7c0JBQWMsUUFBUTs7OztBQUV0QixNQUFNLENBQUMsT0FBTyxHQUFHLFVBQVUsT0FBTyxFQUFFLE1BQU0sRUFBRTtBQUMxQyxNQUFJLENBQUMsb0JBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsRUFBRTtBQUM3QixXQUFPLE9BQU8sQ0FBQyxVQUFVLEVBQUUsQ0FBQztHQUM3Qjs7QUFFRCxNQUFJLE1BQU0sR0FBRyxvQkFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRSxVQUFVLEdBQUcsRUFBRTtBQUNuRCxXQUFPLEdBQUcsQ0FBQyxLQUFLLEtBQUssT0FBTyxDQUFDO0dBQzlCLENBQUMsQ0FBQzs7QUFFSCxNQUFJLElBQUksR0FBRyxDQUFDLE9BQU8sQ0FBQyxXQUFXLEVBQUUsR0FBRyxFQUFFLEdBQUcsT0FBTyxDQUFDLFdBQVcsRUFBRSxDQUFDO0FBQy9ELE1BQUksTUFBTSxHQUFHLENBQUMsTUFBTSxHQUFHLEVBQUUsU0FBTyxNQUFNLENBQUMsS0FBSyxBQUFFLENBQUM7O0FBRS9DLFNBQU8sZUFFQSxPQUFPLENBQUMsS0FBSyxpQkFBWSxNQUFNLHVCQUV0QyxJQUFJLHVCQUdKLE1BQU0sQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDLFlBRW5DLE9BQU8sQ0FBQyxNQUFNLENBQUMsU0FFYixJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLE1BQU0sSUFBSSxFQUFFLENBQUMsQ0FBQztDQUN2QyxDQUFDOztBQUVGLFNBQVMsTUFBTSxDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUU7QUFDdEIsU0FBTyxNQUFNLENBQUMsR0FBRyxJQUFJLEVBQUUsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsb0JBQUUsTUFBTSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0NBQ2xFOztBQUVELFNBQVMsZUFBZSxDQUFDLE9BQU8sRUFBRTtBQUNoQyxNQUFJLElBQUksR0FBRyxvQkFBRSxPQUFPLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsVUFBVSxHQUFHLEVBQUU7QUFDdkQsUUFBSSxJQUFJLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQztBQUNyQixRQUFJLElBQUksS0FBSyxHQUFHLEVBQUUsT0FBTztBQUN6QixRQUFJLElBQUksR0FBRyxHQUFHLENBQUMsT0FBTyxDQUFDLE1BQU0sR0FBRyxZQUFZLEdBQUcsRUFBRSxDQUFDO0FBQ2xELFFBQUksSUFBSSxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLFVBQVUsR0FBRyxFQUFFO0FBQ3RDLGFBQU8sb0JBQW9CLENBQUMsR0FBRyxDQUFDLENBQUM7S0FDbEMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQzs7QUFFYixXQUFPLENBQ0YsSUFBSSxTQUFJLElBQUksU0FBSSxJQUFJLEVBQ3ZCLEdBQUcsQ0FBQyxXQUFXLEVBQUUsQ0FDbEIsQ0FBQztHQUNILENBQUMsQ0FBQyxDQUFDOztBQUVKLE1BQUksWUFBWSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsVUFBVSxLQUFLLEVBQUUsR0FBRyxFQUFFO0FBQ25ELFdBQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0dBQ3ZDLEVBQUUsQ0FBQyxDQUFDLENBQUM7O0FBRU4sU0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLFVBQVUsSUFBSSxFQUFFLEdBQUcsRUFBRTtBQUN0QyxpQkFBVSxJQUFJLElBQUksRUFBRSxDQUFBLEdBQUcsb0JBQUUsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxZQUFZLENBQUMsVUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFBLFFBQUs7R0FDN0UsRUFBRSxFQUFFLENBQUMsQ0FBQztDQUNSOztBQUVELFNBQVMsT0FBTyxDQUFDLEdBQUcsRUFBRTtBQUNwQixNQUFJLENBQUMsR0FBRyxFQUFFLE9BQU8sRUFBRSxDQUFDO0FBQ3BCLFNBQU8sU0FHTixHQUFHLENBQUMsS0FBSyxzQkFFVixNQUFNLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBRSxFQUFFLENBQUMsQ0FBQyxTQUd6QixJQUFJLEVBQUUsQ0FBQztDQUVWOztBQUVELFNBQVMsb0JBQW9CLENBQUMsR0FBRyxFQUFFO0FBQ2pDLE1BQUksVUFBVSxHQUFHLEdBQUcsQ0FBQyxJQUFJLElBQUksR0FBRyxDQUFDLFFBQVEsS0FBSyxJQUFJLEdBQUcsS0FBSyxHQUFHLEVBQUUsQ0FBQSxBQUFDLENBQUM7QUFDakUsU0FBTyxHQUFHLENBQUMsUUFBUSxHQUFHLEdBQUcsR0FBRyxVQUFVLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxVQUFVLEdBQUcsR0FBRyxDQUFDO0NBQ3ZFIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL2NsaS9oZWxwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY29tbWFuZCwgc3BhY2VzKSB7XG4gIGlmICghXy5zaXplKGNvbW1hbmQuY29tbWFuZHMpKSB7XG4gICAgcmV0dXJuIGNvbW1hbmQub3V0cHV0SGVscCgpO1xuICB9XG5cbiAgbGV0IGRlZkNtZCA9IF8uZmluZChjb21tYW5kLmNvbW1hbmRzLCBmdW5jdGlvbiAoY21kKSB7XG4gICAgcmV0dXJuIGNtZC5fbmFtZSA9PT0gJ3NlcnZlJztcbiAgfSk7XG5cbiAgbGV0IGRlc2MgPSAhY29tbWFuZC5kZXNjcmlwdGlvbigpID8gJycgOiBjb21tYW5kLmRlc2NyaXB0aW9uKCk7XG4gIGxldCBjbWREZWYgPSAhZGVmQ21kID8gJycgOiBgPSR7ZGVmQ21kLl9uYW1lfWA7XG5cbiAgcmV0dXJuIChcbmBcblVzYWdlOiAke2NvbW1hbmQuX25hbWV9IFtjb21tYW5kJHtjbWREZWZ9XSBbb3B0aW9uc11cblxuJHtkZXNjfVxuXG5Db21tYW5kczpcbiR7aW5kZW50KGNvbW1hbmRzU3VtbWFyeShjb21tYW5kKSwgMil9XG5cbiR7Y21kSGVscChkZWZDbWQpfVxuYFxuICApLnRyaW0oKS5yZXBsYWNlKC9eL2dtLCBzcGFjZXMgfHwgJycpO1xufTtcblxuZnVuY3Rpb24gaW5kZW50KHN0ciwgbikge1xuICByZXR1cm4gU3RyaW5nKHN0ciB8fCAnJykudHJpbSgpLnJlcGxhY2UoL14vZ20sIF8ucmVwZWF0KCcgJywgbikpO1xufVxuXG5mdW5jdGlvbiBjb21tYW5kc1N1bW1hcnkocHJvZ3JhbSkge1xuICBsZXQgY21kcyA9IF8uY29tcGFjdChwcm9ncmFtLmNvbW1hbmRzLm1hcChmdW5jdGlvbiAoY21kKSB7XG4gICAgbGV0IG5hbWUgPSBjbWQuX25hbWU7XG4gICAgaWYgKG5hbWUgPT09ICcqJykgcmV0dXJuO1xuICAgIGxldCBvcHRzID0gY21kLm9wdGlvbnMubGVuZ3RoID8gJyBbb3B0aW9uc10nIDogJyc7XG4gICAgbGV0IGFyZ3MgPSBjbWQuX2FyZ3MubWFwKGZ1bmN0aW9uIChhcmcpIHtcbiAgICAgIHJldHVybiBodW1hblJlYWRhYmxlQXJnTmFtZShhcmcpO1xuICAgIH0pLmpvaW4oJyAnKTtcblxuICAgIHJldHVybiBbXG4gICAgICBgJHtuYW1lfSAke29wdHN9ICR7YXJnc31gLFxuICAgICAgY21kLmRlc2NyaXB0aW9uKClcbiAgICBdO1xuICB9KSk7XG5cbiAgbGV0IGNtZExDb2xXaWR0aCA9IGNtZHMucmVkdWNlKGZ1bmN0aW9uICh3aWR0aCwgY21kKSB7XG4gICAgcmV0dXJuIE1hdGgubWF4KHdpZHRoLCBjbWRbMF0ubGVuZ3RoKTtcbiAgfSwgMCk7XG5cbiAgcmV0dXJuIGNtZHMucmVkdWNlKGZ1bmN0aW9uIChoZWxwLCBjbWQpIHtcbiAgICByZXR1cm4gYCR7aGVscCB8fCAnJ30ke18ucGFkUmlnaHQoY21kWzBdLCBjbWRMQ29sV2lkdGgpfSAke2NtZFsxXSB8fCAnJ31cXG5gO1xuICB9LCAnJyk7XG59XG5cbmZ1bmN0aW9uIGNtZEhlbHAoY21kKSB7XG4gIGlmICghY21kKSByZXR1cm4gJyc7XG4gIHJldHVybiAoXG5cbmBcblwiJHtjbWQuX25hbWV9XCIgT3B0aW9uczpcblxuJHtpbmRlbnQoY21kLm9wdGlvbkhlbHAoKSwgMil9XG5gXG5cbiAgKS50cmltKCk7XG5cbn1cblxuZnVuY3Rpb24gaHVtYW5SZWFkYWJsZUFyZ05hbWUoYXJnKSB7XG4gIGxldCBuYW1lT3V0cHV0ID0gYXJnLm5hbWUgKyAoYXJnLnZhcmlhZGljID09PSB0cnVlID8gJy4uLicgOiAnJyk7XG4gIHJldHVybiBhcmcucmVxdWlyZWQgPyAnPCcgKyBuYW1lT3V0cHV0ICsgJz4nIDogJ1snICsgbmFtZU91dHB1dCArICddJztcbn1cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/cli/help.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/src/cli/help.js",
      "sourcesContent": [
        "import _ from 'lodash';\n\nmodule.exports = function (command, spaces) {\n  if (!_.size(command.commands)) {\n    return command.outputHelp();\n  }\n\n  let defCmd = _.find(command.commands, function (cmd) {\n    return cmd._name === 'serve';\n  });\n\n  let desc = !command.description() ? '' : command.description();\n  let cmdDef = !defCmd ? '' : `=${defCmd._name}`;\n\n  return (\n`\nUsage: ${command._name} [command${cmdDef}] [options]\n\n${desc}\n\nCommands:\n${indent(commandsSummary(command), 2)}\n\n${cmdHelp(defCmd)}\n`\n  ).trim().replace(/^/gm, spaces || '');\n};\n\nfunction indent(str, n) {\n  return String(str || '').trim().replace(/^/gm, _.repeat(' ', n));\n}\n\nfunction commandsSummary(program) {\n  let cmds = _.compact(program.commands.map(function (cmd) {\n    let name = cmd._name;\n    if (name === '*') return;\n    let opts = cmd.options.length ? ' [options]' : '';\n    let args = cmd._args.map(function (arg) {\n      return humanReadableArgName(arg);\n    }).join(' ');\n\n    return [\n      `${name} ${opts} ${args}`,\n      cmd.description()\n    ];\n  }));\n\n  let cmdLColWidth = cmds.reduce(function (width, cmd) {\n    return Math.max(width, cmd[0].length);\n  }, 0);\n\n  return cmds.reduce(function (help, cmd) {\n    return `${help || ''}${_.padRight(cmd[0], cmdLColWidth)} ${cmd[1] || ''}\\n`;\n  }, '');\n}\n\nfunction cmdHelp(cmd) {\n  if (!cmd) return '';\n  return (\n\n`\n\"${cmd._name}\" Options:\n\n${indent(cmd.optionHelp(), 2)}\n`\n\n  ).trim();\n\n}\n\nfunction humanReadableArgName(arg) {\n  let nameOutput = arg.name + (arg.variadic === true ? '...' : '');\n  return arg.required ? '<' + nameOutput + '>' : '[' + nameOutput + ']';\n}\n"
      ]
    },
    "mtime": 1467036622785
  },
  "{\"filename\":\"/home/vio/v3metrics/src/cli/color.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "ansicolors",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "ansicolors"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _ansicolors = require('ansicolors');\n\nvar _ansicolors2 = _interopRequireDefault(_ansicolors);\n\nexports.green = _lodash2['default'].flow(_ansicolors2['default'].black, _ansicolors2['default'].bgGreen);\nexports.red = _lodash2['default'].flow(_ansicolors2['default'].white, _ansicolors2['default'].bgRed);\nexports.yellow = _lodash2['default'].flow(_ansicolors2['default'].black, _ansicolors2['default'].bgYellow);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL2NsaS9jb2xvci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O3NCQUNjLFFBQVE7Ozs7MEJBQ0MsWUFBWTs7OztBQUVuQyxPQUFPLENBQUMsS0FBSyxHQUFHLG9CQUFFLElBQUksQ0FBQyx3QkFBVyxLQUFLLEVBQUUsd0JBQVcsT0FBTyxDQUFDLENBQUM7QUFDN0QsT0FBTyxDQUFDLEdBQUcsR0FBRyxvQkFBRSxJQUFJLENBQUMsd0JBQVcsS0FBSyxFQUFFLHdCQUFXLEtBQUssQ0FBQyxDQUFDO0FBQ3pELE9BQU8sQ0FBQyxNQUFNLEdBQUcsb0JBQUUsSUFBSSxDQUFDLHdCQUFXLEtBQUssRUFBRSx3QkFBVyxRQUFRLENBQUMsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9jbGkvY29sb3IuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgYW5zaWNvbG9ycyBmcm9tICdhbnNpY29sb3JzJztcblxuZXhwb3J0cy5ncmVlbiA9IF8uZmxvdyhhbnNpY29sb3JzLmJsYWNrLCBhbnNpY29sb3JzLmJnR3JlZW4pO1xuZXhwb3J0cy5yZWQgPSBfLmZsb3coYW5zaWNvbG9ycy53aGl0ZSwgYW5zaWNvbG9ycy5iZ1JlZCk7XG5leHBvcnRzLnllbGxvdyA9IF8uZmxvdyhhbnNpY29sb3JzLmJsYWNrLCBhbnNpY29sb3JzLmJnWWVsbG93KTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/cli/color.js"
      ],
      "names": [],
      "mappings": ";;;;sBACc,QAAQ;;;;0BACC,YAAY;;;;AAEnC,OAAO,CAAC,KAAK,GAAG,oBAAE,IAAI,CAAC,wBAAW,KAAK,EAAE,wBAAW,OAAO,CAAC,CAAC;AAC7D,OAAO,CAAC,GAAG,GAAG,oBAAE,IAAI,CAAC,wBAAW,KAAK,EAAE,wBAAW,KAAK,CAAC,CAAC;AACzD,OAAO,CAAC,MAAM,GAAG,oBAAE,IAAI,CAAC,wBAAW,KAAK,EAAE,wBAAW,QAAQ,CAAC,CAAC",
      "file": "/home/vio/v3metrics/src/cli/color.js",
      "sourcesContent": [
        "\nimport _ from 'lodash';\nimport ansicolors from 'ansicolors';\n\nexports.green = _.flow(ansicolors.black, ansicolors.bgGreen);\nexports.red = _.flow(ansicolors.white, ansicolors.bgRed);\nexports.yellow = _.flow(ansicolors.black, ansicolors.bgYellow);\n"
      ]
    },
    "mtime": 1467036622785
  },
  "{\"filename\":\"/home/vio/v3metrics/src/cli/serve/serve.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "fs",
            "imported": [
              "statSync"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "statSync",
                "local": "statSync"
              }
            ]
          },
          {
            "source": "cluster",
            "imported": [
              "isWorker"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "isWorker",
                "local": "isWorker"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "resolve"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "resolve",
                "local": "resolve"
              }
            ]
          },
          {
            "source": "../../utils",
            "imported": [
              "fromRoot"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "fromRoot",
                "local": "fromRoot"
              }
            ]
          },
          {
            "source": "../../server/path",
            "imported": [
              "getConfig"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "getConfig",
                "local": "getConfig"
              }
            ]
          },
          {
            "source": "./read_yaml_config",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "readYamlConfig"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "async-to-generator",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _fs = require('fs');\n\nvar _cluster = require('cluster');\n\nvar _path = require('path');\n\nvar _utils = require('../../utils');\n\nvar _serverPath = require('../../server/path');\n\nvar _read_yaml_config = require('./read_yaml_config');\n\nvar _read_yaml_config2 = _interopRequireDefault(_read_yaml_config);\n\nvar canCluster = undefined;\ntry {\n  require.resolve('../cluster/cluster_manager');\n  canCluster = true;\n} catch (e) {\n  canCluster = false;\n}\n\nvar pathCollector = function pathCollector() {\n  var paths = [];\n  return function (path) {\n    paths.push((0, _path.resolve)(process.cwd(), path));\n    return paths;\n  };\n};\n\nvar configPathCollector = pathCollector();\nvar pluginDirCollector = pathCollector();\nvar pluginPathCollector = pathCollector();\n\nfunction readServerSettings(opts, extraCliOptions) {\n  var settings = (0, _read_yaml_config2['default'])(opts.config);\n  var set = _lodash2['default'].partial(_lodash2['default'].set, settings);\n  var get = _lodash2['default'].partial(_lodash2['default'].get, settings);\n  var has = _lodash2['default'].partial(_lodash2['default'].has, settings);\n  var merge = _lodash2['default'].partial(_lodash2['default'].merge, settings);\n\n  if (opts.dev) {\n    set('env', 'development');\n    set('optimize.lazy', true);\n    if (opts.ssl && !has('server.ssl.cert') && !has('server.ssl.key')) {\n      set('server.host', 'localhost');\n      set('server.ssl.cert', (0, _utils.fromRoot)('test/dev_certs/server.crt'));\n      set('server.ssl.key', (0, _utils.fromRoot)('test/dev_certs/server.key'));\n    }\n  }\n\n  if (opts.elasticsearch) set('elasticsearch.url', opts.elasticsearch);\n  if (opts.port) set('server.port', opts.port);\n  if (opts.host) set('server.host', opts.host);\n  if (opts.quiet) set('logging.quiet', true);\n  if (opts.silent) set('logging.silent', true);\n  if (opts.verbose) set('logging.verbose', true);\n  if (opts.logFile) set('logging.dest', opts.logFile);\n\n  set('plugins.scanDirs', _lodash2['default'].compact([].concat(get('plugins.scanDirs'), opts.pluginDir)));\n\n  set('plugins.paths', _lodash2['default'].compact([].concat(get('plugins.paths'), opts.pluginPath)));\n\n  merge(extraCliOptions);\n\n  return settings;\n}\n\nmodule.exports = function (program) {\n  var command = program.command('serve');\n\n  command.description('Run the kibana server').collectUnknownOptions().option('-e, --elasticsearch <uri>', 'Elasticsearch instance').option('-c, --config <path>', 'Path to the config file, can be changed with the CONFIG_PATH environment variable as well. ' + 'Use mulitple --config args to include multiple config files.', configPathCollector, [(0, _serverPath.getConfig)()]).option('-p, --port <port>', 'The port to bind to', parseInt).option('-q, --quiet', 'Prevent all logging except errors').option('-Q, --silent', 'Prevent all logging').option('--verbose', 'Turns on verbose logging').option('-H, --host <host>', 'The host to bind to').option('-l, --log-file <path>', 'The file to log to').option('--plugin-dir <path>', 'A path to scan for plugins, this can be specified multiple ' + 'times to specify multiple directories', pluginDirCollector, [(0, _utils.fromRoot)('installedPlugins'), (0, _utils.fromRoot)('src/plugins')]).option('--plugin-path <path>', 'A path to a plugin which should be included by the server, ' + 'this can be specified multiple times to specify multiple paths', pluginPathCollector, []).option('--plugins <path>', 'an alias for --plugin-dir', pluginDirCollector);\n\n  if (canCluster) {\n    command.option('--dev', 'Run the server with development mode defaults').option('--no-ssl', 'Don\\'t run the dev server using HTTPS').option('--no-base-path', 'Don\\'t put a proxy in front of the dev server, which adds a random basePath').option('--no-watch', 'Prevents automatic restarts of the server in --dev mode');\n  }\n\n  command.action(_asyncToGenerator(function* (opts) {\n    var _this = this;\n\n    if (opts.dev) {\n      try {\n        var kbnDevConfig = (0, _utils.fromRoot)('config/kibana.dev.yml');\n        if ((0, _fs.statSync)(kbnDevConfig).isFile()) {\n          opts.config.push(kbnDevConfig);\n        }\n      } catch (err) {\n        // ignore, kibana.dev.yml does not exist\n      }\n    }\n\n    var getCurrentSettings = function getCurrentSettings() {\n      return readServerSettings(opts, _this.getUnknownOptions());\n    };\n    var settings = getCurrentSettings();\n\n    if (canCluster && opts.dev && !_cluster.isWorker) {\n      // stop processing the action and handoff to cluster manager\n      var ClusterManager = require('../cluster/cluster_manager');\n      new ClusterManager(opts, settings);\n      return;\n    }\n\n    var kbnServer = {};\n    var KbnServer = require('../../server/kbn_server');\n    try {\n      kbnServer = new KbnServer(settings);\n      yield kbnServer.ready();\n    } catch (err) {\n      var _kbnServer = kbnServer;\n      var server = _kbnServer.server;\n\n      if (err.code === 'EADDRINUSE') {\n        logFatal('Port ' + err.port + ' is already in use. Another instance of Kibana may be running!', server);\n      } else {\n        logFatal(err, server);\n      }\n\n      kbnServer.close();\n      process.exit(1); // eslint-disable-line no-process-exit\n    }\n\n    process.on('SIGHUP', function reloadConfig() {\n      var settings = getCurrentSettings();\n      kbnServer.server.log(['info', 'config'], 'Reloading logging configuration due to SIGHUP.');\n      kbnServer.applyLoggingConfiguration(settings);\n      kbnServer.server.log(['info', 'config'], 'Reloaded logging configuration due to SIGHUP.');\n    });\n\n    return kbnServer;\n  }));\n};\n\nfunction logFatal(message, server) {\n  if (server) {\n    server.log(['fatal'], message);\n  }\n  console.error('FATAL', message);\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL2NsaS9zZXJ2ZS9zZXJ2ZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7c0JBQWMsUUFBUTs7OztrQkFDRyxJQUFJOzt1QkFDSixTQUFTOztvQkFDVixNQUFNOztxQkFDTCxhQUFhOzswQkFDWixtQkFBbUI7O2dDQUNsQixvQkFBb0I7Ozs7QUFFL0MsSUFBSSxVQUFVLFlBQUEsQ0FBQztBQUNmLElBQUk7QUFDRixTQUFPLENBQUMsT0FBTyxDQUFDLDRCQUE0QixDQUFDLENBQUM7QUFDOUMsWUFBVSxHQUFHLElBQUksQ0FBQztDQUNuQixDQUFDLE9BQU8sQ0FBQyxFQUFFO0FBQ1YsWUFBVSxHQUFHLEtBQUssQ0FBQztDQUNwQjs7QUFFRCxJQUFNLGFBQWEsR0FBRyxTQUFoQixhQUFhLEdBQWU7QUFDaEMsTUFBTSxLQUFLLEdBQUcsRUFBRSxDQUFDO0FBQ2pCLFNBQU8sVUFBVSxJQUFJLEVBQUU7QUFDckIsU0FBSyxDQUFDLElBQUksQ0FBQyxtQkFBUSxPQUFPLENBQUMsR0FBRyxFQUFFLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQztBQUN6QyxXQUFPLEtBQUssQ0FBQztHQUNkLENBQUM7Q0FDSCxDQUFDOztBQUVGLElBQU0sbUJBQW1CLEdBQUcsYUFBYSxFQUFFLENBQUM7QUFDNUMsSUFBTSxrQkFBa0IsR0FBRyxhQUFhLEVBQUUsQ0FBQztBQUMzQyxJQUFNLG1CQUFtQixHQUFHLGFBQWEsRUFBRSxDQUFDOztBQUU1QyxTQUFTLGtCQUFrQixDQUFDLElBQUksRUFBRSxlQUFlLEVBQUU7QUFDakQsTUFBTSxRQUFRLEdBQUcsbUNBQWUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQzdDLE1BQU0sR0FBRyxHQUFHLG9CQUFFLE9BQU8sQ0FBQyxvQkFBRSxHQUFHLEVBQUUsUUFBUSxDQUFDLENBQUM7QUFDdkMsTUFBTSxHQUFHLEdBQUcsb0JBQUUsT0FBTyxDQUFDLG9CQUFFLEdBQUcsRUFBRSxRQUFR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QyxNQUFNLEVBQUUsUUFBUSxDQUFDLEVBQUUsK0NBQStDLENBQUMsQ0FBQztLQUMzRixDQUFDLENBQUM7O0FBRUgsV0FBTyxTQUFTLENBQUM7R0FDbEIsRUFBQyxDQUFDO0NBQ0osQ0FBQzs7QUFFRixTQUFTLFFBQVEsQ0FBQyxPQUFPLEVBQUUsTUFBTSxFQUFFO0FBQ2pDLE1BQUksTUFBTSxFQUFFO0FBQ1YsVUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0dBQ2hDO0FBQ0QsU0FBTyxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUM7Q0FDakMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvY2xpL3NlcnZlL3NlcnZlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IHN0YXRTeW5jIH0gZnJvbSAnZnMnO1xuaW1wb3J0IHsgaXNXb3JrZXIgfSBmcm9tICdjbHVzdGVyJztcbmltcG9ydCB7IHJlc29sdmUgfSBmcm9tICdwYXRoJztcbmltcG9ydCB7IGZyb21Sb290IH0gZnJvbSAnLi4vLi4vdXRpbHMnO1xuaW1wb3J0IHsgZ2V0Q29uZmlnIH0gZnJvbSAnLi4vLi4vc2VydmVyL3BhdGgnO1xuaW1wb3J0IHJlYWRZYW1sQ29uZmlnIGZyb20gJy4vcmVhZF95YW1sX2NvbmZpZyc7XG5cbmxldCBjYW5DbHVzdGVyO1xudHJ5IHtcbiAgcmVxdWlyZS5yZXNvbHZlKCcuLi9jbHVzdGVyL2NsdXN0ZXJfbWFuYWdlcicpO1xuICBjYW5DbHVzdGVyID0gdHJ1ZTtcbn0gY2F0Y2ggKGUpIHtcbiAgY2FuQ2x1c3RlciA9IGZhbHNlO1xufVxuXG5jb25zdCBwYXRoQ29sbGVjdG9yID0gZnVuY3Rpb24gKCkge1xuICBjb25zdCBwYXRocyA9IFtdO1xuICByZXR1cm4gZnVuY3Rpb24gKHBhdGgpIHtcbiAgICBwYXRocy5wdXNoKHJlc29sdmUocHJvY2Vzcy5jd2QoKSwgcGF0aCkpO1xuICAgIHJldHVybiBwYXRocztcbiAgfTtcbn07XG5cbmNvbnN0IGNvbmZpZ1BhdGhDb2xsZWN0b3IgPSBwYXRoQ29sbGVjdG9yKCk7XG5jb25zdCBwbHVnaW5EaXJDb2xsZWN0b3IgPSBwYXRoQ29sbGVjdG9yKCk7XG5jb25zdCBwbHVnaW5QYXRoQ29sbGVjdG9yID0gcGF0aENvbGxlY3RvcigpO1xuXG5mdW5jdGlvbiByZWFkU2VydmVyU2V0dGluZ3Mob3B0cywgZXh0cmFDbGlPcHRpb25zKSB7XG4gIGNvbnN0IHNldHRpbmdzID0gcmVhZFlhbWxDb25maWcob3B0cy5jb25maWcpO1xuICBjb25zdCBzZXQgPSBfLnBhcnRpYWwoXy5zZXQsIHNldHRpbmdzKTtcbiAgY29uc3QgZ2V0ID0gXy5wYXJ0aWFsKF8uZ2V0LCBzZXR0aW5ncyk7XG4gIGNvbnN0IGhhcyA9IF8ucGFydGlhbChfLmhhcywgc2V0dGluZ3MpO1xuICBjb25zdCBtZXJnZSA9IF8ucGFydGlhbChfLm1lcmdlLCBzZXR0aW5ncyk7XG5cbiAgaWYgKG9wdHMuZGV2KSB7XG4gICAgc2V0KCdlbnYnLCAnZGV2ZWxvcG1lbnQnKTtcbiAgICBzZXQoJ29wdGltaXplLmxhenknLCB0cnVlKTtcbiAgICBpZiAob3B0cy5zc2wgJiYgIWhhcygnc2VydmVyLnNzbC5jZXJ0JykgJiYgIWhhcygnc2VydmVyLnNzbC5rZXknKSkge1xuICAgICAgc2V0KCdzZXJ2ZXIuaG9zdCcsICdsb2NhbGhvc3QnKTtcbiAgICAgIHNldCgnc2VydmVyLnNzbC5jZXJ0JywgZnJvbVJvb3QoJ3Rlc3QvZGV2X2NlcnRzL3NlcnZlci5jcnQnKSk7XG4gICAgICBzZXQoJ3NlcnZlci5zc2wua2V5JywgZnJvbVJvb3QoJ3Rlc3QvZGV2X2NlcnRzL3NlcnZlci5rZXknKSk7XG4gICAgfVxuICB9XG5cbiAgaWYgKG9wdHMuZWxhc3RpY3NlYXJjaCkgc2V0KCdlbGFzdGljc2VhcmNoLnVybCcsIG9wdHMuZWxhc3RpY3NlYXJjaCk7XG4gIGlmIChvcHRzLnBvcnQpIHNldCgnc2VydmVyLnBvcnQnLCBvcHRzLnBvcnQpO1xuICBpZiAob3B0cy5ob3N0KSBzZXQoJ3NlcnZlci5ob3N0Jywgb3B0cy5ob3N0KTtcbiAgaWYgKG9wdHMucXVpZXQpIHNldCgnbG9nZ2luZy5xdWlldCcsIHRydWUpO1xuICBpZiAob3B0cy5zaWxlbnQpIHNldCgnbG9nZ2luZy5zaWxlbnQnLCB0cnVlKTtcbiAgaWYgKG9wdHMudmVyYm9zZSkgc2V0KCdsb2dnaW5nLnZlcmJvc2UnLCB0cnVlKTtcbiAgaWYgKG9wdHMubG9nRmlsZSkgc2V0KCdsb2dnaW5nLmRlc3QnLCBvcHRzLmxvZ0ZpbGUpO1xuXG4gIHNldCgncGx1Z2lucy5zY2FuRGlycycsIF8uY29tcGFjdChbXS5jb25jYXQoXG4gICAgZ2V0KCdwbHVnaW5zLnNjYW5EaXJzJyksXG4gICAgb3B0cy5wbHVnaW5EaXJcbiAgKSkpO1xuXG4gIHNldCgncGx1Z2lucy5wYXRocycsIF8uY29tcGFjdChbXS5jb25jYXQoXG4gICAgZ2V0KCdwbHVnaW5zLnBhdGhzJyksXG4gICAgb3B0cy5wbHVnaW5QYXRoXG4gICkpKTtcblxuICBtZXJnZShleHRyYUNsaU9wdGlvbnMpO1xuXG4gIHJldHVybiBzZXR0aW5ncztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAocHJvZ3JhbSkge1xuICBjb25zdCBjb21tYW5kID0gcHJvZ3JhbS5jb21tYW5kKCdzZXJ2ZScpO1xuXG4gIGNvbW1hbmRcbiAgLmRlc2NyaXB0aW9uKCdSdW4gdGhlIGtpYmFuYSBzZXJ2ZXInKVxuICAuY29sbGVjdFVua25vd25PcHRpb25zKClcbiAgLm9wdGlvbignLWUsIC0tZWxhc3RpY3NlYXJjaCA8dXJpPicsICdFbGFzdGljc2VhcmNoIGluc3RhbmNlJylcbiAgLm9wdGlvbihcbiAgICAnLWMsIC0tY29uZmlnIDxwYXRoPicsXG4gICAgJ1BhdGggdG8gdGhlIGNvbmZpZyBmaWxlLCBjYW4gYmUgY2hhbmdlZCB3aXRoIHRoZSBDT05GSUdfUEFUSCBlbnZpcm9ubWVudCB2YXJpYWJsZSBhcyB3ZWxsLiAnICtcbiAgICAnVXNlIG11bGl0cGxlIC0tY29uZmlnIGFyZ3MgdG8gaW5jbHVkZSBtdWx0aXBsZSBjb25maWcgZmlsZXMuJyxcbiAgICBjb25maWdQYXRoQ29sbGVjdG9yLFxuICAgIFsgZ2V0Q29uZmlnKCkgXVxuICApXG4gIC5vcHRpb24oJy1wLCAtLXBvcnQgPHBvcnQ+JywgJ1RoZSBwb3J0IHRvIGJpbmQgdG8nLCBwYXJzZUludClcbiAgLm9wdGlvbignLXEsIC0tcXVpZXQnLCAnUHJldmVudCBhbGwgbG9nZ2luZyBleGNlcHQgZXJyb3JzJylcbiAgLm9wdGlvbignLVEsIC0tc2lsZW50JywgJ1ByZXZlbnQgYWxsIGxvZ2dpbmcnKVxuICAub3B0aW9uKCctLXZlcmJvc2UnLCAnVHVybnMgb24gdmVyYm9zZSBsb2dnaW5nJylcbiAgLm9wdGlvbignLUgsIC0taG9zdCA8aG9zdD4nLCAnVGhlIGhvc3QgdG8gYmluZCB0bycpXG4gIC5vcHRpb24oJy1sLCAtLWxvZy1maWxlIDxwYXRoPicsICdUaGUgZmlsZSB0byBsb2cgdG8nKVxuICAub3B0aW9uKFxuICAgICctLXBsdWdpbi1kaXIgPHBhdGg+JyxcbiAgICAnQSBwYXRoIHRvIHNjYW4gZm9yIHBsdWdpbnMsIHRoaXMgY2FuIGJlIHNwZWNpZmllZCBtdWx0aXBsZSAnICtcbiAgICAndGltZXMgdG8gc3BlY2lmeSBtdWx0aXBsZSBkaXJlY3RvcmllcycsXG4gICAgcGx1Z2luRGlyQ29sbGVjdG9yLFxuICAgIFtcbiAgICAgIGZyb21Sb290KCdpbnN0YWxsZWRQbHVnaW5zJyksXG4gICAgICBmcm9tUm9vdCgnc3JjL3BsdWdpbnMnKVxuICAgIF1cbiAgKVxuICAub3B0aW9uKFxuICAgICctLXBsdWdpbi1wYXRoIDxwYXRoPicsXG4gICAgJ0EgcGF0aCB0byBhIHBsdWdpbiB3aGljaCBzaG91bGQgYmUgaW5jbHVkZWQgYnkgdGhlIHNlcnZlciwgJyArXG4gICAgJ3RoaXMgY2FuIGJlIHNwZWNpZmllZCBtdWx0aXBsZSB0aW1lcyB0byBzcGVjaWZ5IG11bHRpcGxlIHBhdGhzJyxcbiAgICBwbHVnaW5QYXRoQ29sbGVjdG9yLFxuICAgIFtdXG4gIClcbiAgLm9wdGlvbignLS1wbHVnaW5zIDxwYXRoPicsICdhbiBhbGlhcyBmb3IgLS1wbHVnaW4tZGlyJywgcGx1Z2luRGlyQ29sbGVjdG9yKTtcblxuICBpZiAoY2FuQ2x1c3Rlcikge1xuICAgIGNvbW1hbmRcbiAgICAub3B0aW9uKCctLWRldicsICdSdW4gdGhlIHNlcnZlciB3aXRoIGRldmVsb3BtZW50IG1vZGUgZGVmYXVsdHMnKVxuICAgIC5vcHRpb24oJy0tbm8tc3NsJywgJ0RvblxcJ3QgcnVuIHRoZSBkZXYgc2VydmVyIHVzaW5nIEhUVFBTJylcbiAgICAub3B0aW9uKCctLW5vLWJhc2UtcGF0aCcsICdEb25cXCd0IHB1dCBhIHByb3h5IGluIGZyb250IG9mIHRoZSBkZXYgc2VydmVyLCB3aGljaCBhZGRzIGEgcmFuZG9tIGJhc2VQYXRoJylcbiAgICAub3B0aW9uKCctLW5vLXdhdGNoJywgJ1ByZXZlbnRzIGF1dG9tYXRpYyByZXN0YXJ0cyBvZiB0aGUgc2VydmVyIGluIC0tZGV2IG1vZGUnKTtcbiAgfVxuXG4gIGNvbW1hbmRcbiAgLmFjdGlvbihhc3luYyBmdW5jdGlvbiAob3B0cykge1xuICAgIGlmIChvcHRzLmRldikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3Qga2JuRGV2Q29uZmlnID0gZnJvbVJvb3QoJ2NvbmZpZy9raWJhbmEuZGV2LnltbCcpO1xuICAgICAgICBpZiAoc3RhdFN5bmMoa2JuRGV2Q29uZmlnKS5pc0ZpbGUoKSkge1xuICAgICAgICAgIG9wdHMuY29uZmlnLnB1c2goa2JuRGV2Q29uZmlnKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIC8vIGlnbm9yZSwga2liYW5hLmRldi55bWwgZG9lcyBub3QgZXhpc3RcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBnZXRDdXJyZW50U2V0dGluZ3MgPSAoKSA9PiByZWFkU2VydmVyU2V0dGluZ3Mob3B0cywgdGhpcy5nZXRVbmtub3duT3B0aW9ucygpKTtcbiAgICBjb25zdCBzZXR0aW5ncyA9IGdldEN1cnJlbnRTZXR0aW5ncygpO1xuXG4gICAgaWYgKGNhbkNsdXN0ZXIgJiYgb3B0cy5kZXYgJiYgIWlzV29ya2VyKSB7XG4gICAgICAvLyBzdG9wIHByb2Nlc3NpbmcgdGhlIGFjdGlvbiBhbmQgaGFuZG9mZiB0byBjbHVzdGVyIG1hbmFnZXJcbiAgICAgIGNvbnN0IENsdXN0ZXJNYW5hZ2VyID0gcmVxdWlyZSgnLi4vY2x1c3Rlci9jbHVzdGVyX21hbmFnZXInKTtcbiAgICAgIG5ldyBDbHVzdGVyTWFuYWdlcihvcHRzLCBzZXR0aW5ncyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IGtiblNlcnZlciA9IHt9O1xuICAgIGNvbnN0IEtiblNlcnZlciA9IHJlcXVpcmUoJy4uLy4uL3NlcnZlci9rYm5fc2VydmVyJyk7XG4gICAgdHJ5IHtcbiAgICAgIGtiblNlcnZlciA9IG5ldyBLYm5TZXJ2ZXIoc2V0dGluZ3MpO1xuICAgICAgYXdhaXQga2JuU2VydmVyLnJlYWR5KCk7XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnN0IHsgc2VydmVyIH0gPSBrYm5TZXJ2ZXI7XG5cbiAgICAgIGlmIChlcnIuY29kZSA9PT0gJ0VBRERSSU5VU0UnKSB7XG4gICAgICAgIGxvZ0ZhdGFsKGBQb3J0ICR7ZXJyLnBvcnR9IGlzIGFscmVhZHkgaW4gdXNlLiBBbm90aGVyIGluc3RhbmNlIG9mIEtpYmFuYSBtYXkgYmUgcnVubmluZyFgLCBzZXJ2ZXIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbG9nRmF0YWwoZXJyLCBzZXJ2ZXIpO1xuICAgICAgfVxuXG4gICAgICBrYm5TZXJ2ZXIuY2xvc2UoKTtcbiAgICAgIHByb2Nlc3MuZXhpdCgxKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1wcm9jZXNzLWV4aXRcbiAgICB9XG5cbiAgICBwcm9jZXNzLm9uKCdTSUdIVVAnLCBmdW5jdGlvbiByZWxvYWRDb25maWcoKSB7XG4gICAgICBjb25zdCBzZXR0aW5ncyA9IGdldEN1cnJlbnRTZXR0aW5ncygpO1xuICAgICAga2JuU2VydmVyLnNlcnZlci5sb2coWydpbmZvJywgJ2NvbmZpZyddLCAnUmVsb2FkaW5nIGxvZ2dpbmcgY29uZmlndXJhdGlvbiBkdWUgdG8gU0lHSFVQLicpO1xuICAgICAga2JuU2VydmVyLmFwcGx5TG9nZ2luZ0NvbmZpZ3VyYXRpb24oc2V0dGluZ3MpO1xuICAgICAga2JuU2VydmVyLnNlcnZlci5sb2coWydpbmZvJywgJ2NvbmZpZyddLCAnUmVsb2FkZWQgbG9nZ2luZyBjb25maWd1cmF0aW9uIGR1ZSB0byBTSUdIVVAuJyk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4ga2JuU2VydmVyO1xuICB9KTtcbn07XG5cbmZ1bmN0aW9uIGxvZ0ZhdGFsKG1lc3NhZ2UsIHNlcnZlcikge1xuICBpZiAoc2VydmVyKSB7XG4gICAgc2VydmVyLmxvZyhbJ2ZhdGFsJ10sIG1lc3NhZ2UpO1xuICB9XG4gIGNvbnNvbGUuZXJyb3IoJ0ZBVEFMJywgbWVzc2FnZSk7XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/cli/serve/serve.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/src/cli/serve/serve.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport { statSync } from 'fs';\nimport { isWorker } from 'cluster';\nimport { resolve } from 'path';\nimport { fromRoot } from '../../utils';\nimport { getConfig } from '../../server/path';\nimport readYamlConfig from './read_yaml_config';\n\nlet canCluster;\ntry {\n  require.resolve('../cluster/cluster_manager');\n  canCluster = true;\n} catch (e) {\n  canCluster = false;\n}\n\nconst pathCollector = function () {\n  const paths = [];\n  return function (path) {\n    paths.push(resolve(process.cwd(), path));\n    return paths;\n  };\n};\n\nconst configPathCollector = pathCollector();\nconst pluginDirCollector = pathCollector();\nconst pluginPathCollector = pathCollector();\n\nfunction readServerSettings(opts, extraCliOptions) {\n  const settings = readYamlConfig(opts.config);\n  const set = _.partial(_.set, settings);\n  const get = _.partial(_.get, settings);\n  const has = _.partial(_.has, settings);\n  const merge = _.partial(_.merge, settings);\n\n  if (opts.dev) {\n    set('env', 'development');\n    set('optimize.lazy', true);\n    if (opts.ssl && !has('server.ssl.cert') && !has('server.ssl.key')) {\n      set('server.host', 'localhost');\n      set('server.ssl.cert', fromRoot('test/dev_certs/server.crt'));\n      set('server.ssl.key', fromRoot('test/dev_certs/server.key'));\n    }\n  }\n\n  if (opts.elasticsearch) set('elasticsearch.url', opts.elasticsearch);\n  if (opts.port) set('server.port', opts.port);\n  if (opts.host) set('server.host', opts.host);\n  if (opts.quiet) set('logging.quiet', true);\n  if (opts.silent) set('logging.silent', true);\n  if (opts.verbose) set('logging.verbose', true);\n  if (opts.logFile) set('logging.dest', opts.logFile);\n\n  set('plugins.scanDirs', _.compact([].concat(\n    get('plugins.scanDirs'),\n    opts.pluginDir\n  )));\n\n  set('plugins.paths', _.compact([].concat(\n    get('plugins.paths'),\n    opts.pluginPath\n  )));\n\n  merge(extraCliOptions);\n\n  return settings;\n}\n\nmodule.exports = function (program) {\n  const command = program.command('serve');\n\n  command\n  .description('Run the kibana server')\n  .collectUnknownOptions()\n  .option('-e, --elasticsearch <uri>', 'Elasticsearch instance')\n  .option(\n    '-c, --config <path>',\n    'Path to the config file, can be changed with the CONFIG_PATH environment variable as well. ' +\n    'Use mulitple --config args to include multiple config files.',\n    configPathCollector,\n    [ getConfig() ]\n  )\n  .option('-p, --port <port>', 'The port to bind to', parseInt)\n  .option('-q, --quiet', 'Prevent all logging except errors')\n  .option('-Q, --silent', 'Prevent all logging')\n  .option('--verbose', 'Turns on verbose logging')\n  .option('-H, --host <host>', 'The host to bind to')\n  .option('-l, --log-file <path>', 'The file to log to')\n  .option(\n    '--plugin-dir <path>',\n    'A path to scan for plugins, this can be specified multiple ' +\n    'times to specify multiple directories',\n    pluginDirCollector,\n    [\n      fromRoot('installedPlugins'),\n      fromRoot('src/plugins')\n    ]\n  )\n  .option(\n    '--plugin-path <path>',\n    'A path to a plugin which should be included by the server, ' +\n    'this can be specified multiple times to specify multiple paths',\n    pluginPathCollector,\n    []\n  )\n  .option('--plugins <path>', 'an alias for --plugin-dir', pluginDirCollector);\n\n  if (canCluster) {\n    command\n    .option('--dev', 'Run the server with development mode defaults')\n    .option('--no-ssl', 'Don\\'t run the dev server using HTTPS')\n    .option('--no-base-path', 'Don\\'t put a proxy in front of the dev server, which adds a random basePath')\n    .option('--no-watch', 'Prevents automatic restarts of the server in --dev mode');\n  }\n\n  command\n  .action(async function (opts) {\n    if (opts.dev) {\n      try {\n        const kbnDevConfig = fromRoot('config/kibana.dev.yml');\n        if (statSync(kbnDevConfig).isFile()) {\n          opts.config.push(kbnDevConfig);\n        }\n      } catch (err) {\n        // ignore, kibana.dev.yml does not exist\n      }\n    }\n\n    const getCurrentSettings = () => readServerSettings(opts, this.getUnknownOptions());\n    const settings = getCurrentSettings();\n\n    if (canCluster && opts.dev && !isWorker) {\n      // stop processing the action and handoff to cluster manager\n      const ClusterManager = require('../cluster/cluster_manager');\n      new ClusterManager(opts, settings);\n      return;\n    }\n\n    let kbnServer = {};\n    const KbnServer = require('../../server/kbn_server');\n    try {\n      kbnServer = new KbnServer(settings);\n      await kbnServer.ready();\n    }\n    catch (err) {\n      const { server } = kbnServer;\n\n      if (err.code === 'EADDRINUSE') {\n        logFatal(`Port ${err.port} is already in use. Another instance of Kibana may be running!`, server);\n      } else {\n        logFatal(err, server);\n      }\n\n      kbnServer.close();\n      process.exit(1); // eslint-disable-line no-process-exit\n    }\n\n    process.on('SIGHUP', function reloadConfig() {\n      const settings = getCurrentSettings();\n      kbnServer.server.log(['info', 'config'], 'Reloading logging configuration due to SIGHUP.');\n      kbnServer.applyLoggingConfiguration(settings);\n      kbnServer.server.log(['info', 'config'], 'Reloaded logging configuration due to SIGHUP.');\n    });\n\n    return kbnServer;\n  });\n};\n\nfunction logFatal(message, server) {\n  if (server) {\n    server.log(['fatal'], message);\n  }\n  console.error('FATAL', message);\n}\n"
      ]
    },
    "mtime": 1467036622785
  },
  "{\"filename\":\"/home/vio/v3metrics/src/utils/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "Binder",
            "BinderFor",
            "fromRoot",
            "pkg"
          ],
          "specifiers": [
            {
              "kind": "external",
              "local": "Binder",
              "exported": "Binder",
              "source": "./binder"
            },
            {
              "kind": "external",
              "local": "BinderFor",
              "exported": "BinderFor",
              "source": "./binder_for"
            },
            {
              "kind": "external",
              "local": "fromRoot",
              "exported": "fromRoot",
              "source": "./from_root"
            },
            {
              "kind": "external",
              "local": "pkg",
              "exported": "pkg",
              "source": "./package_json"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _binder = require('./binder');\n\nvar _binder2 = _interopRequireDefault(_binder);\n\nexports.Binder = _binder2['default'];\n\nvar _binder_for = require('./binder_for');\n\nvar _binder_for2 = _interopRequireDefault(_binder_for);\n\nexports.BinderFor = _binder_for2['default'];\n\nvar _from_root = require('./from_root');\n\nvar _from_root2 = _interopRequireDefault(_from_root);\n\nexports.fromRoot = _from_root2['default'];\n\nvar _package_json = require('./package_json');\n\nvar _package_json2 = _interopRequireDefault(_package_json);\n\nexports.pkg = _package_json2['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3V0aWxzL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O3NCQUFtQixVQUFVOzs7O1FBQXRCLE1BQU07OzBCQUNTLGNBQWM7Ozs7UUFBN0IsU0FBUzs7eUJBQ0ssYUFBYTs7OztRQUEzQixRQUFROzs0QkFDQyxnQkFBZ0I7Ozs7UUFBekIsR0FBRyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy91dGlscy9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBCaW5kZXIgZnJvbSAnLi9iaW5kZXInO1xuZXhwb3J0IEJpbmRlckZvciBmcm9tICcuL2JpbmRlcl9mb3InO1xuZXhwb3J0IGZyb21Sb290IGZyb20gJy4vZnJvbV9yb290JztcbmV4cG9ydCBwa2cgZnJvbSAnLi9wYWNrYWdlX2pzb24nO1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/utils/index.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;sBAAmB,UAAU;;;;QAAtB,MAAM;;0BACS,cAAc;;;;QAA7B,SAAS;;yBACK,aAAa;;;;QAA3B,QAAQ;;4BACC,gBAAgB;;;;QAAzB,GAAG",
      "file": "/home/vio/v3metrics/src/utils/index.js",
      "sourcesContent": [
        "export Binder from './binder';\nexport BinderFor from './binder_for';\nexport fromRoot from './from_root';\nexport pkg from './package_json';\n"
      ]
    },
    "mtime": 1467036622893
  },
  "{\"filename\":\"/home/vio/v3metrics/src/utils/binder.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "Binder"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "Binder",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check"
      ]
    },
    "ignored": false,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Binder = (function () {\n  function Binder() {\n    _classCallCheck(this, Binder);\n\n    this.disposal = [];\n  }\n\n  _createClass(Binder, [{\n    key: \"on\",\n    value: function on(emitter) {\n      for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      var on = emitter.on || emitter.addListener;\n      var off = emitter.off || emitter.removeListener;\n\n      on.apply(emitter, args);\n      this.disposal.push(function () {\n        return off.apply(emitter, args);\n      });\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      var destroyers = this.disposal;\n      this.disposal = [];\n      destroyers.forEach(function (fn) {\n        return fn();\n      });\n    }\n  }]);\n\n  return Binder;\n})();\n\nexports[\"default\"] = Binder;\nmodule.exports = exports[\"default\"];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3V0aWxzL2JpbmRlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0lBQXFCLE1BQU07QUFDZCxXQURRLE1BQU0sR0FDWDswQkFESyxNQUFNOztBQUV2QixRQUFJLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQztHQUNwQjs7ZUFIa0IsTUFBTTs7V0FLdkIsWUFBQyxPQUFPLEVBQVc7d0NBQU4sSUFBSTtBQUFKLFlBQUk7OztBQUNqQixVQUFNLEVBQUUsR0FBRyxPQUFPLENBQUMsRUFBRSxJQUFJLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDN0MsVUFBTSxHQUFHLEdBQUcsT0FBTyxDQUFDLEdBQUcsSUFBSSxPQUFPLENBQUMsY0FBYyxDQUFDOztBQUVsRCxRQUFFLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsQ0FBQztBQUN4QixVQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQztlQUFNLEdBQUcsQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQztPQUFBLENBQUMsQ0FBQztLQUNwRDs7O1dBRU0sbUJBQUc7QUFDUixVQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDO0FBQ2pDLFVBQUksQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFDO0FBQ25CLGdCQUFVLENBQUMsT0FBTyxDQUFDLFVBQUEsRUFBRTtlQUFJLEVBQUUsRUFBRTtPQUFBLENBQUMsQ0FBQztLQUNoQzs7O1NBakJrQixNQUFNOzs7cUJBQU4sTUFBTSIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy91dGlscy9iaW5kZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBCaW5kZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmRpc3Bvc2FsID0gW107XG4gIH1cblxuICBvbihlbWl0dGVyLCAuLi5hcmdzKSB7XG4gICAgY29uc3Qgb24gPSBlbWl0dGVyLm9uIHx8IGVtaXR0ZXIuYWRkTGlzdGVuZXI7XG4gICAgY29uc3Qgb2ZmID0gZW1pdHRlci5vZmYgfHwgZW1pdHRlci5yZW1vdmVMaXN0ZW5lcjtcblxuICAgIG9uLmFwcGx5KGVtaXR0ZXIsIGFyZ3MpO1xuICAgIHRoaXMuZGlzcG9zYWwucHVzaCgoKSA9PiBvZmYuYXBwbHkoZW1pdHRlciwgYXJncykpO1xuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICBjb25zdCBkZXN0cm95ZXJzID0gdGhpcy5kaXNwb3NhbDtcbiAgICB0aGlzLmRpc3Bvc2FsID0gW107XG4gICAgZGVzdHJveWVycy5mb3JFYWNoKGZuID0+IGZuKCkpO1xuICB9XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/utils/binder.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;IAAqB,MAAM;AACd,WADQ,MAAM,GACX;0BADK,MAAM;;AAEvB,QAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;GACpB;;eAHkB,MAAM;;WAKvB,YAAC,OAAO,EAAW;wCAAN,IAAI;AAAJ,YAAI;;;AACjB,UAAM,EAAE,GAAG,OAAO,CAAC,EAAE,IAAI,OAAO,CAAC,WAAW,CAAC;AAC7C,UAAM,GAAG,GAAG,OAAO,CAAC,GAAG,IAAI,OAAO,CAAC,cAAc,CAAC;;AAElD,QAAE,CAAC,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;AACxB,UAAI,CAAC,QAAQ,CAAC,IAAI,CAAC;eAAM,GAAG,CAAC,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC;OAAA,CAAC,CAAC;KACpD;;;WAEM,mBAAG;AACR,UAAM,UAAU,GAAG,IAAI,CAAC,QAAQ,CAAC;AACjC,UAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;AACnB,gBAAU,CAAC,OAAO,CAAC,UAAA,EAAE;eAAI,EAAE,EAAE;OAAA,CAAC,CAAC;KAChC;;;SAjBkB,MAAM;;;qBAAN,MAAM",
      "file": "/home/vio/v3metrics/src/utils/binder.js",
      "sourcesContent": [
        "export default class Binder {\n  constructor() {\n    this.disposal = [];\n  }\n\n  on(emitter, ...args) {\n    const on = emitter.on || emitter.addListener;\n    const off = emitter.off || emitter.removeListener;\n\n    on.apply(emitter, args);\n    this.disposal.push(() => off.apply(emitter, args));\n  }\n\n  destroy() {\n    const destroyers = this.disposal;\n    this.disposal = [];\n    destroyers.forEach(fn => fn());\n  }\n}\n"
      ]
    },
    "mtime": 1467036622893
  },
  "{\"filename\":\"/home/vio/v3metrics/src/utils/binder_for.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./",
            "imported": [
              "Binder"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Binder",
                "local": "Binder"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "BinderFor"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "BinderFor",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "get",
        "inherits",
        "create-class",
        "class-call-check"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _ = require('./');\n\nvar BinderFor = (function (_Binder) {\n  _inherits(BinderFor, _Binder);\n\n  function BinderFor(emitter) {\n    _classCallCheck(this, BinderFor);\n\n    _get(Object.getPrototypeOf(BinderFor.prototype), 'constructor', this).call(this);\n    this.emitter = emitter;\n  }\n\n  _createClass(BinderFor, [{\n    key: 'on',\n    value: function on() {\n      var _get2;\n\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      (_get2 = _get(Object.getPrototypeOf(BinderFor.prototype), 'on', this)).call.apply(_get2, [this, this.emitter].concat(args));\n    }\n  }]);\n\n  return BinderFor;\n})(_.Binder);\n\nexports['default'] = BinderFor;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3V0aWxzL2JpbmRlcl9mb3IuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Z0JBQXVCLElBQUk7O0lBRU4sU0FBUztZQUFULFNBQVM7O0FBQ2pCLFdBRFEsU0FBUyxDQUNoQixPQUFPLEVBQUU7MEJBREYsU0FBUzs7QUFFMUIsK0JBRmlCLFNBQVMsNkNBRWxCO0FBQ1IsUUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUM7R0FDeEI7O2VBSmtCLFNBQVM7O1dBTTFCLGNBQVU7Ozt3Q0FBTixJQUFJO0FBQUosWUFBSTs7O0FBQ1IsMENBUGlCLFNBQVMsbURBT2pCLElBQUksQ0FBQyxPQUFPLFNBQUssSUFBSSxHQUFFO0tBQ2pDOzs7U0FSa0IsU0FBUzs7O3FCQUFULFNBQVMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvdXRpbHMvYmluZGVyX2Zvci5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJpbmRlciB9IGZyb20gJy4vJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmluZGVyRm9yIGV4dGVuZHMgQmluZGVyIHtcbiAgY29uc3RydWN0b3IoZW1pdHRlcikge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5lbWl0dGVyID0gZW1pdHRlcjtcbiAgfVxuXG4gIG9uKC4uLmFyZ3MpIHtcbiAgICBzdXBlci5vbih0aGlzLmVtaXR0ZXIsIC4uLmFyZ3MpO1xuICB9XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/utils/binder_for.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;;;;;gBAAuB,IAAI;;IAEN,SAAS;YAAT,SAAS;;AACjB,WADQ,SAAS,CAChB,OAAO,EAAE;0BADF,SAAS;;AAE1B,+BAFiB,SAAS,6CAElB;AACR,QAAI,CAAC,OAAO,GAAG,OAAO,CAAC;GACxB;;eAJkB,SAAS;;WAM1B,cAAU;;;wCAAN,IAAI;AAAJ,YAAI;;;AACR,0CAPiB,SAAS,mDAOjB,IAAI,CAAC,OAAO,SAAK,IAAI,GAAE;KACjC;;;SARkB,SAAS;;;qBAAT,SAAS",
      "file": "/home/vio/v3metrics/src/utils/binder_for.js",
      "sourcesContent": [
        "import { Binder } from './';\n\nexport default class BinderFor extends Binder {\n  constructor(emitter) {\n    super();\n    this.emitter = emitter;\n  }\n\n  on(...args) {\n    super.on(this.emitter, ...args);\n  }\n}\n"
      ]
    },
    "mtime": 1467036622893
  },
  "{\"filename\":\"/home/vio/v3metrics/src/utils/from_root.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "./package_json",
            "imported": [
              "__dirname"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "__dirname",
                "local": "root"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "join",
              "dirname",
              "normalize"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "join",
                "local": "join"
              },
              {
                "kind": "named",
                "imported": "dirname",
                "local": "dirname"
              },
              {
                "kind": "named",
                "imported": "normalize",
                "local": "normalize"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _package_json = require('./package_json');\n\nvar _path = require('path');\n\nmodule.exports = _lodash2['default'].flow(_lodash2['default'].partial(_path.join, _package_json.__dirname), _path.normalize);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3V0aWxzL2Zyb21fcm9vdC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O3NCQUFjLFFBQVE7Ozs7NEJBQ1ksZ0JBQWdCOztvQkFDVCxNQUFNOztBQUUvQyxNQUFNLENBQUMsT0FBTyxHQUFHLG9CQUFFLElBQUksQ0FBQyxvQkFBRSxPQUFPLHFDQUFZLGtCQUFZLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvdXRpbHMvZnJvbV9yb290LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IF9fZGlybmFtZSBhcyByb290IH0gZnJvbSAnLi9wYWNrYWdlX2pzb24nO1xuaW1wb3J0IHsgam9pbiwgZGlybmFtZSwgbm9ybWFsaXplIH0gZnJvbSAncGF0aCc7XG5cbm1vZHVsZS5leHBvcnRzID0gXy5mbG93KF8ucGFydGlhbChqb2luLCByb290KSwgbm9ybWFsaXplKTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/utils/from_root.js"
      ],
      "names": [],
      "mappings": ";;;;sBAAc,QAAQ;;;;4BACY,gBAAgB;;oBACT,MAAM;;AAE/C,MAAM,CAAC,OAAO,GAAG,oBAAE,IAAI,CAAC,oBAAE,OAAO,qCAAY,kBAAY,CAAC",
      "file": "/home/vio/v3metrics/src/utils/from_root.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport { __dirname as root } from './package_json';\nimport { join, dirname, normalize } from 'path';\n\nmodule.exports = _.flow(_.partial(join, root), normalize);\n"
      ]
    },
    "mtime": 1467036622893
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/path/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "fs",
            "imported": [
              "accessSync",
              "R_OK"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "accessSync",
                "local": "accessSync"
              },
              {
                "kind": "named",
                "imported": "R_OK",
                "local": "R_OK"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "find"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "find",
                "local": "find"
              }
            ]
          },
          {
            "source": "../../utils",
            "imported": [
              "fromRoot"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "fromRoot",
                "local": "fromRoot"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _fs = require('fs');\n\nvar _lodash = require('lodash');\n\nvar _utils = require('../../utils');\n\nvar CONFIG_PATHS = [process.env.CONFIG_PATH, (0, _utils.fromRoot)('config/kibana.yml'), '/etc/kibana/kibana.yml'].filter(Boolean);\n\nvar DATA_PATHS = [process.env.DATA_PATH, (0, _utils.fromRoot)('installedPlugins/.data'), '/var/lib/kibana'].filter(Boolean);\n\nfunction findFile(paths) {\n  var availablePath = (0, _lodash.find)(paths, function (configPath) {\n    try {\n      (0, _fs.accessSync)(configPath, _fs.R_OK);\n      return true;\n    } catch (e) {\n      //Check the next path\n    }\n  });\n  return availablePath || paths[0];\n}\n\nexports['default'] = {\n  getConfig: function getConfig() {\n    return findFile(CONFIG_PATHS);\n  },\n  getData: function getData() {\n    return findFile(DATA_PATHS);\n  }\n};\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9wYXRoL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztrQkFBZ0MsSUFBSTs7c0JBQ2YsUUFBUTs7cUJBQ0osYUFBYTs7QUFFdEMsSUFBTSxZQUFZLEdBQUcsQ0FDbkIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxXQUFXLEVBQ3ZCLHFCQUFTLG1CQUFtQixDQUFDLEVBQzdCLHdCQUF3QixDQUN6QixDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQzs7QUFFbEIsSUFBTSxVQUFVLEdBQUcsQ0FDakIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQ3JCLHFCQUFTLHdCQUF3QixDQUFDLEVBQ2xDLGlCQUFpQixDQUNsQixDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQzs7QUFFbEIsU0FBUyxRQUFRLENBQUMsS0FBSyxFQUFFO0FBQ3ZCLE1BQU0sYUFBYSxHQUFHLGtCQUFLLEtBQUssRUFBRSxVQUFBLFVBQVUsRUFBSTtBQUM5QyxRQUFJO0FBQ0YsMEJBQVcsVUFBVSxXQUFPLENBQUM7QUFDN0IsYUFBTyxJQUFJLENBQUM7S0FDYixDQUFDLE9BQU8sQ0FBQyxFQUFFOztLQUVYO0dBQ0YsQ0FBQyxDQUFDO0FBQ0gsU0FBTyxhQUFhLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO0NBQ2xDOztxQkFFYztBQUNiLFdBQVMsRUFBRTtXQUFNLFFBQVEsQ0FBQyxZQUFZLENBQUM7R0FBQTtBQUN2QyxTQUFPLEVBQUU7V0FBTSxRQUFRLENBQUMsVUFBVSxDQUFDO0dBQUE7Q0FDcEMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvc2VydmVyL3BhdGgvaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhY2Nlc3NTeW5jLCBSX09LfSBmcm9tICdmcyc7XG5pbXBvcnQgeyBmaW5kIH0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IGZyb21Sb290IH0gZnJvbSAnLi4vLi4vdXRpbHMnO1xuXG5jb25zdCBDT05GSUdfUEFUSFMgPSBbXG4gIHByb2Nlc3MuZW52LkNPTkZJR19QQVRILFxuICBmcm9tUm9vdCgnY29uZmlnL2tpYmFuYS55bWwnKSxcbiAgJy9ldGMva2liYW5hL2tpYmFuYS55bWwnXG5dLmZpbHRlcihCb29sZWFuKTtcblxuY29uc3QgREFUQV9QQVRIUyA9IFtcbiAgcHJvY2Vzcy5lbnYuREFUQV9QQVRILFxuICBmcm9tUm9vdCgnaW5zdGFsbGVkUGx1Z2lucy8uZGF0YScpLFxuICAnL3Zhci9saWIva2liYW5hJ1xuXS5maWx0ZXIoQm9vbGVhbik7XG5cbmZ1bmN0aW9uIGZpbmRGaWxlKHBhdGhzKSB7XG4gIGNvbnN0IGF2YWlsYWJsZVBhdGggPSBmaW5kKHBhdGhzLCBjb25maWdQYXRoID0+IHtcbiAgICB0cnkge1xuICAgICAgYWNjZXNzU3luYyhjb25maWdQYXRoLCBSX09LKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vQ2hlY2sgdGhlIG5leHQgcGF0aFxuICAgIH1cbiAgfSk7XG4gIHJldHVybiBhdmFpbGFibGVQYXRoIHx8IHBhdGhzWzBdO1xufVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIGdldENvbmZpZzogKCkgPT4gZmluZEZpbGUoQ09ORklHX1BBVEhTKSxcbiAgZ2V0RGF0YTogKCkgPT4gZmluZEZpbGUoREFUQV9QQVRIUylcbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/path/index.js"
      ],
      "names": [],
      "mappings": ";;;;;;kBAAgC,IAAI;;sBACf,QAAQ;;qBACJ,aAAa;;AAEtC,IAAM,YAAY,GAAG,CACnB,OAAO,CAAC,GAAG,CAAC,WAAW,EACvB,qBAAS,mBAAmB,CAAC,EAC7B,wBAAwB,CACzB,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;;AAElB,IAAM,UAAU,GAAG,CACjB,OAAO,CAAC,GAAG,CAAC,SAAS,EACrB,qBAAS,wBAAwB,CAAC,EAClC,iBAAiB,CAClB,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;;AAElB,SAAS,QAAQ,CAAC,KAAK,EAAE;AACvB,MAAM,aAAa,GAAG,kBAAK,KAAK,EAAE,UAAA,UAAU,EAAI;AAC9C,QAAI;AACF,0BAAW,UAAU,WAAO,CAAC;AAC7B,aAAO,IAAI,CAAC;KACb,CAAC,OAAO,CAAC,EAAE;;KAEX;GACF,CAAC,CAAC;AACH,SAAO,aAAa,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC;CAClC;;qBAEc;AACb,WAAS,EAAE;WAAM,QAAQ,CAAC,YAAY,CAAC;GAAA;AACvC,SAAO,EAAE;WAAM,QAAQ,CAAC,UAAU,CAAC;GAAA;CACpC",
      "file": "/home/vio/v3metrics/src/server/path/index.js",
      "sourcesContent": [
        "import { accessSync, R_OK} from 'fs';\nimport { find } from 'lodash';\nimport { fromRoot } from '../../utils';\n\nconst CONFIG_PATHS = [\n  process.env.CONFIG_PATH,\n  fromRoot('config/kibana.yml'),\n  '/etc/kibana/kibana.yml'\n].filter(Boolean);\n\nconst DATA_PATHS = [\n  process.env.DATA_PATH,\n  fromRoot('installedPlugins/.data'),\n  '/var/lib/kibana'\n].filter(Boolean);\n\nfunction findFile(paths) {\n  const availablePath = find(paths, configPath => {\n    try {\n      accessSync(configPath, R_OK);\n      return true;\n    } catch (e) {\n      //Check the next path\n    }\n  });\n  return availablePath || paths[0];\n}\n\nexport default {\n  getConfig: () => findFile(CONFIG_PATHS),\n  getData: () => findFile(DATA_PATHS)\n};\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/cli/serve/read_yaml_config.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "chain",
              "isArray",
              "isPlainObject",
              "forOwn",
              "memoize",
              "set",
              "transform"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "chain",
                "local": "chain"
              },
              {
                "kind": "named",
                "imported": "isArray",
                "local": "isArray"
              },
              {
                "kind": "named",
                "imported": "isPlainObject",
                "local": "isPlainObject"
              },
              {
                "kind": "named",
                "imported": "forOwn",
                "local": "forOwn"
              },
              {
                "kind": "named",
                "imported": "memoize",
                "local": "memoize"
              },
              {
                "kind": "named",
                "imported": "set",
                "local": "set"
              },
              {
                "kind": "named",
                "imported": "transform",
                "local": "transform"
              }
            ]
          },
          {
            "source": "fs",
            "imported": [
              "readFileSync"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "readFileSync",
                "local": "read"
              }
            ]
          },
          {
            "source": "js-yaml",
            "imported": [
              "safeLoad"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "safeLoad",
                "local": "safeLoad"
              }
            ]
          },
          {
            "source": "ansicolors",
            "imported": [
              "red"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "red",
                "local": "red"
              }
            ]
          },
          {
            "source": "../../utils",
            "imported": [
              "fromRoot"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "fromRoot",
                "local": "fromRoot"
              }
            ]
          },
          {
            "source": "./legacy_config",
            "imported": [
              "rewriteLegacyConfig"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "rewriteLegacyConfig",
                "local": "rewriteLegacyConfig"
              }
            ]
          },
          {
            "source": "./deprecated_config",
            "imported": [
              "checkForDeprecatedConfig"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "checkForDeprecatedConfig",
                "local": "checkForDeprecatedConfig"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "merge",
            "sources"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "merge",
              "exported": "merge"
            },
            {
              "kind": "local",
              "local": "sources",
              "exported": "sources"
            }
          ]
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports.merge = merge;\n\nvar _lodash = require('lodash');\n\nvar _fs = require('fs');\n\nvar _jsYaml = require('js-yaml');\n\nvar _ansicolors = require('ansicolors');\n\nvar _utils = require('../../utils');\n\nvar _legacy_config = require('./legacy_config');\n\nvar _deprecated_config = require('./deprecated_config');\n\nvar log = (0, _lodash.memoize)(function (message) {\n  console.log((0, _ansicolors.red)('WARNING:'), message);\n});\n\nfunction merge(sources) {\n  return (0, _lodash.transform)(sources, function (merged, source) {\n    (0, _lodash.forOwn)(source, function apply(val, key) {\n      if ((0, _lodash.isPlainObject)(val)) {\n        (0, _lodash.forOwn)(val, function (subVal, subKey) {\n          apply(subVal, key + '.' + subKey);\n        });\n        return;\n      }\n\n      if ((0, _lodash.isArray)(val)) {\n        (0, _lodash.set)(merged, key, []);\n        val.forEach(function (subVal, i) {\n          return apply(subVal, key + '.' + i);\n        });\n        return;\n      }\n\n      (0, _lodash.set)(merged, key, val);\n    });\n  }, {});\n}\n\nexports['default'] = function (paths) {\n  var files = [].concat(paths || []);\n  var yamls = files.map(function (path) {\n    return (0, _jsYaml.safeLoad)((0, _fs.readFileSync)(path, 'utf8'));\n  });\n  var config = merge(yamls.map(function (file) {\n    return (0, _legacy_config.rewriteLegacyConfig)(file, log);\n  }));\n  return (0, _deprecated_config.checkForDeprecatedConfig)(config, log);\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL2NsaS9zZXJ2ZS9yZWFkX3lhbWxfY29uZmlnLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7c0JBQStFLFFBQVE7O2tCQUNsRCxJQUFJOztzQkFDaEIsU0FBUzs7MEJBQ2QsWUFBWTs7cUJBRVAsYUFBYTs7NkJBQ0YsaUJBQWlCOztpQ0FDWixxQkFBcUI7O0FBRTlELElBQU0sR0FBRyxHQUFHLHFCQUFRLFVBQVUsT0FBTyxFQUFFO0FBQ3JDLFNBQU8sQ0FBQyxHQUFHLENBQUMscUJBQUksVUFBVSxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUM7Q0FDdkMsQ0FBQyxDQUFDOztBQUVJLFNBQVMsS0FBSyxDQUFDLE9BQU8sRUFBRTtBQUM3QixTQUFPLHVCQUFVLE9BQU8sRUFBRSxVQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUs7QUFDNUMsd0JBQU8sTUFBTSxFQUFFLFNBQVMsS0FBSyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUU7QUFDdEMsVUFBSSwyQkFBYyxHQUFHLENBQUMsRUFBRTtBQUN0Qiw0QkFBTyxHQUFHLEVBQUUsVUFBVSxNQUFNLEVBQUUsTUFBTSxFQUFFO0FBQ3BDLGVBQUssQ0FBQyxNQUFNLEVBQUUsR0FBRyxHQUFHLEdBQUcsR0FBRyxNQUFNLENBQUMsQ0FBQztTQUNuQyxDQUFDLENBQUM7QUFDSCxlQUFPO09BQ1I7O0FBRUQsVUFBSSxxQkFBUSxHQUFHLENBQUMsRUFBRTtBQUNoQix5QkFBSSxNQUFNLEVBQUUsR0FBRyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0FBQ3JCLFdBQUcsQ0FBQyxPQUFPLENBQUMsVUFBQyxNQUFNLEVBQUUsQ0FBQztpQkFBSyxLQUFLLENBQUMsTUFBTSxFQUFFLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO1NBQUEsQ0FBQyxDQUFDO0FBQ3pELGVBQU87T0FDUjs7QUFFRCx1QkFBSSxNQUFNLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0tBQ3ZCLENBQUMsQ0FBQztHQUNKLEVBQUUsRUFBRSxDQUFDLENBQUM7Q0FDUjs7cUJBRWMsVUFBVSxLQUFLLEVBQUU7QUFDOUIsTUFBTSxLQUFLLEdBQUcsRUFBRSxDQUFDLE1BQU0sQ0FBQyxLQUFLLElBQUksRUFBRSxDQUFDLENBQUM7QUFDckMsTUFBTSxLQUFLLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxVQUFBLElBQUk7V0FBSSxzQkFBUyxzQkFBSyxJQUFJLEVBQUUsTUFBTSxDQUFDLENBQUM7R0FBQSxDQUFDLENBQUM7QUFDOUQsTUFBTSxNQUFNLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsVUFBQSxJQUFJO1dBQUksd0NBQW9CLElBQUksRUFBRSxHQUFHLENBQUM7R0FBQSxDQUFDLENBQUMsQ0FBQztBQUN4RSxTQUFPLGlEQUF5QixNQUFNLEVBQUUsR0FBRyxDQUFDLENBQUM7Q0FDOUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvY2xpL3NlcnZlL3JlYWRfeWFtbF9jb25maWcuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjaGFpbiwgaXNBcnJheSwgaXNQbGFpbk9iamVjdCwgZm9yT3duLCBtZW1vaXplLCBzZXQsIHRyYW5zZm9ybSB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgeyByZWFkRmlsZVN5bmMgYXMgcmVhZCB9IGZyb20gJ2ZzJztcbmltcG9ydCB7IHNhZmVMb2FkIH0gZnJvbSAnanMteWFtbCc7XG5pbXBvcnQgeyByZWQgfSBmcm9tICdhbnNpY29sb3JzJztcblxuaW1wb3J0IHsgZnJvbVJvb3QgfSBmcm9tICcuLi8uLi91dGlscyc7XG5pbXBvcnQgeyByZXdyaXRlTGVnYWN5Q29uZmlnIH0gZnJvbSAnLi9sZWdhY3lfY29uZmlnJztcbmltcG9ydCB7IGNoZWNrRm9yRGVwcmVjYXRlZENvbmZpZyB9IGZyb20gJy4vZGVwcmVjYXRlZF9jb25maWcnO1xuXG5jb25zdCBsb2cgPSBtZW1vaXplKGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gIGNvbnNvbGUubG9nKHJlZCgnV0FSTklORzonKSwgbWVzc2FnZSk7XG59KTtcblxuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlKHNvdXJjZXMpIHtcbiAgcmV0dXJuIHRyYW5zZm9ybShzb3VyY2VzLCAobWVyZ2VkLCBzb3VyY2UpID0+IHtcbiAgICBmb3JPd24oc291cmNlLCBmdW5jdGlvbiBhcHBseSh2YWwsIGtleSkge1xuICAgICAgaWYgKGlzUGxhaW5PYmplY3QodmFsKSkge1xuICAgICAgICBmb3JPd24odmFsLCBmdW5jdGlvbiAoc3ViVmFsLCBzdWJLZXkpIHtcbiAgICAgICAgICBhcHBseShzdWJWYWwsIGtleSArICcuJyArIHN1YktleSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChpc0FycmF5KHZhbCkpIHtcbiAgICAgICAgc2V0KG1lcmdlZCwga2V5LCBbXSk7XG4gICAgICAgIHZhbC5mb3JFYWNoKChzdWJWYWwsIGkpID0+IGFwcGx5KHN1YlZhbCwga2V5ICsgJy4nICsgaSkpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHNldChtZXJnZWQsIGtleSwgdmFsKTtcbiAgICB9KTtcbiAgfSwge30pO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAocGF0aHMpIHtcbiAgY29uc3QgZmlsZXMgPSBbXS5jb25jYXQocGF0aHMgfHwgW10pO1xuICBjb25zdCB5YW1scyA9IGZpbGVzLm1hcChwYXRoID0+IHNhZmVMb2FkKHJlYWQocGF0aCwgJ3V0ZjgnKSkpO1xuICBjb25zdCBjb25maWcgPSBtZXJnZSh5YW1scy5tYXAoZmlsZSA9PiByZXdyaXRlTGVnYWN5Q29uZmlnKGZpbGUsIGxvZykpKTtcbiAgcmV0dXJuIGNoZWNrRm9yRGVwcmVjYXRlZENvbmZpZyhjb25maWcsIGxvZyk7XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/cli/serve/read_yaml_config.js"
      ],
      "names": [],
      "mappings": ";;;;;;;sBAA+E,QAAQ;;kBAClD,IAAI;;sBAChB,SAAS;;0BACd,YAAY;;qBAEP,aAAa;;6BACF,iBAAiB;;iCACZ,qBAAqB;;AAE9D,IAAM,GAAG,GAAG,qBAAQ,UAAU,OAAO,EAAE;AACrC,SAAO,CAAC,GAAG,CAAC,qBAAI,UAAU,CAAC,EAAE,OAAO,CAAC,CAAC;CACvC,CAAC,CAAC;;AAEI,SAAS,KAAK,CAAC,OAAO,EAAE;AAC7B,SAAO,uBAAU,OAAO,EAAE,UAAC,MAAM,EAAE,MAAM,EAAK;AAC5C,wBAAO,MAAM,EAAE,SAAS,KAAK,CAAC,GAAG,EAAE,GAAG,EAAE;AACtC,UAAI,2BAAc,GAAG,CAAC,EAAE;AACtB,4BAAO,GAAG,EAAE,UAAU,MAAM,EAAE,MAAM,EAAE;AACpC,eAAK,CAAC,MAAM,EAAE,GAAG,GAAG,GAAG,GAAG,MAAM,CAAC,CAAC;SACnC,CAAC,CAAC;AACH,eAAO;OACR;;AAED,UAAI,qBAAQ,GAAG,CAAC,EAAE;AAChB,yBAAI,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC,CAAC;AACrB,WAAG,CAAC,OAAO,CAAC,UAAC,MAAM,EAAE,CAAC;iBAAK,KAAK,CAAC,MAAM,EAAE,GAAG,GAAG,GAAG,GAAG,CAAC,CAAC;SAAA,CAAC,CAAC;AACzD,eAAO;OACR;;AAED,uBAAI,MAAM,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;KACvB,CAAC,CAAC;GACJ,EAAE,EAAE,CAAC,CAAC;CACR;;qBAEc,UAAU,KAAK,EAAE;AAC9B,MAAM,KAAK,GAAG,EAAE,CAAC,MAAM,CAAC,KAAK,IAAI,EAAE,CAAC,CAAC;AACrC,MAAM,KAAK,GAAG,KAAK,CAAC,GAAG,CAAC,UAAA,IAAI;WAAI,sBAAS,sBAAK,IAAI,EAAE,MAAM,CAAC,CAAC;GAAA,CAAC,CAAC;AAC9D,MAAM,MAAM,GAAG,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,UAAA,IAAI;WAAI,wCAAoB,IAAI,EAAE,GAAG,CAAC;GAAA,CAAC,CAAC,CAAC;AACxE,SAAO,iDAAyB,MAAM,EAAE,GAAG,CAAC,CAAC;CAC9C",
      "file": "/home/vio/v3metrics/src/cli/serve/read_yaml_config.js",
      "sourcesContent": [
        "import { chain, isArray, isPlainObject, forOwn, memoize, set, transform } from 'lodash';\nimport { readFileSync as read } from 'fs';\nimport { safeLoad } from 'js-yaml';\nimport { red } from 'ansicolors';\n\nimport { fromRoot } from '../../utils';\nimport { rewriteLegacyConfig } from './legacy_config';\nimport { checkForDeprecatedConfig } from './deprecated_config';\n\nconst log = memoize(function (message) {\n  console.log(red('WARNING:'), message);\n});\n\nexport function merge(sources) {\n  return transform(sources, (merged, source) => {\n    forOwn(source, function apply(val, key) {\n      if (isPlainObject(val)) {\n        forOwn(val, function (subVal, subKey) {\n          apply(subVal, key + '.' + subKey);\n        });\n        return;\n      }\n\n      if (isArray(val)) {\n        set(merged, key, []);\n        val.forEach((subVal, i) => apply(subVal, key + '.' + i));\n        return;\n      }\n\n      set(merged, key, val);\n    });\n  }, {});\n}\n\nexport default function (paths) {\n  const files = [].concat(paths || []);\n  const yamls = files.map(path => safeLoad(read(path, 'utf8')));\n  const config = merge(yamls.map(file => rewriteLegacyConfig(file, log)));\n  return checkForDeprecatedConfig(config, log);\n}\n"
      ]
    },
    "mtime": 1467036622785
  },
  "{\"filename\":\"/home/vio/v3metrics/src/cli/serve/legacy_config.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "noop",
              "transform"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "noop",
                "local": "noop"
              },
              {
                "kind": "named",
                "imported": "transform",
                "local": "transform"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "legacySettings",
            "rewriteLegacyConfig",
            "object",
            "log"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "legacySettings",
              "exported": "legacySettings"
            },
            {
              "kind": "local",
              "local": "rewriteLegacyConfig",
              "exported": "rewriteLegacyConfig"
            },
            {
              "kind": "local",
              "local": "object",
              "exported": "object"
            },
            {
              "kind": "local",
              "local": "log",
              "exported": "log"
            }
          ]
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports.rewriteLegacyConfig = rewriteLegacyConfig;\n\nvar _lodash = require('lodash');\n\n// legacySettings allow kibana 4.2+ to accept the same config file that people\n// used for kibana 4.0 and 4.1. These settings are transformed to their modern\n// equivalents at the very begining of the process\nvar legacySettings = {\n  // server\n  port: 'server.port',\n  host: 'server.host',\n  pid_file: 'pid.file',\n  ssl_cert_file: 'server.ssl.cert',\n  ssl_key_file: 'server.ssl.key',\n\n  // logging\n  log_file: 'logging.dest',\n\n  // kibana\n  kibana_index: 'kibana.index',\n  default_app_id: 'kibana.defaultAppId',\n\n  // es\n  ca: 'elasticsearch.ssl.ca',\n  elasticsearch_preserve_host: 'elasticsearch.preserveHost',\n  elasticsearch_url: 'elasticsearch.url',\n  kibana_elasticsearch_client_crt: 'elasticsearch.ssl.cert',\n  kibana_elasticsearch_client_key: 'elasticsearch.ssl.key',\n  kibana_elasticsearch_password: 'elasticsearch.password',\n  kibana_elasticsearch_username: 'elasticsearch.username',\n  ping_timeout: 'elasticsearch.pingTimeout',\n  request_timeout: 'elasticsearch.requestTimeout',\n  shard_timeout: 'elasticsearch.shardTimeout',\n  startup_timeout: 'elasticsearch.startupTimeout',\n  verify_ssl: 'elasticsearch.ssl.verify'\n};\n\nexports.legacySettings = legacySettings;\n// transform legacy options into new namespaced versions\n\nfunction rewriteLegacyConfig(object) {\n  var log = arguments.length <= 1 || arguments[1] === undefined ? _lodash.noop : arguments[1];\n\n  return (0, _lodash.transform)(object, function (clone, val, key) {\n    if (legacySettings.hasOwnProperty(key)) {\n      var replacement = legacySettings[key];\n      log('Config key \"' + key + '\" is deprecated. It has been replaced with \"' + replacement + '\"');\n      clone[replacement] = val;\n    } else {\n      clone[key] = val;\n    }\n  }, {});\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL2NsaS9zZXJ2ZS9sZWdhY3lfY29uZmlnLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7c0JBQWdDLFFBQVE7Ozs7O0FBS2pDLElBQU0sY0FBYyxHQUFHOztBQUU1QixNQUFJLEVBQUUsYUFBYTtBQUNuQixNQUFJLEVBQUUsYUFBYTtBQUNuQixVQUFRLEVBQUUsVUFBVTtBQUNwQixlQUFhLEVBQUUsaUJBQWlCO0FBQ2hDLGNBQVksRUFBRSxnQkFBZ0I7OztBQUc5QixVQUFRLEVBQUUsY0FBYzs7O0FBR3hCLGNBQVksRUFBRSxjQUFjO0FBQzVCLGdCQUFjLEVBQUUscUJBQXFCOzs7QUFHckMsSUFBRSxFQUFFLHNCQUFzQjtBQUMxQiw2QkFBMkIsRUFBRSw0QkFBNEI7QUFDekQsbUJBQWlCLEVBQUUsbUJBQW1CO0FBQ3RDLGlDQUErQixFQUFFLHdCQUF3QjtBQUN6RCxpQ0FBK0IsRUFBRSx1QkFBdUI7QUFDeEQsK0JBQTZCLEVBQUUsd0JBQXdCO0FBQ3ZELCtCQUE2QixFQUFFLHdCQUF3QjtBQUN2RCxjQUFZLEVBQUUsMkJBQTJCO0FBQ3pDLGlCQUFlLEVBQUUsOEJBQThCO0FBQy9DLGVBQWEsRUFBRSw0QkFBNEI7QUFDM0MsaUJBQWUsRUFBRSw4QkFBOEI7QUFDL0MsWUFBVSxFQUFFLDBCQUEwQjtDQUN2QyxDQUFDOzs7OztBQUdLLFNBQVMsbUJBQW1CLENBQUMsTUFBTSxFQUFjO01BQVosR0FBRzs7QUFDN0MsU0FBTyx1QkFBVSxNQUFNLEVBQUUsVUFBQyxLQUFLLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBSztBQUM1QyxRQUFJLGNBQWMsQ0FBQyxjQUFjLENBQUMsR0FBRyxDQUFDLEVBQUU7QUFDdEMsVUFBTSxXQUFXLEdBQUcsY0FBYyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ3hDLFNBQUcsa0JBQWdCLEdBQUcsb0RBQStDLFdBQVcsT0FBSSxDQUFDO0FBQ3JGLFdBQUssQ0FBQyxXQUFXLENBQUMsR0FBRyxHQUFHLENBQUM7S0FDMUIsTUFBTTtBQUNMLFdBQUssQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUM7S0FDbEI7R0FDRixFQUFFLEVBQUUsQ0FBQyxDQUFDO0NBQ1IiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvY2xpL3NlcnZlL2xlZ2FjeV9jb25maWcuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBub29wLCB0cmFuc2Zvcm0gfSBmcm9tICdsb2Rhc2gnO1xuXG4vLyBsZWdhY3lTZXR0aW5ncyBhbGxvdyBraWJhbmEgNC4yKyB0byBhY2NlcHQgdGhlIHNhbWUgY29uZmlnIGZpbGUgdGhhdCBwZW9wbGVcbi8vIHVzZWQgZm9yIGtpYmFuYSA0LjAgYW5kIDQuMS4gVGhlc2Ugc2V0dGluZ3MgYXJlIHRyYW5zZm9ybWVkIHRvIHRoZWlyIG1vZGVyblxuLy8gZXF1aXZhbGVudHMgYXQgdGhlIHZlcnkgYmVnaW5pbmcgb2YgdGhlIHByb2Nlc3NcbmV4cG9ydCBjb25zdCBsZWdhY3lTZXR0aW5ncyA9IHtcbiAgLy8gc2VydmVyXG4gIHBvcnQ6ICdzZXJ2ZXIucG9ydCcsXG4gIGhvc3Q6ICdzZXJ2ZXIuaG9zdCcsXG4gIHBpZF9maWxlOiAncGlkLmZpbGUnLFxuICBzc2xfY2VydF9maWxlOiAnc2VydmVyLnNzbC5jZXJ0JyxcbiAgc3NsX2tleV9maWxlOiAnc2VydmVyLnNzbC5rZXknLFxuXG4gIC8vIGxvZ2dpbmdcbiAgbG9nX2ZpbGU6ICdsb2dnaW5nLmRlc3QnLFxuXG4gIC8vIGtpYmFuYVxuICBraWJhbmFfaW5kZXg6ICdraWJhbmEuaW5kZXgnLFxuICBkZWZhdWx0X2FwcF9pZDogJ2tpYmFuYS5kZWZhdWx0QXBwSWQnLFxuXG4gIC8vIGVzXG4gIGNhOiAnZWxhc3RpY3NlYXJjaC5zc2wuY2EnLFxuICBlbGFzdGljc2VhcmNoX3ByZXNlcnZlX2hvc3Q6ICdlbGFzdGljc2VhcmNoLnByZXNlcnZlSG9zdCcsXG4gIGVsYXN0aWNzZWFyY2hfdXJsOiAnZWxhc3RpY3NlYXJjaC51cmwnLFxuICBraWJhbmFfZWxhc3RpY3NlYXJjaF9jbGllbnRfY3J0OiAnZWxhc3RpY3NlYXJjaC5zc2wuY2VydCcsXG4gIGtpYmFuYV9lbGFzdGljc2VhcmNoX2NsaWVudF9rZXk6ICdlbGFzdGljc2VhcmNoLnNzbC5rZXknLFxuICBraWJhbmFfZWxhc3RpY3NlYXJjaF9wYXNzd29yZDogJ2VsYXN0aWNzZWFyY2gucGFzc3dvcmQnLFxuICBraWJhbmFfZWxhc3RpY3NlYXJjaF91c2VybmFtZTogJ2VsYXN0aWNzZWFyY2gudXNlcm5hbWUnLFxuICBwaW5nX3RpbWVvdXQ6ICdlbGFzdGljc2VhcmNoLnBpbmdUaW1lb3V0JyxcbiAgcmVxdWVzdF90aW1lb3V0OiAnZWxhc3RpY3NlYXJjaC5yZXF1ZXN0VGltZW91dCcsXG4gIHNoYXJkX3RpbWVvdXQ6ICdlbGFzdGljc2VhcmNoLnNoYXJkVGltZW91dCcsXG4gIHN0YXJ0dXBfdGltZW91dDogJ2VsYXN0aWNzZWFyY2guc3RhcnR1cFRpbWVvdXQnLFxuICB2ZXJpZnlfc3NsOiAnZWxhc3RpY3NlYXJjaC5zc2wudmVyaWZ5Jyxcbn07XG5cbi8vIHRyYW5zZm9ybSBsZWdhY3kgb3B0aW9ucyBpbnRvIG5ldyBuYW1lc3BhY2VkIHZlcnNpb25zXG5leHBvcnQgZnVuY3Rpb24gcmV3cml0ZUxlZ2FjeUNvbmZpZyhvYmplY3QsIGxvZyA9IG5vb3ApIHtcbiAgcmV0dXJuIHRyYW5zZm9ybShvYmplY3QsIChjbG9uZSwgdmFsLCBrZXkpID0+IHtcbiAgICBpZiAobGVnYWN5U2V0dGluZ3MuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgY29uc3QgcmVwbGFjZW1lbnQgPSBsZWdhY3lTZXR0aW5nc1trZXldO1xuICAgICAgbG9nKGBDb25maWcga2V5IFwiJHtrZXl9XCIgaXMgZGVwcmVjYXRlZC4gSXQgaGFzIGJlZW4gcmVwbGFjZWQgd2l0aCBcIiR7cmVwbGFjZW1lbnR9XCJgKTtcbiAgICAgIGNsb25lW3JlcGxhY2VtZW50XSA9IHZhbDtcbiAgICB9IGVsc2Uge1xuICAgICAgY2xvbmVba2V5XSA9IHZhbDtcbiAgICB9XG4gIH0sIHt9KTtcbn1cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/cli/serve/legacy_config.js"
      ],
      "names": [],
      "mappings": ";;;;;;;sBAAgC,QAAQ;;;;;AAKjC,IAAM,cAAc,GAAG;;AAE5B,MAAI,EAAE,aAAa;AACnB,MAAI,EAAE,aAAa;AACnB,UAAQ,EAAE,UAAU;AACpB,eAAa,EAAE,iBAAiB;AAChC,cAAY,EAAE,gBAAgB;;;AAG9B,UAAQ,EAAE,cAAc;;;AAGxB,cAAY,EAAE,cAAc;AAC5B,gBAAc,EAAE,qBAAqB;;;AAGrC,IAAE,EAAE,sBAAsB;AAC1B,6BAA2B,EAAE,4BAA4B;AACzD,mBAAiB,EAAE,mBAAmB;AACtC,iCAA+B,EAAE,wBAAwB;AACzD,iCAA+B,EAAE,uBAAuB;AACxD,+BAA6B,EAAE,wBAAwB;AACvD,+BAA6B,EAAE,wBAAwB;AACvD,cAAY,EAAE,2BAA2B;AACzC,iBAAe,EAAE,8BAA8B;AAC/C,eAAa,EAAE,4BAA4B;AAC3C,iBAAe,EAAE,8BAA8B;AAC/C,YAAU,EAAE,0BAA0B;CACvC,CAAC;;;;;AAGK,SAAS,mBAAmB,CAAC,MAAM,EAAc;MAAZ,GAAG;;AAC7C,SAAO,uBAAU,MAAM,EAAE,UAAC,KAAK,EAAE,GAAG,EAAE,GAAG,EAAK;AAC5C,QAAI,cAAc,CAAC,cAAc,CAAC,GAAG,CAAC,EAAE;AACtC,UAAM,WAAW,GAAG,cAAc,CAAC,GAAG,CAAC,CAAC;AACxC,SAAG,kBAAgB,GAAG,oDAA+C,WAAW,OAAI,CAAC;AACrF,WAAK,CAAC,WAAW,CAAC,GAAG,GAAG,CAAC;KAC1B,MAAM;AACL,WAAK,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC;KAClB;GACF,EAAE,EAAE,CAAC,CAAC;CACR",
      "file": "/home/vio/v3metrics/src/cli/serve/legacy_config.js",
      "sourcesContent": [
        "import { noop, transform } from 'lodash';\n\n// legacySettings allow kibana 4.2+ to accept the same config file that people\n// used for kibana 4.0 and 4.1. These settings are transformed to their modern\n// equivalents at the very begining of the process\nexport const legacySettings = {\n  // server\n  port: 'server.port',\n  host: 'server.host',\n  pid_file: 'pid.file',\n  ssl_cert_file: 'server.ssl.cert',\n  ssl_key_file: 'server.ssl.key',\n\n  // logging\n  log_file: 'logging.dest',\n\n  // kibana\n  kibana_index: 'kibana.index',\n  default_app_id: 'kibana.defaultAppId',\n\n  // es\n  ca: 'elasticsearch.ssl.ca',\n  elasticsearch_preserve_host: 'elasticsearch.preserveHost',\n  elasticsearch_url: 'elasticsearch.url',\n  kibana_elasticsearch_client_crt: 'elasticsearch.ssl.cert',\n  kibana_elasticsearch_client_key: 'elasticsearch.ssl.key',\n  kibana_elasticsearch_password: 'elasticsearch.password',\n  kibana_elasticsearch_username: 'elasticsearch.username',\n  ping_timeout: 'elasticsearch.pingTimeout',\n  request_timeout: 'elasticsearch.requestTimeout',\n  shard_timeout: 'elasticsearch.shardTimeout',\n  startup_timeout: 'elasticsearch.startupTimeout',\n  verify_ssl: 'elasticsearch.ssl.verify',\n};\n\n// transform legacy options into new namespaced versions\nexport function rewriteLegacyConfig(object, log = noop) {\n  return transform(object, (clone, val, key) => {\n    if (legacySettings.hasOwnProperty(key)) {\n      const replacement = legacySettings[key];\n      log(`Config key \"${key}\" is deprecated. It has been replaced with \"${replacement}\"`);\n      clone[replacement] = val;\n    } else {\n      clone[key] = val;\n    }\n  }, {});\n}\n"
      ]
    },
    "mtime": 1467036622785
  },
  "{\"filename\":\"/home/vio/v3metrics/src/cli/serve/deprecated_config.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "forOwn",
              "has",
              "noop"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "forOwn",
                "local": "forOwn"
              },
              {
                "kind": "named",
                "imported": "has",
                "local": "has"
              },
              {
                "kind": "named",
                "imported": "noop",
                "local": "noop"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "deprecatedSettings",
            "checkForDeprecatedConfig",
            "object",
            "log"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "deprecatedSettings",
              "exported": "deprecatedSettings"
            },
            {
              "kind": "local",
              "local": "checkForDeprecatedConfig",
              "exported": "checkForDeprecatedConfig"
            },
            {
              "kind": "local",
              "local": "object",
              "exported": "object"
            },
            {
              "kind": "local",
              "local": "log",
              "exported": "log"
            }
          ]
        }
      },
      "usedHelpers": [
        "sliced-to-array"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }; })();\n\nexports.checkForDeprecatedConfig = checkForDeprecatedConfig;\n\nvar _lodash = require('lodash');\n\n// deprecated settings are still allowed, but will be removed at a later time. They\n// are checked for after the config object is prepared and known, so legacySettings\n// will have already been transformed.\nvar deprecatedSettings = new Map([[['server', 'xsrf', 'token'], 'server.xsrf.token is deprecated. It is no longer used when providing xsrf protection.']]);\n\nexports.deprecatedSettings = deprecatedSettings;\n// check for and warn about deprecated settings\n\nfunction checkForDeprecatedConfig(object) {\n  var log = arguments.length <= 1 || arguments[1] === undefined ? _lodash.noop : arguments[1];\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = deprecatedSettings.entries()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var _step$value = _slicedToArray(_step.value, 2);\n\n      var key = _step$value[0];\n      var msg = _step$value[1];\n\n      if ((0, _lodash.has)(object, key)) log(msg);\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator['return']) {\n        _iterator['return']();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  return object;\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL2NsaS9zZXJ2ZS9kZXByZWNhdGVkX2NvbmZpZy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O3NCQUFrQyxRQUFROzs7OztBQUtuQyxJQUFNLGtCQUFrQixHQUFHLElBQUksR0FBRyxDQUFDLENBQ3hDLENBQUMsQ0FBQyxRQUFRLEVBQUUsTUFBTSxFQUFFLE9BQU8sQ0FBQyxFQUFFLHVGQUF1RixDQUFDLENBQ3ZILENBQUMsQ0FBQzs7Ozs7QUFHSSxTQUFTLHdCQUF3QixDQUFDLE1BQU0sRUFBYztNQUFaLEdBQUc7Ozs7OztBQUNsRCx5QkFBeUIsa0JBQWtCLENBQUMsT0FBTyxFQUFFLDhIQUFFOzs7VUFBM0MsR0FBRztVQUFFLEdBQUc7O0FBQ2xCLFVBQUksaUJBQUksTUFBTSxFQUFFLEdBQUcsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztLQUNoQzs7Ozs7Ozs7Ozs7Ozs7OztBQUNELFNBQU8sTUFBTSxDQUFDO0NBQ2YiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvY2xpL3NlcnZlL2RlcHJlY2F0ZWRfY29uZmlnLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZm9yT3duLCBoYXMsIG5vb3AgfSBmcm9tICdsb2Rhc2gnO1xuXG4vLyBkZXByZWNhdGVkIHNldHRpbmdzIGFyZSBzdGlsbCBhbGxvd2VkLCBidXQgd2lsbCBiZSByZW1vdmVkIGF0IGEgbGF0ZXIgdGltZS4gVGhleVxuLy8gYXJlIGNoZWNrZWQgZm9yIGFmdGVyIHRoZSBjb25maWcgb2JqZWN0IGlzIHByZXBhcmVkIGFuZCBrbm93biwgc28gbGVnYWN5U2V0dGluZ3Ncbi8vIHdpbGwgaGF2ZSBhbHJlYWR5IGJlZW4gdHJhbnNmb3JtZWQuXG5leHBvcnQgY29uc3QgZGVwcmVjYXRlZFNldHRpbmdzID0gbmV3IE1hcChbXG4gIFtbJ3NlcnZlcicsICd4c3JmJywgJ3Rva2VuJ10sICdzZXJ2ZXIueHNyZi50b2tlbiBpcyBkZXByZWNhdGVkLiBJdCBpcyBubyBsb25nZXIgdXNlZCB3aGVuIHByb3ZpZGluZyB4c3JmIHByb3RlY3Rpb24uJ11cbl0pO1xuXG4vLyBjaGVjayBmb3IgYW5kIHdhcm4gYWJvdXQgZGVwcmVjYXRlZCBzZXR0aW5nc1xuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrRm9yRGVwcmVjYXRlZENvbmZpZyhvYmplY3QsIGxvZyA9IG5vb3ApIHtcbiAgZm9yIChjb25zdCBba2V5LCBtc2ddIG9mIGRlcHJlY2F0ZWRTZXR0aW5ncy5lbnRyaWVzKCkpIHtcbiAgICBpZiAoaGFzKG9iamVjdCwga2V5KSkgbG9nKG1zZyk7XG4gIH1cbiAgcmV0dXJuIG9iamVjdDtcbn1cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/cli/serve/deprecated_config.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;sBAAkC,QAAQ;;;;;AAKnC,IAAM,kBAAkB,GAAG,IAAI,GAAG,CAAC,CACxC,CAAC,CAAC,QAAQ,EAAE,MAAM,EAAE,OAAO,CAAC,EAAE,uFAAuF,CAAC,CACvH,CAAC,CAAC;;;;;AAGI,SAAS,wBAAwB,CAAC,MAAM,EAAc;MAAZ,GAAG;;;;;;AAClD,yBAAyB,kBAAkB,CAAC,OAAO,EAAE,8HAAE;;;UAA3C,GAAG;UAAE,GAAG;;AAClB,UAAI,iBAAI,MAAM,EAAE,GAAG,CAAC,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC;KAChC;;;;;;;;;;;;;;;;AACD,SAAO,MAAM,CAAC;CACf",
      "file": "/home/vio/v3metrics/src/cli/serve/deprecated_config.js",
      "sourcesContent": [
        "import { forOwn, has, noop } from 'lodash';\n\n// deprecated settings are still allowed, but will be removed at a later time. They\n// are checked for after the config object is prepared and known, so legacySettings\n// will have already been transformed.\nexport const deprecatedSettings = new Map([\n  [['server', 'xsrf', 'token'], 'server.xsrf.token is deprecated. It is no longer used when providing xsrf protection.']\n]);\n\n// check for and warn about deprecated settings\nexport function checkForDeprecatedConfig(object, log = noop) {\n  for (const [key, msg] of deprecatedSettings.entries()) {\n    if (has(object, key)) log(msg);\n  }\n  return object;\n}\n"
      ]
    },
    "mtime": 1467036622785
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/kbn_server.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "hapi",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Hapi"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "constant",
              "once",
              "compact",
              "flatten"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "constant",
                "local": "constant"
              },
              {
                "kind": "named",
                "imported": "once",
                "local": "once"
              },
              {
                "kind": "named",
                "imported": "compact",
                "local": "compact"
              },
              {
                "kind": "named",
                "imported": "flatten",
                "local": "flatten"
              }
            ]
          },
          {
            "source": "bluebird",
            "imported": [
              "promisify",
              "resolve",
              "fromNode"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "promisify",
                "local": "promisify"
              },
              {
                "kind": "named",
                "imported": "resolve",
                "local": "resolve"
              },
              {
                "kind": "named",
                "imported": "fromNode",
                "local": "fromNode"
              }
            ]
          },
          {
            "source": "cluster",
            "imported": [
              "isWorker"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "isWorker",
                "local": "isWorker"
              }
            ]
          },
          {
            "source": "../utils",
            "imported": [
              "fromRoot",
              "pkg"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "fromRoot",
                "local": "fromRoot"
              },
              {
                "kind": "named",
                "imported": "pkg",
                "local": "pkg"
              }
            ]
          },
          {
            "source": "./config/config",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Config"
              }
            ]
          },
          {
            "source": "./logging/configuration",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "loggingConfiguration"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "async-to-generator",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _hapi = require('hapi');\n\nvar _hapi2 = _interopRequireDefault(_hapi);\n\nvar _lodash = require('lodash');\n\nvar _bluebird = require('bluebird');\n\nvar _cluster = require('cluster');\n\nvar _utils = require('../utils');\n\nvar _configConfig = require('./config/config');\n\nvar _configConfig2 = _interopRequireDefault(_configConfig);\n\nvar _loggingConfiguration = require('./logging/configuration');\n\nvar _loggingConfiguration2 = _interopRequireDefault(_loggingConfiguration);\n\nvar rootDir = (0, _utils.fromRoot)('.');\n\nmodule.exports = (function () {\n  function KbnServer(settings) {\n    var _this = this;\n\n    _classCallCheck(this, KbnServer);\n\n    this.name = _utils.pkg.name;\n    this.version = _utils.pkg.version;\n    this.build = _utils.pkg.build || false;\n    this.rootDir = rootDir;\n    this.settings = settings || {};\n\n    this.ready = (0, _lodash.constant)(this.mixin(require('./config/setup'), // sets this.config, reads this.settings\n    require('./http'), // sets this.server\n    require('./logging'), require('./status'),\n\n    // writes pid file\n    require('./pid'),\n\n    // find plugins and set this.plugins\n    require('./plugins/scan'),\n\n    // tell the config we are done loading plugins\n    require('./config/complete'),\n\n    // setup this.uiExports and this.bundles\n    require('../ui'),\n\n    // setup server.uiSettings\n    require('../ui/settings'),\n\n    // ensure that all bundles are built, or that the\n    // lazy bundle server is running\n    require('../optimize'),\n\n    // finally, initialize the plugins\n    require('./plugins/initialize'), function () {\n      if (_this.config.get('server.autoListen')) {\n        _this.ready = (0, _lodash.constant)((0, _bluebird.resolve)());\n        return _this.listen();\n      }\n    }));\n\n    this.listen = (0, _lodash.once)(this.listen);\n  }\n\n  /**\n   * Extend the KbnServer outside of the constraits of a plugin. This allows access\n   * to APIs that are not exposed (intentionally) to the plugins and should only\n   * be used when the code will be kept up to date with Kibana.\n   *\n   * @param {...function} - functions that should be called to mixin functionality.\n   *                         They are called with the arguments (kibana, server, config)\n   *                         and can return a promise to delay execution of the next mixin\n   * @return {Promise} - promise that is resolved when the final mixin completes.\n   */\n\n  _createClass(KbnServer, [{\n    key: 'mixin',\n    value: _asyncToGenerator(function* () {\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _len = arguments.length, fns = Array(_len), _key = 0; _key < _len; _key++) {\n          fns[_key] = arguments[_key];\n        }\n\n        for (var _iterator = (0, _lodash.compact)((0, _lodash.flatten)(fns))[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var fn = _step.value;\n\n          yield fn.call(this, this, this.server, this.config);\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator['return']) {\n            _iterator['return']();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    })\n\n    /**\n     * Tell the server to listen for incoming requests, or get\n     * a promise that will be resolved once the server is listening.\n     *\n     * @return undefined\n     */\n  }, {\n    key: 'listen',\n    value: _asyncToGenerator(function* () {\n      var server = this.server;\n      var config = this.config;\n\n      yield this.ready();\n      yield (0, _bluebird.fromNode)(function (cb) {\n        return server.start(cb);\n      });\n\n      if (_cluster.isWorker) {\n        // help parent process know when we are ready\n        process.send(['WORKER_LISTENING']);\n      }\n\n      server.log(['listening', 'info'], 'Server running at ' + server.info.uri);\n      return server;\n    })\n  }, {\n    key: 'close',\n    value: _asyncToGenerator(function* () {\n      var _this2 = this;\n\n      yield (0, _bluebird.fromNode)(function (cb) {\n        return _this2.server.stop(cb);\n      });\n    })\n  }, {\n    key: 'inject',\n    value: _asyncToGenerator(function* (opts) {\n      var _this3 = this;\n\n      if (!this.server) yield this.ready();\n\n      return yield (0, _bluebird.fromNode)(function (cb) {\n        try {\n          _this3.server.inject(opts, function (resp) {\n            cb(null, resp);\n          });\n        } catch (err) {\n          cb(err);\n        }\n      });\n    })\n  }, {\n    key: 'applyLoggingConfiguration',\n    value: function applyLoggingConfiguration(settings) {\n      var config = _configConfig2['default'].withDefaultSchema(settings);\n      var loggingOptions = (0, _loggingConfiguration2['default'])(config);\n      var subset = {\n        ops: config.get('ops'),\n        logging: config.get('logging')\n      };\n      var plain = JSON.stringify(subset, null, 2);\n      this.server.log(['info', 'config'], 'New logging configuration:\\n' + plain);\n      this.server.plugins['even-better'].monitor.reconfigure(loggingOptions);\n    }\n  }]);\n\n  return KbnServer;\n})();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9rYm5fc2VydmVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7b0JBQWlCLE1BQU07Ozs7c0JBQzBCLFFBQVE7O3dCQUNaLFVBQVU7O3VCQUM5QixTQUFTOztxQkFDSixVQUFVOzs0QkFDckIsaUJBQWlCOzs7O29DQUNILHlCQUF5Qjs7OztBQUUxRCxJQUFJLE9BQU8sR0FBRyxxQkFBUyxHQUFHLENBQUMsQ0FBQzs7QUFFNUIsTUFBTSxDQUFDLE9BQU87QUFDRCxXQURVLFNBQVMsQ0FDbEIsUUFBUSxFQUFFOzs7MEJBREQsU0FBUzs7QUFFNUIsUUFBSSxDQUFDLElBQUksR0FBRyxXQUFJLElBQUksQ0FBQztBQUNyQixRQUFJLENBQUMsT0FBTyxHQUFHLFdBQUksT0FBTyxDQUFDO0FBQzNCLFFBQUksQ0FBQyxLQUFLLEdBQUcsV0FBSSxLQUFLLElBQUksS0FBSyxDQUFDO0FBQ2hDLFFBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDO0FBQ3ZCLFFBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxJQUFJLEVBQUUsQ0FBQzs7QUFFL0IsUUFBSSxDQUFDLEtBQUssR0FBRyxzQkFBUyxJQUFJLENBQUMsS0FBSyxDQUM5QixPQUFPLENBQUMsZ0JBQWdCLENBQUM7QUFDekIsV0FBTyxDQUFDLFFBQVEsQ0FBQztBQUNqQixXQUFPLENBQUMsV0FBVyxDQUFDLEVBQ3BCLE9BQU8sQ0FBQyxVQUFVLENBQUM7OztBQUduQixXQUFPLENBQUMsT0FBTyxDQUFDOzs7QUFHaEIsV0FBTyxDQUFDLGdCQUFnQixDQUFDOzs7QUFHekIsV0FBTyxDQUFDLG1CQUFtQixDQUFDOzs7QUFHNUIsV0FBTyxDQUFDLE9BQU8sQ0FBQzs7O0FBR2hCLFdBQU8sQ0FBQyxnQkFBZ0IsQ0FBQzs7OztBQUl6QixXQUFPLENBQUMsYUFBYSxDQUFDOzs7QUFHdEIsV0FBTyxDQUFDLHNCQUFzQixDQUFDLEVBRS9CLFlBQU07QUFD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QixDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9rYm5fc2VydmVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEhhcGkgZnJvbSAnaGFwaSc7XG5pbXBvcnQgeyBjb25zdGFudCwgb25jZSwgY29tcGFjdCwgZmxhdHRlbiB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgeyBwcm9taXNpZnksIHJlc29sdmUsIGZyb21Ob2RlIH0gZnJvbSAnYmx1ZWJpcmQnO1xuaW1wb3J0IHsgaXNXb3JrZXIgfSBmcm9tICdjbHVzdGVyJztcbmltcG9ydCB7IGZyb21Sb290LCBwa2cgfSBmcm9tICcuLi91dGlscyc7XG5pbXBvcnQgQ29uZmlnIGZyb20gJy4vY29uZmlnL2NvbmZpZyc7XG5pbXBvcnQgbG9nZ2luZ0NvbmZpZ3VyYXRpb24gZnJvbSAnLi9sb2dnaW5nL2NvbmZpZ3VyYXRpb24nO1xuXG5sZXQgcm9vdERpciA9IGZyb21Sb290KCcuJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgS2JuU2VydmVyIHtcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MpIHtcbiAgICB0aGlzLm5hbWUgPSBwa2cubmFtZTtcbiAgICB0aGlzLnZlcnNpb24gPSBwa2cudmVyc2lvbjtcbiAgICB0aGlzLmJ1aWxkID0gcGtnLmJ1aWxkIHx8IGZhbHNlO1xuICAgIHRoaXMucm9vdERpciA9IHJvb3REaXI7XG4gICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzIHx8IHt9O1xuXG4gICAgdGhpcy5yZWFkeSA9IGNvbnN0YW50KHRoaXMubWl4aW4oXG4gICAgICByZXF1aXJlKCcuL2NvbmZpZy9zZXR1cCcpLCAvLyBzZXRzIHRoaXMuY29uZmlnLCByZWFkcyB0aGlzLnNldHRpbmdzXG4gICAgICByZXF1aXJlKCcuL2h0dHAnKSwgLy8gc2V0cyB0aGlzLnNlcnZlclxuICAgICAgcmVxdWlyZSgnLi9sb2dnaW5nJyksXG4gICAgICByZXF1aXJlKCcuL3N0YXR1cycpLFxuXG4gICAgICAvLyB3cml0ZXMgcGlkIGZpbGVcbiAgICAgIHJlcXVpcmUoJy4vcGlkJyksXG5cbiAgICAgIC8vIGZpbmQgcGx1Z2lucyBhbmQgc2V0IHRoaXMucGx1Z2luc1xuICAgICAgcmVxdWlyZSgnLi9wbHVnaW5zL3NjYW4nKSxcblxuICAgICAgLy8gdGVsbCB0aGUgY29uZmlnIHdlIGFyZSBkb25lIGxvYWRpbmcgcGx1Z2luc1xuICAgICAgcmVxdWlyZSgnLi9jb25maWcvY29tcGxldGUnKSxcblxuICAgICAgLy8gc2V0dXAgdGhpcy51aUV4cG9ydHMgYW5kIHRoaXMuYnVuZGxlc1xuICAgICAgcmVxdWlyZSgnLi4vdWknKSxcblxuICAgICAgLy8gc2V0dXAgc2VydmVyLnVpU2V0dGluZ3NcbiAgICAgIHJlcXVpcmUoJy4uL3VpL3NldHRpbmdzJyksXG5cbiAgICAgIC8vIGVuc3VyZSB0aGF0IGFsbCBidW5kbGVzIGFyZSBidWlsdCwgb3IgdGhhdCB0aGVcbiAgICAgIC8vIGxhenkgYnVuZGxlIHNlcnZlciBpcyBydW5uaW5nXG4gICAgICByZXF1aXJlKCcuLi9vcHRpbWl6ZScpLFxuXG4gICAgICAvLyBmaW5hbGx5LCBpbml0aWFsaXplIHRoZSBwbHVnaW5zXG4gICAgICByZXF1aXJlKCcuL3BsdWdpbnMvaW5pdGlhbGl6ZScpLFxuXG4gICAgICAoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5nZXQoJ3NlcnZlci5hdXRvTGlzdGVuJykpIHtcbiAgICAgICAgICB0aGlzLnJlYWR5ID0gY29uc3RhbnQocmVzb2x2ZSgpKTtcbiAgICAgICAgICByZXR1cm4gdGhpcy5saXN0ZW4oKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICkpO1xuXG4gICAgdGhpcy5saXN0ZW4gPSBvbmNlKHRoaXMubGlzdGVuKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHRlbmQgdGhlIEtiblNlcnZlciBvdXRzaWRlIG9mIHRoZSBjb25zdHJhaXRzIG9mIGEgcGx1Z2luLiBUaGlzIGFsbG93cyBhY2Nlc3NcbiAgICogdG8gQVBJcyB0aGF0IGFyZSBub3QgZXhwb3NlZCAoaW50ZW50aW9uYWxseSkgdG8gdGhlIHBsdWdpbnMgYW5kIHNob3VsZCBvbmx5XG4gICAqIGJlIHVzZWQgd2hlbiB0aGUgY29kZSB3aWxsIGJlIGtlcHQgdXAgdG8gZGF0ZSB3aXRoIEtpYmFuYS5cbiAgICpcbiAgICogQHBhcmFtIHsuLi5mdW5jdGlvbn0gLSBmdW5jdGlvbnMgdGhhdCBzaG91bGQgYmUgY2FsbGVkIHRvIG1peGluIGZ1bmN0aW9uYWxpdHkuXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgIFRoZXkgYXJlIGNhbGxlZCB3aXRoIHRoZSBhcmd1bWVudHMgKGtpYmFuYSwgc2VydmVyLCBjb25maWcpXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgIGFuZCBjYW4gcmV0dXJuIGEgcHJvbWlzZSB0byBkZWxheSBleGVjdXRpb24gb2YgdGhlIG5leHQgbWl4aW5cbiAgICogQHJldHVybiB7UHJvbWlzZX0gLSBwcm9taXNlIHRoYXQgaXMgcmVzb2x2ZWQgd2hlbiB0aGUgZmluYWwgbWl4aW4gY29tcGxldGVzLlxuICAgKi9cbiAgYXN5bmMgbWl4aW4oLi4uZm5zKSB7XG4gICAgZm9yIChsZXQgZm4gb2YgY29tcGFjdChmbGF0dGVuKGZucykpKSB7XG4gICAgICBhd2FpdCBmbi5jYWxsKHRoaXMsIHRoaXMsIHRoaXMuc2VydmVyLCB0aGlzLmNvbmZpZyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRlbGwgdGhlIHNlcnZlciB0byBsaXN0ZW4gZm9yIGluY29taW5nIHJlcXVlc3RzLCBvciBnZXRcbiAgICogYSBwcm9taXNlIHRoYXQgd2lsbCBiZSByZXNvbHZlZCBvbmNlIHRoZSBzZXJ2ZXIgaXMgbGlzdGVuaW5nLlxuICAgKlxuICAgKiBAcmV0dXJuIHVuZGVmaW5lZFxuICAgKi9cbiAgYXN5bmMgbGlzdGVuKCkge1xuICAgIGxldCB7IHNlcnZlciwgY29uZmlnIH0gPSB0aGlzO1xuXG4gICAgYXdhaXQgdGhpcy5yZWFkeSgpO1xuICAgIGF3YWl0IGZyb21Ob2RlKGNiID0+IHNlcnZlci5zdGFydChjYikpO1xuXG4gICAgaWYgKGlzV29ya2VyKSB7XG4gICAgICAvLyBoZWxwIHBhcmVudCBwcm9jZXNzIGtub3cgd2hlbiB3ZSBhcmUgcmVhZHlcbiAgICAgIHByb2Nlc3Muc2VuZChbJ1dPUktFUl9MSVNURU5JTkcnXSk7XG4gICAgfVxuXG4gICAgc2VydmVyLmxvZyhbJ2xpc3RlbmluZycsICdpbmZvJ10sIGBTZXJ2ZXIgcnVubmluZyBhdCAke3NlcnZlci5pbmZvLnVyaX1gKTtcbiAgICByZXR1cm4gc2VydmVyO1xuICB9XG5cbiAgYXN5bmMgY2xvc2UoKSB7XG4gICAgYXdhaXQgZnJvbU5vZGUoY2IgPT4gdGhpcy5zZXJ2ZXIuc3RvcChjYikpO1xuICB9XG5cbiAgYXN5bmMgaW5qZWN0KG9wdHMpIHtcbiAgICBpZiAoIXRoaXMuc2VydmVyKSBhd2FpdCB0aGlzLnJlYWR5KCk7XG5cbiAgICByZXR1cm4gYXdhaXQgZnJvbU5vZGUoY2IgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGhpcy5zZXJ2ZXIuaW5qZWN0KG9wdHMsIChyZXNwKSA9PiB7XG4gICAgICAgICAgY2IobnVsbCwgcmVzcCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNiKGVycik7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBhcHBseUxvZ2dpbmdDb25maWd1cmF0aW9uKHNldHRpbmdzKSB7XG4gICAgY29uc3QgY29uZmlnID0gQ29uZmlnLndpdGhEZWZhdWx0U2NoZW1hKHNldHRpbmdzKTtcbiAgICBjb25zdCBsb2dnaW5nT3B0aW9ucyA9IGxvZ2dpbmdDb25maWd1cmF0aW9uKGNvbmZpZyk7XG4gICAgY29uc3Qgc3Vic2V0ID0ge1xuICAgICAgb3BzOiBjb25maWcuZ2V0KCdvcHMnKSxcbiAgICAgIGxvZ2dpbmc6IGNvbmZpZy5nZXQoJ2xvZ2dpbmcnKVxuICAgIH07XG4gICAgY29uc3QgcGxhaW4gPSBKU09OLnN0cmluZ2lmeShzdWJzZXQsIG51bGwsIDIpO1xuICAgIHRoaXMuc2VydmVyLmxvZyhbJ2luZm8nLCAnY29uZmlnJ10sICdOZXcgbG9nZ2luZyBjb25maWd1cmF0aW9uOlxcbicgKyBwbGFpbik7XG4gICAgdGhpcy5zZXJ2ZXIucGx1Z2luc1snZXZlbi1iZXR0ZXInXS5tb25pdG9yLnJlY29uZmlndXJlKGxvZ2dpbmdPcHRpb25zKTtcbiAgfVxufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/kbn_server.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/src/server/kbn_server.js",
      "sourcesContent": [
        "import Hapi from 'hapi';\nimport { constant, once, compact, flatten } from 'lodash';\nimport { promisify, resolve, fromNode } from 'bluebird';\nimport { isWorker } from 'cluster';\nimport { fromRoot, pkg } from '../utils';\nimport Config from './config/config';\nimport loggingConfiguration from './logging/configuration';\n\nlet rootDir = fromRoot('.');\n\nmodule.exports = class KbnServer {\n  constructor(settings) {\n    this.name = pkg.name;\n    this.version = pkg.version;\n    this.build = pkg.build || false;\n    this.rootDir = rootDir;\n    this.settings = settings || {};\n\n    this.ready = constant(this.mixin(\n      require('./config/setup'), // sets this.config, reads this.settings\n      require('./http'), // sets this.server\n      require('./logging'),\n      require('./status'),\n\n      // writes pid file\n      require('./pid'),\n\n      // find plugins and set this.plugins\n      require('./plugins/scan'),\n\n      // tell the config we are done loading plugins\n      require('./config/complete'),\n\n      // setup this.uiExports and this.bundles\n      require('../ui'),\n\n      // setup server.uiSettings\n      require('../ui/settings'),\n\n      // ensure that all bundles are built, or that the\n      // lazy bundle server is running\n      require('../optimize'),\n\n      // finally, initialize the plugins\n      require('./plugins/initialize'),\n\n      () => {\n        if (this.config.get('server.autoListen')) {\n          this.ready = constant(resolve());\n          return this.listen();\n        }\n      }\n    ));\n\n    this.listen = once(this.listen);\n  }\n\n  /**\n   * Extend the KbnServer outside of the constraits of a plugin. This allows access\n   * to APIs that are not exposed (intentionally) to the plugins and should only\n   * be used when the code will be kept up to date with Kibana.\n   *\n   * @param {...function} - functions that should be called to mixin functionality.\n   *                         They are called with the arguments (kibana, server, config)\n   *                         and can return a promise to delay execution of the next mixin\n   * @return {Promise} - promise that is resolved when the final mixin completes.\n   */\n  async mixin(...fns) {\n    for (let fn of compact(flatten(fns))) {\n      await fn.call(this, this, this.server, this.config);\n    }\n  }\n\n  /**\n   * Tell the server to listen for incoming requests, or get\n   * a promise that will be resolved once the server is listening.\n   *\n   * @return undefined\n   */\n  async listen() {\n    let { server, config } = this;\n\n    await this.ready();\n    await fromNode(cb => server.start(cb));\n\n    if (isWorker) {\n      // help parent process know when we are ready\n      process.send(['WORKER_LISTENING']);\n    }\n\n    server.log(['listening', 'info'], `Server running at ${server.info.uri}`);\n    return server;\n  }\n\n  async close() {\n    await fromNode(cb => this.server.stop(cb));\n  }\n\n  async inject(opts) {\n    if (!this.server) await this.ready();\n\n    return await fromNode(cb => {\n      try {\n        this.server.inject(opts, (resp) => {\n          cb(null, resp);\n        });\n      } catch (err) {\n        cb(err);\n      }\n    });\n  }\n\n  applyLoggingConfiguration(settings) {\n    const config = Config.withDefaultSchema(settings);\n    const loggingOptions = loggingConfiguration(config);\n    const subset = {\n      ops: config.get('ops'),\n      logging: config.get('logging')\n    };\n    const plain = JSON.stringify(subset, null, 2);\n    this.server.log(['info', 'config'], 'New logging configuration:\\n' + plain);\n    this.server.plugins['even-better'].monitor.reconfigure(loggingOptions);\n  }\n};\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/config/config.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "bluebird",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Promise"
              }
            ]
          },
          {
            "source": "joi",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Joi"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "./override",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "override"
              }
            ]
          },
          {
            "source": "./unset",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "unset"
              }
            ]
          },
          {
            "source": "./schema",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "createDefaultSchema"
              }
            ]
          },
          {
            "source": "../../utils/package_json",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "pkg"
              }
            ]
          },
          {
            "source": "./deep_clone_with_buffers",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "clone"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "define-property",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _bluebird = require('bluebird');\n\nvar _bluebird2 = _interopRequireDefault(_bluebird);\n\nvar _joi = require('joi');\n\nvar _joi2 = _interopRequireDefault(_joi);\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _override = require('./override');\n\nvar _override2 = _interopRequireDefault(_override);\n\nvar _unset = require('./unset');\n\nvar _unset2 = _interopRequireDefault(_unset);\n\nvar _schema = require('./schema');\n\nvar _schema2 = _interopRequireDefault(_schema);\n\nvar _utilsPackage_json = require('../../utils/package_json');\n\nvar _utilsPackage_json2 = _interopRequireDefault(_utilsPackage_json);\n\nvar _deep_clone_with_buffers = require('./deep_clone_with_buffers');\n\nvar _deep_clone_with_buffers2 = _interopRequireDefault(_deep_clone_with_buffers);\n\nvar schema = Symbol('Joi Schema');\nvar schemaExts = Symbol('Schema Extensions');\nvar vals = Symbol('config values');\nvar pendingSets = Symbol('Pending Settings');\n\nmodule.exports = (function () {\n  _createClass(Config, null, [{\n    key: 'withDefaultSchema',\n    value: function withDefaultSchema() {\n      var settings = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n      return new Config((0, _schema2['default'])(), settings);\n    }\n  }]);\n\n  function Config(initialSchema, initialSettings) {\n    _classCallCheck(this, Config);\n\n    this[schemaExts] = Object.create(null);\n    this[vals] = Object.create(null);\n    this[pendingSets] = _lodash2['default'].merge(Object.create(null), initialSettings || {});\n\n    if (initialSchema) this.extendSchema(initialSchema);\n  }\n\n  _createClass(Config, [{\n    key: 'getPendingSets',\n    value: function getPendingSets() {\n      return new Map(_lodash2['default'].pairs(this[pendingSets]));\n    }\n  }, {\n    key: 'extendSchema',\n    value: function extendSchema(key, extension) {\n      var _this = this;\n\n      if (key && key.isJoi) {\n        return _lodash2['default'].each(key._inner.children, function (child) {\n          _this.extendSchema(child.key, child.schema);\n        });\n      }\n\n      if (this.has(key)) {\n        throw new Error('Config schema already has key: ' + key);\n      }\n\n      _lodash2['default'].set(this[schemaExts], key, extension);\n      this[schema] = null;\n\n      var initialVals = _lodash2['default'].get(this[pendingSets], key);\n      if (initialVals) {\n        this.set(key, initialVals);\n        (0, _unset2['default'])(this[pendingSets], key);\n      } else {\n        this._commit(this[vals]);\n      }\n    }\n  }, {\n    key: 'removeSchema',\n    value: function removeSchema(key) {\n      if (!_lodash2['default'].has(this[schemaExts], key)) {\n        throw new TypeError('Unknown schema key: ' + key);\n      }\n\n      this[schema] = null;\n      (0, _unset2['default'])(this[schemaExts], key);\n      (0, _unset2['default'])(this[pendingSets], key);\n      (0, _unset2['default'])(this[vals], key);\n    }\n  }, {\n    key: 'resetTo',\n    value: function resetTo(obj) {\n      this._commit(obj);\n    }\n  }, {\n    key: 'set',\n    value: function set(key, value) {\n      // clone and modify the config\n      var config = (0, _deep_clone_with_buffers2['default'])(this[vals]);\n      if (_lodash2['default'].isPlainObject(key)) {\n        config = (0, _override2['default'])(config, key);\n      } else {\n        _lodash2['default'].set(config, key, value);\n      }\n\n      // attempt to validate the config value\n      this._commit(config);\n    }\n  }, {\n    key: '_commit',\n    value: function _commit(newVals) {\n      // resolve the current environment\n      var env = newVals.env;\n      delete newVals.env;\n      if (_lodash2['default'].isObject(env)) env = env.name;\n      if (!env) env = process.env.NODE_ENV || 'production';\n\n      var dev = env === 'development';\n      var prod = env === 'production';\n\n      // pass the environment as context so that it can be refed in config\n      var context = {\n        env: env,\n        prod: prod,\n        dev: dev,\n        notProd: !prod,\n        notDev: !dev,\n        version: _lodash2['default'].get(_utilsPackage_json2['default'], 'version'),\n        buildNum: dev ? Math.pow(2, 53) - 1 : _lodash2['default'].get(_utilsPackage_json2['default'], 'build.number', NaN),\n        buildSha: dev ? 'XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' : _lodash2['default'].get(_utilsPackage_json2['default'], 'build.sha', '')\n      };\n\n      if (!context.dev && !context.prod) {\n        throw new TypeError('Unexpected environment \"' + env + '\", expected one of \"development\" or \"production\"');\n      }\n\n      var results = _joi2['default'].validate(newVals, this.getSchema(), { context: context });\n\n      if (results.error) {\n        throw results.error;\n      }\n\n      this[vals] = results.value;\n    }\n  }, {\n    key: 'get',\n    value: function get(key) {\n      if (!key) {\n        return (0, _deep_clone_with_buffers2['default'])(this[vals]);\n      }\n\n      var value = _lodash2['default'].get(this[vals], key);\n      if (value === undefined) {\n        if (!this.has(key)) {\n          throw new Error('Unknown config key: ' + key);\n        }\n      }\n      return (0, _deep_clone_with_buffers2['default'])(value);\n    }\n  }, {\n    key: 'has',\n    value: function has(key) {\n      function has(key, schema, path) {\n        path = path || [];\n        // Catch the partial paths\n        if (path.join('.') === key) return true;\n        // Only go deep on inner objects with children\n        if (_lodash2['default'].size(schema._inner.children)) {\n          for (var i = 0; i < schema._inner.children.length; i++) {\n            var child = schema._inner.children[i];\n            // If the child is an object recurse through it's children and return\n            // true if there's a match\n            if (child.schema._type === 'object') {\n              if (has(key, child.schema, path.concat([child.key]))) return true;\n              // if the child matches, return true\n            } else if (path.concat([child.key]).join('.') === key) {\n                return true;\n              }\n          }\n        }\n      }\n\n      if (_lodash2['default'].isArray(key)) {\n        // TODO: add .has() support for array keys\n        key = key.join('.');\n      }\n\n      return !!has(key, this.getSchema());\n    }\n  }, {\n    key: 'getSchema',\n    value: function getSchema() {\n      if (!this[schema]) {\n        this[schema] = (function convertToSchema(children) {\n          var schema = _joi2['default'].object().keys({})['default']();\n\n          var _iteratorNormalCompletion = true;\n          var _didIteratorError = false;\n          var _iteratorError = undefined;\n\n          try {\n            for (var _iterator = Object.keys(children)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n              var key = _step.value;\n\n              var child = children[key];\n              var childSchema = _lodash2['default'].isPlainObject(child) ? convertToSchema(child) : child;\n\n              if (!childSchema || !childSchema.isJoi) {\n                throw new TypeError('Unable to convert configuration definition value to Joi schema: ' + childSchema);\n              }\n\n              schema = schema.keys(_defineProperty({}, key, childSchema));\n            }\n          } catch (err) {\n            _didIteratorError = true;\n            _iteratorError = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion && _iterator['return']) {\n                _iterator['return']();\n              }\n            } finally {\n              if (_didIteratorError) {\n                throw _iteratorError;\n              }\n            }\n          }\n\n          return schema;\n        })(this[schemaExts]);\n      }\n\n      return this[schema];\n    }\n  }]);\n\n  return Config;\n})();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9jb25maWcvY29uZmlnLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7d0JBQW9CLFVBQVU7Ozs7bUJBQ2QsS0FBSzs7OztzQkFDUCxRQUFROzs7O3dCQUNELFlBQVk7Ozs7cUJBQ2YsU0FBUzs7OztzQkFDSyxVQUFVOzs7O2lDQUMxQiwwQkFBMEI7Ozs7dUNBQ3hCLDJCQUEyQjs7OztBQUU3QyxJQUFNLE1BQU0sR0FBRyxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUM7QUFDcEMsSUFBTSxVQUFVLEdBQUcsTUFBTSxDQUFDLG1CQUFtQixDQUFDLENBQUM7QUFDL0MsSUFBTSxJQUFJLEdBQUcsTUFBTSxDQUFDLGVBQWUsQ0FBQyxDQUFDO0FBQ3JDLElBQU0sV0FBVyxHQUFHLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDOztBQUUvQyxNQUFNLENBQUMsT0FBTztlQUFTLE1BQU07O1dBQ0gsNkJBQWdCO1VBQWYsUUFBUSx5REFBRyxFQUFFOztBQUNwQyxhQUFPLElBQUksTUFBTSxDQUFDLDBCQUFxQixFQUFFLFFBQVEsQ0FBQyxDQUFDO0tBQ3BEOzs7QUFFVSxXQUxVLE1BQU0sQ0FLZixhQUFhLEVBQUUsZUFBZSxFQUFFOzBCQUx2QixNQUFNOztBQU16QixRQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUN2QyxRQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNqQyxRQUFJLENBQUMsV0FBVyxDQUFDLEdBQUcsb0JBQUUsS0FBSyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsZUFBZSxJQUFJLEVBQUUsQ0FBQyxDQUFDOztBQUV4RSxRQUFJLGFBQWEsRUFBRSxJQUFJLENBQUMsWUFBWSxDQUFDLGFBQWEsQ0FBQyxDQUFDO0dBQ3JEOztlQVhvQixNQUFNOztXQWFiLDBCQUFHO0FBQ2YsYUFBTyxJQUFJLEdBQUcsQ0FBQyxvQkFBRSxLQUFLLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQztLQUM1Qzs7O1dBRVcsc0JBQUMsR0FBRyxFQUFFLFNBQVMsRUFBRTs7O0FBQzNCLFVBQUksR0FBRyxJQUFJLEdBQUcsQ0FBQyxLQUFLLEVBQUU7QUFDcEIsZUFBTyxvQkFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxRQUFRLEVBQUUsVUFBQyxLQUFLLEVBQUs7QUFDNUMsZ0JBQUssWUFBWSxDQUFDLEtBQUssQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1NBQzVDLENBQUMsQ0FBQztPQUNKOztBQUVELFVBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBRTtBQUNqQixjQUFNLElBQUksS0FBSyxxQ0FBbUMsR0FBRyxDQUFHLENBQUM7T0FDMUQ7O0FBRUQsMEJBQUUsR0FBRyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBRSxHQUFHLEVBQUUsU0FBUyxDQUFDLENBQUM7QUFDeEMsVUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLElBQUksQ0FBQzs7QUFFcEIsVUFBSSxXQUFXLEdBQUcsb0JBQUUsR0FBRyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztBQUNoRCxVQUFJLFdBQVcsRUFBRTtBQUNmLFlBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLFdBQVcsQ0FBQyxDQUFDO0FBQzNCLGdDQUFNLElBQUksQ0FBQyxXQUFXLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztPQUMvQixNQUFNO0FBQ0wsWUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztPQUMxQjtLQUNGOzs7V0FFVyxzQkFBQyxHQUFHLEVBQUU7QUFDaEIsVUFBSSxDQUFDLG9CQUFFLEdBQUcsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUUsR0FBRyxDQUFDLEVBQUU7QUFDakMsY0FBTSxJQUFJLFNBQVMsMEJBQXdCLEdBQUcsQ0FBRyxDQUFDO09BQ25EOztBQUVELFVBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxJQUFJLENBQUM7QUFDcEIsOEJBQU0sSUFBSSxDQUFDLFVBQVUsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0FBQzdCLDhCQUFNLElBQUksQ0FBQyxXQUFXLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztBQUM5Qiw4QkFBTSxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7S0FDeEI7OztXQUVNLGlCQUFDLEdBQUcsRUFBRTtBQUNYLFVBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUM7S0FDbkI7OztXQUVFLGFBQUMsR0FBRyxFQUFFLEtBQUssRUFBRTs7QUFFZCxVQUFJLE1BQU0sR0FBRywwQ0FBTSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztBQUMvQixVQUFJLG9CQUFFLGFBQWEsQ0FBQyxHQUFHLENBQUMsRUFBRTtBQUN4QixjQUFNLEdBQUcsMkJBQVMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxDQUFDO09BQ2hDLE1BQU07QUFDTCw0QkFBRSxHQUFHLENBQUMsTUFBTSxFQUFFLEdBQUcsRUFBRSxLQUFLLENBQUMsQ0FBQztPQUMzQjs7O0FBR0QsVUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztLQUN0Qjs7O1dBRU0saUJBQUMsT0FBTyxFQUFFOztBQUVmLFVBQUksR0FBRyxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUM7QUFDdEIsYUFBTyxPQUFPLENBQUMsR0FBRyxDQUFDO0FBQ25CLFVBQUksb0JBQUUsUUFBUSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDO0FBQ3BDLFVBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxJQUFJLFlBQVksQ0FBQzs7QUFFckQsVUFBSSxHQUFHLEdBQUcsR0FBRyxLQUFLLGFBQWEsQ0FBQztBQUNoQyxVQUFJLElBQUksR0FBRyxHQUFHLEtBQUssWUFBWSxDQUFDOzs7QUFHaEMsVUFBSSxPQUFPLEdBQUc7QUFDWixXQUFHLEVBQUUsR0FBRztBQUNSLFlBQUksRUFBRSxJQUFJO0FBQ1YsV0FBRyxFQUFFLEdBQUc7QUFDUixlQUFPLEVBQUUsQ0FBQyxJQUFJO0FBQ2QsY0FBTSxFQUFFLENBQUMsR0FBRztBQUNaLGVBQU8sRUFBRSxvQkFBRSxHQUFHLGlDQUFNLFNBQVMsQ0FBQztBQUM5QixnQkFBUSxFQUFFLEdBQUcsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsR0FBRyxDQUFDLEdBQUcsb0JBQUUsR0FBRyxpQ0FBTSxjQUFjLEVBQUUsR0FBRyxDQUFDO0FBQ3JFLGdCQUFRLEVBQUUsR0FBRyxHQUFHLDBDQUEwQyxHQUFHLG9CQUFFLEdBQUcsaUNBQU0sV0FBVyxFQUFFLEVBQUUsQ0FBQztPQUN6RixDQUFDOztBQUVGLFVBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRTtBQUNqQyxjQUFNLElBQUksU0FBUyw4QkFDVSxHQUFHLHNEQUMvQixDQUFDO09BQ0g7O0FBRUQsVUFBSSxPQUFPLEdBQUcsaUJBQUksUUFBUSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsU0FBUyxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQVAsT0FBTyxFQUFFLENBQUMsQ0FBQzs7QUFFbkUsVUFBSSxPQUFPLENBQUMsS0FBSyxFQUFFO0FBQ2pCLGNBQU0sT0FBTyxDQUFDLEtBQUssQ0FBQztPQUNyQjs7QUFFRCxVQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsT0FBTyxDQUFDLEtBQUssQ0FBQztLQUM1Qjs7O1dBRUUsYUFBQyxHQUFHLEVBQUU7QUFDUCxVQUFJLENBQUMsR0FBRyxFQUFFO0FBQ1IsZUFBTywwQ0FBTSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztPQUMxQjs7QUFFRCxVQUFJLEtBQUssR0FBRyxvQkFBRSxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0FBQ25DLFVBQUksS0FBSyxLQUFLLFNBQVMsRUFBRTtBQUN2QixZQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBRTtBQUNsQixnQkFBTSxJQUFJLEtBQUssQ0FBQyxzQkFBc0IsR0FBRyxHQUFHLENBQUMsQ0FBQztTQUMvQztPQUNGO0FBQ0QsYUFBTywwQ0FBTSxLQUFLLENBQUMsQ0FBQztLQUNyQjs7O1dBRUUsYUFBQyxHQUFHLEVBQUU7QUFDUCxlQUFTLEdBQUcsQ0FBQyxHQUFHLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRTtBQUM5QixZQUFJLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQzs7QUFFbEIsWUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLEdBQUcsRUFBRSxPQUFPLElBQUksQ0FBQzs7QUFFeEMsWUFBSSxvQkFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRTtBQUNsQyxlQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO0FBQ3RELGdCQUFJLEtBQUssR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQzs7O0FBR3RDLGdCQUFJLEtBQUssQ0FBQyxNQUFNLENBQUMsS0FBSyxLQUFLLFFBQVEsRUFBRTtBQUNuQyxrQkFBSSxHQUFHLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsT0FBTyxJQUFJLENBQUM7O2FBRW5FLE1BQU0sSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLEdBQUcsRUFBRTtBQUNyRCx1QkFBTyxJQUFJLENBQUM7ZUFDYjtXQUNGO1NBQ0Y7T0FDRjs7QUFFRCxVQUFJLG9CQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsRUFBRTs7QUFFbEIsV0FBRyxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7T0FDckI7O0FBRUQsYUFBTyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQztLQUNyQzs7O1dBRVEscUJBQUc7QUFDVixVQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFO0FBQ2pCLFlBQUksQ0FBQyxNQUFNLENBQUMsR0FBSSxDQUFBLFNBQVMsZUFBZSxDQUFDLFFBQVEsRUFBRTtBQUNqRCxjQUFJLE1BQU0sR0FBRyxpQkFBSSxNQUFNLEVBQUUsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLFdBQVEsRUFBRSxDQUFDOzs7Ozs7O0FBRTdDLGlDQUFrQixNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyw4SEFBRTtrQkFBOUIsR0FBRzs7QUFDWixrQkFBTSxLQUFLLEdBQUcsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQzVCLGtCQUFNLFdBQVcsR0FBRyxvQkFBRSxhQUFhLENBQUMsS0FBSyxDQUFDLEdBQUcsZUFBZSxDQUFDLEtBQUssQ0FBQyxHQUFHLEtBQUssQ0FBQzs7QUFFNUUsa0JBQUksQ0FBQyxXQUFXLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxFQUFFO0FBQ3RDLHNCQUFNLElBQUksU0FBUyxDQUFDLGtFQUFrRSxHQUFHLFdBQVcsQ0FBQyxDQUFDO2VBQ3ZHOztBQUVELG9CQUFNLEdBQUcsTUFBTSxDQUFDLElBQUkscUJBQUksR0FBRyxFQUFHLFdBQVcsRUFBRyxDQUFDO2FBQzlDOzs7Ozs7Ozs7Ozs7Ozs7O0FBRUQsaUJBQU8sTUFBTSxDQUFDO1NBQ2YsQ0FBQSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxBQUFDLENBQUM7T0FDdEI7O0FBRUQsYUFBTyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7S0FDckI7OztTQXpLb0IsTUFBTTtJQTBLNUIsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9zZXJ2ZXIvY29uZmlnL2NvbmZpZy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQcm9taXNlIGZyb20gJ2JsdWViaXJkJztcbmltcG9ydCBKb2kgZnJvbSAnam9pJztcbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgb3ZlcnJpZGUgZnJvbSAnLi9vdmVycmlkZSc7XG5pbXBvcnQgdW5zZXQgZnJvbSAnLi91bnNldCc7XG5pbXBvcnQgY3JlYXRlRGVmYXVsdFNjaGVtYSBmcm9tICcuL3NjaGVtYSc7XG5pbXBvcnQgcGtnIGZyb20gJy4uLy4uL3V0aWxzL3BhY2thZ2VfanNvbic7XG5pbXBvcnQgY2xvbmUgZnJvbSAnLi9kZWVwX2Nsb25lX3dpdGhfYnVmZmVycyc7XG5cbmNvbnN0IHNjaGVtYSA9IFN5bWJvbCgnSm9pIFNjaGVtYScpO1xuY29uc3Qgc2NoZW1hRXh0cyA9IFN5bWJvbCgnU2NoZW1hIEV4dGVuc2lvbnMnKTtcbmNvbnN0IHZhbHMgPSBTeW1ib2woJ2NvbmZpZyB2YWx1ZXMnKTtcbmNvbnN0IHBlbmRpbmdTZXRzID0gU3ltYm9sKCdQZW5kaW5nIFNldHRpbmdzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgQ29uZmlnIHtcbiAgc3RhdGljIHdpdGhEZWZhdWx0U2NoZW1hKHNldHRpbmdzID0ge30pIHtcbiAgICByZXR1cm4gbmV3IENvbmZpZyhjcmVhdGVEZWZhdWx0U2NoZW1hKCksIHNldHRpbmdzKTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKGluaXRpYWxTY2hlbWEsIGluaXRpYWxTZXR0aW5ncykge1xuICAgIHRoaXNbc2NoZW1hRXh0c10gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRoaXNbdmFsc10gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRoaXNbcGVuZGluZ1NldHNdID0gXy5tZXJnZShPYmplY3QuY3JlYXRlKG51bGwpLCBpbml0aWFsU2V0dGluZ3MgfHwge30pO1xuXG4gICAgaWYgKGluaXRpYWxTY2hlbWEpIHRoaXMuZXh0ZW5kU2NoZW1hKGluaXRpYWxTY2hlbWEpO1xuICB9XG5cbiAgZ2V0UGVuZGluZ1NldHMoKSB7XG4gICAgcmV0dXJuIG5ldyBNYXAoXy5wYWlycyh0aGlzW3BlbmRpbmdTZXRzXSkpO1xuICB9XG5cbiAgZXh0ZW5kU2NoZW1hKGtleSwgZXh0ZW5zaW9uKSB7XG4gICAgaWYgKGtleSAmJiBrZXkuaXNKb2kpIHtcbiAgICAgIHJldHVybiBfLmVhY2goa2V5Ll9pbm5lci5jaGlsZHJlbiwgKGNoaWxkKSA9PiB7XG4gICAgICAgIHRoaXMuZXh0ZW5kU2NoZW1hKGNoaWxkLmtleSwgY2hpbGQuc2NoZW1hKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmhhcyhrZXkpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYENvbmZpZyBzY2hlbWEgYWxyZWFkeSBoYXMga2V5OiAke2tleX1gKTtcbiAgICB9XG5cbiAgICBfLnNldCh0aGlzW3NjaGVtYUV4dHNdLCBrZXksIGV4dGVuc2lvbik7XG4gICAgdGhpc1tzY2hlbWFdID0gbnVsbDtcblxuICAgIGxldCBpbml0aWFsVmFscyA9IF8uZ2V0KHRoaXNbcGVuZGluZ1NldHNdLCBrZXkpO1xuICAgIGlmIChpbml0aWFsVmFscykge1xuICAgICAgdGhpcy5zZXQoa2V5LCBpbml0aWFsVmFscyk7XG4gICAgICB1bnNldCh0aGlzW3BlbmRpbmdTZXRzXSwga2V5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fY29tbWl0KHRoaXNbdmFsc10pO1xuICAgIH1cbiAgfVxuXG4gIHJlbW92ZVNjaGVtYShrZXkpIHtcbiAgICBpZiAoIV8uaGFzKHRoaXNbc2NoZW1hRXh0c10sIGtleSkpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYFVua25vd24gc2NoZW1hIGtleTogJHtrZXl9YCk7XG4gICAgfVxuXG4gICAgdGhpc1tzY2hlbWFdID0gbnVsbDtcbiAgICB1bnNldCh0aGlzW3NjaGVtYUV4dHNdLCBrZXkpO1xuICAgIHVuc2V0KHRoaXNbcGVuZGluZ1NldHNdLCBrZXkpO1xuICAgIHVuc2V0KHRoaXNbdmFsc10sIGtleSk7XG4gIH1cblxuICByZXNldFRvKG9iaikge1xuICAgIHRoaXMuX2NvbW1pdChvYmopO1xuICB9XG5cbiAgc2V0KGtleSwgdmFsdWUpIHtcbiAgICAvLyBjbG9uZSBhbmQgbW9kaWZ5IHRoZSBjb25maWdcbiAgICBsZXQgY29uZmlnID0gY2xvbmUodGhpc1t2YWxzXSk7XG4gICAgaWYgKF8uaXNQbGFpbk9iamVjdChrZXkpKSB7XG4gICAgICBjb25maWcgPSBvdmVycmlkZShjb25maWcsIGtleSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIF8uc2V0KGNvbmZpZywga2V5LCB2YWx1ZSk7XG4gICAgfVxuXG4gICAgLy8gYXR0ZW1wdCB0byB2YWxpZGF0ZSB0aGUgY29uZmlnIHZhbHVlXG4gICAgdGhpcy5fY29tbWl0KGNvbmZpZyk7XG4gIH1cblxuICBfY29tbWl0KG5ld1ZhbHMpIHtcbiAgICAvLyByZXNvbHZlIHRoZSBjdXJyZW50IGVudmlyb25tZW50XG4gICAgbGV0IGVudiA9IG5ld1ZhbHMuZW52O1xuICAgIGRlbGV0ZSBuZXdWYWxzLmVudjtcbiAgICBpZiAoXy5pc09iamVjdChlbnYpKSBlbnYgPSBlbnYubmFtZTtcbiAgICBpZiAoIWVudikgZW52ID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgfHwgJ3Byb2R1Y3Rpb24nO1xuXG4gICAgbGV0IGRldiA9IGVudiA9PT0gJ2RldmVsb3BtZW50JztcbiAgICBsZXQgcHJvZCA9IGVudiA9PT0gJ3Byb2R1Y3Rpb24nO1xuXG4gICAgLy8gcGFzcyB0aGUgZW52aXJvbm1lbnQgYXMgY29udGV4dCBzbyB0aGF0IGl0IGNhbiBiZSByZWZlZCBpbiBjb25maWdcbiAgICBsZXQgY29udGV4dCA9IHtcbiAgICAgIGVudjogZW52LFxuICAgICAgcHJvZDogcHJvZCxcbiAgICAgIGRldjogZGV2LFxuICAgICAgbm90UHJvZDogIXByb2QsXG4gICAgICBub3REZXY6ICFkZXYsXG4gICAgICB2ZXJzaW9uOiBfLmdldChwa2csICd2ZXJzaW9uJyksXG4gICAgICBidWlsZE51bTogZGV2ID8gTWF0aC5wb3coMiwgNTMpIC0gMSA6IF8uZ2V0KHBrZywgJ2J1aWxkLm51bWJlcicsIE5hTiksXG4gICAgICBidWlsZFNoYTogZGV2ID8gJ1hYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFgnIDogXy5nZXQocGtnLCAnYnVpbGQuc2hhJywgJycpXG4gICAgfTtcblxuICAgIGlmICghY29udGV4dC5kZXYgJiYgIWNvbnRleHQucHJvZCkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICAgYFVuZXhwZWN0ZWQgZW52aXJvbm1lbnQgXCIke2Vudn1cIiwgZXhwZWN0ZWQgb25lIG9mIFwiZGV2ZWxvcG1lbnRcIiBvciBcInByb2R1Y3Rpb25cImBcbiAgICAgICk7XG4gICAgfVxuXG4gICAgbGV0IHJlc3VsdHMgPSBKb2kudmFsaWRhdGUobmV3VmFscywgdGhpcy5nZXRTY2hlbWEoKSwgeyBjb250ZXh0IH0pO1xuXG4gICAgaWYgKHJlc3VsdHMuZXJyb3IpIHtcbiAgICAgIHRocm93IHJlc3VsdHMuZXJyb3I7XG4gICAgfVxuXG4gICAgdGhpc1t2YWxzXSA9IHJlc3VsdHMudmFsdWU7XG4gIH1cblxuICBnZXQoa2V5KSB7XG4gICAgaWYgKCFrZXkpIHtcbiAgICAgIHJldHVybiBjbG9uZSh0aGlzW3ZhbHNdKTtcbiAgICB9XG5cbiAgICBsZXQgdmFsdWUgPSBfLmdldCh0aGlzW3ZhbHNdLCBrZXkpO1xuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAoIXRoaXMuaGFzKGtleSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmtub3duIGNvbmZpZyBrZXk6ICcgKyBrZXkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY2xvbmUodmFsdWUpO1xuICB9XG5cbiAgaGFzKGtleSkge1xuICAgIGZ1bmN0aW9uIGhhcyhrZXksIHNjaGVtYSwgcGF0aCkge1xuICAgICAgcGF0aCA9IHBhdGggfHwgW107XG4gICAgICAvLyBDYXRjaCB0aGUgcGFydGlhbCBwYXRoc1xuICAgICAgaWYgKHBhdGguam9pbignLicpID09PSBrZXkpIHJldHVybiB0cnVlO1xuICAgICAgLy8gT25seSBnbyBkZWVwIG9uIGlubmVyIG9iamVjdHMgd2l0aCBjaGlsZHJlblxuICAgICAgaWYgKF8uc2l6ZShzY2hlbWEuX2lubmVyLmNoaWxkcmVuKSkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNjaGVtYS5faW5uZXIuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBsZXQgY2hpbGQgPSBzY2hlbWEuX2lubmVyLmNoaWxkcmVuW2ldO1xuICAgICAgICAgIC8vIElmIHRoZSBjaGlsZCBpcyBhbiBvYmplY3QgcmVjdXJzZSB0aHJvdWdoIGl0J3MgY2hpbGRyZW4gYW5kIHJldHVyblxuICAgICAgICAgIC8vIHRydWUgaWYgdGhlcmUncyBhIG1hdGNoXG4gICAgICAgICAgaWYgKGNoaWxkLnNjaGVtYS5fdHlwZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGlmIChoYXMoa2V5LCBjaGlsZC5zY2hlbWEsIHBhdGguY29uY2F0KFtjaGlsZC5rZXldKSkpIHJldHVybiB0cnVlO1xuICAgICAgICAgIC8vIGlmIHRoZSBjaGlsZCBtYXRjaGVzLCByZXR1cm4gdHJ1ZVxuICAgICAgICAgIH0gZWxzZSBpZiAocGF0aC5jb25jYXQoW2NoaWxkLmtleV0pLmpvaW4oJy4nKSA9PT0ga2V5KSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoXy5pc0FycmF5KGtleSkpIHtcbiAgICAgIC8vIFRPRE86IGFkZCAuaGFzKCkgc3VwcG9ydCBmb3IgYXJyYXkga2V5c1xuICAgICAga2V5ID0ga2V5LmpvaW4oJy4nKTtcbiAgICB9XG5cbiAgICByZXR1cm4gISFoYXMoa2V5LCB0aGlzLmdldFNjaGVtYSgpKTtcbiAgfVxuXG4gIGdldFNjaGVtYSgpIHtcbiAgICBpZiAoIXRoaXNbc2NoZW1hXSkge1xuICAgICAgdGhpc1tzY2hlbWFdID0gKGZ1bmN0aW9uIGNvbnZlcnRUb1NjaGVtYShjaGlsZHJlbikge1xuICAgICAgICBsZXQgc2NoZW1hID0gSm9pLm9iamVjdCgpLmtleXMoe30pLmRlZmF1bHQoKTtcblxuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhjaGlsZHJlbikpIHtcbiAgICAgICAgICBjb25zdCBjaGlsZCA9IGNoaWxkcmVuW2tleV07XG4gICAgICAgICAgY29uc3QgY2hpbGRTY2hlbWEgPSBfLmlzUGxhaW5PYmplY3QoY2hpbGQpID8gY29udmVydFRvU2NoZW1hKGNoaWxkKSA6IGNoaWxkO1xuXG4gICAgICAgICAgaWYgKCFjaGlsZFNjaGVtYSB8fCAhY2hpbGRTY2hlbWEuaXNKb2kpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1VuYWJsZSB0byBjb252ZXJ0IGNvbmZpZ3VyYXRpb24gZGVmaW5pdGlvbiB2YWx1ZSB0byBKb2kgc2NoZW1hOiAnICsgY2hpbGRTY2hlbWEpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHNjaGVtYSA9IHNjaGVtYS5rZXlzKHsgW2tleV06IGNoaWxkU2NoZW1hIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNjaGVtYTtcbiAgICAgIH0odGhpc1tzY2hlbWFFeHRzXSkpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzW3NjaGVtYV07XG4gIH1cbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/config/config.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;wBAAoB,UAAU;;;;mBACd,KAAK;;;;sBACP,QAAQ;;;;wBACD,YAAY;;;;qBACf,SAAS;;;;sBACK,UAAU;;;;iCAC1B,0BAA0B;;;;uCACxB,2BAA2B;;;;AAE7C,IAAM,MAAM,GAAG,MAAM,CAAC,YAAY,CAAC,CAAC;AACpC,IAAM,UAAU,GAAG,MAAM,CAAC,mBAAmB,CAAC,CAAC;AAC/C,IAAM,IAAI,GAAG,MAAM,CAAC,eAAe,CAAC,CAAC;AACrC,IAAM,WAAW,GAAG,MAAM,CAAC,kBAAkB,CAAC,CAAC;;AAE/C,MAAM,CAAC,OAAO;eAAS,MAAM;;WACH,6BAAgB;UAAf,QAAQ,yDAAG,EAAE;;AACpC,aAAO,IAAI,MAAM,CAAC,0BAAqB,EAAE,QAAQ,CAAC,CAAC;KACpD;;;AAEU,WALU,MAAM,CAKf,aAAa,EAAE,eAAe,EAAE;0BALvB,MAAM;;AAMzB,QAAI,CAAC,UAAU,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;AACvC,QAAI,CAAC,IAAI,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;AACjC,QAAI,CAAC,WAAW,CAAC,GAAG,oBAAE,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,eAAe,IAAI,EAAE,CAAC,CAAC;;AAExE,QAAI,aAAa,EAAE,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,CAAC;GACrD;;eAXoB,MAAM;;WAab,0BAAG;AACf,aAAO,IAAI,GAAG,CAAC,oBAAE,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;KAC5C;;;WAEW,sBAAC,GAAG,EAAE,SAAS,EAAE;;;AAC3B,UAAI,GAAG,IAAI,GAAG,CAAC,KAAK,EAAE;AACpB,eAAO,oBAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,QAAQ,EAAE,UAAC,KAAK,EAAK;AAC5C,gBAAK,YAAY,CAAC,KAAK,CAAC,GAAG,EAAE,KAAK,CAAC,MAAM,CAAC,CAAC;SAC5C,CAAC,CAAC;OACJ;;AAED,UAAI,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE;AACjB,cAAM,IAAI,KAAK,qCAAmC,GAAG,CAAG,CAAC;OAC1D;;AAED,0BAAE,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,GAAG,EAAE,SAAS,CAAC,CAAC;AACxC,UAAI,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC;;AAEpB,UAAI,WAAW,GAAG,oBAAE,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,EAAE,GAAG,CAAC,CAAC;AAChD,UAAI,WAAW,EAAE;AACf,YAAI,CAAC,GAAG,CAAC,GAAG,EAAE,WAAW,CAAC,CAAC;AAC3B,gCAAM,IAAI,CAAC,WAAW,CAAC,EAAE,GAAG,CAAC,CAAC;OAC/B,MAAM;AACL,YAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;OAC1B;KACF;;;WAEW,sBAAC,GAAG,EAAE;AAChB,UAAI,CAAC,oBAAE,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,GAAG,CAAC,EAAE;AACjC,cAAM,IAAI,SAAS,0BAAwB,GAAG,CAAG,CAAC;OACnD;;AAED,UAAI,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC;AACpB,8BAAM,IAAI,CAAC,UAAU,CAAC,EAAE,GAAG,CAAC,CAAC;AAC7B,8BAAM,IAAI,CAAC,WAAW,CAAC,EAAE,GAAG,CAAC,CAAC;AAC9B,8BAAM,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;KACxB;;;WAEM,iBAAC,GAAG,EAAE;AACX,UAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;KACnB;;;WAEE,aAAC,GAAG,EAAE,KAAK,EAAE;;AAEd,UAAI,MAAM,GAAG,0CAAM,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;AAC/B,UAAI,oBAAE,aAAa,CAAC,GAAG,CAAC,EAAE;AACxB,cAAM,GAAG,2BAAS,MAAM,EAAE,GAAG,CAAC,CAAC;OAChC,MAAM;AACL,4BAAE,GAAG,CAAC,MAAM,EAAE,GAAG,EAAE,KAAK,CAAC,CAAC;OAC3B;;;AAGD,UAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;KACtB;;;WAEM,iBAAC,OAAO,EAAE;;AAEf,UAAI,GAAG,GAAG,OAAO,CAAC,GAAG,CAAC;AACtB,aAAO,OAAO,CAAC,GAAG,CAAC;AACnB,UAAI,oBAAE,QAAQ,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,GAAG,CAAC,IAAI,CAAC;AACpC,UAAI,CAAC,GAAG,EAAE,GAAG,GAAG,OAAO,CAAC,GAAG,CAAC,QAAQ,IAAI,YAAY,CAAC;;AAErD,UAAI,GAAG,GAAG,GAAG,KAAK,aAAa,CAAC;AAChC,UAAI,IAAI,GAAG,GAAG,KAAK,YAAY,CAAC;;;AAGhC,UAAI,OAAO,GAAG;AACZ,WAAG,EAAE,GAAG;AACR,YAAI,EAAE,IAAI;AACV,WAAG,EAAE,GAAG;AACR,eAAO,EAAE,CAAC,IAAI;AACd,cAAM,EAAE,CAAC,GAAG;AACZ,eAAO,EAAE,oBAAE,GAAG,iCAAM,SAAS,CAAC;AAC9B,gBAAQ,EAAE,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC,GAAG,oBAAE,GAAG,iCAAM,cAAc,EAAE,GAAG,CAAC;AACrE,gBAAQ,EAAE,GAAG,GAAG,0CAA0C,GAAG,oBAAE,GAAG,iCAAM,WAAW,EAAE,EAAE,CAAC;OACzF,CAAC;;AAEF,UAAI,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE;AACjC,cAAM,IAAI,SAAS,8BACU,GAAG,sDAC/B,CAAC;OACH;;AAED,UAAI,OAAO,GAAG,iBAAI,QAAQ,CAAC,OAAO,EAAE,IAAI,CAAC,SAAS,EAAE,EAAE,EAAE,OAAO,EAAP,OAAO,EAAE,CAAC,CAAC;;AAEnE,UAAI,OAAO,CAAC,KAAK,EAAE;AACjB,cAAM,OAAO,CAAC,KAAK,CAAC;OACrB;;AAED,UAAI,CAAC,IAAI,CAAC,GAAG,OAAO,CAAC,KAAK,CAAC;KAC5B;;;WAEE,aAAC,GAAG,EAAE;AACP,UAAI,CAAC,GAAG,EAAE;AACR,eAAO,0CAAM,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;OAC1B;;AAED,UAAI,KAAK,GAAG,oBAAE,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;AACnC,UAAI,KAAK,KAAK,SAAS,EAAE;AACvB,YAAI,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE;AAClB,gBAAM,IAAI,KAAK,CAAC,sBAAsB,GAAG,GAAG,CAAC,CAAC;SAC/C;OACF;AACD,aAAO,0CAAM,KAAK,CAAC,CAAC;KACrB;;;WAEE,aAAC,GAAG,EAAE;AACP,eAAS,GAAG,CAAC,GAAG,EAAE,MAAM,EAAE,IAAI,EAAE;AAC9B,YAAI,GAAG,IAAI,IAAI,EAAE,CAAC;;AAElB,YAAI,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,GAAG,EAAE,OAAO,IAAI,CAAC;;AAExC,YAAI,oBAAE,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE;AAClC,eAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACtD,gBAAI,KAAK,GAAG,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;;;AAGtC,gBAAI,KAAK,CAAC,MAAM,CAAC,KAAK,KAAK,QAAQ,EAAE;AACnC,kBAAI,GAAG,CAAC,GAAG,EAAE,KAAK,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,OAAO,IAAI,CAAC;;aAEnE,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,GAAG,EAAE;AACrD,uBAAO,IAAI,CAAC;eACb;WACF;SACF;OACF;;AAED,UAAI,oBAAE,OAAO,CAAC,GAAG,CAAC,EAAE;;AAElB,WAAG,GAAG,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;OACrB;;AAED,aAAO,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC;KACrC;;;WAEQ,qBAAG;AACV,UAAI,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE;AACjB,YAAI,CAAC,MAAM,CAAC,GAAI,CAAA,SAAS,eAAe,CAAC,QAAQ,EAAE;AACjD,cAAI,MAAM,GAAG,iBAAI,MAAM,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,WAAQ,EAAE,CAAC;;;;;;;AAE7C,iCAAkB,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,8HAAE;kBAA9B,GAAG;;AACZ,kBAAM,KAAK,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAC;AAC5B,kBAAM,WAAW,GAAG,oBAAE,aAAa,CAAC,KAAK,CAAC,GAAG,eAAe,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC;;AAE5E,kBAAI,CAAC,WAAW,IAAI,CAAC,WAAW,CAAC,KAAK,EAAE;AACtC,sBAAM,IAAI,SAAS,CAAC,kEAAkE,GAAG,WAAW,CAAC,CAAC;eACvG;;AAED,oBAAM,GAAG,MAAM,CAAC,IAAI,qBAAI,GAAG,EAAG,WAAW,EAAG,CAAC;aAC9C;;;;;;;;;;;;;;;;AAED,iBAAO,MAAM,CAAC;SACf,CAAA,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,AAAC,CAAC;OACtB;;AAED,aAAO,IAAI,CAAC,MAAM,CAAC,CAAC;KACrB;;;SAzKoB,MAAM;IA0K5B,CAAC",
      "file": "/home/vio/v3metrics/src/server/config/config.js",
      "sourcesContent": [
        "import Promise from 'bluebird';\nimport Joi from 'joi';\nimport _ from 'lodash';\nimport override from './override';\nimport unset from './unset';\nimport createDefaultSchema from './schema';\nimport pkg from '../../utils/package_json';\nimport clone from './deep_clone_with_buffers';\n\nconst schema = Symbol('Joi Schema');\nconst schemaExts = Symbol('Schema Extensions');\nconst vals = Symbol('config values');\nconst pendingSets = Symbol('Pending Settings');\n\nmodule.exports = class Config {\n  static withDefaultSchema(settings = {}) {\n    return new Config(createDefaultSchema(), settings);\n  }\n\n  constructor(initialSchema, initialSettings) {\n    this[schemaExts] = Object.create(null);\n    this[vals] = Object.create(null);\n    this[pendingSets] = _.merge(Object.create(null), initialSettings || {});\n\n    if (initialSchema) this.extendSchema(initialSchema);\n  }\n\n  getPendingSets() {\n    return new Map(_.pairs(this[pendingSets]));\n  }\n\n  extendSchema(key, extension) {\n    if (key && key.isJoi) {\n      return _.each(key._inner.children, (child) => {\n        this.extendSchema(child.key, child.schema);\n      });\n    }\n\n    if (this.has(key)) {\n      throw new Error(`Config schema already has key: ${key}`);\n    }\n\n    _.set(this[schemaExts], key, extension);\n    this[schema] = null;\n\n    let initialVals = _.get(this[pendingSets], key);\n    if (initialVals) {\n      this.set(key, initialVals);\n      unset(this[pendingSets], key);\n    } else {\n      this._commit(this[vals]);\n    }\n  }\n\n  removeSchema(key) {\n    if (!_.has(this[schemaExts], key)) {\n      throw new TypeError(`Unknown schema key: ${key}`);\n    }\n\n    this[schema] = null;\n    unset(this[schemaExts], key);\n    unset(this[pendingSets], key);\n    unset(this[vals], key);\n  }\n\n  resetTo(obj) {\n    this._commit(obj);\n  }\n\n  set(key, value) {\n    // clone and modify the config\n    let config = clone(this[vals]);\n    if (_.isPlainObject(key)) {\n      config = override(config, key);\n    } else {\n      _.set(config, key, value);\n    }\n\n    // attempt to validate the config value\n    this._commit(config);\n  }\n\n  _commit(newVals) {\n    // resolve the current environment\n    let env = newVals.env;\n    delete newVals.env;\n    if (_.isObject(env)) env = env.name;\n    if (!env) env = process.env.NODE_ENV || 'production';\n\n    let dev = env === 'development';\n    let prod = env === 'production';\n\n    // pass the environment as context so that it can be refed in config\n    let context = {\n      env: env,\n      prod: prod,\n      dev: dev,\n      notProd: !prod,\n      notDev: !dev,\n      version: _.get(pkg, 'version'),\n      buildNum: dev ? Math.pow(2, 53) - 1 : _.get(pkg, 'build.number', NaN),\n      buildSha: dev ? 'XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' : _.get(pkg, 'build.sha', '')\n    };\n\n    if (!context.dev && !context.prod) {\n      throw new TypeError(\n        `Unexpected environment \"${env}\", expected one of \"development\" or \"production\"`\n      );\n    }\n\n    let results = Joi.validate(newVals, this.getSchema(), { context });\n\n    if (results.error) {\n      throw results.error;\n    }\n\n    this[vals] = results.value;\n  }\n\n  get(key) {\n    if (!key) {\n      return clone(this[vals]);\n    }\n\n    let value = _.get(this[vals], key);\n    if (value === undefined) {\n      if (!this.has(key)) {\n        throw new Error('Unknown config key: ' + key);\n      }\n    }\n    return clone(value);\n  }\n\n  has(key) {\n    function has(key, schema, path) {\n      path = path || [];\n      // Catch the partial paths\n      if (path.join('.') === key) return true;\n      // Only go deep on inner objects with children\n      if (_.size(schema._inner.children)) {\n        for (let i = 0; i < schema._inner.children.length; i++) {\n          let child = schema._inner.children[i];\n          // If the child is an object recurse through it's children and return\n          // true if there's a match\n          if (child.schema._type === 'object') {\n            if (has(key, child.schema, path.concat([child.key]))) return true;\n          // if the child matches, return true\n          } else if (path.concat([child.key]).join('.') === key) {\n            return true;\n          }\n        }\n      }\n    }\n\n    if (_.isArray(key)) {\n      // TODO: add .has() support for array keys\n      key = key.join('.');\n    }\n\n    return !!has(key, this.getSchema());\n  }\n\n  getSchema() {\n    if (!this[schema]) {\n      this[schema] = (function convertToSchema(children) {\n        let schema = Joi.object().keys({}).default();\n\n        for (const key of Object.keys(children)) {\n          const child = children[key];\n          const childSchema = _.isPlainObject(child) ? convertToSchema(child) : child;\n\n          if (!childSchema || !childSchema.isJoi) {\n            throw new TypeError('Unable to convert configuration definition value to Joi schema: ' + childSchema);\n          }\n\n          schema = schema.keys({ [key]: childSchema });\n        }\n\n        return schema;\n      }(this[schemaExts]));\n    }\n\n    return this[schema];\n  }\n};\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/config/override.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "./flatten_with",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "flattenWith"
              }
            ]
          },
          {
            "source": "./explode_by",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "explodeBy"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _flatten_with = require('./flatten_with');\n\nvar _flatten_with2 = _interopRequireDefault(_flatten_with);\n\nvar _explode_by = require('./explode_by');\n\nvar _explode_by2 = _interopRequireDefault(_explode_by);\n\nmodule.exports = function (target, source) {\n  var _target = (0, _flatten_with2['default'])('.', target);\n  var _source = (0, _flatten_with2['default'])('.', source);\n  return (0, _explode_by2['default'])('.', _lodash2['default'].defaults(_source, _target));\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9jb25maWcvb3ZlcnJpZGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztzQkFBYyxRQUFROzs7OzRCQUNFLGdCQUFnQjs7OzswQkFDbEIsY0FBYzs7OztBQUVwQyxNQUFNLENBQUMsT0FBTyxHQUFHLFVBQVUsTUFBTSxFQUFFLE1BQU0sRUFBRTtBQUN6QyxNQUFJLE9BQU8sR0FBRywrQkFBWSxHQUFHLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFDdkMsTUFBSSxPQUFPLEdBQUcsK0JBQVksR0FBRyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQ3ZDLFNBQU8sNkJBQVUsR0FBRyxFQUFFLG9CQUFFLFFBQVEsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQztDQUNyRCxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9jb25maWcvb3ZlcnJpZGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IGZsYXR0ZW5XaXRoIGZyb20gJy4vZmxhdHRlbl93aXRoJztcbmltcG9ydCBleHBsb2RlQnkgZnJvbSAnLi9leHBsb2RlX2J5JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodGFyZ2V0LCBzb3VyY2UpIHtcbiAgbGV0IF90YXJnZXQgPSBmbGF0dGVuV2l0aCgnLicsIHRhcmdldCk7XG4gIGxldCBfc291cmNlID0gZmxhdHRlbldpdGgoJy4nLCBzb3VyY2UpO1xuICByZXR1cm4gZXhwbG9kZUJ5KCcuJywgXy5kZWZhdWx0cyhfc291cmNlLCBfdGFyZ2V0KSk7XG59O1xuXG5cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/config/override.js"
      ],
      "names": [],
      "mappings": ";;;;sBAAc,QAAQ;;;;4BACE,gBAAgB;;;;0BAClB,cAAc;;;;AAEpC,MAAM,CAAC,OAAO,GAAG,UAAU,MAAM,EAAE,MAAM,EAAE;AACzC,MAAI,OAAO,GAAG,+BAAY,GAAG,EAAE,MAAM,CAAC,CAAC;AACvC,MAAI,OAAO,GAAG,+BAAY,GAAG,EAAE,MAAM,CAAC,CAAC;AACvC,SAAO,6BAAU,GAAG,EAAE,oBAAE,QAAQ,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC,CAAC;CACrD,CAAC",
      "file": "/home/vio/v3metrics/src/server/config/override.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport flattenWith from './flatten_with';\nimport explodeBy from './explode_by';\n\nmodule.exports = function (target, source) {\n  let _target = flattenWith('.', target);\n  let _source = flattenWith('.', source);\n  return explodeBy('.', _.defaults(_source, _target));\n};\n\n\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/config/flatten_with.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nmodule.exports = function (dot, nestedObj, flattenArrays) {\n  var key = undefined; // original key\n  var stack = []; // track key stack\n  var flatObj = {};\n  (function flattenObj(obj) {\n    _lodash2['default'].keys(obj).forEach(function (key) {\n      stack.push(key);\n      if (!flattenArrays && _lodash2['default'].isArray(obj[key])) flatObj[stack.join(dot)] = obj[key];else if (_lodash2['default'].isObject(obj[key])) flattenObj(obj[key]);else flatObj[stack.join(dot)] = obj[key];\n      stack.pop();\n    });\n  })(nestedObj);\n  return flatObj;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9jb25maWcvZmxhdHRlbl93aXRoLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7c0JBQWMsUUFBUTs7OztBQUN0QixNQUFNLENBQUMsT0FBTyxHQUFHLFVBQVUsR0FBRyxFQUFFLFNBQVMsRUFBRSxhQUFhLEVBQUU7QUFDeEQsTUFBSSxHQUFHLFlBQUEsQ0FBQztBQUNSLE1BQUksS0FBSyxHQUFHLEVBQUUsQ0FBQztBQUNmLE1BQUksT0FBTyxHQUFHLEVBQUUsQ0FBQztBQUNqQixBQUFDLEdBQUEsU0FBUyxVQUFVLENBQUMsR0FBRyxFQUFFO0FBQ3hCLHdCQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUMsVUFBVSxHQUFHLEVBQUU7QUFDakMsV0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNoQixVQUFJLENBQUMsYUFBYSxJQUFJLG9CQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxPQUFPLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUMxRSxJQUFJLG9CQUFFLFFBQVEsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxVQUFVLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsS0FDL0MsT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDekMsV0FBSyxDQUFDLEdBQUcsRUFBRSxDQUFDO0tBQ2IsQ0FBQyxDQUFDO0dBQ0osQ0FBQSxDQUFDLFNBQVMsQ0FBQyxDQUFFO0FBQ2QsU0FBTyxPQUFPLENBQUM7Q0FDaEIsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9zZXJ2ZXIvY29uZmlnL2ZsYXR0ZW5fd2l0aC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChkb3QsIG5lc3RlZE9iaiwgZmxhdHRlbkFycmF5cykge1xuICBsZXQga2V5OyAvLyBvcmlnaW5hbCBrZXlcbiAgbGV0IHN0YWNrID0gW107IC8vIHRyYWNrIGtleSBzdGFja1xuICBsZXQgZmxhdE9iaiA9IHt9O1xuICAoZnVuY3Rpb24gZmxhdHRlbk9iaihvYmopIHtcbiAgICBfLmtleXMob2JqKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIHN0YWNrLnB1c2goa2V5KTtcbiAgICAgIGlmICghZmxhdHRlbkFycmF5cyAmJiBfLmlzQXJyYXkob2JqW2tleV0pKSBmbGF0T2JqW3N0YWNrLmpvaW4oZG90KV0gPSBvYmpba2V5XTtcbiAgICAgIGVsc2UgaWYgKF8uaXNPYmplY3Qob2JqW2tleV0pKSBmbGF0dGVuT2JqKG9ialtrZXldKTtcbiAgICAgIGVsc2UgZmxhdE9ialtzdGFjay5qb2luKGRvdCldID0gb2JqW2tleV07XG4gICAgICBzdGFjay5wb3AoKTtcbiAgICB9KTtcbiAgfShuZXN0ZWRPYmopKTtcbiAgcmV0dXJuIGZsYXRPYmo7XG59O1xuXG5cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/config/flatten_with.js"
      ],
      "names": [],
      "mappings": ";;;;sBAAc,QAAQ;;;;AACtB,MAAM,CAAC,OAAO,GAAG,UAAU,GAAG,EAAE,SAAS,EAAE,aAAa,EAAE;AACxD,MAAI,GAAG,YAAA,CAAC;AACR,MAAI,KAAK,GAAG,EAAE,CAAC;AACf,MAAI,OAAO,GAAG,EAAE,CAAC;AACjB,AAAC,GAAA,SAAS,UAAU,CAAC,GAAG,EAAE;AACxB,wBAAE,IAAI,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,UAAU,GAAG,EAAE;AACjC,WAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AAChB,UAAI,CAAC,aAAa,IAAI,oBAAE,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC,KAC1E,IAAI,oBAAE,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,UAAU,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,KAC/C,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC;AACzC,WAAK,CAAC,GAAG,EAAE,CAAC;KACb,CAAC,CAAC;GACJ,CAAA,CAAC,SAAS,CAAC,CAAE;AACd,SAAO,OAAO,CAAC;CAChB,CAAC",
      "file": "/home/vio/v3metrics/src/server/config/flatten_with.js",
      "sourcesContent": [
        "import _ from 'lodash';\nmodule.exports = function (dot, nestedObj, flattenArrays) {\n  let key; // original key\n  let stack = []; // track key stack\n  let flatObj = {};\n  (function flattenObj(obj) {\n    _.keys(obj).forEach(function (key) {\n      stack.push(key);\n      if (!flattenArrays && _.isArray(obj[key])) flatObj[stack.join(dot)] = obj[key];\n      else if (_.isObject(obj[key])) flattenObj(obj[key]);\n      else flatObj[stack.join(dot)] = obj[key];\n      stack.pop();\n    });\n  }(nestedObj));\n  return flatObj;\n};\n\n\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/config/explode_by.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nmodule.exports = function (dot, flatObject) {\n  var fullObject = {};\n  _lodash2['default'].each(flatObject, function (value, key) {\n    var keys = key.split(dot);\n    (function walk(memo, keys, value) {\n      var _key = keys.shift();\n      if (keys.length === 0) {\n        memo[_key] = value;\n      } else {\n        if (!memo[_key]) memo[_key] = {};\n        walk(memo[_key], keys, value);\n      }\n    })(fullObject, keys, value);\n  });\n  return fullObject;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9jb25maWcvZXhwbG9kZV9ieS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O3NCQUFjLFFBQVE7Ozs7QUFDdEIsTUFBTSxDQUFDLE9BQU8sR0FBRyxVQUFVLEdBQUcsRUFBRSxVQUFVLEVBQUU7QUFDMUMsTUFBSSxVQUFVLEdBQUcsRUFBRSxDQUFDO0FBQ3BCLHNCQUFFLElBQUksQ0FBQyxVQUFVLEVBQUUsVUFBVSxLQUFLLEVBQUUsR0FBRyxFQUFFO0FBQ3ZDLFFBQUksSUFBSSxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDMUIsQUFBQyxLQUFBLFNBQVMsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFO0FBQ2hDLFVBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztBQUN4QixVQUFJLElBQUksQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFO0FBQ3JCLFlBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxLQUFLLENBQUM7T0FDcEIsTUFBTTtBQUNMLFlBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztBQUNqQyxZQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQztPQUMvQjtLQUNGLENBQUEsQ0FBQyxVQUFVLEVBQUUsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFFO0dBQzdCLENBQUMsQ0FBQztBQUNILFNBQU8sVUFBVSxDQUFDO0NBQ25CLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvc2VydmVyL2NvbmZpZy9leHBsb2RlX2J5LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGRvdCwgZmxhdE9iamVjdCkge1xuICBsZXQgZnVsbE9iamVjdCA9IHt9O1xuICBfLmVhY2goZmxhdE9iamVjdCwgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcbiAgICBsZXQga2V5cyA9IGtleS5zcGxpdChkb3QpO1xuICAgIChmdW5jdGlvbiB3YWxrKG1lbW8sIGtleXMsIHZhbHVlKSB7XG4gICAgICBsZXQgX2tleSA9IGtleXMuc2hpZnQoKTtcbiAgICAgIGlmIChrZXlzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBtZW1vW19rZXldID0gdmFsdWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIW1lbW9bX2tleV0pIG1lbW9bX2tleV0gPSB7fTtcbiAgICAgICAgd2FsayhtZW1vW19rZXldLCBrZXlzLCB2YWx1ZSk7XG4gICAgICB9XG4gICAgfShmdWxsT2JqZWN0LCBrZXlzLCB2YWx1ZSkpO1xuICB9KTtcbiAgcmV0dXJuIGZ1bGxPYmplY3Q7XG59O1xuXG5cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/config/explode_by.js"
      ],
      "names": [],
      "mappings": ";;;;sBAAc,QAAQ;;;;AACtB,MAAM,CAAC,OAAO,GAAG,UAAU,GAAG,EAAE,UAAU,EAAE;AAC1C,MAAI,UAAU,GAAG,EAAE,CAAC;AACpB,sBAAE,IAAI,CAAC,UAAU,EAAE,UAAU,KAAK,EAAE,GAAG,EAAE;AACvC,QAAI,IAAI,GAAG,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AAC1B,AAAC,KAAA,SAAS,IAAI,CAAC,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE;AAChC,UAAI,IAAI,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC;AACxB,UAAI,IAAI,CAAC,MAAM,KAAK,CAAC,EAAE;AACrB,YAAI,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC;OACpB,MAAM;AACL,YAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC;AACjC,YAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;OAC/B;KACF,CAAA,CAAC,UAAU,EAAE,IAAI,EAAE,KAAK,CAAC,CAAE;GAC7B,CAAC,CAAC;AACH,SAAO,UAAU,CAAC;CACnB,CAAC",
      "file": "/home/vio/v3metrics/src/server/config/explode_by.js",
      "sourcesContent": [
        "import _ from 'lodash';\nmodule.exports = function (dot, flatObject) {\n  let fullObject = {};\n  _.each(flatObject, function (value, key) {\n    let keys = key.split(dot);\n    (function walk(memo, keys, value) {\n      let _key = keys.shift();\n      if (keys.length === 0) {\n        memo[_key] = value;\n      } else {\n        if (!memo[_key]) memo[_key] = {};\n        walk(memo[_key], keys, value);\n      }\n    }(fullObject, keys, value));\n  });\n  return fullObject;\n};\n\n\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/config/unset.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "lodash/internal/toPath",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "toPath"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _lodashInternalToPath = require('lodash/internal/toPath');\n\nvar _lodashInternalToPath2 = _interopRequireDefault(_lodashInternalToPath);\n\nmodule.exports = function unset(object, rawPath) {\n  if (!object) return;\n  var path = (0, _lodashInternalToPath2['default'])(rawPath);\n\n  switch (path.length) {\n    case 0:\n      return;\n\n    case 1:\n      delete object[rawPath];\n      break;\n\n    default:\n      var leaf = path.pop();\n      var parentPath = path.slice();\n      var parent = _lodash2['default'].get(object, parentPath);\n      unset(parent, leaf);\n      if (!_lodash2['default'].size(parent)) {\n        unset(object, parentPath);\n      }\n      break;\n  }\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9jb25maWcvdW5zZXQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztzQkFBYyxRQUFROzs7O29DQUNILHdCQUF3Qjs7OztBQUUzQyxNQUFNLENBQUMsT0FBTyxHQUFHLFNBQVMsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUU7QUFDL0MsTUFBSSxDQUFDLE1BQU0sRUFBRSxPQUFPO0FBQ3BCLE1BQU0sSUFBSSxHQUFHLHVDQUFPLE9BQU8sQ0FBQyxDQUFDOztBQUU3QixVQUFRLElBQUksQ0FBQyxNQUFNO0FBQ2pCLFNBQUssQ0FBQztBQUNKLGFBQU87O0FBQUEsQUFFVCxTQUFLLENBQUM7QUFDSixhQUFPLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUN2QixZQUFNOztBQUFBLEFBRVI7QUFDRSxVQUFNLElBQUksR0FBRyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7QUFDeEIsVUFBTSxVQUFVLEdBQUcsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO0FBQ2hDLFVBQU0sTUFBTSxHQUFHLG9CQUFFLEdBQUcsQ0FBQyxNQUFNLEVBQUUsVUFBVSxDQUFDLENBQUM7QUFDekMsV0FBSyxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQztBQUNwQixVQUFJLENBQUMsb0JBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFO0FBQ25CLGFBQUssQ0FBQyxNQUFNLEVBQUUsVUFBVSxDQUFDLENBQUM7T0FDM0I7QUFDRCxZQUFNO0FBQUEsR0FDVDtDQUNGLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvc2VydmVyL2NvbmZpZy91bnNldC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgdG9QYXRoIGZyb20gJ2xvZGFzaC9pbnRlcm5hbC90b1BhdGgnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHVuc2V0KG9iamVjdCwgcmF3UGF0aCkge1xuICBpZiAoIW9iamVjdCkgcmV0dXJuO1xuICBjb25zdCBwYXRoID0gdG9QYXRoKHJhd1BhdGgpO1xuXG4gIHN3aXRjaCAocGF0aC5sZW5ndGgpIHtcbiAgICBjYXNlIDA6XG4gICAgICByZXR1cm47XG5cbiAgICBjYXNlIDE6XG4gICAgICBkZWxldGUgb2JqZWN0W3Jhd1BhdGhdO1xuICAgICAgYnJlYWs7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgY29uc3QgbGVhZiA9IHBhdGgucG9wKCk7XG4gICAgICBjb25zdCBwYXJlbnRQYXRoID0gcGF0aC5zbGljZSgpO1xuICAgICAgY29uc3QgcGFyZW50ID0gXy5nZXQob2JqZWN0LCBwYXJlbnRQYXRoKTtcbiAgICAgIHVuc2V0KHBhcmVudCwgbGVhZik7XG4gICAgICBpZiAoIV8uc2l6ZShwYXJlbnQpKSB7XG4gICAgICAgIHVuc2V0KG9iamVjdCwgcGFyZW50UGF0aCk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgfVxufTsiXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/config/unset.js"
      ],
      "names": [],
      "mappings": ";;;;sBAAc,QAAQ;;;;oCACH,wBAAwB;;;;AAE3C,MAAM,CAAC,OAAO,GAAG,SAAS,KAAK,CAAC,MAAM,EAAE,OAAO,EAAE;AAC/C,MAAI,CAAC,MAAM,EAAE,OAAO;AACpB,MAAM,IAAI,GAAG,uCAAO,OAAO,CAAC,CAAC;;AAE7B,UAAQ,IAAI,CAAC,MAAM;AACjB,SAAK,CAAC;AACJ,aAAO;;AAAA,AAET,SAAK,CAAC;AACJ,aAAO,MAAM,CAAC,OAAO,CAAC,CAAC;AACvB,YAAM;;AAAA,AAER;AACE,UAAM,IAAI,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;AACxB,UAAM,UAAU,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC;AAChC,UAAM,MAAM,GAAG,oBAAE,GAAG,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC;AACzC,WAAK,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;AACpB,UAAI,CAAC,oBAAE,IAAI,CAAC,MAAM,CAAC,EAAE;AACnB,aAAK,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC;OAC3B;AACD,YAAM;AAAA,GACT;CACF,CAAC",
      "file": "/home/vio/v3metrics/src/server/config/unset.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport toPath from 'lodash/internal/toPath';\n\nmodule.exports = function unset(object, rawPath) {\n  if (!object) return;\n  const path = toPath(rawPath);\n\n  switch (path.length) {\n    case 0:\n      return;\n\n    case 1:\n      delete object[rawPath];\n      break;\n\n    default:\n      const leaf = path.pop();\n      const parentPath = path.slice();\n      const parent = _.get(object, parentPath);\n      unset(parent, leaf);\n      if (!_.size(parent)) {\n        unset(object, parentPath);\n      }\n      break;\n  }\n};"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/config/schema.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "joi",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Joi"
              }
            ]
          },
          {
            "source": "fs",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "fs"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "path"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "get"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "get",
                "local": "get"
              }
            ]
          },
          {
            "source": "crypto",
            "imported": [
              "randomBytes"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "randomBytes",
                "local": "randomBytes"
              }
            ]
          },
          {
            "source": "os",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "os"
              }
            ]
          },
          {
            "source": "../../utils",
            "imported": [
              "fromRoot"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "fromRoot",
                "local": "fromRoot"
              }
            ]
          },
          {
            "source": "../path",
            "imported": [
              "getData"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "getData",
                "local": "getData"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _joi = require('joi');\n\nvar _joi2 = _interopRequireDefault(_joi);\n\nvar _fs = require('fs');\n\nvar _fs2 = _interopRequireDefault(_fs);\n\nvar _path = require('path');\n\nvar _path2 = _interopRequireDefault(_path);\n\nvar _lodash = require('lodash');\n\nvar _crypto = require('crypto');\n\nvar _os = require('os');\n\nvar _os2 = _interopRequireDefault(_os);\n\nvar _utils = require('../../utils');\n\nvar _path3 = require('../path');\n\nmodule.exports = function () {\n  return _joi2['default'].object({\n    pkg: _joi2['default'].object({\n      version: _joi2['default'].string()['default'](_joi2['default'].ref('$version')),\n      buildNum: _joi2['default'].number()['default'](_joi2['default'].ref('$buildNum')),\n      buildSha: _joi2['default'].string()['default'](_joi2['default'].ref('$buildSha'))\n    })['default'](),\n\n    env: _joi2['default'].object({\n      name: _joi2['default'].string()['default'](_joi2['default'].ref('$env')),\n      dev: _joi2['default'].boolean()['default'](_joi2['default'].ref('$dev')),\n      prod: _joi2['default'].boolean()['default'](_joi2['default'].ref('$prod'))\n    })['default'](),\n\n    dev: _joi2['default'].object({\n      basePathProxyTarget: _joi2['default'].number()['default'](5603)\n    })['default'](),\n\n    pid: _joi2['default'].object({\n      file: _joi2['default'].string(),\n      exclusive: _joi2['default'].boolean()['default'](false)\n    })['default'](),\n\n    uuid: _joi2['default'].string().guid()['default'](),\n\n    server: _joi2['default'].object({\n      name: _joi2['default'].string()['default'](_os2['default'].hostname()),\n      host: _joi2['default'].string().hostname()['default']('0.0.0.0'),\n      port: _joi2['default'].number()['default'](5601),\n      maxPayloadBytes: _joi2['default'].number()['default'](1048576),\n      autoListen: _joi2['default'].boolean()['default'](true),\n      defaultRoute: _joi2['default'].string()['default']('/app/kibana').regex(/^\\//, 'start with a slash'),\n      basePath: _joi2['default'].string()['default']('').allow('').regex(/(^$|^\\/.*[^\\/]$)/, 'start with a slash, don\\'t end with one'),\n      ssl: _joi2['default'].object({\n        cert: _joi2['default'].string(),\n        key: _joi2['default'].string()\n      })['default'](),\n      cors: _joi2['default'].when('$dev', {\n        is: true,\n        then: _joi2['default'].object()['default']({\n          origin: ['*://localhost:9876'] // karma test server\n        }),\n        otherwise: _joi2['default'].boolean()['default'](false)\n      }),\n      xsrf: _joi2['default'].object({\n        disableProtection: _joi2['default'].boolean()['default'](false),\n        token: _joi2['default'].string().optional().notes('Deprecated')\n      })['default']()\n    })['default'](),\n\n    logging: _joi2['default'].object().keys({\n      silent: _joi2['default'].boolean()['default'](false),\n\n      quiet: _joi2['default'].boolean().when('silent', {\n        is: true,\n        then: _joi2['default']['default'](true).valid(true),\n        otherwise: _joi2['default']['default'](false)\n      }),\n\n      verbose: _joi2['default'].boolean().when('quiet', {\n        is: true,\n        then: _joi2['default'].valid(false)['default'](false),\n        otherwise: _joi2['default']['default'](false)\n      }),\n\n      events: _joi2['default'].any()['default']({}),\n      dest: _joi2['default'].string()['default']('stdout'),\n      filter: _joi2['default'].any()['default']({}),\n      json: _joi2['default'].boolean().when('dest', {\n        is: 'stdout',\n        then: _joi2['default']['default'](!process.stdout.isTTY),\n        otherwise: _joi2['default']['default'](true)\n      })\n    })['default'](),\n\n    ops: _joi2['default'].object({\n      interval: _joi2['default'].number()['default'](5000)\n    }),\n\n    plugins: _joi2['default'].object({\n      paths: _joi2['default'].array().items(_joi2['default'].string())['default']([]),\n      scanDirs: _joi2['default'].array().items(_joi2['default'].string())['default']([]),\n      initialize: _joi2['default'].boolean()['default'](true)\n    })['default'](),\n\n    path: _joi2['default'].object({\n      data: _joi2['default'].string()['default']((0, _path3.getData)())\n    })['default'](),\n\n    optimize: _joi2['default'].object({\n      enabled: _joi2['default'].boolean()['default'](true),\n      bundleFilter: _joi2['default'].string()['default']('!tests'),\n      bundleDir: _joi2['default'].string()['default']((0, _utils.fromRoot)('optimize/bundles')),\n      viewCaching: _joi2['default'].boolean()['default'](_joi2['default'].ref('$prod')),\n      lazy: _joi2['default'].boolean()['default'](false),\n      lazyPort: _joi2['default'].number()['default'](5602),\n      lazyHost: _joi2['default'].string().hostname()['default']('localhost'),\n      lazyPrebuild: _joi2['default'].boolean()['default'](false),\n      lazyProxyTimeout: _joi2['default'].number()['default'](5 * 60000),\n      useBundleCache: _joi2['default'].boolean()['default'](_joi2['default'].ref('$prod')),\n      unsafeCache: _joi2['default'].alternatives()['try'](_joi2['default'].boolean(), _joi2['default'].string().regex(/^\\/.+\\/$/))['default']('/[\\\\/\\\\\\\\](node_modules|bower_components)[\\\\/\\\\\\\\]/'),\n      sourceMaps: _joi2['default'].alternatives()['try'](_joi2['default'].string().required(), _joi2['default'].boolean())['default'](_joi2['default'].ref('$dev')),\n      profile: _joi2['default'].boolean()['default'](false)\n    })['default'](),\n\n    status: _joi2['default'].object({\n      allowAnonymous: _joi2['default'].boolean()['default'](false)\n    })['default']()\n\n  })['default']();\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9jb25maWcvc2NoZW1hLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7bUJBQWdCLEtBQUs7Ozs7a0JBQ04sSUFBSTs7OztvQkFDRixNQUFNOzs7O3NCQUNILFFBQVE7O3NCQUNBLFFBQVE7O2tCQUNyQixJQUFJOzs7O3FCQUVNLGFBQWE7O3FCQUNkLFNBQVM7O0FBRWpDLE1BQU0sQ0FBQyxPQUFPLEdBQUc7U0FBTSxpQkFBSSxNQUFNLENBQUM7QUFDaEMsT0FBRyxFQUFFLGlCQUFJLE1BQU0sQ0FBQztBQUNkLGFBQU8sRUFBRSxpQkFBSSxNQUFNLEVBQUUsV0FBUSxDQUFDLGlCQUFJLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUNsRCxjQUFRLEVBQUUsaUJBQUksTUFBTSxFQUFFLFdBQVEsQ0FBQyxpQkFBSSxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDcEQsY0FBUSxFQUFFLGlCQUFJLE1BQU0sRUFBRSxXQUFRLENBQUMsaUJBQUksR0FBRyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0tBQ3JELENBQUMsV0FBUSxFQUFFOztBQUVaLE9BQUcsRUFBRSxpQkFBSSxNQUFNLENBQUM7QUFDZCxVQUFJLEVBQUUsaUJBQUksTUFBTSxFQUFFLFdBQVEsQ0FBQyxpQkFBSSxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDM0MsU0FBRyxFQUFFLGlCQUFJLE9BQU8sRUFBRSxXQUFRLENBQUMsaUJBQUksR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQzNDLFVBQUksRUFBRSxpQkFBSSxPQUFPLEVBQUUsV0FBUSxDQUFDLGlCQUFJLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQztLQUM5QyxDQUFDLFdBQVEsRUFBRTs7QUFFWixPQUFHLEVBQUUsaUJBQUksTUFBTSxDQUFDO0FBQ2QseUJBQW1CLEVBQUUsaUJBQUksTUFBTSxFQUFFLFdBQVEsQ0FBQyxJQUFJLENBQUM7S0FDaEQsQ0FBQyxXQUFRLEVB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QUFRLENBQUMsS0FBSyxDQUFDO0tBQzdDLENBQUMsV0FBUSxFQUFFOztHQUViLENBQUMsV0FBUSxFQUFFO0NBQUEsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9zZXJ2ZXIvY29uZmlnL3NjaGVtYS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBKb2kgZnJvbSAnam9pJztcbmltcG9ydCBmcyBmcm9tICdmcyc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCB7IGdldCB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgeyByYW5kb21CeXRlcyB9IGZyb20gJ2NyeXB0byc7XG5pbXBvcnQgb3MgZnJvbSAnb3MnO1xuXG5pbXBvcnQgeyBmcm9tUm9vdCB9IGZyb20gJy4uLy4uL3V0aWxzJztcbmltcG9ydCB7IGdldERhdGEgfSBmcm9tICcuLi9wYXRoJztcblxubW9kdWxlLmV4cG9ydHMgPSAoKSA9PiBKb2kub2JqZWN0KHtcbiAgcGtnOiBKb2kub2JqZWN0KHtcbiAgICB2ZXJzaW9uOiBKb2kuc3RyaW5nKCkuZGVmYXVsdChKb2kucmVmKCckdmVyc2lvbicpKSxcbiAgICBidWlsZE51bTogSm9pLm51bWJlcigpLmRlZmF1bHQoSm9pLnJlZignJGJ1aWxkTnVtJykpLFxuICAgIGJ1aWxkU2hhOiBKb2kuc3RyaW5nKCkuZGVmYXVsdChKb2kucmVmKCckYnVpbGRTaGEnKSksXG4gIH0pLmRlZmF1bHQoKSxcblxuICBlbnY6IEpvaS5vYmplY3Qoe1xuICAgIG5hbWU6IEpvaS5zdHJpbmcoKS5kZWZhdWx0KEpvaS5yZWYoJyRlbnYnKSksXG4gICAgZGV2OiBKb2kuYm9vbGVhbigpLmRlZmF1bHQoSm9pLnJlZignJGRldicpKSxcbiAgICBwcm9kOiBKb2kuYm9vbGVhbigpLmRlZmF1bHQoSm9pLnJlZignJHByb2QnKSlcbiAgfSkuZGVmYXVsdCgpLFxuXG4gIGRldjogSm9pLm9iamVjdCh7XG4gICAgYmFzZVBhdGhQcm94eVRhcmdldDogSm9pLm51bWJlcigpLmRlZmF1bHQoNTYwMyksXG4gIH0pLmRlZmF1bHQoKSxcblxuICBwaWQ6IEpvaS5vYmplY3Qoe1xuICAgIGZpbGU6IEpvaS5zdHJpbmcoKSxcbiAgICBleGNsdXNpdmU6IEpvaS5ib29sZWFuKCkuZGVmYXVsdChmYWxzZSlcbiAgfSkuZGVmYXVsdCgpLFxuXG4gIHV1aWQ6IEpvaS5zdHJpbmcoKS5ndWlkKCkuZGVmYXVsdCgpLFxuXG4gIHNlcnZlcjogSm9pLm9iamVjdCh7XG4gICAgbmFtZTogSm9pLnN0cmluZygpLmRlZmF1bHQob3MuaG9zdG5hbWUoKSksXG4gICAgaG9zdDogSm9pLnN0cmluZygpLmhvc3RuYW1lKCkuZGVmYXVsdCgnMC4wLjAuMCcpLFxuICAgIHBvcnQ6IEpvaS5udW1iZXIoKS5kZWZhdWx0KDU2MDEpLFxuICAgIG1heFBheWxvYWRCeXRlczogSm9pLm51bWJlcigpLmRlZmF1bHQoMTA0ODU3NiksXG4gICAgYXV0b0xpc3RlbjogSm9pLmJvb2xlYW4oKS5kZWZhdWx0KHRydWUpLFxuICAgIGRlZmF1bHRSb3V0ZTogSm9pLnN0cmluZygpLmRlZmF1bHQoJy9hcHAva2liYW5hJykucmVnZXgoL15cXC8vLCBgc3RhcnQgd2l0aCBhIHNsYXNoYCksXG4gICAgYmFzZVBhdGg6IEpvaS5zdHJpbmcoKS5kZWZhdWx0KCcnKS5hbGxvdygnJykucmVnZXgoLyheJHxeXFwvLipbXlxcL10kKS8sIGBzdGFydCB3aXRoIGEgc2xhc2gsIGRvbid0IGVuZCB3aXRoIG9uZWApLFxuICAgIHNzbDogSm9pLm9iamVjdCh7XG4gICAgICBjZXJ0OiBKb2kuc3RyaW5nKCksXG4gICAgICBrZXk6IEpvaS5zdHJpbmcoKVxuICAgIH0pLmRlZmF1bHQoKSxcbiAgICBjb3JzOiBKb2kud2hlbignJGRldicsIHtcbiAgICAgIGlzOiB0cnVlLFxuICAgICAgdGhlbjogSm9pLm9iamVjdCgpLmRlZmF1bHQoe1xuICAgICAgICBvcmlnaW46IFsnKjovL2xvY2FsaG9zdDo5ODc2J10gLy8ga2FybWEgdGVzdCBzZXJ2ZXJcbiAgICAgIH0pLFxuICAgICAgb3RoZXJ3aXNlOiBKb2kuYm9vbGVhbigpLmRlZmF1bHQoZmFsc2UpXG4gICAgfSksXG4gICAgeHNyZjogSm9pLm9iamVjdCh7XG4gICAgICBkaXNhYmxlUHJvdGVjdGlvbjogSm9pLmJvb2xlYW4oKS5kZWZhdWx0KGZhbHNlKSxcbiAgICAgIHRva2VuOiBKb2kuc3RyaW5nKCkub3B0aW9uYWwoKS5ub3RlcygnRGVwcmVjYXRlZCcpXG4gICAgfSkuZGVmYXVsdCgpLFxuICB9KS5kZWZhdWx0KCksXG5cbiAgbG9nZ2luZzogSm9pLm9iamVjdCgpLmtleXMoe1xuICAgIHNpbGVudDogSm9pLmJvb2xlYW4oKS5kZWZhdWx0KGZhbHNlKSxcblxuICAgIHF1aWV0OiBKb2kuYm9vbGVhbigpXG4gICAgLndoZW4oJ3NpbGVudCcsIHtcbiAgICAgIGlzOiB0cnVlLFxuICAgICAgdGhlbjogSm9pLmRlZmF1bHQodHJ1ZSkudmFsaWQodHJ1ZSksXG4gICAgICBvdGhlcndpc2U6IEpvaS5kZWZhdWx0KGZhbHNlKVxuICAgIH0pLFxuXG4gICAgdmVyYm9zZTogSm9pLmJvb2xlYW4oKVxuICAgIC53aGVuKCdxdWlldCcsIHtcbiAgICAgIGlzOiB0cnVlLFxuICAgICAgdGhlbjogSm9pLnZhbGlkKGZhbHNlKS5kZWZhdWx0KGZhbHNlKSxcbiAgICAgIG90aGVyd2lzZTogSm9pLmRlZmF1bHQoZmFsc2UpXG4gICAgfSksXG5cbiAgICBldmVudHM6IEpvaS5hbnkoKS5kZWZhdWx0KHt9KSxcbiAgICBkZXN0OiBKb2kuc3RyaW5nKCkuZGVmYXVsdCgnc3Rkb3V0JyksXG4gICAgZmlsdGVyOiBKb2kuYW55KCkuZGVmYXVsdCh7fSksXG4gICAganNvbjogSm9pLmJvb2xlYW4oKVxuICAgIC53aGVuKCdkZXN0Jywge1xuICAgICAgaXM6ICdzdGRvdXQnLFxuICAgICAgdGhlbjogSm9pLmRlZmF1bHQoIXByb2Nlc3Muc3Rkb3V0LmlzVFRZKSxcbiAgICAgIG90aGVyd2lzZTogSm9pLmRlZmF1bHQodHJ1ZSlcbiAgICB9KVxuICB9KVxuICAuZGVmYXVsdCgpLFxuXG4gIG9wczogSm9pLm9iamVjdCh7XG4gICAgaW50ZXJ2YWw6IEpvaS5udW1iZXIoKS5kZWZhdWx0KDUwMDApLFxuICB9KSxcblxuICBwbHVnaW5zOiBKb2kub2JqZWN0KHtcbiAgICBwYXRoczogSm9pLmFycmF5KCkuaXRlbXMoSm9pLnN0cmluZygpKS5kZWZhdWx0KFtdKSxcbiAgICBzY2FuRGlyczogSm9pLmFycmF5KCkuaXRlbXMoSm9pLnN0cmluZygpKS5kZWZhdWx0KFtdKSxcbiAgICBpbml0aWFsaXplOiBKb2kuYm9vbGVhbigpLmRlZmF1bHQodHJ1ZSlcbiAgfSkuZGVmYXVsdCgpLFxuXG4gIHBhdGg6IEpvaS5vYmplY3Qoe1xuICAgIGRhdGE6IEpvaS5zdHJpbmcoKS5kZWZhdWx0KGdldERhdGEoKSlcbiAgfSkuZGVmYXVsdCgpLFxuXG4gIG9wdGltaXplOiBKb2kub2JqZWN0KHtcbiAgICBlbmFibGVkOiBKb2kuYm9vbGVhbigpLmRlZmF1bHQodHJ1ZSksXG4gICAgYnVuZGxlRmlsdGVyOiBKb2kuc3RyaW5nKCkuZGVmYXVsdCgnIXRlc3RzJyksXG4gICAgYnVuZGxlRGlyOiBKb2kuc3RyaW5nKCkuZGVmYXVsdChmcm9tUm9vdCgnb3B0aW1pemUvYnVuZGxlcycpKSxcbiAgICB2aWV3Q2FjaGluZzogSm9pLmJvb2xlYW4oKS5kZWZhdWx0KEpvaS5yZWYoJyRwcm9kJykpLFxuICAgIGxhenk6IEpvaS5ib29sZWFuKCkuZGVmYXVsdChmYWxzZSksXG4gICAgbGF6eVBvcnQ6IEpvaS5udW1iZXIoKS5kZWZhdWx0KDU2MDIpLFxuICAgIGxhenlIb3N0OiBKb2kuc3RyaW5nKCkuaG9zdG5hbWUoKS5kZWZhdWx0KCdsb2NhbGhvc3QnKSxcbiAgICBsYXp5UHJlYnVpbGQ6IEpvaS5ib29sZWFuKCkuZGVmYXVsdChmYWxzZSksXG4gICAgbGF6eVByb3h5VGltZW91dDogSm9pLm51bWJlcigpLmRlZmF1bHQoNSAqIDYwMDAwKSxcbiAgICB1c2VCdW5kbGVDYWNoZTogSm9pLmJvb2xlYW4oKS5kZWZhdWx0KEpvaS5yZWYoJyRwcm9kJykpLFxuICAgIHVuc2FmZUNhY2hlOiBKb2lcbiAgICAgIC5hbHRlcm5hdGl2ZXMoKVxuICAgICAgLnRyeShcbiAgICAgICAgSm9pLmJvb2xlYW4oKSxcbiAgICAgICAgSm9pLnN0cmluZygpLnJlZ2V4KC9eXFwvLitcXC8kLylcbiAgICAgIClcbiAgICAgIC5kZWZhdWx0KCcvW1xcXFwvXFxcXFxcXFxdKG5vZGVfbW9kdWxlc3xib3dlcl9jb21wb25lbnRzKVtcXFxcL1xcXFxcXFxcXS8nKSxcbiAgICBzb3VyY2VNYXBzOiBKb2lcbiAgICAgIC5hbHRlcm5hdGl2ZXMoKVxuICAgICAgLnRyeShcbiAgICAgICAgSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gICAgICAgIEpvaS5ib29sZWFuKClcbiAgICAgIClcbiAgICAgIC5kZWZhdWx0KEpvaS5yZWYoJyRkZXYnKSksXG4gICAgcHJvZmlsZTogSm9pLmJvb2xlYW4oKS5kZWZhdWx0KGZhbHNlKVxuICB9KS5kZWZhdWx0KCksXG5cbiAgc3RhdHVzOiBKb2kub2JqZWN0KHtcbiAgICBhbGxvd0Fub255bW91czogSm9pLmJvb2xlYW4oKS5kZWZhdWx0KGZhbHNlKVxuICB9KS5kZWZhdWx0KClcblxufSkuZGVmYXVsdCgpO1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/config/schema.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/src/server/config/schema.js",
      "sourcesContent": [
        "import Joi from 'joi';\nimport fs from 'fs';\nimport path from 'path';\nimport { get } from 'lodash';\nimport { randomBytes } from 'crypto';\nimport os from 'os';\n\nimport { fromRoot } from '../../utils';\nimport { getData } from '../path';\n\nmodule.exports = () => Joi.object({\n  pkg: Joi.object({\n    version: Joi.string().default(Joi.ref('$version')),\n    buildNum: Joi.number().default(Joi.ref('$buildNum')),\n    buildSha: Joi.string().default(Joi.ref('$buildSha')),\n  }).default(),\n\n  env: Joi.object({\n    name: Joi.string().default(Joi.ref('$env')),\n    dev: Joi.boolean().default(Joi.ref('$dev')),\n    prod: Joi.boolean().default(Joi.ref('$prod'))\n  }).default(),\n\n  dev: Joi.object({\n    basePathProxyTarget: Joi.number().default(5603),\n  }).default(),\n\n  pid: Joi.object({\n    file: Joi.string(),\n    exclusive: Joi.boolean().default(false)\n  }).default(),\n\n  uuid: Joi.string().guid().default(),\n\n  server: Joi.object({\n    name: Joi.string().default(os.hostname()),\n    host: Joi.string().hostname().default('0.0.0.0'),\n    port: Joi.number().default(5601),\n    maxPayloadBytes: Joi.number().default(1048576),\n    autoListen: Joi.boolean().default(true),\n    defaultRoute: Joi.string().default('/app/kibana').regex(/^\\//, `start with a slash`),\n    basePath: Joi.string().default('').allow('').regex(/(^$|^\\/.*[^\\/]$)/, `start with a slash, don't end with one`),\n    ssl: Joi.object({\n      cert: Joi.string(),\n      key: Joi.string()\n    }).default(),\n    cors: Joi.when('$dev', {\n      is: true,\n      then: Joi.object().default({\n        origin: ['*://localhost:9876'] // karma test server\n      }),\n      otherwise: Joi.boolean().default(false)\n    }),\n    xsrf: Joi.object({\n      disableProtection: Joi.boolean().default(false),\n      token: Joi.string().optional().notes('Deprecated')\n    }).default(),\n  }).default(),\n\n  logging: Joi.object().keys({\n    silent: Joi.boolean().default(false),\n\n    quiet: Joi.boolean()\n    .when('silent', {\n      is: true,\n      then: Joi.default(true).valid(true),\n      otherwise: Joi.default(false)\n    }),\n\n    verbose: Joi.boolean()\n    .when('quiet', {\n      is: true,\n      then: Joi.valid(false).default(false),\n      otherwise: Joi.default(false)\n    }),\n\n    events: Joi.any().default({}),\n    dest: Joi.string().default('stdout'),\n    filter: Joi.any().default({}),\n    json: Joi.boolean()\n    .when('dest', {\n      is: 'stdout',\n      then: Joi.default(!process.stdout.isTTY),\n      otherwise: Joi.default(true)\n    })\n  })\n  .default(),\n\n  ops: Joi.object({\n    interval: Joi.number().default(5000),\n  }),\n\n  plugins: Joi.object({\n    paths: Joi.array().items(Joi.string()).default([]),\n    scanDirs: Joi.array().items(Joi.string()).default([]),\n    initialize: Joi.boolean().default(true)\n  }).default(),\n\n  path: Joi.object({\n    data: Joi.string().default(getData())\n  }).default(),\n\n  optimize: Joi.object({\n    enabled: Joi.boolean().default(true),\n    bundleFilter: Joi.string().default('!tests'),\n    bundleDir: Joi.string().default(fromRoot('optimize/bundles')),\n    viewCaching: Joi.boolean().default(Joi.ref('$prod')),\n    lazy: Joi.boolean().default(false),\n    lazyPort: Joi.number().default(5602),\n    lazyHost: Joi.string().hostname().default('localhost'),\n    lazyPrebuild: Joi.boolean().default(false),\n    lazyProxyTimeout: Joi.number().default(5 * 60000),\n    useBundleCache: Joi.boolean().default(Joi.ref('$prod')),\n    unsafeCache: Joi\n      .alternatives()\n      .try(\n        Joi.boolean(),\n        Joi.string().regex(/^\\/.+\\/$/)\n      )\n      .default('/[\\\\/\\\\\\\\](node_modules|bower_components)[\\\\/\\\\\\\\]/'),\n    sourceMaps: Joi\n      .alternatives()\n      .try(\n        Joi.string().required(),\n        Joi.boolean()\n      )\n      .default(Joi.ref('$dev')),\n    profile: Joi.boolean().default(false)\n  }).default(),\n\n  status: Joi.object({\n    allowAnonymous: Joi.boolean().default(false)\n  }).default()\n\n}).default();\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/config/deep_clone_with_buffers.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "cloneDeep"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "cloneDeep",
                "local": "cloneDeep"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _lodash = require('lodash');\n\nfunction cloneBuffersCustomizer(val) {\n  if (Buffer.isBuffer(val)) {\n    return new Buffer(val);\n  }\n}\n\nexports['default'] = function (vals) {\n  return (0, _lodash.cloneDeep)(vals, cloneBuffersCustomizer);\n};\n\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9jb25maWcvZGVlcF9jbG9uZV93aXRoX2J1ZmZlcnMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O3NCQUEwQixRQUFROztBQUVsQyxTQUFTLHNCQUFzQixDQUFDLEdBQUcsRUFBRTtBQUNuQyxNQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLEVBQUU7QUFDeEIsV0FBTyxJQUFJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQztHQUN4QjtDQUNGOztxQkFFYyxVQUFVLElBQUksRUFBRTtBQUM3QixTQUFPLHVCQUFVLElBQUksRUFBRSxzQkFBc0IsQ0FBQyxDQUFDO0NBQ2hEOztBQUFBLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvc2VydmVyL2NvbmZpZy9kZWVwX2Nsb25lX3dpdGhfYnVmZmVycy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNsb25lRGVlcCB9IGZyb20gJ2xvZGFzaCc7XG5cbmZ1bmN0aW9uIGNsb25lQnVmZmVyc0N1c3RvbWl6ZXIodmFsKSB7XG4gIGlmIChCdWZmZXIuaXNCdWZmZXIodmFsKSkge1xuICAgIHJldHVybiBuZXcgQnVmZmVyKHZhbCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKHZhbHMpIHtcbiAgcmV0dXJuIGNsb25lRGVlcCh2YWxzLCBjbG9uZUJ1ZmZlcnNDdXN0b21pemVyKTtcbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/config/deep_clone_with_buffers.js"
      ],
      "names": [],
      "mappings": ";;;;;;sBAA0B,QAAQ;;AAElC,SAAS,sBAAsB,CAAC,GAAG,EAAE;AACnC,MAAI,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE;AACxB,WAAO,IAAI,MAAM,CAAC,GAAG,CAAC,CAAC;GACxB;CACF;;qBAEc,UAAU,IAAI,EAAE;AAC7B,SAAO,uBAAU,IAAI,EAAE,sBAAsB,CAAC,CAAC;CAChD;;AAAA,CAAC",
      "file": "/home/vio/v3metrics/src/server/config/deep_clone_with_buffers.js",
      "sourcesContent": [
        "import { cloneDeep } from 'lodash';\n\nfunction cloneBuffersCustomizer(val) {\n  if (Buffer.isBuffer(val)) {\n    return new Buffer(val);\n  }\n}\n\nexport default function (vals) {\n  return cloneDeep(vals, cloneBuffersCustomizer);\n};\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/logging/configuration.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "./log_reporter",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "logReporter"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "loggingConfiguration",
            "config"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "loggingConfiguration",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "config",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = loggingConfiguration;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _log_reporter = require('./log_reporter');\n\nvar _log_reporter2 = _interopRequireDefault(_log_reporter);\n\nfunction loggingConfiguration(config) {\n  var events = config.get('logging.events');\n\n  if (config.get('logging.silent')) {\n    _lodash2['default'].defaults(events, {});\n  } else if (config.get('logging.quiet')) {\n    _lodash2['default'].defaults(events, {\n      log: ['listening', 'error', 'fatal'],\n      request: ['error'],\n      error: '*'\n    });\n  } else if (config.get('logging.verbose')) {\n    _lodash2['default'].defaults(events, {\n      log: '*',\n      ops: '*',\n      request: '*',\n      response: '*',\n      error: '*'\n    });\n  } else {\n    _lodash2['default'].defaults(events, {\n      log: ['info', 'warning', 'error', 'fatal'],\n      response: config.get('logging.json') ? '*' : '!',\n      request: ['info', 'warning', 'error', 'fatal'],\n      error: '*'\n    });\n  }\n\n  var options = {\n    opsInterval: config.get('ops.interval'),\n    requestHeaders: true,\n    requestPayload: true,\n    reporters: [{\n      reporter: _log_reporter2['default'],\n      config: {\n        json: config.get('logging.json'),\n        dest: config.get('logging.dest'),\n        // I'm adding the default here because if you add another filter\n        // using the commandline it will remove authorization. I want users\n        // to have to explicitly set --logging.filter.authorization=none to\n        // have it show up int he logs.\n        filter: _lodash2['default'].defaults(config.get('logging.filter'), {\n          authorization: 'remove'\n        })\n      },\n      events: _lodash2['default'].transform(events, function (filtered, val, key) {\n        // provide a string compatible way to remove events\n        if (val !== '!') filtered[key] = val;\n      }, {})\n    }]\n  };\n  return options;\n}\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9sb2dnaW5nL2NvbmZpZ3VyYXRpb24uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7cUJBR3dCLG9CQUFvQjs7OztzQkFIOUIsUUFBUTs7Ozs0QkFDRSxnQkFBZ0I7Ozs7QUFFekIsU0FBUyxvQkFBb0IsQ0FBQyxNQUFNLEVBQUU7QUFDbkQsTUFBSSxNQUFNLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDOztBQUUxQyxNQUFJLE1BQU0sQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLENBQUMsRUFBRTtBQUNoQyx3QkFBRSxRQUFRLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0dBQ3hCLE1BQ0ksSUFBSSxNQUFNLENBQUMsR0FBRyxDQUFDLGVBQWUsQ0FBQyxFQUFFO0FBQ3BDLHdCQUFFLFFBQVEsQ0FBQyxNQUFNLEVBQUU7QUFDakIsU0FBRyxFQUFFLENBQUMsV0FBVyxFQUFFLE9BQU8sRUFBRSxPQUFPLENBQUM7QUFDcEMsYUFBTyxFQUFFLENBQUMsT0FBTyxDQUFDO0FBQ2xCLFdBQUssRUFBRSxHQUFHO0tBQ1gsQ0FBQyxDQUFDO0dBQ0osTUFDSSxJQUFJLE1BQU0sQ0FBQyxHQUFHLENBQUMsaUJBQWlCLENBQUMsRUFBRTtBQUN0Qyx3QkFBRSxRQUFRLENBQUMsTUFBTSxFQUFFO0FBQ2pCLFNBQUcsRUFBRSxHQUFHO0FBQ1IsU0FBRyxFQUFFLEdBQUc7QUFDUixhQUFPLEVBQUUsR0FBRztBQUNaLGNBQVEsRUFBRSxHQUFHO0FBQ2IsV0FBSyxFQUFFLEdBQUc7S0FDWCxDQUFDLENBQUM7R0FDSixNQUNJO0FBQ0gsd0JBQUUsUUFBUSxDQUFDLE1BQU0sRUFBRTtBQUNqQixTQUFHLEVBQUUsQ0FBQyxNQUFNLEVBQUUsU0FBUyxFQUFFLE9BQU8sRUFBRSxPQUFPLENBQUM7QUFDMUMsY0FBUSxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsY0FBYyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUc7QUFDaEQsYUFBTyxFQUFFLENBQUMsTUFBTSxFQUFFLFNBQVMsRUFBRSxPQUFPLEVBQUUsT0FBTyxDQUFDO0FBQzlDLFdBQUssRUFBRSxHQUFHO0tBQ1gsQ0FBQyxDQUFDO0dBQ0o7O0FBRUQsTUFBTSxPQUFPLEdBQUc7QUFDZCxlQUFXLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUM7QUFDdkMsa0JBQWMsRUFBRSxJQUFJO0FBQ3BCLGtCQUFjLEVBQUUsSUFBSTtBQUNwQixhQUFTLEVBQUUsQ0FDVDtBQUNFLGNBQVEsMkJBQWE7QUFDckIsWUFBTSxFQUFFO0FBQ04sWUFBSSxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsY0FBYyxDQUFDO0FBQ2hDLFlBQUksRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQzs7Ozs7QUFLaEMsY0FBTSxFQUFFLG9CQUFFLFFBQVEsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLGdCQUFnQixDQUFDLEVBQUU7QUFDL0MsdUJBQWEsRUFBRSxRQUFRO1NBQ3hCLENBQUM7T0FDSDtBQUNELFlBQU0sRUFBRSxvQkFBRSxTQUFTLENBQUMsTUFBTSxFQUFFLFVBQVUsUUFBUSxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUU7O0FBRXhELFlBQUksR0FBRyxLQUFLLEdBQUcsRUFBRSxRQUFRLENBQUMsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDO09BQ3RDLEVBQUUsRUFBRSxDQUFDO0tBQ1AsQ0FDRjtHQUNGLENBQUM7QUFDRixTQUFPLE9BQU8sQ0FBQztDQUNoQiIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9zZXJ2ZXIvbG9nZ2luZy9jb25maWd1cmF0aW9uLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBsb2dSZXBvcnRlciBmcm9tICcuL2xvZ19yZXBvcnRlcic7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGxvZ2dpbmdDb25maWd1cmF0aW9uKGNvbmZpZykge1xuICBsZXQgZXZlbnRzID0gY29uZmlnLmdldCgnbG9nZ2luZy5ldmVudHMnKTtcblxuICBpZiAoY29uZmlnLmdldCgnbG9nZ2luZy5zaWxlbnQnKSkge1xuICAgIF8uZGVmYXVsdHMoZXZlbnRzLCB7fSk7XG4gIH1cbiAgZWxzZSBpZiAoY29uZmlnLmdldCgnbG9nZ2luZy5xdWlldCcpKSB7XG4gICAgXy5kZWZhdWx0cyhldmVudHMsIHtcbiAgICAgIGxvZzogWydsaXN0ZW5pbmcnLCAnZXJyb3InLCAnZmF0YWwnXSxcbiAgICAgIHJlcXVlc3Q6IFsnZXJyb3InXSxcbiAgICAgIGVycm9yOiAnKidcbiAgICB9KTtcbiAgfVxuICBlbHNlIGlmIChjb25maWcuZ2V0KCdsb2dnaW5nLnZlcmJvc2UnKSkge1xuICAgIF8uZGVmYXVsdHMoZXZlbnRzLCB7XG4gICAgICBsb2c6ICcqJyxcbiAgICAgIG9wczogJyonLFxuICAgICAgcmVxdWVzdDogJyonLFxuICAgICAgcmVzcG9uc2U6ICcqJyxcbiAgICAgIGVycm9yOiAnKidcbiAgICB9KTtcbiAgfVxuICBlbHNlIHtcbiAgICBfLmRlZmF1bHRzKGV2ZW50cywge1xuICAgICAgbG9nOiBbJ2luZm8nLCAnd2FybmluZycsICdlcnJvcicsICdmYXRhbCddLFxuICAgICAgcmVzcG9uc2U6IGNvbmZpZy5nZXQoJ2xvZ2dpbmcuanNvbicpID8gJyonIDogJyEnLFxuICAgICAgcmVxdWVzdDogWydpbmZvJywgJ3dhcm5pbmcnLCAnZXJyb3InLCAnZmF0YWwnXSxcbiAgICAgIGVycm9yOiAnKidcbiAgICB9KTtcbiAgfVxuXG4gIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgb3BzSW50ZXJ2YWw6IGNvbmZpZy5nZXQoJ29wcy5pbnRlcnZhbCcpLFxuICAgIHJlcXVlc3RIZWFkZXJzOiB0cnVlLFxuICAgIHJlcXVlc3RQYXlsb2FkOiB0cnVlLFxuICAgIHJlcG9ydGVyczogW1xuICAgICAge1xuICAgICAgICByZXBvcnRlcjogbG9nUmVwb3J0ZXIsXG4gICAgICAgIGNvbmZpZzoge1xuICAgICAgICAgIGpzb246IGNvbmZpZy5nZXQoJ2xvZ2dpbmcuanNvbicpLFxuICAgICAgICAgIGRlc3Q6IGNvbmZpZy5nZXQoJ2xvZ2dpbmcuZGVzdCcpLFxuICAgICAgICAgIC8vIEknbSBhZGRpbmcgdGhlIGRlZmF1bHQgaGVyZSBiZWNhdXNlIGlmIHlvdSBhZGQgYW5vdGhlciBmaWx0ZXJcbiAgICAgICAgICAvLyB1c2luZyB0aGUgY29tbWFuZGxpbmUgaXQgd2lsbCByZW1vdmUgYXV0aG9yaXphdGlvbi4gSSB3YW50IHVzZXJzXG4gICAgICAgICAgLy8gdG8gaGF2ZSB0byBleHBsaWNpdGx5IHNldCAtLWxvZ2dpbmcuZmlsdGVyLmF1dGhvcml6YXRpb249bm9uZSB0b1xuICAgICAgICAgIC8vIGhhdmUgaXQgc2hvdyB1cCBpbnQgaGUgbG9ncy5cbiAgICAgICAgICBmaWx0ZXI6IF8uZGVmYXVsdHMoY29uZmlnLmdldCgnbG9nZ2luZy5maWx0ZXInKSwge1xuICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogJ3JlbW92ZSdcbiAgICAgICAgICB9KVxuICAgICAgICB9LFxuICAgICAgICBldmVudHM6IF8udHJhbnNmb3JtKGV2ZW50cywgZnVuY3Rpb24gKGZpbHRlcmVkLCB2YWwsIGtleSkge1xuICAgICAgICAgIC8vIHByb3ZpZGUgYSBzdHJpbmcgY29tcGF0aWJsZSB3YXkgdG8gcmVtb3ZlIGV2ZW50c1xuICAgICAgICAgIGlmICh2YWwgIT09ICchJykgZmlsdGVyZWRba2V5XSA9IHZhbDtcbiAgICAgICAgfSwge30pXG4gICAgICB9XG4gICAgXVxuICB9O1xuICByZXR1cm4gb3B0aW9ucztcbn1cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/logging/configuration.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAGwB,oBAAoB;;;;sBAH9B,QAAQ;;;;4BACE,gBAAgB;;;;AAEzB,SAAS,oBAAoB,CAAC,MAAM,EAAE;AACnD,MAAI,MAAM,GAAG,MAAM,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;;AAE1C,MAAI,MAAM,CAAC,GAAG,CAAC,gBAAgB,CAAC,EAAE;AAChC,wBAAE,QAAQ,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;GACxB,MACI,IAAI,MAAM,CAAC,GAAG,CAAC,eAAe,CAAC,EAAE;AACpC,wBAAE,QAAQ,CAAC,MAAM,EAAE;AACjB,SAAG,EAAE,CAAC,WAAW,EAAE,OAAO,EAAE,OAAO,CAAC;AACpC,aAAO,EAAE,CAAC,OAAO,CAAC;AAClB,WAAK,EAAE,GAAG;KACX,CAAC,CAAC;GACJ,MACI,IAAI,MAAM,CAAC,GAAG,CAAC,iBAAiB,CAAC,EAAE;AACtC,wBAAE,QAAQ,CAAC,MAAM,EAAE;AACjB,SAAG,EAAE,GAAG;AACR,SAAG,EAAE,GAAG;AACR,aAAO,EAAE,GAAG;AACZ,cAAQ,EAAE,GAAG;AACb,WAAK,EAAE,GAAG;KACX,CAAC,CAAC;GACJ,MACI;AACH,wBAAE,QAAQ,CAAC,MAAM,EAAE;AACjB,SAAG,EAAE,CAAC,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,OAAO,CAAC;AAC1C,cAAQ,EAAE,MAAM,CAAC,GAAG,CAAC,cAAc,CAAC,GAAG,GAAG,GAAG,GAAG;AAChD,aAAO,EAAE,CAAC,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,OAAO,CAAC;AAC9C,WAAK,EAAE,GAAG;KACX,CAAC,CAAC;GACJ;;AAED,MAAM,OAAO,GAAG;AACd,eAAW,EAAE,MAAM,CAAC,GAAG,CAAC,cAAc,CAAC;AACvC,kBAAc,EAAE,IAAI;AACpB,kBAAc,EAAE,IAAI;AACpB,aAAS,EAAE,CACT;AACE,cAAQ,2BAAa;AACrB,YAAM,EAAE;AACN,YAAI,EAAE,MAAM,CAAC,GAAG,CAAC,cAAc,CAAC;AAChC,YAAI,EAAE,MAAM,CAAC,GAAG,CAAC,cAAc,CAAC;;;;;AAKhC,cAAM,EAAE,oBAAE,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,gBAAgB,CAAC,EAAE;AAC/C,uBAAa,EAAE,QAAQ;SACxB,CAAC;OACH;AACD,YAAM,EAAE,oBAAE,SAAS,CAAC,MAAM,EAAE,UAAU,QAAQ,EAAE,GAAG,EAAE,GAAG,EAAE;;AAExD,YAAI,GAAG,KAAK,GAAG,EAAE,QAAQ,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC;OACtC,EAAE,EAAE,CAAC;KACP,CACF;GACF,CAAC;AACF,SAAO,OAAO,CAAC;CAChB",
      "file": "/home/vio/v3metrics/src/server/logging/configuration.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport logReporter from './log_reporter';\n\nexport default function loggingConfiguration(config) {\n  let events = config.get('logging.events');\n\n  if (config.get('logging.silent')) {\n    _.defaults(events, {});\n  }\n  else if (config.get('logging.quiet')) {\n    _.defaults(events, {\n      log: ['listening', 'error', 'fatal'],\n      request: ['error'],\n      error: '*'\n    });\n  }\n  else if (config.get('logging.verbose')) {\n    _.defaults(events, {\n      log: '*',\n      ops: '*',\n      request: '*',\n      response: '*',\n      error: '*'\n    });\n  }\n  else {\n    _.defaults(events, {\n      log: ['info', 'warning', 'error', 'fatal'],\n      response: config.get('logging.json') ? '*' : '!',\n      request: ['info', 'warning', 'error', 'fatal'],\n      error: '*'\n    });\n  }\n\n  const options = {\n    opsInterval: config.get('ops.interval'),\n    requestHeaders: true,\n    requestPayload: true,\n    reporters: [\n      {\n        reporter: logReporter,\n        config: {\n          json: config.get('logging.json'),\n          dest: config.get('logging.dest'),\n          // I'm adding the default here because if you add another filter\n          // using the commandline it will remove authorization. I want users\n          // to have to explicitly set --logging.filter.authorization=none to\n          // have it show up int he logs.\n          filter: _.defaults(config.get('logging.filter'), {\n            authorization: 'remove'\n          })\n        },\n        events: _.transform(events, function (filtered, val, key) {\n          // provide a string compatible way to remove events\n          if (val !== '!') filtered[key] = val;\n        }, {})\n      }\n    ]\n  };\n  return options;\n}\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/logging/log_reporter.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "./log_format_json",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "LogFormatJson"
              }
            ]
          },
          {
            "source": "./log_format_string",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "LogFormatString"
              }
            ]
          },
          {
            "source": "good-squeeze",
            "imported": [
              "Squeeze"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Squeeze",
                "local": "Squeeze"
              }
            ]
          },
          {
            "source": "fs",
            "imported": [
              "createWriteStream"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "createWriteStream",
                "local": "writeStr"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _log_format_json = require('./log_format_json');\n\nvar _log_format_json2 = _interopRequireDefault(_log_format_json);\n\nvar _log_format_string = require('./log_format_string');\n\nvar _log_format_string2 = _interopRequireDefault(_log_format_string);\n\nvar _goodSqueeze = require('good-squeeze');\n\nvar _fs = require('fs');\n\nmodule.exports = (function () {\n  function KbnLogger(events, config) {\n    _classCallCheck(this, KbnLogger);\n\n    this.squeeze = new _goodSqueeze.Squeeze(events);\n    this.format = config.json ? new _log_format_json2['default'](config) : new _log_format_string2['default'](config);\n\n    if (config.dest === 'stdout') {\n      this.dest = process.stdout;\n    } else {\n      this.dest = (0, _fs.createWriteStream)(config.dest, {\n        flags: 'a',\n        encoding: 'utf8'\n      });\n    }\n  }\n\n  _createClass(KbnLogger, [{\n    key: 'init',\n    value: function init(readstream, emitter, callback) {\n      var _this = this;\n\n      this.output = readstream.pipe(this.squeeze).pipe(this.format);\n      this.output.pipe(this.dest);\n\n      emitter.on('stop', function () {\n        _this.output.unpipe(_this.dest);\n      });\n\n      callback();\n    }\n  }]);\n\n  return KbnLogger;\n})();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9sb2dnaW5nL2xvZ19yZXBvcnRlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7OztzQkFBYyxRQUFROzs7OytCQUVJLG1CQUFtQjs7OztpQ0FDakIscUJBQXFCOzs7OzJCQUN6QixjQUFjOztrQkFDUSxJQUFJOztBQUVsRCxNQUFNLENBQUMsT0FBTztBQUNELFdBRFUsU0FBUyxDQUNsQixNQUFNLEVBQUUsTUFBTSxFQUFFOzBCQURQLFNBQVM7O0FBRTVCLFFBQUksQ0FBQyxPQUFPLEdBQUcseUJBQVksTUFBTSxDQUFDLENBQUM7QUFDbkMsUUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUMsSUFBSSxHQUFHLGlDQUFrQixNQUFNLENBQUMsR0FBRyxtQ0FBb0IsTUFBTSxDQUFDLENBQUM7O0FBRXBGLFFBQUksTUFBTSxDQUFDLElBQUksS0FBSyxRQUFRLEVBQUU7QUFDNUIsVUFBSSxDQUFDLElBQUksR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDO0tBQzVCLE1BQU07QUFDTCxVQUFJLENBQUMsSUFBSSxHQUFHLDJCQUFTLE1BQU0sQ0FBQyxJQUFJLEVBQUU7QUFDaEMsYUFBSyxFQUFFLEdBQUc7QUFDVixnQkFBUSxFQUFFLE1BQU07T0FDakIsQ0FBQyxDQUFDO0tBQ0o7R0FDRjs7ZUFib0IsU0FBUzs7V0FlMUIsY0FBQyxVQUFVLEVBQUUsT0FBTyxFQUFFLFFBQVEsRUFBRTs7O0FBRWxDLFVBQUksQ0FBQyxNQUFNLEdBQUcsVUFBVSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUM5RCxVQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7O0FBRTVCLGFBQU8sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLFlBQU07QUFDdkIsY0FBSyxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQUssSUFBSSxDQUFDLENBQUM7T0FDL0IsQ0FBQyxDQUFDOztBQUVILGNBQVEsRUFBRSxDQUFDO0tBQ1o7OztTQXpCb0IsU0FBUztJQTBCL0IsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9zZXJ2ZXIvbG9nZ2luZy9sb2dfcmVwb3J0ZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQgTG9nRm9ybWF0SnNvbiBmcm9tICcuL2xvZ19mb3JtYXRfanNvbic7XG5pbXBvcnQgTG9nRm9ybWF0U3RyaW5nIGZyb20gJy4vbG9nX2Zvcm1hdF9zdHJpbmcnO1xuaW1wb3J0IHsgU3F1ZWV6ZSB9IGZyb20gJ2dvb2Qtc3F1ZWV6ZSc7XG5pbXBvcnQgeyBjcmVhdGVXcml0ZVN0cmVhbSBhcyB3cml0ZVN0ciB9IGZyb20gJ2ZzJztcblxubW9kdWxlLmV4cG9ydHMgPSBjbGFzcyBLYm5Mb2dnZXIge1xuICBjb25zdHJ1Y3RvcihldmVudHMsIGNvbmZpZykge1xuICAgIHRoaXMuc3F1ZWV6ZSA9IG5ldyBTcXVlZXplKGV2ZW50cyk7XG4gICAgdGhpcy5mb3JtYXQgPSBjb25maWcuanNvbiA/IG5ldyBMb2dGb3JtYXRKc29uKGNvbmZpZykgOiBuZXcgTG9nRm9ybWF0U3RyaW5nKGNvbmZpZyk7XG5cbiAgICBpZiAoY29uZmlnLmRlc3QgPT09ICdzdGRvdXQnKSB7XG4gICAgICB0aGlzLmRlc3QgPSBwcm9jZXNzLnN0ZG91dDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kZXN0ID0gd3JpdGVTdHIoY29uZmlnLmRlc3QsIHtcbiAgICAgICAgZmxhZ3M6ICdhJyxcbiAgICAgICAgZW5jb2Rpbmc6ICd1dGY4J1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgaW5pdChyZWFkc3RyZWFtLCBlbWl0dGVyLCBjYWxsYmFjaykge1xuXG4gICAgdGhpcy5vdXRwdXQgPSByZWFkc3RyZWFtLnBpcGUodGhpcy5zcXVlZXplKS5waXBlKHRoaXMuZm9ybWF0KTtcbiAgICB0aGlzLm91dHB1dC5waXBlKHRoaXMuZGVzdCk7XG5cbiAgICBlbWl0dGVyLm9uKCdzdG9wJywgKCkgPT4ge1xuICAgICAgdGhpcy5vdXRwdXQudW5waXBlKHRoaXMuZGVzdCk7XG4gICAgfSk7XG5cbiAgICBjYWxsYmFjaygpO1xuICB9XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/logging/log_reporter.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;sBAAc,QAAQ;;;;+BAEI,mBAAmB;;;;iCACjB,qBAAqB;;;;2BACzB,cAAc;;kBACQ,IAAI;;AAElD,MAAM,CAAC,OAAO;AACD,WADU,SAAS,CAClB,MAAM,EAAE,MAAM,EAAE;0BADP,SAAS;;AAE5B,QAAI,CAAC,OAAO,GAAG,yBAAY,MAAM,CAAC,CAAC;AACnC,QAAI,CAAC,MAAM,GAAG,MAAM,CAAC,IAAI,GAAG,iCAAkB,MAAM,CAAC,GAAG,mCAAoB,MAAM,CAAC,CAAC;;AAEpF,QAAI,MAAM,CAAC,IAAI,KAAK,QAAQ,EAAE;AAC5B,UAAI,CAAC,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC;KAC5B,MAAM;AACL,UAAI,CAAC,IAAI,GAAG,2BAAS,MAAM,CAAC,IAAI,EAAE;AAChC,aAAK,EAAE,GAAG;AACV,gBAAQ,EAAE,MAAM;OACjB,CAAC,CAAC;KACJ;GACF;;eAboB,SAAS;;WAe1B,cAAC,UAAU,EAAE,OAAO,EAAE,QAAQ,EAAE;;;AAElC,UAAI,CAAC,MAAM,GAAG,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AAC9D,UAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;;AAE5B,aAAO,CAAC,EAAE,CAAC,MAAM,EAAE,YAAM;AACvB,cAAK,MAAM,CAAC,MAAM,CAAC,MAAK,IAAI,CAAC,CAAC;OAC/B,CAAC,CAAC;;AAEH,cAAQ,EAAE,CAAC;KACZ;;;SAzBoB,SAAS;IA0B/B,CAAC",
      "file": "/home/vio/v3metrics/src/server/logging/log_reporter.js",
      "sourcesContent": [
        "import _ from 'lodash';\n\nimport LogFormatJson from './log_format_json';\nimport LogFormatString from './log_format_string';\nimport { Squeeze } from 'good-squeeze';\nimport { createWriteStream as writeStr } from 'fs';\n\nmodule.exports = class KbnLogger {\n  constructor(events, config) {\n    this.squeeze = new Squeeze(events);\n    this.format = config.json ? new LogFormatJson(config) : new LogFormatString(config);\n\n    if (config.dest === 'stdout') {\n      this.dest = process.stdout;\n    } else {\n      this.dest = writeStr(config.dest, {\n        flags: 'a',\n        encoding: 'utf8'\n      });\n    }\n  }\n\n  init(readstream, emitter, callback) {\n\n    this.output = readstream.pipe(this.squeeze).pipe(this.format);\n    this.output.pipe(this.dest);\n\n    emitter.on('stop', () => {\n      this.output.unpipe(this.dest);\n    });\n\n    callback();\n  }\n};\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/logging/log_format_json.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./log_format",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "LogFormat"
              }
            ]
          },
          {
            "source": "json-stringify-safe",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "stringify"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "get",
        "inherits",
        "create-class",
        "class-call-check",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _log_format = require('./log_format');\n\nvar _log_format2 = _interopRequireDefault(_log_format);\n\nvar _jsonStringifySafe = require('json-stringify-safe');\n\nvar _jsonStringifySafe2 = _interopRequireDefault(_jsonStringifySafe);\n\nvar stripColors = function stripColors(string) {\n  return string.replace(/\\u001b[^m]+m/g, '');\n};\n\nmodule.exports = (function (_LogFormat) {\n  _inherits(KbnLoggerJsonFormat, _LogFormat);\n\n  function KbnLoggerJsonFormat() {\n    _classCallCheck(this, KbnLoggerJsonFormat);\n\n    _get(Object.getPrototypeOf(KbnLoggerJsonFormat.prototype), 'constructor', this).apply(this, arguments);\n  }\n\n  _createClass(KbnLoggerJsonFormat, [{\n    key: 'format',\n    value: function format(data) {\n      data.message = stripColors(data.message);\n      return (0, _jsonStringifySafe2['default'])(data);\n    }\n  }]);\n\n  return KbnLoggerJsonFormat;\n})(_log_format2['default']);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9sb2dnaW5nL2xvZ19mb3JtYXRfanNvbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7MEJBQXNCLGNBQWM7Ozs7aUNBQ2QscUJBQXFCOzs7O0FBRTNDLElBQUksV0FBVyxHQUFHLFNBQWQsV0FBVyxDQUFhLE1BQU0sRUFBRTtBQUNsQyxTQUFPLE1BQU0sQ0FBQyxPQUFPLENBQUMsZUFBZSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0NBQzVDLENBQUM7O0FBRUYsTUFBTSxDQUFDLE9BQU87WUFBUyxtQkFBbUI7O1dBQW5CLG1CQUFtQjswQkFBbkIsbUJBQW1COzsrQkFBbkIsbUJBQW1COzs7ZUFBbkIsbUJBQW1COztXQUNsQyxnQkFBQyxJQUFJLEVBQUU7QUFDWCxVQUFJLENBQUMsT0FBTyxHQUFHLFdBQVcsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDekMsYUFBTyxvQ0FBVSxJQUFJLENBQUMsQ0FBQztLQUN4Qjs7O1NBSm9CLG1CQUFtQjsyQkFLekMsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9zZXJ2ZXIvbG9nZ2luZy9sb2dfZm9ybWF0X2pzb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTG9nRm9ybWF0IGZyb20gJy4vbG9nX2Zvcm1hdCc7XG5pbXBvcnQgc3RyaW5naWZ5IGZyb20gJ2pzb24tc3RyaW5naWZ5LXNhZmUnO1xuXG5sZXQgc3RyaXBDb2xvcnMgPSBmdW5jdGlvbiAoc3RyaW5nKSB7XG4gIHJldHVybiBzdHJpbmcucmVwbGFjZSgvXFx1MDAxYltebV0rbS9nLCAnJyk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIEtibkxvZ2dlckpzb25Gb3JtYXQgZXh0ZW5kcyBMb2dGb3JtYXQge1xuICBmb3JtYXQoZGF0YSkge1xuICAgIGRhdGEubWVzc2FnZSA9IHN0cmlwQ29sb3JzKGRhdGEubWVzc2FnZSk7XG4gICAgcmV0dXJuIHN0cmluZ2lmeShkYXRhKTtcbiAgfVxufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/logging/log_format_json.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;;;0BAAsB,cAAc;;;;iCACd,qBAAqB;;;;AAE3C,IAAI,WAAW,GAAG,SAAd,WAAW,CAAa,MAAM,EAAE;AAClC,SAAO,MAAM,CAAC,OAAO,CAAC,eAAe,EAAE,EAAE,CAAC,CAAC;CAC5C,CAAC;;AAEF,MAAM,CAAC,OAAO;YAAS,mBAAmB;;WAAnB,mBAAmB;0BAAnB,mBAAmB;;+BAAnB,mBAAmB;;;eAAnB,mBAAmB;;WAClC,gBAAC,IAAI,EAAE;AACX,UAAI,CAAC,OAAO,GAAG,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;AACzC,aAAO,oCAAU,IAAI,CAAC,CAAC;KACxB;;;SAJoB,mBAAmB;2BAKzC,CAAC",
      "file": "/home/vio/v3metrics/src/server/logging/log_format_json.js",
      "sourcesContent": [
        "import LogFormat from './log_format';\nimport stringify from 'json-stringify-safe';\n\nlet stripColors = function (string) {\n  return string.replace(/\\u001b[^m]+m/g, '');\n};\n\nmodule.exports = class KbnLoggerJsonFormat extends LogFormat {\n  format(data) {\n    data.message = stripColors(data.message);\n    return stringify(data);\n  }\n};\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/logging/log_format.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "stream",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Stream"
              }
            ]
          },
          {
            "source": "moment",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "moment"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "@spalger/numeral",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "numeral"
              }
            ]
          },
          {
            "source": "ansicolors",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "ansicolors"
              }
            ]
          },
          {
            "source": "json-stringify-safe",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "stringify"
              }
            ]
          },
          {
            "source": "querystring",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "querystring"
              }
            ]
          },
          {
            "source": "./apply_filters_to_keys",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "applyFiltersToKeys"
              }
            ]
          },
          {
            "source": "util",
            "imported": [
              "inspect"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "inspect",
                "local": "inspect"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "get",
        "inherits",
        "create-class",
        "class-call-check",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _stream = require('stream');\n\nvar _stream2 = _interopRequireDefault(_stream);\n\nvar _moment = require('moment');\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _spalgerNumeral = require('@spalger/numeral');\n\nvar _spalgerNumeral2 = _interopRequireDefault(_spalgerNumeral);\n\nvar _ansicolors = require('ansicolors');\n\nvar _ansicolors2 = _interopRequireDefault(_ansicolors);\n\nvar _jsonStringifySafe = require('json-stringify-safe');\n\nvar _jsonStringifySafe2 = _interopRequireDefault(_jsonStringifySafe);\n\nvar _querystring = require('querystring');\n\nvar _querystring2 = _interopRequireDefault(_querystring);\n\nvar _apply_filters_to_keys = require('./apply_filters_to_keys');\n\nvar _apply_filters_to_keys2 = _interopRequireDefault(_apply_filters_to_keys);\n\nvar _util = require('util');\n\nfunction serializeError(err) {\n  return {\n    message: err.message,\n    name: err.name,\n    stack: err.stack,\n    code: err.code,\n    signal: err.signal\n  };\n}\n\nvar levelColor = function levelColor(code) {\n  if (code < 299) return _ansicolors2['default'].green(code);\n  if (code < 399) return _ansicolors2['default'].yellow(code);\n  if (code < 499) return _ansicolors2['default'].magenta(code);\n  return _ansicolors2['default'].red(code);\n};\n\nmodule.exports = (function (_Stream$Transform) {\n  _inherits(TransformObjStream, _Stream$Transform);\n\n  function TransformObjStream(config) {\n    _classCallCheck(this, TransformObjStream);\n\n    _get(Object.getPrototypeOf(TransformObjStream.prototype), 'constructor', this).call(this, {\n      readableObjectMode: false,\n      writableObjectMode: true\n    });\n    this.config = config;\n  }\n\n  _createClass(TransformObjStream, [{\n    key: 'filter',\n    value: function filter(data) {\n      if (!this.config.filter) return data;\n      return (0, _apply_filters_to_keys2['default'])(data, this.config.filter);\n    }\n  }, {\n    key: '_transform',\n    value: function _transform(event, enc, next) {\n      var data = this.filter(this.readEvent(event));\n      this.push(this.format(data) + '\\n');\n      next();\n    }\n  }, {\n    key: 'readEvent',\n    value: function readEvent(event) {\n      var data = {\n        type: event.event,\n        '@timestamp': _moment2['default'].utc(event.timestamp).format(),\n        tags: [].concat(event.tags || []),\n        pid: event.pid\n      };\n\n      if (data.type === 'response') {\n        _lodash2['default'].defaults(data, _lodash2['default'].pick(event, ['method', 'statusCode']));\n\n        data.req = {\n          url: event.path,\n          method: event.method,\n          headers: event.headers,\n          remoteAddress: event.source.remoteAddress,\n          userAgent: event.source.remoteAddress,\n          referer: event.source.referer\n        };\n\n        var contentLength = 0;\n        if (typeof event.responsePayload === 'object') {\n          contentLength = (0, _jsonStringifySafe2['default'])(event.responsePayload).length;\n        } else {\n          contentLength = String(event.responsePayload).length;\n        }\n\n        data.res = {\n          statusCode: event.statusCode,\n          responseTime: event.responseTime,\n          contentLength: contentLength\n        };\n\n        var query = _querystring2['default'].stringify(event.query);\n        if (query) data.req.url += '?' + query;\n\n        data.message = data.req.method.toUpperCase() + ' ';\n        data.message += data.req.url;\n        data.message += ' ';\n        data.message += levelColor(data.res.statusCode);\n        data.message += ' ';\n        data.message += _ansicolors2['default'].brightBlack(data.res.responseTime + 'ms');\n        data.message += _ansicolors2['default'].brightBlack(' - ' + (0, _spalgerNumeral2['default'])(contentLength).format('0.0b'));\n      } else if (data.type === 'ops') {\n        _lodash2['default'].defaults(data, _lodash2['default'].pick(event, ['pid', 'os', 'proc', 'load']));\n        data.message = _ansicolors2['default'].brightBlack('memory: ');\n        data.message += (0, _spalgerNumeral2['default'])(data.proc.mem.heapUsed).format('0.0b');\n        data.message += ' ';\n        data.message += _ansicolors2['default'].brightBlack('uptime: ');\n        data.message += (0, _spalgerNumeral2['default'])(data.proc.uptime).format('00:00:00');\n        data.message += ' ';\n        data.message += _ansicolors2['default'].brightBlack('load: [');\n        data.message += data.os.load.map(function (val) {\n          return (0, _spalgerNumeral2['default'])(val).format('0.00');\n        }).join(' ');\n        data.message += _ansicolors2['default'].brightBlack(']');\n        data.message += ' ';\n        data.message += _ansicolors2['default'].brightBlack('delay: ');\n        data.message += (0, _spalgerNumeral2['default'])(data.proc.delay).format('0.000');\n      } else if (data.type === 'error') {\n        data.level = 'error';\n        data.message = event.error.message;\n        data.error = serializeError(event.error);\n        data.url = event.url;\n      } else if (event.data instanceof Error) {\n        data.level = _lodash2['default'].contains(event.tags, 'fatal') ? 'fatal' : 'error';\n        data.message = event.data.message;\n        data.error = serializeError(event.data);\n      } else if (_lodash2['default'].isPlainObject(event.data) && event.data.tmpl) {\n        _lodash2['default'].assign(data, event.data);\n        data.tmpl = undefined;\n        data.message = _lodash2['default'].template(event.data.tmpl)(event.data);\n      } else {\n        data.message = _lodash2['default'].isString(event.data) ? event.data : (0, _util.inspect)(event.data);\n      }\n      return data;\n    }\n  }]);\n\n  return TransformObjStream;\n})(_stream2['default'].Transform);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9sb2dnaW5nL2xvZ19mb3JtYXQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O3NCQUFtQixRQUFROzs7O3NCQUNSLFFBQVE7Ozs7c0JBQ2IsUUFBUTs7Ozs4QkFDRixrQkFBa0I7Ozs7MEJBQ2YsWUFBWTs7OztpQ0FDYixxQkFBcUI7Ozs7MkJBQ25CLGFBQWE7Ozs7cUNBQ04seUJBQXlCOzs7O29CQUNoQyxNQUFNOztBQUU5QixTQUFTLGNBQWMsQ0FBQyxHQUFHLEVBQUU7QUFDM0IsU0FBTztBQUNMLFdBQU8sRUFBRSxHQUFHLENBQUMsT0FBTztBQUNwQixRQUFJLEVBQUUsR0FBRyxDQUFDLElBQUk7QUFDZCxTQUFLLEVBQUUsR0FBRyxDQUFDLEtBQUs7QUFDaEIsUUFBSSxFQUFFLEdBQUcsQ0FBQyxJQUFJO0FBQ2QsVUFBTSxFQUFFLEdBQUcsQ0FBQyxNQUFNO0dBQ25CLENBQUM7Q0FDSDs7QUFFRCxJQUFJLFVBQVUsR0FBRyxTQUFiLFVBQVUsQ0FBYSxJQUFJLEVBQUU7QUFDL0IsTUFBSSxJQUFJLEdBQUcsR0FBRyxFQUFFLE9BQU8sd0JBQVcsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQzlDLE1BQUksSUFBSSxHQUFHLEdBQUcsRUFBRSxPQUFPLHdCQUFXLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUMvQyxNQUFJLElBQUksR0FBRyxHQUFHLEVBQUUsT0FBTyx3QkFBVyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDaEQsU0FBTyx3QkFBVyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7Q0FDN0IsQ0FBQzs7QUFHRixNQUFNLENBQUMsT0FBTztZQUFTLGtCQUFrQjs7QUFDNUIsV0FEVSxrQkFBa0IsQ0FDM0IsTUFBTSxFQUFFOzBCQURDLGtCQUFrQjs7QUFFckMsK0JBRm1CLGtCQUFrQiw2Q0FFL0I7QUFDSix3QkFBa0IsRUFBRSxLQUFLO0FBQ3pCLHdCQUFr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QUssQ0FBQyxJQUFJLENBQUMsSUFBSSxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRTtBQUN2RCw0QkFBRSxNQUFNLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUMzQixZQUFJLENBQUMsSUFBSSxHQUFHLFNBQVMsQ0FBQztBQUN0QixZQUFJLENBQUMsT0FBTyxHQUFHLG9CQUFFLFFBQVEsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztPQUN4RCxNQUNJO0FBQ0gsWUFBSSxDQUFDLE9BQU8sR0FBRyxvQkFBRSxRQUFRLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLEtBQUssQ0FBQyxJQUFJLEdBQUcsbUJBQVEsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO09BQzFFO0FBQ0QsYUFBTyxJQUFJLENBQUM7S0FDYjs7O1NBOUdvQixrQkFBa0I7R0FBUyxvQkFBTyxTQUFTLENBK0dqRSxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9sb2dnaW5nL2xvZ19mb3JtYXQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgU3RyZWFtIGZyb20gJ3N0cmVhbSc7XG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IG51bWVyYWwgZnJvbSAnQHNwYWxnZXIvbnVtZXJhbCc7XG5pbXBvcnQgYW5zaWNvbG9ycyBmcm9tICdhbnNpY29sb3JzJztcbmltcG9ydCBzdHJpbmdpZnkgZnJvbSAnanNvbi1zdHJpbmdpZnktc2FmZSc7XG5pbXBvcnQgcXVlcnlzdHJpbmcgZnJvbSAncXVlcnlzdHJpbmcnO1xuaW1wb3J0IGFwcGx5RmlsdGVyc1RvS2V5cyBmcm9tICcuL2FwcGx5X2ZpbHRlcnNfdG9fa2V5cyc7XG5pbXBvcnQgeyBpbnNwZWN0IH0gZnJvbSAndXRpbCc7XG5cbmZ1bmN0aW9uIHNlcmlhbGl6ZUVycm9yKGVycikge1xuICByZXR1cm4ge1xuICAgIG1lc3NhZ2U6IGVyci5tZXNzYWdlLFxuICAgIG5hbWU6IGVyci5uYW1lLFxuICAgIHN0YWNrOiBlcnIuc3RhY2ssXG4gICAgY29kZTogZXJyLmNvZGUsXG4gICAgc2lnbmFsOiBlcnIuc2lnbmFsXG4gIH07XG59XG5cbmxldCBsZXZlbENvbG9yID0gZnVuY3Rpb24gKGNvZGUpIHtcbiAgaWYgKGNvZGUgPCAyOTkpIHJldHVybiBhbnNpY29sb3JzLmdyZWVuKGNvZGUpO1xuICBpZiAoY29kZSA8IDM5OSkgcmV0dXJuIGFuc2ljb2xvcnMueWVsbG93KGNvZGUpO1xuICBpZiAoY29kZSA8IDQ5OSkgcmV0dXJuIGFuc2ljb2xvcnMubWFnZW50YShjb2RlKTtcbiAgcmV0dXJuIGFuc2ljb2xvcnMucmVkKGNvZGUpO1xufTtcblxuXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIFRyYW5zZm9ybU9ialN0cmVhbSBleHRlbmRzIFN0cmVhbS5UcmFuc2Zvcm0ge1xuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICBzdXBlcih7XG4gICAgICByZWFkYWJsZU9iamVjdE1vZGU6IGZhbHNlLFxuICAgICAgd3JpdGFibGVPYmplY3RNb2RlOiB0cnVlXG4gICAgfSk7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gIH1cblxuICBmaWx0ZXIoZGF0YSkge1xuICAgIGlmICghdGhpcy5jb25maWcuZmlsdGVyKSByZXR1cm4gZGF0YTtcbiAgICByZXR1cm4gYXBwbHlGaWx0ZXJzVG9LZXlzKGRhdGEsIHRoaXMuY29uZmlnLmZpbHRlcik7XG4gIH1cblxuICBfdHJhbnNmb3JtKGV2ZW50LCBlbmMsIG5leHQpIHtcbiAgICBsZXQgZGF0YSA9IHRoaXMuZmlsdGVyKHRoaXMucmVhZEV2ZW50KGV2ZW50KSk7XG4gICAgdGhpcy5wdXNoKHRoaXMuZm9ybWF0KGRhdGEpICsgJ1xcbicpO1xuICAgIG5leHQoKTtcbiAgfVxuXG4gIHJlYWRFdmVudChldmVudCkge1xuICAgIGxldCBkYXRhID0ge1xuICAgICAgdHlwZTogZXZlbnQuZXZlbnQsXG4gICAgICAnQHRpbWVzdGFtcCc6IG1vbWVudC51dGMoZXZlbnQudGltZXN0YW1wKS5mb3JtYXQoKSxcbiAgICAgIHRhZ3M6IFtdLmNvbmNhdChldmVudC50YWdzIHx8IFtdKSxcbiAgICAgIHBpZDogZXZlbnQucGlkXG4gICAgfTtcblxuICAgIGlmIChkYXRhLnR5cGUgPT09ICdyZXNwb25zZScpIHtcbiAgICAgIF8uZGVmYXVsdHMoZGF0YSwgXy5waWNrKGV2ZW50LCBbXG4gICAgICAgICdtZXRob2QnLFxuICAgICAgICAnc3RhdHVzQ29kZSdcbiAgICAgIF0pKTtcblxuICAgICAgZGF0YS5yZXEgPSB7XG4gICAgICAgIHVybDogZXZlbnQucGF0aCxcbiAgICAgICAgbWV0aG9kOiBldmVudC5tZXRob2QsXG4gICAgICAgIGhlYWRlcnM6IGV2ZW50LmhlYWRlcnMsXG4gICAgICAgIHJlbW90ZUFkZHJlc3M6IGV2ZW50LnNvdXJjZS5yZW1vdGVBZGRyZXNzLFxuICAgICAgICB1c2VyQWdlbnQ6IGV2ZW50LnNvdXJjZS5yZW1vdGVBZGRyZXNzLFxuICAgICAgICByZWZlcmVyOiBldmVudC5zb3VyY2UucmVmZXJlclxuICAgICAgfTtcblxuICAgICAgbGV0IGNvbnRlbnRMZW5ndGggPSAwO1xuICAgICAgaWYgKHR5cGVvZiBldmVudC5yZXNwb25zZVBheWxvYWQgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGNvbnRlbnRMZW5ndGggPSBzdHJpbmdpZnkoZXZlbnQucmVzcG9uc2VQYXlsb2FkKS5sZW5ndGg7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb250ZW50TGVuZ3RoID0gU3RyaW5nKGV2ZW50LnJlc3BvbnNlUGF5bG9hZCkubGVuZ3RoO1xuICAgICAgfVxuXG4gICAgICBkYXRhLnJlcyA9IHtcbiAgICAgICAgc3RhdHVzQ29kZTogZXZlbnQuc3RhdHVzQ29kZSxcbiAgICAgICAgcmVzcG9uc2VUaW1lOiBldmVudC5yZXNwb25zZVRpbWUsXG4gICAgICAgIGNvbnRlbnRMZW5ndGg6IGNvbnRlbnRMZW5ndGhcbiAgICAgIH07XG5cbiAgICAgIGxldCBxdWVyeSA9IHF1ZXJ5c3RyaW5nLnN0cmluZ2lmeShldmVudC5xdWVyeSk7XG4gICAgICBpZiAocXVlcnkpIGRhdGEucmVxLnVybCArPSAnPycgKyBxdWVyeTtcblxuXG4gICAgICBkYXRhLm1lc3NhZ2UgID0gZGF0YS5yZXEubWV0aG9kLnRvVXBwZXJDYXNlKCkgKyAnICc7XG4gICAgICBkYXRhLm1lc3NhZ2UgKz0gZGF0YS5yZXEudXJsO1xuICAgICAgZGF0YS5tZXNzYWdlICs9ICcgJztcbiAgICAgIGRhdGEubWVzc2FnZSArPSBsZXZlbENvbG9yKGRhdGEucmVzLnN0YXR1c0NvZGUpO1xuICAgICAgZGF0YS5tZXNzYWdlICs9ICcgJztcbiAgICAgIGRhdGEubWVzc2FnZSArPSBhbnNpY29sb3JzLmJyaWdodEJsYWNrKGRhdGEucmVzLnJlc3BvbnNlVGltZSArICdtcycpO1xuICAgICAgZGF0YS5tZXNzYWdlICs9IGFuc2ljb2xvcnMuYnJpZ2h0QmxhY2soJyAtICcgKyBudW1lcmFsKGNvbnRlbnRMZW5ndGgpLmZvcm1hdCgnMC4wYicpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZGF0YS50eXBlID09PSAnb3BzJykge1xuICAgICAgXy5kZWZhdWx0cyhkYXRhLCBfLnBpY2soZXZlbnQsIFtcbiAgICAgICAgJ3BpZCcsXG4gICAgICAgICdvcycsXG4gICAgICAgICdwcm9jJyxcbiAgICAgICAgJ2xvYWQnXG4gICAgICBdKSk7XG4gICAgICBkYXRhLm1lc3NhZ2UgID0gYW5zaWNvbG9ycy5icmlnaHRCbGFjaygnbWVtb3J5OiAnKTtcbiAgICAgIGRhdGEubWVzc2FnZSArPSBudW1lcmFsKGRhdGEucHJvYy5tZW0uaGVhcFVzZWQpLmZvcm1hdCgnMC4wYicpO1xuICAgICAgZGF0YS5tZXNzYWdlICs9ICcgJztcbiAgICAgIGRhdGEubWVzc2FnZSArPSBhbnNpY29sb3JzLmJyaWdodEJsYWNrKCd1cHRpbWU6ICcpO1xuICAgICAgZGF0YS5tZXNzYWdlICs9IG51bWVyYWwoZGF0YS5wcm9jLnVwdGltZSkuZm9ybWF0KCcwMDowMDowMCcpO1xuICAgICAgZGF0YS5tZXNzYWdlICs9ICcgJztcbiAgICAgIGRhdGEubWVzc2FnZSArPSBhbnNpY29sb3JzLmJyaWdodEJsYWNrKCdsb2FkOiBbJyk7XG4gICAgICBkYXRhLm1lc3NhZ2UgKz0gZGF0YS5vcy5sb2FkLm1hcChmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgIHJldHVybiBudW1lcmFsKHZhbCkuZm9ybWF0KCcwLjAwJyk7XG4gICAgICB9KS5qb2luKCcgJyk7XG4gICAgICBkYXRhLm1lc3NhZ2UgKz0gYW5zaWNvbG9ycy5icmlnaHRCbGFjaygnXScpO1xuICAgICAgZGF0YS5tZXNzYWdlICs9ICcgJztcbiAgICAgIGRhdGEubWVzc2FnZSArPSBhbnNpY29sb3JzLmJyaWdodEJsYWNrKCdkZWxheTogJyk7XG4gICAgICBkYXRhLm1lc3NhZ2UgKz0gbnVtZXJhbChkYXRhLnByb2MuZGVsYXkpLmZvcm1hdCgnMC4wMDAnKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZGF0YS50eXBlID09PSAnZXJyb3InKSB7XG4gICAgICBkYXRhLmxldmVsID0gJ2Vycm9yJztcbiAgICAgIGRhdGEubWVzc2FnZSA9IGV2ZW50LmVycm9yLm1lc3NhZ2U7XG4gICAgICBkYXRhLmVycm9yID0gc2VyaWFsaXplRXJyb3IoZXZlbnQuZXJyb3IpO1xuICAgICAgZGF0YS51cmwgPSBldmVudC51cmw7XG4gICAgfVxuICAgIGVsc2UgaWYgKGV2ZW50LmRhdGEgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgZGF0YS5sZXZlbCA9IF8uY29udGFpbnMoZXZlbnQudGFncywgJ2ZhdGFsJykgPyAnZmF0YWwnIDogJ2Vycm9yJztcbiAgICAgIGRhdGEubWVzc2FnZSA9IGV2ZW50LmRhdGEubWVzc2FnZTtcbiAgICAgIGRhdGEuZXJyb3IgPSBzZXJpYWxpemVFcnJvcihldmVudC5kYXRhKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoXy5pc1BsYWluT2JqZWN0KGV2ZW50LmRhdGEpICYmIGV2ZW50LmRhdGEudG1wbCkge1xuICAgICAgXy5hc3NpZ24oZGF0YSwgZXZlbnQuZGF0YSk7XG4gICAgICBkYXRhLnRtcGwgPSB1bmRlZmluZWQ7XG4gICAgICBkYXRhLm1lc3NhZ2UgPSBfLnRlbXBsYXRlKGV2ZW50LmRhdGEudG1wbCkoZXZlbnQuZGF0YSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgZGF0YS5tZXNzYWdlID0gXy5pc1N0cmluZyhldmVudC5kYXRhKSA/IGV2ZW50LmRhdGEgOiBpbnNwZWN0KGV2ZW50LmRhdGEpO1xuICAgIH1cbiAgICByZXR1cm4gZGF0YTtcbiAgfVxufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/logging/log_format.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/src/server/logging/log_format.js",
      "sourcesContent": [
        "import Stream from 'stream';\nimport moment from 'moment';\nimport _ from 'lodash';\nimport numeral from '@spalger/numeral';\nimport ansicolors from 'ansicolors';\nimport stringify from 'json-stringify-safe';\nimport querystring from 'querystring';\nimport applyFiltersToKeys from './apply_filters_to_keys';\nimport { inspect } from 'util';\n\nfunction serializeError(err) {\n  return {\n    message: err.message,\n    name: err.name,\n    stack: err.stack,\n    code: err.code,\n    signal: err.signal\n  };\n}\n\nlet levelColor = function (code) {\n  if (code < 299) return ansicolors.green(code);\n  if (code < 399) return ansicolors.yellow(code);\n  if (code < 499) return ansicolors.magenta(code);\n  return ansicolors.red(code);\n};\n\n\nmodule.exports = class TransformObjStream extends Stream.Transform {\n  constructor(config) {\n    super({\n      readableObjectMode: false,\n      writableObjectMode: true\n    });\n    this.config = config;\n  }\n\n  filter(data) {\n    if (!this.config.filter) return data;\n    return applyFiltersToKeys(data, this.config.filter);\n  }\n\n  _transform(event, enc, next) {\n    let data = this.filter(this.readEvent(event));\n    this.push(this.format(data) + '\\n');\n    next();\n  }\n\n  readEvent(event) {\n    let data = {\n      type: event.event,\n      '@timestamp': moment.utc(event.timestamp).format(),\n      tags: [].concat(event.tags || []),\n      pid: event.pid\n    };\n\n    if (data.type === 'response') {\n      _.defaults(data, _.pick(event, [\n        'method',\n        'statusCode'\n      ]));\n\n      data.req = {\n        url: event.path,\n        method: event.method,\n        headers: event.headers,\n        remoteAddress: event.source.remoteAddress,\n        userAgent: event.source.remoteAddress,\n        referer: event.source.referer\n      };\n\n      let contentLength = 0;\n      if (typeof event.responsePayload === 'object') {\n        contentLength = stringify(event.responsePayload).length;\n      } else {\n        contentLength = String(event.responsePayload).length;\n      }\n\n      data.res = {\n        statusCode: event.statusCode,\n        responseTime: event.responseTime,\n        contentLength: contentLength\n      };\n\n      let query = querystring.stringify(event.query);\n      if (query) data.req.url += '?' + query;\n\n\n      data.message  = data.req.method.toUpperCase() + ' ';\n      data.message += data.req.url;\n      data.message += ' ';\n      data.message += levelColor(data.res.statusCode);\n      data.message += ' ';\n      data.message += ansicolors.brightBlack(data.res.responseTime + 'ms');\n      data.message += ansicolors.brightBlack(' - ' + numeral(contentLength).format('0.0b'));\n    }\n    else if (data.type === 'ops') {\n      _.defaults(data, _.pick(event, [\n        'pid',\n        'os',\n        'proc',\n        'load'\n      ]));\n      data.message  = ansicolors.brightBlack('memory: ');\n      data.message += numeral(data.proc.mem.heapUsed).format('0.0b');\n      data.message += ' ';\n      data.message += ansicolors.brightBlack('uptime: ');\n      data.message += numeral(data.proc.uptime).format('00:00:00');\n      data.message += ' ';\n      data.message += ansicolors.brightBlack('load: [');\n      data.message += data.os.load.map(function (val) {\n        return numeral(val).format('0.00');\n      }).join(' ');\n      data.message += ansicolors.brightBlack(']');\n      data.message += ' ';\n      data.message += ansicolors.brightBlack('delay: ');\n      data.message += numeral(data.proc.delay).format('0.000');\n    }\n    else if (data.type === 'error') {\n      data.level = 'error';\n      data.message = event.error.message;\n      data.error = serializeError(event.error);\n      data.url = event.url;\n    }\n    else if (event.data instanceof Error) {\n      data.level = _.contains(event.tags, 'fatal') ? 'fatal' : 'error';\n      data.message = event.data.message;\n      data.error = serializeError(event.data);\n    }\n    else if (_.isPlainObject(event.data) && event.data.tmpl) {\n      _.assign(data, event.data);\n      data.tmpl = undefined;\n      data.message = _.template(event.data.tmpl)(event.data);\n    }\n    else {\n      data.message = _.isString(event.data) ? event.data : inspect(event.data);\n    }\n    return data;\n  }\n};\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/logging/apply_filters_to_keys.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction toPojo(obj) {\n  return JSON.parse(JSON.stringify(obj));\n}\n\nfunction replacer(match, group) {\n  return new Array(group.length + 1).join('X');\n}\n\nfunction apply(obj, key, action) {\n  for (var k in obj) {\n    if (obj.hasOwnProperty(k)) {\n      var val = obj[k];\n      if (k === key) {\n        if (action === 'remove') {\n          delete obj[k];\n        } else if (action === 'censor' && typeof val === 'object') {\n          delete obj[key];\n        } else if (action === 'censor') {\n          obj[k] = ('' + val).replace(/./g, 'X');\n        } else if (/\\/.+\\//.test(action)) {\n          var matches = action.match(/\\/(.+)\\//);\n          if (matches) {\n            var regex = new RegExp(matches[1]);\n            obj[k] = ('' + val).replace(regex, replacer);\n          }\n        }\n      } else if (typeof val === 'object') {\n        val = apply(val, key, action);\n      }\n    }\n  }\n  return obj;\n}\n\nmodule.exports = function (obj, actionsByKey) {\n  return Object.keys(actionsByKey).reduce(function (output, key) {\n    return apply(output, key, actionsByKey[key]);\n  }, toPojo(obj));\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9sb2dnaW5nL2FwcGx5X2ZpbHRlcnNfdG9fa2V5cy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLFNBQVMsTUFBTSxDQUFDLEdBQUcsRUFBRTtBQUNuQixTQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0NBQ3hDOztBQUVELFNBQVMsUUFBUSxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUU7QUFDOUIsU0FBUSxJQUFJLEtBQUssQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBRTtDQUNoRDs7QUFFRCxTQUFTLEtBQUssQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLE1BQU0sRUFBRTtBQUMvQixPQUFLLElBQUksQ0FBQyxJQUFJLEdBQUcsRUFBRztBQUNsQixRQUFJLEdBQUcsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLEVBQUU7QUFDekIsVUFBSSxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2pCLFVBQUksQ0FBQyxLQUFLLEdBQUcsRUFBRTtBQUNiLFlBQUksTUFBTSxLQUFLLFFBQVEsRUFBRTtBQUN2QixpQkFBTyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDZixNQUNJLElBQUksTUFBTSxLQUFLLFFBQVEsSUFBSSxPQUFPLEdBQUcsS0FBSyxRQUFRLEVBQUU7QUFDdkQsaUJBQU8sR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1NBQ2pCLE1BQ0ksSUFBSSxNQUFNLEtBQUssUUFBUSxFQUFFO0FBQzVCLGFBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsR0FBRyxHQUFHLENBQUEsQ0FBRSxPQUFPLENBQUMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDO1NBQ3hDLE1BQ0ksSUFBSSxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFO0FBQzlCLGNBQUksT0FBTyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDdkMsY0FBSSxPQUFPLEVBQUU7QUFDWCxnQkFBSSxLQUFLLEdBQUcsSUFBSSxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDbkMsZUFBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLEdBQUcsQ0FBQSxDQUFFLE9BQU8sQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLENBQUM7V0FDOUM7U0FDRjtPQUNGLE1BQU0sSUFBSSxPQUFPLEdBQUcsS0FBSyxRQUFRLEVBQUU7QUFDbEMsV0FBRyxHQUFHLEtBQUssQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLE1BQU0sQ0FBQyxDQUFDO09BQy9CO0tBQ0Y7R0FDRjtBQUNELFNBQU8sR0FBRyxDQUFDO0NBQ1o7O0FBRUQsTUFBTSxDQUFDLE9BQU8sR0FBRyxVQUFVLEdBQUcsRUFBRSxZQUFZLEVBQUU7QUFDNUMsU0FBTyxNQUFNLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxVQUFDLE1BQU0sRUFBRSxHQUFHLEVBQUs7QUFDdkQsV0FBTyxLQUFLLENBQUMsTUFBTSxFQUFFLEdBQUcsRUFBRSxZQUFZLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztHQUM5QyxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0NBQ2pCLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvc2VydmVyL2xvZ2dpbmcvYXBwbHlfZmlsdGVyc190b19rZXlzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gdG9Qb2pvKG9iaikge1xuICByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShvYmopKTtcbn1cblxuZnVuY3Rpb24gcmVwbGFjZXIobWF0Y2gsIGdyb3VwKSB7XG4gIHJldHVybiAobmV3IEFycmF5KGdyb3VwLmxlbmd0aCArIDEpLmpvaW4oJ1gnKSk7XG59XG5cbmZ1bmN0aW9uIGFwcGx5KG9iaiwga2V5LCBhY3Rpb24pIHtcbiAgZm9yIChsZXQgayBpbiBvYmopICB7XG4gICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShrKSkge1xuICAgICAgbGV0IHZhbCA9IG9ialtrXTtcbiAgICAgIGlmIChrID09PSBrZXkpIHtcbiAgICAgICAgaWYgKGFjdGlvbiA9PT0gJ3JlbW92ZScpIHtcbiAgICAgICAgICBkZWxldGUgb2JqW2tdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGFjdGlvbiA9PT0gJ2NlbnNvcicgJiYgdHlwZW9mIHZhbCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICBkZWxldGUgb2JqW2tleV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYWN0aW9uID09PSAnY2Vuc29yJykge1xuICAgICAgICAgIG9ialtrXSA9ICgnJyArIHZhbCkucmVwbGFjZSgvLi9nLCAnWCcpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKC9cXC8uK1xcLy8udGVzdChhY3Rpb24pKSB7XG4gICAgICAgICAgbGV0IG1hdGNoZXMgPSBhY3Rpb24ubWF0Y2goL1xcLyguKylcXC8vKTtcbiAgICAgICAgICBpZiAobWF0Y2hlcykge1xuICAgICAgICAgICAgbGV0IHJlZ2V4ID0gbmV3IFJlZ0V4cChtYXRjaGVzWzFdKTtcbiAgICAgICAgICAgIG9ialtrXSA9ICgnJyArIHZhbCkucmVwbGFjZShyZWdleCwgcmVwbGFjZXIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSAnb2JqZWN0Jykge1xuICAgICAgICB2YWwgPSBhcHBseSh2YWwsIGtleSwgYWN0aW9uKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIG9iajtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAob2JqLCBhY3Rpb25zQnlLZXkpIHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKGFjdGlvbnNCeUtleSkucmVkdWNlKChvdXRwdXQsIGtleSkgPT4ge1xuICAgIHJldHVybiBhcHBseShvdXRwdXQsIGtleSwgYWN0aW9uc0J5S2V5W2tleV0pO1xuICB9LCB0b1Bvam8ob2JqKSk7XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/logging/apply_filters_to_keys.js"
      ],
      "names": [],
      "mappings": ";;AAAA,SAAS,MAAM,CAAC,GAAG,EAAE;AACnB,SAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC;CACxC;;AAED,SAAS,QAAQ,CAAC,KAAK,EAAE,KAAK,EAAE;AAC9B,SAAQ,IAAI,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAE;CAChD;;AAED,SAAS,KAAK,CAAC,GAAG,EAAE,GAAG,EAAE,MAAM,EAAE;AAC/B,OAAK,IAAI,CAAC,IAAI,GAAG,EAAG;AAClB,QAAI,GAAG,CAAC,cAAc,CAAC,CAAC,CAAC,EAAE;AACzB,UAAI,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;AACjB,UAAI,CAAC,KAAK,GAAG,EAAE;AACb,YAAI,MAAM,KAAK,QAAQ,EAAE;AACvB,iBAAO,GAAG,CAAC,CAAC,CAAC,CAAC;SACf,MACI,IAAI,MAAM,KAAK,QAAQ,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE;AACvD,iBAAO,GAAG,CAAC,GAAG,CAAC,CAAC;SACjB,MACI,IAAI,MAAM,KAAK,QAAQ,EAAE;AAC5B,aAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,CAAA,CAAE,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;SACxC,MACI,IAAI,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE;AAC9B,cAAI,OAAO,GAAG,MAAM,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;AACvC,cAAI,OAAO,EAAE;AACX,gBAAI,KAAK,GAAG,IAAI,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;AACnC,eAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,CAAA,CAAE,OAAO,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;WAC9C;SACF;OACF,MAAM,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE;AAClC,WAAG,GAAG,KAAK,CAAC,GAAG,EAAE,GAAG,EAAE,MAAM,CAAC,CAAC;OAC/B;KACF;GACF;AACD,SAAO,GAAG,CAAC;CACZ;;AAED,MAAM,CAAC,OAAO,GAAG,UAAU,GAAG,EAAE,YAAY,EAAE;AAC5C,SAAO,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,MAAM,CAAC,UAAC,MAAM,EAAE,GAAG,EAAK;AACvD,WAAO,KAAK,CAAC,MAAM,EAAE,GAAG,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC;GAC9C,EAAE,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC;CACjB,CAAC",
      "file": "/home/vio/v3metrics/src/server/logging/apply_filters_to_keys.js",
      "sourcesContent": [
        "function toPojo(obj) {\n  return JSON.parse(JSON.stringify(obj));\n}\n\nfunction replacer(match, group) {\n  return (new Array(group.length + 1).join('X'));\n}\n\nfunction apply(obj, key, action) {\n  for (let k in obj)  {\n    if (obj.hasOwnProperty(k)) {\n      let val = obj[k];\n      if (k === key) {\n        if (action === 'remove') {\n          delete obj[k];\n        }\n        else if (action === 'censor' && typeof val === 'object') {\n          delete obj[key];\n        }\n        else if (action === 'censor') {\n          obj[k] = ('' + val).replace(/./g, 'X');\n        }\n        else if (/\\/.+\\//.test(action)) {\n          let matches = action.match(/\\/(.+)\\//);\n          if (matches) {\n            let regex = new RegExp(matches[1]);\n            obj[k] = ('' + val).replace(regex, replacer);\n          }\n        }\n      } else if (typeof val === 'object') {\n        val = apply(val, key, action);\n      }\n    }\n  }\n  return obj;\n}\n\nmodule.exports = function (obj, actionsByKey) {\n  return Object.keys(actionsByKey).reduce((output, key) => {\n    return apply(output, key, actionsByKey[key]);\n  }, toPojo(obj));\n};\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/logging/log_format_string.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "ansicolors",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "ansicolors"
              }
            ]
          },
          {
            "source": "moment",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "moment"
              }
            ]
          },
          {
            "source": "./log_format",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "LogFormat"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "get",
        "inherits",
        "create-class",
        "class-call-check",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _ansicolors = require('ansicolors');\n\nvar _ansicolors2 = _interopRequireDefault(_ansicolors);\n\nvar _moment = require('moment');\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _log_format = require('./log_format');\n\nvar _log_format2 = _interopRequireDefault(_log_format);\n\nvar statuses = ['err', 'info', 'error', 'warning', 'fatal', 'status', 'debug'];\n\nvar typeColors = {\n  log: 'blue',\n  req: 'green',\n  res: 'green',\n  ops: 'cyan',\n  config: 'cyan',\n  err: 'red',\n  info: 'green',\n  error: 'red',\n  warning: 'red',\n  fatal: 'magenta',\n  status: 'yellow',\n  debug: 'brightBlack',\n  server: 'brightBlack',\n  optmzr: 'white',\n  managr: 'green',\n  optimize: 'magenta',\n  listening: 'magenta'\n};\n\nvar color = _lodash2['default'].memoize(function (name) {\n  return _ansicolors2['default'][typeColors[name]] || _lodash2['default'].identity;\n});\n\nvar type = _lodash2['default'].memoize(function (t) {\n  return color(t)(_lodash2['default'].pad(t, 7).slice(0, 7));\n});\n\nvar workerType = process.env.kbnWorkerType ? type(process.env.kbnWorkerType) + ' ' : '';\n\nmodule.exports = (function (_LogFormat) {\n  _inherits(KbnLoggerJsonFormat, _LogFormat);\n\n  function KbnLoggerJsonFormat() {\n    _classCallCheck(this, KbnLoggerJsonFormat);\n\n    _get(Object.getPrototypeOf(KbnLoggerJsonFormat.prototype), 'constructor', this).apply(this, arguments);\n  }\n\n  _createClass(KbnLoggerJsonFormat, [{\n    key: 'format',\n    value: function format(data) {\n      var time = color('time')((0, _moment2['default'])(data.timestamp).format('HH:mm:ss.SSS'));\n      var msg = data.error ? color('error')(data.error.stack) : color('message')(data.message);\n\n      var tags = (0, _lodash2['default'])(data.tags).sortBy(function (tag) {\n        if (color(tag) === _lodash2['default'].identity) return '2' + tag;\n        if (_lodash2['default'].includes(statuses, tag)) return '0' + tag;\n        return '1' + tag;\n      }).reduce(function (s, t) {\n        return s + ('[' + color(t)(t) + ']');\n      }, '');\n\n      return '' + workerType + type(data.type) + ' [' + time + '] ' + tags + ' ' + msg;\n    }\n  }]);\n\n  return KbnLoggerJsonFormat;\n})(_log_format2['default']);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9sb2dnaW5nL2xvZ19mb3JtYXRfc3RyaW5nLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztzQkFBYyxRQUFROzs7OzBCQUNDLFlBQVk7Ozs7c0JBQ2hCLFFBQVE7Ozs7MEJBRUwsY0FBYzs7OztBQUVwQyxJQUFJLFFBQVEsR0FBRyxDQUNiLEtBQUssRUFDTCxNQUFNLEVBQ04sT0FBTyxFQUNQLFNBQVMsRUFDVCxPQUFPLEVBQ1AsUUFBUSxFQUNSLE9BQU8sQ0FDUixDQUFDOztBQUVGLElBQUksVUFBVSxHQUFHO0FBQ2YsS0FBRyxFQUFFLE1BQU07QUFDWCxLQUFHLEVBQUUsT0FBTztBQUNaLEtBQUcsRUFBRSxPQUFPO0FBQ1osS0FBRyxFQUFFLE1BQU07QUFDWCxRQUFNLEVBQUUsTUFBTTtBQUNkLEtBQUcsRUFBRSxLQUFLO0FBQ1YsTUFBSSxFQUFFLE9BQU87QUFDYixPQUFLLEVBQUUsS0FBSztBQUNaLFNBQU8sRUFBRSxLQUFLO0FBQ2QsT0FBSyxFQUFFLFNBQVM7QUFDaEIsUUFBTSxFQUFFLFFBQVE7QUFDaEIsT0FBSyxFQUFFLGFBQWE7QUFDcEIsUUFBTSxFQUFFLGFBQWE7QUFDckIsUUFBTSxFQUFFLE9BQU87QUFDZixRQUFNLEVBQUUsT0FBTztBQUNmLFVBQVEsRUFBRSxTQUFTO0FBQ25CLFdBQVMsRUFBRSxTQUFTO0NBQ3JCLENBQUM7O0FBRUYsSUFBSSxLQUFLLEdBQUcsb0JBQUUsT0FBTyxDQUFDLFVBQVUsSUFBSSxFQUFFO0FBQ3BDLFNBQU8sd0JBQVcsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksb0JBQUUsUUFBUSxDQUFDO0NBQ25ELENBQUMsQ0FBQzs7QUFFSCxJQUFJLElBQUksR0FBRyxvQkFBRSxPQUFPLENBQUMsVUFBVSxDQUFDLEVBQUU7QUFDaEMsU0FBTyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsb0JBQUUsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7Q0FDMUMsQ0FBQyxDQUFDOztBQUVILElBQUksVUFBVSxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsYUFBYSxHQUFNLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxTQUFNLEVBQUUsQ0FBQzs7QUFFeEYsTUFBTSxDQUFDLE9BQU87WUFBUyxtQkFBbUI7O1dBQW5CLG1CQUFtQjswQkFBbkIsbUJBQW1COzsrQkFBbkIsbUJBQW1COzs7ZUFBbkIsbUJBQW1COztXQUNsQyxnQkFBQyxJQUFJLEVBQUU7QUFDWCxVQUFJLElBQUksR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMseUJBQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDO0FBQ3hFLFVBQUksR0FBRyxHQUFHLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQzs7QUFFekYsVUFBSSxJQUFJLEdBQUcseUJBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUN0QixNQUFNLENBQUMsVUFBVSxHQUFHLEVBQUU7QUFDckIsWUFBSSxLQUFLLENBQUMsR0FBRyxDQUFDLEtBQUssb0JBQUUsUUFBUSxFQUFFLGFBQVcsR0FBRyxDQUFHO0FBQ2hELFlBQUksb0JBQUUsUUFBUSxDQUFDLFFBQVEsRUFBRSxHQUFHLENBQUMsRUFBRSxhQUFXLEdBQUcsQ0FBRztBQUNoRCxxQkFBVyxHQUFHLENBQUc7T0FDbEIsQ0FBQyxDQUNELE1BQU0sQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFDdEIsZUFBTyxDQUFDLFVBQVEsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFJLENBQUM7T0FDakMsRUFBRSxFQUFFLENBQUMsQ0FBQzs7QUFFUCxrQkFBVSxVQUFVLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBSyxJQUFJLFVBQUssSUFBSSxTQUFJLEdBQUcsQ0FBRztLQUNuRTs7O1NBaEJvQixtQkFBbUI7MkJBaUJ6QyxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9sb2dnaW5nL2xvZ19mb3JtYXRfc3RyaW5nLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBhbnNpY29sb3JzIGZyb20gJ2Fuc2ljb2xvcnMnO1xuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xuXG5pbXBvcnQgTG9nRm9ybWF0IGZyb20gJy4vbG9nX2Zvcm1hdCc7XG5cbmxldCBzdGF0dXNlcyA9IFtcbiAgJ2VycicsXG4gICdpbmZvJyxcbiAgJ2Vycm9yJyxcbiAgJ3dhcm5pbmcnLFxuICAnZmF0YWwnLFxuICAnc3RhdHVzJyxcbiAgJ2RlYnVnJ1xuXTtcblxubGV0IHR5cGVDb2xvcnMgPSB7XG4gIGxvZzogJ2JsdWUnLFxuICByZXE6ICdncmVlbicsXG4gIHJlczogJ2dyZWVuJyxcbiAgb3BzOiAnY3lhbicsXG4gIGNvbmZpZzogJ2N5YW4nLFxuICBlcnI6ICdyZWQnLFxuICBpbmZvOiAnZ3JlZW4nLFxuICBlcnJvcjogJ3JlZCcsXG4gIHdhcm5pbmc6ICdyZWQnLFxuICBmYXRhbDogJ21hZ2VudGEnLFxuICBzdGF0dXM6ICd5ZWxsb3cnLFxuICBkZWJ1ZzogJ2JyaWdodEJsYWNrJyxcbiAgc2VydmVyOiAnYnJpZ2h0QmxhY2snLFxuICBvcHRtenI6ICd3aGl0ZScsXG4gIG1hbmFncjogJ2dyZWVuJyxcbiAgb3B0aW1pemU6ICdtYWdlbnRhJyxcbiAgbGlzdGVuaW5nOiAnbWFnZW50YSdcbn07XG5cbmxldCBjb2xvciA9IF8ubWVtb2l6ZShmdW5jdGlvbiAobmFtZSkge1xuICByZXR1cm4gYW5zaWNvbG9yc1t0eXBlQ29sb3JzW25hbWVdXSB8fCBfLmlkZW50aXR5O1xufSk7XG5cbmxldCB0eXBlID0gXy5tZW1vaXplKGZ1bmN0aW9uICh0KSB7XG4gIHJldHVybiBjb2xvcih0KShfLnBhZCh0LCA3KS5zbGljZSgwLCA3KSk7XG59KTtcblxubGV0IHdvcmtlclR5cGUgPSBwcm9jZXNzLmVudi5rYm5Xb3JrZXJUeXBlID8gYCR7dHlwZShwcm9jZXNzLmVudi5rYm5Xb3JrZXJUeXBlKX0gYCA6ICcnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIEtibkxvZ2dlckpzb25Gb3JtYXQgZXh0ZW5kcyBMb2dGb3JtYXQge1xuICBmb3JtYXQoZGF0YSkge1xuICAgIGxldCB0aW1lID0gY29sb3IoJ3RpbWUnKShtb21lbnQoZGF0YS50aW1lc3RhbXApLmZvcm1hdCgnSEg6bW06c3MuU1NTJykpO1xuICAgIGxldCBtc2cgPSBkYXRhLmVycm9yID8gY29sb3IoJ2Vycm9yJykoZGF0YS5lcnJvci5zdGFjaykgOiBjb2xvcignbWVzc2FnZScpKGRhdGEubWVzc2FnZSk7XG5cbiAgICBsZXQgdGFncyA9IF8oZGF0YS50YWdzKVxuICAgIC5zb3J0QnkoZnVuY3Rpb24gKHRhZykge1xuICAgICAgaWYgKGNvbG9yKHRhZykgPT09IF8uaWRlbnRpdHkpIHJldHVybiBgMiR7dGFnfWA7XG4gICAgICBpZiAoXy5pbmNsdWRlcyhzdGF0dXNlcywgdGFnKSkgcmV0dXJuIGAwJHt0YWd9YDtcbiAgICAgIHJldHVybiBgMSR7dGFnfWA7XG4gICAgfSlcbiAgICAucmVkdWNlKGZ1bmN0aW9uIChzLCB0KSB7XG4gICAgICByZXR1cm4gcyArIGBbJHsgY29sb3IodCkodCkgfV1gO1xuICAgIH0sICcnKTtcblxuICAgIHJldHVybiBgJHt3b3JrZXJUeXBlfSR7dHlwZShkYXRhLnR5cGUpfSBbJHt0aW1lfV0gJHt0YWdzfSAke21zZ31gO1xuICB9XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/logging/log_format_string.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;;;sBAAc,QAAQ;;;;0BACC,YAAY;;;;sBAChB,QAAQ;;;;0BAEL,cAAc;;;;AAEpC,IAAI,QAAQ,GAAG,CACb,KAAK,EACL,MAAM,EACN,OAAO,EACP,SAAS,EACT,OAAO,EACP,QAAQ,EACR,OAAO,CACR,CAAC;;AAEF,IAAI,UAAU,GAAG;AACf,KAAG,EAAE,MAAM;AACX,KAAG,EAAE,OAAO;AACZ,KAAG,EAAE,OAAO;AACZ,KAAG,EAAE,MAAM;AACX,QAAM,EAAE,MAAM;AACd,KAAG,EAAE,KAAK;AACV,MAAI,EAAE,OAAO;AACb,OAAK,EAAE,KAAK;AACZ,SAAO,EAAE,KAAK;AACd,OAAK,EAAE,SAAS;AAChB,QAAM,EAAE,QAAQ;AAChB,OAAK,EAAE,aAAa;AACpB,QAAM,EAAE,aAAa;AACrB,QAAM,EAAE,OAAO;AACf,QAAM,EAAE,OAAO;AACf,UAAQ,EAAE,SAAS;AACnB,WAAS,EAAE,SAAS;CACrB,CAAC;;AAEF,IAAI,KAAK,GAAG,oBAAE,OAAO,CAAC,UAAU,IAAI,EAAE;AACpC,SAAO,wBAAW,UAAU,CAAC,IAAI,CAAC,CAAC,IAAI,oBAAE,QAAQ,CAAC;CACnD,CAAC,CAAC;;AAEH,IAAI,IAAI,GAAG,oBAAE,OAAO,CAAC,UAAU,CAAC,EAAE;AAChC,SAAO,KAAK,CAAC,CAAC,CAAC,CAAC,oBAAE,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;CAC1C,CAAC,CAAC;;AAEH,IAAI,UAAU,GAAG,OAAO,CAAC,GAAG,CAAC,aAAa,GAAM,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC,SAAM,EAAE,CAAC;;AAExF,MAAM,CAAC,OAAO;YAAS,mBAAmB;;WAAnB,mBAAmB;0BAAnB,mBAAmB;;+BAAnB,mBAAmB;;;eAAnB,mBAAmB;;WAClC,gBAAC,IAAI,EAAE;AACX,UAAI,IAAI,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC,yBAAO,IAAI,CAAC,SAAS,CAAC,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC,CAAC;AACxE,UAAI,GAAG,GAAG,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;;AAEzF,UAAI,IAAI,GAAG,yBAAE,IAAI,CAAC,IAAI,CAAC,CACtB,MAAM,CAAC,UAAU,GAAG,EAAE;AACrB,YAAI,KAAK,CAAC,GAAG,CAAC,KAAK,oBAAE,QAAQ,EAAE,aAAW,GAAG,CAAG;AAChD,YAAI,oBAAE,QAAQ,CAAC,QAAQ,EAAE,GAAG,CAAC,EAAE,aAAW,GAAG,CAAG;AAChD,qBAAW,GAAG,CAAG;OAClB,CAAC,CACD,MAAM,CAAC,UAAU,CAAC,EAAE,CAAC,EAAE;AACtB,eAAO,CAAC,UAAQ,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAI,CAAC;OACjC,EAAE,EAAE,CAAC,CAAC;;AAEP,kBAAU,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,UAAK,IAAI,UAAK,IAAI,SAAI,GAAG,CAAG;KACnE;;;SAhBoB,mBAAmB;2BAiBzC,CAAC",
      "file": "/home/vio/v3metrics/src/server/logging/log_format_string.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport ansicolors from 'ansicolors';\nimport moment from 'moment';\n\nimport LogFormat from './log_format';\n\nlet statuses = [\n  'err',\n  'info',\n  'error',\n  'warning',\n  'fatal',\n  'status',\n  'debug'\n];\n\nlet typeColors = {\n  log: 'blue',\n  req: 'green',\n  res: 'green',\n  ops: 'cyan',\n  config: 'cyan',\n  err: 'red',\n  info: 'green',\n  error: 'red',\n  warning: 'red',\n  fatal: 'magenta',\n  status: 'yellow',\n  debug: 'brightBlack',\n  server: 'brightBlack',\n  optmzr: 'white',\n  managr: 'green',\n  optimize: 'magenta',\n  listening: 'magenta'\n};\n\nlet color = _.memoize(function (name) {\n  return ansicolors[typeColors[name]] || _.identity;\n});\n\nlet type = _.memoize(function (t) {\n  return color(t)(_.pad(t, 7).slice(0, 7));\n});\n\nlet workerType = process.env.kbnWorkerType ? `${type(process.env.kbnWorkerType)} ` : '';\n\nmodule.exports = class KbnLoggerJsonFormat extends LogFormat {\n  format(data) {\n    let time = color('time')(moment(data.timestamp).format('HH:mm:ss.SSS'));\n    let msg = data.error ? color('error')(data.error.stack) : color('message')(data.message);\n\n    let tags = _(data.tags)\n    .sortBy(function (tag) {\n      if (color(tag) === _.identity) return `2${tag}`;\n      if (_.includes(statuses, tag)) return `0${tag}`;\n      return `1${tag}`;\n    })\n    .reduce(function (s, t) {\n      return s + `[${ color(t)(t) }]`;\n    }, '');\n\n    return `${workerType}${type(data.type)} [${time}] ${tags} ${msg}`;\n  }\n};\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/config/setup.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./config",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Config"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _config = require('./config');\n\nvar _config2 = _interopRequireDefault(_config);\n\nmodule.exports = function (kbnServer) {\n  kbnServer.config = _config2['default'].withDefaultSchema(kbnServer.settings);\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9jb25maWcvc2V0dXAuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztzQkFBbUIsVUFBVTs7OztBQUM3QixNQUFNLENBQUMsT0FBTyxHQUFHLFVBQVUsU0FBUyxFQUFFO0FBQ3BDLFdBQVMsQ0FBQyxNQUFNLEdBQUcsb0JBQU8saUJBQWlCLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0NBQ2pFLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvc2VydmVyL2NvbmZpZy9zZXR1cC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDb25maWcgZnJvbSAnLi9jb25maWcnO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoa2JuU2VydmVyKSB7XG4gIGtiblNlcnZlci5jb25maWcgPSBDb25maWcud2l0aERlZmF1bHRTY2hlbWEoa2JuU2VydmVyLnNldHRpbmdzKTtcbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/config/setup.js"
      ],
      "names": [],
      "mappings": ";;;;sBAAmB,UAAU;;;;AAC7B,MAAM,CAAC,OAAO,GAAG,UAAU,SAAS,EAAE;AACpC,WAAS,CAAC,MAAM,GAAG,oBAAO,iBAAiB,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;CACjE,CAAC",
      "file": "/home/vio/v3metrics/src/server/config/setup.js",
      "sourcesContent": [
        "import Config from './config';\nmodule.exports = function (kbnServer) {\n  kbnServer.config = Config.withDefaultSchema(kbnServer.settings);\n};\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/http/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "url",
            "imported": [
              "parse"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "parse",
                "local": "parse"
              }
            ]
          },
          {
            "source": "url",
            "imported": [
              "format"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "format",
                "local": "format"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "fs",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "fs"
              }
            ]
          },
          {
            "source": "boom",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Boom"
              }
            ]
          },
          {
            "source": "hapi",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Hapi"
              }
            ]
          },
          {
            "source": "./get_default_route",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "getDefaultRoute"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "async-to-generator",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nvar _url = require('url');\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _fs = require('fs');\n\nvar _fs2 = _interopRequireDefault(_fs);\n\nvar _boom = require('boom');\n\nvar _boom2 = _interopRequireDefault(_boom);\n\nvar _hapi = require('hapi');\n\nvar _hapi2 = _interopRequireDefault(_hapi);\n\nvar _get_default_route = require('./get_default_route');\n\nvar _get_default_route2 = _interopRequireDefault(_get_default_route);\n\nmodule.exports = _asyncToGenerator(function* (kbnServer, server, config) {\n\n  server = kbnServer.server = new _hapi2['default'].Server();\n\n  var shortUrlLookup = require('./short_url_lookup')(server);\n  yield kbnServer.mixin(require('./setup_connection'));\n\n  // provide a simple way to expose static directories\n  server.decorate('server', 'exposeStaticDir', function (routePath, dirPath) {\n    this.route({\n      path: routePath,\n      method: 'GET',\n      handler: {\n        directory: {\n          path: dirPath,\n          listing: false,\n          lookupCompressed: true\n        }\n      },\n      config: { auth: false }\n    });\n  });\n\n  // provide a simple way to expose static files\n  server.decorate('server', 'exposeStaticFile', function (routePath, filePath) {\n    this.route({\n      path: routePath,\n      method: 'GET',\n      handler: {\n        file: filePath\n      },\n      config: { auth: false }\n    });\n  });\n\n  // helper for creating view managers for servers\n  server.decorate('server', 'setupViews', function (path, engines) {\n    this.views({\n      path: path,\n      isCached: config.get('optimize.viewCaching'),\n      engines: _lodash2['default'].assign({ jade: require('jade') }, engines || {})\n    });\n  });\n\n  server.decorate('server', 'redirectToSlash', function (route) {\n    this.route({\n      path: route,\n      method: 'GET',\n      handler: function handler(req, reply) {\n        return reply.redirect((0, _url.format)({\n          search: req.url.search,\n          pathname: req.url.pathname + '/'\n        }));\n      }\n    });\n  });\n\n  // attach the app name to the server, so we can be sure we are actually talking to kibana\n  server.ext('onPreResponse', function (req, reply) {\n    var response = req.response;\n\n    if (response.isBoom) {\n      response.output.headers['kbn-name'] = kbnServer.name;\n      response.output.headers['kbn-version'] = kbnServer.version;\n    } else {\n      response.header('kbn-name', kbnServer.name);\n      response.header('kbn-version', kbnServer.version);\n    }\n\n    return reply['continue']();\n  });\n\n  server.route({\n    path: '/',\n    method: 'GET',\n    handler: function handler(req, reply) {\n      return reply.view('root_redirect', {\n        hashRoute: config.get('server.basePath') + '/app/kibana',\n        defaultRoute: (0, _get_default_route2['default'])(kbnServer)\n      });\n    }\n  });\n\n  server.route({\n    method: 'GET',\n    path: '/{p*}',\n    handler: function handler(req, reply) {\n      var path = req.path;\n      if (path === '/' || path.charAt(path.length - 1) !== '/') {\n        return reply(_boom2['default'].notFound());\n      }\n\n      return reply.redirect((0, _url.format)({\n        search: req.url.search,\n        pathname: path.slice(0, -1)\n      })).permanent(true);\n    }\n  });\n\n  server.route({\n    method: 'GET',\n    path: '/goto/{urlId}',\n    handler: _asyncToGenerator(function* (request, reply) {\n      try {\n        var url = yield shortUrlLookup.getUrl(request.params.urlId);\n        reply().redirect(config.get('server.basePath') + url);\n      } catch (err) {\n        reply(err);\n      }\n    })\n  });\n\n  server.route({\n    method: 'POST',\n    path: '/shorten',\n    handler: _asyncToGenerator(function* (request, reply) {\n      try {\n        var urlId = yield shortUrlLookup.generateUrlId(request.payload.url);\n        reply(urlId);\n      } catch (err) {\n        reply(err);\n      }\n    })\n  });\n\n  return kbnServer.mixin(require('./xsrf'));\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9odHRwL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OzttQkFBc0IsS0FBSzs7c0JBRWIsUUFBUTs7OztrQkFDUCxJQUFJOzs7O29CQUNGLE1BQU07Ozs7b0JBQ04sTUFBTTs7OztpQ0FDSyxxQkFBcUI7Ozs7QUFDakQsTUFBTSxDQUFDLE9BQU8scUJBQUcsV0FBZ0IsU0FBUyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUU7O0FBRzFELFFBQU0sR0FBRyxTQUFTLENBQUMsTUFBTSxHQUFHLElBQUksa0JBQUssTUFBTSxFQUFFLENBQUM7O0FBRTlDLE1BQU0sY0FBYyxHQUFHLE9BQU8sQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQzdELFFBQU0sU0FBUyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxDQUFDOzs7QUFHckQsUUFBTSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEVBQUUsaUJBQWlCLEVBQUUsVUFBVSxTQUFTLEVBQUUsT0FBTyxFQUFFO0FBQ3pFLFFBQUksQ0FBQyxLQUFLLENBQUM7QUFDVCxVQUFJLEVBQUUsU0FBUztBQUNmLFlBQU0sRUFBRSxLQUFLO0FBQ2IsYUFBTyxFQUFFO0FBQ1AsaUJBQVMsRUFBRTtBQUNULGNBQUksRUFBRSxPQUFPO0FBQ2IsaUJBQU8sRUFBRSxLQUFLO0FBQ2QsMEJBQWdCLEVBQUUsSUFBSTtTQUN2QjtPQUNGO0FBQ0QsWUFBTSxFQUFFLEVBQUMsSUFBSSxFQUFFLEtBQUssRUFBQztLQUN0QixDQUFDLENBQUM7R0FDSixDQUFDLENBQUM7OztBQUdILFFBQU0sQ0FBQyxRQUFRLENBQUMsUUFBUSxFQUFFLGtCQUFrQixFQUFFLFVBQVUsU0FBUyxFQUFFLFFBQVEsRUFBRTtBQUMzRSxRQUFJLENBQUMsS0FBSyxDQUFDO0FBQ1QsVUFBSSxFQUFFLFNBQVM7QUFDZixZQUFNLEVBQUUsS0FBSztBQUNi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QyxLQUFLLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7Q0FDM0MsQ0FBQSxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9odHRwL2luZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcGFyc2UgfSBmcm9tICd1cmwnO1xuaW1wb3J0IHsgZm9ybWF0IH0gZnJvbSAndXJsJztcbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgZnMgZnJvbSAnZnMnO1xuaW1wb3J0IEJvb20gZnJvbSAnYm9vbSc7XG5pbXBvcnQgSGFwaSBmcm9tICdoYXBpJztcbmltcG9ydCBnZXREZWZhdWx0Um91dGUgZnJvbSAnLi9nZXRfZGVmYXVsdF9yb3V0ZSc7XG5tb2R1bGUuZXhwb3J0cyA9IGFzeW5jIGZ1bmN0aW9uIChrYm5TZXJ2ZXIsIHNlcnZlciwgY29uZmlnKSB7XG5cblxuICBzZXJ2ZXIgPSBrYm5TZXJ2ZXIuc2VydmVyID0gbmV3IEhhcGkuU2VydmVyKCk7XG5cbiAgY29uc3Qgc2hvcnRVcmxMb29rdXAgPSByZXF1aXJlKCcuL3Nob3J0X3VybF9sb29rdXAnKShzZXJ2ZXIpO1xuICBhd2FpdCBrYm5TZXJ2ZXIubWl4aW4ocmVxdWlyZSgnLi9zZXR1cF9jb25uZWN0aW9uJykpO1xuXG4gIC8vIHByb3ZpZGUgYSBzaW1wbGUgd2F5IHRvIGV4cG9zZSBzdGF0aWMgZGlyZWN0b3JpZXNcbiAgc2VydmVyLmRlY29yYXRlKCdzZXJ2ZXInLCAnZXhwb3NlU3RhdGljRGlyJywgZnVuY3Rpb24gKHJvdXRlUGF0aCwgZGlyUGF0aCkge1xuICAgIHRoaXMucm91dGUoe1xuICAgICAgcGF0aDogcm91dGVQYXRoLFxuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIGhhbmRsZXI6IHtcbiAgICAgICAgZGlyZWN0b3J5OiB7XG4gICAgICAgICAgcGF0aDogZGlyUGF0aCxcbiAgICAgICAgICBsaXN0aW5nOiBmYWxzZSxcbiAgICAgICAgICBsb29rdXBDb21wcmVzc2VkOiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBjb25maWc6IHthdXRoOiBmYWxzZX1cbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8gcHJvdmlkZSBhIHNpbXBsZSB3YXkgdG8gZXhwb3NlIHN0YXRpYyBmaWxlc1xuICBzZXJ2ZXIuZGVjb3JhdGUoJ3NlcnZlcicsICdleHBvc2VTdGF0aWNGaWxlJywgZnVuY3Rpb24gKHJvdXRlUGF0aCwgZmlsZVBhdGgpIHtcbiAgICB0aGlzLnJvdXRlKHtcbiAgICAgIHBhdGg6IHJvdXRlUGF0aCxcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICBoYW5kbGVyOiB7XG4gICAgICAgIGZpbGU6IGZpbGVQYXRoXG4gICAgICB9LFxuICAgICAgY29uZmlnOiB7YXV0aDogZmFsc2V9XG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vIGhlbHBlciBmb3IgY3JlYXRpbmcgdmlldyBtYW5hZ2VycyBmb3Igc2VydmVyc1xuICBzZXJ2ZXIuZGVjb3JhdGUoJ3NlcnZlcicsICdzZXR1cFZpZXdzJywgZnVuY3Rpb24gKHBhdGgsIGVuZ2luZXMpIHtcbiAgICB0aGlzLnZpZXdzKHtcbiAgICAgIHBhdGg6IHBhdGgsXG4gICAgICBpc0NhY2hlZDogY29uZmlnLmdldCgnb3B0aW1pemUudmlld0NhY2hpbmcnKSxcbiAgICAgIGVuZ2luZXM6IF8uYXNzaWduKHsgamFkZTogcmVxdWlyZSgnamFkZScpIH0sIGVuZ2luZXMgfHwge30pXG4gICAgfSk7XG4gIH0pO1xuXG4gIHNlcnZlci5kZWNvcmF0ZSgnc2VydmVyJywgJ3JlZGlyZWN0VG9TbGFzaCcsIGZ1bmN0aW9uIChyb3V0ZSkge1xuICAgIHRoaXMucm91dGUoe1xuICAgICAgcGF0aDogcm91dGUsXG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgaGFuZGxlcjogZnVuY3Rpb24gKHJlcSwgcmVwbHkpIHtcbiAgICAgICAgcmV0dXJuIHJlcGx5LnJlZGlyZWN0KGZvcm1hdCh7XG4gICAgICAgICAgc2VhcmNoOiByZXEudXJsLnNlYXJjaCxcbiAgICAgICAgICBwYXRobmFtZTogcmVxLnVybC5wYXRobmFtZSArICcvJyxcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICAvLyBhdHRhY2ggdGhlIGFwcCBuYW1lIHRvIHRoZSBzZXJ2ZXIsIHNvIHdlIGNhbiBiZSBzdXJlIHdlIGFyZSBhY3R1YWxseSB0YWxraW5nIHRvIGtpYmFuYVxuICBzZXJ2ZXIuZXh0KCdvblByZVJlc3BvbnNlJywgZnVuY3Rpb24gKHJlcSwgcmVwbHkpIHtcbiAgICBsZXQgcmVzcG9uc2UgPSByZXEucmVzcG9uc2U7XG5cbiAgICBpZiAocmVzcG9uc2UuaXNCb29tKSB7XG4gICAgICByZXNwb25zZS5vdXRwdXQuaGVhZGVyc1sna2JuLW5hbWUnXSA9IGtiblNlcnZlci5uYW1lO1xuICAgICAgcmVzcG9uc2Uub3V0cHV0LmhlYWRlcnNbJ2tibi12ZXJzaW9uJ10gPSBrYm5TZXJ2ZXIudmVyc2lvbjtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzcG9uc2UuaGVhZGVyKCdrYm4tbmFtZScsIGtiblNlcnZlci5uYW1lKTtcbiAgICAgIHJlc3BvbnNlLmhlYWRlcigna2JuLXZlcnNpb24nLCBrYm5TZXJ2ZXIudmVyc2lvbik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlcGx5LmNvbnRpbnVlKCk7XG4gIH0pO1xuXG4gIHNlcnZlci5yb3V0ZSh7XG4gICAgcGF0aDogJy8nLFxuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgaGFuZGxlcjogZnVuY3Rpb24gKHJlcSwgcmVwbHkpIHtcbiAgICAgIHJldHVybiByZXBseS52aWV3KCdyb290X3JlZGlyZWN0Jywge1xuICAgICAgICBoYXNoUm91dGU6IGAke2NvbmZpZy5nZXQoJ3NlcnZlci5iYXNlUGF0aCcpfS9hcHAva2liYW5hYCxcbiAgICAgICAgZGVmYXVsdFJvdXRlOiBnZXREZWZhdWx0Um91dGUoa2JuU2VydmVyKSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG5cbiAgc2VydmVyLnJvdXRlKHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIHBhdGg6ICcve3AqfScsXG4gICAgaGFuZGxlcjogZnVuY3Rpb24gKHJlcSwgcmVwbHkpIHtcbiAgICAgIGxldCBwYXRoID0gcmVxLnBhdGg7XG4gICAgICBpZiAocGF0aCA9PT0gJy8nIHx8IHBhdGguY2hhckF0KHBhdGgubGVuZ3RoIC0gMSkgIT09ICcvJykge1xuICAgICAgICByZXR1cm4gcmVwbHkoQm9vbS5ub3RGb3VuZCgpKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlcGx5LnJlZGlyZWN0KGZvcm1hdCh7XG4gICAgICAgIHNlYXJjaDogcmVxLnVybC5zZWFyY2gsXG4gICAgICAgIHBhdGhuYW1lOiBwYXRoLnNsaWNlKDAsIC0xKSxcbiAgICAgIH0pKVxuICAgICAgLnBlcm1hbmVudCh0cnVlKTtcbiAgICB9XG4gIH0pO1xuXG4gIHNlcnZlci5yb3V0ZSh7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICBwYXRoOiAnL2dvdG8ve3VybElkfScsXG4gICAgaGFuZGxlcjogYXN5bmMgZnVuY3Rpb24gKHJlcXVlc3QsIHJlcGx5KSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB1cmwgPSBhd2FpdCBzaG9ydFVybExvb2t1cC5nZXRVcmwocmVxdWVzdC5wYXJhbXMudXJsSWQpO1xuICAgICAgICByZXBseSgpLnJlZGlyZWN0KGNvbmZpZy5nZXQoJ3NlcnZlci5iYXNlUGF0aCcpICsgdXJsKTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICByZXBseShlcnIpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgc2VydmVyLnJvdXRlKHtcbiAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICBwYXRoOiAnL3Nob3J0ZW4nLFxuICAgIGhhbmRsZXI6IGFzeW5jIGZ1bmN0aW9uIChyZXF1ZXN0LCByZXBseSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXJsSWQgPSBhd2FpdCBzaG9ydFVybExvb2t1cC5nZW5lcmF0ZVVybElkKHJlcXVlc3QucGF5bG9hZC51cmwpO1xuICAgICAgICByZXBseSh1cmxJZCk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmVwbHkoZXJyKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBrYm5TZXJ2ZXIubWl4aW4ocmVxdWlyZSgnLi94c3JmJykpO1xufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/http/index.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/src/server/http/index.js",
      "sourcesContent": [
        "import { parse } from 'url';\nimport { format } from 'url';\nimport _ from 'lodash';\nimport fs from 'fs';\nimport Boom from 'boom';\nimport Hapi from 'hapi';\nimport getDefaultRoute from './get_default_route';\nmodule.exports = async function (kbnServer, server, config) {\n\n\n  server = kbnServer.server = new Hapi.Server();\n\n  const shortUrlLookup = require('./short_url_lookup')(server);\n  await kbnServer.mixin(require('./setup_connection'));\n\n  // provide a simple way to expose static directories\n  server.decorate('server', 'exposeStaticDir', function (routePath, dirPath) {\n    this.route({\n      path: routePath,\n      method: 'GET',\n      handler: {\n        directory: {\n          path: dirPath,\n          listing: false,\n          lookupCompressed: true\n        }\n      },\n      config: {auth: false}\n    });\n  });\n\n  // provide a simple way to expose static files\n  server.decorate('server', 'exposeStaticFile', function (routePath, filePath) {\n    this.route({\n      path: routePath,\n      method: 'GET',\n      handler: {\n        file: filePath\n      },\n      config: {auth: false}\n    });\n  });\n\n  // helper for creating view managers for servers\n  server.decorate('server', 'setupViews', function (path, engines) {\n    this.views({\n      path: path,\n      isCached: config.get('optimize.viewCaching'),\n      engines: _.assign({ jade: require('jade') }, engines || {})\n    });\n  });\n\n  server.decorate('server', 'redirectToSlash', function (route) {\n    this.route({\n      path: route,\n      method: 'GET',\n      handler: function (req, reply) {\n        return reply.redirect(format({\n          search: req.url.search,\n          pathname: req.url.pathname + '/',\n        }));\n      }\n    });\n  });\n\n  // attach the app name to the server, so we can be sure we are actually talking to kibana\n  server.ext('onPreResponse', function (req, reply) {\n    let response = req.response;\n\n    if (response.isBoom) {\n      response.output.headers['kbn-name'] = kbnServer.name;\n      response.output.headers['kbn-version'] = kbnServer.version;\n    } else {\n      response.header('kbn-name', kbnServer.name);\n      response.header('kbn-version', kbnServer.version);\n    }\n\n    return reply.continue();\n  });\n\n  server.route({\n    path: '/',\n    method: 'GET',\n    handler: function (req, reply) {\n      return reply.view('root_redirect', {\n        hashRoute: `${config.get('server.basePath')}/app/kibana`,\n        defaultRoute: getDefaultRoute(kbnServer),\n      });\n    }\n  });\n\n  server.route({\n    method: 'GET',\n    path: '/{p*}',\n    handler: function (req, reply) {\n      let path = req.path;\n      if (path === '/' || path.charAt(path.length - 1) !== '/') {\n        return reply(Boom.notFound());\n      }\n\n      return reply.redirect(format({\n        search: req.url.search,\n        pathname: path.slice(0, -1),\n      }))\n      .permanent(true);\n    }\n  });\n\n  server.route({\n    method: 'GET',\n    path: '/goto/{urlId}',\n    handler: async function (request, reply) {\n      try {\n        const url = await shortUrlLookup.getUrl(request.params.urlId);\n        reply().redirect(config.get('server.basePath') + url);\n      } catch (err) {\n        reply(err);\n      }\n    }\n  });\n\n  server.route({\n    method: 'POST',\n    path: '/shorten',\n    handler: async function (request, reply) {\n      try {\n        const urlId = await shortUrlLookup.generateUrlId(request.payload.url);\n        reply(urlId);\n      } catch (err) {\n        reply(err);\n      }\n    }\n  });\n\n  return kbnServer.mixin(require('./xsrf'));\n};\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/http/get_default_route.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nmodule.exports = _lodash2['default'].once(function (kbnServer) {\n  var uiExports = kbnServer.uiExports;\n  var config = kbnServer.config;\n\n  return '' + config.get('server.basePath') + config.get('server.defaultRoute');\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9odHRwL2dldF9kZWZhdWx0X3JvdXRlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7c0JBQWMsUUFBUTs7OztBQUV0QixNQUFNLENBQUMsT0FBTyxHQUFHLG9CQUFFLElBQUksQ0FBQyxVQUFVLFNBQVMsRUFBRTtNQUNuQyxTQUFTLEdBQWEsU0FBUyxDQUEvQixTQUFTO01BQUUsTUFBTSxHQUFLLFNBQVMsQ0FBcEIsTUFBTTs7QUFDekIsY0FBVSxNQUFNLENBQUMsR0FBRyxDQUFDLGlCQUFpQixDQUFDLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFHO0NBQy9FLENBQUMsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9zZXJ2ZXIvaHR0cC9nZXRfZGVmYXVsdF9yb3V0ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5cbm1vZHVsZS5leHBvcnRzID0gXy5vbmNlKGZ1bmN0aW9uIChrYm5TZXJ2ZXIpIHtcbiAgY29uc3QgeyB1aUV4cG9ydHMsIGNvbmZpZyB9ID0ga2JuU2VydmVyO1xuICByZXR1cm4gYCR7Y29uZmlnLmdldCgnc2VydmVyLmJhc2VQYXRoJyl9JHtjb25maWcuZ2V0KCdzZXJ2ZXIuZGVmYXVsdFJvdXRlJyl9YDtcbn0pO1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/http/get_default_route.js"
      ],
      "names": [],
      "mappings": ";;;;sBAAc,QAAQ;;;;AAEtB,MAAM,CAAC,OAAO,GAAG,oBAAE,IAAI,CAAC,UAAU,SAAS,EAAE;MACnC,SAAS,GAAa,SAAS,CAA/B,SAAS;MAAE,MAAM,GAAK,SAAS,CAApB,MAAM;;AACzB,cAAU,MAAM,CAAC,GAAG,CAAC,iBAAiB,CAAC,GAAG,MAAM,CAAC,GAAG,CAAC,qBAAqB,CAAC,CAAG;CAC/E,CAAC,CAAC",
      "file": "/home/vio/v3metrics/src/server/http/get_default_route.js",
      "sourcesContent": [
        "import _ from 'lodash';\n\nmodule.exports = _.once(function (kbnServer) {\n  const { uiExports, config } = kbnServer;\n  return `${config.get('server.basePath')}${config.get('server.defaultRoute')}`;\n});\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/logging/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "bluebird",
            "imported": [
              "fromNode"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "fromNode",
                "local": "fromNode"
              }
            ]
          },
          {
            "source": "even-better",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "evenBetter"
              }
            ]
          },
          {
            "source": "./configuration",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "loggingConfiguration"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _bluebird = require('bluebird');\n\nvar _evenBetter = require('even-better');\n\nvar _evenBetter2 = _interopRequireDefault(_evenBetter);\n\nvar _configuration = require('./configuration');\n\nvar _configuration2 = _interopRequireDefault(_configuration);\n\nexports['default'] = function (kbnServer, server, config) {\n  // prevent relying on kbnServer so this can be used with other hapi servers\n  kbnServer = null;\n\n  return (0, _bluebird.fromNode)(function (cb) {\n    server.register({\n      register: _evenBetter2['default'],\n      options: (0, _configuration2['default'])(config)\n    }, cb);\n  });\n};\n\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9sb2dnaW5nL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O3dCQUF5QixVQUFVOzswQkFDWixhQUFhOzs7OzZCQUNILGlCQUFpQjs7OztxQkFFbkMsVUFBVSxTQUFTLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRTs7QUFFbEQsV0FBUyxHQUFHLElBQUksQ0FBQzs7QUFFakIsU0FBTyx3QkFBUyxVQUFVLEVBQUUsRUFBRTtBQUM1QixVQUFNLENBQUMsUUFBUSxDQUFDO0FBQ2QsY0FBUSx5QkFBWTtBQUNwQixhQUFPLEVBQUUsZ0NBQXFCLE1BQU0sQ0FBQztLQUN0QyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0dBQ1IsQ0FBQyxDQUFDO0NBQ0o7O0FBQUEsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9zZXJ2ZXIvbG9nZ2luZy9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGZyb21Ob2RlIH0gZnJvbSAnYmx1ZWJpcmQnO1xuaW1wb3J0IGV2ZW5CZXR0ZXIgZnJvbSAnZXZlbi1iZXR0ZXInO1xuaW1wb3J0IGxvZ2dpbmdDb25maWd1cmF0aW9uIGZyb20gJy4vY29uZmlndXJhdGlvbic7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChrYm5TZXJ2ZXIsIHNlcnZlciwgY29uZmlnKSB7XG4gIC8vIHByZXZlbnQgcmVseWluZyBvbiBrYm5TZXJ2ZXIgc28gdGhpcyBjYW4gYmUgdXNlZCB3aXRoIG90aGVyIGhhcGkgc2VydmVyc1xuICBrYm5TZXJ2ZXIgPSBudWxsO1xuXG4gIHJldHVybiBmcm9tTm9kZShmdW5jdGlvbiAoY2IpIHtcbiAgICBzZXJ2ZXIucmVnaXN0ZXIoe1xuICAgICAgcmVnaXN0ZXI6IGV2ZW5CZXR0ZXIsXG4gICAgICBvcHRpb25zOiBsb2dnaW5nQ29uZmlndXJhdGlvbihjb25maWcpXG4gICAgfSwgY2IpO1xuICB9KTtcbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/logging/index.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;wBAAyB,UAAU;;0BACZ,aAAa;;;;6BACH,iBAAiB;;;;qBAEnC,UAAU,SAAS,EAAE,MAAM,EAAE,MAAM,EAAE;;AAElD,WAAS,GAAG,IAAI,CAAC;;AAEjB,SAAO,wBAAS,UAAU,EAAE,EAAE;AAC5B,UAAM,CAAC,QAAQ,CAAC;AACd,cAAQ,yBAAY;AACpB,aAAO,EAAE,gCAAqB,MAAM,CAAC;KACtC,EAAE,EAAE,CAAC,CAAC;GACR,CAAC,CAAC;CACJ;;AAAA,CAAC",
      "file": "/home/vio/v3metrics/src/server/logging/index.js",
      "sourcesContent": [
        "import { fromNode } from 'bluebird';\nimport evenBetter from 'even-better';\nimport loggingConfiguration from './configuration';\n\nexport default function (kbnServer, server, config) {\n  // prevent relying on kbnServer so this can be used with other hapi servers\n  kbnServer = null;\n\n  return fromNode(function (cb) {\n    server.register({\n      register: evenBetter,\n      options: loggingConfiguration(config)\n    }, cb);\n  });\n};\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/status/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "./server_status",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "ServerStatus"
              }
            ]
          },
          {
            "source": "./wrap_auth_config",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "wrapAuthConfig"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "join"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "join",
                "local": "join"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "async-to-generator",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _server_status = require('./server_status');\n\nvar _server_status2 = _interopRequireDefault(_server_status);\n\nvar _wrap_auth_config = require('./wrap_auth_config');\n\nvar _wrap_auth_config2 = _interopRequireDefault(_wrap_auth_config);\n\nvar _path = require('path');\n\nexports['default'] = function (kbnServer, server, config) {\n  kbnServer.status = new _server_status2['default'](kbnServer.server);\n\n  if (server.plugins['even-better']) {\n    kbnServer.mixin(require('./metrics'));\n  }\n\n  var wrapAuth = (0, _wrap_auth_config2['default'])(config.get('status.allowAnonymous'));\n\n  server.route(wrapAuth({\n    method: 'GET',\n    path: '/api/status',\n    handler: function handler(request, reply) {\n      return reply({\n        name: config.get('server.name'),\n        uuid: config.get('uuid'),\n        status: kbnServer.status.toJSON(),\n        metrics: kbnServer.metrics\n      });\n    }\n  }));\n\n  server.decorate('reply', 'renderStatusPage', _asyncToGenerator(function* () {\n    var app = kbnServer.uiExports.getHiddenApp('status_page');\n    var response = yield getResponse(this);\n    response.code(kbnServer.status.isGreen() ? 200 : 503);\n    return response;\n\n    function getResponse(ctx) {\n      if (app) {\n        return ctx.renderApp(app);\n      }\n      return ctx(kbnServer.status.toString());\n    }\n  }));\n\n  server.route(wrapAuth({\n    method: 'GET',\n    path: '/status',\n    handler: function handler(request, reply) {\n      return reply.renderStatusPage();\n    }\n  }));\n};\n\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9zdGF0dXMvaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztzQkFBYyxRQUFROzs7OzZCQUNHLGlCQUFpQjs7OztnQ0FDZixvQkFBb0I7Ozs7b0JBQzFCLE1BQU07O3FCQUVaLFVBQVUsU0FBUyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUU7QUFDbEQsV0FBUyxDQUFDLE1BQU0sR0FBRywrQkFBaUIsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDOztBQUV0RCxNQUFJLE1BQU0sQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLEVBQUU7QUFDakMsYUFBUyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQztHQUN2Qzs7QUFFRCxNQUFNLFFBQVEsR0FBRyxtQ0FBZSxNQUFNLENBQUMsR0FBRyxDQUFDLHVCQUF1QixDQUFDLENBQUMsQ0FBQzs7QUFFckUsUUFBTSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUM7QUFDcEIsVUFBTSxFQUFFLEtBQUs7QUFDYixRQUFJLEVBQUUsYUFBYTtBQUNuQixXQUFPLEVBQUUsaUJBQVUsT0FBTyxFQUFFLEtBQUssRUFBRTtBQUNqQyxhQUFPLEtBQUssQ0FBQztBQUNYLFlBQUksRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQztBQUMvQixZQUFJLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUM7QUFDeEIsY0FBTSxFQUFFLFNBQVMsQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFO0FBQ2pDLGVBQU8sRUFBRSxTQUFTLENBQUMsT0FBTztPQUMzQixDQUFDLENBQUM7S0FDSjtHQUNGLENBQUMsQ0FBQyxDQUFDOztBQUVKLFFBQU0sQ0FBQyxRQUFRLENBQUMsT0FBTyxFQUFFLGtCQUFrQixvQkFBRSxhQUFrQjtBQUM3RCxRQUFNLEdBQUcsR0FBRyxTQUFTLENBQUMsU0FBUyxDQUFDLFlBQVksQ0FBQyxhQUFhLENBQUMsQ0FBQztBQUM1RCxRQUFNLFFBQVEsR0FBRyxNQUFNLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUN6QyxZQUFRLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsT0FBTyxFQUFFLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQ3RELFdBQU8sUUFBUSxDQUFDOztBQUVoQixhQUFTLFdBQVcsQ0FBQyxHQUFHLEVBQUU7QUFDeEIsVUFBSSxHQUFHLEVBQUU7QUFDUCxlQUFPLEdBQUcsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUM7T0FDM0I7QUFDRCxhQUFPLEdBQUcsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUM7S0FDekM7R0FDRixFQUFDLENBQUM7O0FBRUgsUUFBTSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUM7QUFDcEIsVUFBTSxFQUFFLEtBQUs7QUFDYixRQUFJLEVBQUUsU0FBUztBQUNmLFdBQU8sRUFBRSxpQkFBVSxPQUFPLEVBQUUsS0FBSyxFQUFFO0FBQ2pDLGFBQU8sS0FBSyxDQUFDLGdCQUFnQixFQUFFLENBQUM7S0FDakM7R0FDRixDQUFDLENBQUMsQ0FBQztDQUNMOztBQUFBLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvc2VydmVyL3N0YXR1cy9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgU2VydmVyU3RhdHVzIGZyb20gJy4vc2VydmVyX3N0YXR1cyc7XG5pbXBvcnQgd3JhcEF1dGhDb25maWcgZnJvbSAnLi93cmFwX2F1dGhfY29uZmlnJztcbmltcG9ydCB7IGpvaW4gfSBmcm9tICdwYXRoJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKGtiblNlcnZlciwgc2VydmVyLCBjb25maWcpIHtcbiAga2JuU2VydmVyLnN0YXR1cyA9IG5ldyBTZXJ2ZXJTdGF0dXMoa2JuU2VydmVyLnNlcnZlcik7XG5cbiAgaWYgKHNlcnZlci5wbHVnaW5zWydldmVuLWJldHRlciddKSB7XG4gICAga2JuU2VydmVyLm1peGluKHJlcXVpcmUoJy4vbWV0cmljcycpKTtcbiAgfVxuXG4gIGNvbnN0IHdyYXBBdXRoID0gd3JhcEF1dGhDb25maWcoY29uZmlnLmdldCgnc3RhdHVzLmFsbG93QW5vbnltb3VzJykpO1xuXG4gIHNlcnZlci5yb3V0ZSh3cmFwQXV0aCh7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICBwYXRoOiAnL2FwaS9zdGF0dXMnLFxuICAgIGhhbmRsZXI6IGZ1bmN0aW9uIChyZXF1ZXN0LCByZXBseSkge1xuICAgICAgcmV0dXJuIHJlcGx5KHtcbiAgICAgICAgbmFtZTogY29uZmlnLmdldCgnc2VydmVyLm5hbWUnKSxcbiAgICAgICAgdXVpZDogY29uZmlnLmdldCgndXVpZCcpLFxuICAgICAgICBzdGF0dXM6IGtiblNlcnZlci5zdGF0dXMudG9KU09OKCksXG4gICAgICAgIG1ldHJpY3M6IGtiblNlcnZlci5tZXRyaWNzXG4gICAgICB9KTtcbiAgICB9XG4gIH0pKTtcblxuICBzZXJ2ZXIuZGVjb3JhdGUoJ3JlcGx5JywgJ3JlbmRlclN0YXR1c1BhZ2UnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgYXBwID0ga2JuU2VydmVyLnVpRXhwb3J0cy5nZXRIaWRkZW5BcHAoJ3N0YXR1c19wYWdlJyk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBnZXRSZXNwb25zZSh0aGlzKTtcbiAgICByZXNwb25zZS5jb2RlKGtiblNlcnZlci5zdGF0dXMuaXNHcmVlbigpID8gMjAwIDogNTAzKTtcbiAgICByZXR1cm4gcmVzcG9uc2U7XG5cbiAgICBmdW5jdGlvbiBnZXRSZXNwb25zZShjdHgpIHtcbiAgICAgIGlmIChhcHApIHtcbiAgICAgICAgcmV0dXJuIGN0eC5yZW5kZXJBcHAoYXBwKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjdHgoa2JuU2VydmVyLnN0YXR1cy50b1N0cmluZygpKTtcbiAgICB9XG4gIH0pO1xuXG4gIHNlcnZlci5yb3V0ZSh3cmFwQXV0aCh7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICBwYXRoOiAnL3N0YXR1cycsXG4gICAgaGFuZGxlcjogZnVuY3Rpb24gKHJlcXVlc3QsIHJlcGx5KSB7XG4gICAgICByZXR1cm4gcmVwbHkucmVuZGVyU3RhdHVzUGFnZSgpO1xuICAgIH1cbiAgfSkpO1xufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/status/index.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;sBAAc,QAAQ;;;;6BACG,iBAAiB;;;;gCACf,oBAAoB;;;;oBAC1B,MAAM;;qBAEZ,UAAU,SAAS,EAAE,MAAM,EAAE,MAAM,EAAE;AAClD,WAAS,CAAC,MAAM,GAAG,+BAAiB,SAAS,CAAC,MAAM,CAAC,CAAC;;AAEtD,MAAI,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,EAAE;AACjC,aAAS,CAAC,KAAK,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC;GACvC;;AAED,MAAM,QAAQ,GAAG,mCAAe,MAAM,CAAC,GAAG,CAAC,uBAAuB,CAAC,CAAC,CAAC;;AAErE,QAAM,CAAC,KAAK,CAAC,QAAQ,CAAC;AACpB,UAAM,EAAE,KAAK;AACb,QAAI,EAAE,aAAa;AACnB,WAAO,EAAE,iBAAU,OAAO,EAAE,KAAK,EAAE;AACjC,aAAO,KAAK,CAAC;AACX,YAAI,EAAE,MAAM,CAAC,GAAG,CAAC,aAAa,CAAC;AAC/B,YAAI,EAAE,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC;AACxB,cAAM,EAAE,SAAS,CAAC,MAAM,CAAC,MAAM,EAAE;AACjC,eAAO,EAAE,SAAS,CAAC,OAAO;OAC3B,CAAC,CAAC;KACJ;GACF,CAAC,CAAC,CAAC;;AAEJ,QAAM,CAAC,QAAQ,CAAC,OAAO,EAAE,kBAAkB,oBAAE,aAAkB;AAC7D,QAAM,GAAG,GAAG,SAAS,CAAC,SAAS,CAAC,YAAY,CAAC,aAAa,CAAC,CAAC;AAC5D,QAAM,QAAQ,GAAG,MAAM,WAAW,CAAC,IAAI,CAAC,CAAC;AACzC,YAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,OAAO,EAAE,GAAG,GAAG,GAAG,GAAG,CAAC,CAAC;AACtD,WAAO,QAAQ,CAAC;;AAEhB,aAAS,WAAW,CAAC,GAAG,EAAE;AACxB,UAAI,GAAG,EAAE;AACP,eAAO,GAAG,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;OAC3B;AACD,aAAO,GAAG,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,CAAC;KACzC;GACF,EAAC,CAAC;;AAEH,QAAM,CAAC,KAAK,CAAC,QAAQ,CAAC;AACpB,UAAM,EAAE,KAAK;AACb,QAAI,EAAE,SAAS;AACf,WAAO,EAAE,iBAAU,OAAO,EAAE,KAAK,EAAE;AACjC,aAAO,KAAK,CAAC,gBAAgB,EAAE,CAAC;KACjC;GACF,CAAC,CAAC,CAAC;CACL;;AAAA,CAAC",
      "file": "/home/vio/v3metrics/src/server/status/index.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport ServerStatus from './server_status';\nimport wrapAuthConfig from './wrap_auth_config';\nimport { join } from 'path';\n\nexport default function (kbnServer, server, config) {\n  kbnServer.status = new ServerStatus(kbnServer.server);\n\n  if (server.plugins['even-better']) {\n    kbnServer.mixin(require('./metrics'));\n  }\n\n  const wrapAuth = wrapAuthConfig(config.get('status.allowAnonymous'));\n\n  server.route(wrapAuth({\n    method: 'GET',\n    path: '/api/status',\n    handler: function (request, reply) {\n      return reply({\n        name: config.get('server.name'),\n        uuid: config.get('uuid'),\n        status: kbnServer.status.toJSON(),\n        metrics: kbnServer.metrics\n      });\n    }\n  }));\n\n  server.decorate('reply', 'renderStatusPage', async function () {\n    const app = kbnServer.uiExports.getHiddenApp('status_page');\n    const response = await getResponse(this);\n    response.code(kbnServer.status.isGreen() ? 200 : 503);\n    return response;\n\n    function getResponse(ctx) {\n      if (app) {\n        return ctx.renderApp(app);\n      }\n      return ctx(kbnServer.status.toString());\n    }\n  });\n\n  server.route(wrapAuth({\n    method: 'GET',\n    path: '/status',\n    handler: function (request, reply) {\n      return reply.renderStatusPage();\n    }\n  }));\n};\n"
      ]
    },
    "mtime": 1467036622849
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/status/server_status.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "./states",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "states"
              }
            ]
          },
          {
            "source": "./status",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Status"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _states = require('./states');\n\nvar _states2 = _interopRequireDefault(_states);\n\nvar _status = require('./status');\n\nvar _status2 = _interopRequireDefault(_status);\n\nmodule.exports = (function () {\n  function ServerStatus(server) {\n    _classCallCheck(this, ServerStatus);\n\n    this.server = server;\n    this._created = {};\n  }\n\n  _createClass(ServerStatus, [{\n    key: 'create',\n    value: function create(id) {\n      var status = new _status2['default'](id, this.server);\n      this._created[status.id] = status;\n      return status;\n    }\n  }, {\n    key: 'createForPlugin',\n    value: function createForPlugin(plugin) {\n      var status = this.create('plugin:' + plugin.id + '@' + plugin.version);\n      status.plugin = plugin;\n      return status;\n    }\n  }, {\n    key: 'each',\n    value: function each(fn) {\n      var self = this;\n      _lodash2['default'].forOwn(self._created, function (status, i, list) {\n        if (status.state !== 'disabled') {\n          fn.call(self, status, i, list);\n        }\n      });\n    }\n  }, {\n    key: 'get',\n    value: function get(id) {\n      return this._created[id];\n    }\n  }, {\n    key: 'getForPluginId',\n    value: function getForPluginId(pluginId) {\n      return _lodash2['default'].find(this._created, function (s) {\n        return s.plugin && s.plugin.id === pluginId;\n      });\n    }\n  }, {\n    key: 'getState',\n    value: function getState(id) {\n      var status = this.get(id);\n      if (!status) return undefined;\n      return status.state || 'uninitialized';\n    }\n  }, {\n    key: 'getStateForPluginId',\n    value: function getStateForPluginId(pluginId) {\n      var status = this.getForPluginId(pluginId);\n      if (!status) return undefined;\n      return status.state || 'uninitialized';\n    }\n  }, {\n    key: 'overall',\n    value: function overall() {\n      var state = (0, _lodash2['default'])(this._created).map(function (status) {\n        return _states2['default'].get(status.state);\n      }).sortBy('severity').pop();\n\n      var statuses = _lodash2['default'].where(this._created, { state: state.id });\n      var since = _lodash2['default'].get(_lodash2['default'].sortBy(statuses, 'since'), [0, 'since']);\n\n      return {\n        state: state.id,\n        title: state.title,\n        nickname: _lodash2['default'].sample(state.nicknames),\n        icon: state.icon,\n        since: since\n      };\n    }\n  }, {\n    key: 'isGreen',\n    value: function isGreen() {\n      return this.overall().state === 'green';\n    }\n  }, {\n    key: 'notGreen',\n    value: function notGreen() {\n      return !this.isGreen();\n    }\n  }, {\n    key: 'toString',\n    value: function toString() {\n      var overall = this.overall();\n      return overall.title + ' – ' + overall.nickname;\n    }\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      return {\n        overall: this.overall(),\n        statuses: _lodash2['default'].values(this._created)\n      };\n    }\n  }]);\n\n  return ServerStatus;\n})();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9zdGF0dXMvc2VydmVyX3N0YXR1cy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7OztzQkFBYyxRQUFROzs7O3NCQUVILFVBQVU7Ozs7c0JBQ1YsVUFBVTs7OztBQUU3QixNQUFNLENBQUMsT0FBTztBQUNELFdBRFUsWUFBWSxDQUNyQixNQUFNLEVBQUU7MEJBREMsWUFBWTs7QUFFL0IsUUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7QUFDckIsUUFBSSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUM7R0FDcEI7O2VBSm9CLFlBQVk7O1dBTTNCLGdCQUFDLEVBQUUsRUFBRTtBQUNULFVBQU0sTUFBTSxHQUFHLHdCQUFXLEVBQUUsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDM0MsVUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLEdBQUcsTUFBTSxDQUFDO0FBQ2xDLGFBQU8sTUFBTSxDQUFDO0tBQ2Y7OztXQUVjLHlCQUFDLE1BQU0sRUFBRTtBQUN0QixVQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxhQUFXLE1BQU0sQ0FBQyxFQUFFLFNBQUksTUFBTSxDQUFDLE9BQU8sQ0FBRyxDQUFDO0FBQ3BFLFlBQU0sQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO0FBQ3ZCLGFBQU8sTUFBTSxDQUFDO0tBQ2Y7OztXQUVHLGNBQUMsRUFBRSxFQUFFO0FBQ1AsVUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDO0FBQ2hCLDBCQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLFVBQVUsTUFBTSxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUU7QUFDakQsWUFBSSxNQUFNLENBQUMsS0FBSyxLQUFLLFVBQVUsRUFBRTtBQUMvQixZQUFFLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxNQUFNLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO1NBQ2hDO09BQ0YsQ0FBQyxDQUFDO0tBQ0o7OztXQUVFLGFBQUMsRUFBRSxFQUFFO0FBQ04sYUFBTyxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0tBQzFCOzs7V0FFYSx3QkFBQyxRQUFRLEVBQUU7QUFDdkIsYUFBTyxvQkFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxVQUFBLENBQUM7ZUFDNUIsQ0FBQyxDQUFDLE1BQU0sSUFBSSxDQUFDLENBQUMsTUFBTSxDQUFDLEVBQUUsS0FBSyxRQUFRO09BQUEsQ0FDckMsQ0FBQztLQUNIOzs7V0FFTyxrQkFBQyxFQUFFLEVBQUU7QUFDWCxVQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQzVCLFVBQUksQ0FBQyxNQUFNLEVBQUUsT0FBTyxTQUFTLENBQUM7QUFDOUIsYUFBTyxNQUFNLENBQUMsS0FBSyxJQUFJLGVBQWUsQ0FBQztLQUN4Qzs7O1dBRWtCLDZCQUFDLFFBQVEsRUFBRTtBQUM1QixVQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQzdDLFVBQUksQ0FBQyxNQUFNLEVBQUUsT0FBTyxTQUFTLENBQUM7QUFDOUIsYUFBTyxNQUFNLENBQUMsS0FBSyxJQUFJLGVBQWUsQ0FBQztLQUN4Qzs7O1dBRU0sbUJBQUc7QUFDUixVQUFJLEtBQUssR0FBRyx5QkFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLENBQzNCLEdBQUcsQ0FBQyxVQUFVLE1BQU0sRUFBRTtBQUNyQixlQUFPLG9CQUFPLEdBQUcsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7T0FDakMsQ0FBQyxDQUNELE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FDbEIsR0FBRyxFQUFFLENBQUM7O0FBRVAsVUFBSSxRQUFRLEdBQUcsb0JBQUUsS0FBSyxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsRUFBRSxLQUFLLEVBQUUsS0FBSyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7QUFDM0QsVUFBSSxLQUFLLEdBQUcsb0JBQUUsR0FBRyxDQUFDLG9CQUFFLE1BQU0sQ0FBQyxRQUFRLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQzs7QUFFN0QsYUFBTztBQUNMLGFBQUssRUFBRSxLQUFLLENBQUMsRUFBRTtBQUNmLGFBQUssRUFBRSxLQUFLLENBQUMsS0FBSztBQUNsQixnQkFBUSxFQUFFLG9CQUFFLE1BQU0sQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDO0FBQ25DLFlBQUksRUFBRSxLQUFLLENBQUMsSUFBSTtBQUNoQixhQUFLLEVBQUUsS0FBSztPQUNiLENBQUM7S0FDSDs7O1dBRU0sbUJBQUc7QUFDUixhQUFRLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQyxLQUFLLEtBQUssT0FBTyxDQUFFO0tBQzNDOzs7V0FFTyxvQkFBRztBQUNULGFBQU8sQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7S0FDeEI7OztXQUVPLG9CQUFHO0FBQ1QsVUFBSSxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO0FBQzdCLGFBQVUsT0FBTyxDQUFDLEtBQUssV0FBTSxPQUFPLENBQUMsUUFBUSxDQUFHO0tBQ2pEOzs7V0FFSyxrQkFBRztBQUNQLGFBQU87QUFDTCxlQUFPLEVBQUUsSUFBSSxDQUFDLE9BQU8sRUFBRTtBQUN2QixnQkFBUSxFQUFFLG9CQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDO09BQ2xDLENBQUM7S0FDSDs7O1NBdkZvQixZQUFZO0lBd0ZsQyxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9zdGF0dXMvc2VydmVyX3N0YXR1cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCBzdGF0ZXMgZnJvbSAnLi9zdGF0ZXMnO1xuaW1wb3J0IFN0YXR1cyBmcm9tICcuL3N0YXR1cyc7XG5cbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgU2VydmVyU3RhdHVzIHtcbiAgY29uc3RydWN0b3Ioc2VydmVyKSB7XG4gICAgdGhpcy5zZXJ2ZXIgPSBzZXJ2ZXI7XG4gICAgdGhpcy5fY3JlYXRlZCA9IHt9O1xuICB9XG5cbiAgY3JlYXRlKGlkKSB7XG4gICAgY29uc3Qgc3RhdHVzID0gbmV3IFN0YXR1cyhpZCwgdGhpcy5zZXJ2ZXIpO1xuICAgIHRoaXMuX2NyZWF0ZWRbc3RhdHVzLmlkXSA9IHN0YXR1cztcbiAgICByZXR1cm4gc3RhdHVzO1xuICB9XG5cbiAgY3JlYXRlRm9yUGx1Z2luKHBsdWdpbikge1xuICAgIGNvbnN0IHN0YXR1cyA9IHRoaXMuY3JlYXRlKGBwbHVnaW46JHtwbHVnaW4uaWR9QCR7cGx1Z2luLnZlcnNpb259YCk7XG4gICAgc3RhdHVzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICByZXR1cm4gc3RhdHVzO1xuICB9XG5cbiAgZWFjaChmbikge1xuICAgIGxldCBzZWxmID0gdGhpcztcbiAgICBfLmZvck93bihzZWxmLl9jcmVhdGVkLCBmdW5jdGlvbiAoc3RhdHVzLCBpLCBsaXN0KSB7XG4gICAgICBpZiAoc3RhdHVzLnN0YXRlICE9PSAnZGlzYWJsZWQnKSB7XG4gICAgICAgIGZuLmNhbGwoc2VsZiwgc3RhdHVzLCBpLCBsaXN0KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGdldChpZCkge1xuICAgIHJldHVybiB0aGlzLl9jcmVhdGVkW2lkXTtcbiAgfVxuXG4gIGdldEZvclBsdWdpbklkKHBsdWdpbklkKSB7XG4gICAgcmV0dXJuIF8uZmluZCh0aGlzLl9jcmVhdGVkLCBzID0+XG4gICAgICBzLnBsdWdpbiAmJiBzLnBsdWdpbi5pZCA9PT0gcGx1Z2luSWRcbiAgICApO1xuICB9XG5cbiAgZ2V0U3RhdGUoaWQpIHtcbiAgICBjb25zdCBzdGF0dXMgPSB0aGlzLmdldChpZCk7XG4gICAgaWYgKCFzdGF0dXMpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIHN0YXR1cy5zdGF0ZSB8fCAndW5pbml0aWFsaXplZCc7XG4gIH1cblxuICBnZXRTdGF0ZUZvclBsdWdpbklkKHBsdWdpbklkKSB7XG4gICAgY29uc3Qgc3RhdHVzID0gdGhpcy5nZXRGb3JQbHVnaW5JZChwbHVnaW5JZCk7XG4gICAgaWYgKCFzdGF0dXMpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIHN0YXR1cy5zdGF0ZSB8fCAndW5pbml0aWFsaXplZCc7XG4gIH1cblxuICBvdmVyYWxsKCkge1xuICAgIGxldCBzdGF0ZSA9IF8odGhpcy5fY3JlYXRlZClcbiAgICAubWFwKGZ1bmN0aW9uIChzdGF0dXMpIHtcbiAgICAgIHJldHVybiBzdGF0ZXMuZ2V0KHN0YXR1cy5zdGF0ZSk7XG4gICAgfSlcbiAgICAuc29ydEJ5KCdzZXZlcml0eScpXG4gICAgLnBvcCgpO1xuXG4gICAgbGV0IHN0YXR1c2VzID0gXy53aGVyZSh0aGlzLl9jcmVhdGVkLCB7IHN0YXRlOiBzdGF0ZS5pZCB9KTtcbiAgICBsZXQgc2luY2UgPSBfLmdldChfLnNvcnRCeShzdGF0dXNlcywgJ3NpbmNlJyksIFswLCAnc2luY2UnXSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgc3RhdGU6IHN0YXRlLmlkLFxuICAgICAgdGl0bGU6IHN0YXRlLnRpdGxlLFxuICAgICAgbmlja25hbWU6IF8uc2FtcGxlKHN0YXRlLm5pY2tuYW1lcyksXG4gICAgICBpY29uOiBzdGF0ZS5pY29uLFxuICAgICAgc2luY2U6IHNpbmNlLFxuICAgIH07XG4gIH1cblxuICBpc0dyZWVuKCkge1xuICAgIHJldHVybiAodGhpcy5vdmVyYWxsKCkuc3RhdGUgPT09ICdncmVlbicpO1xuICB9XG5cbiAgbm90R3JlZW4oKSB7XG4gICAgcmV0dXJuICF0aGlzLmlzR3JlZW4oKTtcbiAgfVxuXG4gIHRvU3RyaW5nKCkge1xuICAgIGxldCBvdmVyYWxsID0gdGhpcy5vdmVyYWxsKCk7XG4gICAgcmV0dXJuIGAke292ZXJhbGwudGl0bGV9IOKAkyAke292ZXJhbGwubmlja25hbWV9YDtcbiAgfVxuXG4gIHRvSlNPTigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgb3ZlcmFsbDogdGhpcy5vdmVyYWxsKCksXG4gICAgICBzdGF0dXNlczogXy52YWx1ZXModGhpcy5fY3JlYXRlZClcbiAgICB9O1xuICB9XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/status/server_status.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/src/server/status/server_status.js",
      "sourcesContent": [
        "import _ from 'lodash';\n\nimport states from './states';\nimport Status from './status';\n\nmodule.exports = class ServerStatus {\n  constructor(server) {\n    this.server = server;\n    this._created = {};\n  }\n\n  create(id) {\n    const status = new Status(id, this.server);\n    this._created[status.id] = status;\n    return status;\n  }\n\n  createForPlugin(plugin) {\n    const status = this.create(`plugin:${plugin.id}@${plugin.version}`);\n    status.plugin = plugin;\n    return status;\n  }\n\n  each(fn) {\n    let self = this;\n    _.forOwn(self._created, function (status, i, list) {\n      if (status.state !== 'disabled') {\n        fn.call(self, status, i, list);\n      }\n    });\n  }\n\n  get(id) {\n    return this._created[id];\n  }\n\n  getForPluginId(pluginId) {\n    return _.find(this._created, s =>\n      s.plugin && s.plugin.id === pluginId\n    );\n  }\n\n  getState(id) {\n    const status = this.get(id);\n    if (!status) return undefined;\n    return status.state || 'uninitialized';\n  }\n\n  getStateForPluginId(pluginId) {\n    const status = this.getForPluginId(pluginId);\n    if (!status) return undefined;\n    return status.state || 'uninitialized';\n  }\n\n  overall() {\n    let state = _(this._created)\n    .map(function (status) {\n      return states.get(status.state);\n    })\n    .sortBy('severity')\n    .pop();\n\n    let statuses = _.where(this._created, { state: state.id });\n    let since = _.get(_.sortBy(statuses, 'since'), [0, 'since']);\n\n    return {\n      state: state.id,\n      title: state.title,\n      nickname: _.sample(state.nicknames),\n      icon: state.icon,\n      since: since,\n    };\n  }\n\n  isGreen() {\n    return (this.overall().state === 'green');\n  }\n\n  notGreen() {\n    return !this.isGreen();\n  }\n\n  toString() {\n    let overall = this.overall();\n    return `${overall.title} – ${overall.nickname}`;\n  }\n\n  toJSON() {\n    return {\n      overall: this.overall(),\n      statuses: _.values(this._created)\n    };\n  }\n};\n"
      ]
    },
    "mtime": 1467036622849
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/status/states.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nexports.all = [{\n  id: 'red',\n  title: 'Red',\n  icon: 'danger',\n  severity: 1000,\n  nicknames: ['Danger Will Robinson! Danger!']\n}, {\n  id: 'uninitialized',\n  title: 'Uninitialized',\n  icon: 'spinner',\n  severity: 900,\n  nicknames: ['Initializing']\n}, {\n  id: 'yellow',\n  title: 'Yellow',\n  icon: 'warning',\n  severity: 800,\n  nicknames: ['S.N.A.F.U', 'I\\'ll be back', 'brb']\n}, {\n  id: 'green',\n  title: 'Green',\n  icon: 'success',\n  severity: 0,\n  nicknames: ['Looking good']\n}, {\n  id: 'disabled',\n  title: 'Disabled',\n  severity: -1,\n  icon: 'toggle-off',\n  nicknames: ['I\\'m I even a thing?']\n}];\n\nexports.allById = _lodash2['default'].indexBy(exports.all, 'id');\n\nexports.defaults = {\n  icon: 'question',\n  severity: Infinity\n};\n\nexports.get = function (id) {\n  return exports.allById[id] || _lodash2['default'].defaults({ id: id }, exports.defaults);\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9zdGF0dXMvc3RhdGVzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7c0JBQWMsUUFBUTs7OztBQUV0QixPQUFPLENBQUMsR0FBRyxHQUFHLENBQ1o7QUFDRSxJQUFFLEVBQUUsS0FBSztBQUNULE9BQUssRUFBRSxLQUFLO0FBQ1osTUFBSSxFQUFFLFFBQVE7QUFDZCxVQUFRLEVBQUUsSUFBSTtBQUNkLFdBQVMsRUFBRSxDQUNULCtCQUErQixDQUNoQztDQUNGLEVBQ0Q7QUFDRSxJQUFFLEVBQUUsZUFBZTtBQUNuQixPQUFLLEVBQUUsZUFBZTtBQUN0QixNQUFJLEVBQUUsU0FBUztBQUNmLFVBQVEsRUFBRSxHQUFHO0FBQ2IsV0FBUyxFQUFFLENBQ1QsY0FBYyxDQUNmO0NBQ0YsRUFDRDtBQUNFLElBQUUsRUFBRSxRQUFRO0FBQ1osT0FBSyxFQUFFLFFBQVE7QUFDZixNQUFJLEVBQUUsU0FBUztBQUNmLFVBQVEsRUFBRSxHQUFHO0FBQ2IsV0FBUyxFQUFFLENBQ1QsV0FBVyxFQUNYLGVBQWUsRUFDZixLQUFLLENBQ047Q0FDRixFQUNEO0FBQ0UsSUFBRSxFQUFFLE9BQU87QUFDWCxPQUFLLEVBQUUsT0FBTztBQUNkLE1BQUksRUFBRSxTQUFTO0FBQ2YsVUFBUSxFQUFFLENBQUM7QUFDWCxXQUFTLEVBQUUsQ0FDVCxjQUFjLENBQ2Y7Q0FDRixFQUNEO0FBQ0UsSUFBRSxFQUFFLFVBQVU7QUFDZCxPQUFLLEVBQUUsVUFBVTtBQUNqQixVQUFRLEVBQUUsQ0FBQyxDQUFDO0FBQ1osTUFBSSxFQUFFLFlBQVk7QUFDbEIsV0FBUyxFQUFFLENBQ1Qsc0JBQXNCLENBQ3ZCO0NBQ0YsQ0FDRixDQUFDOztBQUVGLE9BQU8sQ0FBQyxPQUFPLEdBQUcsb0JBQUUsT0FBTyxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUM7O0FBRS9DLE9BQU8sQ0FBQyxRQUFRLEdBQUc7QUFDakIsTUFBSSxFQUFFLFVBQVU7QUFDaEIsVUFBUSxFQUFFLFFBQVE7Q0FDbkIsQ0FBQzs7QUFFRixPQUFPLENBQUMsR0FBRyxHQUFHLFVBQVUsRUFBRSxFQUFFO0FBQzFCLFNBQU8sT0FBTyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsSUFBSSxvQkFBRSxRQUFRLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0NBQ3hFLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvc2VydmVyL3N0YXR1cy9zdGF0ZXMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuXG5leHBvcnRzLmFsbCA9IFtcbiAge1xuICAgIGlkOiAncmVkJyxcbiAgICB0aXRsZTogJ1JlZCcsXG4gICAgaWNvbjogJ2RhbmdlcicsXG4gICAgc2V2ZXJpdHk6IDEwMDAsXG4gICAgbmlja25hbWVzOiBbXG4gICAgICAnRGFuZ2VyIFdpbGwgUm9iaW5zb24hIERhbmdlciEnXG4gICAgXVxuICB9LFxuICB7XG4gICAgaWQ6ICd1bmluaXRpYWxpemVkJyxcbiAgICB0aXRsZTogJ1VuaW5pdGlhbGl6ZWQnLFxuICAgIGljb246ICdzcGlubmVyJyxcbiAgICBzZXZlcml0eTogOTAwLFxuICAgIG5pY2tuYW1lczogW1xuICAgICAgJ0luaXRpYWxpemluZydcbiAgICBdXG4gIH0sXG4gIHtcbiAgICBpZDogJ3llbGxvdycsXG4gICAgdGl0bGU6ICdZZWxsb3cnLFxuICAgIGljb246ICd3YXJuaW5nJyxcbiAgICBzZXZlcml0eTogODAwLFxuICAgIG5pY2tuYW1lczogW1xuICAgICAgJ1MuTi5BLkYuVScsXG4gICAgICAnSVxcJ2xsIGJlIGJhY2snLFxuICAgICAgJ2JyYidcbiAgICBdXG4gIH0sXG4gIHtcbiAgICBpZDogJ2dyZWVuJyxcbiAgICB0aXRsZTogJ0dyZWVuJyxcbiAgICBpY29uOiAnc3VjY2VzcycsXG4gICAgc2V2ZXJpdHk6IDAsXG4gICAgbmlja25hbWVzOiBbXG4gICAgICAnTG9va2luZyBnb29kJ1xuICAgIF1cbiAgfSxcbiAge1xuICAgIGlkOiAnZGlzYWJsZWQnLFxuICAgIHRpdGxlOiAnRGlzYWJsZWQnLFxuICAgIHNldmVyaXR5OiAtMSxcbiAgICBpY29uOiAndG9nZ2xlLW9mZicsXG4gICAgbmlja25hbWVzOiBbXG4gICAgICAnSVxcJ20gSSBldmVuIGEgdGhpbmc/J1xuICAgIF1cbiAgfVxuXTtcblxuZXhwb3J0cy5hbGxCeUlkID0gXy5pbmRleEJ5KGV4cG9ydHMuYWxsLCAnaWQnKTtcblxuZXhwb3J0cy5kZWZhdWx0cyA9IHtcbiAgaWNvbjogJ3F1ZXN0aW9uJyxcbiAgc2V2ZXJpdHk6IEluZmluaXR5XG59O1xuXG5leHBvcnRzLmdldCA9IGZ1bmN0aW9uIChpZCkge1xuICByZXR1cm4gZXhwb3J0cy5hbGxCeUlkW2lkXSB8fCBfLmRlZmF1bHRzKHsgaWQ6IGlkIH0sIGV4cG9ydHMuZGVmYXVsdHMpO1xufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/status/states.js"
      ],
      "names": [],
      "mappings": ";;;;sBAAc,QAAQ;;;;AAEtB,OAAO,CAAC,GAAG,GAAG,CACZ;AACE,IAAE,EAAE,KAAK;AACT,OAAK,EAAE,KAAK;AACZ,MAAI,EAAE,QAAQ;AACd,UAAQ,EAAE,IAAI;AACd,WAAS,EAAE,CACT,+BAA+B,CAChC;CACF,EACD;AACE,IAAE,EAAE,eAAe;AACnB,OAAK,EAAE,eAAe;AACtB,MAAI,EAAE,SAAS;AACf,UAAQ,EAAE,GAAG;AACb,WAAS,EAAE,CACT,cAAc,CACf;CACF,EACD;AACE,IAAE,EAAE,QAAQ;AACZ,OAAK,EAAE,QAAQ;AACf,MAAI,EAAE,SAAS;AACf,UAAQ,EAAE,GAAG;AACb,WAAS,EAAE,CACT,WAAW,EACX,eAAe,EACf,KAAK,CACN;CACF,EACD;AACE,IAAE,EAAE,OAAO;AACX,OAAK,EAAE,OAAO;AACd,MAAI,EAAE,SAAS;AACf,UAAQ,EAAE,CAAC;AACX,WAAS,EAAE,CACT,cAAc,CACf;CACF,EACD;AACE,IAAE,EAAE,UAAU;AACd,OAAK,EAAE,UAAU;AACjB,UAAQ,EAAE,CAAC,CAAC;AACZ,MAAI,EAAE,YAAY;AAClB,WAAS,EAAE,CACT,sBAAsB,CACvB;CACF,CACF,CAAC;;AAEF,OAAO,CAAC,OAAO,GAAG,oBAAE,OAAO,CAAC,OAAO,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;;AAE/C,OAAO,CAAC,QAAQ,GAAG;AACjB,MAAI,EAAE,UAAU;AAChB,UAAQ,EAAE,QAAQ;CACnB,CAAC;;AAEF,OAAO,CAAC,GAAG,GAAG,UAAU,EAAE,EAAE;AAC1B,SAAO,OAAO,CAAC,OAAO,CAAC,EAAE,CAAC,IAAI,oBAAE,QAAQ,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,OAAO,CAAC,QAAQ,CAAC,CAAC;CACxE,CAAC",
      "file": "/home/vio/v3metrics/src/server/status/states.js",
      "sourcesContent": [
        "import _ from 'lodash';\n\nexports.all = [\n  {\n    id: 'red',\n    title: 'Red',\n    icon: 'danger',\n    severity: 1000,\n    nicknames: [\n      'Danger Will Robinson! Danger!'\n    ]\n  },\n  {\n    id: 'uninitialized',\n    title: 'Uninitialized',\n    icon: 'spinner',\n    severity: 900,\n    nicknames: [\n      'Initializing'\n    ]\n  },\n  {\n    id: 'yellow',\n    title: 'Yellow',\n    icon: 'warning',\n    severity: 800,\n    nicknames: [\n      'S.N.A.F.U',\n      'I\\'ll be back',\n      'brb'\n    ]\n  },\n  {\n    id: 'green',\n    title: 'Green',\n    icon: 'success',\n    severity: 0,\n    nicknames: [\n      'Looking good'\n    ]\n  },\n  {\n    id: 'disabled',\n    title: 'Disabled',\n    severity: -1,\n    icon: 'toggle-off',\n    nicknames: [\n      'I\\'m I even a thing?'\n    ]\n  }\n];\n\nexports.allById = _.indexBy(exports.all, 'id');\n\nexports.defaults = {\n  icon: 'question',\n  severity: Infinity\n};\n\nexports.get = function (id) {\n  return exports.allById[id] || _.defaults({ id: id }, exports.defaults);\n};\n"
      ]
    },
    "mtime": 1467036622849
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/status/status.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "./states",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "states"
              }
            ]
          },
          {
            "source": "events",
            "imported": [
              "EventEmitter"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "EventEmitter",
                "local": "EventEmitter"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "get",
        "inherits",
        "create-class",
        "class-call-check",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _states = require('./states');\n\nvar _states2 = _interopRequireDefault(_states);\n\nvar _events = require('events');\n\nvar Status = (function (_EventEmitter) {\n  _inherits(Status, _EventEmitter);\n\n  function Status(id, server) {\n    _classCallCheck(this, Status);\n\n    _get(Object.getPrototypeOf(Status.prototype), 'constructor', this).call(this);\n\n    if (!id || typeof id !== 'string') {\n      throw new TypeError('Status constructor requires an `id` string');\n    }\n\n    this.id = id;\n    this.since = new Date();\n    this.state = 'uninitialized';\n    this.message = 'uninitialized';\n\n    this.on('change', function (previous, previousMsg) {\n      this.since = new Date();\n\n      var tags = ['status', this.id, this.state === 'red' ? 'error' : 'info'];\n\n      server.log(tags, {\n        tmpl: 'Status changed from <%= prevState %> to <%= state %><%= message ? \" - \" + message : \"\" %>',\n        state: this.state,\n        message: this.message,\n        prevState: previous,\n        prevMsg: previousMsg\n      });\n    });\n  }\n\n  _createClass(Status, [{\n    key: 'toJSON',\n    value: function toJSON() {\n      return {\n        id: this.id,\n        state: this.state,\n        icon: _states2['default'].get(this.state).icon,\n        message: this.message,\n        since: this.since\n      };\n    }\n  }, {\n    key: 'on',\n    value: function on(eventName, handler) {\n      var _this = this;\n\n      _get(Object.getPrototypeOf(Status.prototype), 'on', this).call(this, eventName, handler);\n\n      if (eventName === this.state) {\n        setImmediate(function () {\n          return handler(_this.state, _this.message);\n        });\n      }\n    }\n  }, {\n    key: 'once',\n    value: function once(eventName, handler) {\n      var _this2 = this;\n\n      if (eventName === this.state) {\n        setImmediate(function () {\n          return handler(_this2.state, _this2.message);\n        });\n      } else {\n        _get(Object.getPrototypeOf(Status.prototype), 'once', this).call(this, eventName, handler);\n      }\n    }\n  }]);\n\n  return Status;\n})(_events.EventEmitter);\n\n_states2['default'].all.forEach(function (state) {\n  Status.prototype[state.id] = function (message) {\n    if (this.state === 'disabled') return;\n\n    var previous = this.state;\n    var previousMsg = this.message;\n\n    this.error = null;\n    this.message = message || state.title;\n    this.state = state.id;\n\n    if (message instanceof Error) {\n      this.error = message;\n      this.message = message.message;\n    }\n\n    if (previous === this.state && previousMsg === this.message) {\n      // noop\n      return;\n    }\n\n    this.emit(state.id, previous, previousMsg, this.state, this.message);\n    this.emit('change', previous, previousMsg, this.state, this.message);\n  };\n});\n\nmodule.exports = Status;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9zdGF0dXMvc3RhdHVzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztzQkFBYyxRQUFROzs7O3NCQUNILFVBQVU7Ozs7c0JBQ0EsUUFBUTs7SUFFL0IsTUFBTTtZQUFOLE1BQU07O0FBQ0MsV0FEUCxNQUFNLENBQ0UsRUFBRSxFQUFFLE1BQU0sRUFBRTswQkFEcEIsTUFBTTs7QUFFUiwrQkFGRSxNQUFNLDZDQUVBOztBQUVSLFFBQUksQ0FBQyxFQUFFLElBQUksT0FBTyxFQUFFLEtBQUssUUFBUSxFQUFFO0FBQ2pDLFlBQU0sSUFBSSxTQUFTLENBQUMsNENBQTRDLENBQUMsQ0FBQztLQUNuRTs7QUFFRCxRQUFJLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQztBQUNiLFFBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQztBQUN4QixRQUFJLENBQUMsS0FBSyxHQUFHLGVBQWUsQ0FBQztBQUM3QixRQUFJLENBQUMsT0FBTyxHQUFHLGVBQWUsQ0FBQzs7QUFFL0IsUUFBSSxDQUFDLEVBQUUsQ0FBQyxRQUFRLEVBQUUsVUFBVSxRQUFRLEVBQUUsV0FBVyxFQUFFO0FBQ2pELFVBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQzs7QUFFeEIsVUFBTSxJQUFJLEdBQUcsQ0FDWCxRQUFRLEVBQ1IsSUFBSSxDQUFDLEVBQUUsRUFDUCxJQUFJLENBQUMsS0FBSyxLQUFLLEtBQUssR0FBRyxPQUFPLEdBQUcsTUFBTSxDQUN4QyxDQUFDOztBQUVGLFlBQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFO0FBQ2YsWUFBSSxFQUFFLDJGQUEyRjtBQUNqRyxhQUFLLEVBQUUsSUFBSSxDQUFDLEtBQUs7QUFDakIsZUFBTyxFQUFFLElBQUksQ0FBQyxPQUFPO0FBQ3JCLGlCQUFTLEVBQUUsUUFBUTtBQUNuQixlQUFPLEVBQUUsV0FBVztPQUNyQixDQUFDLENBQUM7S0FDSixDQUFDLENBQUM7R0FDSjs7ZUE5QkcsTUFBTTs7V0FnQ0osa0JBQUc7QUFDUCxhQUFPO0FBQ0wsVUFBRSxFQUFFLElBQUksQ0FBQyxFQUFFO0FBQ1gsYUFBSyxFQUFFLElBQUksQ0FBQyxLQUFLO0FBQ2pCLFlBQUksRUFBRSxvQkFBTyxHQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUk7QUFDakMsZUFBTyxFQUFFLElBQUksQ0FBQyxPQUFPO0FBQ3JCLGFBQUssRUFBRSxJQUFJLENBQUMsS0FBSztPQUNsQixDQUFDO0tBQ0g7OztXQUVDLFlBQUMsU0FBUyxFQUFFLE9BQU8sRUFBRTs7O0FBQ3JCLGlDQTNDRSxNQUFNLG9DQTJDQyxTQUFTLEVBQUUsT0FBTyxFQUFFOztBQUU3QixVQUFJLFNBQVMsS0FBSyxJQUFJLENBQUMsS0FBSyxFQUFFO0FBQzVCLG9CQUFZLENBQUM7aUJBQU0sT0FBTyxDQUFDLE1BQUssS0FBSyxFQUFFLE1BQUssT0FBTyxDQUFDO1NBQUEsQ0FBQyxDQUFDO09BQ3ZEO0tBQ0Y7OztXQUVHLGNBQUMsU0FBUyxFQUFFLE9BQU8sRUFBRTs7O0FBQ3ZCLFVBQUksU0FBUyxLQUFLLElBQUksQ0FBQyxLQUFLLEVBQUU7QUFDNUIsb0JBQVksQ0FBQztpQkFBTSxPQUFPLENBQUMsT0FBSyxLQUFLLEVBQUUsT0FBSyxPQUFPLENBQUM7U0FBQSxDQUFDLENBQUM7T0FDdkQsTUFBTTtBQUNMLG1DQXREQSxNQUFNLHNDQXNESyxTQUFTLEVBQUUsT0FBTyxFQUFFO09BQ2hDO0tBQ0Y7OztTQXhERyxNQUFNOzs7QUEyRFosb0JBQU8sR0FBRyxDQUFDLE9BQU8sQ0FBQyxVQUFVLEtBQUssRUFBRTtBQUNsQyxRQUFNLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsR0FBRyxVQUFVLE9BQU8sRUFBRTtBQUM5QyxRQUFJLElBQUksQ0FBQyxLQUFLLEtBQUssVUFBVSxFQUFFLE9BQU87O0FBRXRDLFFBQUksUUFBUSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUM7QUFDMUIsUUFBSSxXQUFXLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQzs7QUFFL0IsUUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7QUFDbEIsUUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLElBQUksS0FBSyxDQUFDLEtBQUssQ0FBQztBQUN0QyxRQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxFQUFFLENBQUM7O0FBRXRCLFFBQUksT0FBTyxZQUFZLEtBQUssRUFBRTtBQUM1QixVQUFJLENBQUMsS0FBSyxHQUFHLE9BQU8sQ0FBQztBQUNyQixVQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUM7S0FDaEM7O0FBRUQsUUFBSSxRQUFRLEtBQUssSUFBSSxDQUFDLEtBQUssSUFBSSxXQUFXLEtBQUssSUFBSSxDQUFDLE9BQU8sRUFBRTs7QUFFM0QsYUFBTztLQUNSOztBQUVELFFBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRSxRQUFRLEVBQUUsV0FBVyxFQUFFLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQ3JFLFFBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLFFBQVEsRUFBRSxXQUFXLEVBQUUsSUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7R0FDdEUsQ0FBQztDQUNILENBQUMsQ0FBQzs7QUFFSCxNQUFNLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9zZXJ2ZXIvc3RhdHVzL3N0YXR1cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgc3RhdGVzIGZyb20gJy4vc3RhdGVzJztcbmltcG9ydCB7IEV2ZW50RW1pdHRlciB9IGZyb20gJ2V2ZW50cyc7XG5cbmNsYXNzIFN0YXR1cyBleHRlbmRzIEV2ZW50RW1pdHRlciB7XG4gIGNvbnN0cnVjdG9yKGlkLCBzZXJ2ZXIpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgaWYgKCFpZCB8fCB0eXBlb2YgaWQgIT09ICdzdHJpbmcnKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdTdGF0dXMgY29uc3RydWN0b3IgcmVxdWlyZXMgYW4gYGlkYCBzdHJpbmcnKTtcbiAgICB9XG5cbiAgICB0aGlzLmlkID0gaWQ7XG4gICAgdGhpcy5zaW5jZSA9IG5ldyBEYXRlKCk7XG4gICAgdGhpcy5zdGF0ZSA9ICd1bmluaXRpYWxpemVkJztcbiAgICB0aGlzLm1lc3NhZ2UgPSAndW5pbml0aWFsaXplZCc7XG5cbiAgICB0aGlzLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAocHJldmlvdXMsIHByZXZpb3VzTXNnKSB7XG4gICAgICB0aGlzLnNpbmNlID0gbmV3IERhdGUoKTtcblxuICAgICAgY29uc3QgdGFncyA9IFtcbiAgICAgICAgJ3N0YXR1cycsXG4gICAgICAgIHRoaXMuaWQsXG4gICAgICAgIHRoaXMuc3RhdGUgPT09ICdyZWQnID8gJ2Vycm9yJyA6ICdpbmZvJ1xuICAgICAgXTtcblxuICAgICAgc2VydmVyLmxvZyh0YWdzLCB7XG4gICAgICAgIHRtcGw6ICdTdGF0dXMgY2hhbmdlZCBmcm9tIDwlPSBwcmV2U3RhdGUgJT4gdG8gPCU9IHN0YXRlICU+PCU9IG1lc3NhZ2UgPyBcIiAtIFwiICsgbWVzc2FnZSA6IFwiXCIgJT4nLFxuICAgICAgICBzdGF0ZTogdGhpcy5zdGF0ZSxcbiAgICAgICAgbWVzc2FnZTogdGhpcy5tZXNzYWdlLFxuICAgICAgICBwcmV2U3RhdGU6IHByZXZpb3VzLFxuICAgICAgICBwcmV2TXNnOiBwcmV2aW91c01zZ1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICB0b0pTT04oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiB0aGlzLmlkLFxuICAgICAgc3RhdGU6IHRoaXMuc3RhdGUsXG4gICAgICBpY29uOiBzdGF0ZXMuZ2V0KHRoaXMuc3RhdGUpLmljb24sXG4gICAgICBtZXNzYWdlOiB0aGlzLm1lc3NhZ2UsXG4gICAgICBzaW5jZTogdGhpcy5zaW5jZVxuICAgIH07XG4gIH1cblxuICBvbihldmVudE5hbWUsIGhhbmRsZXIpIHtcbiAgICBzdXBlci5vbihldmVudE5hbWUsIGhhbmRsZXIpO1xuXG4gICAgaWYgKGV2ZW50TmFtZSA9PT0gdGhpcy5zdGF0ZSkge1xuICAgICAgc2V0SW1tZWRpYXRlKCgpID0+IGhhbmRsZXIodGhpcy5zdGF0ZSwgdGhpcy5tZXNzYWdlKSk7XG4gICAgfVxuICB9XG5cbiAgb25jZShldmVudE5hbWUsIGhhbmRsZXIpIHtcbiAgICBpZiAoZXZlbnROYW1lID09PSB0aGlzLnN0YXRlKSB7XG4gICAgICBzZXRJbW1lZGlhdGUoKCkgPT4gaGFuZGxlcih0aGlzLnN0YXRlLCB0aGlzLm1lc3NhZ2UpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3VwZXIub25jZShldmVudE5hbWUsIGhhbmRsZXIpO1xuICAgIH1cbiAgfVxufVxuXG5zdGF0ZXMuYWxsLmZvckVhY2goZnVuY3Rpb24gKHN0YXRlKSB7XG4gIFN0YXR1cy5wcm90b3R5cGVbc3RhdGUuaWRdID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICBpZiAodGhpcy5zdGF0ZSA9PT0gJ2Rpc2FibGVkJykgcmV0dXJuO1xuXG4gICAgbGV0IHByZXZpb3VzID0gdGhpcy5zdGF0ZTtcbiAgICBsZXQgcHJldmlvdXNNc2cgPSB0aGlzLm1lc3NhZ2U7XG5cbiAgICB0aGlzLmVycm9yID0gbnVsbDtcbiAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlIHx8IHN0YXRlLnRpdGxlO1xuICAgIHRoaXMuc3RhdGUgPSBzdGF0ZS5pZDtcblxuICAgIGlmIChtZXNzYWdlIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIHRoaXMuZXJyb3IgPSBtZXNzYWdlO1xuICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZS5tZXNzYWdlO1xuICAgIH1cblxuICAgIGlmIChwcmV2aW91cyA9PT0gdGhpcy5zdGF0ZSAmJiBwcmV2aW91c01zZyA9PT0gdGhpcy5tZXNzYWdlKSB7XG4gICAgICAvLyBub29wXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5lbWl0KHN0YXRlLmlkLCBwcmV2aW91cywgcHJldmlvdXNNc2csIHRoaXMuc3RhdGUsIHRoaXMubWVzc2FnZSk7XG4gICAgdGhpcy5lbWl0KCdjaGFuZ2UnLCBwcmV2aW91cywgcHJldmlvdXNNc2csIHRoaXMuc3RhdGUsIHRoaXMubWVzc2FnZSk7XG4gIH07XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBTdGF0dXM7XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/status/status.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/src/server/status/status.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport states from './states';\nimport { EventEmitter } from 'events';\n\nclass Status extends EventEmitter {\n  constructor(id, server) {\n    super();\n\n    if (!id || typeof id !== 'string') {\n      throw new TypeError('Status constructor requires an `id` string');\n    }\n\n    this.id = id;\n    this.since = new Date();\n    this.state = 'uninitialized';\n    this.message = 'uninitialized';\n\n    this.on('change', function (previous, previousMsg) {\n      this.since = new Date();\n\n      const tags = [\n        'status',\n        this.id,\n        this.state === 'red' ? 'error' : 'info'\n      ];\n\n      server.log(tags, {\n        tmpl: 'Status changed from <%= prevState %> to <%= state %><%= message ? \" - \" + message : \"\" %>',\n        state: this.state,\n        message: this.message,\n        prevState: previous,\n        prevMsg: previousMsg\n      });\n    });\n  }\n\n  toJSON() {\n    return {\n      id: this.id,\n      state: this.state,\n      icon: states.get(this.state).icon,\n      message: this.message,\n      since: this.since\n    };\n  }\n\n  on(eventName, handler) {\n    super.on(eventName, handler);\n\n    if (eventName === this.state) {\n      setImmediate(() => handler(this.state, this.message));\n    }\n  }\n\n  once(eventName, handler) {\n    if (eventName === this.state) {\n      setImmediate(() => handler(this.state, this.message));\n    } else {\n      super.once(eventName, handler);\n    }\n  }\n}\n\nstates.all.forEach(function (state) {\n  Status.prototype[state.id] = function (message) {\n    if (this.state === 'disabled') return;\n\n    let previous = this.state;\n    let previousMsg = this.message;\n\n    this.error = null;\n    this.message = message || state.title;\n    this.state = state.id;\n\n    if (message instanceof Error) {\n      this.error = message;\n      this.message = message.message;\n    }\n\n    if (previous === this.state && previousMsg === this.message) {\n      // noop\n      return;\n    }\n\n    this.emit(state.id, previous, previousMsg, this.state, this.message);\n    this.emit('change', previous, previousMsg, this.state, this.message);\n  };\n});\n\nmodule.exports = Status;\n"
      ]
    },
    "mtime": 1467036622849
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/status/wrap_auth_config.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "assign",
              "identity"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "assign",
                "local": "assign"
              },
              {
                "kind": "named",
                "imported": "identity",
                "local": "identity"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _lodash = require('lodash');\n\nexports['default'] = function (allowAnonymous) {\n  if (allowAnonymous) return function (options) {\n    return (0, _lodash.assign)(options, { config: { auth: false } });\n  };\n  return _lodash.identity;\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9zdGF0dXMvd3JhcF9hdXRoX2NvbmZpZy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7c0JBQStCLFFBQVE7O3FCQUV4QixVQUFDLGNBQWMsRUFBSztBQUNqQyxNQUFJLGNBQWMsRUFBRSxPQUFPLFVBQUEsT0FBTztXQUFJLG9CQUFPLE9BQU8sRUFBRSxFQUFDLE1BQU0sRUFBRSxFQUFDLElBQUksRUFBRSxLQUFLLEVBQUMsRUFBQyxDQUFDO0dBQUEsQ0FBQztBQUMvRSwwQkFBZ0I7Q0FDakIiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvc2VydmVyL3N0YXR1cy93cmFwX2F1dGhfY29uZmlnLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHthc3NpZ24sIGlkZW50aXR5fSBmcm9tICdsb2Rhc2gnO1xuXG5leHBvcnQgZGVmYXVsdCAoYWxsb3dBbm9ueW1vdXMpID0+IHtcbiAgaWYgKGFsbG93QW5vbnltb3VzKSByZXR1cm4gb3B0aW9ucyA9PiBhc3NpZ24ob3B0aW9ucywge2NvbmZpZzoge2F1dGg6IGZhbHNlfX0pO1xuICByZXR1cm4gaWRlbnRpdHk7XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/status/wrap_auth_config.js"
      ],
      "names": [],
      "mappings": ";;;;;;sBAA+B,QAAQ;;qBAExB,UAAC,cAAc,EAAK;AACjC,MAAI,cAAc,EAAE,OAAO,UAAA,OAAO;WAAI,oBAAO,OAAO,EAAE,EAAC,MAAM,EAAE,EAAC,IAAI,EAAE,KAAK,EAAC,EAAC,CAAC;GAAA,CAAC;AAC/E,0BAAgB;CACjB",
      "file": "/home/vio/v3metrics/src/server/status/wrap_auth_config.js",
      "sourcesContent": [
        "import {assign, identity} from 'lodash';\n\nexport default (allowAnonymous) => {\n  if (allowAnonymous) return options => assign(options, {config: {auth: false}});\n  return identity;\n};\n"
      ]
    },
    "mtime": 1467036622849
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/pid/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "boom",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Boom"
              }
            ]
          },
          {
            "source": "bluebird",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Promise"
              }
            ]
          },
          {
            "source": "fs",
            "imported": [
              "unlinkSync"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "unlinkSync",
                "local": "unlink"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _boom = require('boom');\n\nvar _boom2 = _interopRequireDefault(_boom);\n\nvar _bluebird = require('bluebird');\n\nvar _bluebird2 = _interopRequireDefault(_bluebird);\n\nvar _fs = require('fs');\n\nvar writeFile = _bluebird2['default'].promisify(require('fs').writeFile);\n\nmodule.exports = _bluebird2['default'].method(function (kbnServer, server, config) {\n  var path = config.get('pid.file');\n  if (!path) return;\n\n  var pid = String(process.pid);\n\n  return writeFile(path, pid, { flag: 'wx' })['catch'](function (err) {\n    if (err.code !== 'EEXIST') throw err;\n\n    var log = {\n      tmpl: 'pid file already exists at <%= path %>',\n      path: path,\n      pid: pid\n    };\n\n    if (config.get('pid.exclusive')) {\n      throw _boom2['default'].create(500, _lodash2['default'].template(log.tmpl)(log), log);\n    } else {\n      server.log(['pid', 'warning'], log);\n    }\n\n    return writeFile(path, pid);\n  }).then(function () {\n\n    server.log(['pid', 'debug'], {\n      tmpl: 'wrote pid file to <%= path %>',\n      path: path,\n      pid: pid\n    });\n\n    var clean = _lodash2['default'].once(function (code) {\n      (0, _fs.unlinkSync)(path);\n    });\n\n    process.once('exit', clean); // for \"natural\" exits\n    process.once('SIGINT', function () {\n      // for Ctrl-C exits\n      clean();\n\n      // resend SIGINT\n      process.kill(process.pid, 'SIGINT');\n    });\n\n    process.on('unhandledRejection', function (reason, promise) {\n      server.log(['warning'], 'Detected an unhandled Promise rejection.\\n' + reason);\n    });\n  });\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9waWQvaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztzQkFBYyxRQUFROzs7O29CQUNMLE1BQU07Ozs7d0JBQ0gsVUFBVTs7OztrQkFDTyxJQUFJOztBQUN6QyxJQUFJLFNBQVMsR0FBRyxzQkFBUSxTQUFTLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDOztBQUUzRCxNQUFNLENBQUMsT0FBTyxHQUFHLHNCQUFRLE1BQU0sQ0FBQyxVQUFVLFNBQVMsRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFO0FBQ25FLE1BQUksSUFBSSxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDbEMsTUFBSSxDQUFDLElBQUksRUFBRSxPQUFPOztBQUVsQixNQUFJLEdBQUcsR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDOztBQUU5QixTQUFPLFNBQVMsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxDQUFDLFNBQ3JDLENBQUMsVUFBVSxHQUFHLEVBQUU7QUFDcEIsUUFBSSxHQUFHLENBQUMsSUFBSSxLQUFLLFFBQVEsRUFBRSxNQUFNLEdBQUcsQ0FBQzs7QUFFckMsUUFBSSxHQUFHLEdBQUc7QUFDUixVQUFJLEVBQUUsd0NBQXdDO0FBQzlDLFVBQUksRUFBRSxJQUFJO0FBQ1YsU0FBRyxFQUFFLEdBQUc7S0FDVCxDQUFDOztBQUVGLFFBQUksTUFBTSxDQUFDLEdBQUcsQ0FBQyxlQUFlLENBQUMsRUFBRTtBQUMvQixZQUFNLGtCQUFLLE1BQU0sQ0FBQyxHQUFHLEVBQUUsb0JBQUUsUUFBUSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztLQUN4RCxNQUFNO0FBQ0wsWUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEtBQUssRUFBRSxTQUFTLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztLQUNyQzs7QUFFRCxXQUFPLFNBQVMsQ0FBQyxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUM7R0FDN0IsQ0FBQyxDQUNELElBQUksQ0FBQyxZQUFZOztBQUVoQixVQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsS0FBSyxFQUFFLE9BQU8sQ0FBQyxFQUFFO0FBQzNCLFVBQUksRUFBRSwrQkFBK0I7QUFDckMsVUFBSSxFQUFFLElBQUk7QUFDVixTQUFHLEVBQUUsR0FBRztLQUNULENBQUMsQ0FBQzs7QUFFSCxRQUFJLEtBQUssR0FBRyxvQkFBRSxJQUFJLENBQUMsVUFBVSxJQUFJLEVBQUU7QUFDakMsMEJBQU8sSUFBSSxDQUFDLENBQUM7S0FDZCxDQUFDLENBQUM7O0FBRUgsV0FBTyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDNUIsV0FBTyxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsWUFBWTs7QUFDakMsV0FBSyxFQUFFLENBQUM7OztBQUdSLGFBQU8sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxRQUFRLENBQUMsQ0FBQztLQUNyQyxDQUFDLENBQUM7O0FBRUgsV0FBTyxDQUFDLEVBQUUsQ0FBQyxvQkFBb0IsRUFBRSxVQUFVLE1BQU0sRUFBRSxPQUFPLEVBQUU7QUFDMUQsWUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxpREFBK0MsTUFBTSxDQUFHLENBQUM7S0FDaEYsQ0FBQyxDQUFDO0dBQ0osQ0FBQyxDQUFDO0NBQ0osQ0FBQyxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9waWQvaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IEJvb20gZnJvbSAnYm9vbSc7XG5pbXBvcnQgUHJvbWlzZSBmcm9tICdibHVlYmlyZCc7XG5pbXBvcnQgeyB1bmxpbmtTeW5jIGFzIHVubGluayB9IGZyb20gJ2ZzJztcbmxldCB3cml0ZUZpbGUgPSBQcm9taXNlLnByb21pc2lmeShyZXF1aXJlKCdmcycpLndyaXRlRmlsZSk7XG5cbm1vZHVsZS5leHBvcnRzID0gUHJvbWlzZS5tZXRob2QoZnVuY3Rpb24gKGtiblNlcnZlciwgc2VydmVyLCBjb25maWcpIHtcbiAgbGV0IHBhdGggPSBjb25maWcuZ2V0KCdwaWQuZmlsZScpO1xuICBpZiAoIXBhdGgpIHJldHVybjtcblxuICBsZXQgcGlkID0gU3RyaW5nKHByb2Nlc3MucGlkKTtcblxuICByZXR1cm4gd3JpdGVGaWxlKHBhdGgsIHBpZCwgeyBmbGFnOiAnd3gnIH0pXG4gIC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgaWYgKGVyci5jb2RlICE9PSAnRUVYSVNUJykgdGhyb3cgZXJyO1xuXG4gICAgbGV0IGxvZyA9IHtcbiAgICAgIHRtcGw6ICdwaWQgZmlsZSBhbHJlYWR5IGV4aXN0cyBhdCA8JT0gcGF0aCAlPicsXG4gICAgICBwYXRoOiBwYXRoLFxuICAgICAgcGlkOiBwaWRcbiAgICB9O1xuXG4gICAgaWYgKGNvbmZpZy5nZXQoJ3BpZC5leGNsdXNpdmUnKSkge1xuICAgICAgdGhyb3cgQm9vbS5jcmVhdGUoNTAwLCBfLnRlbXBsYXRlKGxvZy50bXBsKShsb2cpLCBsb2cpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXJ2ZXIubG9nKFsncGlkJywgJ3dhcm5pbmcnXSwgbG9nKTtcbiAgICB9XG5cbiAgICByZXR1cm4gd3JpdGVGaWxlKHBhdGgsIHBpZCk7XG4gIH0pXG4gIC50aGVuKGZ1bmN0aW9uICgpIHtcblxuICAgIHNlcnZlci5sb2coWydwaWQnLCAnZGVidWcnXSwge1xuICAgICAgdG1wbDogJ3dyb3RlIHBpZCBmaWxlIHRvIDwlPSBwYXRoICU+JyxcbiAgICAgIHBhdGg6IHBhdGgsXG4gICAgICBwaWQ6IHBpZFxuICAgIH0pO1xuXG4gICAgbGV0IGNsZWFuID0gXy5vbmNlKGZ1bmN0aW9uIChjb2RlKSB7XG4gICAgICB1bmxpbmsocGF0aCk7XG4gICAgfSk7XG5cbiAgICBwcm9jZXNzLm9uY2UoJ2V4aXQnLCBjbGVhbik7IC8vIGZvciBcIm5hdHVyYWxcIiBleGl0c1xuICAgIHByb2Nlc3Mub25jZSgnU0lHSU5UJywgZnVuY3Rpb24gKCkgeyAvLyBmb3IgQ3RybC1DIGV4aXRzXG4gICAgICBjbGVhbigpO1xuXG4gICAgICAvLyByZXNlbmQgU0lHSU5UXG4gICAgICBwcm9jZXNzLmtpbGwocHJvY2Vzcy5waWQsICdTSUdJTlQnKTtcbiAgICB9KTtcblxuICAgIHByb2Nlc3Mub24oJ3VuaGFuZGxlZFJlamVjdGlvbicsIGZ1bmN0aW9uIChyZWFzb24sIHByb21pc2UpIHtcbiAgICAgIHNlcnZlci5sb2coWyd3YXJuaW5nJ10sIGBEZXRlY3RlZCBhbiB1bmhhbmRsZWQgUHJvbWlzZSByZWplY3Rpb24uXFxuJHtyZWFzb259YCk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/pid/index.js"
      ],
      "names": [],
      "mappings": ";;;;sBAAc,QAAQ;;;;oBACL,MAAM;;;;wBACH,UAAU;;;;kBACO,IAAI;;AACzC,IAAI,SAAS,GAAG,sBAAQ,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,CAAC;;AAE3D,MAAM,CAAC,OAAO,GAAG,sBAAQ,MAAM,CAAC,UAAU,SAAS,EAAE,MAAM,EAAE,MAAM,EAAE;AACnE,MAAI,IAAI,GAAG,MAAM,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;AAClC,MAAI,CAAC,IAAI,EAAE,OAAO;;AAElB,MAAI,GAAG,GAAG,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;;AAE9B,SAAO,SAAS,CAAC,IAAI,EAAE,GAAG,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,SACrC,CAAC,UAAU,GAAG,EAAE;AACpB,QAAI,GAAG,CAAC,IAAI,KAAK,QAAQ,EAAE,MAAM,GAAG,CAAC;;AAErC,QAAI,GAAG,GAAG;AACR,UAAI,EAAE,wCAAwC;AAC9C,UAAI,EAAE,IAAI;AACV,SAAG,EAAE,GAAG;KACT,CAAC;;AAEF,QAAI,MAAM,CAAC,GAAG,CAAC,eAAe,CAAC,EAAE;AAC/B,YAAM,kBAAK,MAAM,CAAC,GAAG,EAAE,oBAAE,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC;KACxD,MAAM;AACL,YAAM,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,SAAS,CAAC,EAAE,GAAG,CAAC,CAAC;KACrC;;AAED,WAAO,SAAS,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;GAC7B,CAAC,CACD,IAAI,CAAC,YAAY;;AAEhB,UAAM,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,OAAO,CAAC,EAAE;AAC3B,UAAI,EAAE,+BAA+B;AACrC,UAAI,EAAE,IAAI;AACV,SAAG,EAAE,GAAG;KACT,CAAC,CAAC;;AAEH,QAAI,KAAK,GAAG,oBAAE,IAAI,CAAC,UAAU,IAAI,EAAE;AACjC,0BAAO,IAAI,CAAC,CAAC;KACd,CAAC,CAAC;;AAEH,WAAO,CAAC,IAAI,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;AAC5B,WAAO,CAAC,IAAI,CAAC,QAAQ,EAAE,YAAY;;AACjC,WAAK,EAAE,CAAC;;;AAGR,aAAO,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAC;KACrC,CAAC,CAAC;;AAEH,WAAO,CAAC,EAAE,CAAC,oBAAoB,EAAE,UAAU,MAAM,EAAE,OAAO,EAAE;AAC1D,YAAM,CAAC,GAAG,CAAC,CAAC,SAAS,CAAC,iDAA+C,MAAM,CAAG,CAAC;KAChF,CAAC,CAAC;GACJ,CAAC,CAAC;CACJ,CAAC,CAAC",
      "file": "/home/vio/v3metrics/src/server/pid/index.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport Boom from 'boom';\nimport Promise from 'bluebird';\nimport { unlinkSync as unlink } from 'fs';\nlet writeFile = Promise.promisify(require('fs').writeFile);\n\nmodule.exports = Promise.method(function (kbnServer, server, config) {\n  let path = config.get('pid.file');\n  if (!path) return;\n\n  let pid = String(process.pid);\n\n  return writeFile(path, pid, { flag: 'wx' })\n  .catch(function (err) {\n    if (err.code !== 'EEXIST') throw err;\n\n    let log = {\n      tmpl: 'pid file already exists at <%= path %>',\n      path: path,\n      pid: pid\n    };\n\n    if (config.get('pid.exclusive')) {\n      throw Boom.create(500, _.template(log.tmpl)(log), log);\n    } else {\n      server.log(['pid', 'warning'], log);\n    }\n\n    return writeFile(path, pid);\n  })\n  .then(function () {\n\n    server.log(['pid', 'debug'], {\n      tmpl: 'wrote pid file to <%= path %>',\n      path: path,\n      pid: pid\n    });\n\n    let clean = _.once(function (code) {\n      unlink(path);\n    });\n\n    process.once('exit', clean); // for \"natural\" exits\n    process.once('SIGINT', function () { // for Ctrl-C exits\n      clean();\n\n      // resend SIGINT\n      process.kill(process.pid, 'SIGINT');\n    });\n\n    process.on('unhandledRejection', function (reason, promise) {\n      server.log(['warning'], `Detected an unhandled Promise rejection.\\n${reason}`);\n    });\n  });\n});\n"
      ]
    },
    "mtime": 1467036622849
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/plugins/scan.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "bluebird",
            "imported": [
              "fromNode"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "fromNode",
                "local": "fromNode"
              }
            ]
          },
          {
            "source": "fs",
            "imported": [
              "readdir",
              "stat"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "readdir",
                "local": "readdir"
              },
              {
                "kind": "named",
                "imported": "stat",
                "local": "stat"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "resolve"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "resolve",
                "local": "resolve"
              }
            ]
          },
          {
            "source": "bluebird",
            "imported": [
              "each"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "each",
                "local": "each"
              }
            ]
          },
          {
            "source": "./plugin_collection",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "PluginCollection"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "async-to-generator",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _bluebird = require('bluebird');\n\nvar _fs = require('fs');\n\nvar _path = require('path');\n\nvar _plugin_collection = require('./plugin_collection');\n\nvar _plugin_collection2 = _interopRequireDefault(_plugin_collection);\n\nmodule.exports = _asyncToGenerator(function* (kbnServer, server, config) {\n\n  var plugins = kbnServer.plugins = new _plugin_collection2['default'](kbnServer);\n\n  var scanDirs = [].concat(config.get('plugins.scanDirs') || []);\n  var pluginPaths = [].concat(config.get('plugins.paths') || []);\n\n  var debug = _lodash2['default'].bindKey(server, 'log', ['plugins', 'debug']);\n  var warning = _lodash2['default'].bindKey(server, 'log', ['plugins', 'warning']);\n\n  // scan all scanDirs to find pluginPaths\n  yield (0, _bluebird.each)(scanDirs, _asyncToGenerator(function* (dir) {\n    debug({ tmpl: 'Scanning `<%= dir %>` for plugins', dir: dir });\n\n    var filenames = null;\n\n    try {\n      filenames = yield (0, _bluebird.fromNode)(function (cb) {\n        return (0, _fs.readdir)(dir, cb);\n      });\n    } catch (err) {\n      if (err.code !== 'ENOENT') throw err;\n\n      filenames = [];\n      warning({\n        tmpl: '<%= err.code %>: Unable to scan non-existent directory for plugins \"<%= dir %>\"',\n        err: err,\n        dir: dir\n      });\n    }\n\n    yield (0, _bluebird.each)(filenames, _asyncToGenerator(function* (name) {\n      if (name[0] === '.') return;\n\n      var path = (0, _path.resolve)(dir, name);\n      var stats = yield (0, _bluebird.fromNode)(function (cb) {\n        return (0, _fs.stat)(path, cb);\n      });\n      if (stats.isDirectory()) {\n        pluginPaths.push(path);\n      }\n    }));\n  }));\n\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = pluginPaths[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var path = _step.value;\n\n      var modulePath = undefined;\n      try {\n        modulePath = require.resolve(path);\n      } catch (e) {\n        warning({ tmpl: 'Skipping non-plugin directory at <%= path %>', path: path });\n        continue;\n      }\n\n      yield plugins['new'](path);\n      debug({ tmpl: 'Found plugin at <%= path %>', path: modulePath });\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator['return']) {\n        _iterator['return']();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9wbHVnaW5zL3NjYW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O3NCQUFjLFFBQVE7Ozs7d0JBQ0csVUFBVTs7a0JBQ0wsSUFBSTs7b0JBQ1YsTUFBTTs7aUNBRUQscUJBQXFCOzs7O0FBQ2xELE1BQU0sQ0FBQyxPQUFPLHFCQUFHLFdBQU8sU0FBUyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUs7O0FBRXBELE1BQUksT0FBTyxHQUFHLFNBQVMsQ0FBQyxPQUFPLEdBQUcsbUNBQXFCLFNBQVMsQ0FBQyxDQUFDOztBQUVsRSxNQUFJLFFBQVEsR0FBRyxFQUFFLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsa0JBQWtCLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQztBQUMvRCxNQUFJLFdBQVcsR0FBRyxFQUFFLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsZUFBZSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7O0FBRS9ELE1BQUksS0FBSyxHQUFHLG9CQUFFLE9BQU8sQ0FBQyxNQUFNLEVBQUUsS0FBSyxFQUFFLENBQUMsU0FBUyxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUM7QUFDM0QsTUFBSSxPQUFPLEdBQUcsb0JBQUUsT0FBTyxDQUFDLE1BQU0sRUFBRSxLQUFLLEVBQUUsQ0FBQyxTQUFTLEVBQUUsU0FBUyxDQUFDLENBQUMsQ0FBQzs7O0FBRy9ELFFBQU0sb0JBQUssUUFBUSxvQkFBRSxXQUFNLEdBQUcsRUFBSTtBQUNoQyxTQUFLLENBQUMsRUFBRSxJQUFJLEVBQUUsbUNBQW1DLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7O0FBRS9ELFFBQUksU0FBUyxHQUFHLElBQUksQ0FBQzs7QUFFckIsUUFBSTtBQUNGLGVBQVMsR0FBRyxNQUFNLHdCQUFTLFVBQUEsRUFBRTtlQUFJLGlCQUFRLEdBQUcsRUFBRSxFQUFFLENBQUM7T0FBQSxDQUFDLENBQUM7S0FDcEQsQ0FBQyxPQUFPLEdBQUcsRUFBRTtBQUNaLFVBQUksR0FBRyxDQUFDLElBQUksS0FBSyxRQUFRLEVBQUUsTUFBTSxHQUFHLENBQUM7O0FBRXJDLGVBQVMsR0FBRyxFQUFFLENBQUM7QUFDZixhQUFPLENBQUM7QUFDTixZQUFJLEVBQUUsaUZBQWlGO0FBQ3ZGLFdBQUcsRUFBRSxHQUFHO0FBQ1IsV0FBRyxFQUFFLEdBQUc7T0FDVCxDQUFDLENBQUM7S0FDSjs7QUFFRCxVQUFNLG9CQUFLLFNBQVMsb0JBQUUsV0FBTSxJQUFJLEVBQUk7QUFDbEMsVUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxFQUFFLE9BQU87O0FBRTVCLFVBQUksSUFBSSxHQUFHLG1CQUFRLEdBQUcsRUFBRSxJQUFJLENBQUMsQ0FBQztBQUM5QixVQUFJLEtBQUssR0FBRyxNQUFNLHdCQUFTLFVBQUEsRUFBRTtlQUFJLGNBQUssSUFBSSxFQUFFLEVBQUUsQ0FBQztPQUFBLENBQUMsQ0FBQztBQUNqRCxVQUFJLEtBQUssQ0FBQyxXQUFXLEVBQUUsRUFBRTtBQUN2QixtQkFBVyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztPQUN4QjtLQUNGLEVBQUMsQ0FBQztHQUNKLEVBQUMsQ0FBQzs7Ozs7OztBQUVILHlCQUFpQixXQUFXLDhIQUFFO1VBQXJCLElBQUk7O0FBQ1gsVUFBSSxVQUFVLFlBQUEsQ0FBQztBQUNmLFVBQUk7QUFDRixrQkFBVSxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7T0FDcEMsQ0FBQyxPQUFPLENBQUMsRUFBRTtBQUNWLGVBQU8sQ0FBQyxFQUFFLElBQUksRUFBRSw4Q0FBOEMsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztBQUM5RSxpQkFBUztPQUNWOztBQUVELFlBQU0sT0FBTyxPQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDeEIsV0FBSyxDQUFDLEVBQUUsSUFBSSxFQUFFLDZCQUE2QixFQUFFLElBQUksRUFBRSxVQUFVLEVBQUUsQ0FBQyxDQUFDO0tBQ2xFOzs7Ozs7Ozs7Ozs7Ozs7Q0FDRixDQUFBLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvc2VydmVyL3BsdWdpbnMvc2Nhbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgeyBmcm9tTm9kZSB9IGZyb20gJ2JsdWViaXJkJztcbmltcG9ydCB7IHJlYWRkaXIsIHN0YXQgfSBmcm9tICdmcyc7XG5pbXBvcnQgeyByZXNvbHZlIH0gZnJvbSAncGF0aCc7XG5pbXBvcnQgeyBlYWNoIH0gZnJvbSAnYmx1ZWJpcmQnO1xuaW1wb3J0IFBsdWdpbkNvbGxlY3Rpb24gZnJvbSAnLi9wbHVnaW5fY29sbGVjdGlvbic7XG5tb2R1bGUuZXhwb3J0cyA9IGFzeW5jIChrYm5TZXJ2ZXIsIHNlcnZlciwgY29uZmlnKSA9PiB7XG5cbiAgbGV0IHBsdWdpbnMgPSBrYm5TZXJ2ZXIucGx1Z2lucyA9IG5ldyBQbHVnaW5Db2xsZWN0aW9uKGtiblNlcnZlcik7XG5cbiAgbGV0IHNjYW5EaXJzID0gW10uY29uY2F0KGNvbmZpZy5nZXQoJ3BsdWdpbnMuc2NhbkRpcnMnKSB8fCBbXSk7XG4gIGxldCBwbHVnaW5QYXRocyA9IFtdLmNvbmNhdChjb25maWcuZ2V0KCdwbHVnaW5zLnBhdGhzJykgfHwgW10pO1xuXG4gIGxldCBkZWJ1ZyA9IF8uYmluZEtleShzZXJ2ZXIsICdsb2cnLCBbJ3BsdWdpbnMnLCAnZGVidWcnXSk7XG4gIGxldCB3YXJuaW5nID0gXy5iaW5kS2V5KHNlcnZlciwgJ2xvZycsIFsncGx1Z2lucycsICd3YXJuaW5nJ10pO1xuXG4gIC8vIHNjYW4gYWxsIHNjYW5EaXJzIHRvIGZpbmQgcGx1Z2luUGF0aHNcbiAgYXdhaXQgZWFjaChzY2FuRGlycywgYXN5bmMgZGlyID0+IHtcbiAgICBkZWJ1Zyh7IHRtcGw6ICdTY2FubmluZyBgPCU9IGRpciAlPmAgZm9yIHBsdWdpbnMnLCBkaXI6IGRpciB9KTtcblxuICAgIGxldCBmaWxlbmFtZXMgPSBudWxsO1xuXG4gICAgdHJ5IHtcbiAgICAgIGZpbGVuYW1lcyA9IGF3YWl0IGZyb21Ob2RlKGNiID0+IHJlYWRkaXIoZGlyLCBjYikpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgaWYgKGVyci5jb2RlICE9PSAnRU5PRU5UJykgdGhyb3cgZXJyO1xuXG4gICAgICBmaWxlbmFtZXMgPSBbXTtcbiAgICAgIHdhcm5pbmcoe1xuICAgICAgICB0bXBsOiAnPCU9IGVyci5jb2RlICU+OiBVbmFibGUgdG8gc2NhbiBub24tZXhpc3RlbnQgZGlyZWN0b3J5IGZvciBwbHVnaW5zIFwiPCU9IGRpciAlPlwiJyxcbiAgICAgICAgZXJyOiBlcnIsXG4gICAgICAgIGRpcjogZGlyXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBhd2FpdCBlYWNoKGZpbGVuYW1lcywgYXN5bmMgbmFtZSA9PiB7XG4gICAgICBpZiAobmFtZVswXSA9PT0gJy4nKSByZXR1cm47XG5cbiAgICAgIGxldCBwYXRoID0gcmVzb2x2ZShkaXIsIG5hbWUpO1xuICAgICAgbGV0IHN0YXRzID0gYXdhaXQgZnJvbU5vZGUoY2IgPT4gc3RhdChwYXRoLCBjYikpO1xuICAgICAgaWYgKHN0YXRzLmlzRGlyZWN0b3J5KCkpIHtcbiAgICAgICAgcGx1Z2luUGF0aHMucHVzaChwYXRoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgZm9yIChsZXQgcGF0aCBvZiBwbHVnaW5QYXRocykge1xuICAgIGxldCBtb2R1bGVQYXRoO1xuICAgIHRyeSB7XG4gICAgICBtb2R1bGVQYXRoID0gcmVxdWlyZS5yZXNvbHZlKHBhdGgpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHdhcm5pbmcoeyB0bXBsOiAnU2tpcHBpbmcgbm9uLXBsdWdpbiBkaXJlY3RvcnkgYXQgPCU9IHBhdGggJT4nLCBwYXRoOiBwYXRoIH0pO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgYXdhaXQgcGx1Z2lucy5uZXcocGF0aCk7XG4gICAgZGVidWcoeyB0bXBsOiAnRm91bmQgcGx1Z2luIGF0IDwlPSBwYXRoICU+JywgcGF0aDogbW9kdWxlUGF0aCB9KTtcbiAgfVxufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/plugins/scan.js"
      ],
      "names": [],
      "mappings": ";;;;;;sBAAc,QAAQ;;;;wBACG,UAAU;;kBACL,IAAI;;oBACV,MAAM;;iCAED,qBAAqB;;;;AAClD,MAAM,CAAC,OAAO,qBAAG,WAAO,SAAS,EAAE,MAAM,EAAE,MAAM,EAAK;;AAEpD,MAAI,OAAO,GAAG,SAAS,CAAC,OAAO,GAAG,mCAAqB,SAAS,CAAC,CAAC;;AAElE,MAAI,QAAQ,GAAG,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,kBAAkB,CAAC,IAAI,EAAE,CAAC,CAAC;AAC/D,MAAI,WAAW,GAAG,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,eAAe,CAAC,IAAI,EAAE,CAAC,CAAC;;AAE/D,MAAI,KAAK,GAAG,oBAAE,OAAO,CAAC,MAAM,EAAE,KAAK,EAAE,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC,CAAC;AAC3D,MAAI,OAAO,GAAG,oBAAE,OAAO,CAAC,MAAM,EAAE,KAAK,EAAE,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC,CAAC;;;AAG/D,QAAM,oBAAK,QAAQ,oBAAE,WAAM,GAAG,EAAI;AAChC,SAAK,CAAC,EAAE,IAAI,EAAE,mCAAmC,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;;AAE/D,QAAI,SAAS,GAAG,IAAI,CAAC;;AAErB,QAAI;AACF,eAAS,GAAG,MAAM,wBAAS,UAAA,EAAE;eAAI,iBAAQ,GAAG,EAAE,EAAE,CAAC;OAAA,CAAC,CAAC;KACpD,CAAC,OAAO,GAAG,EAAE;AACZ,UAAI,GAAG,CAAC,IAAI,KAAK,QAAQ,EAAE,MAAM,GAAG,CAAC;;AAErC,eAAS,GAAG,EAAE,CAAC;AACf,aAAO,CAAC;AACN,YAAI,EAAE,iFAAiF;AACvF,WAAG,EAAE,GAAG;AACR,WAAG,EAAE,GAAG;OACT,CAAC,CAAC;KACJ;;AAED,UAAM,oBAAK,SAAS,oBAAE,WAAM,IAAI,EAAI;AAClC,UAAI,IAAI,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE,OAAO;;AAE5B,UAAI,IAAI,GAAG,mBAAQ,GAAG,EAAE,IAAI,CAAC,CAAC;AAC9B,UAAI,KAAK,GAAG,MAAM,wBAAS,UAAA,EAAE;eAAI,cAAK,IAAI,EAAE,EAAE,CAAC;OAAA,CAAC,CAAC;AACjD,UAAI,KAAK,CAAC,WAAW,EAAE,EAAE;AACvB,mBAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;OACxB;KACF,EAAC,CAAC;GACJ,EAAC,CAAC;;;;;;;AAEH,yBAAiB,WAAW,8HAAE;UAArB,IAAI;;AACX,UAAI,UAAU,YAAA,CAAC;AACf,UAAI;AACF,kBAAU,GAAG,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;OACpC,CAAC,OAAO,CAAC,EAAE;AACV,eAAO,CAAC,EAAE,IAAI,EAAE,8CAA8C,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC;AAC9E,iBAAS;OACV;;AAED,YAAM,OAAO,OAAI,CAAC,IAAI,CAAC,CAAC;AACxB,WAAK,CAAC,EAAE,IAAI,EAAE,6BAA6B,EAAE,IAAI,EAAE,UAAU,EAAE,CAAC,CAAC;KAClE;;;;;;;;;;;;;;;CACF,CAAA,CAAC",
      "file": "/home/vio/v3metrics/src/server/plugins/scan.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport { fromNode } from 'bluebird';\nimport { readdir, stat } from 'fs';\nimport { resolve } from 'path';\nimport { each } from 'bluebird';\nimport PluginCollection from './plugin_collection';\nmodule.exports = async (kbnServer, server, config) => {\n\n  let plugins = kbnServer.plugins = new PluginCollection(kbnServer);\n\n  let scanDirs = [].concat(config.get('plugins.scanDirs') || []);\n  let pluginPaths = [].concat(config.get('plugins.paths') || []);\n\n  let debug = _.bindKey(server, 'log', ['plugins', 'debug']);\n  let warning = _.bindKey(server, 'log', ['plugins', 'warning']);\n\n  // scan all scanDirs to find pluginPaths\n  await each(scanDirs, async dir => {\n    debug({ tmpl: 'Scanning `<%= dir %>` for plugins', dir: dir });\n\n    let filenames = null;\n\n    try {\n      filenames = await fromNode(cb => readdir(dir, cb));\n    } catch (err) {\n      if (err.code !== 'ENOENT') throw err;\n\n      filenames = [];\n      warning({\n        tmpl: '<%= err.code %>: Unable to scan non-existent directory for plugins \"<%= dir %>\"',\n        err: err,\n        dir: dir\n      });\n    }\n\n    await each(filenames, async name => {\n      if (name[0] === '.') return;\n\n      let path = resolve(dir, name);\n      let stats = await fromNode(cb => stat(path, cb));\n      if (stats.isDirectory()) {\n        pluginPaths.push(path);\n      }\n    });\n  });\n\n  for (let path of pluginPaths) {\n    let modulePath;\n    try {\n      modulePath = require.resolve(path);\n    } catch (e) {\n      warning({ tmpl: 'Skipping non-plugin directory at <%= path %>', path: path });\n      continue;\n    }\n\n    await plugins.new(path);\n    debug({ tmpl: 'Found plugin at <%= path %>', path: modulePath });\n  }\n};\n"
      ]
    },
    "mtime": 1467036622849
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/plugins/plugin_collection.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./plugin_api",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "PluginApi"
              }
            ]
          },
          {
            "source": "util",
            "imported": [
              "inspect"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "inspect",
                "local": "inspect"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "get",
              "indexBy"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "get",
                "local": "get"
              },
              {
                "kind": "named",
                "imported": "indexBy",
                "local": "indexBy"
              }
            ]
          },
          {
            "source": "../../utils/collection",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Collection"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "get",
        "inherits",
        "create-class",
        "class-call-check",
        "async-to-generator",
        "to-consumable-array",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i]; return arr2; } else { return Array.from(arr); } }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _plugin_api = require('./plugin_api');\n\nvar _plugin_api2 = _interopRequireDefault(_plugin_api);\n\nvar _util = require('util');\n\nvar _lodash = require('lodash');\n\nvar _utilsCollection = require('../../utils/collection');\n\nvar _utilsCollection2 = _interopRequireDefault(_utilsCollection);\n\nvar byIdCache = Symbol('byIdCache');\nvar pluginApis = Symbol('pluginApis');\n\nmodule.exports = (function (_Collection) {\n  _inherits(Plugins, _Collection);\n\n  function Plugins(kbnServer) {\n    _classCallCheck(this, Plugins);\n\n    _get(Object.getPrototypeOf(Plugins.prototype), 'constructor', this).call(this);\n    this.kbnServer = kbnServer;\n    this[pluginApis] = new Set();\n  }\n\n  _createClass(Plugins, [{\n    key: 'new',\n    value: _asyncToGenerator(function* (path) {\n      var api = new _plugin_api2['default'](this.kbnServer, path);\n      this[pluginApis].add(api);\n\n      var output = [].concat(require(path)(api) || []);\n      var config = this.kbnServer.config;\n\n      if (!output.length) return;\n\n      // clear the byIdCache\n      this[byIdCache] = null;\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = output[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var product = _step.value;\n\n          if (product instanceof api.Plugin) {\n            var plugin = product;\n            this.add(plugin);\n\n            var enabled = yield plugin.readConfig();\n            if (!enabled) this['delete'](plugin);\n            continue;\n          }\n\n          throw new TypeError('unexpected plugin export ' + (0, _util.inspect)(product));\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator['return']) {\n            _iterator['return']();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    })\n  }, {\n    key: 'getPluginApis',\n    value: function getPluginApis() {\n      return this[pluginApis];\n    }\n  }, {\n    key: 'byId',\n    get: function get() {\n      return this[byIdCache] || (this[byIdCache] = (0, _lodash.indexBy)([].concat(_toConsumableArray(this)), 'id'));\n    }\n  }]);\n\n  return Plugins;\n})(_utilsCollection2['default']);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9wbHVnaW5zL3BsdWdpbl9jb2xsZWN0aW9uLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7MEJBQ3NCLGNBQWM7Ozs7b0JBQ1osTUFBTTs7c0JBQ0QsUUFBUTs7K0JBQ2Qsd0JBQXdCOzs7O0FBRS9DLElBQUksU0FBUyxHQUFHLE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUNwQyxJQUFJLFVBQVUsR0FBRyxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUM7O0FBRXRDLE1BQU0sQ0FBQyxPQUFPO1lBQVMsT0FBTzs7QUFFakIsV0FGVSxPQUFPLENBRWhCLFNBQVMsRUFBRTswQkFGRixPQUFPOztBQUcxQiwrQkFIbUIsT0FBTyw2Q0FHbEI7QUFDUixRQUFJLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQztBQUMzQixRQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsSUFBSSxHQUFHLEVBQUUsQ0FBQztHQUM5Qjs7ZUFOb0IsT0FBTzs7NkJBUW5CLFdBQUMsSUFBSSxFQUFFO0FBQ2QsVUFBSSxHQUFHLEdBQUcsNEJBQWMsSUFBSSxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsQ0FBQztBQUM5QyxVQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDOztBQUUxQixVQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQztBQUNqRCxVQUFJLE1BQU0sR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQzs7QUFFbkMsVUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsT0FBTzs7O0FBRzNCLFVBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxJQUFJLENBQUM7Ozs7Ozs7QUFFdkIsNkJBQW9CLE1BQU0sOEhBQUU7Y0FBbkIsT0FBTzs7QUFFZCxjQUFJLE9BQU8sWUFBWSxHQUFHLENBQUMsTUFBTSxFQUFFO0FBQ2pDLGdCQUFJLE1BQU0sR0FBRyxPQUFPLENBQUM7QUFDckIsZ0JBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7O0FBRWpCLGdCQUFJLE9BQU8sR0FBRyxNQUFNLE1BQU0sQ0FBQyxVQUFVLEVBQUUsQ0FBQztBQUN4QyxnQkFBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLFVBQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUNsQyxxQkFBUztXQUNWOztBQUVELGdCQUFNLElBQUksU0FBUyxDQUFDLDJCQUEyQixHQUFHLG1CQUFRLE9BQU8sQ0FBQyxDQUFDLENBQUM7U0FDckU7Ozs7Ozs7Ozs7Ozs7OztLQUNGOzs7V0FNWSx5QkFBRztBQUNkLGFBQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0tBQ3pCOzs7U0FOTyxlQUFHO0FBQ1QsYUFBTyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLGtEQUFZLElBQUksSUFBRyxJQUFJLENBQUMsQ0FBQSxBQUFDLENBQUM7S0FDeEU7OztTQXJDb0IsT0FBTztnQ0EyQzdCLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvc2VydmVyL3BsdWdpbnMvcGx1Z2luX2NvbGxlY3Rpb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbmltcG9ydCBQbHVnaW5BcGkgZnJvbSAnLi9wbHVnaW5fYXBpJztcbmltcG9ydCB7IGluc3BlY3QgfSBmcm9tICd1dGlsJztcbmltcG9ydCB7IGdldCwgaW5kZXhCeSB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgQ29sbGVjdGlvbiBmcm9tICcuLi8uLi91dGlscy9jb2xsZWN0aW9uJztcblxubGV0IGJ5SWRDYWNoZSA9IFN5bWJvbCgnYnlJZENhY2hlJyk7XG5sZXQgcGx1Z2luQXBpcyA9IFN5bWJvbCgncGx1Z2luQXBpcycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIFBsdWdpbnMgZXh0ZW5kcyBDb2xsZWN0aW9uIHtcblxuICBjb25zdHJ1Y3RvcihrYm5TZXJ2ZXIpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMua2JuU2VydmVyID0ga2JuU2VydmVyO1xuICAgIHRoaXNbcGx1Z2luQXBpc10gPSBuZXcgU2V0KCk7XG4gIH1cblxuICBhc3luYyBuZXcocGF0aCkge1xuICAgIGxldCBhcGkgPSBuZXcgUGx1Z2luQXBpKHRoaXMua2JuU2VydmVyLCBwYXRoKTtcbiAgICB0aGlzW3BsdWdpbkFwaXNdLmFkZChhcGkpO1xuXG4gICAgbGV0IG91dHB1dCA9IFtdLmNvbmNhdChyZXF1aXJlKHBhdGgpKGFwaSkgfHwgW10pO1xuICAgIGxldCBjb25maWcgPSB0aGlzLmtiblNlcnZlci5jb25maWc7XG5cbiAgICBpZiAoIW91dHB1dC5sZW5ndGgpIHJldHVybjtcblxuICAgIC8vIGNsZWFyIHRoZSBieUlkQ2FjaGVcbiAgICB0aGlzW2J5SWRDYWNoZV0gPSBudWxsO1xuXG4gICAgZm9yIChsZXQgcHJvZHVjdCBvZiBvdXRwdXQpIHtcblxuICAgICAgaWYgKHByb2R1Y3QgaW5zdGFuY2VvZiBhcGkuUGx1Z2luKSB7XG4gICAgICAgIGxldCBwbHVnaW4gPSBwcm9kdWN0O1xuICAgICAgICB0aGlzLmFkZChwbHVnaW4pO1xuXG4gICAgICAgIGxldCBlbmFibGVkID0gYXdhaXQgcGx1Z2luLnJlYWRDb25maWcoKTtcbiAgICAgICAgaWYgKCFlbmFibGVkKSB0aGlzLmRlbGV0ZShwbHVnaW4pO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigndW5leHBlY3RlZCBwbHVnaW4gZXhwb3J0ICcgKyBpbnNwZWN0KHByb2R1Y3QpKTtcbiAgICB9XG4gIH1cblxuICBnZXQgYnlJZCgpIHtcbiAgICByZXR1cm4gdGhpc1tieUlkQ2FjaGVdIHx8ICh0aGlzW2J5SWRDYWNoZV0gPSBpbmRleEJ5KFsuLi50aGlzXSwgJ2lkJykpO1xuICB9XG5cbiAgZ2V0UGx1Z2luQXBpcygpIHtcbiAgICByZXR1cm4gdGhpc1twbHVnaW5BcGlzXTtcbiAgfVxuXG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/plugins/plugin_collection.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;;;;;;;0BACsB,cAAc;;;;oBACZ,MAAM;;sBACD,QAAQ;;+BACd,wBAAwB;;;;AAE/C,IAAI,SAAS,GAAG,MAAM,CAAC,WAAW,CAAC,CAAC;AACpC,IAAI,UAAU,GAAG,MAAM,CAAC,YAAY,CAAC,CAAC;;AAEtC,MAAM,CAAC,OAAO;YAAS,OAAO;;AAEjB,WAFU,OAAO,CAEhB,SAAS,EAAE;0BAFF,OAAO;;AAG1B,+BAHmB,OAAO,6CAGlB;AACR,QAAI,CAAC,SAAS,GAAG,SAAS,CAAC;AAC3B,QAAI,CAAC,UAAU,CAAC,GAAG,IAAI,GAAG,EAAE,CAAC;GAC9B;;eANoB,OAAO;;6BAQnB,WAAC,IAAI,EAAE;AACd,UAAI,GAAG,GAAG,4BAAc,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;AAC9C,UAAI,CAAC,UAAU,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;;AAE1B,UAAI,MAAM,GAAG,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC;AACjD,UAAI,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;;AAEnC,UAAI,CAAC,MAAM,CAAC,MAAM,EAAE,OAAO;;;AAG3B,UAAI,CAAC,SAAS,CAAC,GAAG,IAAI,CAAC;;;;;;;AAEvB,6BAAoB,MAAM,8HAAE;cAAnB,OAAO;;AAEd,cAAI,OAAO,YAAY,GAAG,CAAC,MAAM,EAAE;AACjC,gBAAI,MAAM,GAAG,OAAO,CAAC;AACrB,gBAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;;AAEjB,gBAAI,OAAO,GAAG,MAAM,MAAM,CAAC,UAAU,EAAE,CAAC;AACxC,gBAAI,CAAC,OAAO,EAAE,IAAI,UAAO,CAAC,MAAM,CAAC,CAAC;AAClC,qBAAS;WACV;;AAED,gBAAM,IAAI,SAAS,CAAC,2BAA2B,GAAG,mBAAQ,OAAO,CAAC,CAAC,CAAC;SACrE;;;;;;;;;;;;;;;KACF;;;WAMY,yBAAG;AACd,aAAO,IAAI,CAAC,UAAU,CAAC,CAAC;KACzB;;;SANO,eAAG;AACT,aAAO,IAAI,CAAC,SAAS,CAAC,KAAK,IAAI,CAAC,SAAS,CAAC,GAAG,kDAAY,IAAI,IAAG,IAAI,CAAC,CAAA,AAAC,CAAC;KACxE;;;SArCoB,OAAO;gCA2C7B,CAAC",
      "file": "/home/vio/v3metrics/src/server/plugins/plugin_collection.js",
      "sourcesContent": [
        "\nimport PluginApi from './plugin_api';\nimport { inspect } from 'util';\nimport { get, indexBy } from 'lodash';\nimport Collection from '../../utils/collection';\n\nlet byIdCache = Symbol('byIdCache');\nlet pluginApis = Symbol('pluginApis');\n\nmodule.exports = class Plugins extends Collection {\n\n  constructor(kbnServer) {\n    super();\n    this.kbnServer = kbnServer;\n    this[pluginApis] = new Set();\n  }\n\n  async new(path) {\n    let api = new PluginApi(this.kbnServer, path);\n    this[pluginApis].add(api);\n\n    let output = [].concat(require(path)(api) || []);\n    let config = this.kbnServer.config;\n\n    if (!output.length) return;\n\n    // clear the byIdCache\n    this[byIdCache] = null;\n\n    for (let product of output) {\n\n      if (product instanceof api.Plugin) {\n        let plugin = product;\n        this.add(plugin);\n\n        let enabled = await plugin.readConfig();\n        if (!enabled) this.delete(plugin);\n        continue;\n      }\n\n      throw new TypeError('unexpected plugin export ' + inspect(product));\n    }\n  }\n\n  get byId() {\n    return this[byIdCache] || (this[byIdCache] = indexBy([...this], 'id'));\n  }\n\n  getPluginApis() {\n    return this[pluginApis];\n  }\n\n};\n"
      ]
    },
    "mtime": 1467036622849
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/plugins/plugin_api.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "./plugin",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Plugin"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "basename",
              "join"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "basename",
                "local": "basename"
              },
              {
                "kind": "named",
                "imported": "join",
                "local": "join"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _plugin = require('./plugin');\n\nvar _plugin2 = _interopRequireDefault(_plugin);\n\nvar _path = require('path');\n\nmodule.exports = (function () {\n  function PluginApi(kibana, pluginPath) {\n    _classCallCheck(this, PluginApi);\n\n    this.config = kibana.config;\n    this.rootDir = kibana.rootDir;\n    this['package'] = require((0, _path.join)(pluginPath, 'package.json'));\n    this.Plugin = _plugin2['default'].scoped(kibana, pluginPath, this['package']);\n  }\n\n  _createClass(PluginApi, [{\n    key: 'uiExports',\n    get: function get() {\n      throw new Error('plugin.uiExports is not defined until initialize phase');\n    }\n  }, {\n    key: 'autoload',\n    get: function get() {\n      console.warn(this['package'].id + ' accessed the autoload lists which are no longer available via the Plugin API.' + 'Use the `ui/autoload/*` modules instead.');\n\n      return {\n        directives: [],\n        filters: [],\n        styles: [],\n        modules: [],\n        require: []\n      };\n    }\n  }]);\n\n  return PluginApi;\n})();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9wbHVnaW5zL3BsdWdpbl9hcGkuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7c0JBQWMsUUFBUTs7OztzQkFDSCxVQUFVOzs7O29CQUNFLE1BQU07O0FBRXJDLE1BQU0sQ0FBQyxPQUFPO0FBQ0QsV0FEVSxTQUFTLENBQ2xCLE1BQU0sRUFBRSxVQUFVLEVBQUU7MEJBRFgsU0FBUzs7QUFFNUIsUUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDO0FBQzVCLFFBQUksQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQztBQUM5QixRQUFJLFdBQVEsR0FBRyxPQUFPLENBQUMsZ0JBQUssVUFBVSxFQUFFLGNBQWMsQ0FBQyxDQUFDLENBQUM7QUFDekQsUUFBSSxDQUFDLE1BQU0sR0FBRyxvQkFBTyxNQUFNLENBQUMsTUFBTSxFQUFFLFVBQVUsRUFBRSxJQUFJLFdBQVEsQ0FBQyxDQUFDO0dBQy9EOztlQU5vQixTQUFTOztTQVFqQixlQUFHO0FBQ2QsWUFBTSxJQUFJLEtBQUssQ0FBQyx3REFBd0QsQ0FBQyxDQUFDO0tBQzNFOzs7U0FFVyxlQUFHO0FBQ2IsYUFBTyxDQUFDLElBQUksQ0FDVixBQUFHLElBQUksV0FBUSxDQUFDLEVBQUUsc0ZBQ2xCLDBDQUEwQyxDQUMzQyxDQUFDOztBQUVGLGFBQU87QUFDTCxrQkFBVSxFQUFFLEVBQUU7QUFDZCxlQUFPLEVBQUUsRUFBRTtBQUNYLGNBQU0sRUFBRSxFQUFFO0FBQ1YsZUFBTyxFQUFFLEVBQUU7QUFDWCxlQUFPLEVBQUUsRUFBRTtPQUNaLENBQUM7S0FDSDs7O1NBekJvQixTQUFTO0lBMEIvQixDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9wbHVnaW5zL3BsdWdpbl9hcGkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IFBsdWdpbiBmcm9tICcuL3BsdWdpbic7XG5pbXBvcnQgeyBiYXNlbmFtZSwgam9pbiB9IGZyb20gJ3BhdGgnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIFBsdWdpbkFwaSB7XG4gIGNvbnN0cnVjdG9yKGtpYmFuYSwgcGx1Z2luUGF0aCkge1xuICAgIHRoaXMuY29uZmlnID0ga2liYW5hLmNvbmZpZztcbiAgICB0aGlzLnJvb3REaXIgPSBraWJhbmEucm9vdERpcjtcbiAgICB0aGlzLnBhY2thZ2UgPSByZXF1aXJlKGpvaW4ocGx1Z2luUGF0aCwgJ3BhY2thZ2UuanNvbicpKTtcbiAgICB0aGlzLlBsdWdpbiA9IFBsdWdpbi5zY29wZWQoa2liYW5hLCBwbHVnaW5QYXRoLCB0aGlzLnBhY2thZ2UpO1xuICB9XG5cbiAgZ2V0IHVpRXhwb3J0cygpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3BsdWdpbi51aUV4cG9ydHMgaXMgbm90IGRlZmluZWQgdW50aWwgaW5pdGlhbGl6ZSBwaGFzZScpO1xuICB9XG5cbiAgZ2V0IGF1dG9sb2FkKCkge1xuICAgIGNvbnNvbGUud2FybihcbiAgICAgIGAke3RoaXMucGFja2FnZS5pZH0gYWNjZXNzZWQgdGhlIGF1dG9sb2FkIGxpc3RzIHdoaWNoIGFyZSBubyBsb25nZXIgYXZhaWxhYmxlIHZpYSB0aGUgUGx1Z2luIEFQSS5gICtcbiAgICAgICdVc2UgdGhlIGB1aS9hdXRvbG9hZC8qYCBtb2R1bGVzIGluc3RlYWQuJ1xuICAgICk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgZGlyZWN0aXZlczogW10sXG4gICAgICBmaWx0ZXJzOiBbXSxcbiAgICAgIHN0eWxlczogW10sXG4gICAgICBtb2R1bGVzOiBbXSxcbiAgICAgIHJlcXVpcmU6IFtdXG4gICAgfTtcbiAgfVxufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/plugins/plugin_api.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;sBAAc,QAAQ;;;;sBACH,UAAU;;;;oBACE,MAAM;;AAErC,MAAM,CAAC,OAAO;AACD,WADU,SAAS,CAClB,MAAM,EAAE,UAAU,EAAE;0BADX,SAAS;;AAE5B,QAAI,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC;AAC5B,QAAI,CAAC,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC;AAC9B,QAAI,WAAQ,GAAG,OAAO,CAAC,gBAAK,UAAU,EAAE,cAAc,CAAC,CAAC,CAAC;AACzD,QAAI,CAAC,MAAM,GAAG,oBAAO,MAAM,CAAC,MAAM,EAAE,UAAU,EAAE,IAAI,WAAQ,CAAC,CAAC;GAC/D;;eANoB,SAAS;;SAQjB,eAAG;AACd,YAAM,IAAI,KAAK,CAAC,wDAAwD,CAAC,CAAC;KAC3E;;;SAEW,eAAG;AACb,aAAO,CAAC,IAAI,CACV,AAAG,IAAI,WAAQ,CAAC,EAAE,sFAClB,0CAA0C,CAC3C,CAAC;;AAEF,aAAO;AACL,kBAAU,EAAE,EAAE;AACd,eAAO,EAAE,EAAE;AACX,cAAM,EAAE,EAAE;AACV,eAAO,EAAE,EAAE;AACX,eAAO,EAAE,EAAE;OACZ,CAAC;KACH;;;SAzBoB,SAAS;IA0B/B,CAAC",
      "file": "/home/vio/v3metrics/src/server/plugins/plugin_api.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport Plugin from './plugin';\nimport { basename, join } from 'path';\n\nmodule.exports = class PluginApi {\n  constructor(kibana, pluginPath) {\n    this.config = kibana.config;\n    this.rootDir = kibana.rootDir;\n    this.package = require(join(pluginPath, 'package.json'));\n    this.Plugin = Plugin.scoped(kibana, pluginPath, this.package);\n  }\n\n  get uiExports() {\n    throw new Error('plugin.uiExports is not defined until initialize phase');\n  }\n\n  get autoload() {\n    console.warn(\n      `${this.package.id} accessed the autoload lists which are no longer available via the Plugin API.` +\n      'Use the `ui/autoload/*` modules instead.'\n    );\n\n    return {\n      directives: [],\n      filters: [],\n      styles: [],\n      modules: [],\n      require: []\n    };\n  }\n};\n"
      ]
    },
    "mtime": 1467036622849
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/plugins/plugin.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "lodash/internal/toPath",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "toPath"
              }
            ]
          },
          {
            "source": "joi",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Joi"
              }
            ]
          },
          {
            "source": "bluebird",
            "imported": [
              "default",
              "attempt",
              "fromNode"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Bluebird"
              },
              {
                "kind": "named",
                "imported": "attempt",
                "local": "attempt"
              },
              {
                "kind": "named",
                "imported": "fromNode",
                "local": "fromNode"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "basename",
              "resolve"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "basename",
                "local": "basename"
              },
              {
                "kind": "named",
                "imported": "resolve",
                "local": "resolve"
              }
            ]
          },
          {
            "source": "util",
            "imported": [
              "inherits"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "inherits",
                "local": "inherits"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "async-to-generator",
        "get",
        "inherits",
        "to-consumable-array",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i]; return arr2; } else { return Array.from(arr); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _lodashInternalToPath = require('lodash/internal/toPath');\n\nvar _lodashInternalToPath2 = _interopRequireDefault(_lodashInternalToPath);\n\nvar _joi = require('joi');\n\nvar _joi2 = _interopRequireDefault(_joi);\n\nvar _bluebird = require('bluebird');\n\nvar _bluebird2 = _interopRequireDefault(_bluebird);\n\nvar _path = require('path');\n\nvar _util = require('util');\n\nvar extendInitFns = Symbol('extend plugin initialization');\n\nvar defaultConfigSchema = _joi2['default'].object({\n  enabled: _joi2['default'].boolean()['default'](true)\n})['default']();\n\n/**\n * The server plugin class, used to extend the server\n * and add custom behavior. A \"scoped\" plugin class is\n * created by the PluginApi class and provided to plugin\n * providers that automatically binds all but the `opts`\n * arguments.\n *\n * @class Plugin\n * @param {KbnServer} kbnServer - the KbnServer this plugin\n *                              belongs to.\n * @param {String} path - the path from which the plugin hails\n * @param {Object} pkg - the value of package.json for the plugin\n * @param {Objects} opts - the options for this plugin\n * @param {String} [opts.id=pkg.name] - the id for this plugin.\n * @param {Object} [opts.uiExports] - a mapping of UiExport types\n *                                  to UI modules or metadata about\n *                                  the UI module\n * @param {Array} [opts.require] - the other plugins that this plugin\n *                               requires. These plugins must exist and\n *                               be enabled for this plugin to function.\n *                               The require'd plugins will also be\n *                               initialized first, in order to make sure\n *                               that dependencies provided by these plugins\n *                               are available\n * @param {String} [opts.version=pkg.version] - the version of this plugin\n * @param {Function} [opts.init] - A function that will be called to initialize\n *                               this plugin at the appropriate time.\n * @param {Function} [opts.configPrefix=this.id] - The prefix to use for configuration\n *                               values in the main configuration service\n * @param {Function} [opts.config] - A function that produces a configuration\n *                                 schema using Joi, which is passed as its\n *                                 first argument.\n * @param {String|False} [opts.publicDir=path + '/public']\n *    - the public directory for this plugin. The final directory must\n *    have the name \"public\", though it can be located somewhere besides\n *    the root of the plugin. Set this to false to disable exposure of a\n *    public directory\n */\nmodule.exports = (function () {\n  function Plugin(kbnServer, path, pkg, opts) {\n    _classCallCheck(this, Plugin);\n\n    this.kbnServer = kbnServer;\n    this.pkg = pkg;\n    this.path = path;\n\n    this.id = opts.id || pkg.name;\n    this.uiExportsSpecs = opts.uiExports || {};\n    this.requiredIds = opts.require || [];\n    this.version = opts.version || pkg.version;\n    this.externalPreInit = opts.preInit || _lodash2['default'].noop;\n    this.externalInit = opts.init || _lodash2['default'].noop;\n    this.configPrefix = opts.configPrefix || this.id;\n    this.getConfigSchema = opts.config || _lodash2['default'].noop;\n    this.preInit = _lodash2['default'].once(this.preInit);\n    this.init = _lodash2['default'].once(this.init);\n    this[extendInitFns] = [];\n\n    if (opts.publicDir === false) {\n      this.publicDir = null;\n    } else if (!opts.publicDir) {\n      this.publicDir = (0, _path.resolve)(this.path, 'public');\n    } else {\n      this.publicDir = opts.publicDir;\n      if ((0, _path.basename)(this.publicDir) !== 'public') {\n        throw new Error('publicDir for plugin ' + this.id + ' must end with a \"public\" directory.');\n      }\n    }\n  }\n\n  _createClass(Plugin, [{\n    key: 'readConfig',\n    value: _asyncToGenerator(function* () {\n      var schema = yield this.getConfigSchema(_joi2['default']);\n      var config = this.kbnServer.config;\n\n      config.extendSchema(this.configPrefix, schema || defaultConfigSchema);\n\n      if (config.get([].concat(_toConsumableArray((0, _lodashInternalToPath2['default'])(this.configPrefix)), ['enabled']))) {\n        return true;\n      } else {\n        config.removeSchema(this.configPrefix);\n        return false;\n      }\n    })\n  }, {\n    key: 'preInit',\n    value: _asyncToGenerator(function* () {\n      return yield this.externalPreInit(this.kbnServer.server);\n    })\n  }, {\n    key: 'init',\n    value: _asyncToGenerator(function* () {\n      var _this = this;\n\n      var id = this.id;\n      var version = this.version;\n      var kbnServer = this.kbnServer;\n      var configPrefix = this.configPrefix;\n      var config = kbnServer.config;\n\n      // setup the hapi register function and get on with it\n      var asyncRegister = _asyncToGenerator(function* (server, options) {\n        _this.server = server;\n\n        yield Promise.all(_this[extendInitFns].map(_asyncToGenerator(function* (fn) {\n          yield fn.call(_this, server, options);\n        })));\n\n        server.log(['plugins', 'debug'], {\n          tmpl: 'Initializing plugin <%= plugin.toString() %>',\n          plugin: _this\n        });\n\n        if (_this.publicDir) {\n          server.exposeStaticDir('/plugins/' + id + '/{path*}', _this.publicDir);\n        }\n\n        _this.status = kbnServer.status.createForPlugin(_this);\n        server.expose('status', _this.status);\n\n        return yield (0, _bluebird.attempt)(_this.externalInit, [server, options], _this);\n      });\n\n      var register = function register(server, options, next) {\n        _bluebird2['default'].resolve(asyncRegister(server, options)).nodeify(next);\n      };\n\n      register.attributes = { name: id, version: version };\n\n      yield (0, _bluebird.fromNode)(function (cb) {\n        kbnServer.server.register({\n          register: register,\n          options: config.has(configPrefix) ? config.get(configPrefix) : null\n        }, cb);\n      });\n\n      // Only change the plugin status to green if the\n      // intial status has not been changed\n      if (this.status.state === 'uninitialized') {\n        this.status.green('Ready');\n      }\n    })\n  }, {\n    key: 'extendInit',\n    value: function extendInit(fn) {\n      this[extendInitFns].push(fn);\n    }\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      return this.pkg;\n    }\n  }, {\n    key: 'toString',\n    value: function toString() {\n      return this.id + '@' + this.version;\n    }\n  }], [{\n    key: 'scoped',\n    value: function scoped(kbnServer, path, pkg) {\n      return (function (_Plugin) {\n        _inherits(ScopedPlugin, _Plugin);\n\n        function ScopedPlugin(opts) {\n          _classCallCheck(this, ScopedPlugin);\n\n          _get(Object.getPrototypeOf(ScopedPlugin.prototype), 'constructor', this).call(this, kbnServer, path, pkg, opts || {});\n        }\n\n        return ScopedPlugin;\n      })(Plugin);\n    }\n  }]);\n\n  return Plugin;\n})();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9wbHVnaW5zL3BsdWdpbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O3NCQUFjLFFBQVE7Ozs7b0NBQ0gsd0JBQXdCOzs7O21CQUMzQixLQUFLOzs7O3dCQUN1QixVQUFVOzs7O29CQUNwQixNQUFNOztvQkFDZixNQUFNOztBQUUvQixJQUFNLGFBQWEsR0FBRyxNQUFNLENBQUMsOEJBQThCLENBQUMsQ0FBQzs7QUFFN0QsSUFBTSxtQkFBbUIsR0FBRyxpQkFBSSxNQUFNLENBQUM7QUFDckMsU0FBTyxFQUFFLGlCQUFJLE9BQU8sRUFBRSxXQUFRLENBQUMsSUFBSSxDQUFDO0NBQ3JDLENBQUMsV0FBUSxFQUFFLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUF3Q2IsTUFBTSxDQUFDLE9BQU87QUFDRCxXQURVLE1BQU0sQ0FDZixTQUFTLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUU7MEJBRG5CLE1BQU07O0FBRXpCLFFBQUksQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO0FBQzNCLFFBQUksQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDO0FBQ2YsUUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7O0FBRWpCLFFBQUksQ0FBQyxFQUFFLEdBQUcsSUFBSSxDQUFDLEVBQUUsSUFBSSxHQUFHLENBQUMsSUFBSSxDQUFDO0FBQzlCLFFBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDLFNBQVMsSUFBSSxFQUFFLENBQUM7QUFDM0MsUUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsT0FBTyxJQUFJLEVBQUUsQ0FBQztBQUN0QyxRQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxPQUFPLElBQUksR0FBRyxDQUFDLE9BQU8sQ0FBQztBQUMzQyxRQUFJLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQyxPQUFPLElBQUksb0JB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QUc7QUFDUCxhQUFPLElBQUksQ0FBQyxHQUFHLENBQUM7S0FDakI7OztXQUVPLG9CQUFHO0FBQ1QsYUFBVSxJQUFJLENBQUMsRUFBRSxTQUFJLElBQUksQ0FBQyxPQUFPLENBQUc7S0FDckM7OztXQWxGWSxnQkFBQyxTQUFTLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRTtBQUNsQztrQkFBYSxZQUFZOztBQUNaLGlCQURBLFlBQVksQ0FDWCxJQUFJLEVBQUU7Z0NBRFAsWUFBWTs7QUFFckIscUNBRlMsWUFBWSw2Q0FFZixTQUFTLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRSxJQUFJLElBQUksRUFBRSxFQUFFO1NBQ3pDOztlQUhVLFlBQVk7U0FBUyxNQUFNLEVBSXRDO0tBQ0g7OztTQXRDb0IsTUFBTTtJQW1INUIsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy9zZXJ2ZXIvcGx1Z2lucy9wbHVnaW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHRvUGF0aCBmcm9tICdsb2Rhc2gvaW50ZXJuYWwvdG9QYXRoJztcbmltcG9ydCBKb2kgZnJvbSAnam9pJztcbmltcG9ydCBCbHVlYmlyZCwgeyBhdHRlbXB0LCBmcm9tTm9kZSB9IGZyb20gJ2JsdWViaXJkJztcbmltcG9ydCB7IGJhc2VuYW1lLCByZXNvbHZlIH0gZnJvbSAncGF0aCc7XG5pbXBvcnQgeyBpbmhlcml0cyB9IGZyb20gJ3V0aWwnO1xuXG5jb25zdCBleHRlbmRJbml0Rm5zID0gU3ltYm9sKCdleHRlbmQgcGx1Z2luIGluaXRpYWxpemF0aW9uJyk7XG5cbmNvbnN0IGRlZmF1bHRDb25maWdTY2hlbWEgPSBKb2kub2JqZWN0KHtcbiAgZW5hYmxlZDogSm9pLmJvb2xlYW4oKS5kZWZhdWx0KHRydWUpXG59KS5kZWZhdWx0KCk7XG5cbi8qKlxuICogVGhlIHNlcnZlciBwbHVnaW4gY2xhc3MsIHVzZWQgdG8gZXh0ZW5kIHRoZSBzZXJ2ZXJcbiAqIGFuZCBhZGQgY3VzdG9tIGJlaGF2aW9yLiBBIFwic2NvcGVkXCIgcGx1Z2luIGNsYXNzIGlzXG4gKiBjcmVhdGVkIGJ5IHRoZSBQbHVnaW5BcGkgY2xhc3MgYW5kIHByb3ZpZGVkIHRvIHBsdWdpblxuICogcHJvdmlkZXJzIHRoYXQgYXV0b21hdGljYWxseSBiaW5kcyBhbGwgYnV0IHRoZSBgb3B0c2BcbiAqIGFyZ3VtZW50cy5cbiAqXG4gKiBAY2xhc3MgUGx1Z2luXG4gKiBAcGFyYW0ge0tiblNlcnZlcn0ga2JuU2VydmVyIC0gdGhlIEtiblNlcnZlciB0aGlzIHBsdWdpblxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWxvbmdzIHRvLlxuICogQHBhcmFtIHtTdHJpbmd9IHBhdGggLSB0aGUgcGF0aCBmcm9tIHdoaWNoIHRoZSBwbHVnaW4gaGFpbHNcbiAqIEBwYXJhbSB7T2JqZWN0fSBwa2cgLSB0aGUgdmFsdWUgb2YgcGFja2FnZS5qc29uIGZvciB0aGUgcGx1Z2luXG4gKiBAcGFyYW0ge09iamVjdHN9IG9wdHMgLSB0aGUgb3B0aW9ucyBmb3IgdGhpcyBwbHVnaW5cbiAqIEBwYXJhbSB7U3RyaW5nfSBbb3B0cy5pZD1wa2cubmFtZV0gLSB0aGUgaWQgZm9yIHRoaXMgcGx1Z2luLlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRzLnVpRXhwb3J0c10gLSBhIG1hcHBpbmcgb2YgVWlFeHBvcnQgdHlwZXNcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIFVJIG1vZHVsZXMgb3IgbWV0YWRhdGEgYWJvdXRcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZSBVSSBtb2R1bGVcbiAqIEBwYXJhbSB7QXJyYXl9IFtvcHRzLnJlcXVpcmVdIC0gdGhlIG90aGVyIHBsdWdpbnMgdGhhdCB0aGlzIHBsdWdpblxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZXMuIFRoZXNlIHBsdWdpbnMgbXVzdCBleGlzdCBhbmRcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlIGVuYWJsZWQgZm9yIHRoaXMgcGx1Z2luIHRvIGZ1bmN0aW9uLlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGhlIHJlcXVpcmUnZCBwbHVnaW5zIHdpbGwgYWxzbyBiZVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbGl6ZWQgZmlyc3QsIGluIG9yZGVyIHRvIG1ha2Ugc3VyZVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdCBkZXBlbmRlbmNpZXMgcHJvdmlkZWQgYnkgdGhlc2UgcGx1Z2luc1xuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJlIGF2YWlsYWJsZVxuICogQHBhcmFtIHtTdHJpbmd9IFtvcHRzLnZlcnNpb249cGtnLnZlcnNpb25dIC0gdGhlIHZlcnNpb24gb2YgdGhpcyBwbHVnaW5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRzLmluaXRdIC0gQSBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgY2FsbGVkIHRvIGluaXRpYWxpemVcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMgcGx1Z2luIGF0IHRoZSBhcHByb3ByaWF0ZSB0aW1lLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdHMuY29uZmlnUHJlZml4PXRoaXMuaWRdIC0gVGhlIHByZWZpeCB0byB1c2UgZm9yIGNvbmZpZ3VyYXRpb25cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlcyBpbiB0aGUgbWFpbiBjb25maWd1cmF0aW9uIHNlcnZpY2VcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRzLmNvbmZpZ10gLSBBIGZ1bmN0aW9uIHRoYXQgcHJvZHVjZXMgYSBjb25maWd1cmF0aW9uXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjaGVtYSB1c2luZyBKb2ksIHdoaWNoIGlzIHBhc3NlZCBhcyBpdHNcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3QgYXJndW1lbnQuXG4gKiBAcGFyYW0ge1N0cmluZ3xGYWxzZX0gW29wdHMucHVibGljRGlyPXBhdGggKyAnL3B1YmxpYyddXG4gKiAgICAtIHRoZSBwdWJsaWMgZGlyZWN0b3J5IGZvciB0aGlzIHBsdWdpbi4gVGhlIGZpbmFsIGRpcmVjdG9yeSBtdXN0XG4gKiAgICBoYXZlIHRoZSBuYW1lIFwicHVibGljXCIsIHRob3VnaCBpdCBjYW4gYmUgbG9jYXRlZCBzb21ld2hlcmUgYmVzaWRlc1xuICogICAgdGhlIHJvb3Qgb2YgdGhlIHBsdWdpbi4gU2V0IHRoaXMgdG8gZmFsc2UgdG8gZGlzYWJsZSBleHBvc3VyZSBvZiBhXG4gKiAgICBwdWJsaWMgZGlyZWN0b3J5XG4gKi9cbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgUGx1Z2luIHtcbiAgY29uc3RydWN0b3Ioa2JuU2VydmVyLCBwYXRoLCBwa2csIG9wdHMpIHtcbiAgICB0aGlzLmtiblNlcnZlciA9IGtiblNlcnZlcjtcbiAgICB0aGlzLnBrZyA9IHBrZztcbiAgICB0aGlzLnBhdGggPSBwYXRoO1xuXG4gICAgdGhpcy5pZCA9IG9wdHMuaWQgfHwgcGtnLm5hbWU7XG4gICAgdGhpcy51aUV4cG9ydHNTcGVjcyA9IG9wdHMudWlFeHBvcnRzIHx8IHt9O1xuICAgIHRoaXMucmVxdWlyZWRJZHMgPSBvcHRzLnJlcXVpcmUgfHwgW107XG4gICAgdGhpcy52ZXJzaW9uID0gb3B0cy52ZXJzaW9uIHx8IHBrZy52ZXJzaW9uO1xuICAgIHRoaXMuZXh0ZXJuYWxQcmVJbml0ID0gb3B0cy5wcmVJbml0IHx8IF8ubm9vcDtcbiAgICB0aGlzLmV4dGVybmFsSW5pdCA9IG9wdHMuaW5pdCB8fCBfLm5vb3A7XG4gICAgdGhpcy5jb25maWdQcmVmaXggPSBvcHRzLmNvbmZpZ1ByZWZpeCB8fCB0aGlzLmlkO1xuICAgIHRoaXMuZ2V0Q29uZmlnU2NoZW1hID0gb3B0cy5jb25maWcgfHwgXy5ub29wO1xuICAgIHRoaXMucHJlSW5pdCA9IF8ub25jZSh0aGlzLnByZUluaXQpO1xuICAgIHRoaXMuaW5pdCA9IF8ub25jZSh0aGlzLmluaXQpO1xuICAgIHRoaXNbZXh0ZW5kSW5pdEZuc10gPSBbXTtcblxuICAgIGlmIChvcHRzLnB1YmxpY0RpciA9PT0gZmFsc2UpIHtcbiAgICAgIHRoaXMucHVibGljRGlyID0gbnVsbDtcbiAgICB9XG4gICAgZWxzZSBpZiAoIW9wdHMucHVibGljRGlyKSB7XG4gICAgICB0aGlzLnB1YmxpY0RpciA9IHJlc29sdmUodGhpcy5wYXRoLCAncHVibGljJyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdGhpcy5wdWJsaWNEaXIgPSBvcHRzLnB1YmxpY0RpcjtcbiAgICAgIGlmIChiYXNlbmFtZSh0aGlzLnB1YmxpY0RpcikgIT09ICdwdWJsaWMnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgcHVibGljRGlyIGZvciBwbHVnaW4gJHt0aGlzLmlkfSBtdXN0IGVuZCB3aXRoIGEgXCJwdWJsaWNcIiBkaXJlY3RvcnkuYCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIHNjb3BlZChrYm5TZXJ2ZXIsIHBhdGgsIHBrZykge1xuICAgIHJldHVybiBjbGFzcyBTY29wZWRQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICAgICAgY29uc3RydWN0b3Iob3B0cykge1xuICAgICAgICBzdXBlcihrYm5TZXJ2ZXIsIHBhdGgsIHBrZywgb3B0cyB8fCB7fSk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIGFzeW5jIHJlYWRDb25maWcoKSB7XG4gICAgbGV0IHNjaGVtYSA9IGF3YWl0IHRoaXMuZ2V0Q29uZmlnU2NoZW1hKEpvaSk7XG4gICAgbGV0IHsgY29uZmlnIH0gPSB0aGlzLmtiblNlcnZlcjtcbiAgICBjb25maWcuZXh0ZW5kU2NoZW1hKHRoaXMuY29uZmlnUHJlZml4LCBzY2hlbWEgfHwgZGVmYXVsdENvbmZpZ1NjaGVtYSk7XG5cbiAgICBpZiAoY29uZmlnLmdldChbLi4udG9QYXRoKHRoaXMuY29uZmlnUHJlZml4KSwgJ2VuYWJsZWQnXSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25maWcucmVtb3ZlU2NoZW1hKHRoaXMuY29uZmlnUHJlZml4KTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBwcmVJbml0KCkge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLmV4dGVybmFsUHJlSW5pdCh0aGlzLmtiblNlcnZlci5zZXJ2ZXIpO1xuICB9XG5cbiAgYXN5bmMgaW5pdCgpIHtcbiAgICBsZXQgeyBpZCwgdmVyc2lvbiwga2JuU2VydmVyLCBjb25maWdQcmVmaXggfSA9IHRoaXM7XG4gICAgbGV0IHsgY29uZmlnIH0gPSBrYm5TZXJ2ZXI7XG5cbiAgICAvLyBzZXR1cCB0aGUgaGFwaSByZWdpc3RlciBmdW5jdGlvbiBhbmQgZ2V0IG9uIHdpdGggaXRcbiAgICBjb25zdCBhc3luY1JlZ2lzdGVyID0gYXN5bmMgKHNlcnZlciwgb3B0aW9ucykgPT4ge1xuICAgICAgdGhpcy5zZXJ2ZXIgPSBzZXJ2ZXI7XG5cbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXNbZXh0ZW5kSW5pdEZuc10ubWFwKGFzeW5jIGZuID0+IHtcbiAgICAgICAgYXdhaXQgZm4uY2FsbCh0aGlzLCBzZXJ2ZXIsIG9wdGlvbnMpO1xuICAgICAgfSkpO1xuXG4gICAgICBzZXJ2ZXIubG9nKFsncGx1Z2lucycsICdkZWJ1ZyddLCB7XG4gICAgICAgIHRtcGw6ICdJbml0aWFsaXppbmcgcGx1Z2luIDwlPSBwbHVnaW4udG9TdHJpbmcoKSAlPicsXG4gICAgICAgIHBsdWdpbjogdGhpc1xuICAgICAgfSk7XG5cbiAgICAgIGlmICh0aGlzLnB1YmxpY0Rpcikge1xuICAgICAgICBzZXJ2ZXIuZXhwb3NlU3RhdGljRGlyKGAvcGx1Z2lucy8ke2lkfS97cGF0aCp9YCwgdGhpcy5wdWJsaWNEaXIpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnN0YXR1cyA9IGtiblNlcnZlci5zdGF0dXMuY3JlYXRlRm9yUGx1Z2luKHRoaXMpO1xuICAgICAgc2VydmVyLmV4cG9zZSgnc3RhdHVzJywgdGhpcy5zdGF0dXMpO1xuXG4gICAgICByZXR1cm4gYXdhaXQgYXR0ZW1wdCh0aGlzLmV4dGVybmFsSW5pdCwgW3NlcnZlciwgb3B0aW9uc10sIHRoaXMpO1xuICAgIH07XG5cbiAgICBjb25zdCByZWdpc3RlciA9IChzZXJ2ZXIsIG9wdGlvbnMsIG5leHQpID0+IHtcbiAgICAgIEJsdWViaXJkLnJlc29sdmUoYXN5bmNSZWdpc3RlcihzZXJ2ZXIsIG9wdGlvbnMpKS5ub2RlaWZ5KG5leHQpO1xuICAgIH07XG5cbiAgICByZWdpc3Rlci5hdHRyaWJ1dGVzID0geyBuYW1lOiBpZCwgdmVyc2lvbjogdmVyc2lvbiB9O1xuXG4gICAgYXdhaXQgZnJvbU5vZGUoY2IgPT4ge1xuICAgICAga2JuU2VydmVyLnNlcnZlci5yZWdpc3Rlcih7XG4gICAgICAgIHJlZ2lzdGVyOiByZWdpc3RlcixcbiAgICAgICAgb3B0aW9uczogY29uZmlnLmhhcyhjb25maWdQcmVmaXgpID8gY29uZmlnLmdldChjb25maWdQcmVmaXgpIDogbnVsbFxuICAgICAgfSwgY2IpO1xuICAgIH0pO1xuXG4gICAgLy8gT25seSBjaGFuZ2UgdGhlIHBsdWdpbiBzdGF0dXMgdG8gZ3JlZW4gaWYgdGhlXG4gICAgLy8gaW50aWFsIHN0YXR1cyBoYXMgbm90IGJlZW4gY2hhbmdlZFxuICAgIGlmICh0aGlzLnN0YXR1cy5zdGF0ZSA9PT0gJ3VuaW5pdGlhbGl6ZWQnKSB7XG4gICAgICB0aGlzLnN0YXR1cy5ncmVlbignUmVhZHknKTtcbiAgICB9XG4gIH1cblxuICBleHRlbmRJbml0KGZuKSB7XG4gICAgdGhpc1tleHRlbmRJbml0Rm5zXS5wdXNoKGZuKTtcbiAgfVxuXG4gIHRvSlNPTigpIHtcbiAgICByZXR1cm4gdGhpcy5wa2c7XG4gIH1cblxuICB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gYCR7dGhpcy5pZH1AJHt0aGlzLnZlcnNpb259YDtcbiAgfVxufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/plugins/plugin.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;;;;;;;sBAAc,QAAQ;;;;oCACH,wBAAwB;;;;mBAC3B,KAAK;;;;wBACuB,UAAU;;;;oBACpB,MAAM;;oBACf,MAAM;;AAE/B,IAAM,aAAa,GAAG,MAAM,CAAC,8BAA8B,CAAC,CAAC;;AAE7D,IAAM,mBAAmB,GAAG,iBAAI,MAAM,CAAC;AACrC,SAAO,EAAE,iBAAI,OAAO,EAAE,WAAQ,CAAC,IAAI,CAAC;CACrC,CAAC,WAAQ,EAAE,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCb,MAAM,CAAC,OAAO;AACD,WADU,MAAM,CACf,SAAS,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE;0BADnB,MAAM;;AAEzB,QAAI,CAAC,SAAS,GAAG,SAAS,CAAC;AAC3B,QAAI,CAAC,GAAG,GAAG,GAAG,CAAC;AACf,QAAI,CAAC,IAAI,GAAG,IAAI,CAAC;;AAEjB,QAAI,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,IAAI,GAAG,CAAC,IAAI,CAAC;AAC9B,QAAI,CAAC,cAAc,GAAG,IAAI,CAAC,SAAS,IAAI,EAAE,CAAC;AAC3C,QAAI,CAAC,WAAW,GAAG,IAAI,CAAC,OAAO,IAAI,EAAE,CAAC;AACtC,QAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,IAAI,GAAG,CAAC,OAAO,CAAC;AAC3C,QAAI,CAAC,eAAe,GAAG,IAAI,CAAC,OAAO,IAAI,oBAAE,IAAI,CAAC;AAC9C,QAAI,CAAC,YAAY,GAAG,IAAI,CAAC,IAAI,IAAI,oBAAE,IAAI,CAAC;AACxC,QAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,EAAE,CAAC;AACjD,QAAI,CAAC,eAAe,GAAG,IAAI,CAAC,MAAM,IAAI,oBAAE,IAAI,CAAC;AAC7C,QAAI,CAAC,OAAO,GAAG,oBAAE,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;AACpC,QAAI,CAAC,IAAI,GAAG,oBAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAC9B,QAAI,CAAC,aAAa,CAAC,GAAG,EAAE,CAAC;;AAEzB,QAAI,IAAI,CAAC,SAAS,KAAK,KAAK,EAAE;AAC5B,UAAI,CAAC,SAAS,GAAG,IAAI,CAAC;KACvB,MACI,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;AACxB,UAAI,CAAC,SAAS,GAAG,mBAAQ,IAAI,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;KAC/C,MACI;AACH,UAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;AAChC,UAAI,oBAAS,IAAI,CAAC,SAAS,CAAC,KAAK,QAAQ,EAAE;AACzC,cAAM,IAAI,KAAK,2BAAyB,IAAI,CAAC,EAAE,0CAAuC,CAAC;OACxF;KACF;GACF;;eA9BoB,MAAM;;6BAwCX,aAAG;AACjB,UAAI,MAAM,GAAG,MAAM,IAAI,CAAC,eAAe,kBAAK,CAAC;UACvC,MAAM,GAAK,IAAI,CAAC,SAAS,CAAzB,MAAM;;AACZ,YAAM,CAAC,YAAY,CAAC,IAAI,CAAC,YAAY,EAAE,MAAM,IAAI,mBAAmB,CAAC,CAAC;;AAEtE,UAAI,MAAM,CAAC,GAAG,8BAAK,uCAAO,IAAI,CAAC,YAAY,CAAC,IAAE,SAAS,GAAE,EAAE;AACzD,eAAO,IAAI,CAAC;OACb,MAAM;AACL,cAAM,CAAC,YAAY,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;AACvC,eAAO,KAAK,CAAC;OACd;KACF;;;6BAEY,aAAG;AACd,aAAO,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;KAC1D;;;6BAES,aAAG;;;UACL,EAAE,GAAuC,IAAI,CAA7C,EAAE;UAAE,OAAO,GAA8B,IAAI,CAAzC,OAAO;UAAE,SAAS,GAAmB,IAAI,CAAhC,SAAS;UAAE,YAAY,GAAK,IAAI,CAArB,YAAY;UACpC,MAAM,GAAK,SAAS,CAApB,MAAM;;;AAGZ,UAAM,aAAa,qBAAG,WAAO,MAAM,EAAE,OAAO,EAAK;AAC/C,cAAK,MAAM,GAAG,MAAM,CAAC;;AAErB,cAAM,OAAO,CAAC,GAAG,CAAC,MAAK,aAAa,CAAC,CAAC,GAAG,mBAAC,WAAM,EAAE,EAAI;AACpD,gBAAM,EAAE,CAAC,IAAI,QAAO,MAAM,EAAE,OAAO,CAAC,CAAC;SACtC,EAAC,CAAC,CAAC;;AAEJ,cAAM,CAAC,GAAG,CAAC,CAAC,SAAS,EAAE,OAAO,CAAC,EAAE;AAC/B,cAAI,EAAE,8CAA8C;AACpD,gBAAM,OAAM;SACb,CAAC,CAAC;;AAEH,YAAI,MAAK,SAAS,EAAE;AAClB,gBAAM,CAAC,eAAe,eAAa,EAAE,eAAY,MAAK,SAAS,CAAC,CAAC;SAClE;;AAED,cAAK,MAAM,GAAG,SAAS,CAAC,MAAM,CAAC,eAAe,OAAM,CAAC;AACrD,cAAM,CAAC,MAAM,CAAC,QAAQ,EAAE,MAAK,MAAM,CAAC,CAAC;;AAErC,eAAO,MAAM,uBAAQ,MAAK,YAAY,EAAE,CAAC,MAAM,EAAE,OAAO,CAAC,QAAO,CAAC;OAClE,CAAA,CAAC;;AAEF,UAAM,QAAQ,GAAG,SAAX,QAAQ,CAAI,MAAM,EAAE,OAAO,EAAE,IAAI,EAAK;AAC1C,8BAAS,OAAO,CAAC,aAAa,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;OAChE,CAAC;;AAEF,cAAQ,CAAC,UAAU,GAAG,EAAE,IAAI,EAAE,EAAE,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC;;AAErD,YAAM,wBAAS,UAAA,EAAE,EAAI;AACnB,iBAAS,CAAC,MAAM,CAAC,QAAQ,CAAC;AACxB,kBAAQ,EAAE,QAAQ;AAClB,iBAAO,EAAE,MAAM,CAAC,GAAG,CAAC,YAAY,CAAC,GAAG,MAAM,CAAC,GAAG,CAAC,YAAY,CAAC,GAAG,IAAI;SACpE,EAAE,EAAE,CAAC,CAAC;OACR,CAAC,CAAC;;;;AAIH,UAAI,IAAI,CAAC,MAAM,CAAC,KAAK,KAAK,eAAe,EAAE;AACzC,YAAI,CAAC,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;OAC5B;KACF;;;WAES,oBAAC,EAAE,EAAE;AACb,UAAI,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;KAC9B;;;WAEK,kBAAG;AACP,aAAO,IAAI,CAAC,GAAG,CAAC;KACjB;;;WAEO,oBAAG;AACT,aAAU,IAAI,CAAC,EAAE,SAAI,IAAI,CAAC,OAAO,CAAG;KACrC;;;WAlFY,gBAAC,SAAS,EAAE,IAAI,EAAE,GAAG,EAAE;AAClC;kBAAa,YAAY;;AACZ,iBADA,YAAY,CACX,IAAI,EAAE;gCADP,YAAY;;AAErB,qCAFS,YAAY,6CAEf,SAAS,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,IAAI,EAAE,EAAE;SACzC;;eAHU,YAAY;SAAS,MAAM,EAItC;KACH;;;SAtCoB,MAAM;IAmH5B,CAAC",
      "file": "/home/vio/v3metrics/src/server/plugins/plugin.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport toPath from 'lodash/internal/toPath';\nimport Joi from 'joi';\nimport Bluebird, { attempt, fromNode } from 'bluebird';\nimport { basename, resolve } from 'path';\nimport { inherits } from 'util';\n\nconst extendInitFns = Symbol('extend plugin initialization');\n\nconst defaultConfigSchema = Joi.object({\n  enabled: Joi.boolean().default(true)\n}).default();\n\n/**\n * The server plugin class, used to extend the server\n * and add custom behavior. A \"scoped\" plugin class is\n * created by the PluginApi class and provided to plugin\n * providers that automatically binds all but the `opts`\n * arguments.\n *\n * @class Plugin\n * @param {KbnServer} kbnServer - the KbnServer this plugin\n *                              belongs to.\n * @param {String} path - the path from which the plugin hails\n * @param {Object} pkg - the value of package.json for the plugin\n * @param {Objects} opts - the options for this plugin\n * @param {String} [opts.id=pkg.name] - the id for this plugin.\n * @param {Object} [opts.uiExports] - a mapping of UiExport types\n *                                  to UI modules or metadata about\n *                                  the UI module\n * @param {Array} [opts.require] - the other plugins that this plugin\n *                               requires. These plugins must exist and\n *                               be enabled for this plugin to function.\n *                               The require'd plugins will also be\n *                               initialized first, in order to make sure\n *                               that dependencies provided by these plugins\n *                               are available\n * @param {String} [opts.version=pkg.version] - the version of this plugin\n * @param {Function} [opts.init] - A function that will be called to initialize\n *                               this plugin at the appropriate time.\n * @param {Function} [opts.configPrefix=this.id] - The prefix to use for configuration\n *                               values in the main configuration service\n * @param {Function} [opts.config] - A function that produces a configuration\n *                                 schema using Joi, which is passed as its\n *                                 first argument.\n * @param {String|False} [opts.publicDir=path + '/public']\n *    - the public directory for this plugin. The final directory must\n *    have the name \"public\", though it can be located somewhere besides\n *    the root of the plugin. Set this to false to disable exposure of a\n *    public directory\n */\nmodule.exports = class Plugin {\n  constructor(kbnServer, path, pkg, opts) {\n    this.kbnServer = kbnServer;\n    this.pkg = pkg;\n    this.path = path;\n\n    this.id = opts.id || pkg.name;\n    this.uiExportsSpecs = opts.uiExports || {};\n    this.requiredIds = opts.require || [];\n    this.version = opts.version || pkg.version;\n    this.externalPreInit = opts.preInit || _.noop;\n    this.externalInit = opts.init || _.noop;\n    this.configPrefix = opts.configPrefix || this.id;\n    this.getConfigSchema = opts.config || _.noop;\n    this.preInit = _.once(this.preInit);\n    this.init = _.once(this.init);\n    this[extendInitFns] = [];\n\n    if (opts.publicDir === false) {\n      this.publicDir = null;\n    }\n    else if (!opts.publicDir) {\n      this.publicDir = resolve(this.path, 'public');\n    }\n    else {\n      this.publicDir = opts.publicDir;\n      if (basename(this.publicDir) !== 'public') {\n        throw new Error(`publicDir for plugin ${this.id} must end with a \"public\" directory.`);\n      }\n    }\n  }\n\n  static scoped(kbnServer, path, pkg) {\n    return class ScopedPlugin extends Plugin {\n      constructor(opts) {\n        super(kbnServer, path, pkg, opts || {});\n      }\n    };\n  }\n\n  async readConfig() {\n    let schema = await this.getConfigSchema(Joi);\n    let { config } = this.kbnServer;\n    config.extendSchema(this.configPrefix, schema || defaultConfigSchema);\n\n    if (config.get([...toPath(this.configPrefix), 'enabled'])) {\n      return true;\n    } else {\n      config.removeSchema(this.configPrefix);\n      return false;\n    }\n  }\n\n  async preInit() {\n    return await this.externalPreInit(this.kbnServer.server);\n  }\n\n  async init() {\n    let { id, version, kbnServer, configPrefix } = this;\n    let { config } = kbnServer;\n\n    // setup the hapi register function and get on with it\n    const asyncRegister = async (server, options) => {\n      this.server = server;\n\n      await Promise.all(this[extendInitFns].map(async fn => {\n        await fn.call(this, server, options);\n      }));\n\n      server.log(['plugins', 'debug'], {\n        tmpl: 'Initializing plugin <%= plugin.toString() %>',\n        plugin: this\n      });\n\n      if (this.publicDir) {\n        server.exposeStaticDir(`/plugins/${id}/{path*}`, this.publicDir);\n      }\n\n      this.status = kbnServer.status.createForPlugin(this);\n      server.expose('status', this.status);\n\n      return await attempt(this.externalInit, [server, options], this);\n    };\n\n    const register = (server, options, next) => {\n      Bluebird.resolve(asyncRegister(server, options)).nodeify(next);\n    };\n\n    register.attributes = { name: id, version: version };\n\n    await fromNode(cb => {\n      kbnServer.server.register({\n        register: register,\n        options: config.has(configPrefix) ? config.get(configPrefix) : null\n      }, cb);\n    });\n\n    // Only change the plugin status to green if the\n    // intial status has not been changed\n    if (this.status.state === 'uninitialized') {\n      this.status.green('Ready');\n    }\n  }\n\n  extendInit(fn) {\n    this[extendInitFns].push(fn);\n  }\n\n  toJSON() {\n    return this.pkg;\n  }\n\n  toString() {\n    return `${this.id}@${this.version}`;\n  }\n};\n"
      ]
    },
    "mtime": 1467036622849
  },
  "{\"filename\":\"/home/vio/v3metrics/src/utils/collection.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "to-consumable-array"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i]; return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar set = Symbol('internal set');\n\nmodule.exports = (function () {\n  function Collection() {\n    _classCallCheck(this, Collection);\n\n    // Set's have a length of 0, mimic that\n    this[set] = new Set(arguments[0] || []);\n  }\n\n  /******\n   ** Collection API\n   ******/\n\n  _createClass(Collection, [{\n    key: 'toArray',\n    value: function toArray() {\n      return [].concat(_toConsumableArray(this.values()));\n    }\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      return this.toArray();\n    }\n\n    /******\n     ** ES Set Api\n     ******/\n\n  }, {\n    key: 'add',\n    value: function add(value) {\n      return this[set].add(value);\n    }\n  }, {\n    key: 'clear',\n    value: function clear() {\n      return this[set].clear();\n    }\n  }, {\n    key: 'delete',\n    value: function _delete(value) {\n      return this[set]['delete'](value);\n    }\n  }, {\n    key: 'entries',\n    value: function entries() {\n      return this[set].entries();\n    }\n  }, {\n    key: 'forEach',\n    value: function forEach(callbackFn, thisArg) {\n      return this[set].forEach(callbackFn, thisArg);\n    }\n  }, {\n    key: 'has',\n    value: function has(value) {\n      return this[set].has(value);\n    }\n  }, {\n    key: 'keys',\n    value: function keys() {\n      return this[set].keys();\n    }\n  }, {\n    key: 'values',\n    value: function values() {\n      return this[set].values();\n    }\n  }, {\n    key: Symbol.iterator,\n    value: function value() {\n      return this[set][Symbol.iterator]();\n    }\n  }, {\n    key: 'size',\n    get: function get() {\n      return this[set].size;\n    }\n  }], [{\n    key: Symbol.species,\n    get: function get() {\n      return Collection;\n    }\n  }]);\n\n  return Collection;\n})();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3V0aWxzL2NvbGxlY3Rpb24uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFDQSxJQUFJLEdBQUcsR0FBRyxNQUFNLENBQUMsY0FBYyxDQUFDLENBQUM7O0FBRWpDLE1BQU0sQ0FBQyxPQUFPO0FBQ0QsV0FEVSxVQUFVLEdBQ2pCOzBCQURPLFVBQVU7OztBQUU3QixRQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDO0dBQ3pDOzs7Ozs7ZUFIb0IsVUFBVTs7V0FTeEIsbUJBQUc7QUFDUiwwQ0FBVyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUU7S0FDM0I7OztXQUVLLGtCQUFHO0FBQ1AsYUFBTyxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7S0FDdkI7Ozs7Ozs7O1dBY0UsYUFBQyxLQUFLLEVBQUU7QUFDVCxhQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7S0FDN0I7OztXQUVJLGlCQUFHO0FBQ04sYUFBTyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUM7S0FDMUI7OztXQUVLLGlCQUFDLEtBQUssRUFBRTtBQUNaLGFBQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxVQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7S0FDaEM7OztXQUVNLG1CQUFHO0FBQ1IsYUFBTyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUM7S0FDNUI7OztXQUVNLGlCQUFDLFVBQVUsRUFBRSxPQUFPLEVBQUU7QUFDM0IsYUFBTyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLFVBQVUsRUFBRSxPQUFPLENBQUMsQ0FBQztLQUMvQzs7O1dBRUUsYUFBQyxLQUFLLEVBQUU7QUFDVCxhQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7S0FDN0I7OztXQUVHLGdCQUFHO0FBQ0wsYUFBTyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7S0FDekI7OztXQUVLLGtCQUFHO0FBQ1AsYUFBTyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUM7S0FDM0I7O1NBRUEsTUFBTSxDQUFDLFFBQVE7V0FBQyxpQkFBRztBQUNsQixhQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQztLQUNyQzs7O1NBdENPLGVBQUc7QUFDVCxhQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUM7S0FDdkI7O1NBTlcsTUFBTSxDQUFDLE9BQU87U0FBQyxlQUFHO0FBQzVCLGFBQU8sVUFBVSxDQUFDO0tBQ25COzs7U0F2Qm9CLFVBQVU7SUFnRWhDLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvdXRpbHMvY29sbGVjdGlvbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxubGV0IHNldCA9IFN5bWJvbCgnaW50ZXJuYWwgc2V0Jyk7XG5cbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgQ29sbGVjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKCkgeyAvLyBTZXQncyBoYXZlIGEgbGVuZ3RoIG9mIDAsIG1pbWljIHRoYXRcbiAgICB0aGlzW3NldF0gPSBuZXcgU2V0KGFyZ3VtZW50c1swXSB8fCBbXSk7XG4gIH1cblxuICAvKioqKioqXG4gICAqKiBDb2xsZWN0aW9uIEFQSVxuICAgKioqKioqL1xuXG4gIHRvQXJyYXkoKSB7XG4gICAgcmV0dXJuIFsuLi50aGlzLnZhbHVlcygpXTtcbiAgfVxuXG4gIHRvSlNPTigpIHtcbiAgICByZXR1cm4gdGhpcy50b0FycmF5KCk7XG4gIH1cblxuICAvKioqKioqXG4gICAqKiBFUyBTZXQgQXBpXG4gICAqKioqKiovXG5cbiAgc3RhdGljIGdldCBbU3ltYm9sLnNwZWNpZXNdKCkge1xuICAgIHJldHVybiBDb2xsZWN0aW9uO1xuICB9XG5cbiAgZ2V0IHNpemUoKSB7XG4gICAgcmV0dXJuIHRoaXNbc2V0XS5zaXplO1xuICB9XG5cbiAgYWRkKHZhbHVlKSB7XG4gICAgcmV0dXJuIHRoaXNbc2V0XS5hZGQodmFsdWUpO1xuICB9XG5cbiAgY2xlYXIoKSB7XG4gICAgcmV0dXJuIHRoaXNbc2V0XS5jbGVhcigpO1xuICB9XG5cbiAgZGVsZXRlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHRoaXNbc2V0XS5kZWxldGUodmFsdWUpO1xuICB9XG5cbiAgZW50cmllcygpIHtcbiAgICByZXR1cm4gdGhpc1tzZXRdLmVudHJpZXMoKTtcbiAgfVxuXG4gIGZvckVhY2goY2FsbGJhY2tGbiwgdGhpc0FyZykge1xuICAgIHJldHVybiB0aGlzW3NldF0uZm9yRWFjaChjYWxsYmFja0ZuLCB0aGlzQXJnKTtcbiAgfVxuXG4gIGhhcyh2YWx1ZSkge1xuICAgIHJldHVybiB0aGlzW3NldF0uaGFzKHZhbHVlKTtcbiAgfVxuXG4gIGtleXMoKSB7XG4gICAgcmV0dXJuIHRoaXNbc2V0XS5rZXlzKCk7XG4gIH1cblxuICB2YWx1ZXMoKSB7XG4gICAgcmV0dXJuIHRoaXNbc2V0XS52YWx1ZXMoKTtcbiAgfVxuXG4gIFtTeW1ib2wuaXRlcmF0b3JdKCkge1xuICAgIHJldHVybiB0aGlzW3NldF1bU3ltYm9sLml0ZXJhdG9yXSgpO1xuICB9XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/utils/collection.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;AACA,IAAI,GAAG,GAAG,MAAM,CAAC,cAAc,CAAC,CAAC;;AAEjC,MAAM,CAAC,OAAO;AACD,WADU,UAAU,GACjB;0BADO,UAAU;;;AAE7B,QAAI,CAAC,GAAG,CAAC,GAAG,IAAI,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC;GACzC;;;;;;eAHoB,UAAU;;WASxB,mBAAG;AACR,0CAAW,IAAI,CAAC,MAAM,EAAE,GAAE;KAC3B;;;WAEK,kBAAG;AACP,aAAO,IAAI,CAAC,OAAO,EAAE,CAAC;KACvB;;;;;;;;WAcE,aAAC,KAAK,EAAE;AACT,aAAO,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;KAC7B;;;WAEI,iBAAG;AACN,aAAO,IAAI,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,CAAC;KAC1B;;;WAEK,iBAAC,KAAK,EAAE;AACZ,aAAO,IAAI,CAAC,GAAG,CAAC,UAAO,CAAC,KAAK,CAAC,CAAC;KAChC;;;WAEM,mBAAG;AACR,aAAO,IAAI,CAAC,GAAG,CAAC,CAAC,OAAO,EAAE,CAAC;KAC5B;;;WAEM,iBAAC,UAAU,EAAE,OAAO,EAAE;AAC3B,aAAO,IAAI,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC;KAC/C;;;WAEE,aAAC,KAAK,EAAE;AACT,aAAO,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;KAC7B;;;WAEG,gBAAG;AACL,aAAO,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC;KACzB;;;WAEK,kBAAG;AACP,aAAO,IAAI,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC;KAC3B;;SAEA,MAAM,CAAC,QAAQ;WAAC,iBAAG;AAClB,aAAO,IAAI,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,CAAC;KACrC;;;SAtCO,eAAG;AACT,aAAO,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;KACvB;;SANW,MAAM,CAAC,OAAO;SAAC,eAAG;AAC5B,aAAO,UAAU,CAAC;KACnB;;;SAvBoB,UAAU;IAgEhC,CAAC",
      "file": "/home/vio/v3metrics/src/utils/collection.js",
      "sourcesContent": [
        "\nlet set = Symbol('internal set');\n\nmodule.exports = class Collection {\n  constructor() { // Set's have a length of 0, mimic that\n    this[set] = new Set(arguments[0] || []);\n  }\n\n  /******\n   ** Collection API\n   ******/\n\n  toArray() {\n    return [...this.values()];\n  }\n\n  toJSON() {\n    return this.toArray();\n  }\n\n  /******\n   ** ES Set Api\n   ******/\n\n  static get [Symbol.species]() {\n    return Collection;\n  }\n\n  get size() {\n    return this[set].size;\n  }\n\n  add(value) {\n    return this[set].add(value);\n  }\n\n  clear() {\n    return this[set].clear();\n  }\n\n  delete(value) {\n    return this[set].delete(value);\n  }\n\n  entries() {\n    return this[set].entries();\n  }\n\n  forEach(callbackFn, thisArg) {\n    return this[set].forEach(callbackFn, thisArg);\n  }\n\n  has(value) {\n    return this[set].has(value);\n  }\n\n  keys() {\n    return this[set].keys();\n  }\n\n  values() {\n    return this[set].values();\n  }\n\n  [Symbol.iterator]() {\n    return this[set][Symbol.iterator]();\n  }\n};\n"
      ]
    },
    "mtime": 1467036622893
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/config/complete.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "sliced-to-array"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }; })();\n\nexports['default'] = function (kbnServer, server, config) {\n\n  server.decorate('server', 'config', function () {\n    return kbnServer.config;\n  });\n\n  var tmpl = 'Settings for \"<%= key %>\" were not applied, check for spelling errors and ensure the plugin is loaded.';\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = config.getPendingSets()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var _step$value = _slicedToArray(_step.value, 2);\n\n      var key = _step$value[0];\n      var val = _step$value[1];\n\n      server.log(['warning', 'config'], { key: key, val: val, tmpl: tmpl });\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator['return']) {\n        _iterator['return']();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n};\n\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9jb25maWcvY29tcGxldGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7cUJBQWUsVUFBVSxTQUFTLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRTs7QUFFbEQsUUFBTSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEVBQUUsUUFBUSxFQUFFLFlBQVk7QUFDOUMsV0FBTyxTQUFTLENBQUMsTUFBTSxDQUFDO0dBQ3pCLENBQUMsQ0FBQzs7QUFFSCxNQUFJLElBQUksR0FBRyx3R0FBd0csQ0FBQzs7Ozs7O0FBQ3BILHlCQUF1QixNQUFNLENBQUMsY0FBYyxFQUFFLDhIQUFFOzs7VUFBdEMsR0FBRztVQUFFLEdBQUc7O0FBQ2hCLFlBQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxTQUFTLEVBQUUsUUFBUSxDQUFDLEVBQUUsRUFBRSxHQUFHLEVBQUgsR0FBRyxFQUFFLEdBQUcsRUFBSCxHQUFHLEVBQUUsSUFBSSxFQUFKLElBQUksRUFBRSxDQUFDLENBQUM7S0FDdkQ7Ozs7Ozs7Ozs7Ozs7OztDQUNGOztBQUFBLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvc2VydmVyL2NvbmZpZy9jb21wbGV0ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChrYm5TZXJ2ZXIsIHNlcnZlciwgY29uZmlnKSB7XG5cbiAgc2VydmVyLmRlY29yYXRlKCdzZXJ2ZXInLCAnY29uZmlnJywgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBrYm5TZXJ2ZXIuY29uZmlnO1xuICB9KTtcblxuICBsZXQgdG1wbCA9ICdTZXR0aW5ncyBmb3IgXCI8JT0ga2V5ICU+XCIgd2VyZSBub3QgYXBwbGllZCwgY2hlY2sgZm9yIHNwZWxsaW5nIGVycm9ycyBhbmQgZW5zdXJlIHRoZSBwbHVnaW4gaXMgbG9hZGVkLic7XG4gIGZvciAobGV0IFtrZXksIHZhbF0gb2YgY29uZmlnLmdldFBlbmRpbmdTZXRzKCkpIHtcbiAgICBzZXJ2ZXIubG9nKFsnd2FybmluZycsICdjb25maWcnXSwgeyBrZXksIHZhbCwgdG1wbCB9KTtcbiAgfVxufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/config/complete.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;qBAAe,UAAU,SAAS,EAAE,MAAM,EAAE,MAAM,EAAE;;AAElD,QAAM,CAAC,QAAQ,CAAC,QAAQ,EAAE,QAAQ,EAAE,YAAY;AAC9C,WAAO,SAAS,CAAC,MAAM,CAAC;GACzB,CAAC,CAAC;;AAEH,MAAI,IAAI,GAAG,wGAAwG,CAAC;;;;;;AACpH,yBAAuB,MAAM,CAAC,cAAc,EAAE,8HAAE;;;UAAtC,GAAG;UAAE,GAAG;;AAChB,YAAM,CAAC,GAAG,CAAC,CAAC,SAAS,EAAE,QAAQ,CAAC,EAAE,EAAE,GAAG,EAAH,GAAG,EAAE,GAAG,EAAH,GAAG,EAAE,IAAI,EAAJ,IAAI,EAAE,CAAC,CAAC;KACvD;;;;;;;;;;;;;;;CACF;;AAAA,CAAC",
      "file": "/home/vio/v3metrics/src/server/config/complete.js",
      "sourcesContent": [
        "export default function (kbnServer, server, config) {\n\n  server.decorate('server', 'config', function () {\n    return kbnServer.config;\n  });\n\n  let tmpl = 'Settings for \"<%= key %>\" were not applied, check for spelling errors and ensure the plugin is loaded.';\n  for (let [key, val] of config.getPendingSets()) {\n    server.log(['warning', 'config'], { key, val, tmpl });\n  }\n};\n"
      ]
    },
    "mtime": 1467036622845
  },
  "{\"filename\":\"/home/vio/v3metrics/src/ui/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "url",
            "imported": [
              "format"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "format",
                "local": "formatUrl"
              }
            ]
          },
          {
            "source": "fs",
            "imported": [
              "readFileSync"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "readFileSync",
                "local": "readFile"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "defaults"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "defaults",
                "local": "defaults"
              }
            ]
          },
          {
            "source": "boom",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Boom"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "resolve"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "resolve",
                "local": "resolve"
              }
            ]
          },
          {
            "source": "../utils/from_root",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "fromRoot"
              }
            ]
          },
          {
            "source": "./ui_exports",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "UiExports"
              }
            ]
          },
          {
            "source": "./ui_bundle",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "UiBundle"
              }
            ]
          },
          {
            "source": "./ui_bundle_collection",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "UiBundleCollection"
              }
            ]
          },
          {
            "source": "./ui_bundler_env",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "UiBundlerEnv"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "async-to-generator",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nvar _url = require('url');\n\nvar _fs = require('fs');\n\nvar _lodash = require('lodash');\n\nvar _boom = require('boom');\n\nvar _boom2 = _interopRequireDefault(_boom);\n\nvar _path = require('path');\n\nvar _utilsFrom_root = require('../utils/from_root');\n\nvar _utilsFrom_root2 = _interopRequireDefault(_utilsFrom_root);\n\nvar _ui_exports = require('./ui_exports');\n\nvar _ui_exports2 = _interopRequireDefault(_ui_exports);\n\nvar _ui_bundle = require('./ui_bundle');\n\nvar _ui_bundle2 = _interopRequireDefault(_ui_bundle);\n\nvar _ui_bundle_collection = require('./ui_bundle_collection');\n\nvar _ui_bundle_collection2 = _interopRequireDefault(_ui_bundle_collection);\n\nvar _ui_bundler_env = require('./ui_bundler_env');\n\nvar _ui_bundler_env2 = _interopRequireDefault(_ui_bundler_env);\n\nexports['default'] = _asyncToGenerator(function* (kbnServer, server, config) {\n\n  var loadingGif = (0, _fs.readFileSync)((0, _utilsFrom_root2['default'])('src/ui/public/loading.gif'), { encoding: 'base64' });\n\n  var uiExports = kbnServer.uiExports = new _ui_exports2['default']({\n    urlBasePath: config.get('server.basePath')\n  });\n\n  var bundlerEnv = new _ui_bundler_env2['default'](config.get('optimize.bundleDir'));\n  bundlerEnv.addContext('env', config.get('env.name'));\n  bundlerEnv.addContext('urlBasePath', config.get('server.basePath'));\n  bundlerEnv.addContext('sourceMaps', config.get('optimize.sourceMaps'));\n  bundlerEnv.addContext('kbnVersion', config.get('pkg.version'));\n  bundlerEnv.addContext('buildNum', config.get('pkg.buildNum'));\n  uiExports.addConsumer(bundlerEnv);\n\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = kbnServer.plugins[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var plugin = _step.value;\n\n      uiExports.consumePlugin(plugin);\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator['return']) {\n        _iterator['return']();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  var bundles = kbnServer.bundles = new _ui_bundle_collection2['default'](bundlerEnv, config.get('optimize.bundleFilter'));\n\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = uiExports.getAllApps()[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var app = _step2.value;\n\n      bundles.addApp(app);\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2['return']) {\n        _iterator2['return']();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n\n  var _iteratorNormalCompletion3 = true;\n  var _didIteratorError3 = false;\n  var _iteratorError3 = undefined;\n\n  try {\n    for (var _iterator3 = uiExports.getBundleProviders()[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n      var gen = _step3.value;\n\n      var bundle = yield gen(_ui_bundle2['default'], bundlerEnv, uiExports.getAllApps(), kbnServer.plugins);\n      if (bundle) bundles.add(bundle);\n    }\n\n    // render all views from the ui/views directory\n  } catch (err) {\n    _didIteratorError3 = true;\n    _iteratorError3 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion3 && _iterator3['return']) {\n        _iterator3['return']();\n      }\n    } finally {\n      if (_didIteratorError3) {\n        throw _iteratorError3;\n      }\n    }\n  }\n\n  server.setupViews((0, _path.resolve)(__dirname, 'views'));\n  server.exposeStaticFile('/loading.gif', (0, _path.resolve)(__dirname, 'public/loading.gif'));\n\n  server.route({\n    path: '/app/{id}',\n    method: 'GET',\n    handler: function handler(req, reply) {\n      var id = req.params.id;\n      var app = uiExports.apps.byId[id];\n      if (!app) return reply(_boom2['default'].notFound('Unknown app ' + id));\n\n      if (kbnServer.status.isGreen()) {\n        return reply.renderApp(app);\n      } else {\n        return reply.renderStatusPage();\n      }\n    }\n  });\n\n  server.decorate('reply', 'renderApp', _asyncToGenerator(function* (app) {\n    var isElasticsearchPluginRed = server.plugins.elasticsearch.status.state === 'red';\n    var uiSettings = server.uiSettings();\n    var payload = {\n      app: app,\n      nav: uiExports.navLinks.inOrder,\n      version: kbnServer.version,\n      buildNum: config.get('pkg.buildNum'),\n      buildSha: config.get('pkg.buildSha'),\n      basePath: config.get('server.basePath'),\n      serverName: config.get('server.name'),\n      uiSettings: {\n        defaults: yield uiSettings.getDefaults(),\n        user: isElasticsearchPluginRed ? {} : (yield uiSettings.getUserProvided())\n      },\n      vars: (0, _lodash.defaults)(app.getInjectedVars() || {}, uiExports.defaultInjectedVars)\n    };\n\n    return this.view(app.templateName, {\n      app: app,\n      loadingGif: loadingGif,\n      kibanaPayload: payload,\n      bundlePath: config.get('server.basePath') + '/bundles'\n    });\n  }));\n});\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3VpL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7bUJBQW9DLEtBQUs7O2tCQUNBLElBQUk7O3NCQUNwQixRQUFROztvQkFDaEIsTUFBTTs7OztvQkFDQyxNQUFNOzs4QkFDVCxvQkFBb0I7Ozs7MEJBQ25CLGNBQWM7Ozs7eUJBQ2YsYUFBYTs7OztvQ0FDSCx3QkFBd0I7Ozs7OEJBQzlCLGtCQUFrQjs7Ozt1Q0FFNUIsV0FBTyxTQUFTLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBSzs7QUFFbEQsTUFBTSxVQUFVLEdBQUcsc0JBQVMsaUNBQVMsMkJBQTJCLENBQUMsRUFBRSxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUMsQ0FBQyxDQUFDOztBQUUxRixNQUFNLFNBQVMsR0FBRyxTQUFTLENBQUMsU0FBUyxHQUFHLDRCQUFjO0FBQ3BELGVBQVcsRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLGlCQUFpQixDQUFDO0dBQzNDLENBQUMsQ0FBQzs7QUFFSCxNQUFNLFVBQVUsR0FBRyxnQ0FBaUIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLENBQUM7QUFDdEUsWUFBVSxDQUFDLFVBQVUsQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDO0FBQ3JELFlBQVUsQ0FBQyxVQUFVLENBQUMsYUFBYSxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxDQUFDO0FBQ3BFLFlBQVUsQ0FBQyxVQUFVLENBQUMsWUFBWSxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMscUJBQXFCLENBQUMsQ0FBQyxDQUFDO0FBQ3ZFLFlBQVUsQ0FBQyxVQUFVLENBQUMsWUFBWSxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQztBQUMvRCxZQUFVLENBQUMsVUFBVSxDQUFDLFVBQVUsRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUM7QUFDOUQsV0FBUyxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsQ0FBQzs7Ozs7OztBQUVsQyx5QkFBbUIsU0FBUyxDQUFDLE9BQU8sOEhBQUU7VUFBN0IsTUFBTTs7QUFDYixlQUFTLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0tBQ2pDOzs7Ozs7Ozs7Ozs7Ozs7O0FBRUQsTUFBTSxPQUFPLEdBQUcsU0FBUyxDQUFDLE9BQU8sR0FBRyxzQ0FBdUIsVUFBVSxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsdUJBQXVCLENBQUMsQ0FBQyxDQUFDOzs7Ozs7O0FBRTVHLDBCQUFnQixTQUFTLENBQUMsVUFBVSxFQUFFLG1JQUFFO1VBQS9CLEdBQUc7O0FBQ1YsYUFBTyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQztLQUNyQjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRUQsMEJBQWdCLFNBQVMsQ0FBQyxrQkFBa0IsRUFBRSxtSUFBRTtVQUF2QyxHQUFHOztBQUNWLFVBQU0sTUFBTSxHQUFHLE1BQU0sR0FBRyx5QkFBVyxVQUFVLEVBQUUsU0FBUyxDQUFDLFVBQVUsRUFBRSxFQUFFLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUMxRixVQUFJLE1BQU0sRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0tBQ2pDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHRCxRQUFNLENBQUMsVUFBVSxDQUFDLG1CQUFRLFNBQVMsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDO0FBQy9DLFFBQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxjQUFjLEVBQUUsbUJBQVEsU0FBUyxFQUFFLG9CQUFvQixDQUFDLENBQUMsQ0FBQzs7QUFFbEYsUUFBTSxDQUFDLEtBQUssQ0FBQztBQUNYLFFBQUksRUFBRSxXQUFXO0FBQ2pCLFVBQU0sRUFBRSxLQUFLO0FBQ2IsV0FBTyxFQUFFLGlCQUFVLEdBQUcsRUFBRSxLQUFLLEVBQUU7QUFDN0IsVUFBTSxFQUFFLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUM7QUFDekIsVUFBTSxHQUFHLEdBQUcsU0FBUyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDcEMsVUFBSSxDQUFDLEdBQUcsRUFBRSxPQUFPLEtBQUssQ0FBQyxrQkFBSyxRQUFRLENBQUMsY0FBYyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUM7O0FBRTNELFVBQUksU0FBUyxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUUsRUFBRTtBQUM5QixlQUFPLEtBQUssQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUM7T0FDN0IsTUFBTTtBQUNMLGVBQU8sS0FBSyxDQUFDLGdCQUFnQixFQUFFLENBQUM7T0FDakM7S0FDRjtHQUNGLENBQUMsQ0FBQzs7QUFFSCxRQUFNLENBQUMsUUFBUSxDQUFDLE9BQU8sRUFBRSxXQUFXLG9CQUFFLFdBQWdCLEdBQUcsRUFBRTtBQUN6RCxRQUFNLHdCQUF3QixHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEtBQUssS0FBSyxDQUFDO0FBQ3JGLFFBQU0sVUFBVSxHQUFHLE1BQU0sQ0FBQyxVQUFVLEVBQUUsQ0FBQztBQUN2QyxRQUFNLE9BQU8sR0FBRztBQUNkLFNBQUcsRUFBRSxHQUFHO0FBQ1IsU0FBRyxFQUFFLFNBQVMsQ0FBQyxRQUFRLENBQUMsT0FBTztBQUMvQixhQUFPLEVBQUUsU0FBUyxDQUFDLE9BQU87QUFDMUIsY0FBUSxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsY0FBYyxDQUFDO0FBQ3BDLGNBQVEsRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQztBQUNwQyxjQUFRLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQztBQUN2QyxnQkFBVSxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDO0FBQ3JDLGdCQUFVLEVBQUU7QUFDVixnQkFBUSxFQUFFLE1BQU0sVUFBVSxDQUFDLFdBQVcsRUFBRTtBQUN4QyxZQUFJLEVBQUUsd0JBQXdCLEdBQUcsRUFBRSxJQUFHLE1BQU0sVUFBVSxDQUFDLGVBQWUsRUFBRSxDQUFBO09BQ3pFO0FBQ0QsVUFBSSxFQUFFLHNCQUFTLEdBQUcsQ0FBQyxlQUFlLEVBQUUsSUFBSSxFQUFFLEVBQUUsU0FBUyxDQUFDLG1CQUFtQixDQUFDO0tBQzNFLENBQUM7O0FBRUYsV0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxZQUFZLEVBQUU7QUFDakMsU0FBRyxFQUFFLEdBQUc7QUFDUixnQkFBVSxFQUFFLFVBQVU7QUFDdEIsbUJBQWEsRUFBRSxPQUFPO0FBQ3RCLGdCQUFVLEVBQUssTUFBTSxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQyxhQUFVO0tBQ3ZELENBQUMsQ0FBQztHQUNKLEVBQUMsQ0FBQztDQUNKIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3VpL2luZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZm9ybWF0IGFzIGZvcm1hdFVybCB9IGZyb20gJ3VybCc7XG5pbXBvcnQgeyByZWFkRmlsZVN5bmMgYXMgcmVhZEZpbGUgfSBmcm9tICdmcyc7XG5pbXBvcnQgeyBkZWZhdWx0cyB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgQm9vbSBmcm9tICdib29tJztcbmltcG9ydCB7IHJlc29sdmUgfSBmcm9tICdwYXRoJztcbmltcG9ydCBmcm9tUm9vdCBmcm9tICcuLi91dGlscy9mcm9tX3Jvb3QnO1xuaW1wb3J0IFVpRXhwb3J0cyBmcm9tICcuL3VpX2V4cG9ydHMnO1xuaW1wb3J0IFVpQnVuZGxlIGZyb20gJy4vdWlfYnVuZGxlJztcbmltcG9ydCBVaUJ1bmRsZUNvbGxlY3Rpb24gZnJvbSAnLi91aV9idW5kbGVfY29sbGVjdGlvbic7XG5pbXBvcnQgVWlCdW5kbGVyRW52IGZyb20gJy4vdWlfYnVuZGxlcl9lbnYnO1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyAoa2JuU2VydmVyLCBzZXJ2ZXIsIGNvbmZpZykgPT4ge1xuXG4gIGNvbnN0IGxvYWRpbmdHaWYgPSByZWFkRmlsZShmcm9tUm9vdCgnc3JjL3VpL3B1YmxpYy9sb2FkaW5nLmdpZicpLCB7IGVuY29kaW5nOiAnYmFzZTY0J30pO1xuXG4gIGNvbnN0IHVpRXhwb3J0cyA9IGtiblNlcnZlci51aUV4cG9ydHMgPSBuZXcgVWlFeHBvcnRzKHtcbiAgICB1cmxCYXNlUGF0aDogY29uZmlnLmdldCgnc2VydmVyLmJhc2VQYXRoJylcbiAgfSk7XG5cbiAgY29uc3QgYnVuZGxlckVudiA9IG5ldyBVaUJ1bmRsZXJFbnYoY29uZmlnLmdldCgnb3B0aW1pemUuYnVuZGxlRGlyJykpO1xuICBidW5kbGVyRW52LmFkZENvbnRleHQoJ2VudicsIGNvbmZpZy5nZXQoJ2Vudi5uYW1lJykpO1xuICBidW5kbGVyRW52LmFkZENvbnRleHQoJ3VybEJhc2VQYXRoJywgY29uZmlnLmdldCgnc2VydmVyLmJhc2VQYXRoJykpO1xuICBidW5kbGVyRW52LmFkZENvbnRleHQoJ3NvdXJjZU1hcHMnLCBjb25maWcuZ2V0KCdvcHRpbWl6ZS5zb3VyY2VNYXBzJykpO1xuICBidW5kbGVyRW52LmFkZENvbnRleHQoJ2tiblZlcnNpb24nLCBjb25maWcuZ2V0KCdwa2cudmVyc2lvbicpKTtcbiAgYnVuZGxlckVudi5hZGRDb250ZXh0KCdidWlsZE51bScsIGNvbmZpZy5nZXQoJ3BrZy5idWlsZE51bScpKTtcbiAgdWlFeHBvcnRzLmFkZENvbnN1bWVyKGJ1bmRsZXJFbnYpO1xuXG4gIGZvciAobGV0IHBsdWdpbiBvZiBrYm5TZXJ2ZXIucGx1Z2lucykge1xuICAgIHVpRXhwb3J0cy5jb25zdW1lUGx1Z2luKHBsdWdpbik7XG4gIH1cblxuICBjb25zdCBidW5kbGVzID0ga2JuU2VydmVyLmJ1bmRsZXMgPSBuZXcgVWlCdW5kbGVDb2xsZWN0aW9uKGJ1bmRsZXJFbnYsIGNvbmZpZy5nZXQoJ29wdGltaXplLmJ1bmRsZUZpbHRlcicpKTtcblxuICBmb3IgKGxldCBhcHAgb2YgdWlFeHBvcnRzLmdldEFsbEFwcHMoKSkge1xuICAgIGJ1bmRsZXMuYWRkQXBwKGFwcCk7XG4gIH1cblxuICBmb3IgKGxldCBnZW4gb2YgdWlFeHBvcnRzLmdldEJ1bmRsZVByb3ZpZGVycygpKSB7XG4gICAgY29uc3QgYnVuZGxlID0gYXdhaXQgZ2VuKFVpQnVuZGxlLCBidW5kbGVyRW52LCB1aUV4cG9ydHMuZ2V0QWxsQXBwcygpLCBrYm5TZXJ2ZXIucGx1Z2lucyk7XG4gICAgaWYgKGJ1bmRsZSkgYnVuZGxlcy5hZGQoYnVuZGxlKTtcbiAgfVxuXG4gIC8vIHJlbmRlciBhbGwgdmlld3MgZnJvbSB0aGUgdWkvdmlld3MgZGlyZWN0b3J5XG4gIHNlcnZlci5zZXR1cFZpZXdzKHJlc29sdmUoX19kaXJuYW1lLCAndmlld3MnKSk7XG4gIHNlcnZlci5leHBvc2VTdGF0aWNGaWxlKCcvbG9hZGluZy5naWYnLCByZXNvbHZlKF9fZGlybmFtZSwgJ3B1YmxpYy9sb2FkaW5nLmdpZicpKTtcblxuICBzZXJ2ZXIucm91dGUoe1xuICAgIHBhdGg6ICcvYXBwL3tpZH0nLFxuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgaGFuZGxlcjogZnVuY3Rpb24gKHJlcSwgcmVwbHkpIHtcbiAgICAgIGNvbnN0IGlkID0gcmVxLnBhcmFtcy5pZDtcbiAgICAgIGNvbnN0IGFwcCA9IHVpRXhwb3J0cy5hcHBzLmJ5SWRbaWRdO1xuICAgICAgaWYgKCFhcHApIHJldHVybiByZXBseShCb29tLm5vdEZvdW5kKCdVbmtub3duIGFwcCAnICsgaWQpKTtcblxuICAgICAgaWYgKGtiblNlcnZlci5zdGF0dXMuaXNHcmVlbigpKSB7XG4gICAgICAgIHJldHVybiByZXBseS5yZW5kZXJBcHAoYXBwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiByZXBseS5yZW5kZXJTdGF0dXNQYWdlKCk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICBzZXJ2ZXIuZGVjb3JhdGUoJ3JlcGx5JywgJ3JlbmRlckFwcCcsIGFzeW5jIGZ1bmN0aW9uIChhcHApIHtcbiAgICBjb25zdCBpc0VsYXN0aWNzZWFyY2hQbHVnaW5SZWQgPSBzZXJ2ZXIucGx1Z2lucy5lbGFzdGljc2VhcmNoLnN0YXR1cy5zdGF0ZSA9PT0gJ3JlZCc7XG4gICAgY29uc3QgdWlTZXR0aW5ncyA9IHNlcnZlci51aVNldHRpbmdzKCk7XG4gICAgY29uc3QgcGF5bG9hZCA9IHtcbiAgICAgIGFwcDogYXBwLFxuICAgICAgbmF2OiB1aUV4cG9ydHMubmF2TGlua3MuaW5PcmRlcixcbiAgICAgIHZlcnNpb246IGtiblNlcnZlci52ZXJzaW9uLFxuICAgICAgYnVpbGROdW06IGNvbmZpZy5nZXQoJ3BrZy5idWlsZE51bScpLFxuICAgICAgYnVpbGRTaGE6IGNvbmZpZy5nZXQoJ3BrZy5idWlsZFNoYScpLFxuICAgICAgYmFzZVBhdGg6IGNvbmZpZy5nZXQoJ3NlcnZlci5iYXNlUGF0aCcpLFxuICAgICAgc2VydmVyTmFtZTogY29uZmlnLmdldCgnc2VydmVyLm5hbWUnKSxcbiAgICAgIHVpU2V0dGluZ3M6IHtcbiAgICAgICAgZGVmYXVsdHM6IGF3YWl0IHVpU2V0dGluZ3MuZ2V0RGVmYXVsdHMoKSxcbiAgICAgICAgdXNlcjogaXNFbGFzdGljc2VhcmNoUGx1Z2luUmVkID8ge30gOiBhd2FpdCB1aVNldHRpbmdzLmdldFVzZXJQcm92aWRlZCgpXG4gICAgICB9LFxuICAgICAgdmFyczogZGVmYXVsdHMoYXBwLmdldEluamVjdGVkVmFycygpIHx8IHt9LCB1aUV4cG9ydHMuZGVmYXVsdEluamVjdGVkVmFycyksXG4gICAgfTtcblxuICAgIHJldHVybiB0aGlzLnZpZXcoYXBwLnRlbXBsYXRlTmFtZSwge1xuICAgICAgYXBwOiBhcHAsXG4gICAgICBsb2FkaW5nR2lmOiBsb2FkaW5nR2lmLFxuICAgICAga2liYW5hUGF5bG9hZDogcGF5bG9hZCxcbiAgICAgIGJ1bmRsZVBhdGg6IGAke2NvbmZpZy5nZXQoJ3NlcnZlci5iYXNlUGF0aCcpfS9idW5kbGVzYCxcbiAgICB9KTtcbiAgfSk7XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/ui/index.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/src/ui/index.js",
      "sourcesContent": [
        "import { format as formatUrl } from 'url';\nimport { readFileSync as readFile } from 'fs';\nimport { defaults } from 'lodash';\nimport Boom from 'boom';\nimport { resolve } from 'path';\nimport fromRoot from '../utils/from_root';\nimport UiExports from './ui_exports';\nimport UiBundle from './ui_bundle';\nimport UiBundleCollection from './ui_bundle_collection';\nimport UiBundlerEnv from './ui_bundler_env';\n\nexport default async (kbnServer, server, config) => {\n\n  const loadingGif = readFile(fromRoot('src/ui/public/loading.gif'), { encoding: 'base64'});\n\n  const uiExports = kbnServer.uiExports = new UiExports({\n    urlBasePath: config.get('server.basePath')\n  });\n\n  const bundlerEnv = new UiBundlerEnv(config.get('optimize.bundleDir'));\n  bundlerEnv.addContext('env', config.get('env.name'));\n  bundlerEnv.addContext('urlBasePath', config.get('server.basePath'));\n  bundlerEnv.addContext('sourceMaps', config.get('optimize.sourceMaps'));\n  bundlerEnv.addContext('kbnVersion', config.get('pkg.version'));\n  bundlerEnv.addContext('buildNum', config.get('pkg.buildNum'));\n  uiExports.addConsumer(bundlerEnv);\n\n  for (let plugin of kbnServer.plugins) {\n    uiExports.consumePlugin(plugin);\n  }\n\n  const bundles = kbnServer.bundles = new UiBundleCollection(bundlerEnv, config.get('optimize.bundleFilter'));\n\n  for (let app of uiExports.getAllApps()) {\n    bundles.addApp(app);\n  }\n\n  for (let gen of uiExports.getBundleProviders()) {\n    const bundle = await gen(UiBundle, bundlerEnv, uiExports.getAllApps(), kbnServer.plugins);\n    if (bundle) bundles.add(bundle);\n  }\n\n  // render all views from the ui/views directory\n  server.setupViews(resolve(__dirname, 'views'));\n  server.exposeStaticFile('/loading.gif', resolve(__dirname, 'public/loading.gif'));\n\n  server.route({\n    path: '/app/{id}',\n    method: 'GET',\n    handler: function (req, reply) {\n      const id = req.params.id;\n      const app = uiExports.apps.byId[id];\n      if (!app) return reply(Boom.notFound('Unknown app ' + id));\n\n      if (kbnServer.status.isGreen()) {\n        return reply.renderApp(app);\n      } else {\n        return reply.renderStatusPage();\n      }\n    }\n  });\n\n  server.decorate('reply', 'renderApp', async function (app) {\n    const isElasticsearchPluginRed = server.plugins.elasticsearch.status.state === 'red';\n    const uiSettings = server.uiSettings();\n    const payload = {\n      app: app,\n      nav: uiExports.navLinks.inOrder,\n      version: kbnServer.version,\n      buildNum: config.get('pkg.buildNum'),\n      buildSha: config.get('pkg.buildSha'),\n      basePath: config.get('server.basePath'),\n      serverName: config.get('server.name'),\n      uiSettings: {\n        defaults: await uiSettings.getDefaults(),\n        user: isElasticsearchPluginRed ? {} : await uiSettings.getUserProvided()\n      },\n      vars: defaults(app.getInjectedVars() || {}, uiExports.defaultInjectedVars),\n    };\n\n    return this.view(app.templateName, {\n      app: app,\n      loadingGif: loadingGif,\n      kibanaPayload: payload,\n      bundlePath: `${config.get('server.basePath')}/bundles`,\n    });\n  });\n};\n"
      ]
    },
    "mtime": 1467036622849
  },
  "{\"filename\":\"/home/vio/v3metrics/src/ui/ui_exports.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "minimatch",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "minimatch"
              }
            ]
          },
          {
            "source": "./ui_app_collection",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "UiAppCollection"
              }
            ]
          },
          {
            "source": "./ui_nav_link_collection",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "UiNavLinkCollection"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "async-to-generator",
        "to-consumable-array",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i]; return arr2; } else { return Array.from(arr); } }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _minimatch = require('minimatch');\n\nvar _minimatch2 = _interopRequireDefault(_minimatch);\n\nvar _ui_app_collection = require('./ui_app_collection');\n\nvar _ui_app_collection2 = _interopRequireDefault(_ui_app_collection);\n\nvar _ui_nav_link_collection = require('./ui_nav_link_collection');\n\nvar _ui_nav_link_collection2 = _interopRequireDefault(_ui_nav_link_collection);\n\nvar UiExports = (function () {\n  function UiExports(_ref) {\n    var urlBasePath = _ref.urlBasePath;\n\n    _classCallCheck(this, UiExports);\n\n    this.navLinks = new _ui_nav_link_collection2['default'](this);\n    this.apps = new _ui_app_collection2['default'](this);\n    this.aliases = {};\n    this.urlBasePath = urlBasePath;\n    this.exportConsumer = _lodash2['default'].memoize(this.exportConsumer);\n    this.consumers = [];\n    this.bundleProviders = [];\n    this.defaultInjectedVars = {};\n  }\n\n  _createClass(UiExports, [{\n    key: 'consumePlugin',\n    value: function consumePlugin(plugin) {\n      var _this = this;\n\n      plugin.apps = new _ui_app_collection2['default'](this);\n\n      var types = _lodash2['default'].keys(plugin.uiExportsSpecs);\n      if (!types) return false;\n\n      var unkown = _lodash2['default'].reject(types, this.exportConsumer, this);\n      if (unkown.length) {\n        throw new Error('unknown export types ' + unkown.join(', ') + ' in plugin ' + plugin.id);\n      }\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.consumers[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var consumer = _step.value;\n\n          consumer.consumePlugin && consumer.consumePlugin(plugin);\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator['return']) {\n            _iterator['return']();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      types.forEach(function (type) {\n        _this.exportConsumer(type)(plugin, plugin.uiExportsSpecs[type]);\n      });\n    }\n  }, {\n    key: 'addConsumer',\n    value: function addConsumer(consumer) {\n      this.consumers.push(consumer);\n    }\n  }, {\n    key: 'exportConsumer',\n    value: function exportConsumer(type) {\n      var _this2 = this;\n\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = this.consumers[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var consumer = _step2.value;\n\n          if (!consumer.exportConsumer) continue;\n          var fn = consumer.exportConsumer(type);\n          if (fn) return fn;\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2['return']) {\n            _iterator2['return']();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      switch (type) {\n        case 'app':\n        case 'apps':\n          return function (plugin, specs) {\n            var id = plugin.id;\n            var _iteratorNormalCompletion3 = true;\n            var _didIteratorError3 = false;\n            var _iteratorError3 = undefined;\n\n            try {\n              var _loop = function () {\n                var spec = _step3.value;\n\n                var app = _this2.apps['new'](_lodash2['default'].defaults({}, spec, {\n                  id: plugin.id,\n                  urlBasePath: _this2.urlBasePath\n                }));\n\n                plugin.extendInit(function (server, options) {\n                  // eslint-disable-line no-loop-func\n                  var wrapped = app.getInjectedVars;\n                  app.getInjectedVars = function () {\n                    return wrapped.call(plugin, server, options);\n                  };\n                });\n\n                plugin.apps.add(app);\n              };\n\n              for (var _iterator3 = [].concat(specs || [])[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n                _loop();\n              }\n            } catch (err) {\n              _didIteratorError3 = true;\n              _iteratorError3 = err;\n            } finally {\n              try {\n                if (!_iteratorNormalCompletion3 && _iterator3['return']) {\n                  _iterator3['return']();\n                }\n              } finally {\n                if (_didIteratorError3) {\n                  throw _iteratorError3;\n                }\n              }\n            }\n          };\n\n        case 'link':\n        case 'links':\n          return function (plugin, spec) {\n            var _iteratorNormalCompletion4 = true;\n            var _didIteratorError4 = false;\n            var _iteratorError4 = undefined;\n\n            try {\n              for (var _iterator4 = [].concat(spec || [])[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n                var _spec = _step4.value;\n\n                _this2.navLinks['new'](_spec);\n              }\n            } catch (err) {\n              _didIteratorError4 = true;\n              _iteratorError4 = err;\n            } finally {\n              try {\n                if (!_iteratorNormalCompletion4 && _iterator4['return']) {\n                  _iterator4['return']();\n                }\n              } finally {\n                if (_didIteratorError4) {\n                  throw _iteratorError4;\n                }\n              }\n            }\n          };\n\n        case 'visTypes':\n        case 'fieldFormats':\n        case 'spyModes':\n        case 'chromeNavControls':\n        case 'navbarExtensions':\n        case 'managementSections':\n        case 'docViews':\n        case 'hacks':\n          return function (plugin, spec) {\n            _this2.aliases[type] = _lodash2['default'].union(_this2.aliases[type] || [], spec);\n          };\n\n        case 'bundle':\n          return function (plugin, spec) {\n            _this2.bundleProviders.push(spec);\n          };\n\n        case 'aliases':\n          return function (plugin, specs) {\n            _lodash2['default'].forOwn(specs, function (spec, adhocType) {\n              _this2.aliases[adhocType] = _lodash2['default'].union(_this2.aliases[adhocType] || [], spec);\n            });\n          };\n\n        case 'injectDefaultVars':\n          return function (plugin, injector) {\n            plugin.extendInit(_asyncToGenerator(function* (server, options) {\n              _lodash2['default'].merge(_this2.defaultInjectedVars, (yield injector.call(plugin, server, options)));\n            }));\n          };\n      }\n    }\n  }, {\n    key: 'find',\n    value: function find(patterns) {\n      var aliases = this.aliases;\n      var names = _lodash2['default'].keys(aliases);\n      var matcher = _lodash2['default'].partialRight(_minimatch2['default'].filter, { matchBase: true });\n\n      return _lodash2['default'].chain(patterns).map(function (pattern) {\n        return names.filter(matcher(pattern));\n      }).flattenDeep().reduce(function (found, name) {\n        return found.concat(aliases[name]);\n      }, []).value();\n    }\n  }, {\n    key: 'getAllApps',\n    value: function getAllApps() {\n      var _ref2;\n\n      var apps = this.apps;\n\n      return (_ref2 = [].concat(_toConsumableArray(apps))).concat.apply(_ref2, _toConsumableArray(apps.hidden));\n    }\n  }, {\n    key: 'getApp',\n    value: function getApp(id) {\n      return this.apps.byId[id];\n    }\n  }, {\n    key: 'getHiddenApp',\n    value: function getHiddenApp(id) {\n      return this.apps.hidden.byId[id];\n    }\n  }, {\n    key: 'getBundleProviders',\n    value: function getBundleProviders() {\n      return this.bundleProviders;\n    }\n  }]);\n\n  return UiExports;\n})();\n\nmodule.exports = UiExports;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3VpL3VpX2V4cG9ydHMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O3NCQUFjLFFBQVE7Ozs7eUJBQ0EsV0FBVzs7OztpQ0FFTCxxQkFBcUI7Ozs7c0NBQ2pCLDBCQUEwQjs7OztJQUVwRCxTQUFTO0FBQ0YsV0FEUCxTQUFTLENBQ0QsSUFBZSxFQUFFO1FBQWYsV0FBVyxHQUFiLElBQWUsQ0FBYixXQUFXOzswQkFEckIsU0FBUzs7QUFFWCxRQUFJLENBQUMsUUFBUSxHQUFHLHdDQUF3QixJQUFJLENBQUMsQ0FBQztBQUM5QyxRQUFJLENBQUMsSUFBSSxHQUFHLG1DQUFvQixJQUFJLENBQUMsQ0FBQztBQUN0QyxRQUFJLENBQUMsT0FBTyxHQUFHLEVBQUUsQ0FBQztBQUNsQixRQUFJLENBQUMsV0FBVyxHQUFHLFdBQVcsQ0FBQztBQUMvQixRQUFJLENBQUMsY0FBYyxHQUFHLG9CQUFFLE9BQU8sQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7QUFDckQsUUFBSSxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUM7QUFDcEIsUUFBSSxDQUFDLGVBQWUsR0FBRyxFQUFFLENBQUM7QUFDMUIsUUFBSSxDQUFDLG1CQUFtQixHQUFHLEVBQUUsQ0FBQztHQUMvQjs7ZUFWRyxTQUFTOztXQVlBLHVCQUFDLE1BQU0sRUFBRTs7O0FBQ3BCLFlBQU0sQ0FBQyxJQUFJLEdBQUcsbUNBQW9CLElBQUksQ0FBQyxDQUFDOztBQUV4QyxVQUFNLEtBQUssR0FBRyxvQkFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDO0FBQzVDLFVBQUksQ0FBQyxLQUFLLEVBQUUsT0FBTyxLQUFLLENBQUM7O0FBRXpCLFVBQU0sTUFBTSxHQUFHLG9CQUFFLE1BQU0sQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUMsQ0FBQztBQUMxRCxVQUFJLE1BQU0sQ0FBQyxNQUFNLEVBQUU7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QUUsRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQzs7QUFFdEUsYUFBTyxvQkFBRSxLQUFLLENBQUMsUUFBUSxDQUFDLENBQ3ZCLEdBQUcsQ0FBQyxVQUFVLE9BQU8sRUFBRTtBQUN0QixlQUFPLEtBQUssQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7T0FDdkMsQ0FBQyxDQUNELFdBQVcsRUFBRSxDQUNiLE1BQU0sQ0FBQyxVQUFVLEtBQUssRUFBRSxJQUFJLEVBQUU7QUFDN0IsZUFBTyxLQUFLLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO09BQ3BDLEVBQUUsRUFBRSxDQUFDLENBQ0wsS0FBSyxFQUFFLENBQUM7S0FDVjs7O1dBRVMsc0JBQUc7OztVQUNMLElBQUksR0FBSyxJQUFJLENBQWIsSUFBSTs7QUFDVixhQUFPLHNDQUFJLElBQUksSUFBRSxNQUFNLE1BQUEsMkJBQUksSUFBSSxDQUFDLE1BQU0sRUFBQyxDQUFDO0tBQ3pDOzs7V0FFSyxnQkFBQyxFQUFFLEVBQUU7QUFDVCxhQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0tBQzNCOzs7V0FFVyxzQkFBQyxFQUFFLEVBQUU7QUFDZixhQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztLQUNsQzs7O1dBRWlCLDhCQUFHO0FBQ25CLGFBQU8sSUFBSSxDQUFDLGVBQWUsQ0FBQztLQUM3Qjs7O1NBeElHLFNBQVM7OztBQTJJZixNQUFNLENBQUMsT0FBTyxHQUFHLFNBQVMsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy91aS91aV9leHBvcnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBtaW5pbWF0Y2ggZnJvbSAnbWluaW1hdGNoJztcblxuaW1wb3J0IFVpQXBwQ29sbGVjdGlvbiBmcm9tICcuL3VpX2FwcF9jb2xsZWN0aW9uJztcbmltcG9ydCBVaU5hdkxpbmtDb2xsZWN0aW9uIGZyb20gJy4vdWlfbmF2X2xpbmtfY29sbGVjdGlvbic7XG5cbmNsYXNzIFVpRXhwb3J0cyB7XG4gIGNvbnN0cnVjdG9yKHsgdXJsQmFzZVBhdGggfSkge1xuICAgIHRoaXMubmF2TGlua3MgPSBuZXcgVWlOYXZMaW5rQ29sbGVjdGlvbih0aGlzKTtcbiAgICB0aGlzLmFwcHMgPSBuZXcgVWlBcHBDb2xsZWN0aW9uKHRoaXMpO1xuICAgIHRoaXMuYWxpYXNlcyA9IHt9O1xuICAgIHRoaXMudXJsQmFzZVBhdGggPSB1cmxCYXNlUGF0aDtcbiAgICB0aGlzLmV4cG9ydENvbnN1bWVyID0gXy5tZW1vaXplKHRoaXMuZXhwb3J0Q29uc3VtZXIpO1xuICAgIHRoaXMuY29uc3VtZXJzID0gW107XG4gICAgdGhpcy5idW5kbGVQcm92aWRlcnMgPSBbXTtcbiAgICB0aGlzLmRlZmF1bHRJbmplY3RlZFZhcnMgPSB7fTtcbiAgfVxuXG4gIGNvbnN1bWVQbHVnaW4ocGx1Z2luKSB7XG4gICAgcGx1Z2luLmFwcHMgPSBuZXcgVWlBcHBDb2xsZWN0aW9uKHRoaXMpO1xuXG4gICAgY29uc3QgdHlwZXMgPSBfLmtleXMocGx1Z2luLnVpRXhwb3J0c1NwZWNzKTtcbiAgICBpZiAoIXR5cGVzKSByZXR1cm4gZmFsc2U7XG5cbiAgICBjb25zdCB1bmtvd24gPSBfLnJlamVjdCh0eXBlcywgdGhpcy5leHBvcnRDb25zdW1lciwgdGhpcyk7XG4gICAgaWYgKHVua293bi5sZW5ndGgpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigndW5rbm93biBleHBvcnQgdHlwZXMgJyArIHVua293bi5qb2luKCcsICcpICsgJyBpbiBwbHVnaW4gJyArIHBsdWdpbi5pZCk7XG4gICAgfVxuXG4gICAgZm9yIChsZXQgY29uc3VtZXIgb2YgdGhpcy5jb25zdW1lcnMpIHtcbiAgICAgIGNvbnN1bWVyLmNvbnN1bWVQbHVnaW4gJiYgY29uc3VtZXIuY29uc3VtZVBsdWdpbihwbHVnaW4pO1xuICAgIH1cblxuICAgIHR5cGVzLmZvckVhY2goKHR5cGUpID0+IHtcbiAgICAgIHRoaXMuZXhwb3J0Q29uc3VtZXIodHlwZSkocGx1Z2luLCBwbHVnaW4udWlFeHBvcnRzU3BlY3NbdHlwZV0pO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkQ29uc3VtZXIoY29uc3VtZXIpIHtcbiAgICB0aGlzLmNvbnN1bWVycy5wdXNoKGNvbnN1bWVyKTtcbiAgfVxuXG4gIGV4cG9ydENvbnN1bWVyKHR5cGUpIHtcbiAgICBmb3IgKGxldCBjb25zdW1lciBvZiB0aGlzLmNvbnN1bWVycykge1xuICAgICAgaWYgKCFjb25zdW1lci5leHBvcnRDb25zdW1lcikgY29udGludWU7XG4gICAgICBjb25zdCBmbiA9IGNvbnN1bWVyLmV4cG9ydENvbnN1bWVyKHR5cGUpO1xuICAgICAgaWYgKGZuKSByZXR1cm4gZm47XG4gICAgfVxuXG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlICdhcHAnOlxuICAgICAgY2FzZSAnYXBwcyc6XG4gICAgICAgIHJldHVybiAocGx1Z2luLCBzcGVjcykgPT4ge1xuICAgICAgICAgIGNvbnN0IGlkID0gcGx1Z2luLmlkO1xuICAgICAgICAgIGZvciAobGV0IHNwZWMgb2YgW10uY29uY2F0KHNwZWNzIHx8IFtdKSkge1xuXG4gICAgICAgICAgICBjb25zdCBhcHAgPSB0aGlzLmFwcHMubmV3KF8uZGVmYXVsdHMoe30sIHNwZWMsIHtcbiAgICAgICAgICAgICAgaWQ6IHBsdWdpbi5pZCxcbiAgICAgICAgICAgICAgdXJsQmFzZVBhdGg6IHRoaXMudXJsQmFzZVBhdGhcbiAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgcGx1Z2luLmV4dGVuZEluaXQoKHNlcnZlciwgb3B0aW9ucykgPT4geyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWxvb3AtZnVuY1xuICAgICAgICAgICAgICBjb25zdCB3cmFwcGVkID0gYXBwLmdldEluamVjdGVkVmFycztcbiAgICAgICAgICAgICAgYXBwLmdldEluamVjdGVkVmFycyA9ICgpID0+IHdyYXBwZWQuY2FsbChwbHVnaW4sIHNlcnZlciwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcGx1Z2luLmFwcHMuYWRkKGFwcCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICBjYXNlICdsaW5rJzpcbiAgICAgIGNhc2UgJ2xpbmtzJzpcbiAgICAgICAgcmV0dXJuIChwbHVnaW4sIHNwZWMpID0+IHtcbiAgICAgICAgICBmb3IgKGNvbnN0IHNwZWMgb2YgW10uY29uY2F0KHNwZWMgfHwgW10pKSB7XG4gICAgICAgICAgICB0aGlzLm5hdkxpbmtzLm5ldyhzcGVjKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgIGNhc2UgJ3Zpc1R5cGVzJzpcbiAgICAgIGNhc2UgJ2ZpZWxkRm9ybWF0cyc6XG4gICAgICBjYXNlICdzcHlNb2Rlcyc6XG4gICAgICBjYXNlICdjaHJvbWVOYXZDb250cm9scyc6XG4gICAgICBjYXNlICduYXZiYXJFeHRlbnNpb25zJzpcbiAgICAgIGNhc2UgJ21hbmFnZW1lbnRTZWN0aW9ucyc6XG4gICAgICBjYXNlICdkb2NWaWV3cyc6XG4gICAgICBjYXNlICdoYWNrcyc6XG4gICAgICAgIHJldHVybiAocGx1Z2luLCBzcGVjKSA9PiB7XG4gICAgICAgICAgdGhpcy5hbGlhc2VzW3R5cGVdID0gXy51bmlvbih0aGlzLmFsaWFzZXNbdHlwZV0gfHwgW10sIHNwZWMpO1xuICAgICAgICB9O1xuXG4gICAgICBjYXNlICdidW5kbGUnOlxuICAgICAgICByZXR1cm4gKHBsdWdpbiwgc3BlYykgPT4ge1xuICAgICAgICAgIHRoaXMuYnVuZGxlUHJvdmlkZXJzLnB1c2goc3BlYyk7XG4gICAgICAgIH07XG5cbiAgICAgIGNhc2UgJ2FsaWFzZXMnOlxuICAgICAgICByZXR1cm4gKHBsdWdpbiwgc3BlY3MpID0+IHtcbiAgICAgICAgICBfLmZvck93bihzcGVjcywgKHNwZWMsIGFkaG9jVHlwZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5hbGlhc2VzW2FkaG9jVHlwZV0gPSBfLnVuaW9uKHRoaXMuYWxpYXNlc1thZGhvY1R5cGVdIHx8IFtdLCBzcGVjKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgY2FzZSAnaW5qZWN0RGVmYXVsdFZhcnMnOlxuICAgICAgICByZXR1cm4gKHBsdWdpbiwgaW5qZWN0b3IpID0+IHtcbiAgICAgICAgICBwbHVnaW4uZXh0ZW5kSW5pdChhc3luYyAoc2VydmVyLCBvcHRpb25zKSA9PiB7XG4gICAgICAgICAgICBfLm1lcmdlKHRoaXMuZGVmYXVsdEluamVjdGVkVmFycywgYXdhaXQgaW5qZWN0b3IuY2FsbChwbHVnaW4sIHNlcnZlciwgb3B0aW9ucykpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIGZpbmQocGF0dGVybnMpIHtcbiAgICBjb25zdCBhbGlhc2VzID0gdGhpcy5hbGlhc2VzO1xuICAgIGNvbnN0IG5hbWVzID0gXy5rZXlzKGFsaWFzZXMpO1xuICAgIGNvbnN0IG1hdGNoZXIgPSBfLnBhcnRpYWxSaWdodChtaW5pbWF0Y2guZmlsdGVyLCB7IG1hdGNoQmFzZTogdHJ1ZSB9KTtcblxuICAgIHJldHVybiBfLmNoYWluKHBhdHRlcm5zKVxuICAgIC5tYXAoZnVuY3Rpb24gKHBhdHRlcm4pIHtcbiAgICAgIHJldHVybiBuYW1lcy5maWx0ZXIobWF0Y2hlcihwYXR0ZXJuKSk7XG4gICAgfSlcbiAgICAuZmxhdHRlbkRlZXAoKVxuICAgIC5yZWR1Y2UoZnVuY3Rpb24gKGZvdW5kLCBuYW1lKSB7XG4gICAgICByZXR1cm4gZm91bmQuY29uY2F0KGFsaWFzZXNbbmFtZV0pO1xuICAgIH0sIFtdKVxuICAgIC52YWx1ZSgpO1xuICB9XG5cbiAgZ2V0QWxsQXBwcygpIHtcbiAgICBsZXQgeyBhcHBzIH0gPSB0aGlzO1xuICAgIHJldHVybiBbLi4uYXBwc10uY29uY2F0KC4uLmFwcHMuaGlkZGVuKTtcbiAgfVxuXG4gIGdldEFwcChpZCkge1xuICAgIHJldHVybiB0aGlzLmFwcHMuYnlJZFtpZF07XG4gIH1cblxuICBnZXRIaWRkZW5BcHAoaWQpIHtcbiAgICByZXR1cm4gdGhpcy5hcHBzLmhpZGRlbi5ieUlkW2lkXTtcbiAgfVxuXG4gIGdldEJ1bmRsZVByb3ZpZGVycygpIHtcbiAgICByZXR1cm4gdGhpcy5idW5kbGVQcm92aWRlcnM7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBVaUV4cG9ydHM7XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/ui/ui_exports.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/src/ui/ui_exports.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport minimatch from 'minimatch';\n\nimport UiAppCollection from './ui_app_collection';\nimport UiNavLinkCollection from './ui_nav_link_collection';\n\nclass UiExports {\n  constructor({ urlBasePath }) {\n    this.navLinks = new UiNavLinkCollection(this);\n    this.apps = new UiAppCollection(this);\n    this.aliases = {};\n    this.urlBasePath = urlBasePath;\n    this.exportConsumer = _.memoize(this.exportConsumer);\n    this.consumers = [];\n    this.bundleProviders = [];\n    this.defaultInjectedVars = {};\n  }\n\n  consumePlugin(plugin) {\n    plugin.apps = new UiAppCollection(this);\n\n    const types = _.keys(plugin.uiExportsSpecs);\n    if (!types) return false;\n\n    const unkown = _.reject(types, this.exportConsumer, this);\n    if (unkown.length) {\n      throw new Error('unknown export types ' + unkown.join(', ') + ' in plugin ' + plugin.id);\n    }\n\n    for (let consumer of this.consumers) {\n      consumer.consumePlugin && consumer.consumePlugin(plugin);\n    }\n\n    types.forEach((type) => {\n      this.exportConsumer(type)(plugin, plugin.uiExportsSpecs[type]);\n    });\n  }\n\n  addConsumer(consumer) {\n    this.consumers.push(consumer);\n  }\n\n  exportConsumer(type) {\n    for (let consumer of this.consumers) {\n      if (!consumer.exportConsumer) continue;\n      const fn = consumer.exportConsumer(type);\n      if (fn) return fn;\n    }\n\n    switch (type) {\n      case 'app':\n      case 'apps':\n        return (plugin, specs) => {\n          const id = plugin.id;\n          for (let spec of [].concat(specs || [])) {\n\n            const app = this.apps.new(_.defaults({}, spec, {\n              id: plugin.id,\n              urlBasePath: this.urlBasePath\n            }));\n\n            plugin.extendInit((server, options) => { // eslint-disable-line no-loop-func\n              const wrapped = app.getInjectedVars;\n              app.getInjectedVars = () => wrapped.call(plugin, server, options);\n            });\n\n            plugin.apps.add(app);\n          }\n        };\n\n      case 'link':\n      case 'links':\n        return (plugin, spec) => {\n          for (const spec of [].concat(spec || [])) {\n            this.navLinks.new(spec);\n          }\n        };\n\n      case 'visTypes':\n      case 'fieldFormats':\n      case 'spyModes':\n      case 'chromeNavControls':\n      case 'navbarExtensions':\n      case 'managementSections':\n      case 'docViews':\n      case 'hacks':\n        return (plugin, spec) => {\n          this.aliases[type] = _.union(this.aliases[type] || [], spec);\n        };\n\n      case 'bundle':\n        return (plugin, spec) => {\n          this.bundleProviders.push(spec);\n        };\n\n      case 'aliases':\n        return (plugin, specs) => {\n          _.forOwn(specs, (spec, adhocType) => {\n            this.aliases[adhocType] = _.union(this.aliases[adhocType] || [], spec);\n          });\n        };\n\n      case 'injectDefaultVars':\n        return (plugin, injector) => {\n          plugin.extendInit(async (server, options) => {\n            _.merge(this.defaultInjectedVars, await injector.call(plugin, server, options));\n          });\n        };\n    }\n  }\n\n  find(patterns) {\n    const aliases = this.aliases;\n    const names = _.keys(aliases);\n    const matcher = _.partialRight(minimatch.filter, { matchBase: true });\n\n    return _.chain(patterns)\n    .map(function (pattern) {\n      return names.filter(matcher(pattern));\n    })\n    .flattenDeep()\n    .reduce(function (found, name) {\n      return found.concat(aliases[name]);\n    }, [])\n    .value();\n  }\n\n  getAllApps() {\n    let { apps } = this;\n    return [...apps].concat(...apps.hidden);\n  }\n\n  getApp(id) {\n    return this.apps.byId[id];\n  }\n\n  getHiddenApp(id) {\n    return this.apps.hidden.byId[id];\n  }\n\n  getBundleProviders() {\n    return this.bundleProviders;\n  }\n}\n\nmodule.exports = UiExports;\n"
      ]
    },
    "mtime": 1467036622893
  },
  "{\"filename\":\"/home/vio/v3metrics/src/ui/ui_app_collection.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "./ui_app",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "UiApp"
              }
            ]
          },
          {
            "source": "../utils/collection",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Collection"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "get",
        "inherits",
        "create-class",
        "class-call-check",
        "to-consumable-array",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i]; return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _ui_app = require('./ui_app');\n\nvar _ui_app2 = _interopRequireDefault(_ui_app);\n\nvar _utilsCollection = require('../utils/collection');\n\nvar _utilsCollection2 = _interopRequireDefault(_utilsCollection);\n\nvar byIdCache = Symbol('byId');\n\nmodule.exports = (function (_Collection) {\n  _inherits(UiAppCollection, _Collection);\n\n  function UiAppCollection(uiExports, parent) {\n    _classCallCheck(this, UiAppCollection);\n\n    _get(Object.getPrototypeOf(UiAppCollection.prototype), 'constructor', this).call(this);\n\n    this.uiExports = uiExports;\n\n    if (!parent) {\n      this.claimedIds = [];\n      this.hidden = new UiAppCollection(uiExports, this);\n    } else {\n      this.claimedIds = parent.claimedIds;\n    }\n  }\n\n  _createClass(UiAppCollection, [{\n    key: 'new',\n    value: function _new(spec) {\n      if (this.hidden && spec.hidden) {\n        return this.hidden['new'](spec);\n      }\n\n      var app = new _ui_app2['default'](this.uiExports, spec);\n\n      if (_lodash2['default'].includes(this.claimedIds, app.id)) {\n        throw new Error('Unable to create two apps with the id ' + app.id + '.');\n      } else {\n        this.claimedIds.push(app.id);\n      }\n\n      this[byIdCache] = null;\n      this.add(app);\n      return app;\n    }\n  }, {\n    key: 'byId',\n    get: function get() {\n      return this[byIdCache] || (this[byIdCache] = _lodash2['default'].indexBy([].concat(_toConsumableArray(this)), 'id'));\n    }\n  }]);\n\n  return UiAppCollection;\n})(_utilsCollection2['default']);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3VpL3VpX2FwcF9jb2xsZWN0aW9uLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O3NCQUFjLFFBQVE7Ozs7c0JBQ0osVUFBVTs7OzsrQkFDTCxxQkFBcUI7Ozs7QUFFNUMsSUFBTSxTQUFTLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDOztBQUVqQyxNQUFNLENBQUMsT0FBTztZQUFTLGVBQWU7O0FBRXpCLFdBRlUsZUFBZSxDQUV4QixTQUFTLEVBQUUsTUFBTSxFQUFFOzBCQUZWLGVBQWU7O0FBR2xDLCtCQUhtQixlQUFlLDZDQUcxQjs7QUFFUixRQUFJLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQzs7QUFFM0IsUUFBSSxDQUFDLE1BQU0sRUFBRTtBQUNYLFVBQUksQ0FBQyxVQUFVLEdBQUcsRUFBRSxDQUFDO0FBQ3JCLFVBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxlQUFlLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQyxDQUFDO0tBQ3BELE1BQU07QUFDTCxVQUFJLENBQUMsVUFBVSxHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUM7S0FDckM7R0FFRjs7ZUFkb0IsZUFBZTs7V0FnQmpDLGNBQUMsSUFBSSxFQUFFO0FBQ1IsVUFBSSxJQUFJLENBQUMsTUFBTSxJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUU7QUFDOUIsZUFBTyxJQUFJLENBQUMsTUFBTSxPQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7T0FDOUI7O0FBRUQsVUFBTSxHQUFHLEdBQUcsd0JBQVUsSUFBSSxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsQ0FBQzs7QUFFNUMsVUFBSSxvQkFBRSxRQUFRLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFDdkMsY0FBTSxJQUFJLEtBQUssQ0FBQyx3Q0FBd0MsR0FBRyxHQUFHLENBQUMsRUFBRSxHQUFHLEdBQUcsQ0FBQyxDQUFDO09BQzFFLE1BQU07QUFDTCxZQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7T0FDOUI7O0FBRUQsVUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLElBQUksQ0FBQztBQUN2QixVQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ2QsYUFBTyxHQUFHLENBQUM7S0FDWjs7O1NBRU8sZUFBRztBQUNULGFBQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxvQkFBRSxPQUFPLDhCQUFLLElBQUksSUFBRyxJQUFJLENBQUMsQ0FBQSxBQUFDLENBQUM7S0FDMUU7OztTQXBDb0IsZUFBZTtnQ0FzQ3JDLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvdWkvdWlfYXBwX2NvbGxlY3Rpb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IFVpQXBwIGZyb20gJy4vdWlfYXBwJztcbmltcG9ydCBDb2xsZWN0aW9uIGZyb20gJy4uL3V0aWxzL2NvbGxlY3Rpb24nO1xuXG5jb25zdCBieUlkQ2FjaGUgPSBTeW1ib2woJ2J5SWQnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBjbGFzcyBVaUFwcENvbGxlY3Rpb24gZXh0ZW5kcyBDb2xsZWN0aW9uIHtcblxuICBjb25zdHJ1Y3Rvcih1aUV4cG9ydHMsIHBhcmVudCkge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLnVpRXhwb3J0cyA9IHVpRXhwb3J0cztcblxuICAgIGlmICghcGFyZW50KSB7XG4gICAgICB0aGlzLmNsYWltZWRJZHMgPSBbXTtcbiAgICAgIHRoaXMuaGlkZGVuID0gbmV3IFVpQXBwQ29sbGVjdGlvbih1aUV4cG9ydHMsIHRoaXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNsYWltZWRJZHMgPSBwYXJlbnQuY2xhaW1lZElkcztcbiAgICB9XG5cbiAgfVxuXG4gIG5ldyhzcGVjKSB7XG4gICAgaWYgKHRoaXMuaGlkZGVuICYmIHNwZWMuaGlkZGVuKSB7XG4gICAgICByZXR1cm4gdGhpcy5oaWRkZW4ubmV3KHNwZWMpO1xuICAgIH1cblxuICAgIGNvbnN0IGFwcCA9IG5ldyBVaUFwcCh0aGlzLnVpRXhwb3J0cywgc3BlYyk7XG5cbiAgICBpZiAoXy5pbmNsdWRlcyh0aGlzLmNsYWltZWRJZHMsIGFwcC5pZCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIGNyZWF0ZSB0d28gYXBwcyB3aXRoIHRoZSBpZCAnICsgYXBwLmlkICsgJy4nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jbGFpbWVkSWRzLnB1c2goYXBwLmlkKTtcbiAgICB9XG5cbiAgICB0aGlzW2J5SWRDYWNoZV0gPSBudWxsO1xuICAgIHRoaXMuYWRkKGFwcCk7XG4gICAgcmV0dXJuIGFwcDtcbiAgfVxuXG4gIGdldCBieUlkKCkge1xuICAgIHJldHVybiB0aGlzW2J5SWRDYWNoZV0gfHwgKHRoaXNbYnlJZENhY2hlXSA9IF8uaW5kZXhCeShbLi4udGhpc10sICdpZCcpKTtcbiAgfVxuXG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/ui/ui_app_collection.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;;;;;sBAAc,QAAQ;;;;sBACJ,UAAU;;;;+BACL,qBAAqB;;;;AAE5C,IAAM,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC;;AAEjC,MAAM,CAAC,OAAO;YAAS,eAAe;;AAEzB,WAFU,eAAe,CAExB,SAAS,EAAE,MAAM,EAAE;0BAFV,eAAe;;AAGlC,+BAHmB,eAAe,6CAG1B;;AAER,QAAI,CAAC,SAAS,GAAG,SAAS,CAAC;;AAE3B,QAAI,CAAC,MAAM,EAAE;AACX,UAAI,CAAC,UAAU,GAAG,EAAE,CAAC;AACrB,UAAI,CAAC,MAAM,GAAG,IAAI,eAAe,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;KACpD,MAAM;AACL,UAAI,CAAC,UAAU,GAAG,MAAM,CAAC,UAAU,CAAC;KACrC;GAEF;;eAdoB,eAAe;;WAgBjC,cAAC,IAAI,EAAE;AACR,UAAI,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,EAAE;AAC9B,eAAO,IAAI,CAAC,MAAM,OAAI,CAAC,IAAI,CAAC,CAAC;OAC9B;;AAED,UAAM,GAAG,GAAG,wBAAU,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;;AAE5C,UAAI,oBAAE,QAAQ,CAAC,IAAI,CAAC,UAAU,EAAE,GAAG,CAAC,EAAE,CAAC,EAAE;AACvC,cAAM,IAAI,KAAK,CAAC,wCAAwC,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,CAAC;OAC1E,MAAM;AACL,YAAI,CAAC,UAAU,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;OAC9B;;AAED,UAAI,CAAC,SAAS,CAAC,GAAG,IAAI,CAAC;AACvB,UAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;AACd,aAAO,GAAG,CAAC;KACZ;;;SAEO,eAAG;AACT,aAAO,IAAI,CAAC,SAAS,CAAC,KAAK,IAAI,CAAC,SAAS,CAAC,GAAG,oBAAE,OAAO,8BAAK,IAAI,IAAG,IAAI,CAAC,CAAA,AAAC,CAAC;KAC1E;;;SApCoB,eAAe;gCAsCrC,CAAC",
      "file": "/home/vio/v3metrics/src/ui/ui_app_collection.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport UiApp from './ui_app';\nimport Collection from '../utils/collection';\n\nconst byIdCache = Symbol('byId');\n\nmodule.exports = class UiAppCollection extends Collection {\n\n  constructor(uiExports, parent) {\n    super();\n\n    this.uiExports = uiExports;\n\n    if (!parent) {\n      this.claimedIds = [];\n      this.hidden = new UiAppCollection(uiExports, this);\n    } else {\n      this.claimedIds = parent.claimedIds;\n    }\n\n  }\n\n  new(spec) {\n    if (this.hidden && spec.hidden) {\n      return this.hidden.new(spec);\n    }\n\n    const app = new UiApp(this.uiExports, spec);\n\n    if (_.includes(this.claimedIds, app.id)) {\n      throw new Error('Unable to create two apps with the id ' + app.id + '.');\n    } else {\n      this.claimedIds.push(app.id);\n    }\n\n    this[byIdCache] = null;\n    this.add(app);\n    return app;\n  }\n\n  get byId() {\n    return this[byIdCache] || (this[byIdCache] = _.indexBy([...this], 'id'));\n  }\n\n};\n"
      ]
    },
    "mtime": 1467036622893
  },
  "{\"filename\":\"/home/vio/v3metrics/src/ui/ui_app.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "chain",
              "get",
              "noop",
              "once",
              "pick"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "chain",
                "local": "chain"
              },
              {
                "kind": "named",
                "imported": "get",
                "local": "get"
              },
              {
                "kind": "named",
                "imported": "noop",
                "local": "noop"
              },
              {
                "kind": "named",
                "imported": "once",
                "local": "once"
              },
              {
                "kind": "named",
                "imported": "pick",
                "local": "pick"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar UiApp = (function () {\n  function UiApp(uiExports, spec) {\n    _classCallCheck(this, UiApp);\n\n    this.uiExports = uiExports;\n    this.spec = spec || {};\n\n    this.id = this.spec.id;\n    if (!this.id) {\n      throw new Error('Every app must specify it\\'s id');\n    }\n\n    this.main = this.spec.main;\n    this.title = this.spec.title;\n    this.description = this.spec.description;\n    this.icon = this.spec.icon;\n    this.hidden = !!this.spec.hidden;\n    this.listed = this.spec.listed == null ? !this.hidden : this.spec.listed;\n    this.templateName = this.spec.templateName || 'ui_app';\n\n    if (!this.hidden) {\n      // any non-hidden app has a url, so it gets a \"navLink\"\n      this.navLink = this.uiExports.navLinks['new']({\n        title: this.title,\n        description: this.description,\n        icon: this.icon,\n        url: this.spec.url || '/app/' + this.id\n      });\n\n      if (!this.listed) {\n        // unlisted apps remove their navLinks from the uiExports collection though\n        this.uiExports.navLinks['delete'](this.navLink);\n      }\n    }\n\n    if (this.spec.autoload) {\n      console.warn('\"autoload\" (used by ' + this.id + ' app) is no longer a valid app configuration directive.' + 'Use the \\`ui/autoload/*\\` modules instead.');\n    }\n\n    // once this resolves, no reason to run it again\n    this.getModules = (0, _lodash.once)(this.getModules);\n\n    // variables that are injected into the browser, must serialize to JSON\n    this.getInjectedVars = this.spec.injectVars || _lodash.noop;\n  }\n\n  _createClass(UiApp, [{\n    key: 'getModules',\n    value: function getModules() {\n      return (0, _lodash.chain)([this.uiExports.find((0, _lodash.get)(this, 'spec.uses', [])), this.uiExports.find(['chromeNavControls', 'hacks'])]).flatten().uniq().unshift(this.main).value();\n    }\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      return (0, _lodash.pick)(this, ['id', 'title', 'description', 'icon', 'main', 'navLink']);\n    }\n  }]);\n\n  return UiApp;\n})();\n\nmodule.exports = UiApp;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3VpL3VpX2FwcC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7OztzQkFBNkMsUUFBUTs7OztJQUcvQyxLQUFLO0FBQ0UsV0FEUCxLQUFLLENBQ0csU0FBUyxFQUFFLElBQUksRUFBRTswQkFEekIsS0FBSzs7QUFFUCxRQUFJLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQztBQUMzQixRQUFJLENBQUMsSUFBSSxHQUFHLElBQUksSUFBSSxFQUFFLENBQUM7O0FBRXZCLFFBQUksQ0FBQyxFQUFFLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUM7QUFDdkIsUUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUU7QUFDWixZQUFNLElBQUksS0FBSyxDQUFDLGlDQUFpQyxDQUFDLENBQUM7S0FDcEQ7O0FBRUQsUUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQztBQUMzQixRQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO0FBQzdCLFFBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUM7QUFDekMsUUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQztBQUMzQixRQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQztBQUNqQyxRQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxJQUFJLElBQUksR0FBRyxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUM7QUFDekUsUUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksSUFBSSxRQUFRLENBQUM7O0FBRXZELFFBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFOztBQUVoQixVQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxPQUFJLENBQUM7QUFDekMsYUFBSyxFQUFFLElBQUksQ0FBQyxLQUFLO0FBQ2pCLG1CQUFXLEVBQUUsSUFBSSxDQUFDLFdBQVc7QUFDN0IsWUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJO0FBQ2YsV0FBRyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxjQUFZLElBQUksQ0FBQyxFQUFFLEFBQUU7T0FDeEMsQ0FBQyxDQUFDOztBQUVILFVBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFOztBQUVoQixZQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsVUFBTyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztPQUM5QztLQUNGOztBQUVELFFBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUU7QUFDdEIsYUFBTyxDQUFDLElBQUksQ0FDVix5QkFBdUIsSUFBSSxDQUFDLEVBQUUsK0RBQzlCLDRDQUE0QyxDQUM3QyxDQUFDO0tBQ0g7OztBQUdELFFBQUksQ0FBQyxVQUFVLEdBQUcsa0JBQUssSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDOzs7QUFHeEMsUUFBSSxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsZ0JBQVEsQ0FBQztHQUNyRDs7ZUE3Q0csS0FBSzs7V0ErQ0Msc0JBQUc7QUFDWCxhQUFPLG1CQUFNLENBQ1gsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsaUJBQUksSUFBSSxFQUFFLFdBQVcsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUMvQyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLG1CQUFtQixFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQ3BELENBQUMsQ0FDRCxPQUFPLEVBQUUsQ0FDVCxJQUFJLEVBQUUsQ0FDTixPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUNsQixLQUFLLEVBQUUsQ0FBQztLQUNWOzs7V0FFSyxrQkFBRztBQUNQLGFBQU8sa0JBQUssSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxTQUFTLENBQUMsQ0FBQyxDQUFDO0tBQzlFOzs7U0E1REcsS0FBSzs7O0FBK0RYLE1BQU0sQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3VpL3VpX2FwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNoYWluLCBnZXQsIG5vb3AsIG9uY2UsIHBpY2sgfSBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcblxuY2xhc3MgVWlBcHAge1xuICBjb25zdHJ1Y3Rvcih1aUV4cG9ydHMsIHNwZWMpIHtcbiAgICB0aGlzLnVpRXhwb3J0cyA9IHVpRXhwb3J0cztcbiAgICB0aGlzLnNwZWMgPSBzcGVjIHx8IHt9O1xuXG4gICAgdGhpcy5pZCA9IHRoaXMuc3BlYy5pZDtcbiAgICBpZiAoIXRoaXMuaWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRXZlcnkgYXBwIG11c3Qgc3BlY2lmeSBpdFxcJ3MgaWQnKTtcbiAgICB9XG5cbiAgICB0aGlzLm1haW4gPSB0aGlzLnNwZWMubWFpbjtcbiAgICB0aGlzLnRpdGxlID0gdGhpcy5zcGVjLnRpdGxlO1xuICAgIHRoaXMuZGVzY3JpcHRpb24gPSB0aGlzLnNwZWMuZGVzY3JpcHRpb247XG4gICAgdGhpcy5pY29uID0gdGhpcy5zcGVjLmljb247XG4gICAgdGhpcy5oaWRkZW4gPSAhIXRoaXMuc3BlYy5oaWRkZW47XG4gICAgdGhpcy5saXN0ZWQgPSB0aGlzLnNwZWMubGlzdGVkID09IG51bGwgPyAhdGhpcy5oaWRkZW4gOiB0aGlzLnNwZWMubGlzdGVkO1xuICAgIHRoaXMudGVtcGxhdGVOYW1lID0gdGhpcy5zcGVjLnRlbXBsYXRlTmFtZSB8fCAndWlfYXBwJztcblxuICAgIGlmICghdGhpcy5oaWRkZW4pIHtcbiAgICAgIC8vIGFueSBub24taGlkZGVuIGFwcCBoYXMgYSB1cmwsIHNvIGl0IGdldHMgYSBcIm5hdkxpbmtcIlxuICAgICAgdGhpcy5uYXZMaW5rID0gdGhpcy51aUV4cG9ydHMubmF2TGlua3MubmV3KHtcbiAgICAgICAgdGl0bGU6IHRoaXMudGl0bGUsXG4gICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLmRlc2NyaXB0aW9uLFxuICAgICAgICBpY29uOiB0aGlzLmljb24sXG4gICAgICAgIHVybDogdGhpcy5zcGVjLnVybCB8fCBgL2FwcC8ke3RoaXMuaWR9YFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghdGhpcy5saXN0ZWQpIHtcbiAgICAgICAgLy8gdW5saXN0ZWQgYXBwcyByZW1vdmUgdGhlaXIgbmF2TGlua3MgZnJvbSB0aGUgdWlFeHBvcnRzIGNvbGxlY3Rpb24gdGhvdWdoXG4gICAgICAgIHRoaXMudWlFeHBvcnRzLm5hdkxpbmtzLmRlbGV0ZSh0aGlzLm5hdkxpbmspO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLnNwZWMuYXV0b2xvYWQpIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgYFwiYXV0b2xvYWRcIiAodXNlZCBieSAke3RoaXMuaWR9IGFwcCkgaXMgbm8gbG9uZ2VyIGEgdmFsaWQgYXBwIGNvbmZpZ3VyYXRpb24gZGlyZWN0aXZlLmAgK1xuICAgICAgICAnVXNlIHRoZSBcXGB1aS9hdXRvbG9hZC8qXFxgIG1vZHVsZXMgaW5zdGVhZC4nXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIG9uY2UgdGhpcyByZXNvbHZlcywgbm8gcmVhc29uIHRvIHJ1biBpdCBhZ2FpblxuICAgIHRoaXMuZ2V0TW9kdWxlcyA9IG9uY2UodGhpcy5nZXRNb2R1bGVzKTtcblxuICAgIC8vIHZhcmlhYmxlcyB0aGF0IGFyZSBpbmplY3RlZCBpbnRvIHRoZSBicm93c2VyLCBtdXN0IHNlcmlhbGl6ZSB0byBKU09OXG4gICAgdGhpcy5nZXRJbmplY3RlZFZhcnMgPSB0aGlzLnNwZWMuaW5qZWN0VmFycyB8fCBub29wO1xuICB9XG5cbiAgZ2V0TW9kdWxlcygpIHtcbiAgICByZXR1cm4gY2hhaW4oW1xuICAgICAgdGhpcy51aUV4cG9ydHMuZmluZChnZXQodGhpcywgJ3NwZWMudXNlcycsIFtdKSksXG4gICAgICB0aGlzLnVpRXhwb3J0cy5maW5kKFsnY2hyb21lTmF2Q29udHJvbHMnLCAnaGFja3MnXSksXG4gICAgXSlcbiAgICAuZmxhdHRlbigpXG4gICAgLnVuaXEoKVxuICAgIC51bnNoaWZ0KHRoaXMubWFpbilcbiAgICAudmFsdWUoKTtcbiAgfVxuXG4gIHRvSlNPTigpIHtcbiAgICByZXR1cm4gcGljayh0aGlzLCBbJ2lkJywgJ3RpdGxlJywgJ2Rlc2NyaXB0aW9uJywgJ2ljb24nLCAnbWFpbicsICduYXZMaW5rJ10pO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gVWlBcHA7XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/ui/ui_app.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;sBAA6C,QAAQ;;;;IAG/C,KAAK;AACE,WADP,KAAK,CACG,SAAS,EAAE,IAAI,EAAE;0BADzB,KAAK;;AAEP,QAAI,CAAC,SAAS,GAAG,SAAS,CAAC;AAC3B,QAAI,CAAC,IAAI,GAAG,IAAI,IAAI,EAAE,CAAC;;AAEvB,QAAI,CAAC,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC;AACvB,QAAI,CAAC,IAAI,CAAC,EAAE,EAAE;AACZ,YAAM,IAAI,KAAK,CAAC,iCAAiC,CAAC,CAAC;KACpD;;AAED,QAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;AAC3B,QAAI,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC;AAC7B,QAAI,CAAC,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC;AACzC,QAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;AAC3B,QAAI,CAAC,MAAM,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;AACjC,QAAI,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,IAAI,GAAG,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;AACzE,QAAI,CAAC,YAAY,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,IAAI,QAAQ,CAAC;;AAEvD,QAAI,CAAC,IAAI,CAAC,MAAM,EAAE;;AAEhB,UAAI,CAAC,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,QAAQ,OAAI,CAAC;AACzC,aAAK,EAAE,IAAI,CAAC,KAAK;AACjB,mBAAW,EAAE,IAAI,CAAC,WAAW;AAC7B,YAAI,EAAE,IAAI,CAAC,IAAI;AACf,WAAG,EAAE,IAAI,CAAC,IAAI,CAAC,GAAG,cAAY,IAAI,CAAC,EAAE,AAAE;OACxC,CAAC,CAAC;;AAEH,UAAI,CAAC,IAAI,CAAC,MAAM,EAAE;;AAEhB,YAAI,CAAC,SAAS,CAAC,QAAQ,UAAO,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;OAC9C;KACF;;AAED,QAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;AACtB,aAAO,CAAC,IAAI,CACV,yBAAuB,IAAI,CAAC,EAAE,+DAC9B,4CAA4C,CAC7C,CAAC;KACH;;;AAGD,QAAI,CAAC,UAAU,GAAG,kBAAK,IAAI,CAAC,UAAU,CAAC,CAAC;;;AAGxC,QAAI,CAAC,eAAe,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,gBAAQ,CAAC;GACrD;;eA7CG,KAAK;;WA+CC,sBAAG;AACX,aAAO,mBAAM,CACX,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,iBAAI,IAAI,EAAE,WAAW,EAAE,EAAE,CAAC,CAAC,EAC/C,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,mBAAmB,EAAE,OAAO,CAAC,CAAC,CACpD,CAAC,CACD,OAAO,EAAE,CACT,IAAI,EAAE,CACN,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAClB,KAAK,EAAE,CAAC;KACV;;;WAEK,kBAAG;AACP,aAAO,kBAAK,IAAI,EAAE,CAAC,IAAI,EAAE,OAAO,EAAE,aAAa,EAAE,MAAM,EAAE,MAAM,EAAE,SAAS,CAAC,CAAC,CAAC;KAC9E;;;SA5DG,KAAK;;;AA+DX,MAAM,CAAC,OAAO,GAAG,KAAK,CAAC",
      "file": "/home/vio/v3metrics/src/ui/ui_app.js",
      "sourcesContent": [
        "import { chain, get, noop, once, pick } from 'lodash';\nimport _ from 'lodash';\n\nclass UiApp {\n  constructor(uiExports, spec) {\n    this.uiExports = uiExports;\n    this.spec = spec || {};\n\n    this.id = this.spec.id;\n    if (!this.id) {\n      throw new Error('Every app must specify it\\'s id');\n    }\n\n    this.main = this.spec.main;\n    this.title = this.spec.title;\n    this.description = this.spec.description;\n    this.icon = this.spec.icon;\n    this.hidden = !!this.spec.hidden;\n    this.listed = this.spec.listed == null ? !this.hidden : this.spec.listed;\n    this.templateName = this.spec.templateName || 'ui_app';\n\n    if (!this.hidden) {\n      // any non-hidden app has a url, so it gets a \"navLink\"\n      this.navLink = this.uiExports.navLinks.new({\n        title: this.title,\n        description: this.description,\n        icon: this.icon,\n        url: this.spec.url || `/app/${this.id}`\n      });\n\n      if (!this.listed) {\n        // unlisted apps remove their navLinks from the uiExports collection though\n        this.uiExports.navLinks.delete(this.navLink);\n      }\n    }\n\n    if (this.spec.autoload) {\n      console.warn(\n        `\"autoload\" (used by ${this.id} app) is no longer a valid app configuration directive.` +\n        'Use the \\`ui/autoload/*\\` modules instead.'\n      );\n    }\n\n    // once this resolves, no reason to run it again\n    this.getModules = once(this.getModules);\n\n    // variables that are injected into the browser, must serialize to JSON\n    this.getInjectedVars = this.spec.injectVars || noop;\n  }\n\n  getModules() {\n    return chain([\n      this.uiExports.find(get(this, 'spec.uses', [])),\n      this.uiExports.find(['chromeNavControls', 'hacks']),\n    ])\n    .flatten()\n    .uniq()\n    .unshift(this.main)\n    .value();\n  }\n\n  toJSON() {\n    return pick(this, ['id', 'title', 'description', 'icon', 'main', 'navLink']);\n  }\n}\n\nmodule.exports = UiApp;\n"
      ]
    },
    "mtime": 1467036622893
  },
  "{\"filename\":\"/home/vio/v3metrics/src/ui/ui_nav_link_collection.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "sortBy"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "sortBy",
                "local": "sortBy"
              }
            ]
          },
          {
            "source": "./ui_nav_link",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "UiNavLink"
              }
            ]
          },
          {
            "source": "../utils/collection",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Collection"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "UiNavLinkCollection"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "UiNavLinkCollection",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "get",
        "inherits",
        "create-class",
        "class-call-check",
        "to-consumable-array",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i]; return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _lodash = require('lodash');\n\nvar _ui_nav_link = require('./ui_nav_link');\n\nvar _ui_nav_link2 = _interopRequireDefault(_ui_nav_link);\n\nvar _utilsCollection = require('../utils/collection');\n\nvar _utilsCollection2 = _interopRequireDefault(_utilsCollection);\n\nvar inOrderCache = Symbol('inOrder');\n\nvar UiNavLinkCollection = (function (_Collection) {\n  _inherits(UiNavLinkCollection, _Collection);\n\n  function UiNavLinkCollection(uiExports, parent) {\n    _classCallCheck(this, UiNavLinkCollection);\n\n    _get(Object.getPrototypeOf(UiNavLinkCollection.prototype), 'constructor', this).call(this);\n    this.uiExports = uiExports;\n  }\n\n  _createClass(UiNavLinkCollection, [{\n    key: 'new',\n    value: function _new(spec) {\n      var link = new _ui_nav_link2['default'](this.uiExports, spec);\n      this[inOrderCache] = null;\n      this.add(link);\n      return link;\n    }\n  }, {\n    key: 'delete',\n    value: function _delete(value) {\n      this[inOrderCache] = null;\n      return _get(Object.getPrototypeOf(UiNavLinkCollection.prototype), 'delete', this).call(this, value);\n    }\n  }, {\n    key: 'inOrder',\n    get: function get() {\n      if (!this[inOrderCache]) {\n        this[inOrderCache] = (0, _lodash.sortBy)([].concat(_toConsumableArray(this)), 'order');\n      }\n\n      return this[inOrderCache];\n    }\n  }]);\n\n  return UiNavLinkCollection;\n})(_utilsCollection2['default']);\n\nexports['default'] = UiNavLinkCollection;\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3VpL3VpX25hdl9saW5rX2NvbGxlY3Rpb24uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O3NCQUF1QixRQUFROzsyQkFDVCxlQUFlOzs7OytCQUNkLHFCQUFxQjs7OztBQUU1QyxJQUFNLFlBQVksR0FBRyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUM7O0lBRWxCLG1CQUFtQjtZQUFuQixtQkFBbUI7O0FBRTNCLFdBRlEsbUJBQW1CLENBRTFCLFNBQVMsRUFBRSxNQUFNLEVBQUU7MEJBRlosbUJBQW1COztBQUdwQywrQkFIaUIsbUJBQW1CLDZDQUc1QjtBQUNSLFFBQUksQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO0dBQzVCOztlQUxrQixtQkFBbUI7O1dBT25DLGNBQUMsSUFBSSxFQUFFO0FBQ1IsVUFBTSxJQUFJLEdBQUcsNkJBQWMsSUFBSSxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsQ0FBQztBQUNqRCxVQUFJLENBQUMsWUFBWSxDQUFDLEdBQUcsSUFBSSxDQUFDO0FBQzFCLFVBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDZixhQUFPLElBQUksQ0FBQztLQUNiOzs7V0FVSyxpQkFBQyxLQUFLLEVBQUU7QUFDWixVQUFJLENBQUMsWUFBWSxDQUFDLEdBQUcsSUFBSSxDQUFDO0FBQzFCLHdDQXhCaUIsbUJBQW1CLHdDQXdCaEIsS0FBSyxFQUFFO0tBQzVCOzs7U0FYVSxlQUFHO0FBQ1osVUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsRUFBRTtBQUN2QixZQUFJLENBQUMsWUFBWSxDQUFDLEdBQUcsaURBQVcsSUFBSSxJQUFHLE9BQU8sQ0FBQyxDQUFDO09BQ2pEOztBQUVELGFBQU8sSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO0tBQzNCOzs7U0FwQmtCLG1CQUFtQjs7O3FCQUFuQixtQkFBbUI7QUEyQnZDLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvdWkvdWlfbmF2X2xpbmtfY29sbGVjdGlvbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNvcnRCeSB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgVWlOYXZMaW5rIGZyb20gJy4vdWlfbmF2X2xpbmsnO1xuaW1wb3J0IENvbGxlY3Rpb24gZnJvbSAnLi4vdXRpbHMvY29sbGVjdGlvbic7XG5cbmNvbnN0IGluT3JkZXJDYWNoZSA9IFN5bWJvbCgnaW5PcmRlcicpO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVaU5hdkxpbmtDb2xsZWN0aW9uIGV4dGVuZHMgQ29sbGVjdGlvbiB7XG5cbiAgY29uc3RydWN0b3IodWlFeHBvcnRzLCBwYXJlbnQpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMudWlFeHBvcnRzID0gdWlFeHBvcnRzO1xuICB9XG5cbiAgbmV3KHNwZWMpIHtcbiAgICBjb25zdCBsaW5rID0gbmV3IFVpTmF2TGluayh0aGlzLnVpRXhwb3J0cywgc3BlYyk7XG4gICAgdGhpc1tpbk9yZGVyQ2FjaGVdID0gbnVsbDtcbiAgICB0aGlzLmFkZChsaW5rKTtcbiAgICByZXR1cm4gbGluaztcbiAgfVxuXG4gIGdldCBpbk9yZGVyKCkge1xuICAgIGlmICghdGhpc1tpbk9yZGVyQ2FjaGVdKSB7XG4gICAgICB0aGlzW2luT3JkZXJDYWNoZV0gPSBzb3J0QnkoWy4uLnRoaXNdLCAnb3JkZXInKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpc1tpbk9yZGVyQ2FjaGVdO1xuICB9XG5cbiAgZGVsZXRlKHZhbHVlKSB7XG4gICAgdGhpc1tpbk9yZGVyQ2FjaGVdID0gbnVsbDtcbiAgICByZXR1cm4gc3VwZXIuZGVsZXRlKHZhbHVlKTtcbiAgfVxuXG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/ui/ui_nav_link_collection.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;;;;;;;;;sBAAuB,QAAQ;;2BACT,eAAe;;;;+BACd,qBAAqB;;;;AAE5C,IAAM,YAAY,GAAG,MAAM,CAAC,SAAS,CAAC,CAAC;;IAElB,mBAAmB;YAAnB,mBAAmB;;AAE3B,WAFQ,mBAAmB,CAE1B,SAAS,EAAE,MAAM,EAAE;0BAFZ,mBAAmB;;AAGpC,+BAHiB,mBAAmB,6CAG5B;AACR,QAAI,CAAC,SAAS,GAAG,SAAS,CAAC;GAC5B;;eALkB,mBAAmB;;WAOnC,cAAC,IAAI,EAAE;AACR,UAAM,IAAI,GAAG,6BAAc,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;AACjD,UAAI,CAAC,YAAY,CAAC,GAAG,IAAI,CAAC;AAC1B,UAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;AACf,aAAO,IAAI,CAAC;KACb;;;WAUK,iBAAC,KAAK,EAAE;AACZ,UAAI,CAAC,YAAY,CAAC,GAAG,IAAI,CAAC;AAC1B,wCAxBiB,mBAAmB,wCAwBhB,KAAK,EAAE;KAC5B;;;SAXU,eAAG;AACZ,UAAI,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE;AACvB,YAAI,CAAC,YAAY,CAAC,GAAG,iDAAW,IAAI,IAAG,OAAO,CAAC,CAAC;OACjD;;AAED,aAAO,IAAI,CAAC,YAAY,CAAC,CAAC;KAC3B;;;SApBkB,mBAAmB;;;qBAAnB,mBAAmB;AA2BvC,CAAC",
      "file": "/home/vio/v3metrics/src/ui/ui_nav_link_collection.js",
      "sourcesContent": [
        "import { sortBy } from 'lodash';\nimport UiNavLink from './ui_nav_link';\nimport Collection from '../utils/collection';\n\nconst inOrderCache = Symbol('inOrder');\n\nexport default class UiNavLinkCollection extends Collection {\n\n  constructor(uiExports, parent) {\n    super();\n    this.uiExports = uiExports;\n  }\n\n  new(spec) {\n    const link = new UiNavLink(this.uiExports, spec);\n    this[inOrderCache] = null;\n    this.add(link);\n    return link;\n  }\n\n  get inOrder() {\n    if (!this[inOrderCache]) {\n      this[inOrderCache] = sortBy([...this], 'order');\n    }\n\n    return this[inOrderCache];\n  }\n\n  delete(value) {\n    this[inOrderCache] = null;\n    return super.delete(value);\n  }\n\n};\n"
      ]
    },
    "mtime": 1467036622893
  },
  "{\"filename\":\"/home/vio/v3metrics/src/ui/ui_nav_link.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "pick"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "pick",
                "local": "pick"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "join"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "join",
                "local": "join"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "UiNavLink"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "UiNavLink",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _lodash = require('lodash');\n\nvar _path = require('path');\n\nvar UiNavLink = (function () {\n  function UiNavLink(uiExports, spec) {\n    _classCallCheck(this, UiNavLink);\n\n    this.title = spec.title;\n    this.order = spec.order || 0;\n    this.url = '' + (uiExports.urlBasePath || '') + spec.url;\n    this.description = spec.description;\n    this.icon = spec.icon;\n    this.linkToLastSubUrl = spec.linkToLastSubUrl === false ? false : true;\n  }\n\n  _createClass(UiNavLink, [{\n    key: 'toJSON',\n    value: function toJSON() {\n      return (0, _lodash.pick)(this, ['title', 'url', 'order', 'description', 'icon', 'linkToLastSubUrl']);\n    }\n  }]);\n\n  return UiNavLink;\n})();\n\nexports['default'] = UiNavLink;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3VpL3VpX25hdl9saW5rLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7c0JBQXFCLFFBQVE7O29CQUNSLE1BQU07O0lBRU4sU0FBUztBQUNqQixXQURRLFNBQVMsQ0FDaEIsU0FBUyxFQUFFLElBQUksRUFBRTswQkFEVixTQUFTOztBQUUxQixRQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUM7QUFDeEIsUUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxJQUFJLENBQUMsQ0FBQztBQUM3QixRQUFJLENBQUMsR0FBRyxTQUFNLFNBQVMsQ0FBQyxXQUFXLElBQUksRUFBRSxDQUFBLEdBQUcsSUFBSSxDQUFDLEdBQUcsQUFBRSxDQUFDO0FBQ3ZELFFBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQztBQUNwQyxRQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUM7QUFDdEIsUUFBSSxDQUFDLGdCQUFnQixHQUFHLElBQUksQ0FBQyxnQkFBZ0IsS0FBSyxLQUFLLEdBQUcsS0FBSyxHQUFHLElBQUksQ0FBQztHQUN4RTs7ZUFSa0IsU0FBUzs7V0FVdEIsa0JBQUc7QUFDUCxhQUFPLGtCQUFLLElBQUksRUFBRSxDQUFDLE9BQU8sRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLEVBQUUsa0JBQWtCLENBQUMsQ0FBQyxDQUFDO0tBQ3pGOzs7U0Faa0IsU0FBUzs7O3FCQUFULFNBQVMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvdWkvdWlfbmF2X2xpbmsuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwaWNrIH0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IGpvaW4gfSBmcm9tICdwYXRoJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVWlOYXZMaW5rIHtcbiAgY29uc3RydWN0b3IodWlFeHBvcnRzLCBzcGVjKSB7XG4gICAgdGhpcy50aXRsZSA9IHNwZWMudGl0bGU7XG4gICAgdGhpcy5vcmRlciA9IHNwZWMub3JkZXIgfHwgMDtcbiAgICB0aGlzLnVybCA9IGAke3VpRXhwb3J0cy51cmxCYXNlUGF0aCB8fCAnJ30ke3NwZWMudXJsfWA7XG4gICAgdGhpcy5kZXNjcmlwdGlvbiA9IHNwZWMuZGVzY3JpcHRpb247XG4gICAgdGhpcy5pY29uID0gc3BlYy5pY29uO1xuICAgIHRoaXMubGlua1RvTGFzdFN1YlVybCA9IHNwZWMubGlua1RvTGFzdFN1YlVybCA9PT0gZmFsc2UgPyBmYWxzZSA6IHRydWU7XG4gIH1cblxuICB0b0pTT04oKSB7XG4gICAgcmV0dXJuIHBpY2sodGhpcywgWyd0aXRsZScsICd1cmwnLCAnb3JkZXInLCAnZGVzY3JpcHRpb24nLCAnaWNvbicsICdsaW5rVG9MYXN0U3ViVXJsJ10pO1xuICB9XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/ui/ui_nav_link.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;sBAAqB,QAAQ;;oBACR,MAAM;;IAEN,SAAS;AACjB,WADQ,SAAS,CAChB,SAAS,EAAE,IAAI,EAAE;0BADV,SAAS;;AAE1B,QAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;AACxB,QAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,IAAI,CAAC,CAAC;AAC7B,QAAI,CAAC,GAAG,SAAM,SAAS,CAAC,WAAW,IAAI,EAAE,CAAA,GAAG,IAAI,CAAC,GAAG,AAAE,CAAC;AACvD,QAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC;AACpC,QAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;AACtB,QAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,gBAAgB,KAAK,KAAK,GAAG,KAAK,GAAG,IAAI,CAAC;GACxE;;eARkB,SAAS;;WAUtB,kBAAG;AACP,aAAO,kBAAK,IAAI,EAAE,CAAC,OAAO,EAAE,KAAK,EAAE,OAAO,EAAE,aAAa,EAAE,MAAM,EAAE,kBAAkB,CAAC,CAAC,CAAC;KACzF;;;SAZkB,SAAS;;;qBAAT,SAAS",
      "file": "/home/vio/v3metrics/src/ui/ui_nav_link.js",
      "sourcesContent": [
        "import { pick } from 'lodash';\nimport { join } from 'path';\n\nexport default class UiNavLink {\n  constructor(uiExports, spec) {\n    this.title = spec.title;\n    this.order = spec.order || 0;\n    this.url = `${uiExports.urlBasePath || ''}${spec.url}`;\n    this.description = spec.description;\n    this.icon = spec.icon;\n    this.linkToLastSubUrl = spec.linkToLastSubUrl === false ? false : true;\n  }\n\n  toJSON() {\n    return pick(this, ['title', 'url', 'order', 'description', 'icon', 'linkToLastSubUrl']);\n  }\n}\n"
      ]
    },
    "mtime": 1467036622893
  },
  "{\"filename\":\"/home/vio/v3metrics/src/ui/ui_bundle.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "path",
            "imported": [
              "join"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "join",
                "local": "join"
              }
            ]
          },
          {
            "source": "bluebird",
            "imported": [
              "promisify"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "promisify",
                "local": "promisify"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "async-to-generator"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _path = require('path');\n\nvar _bluebird = require('bluebird');\n\nvar read = (0, _bluebird.promisify)(require('fs').readFile);\nvar write = (0, _bluebird.promisify)(require('fs').writeFile);\nvar unlink = (0, _bluebird.promisify)(require('fs').unlink);\nvar stat = (0, _bluebird.promisify)(require('fs').stat);\n\nmodule.exports = (function () {\n  function UiBundle(opts) {\n    _classCallCheck(this, UiBundle);\n\n    opts = opts || {};\n    this.id = opts.id;\n    this.modules = opts.modules;\n    this.template = opts.template;\n    this.env = opts.env;\n\n    var pathBase = (0, _path.join)(this.env.workingDir, this.id);\n    this.entryPath = pathBase + '.entry.js';\n    this.outputPath = pathBase + '.bundle.js';\n  }\n\n  _createClass(UiBundle, [{\n    key: 'renderContent',\n    value: function renderContent() {\n      return this.template({\n        env: this.env,\n        bundle: this\n      });\n    }\n  }, {\n    key: 'readEntryFile',\n    value: _asyncToGenerator(function* () {\n      try {\n        var content = yield read(this.entryPath);\n        return content.toString('utf8');\n      } catch (e) {\n        return null;\n      }\n    })\n  }, {\n    key: 'writeEntryFile',\n    value: _asyncToGenerator(function* () {\n      return yield write(this.entryPath, this.renderContent(), { encoding: 'utf8' });\n    })\n  }, {\n    key: 'clearBundleFile',\n    value: _asyncToGenerator(function* () {\n      try {\n        yield unlink(this.outputPath);\n      } catch (e) {\n        return null;\n      }\n    })\n  }, {\n    key: 'checkForExistingOutput',\n    value: _asyncToGenerator(function* () {\n      try {\n        yield stat(this.outputPath);\n        return true;\n      } catch (e) {\n        return false;\n      }\n    })\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      return {\n        id: this.id,\n        modules: this.modules,\n        entryPath: this.entryPath,\n        outputPath: this.outputPath\n      };\n    }\n  }]);\n\n  return UiBundle;\n})();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3VpL3VpX2J1bmRsZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7OztvQkFBcUIsTUFBTTs7d0JBQ0QsVUFBVTs7QUFFcEMsSUFBTSxJQUFJLEdBQUcseUJBQVUsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQy9DLElBQU0sS0FBSyxHQUFHLHlCQUFVLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUNqRCxJQUFNLE1BQU0sR0FBRyx5QkFBVSxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDL0MsSUFBTSxJQUFJLEdBQUcseUJBQVUsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDOztBQUUzQyxNQUFNLENBQUMsT0FBTztBQUNELFdBRFUsUUFBUSxDQUNqQixJQUFJLEVBQUU7MEJBREcsUUFBUTs7QUFHM0IsUUFBSSxHQUFHLElBQUksSUFBSSxFQUFFLENBQUM7QUFDbEIsUUFBSSxDQUFDLEVBQUUsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDO0FBQ2xCLFFBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQztBQUM1QixRQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUM7QUFDOUIsUUFBSSxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDOztBQUVwQixRQUFNLFFBQVEsR0FBRyxnQkFBSyxJQUFJLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDcEQsUUFBSSxDQUFDLFNBQVMsR0FBTSxRQUFRLGNBQVcsQ0FBQztBQUN4QyxRQUFJLENBQUMsVUFBVSxHQUFNLFFBQVEsZUFBWSxDQUFDO0dBRTNDOztlQWJvQixRQUFROztXQWVoQix5QkFBRztBQUNkLGFBQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQztBQUNuQixXQUFHLEVBQUUsSUFBSSxDQUFDLEdBQUc7QUFDYixjQUFNLEVBQUUsSUFBSTtPQUNiLENBQUMsQ0FBQztLQUNKOzs7NkJBRWtCLGFBQUc7QUFDcEIsVUFBSTtBQUNGLFlBQU0sT0FBTyxHQUFHLE1BQU0sSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUMzQyxlQUFPLE9BQU8sQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUM7T0FDakMsQ0FDRCxPQUFPLENBQUMsRUFBRTtBQUNSLGVBQU8sSUFBSSxDQUFDO09BQ2I7S0FDRjs7OzZCQUVtQixhQUFHO0FBQ3JCLGFBQU8sTUFBTSxLQUFLLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsYUFBYSxFQUFFLEVBQUUsRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQztLQUNoRjs7OzZCQUVvQixhQUFHO0FBQ3RCLFVBQUk7QUFBRSxjQUFNLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7T0FBRSxDQUN0QyxPQUFPLENBQUMsRUFBRTtBQUFFLGVBQU8sSUFBSSxDQUFDO09BQUU7S0FDM0I7Ozs2QkFFMkIsYUFBRztBQUM3QixVQUFJO0FBQ0YsY0FBTSxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQzVCLGVBQU8sSUFBSSxDQUFDO09BQ2IsQ0FDRCxPQUFPLENBQUMsRUFBRTtBQUNSLGVBQU8sS0FBSyxDQUFDO09BQ2Q7S0FDRjs7O1dBRUssa0JBQUc7QUFDUCxhQUFPO0FBQ0wsVUFBRSxFQUFFLElBQUksQ0FBQyxFQUFFO0FBQ1gsZUFBTyxFQUFFLElBQUksQ0FBQyxPQUFPO0FBQ3JCLGlCQUFTLEVBQUUsSUFBSSxDQUFDLFNBQVM7QUFDekIsa0JBQVUsRUFBRSxJQUFJLENBQUMsVUFBVTtPQUM1QixDQUFDO0tBQ0g7OztTQTFEb0IsUUFBUTtJQTJEOUIsQ0FBQyIsImZpbGUiOiIvaG9tZS92aW8vdjNtZXRyaWNzL3NyYy91aS91aV9idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBqb2luIH0gZnJvbSAncGF0aCc7XG5pbXBvcnQgeyBwcm9taXNpZnkgfSBmcm9tICdibHVlYmlyZCc7XG5cbmNvbnN0IHJlYWQgPSBwcm9taXNpZnkocmVxdWlyZSgnZnMnKS5yZWFkRmlsZSk7XG5jb25zdCB3cml0ZSA9IHByb21pc2lmeShyZXF1aXJlKCdmcycpLndyaXRlRmlsZSk7XG5jb25zdCB1bmxpbmsgPSBwcm9taXNpZnkocmVxdWlyZSgnZnMnKS51bmxpbmspO1xuY29uc3Qgc3RhdCA9IHByb21pc2lmeShyZXF1aXJlKCdmcycpLnN0YXQpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIFVpQnVuZGxlIHtcbiAgY29uc3RydWN0b3Iob3B0cykge1xuXG4gICAgb3B0cyA9IG9wdHMgfHwge307XG4gICAgdGhpcy5pZCA9IG9wdHMuaWQ7XG4gICAgdGhpcy5tb2R1bGVzID0gb3B0cy5tb2R1bGVzO1xuICAgIHRoaXMudGVtcGxhdGUgPSBvcHRzLnRlbXBsYXRlO1xuICAgIHRoaXMuZW52ID0gb3B0cy5lbnY7XG5cbiAgICBjb25zdCBwYXRoQmFzZSA9IGpvaW4odGhpcy5lbnYud29ya2luZ0RpciwgdGhpcy5pZCk7XG4gICAgdGhpcy5lbnRyeVBhdGggPSBgJHtwYXRoQmFzZX0uZW50cnkuanNgO1xuICAgIHRoaXMub3V0cHV0UGF0aCA9IGAke3BhdGhCYXNlfS5idW5kbGUuanNgO1xuXG4gIH1cblxuICByZW5kZXJDb250ZW50KCkge1xuICAgIHJldHVybiB0aGlzLnRlbXBsYXRlKHtcbiAgICAgIGVudjogdGhpcy5lbnYsXG4gICAgICBidW5kbGU6IHRoaXNcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIHJlYWRFbnRyeUZpbGUoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCByZWFkKHRoaXMuZW50cnlQYXRoKTtcbiAgICAgIHJldHVybiBjb250ZW50LnRvU3RyaW5nKCd1dGY4Jyk7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICBhc3luYyB3cml0ZUVudHJ5RmlsZSgpIHtcbiAgICByZXR1cm4gYXdhaXQgd3JpdGUodGhpcy5lbnRyeVBhdGgsIHRoaXMucmVuZGVyQ29udGVudCgpLCB7IGVuY29kaW5nOiAndXRmOCcgfSk7XG4gIH1cblxuICBhc3luYyBjbGVhckJ1bmRsZUZpbGUoKSB7XG4gICAgdHJ5IHsgYXdhaXQgdW5saW5rKHRoaXMub3V0cHV0UGF0aCk7IH1cbiAgICBjYXRjaCAoZSkgeyByZXR1cm4gbnVsbDsgfVxuICB9XG5cbiAgYXN5bmMgY2hlY2tGb3JFeGlzdGluZ091dHB1dCgpIHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgc3RhdCh0aGlzLm91dHB1dFBhdGgpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgdG9KU09OKCkge1xuICAgIHJldHVybiB7XG4gICAgICBpZDogdGhpcy5pZCxcbiAgICAgIG1vZHVsZXM6IHRoaXMubW9kdWxlcyxcbiAgICAgIGVudHJ5UGF0aDogdGhpcy5lbnRyeVBhdGgsXG4gICAgICBvdXRwdXRQYXRoOiB0aGlzLm91dHB1dFBhdGhcbiAgICB9O1xuICB9XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/ui/ui_bundle.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;oBAAqB,MAAM;;wBACD,UAAU;;AAEpC,IAAM,IAAI,GAAG,yBAAU,OAAO,CAAC,IAAI,CAAC,CAAC,QAAQ,CAAC,CAAC;AAC/C,IAAM,KAAK,GAAG,yBAAU,OAAO,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,CAAC;AACjD,IAAM,MAAM,GAAG,yBAAU,OAAO,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,CAAC;AAC/C,IAAM,IAAI,GAAG,yBAAU,OAAO,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC;;AAE3C,MAAM,CAAC,OAAO;AACD,WADU,QAAQ,CACjB,IAAI,EAAE;0BADG,QAAQ;;AAG3B,QAAI,GAAG,IAAI,IAAI,EAAE,CAAC;AAClB,QAAI,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC;AAClB,QAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;AAC5B,QAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;AAC9B,QAAI,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC;;AAEpB,QAAM,QAAQ,GAAG,gBAAK,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC;AACpD,QAAI,CAAC,SAAS,GAAM,QAAQ,cAAW,CAAC;AACxC,QAAI,CAAC,UAAU,GAAM,QAAQ,eAAY,CAAC;GAE3C;;eAboB,QAAQ;;WAehB,yBAAG;AACd,aAAO,IAAI,CAAC,QAAQ,CAAC;AACnB,WAAG,EAAE,IAAI,CAAC,GAAG;AACb,cAAM,EAAE,IAAI;OACb,CAAC,CAAC;KACJ;;;6BAEkB,aAAG;AACpB,UAAI;AACF,YAAM,OAAO,GAAG,MAAM,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;AAC3C,eAAO,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;OACjC,CACD,OAAO,CAAC,EAAE;AACR,eAAO,IAAI,CAAC;OACb;KACF;;;6BAEmB,aAAG;AACrB,aAAO,MAAM,KAAK,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,aAAa,EAAE,EAAE,EAAE,QAAQ,EAAE,MAAM,EAAE,CAAC,CAAC;KAChF;;;6BAEoB,aAAG;AACtB,UAAI;AAAE,cAAM,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;OAAE,CACtC,OAAO,CAAC,EAAE;AAAE,eAAO,IAAI,CAAC;OAAE;KAC3B;;;6BAE2B,aAAG;AAC7B,UAAI;AACF,cAAM,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;AAC5B,eAAO,IAAI,CAAC;OACb,CACD,OAAO,CAAC,EAAE;AACR,eAAO,KAAK,CAAC;OACd;KACF;;;WAEK,kBAAG;AACP,aAAO;AACL,UAAE,EAAE,IAAI,CAAC,EAAE;AACX,eAAO,EAAE,IAAI,CAAC,OAAO;AACrB,iBAAS,EAAE,IAAI,CAAC,SAAS;AACzB,kBAAU,EAAE,IAAI,CAAC,UAAU;OAC5B,CAAC;KACH;;;SA1DoB,QAAQ;IA2D9B,CAAC",
      "file": "/home/vio/v3metrics/src/ui/ui_bundle.js",
      "sourcesContent": [
        "import { join } from 'path';\nimport { promisify } from 'bluebird';\n\nconst read = promisify(require('fs').readFile);\nconst write = promisify(require('fs').writeFile);\nconst unlink = promisify(require('fs').unlink);\nconst stat = promisify(require('fs').stat);\n\nmodule.exports = class UiBundle {\n  constructor(opts) {\n\n    opts = opts || {};\n    this.id = opts.id;\n    this.modules = opts.modules;\n    this.template = opts.template;\n    this.env = opts.env;\n\n    const pathBase = join(this.env.workingDir, this.id);\n    this.entryPath = `${pathBase}.entry.js`;\n    this.outputPath = `${pathBase}.bundle.js`;\n\n  }\n\n  renderContent() {\n    return this.template({\n      env: this.env,\n      bundle: this\n    });\n  }\n\n  async readEntryFile() {\n    try {\n      const content = await read(this.entryPath);\n      return content.toString('utf8');\n    }\n    catch (e) {\n      return null;\n    }\n  }\n\n  async writeEntryFile() {\n    return await write(this.entryPath, this.renderContent(), { encoding: 'utf8' });\n  }\n\n  async clearBundleFile() {\n    try { await unlink(this.outputPath); }\n    catch (e) { return null; }\n  }\n\n  async checkForExistingOutput() {\n    try {\n      await stat(this.outputPath);\n      return true;\n    }\n    catch (e) {\n      return false;\n    }\n  }\n\n  toJSON() {\n    return {\n      id: this.id,\n      modules: this.modules,\n      entryPath: this.entryPath,\n      outputPath: this.outputPath\n    };\n  }\n};\n"
      ]
    },
    "mtime": 1467036622893
  },
  "{\"filename\":\"/home/vio/v3metrics/src/ui/ui_bundle_collection.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./ui_bundle",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "UiBundle"
              }
            ]
          },
          {
            "source": "./app_entry_template",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "appEntryTemplate"
              }
            ]
          },
          {
            "source": "fs",
            "imported": [
              "readFileSync"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "readFileSync",
                "local": "readSync"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "pull",
              "transform",
              "pluck"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "pull",
                "local": "pull"
              },
              {
                "kind": "named",
                "imported": "transform",
                "local": "transform"
              },
              {
                "kind": "named",
                "imported": "pluck",
                "local": "pluck"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "join"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "join",
                "local": "join"
              }
            ]
          },
          {
            "source": "bluebird",
            "imported": [
              "resolve",
              "promisify"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "resolve",
                "local": "resolve"
              },
              {
                "kind": "named",
                "imported": "promisify",
                "local": "promisify"
              }
            ]
          },
          {
            "source": "minimatch",
            "imported": [
              "makeRe"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "makeRe",
                "local": "makeRe"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "async-to-generator",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _ui_bundle = require('./ui_bundle');\n\nvar _ui_bundle2 = _interopRequireDefault(_ui_bundle);\n\nvar _app_entry_template = require('./app_entry_template');\n\nvar _app_entry_template2 = _interopRequireDefault(_app_entry_template);\n\nvar _fs = require('fs');\n\nvar _lodash = require('lodash');\n\nvar _path = require('path');\n\nvar _bluebird = require('bluebird');\n\nvar _minimatch = require('minimatch');\n\nvar rimraf = (0, _bluebird.promisify)(require('rimraf'));\nvar mkdirp = (0, _bluebird.promisify)(require('mkdirp'));\nvar unlink = (0, _bluebird.promisify)(require('fs').unlink);\nvar readdir = (0, _bluebird.promisify)(require('fs').readdir);\n\nvar UiBundleCollection = (function () {\n  function UiBundleCollection(bundlerEnv, filter) {\n    _classCallCheck(this, UiBundleCollection);\n\n    this.each = [];\n    this.env = bundlerEnv;\n    this.filter = (0, _minimatch.makeRe)(filter || '*', {\n      noglobstar: true,\n      noext: true,\n      matchBase: true\n    });\n  }\n\n  _createClass(UiBundleCollection, [{\n    key: 'add',\n    value: function add(bundle) {\n      if (!(bundle instanceof _ui_bundle2['default'])) {\n        throw new TypeError('expected bundle to be an instance of UiBundle');\n      }\n\n      if (this.filter.test(bundle.id)) {\n        this.each.push(bundle);\n      }\n    }\n  }, {\n    key: 'addApp',\n    value: function addApp(app) {\n      this.add(new _ui_bundle2['default']({\n        id: app.id,\n        modules: app.getModules(),\n        template: _app_entry_template2['default'],\n        env: this.env\n      }));\n    }\n  }, {\n    key: 'desc',\n    value: function desc() {\n      switch (this.each.length) {\n        case 0:\n          return '0 bundles';\n        case 1:\n          return 'bundle for ' + this.each[0].id;\n        default:\n          var ids = this.getIds();\n          var last = ids.pop();\n          var commas = ids.join(', ');\n          return 'bundles for ' + commas + ' and ' + last;\n      }\n    }\n  }, {\n    key: 'ensureDir',\n    value: _asyncToGenerator(function* () {\n      yield mkdirp(this.env.workingDir);\n    })\n  }, {\n    key: 'writeEntryFiles',\n    value: _asyncToGenerator(function* () {\n      yield this.ensureDir();\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.each[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var bundle = _step.value;\n\n          var existing = yield bundle.readEntryFile();\n          var expected = bundle.renderContent();\n\n          if (existing !== expected) {\n            yield bundle.writeEntryFile();\n            yield bundle.clearBundleFile();\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator['return']) {\n            _iterator['return']();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    })\n  }, {\n    key: 'getInvalidBundles',\n    value: _asyncToGenerator(function* () {\n      var invalids = new UiBundleCollection(this.env);\n\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = this.each[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var bundle = _step2.value;\n\n          var exists = yield bundle.checkForExistingOutput();\n          if (!exists) {\n            invalids.add(bundle);\n          }\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2['return']) {\n            _iterator2['return']();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      return invalids;\n    })\n  }, {\n    key: 'toWebpackEntries',\n    value: function toWebpackEntries() {\n      return (0, _lodash.transform)(this.each, function (entries, bundle) {\n        entries[bundle.id] = bundle.entryPath;\n      }, {});\n    }\n  }, {\n    key: 'getIds',\n    value: function getIds() {\n      return (0, _lodash.pluck)(this.each, 'id');\n    }\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      return this.each;\n    }\n  }]);\n\n  return UiBundleCollection;\n})();\n\nmodule.exports = UiBundleCollection;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3VpL3VpX2J1bmRsZV9jb2xsZWN0aW9uLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7eUJBS3FCLGFBQWE7Ozs7a0NBQ0wsc0JBQXNCOzs7O2tCQUNWLElBQUk7O3NCQUNOLFFBQVE7O29CQUMxQixNQUFNOzt3QkFDUSxVQUFVOzt5QkFDdEIsV0FBVzs7QUFYbEMsSUFBTSxNQUFNLEdBQUcseUJBQVUsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7QUFDNUMsSUFBTSxNQUFNLEdBQUcseUJBQVUsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7QUFDNUMsSUFBTSxNQUFNLEdBQUcseUJBQVUsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQy9DLElBQU0sT0FBTyxHQUFHLHlCQUFVLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQzs7SUFVM0Msa0JBQWtCO0FBQ1gsV0FEUCxrQkFBa0IsQ0FDVixVQUFVLEVBQUUsTUFBTSxFQUFFOzBCQUQ1QixrQkFBa0I7O0FBRXBCLFFBQUksQ0FBQyxJQUFJLEdBQUcsRUFBRSxDQUFDO0FBQ2YsUUFBSSxDQUFDLEdBQUcsR0FBRyxVQUFVLENBQUM7QUFDdEIsUUFBSSxDQUFDLE1BQU0sR0FBRyx1QkFBTyxNQUFNLElBQUksR0FBRyxFQUFFO0FBQ2xDLGdCQUFVLEVBQUUsSUFBSTtBQUNoQixXQUFLLEVBQUUsSUFBSTtBQUNYLGVBQVMsRUFBRSxJQUFJO0tBQ2hCLENBQUMsQ0FBQztHQUNKOztlQVRHLGtCQUFrQjs7V0FXbkIsYUFBQyxNQUFNLEVBQUU7QUFDVixVQUFJLEVBQUUsTUFBTSxtQ0FBb0IsQUFBQyxFQUFFO0FBQ2pDLGNBQU0sSUFBSSxTQUFTLENBQUMsK0NBQStDLENBQUMsQ0FBQztPQUN0RTs7QUFFRCxVQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUMvQixZQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztPQUN4QjtLQUNGOzs7V0FFSyxnQkFBQyxHQUFHLEVBQUU7QUFDVixVQUFJLENBQUMsR0FBRyxDQUFDLDJCQUFhO0FBQ3BCLFVBQUUsRUFBRSxHQUFHLENBQUMsRUFBRTtBQUNWLGVBQU8sRUFBRSxHQUFHLENBQUMsVUFBVSxFQUFFO0FBQ3pCLGdCQUFRLGlDQUFrQjtBQUMxQixXQUFHLEVBQUUsSUFBSSxDQUFDLEdBQUc7T0FDZCxDQUFDLENBQUMsQ0FBQztLQUNMOzs7V0FFRyxnQkFBRztBQUNMLGNBQVEsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNO0FBQ3RCLGFBQUssQ0FBQztBQUNKLGlCQUFPLFdBQVcsQ0FBQztBQUFBLEFBQ3JCLGFBQUssQ0FBQztBQUNKLGlDQUFxQixJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBRztBQUFBLEFBQ3pDO0FBQ0UsY0FBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO0FBQzFCLGNBQU0sSUFBSSxHQUFHLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQztBQUN2QixjQUFNLE1BQU0sR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQzlCLGtDQUFzQixNQUFNLGFBQVEsSUFBSSxDQUFHO0FBQUEsT0FDOUM7S0FDRjs7OzZCQUVjLGFBQUc7QUFDaEIsWUFBTSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQztLQUNuQzs7OzZCQUVvQixhQUFHO0FBQ3RCLFlBQU0sSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDOzs7Ozs7O0FBRXZCLDZCQUFtQixJQUFJLENBQUMsSUFBSSw4SEFBRTtjQUFyQixNQUFNOztBQUNiLGNBQU0sUUFBUSxHQUFHLE1BQU0sTUFBTSxDQUFDLGFBQWEsRUFBRSxDQUFDO0FBQzlDLGNBQU0sUUFBUSxHQUFHLE1BQU0sQ0FBQyxhQUFhLEVBQUUsQ0FBQzs7QUFFeEMsY0FBSSxRQUFRLEtBQUssUUFBUSxFQUFFO0FBQ3pCLGtCQUFNLE1BQU0sQ0FBQyxjQUFjLEVBQUUsQ0FBQztBQUM5QixrQkFBTSxNQUFNLENBQUMsZUFBZSxFQUFFLENBQUM7V0FDaEM7U0FDRjs7Ozs7Ozs7Ozs7Ozs7O0tBQ0Y7Ozs2QkFFc0IsYUFBRztBQUN4QixVQUFNLFFBQVEsR0FBRyxJQUFJLGtCQUFrQixDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQzs7Ozs7OztBQUVsRCw4QkFBbUIsSUFBSSxDQUFDLElBQUksbUlBQUU7Y0FBckIsTUFBTTs7QUFDYixjQUFNLE1BQU0sR0FBRyxNQUFNLE1BQU0sQ0FBQyxzQkFBc0IsRUFBRSxDQUFDO0FBQ3JELGNBQUksQ0FBQyxNQUFNLEVBQUU7QUFDWCxvQkFBUSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQztXQUN0QjtTQUNGOzs7Ozs7Ozs7Ozs7Ozs7O0FBRUQsYUFBTyxRQUFRLENBQUM7S0FDakI7OztXQUVlLDRCQUFHO0FBQ2pCLGFBQU8sdUJBQVUsSUFBSSxDQUFDLElBQUksRUFBRSxVQUFVLE9BQU8sRUFBRSxNQUFNLEVBQUU7QUFDckQsZUFBTyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsR0FBRyxNQUFNLENBQUMsU0FBUyxDQUFDO09BQ3ZDLEVBQUUsRUFBRSxDQUFDLENBQUM7S0FDUjs7O1dBRUssa0JBQUc7QUFDUCxhQUFPLG1CQUFNLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7S0FDL0I7OztXQUVLLGtCQUFHO0FBQ1AsYUFBTyxJQUFJLENBQUMsSUFBSSxDQUFDO0tBQ2xCOzs7U0F2Rkcsa0JBQWtCOzs7QUEwRnhCLE1BQU0sQ0FBQyxPQUFPLEdBQUcsa0JBQWtCLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvdWkvdWlfYnVuZGxlX2NvbGxlY3Rpb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCByaW1yYWYgPSBwcm9taXNpZnkocmVxdWlyZSgncmltcmFmJykpO1xuY29uc3QgbWtkaXJwID0gcHJvbWlzaWZ5KHJlcXVpcmUoJ21rZGlycCcpKTtcbmNvbnN0IHVubGluayA9IHByb21pc2lmeShyZXF1aXJlKCdmcycpLnVubGluayk7XG5jb25zdCByZWFkZGlyID0gcHJvbWlzaWZ5KHJlcXVpcmUoJ2ZzJykucmVhZGRpcik7XG5cbmltcG9ydCBVaUJ1bmRsZSBmcm9tICcuL3VpX2J1bmRsZSc7XG5pbXBvcnQgYXBwRW50cnlUZW1wbGF0ZSBmcm9tICcuL2FwcF9lbnRyeV90ZW1wbGF0ZSc7XG5pbXBvcnQgeyByZWFkRmlsZVN5bmMgYXMgcmVhZFN5bmMgfSBmcm9tICdmcyc7XG5pbXBvcnQgeyBwdWxsLCB0cmFuc2Zvcm0sIHBsdWNrIH0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IGpvaW4gfSBmcm9tICdwYXRoJztcbmltcG9ydCB7IHJlc29sdmUsIHByb21pc2lmeSB9IGZyb20gJ2JsdWViaXJkJztcbmltcG9ydCB7IG1ha2VSZSB9IGZyb20gJ21pbmltYXRjaCc7XG5cbmNsYXNzIFVpQnVuZGxlQ29sbGVjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKGJ1bmRsZXJFbnYsIGZpbHRlcikge1xuICAgIHRoaXMuZWFjaCA9IFtdO1xuICAgIHRoaXMuZW52ID0gYnVuZGxlckVudjtcbiAgICB0aGlzLmZpbHRlciA9IG1ha2VSZShmaWx0ZXIgfHwgJyonLCB7XG4gICAgICBub2dsb2JzdGFyOiB0cnVlLFxuICAgICAgbm9leHQ6IHRydWUsXG4gICAgICBtYXRjaEJhc2U6IHRydWVcbiAgICB9KTtcbiAgfVxuXG4gIGFkZChidW5kbGUpIHtcbiAgICBpZiAoIShidW5kbGUgaW5zdGFuY2VvZiBVaUJ1bmRsZSkpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2V4cGVjdGVkIGJ1bmRsZSB0byBiZSBhbiBpbnN0YW5jZSBvZiBVaUJ1bmRsZScpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmZpbHRlci50ZXN0KGJ1bmRsZS5pZCkpIHtcbiAgICAgIHRoaXMuZWFjaC5wdXNoKGJ1bmRsZSk7XG4gICAgfVxuICB9XG5cbiAgYWRkQXBwKGFwcCkge1xuICAgIHRoaXMuYWRkKG5ldyBVaUJ1bmRsZSh7XG4gICAgICBpZDogYXBwLmlkLFxuICAgICAgbW9kdWxlczogYXBwLmdldE1vZHVsZXMoKSxcbiAgICAgIHRlbXBsYXRlOiBhcHBFbnRyeVRlbXBsYXRlLFxuICAgICAgZW52OiB0aGlzLmVudlxuICAgIH0pKTtcbiAgfVxuXG4gIGRlc2MoKSB7XG4gICAgc3dpdGNoICh0aGlzLmVhY2gubGVuZ3RoKSB7XG4gICAgICBjYXNlIDA6XG4gICAgICAgIHJldHVybiAnMCBidW5kbGVzJztcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgcmV0dXJuIGBidW5kbGUgZm9yICR7dGhpcy5lYWNoWzBdLmlkfWA7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBjb25zdCBpZHMgPSB0aGlzLmdldElkcygpO1xuICAgICAgICBjb25zdCBsYXN0ID0gaWRzLnBvcCgpO1xuICAgICAgICBjb25zdCBjb21tYXMgPSBpZHMuam9pbignLCAnKTtcbiAgICAgICAgcmV0dXJuIGBidW5kbGVzIGZvciAke2NvbW1hc30gYW5kICR7bGFzdH1gO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGVuc3VyZURpcigpIHtcbiAgICBhd2FpdCBta2RpcnAodGhpcy5lbnYud29ya2luZ0Rpcik7XG4gIH1cblxuICBhc3luYyB3cml0ZUVudHJ5RmlsZXMoKSB7XG4gICAgYXdhaXQgdGhpcy5lbnN1cmVEaXIoKTtcblxuICAgIGZvciAobGV0IGJ1bmRsZSBvZiB0aGlzLmVhY2gpIHtcbiAgICAgIGNvbnN0IGV4aXN0aW5nID0gYXdhaXQgYnVuZGxlLnJlYWRFbnRyeUZpbGUoKTtcbiAgICAgIGNvbnN0IGV4cGVjdGVkID0gYnVuZGxlLnJlbmRlckNvbnRlbnQoKTtcblxuICAgICAgaWYgKGV4aXN0aW5nICE9PSBleHBlY3RlZCkge1xuICAgICAgICBhd2FpdCBidW5kbGUud3JpdGVFbnRyeUZpbGUoKTtcbiAgICAgICAgYXdhaXQgYnVuZGxlLmNsZWFyQnVuZGxlRmlsZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldEludmFsaWRCdW5kbGVzKCkge1xuICAgIGNvbnN0IGludmFsaWRzID0gbmV3IFVpQnVuZGxlQ29sbGVjdGlvbih0aGlzLmVudik7XG5cbiAgICBmb3IgKGxldCBidW5kbGUgb2YgdGhpcy5lYWNoKSB7XG4gICAgICBjb25zdCBleGlzdHMgPSBhd2FpdCBidW5kbGUuY2hlY2tGb3JFeGlzdGluZ091dHB1dCgpO1xuICAgICAgaWYgKCFleGlzdHMpIHtcbiAgICAgICAgaW52YWxpZHMuYWRkKGJ1bmRsZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGludmFsaWRzO1xuICB9XG5cbiAgdG9XZWJwYWNrRW50cmllcygpIHtcbiAgICByZXR1cm4gdHJhbnNmb3JtKHRoaXMuZWFjaCwgZnVuY3Rpb24gKGVudHJpZXMsIGJ1bmRsZSkge1xuICAgICAgZW50cmllc1tidW5kbGUuaWRdID0gYnVuZGxlLmVudHJ5UGF0aDtcbiAgICB9LCB7fSk7XG4gIH1cblxuICBnZXRJZHMoKSB7XG4gICAgcmV0dXJuIHBsdWNrKHRoaXMuZWFjaCwgJ2lkJyk7XG4gIH1cblxuICB0b0pTT04oKSB7XG4gICAgcmV0dXJuIHRoaXMuZWFjaDtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFVpQnVuZGxlQ29sbGVjdGlvbjtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/ui/ui_bundle_collection.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/src/ui/ui_bundle_collection.js",
      "sourcesContent": [
        "const rimraf = promisify(require('rimraf'));\nconst mkdirp = promisify(require('mkdirp'));\nconst unlink = promisify(require('fs').unlink);\nconst readdir = promisify(require('fs').readdir);\n\nimport UiBundle from './ui_bundle';\nimport appEntryTemplate from './app_entry_template';\nimport { readFileSync as readSync } from 'fs';\nimport { pull, transform, pluck } from 'lodash';\nimport { join } from 'path';\nimport { resolve, promisify } from 'bluebird';\nimport { makeRe } from 'minimatch';\n\nclass UiBundleCollection {\n  constructor(bundlerEnv, filter) {\n    this.each = [];\n    this.env = bundlerEnv;\n    this.filter = makeRe(filter || '*', {\n      noglobstar: true,\n      noext: true,\n      matchBase: true\n    });\n  }\n\n  add(bundle) {\n    if (!(bundle instanceof UiBundle)) {\n      throw new TypeError('expected bundle to be an instance of UiBundle');\n    }\n\n    if (this.filter.test(bundle.id)) {\n      this.each.push(bundle);\n    }\n  }\n\n  addApp(app) {\n    this.add(new UiBundle({\n      id: app.id,\n      modules: app.getModules(),\n      template: appEntryTemplate,\n      env: this.env\n    }));\n  }\n\n  desc() {\n    switch (this.each.length) {\n      case 0:\n        return '0 bundles';\n      case 1:\n        return `bundle for ${this.each[0].id}`;\n      default:\n        const ids = this.getIds();\n        const last = ids.pop();\n        const commas = ids.join(', ');\n        return `bundles for ${commas} and ${last}`;\n    }\n  }\n\n  async ensureDir() {\n    await mkdirp(this.env.workingDir);\n  }\n\n  async writeEntryFiles() {\n    await this.ensureDir();\n\n    for (let bundle of this.each) {\n      const existing = await bundle.readEntryFile();\n      const expected = bundle.renderContent();\n\n      if (existing !== expected) {\n        await bundle.writeEntryFile();\n        await bundle.clearBundleFile();\n      }\n    }\n  }\n\n  async getInvalidBundles() {\n    const invalids = new UiBundleCollection(this.env);\n\n    for (let bundle of this.each) {\n      const exists = await bundle.checkForExistingOutput();\n      if (!exists) {\n        invalids.add(bundle);\n      }\n    }\n\n    return invalids;\n  }\n\n  toWebpackEntries() {\n    return transform(this.each, function (entries, bundle) {\n      entries[bundle.id] = bundle.entryPath;\n    }, {});\n  }\n\n  getIds() {\n    return pluck(this.each, 'id');\n  }\n\n  toJSON() {\n    return this.each;\n  }\n}\n\nmodule.exports = UiBundleCollection;\n"
      ]
    },
    "mtime": 1467036622893
  },
  "{\"filename\":\"/home/vio/v3metrics/src/ui/app_entry_template.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nmodule.exports = function (_ref) {\n  var env = _ref.env;\n  var bundle = _ref.bundle;\n\n  var pluginSlug = env.pluginInfo.sort().map(function (p) {\n    return ' *  - ' + p;\n  }).join('\\n');\n\n  var requires = bundle.modules.map(function (m) {\n    return 'require(\\'' + m + '\\');';\n  }).join('\\n');\n\n  return '\\n/**\\n * Test entry file\\n *\\n * This is programatically created and updated, do not modify\\n *\\n * context: ' + JSON.stringify(env.context) + '\\n * includes code from:\\n' + pluginSlug + '\\n *\\n */\\n\\nrequire(\\'ui/chrome\\');\\n' + requires + '\\nrequire(\\'ui/chrome\\').bootstrap(/* xoxo */);\\n\\n';\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3VpL2FwcF9lbnRyeV90ZW1wbGF0ZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU0sQ0FBQyxPQUFPLEdBQUcsVUFBVSxJQUFhLEVBQUU7TUFBZCxHQUFHLEdBQUosSUFBYSxDQUFaLEdBQUc7TUFBRSxNQUFNLEdBQVosSUFBYSxDQUFQLE1BQU07O0FBRXJDLE1BQU0sVUFBVSxHQUFHLEdBQUcsQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLENBQ3ZDLEdBQUcsQ0FBQyxVQUFBLENBQUM7V0FBSSxRQUFRLEdBQUcsQ0FBQztHQUFBLENBQUMsQ0FDdEIsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDOztBQUVaLE1BQU0sUUFBUSxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQzlCLEdBQUcsQ0FBQyxVQUFBLENBQUM7MEJBQWdCLENBQUM7R0FBSyxDQUFDLENBQzVCLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQzs7QUFFWiw0SEFNWSxJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsa0NBRXZDLFVBQVUsOENBS1YsUUFBUSx5REFHUjtDQUVELENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvdWkvYXBwX2VudHJ5X3RlbXBsYXRlLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoe2VudiwgYnVuZGxlfSkge1xuXG4gIGNvbnN0IHBsdWdpblNsdWcgPSBlbnYucGx1Z2luSW5mby5zb3J0KClcbiAgLm1hcChwID0+ICcgKiAgLSAnICsgcClcbiAgLmpvaW4oJ1xcbicpO1xuXG4gIGNvbnN0IHJlcXVpcmVzID0gYnVuZGxlLm1vZHVsZXNcbiAgLm1hcChtID0+IGByZXF1aXJlKCcke219Jyk7YClcbiAgLmpvaW4oJ1xcbicpO1xuXG4gIHJldHVybiBgXG4vKipcbiAqIFRlc3QgZW50cnkgZmlsZVxuICpcbiAqIFRoaXMgaXMgcHJvZ3JhbWF0aWNhbGx5IGNyZWF0ZWQgYW5kIHVwZGF0ZWQsIGRvIG5vdCBtb2RpZnlcbiAqXG4gKiBjb250ZXh0OiAke0pTT04uc3RyaW5naWZ5KGVudi5jb250ZXh0KX1cbiAqIGluY2x1ZGVzIGNvZGUgZnJvbTpcbiR7cGx1Z2luU2x1Z31cbiAqXG4gKi9cblxucmVxdWlyZSgndWkvY2hyb21lJyk7XG4ke3JlcXVpcmVzfVxucmVxdWlyZSgndWkvY2hyb21lJykuYm9vdHN0cmFwKC8qIHhveG8gKi8pO1xuXG5gO1xuXG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/ui/app_entry_template.js"
      ],
      "names": [],
      "mappings": ";;AAAA,MAAM,CAAC,OAAO,GAAG,UAAU,IAAa,EAAE;MAAd,GAAG,GAAJ,IAAa,CAAZ,GAAG;MAAE,MAAM,GAAZ,IAAa,CAAP,MAAM;;AAErC,MAAM,UAAU,GAAG,GAAG,CAAC,UAAU,CAAC,IAAI,EAAE,CACvC,GAAG,CAAC,UAAA,CAAC;WAAI,QAAQ,GAAG,CAAC;GAAA,CAAC,CACtB,IAAI,CAAC,IAAI,CAAC,CAAC;;AAEZ,MAAM,QAAQ,GAAG,MAAM,CAAC,OAAO,CAC9B,GAAG,CAAC,UAAA,CAAC;0BAAgB,CAAC;GAAK,CAAC,CAC5B,IAAI,CAAC,IAAI,CAAC,CAAC;;AAEZ,4HAMY,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,OAAO,CAAC,kCAEvC,UAAU,8CAKV,QAAQ,yDAGR;CAED,CAAC",
      "file": "/home/vio/v3metrics/src/ui/app_entry_template.js",
      "sourcesContent": [
        "module.exports = function ({env, bundle}) {\n\n  const pluginSlug = env.pluginInfo.sort()\n  .map(p => ' *  - ' + p)\n  .join('\\n');\n\n  const requires = bundle.modules\n  .map(m => `require('${m}');`)\n  .join('\\n');\n\n  return `\n/**\n * Test entry file\n *\n * This is programatically created and updated, do not modify\n *\n * context: ${JSON.stringify(env.context)}\n * includes code from:\n${pluginSlug}\n *\n */\n\nrequire('ui/chrome');\n${requires}\nrequire('ui/chrome').bootstrap(/* xoxo */);\n\n`;\n\n};\n"
      ]
    },
    "mtime": 1467036622849
  },
  "{\"filename\":\"/home/vio/v3metrics/src/ui/ui_bundler_env.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "../utils/from_root",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "fromRoot"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "includes",
              "flow",
              "escapeRegExp"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "includes",
                "local": "includes"
              },
              {
                "kind": "named",
                "imported": "flow",
                "local": "flow"
              },
              {
                "kind": "named",
                "imported": "escapeRegExp",
                "local": "escapeRegExp"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "isString",
              "isArray",
              "isPlainObject",
              "get"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "isString",
                "local": "isString"
              },
              {
                "kind": "named",
                "imported": "isArray",
                "local": "isArray"
              },
              {
                "kind": "named",
                "imported": "isPlainObject",
                "local": "isPlainObject"
              },
              {
                "kind": "named",
                "imported": "get",
                "local": "get"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "keys"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "keys",
                "local": "keys"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _utilsFrom_root = require('../utils/from_root');\n\nvar _utilsFrom_root2 = _interopRequireDefault(_utilsFrom_root);\n\nvar _lodash = require('lodash');\n\nvar asRegExp = (0, _lodash.flow)(_lodash.escapeRegExp, function (path) {\n  var last = path.slice(-1);\n  if (last === '/' || last === '\\\\') {\n    // match a directory explicitly\n    return path + '.*';\n  } else {\n    // match a directory or files or just the absolute path\n    return path + '(?:\\\\.js$|$|\\\\\\\\|\\\\/)?';\n  }\n}, RegExp);\n\nvar arr = function arr(v) {\n  return [].concat(v || []);\n};\n\nmodule.exports = (function () {\n  function UiBundlerEnv(workingDir) {\n    _classCallCheck(this, UiBundlerEnv);\n\n    // the location that bundle entry files and all compiles files will\n    // be written\n    this.workingDir = workingDir;\n\n    // the context that the bundler is running in, this is not officially\n    // used for anything but it is serialized into the entry file to ensure\n    // that they are invalidated when the context changes\n    this.context = {};\n\n    // the plugins that are used to build this environment\n    // are tracked and embedded into the entry file so that when the\n    // environment changes we can rebuild the bundles\n    this.pluginInfo = [];\n\n    // regular expressions which will prevent webpack from parsing the file\n    this.noParse = [/node_modules[\\/\\\\](angular|elasticsearch-browser)[\\/\\\\]/, /node_modules[\\/\\\\](mocha|moment)[\\/\\\\]/];\n\n    // webpack aliases, like require paths, mapping a prefix to a directory\n    this.aliases = {\n      ui: (0, _utilsFrom_root2['default'])('src/ui/public'),\n      test_harness: (0, _utilsFrom_root2['default'])('src/test_harness/public')\n    };\n\n    // map of which plugins created which aliases\n    this.aliasOwners = {};\n\n    // webpack loaders map loader configuration to regexps\n    this.loaders = [];\n    this.postLoaders = [];\n  }\n\n  _createClass(UiBundlerEnv, [{\n    key: 'consumePlugin',\n    value: function consumePlugin(plugin) {\n      var tag = plugin.id + '@' + plugin.version;\n      if ((0, _lodash.includes)(this.pluginInfo, tag)) return;\n\n      if (plugin.publicDir) {\n        this.aliases['plugins/' + plugin.id] = plugin.publicDir;\n      }\n\n      this.pluginInfo.push(tag);\n    }\n  }, {\n    key: 'exportConsumer',\n    value: function exportConsumer(type) {\n      var _this = this;\n\n      switch (type) {\n        case 'loaders':\n          return function (plugin, spec) {\n            var _iteratorNormalCompletion = true;\n            var _didIteratorError = false;\n            var _iteratorError = undefined;\n\n            try {\n              for (var _iterator = arr(spec)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                var loader = _step.value;\n                _this.addLoader(loader);\n              }\n            } catch (err) {\n              _didIteratorError = true;\n              _iteratorError = err;\n            } finally {\n              try {\n                if (!_iteratorNormalCompletion && _iterator['return']) {\n                  _iterator['return']();\n                }\n              } finally {\n                if (_didIteratorError) {\n                  throw _iteratorError;\n                }\n              }\n            }\n          };\n\n        case 'postLoaders':\n          return function (plugin, spec) {\n            var _iteratorNormalCompletion2 = true;\n            var _didIteratorError2 = false;\n            var _iteratorError2 = undefined;\n\n            try {\n              for (var _iterator2 = arr(spec)[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n                var loader = _step2.value;\n                _this.addPostLoader(loader);\n              }\n            } catch (err) {\n              _didIteratorError2 = true;\n              _iteratorError2 = err;\n            } finally {\n              try {\n                if (!_iteratorNormalCompletion2 && _iterator2['return']) {\n                  _iterator2['return']();\n                }\n              } finally {\n                if (_didIteratorError2) {\n                  throw _iteratorError2;\n                }\n              }\n            }\n          };\n\n        case 'noParse':\n          return function (plugin, spec) {\n            var _iteratorNormalCompletion3 = true;\n            var _didIteratorError3 = false;\n            var _iteratorError3 = undefined;\n\n            try {\n              for (var _iterator3 = arr(spec)[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n                var re = _step3.value;\n                _this.addNoParse(re);\n              }\n            } catch (err) {\n              _didIteratorError3 = true;\n              _iteratorError3 = err;\n            } finally {\n              try {\n                if (!_iteratorNormalCompletion3 && _iterator3['return']) {\n                  _iterator3['return']();\n                }\n              } finally {\n                if (_didIteratorError3) {\n                  throw _iteratorError3;\n                }\n              }\n            }\n          };\n\n        case 'modules':\n          return function (plugin, spec) {\n            var _iteratorNormalCompletion4 = true;\n            var _didIteratorError4 = false;\n            var _iteratorError4 = undefined;\n\n            try {\n              for (var _iterator4 = (0, _lodash.keys)(spec)[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n                var id = _step4.value;\n                _this.addModule(id, spec[id], plugin.id);\n              }\n            } catch (err) {\n              _didIteratorError4 = true;\n              _iteratorError4 = err;\n            } finally {\n              try {\n                if (!_iteratorNormalCompletion4 && _iterator4['return']) {\n                  _iterator4['return']();\n                }\n              } finally {\n                if (_didIteratorError4) {\n                  throw _iteratorError4;\n                }\n              }\n            }\n          };\n      }\n    }\n  }, {\n    key: 'addContext',\n    value: function addContext(key, val) {\n      this.context[key] = val;\n    }\n  }, {\n    key: 'addLoader',\n    value: function addLoader(loader) {\n      this.loaders.push(loader);\n    }\n  }, {\n    key: 'addPostLoader',\n    value: function addPostLoader(loader) {\n      this.postLoaders.push(loader);\n    }\n  }, {\n    key: 'addNoParse',\n    value: function addNoParse(regExp) {\n      this.noParse.push(regExp);\n    }\n  }, {\n    key: 'addModule',\n    value: function addModule(id, spec, pluginId) {\n      this.claim(id, pluginId);\n\n      // configurable via spec\n      var path = undefined;\n      var parse = true;\n      var imports = null;\n      var exports = null;\n      var expose = null;\n\n      // basic style, just a path\n      if ((0, _lodash.isString)(spec)) path = spec;\n\n      if ((0, _lodash.isArray)(spec)) {\n        path = spec[0];\n        imports = spec[1];\n        exports = spec[2];\n      }\n\n      if ((0, _lodash.isPlainObject)(spec)) {\n        path = spec.path;\n        parse = (0, _lodash.get)(spec, 'parse', parse);\n        imports = (0, _lodash.get)(spec, 'imports', imports);\n        exports = (0, _lodash.get)(spec, 'exports', exports);\n        expose = (0, _lodash.get)(spec, 'expose', expose);\n      }\n\n      if (!path) {\n        throw new TypeError('Invalid spec definition, unable to identify path');\n      }\n\n      this.aliases[id] = path;\n\n      var loader = [];\n      if (imports) {\n        loader.push('imports?' + imports);\n      }\n\n      if (exports) loader.push('exports?' + exports);\n      if (expose) loader.push('expose?' + expose);\n      if (loader.length) this.loaders.push({ test: asRegExp(path), loader: loader.join('!') });\n      if (!parse) this.addNoParse(path);\n    }\n  }, {\n    key: 'claim',\n    value: function claim(id, pluginId) {\n      var owner = pluginId ? 'Plugin ' + pluginId : 'Kibana Server';\n\n      // TODO(spalger): we could do a lot more to detect colliding module defs\n      var existingOwner = this.aliasOwners[id] || this.aliasOwners[id + '$'];\n\n      if (existingOwner) {\n        throw new TypeError(owner + ' attempted to override export \"' + id + '\" from ' + existingOwner);\n      }\n\n      this.aliasOwners[id] = owner;\n    }\n  }]);\n\n  return UiBundlerEnv;\n})();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3VpL3VpX2J1bmRsZXJfZW52LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OzhCQUFxQixvQkFBb0I7Ozs7c0JBQ0ksUUFBUTs7QUFJckQsSUFBTSxRQUFRLEdBQUcsd0NBRWYsVUFBVSxJQUFJLEVBQUU7QUFDZCxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDNUIsTUFBSSxJQUFJLEtBQUssR0FBRyxJQUFJLElBQUksS0FBSyxJQUFJLEVBQUU7O0FBRWpDLFdBQU8sSUFBSSxHQUFHLElBQUksQ0FBQztHQUNwQixNQUFNOztBQUVMLFdBQU8sSUFBSSxHQUFHLHdCQUF3QixDQUFDO0dBQ3hDO0NBQ0YsRUFDRCxNQUFNLENBQ1AsQ0FBQzs7QUFFRixJQUFNLEdBQUcsR0FBRyxTQUFOLEdBQUcsQ0FBRyxDQUFDO1NBQUksRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDO0NBQUEsQ0FBQzs7QUFFcEMsTUFBTSxDQUFDLE9BQU87QUFDRCxXQURVLFlBQVksQ0FDckIsVUFBVSxFQUFFOzBCQURILFlBQVk7Ozs7QUFLL0IsUUFBSSxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUM7Ozs7O0FBSzdCLFFBQUksQ0FBQyxPQUFPLEdBQUcsRUFBRSxDQUFDOzs7OztBQUtsQixRQUFJLENBQUMsVUFBVSxHQUFHLEVBQUUsQ0FBQzs7O0FBR3JCLFFBQUksQ0FBQyxPQUFPLEdBQUcsQ0FDYix5REFBeUQsRUFDekQsd0NBQXdDLENBQ3pDLENBQUM7OztBQUdGLFFBQUksQ0FBQyxPQUFPLEdBQUc7QUFDYixRQUFFLEVBQUUsaUNBQVMsZUFBZSxDQUFDO0FBQzdCLGtCQUFZLEVBQUUsaUNBQVMseUJBQXlCLENBQUM7S0FDbEQsQ0FBQzs7O0FBR0YsUUFBSSxDQUFDLFdBQVcsR0FBRyxFQUFFLENBQUM7OztBQUd0QixRQUFJLENBQUMsT0FBTyxH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QUUsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDekYsVUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQ25DOzs7V0FFSSxlQUFDLEVBQUUsRUFBRSxRQUFRLEVBQUU7QUFDbEIsVUFBTSxLQUFLLEdBQUcsUUFBUSxlQUFhLFFBQVEsR0FBSyxlQUFlLENBQUM7OztBQUdoRSxVQUFNLGFBQWEsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUksRUFBRSxPQUFJLENBQUM7O0FBRXpFLFVBQUksYUFBYSxFQUFFO0FBQ2pCLGNBQU0sSUFBSSxTQUFTLENBQUksS0FBSyx1Q0FBa0MsRUFBRSxlQUFVLGFBQWEsQ0FBRyxDQUFDO09BQzVGOztBQUVELFVBQUksQ0FBQyxXQUFXLENBQUMsRUFBRSxDQUFDLEdBQUcsS0FBSyxDQUFDO0tBQzlCOzs7U0EvSW9CLFlBQVk7SUFnSmxDLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvdWkvdWlfYnVuZGxlcl9lbnYuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZnJvbVJvb3QgZnJvbSAnLi4vdXRpbHMvZnJvbV9yb290JztcbmltcG9ydCB7IGluY2x1ZGVzLCBmbG93LCBlc2NhcGVSZWdFeHAgfSBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHsgaXNTdHJpbmcsIGlzQXJyYXksIGlzUGxhaW5PYmplY3QsIGdldCB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgeyBrZXlzIH0gZnJvbSAnbG9kYXNoJztcblxuY29uc3QgYXNSZWdFeHAgPSBmbG93KFxuICBlc2NhcGVSZWdFeHAsXG4gIGZ1bmN0aW9uIChwYXRoKSB7XG4gICAgY29uc3QgbGFzdCA9IHBhdGguc2xpY2UoLTEpO1xuICAgIGlmIChsYXN0ID09PSAnLycgfHwgbGFzdCA9PT0gJ1xcXFwnKSB7XG4gICAgICAvLyBtYXRjaCBhIGRpcmVjdG9yeSBleHBsaWNpdGx5XG4gICAgICByZXR1cm4gcGF0aCArICcuKic7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG1hdGNoIGEgZGlyZWN0b3J5IG9yIGZpbGVzIG9yIGp1c3QgdGhlIGFic29sdXRlIHBhdGhcbiAgICAgIHJldHVybiBwYXRoICsgJyg/OlxcXFwuanMkfCR8XFxcXFxcXFx8XFxcXC8pPyc7XG4gICAgfVxuICB9LFxuICBSZWdFeHBcbik7XG5cbmNvbnN0IGFyciA9IHYgPT4gW10uY29uY2F0KHYgfHwgW10pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIFVpQnVuZGxlckVudiB7XG4gIGNvbnN0cnVjdG9yKHdvcmtpbmdEaXIpIHtcblxuICAgIC8vIHRoZSBsb2NhdGlvbiB0aGF0IGJ1bmRsZSBlbnRyeSBmaWxlcyBhbmQgYWxsIGNvbXBpbGVzIGZpbGVzIHdpbGxcbiAgICAvLyBiZSB3cml0dGVuXG4gICAgdGhpcy53b3JraW5nRGlyID0gd29ya2luZ0RpcjtcblxuICAgIC8vIHRoZSBjb250ZXh0IHRoYXQgdGhlIGJ1bmRsZXIgaXMgcnVubmluZyBpbiwgdGhpcyBpcyBub3Qgb2ZmaWNpYWxseVxuICAgIC8vIHVzZWQgZm9yIGFueXRoaW5nIGJ1dCBpdCBpcyBzZXJpYWxpemVkIGludG8gdGhlIGVudHJ5IGZpbGUgdG8gZW5zdXJlXG4gICAgLy8gdGhhdCB0aGV5IGFyZSBpbnZhbGlkYXRlZCB3aGVuIHRoZSBjb250ZXh0IGNoYW5nZXNcbiAgICB0aGlzLmNvbnRleHQgPSB7fTtcblxuICAgIC8vIHRoZSBwbHVnaW5zIHRoYXQgYXJlIHVzZWQgdG8gYnVpbGQgdGhpcyBlbnZpcm9ubWVudFxuICAgIC8vIGFyZSB0cmFja2VkIGFuZCBlbWJlZGRlZCBpbnRvIHRoZSBlbnRyeSBmaWxlIHNvIHRoYXQgd2hlbiB0aGVcbiAgICAvLyBlbnZpcm9ubWVudCBjaGFuZ2VzIHdlIGNhbiByZWJ1aWxkIHRoZSBidW5kbGVzXG4gICAgdGhpcy5wbHVnaW5JbmZvID0gW107XG5cbiAgICAvLyByZWd1bGFyIGV4cHJlc3Npb25zIHdoaWNoIHdpbGwgcHJldmVudCB3ZWJwYWNrIGZyb20gcGFyc2luZyB0aGUgZmlsZVxuICAgIHRoaXMubm9QYXJzZSA9IFtcbiAgICAgIC9ub2RlX21vZHVsZXNbXFwvXFxcXF0oYW5ndWxhcnxlbGFzdGljc2VhcmNoLWJyb3dzZXIpW1xcL1xcXFxdLyxcbiAgICAgIC9ub2RlX21vZHVsZXNbXFwvXFxcXF0obW9jaGF8bW9tZW50KVtcXC9cXFxcXS9cbiAgICBdO1xuXG4gICAgLy8gd2VicGFjayBhbGlhc2VzLCBsaWtlIHJlcXVpcmUgcGF0aHMsIG1hcHBpbmcgYSBwcmVmaXggdG8gYSBkaXJlY3RvcnlcbiAgICB0aGlzLmFsaWFzZXMgPSB7XG4gICAgICB1aTogZnJvbVJvb3QoJ3NyYy91aS9wdWJsaWMnKSxcbiAgICAgIHRlc3RfaGFybmVzczogZnJvbVJvb3QoJ3NyYy90ZXN0X2hhcm5lc3MvcHVibGljJylcbiAgICB9O1xuXG4gICAgLy8gbWFwIG9mIHdoaWNoIHBsdWdpbnMgY3JlYXRlZCB3aGljaCBhbGlhc2VzXG4gICAgdGhpcy5hbGlhc093bmVycyA9IHt9O1xuXG4gICAgLy8gd2VicGFjayBsb2FkZXJzIG1hcCBsb2FkZXIgY29uZmlndXJhdGlvbiB0byByZWdleHBzXG4gICAgdGhpcy5sb2FkZXJzID0gW107XG4gICAgdGhpcy5wb3N0TG9hZGVycyA9IFtdO1xuICB9XG5cbiAgY29uc3VtZVBsdWdpbihwbHVnaW4pIHtcbiAgICBjb25zdCB0YWcgPSBgJHtwbHVnaW4uaWR9QCR7cGx1Z2luLnZlcnNpb259YDtcbiAgICBpZiAoaW5jbHVkZXModGhpcy5wbHVnaW5JbmZvLCB0YWcpKSByZXR1cm47XG5cbiAgICBpZiAocGx1Z2luLnB1YmxpY0Rpcikge1xuICAgICAgdGhpcy5hbGlhc2VzW2BwbHVnaW5zLyR7cGx1Z2luLmlkfWBdID0gcGx1Z2luLnB1YmxpY0RpcjtcbiAgICB9XG5cbiAgICB0aGlzLnBsdWdpbkluZm8ucHVzaCh0YWcpO1xuICB9XG5cbiAgZXhwb3J0Q29uc3VtZXIodHlwZSkge1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSAnbG9hZGVycyc6XG4gICAgICAgIHJldHVybiAocGx1Z2luLCBzcGVjKSA9PiB7XG4gICAgICAgICAgZm9yIChsZXQgbG9hZGVyIG9mIGFycihzcGVjKSkgdGhpcy5hZGRMb2FkZXIobG9hZGVyKTtcbiAgICAgICAgfTtcblxuICAgICAgY2FzZSAncG9zdExvYWRlcnMnOlxuICAgICAgICByZXR1cm4gKHBsdWdpbiwgc3BlYykgPT4ge1xuICAgICAgICAgIGZvciAobGV0IGxvYWRlciBvZiBhcnIoc3BlYykpIHRoaXMuYWRkUG9zdExvYWRlcihsb2FkZXIpO1xuICAgICAgICB9O1xuXG4gICAgICBjYXNlICdub1BhcnNlJzpcbiAgICAgICAgcmV0dXJuIChwbHVnaW4sIHNwZWMpID0+IHtcbiAgICAgICAgICBmb3IgKGxldCByZSBvZiBhcnIoc3BlYykpIHRoaXMuYWRkTm9QYXJzZShyZSk7XG4gICAgICAgIH07XG5cbiAgICAgIGNhc2UgJ21vZHVsZXMnOlxuICAgICAgICByZXR1cm4gKHBsdWdpbiwgc3BlYykgPT4ge1xuICAgICAgICAgIGZvciAobGV0IGlkIG9mIGtleXMoc3BlYykpIHRoaXMuYWRkTW9kdWxlKGlkLCBzcGVjW2lkXSwgcGx1Z2luLmlkKTtcbiAgICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBhZGRDb250ZXh0KGtleSwgdmFsKSB7XG4gICAgdGhpcy5jb250ZXh0W2tleV0gPSB2YWw7XG4gIH1cblxuICBhZGRMb2FkZXIobG9hZGVyKSB7XG4gICAgdGhpcy5sb2FkZXJzLnB1c2gobG9hZGVyKTtcbiAgfVxuXG4gIGFkZFBvc3RMb2FkZXIobG9hZGVyKSB7XG4gICAgdGhpcy5wb3N0TG9hZGVycy5wdXNoKGxvYWRlcik7XG4gIH1cblxuICBhZGROb1BhcnNlKHJlZ0V4cCkge1xuICAgIHRoaXMubm9QYXJzZS5wdXNoKHJlZ0V4cCk7XG4gIH1cblxuICBhZGRNb2R1bGUoaWQsIHNwZWMsIHBsdWdpbklkKSB7XG4gICAgdGhpcy5jbGFpbShpZCwgcGx1Z2luSWQpO1xuXG4gICAgLy8gY29uZmlndXJhYmxlIHZpYSBzcGVjXG4gICAgbGV0IHBhdGg7XG4gICAgbGV0IHBhcnNlID0gdHJ1ZTtcbiAgICBsZXQgaW1wb3J0cyA9IG51bGw7XG4gICAgbGV0IGV4cG9ydHMgPSBudWxsO1xuICAgIGxldCBleHBvc2UgPSBudWxsO1xuXG4gICAgLy8gYmFzaWMgc3R5bGUsIGp1c3QgYSBwYXRoXG4gICAgaWYgKGlzU3RyaW5nKHNwZWMpKSBwYXRoID0gc3BlYztcblxuICAgIGlmIChpc0FycmF5KHNwZWMpKSB7XG4gICAgICBwYXRoID0gc3BlY1swXTtcbiAgICAgIGltcG9ydHMgPSBzcGVjWzFdO1xuICAgICAgZXhwb3J0cyA9IHNwZWNbMl07XG4gICAgfVxuXG4gICAgaWYgKGlzUGxhaW5PYmplY3Qoc3BlYykpIHtcbiAgICAgIHBhdGggPSBzcGVjLnBhdGg7XG4gICAgICBwYXJzZSA9IGdldChzcGVjLCAncGFyc2UnLCBwYXJzZSk7XG4gICAgICBpbXBvcnRzID0gZ2V0KHNwZWMsICdpbXBvcnRzJywgaW1wb3J0cyk7XG4gICAgICBleHBvcnRzID0gZ2V0KHNwZWMsICdleHBvcnRzJywgZXhwb3J0cyk7XG4gICAgICBleHBvc2UgPSBnZXQoc3BlYywgJ2V4cG9zZScsIGV4cG9zZSk7XG4gICAgfVxuXG4gICAgaWYgKCFwYXRoKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIHNwZWMgZGVmaW5pdGlvbiwgdW5hYmxlIHRvIGlkZW50aWZ5IHBhdGgnKTtcbiAgICB9XG5cbiAgICB0aGlzLmFsaWFzZXNbaWRdID0gcGF0aDtcblxuICAgIGNvbnN0IGxvYWRlciA9IFtdO1xuICAgIGlmIChpbXBvcnRzKSB7XG4gICAgICBsb2FkZXIucHVzaChgaW1wb3J0cz8ke2ltcG9ydHN9YCk7XG4gICAgfVxuXG4gICAgaWYgKGV4cG9ydHMpIGxvYWRlci5wdXNoKGBleHBvcnRzPyR7ZXhwb3J0c31gKTtcbiAgICBpZiAoZXhwb3NlKSBsb2FkZXIucHVzaChgZXhwb3NlPyR7ZXhwb3NlfWApO1xuICAgIGlmIChsb2FkZXIubGVuZ3RoKSB0aGlzLmxvYWRlcnMucHVzaCh7IHRlc3Q6IGFzUmVnRXhwKHBhdGgpLCBsb2FkZXI6IGxvYWRlci5qb2luKCchJykgfSk7XG4gICAgaWYgKCFwYXJzZSkgdGhpcy5hZGROb1BhcnNlKHBhdGgpO1xuICB9XG5cbiAgY2xhaW0oaWQsIHBsdWdpbklkKSB7XG4gICAgY29uc3Qgb3duZXIgPSBwbHVnaW5JZCA/IGBQbHVnaW4gJHtwbHVnaW5JZH1gIDogJ0tpYmFuYSBTZXJ2ZXInO1xuXG4gICAgLy8gVE9ETyhzcGFsZ2VyKTogd2UgY291bGQgZG8gYSBsb3QgbW9yZSB0byBkZXRlY3QgY29sbGlkaW5nIG1vZHVsZSBkZWZzXG4gICAgY29uc3QgZXhpc3RpbmdPd25lciA9IHRoaXMuYWxpYXNPd25lcnNbaWRdIHx8IHRoaXMuYWxpYXNPd25lcnNbYCR7aWR9JGBdO1xuXG4gICAgaWYgKGV4aXN0aW5nT3duZXIpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYCR7b3duZXJ9IGF0dGVtcHRlZCB0byBvdmVycmlkZSBleHBvcnQgXCIke2lkfVwiIGZyb20gJHtleGlzdGluZ093bmVyfWApO1xuICAgIH1cblxuICAgIHRoaXMuYWxpYXNPd25lcnNbaWRdID0gb3duZXI7XG4gIH1cbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/ui/ui_bundler_env.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/src/ui/ui_bundler_env.js",
      "sourcesContent": [
        "import fromRoot from '../utils/from_root';\nimport { includes, flow, escapeRegExp } from 'lodash';\nimport { isString, isArray, isPlainObject, get } from 'lodash';\nimport { keys } from 'lodash';\n\nconst asRegExp = flow(\n  escapeRegExp,\n  function (path) {\n    const last = path.slice(-1);\n    if (last === '/' || last === '\\\\') {\n      // match a directory explicitly\n      return path + '.*';\n    } else {\n      // match a directory or files or just the absolute path\n      return path + '(?:\\\\.js$|$|\\\\\\\\|\\\\/)?';\n    }\n  },\n  RegExp\n);\n\nconst arr = v => [].concat(v || []);\n\nmodule.exports = class UiBundlerEnv {\n  constructor(workingDir) {\n\n    // the location that bundle entry files and all compiles files will\n    // be written\n    this.workingDir = workingDir;\n\n    // the context that the bundler is running in, this is not officially\n    // used for anything but it is serialized into the entry file to ensure\n    // that they are invalidated when the context changes\n    this.context = {};\n\n    // the plugins that are used to build this environment\n    // are tracked and embedded into the entry file so that when the\n    // environment changes we can rebuild the bundles\n    this.pluginInfo = [];\n\n    // regular expressions which will prevent webpack from parsing the file\n    this.noParse = [\n      /node_modules[\\/\\\\](angular|elasticsearch-browser)[\\/\\\\]/,\n      /node_modules[\\/\\\\](mocha|moment)[\\/\\\\]/\n    ];\n\n    // webpack aliases, like require paths, mapping a prefix to a directory\n    this.aliases = {\n      ui: fromRoot('src/ui/public'),\n      test_harness: fromRoot('src/test_harness/public')\n    };\n\n    // map of which plugins created which aliases\n    this.aliasOwners = {};\n\n    // webpack loaders map loader configuration to regexps\n    this.loaders = [];\n    this.postLoaders = [];\n  }\n\n  consumePlugin(plugin) {\n    const tag = `${plugin.id}@${plugin.version}`;\n    if (includes(this.pluginInfo, tag)) return;\n\n    if (plugin.publicDir) {\n      this.aliases[`plugins/${plugin.id}`] = plugin.publicDir;\n    }\n\n    this.pluginInfo.push(tag);\n  }\n\n  exportConsumer(type) {\n    switch (type) {\n      case 'loaders':\n        return (plugin, spec) => {\n          for (let loader of arr(spec)) this.addLoader(loader);\n        };\n\n      case 'postLoaders':\n        return (plugin, spec) => {\n          for (let loader of arr(spec)) this.addPostLoader(loader);\n        };\n\n      case 'noParse':\n        return (plugin, spec) => {\n          for (let re of arr(spec)) this.addNoParse(re);\n        };\n\n      case 'modules':\n        return (plugin, spec) => {\n          for (let id of keys(spec)) this.addModule(id, spec[id], plugin.id);\n        };\n    }\n  }\n\n  addContext(key, val) {\n    this.context[key] = val;\n  }\n\n  addLoader(loader) {\n    this.loaders.push(loader);\n  }\n\n  addPostLoader(loader) {\n    this.postLoaders.push(loader);\n  }\n\n  addNoParse(regExp) {\n    this.noParse.push(regExp);\n  }\n\n  addModule(id, spec, pluginId) {\n    this.claim(id, pluginId);\n\n    // configurable via spec\n    let path;\n    let parse = true;\n    let imports = null;\n    let exports = null;\n    let expose = null;\n\n    // basic style, just a path\n    if (isString(spec)) path = spec;\n\n    if (isArray(spec)) {\n      path = spec[0];\n      imports = spec[1];\n      exports = spec[2];\n    }\n\n    if (isPlainObject(spec)) {\n      path = spec.path;\n      parse = get(spec, 'parse', parse);\n      imports = get(spec, 'imports', imports);\n      exports = get(spec, 'exports', exports);\n      expose = get(spec, 'expose', expose);\n    }\n\n    if (!path) {\n      throw new TypeError('Invalid spec definition, unable to identify path');\n    }\n\n    this.aliases[id] = path;\n\n    const loader = [];\n    if (imports) {\n      loader.push(`imports?${imports}`);\n    }\n\n    if (exports) loader.push(`exports?${exports}`);\n    if (expose) loader.push(`expose?${expose}`);\n    if (loader.length) this.loaders.push({ test: asRegExp(path), loader: loader.join('!') });\n    if (!parse) this.addNoParse(path);\n  }\n\n  claim(id, pluginId) {\n    const owner = pluginId ? `Plugin ${pluginId}` : 'Kibana Server';\n\n    // TODO(spalger): we could do a lot more to detect colliding module defs\n    const existingOwner = this.aliasOwners[id] || this.aliasOwners[`${id}$`];\n\n    if (existingOwner) {\n      throw new TypeError(`${owner} attempted to override export \"${id}\" from ${existingOwner}`);\n    }\n\n    this.aliasOwners[id] = owner;\n  }\n};\n"
      ]
    },
    "mtime": 1467036622893
  },
  "{\"filename\":\"/home/vio/v3metrics/src/ui/settings/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "defaultsDeep",
              "partial"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "defaultsDeep",
                "local": "defaultsDeep"
              },
              {
                "kind": "named",
                "imported": "partial",
                "local": "partial"
              }
            ]
          },
          {
            "source": "./defaults",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "defaultsProvider"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "setupSettings",
            "kbnServer",
            "server",
            "config"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "setupSettings",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "kbnServer",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "server",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "config",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "extends",
        "define-property",
        "sliced-to-array",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }; })();\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports['default'] = setupSettings;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar _lodash = require('lodash');\n\nvar _defaults = require('./defaults');\n\nvar _defaults2 = _interopRequireDefault(_defaults);\n\nfunction setupSettings(kbnServer, server, config) {\n  var status = kbnServer.status.create('ui settings');\n  var uiSettings = {\n    getAll: getAll,\n    getDefaults: getDefaults,\n    getUserProvided: getUserProvided,\n    set: set,\n    setMany: setMany,\n    remove: remove\n  };\n\n  server.decorate('server', 'uiSettings', function () {\n    return uiSettings;\n  });\n  kbnServer.ready().then(mirrorEsStatus);\n\n  function getAll() {\n    return Promise.all([getDefaults(), getUserProvided()]).then(function (_ref) {\n      var _ref2 = _slicedToArray(_ref, 2);\n\n      var defaults = _ref2[0];\n      var user = _ref2[1];\n      return (0, _lodash.defaultsDeep)(user, defaults);\n    });\n  }\n\n  function getDefaults() {\n    return Promise.resolve((0, _defaults2['default'])());\n  }\n\n  function userSettingsNotFound(kibanaVersion) {\n    status.red('Could not find user-provided settings for Kibana ' + kibanaVersion);\n    return {};\n  }\n\n  function getUserProvided() {\n    var client = server.plugins.elasticsearch.client;\n\n    var clientSettings = getClientSettings(config);\n    return client.get(_extends({}, clientSettings)).then(function (res) {\n      return res._source;\n    })['catch']((0, _lodash.partial)(userSettingsNotFound, clientSettings.id)).then(function (user) {\n      return hydrateUserSettings(user);\n    });\n  }\n\n  function setMany(changes) {\n    var client = server.plugins.elasticsearch.client;\n\n    var clientSettings = getClientSettings(config);\n    return client.update(_extends({}, clientSettings, {\n      body: { doc: changes }\n    })).then(function () {\n      return {};\n    });\n  }\n\n  function set(key, value) {\n    return setMany(_defineProperty({}, key, value));\n  }\n\n  function remove(key) {\n    return set(key, null);\n  }\n\n  function mirrorEsStatus() {\n    var esStatus = kbnServer.status.getForPluginId('elasticsearch');\n\n    copyStatus();\n    esStatus.on('change', copyStatus);\n\n    function copyStatus() {\n      var state = esStatus.state;\n\n      var statusMessage = state === 'green' ? 'Ready' : 'Elasticsearch plugin is ' + state;\n      status[state](statusMessage);\n    }\n  }\n}\n\nfunction hydrateUserSettings(user) {\n  return Object.keys(user).reduce(expand, {});\n  function expand(expanded, key) {\n    var userValue = user[key];\n    if (userValue !== null) {\n      expanded[key] = { userValue: userValue };\n    }\n    return expanded;\n  }\n}\n\nfunction getClientSettings(config) {\n  var index = config.get('kibana.index');\n  var id = config.get('pkg.version');\n  var type = 'config';\n  return { index: index, type: type, id: id };\n}\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3VpL3NldHRpbmdzL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7cUJBR3dCLGFBQWE7Ozs7OztzQkFIQyxRQUFROzt3QkFDakIsWUFBWTs7OztBQUUxQixTQUFTLGFBQWEsQ0FBQyxTQUFTLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRTtBQUMvRCxNQUFNLE1BQU0sR0FBRyxTQUFTLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsQ0FBQztBQUN0RCxNQUFNLFVBQVUsR0FBRztBQUNqQixVQUFNLEVBQU4sTUFBTTtBQUNOLGVBQVcsRUFBWCxXQUFXO0FBQ1gsbUJBQWUsRUFBZixlQUFlO0FBQ2YsT0FBRyxFQUFILEdBQUc7QUFDSCxXQUFPLEVBQVAsT0FBTztBQUNQLFVBQU0sRUFBTixNQUFNO0dBQ1AsQ0FBQzs7QUFFRixRQUFNLENBQUMsUUFBUSxDQUFDLFFBQVEsRUFBRSxZQUFZLEVBQUU7V0FBTSxVQUFVO0dBQUEsQ0FBQyxDQUFDO0FBQzFELFdBQVMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7O0FBRXZDLFdBQVMsTUFBTSxHQUFHO0FBQ2hCLFdBQU8sT0FBTyxDQUNYLEdBQUcsQ0FBQyxDQUFDLFdBQVcsRUFBRSxFQUFFLGVBQWUsRUFBRSxDQUFDLENBQUMsQ0FDdkMsSUFBSSxDQUFDLFVBQUMsSUFBZ0I7aUNBQWhCLElBQWdCOztVQUFmLFFBQVE7VUFBRSxJQUFJO2FBQU0sMEJBQWEsSUFBSSxFQUFFLFFBQVEsQ0FBQztLQUFBLENBQUMsQ0FBQztHQUM3RDs7QUFFRCxXQUFTLFdBQVcsR0FBRztBQUNyQixXQUFPLE9BQU8sQ0FBQyxPQUFPLENBQUMsNEJBQWtCLENBQUMsQ0FBQztHQUM1Qzs7QUFFRCxXQUFTLG9CQUFvQixDQUFDLGFBQWEsRUFBRTtBQUMzQyxVQUFNLENBQUMsR0FBRyx1REFBcUQsYUFBYSxDQUFHLENB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Iiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGVmYXVsdHNEZWVwLCBwYXJ0aWFsIH0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBkZWZhdWx0c1Byb3ZpZGVyIGZyb20gJy4vZGVmYXVsdHMnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzZXR1cFNldHRpbmdzKGtiblNlcnZlciwgc2VydmVyLCBjb25maWcpIHtcbiAgY29uc3Qgc3RhdHVzID0ga2JuU2VydmVyLnN0YXR1cy5jcmVhdGUoJ3VpIHNldHRpbmdzJyk7XG4gIGNvbnN0IHVpU2V0dGluZ3MgPSB7XG4gICAgZ2V0QWxsLFxuICAgIGdldERlZmF1bHRzLFxuICAgIGdldFVzZXJQcm92aWRlZCxcbiAgICBzZXQsXG4gICAgc2V0TWFueSxcbiAgICByZW1vdmVcbiAgfTtcblxuICBzZXJ2ZXIuZGVjb3JhdGUoJ3NlcnZlcicsICd1aVNldHRpbmdzJywgKCkgPT4gdWlTZXR0aW5ncyk7XG4gIGtiblNlcnZlci5yZWFkeSgpLnRoZW4obWlycm9yRXNTdGF0dXMpO1xuXG4gIGZ1bmN0aW9uIGdldEFsbCgpIHtcbiAgICByZXR1cm4gUHJvbWlzZVxuICAgICAgLmFsbChbZ2V0RGVmYXVsdHMoKSwgZ2V0VXNlclByb3ZpZGVkKCldKVxuICAgICAgLnRoZW4oKFtkZWZhdWx0cywgdXNlcl0pID0+IGRlZmF1bHRzRGVlcCh1c2VyLCBkZWZhdWx0cykpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0RGVmYXVsdHMoKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShkZWZhdWx0c1Byb3ZpZGVyKCkpO1xuICB9XG5cbiAgZnVuY3Rpb24gdXNlclNldHRpbmdzTm90Rm91bmQoa2liYW5hVmVyc2lvbikge1xuICAgIHN0YXR1cy5yZWQoYENvdWxkIG5vdCBmaW5kIHVzZXItcHJvdmlkZWQgc2V0dGluZ3MgZm9yIEtpYmFuYSAke2tpYmFuYVZlcnNpb259YCk7XG4gICAgcmV0dXJuIHt9O1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0VXNlclByb3ZpZGVkKCkge1xuICAgIGNvbnN0IHsgY2xpZW50IH0gPSBzZXJ2ZXIucGx1Z2lucy5lbGFzdGljc2VhcmNoO1xuICAgIGNvbnN0IGNsaWVudFNldHRpbmdzID0gZ2V0Q2xpZW50U2V0dGluZ3MoY29uZmlnKTtcbiAgICByZXR1cm4gY2xpZW50XG4gICAgICAuZ2V0KHsgLi4uY2xpZW50U2V0dGluZ3MgfSlcbiAgICAgIC50aGVuKHJlcyA9PiByZXMuX3NvdXJjZSlcbiAgICAgIC5jYXRjaChwYXJ0aWFsKHVzZXJTZXR0aW5nc05vdEZvdW5kLCBjbGllbnRTZXR0aW5ncy5pZCkpXG4gICAgICAudGhlbih1c2VyID0+IGh5ZHJhdGVVc2VyU2V0dGluZ3ModXNlcikpO1xuICB9XG5cbiAgZnVuY3Rpb24gc2V0TWFueShjaGFuZ2VzKSB7XG4gICAgY29uc3QgeyBjbGllbnQgfSA9IHNlcnZlci5wbHVnaW5zLmVsYXN0aWNzZWFyY2g7XG4gICAgY29uc3QgY2xpZW50U2V0dGluZ3MgPSBnZXRDbGllbnRTZXR0aW5ncyhjb25maWcpO1xuICAgIHJldHVybiBjbGllbnRcbiAgICAgIC51cGRhdGUoe1xuICAgICAgICAuLi5jbGllbnRTZXR0aW5ncyxcbiAgICAgICAgYm9keTogeyBkb2M6IGNoYW5nZXMgfVxuICAgICAgfSlcbiAgICAgIC50aGVuKCgpID0+ICh7fSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gc2V0KGtleSwgdmFsdWUpIHtcbiAgICByZXR1cm4gc2V0TWFueSh7IFtrZXldOiB2YWx1ZSB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZShrZXkpIHtcbiAgICByZXR1cm4gc2V0KGtleSwgbnVsbCk7XG4gIH1cblxuICBmdW5jdGlvbiBtaXJyb3JFc1N0YXR1cygpIHtcbiAgICBjb25zdCBlc1N0YXR1cyA9IGtiblNlcnZlci5zdGF0dXMuZ2V0Rm9yUGx1Z2luSWQoJ2VsYXN0aWNzZWFyY2gnKTtcblxuICAgIGNvcHlTdGF0dXMoKTtcbiAgICBlc1N0YXR1cy5vbignY2hhbmdlJywgY29weVN0YXR1cyk7XG5cbiAgICBmdW5jdGlvbiBjb3B5U3RhdHVzKCkge1xuICAgICAgY29uc3QgeyBzdGF0ZSB9ID0gZXNTdGF0dXM7XG4gICAgICBjb25zdCBzdGF0dXNNZXNzYWdlID0gc3RhdGUgPT09ICdncmVlbicgPyAnUmVhZHknIDogYEVsYXN0aWNzZWFyY2ggcGx1Z2luIGlzICR7c3RhdGV9YDtcbiAgICAgIHN0YXR1c1tzdGF0ZV0oc3RhdHVzTWVzc2FnZSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGh5ZHJhdGVVc2VyU2V0dGluZ3ModXNlcikge1xuICByZXR1cm4gT2JqZWN0LmtleXModXNlcikucmVkdWNlKGV4cGFuZCwge30pO1xuICBmdW5jdGlvbiBleHBhbmQoZXhwYW5kZWQsIGtleSkge1xuICAgIGNvbnN0IHVzZXJWYWx1ZSA9IHVzZXJba2V5XTtcbiAgICBpZiAodXNlclZhbHVlICE9PSBudWxsKSB7XG4gICAgICBleHBhbmRlZFtrZXldID0geyB1c2VyVmFsdWUgfTtcbiAgICB9XG4gICAgcmV0dXJuIGV4cGFuZGVkO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldENsaWVudFNldHRpbmdzKGNvbmZpZykge1xuICBjb25zdCBpbmRleCA9IGNvbmZpZy5nZXQoJ2tpYmFuYS5pbmRleCcpO1xuICBjb25zdCBpZCA9IGNvbmZpZy5nZXQoJ3BrZy52ZXJzaW9uJyk7XG4gIGNvbnN0IHR5cGUgPSAnY29uZmlnJztcbiAgcmV0dXJuIHsgaW5kZXgsIHR5cGUsIGlkIH07XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/ui/settings/index.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/src/ui/settings/index.js",
      "sourcesContent": [
        "import { defaultsDeep, partial } from 'lodash';\nimport defaultsProvider from './defaults';\n\nexport default function setupSettings(kbnServer, server, config) {\n  const status = kbnServer.status.create('ui settings');\n  const uiSettings = {\n    getAll,\n    getDefaults,\n    getUserProvided,\n    set,\n    setMany,\n    remove\n  };\n\n  server.decorate('server', 'uiSettings', () => uiSettings);\n  kbnServer.ready().then(mirrorEsStatus);\n\n  function getAll() {\n    return Promise\n      .all([getDefaults(), getUserProvided()])\n      .then(([defaults, user]) => defaultsDeep(user, defaults));\n  }\n\n  function getDefaults() {\n    return Promise.resolve(defaultsProvider());\n  }\n\n  function userSettingsNotFound(kibanaVersion) {\n    status.red(`Could not find user-provided settings for Kibana ${kibanaVersion}`);\n    return {};\n  }\n\n  function getUserProvided() {\n    const { client } = server.plugins.elasticsearch;\n    const clientSettings = getClientSettings(config);\n    return client\n      .get({ ...clientSettings })\n      .then(res => res._source)\n      .catch(partial(userSettingsNotFound, clientSettings.id))\n      .then(user => hydrateUserSettings(user));\n  }\n\n  function setMany(changes) {\n    const { client } = server.plugins.elasticsearch;\n    const clientSettings = getClientSettings(config);\n    return client\n      .update({\n        ...clientSettings,\n        body: { doc: changes }\n      })\n      .then(() => ({}));\n  }\n\n  function set(key, value) {\n    return setMany({ [key]: value });\n  }\n\n  function remove(key) {\n    return set(key, null);\n  }\n\n  function mirrorEsStatus() {\n    const esStatus = kbnServer.status.getForPluginId('elasticsearch');\n\n    copyStatus();\n    esStatus.on('change', copyStatus);\n\n    function copyStatus() {\n      const { state } = esStatus;\n      const statusMessage = state === 'green' ? 'Ready' : `Elasticsearch plugin is ${state}`;\n      status[state](statusMessage);\n    }\n  }\n}\n\nfunction hydrateUserSettings(user) {\n  return Object.keys(user).reduce(expand, {});\n  function expand(expanded, key) {\n    const userValue = user[key];\n    if (userValue !== null) {\n      expanded[key] = { userValue };\n    }\n    return expanded;\n  }\n}\n\nfunction getClientSettings(config) {\n  const index = config.get('kibana.index');\n  const id = config.get('pkg.version');\n  const type = 'config';\n  return { index, type, id };\n}\n"
      ]
    },
    "mtime": 1467036622893
  },
  "{\"filename\":\"/home/vio/v3metrics/src/ui/settings/defaults.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "moment-timezone",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "moment"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "defaultSettingsProvider"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "defaultSettingsProvider",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "sliced-to-array",
        "to-consumable-array",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }; })();\n\nexports['default'] = defaultSettingsProvider;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i]; return arr2; } else { return Array.from(arr); } }\n\nvar _momentTimezone = require('moment-timezone');\n\nvar _momentTimezone2 = _interopRequireDefault(_momentTimezone);\n\nfunction defaultSettingsProvider() {\n  var weekdays = _momentTimezone2['default'].weekdays().slice();\n\n  var _weekdays = _slicedToArray(weekdays, 1);\n\n  var defaultWeekday = _weekdays[0];\n\n  // wrapped in provider so that a new instance is given to each app/test\n  return {\n    'buildNum': {\n      readonly: true\n    },\n    'query:queryString:options': {\n      value: '{ \"analyze_wildcard\": true }',\n      description: '<a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-query-string-query.html\" target=\"_blank\">Options</a> for the lucene query string parser',\n      type: 'json'\n    },\n    'sort:options': {\n      value: '{ \"unmapped_type\": \"boolean\" }',\n      description: '<a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/search-request-sort.html\" target=\"_blank\">Options</a> for the Elasticsearch sort parameter',\n      type: 'json'\n    },\n    'dateFormat': {\n      value: 'MMMM Do YYYY, HH:mm:ss.SSS',\n      description: 'When displaying a pretty formatted date, use this <a href=\"http://momentjs.com/docs/#/displaying/format/\" target=\"_blank\">format</a>'\n    },\n    'dateFormat:tz': {\n      value: 'Browser',\n      description: 'Which timezone should be used.  \"Browser\" will use the timezone detected by your browser.',\n      type: 'select',\n      options: ['Browser'].concat(_toConsumableArray(_momentTimezone2['default'].tz.names()))\n    },\n    'dateFormat:scaled': {\n      type: 'json',\n      value: '[\\n  [\"\", \"HH:mm:ss.SSS\"],\\n  [\"PT1S\", \"HH:mm:ss\"],\\n  [\"PT1M\", \"HH:mm\"],\\n  [\"PT1H\", \"YYYY-MM-DD HH:mm\"],\\n  [\"P1DT\", \"YYYY-MM-DD\"],\\n  [\"P1YT\", \"YYYY\"]\\n]',\n      description: 'Values that define the format used in situations where timebased' + ' data is rendered in order, and formatted timestamps should adapt to the' + ' interval between measurements. Keys are' + ' <a href=\"http://en.wikipedia.org/wiki/ISO_8601#Time_intervals\" target=\"_blank\">' + 'ISO8601 intervals.</a>'\n    },\n    'dateFormat:dow': {\n      value: defaultWeekday,\n      description: 'What day should weeks start on?',\n      type: 'select',\n      options: weekdays\n    },\n    'defaultIndex': {\n      value: null,\n      description: 'The index to access if no index is set'\n    },\n    'defaultColumns': {\n      value: ['_source'],\n      description: 'Columns displayed by default in the Discovery tab'\n    },\n    'metaFields': {\n      value: ['_source', '_id', '_type', '_index', '_score'],\n      description: 'Fields that exist outside of _source to merge into our document when displaying it'\n    },\n    'discover:sampleSize': {\n      value: 500,\n      description: 'The number of rows to show in the table'\n    },\n    'doc_table:highlight': {\n      value: true,\n      description: 'Highlight results in Discover and Saved Searches Dashboard.' + 'Highlighing makes request slow when working on big documents.'\n    },\n    'courier:maxSegmentCount': {\n      value: 30,\n      description: 'Requests in discover are split into segments to prevent massive requests from being sent to ' + 'elasticsearch. This setting attempts to prevent the list of segments from getting too long, which might ' + 'cause requests to take much longer to process'\n    },\n    'fields:popularLimit': {\n      value: 10,\n      description: 'The top N most popular fields to show'\n    },\n    'histogram:barTarget': {\n      value: 50,\n      description: 'Attempt to generate around this many bar when using \"auto\" interval in date histograms'\n    },\n    'histogram:maxBars': {\n      value: 100,\n      description: 'Never show more than this many bar in date histograms, scale values if needed'\n    },\n    'visualization:tileMap:maxPrecision': {\n      value: 7,\n      description: 'The maximum geoHash precision displayed on tile maps: 7 is high, 10 is very high, ' + '12 is the max. ' + '<a href=\"http://www.elastic.co/guide/en/elasticsearch/reference/current/' + 'search-aggregations-bucket-geohashgrid-aggregation.html#_cell_dimensions_at_the_equator\" target=\"_blank\">' + 'Explanation of cell dimensions</a>'\n    },\n    'visualization:tileMap:WMSdefaults': {\n      value: JSON.stringify({\n        enabled: false,\n        url: 'https://basemap.nationalmap.gov/arcgis/services/USGSTopo/MapServer/WMSServer',\n        options: {\n          version: '1.3.0',\n          layers: '0',\n          format: 'image/png',\n          transparent: true,\n          attribution: 'Maps provided by USGS',\n          styles: ''\n        }\n      }, null, 2),\n      type: 'json',\n      description: 'Default <a href=\"http://leafletjs.com/reference.html#tilelayer-wms\" target=\"_blank\">properties</a> for the WMS map server support in the tile map'\n    },\n    'visualization:colorMapping': {\n      type: 'json',\n      value: JSON.stringify({\n        Count: '#6eadc1'\n      }),\n      description: 'Maps values to specified colors within visualizations'\n    },\n    'visualization:loadingDelay': {\n      value: '2s',\n      description: 'Time to wait before dimming visualizations during query'\n    },\n    'csv:separator': {\n      value: ',',\n      description: 'Separate exported values with this string'\n    },\n    'csv:quoteValues': {\n      value: true,\n      description: 'Should values be quoted in csv exports?'\n    },\n    'history:limit': {\n      value: 10,\n      description: 'In fields that have history (e.g. query inputs), show this many recent values'\n    },\n    'shortDots:enable': {\n      value: false,\n      description: 'Shorten long fields, for example, instead of foo.bar.baz, show f.b.baz'\n    },\n    'truncate:maxHeight': {\n      value: 115,\n      description: 'The maximum height that a cell in a table should occupy. Set to 0 to disable truncation'\n    },\n    'indexPattern:fieldMapping:lookBack': {\n      value: 5,\n      description: 'For index patterns containing timestamps in their names, look for this many recent matching ' + 'patterns from which to query the field mapping'\n    },\n    'format:defaultTypeMap': {\n      type: 'json',\n      value: '{\\n  \"ip\": { \"id\": \"ip\", \"params\": {} },\\n  \"date\": { \"id\": \"date\", \"params\": {} },\\n  \"number\": { \"id\": \"number\", \"params\": {} },\\n  \"_source\": { \"id\": \"_source\", \"params\": {} },\\n  \"_default_\": { \"id\": \"string\", \"params\": {} }\\n}',\n      description: 'Map of the format name to use by default for each field type. ' + '\"_default_\" is used if the field type is not mentioned explicitly'\n    },\n    'format:number:defaultPattern': {\n      type: 'string',\n      value: '0,0.[000]',\n      description: 'Default <a href=\"http://numeraljs.com/\" target=\"_blank\">numeral format</a> for the \"number\" format'\n    },\n    'format:bytes:defaultPattern': {\n      type: 'string',\n      value: '0,0.[000]b',\n      description: 'Default <a href=\"http://numeraljs.com/\" target=\"_blank\">numeral format</a> for the \"bytes\" format'\n    },\n    'format:percent:defaultPattern': {\n      type: 'string',\n      value: '0,0.[000]%',\n      description: 'Default <a href=\"http://numeraljs.com/\" target=\"_blank\">numeral format</a> for the \"percent\" format'\n    },\n    'format:currency:defaultPattern': {\n      type: 'string',\n      value: '($0,0.[00])',\n      description: 'Default <a href=\"http://numeraljs.com/\" target=\"_blank\">numeral format</a> for the \"currency\" format'\n    },\n    'savedObjects:perPage': {\n      type: 'number',\n      value: 5,\n      description: 'Number of objects to show per page in the load dialog'\n    },\n    'timepicker:timeDefaults': {\n      type: 'json',\n      value: '{\\n  \"from\": \"now-15m\",\\n  \"to\": \"now\",\\n  \"mode\": \"quick\"\\n}',\n      description: 'The timefilter selection to use when Kibana is started without one'\n    },\n    'timepicker:refreshIntervalDefaults': {\n      type: 'json',\n      value: '{\\n  \"display\": \"Off\",\\n  \"pause\": false,\\n  \"value\": 0\\n}',\n      description: 'The timefilter\\'s default refresh interval'\n    },\n    'dashboard:defaultDarkTheme': {\n      value: false,\n      description: 'New dashboards use dark theme by default'\n    },\n    'filters:pinnedByDefault': {\n      value: false,\n      description: 'Whether the filters should have a global state (be pinned) by default'\n    },\n    'notifications:banner': {\n      type: 'markdown',\n      description: 'A custom banner intended for temporary notices to all users. <a href=\"https://help.github.com/articles/basic-writing-and-formatting-syntax/\" target=\"_blank\">Markdown supported</a>.',\n      value: ''\n    },\n    'notifications:lifetime:banner': {\n      value: 3000000,\n      description: 'The time in milliseconds which a banner notification ' + 'will be displayed on-screen for. Setting to Infinity will disable.'\n    },\n    'notifications:lifetime:error': {\n      value: 300000,\n      description: 'The time in milliseconds which an error notification ' + 'will be displayed on-screen for. Setting to Infinity will disable.'\n    },\n    'notifications:lifetime:warning': {\n      value: 10000,\n      description: 'The time in milliseconds which a warning notification ' + 'will be displayed on-screen for. Setting to Infinity will disable.'\n    },\n    'notifications:lifetime:info': {\n      value: 5000,\n      description: 'The time in milliseconds which an information notification ' + 'will be displayed on-screen for. Setting to Infinity will disable.'\n    }\n  };\n}\n\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3VpL3NldHRpbmdzL2RlZmF1bHRzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O3FCQUV3Qix1QkFBdUI7Ozs7Ozs4QkFGNUIsaUJBQWlCOzs7O0FBRXJCLFNBQVMsdUJBQXVCLEdBQUc7QUFDaEQsTUFBTSxRQUFRLEdBQUcsNEJBQU8sUUFBUSxFQUFFLENBQUMsS0FBSyxFQUFFLENBQUM7O2lDQUNsQixRQUFROztNQUExQixjQUFjOzs7QUFHckIsU0FBTztBQUNMLGNBQVUsRUFBRTtBQUNWLGNBQVEsRUFBRSxJQUFJO0tBQ2Y7QUFDRCwrQkFBMkIsRUFBRTtBQUMzQixXQUFLLEVBQUUsOEJBQThCO0FBQ3JDLGlCQUFXLEVBQUUsNEtBQTRLO0FBQ3pMLFVBQUksRUFBRSxNQUFNO0tBQ2I7QUFDRCxrQkFBYyxFQUFFO0FBQ2QsV0FBSyxFQUFFLGdDQUFnQztBQUN2QyxpQkFBVyxFQUFFLHFLQUFxSztBQUNsTCxVQUFJLEVBQUUsTUFBTTtLQUNiO0FBQ0QsZ0JBQVksRUFBRTtBQUNaLFdBQUssRUFBRSw0QkFBNEI7QUFDbkMsaUJBQVcsRUFBRSxzSUFBc0k7S0FDcEo7QUFDRCxtQkFBZSxFQUFFO0FBQ2YsV0FBSyxFQUFFLFNBQVM7QUFDaEIsaUJBQVcsRUFBRSwyRkFBMkY7QUFDeEcsVUFBSSxFQUFFLFFBQVE7QUFDZCxhQUFPLEdBQUcsU0FBUyw0QkFBSyw0QkFBTyxFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUM7S0FDM0M7QUFDRCx1QkFBbUIsRUFBRTtBQUNuQixVQUFJLEVBQUUsTUFBTTtBQUNaLFdBQUssZ0tBUVQ7QUFDSSxpQkFBVyxFQUNULGtFQUFrRSxHQUNsRSwwRUFBMEUsR0FDMUUsMENBQTBDLEdBQzFDLGtGQUFrRixHQUNsRix3QkFBd0IsQUFDekI7S0FDRjtBQUNELG9CQUFnQixFQUFFO0FBQ2hCLFdBQUssRUFBRSxjQUFjO0FBQ3JCLGlCQUFXLEVBQUUsaUNBQWlDO0FBQzlDLFVB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LFdBQUssRUFBRSxFQUFFO0tBQ1Y7QUFDRCxtQ0FBK0IsRUFBRTtBQUMvQixXQUFLLEVBQUUsT0FBTztBQUNkLGlCQUFXLEVBQUUsdURBQXVELEdBQ3BFLG9FQUFvRTtLQUNyRTtBQUNELGtDQUE4QixFQUFFO0FBQzlCLFdBQUssRUFBRSxNQUFNO0FBQ2IsaUJBQVcsRUFBRSx1REFBdUQsR0FDcEUsb0VBQW9FO0tBQ3JFO0FBQ0Qsb0NBQWdDLEVBQUU7QUFDaEMsV0FBSyxFQUFFLEtBQUs7QUFDWixpQkFBVyxFQUFFLHdEQUF3RCxHQUNuRSxvRUFBb0U7S0FDdkU7QUFDRCxpQ0FBNkIsRUFBRTtBQUM3QixXQUFLLEVBQUUsSUFBSTtBQUNYLGlCQUFXLEVBQUUsNkRBQTZELEdBQ3hFLG9FQUFvRTtLQUN2RTtHQUNGLENBQUM7Q0FDSDs7QUFBQSxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3VpL3NldHRpbmdzL2RlZmF1bHRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQtdGltZXpvbmUnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBkZWZhdWx0U2V0dGluZ3NQcm92aWRlcigpIHtcbiAgY29uc3Qgd2Vla2RheXMgPSBtb21lbnQud2Vla2RheXMoKS5zbGljZSgpO1xuICBjb25zdCBbZGVmYXVsdFdlZWtkYXldID0gd2Vla2RheXM7XG5cbiAgLy8gd3JhcHBlZCBpbiBwcm92aWRlciBzbyB0aGF0IGEgbmV3IGluc3RhbmNlIGlzIGdpdmVuIHRvIGVhY2ggYXBwL3Rlc3RcbiAgcmV0dXJuIHtcbiAgICAnYnVpbGROdW0nOiB7XG4gICAgICByZWFkb25seTogdHJ1ZVxuICAgIH0sXG4gICAgJ3F1ZXJ5OnF1ZXJ5U3RyaW5nOm9wdGlvbnMnOiB7XG4gICAgICB2YWx1ZTogJ3sgXCJhbmFseXplX3dpbGRjYXJkXCI6IHRydWUgfScsXG4gICAgICBkZXNjcmlwdGlvbjogJzxhIGhyZWY9XCJodHRwczovL3d3dy5lbGFzdGljLmNvL2d1aWRlL2VuL2VsYXN0aWNzZWFyY2gvcmVmZXJlbmNlL2N1cnJlbnQvcXVlcnktZHNsLXF1ZXJ5LXN0cmluZy1xdWVyeS5odG1sXCIgdGFyZ2V0PVwiX2JsYW5rXCI+T3B0aW9uczwvYT4gZm9yIHRoZSBsdWNlbmUgcXVlcnkgc3RyaW5nIHBhcnNlcicsXG4gICAgICB0eXBlOiAnanNvbidcbiAgICB9LFxuICAgICdzb3J0Om9wdGlvbnMnOiB7XG4gICAgICB2YWx1ZTogJ3sgXCJ1bm1hcHBlZF90eXBlXCI6IFwiYm9vbGVhblwiIH0nLFxuICAgICAgZGVzY3JpcHRpb246ICc8YSBocmVmPVwiaHR0cHM6Ly93d3cuZWxhc3RpYy5jby9ndWlkZS9lbi9lbGFzdGljc2VhcmNoL3JlZmVyZW5jZS9jdXJyZW50L3NlYXJjaC1yZXF1ZXN0LXNvcnQuaHRtbFwiIHRhcmdldD1cIl9ibGFua1wiPk9wdGlvbnM8L2E+IGZvciB0aGUgRWxhc3RpY3NlYXJjaCBzb3J0IHBhcmFtZXRlcicsXG4gICAgICB0eXBlOiAnanNvbidcbiAgICB9LFxuICAgICdkYXRlRm9ybWF0Jzoge1xuICAgICAgdmFsdWU6ICdNTU1NIERvIFlZWVksIEhIOm1tOnNzLlNTUycsXG4gICAgICBkZXNjcmlwdGlvbjogJ1doZW4gZGlzcGxheWluZyBhIHByZXR0eSBmb3JtYXR0ZWQgZGF0ZSwgdXNlIHRoaXMgPGEgaHJlZj1cImh0dHA6Ly9tb21lbnRqcy5jb20vZG9jcy8jL2Rpc3BsYXlpbmcvZm9ybWF0L1wiIHRhcmdldD1cIl9ibGFua1wiPmZvcm1hdDwvYT4nLFxuICAgIH0sXG4gICAgJ2RhdGVGb3JtYXQ6dHonOiB7XG4gICAgICB2YWx1ZTogJ0Jyb3dzZXInLFxuICAgICAgZGVzY3JpcHRpb246ICdXaGljaCB0aW1lem9uZSBzaG91bGQgYmUgdXNlZC4gIFwiQnJvd3NlclwiIHdpbGwgdXNlIHRoZSB0aW1lem9uZSBkZXRlY3RlZCBieSB5b3VyIGJyb3dzZXIuJyxcbiAgICAgIHR5cGU6ICdzZWxlY3QnLFxuICAgICAgb3B0aW9uczogWydCcm93c2VyJywgLi4ubW9tZW50LnR6Lm5hbWVzKCldXG4gICAgfSxcbiAgICAnZGF0ZUZvcm1hdDpzY2FsZWQnOiB7XG4gICAgICB0eXBlOiAnanNvbicsXG4gICAgICB2YWx1ZTpcbmBbXG4gIFtcIlwiLCBcIkhIOm1tOnNzLlNTU1wiXSxcbiAgW1wiUFQxU1wiLCBcIkhIOm1tOnNzXCJdLFxuICBbXCJQVDFNXCIsIFwiSEg6bW1cIl0sXG4gIFtcIlBUMUhcIiwgXCJZWVlZLU1NLUREIEhIOm1tXCJdLFxuICBbXCJQMURUXCIsIFwiWVlZWS1NTS1ERFwiXSxcbiAgW1wiUDFZVFwiLCBcIllZWVlcIl1cbl1gLFxuICAgICAgZGVzY3JpcHRpb246IChcbiAgICAgICAgJ1ZhbHVlcyB0aGF0IGRlZmluZSB0aGUgZm9ybWF0IHVzZWQgaW4gc2l0dWF0aW9ucyB3aGVyZSB0aW1lYmFzZWQnICtcbiAgICAgICAgJyBkYXRhIGlzIHJlbmRlcmVkIGluIG9yZGVyLCBhbmQgZm9ybWF0dGVkIHRpbWVzdGFtcHMgc2hvdWxkIGFkYXB0IHRvIHRoZScgK1xuICAgICAgICAnIGludGVydmFsIGJldHdlZW4gbWVhc3VyZW1lbnRzLiBLZXlzIGFyZScgK1xuICAgICAgICAnIDxhIGhyZWY9XCJodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT184NjAxI1RpbWVfaW50ZXJ2YWxzXCIgdGFyZ2V0PVwiX2JsYW5rXCI+JyArXG4gICAgICAgICdJU084NjAxIGludGVydmFscy48L2E+J1xuICAgICAgKVxuICAgIH0sXG4gICAgJ2RhdGVGb3JtYXQ6ZG93Jzoge1xuICAgICAgdmFsdWU6IGRlZmF1bHRXZWVrZGF5LFxuICAgICAgZGVzY3JpcHRpb246ICdXaGF0IGRheSBzaG91bGQgd2Vla3Mgc3RhcnQgb24/JyxcbiAgICAgIHR5cGU6ICdzZWxlY3QnLFxuICAgICAgb3B0aW9uczogd2Vla2RheXNcbiAgICB9LFxuICAgICdkZWZhdWx0SW5kZXgnOiB7XG4gICAgICB2YWx1ZTogbnVsbCxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGhlIGluZGV4IHRvIGFjY2VzcyBpZiBubyBpbmRleCBpcyBzZXQnLFxuICAgIH0sXG4gICAgJ2RlZmF1bHRDb2x1bW5zJzoge1xuICAgICAgdmFsdWU6IFsnX3NvdXJjZSddLFxuICAgICAgZGVzY3JpcHRpb246ICdDb2x1bW5zIGRpc3BsYXllZCBieSBkZWZhdWx0IGluIHRoZSBEaXNjb3ZlcnkgdGFiJyxcbiAgICB9LFxuICAgICdtZXRhRmllbGRzJzoge1xuICAgICAgdmFsdWU6IFsnX3NvdXJjZScsICdfaWQnLCAnX3R5cGUnLCAnX2luZGV4JywgJ19zY29yZSddLFxuICAgICAgZGVzY3JpcHRpb246ICdGaWVsZHMgdGhhdCBleGlzdCBvdXRzaWRlIG9mIF9zb3VyY2UgdG8gbWVyZ2UgaW50byBvdXIgZG9jdW1lbnQgd2hlbiBkaXNwbGF5aW5nIGl0JyxcbiAgICB9LFxuICAgICdkaXNjb3ZlcjpzYW1wbGVTaXplJzoge1xuICAgICAgdmFsdWU6IDUwMCxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGhlIG51bWJlciBvZiByb3dzIHRvIHNob3cgaW4gdGhlIHRhYmxlJyxcbiAgICB9LFxuICAgICdkb2NfdGFibGU6aGlnaGxpZ2h0Jzoge1xuICAgICAgdmFsdWU6IHRydWUsXG4gICAgICBkZXNjcmlwdGlvbjogJ0hpZ2hsaWdodCByZXN1bHRzIGluIERpc2NvdmVyIGFuZCBTYXZlZCBTZWFyY2hlcyBEYXNoYm9hcmQuJyArXG4gICAgICAgICdIaWdobGlnaGluZyBtYWtlcyByZXF1ZXN0IHNsb3cgd2hlbiB3b3JraW5nIG9uIGJpZyBkb2N1bWVudHMuJyxcbiAgICB9LFxuICAgICdjb3VyaWVyOm1heFNlZ21lbnRDb3VudCc6IHtcbiAgICAgIHZhbHVlOiAzMCxcbiAgICAgIGRlc2NyaXB0aW9uOiAnUmVxdWVzdHMgaW4gZGlzY292ZXIgYXJlIHNwbGl0IGludG8gc2VnbWVudHMgdG8gcHJldmVudCBtYXNzaXZlIHJlcXVlc3RzIGZyb20gYmVpbmcgc2VudCB0byAnICtcbiAgICAgICAgJ2VsYXN0aWNzZWFyY2guIFRoaXMgc2V0dGluZyBhdHRlbXB0cyB0byBwcmV2ZW50IHRoZSBsaXN0IG9mIHNlZ21lbnRzIGZyb20gZ2V0dGluZyB0b28gbG9uZywgd2hpY2ggbWlnaHQgJyArXG4gICAgICAgICdjYXVzZSByZXF1ZXN0cyB0byB0YWtlIG11Y2ggbG9uZ2VyIHRvIHByb2Nlc3MnXG4gICAgfSxcbiAgICAnZmllbGRzOnBvcHVsYXJMaW1pdCc6IHtcbiAgICAgIHZhbHVlOiAxMCxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGhlIHRvcCBOIG1vc3QgcG9wdWxhciBmaWVsZHMgdG8gc2hvdycsXG4gICAgfSxcbiAgICAnaGlzdG9ncmFtOmJhclRhcmdldCc6IHtcbiAgICAgIHZhbHVlOiA1MCxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQXR0ZW1wdCB0byBnZW5lcmF0ZSBhcm91bmQgdGhpcyBtYW55IGJhciB3aGVuIHVzaW5nIFwiYXV0b1wiIGludGVydmFsIGluIGRhdGUgaGlzdG9ncmFtcycsXG4gICAgfSxcbiAgICAnaGlzdG9ncmFtOm1heEJhcnMnOiB7XG4gICAgICB2YWx1ZTogMTAwLFxuICAgICAgZGVzY3JpcHRpb246ICdOZXZlciBzaG93IG1vcmUgdGhhbiB0aGlzIG1hbnkgYmFyIGluIGRhdGUgaGlzdG9ncmFtcywgc2NhbGUgdmFsdWVzIGlmIG5lZWRlZCcsXG4gICAgfSxcbiAgICAndmlzdWFsaXphdGlvbjp0aWxlTWFwOm1heFByZWNpc2lvbic6IHtcbiAgICAgIHZhbHVlOiA3LFxuICAgICAgZGVzY3JpcHRpb246ICdUaGUgbWF4aW11bSBnZW9IYXNoIHByZWNpc2lvbiBkaXNwbGF5ZWQgb24gdGlsZSBtYXBzOiA3IGlzIGhpZ2gsIDEwIGlzIHZlcnkgaGlnaCwgJyArXG4gICAgICAnMTIgaXMgdGhlIG1heC4gJyArXG4gICAgICAnPGEgaHJlZj1cImh0dHA6Ly93d3cuZWxhc3RpYy5jby9ndWlkZS9lbi9lbGFzdGljc2VhcmNoL3JlZmVyZW5jZS9jdXJyZW50LycgK1xuICAgICAgJ3NlYXJjaC1hZ2dyZWdhdGlvbnMtYnVja2V0LWdlb2hhc2hncmlkLWFnZ3JlZ2F0aW9uLmh0bWwjX2NlbGxfZGltZW5zaW9uc19hdF90aGVfZXF1YXRvclwiIHRhcmdldD1cIl9ibGFua1wiPicgK1xuICAgICAgJ0V4cGxhbmF0aW9uIG9mIGNlbGwgZGltZW5zaW9uczwvYT4nLFxuICAgIH0sXG4gICAgJ3Zpc3VhbGl6YXRpb246dGlsZU1hcDpXTVNkZWZhdWx0cyc6IHtcbiAgICAgIHZhbHVlOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGVuYWJsZWQ6IGZhbHNlLFxuICAgICAgICB1cmw6ICdodHRwczovL2Jhc2VtYXAubmF0aW9uYWxtYXAuZ292L2FyY2dpcy9zZXJ2aWNlcy9VU0dTVG9wby9NYXBTZXJ2ZXIvV01TU2VydmVyJyxcbiAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgIHZlcnNpb246ICcxLjMuMCcsXG4gICAgICAgICAgbGF5ZXJzOiAnMCcsXG4gICAgICAgICAgZm9ybWF0OiAnaW1hZ2UvcG5nJyxcbiAgICAgICAgICB0cmFuc3BhcmVudDogdHJ1ZSxcbiAgICAgICAgICBhdHRyaWJ1dGlvbjogJ01hcHMgcHJvdmlkZWQgYnkgVVNHUycsXG4gICAgICAgICAgc3R5bGVzOiAnJyxcbiAgICAgICAgfVxuICAgICAgfSwgbnVsbCwgMiksXG4gICAgICB0eXBlOiAnanNvbicsXG4gICAgICBkZXNjcmlwdGlvbjogJ0RlZmF1bHQgPGEgaHJlZj1cImh0dHA6Ly9sZWFmbGV0anMuY29tL3JlZmVyZW5jZS5odG1sI3RpbGVsYXllci13bXNcIiB0YXJnZXQ9XCJfYmxhbmtcIj5wcm9wZXJ0aWVzPC9hPiBmb3IgdGhlIFdNUyBtYXAgc2VydmVyIHN1cHBvcnQgaW4gdGhlIHRpbGUgbWFwJ1xuICAgIH0sXG4gICAgJ3Zpc3VhbGl6YXRpb246Y29sb3JNYXBwaW5nJzoge1xuICAgICAgdHlwZTogJ2pzb24nLFxuICAgICAgdmFsdWU6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgQ291bnQ6ICcjNmVhZGMxJ1xuICAgICAgfSksXG4gICAgICBkZXNjcmlwdGlvbjogJ01hcHMgdmFsdWVzIHRvIHNwZWNpZmllZCBjb2xvcnMgd2l0aGluIHZpc3VhbGl6YXRpb25zJ1xuICAgIH0sXG4gICAgJ3Zpc3VhbGl6YXRpb246bG9hZGluZ0RlbGF5Jzoge1xuICAgICAgdmFsdWU6ICcycycsXG4gICAgICBkZXNjcmlwdGlvbjogJ1RpbWUgdG8gd2FpdCBiZWZvcmUgZGltbWluZyB2aXN1YWxpemF0aW9ucyBkdXJpbmcgcXVlcnknXG4gICAgfSxcbiAgICAnY3N2OnNlcGFyYXRvcic6IHtcbiAgICAgIHZhbHVlOiAnLCcsXG4gICAgICBkZXNjcmlwdGlvbjogJ1NlcGFyYXRlIGV4cG9ydGVkIHZhbHVlcyB3aXRoIHRoaXMgc3RyaW5nJyxcbiAgICB9LFxuICAgICdjc3Y6cXVvdGVWYWx1ZXMnOiB7XG4gICAgICB2YWx1ZTogdHJ1ZSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnU2hvdWxkIHZhbHVlcyBiZSBxdW90ZWQgaW4gY3N2IGV4cG9ydHM/JyxcbiAgICB9LFxuICAgICdoaXN0b3J5OmxpbWl0Jzoge1xuICAgICAgdmFsdWU6IDEwLFxuICAgICAgZGVzY3JpcHRpb246ICdJbiBmaWVsZHMgdGhhdCBoYXZlIGhpc3RvcnkgKGUuZy4gcXVlcnkgaW5wdXRzKSwgc2hvdyB0aGlzIG1hbnkgcmVjZW50IHZhbHVlcycsXG4gICAgfSxcbiAgICAnc2hvcnREb3RzOmVuYWJsZSc6IHtcbiAgICAgIHZhbHVlOiBmYWxzZSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnU2hvcnRlbiBsb25nIGZpZWxkcywgZm9yIGV4YW1wbGUsIGluc3RlYWQgb2YgZm9vLmJhci5iYXosIHNob3cgZi5iLmJheicsXG4gICAgfSxcbiAgICAndHJ1bmNhdGU6bWF4SGVpZ2h0Jzoge1xuICAgICAgdmFsdWU6IDExNSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGhlIG1heGltdW0gaGVpZ2h0IHRoYXQgYSBjZWxsIGluIGEgdGFibGUgc2hvdWxkIG9jY3VweS4gU2V0IHRvIDAgdG8gZGlzYWJsZSB0cnVuY2F0aW9uJ1xuICAgIH0sXG4gICAgJ2luZGV4UGF0dGVybjpmaWVsZE1hcHBpbmc6bG9va0JhY2snOiB7XG4gICAgICB2YWx1ZTogNSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnRm9yIGluZGV4IHBhdHRlcm5zIGNvbnRhaW5pbmcgdGltZXN0YW1wcyBpbiB0aGVpciBuYW1lcywgbG9vayBmb3IgdGhpcyBtYW55IHJlY2VudCBtYXRjaGluZyAnICtcbiAgICAgICAgJ3BhdHRlcm5zIGZyb20gd2hpY2ggdG8gcXVlcnkgdGhlIGZpZWxkIG1hcHBpbmcnXG4gICAgfSxcbiAgICAnZm9ybWF0OmRlZmF1bHRUeXBlTWFwJzoge1xuICAgICAgdHlwZTogJ2pzb24nLFxuICAgICAgdmFsdWU6XG5ge1xuICBcImlwXCI6IHsgXCJpZFwiOiBcImlwXCIsIFwicGFyYW1zXCI6IHt9IH0sXG4gIFwiZGF0ZVwiOiB7IFwiaWRcIjogXCJkYXRlXCIsIFwicGFyYW1zXCI6IHt9IH0sXG4gIFwibnVtYmVyXCI6IHsgXCJpZFwiOiBcIm51bWJlclwiLCBcInBhcmFtc1wiOiB7fSB9LFxuICBcIl9zb3VyY2VcIjogeyBcImlkXCI6IFwiX3NvdXJjZVwiLCBcInBhcmFtc1wiOiB7fSB9LFxuICBcIl9kZWZhdWx0X1wiOiB7IFwiaWRcIjogXCJzdHJpbmdcIiwgXCJwYXJhbXNcIjoge30gfVxufWAsXG4gICAgICBkZXNjcmlwdGlvbjogJ01hcCBvZiB0aGUgZm9ybWF0IG5hbWUgdG8gdXNlIGJ5IGRlZmF1bHQgZm9yIGVhY2ggZmllbGQgdHlwZS4gJyArXG4gICAgICAgICdcIl9kZWZhdWx0X1wiIGlzIHVzZWQgaWYgdGhlIGZpZWxkIHR5cGUgaXMgbm90IG1lbnRpb25lZCBleHBsaWNpdGx5J1xuICAgIH0sXG4gICAgJ2Zvcm1hdDpudW1iZXI6ZGVmYXVsdFBhdHRlcm4nOiB7XG4gICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgIHZhbHVlOiAnMCwwLlswMDBdJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnRGVmYXVsdCA8YSBocmVmPVwiaHR0cDovL251bWVyYWxqcy5jb20vXCIgdGFyZ2V0PVwiX2JsYW5rXCI+bnVtZXJhbCBmb3JtYXQ8L2E+IGZvciB0aGUgXCJudW1iZXJcIiBmb3JtYXQnXG4gICAgfSxcbiAgICAnZm9ybWF0OmJ5dGVzOmRlZmF1bHRQYXR0ZXJuJzoge1xuICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICB2YWx1ZTogJzAsMC5bMDAwXWInLFxuICAgICAgZGVzY3JpcHRpb246ICdEZWZhdWx0IDxhIGhyZWY9XCJodHRwOi8vbnVtZXJhbGpzLmNvbS9cIiB0YXJnZXQ9XCJfYmxhbmtcIj5udW1lcmFsIGZvcm1hdDwvYT4gZm9yIHRoZSBcImJ5dGVzXCIgZm9ybWF0J1xuICAgIH0sXG4gICAgJ2Zvcm1hdDpwZXJjZW50OmRlZmF1bHRQYXR0ZXJuJzoge1xuICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICB2YWx1ZTogJzAsMC5bMDAwXSUnLFxuICAgICAgZGVzY3JpcHRpb246ICdEZWZhdWx0IDxhIGhyZWY9XCJodHRwOi8vbnVtZXJhbGpzLmNvbS9cIiB0YXJnZXQ9XCJfYmxhbmtcIj5udW1lcmFsIGZvcm1hdDwvYT4gZm9yIHRoZSBcInBlcmNlbnRcIiBmb3JtYXQnXG4gICAgfSxcbiAgICAnZm9ybWF0OmN1cnJlbmN5OmRlZmF1bHRQYXR0ZXJuJzoge1xuICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICB2YWx1ZTogJygkMCwwLlswMF0pJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnRGVmYXVsdCA8YSBocmVmPVwiaHR0cDovL251bWVyYWxqcy5jb20vXCIgdGFyZ2V0PVwiX2JsYW5rXCI+bnVtZXJhbCBmb3JtYXQ8L2E+IGZvciB0aGUgXCJjdXJyZW5jeVwiIGZvcm1hdCdcbiAgICB9LFxuICAgICdzYXZlZE9iamVjdHM6cGVyUGFnZSc6IHtcbiAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgdmFsdWU6IDUsXG4gICAgICBkZXNjcmlwdGlvbjogJ051bWJlciBvZiBvYmplY3RzIHRvIHNob3cgcGVyIHBhZ2UgaW4gdGhlIGxvYWQgZGlhbG9nJ1xuICAgIH0sXG4gICAgJ3RpbWVwaWNrZXI6dGltZURlZmF1bHRzJzoge1xuICAgICAgdHlwZTogJ2pzb24nLFxuICAgICAgdmFsdWU6XG5ge1xuICBcImZyb21cIjogXCJub3ctMTVtXCIsXG4gIFwidG9cIjogXCJub3dcIixcbiAgXCJtb2RlXCI6IFwicXVpY2tcIlxufWAsXG4gICAgICBkZXNjcmlwdGlvbjogJ1RoZSB0aW1lZmlsdGVyIHNlbGVjdGlvbiB0byB1c2Ugd2hlbiBLaWJhbmEgaXMgc3RhcnRlZCB3aXRob3V0IG9uZSdcbiAgICB9LFxuICAgICd0aW1lcGlja2VyOnJlZnJlc2hJbnRlcnZhbERlZmF1bHRzJzoge1xuICAgICAgdHlwZTogJ2pzb24nLFxuICAgICAgdmFsdWU6XG5ge1xuICBcImRpc3BsYXlcIjogXCJPZmZcIixcbiAgXCJwYXVzZVwiOiBmYWxzZSxcbiAgXCJ2YWx1ZVwiOiAwXG59YCxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGhlIHRpbWVmaWx0ZXJcXCdzIGRlZmF1bHQgcmVmcmVzaCBpbnRlcnZhbCdcbiAgICB9LFxuICAgICdkYXNoYm9hcmQ6ZGVmYXVsdERhcmtUaGVtZSc6IHtcbiAgICAgIHZhbHVlOiBmYWxzZSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnTmV3IGRhc2hib2FyZHMgdXNlIGRhcmsgdGhlbWUgYnkgZGVmYXVsdCdcbiAgICB9LFxuICAgICdmaWx0ZXJzOnBpbm5lZEJ5RGVmYXVsdCc6IHtcbiAgICAgIHZhbHVlOiBmYWxzZSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnV2hldGhlciB0aGUgZmlsdGVycyBzaG91bGQgaGF2ZSBhIGdsb2JhbCBzdGF0ZSAoYmUgcGlubmVkKSBieSBkZWZhdWx0J1xuICAgIH0sXG4gICAgJ25vdGlmaWNhdGlvbnM6YmFubmVyJzoge1xuICAgICAgdHlwZTogJ21hcmtkb3duJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQSBjdXN0b20gYmFubmVyIGludGVuZGVkIGZvciB0ZW1wb3Jhcnkgbm90aWNlcyB0byBhbGwgdXNlcnMuIDxhIGhyZWY9XCJodHRwczovL2hlbHAuZ2l0aHViLmNvbS9hcnRpY2xlcy9iYXNpYy13cml0aW5nLWFuZC1mb3JtYXR0aW5nLXN5bnRheC9cIiB0YXJnZXQ9XCJfYmxhbmtcIj5NYXJrZG93biBzdXBwb3J0ZWQ8L2E+LicsXG4gICAgICB2YWx1ZTogJydcbiAgICB9LFxuICAgICdub3RpZmljYXRpb25zOmxpZmV0aW1lOmJhbm5lcic6IHtcbiAgICAgIHZhbHVlOiAzMDAwMDAwLFxuICAgICAgZGVzY3JpcHRpb246ICdUaGUgdGltZSBpbiBtaWxsaXNlY29uZHMgd2hpY2ggYSBiYW5uZXIgbm90aWZpY2F0aW9uICcgK1xuICAgICAgJ3dpbGwgYmUgZGlzcGxheWVkIG9uLXNjcmVlbiBmb3IuIFNldHRpbmcgdG8gSW5maW5pdHkgd2lsbCBkaXNhYmxlLidcbiAgICB9LFxuICAgICdub3RpZmljYXRpb25zOmxpZmV0aW1lOmVycm9yJzoge1xuICAgICAgdmFsdWU6IDMwMDAwMCxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGhlIHRpbWUgaW4gbWlsbGlzZWNvbmRzIHdoaWNoIGFuIGVycm9yIG5vdGlmaWNhdGlvbiAnICtcbiAgICAgICd3aWxsIGJlIGRpc3BsYXllZCBvbi1zY3JlZW4gZm9yLiBTZXR0aW5nIHRvIEluZmluaXR5IHdpbGwgZGlzYWJsZS4nXG4gICAgfSxcbiAgICAnbm90aWZpY2F0aW9uczpsaWZldGltZTp3YXJuaW5nJzoge1xuICAgICAgdmFsdWU6IDEwMDAwLFxuICAgICAgZGVzY3JpcHRpb246ICdUaGUgdGltZSBpbiBtaWxsaXNlY29uZHMgd2hpY2ggYSB3YXJuaW5nIG5vdGlmaWNhdGlvbiAnICtcbiAgICAgICAgJ3dpbGwgYmUgZGlzcGxheWVkIG9uLXNjcmVlbiBmb3IuIFNldHRpbmcgdG8gSW5maW5pdHkgd2lsbCBkaXNhYmxlLidcbiAgICB9LFxuICAgICdub3RpZmljYXRpb25zOmxpZmV0aW1lOmluZm8nOiB7XG4gICAgICB2YWx1ZTogNTAwMCxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGhlIHRpbWUgaW4gbWlsbGlzZWNvbmRzIHdoaWNoIGFuIGluZm9ybWF0aW9uIG5vdGlmaWNhdGlvbiAnICtcbiAgICAgICAgJ3dpbGwgYmUgZGlzcGxheWVkIG9uLXNjcmVlbiBmb3IuIFNldHRpbmcgdG8gSW5maW5pdHkgd2lsbCBkaXNhYmxlLidcbiAgICB9LFxuICB9O1xufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/ui/settings/defaults.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/src/ui/settings/defaults.js",
      "sourcesContent": [
        "import moment from 'moment-timezone';\n\nexport default function defaultSettingsProvider() {\n  const weekdays = moment.weekdays().slice();\n  const [defaultWeekday] = weekdays;\n\n  // wrapped in provider so that a new instance is given to each app/test\n  return {\n    'buildNum': {\n      readonly: true\n    },\n    'query:queryString:options': {\n      value: '{ \"analyze_wildcard\": true }',\n      description: '<a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-query-string-query.html\" target=\"_blank\">Options</a> for the lucene query string parser',\n      type: 'json'\n    },\n    'sort:options': {\n      value: '{ \"unmapped_type\": \"boolean\" }',\n      description: '<a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/search-request-sort.html\" target=\"_blank\">Options</a> for the Elasticsearch sort parameter',\n      type: 'json'\n    },\n    'dateFormat': {\n      value: 'MMMM Do YYYY, HH:mm:ss.SSS',\n      description: 'When displaying a pretty formatted date, use this <a href=\"http://momentjs.com/docs/#/displaying/format/\" target=\"_blank\">format</a>',\n    },\n    'dateFormat:tz': {\n      value: 'Browser',\n      description: 'Which timezone should be used.  \"Browser\" will use the timezone detected by your browser.',\n      type: 'select',\n      options: ['Browser', ...moment.tz.names()]\n    },\n    'dateFormat:scaled': {\n      type: 'json',\n      value:\n`[\n  [\"\", \"HH:mm:ss.SSS\"],\n  [\"PT1S\", \"HH:mm:ss\"],\n  [\"PT1M\", \"HH:mm\"],\n  [\"PT1H\", \"YYYY-MM-DD HH:mm\"],\n  [\"P1DT\", \"YYYY-MM-DD\"],\n  [\"P1YT\", \"YYYY\"]\n]`,\n      description: (\n        'Values that define the format used in situations where timebased' +\n        ' data is rendered in order, and formatted timestamps should adapt to the' +\n        ' interval between measurements. Keys are' +\n        ' <a href=\"http://en.wikipedia.org/wiki/ISO_8601#Time_intervals\" target=\"_blank\">' +\n        'ISO8601 intervals.</a>'\n      )\n    },\n    'dateFormat:dow': {\n      value: defaultWeekday,\n      description: 'What day should weeks start on?',\n      type: 'select',\n      options: weekdays\n    },\n    'defaultIndex': {\n      value: null,\n      description: 'The index to access if no index is set',\n    },\n    'defaultColumns': {\n      value: ['_source'],\n      description: 'Columns displayed by default in the Discovery tab',\n    },\n    'metaFields': {\n      value: ['_source', '_id', '_type', '_index', '_score'],\n      description: 'Fields that exist outside of _source to merge into our document when displaying it',\n    },\n    'discover:sampleSize': {\n      value: 500,\n      description: 'The number of rows to show in the table',\n    },\n    'doc_table:highlight': {\n      value: true,\n      description: 'Highlight results in Discover and Saved Searches Dashboard.' +\n        'Highlighing makes request slow when working on big documents.',\n    },\n    'courier:maxSegmentCount': {\n      value: 30,\n      description: 'Requests in discover are split into segments to prevent massive requests from being sent to ' +\n        'elasticsearch. This setting attempts to prevent the list of segments from getting too long, which might ' +\n        'cause requests to take much longer to process'\n    },\n    'fields:popularLimit': {\n      value: 10,\n      description: 'The top N most popular fields to show',\n    },\n    'histogram:barTarget': {\n      value: 50,\n      description: 'Attempt to generate around this many bar when using \"auto\" interval in date histograms',\n    },\n    'histogram:maxBars': {\n      value: 100,\n      description: 'Never show more than this many bar in date histograms, scale values if needed',\n    },\n    'visualization:tileMap:maxPrecision': {\n      value: 7,\n      description: 'The maximum geoHash precision displayed on tile maps: 7 is high, 10 is very high, ' +\n      '12 is the max. ' +\n      '<a href=\"http://www.elastic.co/guide/en/elasticsearch/reference/current/' +\n      'search-aggregations-bucket-geohashgrid-aggregation.html#_cell_dimensions_at_the_equator\" target=\"_blank\">' +\n      'Explanation of cell dimensions</a>',\n    },\n    'visualization:tileMap:WMSdefaults': {\n      value: JSON.stringify({\n        enabled: false,\n        url: 'https://basemap.nationalmap.gov/arcgis/services/USGSTopo/MapServer/WMSServer',\n        options: {\n          version: '1.3.0',\n          layers: '0',\n          format: 'image/png',\n          transparent: true,\n          attribution: 'Maps provided by USGS',\n          styles: '',\n        }\n      }, null, 2),\n      type: 'json',\n      description: 'Default <a href=\"http://leafletjs.com/reference.html#tilelayer-wms\" target=\"_blank\">properties</a> for the WMS map server support in the tile map'\n    },\n    'visualization:colorMapping': {\n      type: 'json',\n      value: JSON.stringify({\n        Count: '#6eadc1'\n      }),\n      description: 'Maps values to specified colors within visualizations'\n    },\n    'visualization:loadingDelay': {\n      value: '2s',\n      description: 'Time to wait before dimming visualizations during query'\n    },\n    'csv:separator': {\n      value: ',',\n      description: 'Separate exported values with this string',\n    },\n    'csv:quoteValues': {\n      value: true,\n      description: 'Should values be quoted in csv exports?',\n    },\n    'history:limit': {\n      value: 10,\n      description: 'In fields that have history (e.g. query inputs), show this many recent values',\n    },\n    'shortDots:enable': {\n      value: false,\n      description: 'Shorten long fields, for example, instead of foo.bar.baz, show f.b.baz',\n    },\n    'truncate:maxHeight': {\n      value: 115,\n      description: 'The maximum height that a cell in a table should occupy. Set to 0 to disable truncation'\n    },\n    'indexPattern:fieldMapping:lookBack': {\n      value: 5,\n      description: 'For index patterns containing timestamps in their names, look for this many recent matching ' +\n        'patterns from which to query the field mapping'\n    },\n    'format:defaultTypeMap': {\n      type: 'json',\n      value:\n`{\n  \"ip\": { \"id\": \"ip\", \"params\": {} },\n  \"date\": { \"id\": \"date\", \"params\": {} },\n  \"number\": { \"id\": \"number\", \"params\": {} },\n  \"_source\": { \"id\": \"_source\", \"params\": {} },\n  \"_default_\": { \"id\": \"string\", \"params\": {} }\n}`,\n      description: 'Map of the format name to use by default for each field type. ' +\n        '\"_default_\" is used if the field type is not mentioned explicitly'\n    },\n    'format:number:defaultPattern': {\n      type: 'string',\n      value: '0,0.[000]',\n      description: 'Default <a href=\"http://numeraljs.com/\" target=\"_blank\">numeral format</a> for the \"number\" format'\n    },\n    'format:bytes:defaultPattern': {\n      type: 'string',\n      value: '0,0.[000]b',\n      description: 'Default <a href=\"http://numeraljs.com/\" target=\"_blank\">numeral format</a> for the \"bytes\" format'\n    },\n    'format:percent:defaultPattern': {\n      type: 'string',\n      value: '0,0.[000]%',\n      description: 'Default <a href=\"http://numeraljs.com/\" target=\"_blank\">numeral format</a> for the \"percent\" format'\n    },\n    'format:currency:defaultPattern': {\n      type: 'string',\n      value: '($0,0.[00])',\n      description: 'Default <a href=\"http://numeraljs.com/\" target=\"_blank\">numeral format</a> for the \"currency\" format'\n    },\n    'savedObjects:perPage': {\n      type: 'number',\n      value: 5,\n      description: 'Number of objects to show per page in the load dialog'\n    },\n    'timepicker:timeDefaults': {\n      type: 'json',\n      value:\n`{\n  \"from\": \"now-15m\",\n  \"to\": \"now\",\n  \"mode\": \"quick\"\n}`,\n      description: 'The timefilter selection to use when Kibana is started without one'\n    },\n    'timepicker:refreshIntervalDefaults': {\n      type: 'json',\n      value:\n`{\n  \"display\": \"Off\",\n  \"pause\": false,\n  \"value\": 0\n}`,\n      description: 'The timefilter\\'s default refresh interval'\n    },\n    'dashboard:defaultDarkTheme': {\n      value: false,\n      description: 'New dashboards use dark theme by default'\n    },\n    'filters:pinnedByDefault': {\n      value: false,\n      description: 'Whether the filters should have a global state (be pinned) by default'\n    },\n    'notifications:banner': {\n      type: 'markdown',\n      description: 'A custom banner intended for temporary notices to all users. <a href=\"https://help.github.com/articles/basic-writing-and-formatting-syntax/\" target=\"_blank\">Markdown supported</a>.',\n      value: ''\n    },\n    'notifications:lifetime:banner': {\n      value: 3000000,\n      description: 'The time in milliseconds which a banner notification ' +\n      'will be displayed on-screen for. Setting to Infinity will disable.'\n    },\n    'notifications:lifetime:error': {\n      value: 300000,\n      description: 'The time in milliseconds which an error notification ' +\n      'will be displayed on-screen for. Setting to Infinity will disable.'\n    },\n    'notifications:lifetime:warning': {\n      value: 10000,\n      description: 'The time in milliseconds which a warning notification ' +\n        'will be displayed on-screen for. Setting to Infinity will disable.'\n    },\n    'notifications:lifetime:info': {\n      value: 5000,\n      description: 'The time in milliseconds which an information notification ' +\n        'will be displayed on-screen for. Setting to Infinity will disable.'\n    },\n  };\n};\n"
      ]
    },
    "mtime": 1467036622893
  },
  "{\"filename\":\"/home/vio/v3metrics/src/optimize/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./fs_optimizer",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "FsOptimizer"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "async-to-generator",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nvar _fs_optimizer = require('./fs_optimizer');\n\nvar _fs_optimizer2 = _interopRequireDefault(_fs_optimizer);\n\nmodule.exports = _asyncToGenerator(function* (kbnServer, server, config) {\n  if (!config.get('optimize.enabled')) return;\n\n  // the lazy optimizer sets up two threads, one is the server listening\n  // on 5601 and the other is a server listening on 5602 that builds the\n  // bundles in a \"middleware\" style.\n  //\n  // the server listening on 5601 may be restarted a number of times, depending\n  // on the watch setup managed by the cli. It proxies all bundles/* requests to\n  // the other server. The server on 5602 is long running, in order to prevent\n  // complete rebuilds of the optimize content.\n  var lazy = config.get('optimize.lazy');\n  if (lazy) {\n    return yield kbnServer.mixin(require('./lazy/lazy'));\n  }\n\n  var bundles = kbnServer.bundles;\n  server.exposeStaticDir('/bundles/{path*}', bundles.env.workingDir);\n  yield bundles.writeEntryFiles();\n\n  // in prod, only bundle what looks invalid or missing\n  if (config.get('optimize.useBundleCache')) {\n    bundles = yield bundles.getInvalidBundles();\n  }\n\n  // we might not have any work to do\n  if (!bundles.getIds().length) {\n    server.log(['debug', 'optimize'], 'All bundles are cached and ready to go!');\n    return;\n  }\n\n  // only require the FsOptimizer when we need to\n  var optimizer = new _fs_optimizer2['default']({\n    env: bundles.env,\n    bundles: bundles,\n    profile: config.get('optimize.profile'),\n    urlBasePath: config.get('server.basePath'),\n    sourceMaps: config.get('optimize.sourceMaps'),\n    unsafeCache: config.get('optimize.unsafeCache')\n  });\n\n  server.log(['info', 'optimize'], 'Optimizing and caching ' + bundles.desc() + '. This may take a few minutes');\n\n  var start = Date.now();\n  yield optimizer.run();\n  var seconds = ((Date.now() - start) / 1000).toFixed(2);\n\n  server.log(['info', 'optimize'], 'Optimization of ' + bundles.desc() + ' complete in ' + seconds + ' seconds');\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL29wdGltaXplL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs0QkFBd0IsZ0JBQWdCOzs7O0FBQ3hDLE1BQU0sQ0FBQyxPQUFPLHFCQUFHLFdBQU8sU0FBUyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUs7QUFDcEQsTUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsa0JBQWtCLENBQUMsRUFBRSxPQUFPOzs7Ozs7Ozs7O0FBVTVDLE1BQUksSUFBSSxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsZUFBZSxDQUFDLENBQUM7QUFDdkMsTUFBSSxJQUFJLEVBQUU7QUFDUixXQUFPLE1BQU0sU0FBUyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQztHQUN0RDs7QUFFRCxNQUFJLE9BQU8sR0FBRyxTQUFTLENBQUMsT0FBTyxDQUFDO0FBQ2hDLFFBQU0sQ0FBQyxlQUFlLENBQUMsa0JBQWtCLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUNuRSxRQUFNLE9BQU8sQ0FBQyxlQUFlLEVBQUUsQ0FBQzs7O0FBR2hDLE1BQUksTUFBTSxDQUFDLEdBQUcsQ0FBQyx5QkFBeUIsQ0FBQyxFQUFFO0FBQ3pDLFdBQU8sR0FBRyxNQUFNLE9BQU8sQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO0dBQzdDOzs7QUFHRCxNQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFDLE1BQU0sRUFBRTtBQUM1QixVQUFNLENBQUMsR0FBRyxDQUNSLENBQUMsT0FBTyxFQUFFLFVBQVUsQ0FBQyw0Q0FFdEIsQ0FBQztBQUNGLFdBQU87R0FDUjs7O0FBR0QsTUFBSSxTQUFTLEdBQUcsOEJBQWdCO0FBQzlCLE9BQUcsRUFBRSxPQUFPLENBQUMsR0FBRztBQUNoQixXQUFPLEVBQUUsT0FBTztBQUNoQixXQUFPLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxrQkFBa0IsQ0FBQztBQUN2QyxlQUFXLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQztBQUMxQyxjQUFVLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxxQkFBcUIsQ0FBQztBQUM3QyxlQUFXLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxzQkFBc0IsQ0FBQztHQUNoRCxDQUFDLENBQUM7O0FBRUgsUUFBTSxDQUFDLEdBQUcsQ0FDUixDQUFDLE1BQU0sRUFBRSxVQUFVLENBQUMsOEJBQ00sT0FBTyxDQUFDLElBQUksRUFBRSxtQ0FDekMsQ0FBQzs7QUFFRixNQUFJLEtBQUssR0FBRyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7QUFDdkIsUUFBTSxTQUFTLENBQUMsR0FBRyxFQUFFLENBQUM7QUFDdEIsTUFBSSxPQUFPLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxLQUFLLENBQUEsR0FBSSxJQUFJLENBQUEsQ0FBRSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7O0FBRXZELFFBQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLEVBQUUsVUFBVSxDQUFDLHVCQUFxQixPQUFPLENBQUMsSUFBSSxFQUFFLHFCQUFnQixPQUFPLGNBQVcsQ0FBQztDQUN0RyxDQUFBLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvb3B0aW1pemUvaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgRnNPcHRpbWl6ZXIgZnJvbSAnLi9mc19vcHRpbWl6ZXInO1xubW9kdWxlLmV4cG9ydHMgPSBhc3luYyAoa2JuU2VydmVyLCBzZXJ2ZXIsIGNvbmZpZykgPT4ge1xuICBpZiAoIWNvbmZpZy5nZXQoJ29wdGltaXplLmVuYWJsZWQnKSkgcmV0dXJuO1xuXG4gIC8vIHRoZSBsYXp5IG9wdGltaXplciBzZXRzIHVwIHR3byB0aHJlYWRzLCBvbmUgaXMgdGhlIHNlcnZlciBsaXN0ZW5pbmdcbiAgLy8gb24gNTYwMSBhbmQgdGhlIG90aGVyIGlzIGEgc2VydmVyIGxpc3RlbmluZyBvbiA1NjAyIHRoYXQgYnVpbGRzIHRoZVxuICAvLyBidW5kbGVzIGluIGEgXCJtaWRkbGV3YXJlXCIgc3R5bGUuXG4gIC8vXG4gIC8vIHRoZSBzZXJ2ZXIgbGlzdGVuaW5nIG9uIDU2MDEgbWF5IGJlIHJlc3RhcnRlZCBhIG51bWJlciBvZiB0aW1lcywgZGVwZW5kaW5nXG4gIC8vIG9uIHRoZSB3YXRjaCBzZXR1cCBtYW5hZ2VkIGJ5IHRoZSBjbGkuIEl0IHByb3hpZXMgYWxsIGJ1bmRsZXMvKiByZXF1ZXN0cyB0b1xuICAvLyB0aGUgb3RoZXIgc2VydmVyLiBUaGUgc2VydmVyIG9uIDU2MDIgaXMgbG9uZyBydW5uaW5nLCBpbiBvcmRlciB0byBwcmV2ZW50XG4gIC8vIGNvbXBsZXRlIHJlYnVpbGRzIG9mIHRoZSBvcHRpbWl6ZSBjb250ZW50LlxuICBsZXQgbGF6eSA9IGNvbmZpZy5nZXQoJ29wdGltaXplLmxhenknKTtcbiAgaWYgKGxhenkpIHtcbiAgICByZXR1cm4gYXdhaXQga2JuU2VydmVyLm1peGluKHJlcXVpcmUoJy4vbGF6eS9sYXp5JykpO1xuICB9XG5cbiAgbGV0IGJ1bmRsZXMgPSBrYm5TZXJ2ZXIuYnVuZGxlcztcbiAgc2VydmVyLmV4cG9zZVN0YXRpY0RpcignL2J1bmRsZXMve3BhdGgqfScsIGJ1bmRsZXMuZW52LndvcmtpbmdEaXIpO1xuICBhd2FpdCBidW5kbGVzLndyaXRlRW50cnlGaWxlcygpO1xuXG4gIC8vIGluIHByb2QsIG9ubHkgYnVuZGxlIHdoYXQgbG9va3MgaW52YWxpZCBvciBtaXNzaW5nXG4gIGlmIChjb25maWcuZ2V0KCdvcHRpbWl6ZS51c2VCdW5kbGVDYWNoZScpKSB7XG4gICAgYnVuZGxlcyA9IGF3YWl0IGJ1bmRsZXMuZ2V0SW52YWxpZEJ1bmRsZXMoKTtcbiAgfVxuXG4gIC8vIHdlIG1pZ2h0IG5vdCBoYXZlIGFueSB3b3JrIHRvIGRvXG4gIGlmICghYnVuZGxlcy5nZXRJZHMoKS5sZW5ndGgpIHtcbiAgICBzZXJ2ZXIubG9nKFxuICAgICAgWydkZWJ1ZycsICdvcHRpbWl6ZSddLFxuICAgICAgYEFsbCBidW5kbGVzIGFyZSBjYWNoZWQgYW5kIHJlYWR5IHRvIGdvIWBcbiAgICApO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIG9ubHkgcmVxdWlyZSB0aGUgRnNPcHRpbWl6ZXIgd2hlbiB3ZSBuZWVkIHRvXG4gIGxldCBvcHRpbWl6ZXIgPSBuZXcgRnNPcHRpbWl6ZXIoe1xuICAgIGVudjogYnVuZGxlcy5lbnYsXG4gICAgYnVuZGxlczogYnVuZGxlcyxcbiAgICBwcm9maWxlOiBjb25maWcuZ2V0KCdvcHRpbWl6ZS5wcm9maWxlJyksXG4gICAgdXJsQmFzZVBhdGg6IGNvbmZpZy5nZXQoJ3NlcnZlci5iYXNlUGF0aCcpLFxuICAgIHNvdXJjZU1hcHM6IGNvbmZpZy5nZXQoJ29wdGltaXplLnNvdXJjZU1hcHMnKSxcbiAgICB1bnNhZmVDYWNoZTogY29uZmlnLmdldCgnb3B0aW1pemUudW5zYWZlQ2FjaGUnKSxcbiAgfSk7XG5cbiAgc2VydmVyLmxvZyhcbiAgICBbJ2luZm8nLCAnb3B0aW1pemUnXSxcbiAgICBgT3B0aW1pemluZyBhbmQgY2FjaGluZyAke2J1bmRsZXMuZGVzYygpfS4gVGhpcyBtYXkgdGFrZSBhIGZldyBtaW51dGVzYFxuICApO1xuXG4gIGxldCBzdGFydCA9IERhdGUubm93KCk7XG4gIGF3YWl0IG9wdGltaXplci5ydW4oKTtcbiAgbGV0IHNlY29uZHMgPSAoKERhdGUubm93KCkgLSBzdGFydCkgLyAxMDAwKS50b0ZpeGVkKDIpO1xuXG4gIHNlcnZlci5sb2coWydpbmZvJywgJ29wdGltaXplJ10sIGBPcHRpbWl6YXRpb24gb2YgJHtidW5kbGVzLmRlc2MoKX0gY29tcGxldGUgaW4gJHtzZWNvbmRzfSBzZWNvbmRzYCk7XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/optimize/index.js"
      ],
      "names": [],
      "mappings": ";;;;;;4BAAwB,gBAAgB;;;;AACxC,MAAM,CAAC,OAAO,qBAAG,WAAO,SAAS,EAAE,MAAM,EAAE,MAAM,EAAK;AACpD,MAAI,CAAC,MAAM,CAAC,GAAG,CAAC,kBAAkB,CAAC,EAAE,OAAO;;;;;;;;;;AAU5C,MAAI,IAAI,GAAG,MAAM,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;AACvC,MAAI,IAAI,EAAE;AACR,WAAO,MAAM,SAAS,CAAC,KAAK,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC;GACtD;;AAED,MAAI,OAAO,GAAG,SAAS,CAAC,OAAO,CAAC;AAChC,QAAM,CAAC,eAAe,CAAC,kBAAkB,EAAE,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;AACnE,QAAM,OAAO,CAAC,eAAe,EAAE,CAAC;;;AAGhC,MAAI,MAAM,CAAC,GAAG,CAAC,yBAAyB,CAAC,EAAE;AACzC,WAAO,GAAG,MAAM,OAAO,CAAC,iBAAiB,EAAE,CAAC;GAC7C;;;AAGD,MAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,MAAM,EAAE;AAC5B,UAAM,CAAC,GAAG,CACR,CAAC,OAAO,EAAE,UAAU,CAAC,4CAEtB,CAAC;AACF,WAAO;GACR;;;AAGD,MAAI,SAAS,GAAG,8BAAgB;AAC9B,OAAG,EAAE,OAAO,CAAC,GAAG;AAChB,WAAO,EAAE,OAAO;AAChB,WAAO,EAAE,MAAM,CAAC,GAAG,CAAC,kBAAkB,CAAC;AACvC,eAAW,EAAE,MAAM,CAAC,GAAG,CAAC,iBAAiB,CAAC;AAC1C,cAAU,EAAE,MAAM,CAAC,GAAG,CAAC,qBAAqB,CAAC;AAC7C,eAAW,EAAE,MAAM,CAAC,GAAG,CAAC,sBAAsB,CAAC;GAChD,CAAC,CAAC;;AAEH,QAAM,CAAC,GAAG,CACR,CAAC,MAAM,EAAE,UAAU,CAAC,8BACM,OAAO,CAAC,IAAI,EAAE,mCACzC,CAAC;;AAEF,MAAI,KAAK,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;AACvB,QAAM,SAAS,CAAC,GAAG,EAAE,CAAC;AACtB,MAAI,OAAO,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,KAAK,CAAA,GAAI,IAAI,CAAA,CAAE,OAAO,CAAC,CAAC,CAAC,CAAC;;AAEvD,QAAM,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,UAAU,CAAC,uBAAqB,OAAO,CAAC,IAAI,EAAE,qBAAgB,OAAO,cAAW,CAAC;CACtG,CAAA,CAAC",
      "file": "/home/vio/v3metrics/src/optimize/index.js",
      "sourcesContent": [
        "import FsOptimizer from './fs_optimizer';\nmodule.exports = async (kbnServer, server, config) => {\n  if (!config.get('optimize.enabled')) return;\n\n  // the lazy optimizer sets up two threads, one is the server listening\n  // on 5601 and the other is a server listening on 5602 that builds the\n  // bundles in a \"middleware\" style.\n  //\n  // the server listening on 5601 may be restarted a number of times, depending\n  // on the watch setup managed by the cli. It proxies all bundles/* requests to\n  // the other server. The server on 5602 is long running, in order to prevent\n  // complete rebuilds of the optimize content.\n  let lazy = config.get('optimize.lazy');\n  if (lazy) {\n    return await kbnServer.mixin(require('./lazy/lazy'));\n  }\n\n  let bundles = kbnServer.bundles;\n  server.exposeStaticDir('/bundles/{path*}', bundles.env.workingDir);\n  await bundles.writeEntryFiles();\n\n  // in prod, only bundle what looks invalid or missing\n  if (config.get('optimize.useBundleCache')) {\n    bundles = await bundles.getInvalidBundles();\n  }\n\n  // we might not have any work to do\n  if (!bundles.getIds().length) {\n    server.log(\n      ['debug', 'optimize'],\n      `All bundles are cached and ready to go!`\n    );\n    return;\n  }\n\n  // only require the FsOptimizer when we need to\n  let optimizer = new FsOptimizer({\n    env: bundles.env,\n    bundles: bundles,\n    profile: config.get('optimize.profile'),\n    urlBasePath: config.get('server.basePath'),\n    sourceMaps: config.get('optimize.sourceMaps'),\n    unsafeCache: config.get('optimize.unsafeCache'),\n  });\n\n  server.log(\n    ['info', 'optimize'],\n    `Optimizing and caching ${bundles.desc()}. This may take a few minutes`\n  );\n\n  let start = Date.now();\n  await optimizer.run();\n  let seconds = ((Date.now() - start) / 1000).toFixed(2);\n\n  server.log(['info', 'optimize'], `Optimization of ${bundles.desc()} complete in ${seconds} seconds`);\n};\n"
      ]
    },
    "mtime": 1467036622805
  },
  "{\"filename\":\"/home/vio/v3metrics/src/optimize/fs_optimizer.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./base_optimizer",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "BaseOptimizer"
              }
            ]
          },
          {
            "source": "../utils/from_root",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "fromRoot"
              }
            ]
          },
          {
            "source": "bluebird",
            "imported": [
              "fromNode"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "fromNode",
                "local": "fromNode"
              }
            ]
          },
          {
            "source": "fs",
            "imported": [
              "writeFile"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "writeFile",
                "local": "writeFile"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "get",
        "inherits",
        "create-class",
        "class-call-check",
        "async-to-generator",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _base_optimizer = require('./base_optimizer');\n\nvar _base_optimizer2 = _interopRequireDefault(_base_optimizer);\n\nvar _utilsFrom_root = require('../utils/from_root');\n\nvar _utilsFrom_root2 = _interopRequireDefault(_utilsFrom_root);\n\nvar _bluebird = require('bluebird');\n\nvar _fs = require('fs');\n\nmodule.exports = (function (_BaseOptimizer) {\n  _inherits(FsOptimizer, _BaseOptimizer);\n\n  function FsOptimizer() {\n    _classCallCheck(this, FsOptimizer);\n\n    _get(Object.getPrototypeOf(FsOptimizer.prototype), 'constructor', this).apply(this, arguments);\n  }\n\n  _createClass(FsOptimizer, [{\n    key: 'init',\n    value: _asyncToGenerator(function* () {\n      yield this.initCompiler();\n    })\n  }, {\n    key: 'run',\n    value: _asyncToGenerator(function* () {\n      var _this = this;\n\n      if (!this.compiler) yield this.init();\n\n      var stats = yield (0, _bluebird.fromNode)(function (cb) {\n        _this.compiler.run(function (err, stats) {\n          if (err || !stats) return cb(err);\n\n          if (stats.hasErrors() || stats.hasWarnings()) {\n            return cb(_this.failedStatsToError(stats));\n          } else {\n            cb(null, stats);\n          }\n        });\n      });\n    })\n  }]);\n\n  return FsOptimizer;\n})(_base_optimizer2['default']);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL29wdGltaXplL2ZzX29wdGltaXplci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs4QkFDMEIsa0JBQWtCOzs7OzhCQUN2QixvQkFBb0I7Ozs7d0JBQ2hCLFVBQVU7O2tCQUNULElBQUk7O0FBRTlCLE1BQU0sQ0FBQyxPQUFPO1lBQVMsV0FBVzs7V0FBWCxXQUFXOzBCQUFYLFdBQVc7OytCQUFYLFdBQVc7OztlQUFYLFdBQVc7OzZCQUN0QixhQUFHO0FBQ1gsWUFBTSxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUM7S0FDM0I7Ozs2QkFFUSxhQUFHOzs7QUFDVixVQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxNQUFNLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQzs7QUFFdEMsVUFBSSxLQUFLLEdBQUcsTUFBTSx3QkFBUyxVQUFBLEVBQUUsRUFBSTtBQUMvQixjQUFLLFFBQVEsQ0FBQyxHQUFHLENBQUMsVUFBQyxHQUFHLEVBQUUsS0FBSyxFQUFLO0FBQ2hDLGNBQUksR0FBRyxJQUFJLENBQUMsS0FBSyxFQUFFLE9BQU8sRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDOztBQUVsQyxjQUFJLEtBQUssQ0FBQyxTQUFTLEVBQUUsSUFBSSxLQUFLLENBQUMsV0FBVyxFQUFFLEVBQUU7QUFDNUMsbUJBQU8sRUFBRSxDQUFDLE1BQUssa0JBQWtCLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztXQUMzQyxNQUNJO0FBQ0gsY0FBRSxDQUFDLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQztXQUNqQjtTQUNGLENBQUMsQ0FBQztPQUNKLENBQUMsQ0FBQztLQUNKOzs7U0FwQm9CLFdBQVc7K0JBcUJqQyxDQUFDIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL29wdGltaXplL2ZzX29wdGltaXplci5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxuaW1wb3J0IEJhc2VPcHRpbWl6ZXIgZnJvbSAnLi9iYXNlX29wdGltaXplcic7XG5pbXBvcnQgZnJvbVJvb3QgZnJvbSAnLi4vdXRpbHMvZnJvbV9yb290JztcbmltcG9ydCB7IGZyb21Ob2RlIH0gZnJvbSAnYmx1ZWJpcmQnO1xuaW1wb3J0IHsgd3JpdGVGaWxlIH0gZnJvbSAnZnMnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIEZzT3B0aW1pemVyIGV4dGVuZHMgQmFzZU9wdGltaXplciB7XG4gIGFzeW5jIGluaXQoKSB7XG4gICAgYXdhaXQgdGhpcy5pbml0Q29tcGlsZXIoKTtcbiAgfVxuXG4gIGFzeW5jIHJ1bigpIHtcbiAgICBpZiAoIXRoaXMuY29tcGlsZXIpIGF3YWl0IHRoaXMuaW5pdCgpO1xuXG4gICAgbGV0IHN0YXRzID0gYXdhaXQgZnJvbU5vZGUoY2IgPT4ge1xuICAgICAgdGhpcy5jb21waWxlci5ydW4oKGVyciwgc3RhdHMpID0+IHtcbiAgICAgICAgaWYgKGVyciB8fCAhc3RhdHMpIHJldHVybiBjYihlcnIpO1xuXG4gICAgICAgIGlmIChzdGF0cy5oYXNFcnJvcnMoKSB8fCBzdGF0cy5oYXNXYXJuaW5ncygpKSB7XG4gICAgICAgICAgcmV0dXJuIGNiKHRoaXMuZmFpbGVkU3RhdHNUb0Vycm9yKHN0YXRzKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgY2IobnVsbCwgc3RhdHMpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/optimize/fs_optimizer.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;;;;;8BAC0B,kBAAkB;;;;8BACvB,oBAAoB;;;;wBAChB,UAAU;;kBACT,IAAI;;AAE9B,MAAM,CAAC,OAAO;YAAS,WAAW;;WAAX,WAAW;0BAAX,WAAW;;+BAAX,WAAW;;;eAAX,WAAW;;6BACtB,aAAG;AACX,YAAM,IAAI,CAAC,YAAY,EAAE,CAAC;KAC3B;;;6BAEQ,aAAG;;;AACV,UAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,MAAM,IAAI,CAAC,IAAI,EAAE,CAAC;;AAEtC,UAAI,KAAK,GAAG,MAAM,wBAAS,UAAA,EAAE,EAAI;AAC/B,cAAK,QAAQ,CAAC,GAAG,CAAC,UAAC,GAAG,EAAE,KAAK,EAAK;AAChC,cAAI,GAAG,IAAI,CAAC,KAAK,EAAE,OAAO,EAAE,CAAC,GAAG,CAAC,CAAC;;AAElC,cAAI,KAAK,CAAC,SAAS,EAAE,IAAI,KAAK,CAAC,WAAW,EAAE,EAAE;AAC5C,mBAAO,EAAE,CAAC,MAAK,kBAAkB,CAAC,KAAK,CAAC,CAAC,CAAC;WAC3C,MACI;AACH,cAAE,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;WACjB;SACF,CAAC,CAAC;OACJ,CAAC,CAAC;KACJ;;;SApBoB,WAAW;+BAqBjC,CAAC",
      "file": "/home/vio/v3metrics/src/optimize/fs_optimizer.js",
      "sourcesContent": [
        "\nimport BaseOptimizer from './base_optimizer';\nimport fromRoot from '../utils/from_root';\nimport { fromNode } from 'bluebird';\nimport { writeFile } from 'fs';\n\nmodule.exports = class FsOptimizer extends BaseOptimizer {\n  async init() {\n    await this.initCompiler();\n  }\n\n  async run() {\n    if (!this.compiler) await this.init();\n\n    let stats = await fromNode(cb => {\n      this.compiler.run((err, stats) => {\n        if (err || !stats) return cb(err);\n\n        if (stats.hasErrors() || stats.hasWarnings()) {\n          return cb(this.failedStatsToError(stats));\n        }\n        else {\n          cb(null, stats);\n        }\n      });\n    });\n  }\n};\n"
      ]
    },
    "mtime": 1467036622805
  },
  "{\"filename\":\"/home/vio/v3metrics/src/optimize/base_optimizer.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "webpack",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "webpack"
              }
            ]
          },
          {
            "source": "boom",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Boom"
              }
            ]
          },
          {
            "source": "webpack-directory-name-as-main",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "DirectoryNameAsMain"
              }
            ]
          },
          {
            "source": "extract-text-webpack-plugin",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "ExtractTextPlugin"
              }
            ]
          },
          {
            "source": "webpack/lib/optimize/CommonsChunkPlugin",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "CommonsChunkPlugin"
              }
            ]
          },
          {
            "source": "webpack/lib/DefinePlugin",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "DefinePlugin"
              }
            ]
          },
          {
            "source": "webpack/lib/optimize/UglifyJsPlugin",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "UglifyJsPlugin"
              }
            ]
          },
          {
            "source": "../utils/from_root",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "fromRoot"
              }
            ]
          },
          {
            "source": "./babel_options",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "babelOptions"
              }
            ]
          },
          {
            "source": "util",
            "imported": [
              "inherits"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "inherits",
                "local": "inherits"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "defaults",
              "transform"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "defaults",
                "local": "defaults"
              },
              {
                "kind": "named",
                "imported": "transform",
                "local": "transform"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "resolve"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "resolve",
                "local": "resolve"
              }
            ]
          },
          {
            "source": "fs",
            "imported": [
              "writeFile"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "writeFile",
                "local": "writeFile"
              }
            ]
          },
          {
            "source": "../../package.json",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "pkg"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "async-to-generator",
        "to-consumable-array",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i]; return arr2; } else { return Array.from(arr); } }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _webpack = require('webpack');\n\nvar _webpack2 = _interopRequireDefault(_webpack);\n\nvar _boom = require('boom');\n\nvar _boom2 = _interopRequireDefault(_boom);\n\nvar _webpackDirectoryNameAsMain = require('webpack-directory-name-as-main');\n\nvar _webpackDirectoryNameAsMain2 = _interopRequireDefault(_webpackDirectoryNameAsMain);\n\nvar _extractTextWebpackPlugin = require('extract-text-webpack-plugin');\n\nvar _extractTextWebpackPlugin2 = _interopRequireDefault(_extractTextWebpackPlugin);\n\nvar _webpackLibOptimizeCommonsChunkPlugin = require('webpack/lib/optimize/CommonsChunkPlugin');\n\nvar _webpackLibOptimizeCommonsChunkPlugin2 = _interopRequireDefault(_webpackLibOptimizeCommonsChunkPlugin);\n\nvar _webpackLibDefinePlugin = require('webpack/lib/DefinePlugin');\n\nvar _webpackLibDefinePlugin2 = _interopRequireDefault(_webpackLibDefinePlugin);\n\nvar _webpackLibOptimizeUglifyJsPlugin = require('webpack/lib/optimize/UglifyJsPlugin');\n\nvar _webpackLibOptimizeUglifyJsPlugin2 = _interopRequireDefault(_webpackLibOptimizeUglifyJsPlugin);\n\nvar _utilsFrom_root = require('../utils/from_root');\n\nvar _utilsFrom_root2 = _interopRequireDefault(_utilsFrom_root);\n\nvar _babel_options = require('./babel_options');\n\nvar _babel_options2 = _interopRequireDefault(_babel_options);\n\nvar _util = require('util');\n\nvar _lodash = require('lodash');\n\nvar _path = require('path');\n\nvar _fs = require('fs');\n\nvar _packageJson = require('../../package.json');\n\nvar _packageJson2 = _interopRequireDefault(_packageJson);\n\nvar babelExclude = [/[\\/\\\\](webpackShims|node_modules|bower_components)[\\/\\\\]/];\n\nvar BaseOptimizer = (function () {\n  function BaseOptimizer(opts) {\n    _classCallCheck(this, BaseOptimizer);\n\n    this.env = opts.env;\n    this.urlBasePath = opts.urlBasePath;\n    this.bundles = opts.bundles;\n    this.profile = opts.profile || false;\n\n    switch (opts.sourceMaps) {\n      case true:\n        this.sourceMaps = 'source-map';\n        break;\n\n      case 'fast':\n        this.sourceMaps = 'cheap-module-eval-source-map';\n        break;\n\n      default:\n        this.sourceMaps = opts.sourceMaps || false;\n        break;\n    }\n\n    this.unsafeCache = opts.unsafeCache || false;\n    if (typeof this.unsafeCache === 'string') {\n      this.unsafeCache = [new RegExp(this.unsafeCache.slice(1, -1))];\n    }\n  }\n\n  _createClass(BaseOptimizer, [{\n    key: 'initCompiler',\n    value: _asyncToGenerator(function* () {\n      var _this = this;\n\n      if (this.compiler) return this.compiler;\n\n      var compilerConfig = this.getConfig();\n      this.compiler = (0, _webpack2['default'])(compilerConfig);\n\n      this.compiler.plugin('done', function (stats) {\n        if (!_this.profile) return;\n\n        var path = (0, _path.resolve)(_this.env.workingDir, 'stats.json');\n        var content = JSON.stringify(stats.toJson());\n        (0, _fs.writeFile)(path, content, function (err) {\n          if (err) throw err;\n        });\n      });\n\n      return this.compiler;\n    })\n  }, {\n    key: 'getConfig',\n    value: function getConfig() {\n      var mapQ = this.sourceMaps ? '?sourceMap' : '';\n      var mapQPre = mapQ ? mapQ + '&' : '?';\n\n      return {\n        context: (0, _utilsFrom_root2['default'])('.'),\n        entry: this.bundles.toWebpackEntries(),\n\n        devtool: this.sourceMaps,\n        profile: this.profile || false,\n\n        output: {\n          path: this.env.workingDir,\n          filename: '[name].bundle.js',\n          sourceMapFilename: '[file].map',\n          publicPath: (this.urlBasePath || '') + '/bundles/',\n          devtoolModuleFilenameTemplate: '[absolute-resource-path]'\n        },\n\n        recordsPath: (0, _path.resolve)(this.env.workingDir, 'webpack.records'),\n\n        plugins: [new _webpack2['default'].ResolverPlugin([new _webpackDirectoryNameAsMain2['default']()]), new _webpack2['default'].NoErrorsPlugin(), new _extractTextWebpackPlugin2['default']('[name].style.css', {\n          allChunks: true\n        }), new _webpackLibOptimizeCommonsChunkPlugin2['default']({\n          name: 'commons',\n          filename: 'commons.bundle.js'\n        })].concat(_toConsumableArray(this.pluginsForEnv(this.env.context.env))),\n\n        module: {\n          loaders: [{\n            test: /\\.less$/,\n            loader: _extractTextWebpackPlugin2['default'].extract('style', 'css' + mapQ + '!autoprefixer' + mapQPre + '{ \"browsers\": [\"last 2 versions\",\"> 5%\"] }!less' + mapQPre + 'dumpLineNumbers=comments')\n          }, { test: /\\.css$/, loader: _extractTextWebpackPlugin2['default'].extract('style', 'css' + mapQ) }, { test: /\\.jade$/, loader: 'jade' }, { test: /\\.json$/, loader: 'json' }, { test: /\\.(html|tmpl)$/, loader: 'raw' }, { test: /\\.png$/, loader: 'url?limit=10000&name=[path][name].[ext]' }, { test: /\\.(woff|woff2|ttf|eot|svg|ico)(\\?|$)/, loader: 'file?name=[path][name].[ext]' }, { test: /[\\/\\\\]src[\\/\\\\](plugins|ui)[\\/\\\\].+\\.js$/, loader: 'rjs-repack' + mapQ }, {\n            test: /\\.js$/,\n            exclude: babelExclude.concat(this.env.noParse),\n            loader: 'babel',\n            query: _babel_options2['default'].webpack\n          }, {\n            test: /\\.jsx$/,\n            exclude: babelExclude.concat(this.env.noParse),\n            loader: 'babel',\n            query: (0, _lodash.defaults)({\n              nonStandard: true\n            }, _babel_options2['default'].webpack)\n          }].concat(this.env.loaders),\n          postLoaders: this.env.postLoaders || [],\n          noParse: this.env.noParse\n        },\n\n        resolve: {\n          extensions: ['.js', '.json', '.jsx', '.less', ''],\n          postfixes: [''],\n          modulesDirectories: ['webpackShims', 'node_modules'],\n          fallback: [(0, _utilsFrom_root2['default'])('webpackShims'), (0, _utilsFrom_root2['default'])('node_modules')],\n          loaderPostfixes: ['-loader', ''],\n          root: (0, _utilsFrom_root2['default'])('.'),\n          alias: this.env.aliases,\n          unsafeCache: this.unsafeCache\n        },\n\n        resolveLoader: {\n          alias: (0, _lodash.transform)(_packageJson2['default'].dependencies, function (aliases, version, name) {\n            if (name.endsWith('-loader')) {\n              aliases[name.replace(/-loader$/, '')] = require.resolve(name);\n            }\n          }, {})\n        }\n      };\n    }\n  }, {\n    key: 'pluginsForEnv',\n    value: function pluginsForEnv(env) {\n      if (env !== 'production') {\n        return [];\n      }\n\n      return [new _webpackLibDefinePlugin2['default']({\n        'process.env': {\n          'NODE_ENV': '\"production\"'\n        }\n      }), new _webpackLibOptimizeUglifyJsPlugin2['default']({\n        compress: {\n          warnings: false\n        },\n        sourceMap: false,\n        mangle: false\n      })];\n    }\n  }, {\n    key: 'failedStatsToError',\n    value: function failedStatsToError(stats) {\n      var statFormatOpts = {\n        hash: false, // add the hash of the compilation\n        version: false, // add webpack version information\n        timings: false, // add timing information\n        assets: false, // add assets information\n        chunks: false, // add chunk information\n        chunkModules: false, // add built modules information to chunk information\n        modules: false, // add built modules information\n        cached: false, // add also information about cached (not built) modules\n        reasons: false, // add information about the reasons why modules are included\n        source: false, // add the source code of modules\n        errorDetails: false, // add details to errors (like resolving log)\n        chunkOrigins: false, // add the origins of chunks and chunk merging info\n        modulesSort: false, // (string) sort the modules by that field\n        chunksSort: false, // (string) sort the chunks by that field\n        assetsSort: false, // (string) sort the assets by that field\n        children: false\n      };\n\n      var details = stats.toString((0, _lodash.defaults)({ colors: true }, statFormatOpts));\n\n      return _boom2['default'].create(500, 'Optimizations failure.\\n' + details.split('\\n').join('\\n    ') + '\\n', stats.toJson(statFormatOpts));\n    }\n  }]);\n\n  return BaseOptimizer;\n})();\n\nmodule.exports = BaseOptimizer;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL29wdGltaXplL2Jhc2Vfb3B0aW1pemVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozt1QkFBb0IsU0FBUzs7OztvQkFDWixNQUFNOzs7OzBDQUNTLGdDQUFnQzs7Ozt3Q0FDbEMsNkJBQTZCOzs7O29EQUM1Qix5Q0FBeUM7Ozs7c0NBQy9DLDBCQUEwQjs7OztnREFDeEIscUNBQXFDOzs7OzhCQUUzQyxvQkFBb0I7Ozs7NkJBQ2hCLGlCQUFpQjs7OztvQkFDakIsTUFBTTs7c0JBQ0ssUUFBUTs7b0JBQ3BCLE1BQU07O2tCQUNKLElBQUk7OzJCQUVkLG9CQUFvQjs7OztBQURwQyxJQUFJLFlBQVksR0FBRyxDQUFDLDBEQUEwRCxDQUFDLENBQUM7O0lBRzFFLGFBQWE7QUFDTixXQURQLGFBQWEsQ0FDTCxJQUFJLEVBQUU7MEJBRGQsYUFBYTs7QUFFZixRQUFJLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUM7QUFDcEIsUUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDO0FBQ3BDLFFBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQztBQUM1QixRQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxPQUFPLElBQUksS0FBSyxDQUFDOztBQUVyQyxZQUFRLElBQUksQ0FBQyxVQUFVO0FBQ3JCLFdBQUssSUFBSTtBQUNQLFlBQUksQ0FBQyxVQUFVLEdBQUcsWUFBWSxDQUFDO0FBQy9CLGNBQU07O0FBQUEsQUFFUixXQUFLLE1BQU07QUFDVCxZQUFJLENBQUMsVUFBVSxHQUFHLDhCQUE4QixDQUFDO0FBQ2pELGNBQU07O0FBQUEsQUFFUjtBQUNFLFlBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLFVBQVUsSUFBSSxLQUFLLENBQUM7QUFDM0MsY0FBTTtBQUFBLEtBQ1Q7O0FBRUQsUUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsV0FB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SSxjQUFjLEdBQUc7QUFDbkIsWUFBSSxFQUFFLEtBQUs7QUFDWCxlQUFPLEVBQUUsS0FBSztBQUNkLGVBQU8sRUFBRSxLQUFLO0FBQ2QsY0FBTSxFQUFFLEtBQUs7QUFDYixjQUFNLEVBQUUsS0FBSztBQUNiLG9CQUFZLEVBQUUsS0FBSztBQUNuQixlQUFPLEVBQUUsS0FBSztBQUNkLGNBQU0sRUFBRSxLQUFLO0FBQ2IsZUFBTyxFQUFFLEtBQUs7QUFDZCxjQUFNLEVBQUUsS0FBSztBQUNiLG9CQUFZLEVBQUUsS0FBSztBQUNuQixvQkFBWSxFQUFFLEtBQUs7QUFDbkIsbUJBQVcsRUFBRSxLQUFLO0FBQ2xCLGtCQUFVLEVBQUUsS0FBSztBQUNqQixrQkFBVSxFQUFFLEtBQUs7QUFDakIsZ0JBQVEsRUFBRSxLQUFLO09BQ2hCLENBQUM7O0FBRUYsVUFBSSxPQUFPLEdBQUcsS0FBSyxDQUFDLFFBQVEsQ0FBQyxzQkFBUyxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsRUFBRSxjQUFjLENBQUMsQ0FBQyxDQUFDOztBQUV6RSxhQUFPLGtCQUFLLE1BQU0sQ0FDaEIsR0FBRywrQkFDd0IsT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLFNBQzdELEtBQUssQ0FBQyxNQUFNLENBQUMsY0FBYyxDQUFDLENBQzdCLENBQUM7S0FDSDs7O1NBNUxHLGFBQWE7OztBQStMbkIsTUFBTSxDQUFDLE9BQU8sR0FBRyxhQUFhLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvb3B0aW1pemUvYmFzZV9vcHRpbWl6ZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgd2VicGFjayBmcm9tICd3ZWJwYWNrJztcbmltcG9ydCBCb29tIGZyb20gJ2Jvb20nO1xuaW1wb3J0IERpcmVjdG9yeU5hbWVBc01haW4gZnJvbSAnd2VicGFjay1kaXJlY3RvcnktbmFtZS1hcy1tYWluJztcbmltcG9ydCBFeHRyYWN0VGV4dFBsdWdpbiBmcm9tICdleHRyYWN0LXRleHQtd2VicGFjay1wbHVnaW4nO1xuaW1wb3J0IENvbW1vbnNDaHVua1BsdWdpbiBmcm9tICd3ZWJwYWNrL2xpYi9vcHRpbWl6ZS9Db21tb25zQ2h1bmtQbHVnaW4nO1xuaW1wb3J0IERlZmluZVBsdWdpbiBmcm9tICd3ZWJwYWNrL2xpYi9EZWZpbmVQbHVnaW4nO1xuaW1wb3J0IFVnbGlmeUpzUGx1Z2luIGZyb20gJ3dlYnBhY2svbGliL29wdGltaXplL1VnbGlmeUpzUGx1Z2luJztcblxuaW1wb3J0IGZyb21Sb290IGZyb20gJy4uL3V0aWxzL2Zyb21fcm9vdCc7XG5pbXBvcnQgYmFiZWxPcHRpb25zIGZyb20gJy4vYmFiZWxfb3B0aW9ucyc7XG5pbXBvcnQgeyBpbmhlcml0cyB9IGZyb20gJ3V0aWwnO1xuaW1wb3J0IHsgZGVmYXVsdHMsIHRyYW5zZm9ybSB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgeyByZXNvbHZlIH0gZnJvbSAncGF0aCc7XG5pbXBvcnQgeyB3cml0ZUZpbGUgfSBmcm9tICdmcyc7XG5sZXQgYmFiZWxFeGNsdWRlID0gWy9bXFwvXFxcXF0od2VicGFja1NoaW1zfG5vZGVfbW9kdWxlc3xib3dlcl9jb21wb25lbnRzKVtcXC9cXFxcXS9dO1xuaW1wb3J0IHBrZyBmcm9tICcuLi8uLi9wYWNrYWdlLmpzb24nO1xuXG5jbGFzcyBCYXNlT3B0aW1pemVyIHtcbiAgY29uc3RydWN0b3Iob3B0cykge1xuICAgIHRoaXMuZW52ID0gb3B0cy5lbnY7XG4gICAgdGhpcy51cmxCYXNlUGF0aCA9IG9wdHMudXJsQmFzZVBhdGg7XG4gICAgdGhpcy5idW5kbGVzID0gb3B0cy5idW5kbGVzO1xuICAgIHRoaXMucHJvZmlsZSA9IG9wdHMucHJvZmlsZSB8fCBmYWxzZTtcblxuICAgIHN3aXRjaCAob3B0cy5zb3VyY2VNYXBzKSB7XG4gICAgICBjYXNlIHRydWU6XG4gICAgICAgIHRoaXMuc291cmNlTWFwcyA9ICdzb3VyY2UtbWFwJztcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2Zhc3QnOlxuICAgICAgICB0aGlzLnNvdXJjZU1hcHMgPSAnY2hlYXAtbW9kdWxlLWV2YWwtc291cmNlLW1hcCc7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aGlzLnNvdXJjZU1hcHMgPSBvcHRzLnNvdXJjZU1hcHMgfHwgZmFsc2U7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIHRoaXMudW5zYWZlQ2FjaGUgPSBvcHRzLnVuc2FmZUNhY2hlIHx8IGZhbHNlO1xuICAgIGlmICh0eXBlb2YgdGhpcy51bnNhZmVDYWNoZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRoaXMudW5zYWZlQ2FjaGUgPSBbXG4gICAgICAgIG5ldyBSZWdFeHAodGhpcy51bnNhZmVDYWNoZS5zbGljZSgxLCAtMSkpXG4gICAgICBdO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGluaXRDb21waWxlcigpIHtcbiAgICBpZiAodGhpcy5jb21waWxlcikgcmV0dXJuIHRoaXMuY29tcGlsZXI7XG5cbiAgICBsZXQgY29tcGlsZXJDb25maWcgPSB0aGlzLmdldENvbmZpZygpO1xuICAgIHRoaXMuY29tcGlsZXIgPSB3ZWJwYWNrKGNvbXBpbGVyQ29uZmlnKTtcblxuICAgIHRoaXMuY29tcGlsZXIucGx1Z2luKCdkb25lJywgc3RhdHMgPT4ge1xuICAgICAgaWYgKCF0aGlzLnByb2ZpbGUpIHJldHVybjtcblxuICAgICAgbGV0IHBhdGggPSByZXNvbHZlKHRoaXMuZW52LndvcmtpbmdEaXIsICdzdGF0cy5qc29uJyk7XG4gICAgICBsZXQgY29udGVudCA9IEpTT04uc3RyaW5naWZ5KHN0YXRzLnRvSnNvbigpKTtcbiAgICAgIHdyaXRlRmlsZShwYXRoLCBjb250ZW50LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGlmIChlcnIpIHRocm93IGVycjtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXMuY29tcGlsZXI7XG4gIH1cblxuICBnZXRDb25maWcoKSB7XG4gICAgbGV0IG1hcFEgPSB0aGlzLnNvdXJjZU1hcHMgPyAnP3NvdXJjZU1hcCcgOiAnJztcbiAgICBsZXQgbWFwUVByZSA9IG1hcFEgPyBtYXBRICsgJyYnIDogJz8nO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbnRleHQ6IGZyb21Sb290KCcuJyksXG4gICAgICBlbnRyeTogdGhpcy5idW5kbGVzLnRvV2VicGFja0VudHJpZXMoKSxcblxuICAgICAgZGV2dG9vbDogdGhpcy5zb3VyY2VNYXBzLFxuICAgICAgcHJvZmlsZTogdGhpcy5wcm9maWxlIHx8IGZhbHNlLFxuXG4gICAgICBvdXRwdXQ6IHtcbiAgICAgICAgcGF0aDogdGhpcy5lbnYud29ya2luZ0RpcixcbiAgICAgICAgZmlsZW5hbWU6ICdbbmFtZV0uYnVuZGxlLmpzJyxcbiAgICAgICAgc291cmNlTWFwRmlsZW5hbWU6ICdbZmlsZV0ubWFwJyxcbiAgICAgICAgcHVibGljUGF0aDogYCR7dGhpcy51cmxCYXNlUGF0aCB8fCAnJ30vYnVuZGxlcy9gLFxuICAgICAgICBkZXZ0b29sTW9kdWxlRmlsZW5hbWVUZW1wbGF0ZTogJ1thYnNvbHV0ZS1yZXNvdXJjZS1wYXRoXSdcbiAgICAgIH0sXG5cbiAgICAgIHJlY29yZHNQYXRoOiByZXNvbHZlKHRoaXMuZW52LndvcmtpbmdEaXIsICd3ZWJwYWNrLnJlY29yZHMnKSxcblxuICAgICAgcGx1Z2luczogW1xuICAgICAgICBuZXcgd2VicGFjay5SZXNvbHZlclBsdWdpbihbXG4gICAgICAgICAgbmV3IERpcmVjdG9yeU5hbWVBc01haW4oKVxuICAgICAgICBdKSxcbiAgICAgICAgbmV3IHdlYnBhY2suTm9FcnJvcnNQbHVnaW4oKSxcbiAgICAgICAgbmV3IEV4dHJhY3RUZXh0UGx1Z2luKCdbbmFtZV0uc3R5bGUuY3NzJywge1xuICAgICAgICAgIGFsbENodW5rczogdHJ1ZVxuICAgICAgICB9KSxcbiAgICAgICAgbmV3IENvbW1vbnNDaHVua1BsdWdpbih7XG4gICAgICAgICAgbmFtZTogJ2NvbW1vbnMnLFxuICAgICAgICAgIGZpbGVuYW1lOiAnY29tbW9ucy5idW5kbGUuanMnXG4gICAgICAgIH0pLFxuICAgICAgICAuLi50aGlzLnBsdWdpbnNGb3JFbnYodGhpcy5lbnYuY29udGV4dC5lbnYpXG4gICAgICBdLFxuXG4gICAgICBtb2R1bGU6IHtcbiAgICAgICAgbG9hZGVyczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRlc3Q6IC9cXC5sZXNzJC8sXG4gICAgICAgICAgICBsb2FkZXI6IEV4dHJhY3RUZXh0UGx1Z2luLmV4dHJhY3QoXG4gICAgICAgICAgICAgICdzdHlsZScsXG4gICAgICAgICAgICAgIGBjc3Mke21hcFF9IWF1dG9wcmVmaXhlciR7bWFwUVByZX17IFwiYnJvd3NlcnNcIjogW1wibGFzdCAyIHZlcnNpb25zXCIsXCI+IDUlXCJdIH0hbGVzcyR7bWFwUVByZX1kdW1wTGluZU51bWJlcnM9Y29tbWVudHNgXG4gICAgICAgICAgICApXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7IHRlc3Q6IC9cXC5jc3MkLywgbG9hZGVyOiBFeHRyYWN0VGV4dFBsdWdpbi5leHRyYWN0KCdzdHlsZScsIGBjc3Mke21hcFF9YCkgfSxcbiAgICAgICAgICB7IHRlc3Q6IC9cXC5qYWRlJC8sIGxvYWRlcjogJ2phZGUnIH0sXG4gICAgICAgICAgeyB0ZXN0OiAvXFwuanNvbiQvLCBsb2FkZXI6ICdqc29uJyB9LFxuICAgICAgICAgIHsgdGVzdDogL1xcLihodG1sfHRtcGwpJC8sIGxvYWRlcjogJ3JhdycgfSxcbiAgICAgICAgICB7IHRlc3Q6IC9cXC5wbmckLywgbG9hZGVyOiAndXJsP2xpbWl0PTEwMDAwJm5hbWU9W3BhdGhdW25hbWVdLltleHRdJyB9LFxuICAgICAgICAgIHsgdGVzdDogL1xcLih3b2ZmfHdvZmYyfHR0Znxlb3R8c3ZnfGljbykoXFw/fCQpLywgbG9hZGVyOiAnZmlsZT9uYW1lPVtwYXRoXVtuYW1lXS5bZXh0XScgfSxcbiAgICAgICAgICB7IHRlc3Q6IC9bXFwvXFxcXF1zcmNbXFwvXFxcXF0ocGx1Z2luc3x1aSlbXFwvXFxcXF0uK1xcLmpzJC8sIGxvYWRlcjogYHJqcy1yZXBhY2ske21hcFF9YCB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRlc3Q6IC9cXC5qcyQvLFxuICAgICAgICAgICAgZXhjbHVkZTogYmFiZWxFeGNsdWRlLmNvbmNhdCh0aGlzLmVudi5ub1BhcnNlKSxcbiAgICAgICAgICAgIGxvYWRlcjogJ2JhYmVsJyxcbiAgICAgICAgICAgIHF1ZXJ5OiBiYWJlbE9wdGlvbnMud2VicGFja1xuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgdGVzdDogL1xcLmpzeCQvLFxuICAgICAgICAgICAgZXhjbHVkZTogYmFiZWxFeGNsdWRlLmNvbmNhdCh0aGlzLmVudi5ub1BhcnNlKSxcbiAgICAgICAgICAgIGxvYWRlcjogJ2JhYmVsJyxcbiAgICAgICAgICAgIHF1ZXJ5OiBkZWZhdWx0cyh7XG4gICAgICAgICAgICAgIG5vblN0YW5kYXJkOiB0cnVlLFxuICAgICAgICAgICAgfSwgYmFiZWxPcHRpb25zLndlYnBhY2spXG4gICAgICAgICAgfVxuICAgICAgICBdLmNvbmNhdCh0aGlzLmVudi5sb2FkZXJzKSxcbiAgICAgICAgcG9zdExvYWRlcnM6IHRoaXMuZW52LnBvc3RMb2FkZXJzIHx8IFtdLFxuICAgICAgICBub1BhcnNlOiB0aGlzLmVudi5ub1BhcnNlLFxuICAgICAgfSxcblxuICAgICAgcmVzb2x2ZToge1xuICAgICAgICBleHRlbnNpb25zOiBbJy5qcycsICcuanNvbicsICcuanN4JywgJy5sZXNzJywgJyddLFxuICAgICAgICBwb3N0Zml4ZXM6IFsnJ10sXG4gICAgICAgIG1vZHVsZXNEaXJlY3RvcmllczogWyd3ZWJwYWNrU2hpbXMnLCAnbm9kZV9tb2R1bGVzJ10sXG4gICAgICAgIGZhbGxiYWNrOiBbZnJvbVJvb3QoJ3dlYnBhY2tTaGltcycpLCBmcm9tUm9vdCgnbm9kZV9tb2R1bGVzJyldLFxuICAgICAgICBsb2FkZXJQb3N0Zml4ZXM6IFsnLWxvYWRlcicsICcnXSxcbiAgICAgICAgcm9vdDogZnJvbVJvb3QoJy4nKSxcbiAgICAgICAgYWxpYXM6IHRoaXMuZW52LmFsaWFzZXMsXG4gICAgICAgIHVuc2FmZUNhY2hlOiB0aGlzLnVuc2FmZUNhY2hlLFxuICAgICAgfSxcblxuICAgICAgcmVzb2x2ZUxvYWRlcjoge1xuICAgICAgICBhbGlhczogdHJhbnNmb3JtKHBrZy5kZXBlbmRlbmNpZXMsIGZ1bmN0aW9uIChhbGlhc2VzLCB2ZXJzaW9uLCBuYW1lKSB7XG4gICAgICAgICAgaWYgKG5hbWUuZW5kc1dpdGgoJy1sb2FkZXInKSkge1xuICAgICAgICAgICAgYWxpYXNlc1tuYW1lLnJlcGxhY2UoLy1sb2FkZXIkLywgJycpXSA9IHJlcXVpcmUucmVzb2x2ZShuYW1lKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIHt9KVxuICAgICAgfVxuICAgIH07XG4gIH1cblxuICBwbHVnaW5zRm9yRW52KGVudikge1xuICAgIGlmIChlbnYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIHJldHVybiBbXG4gICAgICBuZXcgRGVmaW5lUGx1Z2luKHtcbiAgICAgICAgJ3Byb2Nlc3MuZW52Jzoge1xuICAgICAgICAgICdOT0RFX0VOVic6ICdcInByb2R1Y3Rpb25cIidcbiAgICAgICAgfVxuICAgICAgfSksXG4gICAgICBuZXcgVWdsaWZ5SnNQbHVnaW4oe1xuICAgICAgICBjb21wcmVzczoge1xuICAgICAgICAgIHdhcm5pbmdzOiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICBzb3VyY2VNYXA6IGZhbHNlLFxuICAgICAgICBtYW5nbGU6IGZhbHNlXG4gICAgICB9KSxcbiAgICBdO1xuICB9XG5cbiAgZmFpbGVkU3RhdHNUb0Vycm9yKHN0YXRzKSB7XG4gICAgbGV0IHN0YXRGb3JtYXRPcHRzID0ge1xuICAgICAgaGFzaDogZmFsc2UsICAvLyBhZGQgdGhlIGhhc2ggb2YgdGhlIGNvbXBpbGF0aW9uXG4gICAgICB2ZXJzaW9uOiBmYWxzZSwgIC8vIGFkZCB3ZWJwYWNrIHZlcnNpb24gaW5mb3JtYXRpb25cbiAgICAgIHRpbWluZ3M6IGZhbHNlLCAgLy8gYWRkIHRpbWluZyBpbmZvcm1hdGlvblxuICAgICAgYXNzZXRzOiBmYWxzZSwgIC8vIGFkZCBhc3NldHMgaW5mb3JtYXRpb25cbiAgICAgIGNodW5rczogZmFsc2UsICAvLyBhZGQgY2h1bmsgaW5mb3JtYXRpb25cbiAgICAgIGNodW5rTW9kdWxlczogZmFsc2UsICAvLyBhZGQgYnVpbHQgbW9kdWxlcyBpbmZvcm1hdGlvbiB0byBjaHVuayBpbmZvcm1hdGlvblxuICAgICAgbW9kdWxlczogZmFsc2UsICAvLyBhZGQgYnVpbHQgbW9kdWxlcyBpbmZvcm1hdGlvblxuICAgICAgY2FjaGVkOiBmYWxzZSwgIC8vIGFkZCBhbHNvIGluZm9ybWF0aW9uIGFib3V0IGNhY2hlZCAobm90IGJ1aWx0KSBtb2R1bGVzXG4gICAgICByZWFzb25zOiBmYWxzZSwgIC8vIGFkZCBpbmZvcm1hdGlvbiBhYm91dCB0aGUgcmVhc29ucyB3aHkgbW9kdWxlcyBhcmUgaW5jbHVkZWRcbiAgICAgIHNvdXJjZTogZmFsc2UsICAvLyBhZGQgdGhlIHNvdXJjZSBjb2RlIG9mIG1vZHVsZXNcbiAgICAgIGVycm9yRGV0YWlsczogZmFsc2UsICAvLyBhZGQgZGV0YWlscyB0byBlcnJvcnMgKGxpa2UgcmVzb2x2aW5nIGxvZylcbiAgICAgIGNodW5rT3JpZ2luczogZmFsc2UsICAvLyBhZGQgdGhlIG9yaWdpbnMgb2YgY2h1bmtzIGFuZCBjaHVuayBtZXJnaW5nIGluZm9cbiAgICAgIG1vZHVsZXNTb3J0OiBmYWxzZSwgIC8vIChzdHJpbmcpIHNvcnQgdGhlIG1vZHVsZXMgYnkgdGhhdCBmaWVsZFxuICAgICAgY2h1bmtzU29ydDogZmFsc2UsICAvLyAoc3RyaW5nKSBzb3J0IHRoZSBjaHVua3MgYnkgdGhhdCBmaWVsZFxuICAgICAgYXNzZXRzU29ydDogZmFsc2UsICAvLyAoc3RyaW5nKSBzb3J0IHRoZSBhc3NldHMgYnkgdGhhdCBmaWVsZFxuICAgICAgY2hpbGRyZW46IGZhbHNlLFxuICAgIH07XG5cbiAgICBsZXQgZGV0YWlscyA9IHN0YXRzLnRvU3RyaW5nKGRlZmF1bHRzKHsgY29sb3JzOiB0cnVlIH0sIHN0YXRGb3JtYXRPcHRzKSk7XG5cbiAgICByZXR1cm4gQm9vbS5jcmVhdGUoXG4gICAgICA1MDAsXG4gICAgICBgT3B0aW1pemF0aW9ucyBmYWlsdXJlLlxcbiR7ZGV0YWlscy5zcGxpdCgnXFxuJykuam9pbignXFxuICAgICcpfVxcbmAsXG4gICAgICBzdGF0cy50b0pzb24oc3RhdEZvcm1hdE9wdHMpXG4gICAgKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEJhc2VPcHRpbWl6ZXI7XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/optimize/base_optimizer.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/vio/v3metrics/src/optimize/base_optimizer.js",
      "sourcesContent": [
        "import webpack from 'webpack';\nimport Boom from 'boom';\nimport DirectoryNameAsMain from 'webpack-directory-name-as-main';\nimport ExtractTextPlugin from 'extract-text-webpack-plugin';\nimport CommonsChunkPlugin from 'webpack/lib/optimize/CommonsChunkPlugin';\nimport DefinePlugin from 'webpack/lib/DefinePlugin';\nimport UglifyJsPlugin from 'webpack/lib/optimize/UglifyJsPlugin';\n\nimport fromRoot from '../utils/from_root';\nimport babelOptions from './babel_options';\nimport { inherits } from 'util';\nimport { defaults, transform } from 'lodash';\nimport { resolve } from 'path';\nimport { writeFile } from 'fs';\nlet babelExclude = [/[\\/\\\\](webpackShims|node_modules|bower_components)[\\/\\\\]/];\nimport pkg from '../../package.json';\n\nclass BaseOptimizer {\n  constructor(opts) {\n    this.env = opts.env;\n    this.urlBasePath = opts.urlBasePath;\n    this.bundles = opts.bundles;\n    this.profile = opts.profile || false;\n\n    switch (opts.sourceMaps) {\n      case true:\n        this.sourceMaps = 'source-map';\n        break;\n\n      case 'fast':\n        this.sourceMaps = 'cheap-module-eval-source-map';\n        break;\n\n      default:\n        this.sourceMaps = opts.sourceMaps || false;\n        break;\n    }\n\n    this.unsafeCache = opts.unsafeCache || false;\n    if (typeof this.unsafeCache === 'string') {\n      this.unsafeCache = [\n        new RegExp(this.unsafeCache.slice(1, -1))\n      ];\n    }\n  }\n\n  async initCompiler() {\n    if (this.compiler) return this.compiler;\n\n    let compilerConfig = this.getConfig();\n    this.compiler = webpack(compilerConfig);\n\n    this.compiler.plugin('done', stats => {\n      if (!this.profile) return;\n\n      let path = resolve(this.env.workingDir, 'stats.json');\n      let content = JSON.stringify(stats.toJson());\n      writeFile(path, content, function (err) {\n        if (err) throw err;\n      });\n    });\n\n    return this.compiler;\n  }\n\n  getConfig() {\n    let mapQ = this.sourceMaps ? '?sourceMap' : '';\n    let mapQPre = mapQ ? mapQ + '&' : '?';\n\n    return {\n      context: fromRoot('.'),\n      entry: this.bundles.toWebpackEntries(),\n\n      devtool: this.sourceMaps,\n      profile: this.profile || false,\n\n      output: {\n        path: this.env.workingDir,\n        filename: '[name].bundle.js',\n        sourceMapFilename: '[file].map',\n        publicPath: `${this.urlBasePath || ''}/bundles/`,\n        devtoolModuleFilenameTemplate: '[absolute-resource-path]'\n      },\n\n      recordsPath: resolve(this.env.workingDir, 'webpack.records'),\n\n      plugins: [\n        new webpack.ResolverPlugin([\n          new DirectoryNameAsMain()\n        ]),\n        new webpack.NoErrorsPlugin(),\n        new ExtractTextPlugin('[name].style.css', {\n          allChunks: true\n        }),\n        new CommonsChunkPlugin({\n          name: 'commons',\n          filename: 'commons.bundle.js'\n        }),\n        ...this.pluginsForEnv(this.env.context.env)\n      ],\n\n      module: {\n        loaders: [\n          {\n            test: /\\.less$/,\n            loader: ExtractTextPlugin.extract(\n              'style',\n              `css${mapQ}!autoprefixer${mapQPre}{ \"browsers\": [\"last 2 versions\",\"> 5%\"] }!less${mapQPre}dumpLineNumbers=comments`\n            )\n          },\n          { test: /\\.css$/, loader: ExtractTextPlugin.extract('style', `css${mapQ}`) },\n          { test: /\\.jade$/, loader: 'jade' },\n          { test: /\\.json$/, loader: 'json' },\n          { test: /\\.(html|tmpl)$/, loader: 'raw' },\n          { test: /\\.png$/, loader: 'url?limit=10000&name=[path][name].[ext]' },\n          { test: /\\.(woff|woff2|ttf|eot|svg|ico)(\\?|$)/, loader: 'file?name=[path][name].[ext]' },\n          { test: /[\\/\\\\]src[\\/\\\\](plugins|ui)[\\/\\\\].+\\.js$/, loader: `rjs-repack${mapQ}` },\n          {\n            test: /\\.js$/,\n            exclude: babelExclude.concat(this.env.noParse),\n            loader: 'babel',\n            query: babelOptions.webpack\n          },\n          {\n            test: /\\.jsx$/,\n            exclude: babelExclude.concat(this.env.noParse),\n            loader: 'babel',\n            query: defaults({\n              nonStandard: true,\n            }, babelOptions.webpack)\n          }\n        ].concat(this.env.loaders),\n        postLoaders: this.env.postLoaders || [],\n        noParse: this.env.noParse,\n      },\n\n      resolve: {\n        extensions: ['.js', '.json', '.jsx', '.less', ''],\n        postfixes: [''],\n        modulesDirectories: ['webpackShims', 'node_modules'],\n        fallback: [fromRoot('webpackShims'), fromRoot('node_modules')],\n        loaderPostfixes: ['-loader', ''],\n        root: fromRoot('.'),\n        alias: this.env.aliases,\n        unsafeCache: this.unsafeCache,\n      },\n\n      resolveLoader: {\n        alias: transform(pkg.dependencies, function (aliases, version, name) {\n          if (name.endsWith('-loader')) {\n            aliases[name.replace(/-loader$/, '')] = require.resolve(name);\n          }\n        }, {})\n      }\n    };\n  }\n\n  pluginsForEnv(env) {\n    if (env !== 'production') {\n      return [];\n    }\n\n    return [\n      new DefinePlugin({\n        'process.env': {\n          'NODE_ENV': '\"production\"'\n        }\n      }),\n      new UglifyJsPlugin({\n        compress: {\n          warnings: false\n        },\n        sourceMap: false,\n        mangle: false\n      }),\n    ];\n  }\n\n  failedStatsToError(stats) {\n    let statFormatOpts = {\n      hash: false,  // add the hash of the compilation\n      version: false,  // add webpack version information\n      timings: false,  // add timing information\n      assets: false,  // add assets information\n      chunks: false,  // add chunk information\n      chunkModules: false,  // add built modules information to chunk information\n      modules: false,  // add built modules information\n      cached: false,  // add also information about cached (not built) modules\n      reasons: false,  // add information about the reasons why modules are included\n      source: false,  // add the source code of modules\n      errorDetails: false,  // add details to errors (like resolving log)\n      chunkOrigins: false,  // add the origins of chunks and chunk merging info\n      modulesSort: false,  // (string) sort the modules by that field\n      chunksSort: false,  // (string) sort the chunks by that field\n      assetsSort: false,  // (string) sort the assets by that field\n      children: false,\n    };\n\n    let details = stats.toString(defaults({ colors: true }, statFormatOpts));\n\n    return Boom.create(\n      500,\n      `Optimizations failure.\\n${details.split('\\n').join('\\n    ')}\\n`,\n      stats.toJson(statFormatOpts)\n    );\n  }\n}\n\nmodule.exports = BaseOptimizer;\n"
      ]
    },
    "mtime": 1467036622805
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/plugins/initialize.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./plugin_init",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "pluginInit"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "async-to-generator",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nvar _plugin_init = require('./plugin_init');\n\nvar _plugin_init2 = _interopRequireDefault(_plugin_init);\n\nmodule.exports = _asyncToGenerator(function* (kbnServer, server, config) {\n\n  if (!config.get('plugins.initialize')) {\n    server.log(['info'], 'Plugin initialization disabled.');\n    return [];\n  }\n\n  var plugins = kbnServer.plugins;\n\n  // extend plugin apis with additional context\n  plugins.getPluginApis().forEach(function (api) {\n\n    Object.defineProperty(api, 'uiExports', {\n      value: kbnServer.uiExports\n    });\n  });\n\n  yield (0, _plugin_init2['default'])(plugins);\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9wbHVnaW5zL2luaXRpYWxpemUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7OzJCQUF1QixlQUFlOzs7O0FBRXRDLE1BQU0sQ0FBQyxPQUFPLHFCQUFHLFdBQWdCLFNBQVMsRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFOztBQUUxRCxNQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxvQkFBb0IsQ0FBQyxFQUFFO0FBQ3JDLFVBQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsRUFBRSxpQ0FBaUMsQ0FBQyxDQUFDO0FBQ3hELFdBQU8sRUFBRSxDQUFDO0dBQ1g7O01BRUssT0FBTyxHQUFLLFNBQVMsQ0FBckIsT0FBTzs7O0FBR2IsU0FBTyxDQUFDLGFBQWEsRUFBRSxDQUFDLE9BQU8sQ0FBQyxVQUFBLEdBQUcsRUFBSTs7QUFFckMsVUFBTSxDQUFDLGNBQWMsQ0FBQyxHQUFHLEVBQUUsV0FBVyxFQUFFO0FBQ3RDLFdBQUssRUFBRSxTQUFTLENBQUMsU0FBUztLQUMzQixDQUFDLENBQUM7R0FFSixDQUFDLENBQUM7O0FBRUgsUUFBTSw4QkFBVyxPQUFPLENBQUMsQ0FBQztDQUMzQixDQUFBLENBQUMiLCJmaWxlIjoiL2hvbWUvdmlvL3YzbWV0cmljcy9zcmMvc2VydmVyL3BsdWdpbnMvaW5pdGlhbGl6ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBwbHVnaW5Jbml0IGZyb20gJy4vcGx1Z2luX2luaXQnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGFzeW5jIGZ1bmN0aW9uIChrYm5TZXJ2ZXIsIHNlcnZlciwgY29uZmlnKSB7XG5cbiAgaWYgKCFjb25maWcuZ2V0KCdwbHVnaW5zLmluaXRpYWxpemUnKSkge1xuICAgIHNlcnZlci5sb2coWydpbmZvJ10sICdQbHVnaW4gaW5pdGlhbGl6YXRpb24gZGlzYWJsZWQuJyk7XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgbGV0IHsgcGx1Z2lucyB9ID0ga2JuU2VydmVyO1xuXG4gIC8vIGV4dGVuZCBwbHVnaW4gYXBpcyB3aXRoIGFkZGl0aW9uYWwgY29udGV4dFxuICBwbHVnaW5zLmdldFBsdWdpbkFwaXMoKS5mb3JFYWNoKGFwaSA9PiB7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoYXBpLCAndWlFeHBvcnRzJywge1xuICAgICAgdmFsdWU6IGtiblNlcnZlci51aUV4cG9ydHNcbiAgICB9KTtcblxuICB9KTtcblxuICBhd2FpdCBwbHVnaW5Jbml0KHBsdWdpbnMpO1xufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/plugins/initialize.js"
      ],
      "names": [],
      "mappings": ";;;;;;2BAAuB,eAAe;;;;AAEtC,MAAM,CAAC,OAAO,qBAAG,WAAgB,SAAS,EAAE,MAAM,EAAE,MAAM,EAAE;;AAE1D,MAAI,CAAC,MAAM,CAAC,GAAG,CAAC,oBAAoB,CAAC,EAAE;AACrC,UAAM,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,EAAE,iCAAiC,CAAC,CAAC;AACxD,WAAO,EAAE,CAAC;GACX;;MAEK,OAAO,GAAK,SAAS,CAArB,OAAO;;;AAGb,SAAO,CAAC,aAAa,EAAE,CAAC,OAAO,CAAC,UAAA,GAAG,EAAI;;AAErC,UAAM,CAAC,cAAc,CAAC,GAAG,EAAE,WAAW,EAAE;AACtC,WAAK,EAAE,SAAS,CAAC,SAAS;KAC3B,CAAC,CAAC;GAEJ,CAAC,CAAC;;AAEH,QAAM,8BAAW,OAAO,CAAC,CAAC;CAC3B,CAAA,CAAC",
      "file": "/home/vio/v3metrics/src/server/plugins/initialize.js",
      "sourcesContent": [
        "import pluginInit from './plugin_init';\n\nmodule.exports = async function (kbnServer, server, config) {\n\n  if (!config.get('plugins.initialize')) {\n    server.log(['info'], 'Plugin initialization disabled.');\n    return [];\n  }\n\n  let { plugins } = kbnServer;\n\n  // extend plugin apis with additional context\n  plugins.getPluginApis().forEach(api => {\n\n    Object.defineProperty(api, 'uiExports', {\n      value: kbnServer.uiExports\n    });\n\n  });\n\n  await pluginInit(plugins);\n};\n"
      ]
    },
    "mtime": 1467036622849
  },
  "{\"filename\":\"/home/vio/v3metrics/src/server/plugins/plugin_init.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[\"regenerator\"],\"optional\":[\"asyncToGenerator\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "includes"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "includes",
                "local": "includes"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "async-to-generator"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }\n\nvar _lodash = require('lodash');\n\nexports['default'] = _asyncToGenerator(function* (plugins) {\n  var path = [];\n\n  var initialize = _asyncToGenerator(function* (id, fn) {\n    var plugin = plugins.byId[id];\n\n    if ((0, _lodash.includes)(path, id)) {\n      throw new Error('circular dependencies found: \"' + path.concat(id).join(' -> ') + '\"');\n    }\n\n    path.push(id);\n\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = plugin.requiredIds[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var reqId = _step.value;\n\n        if (!plugins.byId[reqId]) {\n          throw new Error('Unmet requirement \"' + reqId + '\" for plugin \"' + id + '\"');\n        }\n\n        yield initialize(reqId, fn);\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator['return']) {\n          _iterator['return']();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    yield plugin[fn]();\n    path.pop();\n  });\n\n  var collection = plugins.toArray();\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = collection[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var id = _step2.value.id;\n\n      yield initialize(id, 'preInit');\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2['return']) {\n        _iterator2['return']();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n\n  var _iteratorNormalCompletion3 = true;\n  var _didIteratorError3 = false;\n  var _iteratorError3 = undefined;\n\n  try {\n    for (var _iterator3 = collection[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n      var id = _step3.value.id;\n\n      yield initialize(id, 'init');\n    }\n  } catch (err) {\n    _didIteratorError3 = true;\n    _iteratorError3 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion3 && _iterator3['return']) {\n        _iterator3['return']();\n      }\n    } finally {\n      if (_didIteratorError3) {\n        throw _iteratorError3;\n      }\n    }\n  }\n});\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9wbHVnaW5zL3BsdWdpbl9pbml0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O3NCQUF5QixRQUFROzt1Q0FFbEIsV0FBTyxPQUFPLEVBQUs7QUFDaEMsTUFBSSxJQUFJLEdBQUcsRUFBRSxDQUFDOztBQUVkLE1BQU0sVUFBVSxxQkFBRyxXQUFnQixFQUFFLEVBQUUsRUFBRSxFQUFFO0FBQ3pDLFFBQUksTUFBTSxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7O0FBRTlCLFFBQUksc0JBQVMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxFQUFFO0FBQ3RCLFlBQU0sSUFBSSxLQUFLLG9DQUFrQyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBSSxDQUFDO0tBQ25GOztBQUVELFFBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7Ozs7Ozs7QUFFZCwyQkFBa0IsTUFBTSxDQUFDLFdBQVcsOEhBQUU7WUFBN0IsS0FBSzs7QUFDWixZQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRTtBQUN4QixnQkFBTSxJQUFJLEtBQUsseUJBQXVCLEtBQUssc0JBQWlCLEVBQUUsT0FBSSxDQUFDO1NBQ3BFOztBQUVELGNBQU0sVUFBVSxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsQ0FBQztPQUM3Qjs7Ozs7Ozs7Ozs7Ozs7OztBQUVELFVBQU0sTUFBTSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUM7QUFDbkIsUUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDO0dBQ1osQ0FBQSxDQUFDOztBQUVGLE1BQU0sVUFBVSxHQUFHLE9BQU8sQ0FBQyxPQUFPLEVBQUUsQ0FBQzs7Ozs7O0FBQ3JDLDBCQUFpQixVQUFVLG1JQUFFO1VBQW5CLEVBQUUsZ0JBQUYsRUFBRTs7QUFDVixZQUFNLFVBQVUsQ0FBQyxFQUFFLEVBQUUsU0FBUyxDQUFDLENBQUM7S0FDakM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUVELDBCQUFpQixVQUFVLG1JQUFFO1VBQW5CLEVBQUUsZ0JBQUYsRUFBRTs7QUFDVixZQUFNLFVBQVUsQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDLENBQUM7S0FDOUI7Ozs7Ozs7Ozs7Ozs7OztDQUNGIiwiZmlsZSI6Ii9ob21lL3Zpby92M21ldHJpY3Mvc3JjL3NlcnZlci9wbHVnaW5zL3BsdWdpbl9pbml0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaW5jbHVkZXMgfSBmcm9tICdsb2Rhc2gnO1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyAocGx1Z2lucykgPT4ge1xuICBsZXQgcGF0aCA9IFtdO1xuXG4gIGNvbnN0IGluaXRpYWxpemUgPSBhc3luYyBmdW5jdGlvbiAoaWQsIGZuKSB7XG4gICAgbGV0IHBsdWdpbiA9IHBsdWdpbnMuYnlJZFtpZF07XG5cbiAgICBpZiAoaW5jbHVkZXMocGF0aCwgaWQpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYGNpcmN1bGFyIGRlcGVuZGVuY2llcyBmb3VuZDogXCIke3BhdGguY29uY2F0KGlkKS5qb2luKCcgLT4gJyl9XCJgKTtcbiAgICB9XG5cbiAgICBwYXRoLnB1c2goaWQpO1xuXG4gICAgZm9yIChsZXQgcmVxSWQgb2YgcGx1Z2luLnJlcXVpcmVkSWRzKSB7XG4gICAgICBpZiAoIXBsdWdpbnMuYnlJZFtyZXFJZF0pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbm1ldCByZXF1aXJlbWVudCBcIiR7cmVxSWR9XCIgZm9yIHBsdWdpbiBcIiR7aWR9XCJgKTtcbiAgICAgIH1cblxuICAgICAgYXdhaXQgaW5pdGlhbGl6ZShyZXFJZCwgZm4pO1xuICAgIH1cblxuICAgIGF3YWl0IHBsdWdpbltmbl0oKTtcbiAgICBwYXRoLnBvcCgpO1xuICB9O1xuXG4gIGNvbnN0IGNvbGxlY3Rpb24gPSBwbHVnaW5zLnRvQXJyYXkoKTtcbiAgZm9yIChsZXQge2lkfSBvZiBjb2xsZWN0aW9uKSB7XG4gICAgYXdhaXQgaW5pdGlhbGl6ZShpZCwgJ3ByZUluaXQnKTtcbiAgfVxuXG4gIGZvciAobGV0IHtpZH0gb2YgY29sbGVjdGlvbikge1xuICAgIGF3YWl0IGluaXRpYWxpemUoaWQsICdpbml0Jyk7XG4gIH1cbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/vio/v3metrics/src/server/plugins/plugin_init.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;sBAAyB,QAAQ;;uCAElB,WAAO,OAAO,EAAK;AAChC,MAAI,IAAI,GAAG,EAAE,CAAC;;AAEd,MAAM,UAAU,qBAAG,WAAgB,EAAE,EAAE,EAAE,EAAE;AACzC,QAAI,MAAM,GAAG,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;;AAE9B,QAAI,sBAAS,IAAI,EAAE,EAAE,CAAC,EAAE;AACtB,YAAM,IAAI,KAAK,oCAAkC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,OAAI,CAAC;KACnF;;AAED,QAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;;;;;;;AAEd,2BAAkB,MAAM,CAAC,WAAW,8HAAE;YAA7B,KAAK;;AACZ,YAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;AACxB,gBAAM,IAAI,KAAK,yBAAuB,KAAK,sBAAiB,EAAE,OAAI,CAAC;SACpE;;AAED,cAAM,UAAU,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;OAC7B;;;;;;;;;;;;;;;;AAED,UAAM,MAAM,CAAC,EAAE,CAAC,EAAE,CAAC;AACnB,QAAI,CAAC,GAAG,EAAE,CAAC;GACZ,CAAA,CAAC;;AAEF,MAAM,UAAU,GAAG,OAAO,CAAC,OAAO,EAAE,CAAC;;;;;;AACrC,0BAAiB,UAAU,mIAAE;UAAnB,EAAE,gBAAF,EAAE;;AACV,YAAM,UAAU,CAAC,EAAE,EAAE,SAAS,CAAC,CAAC;KACjC;;;;;;;;;;;;;;;;;;;;;AAED,0BAAiB,UAAU,mIAAE;UAAnB,EAAE,gBAAF,EAAE;;AACV,YAAM,UAAU,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC;KAC9B;;;;;;;;;;;;;;;CACF",
      "file": "/home/vio/v3metrics/src/server/plugins/plugin_init.js",
      "sourcesContent": [
        "import { includes } from 'lodash';\n\nexport default async (plugins) => {\n  let path = [];\n\n  const initialize = async function (id, fn) {\n    let plugin = plugins.byId[id];\n\n    if (includes(path, id)) {\n      throw new Error(`circular dependencies found: \"${path.concat(id).join(' -> ')}\"`);\n    }\n\n    path.push(id);\n\n    for (let reqId of plugin.requiredIds) {\n      if (!plugins.byId[reqId]) {\n        throw new Error(`Unmet requirement \"${reqId}\" for plugin \"${id}\"`);\n      }\n\n      await initialize(reqId, fn);\n    }\n\n    await plugin[fn]();\n    path.pop();\n  };\n\n  const collection = plugins.toArray();\n  for (let {id} of collection) {\n    await initialize(id, 'preInit');\n  }\n\n  for (let {id} of collection) {\n    await initialize(id, 'init');\n  }\n};\n"
      ]
    },
    "mtime": 1467036622849
  }
}